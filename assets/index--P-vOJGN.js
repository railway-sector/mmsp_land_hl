const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ElevationLayer-DGKg4Okc.js","assets/ArcGISCachedService-BpgqlwBi.js","assets/TileInfoTilemapCache-B9GM7_k-.js","assets/TilemapCache-CL8pcnqn.js","assets/WorkerHandle-6jXs1DFL.js","assets/statsWorker-BoFetfL6.js","assets/utils-BmpT-T2P.js","assets/utils-D3XyFOW6.js","assets/ClassBreaksDefinition-DGPQYNe3.js","assets/geometryEngineWorker-BkMQzpX8.js","assets/geometryEngineJSON-B_JiqPb-.js","assets/geometryEngineBase-BQTefT4Y.js","assets/_commonjsHelpers-DCkdB7M8.js","assets/CSVSourceWorker-D1kpkZ4Y.js","assets/date-DCujAECq.js","assets/OptimizedFeature-BYJMJx1R.js","assets/FeatureStore-C7jSbDmQ.js","assets/featureConversionUtils-BOtpZ_q8.js","assets/OptimizedFeatureSet-BR8EEvDc.js","assets/BoundsStore-DbvrbTA7.js","assets/PooledRBush-Di-1ZUYq.js","assets/timeSupport-CsTHXjCX.js","assets/queryUtils-ByqB75iD.js","assets/optimizedFeatureQueryEngineAdapter-BgWssnfD.js","assets/QueryEngine-Bz-4MNkM.js","assets/WhereClauseCache-Cx2Ac1a8.js","assets/WhereClause-CyUfxeBz.js","assets/QueryEngineCapabilities-DJC_YILC.js","assets/SnappingCandidate-DGkpYqI6.js","assets/FixedIntervalBinParameters-CxFeBp0j.js","assets/number-DyroU7lZ.js","assets/locationUtils-Ce-Yewec.js","assets/clientSideDefaults-BiH84fWl.js","assets/EdgeProcessingWorker-DnFCgWL3.js","assets/workerHelper-CyRdItqV.js","assets/InterleavedLayout-CWZvmIgm.js","assets/BufferView-CRM2Qdm9.js","assets/types-BKo2foNY.js","assets/VertexElementDescriptor-BLyltQyJ.js","assets/VertexAttributeLocations-BfZbt_DV.js","assets/edgeProcessing-BsINYbrI.js","assets/deduplicate-BoN7GAnB.js","assets/Indices-LA4lKeqA.js","assets/Normals-CRHk6g34.js","assets/ElevationSamplerWorker-JdPtmdVP.js","assets/MeshLocalVertexSpace-Bi7gbm07.js","assets/vertexSpaceConversion-oqOoDTnZ.js","assets/spatialReferenceEllipsoidUtils-Cdu0xM3Y.js","assets/computeTranslationToOriginAndRotation-h7NQ33GT.js","assets/projectPointToVector-D85Xttma.js","assets/meshVertexSpaceUtils-DA6R0JjA.js","assets/vec3-6IN8CcDS.js","assets/vec4-B-kfhlYB.js","assets/FeatureServiceSnappingSourceWorker-DSEixYNV.js","assets/symbologySnappingCandidates-Dn2IXOld.js","assets/pbfQueryUtils-BF1S8CCf.js","assets/pbf-4J5HFlHO.js","assets/query-BHnVjp9u.js","assets/GeoJSONSourceWorker-DVTFQUN9.js","assets/geojson-BCIvc28T.js","assets/sourceUtils-CzNYgLzU.js","assets/MemorySourceWorker-Bc2WrtkJ.js","assets/objectIdUtils-BmFjqQA3.js","assets/PBFDecoderWorker-Q_eDvUQe.js","assets/dehydratedFeatures-C0-QtmD2.js","assets/FeaturePipelineWorker-zBVUrBXI.js","assets/AttributeStore-12iprQxE.js","assets/Utils-BL1mHyjD.js","assets/UpdateTracking2D-bgZpWHwf.js","assets/FeatureStoreQueryAdapter-DBxXsW0p.js","assets/constants-BBnGEY1d.js","assets/streamLayerUtils-DFlbJ4P1.js","assets/MeshWriterRegistry-CwjIN-al.js","assets/TexturedLineMeshWriter-Do0bwL_o.js","assets/TurboLine-wITyDwzm.js","assets/grouping-DuqGltSM.js","assets/QueueProcessor-DoxQrXbJ.js","assets/FeatureMetadata-CIBkvB-2.js","assets/SourceChunkStore-ejaR0mMp.js","assets/parquet-BsuqAFm6.js","assets/operatorGeodeticDensify-CmzQjAff.js","assets/SimpleGeometryCursor-B92kdZ15.js","assets/geodeticCurveType-CirnHLSB.js","assets/normalizeUtilsSync-C3Ry78AV.js","assets/FeatureIdInfo-DWylDU93.js","assets/ogcFeatureUtils-BKZm5zSd.js","assets/CircularArray-CujHzHWW.js","assets/createConnection-C4mXnOfo.js","assets/PointCloudWorker-CG-MZlqL.js","assets/quat-BCKginnJ.js","assets/quatf64-aQ5IuZRd.js","assets/vec3f32-WCVSSNPR.js","assets/PointCloudUniqueValueRenderer-B1G_HUu2.js","assets/I3SBinaryReader-DkbJgNhA.js","assets/orientedBoundingBox-C-pDKTo8.js","assets/plane-BjSDg78E.js","assets/vectorStacks-G8YSSECN.js","assets/RasterWorker-BkGcNfzl.js","assets/PixelBlock-VEqjAEmr.js","assets/RasterSymbolizer-Cb4-FPbo.js","assets/vectorFieldUtils-BIpQze-P.js","assets/rasterFunctionHelper-FmeTgQrU.js","assets/clipUtils-DyU0QsWY.js","assets/rasterProjectionHelper-Be8l3SwV.js","assets/PolynomialTransform-BEe1jrp4.js","assets/dataUtils-qqFcS7HP.js","assets/SceneLayerSnappingSourceWorker-CsYd9uCJ.js","assets/lineSegment-DroKyVoj.js","assets/sphere-D_Kr0ui6.js","assets/Octree-_rP0CZiP.js","assets/frustum-Cb_626Bq.js","assets/SceneLayerWorker-B3N857dR.js","assets/projectVectorToVector-2zlb3A8v.js","assets/WFSSourceWorker-BlfXkm4W.js","assets/wfsUtils-hbOU6F8V.js","assets/xmlUtils-CtUoQO7q.js","assets/WorkerTileHandler-IjM681do.js","assets/constants-BHYAGdRm.js","assets/config-BOD8--da.js","assets/SourceLayerData-COJ8-eEC.js","assets/StyleRepository-DASMXNO0.js","assets/earcut-D9gy186-.js","assets/Feature3DPipelineWorker-BVoKWhpZ.js","assets/HUDMaterial.glsl-DoEyd1NW.js","assets/hydratedFeatures-CHEdTZcN.js","assets/OutputColorHighlightOID.glsl-7l95HrVu.js","assets/triangle-DtcAuROS.js","assets/renderState-CKc66y4x.js","assets/glsl-B5bJgrnA.js","assets/ShaderBuilder-Cfbkxlv9.js","assets/placementUtils-DFUWzB3Y.js","assets/sdfPrimitives-DzI-1AN1.js","assets/Texture-CBG848xy.js","assets/videoUtils-gUiGdaTv.js","assets/requestImageUtils-Pt5xRdXo.js","assets/primitiveObjectSymbolUtils-DIfxU5Fz.js","assets/RealisticTree.glsl-CkNURyKf.js","assets/VertexBuffer-BZmTbBTN.js","assets/BufferObject-ej_J2Rk4.js","assets/boundedPlane-B5X__HMH.js","assets/FlowWorker-Ca7MWq83.js","assets/ParquetSourceWorker-DHBRAyfW.js","assets/parquetUtils-BCmuSTJl.js","assets/PanoramicMeshWorker-Cw13C837.js","assets/projectOperator-DJqsgDyB.js","assets/operatorProject-CHrl7MFR.js","assets/projectOperator-DVcBn81X.js","assets/Popup-DiGKMLwd.js","assets/throttle-C4efs6Cv.js","assets/unitFormatUtils-DvyBmLrc.js","assets/quantityUtils-BqN72-vb.js","assets/AttachmentInfo-C3hzrrHF.js","assets/featureUtils-BAoA3H4b.js","assets/Heading-DjF-YaY6.js","assets/executeQueryJSON-CfW_23QK.js","assets/shared-DG_qNl4V.js","assets/isImageryGraphicOrigin-Ccuhb4eK.js","assets/isImageryTileGraphicOrigin-ZR-gBf9D.js","assets/ReactiveSet-D8AJJU0O.js","assets/ElevationQuery-CZk5wnW1.js","assets/GeometryDescriptor-CXbVaflr.js","assets/arcadeUtils-C21f3P-K.js","assets/arcade-9LR8xRiC.js","assets/arcadeEnvironment-Y7Ufe96V.js","assets/Dictionary-iSTUwi1Z.js","assets/ImmutableArray-BPVd6ESQ.js","assets/Feature-DH8Qr6Ib.js","assets/aiServices-CKqLbJEZ.js","assets/unitConversion-B9GjfC__.js","assets/rasterFieldUtils-DpRRABq1.js","assets/batchExec-DbQKLWOI.js","assets/webglDeps-CmjNAB84.js","assets/FramebufferObject-B8LzP8bP.js","assets/ProgramTemplate-wEumzy59.js","assets/VertexArrayObject-DL4FoZmY.js","assets/mapViewDeps-_ChtFB2J.js","assets/FeatureCommandQueue-Ca1605y5.js","assets/GraphShaderModule-BfPivRoJ.js","assets/utils-SUMN48Vd.js","assets/WGLContainer-DQZoIiwJ.js","assets/Container-DmkRYSm8.js","assets/SDFHelper-Cy5mOiWU.js","assets/GridShader-D4c-f-8A.js","assets/testSVGPremultipliedAlpha-NC4h1NzB.js","assets/SymbolFader-DwJ0dO3r.js","assets/RenderingContext-COkv-r26.js","assets/utils-CMAroNbf.js","assets/utils-DDjZAYSk.js","assets/GraphicsView2D-COvdF_nO.js","assets/densifyCurvedGeometry-Do5HUvIg.js","assets/GraphicContainer-XbPV7dLC.js","assets/AGraphicContainer-CaUI-zly.js","assets/TechniqueInstance-nOhYeKNW.js","assets/TileContainer-q-I9ppxW.js","assets/gridUtils-BMmmFmPH.js","assets/geodesicUtils-DX5ea5lH.js","assets/TileLayerView2D-DHBKi7Am.js","assets/imageUtils-Bv2IPEN7.js","assets/BitmapTechnique-rBG_zpvs.js","assets/bitmapUtils-DITfDwnQ.js","assets/LayerView2D-BK_gZ4lQ.js","assets/HighlightGraphicContainer-DYmegxuw.js","assets/LayerView-of2LX4ZK.js","assets/RefreshableLayerView-BXULBOql.js","assets/MapServiceLayerViewHelper-xcIV34V0.js","assets/drapedUtils-CjYqvk_2.js","assets/popupUtils-DqKbcTta.js","assets/highlightOptionsUtils-BYcRuJsV.js","assets/FeatureLayerView2D-Bbcjj8hK.js","assets/timeSupport-vRVRaC7w.js","assets/AttributeBinsFeatureSet-DvzZvKRx.js","assets/AttributeBinsQuery-DJEW8CxQ.js","assets/constants-SxxbBSOD.js","assets/BaseDynamicLayerView2D-DElvO6QF.js","assets/BitmapContainer-Dyqpce2Q.js","assets/ExportStrategy-Ryrg_Hqc.js","assets/CatalogLayerView2D-BKWD18bf.js","assets/CatalogDynamicGroupLayerView2D-Ca-Mm-Ye.js","assets/CatalogFootprintLayerView2D-BenGqSR9.js","assets/GeoRSSLayerView2D-CYetqTji.js","assets/GraphicsLayerView2D-BGCN5DEH.js","assets/GroupLayerView2D-D_gRdoG4.js","assets/ImageryLayerView2D-BERFEy55.js","assets/RasterVFDisplayObject-BhB5EB3x.js","assets/ImageryTileLayerView2D-CuJ5F52p.js","assets/datasetUtils-BlEEgI2T.js","assets/rasterUtils-DAVrEWEo.js","assets/RawBlockCache-KQ9tMslD.js","assets/KMLLayerView2D-DuW892w7.js","assets/kmlUtils-6sBebDhc.js","assets/KnowledgeGraphLayerView2D-B9wDtHYY.js","assets/MapImageLayerView2D-CAuuPrt3.js","assets/MapNotesLayerView2D-3__sDZNE.js","assets/MediaLayerView2D-DI6M83Y8.js","assets/mediaLayerUtils-BWNv19st.js","assets/OverlayContainer-DbMhZQqL.js","assets/OGCFeatureLayerView2D-Rsk7Ua0m.js","assets/RouteLayerView2D-DIfk79Ci.js","assets/Stop-CkAZVH62.js","assets/networkEnums-BMRg4RDN.js","assets/StreamLayerView2D-B5FzBV8f.js","assets/SubtypeGroupLayerView2D-BaXmbv2M.js","assets/VectorTileLayerView2D-FXFkBxQA.js","assets/VideoLayerView2D-DhWqs4vl.js","assets/GraphicsLayer-Dru4x9Vw.js","assets/videoUtils-BoZV6800.js","assets/ControlPoint-B3GQ53_u.js","assets/WMSLayerView2D-YcErkpKU.js","assets/ExportWMSImageParameters-oY-fV2Oo.js","assets/WMTSLayerView2D-DDENDYII.js","assets/ElevationProfileAnalysisView2D-HR8_kGIR.js","assets/createUtils-4ORqQrdi.js","assets/distanceOperator-BAR2Xj6A.js","assets/Point2D-CE_8fSwp.js","assets/Distance2DCalculator-CXhBP-8I-Mv4daH9n.js","assets/ProjectionTransformation-Dwa1mC9g.js","assets/Envelope2D-B-iKXdqf.js","assets/Transformation2D-DQXtCBWc.js","assets/OperatorDefinitions-DP7_WWTp.js","assets/apiConverter-hX4gF60_.js","assets/jsonConverter-BfoyRPpV.js","assets/simplifyOperator-XFfLhxxY.js","assets/operatorSimplify-D77Q3gQl.js","assets/mapCollectionUtils-yQHctw3l.js","assets/elevationInfoUtils-B2hRzzFZ.js","assets/getDefaultUnitForView-CGy0fgPH.js","assets/SketchViewModel-L72l4wp9.js","assets/hitTestSelectUtils-CcqkHMiA.js","assets/geodeticLengthOperator-CUwRJbKR.js","assets/apng-C1TNhten.js","assets/webdocSaveUtils-D-DZai9d.js","assets/originUtils-BWXIQuRu.js","assets/resourceUtils-CRuM1VQC.js","assets/resourceUtils-2WVkU8eQ.js","assets/featureLayerUtils-D7RFIz9i.js","assets/utils-CWuoLst8.js","assets/FeatureLayerSource-BZFEdvGj.js","assets/External-FSAdqaHN.js","assets/applyEditsUtils-DbxSV63H.js","assets/MeshTransform-B9UOqJzv.js","assets/axisAngleDegrees-BTdhcrUf.js","assets/editingSupport-DSRTaXuR.js","assets/QueryTask-Cp7AMUsg.js","assets/executeForIds-CEgeyQuL.js","assets/queryAssociations-bHBkuljY.js","assets/Association-B9xurx1x.js","assets/synthesizeAssociationGeometries-CRuxcHWY.js","assets/previewSymbol2D-CUeyGXIk.js","assets/bufferOperator-CMLUJXNN.js","assets/operatorBuffer-Dlc7-clS.js","assets/Bufferer-Dw9Qi4T1-CUXpVfUx.js","assets/GeometryCleaner-BEJM7I4l-IBn3R6b8.js","assets/OperatorSimplifyOGC-BGqzm2F_.js","assets/OperatorGeneralize-D7wf8-o-.js","assets/convexHullOperator-BLGFTogx.js","assets/operatorConvexHull-BigPtRBr.js","assets/lengthOperator-D94TtGql.js","assets/generalizeOperator-DN6Y7Aou.js","assets/operatorGeneralize-BKaBrlw2.js","assets/graphicBufferOperator-C3G7Zt7e.js","assets/offsetOperator-CbvQ8S5L.js","assets/operatorOffset-CQV_kGun.js","assets/simplifyOperator-CVkIL3Wn.js","assets/Legend-DxJFybgO.js","assets/BingMapsLayer-BZQmxUhV.js","assets/imageBitmapUtils-TzS7BINj.js","assets/BuildingSceneLayer-6iicLLNK.js","assets/capabilities-Cs4k8cuT.js","assets/SceneService-DhcLQl9v.js","assets/I3SLayerDefinitions-CJndivac.js","assets/I3SUtil-Y0UUQNtj.js","assets/edgeUtils-DzmNVN9T.js","assets/CSVLayer-jC7erdIq.js","assets/CatalogLayer-CLEDe7aU.js","assets/DimensionLayer-DS8axY52.js","assets/Analysis-JO1qcN_v.js","assets/GaussianSplatLayer-BAqVJCmY.js","assets/tiles3DUtils-zEGd-vGs.js","assets/GeoJSONLayer-DI7dwMiw.js","assets/ImageryLayer-C2RL1L8X.js","assets/RasterJobHandlerMixin-BSnu2d_5.js","assets/RasterPresetRendererMixin-CuNLenxP.js","assets/ImageryTileLayer-YTGt8gie.js","assets/xmlUtilities-DoFOHRKx.js","assets/IntegratedMesh3DTilesLayer-B0aBrfzW.js","assets/SceneModifications-D_Ba4-Z4.js","assets/IntegratedMeshLayer-BRg_nsT4.js","assets/KMLLayer-B5viyqim.js","assets/KnowledgeGraphLayer-D6Hs1LHg.js","assets/KnowledgeGraphSublayer-BqBexcWC.js","assets/knowledgeGraphService-C3n2J-2o.js","assets/GPMessage-Bk66joGI.js","assets/GraphQueryStreaming-BY8XeWYy.js","assets/LineOfSightLayer-JwKv2dL_.js","assets/featureReferenceUtils-Bmc0F0Sk.js","assets/LinkChartLayer-DnKVC3SF.js","assets/MapImageLayer-C5uTdzPA.js","assets/SublayersOwner-T0N-CD1Q.js","assets/MapNotesLayer-DONcD9Cl.js","assets/MediaLayer-XiZSDwbw.js","assets/OGCFeatureLayer-jf4PpA3Y.js","assets/OpenStreetMapLayer-DWSQa1xK.js","assets/WebTileLayer-CspaJxoO.js","assets/ParquetLayer-C1i0yygH.js","assets/PointCloudLayer-CLdyADZw.js","assets/RouteLayer-B_25EkBt.js","assets/SceneLayer-BrJ2VY0H.js","assets/meshSpatialReferenceScaleUtils-BLh8VYuF.js","assets/StreamLayer-DG_aBtcP.js","assets/TileLayer-ziOxibf1.js","assets/VectorTileLayer-CG6Sbc9R.js","assets/VideoLayer-CdhcxRfj.js","assets/ViewshedLayer-C93b2JGI.js","assets/VoxelLayer-D4SgGcbe.js","assets/WCSLayer-BBoW3Cx9.js","assets/crsUtils-DAndLU68.js","assets/WFSLayer-C-H4vfl3.js","assets/WMSLayer-BAwiXpHc.js","assets/WMTSLayer-C4rkYwv7.js","assets/groupLayerUtils-B8U2yMT0.js"])))=>i.map(i=>d[i]);
var MIe=Object.getPrototypeOf;var AIe=Reflect.get;var $te=t=>{throw TypeError(t)};var OV=(t,e,i)=>e.has(t)||$te("Cannot "+i);var or=(t,e,i)=>(OV(t,e,"read from private field"),i?i.call(t):e.get(t)),Vu=(t,e,i)=>e.has(t)?$te("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,i),Bu=(t,e,i,r)=>(OV(t,e,"write to private field"),r?r.call(t,i):e.set(t,i),i),Xk=(t,e,i)=>(OV(t,e,"access private method"),i);var Tte=(t,e,i)=>AIe(MIe(t),i,e);function PIe(t,e){for(var i=0;i<e.length;i++){const r=e[i];if(typeof r!="string"&&!Array.isArray(r)){for(const n in r)if(n!=="default"&&!(n in t)){const s=Object.getOwnPropertyDescriptor(r,n);s&&Object.defineProperty(t,n,s.get?s:{enumerable:!0,get:()=>r[n]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function i(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(n){if(n.ep)return;n.ep=!0;const s=i(n);fetch(n.href,s)}})();function OIe(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var LV={exports:{}},Jk={};var kte;function LIe(){if(kte)return Jk;kte=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function i(r,n,s){var a=null;if(s!==void 0&&(a=""+s),n.key!==void 0&&(a=""+n.key),"key"in n){s={};for(var o in n)o!=="key"&&(s[o]=n[o])}else s=n;return n=s.ref,{$$typeof:t,type:r,key:a,ref:n!==void 0?n:null,props:s}}return Jk.Fragment=e,Jk.jsx=i,Jk.jsxs=i,Jk}var Ete;function DIe(){return Ete||(Ete=1,LV.exports=LIe()),LV.exports}var ht=DIe(),DV={exports:{}},ui={};var Cte;function RIe(){if(Cte)return ui;Cte=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),n=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),a=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.for("react.activity"),g=Symbol.iterator;function y(oe){return oe===null||typeof oe!="object"?null:(oe=g&&oe[g]||oe["@@iterator"],typeof oe=="function"?oe:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,S={};function $(oe,be,Le){this.props=oe,this.context=be,this.refs=S,this.updater=Le||b}$.prototype.isReactComponent={},$.prototype.setState=function(oe,be){if(typeof oe!="object"&&typeof oe!="function"&&oe!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,oe,be,"setState")},$.prototype.forceUpdate=function(oe){this.updater.enqueueForceUpdate(this,oe,"forceUpdate")};function C(){}C.prototype=$.prototype;function I(oe,be,Le){this.props=oe,this.context=be,this.refs=S,this.updater=Le||b}var P=I.prototype=new C;P.constructor=I,_(P,$.prototype),P.isPureReactComponent=!0;var O=Array.isArray;function N(){}var R={H:null,A:null,T:null,S:null},G=Object.prototype.hasOwnProperty;function Y(oe,be,Le){var Je=Le.ref;return{$$typeof:t,type:oe,key:be,ref:Je!==void 0?Je:null,props:Le}}function Q(oe,be){return Y(oe.type,be,oe.props)}function ae(oe){return typeof oe=="object"&&oe!==null&&oe.$$typeof===t}function ce(oe){var be={"=":"=0",":":"=2"};return"$"+oe.replace(/[=:]/g,function(Le){return be[Le]})}var ne=/\/+/g;function K(oe,be){return typeof oe=="object"&&oe!==null&&oe.key!=null?ce(""+oe.key):be.toString(36)}function le(oe){switch(oe.status){case"fulfilled":return oe.value;case"rejected":throw oe.reason;default:switch(typeof oe.status=="string"?oe.then(N,N):(oe.status="pending",oe.then(function(be){oe.status==="pending"&&(oe.status="fulfilled",oe.value=be)},function(be){oe.status==="pending"&&(oe.status="rejected",oe.reason=be)})),oe.status){case"fulfilled":return oe.value;case"rejected":throw oe.reason}}throw oe}function re(oe,be,Le,Je,st){var ut=typeof oe;(ut==="undefined"||ut==="boolean")&&(oe=null);var Pt=!1;if(oe===null)Pt=!0;else switch(ut){case"bigint":case"string":case"number":Pt=!0;break;case"object":switch(oe.$$typeof){case t:case e:Pt=!0;break;case h:return Pt=oe._init,re(Pt(oe._payload),be,Le,Je,st)}}if(Pt)return st=st(oe),Pt=Je===""?"."+K(oe,0):Je,O(st)?(Le="",Pt!=null&&(Le=Pt.replace(ne,"$&/")+"/"),re(st,be,Le,"",function(Wn){return Wn})):st!=null&&(ae(st)&&(st=Q(st,Le+(st.key==null||oe&&oe.key===st.key?"":(""+st.key).replace(ne,"$&/")+"/")+Pt)),be.push(st)),1;Pt=0;var pi=Je===""?".":Je+":";if(O(oe))for(var it=0;it<oe.length;it++)Je=oe[it],ut=pi+K(Je,it),Pt+=re(Je,be,Le,ut,st);else if(it=y(oe),typeof it=="function")for(oe=it.call(oe),it=0;!(Je=oe.next()).done;)Je=Je.value,ut=pi+K(Je,it++),Pt+=re(Je,be,Le,ut,st);else if(ut==="object"){if(typeof oe.then=="function")return re(le(oe),be,Le,Je,st);throw be=String(oe),Error("Objects are not valid as a React child (found: "+(be==="[object Object]"?"object with keys {"+Object.keys(oe).join(", ")+"}":be)+"). If you meant to render a collection of children, use an array instead.")}return Pt}function he(oe,be,Le){if(oe==null)return oe;var Je=[],st=0;return re(oe,Je,"","",function(ut){return be.call(Le,ut,st++)}),Je}function xe(oe){if(oe._status===-1){var be=oe._result;be=be(),be.then(function(Le){(oe._status===0||oe._status===-1)&&(oe._status=1,oe._result=Le)},function(Le){(oe._status===0||oe._status===-1)&&(oe._status=2,oe._result=Le)}),oe._status===-1&&(oe._status=0,oe._result=be)}if(oe._status===1)return oe._result.default;throw oe._result}var Pe=typeof reportError=="function"?reportError:function(oe){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var be=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof oe=="object"&&oe!==null&&typeof oe.message=="string"?String(oe.message):String(oe),error:oe});if(!window.dispatchEvent(be))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",oe);return}console.error(oe)},He={map:he,forEach:function(oe,be,Le){he(oe,function(){be.apply(this,arguments)},Le)},count:function(oe){var be=0;return he(oe,function(){be++}),be},toArray:function(oe){return he(oe,function(be){return be})||[]},only:function(oe){if(!ae(oe))throw Error("React.Children.only expected to receive a single React element child.");return oe}};return ui.Activity=f,ui.Children=He,ui.Component=$,ui.Fragment=i,ui.Profiler=n,ui.PureComponent=I,ui.StrictMode=r,ui.Suspense=l,ui.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,ui.__COMPILER_RUNTIME={__proto__:null,c:function(oe){return R.H.useMemoCache(oe)}},ui.cache=function(oe){return function(){return oe.apply(null,arguments)}},ui.cacheSignal=function(){return null},ui.cloneElement=function(oe,be,Le){if(oe==null)throw Error("The argument must be a React element, but you passed "+oe+".");var Je=_({},oe.props),st=oe.key;if(be!=null)for(ut in be.key!==void 0&&(st=""+be.key),be)!G.call(be,ut)||ut==="key"||ut==="__self"||ut==="__source"||ut==="ref"&&be.ref===void 0||(Je[ut]=be[ut]);var ut=arguments.length-2;if(ut===1)Je.children=Le;else if(1<ut){for(var Pt=Array(ut),pi=0;pi<ut;pi++)Pt[pi]=arguments[pi+2];Je.children=Pt}return Y(oe.type,st,Je)},ui.createContext=function(oe){return oe={$$typeof:a,_currentValue:oe,_currentValue2:oe,_threadCount:0,Provider:null,Consumer:null},oe.Provider=oe,oe.Consumer={$$typeof:s,_context:oe},oe},ui.createElement=function(oe,be,Le){var Je,st={},ut=null;if(be!=null)for(Je in be.key!==void 0&&(ut=""+be.key),be)G.call(be,Je)&&Je!=="key"&&Je!=="__self"&&Je!=="__source"&&(st[Je]=be[Je]);var Pt=arguments.length-2;if(Pt===1)st.children=Le;else if(1<Pt){for(var pi=Array(Pt),it=0;it<Pt;it++)pi[it]=arguments[it+2];st.children=pi}if(oe&&oe.defaultProps)for(Je in Pt=oe.defaultProps,Pt)st[Je]===void 0&&(st[Je]=Pt[Je]);return Y(oe,ut,st)},ui.createRef=function(){return{current:null}},ui.forwardRef=function(oe){return{$$typeof:o,render:oe}},ui.isValidElement=ae,ui.lazy=function(oe){return{$$typeof:h,_payload:{_status:-1,_result:oe},_init:xe}},ui.memo=function(oe,be){return{$$typeof:c,type:oe,compare:be===void 0?null:be}},ui.startTransition=function(oe){var be=R.T,Le={};R.T=Le;try{var Je=oe(),st=R.S;st!==null&&st(Le,Je),typeof Je=="object"&&Je!==null&&typeof Je.then=="function"&&Je.then(N,Pe)}catch(ut){Pe(ut)}finally{be!==null&&Le.types!==null&&(be.types=Le.types),R.T=be}},ui.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},ui.use=function(oe){return R.H.use(oe)},ui.useActionState=function(oe,be,Le){return R.H.useActionState(oe,be,Le)},ui.useCallback=function(oe,be){return R.H.useCallback(oe,be)},ui.useContext=function(oe){return R.H.useContext(oe)},ui.useDebugValue=function(){},ui.useDeferredValue=function(oe,be){return R.H.useDeferredValue(oe,be)},ui.useEffect=function(oe,be){return R.H.useEffect(oe,be)},ui.useEffectEvent=function(oe){return R.H.useEffectEvent(oe)},ui.useId=function(){return R.H.useId()},ui.useImperativeHandle=function(oe,be,Le){return R.H.useImperativeHandle(oe,be,Le)},ui.useInsertionEffect=function(oe,be){return R.H.useInsertionEffect(oe,be)},ui.useLayoutEffect=function(oe,be){return R.H.useLayoutEffect(oe,be)},ui.useMemo=function(oe,be){return R.H.useMemo(oe,be)},ui.useOptimistic=function(oe,be){return R.H.useOptimistic(oe,be)},ui.useReducer=function(oe,be,Le){return R.H.useReducer(oe,be,Le)},ui.useRef=function(oe){return R.H.useRef(oe)},ui.useState=function(oe){return R.H.useState(oe)},ui.useSyncExternalStore=function(oe,be,Le){return R.H.useSyncExternalStore(oe,be,Le)},ui.useTransition=function(){return R.H.useTransition()},ui.version="19.2.4",ui}var Ite;function OW(){return Ite||(Ite=1,DV.exports=RIe()),DV.exports}var je=OW();const Che=OIe(je),Mte=PIe({__proto__:null,default:Che},[je]);var RV={exports:{}},Kk={},zV={exports:{}},FV={};var Ate;function zIe(){return Ate||(Ate=1,(function(t){function e(re,he){var xe=re.length;re.push(he);e:for(;0<xe;){var Pe=xe-1>>>1,He=re[Pe];if(0<n(He,he))re[Pe]=he,re[xe]=He,xe=Pe;else break e}}function i(re){return re.length===0?null:re[0]}function r(re){if(re.length===0)return null;var he=re[0],xe=re.pop();if(xe!==he){re[0]=xe;e:for(var Pe=0,He=re.length,oe=He>>>1;Pe<oe;){var be=2*(Pe+1)-1,Le=re[be],Je=be+1,st=re[Je];if(0>n(Le,xe))Je<He&&0>n(st,Le)?(re[Pe]=st,re[Je]=xe,Pe=Je):(re[Pe]=Le,re[be]=xe,Pe=be);else if(Je<He&&0>n(st,xe))re[Pe]=st,re[Je]=xe,Pe=Je;else break e}}return he}function n(re,he){var xe=re.sortIndex-he.sortIndex;return xe!==0?xe:re.id-he.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var l=[],c=[],h=1,f=null,g=3,y=!1,b=!1,_=!1,S=!1,$=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;function P(re){for(var he=i(c);he!==null;){if(he.callback===null)r(c);else if(he.startTime<=re)r(c),he.sortIndex=he.expirationTime,e(l,he);else break;he=i(c)}}function O(re){if(_=!1,P(re),!b)if(i(l)!==null)b=!0,N||(N=!0,ce());else{var he=i(c);he!==null&&le(O,he.startTime-re)}}var N=!1,R=-1,G=5,Y=-1;function Q(){return S?!0:!(t.unstable_now()-Y<G)}function ae(){if(S=!1,N){var re=t.unstable_now();Y=re;var he=!0;try{e:{b=!1,_&&(_=!1,C(R),R=-1),y=!0;var xe=g;try{t:{for(P(re),f=i(l);f!==null&&!(f.expirationTime>re&&Q());){var Pe=f.callback;if(typeof Pe=="function"){f.callback=null,g=f.priorityLevel;var He=Pe(f.expirationTime<=re);if(re=t.unstable_now(),typeof He=="function"){f.callback=He,P(re),he=!0;break t}f===i(l)&&r(l),P(re)}else r(l);f=i(l)}if(f!==null)he=!0;else{var oe=i(c);oe!==null&&le(O,oe.startTime-re),he=!1}}break e}finally{f=null,g=xe,y=!1}he=void 0}}finally{he?ce():N=!1}}}var ce;if(typeof I=="function")ce=function(){I(ae)};else if(typeof MessageChannel<"u"){var ne=new MessageChannel,K=ne.port2;ne.port1.onmessage=ae,ce=function(){K.postMessage(null)}}else ce=function(){$(ae,0)};function le(re,he){R=$(function(){re(t.unstable_now())},he)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(re){re.callback=null},t.unstable_forceFrameRate=function(re){0>re||125<re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):G=0<re?Math.floor(1e3/re):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_next=function(re){switch(g){case 1:case 2:case 3:var he=3;break;default:he=g}var xe=g;g=he;try{return re()}finally{g=xe}},t.unstable_requestPaint=function(){S=!0},t.unstable_runWithPriority=function(re,he){switch(re){case 1:case 2:case 3:case 4:case 5:break;default:re=3}var xe=g;g=re;try{return he()}finally{g=xe}},t.unstable_scheduleCallback=function(re,he,xe){var Pe=t.unstable_now();switch(typeof xe=="object"&&xe!==null?(xe=xe.delay,xe=typeof xe=="number"&&0<xe?Pe+xe:Pe):xe=Pe,re){case 1:var He=-1;break;case 2:He=250;break;case 5:He=1073741823;break;case 4:He=1e4;break;default:He=5e3}return He=xe+He,re={id:h++,callback:he,priorityLevel:re,startTime:xe,expirationTime:He,sortIndex:-1},xe>Pe?(re.sortIndex=xe,e(c,re),i(l)===null&&re===i(c)&&(_?(C(R),R=-1):_=!0,le(O,xe-Pe))):(re.sortIndex=He,e(l,re),b||y||(b=!0,N||(N=!0,ce()))),re},t.unstable_shouldYield=Q,t.unstable_wrapCallback=function(re){var he=g;return function(){var xe=g;g=he;try{return re.apply(this,arguments)}finally{g=xe}}}})(FV)),FV}var Pte;function FIe(){return Pte||(Pte=1,zV.exports=zIe()),zV.exports}var NV={exports:{}},Fa={};var Ote;function NIe(){if(Ote)return Fa;Ote=1;var t=OW();function e(l){var c="https://react.dev/errors/"+l;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)c+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+l+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var r={d:{f:i,r:function(){throw Error(e(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},n=Symbol.for("react.portal");function s(l,c,h){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:n,key:f==null?null:""+f,children:l,containerInfo:c,implementation:h}}var a=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(l,c){if(l==="font")return"";if(typeof c=="string")return c==="use-credentials"?c:""}return Fa.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Fa.createPortal=function(l,c){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)throw Error(e(299));return s(l,c,null,h)},Fa.flushSync=function(l){var c=a.T,h=r.p;try{if(a.T=null,r.p=2,l)return l()}finally{a.T=c,r.p=h,r.d.f()}},Fa.preconnect=function(l,c){typeof l=="string"&&(c?(c=c.crossOrigin,c=typeof c=="string"?c==="use-credentials"?c:"":void 0):c=null,r.d.C(l,c))},Fa.prefetchDNS=function(l){typeof l=="string"&&r.d.D(l)},Fa.preinit=function(l,c){if(typeof l=="string"&&c&&typeof c.as=="string"){var h=c.as,f=o(h,c.crossOrigin),g=typeof c.integrity=="string"?c.integrity:void 0,y=typeof c.fetchPriority=="string"?c.fetchPriority:void 0;h==="style"?r.d.S(l,typeof c.precedence=="string"?c.precedence:void 0,{crossOrigin:f,integrity:g,fetchPriority:y}):h==="script"&&r.d.X(l,{crossOrigin:f,integrity:g,fetchPriority:y,nonce:typeof c.nonce=="string"?c.nonce:void 0})}},Fa.preinitModule=function(l,c){if(typeof l=="string")if(typeof c=="object"&&c!==null){if(c.as==null||c.as==="script"){var h=o(c.as,c.crossOrigin);r.d.M(l,{crossOrigin:h,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0})}}else c==null&&r.d.M(l)},Fa.preload=function(l,c){if(typeof l=="string"&&typeof c=="object"&&c!==null&&typeof c.as=="string"){var h=c.as,f=o(h,c.crossOrigin);r.d.L(l,h,{crossOrigin:f,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0,type:typeof c.type=="string"?c.type:void 0,fetchPriority:typeof c.fetchPriority=="string"?c.fetchPriority:void 0,referrerPolicy:typeof c.referrerPolicy=="string"?c.referrerPolicy:void 0,imageSrcSet:typeof c.imageSrcSet=="string"?c.imageSrcSet:void 0,imageSizes:typeof c.imageSizes=="string"?c.imageSizes:void 0,media:typeof c.media=="string"?c.media:void 0})}},Fa.preloadModule=function(l,c){if(typeof l=="string")if(c){var h=o(c.as,c.crossOrigin);r.d.m(l,{as:typeof c.as=="string"&&c.as!=="script"?c.as:void 0,crossOrigin:h,integrity:typeof c.integrity=="string"?c.integrity:void 0})}else r.d.m(l)},Fa.requestFormReset=function(l){r.d.r(l)},Fa.unstable_batchedUpdates=function(l,c){return l(c)},Fa.useFormState=function(l,c,h){return a.H.useFormState(l,c,h)},Fa.useFormStatus=function(){return a.H.useHostTransitionStatus()},Fa.version="19.2.4",Fa}var Lte;function Ihe(){if(Lte)return NV.exports;Lte=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),NV.exports=NIe(),NV.exports}var Dte;function jIe(){if(Dte)return Kk;Dte=1;var t=FIe(),e=OW(),i=Ihe();function r(u){var p="https://react.dev/errors/"+u;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)p+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+u+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(u){return!(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)}function s(u){var p=u,v=u;if(u.alternate)for(;p.return;)p=p.return;else{u=p;do p=u,(p.flags&4098)!==0&&(v=p.return),u=p.return;while(u)}return p.tag===3?v:null}function a(u){if(u.tag===13){var p=u.memoizedState;if(p===null&&(u=u.alternate,u!==null&&(p=u.memoizedState)),p!==null)return p.dehydrated}return null}function o(u){if(u.tag===31){var p=u.memoizedState;if(p===null&&(u=u.alternate,u!==null&&(p=u.memoizedState)),p!==null)return p.dehydrated}return null}function l(u){if(s(u)!==u)throw Error(r(188))}function c(u){var p=u.alternate;if(!p){if(p=s(u),p===null)throw Error(r(188));return p!==u?null:u}for(var v=u,x=p;;){var E=v.return;if(E===null)break;var M=E.alternate;if(M===null){if(x=E.return,x!==null){v=x;continue}break}if(E.child===M.child){for(M=E.child;M;){if(M===v)return l(E),u;if(M===x)return l(E),p;M=M.sibling}throw Error(r(188))}if(v.return!==x.return)v=E,x=M;else{for(var j=!1,Z=E.child;Z;){if(Z===v){j=!0,v=E,x=M;break}if(Z===x){j=!0,x=E,v=M;break}Z=Z.sibling}if(!j){for(Z=M.child;Z;){if(Z===v){j=!0,v=M,x=E;break}if(Z===x){j=!0,x=M,v=E;break}Z=Z.sibling}if(!j)throw Error(r(189))}}if(v.alternate!==x)throw Error(r(190))}if(v.tag!==3)throw Error(r(188));return v.stateNode.current===v?u:p}function h(u){var p=u.tag;if(p===5||p===26||p===27||p===6)return u;for(u=u.child;u!==null;){if(p=h(u),p!==null)return p;u=u.sibling}return null}var f=Object.assign,g=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),$=Symbol.for("react.profiler"),C=Symbol.for("react.consumer"),I=Symbol.for("react.context"),P=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),G=Symbol.for("react.lazy"),Y=Symbol.for("react.activity"),Q=Symbol.for("react.memo_cache_sentinel"),ae=Symbol.iterator;function ce(u){return u===null||typeof u!="object"?null:(u=ae&&u[ae]||u["@@iterator"],typeof u=="function"?u:null)}var ne=Symbol.for("react.client.reference");function K(u){if(u==null)return null;if(typeof u=="function")return u.$$typeof===ne?null:u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case _:return"Fragment";case $:return"Profiler";case S:return"StrictMode";case O:return"Suspense";case N:return"SuspenseList";case Y:return"Activity"}if(typeof u=="object")switch(u.$$typeof){case b:return"Portal";case I:return u.displayName||"Context";case C:return(u._context.displayName||"Context")+".Consumer";case P:var p=u.render;return u=u.displayName,u||(u=p.displayName||p.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case R:return p=u.displayName||null,p!==null?p:K(u.type)||"Memo";case G:p=u._payload,u=u._init;try{return K(u(p))}catch{}}return null}var le=Array.isArray,re=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,xe={pending:!1,data:null,method:null,action:null},Pe=[],He=-1;function oe(u){return{current:u}}function be(u){0>He||(u.current=Pe[He],Pe[He]=null,He--)}function Le(u,p){He++,Pe[He]=u.current,u.current=p}var Je=oe(null),st=oe(null),ut=oe(null),Pt=oe(null);function pi(u,p){switch(Le(ut,p),Le(st,u),Le(Je,null),p.nodeType){case 9:case 11:u=(u=p.documentElement)&&(u=u.namespaceURI)?Wee(u):0;break;default:if(u=p.tagName,p=p.namespaceURI)p=Wee(p),u=Yee(p,u);else switch(u){case"svg":u=1;break;case"math":u=2;break;default:u=0}}be(Je),Le(Je,u)}function it(){be(Je),be(st),be(ut)}function Wn(u){u.memoizedState!==null&&Le(Pt,u);var p=Je.current,v=Yee(p,u.type);p!==v&&(Le(st,u),Le(Je,v))}function fn(u){st.current===u&&(be(Je),be(st)),Pt.current===u&&(be(Pt),qk._currentValue=xe)}var El,Ud;function ra(u){if(El===void 0)try{throw Error()}catch(v){var p=v.stack.trim().match(/\n( *(at )?)/);El=p&&p[1]||"",Ud=-1<v.stack.indexOf(`
    at`)?" (<anonymous>)":-1<v.stack.indexOf("@")?"@unknown:0:0":""}return`
`+El+u+Ud}var Cl=!1;function Il(u,p){if(!u||Cl)return"";Cl=!0;var v=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var x={DetermineComponentFrameRoot:function(){try{if(p){var Ge=function(){throw Error()};if(Object.defineProperty(Ge.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ge,[])}catch(Me){var Ce=Me}Reflect.construct(u,[],Ge)}else{try{Ge.call()}catch(Me){Ce=Me}u.call(Ge.prototype)}}else{try{throw Error()}catch(Me){Ce=Me}(Ge=u())&&typeof Ge.catch=="function"&&Ge.catch(function(){})}}catch(Me){if(Me&&Ce&&typeof Me.stack=="string")return[Me.stack,Ce.stack]}return[null,null]}};x.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var E=Object.getOwnPropertyDescriptor(x.DetermineComponentFrameRoot,"name");E&&E.configurable&&Object.defineProperty(x.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var M=x.DetermineComponentFrameRoot(),j=M[0],Z=M[1];if(j&&Z){var ue=j.split(`
`),Ee=Z.split(`
`);for(E=x=0;x<ue.length&&!ue[x].includes("DetermineComponentFrameRoot");)x++;for(;E<Ee.length&&!Ee[E].includes("DetermineComponentFrameRoot");)E++;if(x===ue.length||E===Ee.length)for(x=ue.length-1,E=Ee.length-1;1<=x&&0<=E&&ue[x]!==Ee[E];)E--;for(;1<=x&&0<=E;x--,E--)if(ue[x]!==Ee[E]){if(x!==1||E!==1)do if(x--,E--,0>E||ue[x]!==Ee[E]){var Fe=`
`+ue[x].replace(" at new "," at ");return u.displayName&&Fe.includes("<anonymous>")&&(Fe=Fe.replace("<anonymous>",u.displayName)),Fe}while(1<=x&&0<=E);break}}}finally{Cl=!1,Error.prepareStackTrace=v}return(v=u?u.displayName||u.name:"")?ra(v):""}function A_(u,p){switch(u.tag){case 26:case 27:case 5:return ra(u.type);case 16:return ra("Lazy");case 13:return u.child!==p&&p!==null?ra("Suspense Fallback"):ra("Suspense");case 19:return ra("SuspenseList");case 0:case 15:return Il(u.type,!1);case 11:return Il(u.type.render,!1);case 1:return Il(u.type,!0);case 31:return ra("Activity");default:return""}}function Hd(u){try{var p="",v=null;do p+=A_(u,v),v=u,u=u.return;while(u);return p}catch(x){return`
Error generating stack: `+x.message+`
`+x.stack}}var dg=Object.prototype.hasOwnProperty,Eu=t.unstable_scheduleCallback,na=t.unstable_cancelCallback,P_=t.unstable_shouldYield,O_=t.unstable_requestPaint,ls=t.unstable_now,L_=t.unstable_getCurrentPriorityLevel,Gd=t.unstable_ImmediatePriority,D_=t.unstable_UserBlockingPriority,qd=t.unstable_NormalPriority,rk=t.unstable_LowPriority,hg=t.unstable_IdlePriority,Gv=t.log,qv=t.unstable_setDisableYieldValue,Wd=null,Rs=null;function vo(u){if(typeof Gv=="function"&&qv(u),Rs&&typeof Rs.setStrictMode=="function")try{Rs.setStrictMode(Wd,u)}catch{}}var zs=Math.clz32?Math.clz32:Xp,R_=Math.log,Zp=Math.LN2;function Xp(u){return u>>>=0,u===0?32:31-(R_(u)/Zp|0)|0}var Ml=256,Jp=262144,Yd=4194304;function Cc(u){var p=u&42;if(p!==0)return p;switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return u&261888;case 262144:case 524288:case 1048576:case 2097152:return u&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return u&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return u}}function Zd(u,p,v){var x=u.pendingLanes;if(x===0)return 0;var E=0,M=u.suspendedLanes,j=u.pingedLanes;u=u.warmLanes;var Z=x&134217727;return Z!==0?(x=Z&~M,x!==0?E=Cc(x):(j&=Z,j!==0?E=Cc(j):v||(v=Z&~u,v!==0&&(E=Cc(v))))):(Z=x&~M,Z!==0?E=Cc(Z):j!==0?E=Cc(j):v||(v=x&~u,v!==0&&(E=Cc(v)))),E===0?0:p!==0&&p!==E&&(p&M)===0&&(M=E&-E,v=p&-p,M>=v||M===32&&(v&4194048)!==0)?p:E}function Cu(u,p){return(u.pendingLanes&~(u.suspendedLanes&~u.pingedLanes)&p)===0}function z_(u,p){switch(u){case 1:case 2:case 4:case 8:case 64:return p+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ie(){var u=Yd;return Yd<<=1,(Yd&62914560)===0&&(Yd=4194304),u}function ar(u){for(var p=[],v=0;31>v;v++)p.push(u);return p}function Da(u,p){u.pendingLanes|=p,p!==268435456&&(u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0)}function Iu(u,p,v,x,E,M){var j=u.pendingLanes;u.pendingLanes=v,u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0,u.expiredLanes&=v,u.entangledLanes&=v,u.errorRecoveryDisabledLanes&=v,u.shellSuspendCounter=0;var Z=u.entanglements,ue=u.expirationTimes,Ee=u.hiddenUpdates;for(v=j&~v;0<v;){var Fe=31-zs(v),Ge=1<<Fe;Z[Fe]=0,ue[Fe]=-1;var Ce=Ee[Fe];if(Ce!==null)for(Ee[Fe]=null,Fe=0;Fe<Ce.length;Fe++){var Me=Ce[Fe];Me!==null&&(Me.lane&=-536870913)}v&=~Ge}x!==0&&Ra(u,x,0),M!==0&&E===0&&u.tag!==0&&(u.suspendedLanes|=M&~(j&~p))}function Ra(u,p,v){u.pendingLanes|=p,u.suspendedLanes&=~p;var x=31-zs(p);u.entangledLanes|=p,u.entanglements[x]=u.entanglements[x]|1073741824|v&261930}function Kp(u,p){var v=u.entangledLanes|=p;for(u=u.entanglements;v;){var x=31-zs(v),E=1<<x;E&p|u[x]&p&&(u[x]|=p),v&=~E}}function bt(u,p){var v=p&-p;return v=(v&42)!==0?1:Fs(v),(v&(u.suspendedLanes|p))!==0?0:v}function Fs(u){switch(u){case 2:u=1;break;case 8:u=4;break;case 32:u=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:u=128;break;case 268435456:u=134217728;break;default:u=0}return u}function Al(u){return u&=-u,2<u?8<u?(u&134217727)!==0?32:268435456:8:2}function Ki(){var u=he.p;return u!==0?u:(u=window.event,u===void 0?32:yte(u.type))}function Xd(u,p){var v=he.p;try{return he.p=u,p()}finally{he.p=v}}var Ic=Math.random().toString(36).slice(2),hr="__reactFiber$"+Ic,zr="__reactProps$"+Ic,Ft="__reactContainer$"+Ic,Zt="__reactEvents$"+Ic,F_="__reactListeners$"+Ic,N_="__reactHandles$"+Ic,j_="__reactResources$"+Ic,Pl="__reactMarker$"+Ic;function Mu(u){delete u[hr],delete u[zr],delete u[Zt],delete u[F_],delete u[N_]}function Jd(u){var p=u[hr];if(p)return p;for(var v=u.parentNode;v;){if(p=v[Ft]||v[hr]){if(v=p.alternate,p.child!==null||v!==null&&v.child!==null)for(u=tte(u);u!==null;){if(v=u[hr])return v;u=tte(u)}return p}u=v,v=u.parentNode}return null}function Mc(u){if(u=u[hr]||u[Ft]){var p=u.tag;if(p===5||p===6||p===13||p===31||p===26||p===27||p===3)return u}return null}function Fr(u){var p=u.tag;if(p===5||p===26||p===27||p===6)return u.stateNode;throw Error(r(33))}function Au(u){var p=u[j_];return p||(p=u[j_]={hoistableStyles:new Map,hoistableScripts:new Map}),p}function mn(u){u[Pl]=!0}var Wv=new Set,Yv={};function Bo(u,p){Pu(u,p),Pu(u+"Capture",p)}function Pu(u,p){for(Yv[u]=p,u=0;u<p.length;u++)Wv.add(p[u])}var Zv=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ns={},V_={};function Xv(u){return dg.call(V_,u)?!0:dg.call(Ns,u)?!1:Zv.test(u)?V_[u]=!0:(Ns[u]=!0,!1)}function Kd(u,p,v){if(Xv(p))if(v===null)u.removeAttribute(p);else{switch(typeof v){case"undefined":case"function":case"symbol":u.removeAttribute(p);return;case"boolean":var x=p.toLowerCase().slice(0,5);if(x!=="data-"&&x!=="aria-"){u.removeAttribute(p);return}}u.setAttribute(p,""+v)}}function Ou(u,p,v){if(v===null)u.removeAttribute(p);else{switch(typeof v){case"undefined":case"function":case"symbol":case"boolean":u.removeAttribute(p);return}u.setAttribute(p,""+v)}}function se(u,p,v,x){if(x===null)u.removeAttribute(v);else{switch(typeof x){case"undefined":case"function":case"symbol":case"boolean":u.removeAttribute(v);return}u.setAttributeNS(p,v,""+x)}}function Te(u){switch(typeof u){case"bigint":case"boolean":case"number":case"string":case"undefined":return u;case"object":return u;default:return""}}function Qe(u){var p=u.type;return(u=u.nodeName)&&u.toLowerCase()==="input"&&(p==="checkbox"||p==="radio")}function jt(u,p,v){var x=Object.getOwnPropertyDescriptor(u.constructor.prototype,p);if(!u.hasOwnProperty(p)&&typeof x<"u"&&typeof x.get=="function"&&typeof x.set=="function"){var E=x.get,M=x.set;return Object.defineProperty(u,p,{configurable:!0,get:function(){return E.call(this)},set:function(j){v=""+j,M.call(this,j)}}),Object.defineProperty(u,p,{enumerable:x.enumerable}),{getValue:function(){return v},setValue:function(j){v=""+j},stopTracking:function(){u._valueTracker=null,delete u[p]}}}}function Mi(u){if(!u._valueTracker){var p=Qe(u)?"checked":"value";u._valueTracker=jt(u,p,""+u[p])}}function xr(u){if(!u)return!1;var p=u._valueTracker;if(!p)return!0;var v=p.getValue(),x="";return u&&(x=Qe(u)?u.checked?"true":"false":u.value),u=x,u!==v?(p.setValue(u),!0):!1}function pr(u){if(u=u||(typeof document<"u"?document:void 0),typeof u>"u")return null;try{return u.activeElement||u.body}catch{return u.body}}var qr=/[\n"\\]/g;function za(u){return u.replace(qr,function(p){return"\\"+p.charCodeAt(0).toString(16)+" "})}function pg(u,p,v,x,E,M,j,Z){u.name="",j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"?u.type=j:u.removeAttribute("type"),p!=null?j==="number"?(p===0&&u.value===""||u.value!=p)&&(u.value=""+Te(p)):u.value!==""+Te(p)&&(u.value=""+Te(p)):j!=="submit"&&j!=="reset"||u.removeAttribute("value"),p!=null?Qp(u,j,Te(p)):v!=null?Qp(u,j,Te(v)):x!=null&&u.removeAttribute("value"),E==null&&M!=null&&(u.defaultChecked=!!M),E!=null&&(u.checked=E&&typeof E!="function"&&typeof E!="symbol"),Z!=null&&typeof Z!="function"&&typeof Z!="symbol"&&typeof Z!="boolean"?u.name=""+Te(Z):u.removeAttribute("name")}function Lu(u,p,v,x,E,M,j,Z){if(M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"&&(u.type=M),p!=null||v!=null){if(!(M!=="submit"&&M!=="reset"||p!=null)){Mi(u);return}v=v!=null?""+Te(v):"",p=p!=null?""+Te(p):v,Z||p===u.value||(u.value=p),u.defaultValue=p}x=x??E,x=typeof x!="function"&&typeof x!="symbol"&&!!x,u.checked=Z?u.checked:!!x,u.defaultChecked=!!x,j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"&&(u.name=j),Mi(u)}function Qp(u,p,v){p==="number"&&pr(u.ownerDocument)===u||u.defaultValue===""+v||(u.defaultValue=""+v)}function fg(u,p,v,x){if(u=u.options,p){p={};for(var E=0;E<v.length;E++)p["$"+v[E]]=!0;for(v=0;v<u.length;v++)E=p.hasOwnProperty("$"+u[v].value),u[v].selected!==E&&(u[v].selected=E),E&&x&&(u[v].defaultSelected=!0)}else{for(v=""+Te(v),p=null,E=0;E<u.length;E++){if(u[E].value===v){u[E].selected=!0,x&&(u[E].defaultSelected=!0);return}p!==null||u[E].disabled||(p=u[E])}p!==null&&(p.selected=!0)}}function nk(u,p,v){if(p!=null&&(p=""+Te(p),p!==u.value&&(u.value=p),v==null)){u.defaultValue!==p&&(u.defaultValue=p);return}u.defaultValue=v!=null?""+Te(v):""}function sk(u,p,v,x){if(p==null){if(x!=null){if(v!=null)throw Error(r(92));if(le(x)){if(1<x.length)throw Error(r(93));x=x[0]}v=x}v==null&&(v=""),p=v}v=Te(p),u.defaultValue=v,x=u.textContent,x===v&&x!==""&&x!==null&&(u.value=x),Mi(u)}function Qd(u,p){if(p){var v=u.firstChild;if(v&&v===u.lastChild&&v.nodeType===3){v.nodeValue=p;return}}u.textContent=p}var kj=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function EA(u,p,v){var x=p.indexOf("--")===0;v==null||typeof v=="boolean"||v===""?x?u.setProperty(p,""):p==="float"?u.cssFloat="":u[p]="":x?u.setProperty(p,v):typeof v!="number"||v===0||kj.has(p)?p==="float"?u.cssFloat=v:u[p]=(""+v).trim():u[p]=v+"px"}function ak(u,p,v){if(p!=null&&typeof p!="object")throw Error(r(62));if(u=u.style,v!=null){for(var x in v)!v.hasOwnProperty(x)||p!=null&&p.hasOwnProperty(x)||(x.indexOf("--")===0?u.setProperty(x,""):x==="float"?u.cssFloat="":u[x]="");for(var E in p)x=p[E],p.hasOwnProperty(E)&&v[E]!==x&&EA(u,E,x)}else for(var M in p)p.hasOwnProperty(M)&&EA(u,M,p[M])}function ok(u){if(u.indexOf("-")===-1)return!1;switch(u){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ej=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),CA=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Jv(u){return CA.test(""+u)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":u}function Du(){}var Kv=null;function lk(u){return u=u.target||u.srcElement||window,u.correspondingUseElement&&(u=u.correspondingUseElement),u.nodeType===3?u.parentNode:u}var ef=null,mg=null;function Qv(u){var p=Mc(u);if(p&&(u=p.stateNode)){var v=u[zr]||null;e:switch(u=p.stateNode,p.type){case"input":if(pg(u,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name),p=v.name,v.type==="radio"&&p!=null){for(v=u;v.parentNode;)v=v.parentNode;for(v=v.querySelectorAll('input[name="'+za(""+p)+'"][type="radio"]'),p=0;p<v.length;p++){var x=v[p];if(x!==u&&x.form===u.form){var E=x[zr]||null;if(!E)throw Error(r(90));pg(x,E.value,E.defaultValue,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name)}}for(p=0;p<v.length;p++)x=v[p],x.form===u.form&&xr(x)}break e;case"textarea":nk(u,v.value,v.defaultValue);break e;case"select":p=v.value,p!=null&&fg(u,!!v.multiple,p,!1)}}}var ck=!1;function uk(u,p,v){if(ck)return u(p,v);ck=!0;try{var x=u(p);return x}finally{if(ck=!1,(ef!==null||mg!==null)&&($P(),ef&&(p=ef,u=mg,mg=ef=null,Qv(p),u)))for(p=0;p<u.length;p++)Qv(u[p])}}function gg(u,p){var v=u.stateNode;if(v===null)return null;var x=v[zr]||null;if(x===null)return null;v=x[p];e:switch(p){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(x=!x.disabled)||(u=u.type,x=!(u==="button"||u==="input"||u==="select"||u==="textarea")),u=!x;break e;default:u=!1}if(u)return null;if(v&&typeof v!="function")throw Error(r(231,p,typeof v));return v}var Ru=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),B_=!1;if(Ru)try{var yg={};Object.defineProperty(yg,"passive",{get:function(){B_=!0}}),window.addEventListener("test",yg,yg),window.removeEventListener("test",yg,yg)}catch{B_=!1}var eh=null,tf=null,rf=null;function IA(){if(rf)return rf;var u,p=tf,v=p.length,x,E="value"in eh?eh.value:eh.textContent,M=E.length;for(u=0;u<v&&p[u]===E[u];u++);var j=v-u;for(x=1;x<=j&&p[v-x]===E[M-x];x++);return rf=E.slice(u,1<x?1-x:void 0)}function vg(u){var p=u.keyCode;return"charCode"in u?(u=u.charCode,u===0&&p===13&&(u=13)):u=p,u===10&&(u=13),32<=u||u===13?u:0}function eb(){return!0}function MA(){return!1}function js(u){function p(v,x,E,M,j){this._reactName=v,this._targetInst=E,this.type=x,this.nativeEvent=M,this.target=j,this.currentTarget=null;for(var Z in u)u.hasOwnProperty(Z)&&(v=u[Z],this[Z]=v?v(M):M[Z]);return this.isDefaultPrevented=(M.defaultPrevented!=null?M.defaultPrevented:M.returnValue===!1)?eb:MA,this.isPropagationStopped=MA,this}return f(p.prototype,{preventDefault:function(){this.defaultPrevented=!0;var v=this.nativeEvent;v&&(v.preventDefault?v.preventDefault():typeof v.returnValue!="unknown"&&(v.returnValue=!1),this.isDefaultPrevented=eb)},stopPropagation:function(){var v=this.nativeEvent;v&&(v.stopPropagation?v.stopPropagation():typeof v.cancelBubble!="unknown"&&(v.cancelBubble=!0),this.isPropagationStopped=eb)},persist:function(){},isPersistent:eb}),p}var th={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(u){return u.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tb=js(th),nf=f({},th,{view:0,detail:0}),Cj=js(nf),dk,Ac,ib,U_=f({},nf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:bg,button:0,buttons:0,relatedTarget:function(u){return u.relatedTarget===void 0?u.fromElement===u.srcElement?u.toElement:u.fromElement:u.relatedTarget},movementX:function(u){return"movementX"in u?u.movementX:(u!==ib&&(ib&&u.type==="mousemove"?(dk=u.screenX-ib.screenX,Ac=u.screenY-ib.screenY):Ac=dk=0,ib=u),dk)},movementY:function(u){return"movementY"in u?u.movementY:Ac}}),AA=js(U_),PA=f({},U_,{dataTransfer:0}),OA=js(PA),sa=f({},nf,{relatedTarget:0}),hk=js(sa),Ij=f({},th,{animationName:0,elapsedTime:0,pseudoElement:0}),Mj=js(Ij),Aj=f({},th,{clipboardData:function(u){return"clipboardData"in u?u.clipboardData:window.clipboardData}}),Pj=js(Aj),Oj=f({},th,{data:0}),LA=js(Oj),Lj={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},DA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},H_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function sf(u){var p=this.nativeEvent;return p.getModifierState?p.getModifierState(u):(u=H_[u])?!!p[u]:!1}function bg(){return sf}var Dj=f({},nf,{key:function(u){if(u.key){var p=Lj[u.key]||u.key;if(p!=="Unidentified")return p}return u.type==="keypress"?(u=vg(u),u===13?"Enter":String.fromCharCode(u)):u.type==="keydown"||u.type==="keyup"?DA[u.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:bg,charCode:function(u){return u.type==="keypress"?vg(u):0},keyCode:function(u){return u.type==="keydown"||u.type==="keyup"?u.keyCode:0},which:function(u){return u.type==="keypress"?vg(u):u.type==="keydown"||u.type==="keyup"?u.keyCode:0}}),RA=js(Dj),zA=f({},U_,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),pk=js(zA),rb=f({},nf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:bg}),Rj=js(rb),zj=f({},th,{propertyName:0,elapsedTime:0,pseudoElement:0}),Fj=js(zj),Nj=f({},U_,{deltaX:function(u){return"deltaX"in u?u.deltaX:"wheelDeltaX"in u?-u.wheelDeltaX:0},deltaY:function(u){return"deltaY"in u?u.deltaY:"wheelDeltaY"in u?-u.wheelDeltaY:"wheelDelta"in u?-u.wheelDelta:0},deltaZ:0,deltaMode:0}),jj=js(Nj),Vj=f({},th,{newState:0,oldState:0}),fk=js(Vj),Bj=[9,13,27,32],wg=Ru&&"CompositionEvent"in window,nb=null;Ru&&"documentMode"in document&&(nb=document.documentMode);var mk=Ru&&"TextEvent"in window&&!nb,FA=Ru&&(!wg||nb&&8<nb&&11>=nb),NA=" ",gk=!1;function _g(u,p){switch(u){case"keyup":return Bj.indexOf(p.keyCode)!==-1;case"keydown":return p.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zu(u){return u=u.detail,typeof u=="object"&&"data"in u?u.data:null}var af=!1;function yk(u,p){switch(u){case"compositionend":return zu(p);case"keypress":return p.which!==32?null:(gk=!0,NA);case"textInput":return u=p.data,u===NA&&gk?null:u;default:return null}}function Uj(u,p){if(af)return u==="compositionend"||!wg&&_g(u,p)?(u=IA(),rf=tf=eh=null,af=!1,u):null;switch(u){case"paste":return null;case"keypress":if(!(p.ctrlKey||p.altKey||p.metaKey)||p.ctrlKey&&p.altKey){if(p.char&&1<p.char.length)return p.char;if(p.which)return String.fromCharCode(p.which)}return null;case"compositionend":return FA&&p.locale!=="ko"?null:p.data;default:return null}}var Hj={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jA(u){var p=u&&u.nodeName&&u.nodeName.toLowerCase();return p==="input"?!!Hj[u.type]:p==="textarea"}function VA(u,p,v,x){ef?mg?mg.push(x):mg=[x]:ef=x,p=AP(p,"onChange"),0<p.length&&(v=new tb("onChange","change",null,v,x),u.push({event:v,listeners:p}))}var sb=null,ab=null;function Gj(u){Vee(u,0)}function G_(u){var p=Fr(u);if(xr(p))return u}function BA(u,p){if(u==="change")return p}var UA=!1;if(Ru){var k;if(Ru){var T="oninput"in document;if(!T){var A=document.createElement("div");A.setAttribute("oninput","return;"),T=typeof A.oninput=="function"}k=T}else k=!1;UA=k&&(!document.documentMode||9<document.documentMode)}function L(){sb&&(sb.detachEvent("onpropertychange",F),ab=sb=null)}function F(u){if(u.propertyName==="value"&&G_(ab)){var p=[];VA(p,ab,u,lk(u)),uk(Gj,p)}}function B(u,p,v){u==="focusin"?(L(),sb=p,ab=v,sb.attachEvent("onpropertychange",F)):u==="focusout"&&L()}function W(u){if(u==="selectionchange"||u==="keyup"||u==="keydown")return G_(ab)}function X(u,p){if(u==="click")return G_(p)}function te(u,p){if(u==="input"||u==="change")return G_(p)}function pe(u,p){return u===p&&(u!==0||1/u===1/p)||u!==u&&p!==p}var ie=typeof Object.is=="function"?Object.is:pe;function we(u,p){if(ie(u,p))return!0;if(typeof u!="object"||u===null||typeof p!="object"||p===null)return!1;var v=Object.keys(u),x=Object.keys(p);if(v.length!==x.length)return!1;for(x=0;x<v.length;x++){var E=v[x];if(!dg.call(p,E)||!ie(u[E],p[E]))return!1}return!0}function Ae(u){for(;u&&u.firstChild;)u=u.firstChild;return u}function et(u,p){var v=Ae(u);u=0;for(var x;v;){if(v.nodeType===3){if(x=u+v.textContent.length,u<=p&&x>=p)return{node:v,offset:p-u};u=x}e:{for(;v;){if(v.nextSibling){v=v.nextSibling;break e}v=v.parentNode}v=void 0}v=Ae(v)}}function Ze(u,p){return u&&p?u===p?!0:u&&u.nodeType===3?!1:p&&p.nodeType===3?Ze(u,p.parentNode):"contains"in u?u.contains(p):u.compareDocumentPosition?!!(u.compareDocumentPosition(p)&16):!1:!1}function rt(u){u=u!=null&&u.ownerDocument!=null&&u.ownerDocument.defaultView!=null?u.ownerDocument.defaultView:window;for(var p=pr(u.document);p instanceof u.HTMLIFrameElement;){try{var v=typeof p.contentWindow.location.href=="string"}catch{v=!1}if(v)u=p.contentWindow;else break;p=pr(u.document)}return p}function yt(u){var p=u&&u.nodeName&&u.nodeName.toLowerCase();return p&&(p==="input"&&(u.type==="text"||u.type==="search"||u.type==="tel"||u.type==="url"||u.type==="password")||p==="textarea"||u.contentEditable==="true")}var ft=Ru&&"documentMode"in document&&11>=document.documentMode,Ct=null,si=null,fi=null,qt=!1;function ci(u,p,v){var x=v.window===v?v.document:v.nodeType===9?v:v.ownerDocument;qt||Ct==null||Ct!==pr(x)||(x=Ct,"selectionStart"in x&&yt(x)?x={start:x.selectionStart,end:x.selectionEnd}:(x=(x.ownerDocument&&x.ownerDocument.defaultView||window).getSelection(),x={anchorNode:x.anchorNode,anchorOffset:x.anchorOffset,focusNode:x.focusNode,focusOffset:x.focusOffset}),fi&&we(fi,x)||(fi=x,x=AP(si,"onSelect"),0<x.length&&(p=new tb("onSelect","select",null,p,v),u.push({event:p,listeners:x}),p.target=Ct)))}function gn(u,p){var v={};return v[u.toLowerCase()]=p.toLowerCase(),v["Webkit"+u]="webkit"+p,v["Moz"+u]="moz"+p,v}var Qi={animationend:gn("Animation","AnimationEnd"),animationiteration:gn("Animation","AnimationIteration"),animationstart:gn("Animation","AnimationStart"),transitionrun:gn("Transition","TransitionRun"),transitionstart:gn("Transition","TransitionStart"),transitioncancel:gn("Transition","TransitionCancel"),transitionend:gn("Transition","TransitionEnd")},aa={},Uo={};Ru&&(Uo=document.createElement("div").style,"AnimationEvent"in window||(delete Qi.animationend.animation,delete Qi.animationiteration.animation,delete Qi.animationstart.animation),"TransitionEvent"in window||delete Qi.transitionend.transition);function oa(u){if(aa[u])return aa[u];if(!Qi[u])return u;var p=Qi[u],v;for(v in p)if(p.hasOwnProperty(v)&&v in Uo)return aa[u]=p[v];return u}var ob=oa("animationend"),xg=oa("animationiteration"),bK=oa("animationstart"),uCe=oa("transitionrun"),dCe=oa("transitionstart"),hCe=oa("transitioncancel"),wK=oa("transitionend"),_K=new Map,qj="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");qj.push("scrollEnd");function Fu(u,p){_K.set(u,p),Bo(p,[u])}var HA=typeof reportError=="function"?reportError:function(u){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var p=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof u=="object"&&u!==null&&typeof u.message=="string"?String(u.message):String(u),error:u});if(!window.dispatchEvent(p))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",u);return}console.error(u)},Pc=[],q_=0,Wj=0;function GA(){for(var u=q_,p=Wj=q_=0;p<u;){var v=Pc[p];Pc[p++]=null;var x=Pc[p];Pc[p++]=null;var E=Pc[p];Pc[p++]=null;var M=Pc[p];if(Pc[p++]=null,x!==null&&E!==null){var j=x.pending;j===null?E.next=E:(E.next=j.next,j.next=E),x.pending=E}M!==0&&xK(v,E,M)}}function qA(u,p,v,x){Pc[q_++]=u,Pc[q_++]=p,Pc[q_++]=v,Pc[q_++]=x,Wj|=x,u.lanes|=x,u=u.alternate,u!==null&&(u.lanes|=x)}function Yj(u,p,v,x){return qA(u,p,v,x),WA(u)}function lb(u,p){return qA(u,null,null,p),WA(u)}function xK(u,p,v){u.lanes|=v;var x=u.alternate;x!==null&&(x.lanes|=v);for(var E=!1,M=u.return;M!==null;)M.childLanes|=v,x=M.alternate,x!==null&&(x.childLanes|=v),M.tag===22&&(u=M.stateNode,u===null||u._visibility&1||(E=!0)),u=M,M=M.return;return u.tag===3?(M=u.stateNode,E&&p!==null&&(E=31-zs(v),u=M.hiddenUpdates,x=u[E],x===null?u[E]=[p]:x.push(p),p.lane=v|536870912),M):null}function WA(u){if(50<Nk)throw Nk=0,rV=null,Error(r(185));for(var p=u.return;p!==null;)u=p,p=u.return;return u.tag===3?u.stateNode:null}var W_={};function pCe(u,p,v,x){this.tag=u,this.key=v,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=p,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=x,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ol(u,p,v,x){return new pCe(u,p,v,x)}function Zj(u){return u=u.prototype,!(!u||!u.isReactComponent)}function of(u,p){var v=u.alternate;return v===null?(v=Ol(u.tag,p,u.key,u.mode),v.elementType=u.elementType,v.type=u.type,v.stateNode=u.stateNode,v.alternate=u,u.alternate=v):(v.pendingProps=p,v.type=u.type,v.flags=0,v.subtreeFlags=0,v.deletions=null),v.flags=u.flags&65011712,v.childLanes=u.childLanes,v.lanes=u.lanes,v.child=u.child,v.memoizedProps=u.memoizedProps,v.memoizedState=u.memoizedState,v.updateQueue=u.updateQueue,p=u.dependencies,v.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext},v.sibling=u.sibling,v.index=u.index,v.ref=u.ref,v.refCleanup=u.refCleanup,v}function SK(u,p){u.flags&=65011714;var v=u.alternate;return v===null?(u.childLanes=0,u.lanes=p,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=v.childLanes,u.lanes=v.lanes,u.child=v.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=v.memoizedProps,u.memoizedState=v.memoizedState,u.updateQueue=v.updateQueue,u.type=v.type,p=v.dependencies,u.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext}),u}function YA(u,p,v,x,E,M){var j=0;if(x=u,typeof u=="function")Zj(u)&&(j=1);else if(typeof u=="string")j=vIe(u,v,Je.current)?26:u==="html"||u==="head"||u==="body"?27:5;else e:switch(u){case Y:return u=Ol(31,v,p,E),u.elementType=Y,u.lanes=M,u;case _:return cb(v.children,E,M,p);case S:j=8,E|=24;break;case $:return u=Ol(12,v,p,E|2),u.elementType=$,u.lanes=M,u;case O:return u=Ol(13,v,p,E),u.elementType=O,u.lanes=M,u;case N:return u=Ol(19,v,p,E),u.elementType=N,u.lanes=M,u;default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case I:j=10;break e;case C:j=9;break e;case P:j=11;break e;case R:j=14;break e;case G:j=16,x=null;break e}j=29,v=Error(r(130,u===null?"null":typeof u,"")),x=null}return p=Ol(j,v,p,E),p.elementType=u,p.type=x,p.lanes=M,p}function cb(u,p,v,x){return u=Ol(7,u,x,p),u.lanes=v,u}function Xj(u,p,v){return u=Ol(6,u,null,p),u.lanes=v,u}function $K(u){var p=Ol(18,null,null,0);return p.stateNode=u,p}function Jj(u,p,v){return p=Ol(4,u.children!==null?u.children:[],u.key,p),p.lanes=v,p.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},p}var TK=new WeakMap;function Oc(u,p){if(typeof u=="object"&&u!==null){var v=TK.get(u);return v!==void 0?v:(p={value:u,source:p,stack:Hd(p)},TK.set(u,p),p)}return{value:u,source:p,stack:Hd(p)}}var Y_=[],Z_=0,ZA=null,vk=0,Lc=[],Dc=0,Sg=null,ih=1,rh="";function lf(u,p){Y_[Z_++]=vk,Y_[Z_++]=ZA,ZA=u,vk=p}function kK(u,p,v){Lc[Dc++]=ih,Lc[Dc++]=rh,Lc[Dc++]=Sg,Sg=u;var x=ih;u=rh;var E=32-zs(x)-1;x&=~(1<<E),v+=1;var M=32-zs(p)+E;if(30<M){var j=E-E%5;M=(x&(1<<j)-1).toString(32),x>>=j,E-=j,ih=1<<32-zs(p)+E|v<<E|x,rh=M+u}else ih=1<<M|v<<E|x,rh=u}function Kj(u){u.return!==null&&(lf(u,1),kK(u,1,0))}function Qj(u){for(;u===ZA;)ZA=Y_[--Z_],Y_[Z_]=null,vk=Y_[--Z_],Y_[Z_]=null;for(;u===Sg;)Sg=Lc[--Dc],Lc[Dc]=null,rh=Lc[--Dc],Lc[Dc]=null,ih=Lc[--Dc],Lc[Dc]=null}function EK(u,p){Lc[Dc++]=ih,Lc[Dc++]=rh,Lc[Dc++]=Sg,ih=p.id,rh=p.overflow,Sg=u}var la=null,Wr=null,Ri=!1,$g=null,Rc=!1,e4=Error(r(519));function Tg(u){var p=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw bk(Oc(p,u)),e4}function CK(u){var p=u.stateNode,v=u.type,x=u.memoizedProps;switch(p[hr]=u,p[zr]=x,v){case"dialog":ki("cancel",p),ki("close",p);break;case"iframe":case"object":case"embed":ki("load",p);break;case"video":case"audio":for(v=0;v<Vk.length;v++)ki(Vk[v],p);break;case"source":ki("error",p);break;case"img":case"image":case"link":ki("error",p),ki("load",p);break;case"details":ki("toggle",p);break;case"input":ki("invalid",p),Lu(p,x.value,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name,!0);break;case"select":ki("invalid",p);break;case"textarea":ki("invalid",p),sk(p,x.value,x.defaultValue,x.children)}v=x.children,typeof v!="string"&&typeof v!="number"&&typeof v!="bigint"||p.textContent===""+v||x.suppressHydrationWarning===!0||Gee(p.textContent,v)?(x.popover!=null&&(ki("beforetoggle",p),ki("toggle",p)),x.onScroll!=null&&ki("scroll",p),x.onScrollEnd!=null&&ki("scrollend",p),x.onClick!=null&&(p.onclick=Du),p=!0):p=!1,p||Tg(u,!0)}function IK(u){for(la=u.return;la;)switch(la.tag){case 5:case 31:case 13:Rc=!1;return;case 27:case 3:Rc=!0;return;default:la=la.return}}function X_(u){if(u!==la)return!1;if(!Ri)return IK(u),Ri=!0,!1;var p=u.tag,v;if((v=p!==3&&p!==27)&&((v=p===5)&&(v=u.type,v=!(v!=="form"&&v!=="button")||vV(u.type,u.memoizedProps)),v=!v),v&&Wr&&Tg(u),IK(u),p===13){if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(r(317));Wr=ete(u)}else if(p===31){if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(r(317));Wr=ete(u)}else p===27?(p=Wr,Ng(u.type)?(u=SV,SV=null,Wr=u):Wr=p):Wr=la?Fc(u.stateNode.nextSibling):null;return!0}function ub(){Wr=la=null,Ri=!1}function t4(){var u=$g;return u!==null&&(Wo===null?Wo=u:Wo.push.apply(Wo,u),$g=null),u}function bk(u){$g===null?$g=[u]:$g.push(u)}var i4=oe(null),db=null,cf=null;function kg(u,p,v){Le(i4,p._currentValue),p._currentValue=v}function uf(u){u._currentValue=i4.current,be(i4)}function r4(u,p,v){for(;u!==null;){var x=u.alternate;if((u.childLanes&p)!==p?(u.childLanes|=p,x!==null&&(x.childLanes|=p)):x!==null&&(x.childLanes&p)!==p&&(x.childLanes|=p),u===v)break;u=u.return}}function n4(u,p,v,x){var E=u.child;for(E!==null&&(E.return=u);E!==null;){var M=E.dependencies;if(M!==null){var j=E.child;M=M.firstContext;e:for(;M!==null;){var Z=M;M=E;for(var ue=0;ue<p.length;ue++)if(Z.context===p[ue]){M.lanes|=v,Z=M.alternate,Z!==null&&(Z.lanes|=v),r4(M.return,v,u),x||(j=null);break e}M=Z.next}}else if(E.tag===18){if(j=E.return,j===null)throw Error(r(341));j.lanes|=v,M=j.alternate,M!==null&&(M.lanes|=v),r4(j,v,u),j=null}else j=E.child;if(j!==null)j.return=E;else for(j=E;j!==null;){if(j===u){j=null;break}if(E=j.sibling,E!==null){E.return=j.return,j=E;break}j=j.return}E=j}}function J_(u,p,v,x){u=null;for(var E=p,M=!1;E!==null;){if(!M){if((E.flags&524288)!==0)M=!0;else if((E.flags&262144)!==0)break}if(E.tag===10){var j=E.alternate;if(j===null)throw Error(r(387));if(j=j.memoizedProps,j!==null){var Z=E.type;ie(E.pendingProps.value,j.value)||(u!==null?u.push(Z):u=[Z])}}else if(E===Pt.current){if(j=E.alternate,j===null)throw Error(r(387));j.memoizedState.memoizedState!==E.memoizedState.memoizedState&&(u!==null?u.push(qk):u=[qk])}E=E.return}u!==null&&n4(p,u,v,x),p.flags|=262144}function XA(u){for(u=u.firstContext;u!==null;){if(!ie(u.context._currentValue,u.memoizedValue))return!0;u=u.next}return!1}function hb(u){db=u,cf=null,u=u.dependencies,u!==null&&(u.firstContext=null)}function ca(u){return MK(db,u)}function JA(u,p){return db===null&&hb(u),MK(u,p)}function MK(u,p){var v=p._currentValue;if(p={context:p,memoizedValue:v,next:null},cf===null){if(u===null)throw Error(r(308));cf=p,u.dependencies={lanes:0,firstContext:p},u.flags|=524288}else cf=cf.next=p;return v}var fCe=typeof AbortController<"u"?AbortController:function(){var u=[],p=this.signal={aborted:!1,addEventListener:function(v,x){u.push(x)}};this.abort=function(){p.aborted=!0,u.forEach(function(v){return v()})}},mCe=t.unstable_scheduleCallback,gCe=t.unstable_NormalPriority,cs={$$typeof:I,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function s4(){return{controller:new fCe,data:new Map,refCount:0}}function wk(u){u.refCount--,u.refCount===0&&mCe(gCe,function(){u.controller.abort()})}var _k=null,a4=0,K_=0,Q_=null;function yCe(u,p){if(_k===null){var v=_k=[];a4=0,K_=cV(),Q_={status:"pending",value:void 0,then:function(x){v.push(x)}}}return a4++,p.then(AK,AK),p}function AK(){if(--a4===0&&_k!==null){Q_!==null&&(Q_.status="fulfilled");var u=_k;_k=null,K_=0,Q_=null;for(var p=0;p<u.length;p++)(0,u[p])()}}function vCe(u,p){var v=[],x={status:"pending",value:null,reason:null,then:function(E){v.push(E)}};return u.then(function(){x.status="fulfilled",x.value=p;for(var E=0;E<v.length;E++)(0,v[E])(p)},function(E){for(x.status="rejected",x.reason=E,E=0;E<v.length;E++)(0,v[E])(void 0)}),x}var PK=re.S;re.S=function(u,p){mee=ls(),typeof p=="object"&&p!==null&&typeof p.then=="function"&&yCe(u,p),PK!==null&&PK(u,p)};var pb=oe(null);function o4(){var u=pb.current;return u!==null?u:Ar.pooledCache}function KA(u,p){p===null?Le(pb,pb.current):Le(pb,p.pool)}function OK(){var u=o4();return u===null?null:{parent:cs._currentValue,pool:u}}var e1=Error(r(460)),l4=Error(r(474)),QA=Error(r(542)),eP={then:function(){}};function LK(u){return u=u.status,u==="fulfilled"||u==="rejected"}function DK(u,p,v){switch(v=u[v],v===void 0?u.push(p):v!==p&&(p.then(Du,Du),p=v),p.status){case"fulfilled":return p.value;case"rejected":throw u=p.reason,zK(u),u;default:if(typeof p.status=="string")p.then(Du,Du);else{if(u=Ar,u!==null&&100<u.shellSuspendCounter)throw Error(r(482));u=p,u.status="pending",u.then(function(x){if(p.status==="pending"){var E=p;E.status="fulfilled",E.value=x}},function(x){if(p.status==="pending"){var E=p;E.status="rejected",E.reason=x}})}switch(p.status){case"fulfilled":return p.value;case"rejected":throw u=p.reason,zK(u),u}throw mb=p,e1}}function fb(u){try{var p=u._init;return p(u._payload)}catch(v){throw v!==null&&typeof v=="object"&&typeof v.then=="function"?(mb=v,e1):v}}var mb=null;function RK(){if(mb===null)throw Error(r(459));var u=mb;return mb=null,u}function zK(u){if(u===e1||u===QA)throw Error(r(483))}var t1=null,xk=0;function tP(u){var p=xk;return xk+=1,t1===null&&(t1=[]),DK(t1,u,p)}function Sk(u,p){p=p.props.ref,u.ref=p!==void 0?p:null}function iP(u,p){throw p.$$typeof===g?Error(r(525)):(u=Object.prototype.toString.call(p),Error(r(31,u==="[object Object]"?"object with keys {"+Object.keys(p).join(", ")+"}":u)))}function FK(u){function p(Se,ye){if(u){var ke=Se.deletions;ke===null?(Se.deletions=[ye],Se.flags|=16):ke.push(ye)}}function v(Se,ye){if(!u)return null;for(;ye!==null;)p(Se,ye),ye=ye.sibling;return null}function x(Se){for(var ye=new Map;Se!==null;)Se.key!==null?ye.set(Se.key,Se):ye.set(Se.index,Se),Se=Se.sibling;return ye}function E(Se,ye){return Se=of(Se,ye),Se.index=0,Se.sibling=null,Se}function M(Se,ye,ke){return Se.index=ke,u?(ke=Se.alternate,ke!==null?(ke=ke.index,ke<ye?(Se.flags|=67108866,ye):ke):(Se.flags|=67108866,ye)):(Se.flags|=1048576,ye)}function j(Se){return u&&Se.alternate===null&&(Se.flags|=67108866),Se}function Z(Se,ye,ke,Be){return ye===null||ye.tag!==6?(ye=Xj(ke,Se.mode,Be),ye.return=Se,ye):(ye=E(ye,ke),ye.return=Se,ye)}function ue(Se,ye,ke,Be){var Vt=ke.type;return Vt===_?Fe(Se,ye,ke.props.children,Be,ke.key):ye!==null&&(ye.elementType===Vt||typeof Vt=="object"&&Vt!==null&&Vt.$$typeof===G&&fb(Vt)===ye.type)?(ye=E(ye,ke.props),Sk(ye,ke),ye.return=Se,ye):(ye=YA(ke.type,ke.key,ke.props,null,Se.mode,Be),Sk(ye,ke),ye.return=Se,ye)}function Ee(Se,ye,ke,Be){return ye===null||ye.tag!==4||ye.stateNode.containerInfo!==ke.containerInfo||ye.stateNode.implementation!==ke.implementation?(ye=Jj(ke,Se.mode,Be),ye.return=Se,ye):(ye=E(ye,ke.children||[]),ye.return=Se,ye)}function Fe(Se,ye,ke,Be,Vt){return ye===null||ye.tag!==7?(ye=cb(ke,Se.mode,Be,Vt),ye.return=Se,ye):(ye=E(ye,ke),ye.return=Se,ye)}function Ge(Se,ye,ke){if(typeof ye=="string"&&ye!==""||typeof ye=="number"||typeof ye=="bigint")return ye=Xj(""+ye,Se.mode,ke),ye.return=Se,ye;if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case y:return ke=YA(ye.type,ye.key,ye.props,null,Se.mode,ke),Sk(ke,ye),ke.return=Se,ke;case b:return ye=Jj(ye,Se.mode,ke),ye.return=Se,ye;case G:return ye=fb(ye),Ge(Se,ye,ke)}if(le(ye)||ce(ye))return ye=cb(ye,Se.mode,ke,null),ye.return=Se,ye;if(typeof ye.then=="function")return Ge(Se,tP(ye),ke);if(ye.$$typeof===I)return Ge(Se,JA(Se,ye),ke);iP(Se,ye)}return null}function Ce(Se,ye,ke,Be){var Vt=ye!==null?ye.key:null;if(typeof ke=="string"&&ke!==""||typeof ke=="number"||typeof ke=="bigint")return Vt!==null?null:Z(Se,ye,""+ke,Be);if(typeof ke=="object"&&ke!==null){switch(ke.$$typeof){case y:return ke.key===Vt?ue(Se,ye,ke,Be):null;case b:return ke.key===Vt?Ee(Se,ye,ke,Be):null;case G:return ke=fb(ke),Ce(Se,ye,ke,Be)}if(le(ke)||ce(ke))return Vt!==null?null:Fe(Se,ye,ke,Be,null);if(typeof ke.then=="function")return Ce(Se,ye,tP(ke),Be);if(ke.$$typeof===I)return Ce(Se,ye,JA(Se,ke),Be);iP(Se,ke)}return null}function Me(Se,ye,ke,Be,Vt){if(typeof Be=="string"&&Be!==""||typeof Be=="number"||typeof Be=="bigint")return Se=Se.get(ke)||null,Z(ye,Se,""+Be,Vt);if(typeof Be=="object"&&Be!==null){switch(Be.$$typeof){case y:return Se=Se.get(Be.key===null?ke:Be.key)||null,ue(ye,Se,Be,Vt);case b:return Se=Se.get(Be.key===null?ke:Be.key)||null,Ee(ye,Se,Be,Vt);case G:return Be=fb(Be),Me(Se,ye,ke,Be,Vt)}if(le(Be)||ce(Be))return Se=Se.get(ke)||null,Fe(ye,Se,Be,Vt,null);if(typeof Be.then=="function")return Me(Se,ye,ke,tP(Be),Vt);if(Be.$$typeof===I)return Me(Se,ye,ke,JA(ye,Be),Vt);iP(ye,Be)}return null}function Tt(Se,ye,ke,Be){for(var Vt=null,Gi=null,Ot=ye,vi=ye=0,Pi=null;Ot!==null&&vi<ke.length;vi++){Ot.index>vi?(Pi=Ot,Ot=null):Pi=Ot.sibling;var qi=Ce(Se,Ot,ke[vi],Be);if(qi===null){Ot===null&&(Ot=Pi);break}u&&Ot&&qi.alternate===null&&p(Se,Ot),ye=M(qi,ye,vi),Gi===null?Vt=qi:Gi.sibling=qi,Gi=qi,Ot=Pi}if(vi===ke.length)return v(Se,Ot),Ri&&lf(Se,vi),Vt;if(Ot===null){for(;vi<ke.length;vi++)Ot=Ge(Se,ke[vi],Be),Ot!==null&&(ye=M(Ot,ye,vi),Gi===null?Vt=Ot:Gi.sibling=Ot,Gi=Ot);return Ri&&lf(Se,vi),Vt}for(Ot=x(Ot);vi<ke.length;vi++)Pi=Me(Ot,Se,vi,ke[vi],Be),Pi!==null&&(u&&Pi.alternate!==null&&Ot.delete(Pi.key===null?vi:Pi.key),ye=M(Pi,ye,vi),Gi===null?Vt=Pi:Gi.sibling=Pi,Gi=Pi);return u&&Ot.forEach(function(Hg){return p(Se,Hg)}),Ri&&lf(Se,vi),Vt}function Xt(Se,ye,ke,Be){if(ke==null)throw Error(r(151));for(var Vt=null,Gi=null,Ot=ye,vi=ye=0,Pi=null,qi=ke.next();Ot!==null&&!qi.done;vi++,qi=ke.next()){Ot.index>vi?(Pi=Ot,Ot=null):Pi=Ot.sibling;var Hg=Ce(Se,Ot,qi.value,Be);if(Hg===null){Ot===null&&(Ot=Pi);break}u&&Ot&&Hg.alternate===null&&p(Se,Ot),ye=M(Hg,ye,vi),Gi===null?Vt=Hg:Gi.sibling=Hg,Gi=Hg,Ot=Pi}if(qi.done)return v(Se,Ot),Ri&&lf(Se,vi),Vt;if(Ot===null){for(;!qi.done;vi++,qi=ke.next())qi=Ge(Se,qi.value,Be),qi!==null&&(ye=M(qi,ye,vi),Gi===null?Vt=qi:Gi.sibling=qi,Gi=qi);return Ri&&lf(Se,vi),Vt}for(Ot=x(Ot);!qi.done;vi++,qi=ke.next())qi=Me(Ot,Se,vi,qi.value,Be),qi!==null&&(u&&qi.alternate!==null&&Ot.delete(qi.key===null?vi:qi.key),ye=M(qi,ye,vi),Gi===null?Vt=qi:Gi.sibling=qi,Gi=qi);return u&&Ot.forEach(function(IIe){return p(Se,IIe)}),Ri&&lf(Se,vi),Vt}function Tr(Se,ye,ke,Be){if(typeof ke=="object"&&ke!==null&&ke.type===_&&ke.key===null&&(ke=ke.props.children),typeof ke=="object"&&ke!==null){switch(ke.$$typeof){case y:e:{for(var Vt=ke.key;ye!==null;){if(ye.key===Vt){if(Vt=ke.type,Vt===_){if(ye.tag===7){v(Se,ye.sibling),Be=E(ye,ke.props.children),Be.return=Se,Se=Be;break e}}else if(ye.elementType===Vt||typeof Vt=="object"&&Vt!==null&&Vt.$$typeof===G&&fb(Vt)===ye.type){v(Se,ye.sibling),Be=E(ye,ke.props),Sk(Be,ke),Be.return=Se,Se=Be;break e}v(Se,ye);break}else p(Se,ye);ye=ye.sibling}ke.type===_?(Be=cb(ke.props.children,Se.mode,Be,ke.key),Be.return=Se,Se=Be):(Be=YA(ke.type,ke.key,ke.props,null,Se.mode,Be),Sk(Be,ke),Be.return=Se,Se=Be)}return j(Se);case b:e:{for(Vt=ke.key;ye!==null;){if(ye.key===Vt)if(ye.tag===4&&ye.stateNode.containerInfo===ke.containerInfo&&ye.stateNode.implementation===ke.implementation){v(Se,ye.sibling),Be=E(ye,ke.children||[]),Be.return=Se,Se=Be;break e}else{v(Se,ye);break}else p(Se,ye);ye=ye.sibling}Be=Jj(ke,Se.mode,Be),Be.return=Se,Se=Be}return j(Se);case G:return ke=fb(ke),Tr(Se,ye,ke,Be)}if(le(ke))return Tt(Se,ye,ke,Be);if(ce(ke)){if(Vt=ce(ke),typeof Vt!="function")throw Error(r(150));return ke=Vt.call(ke),Xt(Se,ye,ke,Be)}if(typeof ke.then=="function")return Tr(Se,ye,tP(ke),Be);if(ke.$$typeof===I)return Tr(Se,ye,JA(Se,ke),Be);iP(Se,ke)}return typeof ke=="string"&&ke!==""||typeof ke=="number"||typeof ke=="bigint"?(ke=""+ke,ye!==null&&ye.tag===6?(v(Se,ye.sibling),Be=E(ye,ke),Be.return=Se,Se=Be):(v(Se,ye),Be=Xj(ke,Se.mode,Be),Be.return=Se,Se=Be),j(Se)):v(Se,ye)}return function(Se,ye,ke,Be){try{xk=0;var Vt=Tr(Se,ye,ke,Be);return t1=null,Vt}catch(Ot){if(Ot===e1||Ot===QA)throw Ot;var Gi=Ol(29,Ot,null,Se.mode);return Gi.lanes=Be,Gi.return=Se,Gi}}}var gb=FK(!0),NK=FK(!1),Eg=!1;function c4(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function u4(u,p){u=u.updateQueue,p.updateQueue===u&&(p.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,callbacks:null})}function Cg(u){return{lane:u,tag:0,payload:null,callback:null,next:null}}function Ig(u,p,v){var x=u.updateQueue;if(x===null)return null;if(x=x.shared,(er&2)!==0){var E=x.pending;return E===null?p.next=p:(p.next=E.next,E.next=p),x.pending=p,p=WA(u),xK(u,null,v),p}return qA(u,x,p,v),WA(u)}function $k(u,p,v){if(p=p.updateQueue,p!==null&&(p=p.shared,(v&4194048)!==0)){var x=p.lanes;x&=u.pendingLanes,v|=x,p.lanes=v,Kp(u,v)}}function d4(u,p){var v=u.updateQueue,x=u.alternate;if(x!==null&&(x=x.updateQueue,v===x)){var E=null,M=null;if(v=v.firstBaseUpdate,v!==null){do{var j={lane:v.lane,tag:v.tag,payload:v.payload,callback:null,next:null};M===null?E=M=j:M=M.next=j,v=v.next}while(v!==null);M===null?E=M=p:M=M.next=p}else E=M=p;v={baseState:x.baseState,firstBaseUpdate:E,lastBaseUpdate:M,shared:x.shared,callbacks:x.callbacks},u.updateQueue=v;return}u=v.lastBaseUpdate,u===null?v.firstBaseUpdate=p:u.next=p,v.lastBaseUpdate=p}var h4=!1;function Tk(){if(h4){var u=Q_;if(u!==null)throw u}}function kk(u,p,v,x){h4=!1;var E=u.updateQueue;Eg=!1;var M=E.firstBaseUpdate,j=E.lastBaseUpdate,Z=E.shared.pending;if(Z!==null){E.shared.pending=null;var ue=Z,Ee=ue.next;ue.next=null,j===null?M=Ee:j.next=Ee,j=ue;var Fe=u.alternate;Fe!==null&&(Fe=Fe.updateQueue,Z=Fe.lastBaseUpdate,Z!==j&&(Z===null?Fe.firstBaseUpdate=Ee:Z.next=Ee,Fe.lastBaseUpdate=ue))}if(M!==null){var Ge=E.baseState;j=0,Fe=Ee=ue=null,Z=M;do{var Ce=Z.lane&-536870913,Me=Ce!==Z.lane;if(Me?(Ai&Ce)===Ce:(x&Ce)===Ce){Ce!==0&&Ce===K_&&(h4=!0),Fe!==null&&(Fe=Fe.next={lane:0,tag:Z.tag,payload:Z.payload,callback:null,next:null});e:{var Tt=u,Xt=Z;Ce=p;var Tr=v;switch(Xt.tag){case 1:if(Tt=Xt.payload,typeof Tt=="function"){Ge=Tt.call(Tr,Ge,Ce);break e}Ge=Tt;break e;case 3:Tt.flags=Tt.flags&-65537|128;case 0:if(Tt=Xt.payload,Ce=typeof Tt=="function"?Tt.call(Tr,Ge,Ce):Tt,Ce==null)break e;Ge=f({},Ge,Ce);break e;case 2:Eg=!0}}Ce=Z.callback,Ce!==null&&(u.flags|=64,Me&&(u.flags|=8192),Me=E.callbacks,Me===null?E.callbacks=[Ce]:Me.push(Ce))}else Me={lane:Ce,tag:Z.tag,payload:Z.payload,callback:Z.callback,next:null},Fe===null?(Ee=Fe=Me,ue=Ge):Fe=Fe.next=Me,j|=Ce;if(Z=Z.next,Z===null){if(Z=E.shared.pending,Z===null)break;Me=Z,Z=Me.next,Me.next=null,E.lastBaseUpdate=Me,E.shared.pending=null}}while(!0);Fe===null&&(ue=Ge),E.baseState=ue,E.firstBaseUpdate=Ee,E.lastBaseUpdate=Fe,M===null&&(E.shared.lanes=0),Lg|=j,u.lanes=j,u.memoizedState=Ge}}function jK(u,p){if(typeof u!="function")throw Error(r(191,u));u.call(p)}function VK(u,p){var v=u.callbacks;if(v!==null)for(u.callbacks=null,u=0;u<v.length;u++)jK(v[u],p)}var i1=oe(null),rP=oe(0);function BK(u,p){u=bf,Le(rP,u),Le(i1,p),bf=u|p.baseLanes}function p4(){Le(rP,bf),Le(i1,i1.current)}function f4(){bf=rP.current,be(i1),be(rP)}var Ll=oe(null),zc=null;function Mg(u){var p=u.alternate;Le(Yn,Yn.current&1),Le(Ll,u),zc===null&&(p===null||i1.current!==null||p.memoizedState!==null)&&(zc=u)}function m4(u){Le(Yn,Yn.current),Le(Ll,u),zc===null&&(zc=u)}function UK(u){u.tag===22?(Le(Yn,Yn.current),Le(Ll,u),zc===null&&(zc=u)):Ag()}function Ag(){Le(Yn,Yn.current),Le(Ll,Ll.current)}function Dl(u){be(Ll),zc===u&&(zc=null),be(Yn)}var Yn=oe(0);function nP(u){for(var p=u;p!==null;){if(p.tag===13){var v=p.memoizedState;if(v!==null&&(v=v.dehydrated,v===null||_V(v)||xV(v)))return p}else if(p.tag===19&&(p.memoizedProps.revealOrder==="forwards"||p.memoizedProps.revealOrder==="backwards"||p.memoizedProps.revealOrder==="unstable_legacy-backwards"||p.memoizedProps.revealOrder==="together")){if((p.flags&128)!==0)return p}else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===u)break;for(;p.sibling===null;){if(p.return===null||p.return===u)return null;p=p.return}p.sibling.return=p.return,p=p.sibling}return null}var df=0,mi=null,Sr=null,us=null,sP=!1,r1=!1,yb=!1,aP=0,Ek=0,n1=null,bCe=0;function En(){throw Error(r(321))}function g4(u,p){if(p===null)return!1;for(var v=0;v<p.length&&v<u.length;v++)if(!ie(u[v],p[v]))return!1;return!0}function y4(u,p,v,x,E,M){return df=M,mi=p,p.memoizedState=null,p.updateQueue=null,p.lanes=0,re.H=u===null||u.memoizedState===null?kQ:P4,yb=!1,M=v(x,E),yb=!1,r1&&(M=GK(p,v,x,E)),HK(u),M}function HK(u){re.H=Mk;var p=Sr!==null&&Sr.next!==null;if(df=0,us=Sr=mi=null,sP=!1,Ek=0,n1=null,p)throw Error(r(300));u===null||ds||(u=u.dependencies,u!==null&&XA(u)&&(ds=!0))}function GK(u,p,v,x){mi=u;var E=0;do{if(r1&&(n1=null),Ek=0,r1=!1,25<=E)throw Error(r(301));if(E+=1,us=Sr=null,u.updateQueue!=null){var M=u.updateQueue;M.lastEffect=null,M.events=null,M.stores=null,M.memoCache!=null&&(M.memoCache.index=0)}re.H=EQ,M=p(v,x)}while(r1);return M}function wCe(){var u=re.H,p=u.useState()[0];return p=typeof p.then=="function"?Ck(p):p,u=u.useState()[0],(Sr!==null?Sr.memoizedState:null)!==u&&(mi.flags|=1024),p}function v4(){var u=aP!==0;return aP=0,u}function b4(u,p,v){p.updateQueue=u.updateQueue,p.flags&=-2053,u.lanes&=~v}function w4(u){if(sP){for(u=u.memoizedState;u!==null;){var p=u.queue;p!==null&&(p.pending=null),u=u.next}sP=!1}df=0,us=Sr=mi=null,r1=!1,Ek=aP=0,n1=null}function bo(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return us===null?mi.memoizedState=us=u:us=us.next=u,us}function Zn(){if(Sr===null){var u=mi.alternate;u=u!==null?u.memoizedState:null}else u=Sr.next;var p=us===null?mi.memoizedState:us.next;if(p!==null)us=p,Sr=u;else{if(u===null)throw mi.alternate===null?Error(r(467)):Error(r(310));Sr=u,u={memoizedState:Sr.memoizedState,baseState:Sr.baseState,baseQueue:Sr.baseQueue,queue:Sr.queue,next:null},us===null?mi.memoizedState=us=u:us=us.next=u}return us}function oP(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ck(u){var p=Ek;return Ek+=1,n1===null&&(n1=[]),u=DK(n1,u,p),p=mi,(us===null?p.memoizedState:us.next)===null&&(p=p.alternate,re.H=p===null||p.memoizedState===null?kQ:P4),u}function lP(u){if(u!==null&&typeof u=="object"){if(typeof u.then=="function")return Ck(u);if(u.$$typeof===I)return ca(u)}throw Error(r(438,String(u)))}function _4(u){var p=null,v=mi.updateQueue;if(v!==null&&(p=v.memoCache),p==null){var x=mi.alternate;x!==null&&(x=x.updateQueue,x!==null&&(x=x.memoCache,x!=null&&(p={data:x.data.map(function(E){return E.slice()}),index:0})))}if(p==null&&(p={data:[],index:0}),v===null&&(v=oP(),mi.updateQueue=v),v.memoCache=p,v=p.data[p.index],v===void 0)for(v=p.data[p.index]=Array(u),x=0;x<u;x++)v[x]=Q;return p.index++,v}function hf(u,p){return typeof p=="function"?p(u):p}function cP(u){var p=Zn();return x4(p,Sr,u)}function x4(u,p,v){var x=u.queue;if(x===null)throw Error(r(311));x.lastRenderedReducer=v;var E=u.baseQueue,M=x.pending;if(M!==null){if(E!==null){var j=E.next;E.next=M.next,M.next=j}p.baseQueue=E=M,x.pending=null}if(M=u.baseState,E===null)u.memoizedState=M;else{p=E.next;var Z=j=null,ue=null,Ee=p,Fe=!1;do{var Ge=Ee.lane&-536870913;if(Ge!==Ee.lane?(Ai&Ge)===Ge:(df&Ge)===Ge){var Ce=Ee.revertLane;if(Ce===0)ue!==null&&(ue=ue.next={lane:0,revertLane:0,gesture:null,action:Ee.action,hasEagerState:Ee.hasEagerState,eagerState:Ee.eagerState,next:null}),Ge===K_&&(Fe=!0);else if((df&Ce)===Ce){Ee=Ee.next,Ce===K_&&(Fe=!0);continue}else Ge={lane:0,revertLane:Ee.revertLane,gesture:null,action:Ee.action,hasEagerState:Ee.hasEagerState,eagerState:Ee.eagerState,next:null},ue===null?(Z=ue=Ge,j=M):ue=ue.next=Ge,mi.lanes|=Ce,Lg|=Ce;Ge=Ee.action,yb&&v(M,Ge),M=Ee.hasEagerState?Ee.eagerState:v(M,Ge)}else Ce={lane:Ge,revertLane:Ee.revertLane,gesture:Ee.gesture,action:Ee.action,hasEagerState:Ee.hasEagerState,eagerState:Ee.eagerState,next:null},ue===null?(Z=ue=Ce,j=M):ue=ue.next=Ce,mi.lanes|=Ge,Lg|=Ge;Ee=Ee.next}while(Ee!==null&&Ee!==p);if(ue===null?j=M:ue.next=Z,!ie(M,u.memoizedState)&&(ds=!0,Fe&&(v=Q_,v!==null)))throw v;u.memoizedState=M,u.baseState=j,u.baseQueue=ue,x.lastRenderedState=M}return E===null&&(x.lanes=0),[u.memoizedState,x.dispatch]}function S4(u){var p=Zn(),v=p.queue;if(v===null)throw Error(r(311));v.lastRenderedReducer=u;var x=v.dispatch,E=v.pending,M=p.memoizedState;if(E!==null){v.pending=null;var j=E=E.next;do M=u(M,j.action),j=j.next;while(j!==E);ie(M,p.memoizedState)||(ds=!0),p.memoizedState=M,p.baseQueue===null&&(p.baseState=M),v.lastRenderedState=M}return[M,x]}function qK(u,p,v){var x=mi,E=Zn(),M=Ri;if(M){if(v===void 0)throw Error(r(407));v=v()}else v=p();var j=!ie((Sr||E).memoizedState,v);if(j&&(E.memoizedState=v,ds=!0),E=E.queue,k4(ZK.bind(null,x,E,u),[u]),E.getSnapshot!==p||j||us!==null&&us.memoizedState.tag&1){if(x.flags|=2048,s1(9,{destroy:void 0},YK.bind(null,x,E,v,p),null),Ar===null)throw Error(r(349));M||(df&127)!==0||WK(x,p,v)}return v}function WK(u,p,v){u.flags|=16384,u={getSnapshot:p,value:v},p=mi.updateQueue,p===null?(p=oP(),mi.updateQueue=p,p.stores=[u]):(v=p.stores,v===null?p.stores=[u]:v.push(u))}function YK(u,p,v,x){p.value=v,p.getSnapshot=x,XK(p)&&JK(u)}function ZK(u,p,v){return v(function(){XK(p)&&JK(u)})}function XK(u){var p=u.getSnapshot;u=u.value;try{var v=p();return!ie(u,v)}catch{return!0}}function JK(u){var p=lb(u,2);p!==null&&Yo(p,u,2)}function $4(u){var p=bo();if(typeof u=="function"){var v=u;if(u=v(),yb){vo(!0);try{v()}finally{vo(!1)}}}return p.memoizedState=p.baseState=u,p.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:hf,lastRenderedState:u},p}function KK(u,p,v,x){return u.baseState=v,x4(u,Sr,typeof x=="function"?x:hf)}function _Ce(u,p,v,x,E){if(hP(u))throw Error(r(485));if(u=p.action,u!==null){var M={payload:E,action:u,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(j){M.listeners.push(j)}};re.T!==null?v(!0):M.isTransition=!1,x(M),v=p.pending,v===null?(M.next=p.pending=M,QK(p,M)):(M.next=v.next,p.pending=v.next=M)}}function QK(u,p){var v=p.action,x=p.payload,E=u.state;if(p.isTransition){var M=re.T,j={};re.T=j;try{var Z=v(E,x),ue=re.S;ue!==null&&ue(j,Z),eQ(u,p,Z)}catch(Ee){T4(u,p,Ee)}finally{M!==null&&j.types!==null&&(M.types=j.types),re.T=M}}else try{M=v(E,x),eQ(u,p,M)}catch(Ee){T4(u,p,Ee)}}function eQ(u,p,v){v!==null&&typeof v=="object"&&typeof v.then=="function"?v.then(function(x){tQ(u,p,x)},function(x){return T4(u,p,x)}):tQ(u,p,v)}function tQ(u,p,v){p.status="fulfilled",p.value=v,iQ(p),u.state=v,p=u.pending,p!==null&&(v=p.next,v===p?u.pending=null:(v=v.next,p.next=v,QK(u,v)))}function T4(u,p,v){var x=u.pending;if(u.pending=null,x!==null){x=x.next;do p.status="rejected",p.reason=v,iQ(p),p=p.next;while(p!==x)}u.action=null}function iQ(u){u=u.listeners;for(var p=0;p<u.length;p++)(0,u[p])()}function rQ(u,p){return p}function nQ(u,p){if(Ri){var v=Ar.formState;if(v!==null){e:{var x=mi;if(Ri){if(Wr){t:{for(var E=Wr,M=Rc;E.nodeType!==8;){if(!M){E=null;break t}if(E=Fc(E.nextSibling),E===null){E=null;break t}}M=E.data,E=M==="F!"||M==="F"?E:null}if(E){Wr=Fc(E.nextSibling),x=E.data==="F!";break e}}Tg(x)}x=!1}x&&(p=v[0])}}return v=bo(),v.memoizedState=v.baseState=p,x={pending:null,lanes:0,dispatch:null,lastRenderedReducer:rQ,lastRenderedState:p},v.queue=x,v=SQ.bind(null,mi,x),x.dispatch=v,x=$4(!1),M=A4.bind(null,mi,!1,x.queue),x=bo(),E={state:p,dispatch:null,action:u,pending:null},x.queue=E,v=_Ce.bind(null,mi,E,M,v),E.dispatch=v,x.memoizedState=u,[p,v,!1]}function sQ(u){var p=Zn();return aQ(p,Sr,u)}function aQ(u,p,v){if(p=x4(u,p,rQ)[0],u=cP(hf)[0],typeof p=="object"&&p!==null&&typeof p.then=="function")try{var x=Ck(p)}catch(j){throw j===e1?QA:j}else x=p;p=Zn();var E=p.queue,M=E.dispatch;return v!==p.memoizedState&&(mi.flags|=2048,s1(9,{destroy:void 0},xCe.bind(null,E,v),null)),[x,M,u]}function xCe(u,p){u.action=p}function oQ(u){var p=Zn(),v=Sr;if(v!==null)return aQ(p,v,u);Zn(),p=p.memoizedState,v=Zn();var x=v.queue.dispatch;return v.memoizedState=u,[p,x,!1]}function s1(u,p,v,x){return u={tag:u,create:v,deps:x,inst:p,next:null},p=mi.updateQueue,p===null&&(p=oP(),mi.updateQueue=p),v=p.lastEffect,v===null?p.lastEffect=u.next=u:(x=v.next,v.next=u,u.next=x,p.lastEffect=u),u}function lQ(){return Zn().memoizedState}function uP(u,p,v,x){var E=bo();mi.flags|=u,E.memoizedState=s1(1|p,{destroy:void 0},v,x===void 0?null:x)}function dP(u,p,v,x){var E=Zn();x=x===void 0?null:x;var M=E.memoizedState.inst;Sr!==null&&x!==null&&g4(x,Sr.memoizedState.deps)?E.memoizedState=s1(p,M,v,x):(mi.flags|=u,E.memoizedState=s1(1|p,M,v,x))}function cQ(u,p){uP(8390656,8,u,p)}function k4(u,p){dP(2048,8,u,p)}function SCe(u){mi.flags|=4;var p=mi.updateQueue;if(p===null)p=oP(),mi.updateQueue=p,p.events=[u];else{var v=p.events;v===null?p.events=[u]:v.push(u)}}function uQ(u){var p=Zn().memoizedState;return SCe({ref:p,nextImpl:u}),function(){if((er&2)!==0)throw Error(r(440));return p.impl.apply(void 0,arguments)}}function dQ(u,p){return dP(4,2,u,p)}function hQ(u,p){return dP(4,4,u,p)}function pQ(u,p){if(typeof p=="function"){u=u();var v=p(u);return function(){typeof v=="function"?v():p(null)}}if(p!=null)return u=u(),p.current=u,function(){p.current=null}}function fQ(u,p,v){v=v!=null?v.concat([u]):null,dP(4,4,pQ.bind(null,p,u),v)}function E4(){}function mQ(u,p){var v=Zn();p=p===void 0?null:p;var x=v.memoizedState;return p!==null&&g4(p,x[1])?x[0]:(v.memoizedState=[u,p],u)}function gQ(u,p){var v=Zn();p=p===void 0?null:p;var x=v.memoizedState;if(p!==null&&g4(p,x[1]))return x[0];if(x=u(),yb){vo(!0);try{u()}finally{vo(!1)}}return v.memoizedState=[x,p],x}function C4(u,p,v){return v===void 0||(df&1073741824)!==0&&(Ai&261930)===0?u.memoizedState=p:(u.memoizedState=v,u=yee(),mi.lanes|=u,Lg|=u,v)}function yQ(u,p,v,x){return ie(v,p)?v:i1.current!==null?(u=C4(u,v,x),ie(u,p)||(ds=!0),u):(df&42)===0||(df&1073741824)!==0&&(Ai&261930)===0?(ds=!0,u.memoizedState=v):(u=yee(),mi.lanes|=u,Lg|=u,p)}function vQ(u,p,v,x,E){var M=he.p;he.p=M!==0&&8>M?M:8;var j=re.T,Z={};re.T=Z,A4(u,!1,p,v);try{var ue=E(),Ee=re.S;if(Ee!==null&&Ee(Z,ue),ue!==null&&typeof ue=="object"&&typeof ue.then=="function"){var Fe=vCe(ue,x);Ik(u,p,Fe,Fl(u))}else Ik(u,p,x,Fl(u))}catch(Ge){Ik(u,p,{then:function(){},status:"rejected",reason:Ge},Fl())}finally{he.p=M,j!==null&&Z.types!==null&&(j.types=Z.types),re.T=j}}function $Ce(){}function I4(u,p,v,x){if(u.tag!==5)throw Error(r(476));var E=bQ(u).queue;vQ(u,E,p,xe,v===null?$Ce:function(){return wQ(u),v(x)})}function bQ(u){var p=u.memoizedState;if(p!==null)return p;p={memoizedState:xe,baseState:xe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:hf,lastRenderedState:xe},next:null};var v={};return p.next={memoizedState:v,baseState:v,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:hf,lastRenderedState:v},next:null},u.memoizedState=p,u=u.alternate,u!==null&&(u.memoizedState=p),p}function wQ(u){var p=bQ(u);p.next===null&&(p=u.alternate.memoizedState),Ik(u,p.next.queue,{},Fl())}function M4(){return ca(qk)}function _Q(){return Zn().memoizedState}function xQ(){return Zn().memoizedState}function TCe(u){for(var p=u.return;p!==null;){switch(p.tag){case 24:case 3:var v=Fl();u=Cg(v);var x=Ig(p,u,v);x!==null&&(Yo(x,p,v),$k(x,p,v)),p={cache:s4()},u.payload=p;return}p=p.return}}function kCe(u,p,v){var x=Fl();v={lane:x,revertLane:0,gesture:null,action:v,hasEagerState:!1,eagerState:null,next:null},hP(u)?$Q(p,v):(v=Yj(u,p,v,x),v!==null&&(Yo(v,u,x),TQ(v,p,x)))}function SQ(u,p,v){var x=Fl();Ik(u,p,v,x)}function Ik(u,p,v,x){var E={lane:x,revertLane:0,gesture:null,action:v,hasEagerState:!1,eagerState:null,next:null};if(hP(u))$Q(p,E);else{var M=u.alternate;if(u.lanes===0&&(M===null||M.lanes===0)&&(M=p.lastRenderedReducer,M!==null))try{var j=p.lastRenderedState,Z=M(j,v);if(E.hasEagerState=!0,E.eagerState=Z,ie(Z,j))return qA(u,p,E,0),Ar===null&&GA(),!1}catch{}if(v=Yj(u,p,E,x),v!==null)return Yo(v,u,x),TQ(v,p,x),!0}return!1}function A4(u,p,v,x){if(x={lane:2,revertLane:cV(),gesture:null,action:x,hasEagerState:!1,eagerState:null,next:null},hP(u)){if(p)throw Error(r(479))}else p=Yj(u,v,x,2),p!==null&&Yo(p,u,2)}function hP(u){var p=u.alternate;return u===mi||p!==null&&p===mi}function $Q(u,p){r1=sP=!0;var v=u.pending;v===null?p.next=p:(p.next=v.next,v.next=p),u.pending=p}function TQ(u,p,v){if((v&4194048)!==0){var x=p.lanes;x&=u.pendingLanes,v|=x,p.lanes=v,Kp(u,v)}}var Mk={readContext:ca,use:lP,useCallback:En,useContext:En,useEffect:En,useImperativeHandle:En,useLayoutEffect:En,useInsertionEffect:En,useMemo:En,useReducer:En,useRef:En,useState:En,useDebugValue:En,useDeferredValue:En,useTransition:En,useSyncExternalStore:En,useId:En,useHostTransitionStatus:En,useFormState:En,useActionState:En,useOptimistic:En,useMemoCache:En,useCacheRefresh:En};Mk.useEffectEvent=En;var kQ={readContext:ca,use:lP,useCallback:function(u,p){return bo().memoizedState=[u,p===void 0?null:p],u},useContext:ca,useEffect:cQ,useImperativeHandle:function(u,p,v){v=v!=null?v.concat([u]):null,uP(4194308,4,pQ.bind(null,p,u),v)},useLayoutEffect:function(u,p){return uP(4194308,4,u,p)},useInsertionEffect:function(u,p){uP(4,2,u,p)},useMemo:function(u,p){var v=bo();p=p===void 0?null:p;var x=u();if(yb){vo(!0);try{u()}finally{vo(!1)}}return v.memoizedState=[x,p],x},useReducer:function(u,p,v){var x=bo();if(v!==void 0){var E=v(p);if(yb){vo(!0);try{v(p)}finally{vo(!1)}}}else E=p;return x.memoizedState=x.baseState=E,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:E},x.queue=u,u=u.dispatch=kCe.bind(null,mi,u),[x.memoizedState,u]},useRef:function(u){var p=bo();return u={current:u},p.memoizedState=u},useState:function(u){u=$4(u);var p=u.queue,v=SQ.bind(null,mi,p);return p.dispatch=v,[u.memoizedState,v]},useDebugValue:E4,useDeferredValue:function(u,p){var v=bo();return C4(v,u,p)},useTransition:function(){var u=$4(!1);return u=vQ.bind(null,mi,u.queue,!0,!1),bo().memoizedState=u,[!1,u]},useSyncExternalStore:function(u,p,v){var x=mi,E=bo();if(Ri){if(v===void 0)throw Error(r(407));v=v()}else{if(v=p(),Ar===null)throw Error(r(349));(Ai&127)!==0||WK(x,p,v)}E.memoizedState=v;var M={value:v,getSnapshot:p};return E.queue=M,cQ(ZK.bind(null,x,M,u),[u]),x.flags|=2048,s1(9,{destroy:void 0},YK.bind(null,x,M,v,p),null),v},useId:function(){var u=bo(),p=Ar.identifierPrefix;if(Ri){var v=rh,x=ih;v=(x&~(1<<32-zs(x)-1)).toString(32)+v,p="_"+p+"R_"+v,v=aP++,0<v&&(p+="H"+v.toString(32)),p+="_"}else v=bCe++,p="_"+p+"r_"+v.toString(32)+"_";return u.memoizedState=p},useHostTransitionStatus:M4,useFormState:nQ,useActionState:nQ,useOptimistic:function(u){var p=bo();p.memoizedState=p.baseState=u;var v={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return p.queue=v,p=A4.bind(null,mi,!0,v),v.dispatch=p,[u,p]},useMemoCache:_4,useCacheRefresh:function(){return bo().memoizedState=TCe.bind(null,mi)},useEffectEvent:function(u){var p=bo(),v={impl:u};return p.memoizedState=v,function(){if((er&2)!==0)throw Error(r(440));return v.impl.apply(void 0,arguments)}}},P4={readContext:ca,use:lP,useCallback:mQ,useContext:ca,useEffect:k4,useImperativeHandle:fQ,useInsertionEffect:dQ,useLayoutEffect:hQ,useMemo:gQ,useReducer:cP,useRef:lQ,useState:function(){return cP(hf)},useDebugValue:E4,useDeferredValue:function(u,p){var v=Zn();return yQ(v,Sr.memoizedState,u,p)},useTransition:function(){var u=cP(hf)[0],p=Zn().memoizedState;return[typeof u=="boolean"?u:Ck(u),p]},useSyncExternalStore:qK,useId:_Q,useHostTransitionStatus:M4,useFormState:sQ,useActionState:sQ,useOptimistic:function(u,p){var v=Zn();return KK(v,Sr,u,p)},useMemoCache:_4,useCacheRefresh:xQ};P4.useEffectEvent=uQ;var EQ={readContext:ca,use:lP,useCallback:mQ,useContext:ca,useEffect:k4,useImperativeHandle:fQ,useInsertionEffect:dQ,useLayoutEffect:hQ,useMemo:gQ,useReducer:S4,useRef:lQ,useState:function(){return S4(hf)},useDebugValue:E4,useDeferredValue:function(u,p){var v=Zn();return Sr===null?C4(v,u,p):yQ(v,Sr.memoizedState,u,p)},useTransition:function(){var u=S4(hf)[0],p=Zn().memoizedState;return[typeof u=="boolean"?u:Ck(u),p]},useSyncExternalStore:qK,useId:_Q,useHostTransitionStatus:M4,useFormState:oQ,useActionState:oQ,useOptimistic:function(u,p){var v=Zn();return Sr!==null?KK(v,Sr,u,p):(v.baseState=u,[u,v.queue.dispatch])},useMemoCache:_4,useCacheRefresh:xQ};EQ.useEffectEvent=uQ;function O4(u,p,v,x){p=u.memoizedState,v=v(x,p),v=v==null?p:f({},p,v),u.memoizedState=v,u.lanes===0&&(u.updateQueue.baseState=v)}var L4={enqueueSetState:function(u,p,v){u=u._reactInternals;var x=Fl(),E=Cg(x);E.payload=p,v!=null&&(E.callback=v),p=Ig(u,E,x),p!==null&&(Yo(p,u,x),$k(p,u,x))},enqueueReplaceState:function(u,p,v){u=u._reactInternals;var x=Fl(),E=Cg(x);E.tag=1,E.payload=p,v!=null&&(E.callback=v),p=Ig(u,E,x),p!==null&&(Yo(p,u,x),$k(p,u,x))},enqueueForceUpdate:function(u,p){u=u._reactInternals;var v=Fl(),x=Cg(v);x.tag=2,p!=null&&(x.callback=p),p=Ig(u,x,v),p!==null&&(Yo(p,u,v),$k(p,u,v))}};function CQ(u,p,v,x,E,M,j){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(x,M,j):p.prototype&&p.prototype.isPureReactComponent?!we(v,x)||!we(E,M):!0}function IQ(u,p,v,x){u=p.state,typeof p.componentWillReceiveProps=="function"&&p.componentWillReceiveProps(v,x),typeof p.UNSAFE_componentWillReceiveProps=="function"&&p.UNSAFE_componentWillReceiveProps(v,x),p.state!==u&&L4.enqueueReplaceState(p,p.state,null)}function vb(u,p){var v=p;if("ref"in p){v={};for(var x in p)x!=="ref"&&(v[x]=p[x])}if(u=u.defaultProps){v===p&&(v=f({},v));for(var E in u)v[E]===void 0&&(v[E]=u[E])}return v}function MQ(u){HA(u)}function AQ(u){console.error(u)}function PQ(u){HA(u)}function pP(u,p){try{var v=u.onUncaughtError;v(p.value,{componentStack:p.stack})}catch(x){setTimeout(function(){throw x})}}function OQ(u,p,v){try{var x=u.onCaughtError;x(v.value,{componentStack:v.stack,errorBoundary:p.tag===1?p.stateNode:null})}catch(E){setTimeout(function(){throw E})}}function D4(u,p,v){return v=Cg(v),v.tag=3,v.payload={element:null},v.callback=function(){pP(u,p)},v}function LQ(u){return u=Cg(u),u.tag=3,u}function DQ(u,p,v,x){var E=v.type.getDerivedStateFromError;if(typeof E=="function"){var M=x.value;u.payload=function(){return E(M)},u.callback=function(){OQ(p,v,x)}}var j=v.stateNode;j!==null&&typeof j.componentDidCatch=="function"&&(u.callback=function(){OQ(p,v,x),typeof E!="function"&&(Dg===null?Dg=new Set([this]):Dg.add(this));var Z=x.stack;this.componentDidCatch(x.value,{componentStack:Z!==null?Z:""})})}function ECe(u,p,v,x,E){if(v.flags|=32768,x!==null&&typeof x=="object"&&typeof x.then=="function"){if(p=v.alternate,p!==null&&J_(p,v,E,!0),v=Ll.current,v!==null){switch(v.tag){case 31:case 13:return zc===null?TP():v.alternate===null&&Cn===0&&(Cn=3),v.flags&=-257,v.flags|=65536,v.lanes=E,x===eP?v.flags|=16384:(p=v.updateQueue,p===null?v.updateQueue=new Set([x]):p.add(x),aV(u,x,E)),!1;case 22:return v.flags|=65536,x===eP?v.flags|=16384:(p=v.updateQueue,p===null?(p={transitions:null,markerInstances:null,retryQueue:new Set([x])},v.updateQueue=p):(v=p.retryQueue,v===null?p.retryQueue=new Set([x]):v.add(x)),aV(u,x,E)),!1}throw Error(r(435,v.tag))}return aV(u,x,E),TP(),!1}if(Ri)return p=Ll.current,p!==null?((p.flags&65536)===0&&(p.flags|=256),p.flags|=65536,p.lanes=E,x!==e4&&(u=Error(r(422),{cause:x}),bk(Oc(u,v)))):(x!==e4&&(p=Error(r(423),{cause:x}),bk(Oc(p,v))),u=u.current.alternate,u.flags|=65536,E&=-E,u.lanes|=E,x=Oc(x,v),E=D4(u.stateNode,x,E),d4(u,E),Cn!==4&&(Cn=2)),!1;var M=Error(r(520),{cause:x});if(M=Oc(M,v),Fk===null?Fk=[M]:Fk.push(M),Cn!==4&&(Cn=2),p===null)return!0;x=Oc(x,v),v=p;do{switch(v.tag){case 3:return v.flags|=65536,u=E&-E,v.lanes|=u,u=D4(v.stateNode,x,u),d4(v,u),!1;case 1:if(p=v.type,M=v.stateNode,(v.flags&128)===0&&(typeof p.getDerivedStateFromError=="function"||M!==null&&typeof M.componentDidCatch=="function"&&(Dg===null||!Dg.has(M))))return v.flags|=65536,E&=-E,v.lanes|=E,E=LQ(E),DQ(E,u,v,x),d4(v,E),!1}v=v.return}while(v!==null);return!1}var R4=Error(r(461)),ds=!1;function ua(u,p,v,x){p.child=u===null?NK(p,null,v,x):gb(p,u.child,v,x)}function RQ(u,p,v,x,E){v=v.render;var M=p.ref;if("ref"in x){var j={};for(var Z in x)Z!=="ref"&&(j[Z]=x[Z])}else j=x;return hb(p),x=y4(u,p,v,j,M,E),Z=v4(),u!==null&&!ds?(b4(u,p,E),pf(u,p,E)):(Ri&&Z&&Kj(p),p.flags|=1,ua(u,p,x,E),p.child)}function zQ(u,p,v,x,E){if(u===null){var M=v.type;return typeof M=="function"&&!Zj(M)&&M.defaultProps===void 0&&v.compare===null?(p.tag=15,p.type=M,FQ(u,p,M,x,E)):(u=YA(v.type,null,x,p,p.mode,E),u.ref=p.ref,u.return=p,p.child=u)}if(M=u.child,!H4(u,E)){var j=M.memoizedProps;if(v=v.compare,v=v!==null?v:we,v(j,x)&&u.ref===p.ref)return pf(u,p,E)}return p.flags|=1,u=of(M,x),u.ref=p.ref,u.return=p,p.child=u}function FQ(u,p,v,x,E){if(u!==null){var M=u.memoizedProps;if(we(M,x)&&u.ref===p.ref)if(ds=!1,p.pendingProps=x=M,H4(u,E))(u.flags&131072)!==0&&(ds=!0);else return p.lanes=u.lanes,pf(u,p,E)}return z4(u,p,v,x,E)}function NQ(u,p,v,x){var E=x.children,M=u!==null?u.memoizedState:null;if(u===null&&p.stateNode===null&&(p.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),x.mode==="hidden"){if((p.flags&128)!==0){if(M=M!==null?M.baseLanes|v:v,u!==null){for(x=p.child=u.child,E=0;x!==null;)E=E|x.lanes|x.childLanes,x=x.sibling;x=E&~M}else x=0,p.child=null;return jQ(u,p,M,v,x)}if((v&536870912)!==0)p.memoizedState={baseLanes:0,cachePool:null},u!==null&&KA(p,M!==null?M.cachePool:null),M!==null?BK(p,M):p4(),UK(p);else return x=p.lanes=536870912,jQ(u,p,M!==null?M.baseLanes|v:v,v,x)}else M!==null?(KA(p,M.cachePool),BK(p,M),Ag(),p.memoizedState=null):(u!==null&&KA(p,null),p4(),Ag());return ua(u,p,E,v),p.child}function Ak(u,p){return u!==null&&u.tag===22||p.stateNode!==null||(p.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),p.sibling}function jQ(u,p,v,x,E){var M=o4();return M=M===null?null:{parent:cs._currentValue,pool:M},p.memoizedState={baseLanes:v,cachePool:M},u!==null&&KA(p,null),p4(),UK(p),u!==null&&J_(u,p,x,!0),p.childLanes=E,null}function fP(u,p){return p=gP({mode:p.mode,children:p.children},u.mode),p.ref=u.ref,u.child=p,p.return=u,p}function VQ(u,p,v){return gb(p,u.child,null,v),u=fP(p,p.pendingProps),u.flags|=2,Dl(p),p.memoizedState=null,u}function CCe(u,p,v){var x=p.pendingProps,E=(p.flags&128)!==0;if(p.flags&=-129,u===null){if(Ri){if(x.mode==="hidden")return u=fP(p,x),p.lanes=536870912,Ak(null,u);if(m4(p),(u=Wr)?(u=Qee(u,Rc),u=u!==null&&u.data==="&"?u:null,u!==null&&(p.memoizedState={dehydrated:u,treeContext:Sg!==null?{id:ih,overflow:rh}:null,retryLane:536870912,hydrationErrors:null},v=$K(u),v.return=p,p.child=v,la=p,Wr=null)):u=null,u===null)throw Tg(p);return p.lanes=536870912,null}return fP(p,x)}var M=u.memoizedState;if(M!==null){var j=M.dehydrated;if(m4(p),E)if(p.flags&256)p.flags&=-257,p=VQ(u,p,v);else if(p.memoizedState!==null)p.child=u.child,p.flags|=128,p=null;else throw Error(r(558));else if(ds||J_(u,p,v,!1),E=(v&u.childLanes)!==0,ds||E){if(x=Ar,x!==null&&(j=bt(x,v),j!==0&&j!==M.retryLane))throw M.retryLane=j,lb(u,j),Yo(x,u,j),R4;TP(),p=VQ(u,p,v)}else u=M.treeContext,Wr=Fc(j.nextSibling),la=p,Ri=!0,$g=null,Rc=!1,u!==null&&EK(p,u),p=fP(p,x),p.flags|=4096;return p}return u=of(u.child,{mode:x.mode,children:x.children}),u.ref=p.ref,p.child=u,u.return=p,u}function mP(u,p){var v=p.ref;if(v===null)u!==null&&u.ref!==null&&(p.flags|=4194816);else{if(typeof v!="function"&&typeof v!="object")throw Error(r(284));(u===null||u.ref!==v)&&(p.flags|=4194816)}}function z4(u,p,v,x,E){return hb(p),v=y4(u,p,v,x,void 0,E),x=v4(),u!==null&&!ds?(b4(u,p,E),pf(u,p,E)):(Ri&&x&&Kj(p),p.flags|=1,ua(u,p,v,E),p.child)}function BQ(u,p,v,x,E,M){return hb(p),p.updateQueue=null,v=GK(p,x,v,E),HK(u),x=v4(),u!==null&&!ds?(b4(u,p,M),pf(u,p,M)):(Ri&&x&&Kj(p),p.flags|=1,ua(u,p,v,M),p.child)}function UQ(u,p,v,x,E){if(hb(p),p.stateNode===null){var M=W_,j=v.contextType;typeof j=="object"&&j!==null&&(M=ca(j)),M=new v(x,M),p.memoizedState=M.state!==null&&M.state!==void 0?M.state:null,M.updater=L4,p.stateNode=M,M._reactInternals=p,M=p.stateNode,M.props=x,M.state=p.memoizedState,M.refs={},c4(p),j=v.contextType,M.context=typeof j=="object"&&j!==null?ca(j):W_,M.state=p.memoizedState,j=v.getDerivedStateFromProps,typeof j=="function"&&(O4(p,v,j,x),M.state=p.memoizedState),typeof v.getDerivedStateFromProps=="function"||typeof M.getSnapshotBeforeUpdate=="function"||typeof M.UNSAFE_componentWillMount!="function"&&typeof M.componentWillMount!="function"||(j=M.state,typeof M.componentWillMount=="function"&&M.componentWillMount(),typeof M.UNSAFE_componentWillMount=="function"&&M.UNSAFE_componentWillMount(),j!==M.state&&L4.enqueueReplaceState(M,M.state,null),kk(p,x,M,E),Tk(),M.state=p.memoizedState),typeof M.componentDidMount=="function"&&(p.flags|=4194308),x=!0}else if(u===null){M=p.stateNode;var Z=p.memoizedProps,ue=vb(v,Z);M.props=ue;var Ee=M.context,Fe=v.contextType;j=W_,typeof Fe=="object"&&Fe!==null&&(j=ca(Fe));var Ge=v.getDerivedStateFromProps;Fe=typeof Ge=="function"||typeof M.getSnapshotBeforeUpdate=="function",Z=p.pendingProps!==Z,Fe||typeof M.UNSAFE_componentWillReceiveProps!="function"&&typeof M.componentWillReceiveProps!="function"||(Z||Ee!==j)&&IQ(p,M,x,j),Eg=!1;var Ce=p.memoizedState;M.state=Ce,kk(p,x,M,E),Tk(),Ee=p.memoizedState,Z||Ce!==Ee||Eg?(typeof Ge=="function"&&(O4(p,v,Ge,x),Ee=p.memoizedState),(ue=Eg||CQ(p,v,ue,x,Ce,Ee,j))?(Fe||typeof M.UNSAFE_componentWillMount!="function"&&typeof M.componentWillMount!="function"||(typeof M.componentWillMount=="function"&&M.componentWillMount(),typeof M.UNSAFE_componentWillMount=="function"&&M.UNSAFE_componentWillMount()),typeof M.componentDidMount=="function"&&(p.flags|=4194308)):(typeof M.componentDidMount=="function"&&(p.flags|=4194308),p.memoizedProps=x,p.memoizedState=Ee),M.props=x,M.state=Ee,M.context=j,x=ue):(typeof M.componentDidMount=="function"&&(p.flags|=4194308),x=!1)}else{M=p.stateNode,u4(u,p),j=p.memoizedProps,Fe=vb(v,j),M.props=Fe,Ge=p.pendingProps,Ce=M.context,Ee=v.contextType,ue=W_,typeof Ee=="object"&&Ee!==null&&(ue=ca(Ee)),Z=v.getDerivedStateFromProps,(Ee=typeof Z=="function"||typeof M.getSnapshotBeforeUpdate=="function")||typeof M.UNSAFE_componentWillReceiveProps!="function"&&typeof M.componentWillReceiveProps!="function"||(j!==Ge||Ce!==ue)&&IQ(p,M,x,ue),Eg=!1,Ce=p.memoizedState,M.state=Ce,kk(p,x,M,E),Tk();var Me=p.memoizedState;j!==Ge||Ce!==Me||Eg||u!==null&&u.dependencies!==null&&XA(u.dependencies)?(typeof Z=="function"&&(O4(p,v,Z,x),Me=p.memoizedState),(Fe=Eg||CQ(p,v,Fe,x,Ce,Me,ue)||u!==null&&u.dependencies!==null&&XA(u.dependencies))?(Ee||typeof M.UNSAFE_componentWillUpdate!="function"&&typeof M.componentWillUpdate!="function"||(typeof M.componentWillUpdate=="function"&&M.componentWillUpdate(x,Me,ue),typeof M.UNSAFE_componentWillUpdate=="function"&&M.UNSAFE_componentWillUpdate(x,Me,ue)),typeof M.componentDidUpdate=="function"&&(p.flags|=4),typeof M.getSnapshotBeforeUpdate=="function"&&(p.flags|=1024)):(typeof M.componentDidUpdate!="function"||j===u.memoizedProps&&Ce===u.memoizedState||(p.flags|=4),typeof M.getSnapshotBeforeUpdate!="function"||j===u.memoizedProps&&Ce===u.memoizedState||(p.flags|=1024),p.memoizedProps=x,p.memoizedState=Me),M.props=x,M.state=Me,M.context=ue,x=Fe):(typeof M.componentDidUpdate!="function"||j===u.memoizedProps&&Ce===u.memoizedState||(p.flags|=4),typeof M.getSnapshotBeforeUpdate!="function"||j===u.memoizedProps&&Ce===u.memoizedState||(p.flags|=1024),x=!1)}return M=x,mP(u,p),x=(p.flags&128)!==0,M||x?(M=p.stateNode,v=x&&typeof v.getDerivedStateFromError!="function"?null:M.render(),p.flags|=1,u!==null&&x?(p.child=gb(p,u.child,null,E),p.child=gb(p,null,v,E)):ua(u,p,v,E),p.memoizedState=M.state,u=p.child):u=pf(u,p,E),u}function HQ(u,p,v,x){return ub(),p.flags|=256,ua(u,p,v,x),p.child}var F4={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function N4(u){return{baseLanes:u,cachePool:OK()}}function j4(u,p,v){return u=u!==null?u.childLanes&~v:0,p&&(u|=zl),u}function GQ(u,p,v){var x=p.pendingProps,E=!1,M=(p.flags&128)!==0,j;if((j=M)||(j=u!==null&&u.memoizedState===null?!1:(Yn.current&2)!==0),j&&(E=!0,p.flags&=-129),j=(p.flags&32)!==0,p.flags&=-33,u===null){if(Ri){if(E?Mg(p):Ag(),(u=Wr)?(u=Qee(u,Rc),u=u!==null&&u.data!=="&"?u:null,u!==null&&(p.memoizedState={dehydrated:u,treeContext:Sg!==null?{id:ih,overflow:rh}:null,retryLane:536870912,hydrationErrors:null},v=$K(u),v.return=p,p.child=v,la=p,Wr=null)):u=null,u===null)throw Tg(p);return xV(u)?p.lanes=32:p.lanes=536870912,null}var Z=x.children;return x=x.fallback,E?(Ag(),E=p.mode,Z=gP({mode:"hidden",children:Z},E),x=cb(x,E,v,null),Z.return=p,x.return=p,Z.sibling=x,p.child=Z,x=p.child,x.memoizedState=N4(v),x.childLanes=j4(u,j,v),p.memoizedState=F4,Ak(null,x)):(Mg(p),V4(p,Z))}var ue=u.memoizedState;if(ue!==null&&(Z=ue.dehydrated,Z!==null)){if(M)p.flags&256?(Mg(p),p.flags&=-257,p=B4(u,p,v)):p.memoizedState!==null?(Ag(),p.child=u.child,p.flags|=128,p=null):(Ag(),Z=x.fallback,E=p.mode,x=gP({mode:"visible",children:x.children},E),Z=cb(Z,E,v,null),Z.flags|=2,x.return=p,Z.return=p,x.sibling=Z,p.child=x,gb(p,u.child,null,v),x=p.child,x.memoizedState=N4(v),x.childLanes=j4(u,j,v),p.memoizedState=F4,p=Ak(null,x));else if(Mg(p),xV(Z)){if(j=Z.nextSibling&&Z.nextSibling.dataset,j)var Ee=j.dgst;j=Ee,x=Error(r(419)),x.stack="",x.digest=j,bk({value:x,source:null,stack:null}),p=B4(u,p,v)}else if(ds||J_(u,p,v,!1),j=(v&u.childLanes)!==0,ds||j){if(j=Ar,j!==null&&(x=bt(j,v),x!==0&&x!==ue.retryLane))throw ue.retryLane=x,lb(u,x),Yo(j,u,x),R4;_V(Z)||TP(),p=B4(u,p,v)}else _V(Z)?(p.flags|=192,p.child=u.child,p=null):(u=ue.treeContext,Wr=Fc(Z.nextSibling),la=p,Ri=!0,$g=null,Rc=!1,u!==null&&EK(p,u),p=V4(p,x.children),p.flags|=4096);return p}return E?(Ag(),Z=x.fallback,E=p.mode,ue=u.child,Ee=ue.sibling,x=of(ue,{mode:"hidden",children:x.children}),x.subtreeFlags=ue.subtreeFlags&65011712,Ee!==null?Z=of(Ee,Z):(Z=cb(Z,E,v,null),Z.flags|=2),Z.return=p,x.return=p,x.sibling=Z,p.child=x,Ak(null,x),x=p.child,Z=u.child.memoizedState,Z===null?Z=N4(v):(E=Z.cachePool,E!==null?(ue=cs._currentValue,E=E.parent!==ue?{parent:ue,pool:ue}:E):E=OK(),Z={baseLanes:Z.baseLanes|v,cachePool:E}),x.memoizedState=Z,x.childLanes=j4(u,j,v),p.memoizedState=F4,Ak(u.child,x)):(Mg(p),v=u.child,u=v.sibling,v=of(v,{mode:"visible",children:x.children}),v.return=p,v.sibling=null,u!==null&&(j=p.deletions,j===null?(p.deletions=[u],p.flags|=16):j.push(u)),p.child=v,p.memoizedState=null,v)}function V4(u,p){return p=gP({mode:"visible",children:p},u.mode),p.return=u,u.child=p}function gP(u,p){return u=Ol(22,u,null,p),u.lanes=0,u}function B4(u,p,v){return gb(p,u.child,null,v),u=V4(p,p.pendingProps.children),u.flags|=2,p.memoizedState=null,u}function qQ(u,p,v){u.lanes|=p;var x=u.alternate;x!==null&&(x.lanes|=p),r4(u.return,p,v)}function U4(u,p,v,x,E,M){var j=u.memoizedState;j===null?u.memoizedState={isBackwards:p,rendering:null,renderingStartTime:0,last:x,tail:v,tailMode:E,treeForkCount:M}:(j.isBackwards=p,j.rendering=null,j.renderingStartTime=0,j.last=x,j.tail=v,j.tailMode=E,j.treeForkCount=M)}function WQ(u,p,v){var x=p.pendingProps,E=x.revealOrder,M=x.tail;x=x.children;var j=Yn.current,Z=(j&2)!==0;if(Z?(j=j&1|2,p.flags|=128):j&=1,Le(Yn,j),ua(u,p,x,v),x=Ri?vk:0,!Z&&u!==null&&(u.flags&128)!==0)e:for(u=p.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&qQ(u,v,p);else if(u.tag===19)qQ(u,v,p);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===p)break e;for(;u.sibling===null;){if(u.return===null||u.return===p)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}switch(E){case"forwards":for(v=p.child,E=null;v!==null;)u=v.alternate,u!==null&&nP(u)===null&&(E=v),v=v.sibling;v=E,v===null?(E=p.child,p.child=null):(E=v.sibling,v.sibling=null),U4(p,!1,E,v,M,x);break;case"backwards":case"unstable_legacy-backwards":for(v=null,E=p.child,p.child=null;E!==null;){if(u=E.alternate,u!==null&&nP(u)===null){p.child=E;break}u=E.sibling,E.sibling=v,v=E,E=u}U4(p,!0,v,null,M,x);break;case"together":U4(p,!1,null,null,void 0,x);break;default:p.memoizedState=null}return p.child}function pf(u,p,v){if(u!==null&&(p.dependencies=u.dependencies),Lg|=p.lanes,(v&p.childLanes)===0)if(u!==null){if(J_(u,p,v,!1),(v&p.childLanes)===0)return null}else return null;if(u!==null&&p.child!==u.child)throw Error(r(153));if(p.child!==null){for(u=p.child,v=of(u,u.pendingProps),p.child=v,v.return=p;u.sibling!==null;)u=u.sibling,v=v.sibling=of(u,u.pendingProps),v.return=p;v.sibling=null}return p.child}function H4(u,p){return(u.lanes&p)!==0?!0:(u=u.dependencies,!!(u!==null&&XA(u)))}function ICe(u,p,v){switch(p.tag){case 3:pi(p,p.stateNode.containerInfo),kg(p,cs,u.memoizedState.cache),ub();break;case 27:case 5:Wn(p);break;case 4:pi(p,p.stateNode.containerInfo);break;case 10:kg(p,p.type,p.memoizedProps.value);break;case 31:if(p.memoizedState!==null)return p.flags|=128,m4(p),null;break;case 13:var x=p.memoizedState;if(x!==null)return x.dehydrated!==null?(Mg(p),p.flags|=128,null):(v&p.child.childLanes)!==0?GQ(u,p,v):(Mg(p),u=pf(u,p,v),u!==null?u.sibling:null);Mg(p);break;case 19:var E=(u.flags&128)!==0;if(x=(v&p.childLanes)!==0,x||(J_(u,p,v,!1),x=(v&p.childLanes)!==0),E){if(x)return WQ(u,p,v);p.flags|=128}if(E=p.memoizedState,E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),Le(Yn,Yn.current),x)break;return null;case 22:return p.lanes=0,NQ(u,p,v,p.pendingProps);case 24:kg(p,cs,u.memoizedState.cache)}return pf(u,p,v)}function YQ(u,p,v){if(u!==null)if(u.memoizedProps!==p.pendingProps)ds=!0;else{if(!H4(u,v)&&(p.flags&128)===0)return ds=!1,ICe(u,p,v);ds=(u.flags&131072)!==0}else ds=!1,Ri&&(p.flags&1048576)!==0&&kK(p,vk,p.index);switch(p.lanes=0,p.tag){case 16:e:{var x=p.pendingProps;if(u=fb(p.elementType),p.type=u,typeof u=="function")Zj(u)?(x=vb(u,x),p.tag=1,p=UQ(null,p,u,x,v)):(p.tag=0,p=z4(null,p,u,x,v));else{if(u!=null){var E=u.$$typeof;if(E===P){p.tag=11,p=RQ(null,p,u,x,v);break e}else if(E===R){p.tag=14,p=zQ(null,p,u,x,v);break e}}throw p=K(u)||u,Error(r(306,p,""))}}return p;case 0:return z4(u,p,p.type,p.pendingProps,v);case 1:return x=p.type,E=vb(x,p.pendingProps),UQ(u,p,x,E,v);case 3:e:{if(pi(p,p.stateNode.containerInfo),u===null)throw Error(r(387));x=p.pendingProps;var M=p.memoizedState;E=M.element,u4(u,p),kk(p,x,null,v);var j=p.memoizedState;if(x=j.cache,kg(p,cs,x),x!==M.cache&&n4(p,[cs],v,!0),Tk(),x=j.element,M.isDehydrated)if(M={element:x,isDehydrated:!1,cache:j.cache},p.updateQueue.baseState=M,p.memoizedState=M,p.flags&256){p=HQ(u,p,x,v);break e}else if(x!==E){E=Oc(Error(r(424)),p),bk(E),p=HQ(u,p,x,v);break e}else for(u=p.stateNode.containerInfo,u.nodeType===9?u=u.body:u=u.nodeName==="HTML"?u.ownerDocument.body:u,Wr=Fc(u.firstChild),la=p,Ri=!0,$g=null,Rc=!0,v=NK(p,null,x,v),p.child=v;v;)v.flags=v.flags&-3|4096,v=v.sibling;else{if(ub(),x===E){p=pf(u,p,v);break e}ua(u,p,x,v)}p=p.child}return p;case 26:return mP(u,p),u===null?(v=ste(p.type,null,p.pendingProps,null))?p.memoizedState=v:Ri||(v=p.type,u=p.pendingProps,x=PP(ut.current).createElement(v),x[hr]=p,x[zr]=u,da(x,v,u),mn(x),p.stateNode=x):p.memoizedState=ste(p.type,u.memoizedProps,p.pendingProps,u.memoizedState),null;case 27:return Wn(p),u===null&&Ri&&(x=p.stateNode=ite(p.type,p.pendingProps,ut.current),la=p,Rc=!0,E=Wr,Ng(p.type)?(SV=E,Wr=Fc(x.firstChild)):Wr=E),ua(u,p,p.pendingProps.children,v),mP(u,p),u===null&&(p.flags|=4194304),p.child;case 5:return u===null&&Ri&&((E=x=Wr)&&(x=sIe(x,p.type,p.pendingProps,Rc),x!==null?(p.stateNode=x,la=p,Wr=Fc(x.firstChild),Rc=!1,E=!0):E=!1),E||Tg(p)),Wn(p),E=p.type,M=p.pendingProps,j=u!==null?u.memoizedProps:null,x=M.children,vV(E,M)?x=null:j!==null&&vV(E,j)&&(p.flags|=32),p.memoizedState!==null&&(E=y4(u,p,wCe,null,null,v),qk._currentValue=E),mP(u,p),ua(u,p,x,v),p.child;case 6:return u===null&&Ri&&((u=v=Wr)&&(v=aIe(v,p.pendingProps,Rc),v!==null?(p.stateNode=v,la=p,Wr=null,u=!0):u=!1),u||Tg(p)),null;case 13:return GQ(u,p,v);case 4:return pi(p,p.stateNode.containerInfo),x=p.pendingProps,u===null?p.child=gb(p,null,x,v):ua(u,p,x,v),p.child;case 11:return RQ(u,p,p.type,p.pendingProps,v);case 7:return ua(u,p,p.pendingProps,v),p.child;case 8:return ua(u,p,p.pendingProps.children,v),p.child;case 12:return ua(u,p,p.pendingProps.children,v),p.child;case 10:return x=p.pendingProps,kg(p,p.type,x.value),ua(u,p,x.children,v),p.child;case 9:return E=p.type._context,x=p.pendingProps.children,hb(p),E=ca(E),x=x(E),p.flags|=1,ua(u,p,x,v),p.child;case 14:return zQ(u,p,p.type,p.pendingProps,v);case 15:return FQ(u,p,p.type,p.pendingProps,v);case 19:return WQ(u,p,v);case 31:return CCe(u,p,v);case 22:return NQ(u,p,v,p.pendingProps);case 24:return hb(p),x=ca(cs),u===null?(E=o4(),E===null&&(E=Ar,M=s4(),E.pooledCache=M,M.refCount++,M!==null&&(E.pooledCacheLanes|=v),E=M),p.memoizedState={parent:x,cache:E},c4(p),kg(p,cs,E)):((u.lanes&v)!==0&&(u4(u,p),kk(p,null,null,v),Tk()),E=u.memoizedState,M=p.memoizedState,E.parent!==x?(E={parent:x,cache:x},p.memoizedState=E,p.lanes===0&&(p.memoizedState=p.updateQueue.baseState=E),kg(p,cs,x)):(x=M.cache,kg(p,cs,x),x!==E.cache&&n4(p,[cs],v,!0))),ua(u,p,p.pendingProps.children,v),p.child;case 29:throw p.pendingProps}throw Error(r(156,p.tag))}function ff(u){u.flags|=4}function G4(u,p,v,x,E){if((p=(u.mode&32)!==0)&&(p=!1),p){if(u.flags|=16777216,(E&335544128)===E)if(u.stateNode.complete)u.flags|=8192;else if(_ee())u.flags|=8192;else throw mb=eP,l4}else u.flags&=-16777217}function ZQ(u,p){if(p.type!=="stylesheet"||(p.state.loading&4)!==0)u.flags&=-16777217;else if(u.flags|=16777216,!ute(p))if(_ee())u.flags|=8192;else throw mb=eP,l4}function yP(u,p){p!==null&&(u.flags|=4),u.flags&16384&&(p=u.tag!==22?Ie():536870912,u.lanes|=p,c1|=p)}function Pk(u,p){if(!Ri)switch(u.tailMode){case"hidden":p=u.tail;for(var v=null;p!==null;)p.alternate!==null&&(v=p),p=p.sibling;v===null?u.tail=null:v.sibling=null;break;case"collapsed":v=u.tail;for(var x=null;v!==null;)v.alternate!==null&&(x=v),v=v.sibling;x===null?p||u.tail===null?u.tail=null:u.tail.sibling=null:x.sibling=null}}function Yr(u){var p=u.alternate!==null&&u.alternate.child===u.child,v=0,x=0;if(p)for(var E=u.child;E!==null;)v|=E.lanes|E.childLanes,x|=E.subtreeFlags&65011712,x|=E.flags&65011712,E.return=u,E=E.sibling;else for(E=u.child;E!==null;)v|=E.lanes|E.childLanes,x|=E.subtreeFlags,x|=E.flags,E.return=u,E=E.sibling;return u.subtreeFlags|=x,u.childLanes=v,p}function MCe(u,p,v){var x=p.pendingProps;switch(Qj(p),p.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yr(p),null;case 1:return Yr(p),null;case 3:return v=p.stateNode,x=null,u!==null&&(x=u.memoizedState.cache),p.memoizedState.cache!==x&&(p.flags|=2048),uf(cs),it(),v.pendingContext&&(v.context=v.pendingContext,v.pendingContext=null),(u===null||u.child===null)&&(X_(p)?ff(p):u===null||u.memoizedState.isDehydrated&&(p.flags&256)===0||(p.flags|=1024,t4())),Yr(p),null;case 26:var E=p.type,M=p.memoizedState;return u===null?(ff(p),M!==null?(Yr(p),ZQ(p,M)):(Yr(p),G4(p,E,null,x,v))):M?M!==u.memoizedState?(ff(p),Yr(p),ZQ(p,M)):(Yr(p),p.flags&=-16777217):(u=u.memoizedProps,u!==x&&ff(p),Yr(p),G4(p,E,u,x,v)),null;case 27:if(fn(p),v=ut.current,E=p.type,u!==null&&p.stateNode!=null)u.memoizedProps!==x&&ff(p);else{if(!x){if(p.stateNode===null)throw Error(r(166));return Yr(p),null}u=Je.current,X_(p)?CK(p):(u=ite(E,x,v),p.stateNode=u,ff(p))}return Yr(p),null;case 5:if(fn(p),E=p.type,u!==null&&p.stateNode!=null)u.memoizedProps!==x&&ff(p);else{if(!x){if(p.stateNode===null)throw Error(r(166));return Yr(p),null}if(M=Je.current,X_(p))CK(p);else{var j=PP(ut.current);switch(M){case 1:M=j.createElementNS("http://www.w3.org/2000/svg",E);break;case 2:M=j.createElementNS("http://www.w3.org/1998/Math/MathML",E);break;default:switch(E){case"svg":M=j.createElementNS("http://www.w3.org/2000/svg",E);break;case"math":M=j.createElementNS("http://www.w3.org/1998/Math/MathML",E);break;case"script":M=j.createElement("div"),M.innerHTML="<script><\/script>",M=M.removeChild(M.firstChild);break;case"select":M=typeof x.is=="string"?j.createElement("select",{is:x.is}):j.createElement("select"),x.multiple?M.multiple=!0:x.size&&(M.size=x.size);break;default:M=typeof x.is=="string"?j.createElement(E,{is:x.is}):j.createElement(E)}}M[hr]=p,M[zr]=x;e:for(j=p.child;j!==null;){if(j.tag===5||j.tag===6)M.appendChild(j.stateNode);else if(j.tag!==4&&j.tag!==27&&j.child!==null){j.child.return=j,j=j.child;continue}if(j===p)break e;for(;j.sibling===null;){if(j.return===null||j.return===p)break e;j=j.return}j.sibling.return=j.return,j=j.sibling}p.stateNode=M;e:switch(da(M,E,x),E){case"button":case"input":case"select":case"textarea":x=!!x.autoFocus;break e;case"img":x=!0;break e;default:x=!1}x&&ff(p)}}return Yr(p),G4(p,p.type,u===null?null:u.memoizedProps,p.pendingProps,v),null;case 6:if(u&&p.stateNode!=null)u.memoizedProps!==x&&ff(p);else{if(typeof x!="string"&&p.stateNode===null)throw Error(r(166));if(u=ut.current,X_(p)){if(u=p.stateNode,v=p.memoizedProps,x=null,E=la,E!==null)switch(E.tag){case 27:case 5:x=E.memoizedProps}u[hr]=p,u=!!(u.nodeValue===v||x!==null&&x.suppressHydrationWarning===!0||Gee(u.nodeValue,v)),u||Tg(p,!0)}else u=PP(u).createTextNode(x),u[hr]=p,p.stateNode=u}return Yr(p),null;case 31:if(v=p.memoizedState,u===null||u.memoizedState!==null){if(x=X_(p),v!==null){if(u===null){if(!x)throw Error(r(318));if(u=p.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(r(557));u[hr]=p}else ub(),(p.flags&128)===0&&(p.memoizedState=null),p.flags|=4;Yr(p),u=!1}else v=t4(),u!==null&&u.memoizedState!==null&&(u.memoizedState.hydrationErrors=v),u=!0;if(!u)return p.flags&256?(Dl(p),p):(Dl(p),null);if((p.flags&128)!==0)throw Error(r(558))}return Yr(p),null;case 13:if(x=p.memoizedState,u===null||u.memoizedState!==null&&u.memoizedState.dehydrated!==null){if(E=X_(p),x!==null&&x.dehydrated!==null){if(u===null){if(!E)throw Error(r(318));if(E=p.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(r(317));E[hr]=p}else ub(),(p.flags&128)===0&&(p.memoizedState=null),p.flags|=4;Yr(p),E=!1}else E=t4(),u!==null&&u.memoizedState!==null&&(u.memoizedState.hydrationErrors=E),E=!0;if(!E)return p.flags&256?(Dl(p),p):(Dl(p),null)}return Dl(p),(p.flags&128)!==0?(p.lanes=v,p):(v=x!==null,u=u!==null&&u.memoizedState!==null,v&&(x=p.child,E=null,x.alternate!==null&&x.alternate.memoizedState!==null&&x.alternate.memoizedState.cachePool!==null&&(E=x.alternate.memoizedState.cachePool.pool),M=null,x.memoizedState!==null&&x.memoizedState.cachePool!==null&&(M=x.memoizedState.cachePool.pool),M!==E&&(x.flags|=2048)),v!==u&&v&&(p.child.flags|=8192),yP(p,p.updateQueue),Yr(p),null);case 4:return it(),u===null&&pV(p.stateNode.containerInfo),Yr(p),null;case 10:return uf(p.type),Yr(p),null;case 19:if(be(Yn),x=p.memoizedState,x===null)return Yr(p),null;if(E=(p.flags&128)!==0,M=x.rendering,M===null)if(E)Pk(x,!1);else{if(Cn!==0||u!==null&&(u.flags&128)!==0)for(u=p.child;u!==null;){if(M=nP(u),M!==null){for(p.flags|=128,Pk(x,!1),u=M.updateQueue,p.updateQueue=u,yP(p,u),p.subtreeFlags=0,u=v,v=p.child;v!==null;)SK(v,u),v=v.sibling;return Le(Yn,Yn.current&1|2),Ri&&lf(p,x.treeForkCount),p.child}u=u.sibling}x.tail!==null&&ls()>xP&&(p.flags|=128,E=!0,Pk(x,!1),p.lanes=4194304)}else{if(!E)if(u=nP(M),u!==null){if(p.flags|=128,E=!0,u=u.updateQueue,p.updateQueue=u,yP(p,u),Pk(x,!0),x.tail===null&&x.tailMode==="hidden"&&!M.alternate&&!Ri)return Yr(p),null}else 2*ls()-x.renderingStartTime>xP&&v!==536870912&&(p.flags|=128,E=!0,Pk(x,!1),p.lanes=4194304);x.isBackwards?(M.sibling=p.child,p.child=M):(u=x.last,u!==null?u.sibling=M:p.child=M,x.last=M)}return x.tail!==null?(u=x.tail,x.rendering=u,x.tail=u.sibling,x.renderingStartTime=ls(),u.sibling=null,v=Yn.current,Le(Yn,E?v&1|2:v&1),Ri&&lf(p,x.treeForkCount),u):(Yr(p),null);case 22:case 23:return Dl(p),f4(),x=p.memoizedState!==null,u!==null?u.memoizedState!==null!==x&&(p.flags|=8192):x&&(p.flags|=8192),x?(v&536870912)!==0&&(p.flags&128)===0&&(Yr(p),p.subtreeFlags&6&&(p.flags|=8192)):Yr(p),v=p.updateQueue,v!==null&&yP(p,v.retryQueue),v=null,u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(v=u.memoizedState.cachePool.pool),x=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(x=p.memoizedState.cachePool.pool),x!==v&&(p.flags|=2048),u!==null&&be(pb),null;case 24:return v=null,u!==null&&(v=u.memoizedState.cache),p.memoizedState.cache!==v&&(p.flags|=2048),uf(cs),Yr(p),null;case 25:return null;case 30:return null}throw Error(r(156,p.tag))}function ACe(u,p){switch(Qj(p),p.tag){case 1:return u=p.flags,u&65536?(p.flags=u&-65537|128,p):null;case 3:return uf(cs),it(),u=p.flags,(u&65536)!==0&&(u&128)===0?(p.flags=u&-65537|128,p):null;case 26:case 27:case 5:return fn(p),null;case 31:if(p.memoizedState!==null){if(Dl(p),p.alternate===null)throw Error(r(340));ub()}return u=p.flags,u&65536?(p.flags=u&-65537|128,p):null;case 13:if(Dl(p),u=p.memoizedState,u!==null&&u.dehydrated!==null){if(p.alternate===null)throw Error(r(340));ub()}return u=p.flags,u&65536?(p.flags=u&-65537|128,p):null;case 19:return be(Yn),null;case 4:return it(),null;case 10:return uf(p.type),null;case 22:case 23:return Dl(p),f4(),u!==null&&be(pb),u=p.flags,u&65536?(p.flags=u&-65537|128,p):null;case 24:return uf(cs),null;case 25:return null;default:return null}}function XQ(u,p){switch(Qj(p),p.tag){case 3:uf(cs),it();break;case 26:case 27:case 5:fn(p);break;case 4:it();break;case 31:p.memoizedState!==null&&Dl(p);break;case 13:Dl(p);break;case 19:be(Yn);break;case 10:uf(p.type);break;case 22:case 23:Dl(p),f4(),u!==null&&be(pb);break;case 24:uf(cs)}}function Ok(u,p){try{var v=p.updateQueue,x=v!==null?v.lastEffect:null;if(x!==null){var E=x.next;v=E;do{if((v.tag&u)===u){x=void 0;var M=v.create,j=v.inst;x=M(),j.destroy=x}v=v.next}while(v!==E)}}catch(Z){mr(p,p.return,Z)}}function Pg(u,p,v){try{var x=p.updateQueue,E=x!==null?x.lastEffect:null;if(E!==null){var M=E.next;x=M;do{if((x.tag&u)===u){var j=x.inst,Z=j.destroy;if(Z!==void 0){j.destroy=void 0,E=p;var ue=v,Ee=Z;try{Ee()}catch(Fe){mr(E,ue,Fe)}}}x=x.next}while(x!==M)}}catch(Fe){mr(p,p.return,Fe)}}function JQ(u){var p=u.updateQueue;if(p!==null){var v=u.stateNode;try{VK(p,v)}catch(x){mr(u,u.return,x)}}}function KQ(u,p,v){v.props=vb(u.type,u.memoizedProps),v.state=u.memoizedState;try{v.componentWillUnmount()}catch(x){mr(u,p,x)}}function Lk(u,p){try{var v=u.ref;if(v!==null){switch(u.tag){case 26:case 27:case 5:var x=u.stateNode;break;case 30:x=u.stateNode;break;default:x=u.stateNode}typeof v=="function"?u.refCleanup=v(x):v.current=x}}catch(E){mr(u,p,E)}}function nh(u,p){var v=u.ref,x=u.refCleanup;if(v!==null)if(typeof x=="function")try{x()}catch(E){mr(u,p,E)}finally{u.refCleanup=null,u=u.alternate,u!=null&&(u.refCleanup=null)}else if(typeof v=="function")try{v(null)}catch(E){mr(u,p,E)}else v.current=null}function QQ(u){var p=u.type,v=u.memoizedProps,x=u.stateNode;try{e:switch(p){case"button":case"input":case"select":case"textarea":v.autoFocus&&x.focus();break e;case"img":v.src?x.src=v.src:v.srcSet&&(x.srcset=v.srcSet)}}catch(E){mr(u,u.return,E)}}function q4(u,p,v){try{var x=u.stateNode;QCe(x,u.type,v,p),x[zr]=p}catch(E){mr(u,u.return,E)}}function eee(u){return u.tag===5||u.tag===3||u.tag===26||u.tag===27&&Ng(u.type)||u.tag===4}function W4(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||eee(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&u.tag!==18;){if(u.tag===27&&Ng(u.type)||u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function Y4(u,p,v){var x=u.tag;if(x===5||x===6)u=u.stateNode,p?(v.nodeType===9?v.body:v.nodeName==="HTML"?v.ownerDocument.body:v).insertBefore(u,p):(p=v.nodeType===9?v.body:v.nodeName==="HTML"?v.ownerDocument.body:v,p.appendChild(u),v=v._reactRootContainer,v!=null||p.onclick!==null||(p.onclick=Du));else if(x!==4&&(x===27&&Ng(u.type)&&(v=u.stateNode,p=null),u=u.child,u!==null))for(Y4(u,p,v),u=u.sibling;u!==null;)Y4(u,p,v),u=u.sibling}function vP(u,p,v){var x=u.tag;if(x===5||x===6)u=u.stateNode,p?v.insertBefore(u,p):v.appendChild(u);else if(x!==4&&(x===27&&Ng(u.type)&&(v=u.stateNode),u=u.child,u!==null))for(vP(u,p,v),u=u.sibling;u!==null;)vP(u,p,v),u=u.sibling}function tee(u){var p=u.stateNode,v=u.memoizedProps;try{for(var x=u.type,E=p.attributes;E.length;)p.removeAttributeNode(E[0]);da(p,x,v),p[hr]=u,p[zr]=v}catch(M){mr(u,u.return,M)}}var mf=!1,hs=!1,Z4=!1,iee=typeof WeakSet=="function"?WeakSet:Set,Vs=null;function PCe(u,p){if(u=u.containerInfo,gV=NP,u=rt(u),yt(u)){if("selectionStart"in u)var v={start:u.selectionStart,end:u.selectionEnd};else e:{v=(v=u.ownerDocument)&&v.defaultView||window;var x=v.getSelection&&v.getSelection();if(x&&x.rangeCount!==0){v=x.anchorNode;var E=x.anchorOffset,M=x.focusNode;x=x.focusOffset;try{v.nodeType,M.nodeType}catch{v=null;break e}var j=0,Z=-1,ue=-1,Ee=0,Fe=0,Ge=u,Ce=null;t:for(;;){for(var Me;Ge!==v||E!==0&&Ge.nodeType!==3||(Z=j+E),Ge!==M||x!==0&&Ge.nodeType!==3||(ue=j+x),Ge.nodeType===3&&(j+=Ge.nodeValue.length),(Me=Ge.firstChild)!==null;)Ce=Ge,Ge=Me;for(;;){if(Ge===u)break t;if(Ce===v&&++Ee===E&&(Z=j),Ce===M&&++Fe===x&&(ue=j),(Me=Ge.nextSibling)!==null)break;Ge=Ce,Ce=Ge.parentNode}Ge=Me}v=Z===-1||ue===-1?null:{start:Z,end:ue}}else v=null}v=v||{start:0,end:0}}else v=null;for(yV={focusedElem:u,selectionRange:v},NP=!1,Vs=p;Vs!==null;)if(p=Vs,u=p.child,(p.subtreeFlags&1028)!==0&&u!==null)u.return=p,Vs=u;else for(;Vs!==null;){switch(p=Vs,M=p.alternate,u=p.flags,p.tag){case 0:if((u&4)!==0&&(u=p.updateQueue,u=u!==null?u.events:null,u!==null))for(v=0;v<u.length;v++)E=u[v],E.ref.impl=E.nextImpl;break;case 11:case 15:break;case 1:if((u&1024)!==0&&M!==null){u=void 0,v=p,E=M.memoizedProps,M=M.memoizedState,x=v.stateNode;try{var Tt=vb(v.type,E);u=x.getSnapshotBeforeUpdate(Tt,M),x.__reactInternalSnapshotBeforeUpdate=u}catch(Xt){mr(v,v.return,Xt)}}break;case 3:if((u&1024)!==0){if(u=p.stateNode.containerInfo,v=u.nodeType,v===9)wV(u);else if(v===1)switch(u.nodeName){case"HEAD":case"HTML":case"BODY":wV(u);break;default:u.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((u&1024)!==0)throw Error(r(163))}if(u=p.sibling,u!==null){u.return=p.return,Vs=u;break}Vs=p.return}}function ree(u,p,v){var x=v.flags;switch(v.tag){case 0:case 11:case 15:yf(u,v),x&4&&Ok(5,v);break;case 1:if(yf(u,v),x&4)if(u=v.stateNode,p===null)try{u.componentDidMount()}catch(j){mr(v,v.return,j)}else{var E=vb(v.type,p.memoizedProps);p=p.memoizedState;try{u.componentDidUpdate(E,p,u.__reactInternalSnapshotBeforeUpdate)}catch(j){mr(v,v.return,j)}}x&64&&JQ(v),x&512&&Lk(v,v.return);break;case 3:if(yf(u,v),x&64&&(u=v.updateQueue,u!==null)){if(p=null,v.child!==null)switch(v.child.tag){case 27:case 5:p=v.child.stateNode;break;case 1:p=v.child.stateNode}try{VK(u,p)}catch(j){mr(v,v.return,j)}}break;case 27:p===null&&x&4&&tee(v);case 26:case 5:yf(u,v),p===null&&x&4&&QQ(v),x&512&&Lk(v,v.return);break;case 12:yf(u,v);break;case 31:yf(u,v),x&4&&aee(u,v);break;case 13:yf(u,v),x&4&&oee(u,v),x&64&&(u=v.memoizedState,u!==null&&(u=u.dehydrated,u!==null&&(v=VCe.bind(null,v),oIe(u,v))));break;case 22:if(x=v.memoizedState!==null||mf,!x){p=p!==null&&p.memoizedState!==null||hs,E=mf;var M=hs;mf=x,(hs=p)&&!M?vf(u,v,(v.subtreeFlags&8772)!==0):yf(u,v),mf=E,hs=M}break;case 30:break;default:yf(u,v)}}function nee(u){var p=u.alternate;p!==null&&(u.alternate=null,nee(p)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(p=u.stateNode,p!==null&&Mu(p)),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}var sn=null,Ho=!1;function gf(u,p,v){for(v=v.child;v!==null;)see(u,p,v),v=v.sibling}function see(u,p,v){if(Rs&&typeof Rs.onCommitFiberUnmount=="function")try{Rs.onCommitFiberUnmount(Wd,v)}catch{}switch(v.tag){case 26:hs||nh(v,p),gf(u,p,v),v.memoizedState?v.memoizedState.count--:v.stateNode&&(v=v.stateNode,v.parentNode.removeChild(v));break;case 27:hs||nh(v,p);var x=sn,E=Ho;Ng(v.type)&&(sn=v.stateNode,Ho=!1),gf(u,p,v),Uk(v.stateNode),sn=x,Ho=E;break;case 5:hs||nh(v,p);case 6:if(x=sn,E=Ho,sn=null,gf(u,p,v),sn=x,Ho=E,sn!==null)if(Ho)try{(sn.nodeType===9?sn.body:sn.nodeName==="HTML"?sn.ownerDocument.body:sn).removeChild(v.stateNode)}catch(M){mr(v,p,M)}else try{sn.removeChild(v.stateNode)}catch(M){mr(v,p,M)}break;case 18:sn!==null&&(Ho?(u=sn,Jee(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,v.stateNode),y1(u)):Jee(sn,v.stateNode));break;case 4:x=sn,E=Ho,sn=v.stateNode.containerInfo,Ho=!0,gf(u,p,v),sn=x,Ho=E;break;case 0:case 11:case 14:case 15:Pg(2,v,p),hs||Pg(4,v,p),gf(u,p,v);break;case 1:hs||(nh(v,p),x=v.stateNode,typeof x.componentWillUnmount=="function"&&KQ(v,p,x)),gf(u,p,v);break;case 21:gf(u,p,v);break;case 22:hs=(x=hs)||v.memoizedState!==null,gf(u,p,v),hs=x;break;default:gf(u,p,v)}}function aee(u,p){if(p.memoizedState===null&&(u=p.alternate,u!==null&&(u=u.memoizedState,u!==null))){u=u.dehydrated;try{y1(u)}catch(v){mr(p,p.return,v)}}}function oee(u,p){if(p.memoizedState===null&&(u=p.alternate,u!==null&&(u=u.memoizedState,u!==null&&(u=u.dehydrated,u!==null))))try{y1(u)}catch(v){mr(p,p.return,v)}}function OCe(u){switch(u.tag){case 31:case 13:case 19:var p=u.stateNode;return p===null&&(p=u.stateNode=new iee),p;case 22:return u=u.stateNode,p=u._retryCache,p===null&&(p=u._retryCache=new iee),p;default:throw Error(r(435,u.tag))}}function bP(u,p){var v=OCe(u);p.forEach(function(x){if(!v.has(x)){v.add(x);var E=BCe.bind(null,u,x);x.then(E,E)}})}function Go(u,p){var v=p.deletions;if(v!==null)for(var x=0;x<v.length;x++){var E=v[x],M=u,j=p,Z=j;e:for(;Z!==null;){switch(Z.tag){case 27:if(Ng(Z.type)){sn=Z.stateNode,Ho=!1;break e}break;case 5:sn=Z.stateNode,Ho=!1;break e;case 3:case 4:sn=Z.stateNode.containerInfo,Ho=!0;break e}Z=Z.return}if(sn===null)throw Error(r(160));see(M,j,E),sn=null,Ho=!1,M=E.alternate,M!==null&&(M.return=null),E.return=null}if(p.subtreeFlags&13886)for(p=p.child;p!==null;)lee(p,u),p=p.sibling}var Nu=null;function lee(u,p){var v=u.alternate,x=u.flags;switch(u.tag){case 0:case 11:case 14:case 15:Go(p,u),qo(u),x&4&&(Pg(3,u,u.return),Ok(3,u),Pg(5,u,u.return));break;case 1:Go(p,u),qo(u),x&512&&(hs||v===null||nh(v,v.return)),x&64&&mf&&(u=u.updateQueue,u!==null&&(x=u.callbacks,x!==null&&(v=u.shared.hiddenCallbacks,u.shared.hiddenCallbacks=v===null?x:v.concat(x))));break;case 26:var E=Nu;if(Go(p,u),qo(u),x&512&&(hs||v===null||nh(v,v.return)),x&4){var M=v!==null?v.memoizedState:null;if(x=u.memoizedState,v===null)if(x===null)if(u.stateNode===null){e:{x=u.type,v=u.memoizedProps,E=E.ownerDocument||E;t:switch(x){case"title":M=E.getElementsByTagName("title")[0],(!M||M[Pl]||M[hr]||M.namespaceURI==="http://www.w3.org/2000/svg"||M.hasAttribute("itemprop"))&&(M=E.createElement(x),E.head.insertBefore(M,E.querySelector("head > title"))),da(M,x,v),M[hr]=u,mn(M),x=M;break e;case"link":var j=lte("link","href",E).get(x+(v.href||""));if(j){for(var Z=0;Z<j.length;Z++)if(M=j[Z],M.getAttribute("href")===(v.href==null||v.href===""?null:v.href)&&M.getAttribute("rel")===(v.rel==null?null:v.rel)&&M.getAttribute("title")===(v.title==null?null:v.title)&&M.getAttribute("crossorigin")===(v.crossOrigin==null?null:v.crossOrigin)){j.splice(Z,1);break t}}M=E.createElement(x),da(M,x,v),E.head.appendChild(M);break;case"meta":if(j=lte("meta","content",E).get(x+(v.content||""))){for(Z=0;Z<j.length;Z++)if(M=j[Z],M.getAttribute("content")===(v.content==null?null:""+v.content)&&M.getAttribute("name")===(v.name==null?null:v.name)&&M.getAttribute("property")===(v.property==null?null:v.property)&&M.getAttribute("http-equiv")===(v.httpEquiv==null?null:v.httpEquiv)&&M.getAttribute("charset")===(v.charSet==null?null:v.charSet)){j.splice(Z,1);break t}}M=E.createElement(x),da(M,x,v),E.head.appendChild(M);break;default:throw Error(r(468,x))}M[hr]=u,mn(M),x=M}u.stateNode=x}else cte(E,u.type,u.stateNode);else u.stateNode=ote(E,x,u.memoizedProps);else M!==x?(M===null?v.stateNode!==null&&(v=v.stateNode,v.parentNode.removeChild(v)):M.count--,x===null?cte(E,u.type,u.stateNode):ote(E,x,u.memoizedProps)):x===null&&u.stateNode!==null&&q4(u,u.memoizedProps,v.memoizedProps)}break;case 27:Go(p,u),qo(u),x&512&&(hs||v===null||nh(v,v.return)),v!==null&&x&4&&q4(u,u.memoizedProps,v.memoizedProps);break;case 5:if(Go(p,u),qo(u),x&512&&(hs||v===null||nh(v,v.return)),u.flags&32){E=u.stateNode;try{Qd(E,"")}catch(Tt){mr(u,u.return,Tt)}}x&4&&u.stateNode!=null&&(E=u.memoizedProps,q4(u,E,v!==null?v.memoizedProps:E)),x&1024&&(Z4=!0);break;case 6:if(Go(p,u),qo(u),x&4){if(u.stateNode===null)throw Error(r(162));x=u.memoizedProps,v=u.stateNode;try{v.nodeValue=x}catch(Tt){mr(u,u.return,Tt)}}break;case 3:if(DP=null,E=Nu,Nu=OP(p.containerInfo),Go(p,u),Nu=E,qo(u),x&4&&v!==null&&v.memoizedState.isDehydrated)try{y1(p.containerInfo)}catch(Tt){mr(u,u.return,Tt)}Z4&&(Z4=!1,cee(u));break;case 4:x=Nu,Nu=OP(u.stateNode.containerInfo),Go(p,u),qo(u),Nu=x;break;case 12:Go(p,u),qo(u);break;case 31:Go(p,u),qo(u),x&4&&(x=u.updateQueue,x!==null&&(u.updateQueue=null,bP(u,x)));break;case 13:Go(p,u),qo(u),u.child.flags&8192&&u.memoizedState!==null!=(v!==null&&v.memoizedState!==null)&&(_P=ls()),x&4&&(x=u.updateQueue,x!==null&&(u.updateQueue=null,bP(u,x)));break;case 22:E=u.memoizedState!==null;var ue=v!==null&&v.memoizedState!==null,Ee=mf,Fe=hs;if(mf=Ee||E,hs=Fe||ue,Go(p,u),hs=Fe,mf=Ee,qo(u),x&8192)e:for(p=u.stateNode,p._visibility=E?p._visibility&-2:p._visibility|1,E&&(v===null||ue||mf||hs||bb(u)),v=null,p=u;;){if(p.tag===5||p.tag===26){if(v===null){ue=v=p;try{if(M=ue.stateNode,E)j=M.style,typeof j.setProperty=="function"?j.setProperty("display","none","important"):j.display="none";else{Z=ue.stateNode;var Ge=ue.memoizedProps.style,Ce=Ge!=null&&Ge.hasOwnProperty("display")?Ge.display:null;Z.style.display=Ce==null||typeof Ce=="boolean"?"":(""+Ce).trim()}}catch(Tt){mr(ue,ue.return,Tt)}}}else if(p.tag===6){if(v===null){ue=p;try{ue.stateNode.nodeValue=E?"":ue.memoizedProps}catch(Tt){mr(ue,ue.return,Tt)}}}else if(p.tag===18){if(v===null){ue=p;try{var Me=ue.stateNode;E?Kee(Me,!0):Kee(ue.stateNode,!1)}catch(Tt){mr(ue,ue.return,Tt)}}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===u)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===u)break e;for(;p.sibling===null;){if(p.return===null||p.return===u)break e;v===p&&(v=null),p=p.return}v===p&&(v=null),p.sibling.return=p.return,p=p.sibling}x&4&&(x=u.updateQueue,x!==null&&(v=x.retryQueue,v!==null&&(x.retryQueue=null,bP(u,v))));break;case 19:Go(p,u),qo(u),x&4&&(x=u.updateQueue,x!==null&&(u.updateQueue=null,bP(u,x)));break;case 30:break;case 21:break;default:Go(p,u),qo(u)}}function qo(u){var p=u.flags;if(p&2){try{for(var v,x=u.return;x!==null;){if(eee(x)){v=x;break}x=x.return}if(v==null)throw Error(r(160));switch(v.tag){case 27:var E=v.stateNode,M=W4(u);vP(u,M,E);break;case 5:var j=v.stateNode;v.flags&32&&(Qd(j,""),v.flags&=-33);var Z=W4(u);vP(u,Z,j);break;case 3:case 4:var ue=v.stateNode.containerInfo,Ee=W4(u);Y4(u,Ee,ue);break;default:throw Error(r(161))}}catch(Fe){mr(u,u.return,Fe)}u.flags&=-3}p&4096&&(u.flags&=-4097)}function cee(u){if(u.subtreeFlags&1024)for(u=u.child;u!==null;){var p=u;cee(p),p.tag===5&&p.flags&1024&&p.stateNode.reset(),u=u.sibling}}function yf(u,p){if(p.subtreeFlags&8772)for(p=p.child;p!==null;)ree(u,p.alternate,p),p=p.sibling}function bb(u){for(u=u.child;u!==null;){var p=u;switch(p.tag){case 0:case 11:case 14:case 15:Pg(4,p,p.return),bb(p);break;case 1:nh(p,p.return);var v=p.stateNode;typeof v.componentWillUnmount=="function"&&KQ(p,p.return,v),bb(p);break;case 27:Uk(p.stateNode);case 26:case 5:nh(p,p.return),bb(p);break;case 22:p.memoizedState===null&&bb(p);break;case 30:bb(p);break;default:bb(p)}u=u.sibling}}function vf(u,p,v){for(v=v&&(p.subtreeFlags&8772)!==0,p=p.child;p!==null;){var x=p.alternate,E=u,M=p,j=M.flags;switch(M.tag){case 0:case 11:case 15:vf(E,M,v),Ok(4,M);break;case 1:if(vf(E,M,v),x=M,E=x.stateNode,typeof E.componentDidMount=="function")try{E.componentDidMount()}catch(Ee){mr(x,x.return,Ee)}if(x=M,E=x.updateQueue,E!==null){var Z=x.stateNode;try{var ue=E.shared.hiddenCallbacks;if(ue!==null)for(E.shared.hiddenCallbacks=null,E=0;E<ue.length;E++)jK(ue[E],Z)}catch(Ee){mr(x,x.return,Ee)}}v&&j&64&&JQ(M),Lk(M,M.return);break;case 27:tee(M);case 26:case 5:vf(E,M,v),v&&x===null&&j&4&&QQ(M),Lk(M,M.return);break;case 12:vf(E,M,v);break;case 31:vf(E,M,v),v&&j&4&&aee(E,M);break;case 13:vf(E,M,v),v&&j&4&&oee(E,M);break;case 22:M.memoizedState===null&&vf(E,M,v),Lk(M,M.return);break;case 30:break;default:vf(E,M,v)}p=p.sibling}}function X4(u,p){var v=null;u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(v=u.memoizedState.cachePool.pool),u=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(u=p.memoizedState.cachePool.pool),u!==v&&(u!=null&&u.refCount++,v!=null&&wk(v))}function J4(u,p){u=null,p.alternate!==null&&(u=p.alternate.memoizedState.cache),p=p.memoizedState.cache,p!==u&&(p.refCount++,u!=null&&wk(u))}function ju(u,p,v,x){if(p.subtreeFlags&10256)for(p=p.child;p!==null;)uee(u,p,v,x),p=p.sibling}function uee(u,p,v,x){var E=p.flags;switch(p.tag){case 0:case 11:case 15:ju(u,p,v,x),E&2048&&Ok(9,p);break;case 1:ju(u,p,v,x);break;case 3:ju(u,p,v,x),E&2048&&(u=null,p.alternate!==null&&(u=p.alternate.memoizedState.cache),p=p.memoizedState.cache,p!==u&&(p.refCount++,u!=null&&wk(u)));break;case 12:if(E&2048){ju(u,p,v,x),u=p.stateNode;try{var M=p.memoizedProps,j=M.id,Z=M.onPostCommit;typeof Z=="function"&&Z(j,p.alternate===null?"mount":"update",u.passiveEffectDuration,-0)}catch(ue){mr(p,p.return,ue)}}else ju(u,p,v,x);break;case 31:ju(u,p,v,x);break;case 13:ju(u,p,v,x);break;case 23:break;case 22:M=p.stateNode,j=p.alternate,p.memoizedState!==null?M._visibility&2?ju(u,p,v,x):Dk(u,p):M._visibility&2?ju(u,p,v,x):(M._visibility|=2,a1(u,p,v,x,(p.subtreeFlags&10256)!==0||!1)),E&2048&&X4(j,p);break;case 24:ju(u,p,v,x),E&2048&&J4(p.alternate,p);break;default:ju(u,p,v,x)}}function a1(u,p,v,x,E){for(E=E&&((p.subtreeFlags&10256)!==0||!1),p=p.child;p!==null;){var M=u,j=p,Z=v,ue=x,Ee=j.flags;switch(j.tag){case 0:case 11:case 15:a1(M,j,Z,ue,E),Ok(8,j);break;case 23:break;case 22:var Fe=j.stateNode;j.memoizedState!==null?Fe._visibility&2?a1(M,j,Z,ue,E):Dk(M,j):(Fe._visibility|=2,a1(M,j,Z,ue,E)),E&&Ee&2048&&X4(j.alternate,j);break;case 24:a1(M,j,Z,ue,E),E&&Ee&2048&&J4(j.alternate,j);break;default:a1(M,j,Z,ue,E)}p=p.sibling}}function Dk(u,p){if(p.subtreeFlags&10256)for(p=p.child;p!==null;){var v=u,x=p,E=x.flags;switch(x.tag){case 22:Dk(v,x),E&2048&&X4(x.alternate,x);break;case 24:Dk(v,x),E&2048&&J4(x.alternate,x);break;default:Dk(v,x)}p=p.sibling}}var Rk=8192;function o1(u,p,v){if(u.subtreeFlags&Rk)for(u=u.child;u!==null;)dee(u,p,v),u=u.sibling}function dee(u,p,v){switch(u.tag){case 26:o1(u,p,v),u.flags&Rk&&u.memoizedState!==null&&bIe(v,Nu,u.memoizedState,u.memoizedProps);break;case 5:o1(u,p,v);break;case 3:case 4:var x=Nu;Nu=OP(u.stateNode.containerInfo),o1(u,p,v),Nu=x;break;case 22:u.memoizedState===null&&(x=u.alternate,x!==null&&x.memoizedState!==null?(x=Rk,Rk=16777216,o1(u,p,v),Rk=x):o1(u,p,v));break;default:o1(u,p,v)}}function hee(u){var p=u.alternate;if(p!==null&&(u=p.child,u!==null)){p.child=null;do p=u.sibling,u.sibling=null,u=p;while(u!==null)}}function zk(u){var p=u.deletions;if((u.flags&16)!==0){if(p!==null)for(var v=0;v<p.length;v++){var x=p[v];Vs=x,fee(x,u)}hee(u)}if(u.subtreeFlags&10256)for(u=u.child;u!==null;)pee(u),u=u.sibling}function pee(u){switch(u.tag){case 0:case 11:case 15:zk(u),u.flags&2048&&Pg(9,u,u.return);break;case 3:zk(u);break;case 12:zk(u);break;case 22:var p=u.stateNode;u.memoizedState!==null&&p._visibility&2&&(u.return===null||u.return.tag!==13)?(p._visibility&=-3,wP(u)):zk(u);break;default:zk(u)}}function wP(u){var p=u.deletions;if((u.flags&16)!==0){if(p!==null)for(var v=0;v<p.length;v++){var x=p[v];Vs=x,fee(x,u)}hee(u)}for(u=u.child;u!==null;){switch(p=u,p.tag){case 0:case 11:case 15:Pg(8,p,p.return),wP(p);break;case 22:v=p.stateNode,v._visibility&2&&(v._visibility&=-3,wP(p));break;default:wP(p)}u=u.sibling}}function fee(u,p){for(;Vs!==null;){var v=Vs;switch(v.tag){case 0:case 11:case 15:Pg(8,v,p);break;case 23:case 22:if(v.memoizedState!==null&&v.memoizedState.cachePool!==null){var x=v.memoizedState.cachePool.pool;x!=null&&x.refCount++}break;case 24:wk(v.memoizedState.cache)}if(x=v.child,x!==null)x.return=v,Vs=x;else e:for(v=u;Vs!==null;){x=Vs;var E=x.sibling,M=x.return;if(nee(x),x===v){Vs=null;break e}if(E!==null){E.return=M,Vs=E;break e}Vs=M}}}var LCe={getCacheForType:function(u){var p=ca(cs),v=p.data.get(u);return v===void 0&&(v=u(),p.data.set(u,v)),v},cacheSignal:function(){return ca(cs).controller.signal}},DCe=typeof WeakMap=="function"?WeakMap:Map,er=0,Ar=null,Ti=null,Ai=0,fr=0,Rl=null,Og=!1,l1=!1,K4=!1,bf=0,Cn=0,Lg=0,wb=0,Q4=0,zl=0,c1=0,Fk=null,Wo=null,eV=!1,_P=0,mee=0,xP=1/0,SP=null,Dg=null,xs=0,Rg=null,u1=null,wf=0,tV=0,iV=null,gee=null,Nk=0,rV=null;function Fl(){return(er&2)!==0&&Ai!==0?Ai&-Ai:re.T!==null?cV():Ki()}function yee(){if(zl===0)if((Ai&536870912)===0||Ri){var u=Jp;Jp<<=1,(Jp&3932160)===0&&(Jp=262144),zl=u}else zl=536870912;return u=Ll.current,u!==null&&(u.flags|=32),zl}function Yo(u,p,v){(u===Ar&&(fr===2||fr===9)||u.cancelPendingCommit!==null)&&(d1(u,0),zg(u,Ai,zl,!1)),Da(u,v),((er&2)===0||u!==Ar)&&(u===Ar&&((er&2)===0&&(wb|=v),Cn===4&&zg(u,Ai,zl,!1)),sh(u))}function vee(u,p,v){if((er&6)!==0)throw Error(r(327));var x=!v&&(p&127)===0&&(p&u.expiredLanes)===0||Cu(u,p),E=x?FCe(u,p):sV(u,p,!0),M=x;do{if(E===0){l1&&!x&&zg(u,p,0,!1);break}else{if(v=u.current.alternate,M&&!RCe(v)){E=sV(u,p,!1),M=!1;continue}if(E===2){if(M=p,u.errorRecoveryDisabledLanes&M)var j=0;else j=u.pendingLanes&-536870913,j=j!==0?j:j&536870912?536870912:0;if(j!==0){p=j;e:{var Z=u;E=Fk;var ue=Z.current.memoizedState.isDehydrated;if(ue&&(d1(Z,j).flags|=256),j=sV(Z,j,!1),j!==2){if(K4&&!ue){Z.errorRecoveryDisabledLanes|=M,wb|=M,E=4;break e}M=Wo,Wo=E,M!==null&&(Wo===null?Wo=M:Wo.push.apply(Wo,M))}E=j}if(M=!1,E!==2)continue}}if(E===1){d1(u,0),zg(u,p,0,!0);break}e:{switch(x=u,M=E,M){case 0:case 1:throw Error(r(345));case 4:if((p&4194048)!==p)break;case 6:zg(x,p,zl,!Og);break e;case 2:Wo=null;break;case 3:case 5:break;default:throw Error(r(329))}if((p&62914560)===p&&(E=_P+300-ls(),10<E)){if(zg(x,p,zl,!Og),Zd(x,0,!0)!==0)break e;wf=p,x.timeoutHandle=Zee(bee.bind(null,x,v,Wo,SP,eV,p,zl,wb,c1,Og,M,"Throttled",-0,0),E);break e}bee(x,v,Wo,SP,eV,p,zl,wb,c1,Og,M,null,-0,0)}}break}while(!0);sh(u)}function bee(u,p,v,x,E,M,j,Z,ue,Ee,Fe,Ge,Ce,Me){if(u.timeoutHandle=-1,Ge=p.subtreeFlags,Ge&8192||(Ge&16785408)===16785408){Ge={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Du},dee(p,M,Ge);var Tt=(M&62914560)===M?_P-ls():(M&4194048)===M?mee-ls():0;if(Tt=wIe(Ge,Tt),Tt!==null){wf=M,u.cancelPendingCommit=Tt(Eee.bind(null,u,p,M,v,x,E,j,Z,ue,Fe,Ge,null,Ce,Me)),zg(u,M,j,!Ee);return}}Eee(u,p,M,v,x,E,j,Z,ue)}function RCe(u){for(var p=u;;){var v=p.tag;if((v===0||v===11||v===15)&&p.flags&16384&&(v=p.updateQueue,v!==null&&(v=v.stores,v!==null)))for(var x=0;x<v.length;x++){var E=v[x],M=E.getSnapshot;E=E.value;try{if(!ie(M(),E))return!1}catch{return!1}}if(v=p.child,p.subtreeFlags&16384&&v!==null)v.return=p,p=v;else{if(p===u)break;for(;p.sibling===null;){if(p.return===null||p.return===u)return!0;p=p.return}p.sibling.return=p.return,p=p.sibling}}return!0}function zg(u,p,v,x){p&=~Q4,p&=~wb,u.suspendedLanes|=p,u.pingedLanes&=~p,x&&(u.warmLanes|=p),x=u.expirationTimes;for(var E=p;0<E;){var M=31-zs(E),j=1<<M;x[M]=-1,E&=~j}v!==0&&Ra(u,v,p)}function $P(){return(er&6)===0?(jk(0),!1):!0}function nV(){if(Ti!==null){if(fr===0)var u=Ti.return;else u=Ti,cf=db=null,w4(u),t1=null,xk=0,u=Ti;for(;u!==null;)XQ(u.alternate,u),u=u.return;Ti=null}}function d1(u,p){var v=u.timeoutHandle;v!==-1&&(u.timeoutHandle=-1,iIe(v)),v=u.cancelPendingCommit,v!==null&&(u.cancelPendingCommit=null,v()),wf=0,nV(),Ar=u,Ti=v=of(u.current,null),Ai=p,fr=0,Rl=null,Og=!1,l1=Cu(u,p),K4=!1,c1=zl=Q4=wb=Lg=Cn=0,Wo=Fk=null,eV=!1,(p&8)!==0&&(p|=p&32);var x=u.entangledLanes;if(x!==0)for(u=u.entanglements,x&=p;0<x;){var E=31-zs(x),M=1<<E;p|=u[E],x&=~M}return bf=p,GA(),v}function wee(u,p){mi=null,re.H=Mk,p===e1||p===QA?(p=RK(),fr=3):p===l4?(p=RK(),fr=4):fr=p===R4?8:p!==null&&typeof p=="object"&&typeof p.then=="function"?6:1,Rl=p,Ti===null&&(Cn=1,pP(u,Oc(p,u.current)))}function _ee(){var u=Ll.current;return u===null?!0:(Ai&4194048)===Ai?zc===null:(Ai&62914560)===Ai||(Ai&536870912)!==0?u===zc:!1}function xee(){var u=re.H;return re.H=Mk,u===null?Mk:u}function See(){var u=re.A;return re.A=LCe,u}function TP(){Cn=4,Og||(Ai&4194048)!==Ai&&Ll.current!==null||(l1=!0),(Lg&134217727)===0&&(wb&134217727)===0||Ar===null||zg(Ar,Ai,zl,!1)}function sV(u,p,v){var x=er;er|=2;var E=xee(),M=See();(Ar!==u||Ai!==p)&&(SP=null,d1(u,p)),p=!1;var j=Cn;e:do try{if(fr!==0&&Ti!==null){var Z=Ti,ue=Rl;switch(fr){case 8:nV(),j=6;break e;case 3:case 2:case 9:case 6:Ll.current===null&&(p=!0);var Ee=fr;if(fr=0,Rl=null,h1(u,Z,ue,Ee),v&&l1){j=0;break e}break;default:Ee=fr,fr=0,Rl=null,h1(u,Z,ue,Ee)}}zCe(),j=Cn;break}catch(Fe){wee(u,Fe)}while(!0);return p&&u.shellSuspendCounter++,cf=db=null,er=x,re.H=E,re.A=M,Ti===null&&(Ar=null,Ai=0,GA()),j}function zCe(){for(;Ti!==null;)$ee(Ti)}function FCe(u,p){var v=er;er|=2;var x=xee(),E=See();Ar!==u||Ai!==p?(SP=null,xP=ls()+500,d1(u,p)):l1=Cu(u,p);e:do try{if(fr!==0&&Ti!==null){p=Ti;var M=Rl;t:switch(fr){case 1:fr=0,Rl=null,h1(u,p,M,1);break;case 2:case 9:if(LK(M)){fr=0,Rl=null,Tee(p);break}p=function(){fr!==2&&fr!==9||Ar!==u||(fr=7),sh(u)},M.then(p,p);break e;case 3:fr=7;break e;case 4:fr=5;break e;case 7:LK(M)?(fr=0,Rl=null,Tee(p)):(fr=0,Rl=null,h1(u,p,M,7));break;case 5:var j=null;switch(Ti.tag){case 26:j=Ti.memoizedState;case 5:case 27:var Z=Ti;if(j?ute(j):Z.stateNode.complete){fr=0,Rl=null;var ue=Z.sibling;if(ue!==null)Ti=ue;else{var Ee=Z.return;Ee!==null?(Ti=Ee,kP(Ee)):Ti=null}break t}}fr=0,Rl=null,h1(u,p,M,5);break;case 6:fr=0,Rl=null,h1(u,p,M,6);break;case 8:nV(),Cn=6;break e;default:throw Error(r(462))}}NCe();break}catch(Fe){wee(u,Fe)}while(!0);return cf=db=null,re.H=x,re.A=E,er=v,Ti!==null?0:(Ar=null,Ai=0,GA(),Cn)}function NCe(){for(;Ti!==null&&!P_();)$ee(Ti)}function $ee(u){var p=YQ(u.alternate,u,bf);u.memoizedProps=u.pendingProps,p===null?kP(u):Ti=p}function Tee(u){var p=u,v=p.alternate;switch(p.tag){case 15:case 0:p=BQ(v,p,p.pendingProps,p.type,void 0,Ai);break;case 11:p=BQ(v,p,p.pendingProps,p.type.render,p.ref,Ai);break;case 5:w4(p);default:XQ(v,p),p=Ti=SK(p,bf),p=YQ(v,p,bf)}u.memoizedProps=u.pendingProps,p===null?kP(u):Ti=p}function h1(u,p,v,x){cf=db=null,w4(p),t1=null,xk=0;var E=p.return;try{if(ECe(u,E,p,v,Ai)){Cn=1,pP(u,Oc(v,u.current)),Ti=null;return}}catch(M){if(E!==null)throw Ti=E,M;Cn=1,pP(u,Oc(v,u.current)),Ti=null;return}p.flags&32768?(Ri||x===1?u=!0:l1||(Ai&536870912)!==0?u=!1:(Og=u=!0,(x===2||x===9||x===3||x===6)&&(x=Ll.current,x!==null&&x.tag===13&&(x.flags|=16384))),kee(p,u)):kP(p)}function kP(u){var p=u;do{if((p.flags&32768)!==0){kee(p,Og);return}u=p.return;var v=MCe(p.alternate,p,bf);if(v!==null){Ti=v;return}if(p=p.sibling,p!==null){Ti=p;return}Ti=p=u}while(p!==null);Cn===0&&(Cn=5)}function kee(u,p){do{var v=ACe(u.alternate,u);if(v!==null){v.flags&=32767,Ti=v;return}if(v=u.return,v!==null&&(v.flags|=32768,v.subtreeFlags=0,v.deletions=null),!p&&(u=u.sibling,u!==null)){Ti=u;return}Ti=u=v}while(u!==null);Cn=6,Ti=null}function Eee(u,p,v,x,E,M,j,Z,ue){u.cancelPendingCommit=null;do EP();while(xs!==0);if((er&6)!==0)throw Error(r(327));if(p!==null){if(p===u.current)throw Error(r(177));if(M=p.lanes|p.childLanes,M|=Wj,Iu(u,v,M,j,Z,ue),u===Ar&&(Ti=Ar=null,Ai=0),u1=p,Rg=u,wf=v,tV=M,iV=E,gee=x,(p.subtreeFlags&10256)!==0||(p.flags&10256)!==0?(u.callbackNode=null,u.callbackPriority=0,UCe(qd,function(){return Pee(),null})):(u.callbackNode=null,u.callbackPriority=0),x=(p.flags&13878)!==0,(p.subtreeFlags&13878)!==0||x){x=re.T,re.T=null,E=he.p,he.p=2,j=er,er|=4;try{PCe(u,p,v)}finally{er=j,he.p=E,re.T=x}}xs=1,Cee(),Iee(),Mee()}}function Cee(){if(xs===1){xs=0;var u=Rg,p=u1,v=(p.flags&13878)!==0;if((p.subtreeFlags&13878)!==0||v){v=re.T,re.T=null;var x=he.p;he.p=2;var E=er;er|=4;try{lee(p,u);var M=yV,j=rt(u.containerInfo),Z=M.focusedElem,ue=M.selectionRange;if(j!==Z&&Z&&Z.ownerDocument&&Ze(Z.ownerDocument.documentElement,Z)){if(ue!==null&&yt(Z)){var Ee=ue.start,Fe=ue.end;if(Fe===void 0&&(Fe=Ee),"selectionStart"in Z)Z.selectionStart=Ee,Z.selectionEnd=Math.min(Fe,Z.value.length);else{var Ge=Z.ownerDocument||document,Ce=Ge&&Ge.defaultView||window;if(Ce.getSelection){var Me=Ce.getSelection(),Tt=Z.textContent.length,Xt=Math.min(ue.start,Tt),Tr=ue.end===void 0?Xt:Math.min(ue.end,Tt);!Me.extend&&Xt>Tr&&(j=Tr,Tr=Xt,Xt=j);var Se=et(Z,Xt),ye=et(Z,Tr);if(Se&&ye&&(Me.rangeCount!==1||Me.anchorNode!==Se.node||Me.anchorOffset!==Se.offset||Me.focusNode!==ye.node||Me.focusOffset!==ye.offset)){var ke=Ge.createRange();ke.setStart(Se.node,Se.offset),Me.removeAllRanges(),Xt>Tr?(Me.addRange(ke),Me.extend(ye.node,ye.offset)):(ke.setEnd(ye.node,ye.offset),Me.addRange(ke))}}}}for(Ge=[],Me=Z;Me=Me.parentNode;)Me.nodeType===1&&Ge.push({element:Me,left:Me.scrollLeft,top:Me.scrollTop});for(typeof Z.focus=="function"&&Z.focus(),Z=0;Z<Ge.length;Z++){var Be=Ge[Z];Be.element.scrollLeft=Be.left,Be.element.scrollTop=Be.top}}NP=!!gV,yV=gV=null}finally{er=E,he.p=x,re.T=v}}u.current=p,xs=2}}function Iee(){if(xs===2){xs=0;var u=Rg,p=u1,v=(p.flags&8772)!==0;if((p.subtreeFlags&8772)!==0||v){v=re.T,re.T=null;var x=he.p;he.p=2;var E=er;er|=4;try{ree(u,p.alternate,p)}finally{er=E,he.p=x,re.T=v}}xs=3}}function Mee(){if(xs===4||xs===3){xs=0,O_();var u=Rg,p=u1,v=wf,x=gee;(p.subtreeFlags&10256)!==0||(p.flags&10256)!==0?xs=5:(xs=0,u1=Rg=null,Aee(u,u.pendingLanes));var E=u.pendingLanes;if(E===0&&(Dg=null),Al(v),p=p.stateNode,Rs&&typeof Rs.onCommitFiberRoot=="function")try{Rs.onCommitFiberRoot(Wd,p,void 0,(p.current.flags&128)===128)}catch{}if(x!==null){p=re.T,E=he.p,he.p=2,re.T=null;try{for(var M=u.onRecoverableError,j=0;j<x.length;j++){var Z=x[j];M(Z.value,{componentStack:Z.stack})}}finally{re.T=p,he.p=E}}(wf&3)!==0&&EP(),sh(u),E=u.pendingLanes,(v&261930)!==0&&(E&42)!==0?u===rV?Nk++:(Nk=0,rV=u):Nk=0,jk(0)}}function Aee(u,p){(u.pooledCacheLanes&=p)===0&&(p=u.pooledCache,p!=null&&(u.pooledCache=null,wk(p)))}function EP(){return Cee(),Iee(),Mee(),Pee()}function Pee(){if(xs!==5)return!1;var u=Rg,p=tV;tV=0;var v=Al(wf),x=re.T,E=he.p;try{he.p=32>v?32:v,re.T=null,v=iV,iV=null;var M=Rg,j=wf;if(xs=0,u1=Rg=null,wf=0,(er&6)!==0)throw Error(r(331));var Z=er;if(er|=4,pee(M.current),uee(M,M.current,j,v),er=Z,jk(0,!1),Rs&&typeof Rs.onPostCommitFiberRoot=="function")try{Rs.onPostCommitFiberRoot(Wd,M)}catch{}return!0}finally{he.p=E,re.T=x,Aee(u,p)}}function Oee(u,p,v){p=Oc(v,p),p=D4(u.stateNode,p,2),u=Ig(u,p,2),u!==null&&(Da(u,2),sh(u))}function mr(u,p,v){if(u.tag===3)Oee(u,u,v);else for(;p!==null;){if(p.tag===3){Oee(p,u,v);break}else if(p.tag===1){var x=p.stateNode;if(typeof p.type.getDerivedStateFromError=="function"||typeof x.componentDidCatch=="function"&&(Dg===null||!Dg.has(x))){u=Oc(v,u),v=LQ(2),x=Ig(p,v,2),x!==null&&(DQ(v,x,p,u),Da(x,2),sh(x));break}}p=p.return}}function aV(u,p,v){var x=u.pingCache;if(x===null){x=u.pingCache=new DCe;var E=new Set;x.set(p,E)}else E=x.get(p),E===void 0&&(E=new Set,x.set(p,E));E.has(v)||(K4=!0,E.add(v),u=jCe.bind(null,u,p,v),p.then(u,u))}function jCe(u,p,v){var x=u.pingCache;x!==null&&x.delete(p),u.pingedLanes|=u.suspendedLanes&v,u.warmLanes&=~v,Ar===u&&(Ai&v)===v&&(Cn===4||Cn===3&&(Ai&62914560)===Ai&&300>ls()-_P?(er&2)===0&&d1(u,0):Q4|=v,c1===Ai&&(c1=0)),sh(u)}function Lee(u,p){p===0&&(p=Ie()),u=lb(u,p),u!==null&&(Da(u,p),sh(u))}function VCe(u){var p=u.memoizedState,v=0;p!==null&&(v=p.retryLane),Lee(u,v)}function BCe(u,p){var v=0;switch(u.tag){case 31:case 13:var x=u.stateNode,E=u.memoizedState;E!==null&&(v=E.retryLane);break;case 19:x=u.stateNode;break;case 22:x=u.stateNode._retryCache;break;default:throw Error(r(314))}x!==null&&x.delete(p),Lee(u,v)}function UCe(u,p){return Eu(u,p)}var CP=null,p1=null,oV=!1,IP=!1,lV=!1,Fg=0;function sh(u){u!==p1&&u.next===null&&(p1===null?CP=p1=u:p1=p1.next=u),IP=!0,oV||(oV=!0,GCe())}function jk(u,p){if(!lV&&IP){lV=!0;do for(var v=!1,x=CP;x!==null;){if(u!==0){var E=x.pendingLanes;if(E===0)var M=0;else{var j=x.suspendedLanes,Z=x.pingedLanes;M=(1<<31-zs(42|u)+1)-1,M&=E&~(j&~Z),M=M&201326741?M&201326741|1:M?M|2:0}M!==0&&(v=!0,Fee(x,M))}else M=Ai,M=Zd(x,x===Ar?M:0,x.cancelPendingCommit!==null||x.timeoutHandle!==-1),(M&3)===0||Cu(x,M)||(v=!0,Fee(x,M));x=x.next}while(v);lV=!1}}function HCe(){Dee()}function Dee(){IP=oV=!1;var u=0;Fg!==0&&tIe()&&(u=Fg);for(var p=ls(),v=null,x=CP;x!==null;){var E=x.next,M=Ree(x,p);M===0?(x.next=null,v===null?CP=E:v.next=E,E===null&&(p1=v)):(v=x,(u!==0||(M&3)!==0)&&(IP=!0)),x=E}xs!==0&&xs!==5||jk(u),Fg!==0&&(Fg=0)}function Ree(u,p){for(var v=u.suspendedLanes,x=u.pingedLanes,E=u.expirationTimes,M=u.pendingLanes&-62914561;0<M;){var j=31-zs(M),Z=1<<j,ue=E[j];ue===-1?((Z&v)===0||(Z&x)!==0)&&(E[j]=z_(Z,p)):ue<=p&&(u.expiredLanes|=Z),M&=~Z}if(p=Ar,v=Ai,v=Zd(u,u===p?v:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),x=u.callbackNode,v===0||u===p&&(fr===2||fr===9)||u.cancelPendingCommit!==null)return x!==null&&x!==null&&na(x),u.callbackNode=null,u.callbackPriority=0;if((v&3)===0||Cu(u,v)){if(p=v&-v,p===u.callbackPriority)return p;switch(x!==null&&na(x),Al(v)){case 2:case 8:v=D_;break;case 32:v=qd;break;case 268435456:v=hg;break;default:v=qd}return x=zee.bind(null,u),v=Eu(v,x),u.callbackPriority=p,u.callbackNode=v,p}return x!==null&&x!==null&&na(x),u.callbackPriority=2,u.callbackNode=null,2}function zee(u,p){if(xs!==0&&xs!==5)return u.callbackNode=null,u.callbackPriority=0,null;var v=u.callbackNode;if(EP()&&u.callbackNode!==v)return null;var x=Ai;return x=Zd(u,u===Ar?x:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),x===0?null:(vee(u,x,p),Ree(u,ls()),u.callbackNode!=null&&u.callbackNode===v?zee.bind(null,u):null)}function Fee(u,p){if(EP())return null;vee(u,p,!0)}function GCe(){rIe(function(){(er&6)!==0?Eu(Gd,HCe):Dee()})}function cV(){if(Fg===0){var u=K_;u===0&&(u=Ml,Ml<<=1,(Ml&261888)===0&&(Ml=256)),Fg=u}return Fg}function Nee(u){return u==null||typeof u=="symbol"||typeof u=="boolean"?null:typeof u=="function"?u:Jv(""+u)}function jee(u,p){var v=p.ownerDocument.createElement("input");return v.name=p.name,v.value=p.value,u.id&&v.setAttribute("form",u.id),p.parentNode.insertBefore(v,p),u=new FormData(u),v.parentNode.removeChild(v),u}function qCe(u,p,v,x,E){if(p==="submit"&&v&&v.stateNode===E){var M=Nee((E[zr]||null).action),j=x.submitter;j&&(p=(p=j[zr]||null)?Nee(p.formAction):j.getAttribute("formAction"),p!==null&&(M=p,j=null));var Z=new tb("action","action",null,x,E);u.push({event:Z,listeners:[{instance:null,listener:function(){if(x.defaultPrevented){if(Fg!==0){var ue=j?jee(E,j):new FormData(E);I4(v,{pending:!0,data:ue,method:E.method,action:M},null,ue)}}else typeof M=="function"&&(Z.preventDefault(),ue=j?jee(E,j):new FormData(E),I4(v,{pending:!0,data:ue,method:E.method,action:M},M,ue))},currentTarget:E}]})}}for(var uV=0;uV<qj.length;uV++){var dV=qj[uV],WCe=dV.toLowerCase(),YCe=dV[0].toUpperCase()+dV.slice(1);Fu(WCe,"on"+YCe)}Fu(ob,"onAnimationEnd"),Fu(xg,"onAnimationIteration"),Fu(bK,"onAnimationStart"),Fu("dblclick","onDoubleClick"),Fu("focusin","onFocus"),Fu("focusout","onBlur"),Fu(uCe,"onTransitionRun"),Fu(dCe,"onTransitionStart"),Fu(hCe,"onTransitionCancel"),Fu(wK,"onTransitionEnd"),Pu("onMouseEnter",["mouseout","mouseover"]),Pu("onMouseLeave",["mouseout","mouseover"]),Pu("onPointerEnter",["pointerout","pointerover"]),Pu("onPointerLeave",["pointerout","pointerover"]),Bo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Bo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Bo("onBeforeInput",["compositionend","keypress","textInput","paste"]),Bo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Bo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Bo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vk="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ZCe=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Vk));function Vee(u,p){p=(p&4)!==0;for(var v=0;v<u.length;v++){var x=u[v],E=x.event;x=x.listeners;e:{var M=void 0;if(p)for(var j=x.length-1;0<=j;j--){var Z=x[j],ue=Z.instance,Ee=Z.currentTarget;if(Z=Z.listener,ue!==M&&E.isPropagationStopped())break e;M=Z,E.currentTarget=Ee;try{M(E)}catch(Fe){HA(Fe)}E.currentTarget=null,M=ue}else for(j=0;j<x.length;j++){if(Z=x[j],ue=Z.instance,Ee=Z.currentTarget,Z=Z.listener,ue!==M&&E.isPropagationStopped())break e;M=Z,E.currentTarget=Ee;try{M(E)}catch(Fe){HA(Fe)}E.currentTarget=null,M=ue}}}}function ki(u,p){var v=p[Zt];v===void 0&&(v=p[Zt]=new Set);var x=u+"__bubble";v.has(x)||(Bee(p,u,2,!1),v.add(x))}function hV(u,p,v){var x=0;p&&(x|=4),Bee(v,u,x,p)}var MP="_reactListening"+Math.random().toString(36).slice(2);function pV(u){if(!u[MP]){u[MP]=!0,Wv.forEach(function(v){v!=="selectionchange"&&(ZCe.has(v)||hV(v,!1,u),hV(v,!0,u))});var p=u.nodeType===9?u:u.ownerDocument;p===null||p[MP]||(p[MP]=!0,hV("selectionchange",!1,p))}}function Bee(u,p,v,x){switch(yte(p)){case 2:var E=SIe;break;case 8:E=$Ie;break;default:E=CV}v=E.bind(null,p,v,u),E=void 0,!B_||p!=="touchstart"&&p!=="touchmove"&&p!=="wheel"||(E=!0),x?E!==void 0?u.addEventListener(p,v,{capture:!0,passive:E}):u.addEventListener(p,v,!0):E!==void 0?u.addEventListener(p,v,{passive:E}):u.addEventListener(p,v,!1)}function fV(u,p,v,x,E){var M=x;if((p&1)===0&&(p&2)===0&&x!==null)e:for(;;){if(x===null)return;var j=x.tag;if(j===3||j===4){var Z=x.stateNode.containerInfo;if(Z===E)break;if(j===4)for(j=x.return;j!==null;){var ue=j.tag;if((ue===3||ue===4)&&j.stateNode.containerInfo===E)return;j=j.return}for(;Z!==null;){if(j=Jd(Z),j===null)return;if(ue=j.tag,ue===5||ue===6||ue===26||ue===27){x=M=j;continue e}Z=Z.parentNode}}x=x.return}uk(function(){var Ee=M,Fe=lk(v),Ge=[];e:{var Ce=_K.get(u);if(Ce!==void 0){var Me=tb,Tt=u;switch(u){case"keypress":if(vg(v)===0)break e;case"keydown":case"keyup":Me=RA;break;case"focusin":Tt="focus",Me=hk;break;case"focusout":Tt="blur",Me=hk;break;case"beforeblur":case"afterblur":Me=hk;break;case"click":if(v.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Me=AA;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Me=OA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Me=Rj;break;case ob:case xg:case bK:Me=Mj;break;case wK:Me=Fj;break;case"scroll":case"scrollend":Me=Cj;break;case"wheel":Me=jj;break;case"copy":case"cut":case"paste":Me=Pj;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Me=pk;break;case"toggle":case"beforetoggle":Me=fk}var Xt=(p&4)!==0,Tr=!Xt&&(u==="scroll"||u==="scrollend"),Se=Xt?Ce!==null?Ce+"Capture":null:Ce;Xt=[];for(var ye=Ee,ke;ye!==null;){var Be=ye;if(ke=Be.stateNode,Be=Be.tag,Be!==5&&Be!==26&&Be!==27||ke===null||Se===null||(Be=gg(ye,Se),Be!=null&&Xt.push(Bk(ye,Be,ke))),Tr)break;ye=ye.return}0<Xt.length&&(Ce=new Me(Ce,Tt,null,v,Fe),Ge.push({event:Ce,listeners:Xt}))}}if((p&7)===0){e:{if(Ce=u==="mouseover"||u==="pointerover",Me=u==="mouseout"||u==="pointerout",Ce&&v!==Kv&&(Tt=v.relatedTarget||v.fromElement)&&(Jd(Tt)||Tt[Ft]))break e;if((Me||Ce)&&(Ce=Fe.window===Fe?Fe:(Ce=Fe.ownerDocument)?Ce.defaultView||Ce.parentWindow:window,Me?(Tt=v.relatedTarget||v.toElement,Me=Ee,Tt=Tt?Jd(Tt):null,Tt!==null&&(Tr=s(Tt),Xt=Tt.tag,Tt!==Tr||Xt!==5&&Xt!==27&&Xt!==6)&&(Tt=null)):(Me=null,Tt=Ee),Me!==Tt)){if(Xt=AA,Be="onMouseLeave",Se="onMouseEnter",ye="mouse",(u==="pointerout"||u==="pointerover")&&(Xt=pk,Be="onPointerLeave",Se="onPointerEnter",ye="pointer"),Tr=Me==null?Ce:Fr(Me),ke=Tt==null?Ce:Fr(Tt),Ce=new Xt(Be,ye+"leave",Me,v,Fe),Ce.target=Tr,Ce.relatedTarget=ke,Be=null,Jd(Fe)===Ee&&(Xt=new Xt(Se,ye+"enter",Tt,v,Fe),Xt.target=ke,Xt.relatedTarget=Tr,Be=Xt),Tr=Be,Me&&Tt)t:{for(Xt=XCe,Se=Me,ye=Tt,ke=0,Be=Se;Be;Be=Xt(Be))ke++;Be=0;for(var Vt=ye;Vt;Vt=Xt(Vt))Be++;for(;0<ke-Be;)Se=Xt(Se),ke--;for(;0<Be-ke;)ye=Xt(ye),Be--;for(;ke--;){if(Se===ye||ye!==null&&Se===ye.alternate){Xt=Se;break t}Se=Xt(Se),ye=Xt(ye)}Xt=null}else Xt=null;Me!==null&&Uee(Ge,Ce,Me,Xt,!1),Tt!==null&&Tr!==null&&Uee(Ge,Tr,Tt,Xt,!0)}}e:{if(Ce=Ee?Fr(Ee):window,Me=Ce.nodeName&&Ce.nodeName.toLowerCase(),Me==="select"||Me==="input"&&Ce.type==="file")var Gi=BA;else if(jA(Ce))if(UA)Gi=te;else{Gi=W;var Ot=B}else Me=Ce.nodeName,!Me||Me.toLowerCase()!=="input"||Ce.type!=="checkbox"&&Ce.type!=="radio"?Ee&&ok(Ee.elementType)&&(Gi=BA):Gi=X;if(Gi&&(Gi=Gi(u,Ee))){VA(Ge,Gi,v,Fe);break e}Ot&&Ot(u,Ce,Ee),u==="focusout"&&Ee&&Ce.type==="number"&&Ee.memoizedProps.value!=null&&Qp(Ce,"number",Ce.value)}switch(Ot=Ee?Fr(Ee):window,u){case"focusin":(jA(Ot)||Ot.contentEditable==="true")&&(Ct=Ot,si=Ee,fi=null);break;case"focusout":fi=si=Ct=null;break;case"mousedown":qt=!0;break;case"contextmenu":case"mouseup":case"dragend":qt=!1,ci(Ge,v,Fe);break;case"selectionchange":if(ft)break;case"keydown":case"keyup":ci(Ge,v,Fe)}var vi;if(wg)e:{switch(u){case"compositionstart":var Pi="onCompositionStart";break e;case"compositionend":Pi="onCompositionEnd";break e;case"compositionupdate":Pi="onCompositionUpdate";break e}Pi=void 0}else af?_g(u,v)&&(Pi="onCompositionEnd"):u==="keydown"&&v.keyCode===229&&(Pi="onCompositionStart");Pi&&(FA&&v.locale!=="ko"&&(af||Pi!=="onCompositionStart"?Pi==="onCompositionEnd"&&af&&(vi=IA()):(eh=Fe,tf="value"in eh?eh.value:eh.textContent,af=!0)),Ot=AP(Ee,Pi),0<Ot.length&&(Pi=new LA(Pi,u,null,v,Fe),Ge.push({event:Pi,listeners:Ot}),vi?Pi.data=vi:(vi=zu(v),vi!==null&&(Pi.data=vi)))),(vi=mk?yk(u,v):Uj(u,v))&&(Pi=AP(Ee,"onBeforeInput"),0<Pi.length&&(Ot=new LA("onBeforeInput","beforeinput",null,v,Fe),Ge.push({event:Ot,listeners:Pi}),Ot.data=vi)),qCe(Ge,u,Ee,v,Fe)}Vee(Ge,p)})}function Bk(u,p,v){return{instance:u,listener:p,currentTarget:v}}function AP(u,p){for(var v=p+"Capture",x=[];u!==null;){var E=u,M=E.stateNode;if(E=E.tag,E!==5&&E!==26&&E!==27||M===null||(E=gg(u,v),E!=null&&x.unshift(Bk(u,E,M)),E=gg(u,p),E!=null&&x.push(Bk(u,E,M))),u.tag===3)return x;u=u.return}return[]}function XCe(u){if(u===null)return null;do u=u.return;while(u&&u.tag!==5&&u.tag!==27);return u||null}function Uee(u,p,v,x,E){for(var M=p._reactName,j=[];v!==null&&v!==x;){var Z=v,ue=Z.alternate,Ee=Z.stateNode;if(Z=Z.tag,ue!==null&&ue===x)break;Z!==5&&Z!==26&&Z!==27||Ee===null||(ue=Ee,E?(Ee=gg(v,M),Ee!=null&&j.unshift(Bk(v,Ee,ue))):E||(Ee=gg(v,M),Ee!=null&&j.push(Bk(v,Ee,ue)))),v=v.return}j.length!==0&&u.push({event:p,listeners:j})}var JCe=/\r\n?/g,KCe=/\u0000|\uFFFD/g;function Hee(u){return(typeof u=="string"?u:""+u).replace(JCe,`
`).replace(KCe,"")}function Gee(u,p){return p=Hee(p),Hee(u)===p}function $r(u,p,v,x,E,M){switch(v){case"children":typeof x=="string"?p==="body"||p==="textarea"&&x===""||Qd(u,x):(typeof x=="number"||typeof x=="bigint")&&p!=="body"&&Qd(u,""+x);break;case"className":Ou(u,"class",x);break;case"tabIndex":Ou(u,"tabindex",x);break;case"dir":case"role":case"viewBox":case"width":case"height":Ou(u,v,x);break;case"style":ak(u,x,M);break;case"data":if(p!=="object"){Ou(u,"data",x);break}case"src":case"href":if(x===""&&(p!=="a"||v!=="href")){u.removeAttribute(v);break}if(x==null||typeof x=="function"||typeof x=="symbol"||typeof x=="boolean"){u.removeAttribute(v);break}x=Jv(""+x),u.setAttribute(v,x);break;case"action":case"formAction":if(typeof x=="function"){u.setAttribute(v,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof M=="function"&&(v==="formAction"?(p!=="input"&&$r(u,p,"name",E.name,E,null),$r(u,p,"formEncType",E.formEncType,E,null),$r(u,p,"formMethod",E.formMethod,E,null),$r(u,p,"formTarget",E.formTarget,E,null)):($r(u,p,"encType",E.encType,E,null),$r(u,p,"method",E.method,E,null),$r(u,p,"target",E.target,E,null)));if(x==null||typeof x=="symbol"||typeof x=="boolean"){u.removeAttribute(v);break}x=Jv(""+x),u.setAttribute(v,x);break;case"onClick":x!=null&&(u.onclick=Du);break;case"onScroll":x!=null&&ki("scroll",u);break;case"onScrollEnd":x!=null&&ki("scrollend",u);break;case"dangerouslySetInnerHTML":if(x!=null){if(typeof x!="object"||!("__html"in x))throw Error(r(61));if(v=x.__html,v!=null){if(E.children!=null)throw Error(r(60));u.innerHTML=v}}break;case"multiple":u.multiple=x&&typeof x!="function"&&typeof x!="symbol";break;case"muted":u.muted=x&&typeof x!="function"&&typeof x!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(x==null||typeof x=="function"||typeof x=="boolean"||typeof x=="symbol"){u.removeAttribute("xlink:href");break}v=Jv(""+x),u.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",v);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":x!=null&&typeof x!="function"&&typeof x!="symbol"?u.setAttribute(v,""+x):u.removeAttribute(v);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":x&&typeof x!="function"&&typeof x!="symbol"?u.setAttribute(v,""):u.removeAttribute(v);break;case"capture":case"download":x===!0?u.setAttribute(v,""):x!==!1&&x!=null&&typeof x!="function"&&typeof x!="symbol"?u.setAttribute(v,x):u.removeAttribute(v);break;case"cols":case"rows":case"size":case"span":x!=null&&typeof x!="function"&&typeof x!="symbol"&&!isNaN(x)&&1<=x?u.setAttribute(v,x):u.removeAttribute(v);break;case"rowSpan":case"start":x==null||typeof x=="function"||typeof x=="symbol"||isNaN(x)?u.removeAttribute(v):u.setAttribute(v,x);break;case"popover":ki("beforetoggle",u),ki("toggle",u),Kd(u,"popover",x);break;case"xlinkActuate":se(u,"http://www.w3.org/1999/xlink","xlink:actuate",x);break;case"xlinkArcrole":se(u,"http://www.w3.org/1999/xlink","xlink:arcrole",x);break;case"xlinkRole":se(u,"http://www.w3.org/1999/xlink","xlink:role",x);break;case"xlinkShow":se(u,"http://www.w3.org/1999/xlink","xlink:show",x);break;case"xlinkTitle":se(u,"http://www.w3.org/1999/xlink","xlink:title",x);break;case"xlinkType":se(u,"http://www.w3.org/1999/xlink","xlink:type",x);break;case"xmlBase":se(u,"http://www.w3.org/XML/1998/namespace","xml:base",x);break;case"xmlLang":se(u,"http://www.w3.org/XML/1998/namespace","xml:lang",x);break;case"xmlSpace":se(u,"http://www.w3.org/XML/1998/namespace","xml:space",x);break;case"is":Kd(u,"is",x);break;case"innerText":case"textContent":break;default:(!(2<v.length)||v[0]!=="o"&&v[0]!=="O"||v[1]!=="n"&&v[1]!=="N")&&(v=Ej.get(v)||v,Kd(u,v,x))}}function mV(u,p,v,x,E,M){switch(v){case"style":ak(u,x,M);break;case"dangerouslySetInnerHTML":if(x!=null){if(typeof x!="object"||!("__html"in x))throw Error(r(61));if(v=x.__html,v!=null){if(E.children!=null)throw Error(r(60));u.innerHTML=v}}break;case"children":typeof x=="string"?Qd(u,x):(typeof x=="number"||typeof x=="bigint")&&Qd(u,""+x);break;case"onScroll":x!=null&&ki("scroll",u);break;case"onScrollEnd":x!=null&&ki("scrollend",u);break;case"onClick":x!=null&&(u.onclick=Du);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Yv.hasOwnProperty(v))e:{if(v[0]==="o"&&v[1]==="n"&&(E=v.endsWith("Capture"),p=v.slice(2,E?v.length-7:void 0),M=u[zr]||null,M=M!=null?M[v]:null,typeof M=="function"&&u.removeEventListener(p,M,E),typeof x=="function")){typeof M!="function"&&M!==null&&(v in u?u[v]=null:u.hasAttribute(v)&&u.removeAttribute(v)),u.addEventListener(p,x,E);break e}v in u?u[v]=x:x===!0?u.setAttribute(v,""):Kd(u,v,x)}}}function da(u,p,v){switch(p){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ki("error",u),ki("load",u);var x=!1,E=!1,M;for(M in v)if(v.hasOwnProperty(M)){var j=v[M];if(j!=null)switch(M){case"src":x=!0;break;case"srcSet":E=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,p));default:$r(u,p,M,j,v,null)}}E&&$r(u,p,"srcSet",v.srcSet,v,null),x&&$r(u,p,"src",v.src,v,null);return;case"input":ki("invalid",u);var Z=M=j=E=null,ue=null,Ee=null;for(x in v)if(v.hasOwnProperty(x)){var Fe=v[x];if(Fe!=null)switch(x){case"name":E=Fe;break;case"type":j=Fe;break;case"checked":ue=Fe;break;case"defaultChecked":Ee=Fe;break;case"value":M=Fe;break;case"defaultValue":Z=Fe;break;case"children":case"dangerouslySetInnerHTML":if(Fe!=null)throw Error(r(137,p));break;default:$r(u,p,x,Fe,v,null)}}Lu(u,M,Z,ue,Ee,j,E,!1);return;case"select":ki("invalid",u),x=j=M=null;for(E in v)if(v.hasOwnProperty(E)&&(Z=v[E],Z!=null))switch(E){case"value":M=Z;break;case"defaultValue":j=Z;break;case"multiple":x=Z;default:$r(u,p,E,Z,v,null)}p=M,v=j,u.multiple=!!x,p!=null?fg(u,!!x,p,!1):v!=null&&fg(u,!!x,v,!0);return;case"textarea":ki("invalid",u),M=E=x=null;for(j in v)if(v.hasOwnProperty(j)&&(Z=v[j],Z!=null))switch(j){case"value":x=Z;break;case"defaultValue":E=Z;break;case"children":M=Z;break;case"dangerouslySetInnerHTML":if(Z!=null)throw Error(r(91));break;default:$r(u,p,j,Z,v,null)}sk(u,x,E,M);return;case"option":for(ue in v)v.hasOwnProperty(ue)&&(x=v[ue],x!=null)&&(ue==="selected"?u.selected=x&&typeof x!="function"&&typeof x!="symbol":$r(u,p,ue,x,v,null));return;case"dialog":ki("beforetoggle",u),ki("toggle",u),ki("cancel",u),ki("close",u);break;case"iframe":case"object":ki("load",u);break;case"video":case"audio":for(x=0;x<Vk.length;x++)ki(Vk[x],u);break;case"image":ki("error",u),ki("load",u);break;case"details":ki("toggle",u);break;case"embed":case"source":case"link":ki("error",u),ki("load",u);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ee in v)if(v.hasOwnProperty(Ee)&&(x=v[Ee],x!=null))switch(Ee){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,p));default:$r(u,p,Ee,x,v,null)}return;default:if(ok(p)){for(Fe in v)v.hasOwnProperty(Fe)&&(x=v[Fe],x!==void 0&&mV(u,p,Fe,x,v,void 0));return}}for(Z in v)v.hasOwnProperty(Z)&&(x=v[Z],x!=null&&$r(u,p,Z,x,v,null))}function QCe(u,p,v,x){switch(p){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var E=null,M=null,j=null,Z=null,ue=null,Ee=null,Fe=null;for(Me in v){var Ge=v[Me];if(v.hasOwnProperty(Me)&&Ge!=null)switch(Me){case"checked":break;case"value":break;case"defaultValue":ue=Ge;default:x.hasOwnProperty(Me)||$r(u,p,Me,null,x,Ge)}}for(var Ce in x){var Me=x[Ce];if(Ge=v[Ce],x.hasOwnProperty(Ce)&&(Me!=null||Ge!=null))switch(Ce){case"type":M=Me;break;case"name":E=Me;break;case"checked":Ee=Me;break;case"defaultChecked":Fe=Me;break;case"value":j=Me;break;case"defaultValue":Z=Me;break;case"children":case"dangerouslySetInnerHTML":if(Me!=null)throw Error(r(137,p));break;default:Me!==Ge&&$r(u,p,Ce,Me,x,Ge)}}pg(u,j,Z,ue,Ee,Fe,M,E);return;case"select":Me=j=Z=Ce=null;for(M in v)if(ue=v[M],v.hasOwnProperty(M)&&ue!=null)switch(M){case"value":break;case"multiple":Me=ue;default:x.hasOwnProperty(M)||$r(u,p,M,null,x,ue)}for(E in x)if(M=x[E],ue=v[E],x.hasOwnProperty(E)&&(M!=null||ue!=null))switch(E){case"value":Ce=M;break;case"defaultValue":Z=M;break;case"multiple":j=M;default:M!==ue&&$r(u,p,E,M,x,ue)}p=Z,v=j,x=Me,Ce!=null?fg(u,!!v,Ce,!1):!!x!=!!v&&(p!=null?fg(u,!!v,p,!0):fg(u,!!v,v?[]:"",!1));return;case"textarea":Me=Ce=null;for(Z in v)if(E=v[Z],v.hasOwnProperty(Z)&&E!=null&&!x.hasOwnProperty(Z))switch(Z){case"value":break;case"children":break;default:$r(u,p,Z,null,x,E)}for(j in x)if(E=x[j],M=v[j],x.hasOwnProperty(j)&&(E!=null||M!=null))switch(j){case"value":Ce=E;break;case"defaultValue":Me=E;break;case"children":break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(r(91));break;default:E!==M&&$r(u,p,j,E,x,M)}nk(u,Ce,Me);return;case"option":for(var Tt in v)Ce=v[Tt],v.hasOwnProperty(Tt)&&Ce!=null&&!x.hasOwnProperty(Tt)&&(Tt==="selected"?u.selected=!1:$r(u,p,Tt,null,x,Ce));for(ue in x)Ce=x[ue],Me=v[ue],x.hasOwnProperty(ue)&&Ce!==Me&&(Ce!=null||Me!=null)&&(ue==="selected"?u.selected=Ce&&typeof Ce!="function"&&typeof Ce!="symbol":$r(u,p,ue,Ce,x,Me));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Xt in v)Ce=v[Xt],v.hasOwnProperty(Xt)&&Ce!=null&&!x.hasOwnProperty(Xt)&&$r(u,p,Xt,null,x,Ce);for(Ee in x)if(Ce=x[Ee],Me=v[Ee],x.hasOwnProperty(Ee)&&Ce!==Me&&(Ce!=null||Me!=null))switch(Ee){case"children":case"dangerouslySetInnerHTML":if(Ce!=null)throw Error(r(137,p));break;default:$r(u,p,Ee,Ce,x,Me)}return;default:if(ok(p)){for(var Tr in v)Ce=v[Tr],v.hasOwnProperty(Tr)&&Ce!==void 0&&!x.hasOwnProperty(Tr)&&mV(u,p,Tr,void 0,x,Ce);for(Fe in x)Ce=x[Fe],Me=v[Fe],!x.hasOwnProperty(Fe)||Ce===Me||Ce===void 0&&Me===void 0||mV(u,p,Fe,Ce,x,Me);return}}for(var Se in v)Ce=v[Se],v.hasOwnProperty(Se)&&Ce!=null&&!x.hasOwnProperty(Se)&&$r(u,p,Se,null,x,Ce);for(Ge in x)Ce=x[Ge],Me=v[Ge],!x.hasOwnProperty(Ge)||Ce===Me||Ce==null&&Me==null||$r(u,p,Ge,Ce,x,Me)}function qee(u){switch(u){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function eIe(){if(typeof performance.getEntriesByType=="function"){for(var u=0,p=0,v=performance.getEntriesByType("resource"),x=0;x<v.length;x++){var E=v[x],M=E.transferSize,j=E.initiatorType,Z=E.duration;if(M&&Z&&qee(j)){for(j=0,Z=E.responseEnd,x+=1;x<v.length;x++){var ue=v[x],Ee=ue.startTime;if(Ee>Z)break;var Fe=ue.transferSize,Ge=ue.initiatorType;Fe&&qee(Ge)&&(ue=ue.responseEnd,j+=Fe*(ue<Z?1:(Z-Ee)/(ue-Ee)))}if(--x,p+=8*(M+j)/(E.duration/1e3),u++,10<u)break}}if(0<u)return p/u/1e6}return navigator.connection&&(u=navigator.connection.downlink,typeof u=="number")?u:5}var gV=null,yV=null;function PP(u){return u.nodeType===9?u:u.ownerDocument}function Wee(u){switch(u){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Yee(u,p){if(u===0)switch(p){case"svg":return 1;case"math":return 2;default:return 0}return u===1&&p==="foreignObject"?0:u}function vV(u,p){return u==="textarea"||u==="noscript"||typeof p.children=="string"||typeof p.children=="number"||typeof p.children=="bigint"||typeof p.dangerouslySetInnerHTML=="object"&&p.dangerouslySetInnerHTML!==null&&p.dangerouslySetInnerHTML.__html!=null}var bV=null;function tIe(){var u=window.event;return u&&u.type==="popstate"?u===bV?!1:(bV=u,!0):(bV=null,!1)}var Zee=typeof setTimeout=="function"?setTimeout:void 0,iIe=typeof clearTimeout=="function"?clearTimeout:void 0,Xee=typeof Promise=="function"?Promise:void 0,rIe=typeof queueMicrotask=="function"?queueMicrotask:typeof Xee<"u"?function(u){return Xee.resolve(null).then(u).catch(nIe)}:Zee;function nIe(u){setTimeout(function(){throw u})}function Ng(u){return u==="head"}function Jee(u,p){var v=p,x=0;do{var E=v.nextSibling;if(u.removeChild(v),E&&E.nodeType===8)if(v=E.data,v==="/$"||v==="/&"){if(x===0){u.removeChild(E),y1(p);return}x--}else if(v==="$"||v==="$?"||v==="$~"||v==="$!"||v==="&")x++;else if(v==="html")Uk(u.ownerDocument.documentElement);else if(v==="head"){v=u.ownerDocument.head,Uk(v);for(var M=v.firstChild;M;){var j=M.nextSibling,Z=M.nodeName;M[Pl]||Z==="SCRIPT"||Z==="STYLE"||Z==="LINK"&&M.rel.toLowerCase()==="stylesheet"||v.removeChild(M),M=j}}else v==="body"&&Uk(u.ownerDocument.body);v=E}while(v);y1(p)}function Kee(u,p){var v=u;u=0;do{var x=v.nextSibling;if(v.nodeType===1?p?(v._stashedDisplay=v.style.display,v.style.display="none"):(v.style.display=v._stashedDisplay||"",v.getAttribute("style")===""&&v.removeAttribute("style")):v.nodeType===3&&(p?(v._stashedText=v.nodeValue,v.nodeValue=""):v.nodeValue=v._stashedText||""),x&&x.nodeType===8)if(v=x.data,v==="/$"){if(u===0)break;u--}else v!=="$"&&v!=="$?"&&v!=="$~"&&v!=="$!"||u++;v=x}while(v)}function wV(u){var p=u.firstChild;for(p&&p.nodeType===10&&(p=p.nextSibling);p;){var v=p;switch(p=p.nextSibling,v.nodeName){case"HTML":case"HEAD":case"BODY":wV(v),Mu(v);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(v.rel.toLowerCase()==="stylesheet")continue}u.removeChild(v)}}function sIe(u,p,v,x){for(;u.nodeType===1;){var E=v;if(u.nodeName.toLowerCase()!==p.toLowerCase()){if(!x&&(u.nodeName!=="INPUT"||u.type!=="hidden"))break}else if(x){if(!u[Pl])switch(p){case"meta":if(!u.hasAttribute("itemprop"))break;return u;case"link":if(M=u.getAttribute("rel"),M==="stylesheet"&&u.hasAttribute("data-precedence"))break;if(M!==E.rel||u.getAttribute("href")!==(E.href==null||E.href===""?null:E.href)||u.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin)||u.getAttribute("title")!==(E.title==null?null:E.title))break;return u;case"style":if(u.hasAttribute("data-precedence"))break;return u;case"script":if(M=u.getAttribute("src"),(M!==(E.src==null?null:E.src)||u.getAttribute("type")!==(E.type==null?null:E.type)||u.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin))&&M&&u.hasAttribute("async")&&!u.hasAttribute("itemprop"))break;return u;default:return u}}else if(p==="input"&&u.type==="hidden"){var M=E.name==null?null:""+E.name;if(E.type==="hidden"&&u.getAttribute("name")===M)return u}else return u;if(u=Fc(u.nextSibling),u===null)break}return null}function aIe(u,p,v){if(p==="")return null;for(;u.nodeType!==3;)if((u.nodeType!==1||u.nodeName!=="INPUT"||u.type!=="hidden")&&!v||(u=Fc(u.nextSibling),u===null))return null;return u}function Qee(u,p){for(;u.nodeType!==8;)if((u.nodeType!==1||u.nodeName!=="INPUT"||u.type!=="hidden")&&!p||(u=Fc(u.nextSibling),u===null))return null;return u}function _V(u){return u.data==="$?"||u.data==="$~"}function xV(u){return u.data==="$!"||u.data==="$?"&&u.ownerDocument.readyState!=="loading"}function oIe(u,p){var v=u.ownerDocument;if(u.data==="$~")u._reactRetry=p;else if(u.data!=="$?"||v.readyState!=="loading")p();else{var x=function(){p(),v.removeEventListener("DOMContentLoaded",x)};v.addEventListener("DOMContentLoaded",x),u._reactRetry=x}}function Fc(u){for(;u!=null;u=u.nextSibling){var p=u.nodeType;if(p===1||p===3)break;if(p===8){if(p=u.data,p==="$"||p==="$!"||p==="$?"||p==="$~"||p==="&"||p==="F!"||p==="F")break;if(p==="/$"||p==="/&")return null}}return u}var SV=null;function ete(u){u=u.nextSibling;for(var p=0;u;){if(u.nodeType===8){var v=u.data;if(v==="/$"||v==="/&"){if(p===0)return Fc(u.nextSibling);p--}else v!=="$"&&v!=="$!"&&v!=="$?"&&v!=="$~"&&v!=="&"||p++}u=u.nextSibling}return null}function tte(u){u=u.previousSibling;for(var p=0;u;){if(u.nodeType===8){var v=u.data;if(v==="$"||v==="$!"||v==="$?"||v==="$~"||v==="&"){if(p===0)return u;p--}else v!=="/$"&&v!=="/&"||p++}u=u.previousSibling}return null}function ite(u,p,v){switch(p=PP(v),u){case"html":if(u=p.documentElement,!u)throw Error(r(452));return u;case"head":if(u=p.head,!u)throw Error(r(453));return u;case"body":if(u=p.body,!u)throw Error(r(454));return u;default:throw Error(r(451))}}function Uk(u){for(var p=u.attributes;p.length;)u.removeAttributeNode(p[0]);Mu(u)}var Nc=new Map,rte=new Set;function OP(u){return typeof u.getRootNode=="function"?u.getRootNode():u.nodeType===9?u:u.ownerDocument}var _f=he.d;he.d={f:lIe,r:cIe,D:uIe,C:dIe,L:hIe,m:pIe,X:mIe,S:fIe,M:gIe};function lIe(){var u=_f.f(),p=$P();return u||p}function cIe(u){var p=Mc(u);p!==null&&p.tag===5&&p.type==="form"?wQ(p):_f.r(u)}var f1=typeof document>"u"?null:document;function nte(u,p,v){var x=f1;if(x&&typeof p=="string"&&p){var E=za(p);E='link[rel="'+u+'"][href="'+E+'"]',typeof v=="string"&&(E+='[crossorigin="'+v+'"]'),rte.has(E)||(rte.add(E),u={rel:u,crossOrigin:v,href:p},x.querySelector(E)===null&&(p=x.createElement("link"),da(p,"link",u),mn(p),x.head.appendChild(p)))}}function uIe(u){_f.D(u),nte("dns-prefetch",u,null)}function dIe(u,p){_f.C(u,p),nte("preconnect",u,p)}function hIe(u,p,v){_f.L(u,p,v);var x=f1;if(x&&u&&p){var E='link[rel="preload"][as="'+za(p)+'"]';p==="image"&&v&&v.imageSrcSet?(E+='[imagesrcset="'+za(v.imageSrcSet)+'"]',typeof v.imageSizes=="string"&&(E+='[imagesizes="'+za(v.imageSizes)+'"]')):E+='[href="'+za(u)+'"]';var M=E;switch(p){case"style":M=m1(u);break;case"script":M=g1(u)}Nc.has(M)||(u=f({rel:"preload",href:p==="image"&&v&&v.imageSrcSet?void 0:u,as:p},v),Nc.set(M,u),x.querySelector(E)!==null||p==="style"&&x.querySelector(Hk(M))||p==="script"&&x.querySelector(Gk(M))||(p=x.createElement("link"),da(p,"link",u),mn(p),x.head.appendChild(p)))}}function pIe(u,p){_f.m(u,p);var v=f1;if(v&&u){var x=p&&typeof p.as=="string"?p.as:"script",E='link[rel="modulepreload"][as="'+za(x)+'"][href="'+za(u)+'"]',M=E;switch(x){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":M=g1(u)}if(!Nc.has(M)&&(u=f({rel:"modulepreload",href:u},p),Nc.set(M,u),v.querySelector(E)===null)){switch(x){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(v.querySelector(Gk(M)))return}x=v.createElement("link"),da(x,"link",u),mn(x),v.head.appendChild(x)}}}function fIe(u,p,v){_f.S(u,p,v);var x=f1;if(x&&u){var E=Au(x).hoistableStyles,M=m1(u);p=p||"default";var j=E.get(M);if(!j){var Z={loading:0,preload:null};if(j=x.querySelector(Hk(M)))Z.loading=5;else{u=f({rel:"stylesheet",href:u,"data-precedence":p},v),(v=Nc.get(M))&&$V(u,v);var ue=j=x.createElement("link");mn(ue),da(ue,"link",u),ue._p=new Promise(function(Ee,Fe){ue.onload=Ee,ue.onerror=Fe}),ue.addEventListener("load",function(){Z.loading|=1}),ue.addEventListener("error",function(){Z.loading|=2}),Z.loading|=4,LP(j,p,x)}j={type:"stylesheet",instance:j,count:1,state:Z},E.set(M,j)}}}function mIe(u,p){_f.X(u,p);var v=f1;if(v&&u){var x=Au(v).hoistableScripts,E=g1(u),M=x.get(E);M||(M=v.querySelector(Gk(E)),M||(u=f({src:u,async:!0},p),(p=Nc.get(E))&&TV(u,p),M=v.createElement("script"),mn(M),da(M,"link",u),v.head.appendChild(M)),M={type:"script",instance:M,count:1,state:null},x.set(E,M))}}function gIe(u,p){_f.M(u,p);var v=f1;if(v&&u){var x=Au(v).hoistableScripts,E=g1(u),M=x.get(E);M||(M=v.querySelector(Gk(E)),M||(u=f({src:u,async:!0,type:"module"},p),(p=Nc.get(E))&&TV(u,p),M=v.createElement("script"),mn(M),da(M,"link",u),v.head.appendChild(M)),M={type:"script",instance:M,count:1,state:null},x.set(E,M))}}function ste(u,p,v,x){var E=(E=ut.current)?OP(E):null;if(!E)throw Error(r(446));switch(u){case"meta":case"title":return null;case"style":return typeof v.precedence=="string"&&typeof v.href=="string"?(p=m1(v.href),v=Au(E).hoistableStyles,x=v.get(p),x||(x={type:"style",instance:null,count:0,state:null},v.set(p,x)),x):{type:"void",instance:null,count:0,state:null};case"link":if(v.rel==="stylesheet"&&typeof v.href=="string"&&typeof v.precedence=="string"){u=m1(v.href);var M=Au(E).hoistableStyles,j=M.get(u);if(j||(E=E.ownerDocument||E,j={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},M.set(u,j),(M=E.querySelector(Hk(u)))&&!M._p&&(j.instance=M,j.state.loading=5),Nc.has(u)||(v={rel:"preload",as:"style",href:v.href,crossOrigin:v.crossOrigin,integrity:v.integrity,media:v.media,hrefLang:v.hrefLang,referrerPolicy:v.referrerPolicy},Nc.set(u,v),M||yIe(E,u,v,j.state))),p&&x===null)throw Error(r(528,""));return j}if(p&&x!==null)throw Error(r(529,""));return null;case"script":return p=v.async,v=v.src,typeof v=="string"&&p&&typeof p!="function"&&typeof p!="symbol"?(p=g1(v),v=Au(E).hoistableScripts,x=v.get(p),x||(x={type:"script",instance:null,count:0,state:null},v.set(p,x)),x):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,u))}}function m1(u){return'href="'+za(u)+'"'}function Hk(u){return'link[rel="stylesheet"]['+u+"]"}function ate(u){return f({},u,{"data-precedence":u.precedence,precedence:null})}function yIe(u,p,v,x){u.querySelector('link[rel="preload"][as="style"]['+p+"]")?x.loading=1:(p=u.createElement("link"),x.preload=p,p.addEventListener("load",function(){return x.loading|=1}),p.addEventListener("error",function(){return x.loading|=2}),da(p,"link",v),mn(p),u.head.appendChild(p))}function g1(u){return'[src="'+za(u)+'"]'}function Gk(u){return"script[async]"+u}function ote(u,p,v){if(p.count++,p.instance===null)switch(p.type){case"style":var x=u.querySelector('style[data-href~="'+za(v.href)+'"]');if(x)return p.instance=x,mn(x),x;var E=f({},v,{"data-href":v.href,"data-precedence":v.precedence,href:null,precedence:null});return x=(u.ownerDocument||u).createElement("style"),mn(x),da(x,"style",E),LP(x,v.precedence,u),p.instance=x;case"stylesheet":E=m1(v.href);var M=u.querySelector(Hk(E));if(M)return p.state.loading|=4,p.instance=M,mn(M),M;x=ate(v),(E=Nc.get(E))&&$V(x,E),M=(u.ownerDocument||u).createElement("link"),mn(M);var j=M;return j._p=new Promise(function(Z,ue){j.onload=Z,j.onerror=ue}),da(M,"link",x),p.state.loading|=4,LP(M,v.precedence,u),p.instance=M;case"script":return M=g1(v.src),(E=u.querySelector(Gk(M)))?(p.instance=E,mn(E),E):(x=v,(E=Nc.get(M))&&(x=f({},v),TV(x,E)),u=u.ownerDocument||u,E=u.createElement("script"),mn(E),da(E,"link",x),u.head.appendChild(E),p.instance=E);case"void":return null;default:throw Error(r(443,p.type))}else p.type==="stylesheet"&&(p.state.loading&4)===0&&(x=p.instance,p.state.loading|=4,LP(x,v.precedence,u));return p.instance}function LP(u,p,v){for(var x=v.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),E=x.length?x[x.length-1]:null,M=E,j=0;j<x.length;j++){var Z=x[j];if(Z.dataset.precedence===p)M=Z;else if(M!==E)break}M?M.parentNode.insertBefore(u,M.nextSibling):(p=v.nodeType===9?v.head:v,p.insertBefore(u,p.firstChild))}function $V(u,p){u.crossOrigin==null&&(u.crossOrigin=p.crossOrigin),u.referrerPolicy==null&&(u.referrerPolicy=p.referrerPolicy),u.title==null&&(u.title=p.title)}function TV(u,p){u.crossOrigin==null&&(u.crossOrigin=p.crossOrigin),u.referrerPolicy==null&&(u.referrerPolicy=p.referrerPolicy),u.integrity==null&&(u.integrity=p.integrity)}var DP=null;function lte(u,p,v){if(DP===null){var x=new Map,E=DP=new Map;E.set(v,x)}else E=DP,x=E.get(v),x||(x=new Map,E.set(v,x));if(x.has(u))return x;for(x.set(u,null),v=v.getElementsByTagName(u),E=0;E<v.length;E++){var M=v[E];if(!(M[Pl]||M[hr]||u==="link"&&M.getAttribute("rel")==="stylesheet")&&M.namespaceURI!=="http://www.w3.org/2000/svg"){var j=M.getAttribute(p)||"";j=u+j;var Z=x.get(j);Z?Z.push(M):x.set(j,[M])}}return x}function cte(u,p,v){u=u.ownerDocument||u,u.head.insertBefore(v,p==="title"?u.querySelector("head > title"):null)}function vIe(u,p,v){if(v===1||p.itemProp!=null)return!1;switch(u){case"meta":case"title":return!0;case"style":if(typeof p.precedence!="string"||typeof p.href!="string"||p.href==="")break;return!0;case"link":if(typeof p.rel!="string"||typeof p.href!="string"||p.href===""||p.onLoad||p.onError)break;return p.rel==="stylesheet"?(u=p.disabled,typeof p.precedence=="string"&&u==null):!0;case"script":if(p.async&&typeof p.async!="function"&&typeof p.async!="symbol"&&!p.onLoad&&!p.onError&&p.src&&typeof p.src=="string")return!0}return!1}function ute(u){return!(u.type==="stylesheet"&&(u.state.loading&3)===0)}function bIe(u,p,v,x){if(v.type==="stylesheet"&&(typeof x.media!="string"||matchMedia(x.media).matches!==!1)&&(v.state.loading&4)===0){if(v.instance===null){var E=m1(x.href),M=p.querySelector(Hk(E));if(M){p=M._p,p!==null&&typeof p=="object"&&typeof p.then=="function"&&(u.count++,u=RP.bind(u),p.then(u,u)),v.state.loading|=4,v.instance=M,mn(M);return}M=p.ownerDocument||p,x=ate(x),(E=Nc.get(E))&&$V(x,E),M=M.createElement("link"),mn(M);var j=M;j._p=new Promise(function(Z,ue){j.onload=Z,j.onerror=ue}),da(M,"link",x),v.instance=M}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(v,p),(p=v.state.preload)&&(v.state.loading&3)===0&&(u.count++,v=RP.bind(u),p.addEventListener("load",v),p.addEventListener("error",v))}}var kV=0;function wIe(u,p){return u.stylesheets&&u.count===0&&FP(u,u.stylesheets),0<u.count||0<u.imgCount?function(v){var x=setTimeout(function(){if(u.stylesheets&&FP(u,u.stylesheets),u.unsuspend){var M=u.unsuspend;u.unsuspend=null,M()}},6e4+p);0<u.imgBytes&&kV===0&&(kV=62500*eIe());var E=setTimeout(function(){if(u.waitingForImages=!1,u.count===0&&(u.stylesheets&&FP(u,u.stylesheets),u.unsuspend)){var M=u.unsuspend;u.unsuspend=null,M()}},(u.imgBytes>kV?50:800)+p);return u.unsuspend=v,function(){u.unsuspend=null,clearTimeout(x),clearTimeout(E)}}:null}function RP(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)FP(this,this.stylesheets);else if(this.unsuspend){var u=this.unsuspend;this.unsuspend=null,u()}}}var zP=null;function FP(u,p){u.stylesheets=null,u.unsuspend!==null&&(u.count++,zP=new Map,p.forEach(_Ie,u),zP=null,RP.call(u))}function _Ie(u,p){if(!(p.state.loading&4)){var v=zP.get(u);if(v)var x=v.get(null);else{v=new Map,zP.set(u,v);for(var E=u.querySelectorAll("link[data-precedence],style[data-precedence]"),M=0;M<E.length;M++){var j=E[M];(j.nodeName==="LINK"||j.getAttribute("media")!=="not all")&&(v.set(j.dataset.precedence,j),x=j)}x&&v.set(null,x)}E=p.instance,j=E.getAttribute("data-precedence"),M=v.get(j)||x,M===x&&v.set(null,E),v.set(j,E),this.count++,x=RP.bind(this),E.addEventListener("load",x),E.addEventListener("error",x),M?M.parentNode.insertBefore(E,M.nextSibling):(u=u.nodeType===9?u.head:u,u.insertBefore(E,u.firstChild)),p.state.loading|=4}}var qk={$$typeof:I,Provider:null,Consumer:null,_currentValue:xe,_currentValue2:xe,_threadCount:0};function xIe(u,p,v,x,E,M,j,Z,ue){this.tag=1,this.containerInfo=u,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ar(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ar(0),this.hiddenUpdates=ar(null),this.identifierPrefix=x,this.onUncaughtError=E,this.onCaughtError=M,this.onRecoverableError=j,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ue,this.incompleteTransitions=new Map}function dte(u,p,v,x,E,M,j,Z,ue,Ee,Fe,Ge){return u=new xIe(u,p,v,j,ue,Ee,Fe,Ge,Z),p=1,M===!0&&(p|=24),M=Ol(3,null,null,p),u.current=M,M.stateNode=u,p=s4(),p.refCount++,u.pooledCache=p,p.refCount++,M.memoizedState={element:x,isDehydrated:v,cache:p},c4(M),u}function hte(u){return u?(u=W_,u):W_}function pte(u,p,v,x,E,M){E=hte(E),x.context===null?x.context=E:x.pendingContext=E,x=Cg(p),x.payload={element:v},M=M===void 0?null:M,M!==null&&(x.callback=M),v=Ig(u,x,p),v!==null&&(Yo(v,u,p),$k(v,u,p))}function fte(u,p){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var v=u.retryLane;u.retryLane=v!==0&&v<p?v:p}}function EV(u,p){fte(u,p),(u=u.alternate)&&fte(u,p)}function mte(u){if(u.tag===13||u.tag===31){var p=lb(u,67108864);p!==null&&Yo(p,u,67108864),EV(u,67108864)}}function gte(u){if(u.tag===13||u.tag===31){var p=Fl();p=Fs(p);var v=lb(u,p);v!==null&&Yo(v,u,p),EV(u,p)}}var NP=!0;function SIe(u,p,v,x){var E=re.T;re.T=null;var M=he.p;try{he.p=2,CV(u,p,v,x)}finally{he.p=M,re.T=E}}function $Ie(u,p,v,x){var E=re.T;re.T=null;var M=he.p;try{he.p=8,CV(u,p,v,x)}finally{he.p=M,re.T=E}}function CV(u,p,v,x){if(NP){var E=IV(x);if(E===null)fV(u,p,x,jP,v),vte(u,x);else if(kIe(E,u,p,v,x))x.stopPropagation();else if(vte(u,x),p&4&&-1<TIe.indexOf(u)){for(;E!==null;){var M=Mc(E);if(M!==null)switch(M.tag){case 3:if(M=M.stateNode,M.current.memoizedState.isDehydrated){var j=Cc(M.pendingLanes);if(j!==0){var Z=M;for(Z.pendingLanes|=2,Z.entangledLanes|=2;j;){var ue=1<<31-zs(j);Z.entanglements[1]|=ue,j&=~ue}sh(M),(er&6)===0&&(xP=ls()+500,jk(0))}}break;case 31:case 13:Z=lb(M,2),Z!==null&&Yo(Z,M,2),$P(),EV(M,2)}if(M=IV(x),M===null&&fV(u,p,x,jP,v),M===E)break;E=M}E!==null&&x.stopPropagation()}else fV(u,p,x,null,v)}}function IV(u){return u=lk(u),MV(u)}var jP=null;function MV(u){if(jP=null,u=Jd(u),u!==null){var p=s(u);if(p===null)u=null;else{var v=p.tag;if(v===13){if(u=a(p),u!==null)return u;u=null}else if(v===31){if(u=o(p),u!==null)return u;u=null}else if(v===3){if(p.stateNode.current.memoizedState.isDehydrated)return p.tag===3?p.stateNode.containerInfo:null;u=null}else p!==u&&(u=null)}}return jP=u,null}function yte(u){switch(u){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(L_()){case Gd:return 2;case D_:return 8;case qd:case rk:return 32;case hg:return 268435456;default:return 32}default:return 32}}var AV=!1,jg=null,Vg=null,Bg=null,Wk=new Map,Yk=new Map,Ug=[],TIe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function vte(u,p){switch(u){case"focusin":case"focusout":jg=null;break;case"dragenter":case"dragleave":Vg=null;break;case"mouseover":case"mouseout":Bg=null;break;case"pointerover":case"pointerout":Wk.delete(p.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yk.delete(p.pointerId)}}function Zk(u,p,v,x,E,M){return u===null||u.nativeEvent!==M?(u={blockedOn:p,domEventName:v,eventSystemFlags:x,nativeEvent:M,targetContainers:[E]},p!==null&&(p=Mc(p),p!==null&&mte(p)),u):(u.eventSystemFlags|=x,p=u.targetContainers,E!==null&&p.indexOf(E)===-1&&p.push(E),u)}function kIe(u,p,v,x,E){switch(p){case"focusin":return jg=Zk(jg,u,p,v,x,E),!0;case"dragenter":return Vg=Zk(Vg,u,p,v,x,E),!0;case"mouseover":return Bg=Zk(Bg,u,p,v,x,E),!0;case"pointerover":var M=E.pointerId;return Wk.set(M,Zk(Wk.get(M)||null,u,p,v,x,E)),!0;case"gotpointercapture":return M=E.pointerId,Yk.set(M,Zk(Yk.get(M)||null,u,p,v,x,E)),!0}return!1}function bte(u){var p=Jd(u.target);if(p!==null){var v=s(p);if(v!==null){if(p=v.tag,p===13){if(p=a(v),p!==null){u.blockedOn=p,Xd(u.priority,function(){gte(v)});return}}else if(p===31){if(p=o(v),p!==null){u.blockedOn=p,Xd(u.priority,function(){gte(v)});return}}else if(p===3&&v.stateNode.current.memoizedState.isDehydrated){u.blockedOn=v.tag===3?v.stateNode.containerInfo:null;return}}}u.blockedOn=null}function VP(u){if(u.blockedOn!==null)return!1;for(var p=u.targetContainers;0<p.length;){var v=IV(u.nativeEvent);if(v===null){v=u.nativeEvent;var x=new v.constructor(v.type,v);Kv=x,v.target.dispatchEvent(x),Kv=null}else return p=Mc(v),p!==null&&mte(p),u.blockedOn=v,!1;p.shift()}return!0}function wte(u,p,v){VP(u)&&v.delete(p)}function EIe(){AV=!1,jg!==null&&VP(jg)&&(jg=null),Vg!==null&&VP(Vg)&&(Vg=null),Bg!==null&&VP(Bg)&&(Bg=null),Wk.forEach(wte),Yk.forEach(wte)}function BP(u,p){u.blockedOn===p&&(u.blockedOn=null,AV||(AV=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,EIe)))}var UP=null;function _te(u){UP!==u&&(UP=u,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){UP===u&&(UP=null);for(var p=0;p<u.length;p+=3){var v=u[p],x=u[p+1],E=u[p+2];if(typeof x!="function"){if(MV(x||v)===null)continue;break}var M=Mc(v);M!==null&&(u.splice(p,3),p-=3,I4(M,{pending:!0,data:E,method:v.method,action:x},x,E))}}))}function y1(u){function p(ue){return BP(ue,u)}jg!==null&&BP(jg,u),Vg!==null&&BP(Vg,u),Bg!==null&&BP(Bg,u),Wk.forEach(p),Yk.forEach(p);for(var v=0;v<Ug.length;v++){var x=Ug[v];x.blockedOn===u&&(x.blockedOn=null)}for(;0<Ug.length&&(v=Ug[0],v.blockedOn===null);)bte(v),v.blockedOn===null&&Ug.shift();if(v=(u.ownerDocument||u).$$reactFormReplay,v!=null)for(x=0;x<v.length;x+=3){var E=v[x],M=v[x+1],j=E[zr]||null;if(typeof M=="function")j||_te(v);else if(j){var Z=null;if(M&&M.hasAttribute("formAction")){if(E=M,j=M[zr]||null)Z=j.formAction;else if(MV(E)!==null)continue}else Z=j.action;typeof Z=="function"?v[x+1]=Z:(v.splice(x,3),x-=3),_te(v)}}}function xte(){function u(M){M.canIntercept&&M.info==="react-transition"&&M.intercept({handler:function(){return new Promise(function(j){return E=j})},focusReset:"manual",scroll:"manual"})}function p(){E!==null&&(E(),E=null),x||setTimeout(v,20)}function v(){if(!x&&!navigation.transition){var M=navigation.currentEntry;M&&M.url!=null&&navigation.navigate(M.url,{state:M.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var x=!1,E=null;return navigation.addEventListener("navigate",u),navigation.addEventListener("navigatesuccess",p),navigation.addEventListener("navigateerror",p),setTimeout(v,100),function(){x=!0,navigation.removeEventListener("navigate",u),navigation.removeEventListener("navigatesuccess",p),navigation.removeEventListener("navigateerror",p),E!==null&&(E(),E=null)}}}function PV(u){this._internalRoot=u}HP.prototype.render=PV.prototype.render=function(u){var p=this._internalRoot;if(p===null)throw Error(r(409));var v=p.current,x=Fl();pte(v,x,u,p,null,null)},HP.prototype.unmount=PV.prototype.unmount=function(){var u=this._internalRoot;if(u!==null){this._internalRoot=null;var p=u.containerInfo;pte(u.current,2,null,u,null,null),$P(),p[Ft]=null}};function HP(u){this._internalRoot=u}HP.prototype.unstable_scheduleHydration=function(u){if(u){var p=Ki();u={blockedOn:null,target:u,priority:p};for(var v=0;v<Ug.length&&p!==0&&p<Ug[v].priority;v++);Ug.splice(v,0,u),v===0&&bte(u)}};var Ste=e.version;if(Ste!=="19.2.4")throw Error(r(527,Ste,"19.2.4"));he.findDOMNode=function(u){var p=u._reactInternals;if(p===void 0)throw typeof u.render=="function"?Error(r(188)):(u=Object.keys(u).join(","),Error(r(268,u)));return u=c(p),u=u!==null?h(u):null,u=u===null?null:u.stateNode,u};var CIe={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:re,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var GP=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!GP.isDisabled&&GP.supportsFiber)try{Wd=GP.inject(CIe),Rs=GP}catch{}}return Kk.createRoot=function(u,p){if(!n(u))throw Error(r(299));var v=!1,x="",E=MQ,M=AQ,j=PQ;return p!=null&&(p.unstable_strictMode===!0&&(v=!0),p.identifierPrefix!==void 0&&(x=p.identifierPrefix),p.onUncaughtError!==void 0&&(E=p.onUncaughtError),p.onCaughtError!==void 0&&(M=p.onCaughtError),p.onRecoverableError!==void 0&&(j=p.onRecoverableError)),p=dte(u,1,!1,null,null,v,x,null,E,M,j,xte),u[Ft]=p.current,pV(u),new PV(p)},Kk.hydrateRoot=function(u,p,v){if(!n(u))throw Error(r(299));var x=!1,E="",M=MQ,j=AQ,Z=PQ,ue=null;return v!=null&&(v.unstable_strictMode===!0&&(x=!0),v.identifierPrefix!==void 0&&(E=v.identifierPrefix),v.onUncaughtError!==void 0&&(M=v.onUncaughtError),v.onCaughtError!==void 0&&(j=v.onCaughtError),v.onRecoverableError!==void 0&&(Z=v.onRecoverableError),v.formState!==void 0&&(ue=v.formState)),p=dte(u,1,!0,p,v??null,x,E,ue,M,j,Z,xte),p.context=hte(null),v=p.current,x=Fl(),x=Fs(x),E=Cg(x),E.callback=null,Ig(v,E,x),v=x,p.current.lanes=v,Da(p,v),sh(p),u[Ft]=p.current,pV(u),new HP(p)},Kk.version="19.2.4",Kk}var Rte;function VIe(){if(Rte)return RV.exports;Rte=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),RV.exports=jIe(),RV.exports}var BIe=VIe();function d(t,e,i,r){var n=arguments.length,s=n<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,i):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(a=t[o])&&(s=(n<3?a(s):n>3?a(e,i,s):a(e,i))||s);return n>3&&s&&Object.defineProperty(e,i,s),s}function ckt(t,e){return function(i,r){e(i,r,t)}}function vl(t,e,i,r){function n(s){return s instanceof i?s:new i(function(a){a(s)})}return new(i||(i=Promise))(function(s,a){function o(h){try{c(r.next(h))}catch(f){a(f)}}function l(h){try{c(r.throw(h))}catch(f){a(f)}}function c(h){h.done?s(h.value):n(h.value).then(o,l)}c((r=r.apply(t,e||[])).next())})}function ukt(t,e,i){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var r,n;if(i){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=e[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=e[Symbol.dispose],i&&(n=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");n&&(r=function(){try{n.call(this)}catch(s){return Promise.reject(s)}}),t.stack.push({value:e,dispose:r,async:i})}else i&&t.stack.push({async:!0});return e}var UIe=typeof SuppressedError=="function"?SuppressedError:function(t,e,i){var r=new Error(i);return r.name="SuppressedError",r.error=t,r.suppressed=e,r};function dkt(t){function e(s){t.error=t.hasError?new UIe(s,t.error,"An error was suppressed during disposal."):s,t.hasError=!0}var i,r=0;function n(){for(;i=t.stack.pop();)try{if(!i.async&&r===1)return r=0,t.stack.push(i),Promise.resolve().then(n);if(i.dispose){var s=i.dispose.call(i.value);if(i.async)return r|=2,Promise.resolve(s).then(n,function(a){return e(a),n()})}else r|=1}catch(a){e(a)}if(r===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return n()}let Zy;const ma=globalThis;function ve(t){return typeof Zy[t]=="function"?Zy[t]=Zy[t](ma):Zy[t]}Zy=ma.dojoConfig?.has||ma.esriConfig?.has?{...ma.dojoConfig?.has,...ma.esriConfig?.has}:{},ve.add=(t,e,i,r)=>{(r||Zy[t]===void 0)&&(Zy[t]=e),i&&ve(t)},ve.cache=Zy,ve.add("big-integer-warning-enabled",!0),ve.add("esri-deprecation-warnings",!0),ve.add("esri-tests-disable-screenshots",!1),ve.add("esri-tests-use-full-window",!1),ve.add("esri-tests-post-to-influx",!0),ve.add("esri-cim-animations-enable-status","enabled"),ve.add("esri-cim-animations-spotlight",!1),ve.add("esri-cim-animations-freeze-time",!1),(()=>{ve.add("host-webworker",ma.WorkerGlobalScope!==void 0&&self instanceof ma.WorkerGlobalScope);const t=typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document;if(ve.add("host-browser",t),ve.add("host-node",!(typeof ma.process!="object"||!ma.process.versions?.node||!ma.process.versions.v8)),ve.add("dom",t),ve("host-browser")){const e=navigator,i=e.userAgent,r=e.appVersion,n=parseFloat(r);if(ve.add("wp",parseFloat(i.split("Windows Phone")[1])||void 0),ve.add("msapp",parseFloat(i.split("MSAppHost/")[1])||void 0),ve.add("khtml",r.includes("Konqueror")?n:void 0),ve.add("edge",parseFloat(i.split("Edge/")[1])||void 0),ve.add("opr",parseFloat(i.split("OPR/")[1])||void 0),ve.add("webkit",!ve("wp")&&!ve("edge")&&parseFloat(i.split("WebKit/")[1])||void 0),ve.add("chrome",!ve("edge")&&!ve("opr")&&parseFloat(i.split("Chrome/")[1])||void 0),ve.add("android",!ve("wp")&&parseFloat(i.split("Android ")[1])||void 0),ve.add("safari",!r.includes("Safari")||ve("wp")||ve("chrome")||ve("android")||ve("edge")||ve("opr")?void 0:parseFloat(r.split("Version/")[1])),ve.add("mac",r.includes("Macintosh")),!ve("wp")&&/(iPhone|iPod|iPad)/.test(i)){const s=RegExp.$1.replace(/P/,"p"),a=/OS ([\d_]+)/.test(i)?RegExp.$1:"1",o=parseFloat(a.replace(/_/,".").replaceAll("_",""));ve.add(s,o),ve.add("ios",o)}ve("webkit")||(!i.includes("Gecko")||ve("wp")||ve("khtml")||ve("edge")||ve.add("mozilla",n),ve("mozilla")&&ve.add("ff",parseFloat(i.split("Firefox/")[1]||i.split("Minefield/")[1])||void 0))}})(),(()=>{if(ma.navigator){const t=navigator.userAgent,e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(t),i=/iPhone/i.test(t);e&&ve.add("esri-mobile",e),i&&ve.add("esri-iPhone",i),ve.add("esri-geolocation",!!navigator.geolocation)}ve.add("esri-wasm","WebAssembly"in ma),ve.add("esri-performance-mode-frames-between-render",20),ve.add("esri-force-performance-mode",!1),ve.add("esri-shared-array-buffer",()=>{const t="SharedArrayBuffer"in ma,e=ma.crossOriginIsolated===!1;return t&&!e}),ve.add("wasm-simd",()=>{const t=[0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11];return WebAssembly.validate(new Uint8Array(t))}),ve.add("esri-atomics","Atomics"in ma),ve.add("esri-workers","Worker"in ma),ve.add("web-feat:cache","caches"in ma),ve.add("esri-workers-arraybuffer-transfer",!ve("safari")||Number(ve("safari"))>=12),ve.add("workers-pool-size",8),ve.add("featurelayer-simplify-thresholds",[.5,.5,.5,.5]),ve.add("featurelayer-simplify-payload-size-factors",[1,1,4]),ve.add("featurelayer-fast-triangulation-enabled",!0),ve.add("featurelayer-animation-enabled",!0),ve.add("featurelayer-snapshot-enabled",!0),ve.add("featurelayer-snapshot-initial-tolerance",0),ve.add("featurelayer-snapshot-point-min-threshold",8e4),ve.add("featurelayer-snapshot-point-max-threshold",4e5),ve.add("featurelayer-snapshot-multipoint-min-threshold",2e4),ve.add("featurelayer-snapshot-multipoint-max-threshold",1e5),ve.add("featurelayer-snapshot-polygon-min-threshold",2e3),ve.add("featurelayer-snapshot-polygon-max-threshold",2e3),ve.add("featurelayer-snapshot-polyline-min-threshold",2e3),ve.add("featurelayer-snapshot-polyline-max-threshold",2e3),ve.add("featurelayer-snapshot-max-vertex-count",25e4),ve.add("featurelayer-snapshot-non-hosted-exceedslimit-enabled",!0),ve.add("featurelayer-snapshot-concurrency",4),ve.add("featurelayer-snapshot-coverage",.1),ve.add("featurelayer-query-max-depth",4),ve.add("featurelayer-query-pausing-enabled",!1),ve.add("featurelayer-query-tile-concurrency",4),ve.add("featurelayer-query-tile-max-features",6e5),ve.add("featurelayer-advanced-symbols",!1),ve.add("featurelayer-pbf",!0),ve.add("featurelayer-pbf-statistics",!1),ve.add("feature-layers-workers",!0),ve.add("feature-polyline-generalization-factor",1),ve.add("parquetlayer-full-query-feature-count",2e4),ve.add("parquetlayer-hittest-max-feature-count",1),ve.add("parquetlayer-persistence-enabled",!1),ve.add("mapview-transitions-duration",200),ve.add("mapview-essential-goto-duration",200),ve.add("mapview-srswitch-adjust-rotation-scale-threshold",24e6),ve.add("mapserver-pbf-version-support",10.81),ve.add("mapservice-popup-identify-max-tolerance",20),ve.add("request-queue-concurrency-hosted",16),ve.add("request-queue-concurrency-non-hosted",4),ve.add("curve-densification-coarse-segments",128),ve.add("curve-densification-max-segments",2e3),ve.add("curve-densification-min-segments",3),ve.add("curve-densification-pixel-deviation",.5),ve.add("view-readyState-waiting-delay",1e3),ve.add("gradient-depth-bias",.01),ve.add("gradient-depth-epsilon",1e-8),ve.add("enable-feature:esri-compress-textures",!0),ve("host-webworker")||ve("host-browser")&&(ve.add("esri-csp-restrictions",()=>{try{new Function}catch{return!0}return!1}),ve.add("esri-url-encodes-apostrophe",()=>{const t=window.document.createElement("a");return t.href="?'",t.href.includes("?%27")}))})();const zte=new WeakMap;function HIe(t,e,i=!1){const r=` DEPRECATED - ${e}`;if(!i)return void t.warn(r);let n=zte.get(t);n||(n=new Set,zte.set(t,n)),n.has(e)||(n.add(e),t.warn(r))}const eR="https://www.esriurl.com/";function GIe(t,e,i,r={}){ve("esri-deprecation-warnings")&&wv(t,`This widget is deprecated. Use the ${e} component instead.`,{see:[`${e} component reference: ${eR}${i}/`,`Esri's move to web components: ${eR}components-transition-plan/`],replacement:`<${i}></${i}>`,warnOnce:!0,...r})}function qIe(t,e,i,r={}){ve("esri-deprecation-warnings")&&wv(t,`This view model is deprecated. Use the ${e} component directly instead.`,{see:[`${e} component reference: ${eR}${i}/`,`Esri's move to web components: ${eR}components-transition-plan/`],replacement:`<${i}></${i}>`,warnOnce:!0,...r})}function WIe(t,e,i={}){ve("esri-deprecation-warnings")&&wv(t,`Module: ${e}`,i)}function Mhe(t,e,i={}){if(ve("esri-deprecation-warnings")){const{moduleName:r}=i;wv(t,`Function: ${(r?r+"::":"")+e+"()"}`,i)}}function t8(t,e,i={}){if(ve("esri-deprecation-warnings")){const{moduleName:r}=i;wv(t,`Property: ${(r?r+"::":"")+e}`,i)}}function YIe(t,e,i={}){ve("esri-deprecation-warnings")&&wv(t,`Multiple argument constructor: ${e}`,{warnOnce:!0,replacement:`new ${e}({ <your properties here> })`,...i})}function wv(t,e,i={}){if(ve("esri-deprecation-warnings")){const{replacement:r,version:n,see:s,warnOnce:a}=i;let o=e;if(r&&(o+=`
	 Replacement: ${r}`),n&&(o+=`
	 Version: ${n}`),s)if(Array.isArray(s)){o+=`
	 See for more details:`;for(const l of s)o+=`
		${l}`}else o+=`
	 See ${s} for more details.`;HIe(t,o,a)}}function hkt(t){const e=[];return function*(){yield*e;let i,r=e.length;for(;!(i=t.next()).done;)for(e.push(i.value),yield i.value;++r<e.length;)yield e[r]}}function ZIe(t,e){for(const i of t)if(i!=null&&e(i))return i}function tR(t){return t!=null&&typeof t[Symbol.iterator]=="function"}let wT=class{constructor(){this._groups=new Map}destroy(){this.removeAll()}get size(){let e=0;return this._groups.forEach(i=>{e+=i.length}),e}add(e,i){if(tR(e)){const r=this._getOrCreateGroup(i);for(const n of e)Nte(n)&&r.push(n)}else Nte(e)&&this._getOrCreateGroup(i).push(e);return this}forEach(e,i){if(typeof e=="function")this._groups.forEach(r=>r.forEach(e));else{const r=this._getGroup(e);r&&i&&r.forEach(i)}}has(e){return this._groups.has(qP(e))}remove(e){if(typeof e!="string"&&tR(e)){for(const i of e)this.remove(i);return this}return this.has(e)?(Fte(this._getGroup(e)),this._groups.delete(qP(e)),this):this}removeAll(){return this._groups.forEach(Fte),this._groups.clear(),this}removeReference(e){return this._groups.delete(e),this}_getOrCreateGroup(e){if(this.has(e))return this._getGroup(e);const i=[];return this._groups.set(qP(e),i),i}_getGroup(e){return this._groups.get(qP(e))}};function qP(t){return t||"_default_"}function Fte(t){for(const e of t)e instanceof wT?e.removeAll():e.remove()}function Nte(t){return t!=null&&(!!t.remove||t instanceof wT)}function fkt(t){}function XIe(t){return()=>t}function mkt(t){return t}var dl;let LW=(dl=class{constructor(e=1){this._seed=e}set seed(e){this._seed=e??Math.random()*dl._m}getInt(){return this._seed=(dl._a*this._seed+dl._c)%dl._m,this._seed}getFloat(){return this.getInt()/(dl._m-1)}getIntRange(e,i){return Math.round(this.getFloatRange(e,i))}getFloatRange(e,i){const r=i-e;return e+this.getInt()/dl._m*r}},dl._m=2147483647,dl._a=48271,dl._c=0,dl);const JIe=1.5,gkt=1/JIe,ykt=.5;function Ahe(t){return t}function KIe(t,e=Ahe){if(!t||t.length===0)return;let i=t[0],r=e(i);for(let n=1;n<t.length;++n){const s=t[n],a=Number(e(s));a>r&&(r=a,i=s)}return i}function vkt(t,e=Ahe){return KIe(t,i=>-e(i))}function QIe(t,e){return e?t.filter((i,r,n)=>n.findIndex(e.bind(null,i))===r):Array.from(new Set(t))}function eMe(t,e,i,r,n,s,a){if(t==null&&r==null)return!0;e=Math.max(0,e),n=Math.max(0,n),i=Math.max(0,i<0?(t?.length??0)+i:i),s=Math.max(0,s<0?(r?.length??0)+s:s);const o=i-e;if(t==null||r==null||o!==s-n)return!1;if(a){for(let l=0;l<o;l++)if(!a(t[e+l],r[n+l]))return!1}else for(let l=0;l<o;l++)if(t[e+l]!==r[n+l])return!1;return!0}function wF(t,e,i){return eMe(t,0,t?.length??0,e,0,e?.length??0,i)}function bkt(){return(t,e)=>{if(t==null&&e==null)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0}}function jte(t,e,i){let r,n;return i?(r=e.filter(s=>!t.some(a=>i(a,s))),n=t.filter(s=>!e.some(a=>i(a,s)))):(r=e.filter(s=>!t.includes(s)),n=t.filter(s=>!e.includes(s))),{added:r,removed:n}}function wkt(t){return t&&typeof t.length=="number"}function _kt(t,e){const i=t.length;if(i===0)return[];const r=[];for(let n=0;n<i;n+=e)r.push(t.slice(n,n+e));return r}let Phe=class{constructor(){this.last=0}};const Ohe=new Phe;function i8(t,e,i,r){r=r||Ohe;const n=Math.max(0,r.last-10);for(let a=n;a<i;++a)if(t[a]===e)return r.last=a,a;const s=Math.min(n,i);for(let a=0;a<s;++a)if(t[a]===e)return r.last=a,a;return-1}function r8(t,e,i,r){const n=t.length,s=i8(t,e,n,r);if(s!==-1)return t[s]=t[n-1],t.pop(),e}const Uu=new Set;function tMe(t,e,i=t.length,r=e.length,n,s){if(r===0||i===0)return i;Uu.clear();for(let o=0;o<r;++o)Uu.add(e[o]);n=n||Ohe;const a=Math.max(0,n.last-10);for(let o=a;o<i;++o)if(Uu.has(t[o])&&(s?.push(t[o]),Uu.delete(t[o]),t[o]=t[i-1],--i,--o,Uu.size===0||i===0))return Uu.clear(),i;for(let o=0;o<a;++o)if(Uu.has(t[o])&&(s?.push(t[o]),Uu.delete(t[o]),t[o]=t[i-1],--i,--o,Uu.size===0||i===0))return Uu.clear(),i;return Uu.clear(),i}function iMe(t,e){let i=0;for(let r=0;r<t.length;++r){const n=t[r];e(n,r)&&(t[i]=n,i++)}return t.length=i,t}function Skt(t,e,i){const r=t.length;if(e>=r)return t.slice();const n=DW(i),s=new Set,a=[];for(;a.length<e;){const o=Math.floor(n()*r);s.has(o)||(s.add(o),a.push(t[o]))}return a}function DW(t){return t?(Vte.seed=t,()=>Vte.getFloat()):Math.random}const Vte=new LW;function Lhe(t,e){if(!t)return t;const i=DW(e);for(let r=t.length-1;r>0;r--){const n=Math.floor(i()*(r+1)),s=t[r];t[r]=t[n],t[n]=s}return t}function RW(t,e){const i=t.indexOf(e);return i!==-1?(t.splice(i,1),e):null}function un(t,e){return t!=null}const $kt=[];function Tkt(t){return t instanceof ArrayBuffer}function zW(t){return t?.constructor?.name==="Int8Array"}function Dhe(t){return t?.constructor?.name==="Uint8Array"}function Rhe(t){return t?.constructor?.name==="Uint8ClampedArray"}function FW(t){return t?.constructor?.name==="Int16Array"}function zhe(t){return t?.constructor?.name==="Uint16Array"}function NW(t){return t?.constructor?.name==="Int32Array"}function Fhe(t){return t?.constructor?.name==="Uint32Array"}function rMe(t){return t?.constructor?.name==="Float16Array"}function _F(t){return t?.constructor?.name==="Float32Array"}function xF(t){return t?.constructor?.name==="Float64Array"}function Nhe(t){return"buffer"in t}const jhe=1024;function kkt(t){return xF(t)||_F(t)||NW(t)||FW(t)||zW(t)}function Ekt(t){return xF(t)||_F(t)}function Ckt(t){return xF(t)?179769e303:rMe(t)?65504:_F(t)?3402823e32:Fhe(t)?4294967295:zhe(t)?65535:Dhe(t)||Rhe(t)?255:NW(t)?2147483647:FW(t)?32767:zW(t)?127:256}const Ikt=-32768,Mkt=-2147483648;function Akt(t){return t}function jW(t,e){let i;for(i in t)t.hasOwnProperty(i)&&t[i]===void 0&&delete t[i];return t}function de(t){if(!t||typeof t!="object"||typeof t=="function")return t;const e=Uhe(t);if(e!=null)return e;if(oC(t))return t.clone();if(Vhe(t))return t.map(de);if(Bhe(t))throw new Error("Trying to clone an unclonable Accessor instance");const i={};for(const r of Object.getOwnPropertyNames(t))i[r]=de(t[r]);return i}function n8(t,e){if(!t||typeof t!="object"||typeof t=="function"||"HTMLElement"in globalThis&&t instanceof HTMLElement)return t;const i=Uhe(t);if(i!=null)return i;if(Vhe(t)){let n=!0;const s=t.map(a=>{const o=n8(a,e);return a!=null&&o==null&&(n=!1),o});return n?s:null}if(oC(t))return t.clone(e);if(t instanceof File||t instanceof Blob)return t;if(Bhe(t))return null;const r=new(Object.getPrototypeOf(t)).constructor;for(const n of Object.getOwnPropertyNames(t)){const s=t[n],a=n8(s);if(s!=null&&a==null)return null;r[n]=a}return r}function oC(t){return typeof t.clone=="function"}function Vhe(t){return typeof t.map=="function"&&typeof t.forEach=="function"}function Bhe(t){return typeof t.notifyChange=="function"&&typeof t.watch=="function"}function Bte(t){if(Object.prototype.toString.call(t)!=="[object Object]")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function Uhe(t){if(zW(t)||Dhe(t)||Rhe(t)||FW(t)||zhe(t)||NW(t)||Fhe(t)||_F(t)||xF(t))return t.slice();if(t instanceof Date)return new Date(t);if(t instanceof ArrayBuffer)return t.slice(0,t.byteLength);if(t instanceof Map){const e=new Map;for(const[i,r]of t)e.set(i,de(r));return e}if(t instanceof Set){const e=new Set;for(const i of t)e.add(de(i));return e}return null}function VW(t,e){return t===e||typeof t=="number"&&isNaN(t)&&typeof e=="number"&&isNaN(e)||typeof t?.getTime=="function"&&typeof e?.getTime=="function"&&t.getTime()===e.getTime()||!1}function Hhe(t,e){return t===e||(t==null||typeof t=="string"?t===e:typeof t=="number"?t===e||typeof e=="number"&&isNaN(t)&&isNaN(e):t instanceof Date?e instanceof Date&&t.getTime()===e.getTime():Array.isArray(t)?Array.isArray(e)&&wF(t,e):t instanceof Set?e instanceof Set&&sMe(t,e):t instanceof Map?e instanceof Map&&aMe(t,e):!!Bte(t)&&Bte(e)&&nMe(t,e))}function nMe(t,e){if(t===null||e===null)return!1;const i=Object.keys(t);if(e===null||Object.keys(e).length!==i.length)return!1;for(const r of i)if(t[r]!==e[r]||!Object.prototype.hasOwnProperty.call(e,r))return!1;return!0}function sMe(t,e){if(t.size!==e.size)return!1;for(const i of t)if(!e.has(i))return!1;return!0}function aMe(t,e){if(t.size!==e.size)return!1;for(const[i,r]of t){const n=e.get(i);if(n!==r||n===void 0&&!e.has(i))return!1}return!0}function BW(t,e,i=!1){return qhe(t,e,i)}function Mm(t,e){if(e!=null)return e[t]||Ghe(t.split("."),!1,e)}function Bn(t,e,i){const r=t.split("."),n=r.pop(),s=Ghe(r,!0,i);s&&n&&(s[n]=e)}function Ute(t,e){if(t==null&&e==null)return!1;if(t==null||e==null)return!0;if(typeof t=="object"){if(Array.isArray(t)){const i=e;if(t.length!==i.length)return!0;for(let r=0;r<t.length;r++)if(Ute(t[r],i[r]))return!0;return!1}if(Object.keys(t).length!==Object.keys(e).length)return!0;for(const i in t)if(Ute(t[i],e[i]))return!0;return!1}return t!==e}function Ghe(t,e,i){let r=i;for(const n of t){if(r==null)return;if(!(n in r)){if(!e)return;r[n]={}}r=r[n]}return r}function qhe(t,e,i){return e?Object.keys(e).reduce((r,n)=>{if(n==="__proto__")return r;let s=r[n],a=e[n];return s===a?r:s===void 0?(r[n]=de(a),r):(Array.isArray(a)||Array.isArray(r)?(s=s?Array.isArray(s)?r[n]=s.slice():r[n]=[s]:r[n]=[],a&&(Array.isArray(a)||(a=[a]),i?a.forEach(o=>{s.includes(o)||s.push(o)}):r[n]=a.slice())):a&&typeof a=="object"?r[n]=qhe(s,a,i):r.hasOwnProperty(n)&&!e.hasOwnProperty(n)||(r[n]=a),r)},t||{}):t}function Pkt(t,e){for(const i of Object.entries(t))if(e===i[1])return i[0]}function SF(t,e){return Object.values(t).includes(e)}const yi={apiKey:void 0,apiKeys:{scopes:[]},applicationName:"",applicationUrl:globalThis.location?.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",userPrivilegesApplied:!0,portalUrl:"https://www.arcgis.com",respectPrefersReducedMotion:!0,routeServiceUrl:"https://route-api.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{crossOriginNoCorsDomains:null,httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],internalInterceptors:[],maxUrlLength:2e3,priority:"high",proxyRules:[],proxyUrl:null,timeout:62e3,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};if(globalThis.esriConfig&&(BW(yi,globalThis.esriConfig,!0),delete yi.has),!yi.assetsPath){{const t="4.34";yi.assetsPath=`https://js.arcgis.com/${t}/@arcgis/core/assets`}yi.defaultAssetsPath=yi.assetsPath}const oMe=/\{([^}]+)\}/g;function Hte(t){return t??""}function Dv(t,e){return e?t.replaceAll(oMe,typeof e=="object"?(i,r)=>Hte(Mm(r,e)):(i,r)=>Hte(e(r))):t}function Okt(t,e){return t.replaceAll(/([.$?*|{}()[\]\\/+\-^])/g,i=>e?.includes(i)?i:`\\${i}`)}function Whe(t){let e=0;for(let i=0;i<t.length;i++)e=(e<<5)-e+t.charCodeAt(i),e|=0;return e}let Gte;function lMe(t){return Gte??=new DOMParser,Gte.parseFromString(t||"","text/html").body.innerText||""}function Lkt(t,e){return new RegExp(`{${e}}`,"ig").test(t)}function Dkt(t,...e){let i=t[0];for(let r=0;r<e.length;++r)i+=e[r]+t[r+1];return i}const qte={info:0,warn:1,error:2,none:3};var ts;let $e=(ts=class{constructor(e){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},e.level!=null&&(this.level=e.level),e.writer!=null&&(this.writer=e.writer),this._module=e.module,ts._loggers.set(this.module,this);const i=this.module.lastIndexOf(".");i!==-1&&(this._parent=ts.getLogger(this.module.slice(0,i)))}get module(){return this._module}get parent(){return this._parent}error(...e){this._log("error","always",...e)}warn(...e){this._log("warn","always",...e)}info(...e){this._log("info","always",...e)}errorOnce(...e){this._log("error","once",...e)}warnOnce(...e){this._log("warn","once",...e)}infoOnce(...e){this._log("info","once",...e)}errorOncePerTick(...e){this._log("error","oncePerTick",...e)}warnOncePerTick(...e){this._log("warn","oncePerTick",...e)}infoOncePerTick(...e){this._log("info","oncePerTick",...e)}get test(){}static get test(){}static getLogger(e){return e=typeof e!="string"?e.declaredClass:e,ts._loggers.get(e)||new ts({module:e})}_log(e,i,...r){if(this._matchLevel(e)){if(i!=="always"&&!ts._throttlingDisabled){const n=uMe(r),s=this._loggedMessages[e].get(n);if(i==="once"&&s!=null||i==="oncePerTick"&&s&&s>=ts._tickCounter)return;this._loggedMessages[e].set(n,ts._tickCounter),ts._scheduleTickCounterIncrement()}for(const n of yi.log.interceptors)if(n(e,this.module,...r))return;this._inheritedWriter()(e,this.module,...r)}}_parentWithMember(e,i){let r=this;for(;r!=null;){const n=r[e];if(n!=null)return n;r=r.parent}return i}_inheritedWriter(){return this._parentWithMember("writer",cMe)}_matchLevel(e){const i=yi.log.level||"warn";return qte[this._parentWithMember("level",i)]<=qte[e]}static _scheduleTickCounterIncrement(){ts._tickCounterScheduled||(ts._tickCounterScheduled=!0,Promise.resolve().then(()=>{ts._tickCounter++,ts._tickCounterScheduled=!1}))}},ts._loggers=new Map,ts._tickCounter=0,ts._tickCounterScheduled=!1,ts._throttlingDisabled=!1,ts);function cMe(t,e,...i){console[t](`[${e}]`,...i)}function uMe(...t){return Whe(JSON.stringify(t,(i,r)=>typeof r!="object"||Array.isArray(r)?r:"[Object]"))}function MM(t,e){if(t==null)throw new Error(e??"value is None")}function Ir(t){return t?.destroy(),null}function Rkt(t){return t?.dispose(),null}function Rr(t){return t?.remove(),null}function Nw(t){return t?.abort(),null}function zkt(t){return t?.release(),null}function dMe(t,e,i){return t!=null&&e!=null?i!=null?i(t,e):t.equals(e):t===e}function iR(t,e){let i;return t.some((r,n)=>(i=e(r,n),i!=null)),i??void 0}const Yhe=Symbol("Accessor-beforeDestroy"),hMe={remove:()=>{}};function Si(t){return t?{remove(){t&&(t(),t=void 0)}}:hMe}function Zhe(t){t.forEach(e=>e?.remove())}function Fkt(t){Zhe(t),t.length=0}function c_(t){return Si(()=>Zhe(t))}function Nkt(t){return Si(()=>t()?.remove())}function pMe(t){return Si(()=>t?.abort())}function jkt(t){return Si(t!=null?()=>t.destroy():void 0)}function fMe(t){return typeof t=="object"&&!!t&&"remove"in t&&typeof t.remove=="function"}function Vkt(t){fMe(t)&&t.remove()}function Bkt(t){return{[Symbol.dispose](){t.remove()}}}function mo(t){return t.__accessor__??null}function mMe(t,e){return t?.metadata?.[e]!=null}function t3(t,e,i){return i?rR(t,e,{policy:i,path:""}):rR(t,e,null)}function rR(t,e,i){return e?Object.keys(e).reduce((r,n)=>{const s=n;if(s==="__proto__")return r;let a=null,o="merge";if(i&&(a=i.path?`${i.path}.${n}`:n,o=i.policy(a)),o==="replace"||o==="replace-arrays"&&Array.isArray(r[s]))return r[s]=e[s],r;if(r[s]===void 0)return r[s]=de(e[s]),r;let l=r[s],c=e[s];if(l===c)return r;if(Array.isArray(c)||Array.isArray(r))l=l?Array.isArray(l)?r[s]=l.slice():r[s]=[l]:r[s]=[],c&&(Array.isArray(c)||(c=[c]),c.forEach(h=>{l.includes(h)||l.push(h)}));else if(c&&typeof c=="object")if(i){const h=i.path;i.path=a,r[s]=rR(l,c,i),i.path=h}else r[s]=rR(l,c,null);else r.hasOwnProperty(n)&&!e.hasOwnProperty(n)||(r[s]=c);return r},t||{}):t}function Xhe(t){return Array.isArray(t)?t:t.split(".")}function Wte(t){return t.includes(",")?t.split(",").map(e=>e.trim()):[t.trim()]}function gMe(t){if(Array.isArray(t)){const e=[];for(const i of t)e.push(...Wte(i));return e}return Wte(t)}function Jhe(t,e,i,r){const n=gMe(e);if(n.length!==1){const s=n.map(a=>r(t,a,i));return c_(s)}return r(t,n[0],i)}function Khe(t,e){const i=t.endsWith("?")?t.slice(0,-1):t;if(e.getItemAt!=null||Array.isArray(e)){const n=parseInt(i,10);if(!isNaN(n))return Array.isArray(e)?e[n]:e.at(n)}const r=mo(e);return mMe(r,i)?r.get(i):e[i]}function Qhe(t,e,i){if(t==null)return t;const r=Khe(e[i],t);return!r&&i<e.length-1?void 0:i===e.length-1?r:Qhe(r,e,i+1)}function AM(t,e,i=0){return typeof e!="string"||e.includes(".")?Qhe(t,Xhe(e),i):Khe(e,t)}function co(t,e){return AM(t,e)}function Yte(t,e){return AM(e,t)!==void 0}const fc={INITIALIZING:0,CONSTRUCTING:1,CONSTRUCTED:2,DESTROYING:3,DESTROYED:4};function _T(t){let e=t.constructor.__accessorMetadata__;const i=Object.prototype.hasOwnProperty.call(t.constructor,"__accessorMetadata__");if(e){if(!i){e=Object.create(e);for(const r in e)e[r]=de(e[r]);Object.defineProperty(t.constructor,"__accessorMetadata__",{value:e,enumerable:!1,configurable:!0,writable:!0})}}else e={},Object.defineProperty(t.constructor,"__accessorMetadata__",{value:e,enumerable:!1,configurable:!0,writable:!0});return t.constructor.__accessorMetadata__}function PM(t,e){const i=_T(t);let r=i[e];return r||(r=i[e]={}),r}function yMe(t,e){return t3(t,e,bMe)}const vMe=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function bMe(t){return vMe.test(t)?"replace":"merge"}function wMe(t){return t?.release&&typeof t.release=="function"}function _Me(t){return t?.acquire&&typeof t.acquire=="function"}var yv;let u_=(yv=class{constructor(e,i,r,n=1,s=0){this._creator=e,this._acquireFunction=i,this._releaseFunction=r,this.allocationSize=n,this._pool=new Array(s),this._initialSize=s;for(let a=0;a<s;a++)this._pool[a]=this._creator();this.allocationSize=Math.max(n,1)}destroy(){this.prune(0)}acquire(...e){let i;if(yv.test.disabled)i=this._creator();else{if(this._pool.length===0){const r=this.allocationSize;for(let n=0;n<r;n++)this._pool[n]=this._creator()}i=this._pool.pop()}return this._acquireFunction?this._acquireFunction(i,...e):_Me(i)&&i.acquire(...e),i}release(e){e&&!yv.test.disabled&&(this._releaseFunction?this._releaseFunction(e):wMe(e)&&e.release(),this._pool.push(e))}prune(e=this._initialSize){if(!(e>=this._pool.length)){for(let i=e;i<this._pool.length;++i){const r=this._pool[i];this._dispose(r)}this._pool.length=e}}_dispose(e){e.dispose&&typeof e.dispose=="function"&&e.dispose()}},yv.test={disabled:!!ve("esri-tests-disable-memory-pools")},yv),xMe=class{constructor(e,i){this._observers=e,this._observer=i}remove(){RW(this._observers,this._observer)}},epe=class{constructor(){this._observers=null,this.destroyed=!1}observe(e){if(this.destroyed||e.destroyed)return SMe;this._observers==null&&(this._observers=[]);const i=this._observers;let r=!1,n=!1;const s=i.length;for(let a=0;a<s;++a){const o=i[a];if(o.destroyed)n=!0;else if(o===e){r=!0;break}}return r||(i.push(e),n&&this._removeDestroyedObservers()),new xMe(i,e)}_removeDestroyedObservers(){const e=this._observers;if(!e||e.length===0)return;const i=e.length;let r=0;for(let n=0;n<i;++n){for(;n+r<i&&e[n+r].destroyed;)++r;if(r>0){if(!(n+r<i))break;e[n]=e[n+r]}}e.length=i-r}destroy(){if(this.destroyed)return;this.destroyed=!0;const e=this._observers;if(e!=null){for(const i of e)i.onCommitted();this._observers=null}}};const SMe=Si(),Qr={Dirty:1,Overridden:2,Computing:4,NonNullable:8,HasDefaultValue:16,DepTrackingInitialized:32,AutoTracked:64,ExplicitlyTracking:128};let $F=class{constructor(e){this.accessed=void 0,this._handles=void 0,this._observer=e}destroy(){this.accessed?.clear(),this.clear()}onAccessed(e){this._observer!=null&&e!==this._observer&&(this.accessed==null&&(this.accessed=new Set),this.accessed.add(e))}onTrackingEnd(){this._observer!=null&&(this.clear(),this.accessed!=null&&(this._handles==null&&(this._handles=[]),this.accessed.forEach(e=>{this._handles.push(e.observe(this._observer))}),this.accessed.clear()))}clear(){if(this._handles!=null){for(let e=0;e<this._handles.length;++e)this._handles[e].remove();this._handles.length=0}}};const nR=new $F,q2=[];let lC=nR;function Rt(t){lC.onAccessed(t)}let i3=!1,r3=!1;function Lp(t,e,i){if(i3)return UW(t,e,i);let r=null;return tpe(t),r=e.call(i),ipe(),r}function $Me(t,e){return Lp(nR,t,e)}function UW(t,e,i){const r=i3;i3=!0,tpe(t);let n=null;try{n=e.call(i)}catch(s){r3&&$e.getLogger("esri.core.accessorSupport.tracking").error(s)}return ipe(),i3=r,n}function tpe(t){lC=t,q2.push(t)}function ipe(){const t=q2.length;if(t>1){const e=q2.pop();lC=q2[t-2],e.onTrackingEnd()}else if(t===1){const e=q2.pop();lC=nR,e.onTrackingEnd()}else lC=nR}function rpe(t,e){if(e.flags&Qr.DepTrackingInitialized)return;e.flags|=Qr.DepTrackingInitialized;const i=r3;r3=!1,e.flags&Qr.AutoTracked?UW(e.trackingTarget,e.metadata.get,t):npe(t,e),r3=i}const TMe=[];function npe(t,e){e.flags&Qr.ExplicitlyTracking||(e.flags|=Qr.ExplicitlyTracking,UW(e.trackingTarget,()=>{const i=e.metadata.dependsOn||TMe;for(const r of i)if(typeof r!="string"||r.includes(".")){const n=Xhe(r);for(let s=0,a=t;s<n.length&&a!=null&&typeof a=="object";++s)a=Zte(a,n[s],s!==n.length-1)}else Zte(t,r,!1)}),e.flags&=-129)}function Zte(t,e,i){const r=e.endsWith("?")?e.slice(0,-1):e;if(t.getItemAt!=null||Array.isArray(t)){const s=parseInt(r,10);if(!isNaN(s))return Array.isArray(t)?t[s]:t.at(s)}const n=mo(t);if(n){const s=n.propertiesByName.get(r);s&&(Rt(s),rpe(t,s))}return i?t[r]:void 0}let Xte=class extends epe{constructor(e,i){super(),this.propertyName=e,this.metadata=i,this.trackingTarget=new $F(this),this.flags=0,this.flags=Qr.Dirty|(i.nonNullable?Qr.NonNullable:0)|(i.hasOwnProperty("value")?Qr.HasDefaultValue:0)|(i.get===void 0?Qr.DepTrackingInitialized:0)|(i.dependsOn===void 0?Qr.AutoTracked:0)}destroy(){this.flags&Qr.Dirty&&this.onCommitted(),super.destroy(),this.trackingTarget.destroy()}getComputed(e){e.mutable&&Rt(this);const i=e.store,r=this.propertyName,n=this.flags,s=i.get(r);if(n&Qr.Computing||~n&Qr.Dirty&&i.has(r))return s;this.flags|=Qr.Computing;const a=e.host;let o;n&Qr.AutoTracked?o=Lp(this.trackingTarget,this.metadata.get,a):(npe(a,this),o=this.metadata.get.call(a)),this.flags|=Qr.DepTrackingInitialized,i.set(r,o,1);const l=i.get(r);return l===s?this.flags&=-2:$Me(this.commit,this),this.flags&=-5,l}notifyChange(){this.onInvalidated(),this.onCommitted()}invalidate(){this.onInvalidated()}commit(){this.flags&=-2,this.onCommitted()}onInvalidated(){~this.flags&Qr.Overridden&&(this.flags|=Qr.Dirty);const e=this._observers;if(e&&e.length>0)for(const i of e)i.onInvalidated()}onCommitted(){const e=this._observers;if(e&&e.length>0){const i=e.slice();for(const r of i)r.onCommitted()}}};const s8=8;function Am(t){switch(t){case"defaults":return 0;case"service":return 2;case"portal-item":return 3;case"web-scene":return 4;case"web-map":return 5;case"link-chart":return 6;case"user":return 7;default:return null}}function uI(t){switch(t){case 0:return"defaults";case 2:return"service";case 3:return"portal-item";case 4:return"web-scene";case 5:return"web-map";case 6:return"link-chart";case 7:return"user"}}function kMe(t){return uI(t)}let EMe=class spe{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(e){const i=new spe;return this._values.forEach((r,n)=>{e&&e.has(n)||i.set(n,de(r))}),i}get(e){return this._values.get(e)}originOf(){return 7}keys(){return[...this._values.keys()]}set(e,i){this._values.set(e,i)}delete(e){this._values.delete(e)}has(e){return this._values.has(e)}isAtOrigin(e,i){return this.has(e)}isBelowOrigin(e,i){return!this.has(e)}forEach(e){this._values.forEach(e)}};function v1(t,e,i){return t!==void 0}function Jte(t,e,i,r){return t!==void 0&&(!(i==null&&t.flags&Qr.NonNullable)||(r.lifecycle,!1))}let CMe=class{constructor(e){this.host=e,this.propertiesByName=new Map,this.ctorArgs=null,this.lifecycle=fc.INITIALIZING,this.store=new EMe,this.mutable=!0,this._origin=7;const i=this.host.constructor.__accessorMetadata__;for(const r in i){const n=new Xte(r,i[r]);this.propertiesByName.set(r,n)}this.metadata=i}initialize(){this.lifecycle=fc.CONSTRUCTING}constructed(){this.lifecycle=fc.CONSTRUCTED}destroy(){this.lifecycle=fc.DESTROYED,this.propertiesByName.forEach(e=>e.destroy())}get initialized(){return this.lifecycle!==fc.INITIALIZING}get(e){const i=this.propertiesByName.get(e);if(!v1(i))return;if(i.metadata.get)return i.getComputed(this);this.mutable&&Rt(i);const r=this.store;return r.has(e)?r.get(e):i.metadata.value}originOf(e){const i=this.store.originOf(e);if(i===void 0){const r=this.propertiesByName.get(e);if(r!==void 0&&r.flags&Qr.HasDefaultValue)return"defaults"}return uI(i)}has(e){return this.propertiesByName.has(e)&&this.store.has(e)}keys(){return[...this.propertiesByName.keys()]}internalGet(e){const i=this.propertiesByName.get(e);if(v1(i))return this.store.has(e)?this.store.get(e):i.metadata.value}internalSet(e,i){const r=this.propertiesByName.get(e);v1(r)&&this._internalSet(r,i)}getDependsInfo(e,i,r){const n=this.propertiesByName.get(i);if(!v1(n))return"";const s=new $F,a=Lp(s,()=>n.metadata.get?.call(e));let o=`${r}${e.declaredClass.split(".").pop()}.${i}: ${a}
`;const l=s.accessed??new Set;if(l.size===0)return o;r+="  ";for(const c of l)c instanceof Xte&&(o+=`${r}${c.propertyName}: undefined
`);return o}setAtOrigin(e,i,r){const n=this.propertiesByName.get(e);if(v1(n))return this._setAtOrigin(n,i,r)}isOverridden(e){const i=this.propertiesByName.get(e);return i!==void 0&&!!(i.flags&Qr.Overridden)}clearOrigin(e,i){const r=this.store,n=this.propertiesByName.get(e);if(!v1(n))return;const s=r.isAtOrigin(e,i)&&!(n.flags&Qr.Overridden);r.delete(e,i),s&&n.notifyChange()}clearOverride(e){const i=this.propertiesByName.get(e);i&&i.flags&Qr.Overridden&&(i.flags&=-3,i.notifyChange())}override(e,i){const r=this.propertiesByName.get(e);if(!Jte(r,e,i,this))return;const n=r.metadata.cast;if(n){const s=this._cast(n,i),{valid:a,value:o}=s;if(jV.release(s),!a)return;i=o}r.flags|=Qr.Overridden,this._internalSet(r,i)}set(e,i){const r=this.propertiesByName.get(e);if(!Jte(r,e,i,this))return;const n=r.metadata.cast;if(n){const a=this._cast(n,i),{valid:o,value:l}=a;if(jV.release(a),!o)return;i=l}const s=r.metadata.set;s?s.call(this.host,i):this._internalSet(r,i)}setDefaultOrigin(e){this._origin=Am(e)}getDefaultOrigin(){return uI(this._origin)}notifyChange(e){const i=this.propertiesByName.get(e);i!==void 0&&i.notifyChange()}invalidate(e){const i=this.propertiesByName.get(e);i!==void 0&&i.invalidate()}commit(e){const i=this.propertiesByName.get(e);i!==void 0&&i.commit()}_internalSet(e,i){const r=this.lifecycle!==fc.INITIALIZING?this._origin:0;this._setAtOrigin(e,i,r)}_setAtOrigin(e,i,r){const n=this.store,s=e.propertyName;if(n.isAtOrigin(s,r)&&VW(i,n.get(s))&&~e.flags&Qr.Overridden)return;const a=n.isBelowOrigin(s,r)||n.isAtOrigin(s,r);a&&e.invalidate(),n.set(s,i,r),a&&e.commit(),rpe(this.host,e)}_cast(e,i){const r=jV.acquire();return r.valid=!0,r.value=i,e&&(r.value=e.call(this.host,i,r)),r}},IMe=class{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}};const jV=new u_(()=>new IMe);function MMe(t,e){return t.replaceAll(/\$\{([^\s:}]*)(?::([^\s:}]+))?\}/g,(i,r)=>r===""?"$":(Mm(r,e)??"").toString())}let ape=class{constructor(e,i,r=void 0){this.name=e,this.details=r,this.message=(i&&MMe(i,r))??""}toString(){return"["+this.name+"]: "+this.message}},ee=class ope extends ape{constructor(e,i,r){super(e,i,r)}toJSON(){if(this.details!=null)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,(e,i)=>{if(i&&typeof i=="object"&&typeof i.toJSON=="function")return i;try{return de(i)}catch{return"[object]"}}))}}catch(e){throw $e.getLogger("esri.core.Error").error(e),e}return{name:this.name,message:this.message,details:this.details}}static fromJSON(e){return new ope(e.name,e.message,e.details)}};ee.prototype.type="error";function sR(t,e,i){if(t&&e)if(typeof e=="object")for(const r of Object.getOwnPropertyNames(e))sR(t,r,e[r]);else{if(e.includes(".")){const n=e.split("."),s=n.splice(-1,1)[0];return void sR(co(t,n),s,i)}const r=t.__accessor__;r!=null&&AMe(e,r),t[e]=i}}function AMe(t,e){if(ve("esri-unknown-property-errors")&&!PMe(t,e))throw new ee("set:unknown-property",OMe(t,e))}function PMe(t,e){return e.metadata[t]!=null}function OMe(t,e){return"setting unknown property '"+t+"' on instance of "+e.host.declaredClass}let LMe;function DMe(){return LMe}function RMe(t){t.length=0}let Ao=class{constructor(e=50,i=50){this._pool=new u_(()=>[],void 0,RMe,i,e)}acquire(){return this._pool.acquire()}release(e){this._pool.release(e)}prune(){this._pool.prune(0)}static acquire(){return VV.acquire()}static release(e){return VV.release(e)}static prune(){VV.prune()}};const VV=new Ao(100);let lpe=class extends u_{constructor(){super(...arguments),this._set=new Set}destroy(){super.destroy(),this._set=null}acquire(...e){const i=super.acquire(...e);return this._set.delete(i),i}release(e){e&&!this._set.has(e)&&(super.release(e),this._set.add(e))}_dispose(e){this._set.delete(e),super._dispose(e)}};const WP=[];function aR(t){WP.push(t),WP.length===1&&queueMicrotask(()=>{const e=WP.slice();WP.length=0;for(const i of e)i()})}let cC=class{constructor(e,i=30){this.name=e,this._counter=0,this._samples=new Array(i)}push(e){e!=null&&(this._samples[++this._counter%this._samples.length]=e)}set(e){e!=null&&(this._samples[this._counter%this._samples.length]=e)}get median(){return this._samples.slice().sort((e,i)=>e-i)[Math.floor(this._samples.length/2)]}get average(){return this._samples.reduce((e,i)=>e+i,0)/this._samples.length}get last(){return this._samples[this._counter%this._samples.length]}};const oR=(t,e,i,r)=>{let n=e,s=e;const a=i>>>1,o=t[n-1];for(;s<=a;){s=n<<1,s<i&&r(t[s-1],t[s])<0&&++s;const l=t[s-1];if(r(l,o)<=0)break;t[n-1]=l,n=s}t[n-1]=o},cpe=(t,e)=>t<e?-1:t>e?1:0;function zMe(t,e,i,r){i===void 0&&(i=t.length),r===void 0&&(r=cpe);for(let s=i>>>1;s>e;s--)oR(t,s,i,r);const n=e+1;for(let s=i-1;s>e;s--){const a=t[e];t[e]=t[s],t[s]=a,oR(t,n,s,r)}}function*FMe(t,e,i,r){i===void 0&&(i=t.length),r===void 0&&(r=cpe);for(let s=i>>>1;s>e;s--)oR(t,s,i,r),yield;const n=e+1;for(let s=i-1;s>e;s--){const a=t[e];t[e]=t[s],t[s]=a,oR(t,n,s,r),yield}}const NMe=1.5,jMe=1.1;let upe=class{constructor(e){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new Phe,e&&(e.initialSize&&(this.data=new Array(e.initialSize)),e.allocator&&(this._allocator=e.allocator),e.deallocator!==void 0&&(this._deallocator=e.deallocator),e.shrink&&(this._shrink=()=>Kte(this)))}toArray(){return this.data.slice(0,this.length)}filter(e){const i=new Array;for(let r=0;r<this._length;r++){const n=this.data[r];e(n)&&i.push(n)}return i}at(e){if((e=Math.trunc(e)||0)<0&&(e+=this._length),!(e<0||e>=this._length))return this.data[e]}includes(e,i){const r=this.data.indexOf(e,i);return r!==-1&&r<this.length}get length(){return this._length}set length(e){if(e>this._length){if(this._allocator){for(;this._length<e;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=e}else{if(this._deallocator)for(let i=e;i<this._length;++i)this.data[i]=this._deallocator(this.data[i]);this._length=e,this._shrink()}}clear(){this.length=0}prune(){this.clear(),this.data=[]}push(e){this.data[this._length++]=e}pushArray(e,i=e.length){for(let r=0;r<i;r++)this.data[this._length++]=e[r]}fill(e,i){for(let r=0;r<i;r++)this.data[this._length++]=e}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));const e=this.data[this._length];return++this._length,e}unshift(e){this.data.unshift(e),this._length++,Kte(this)}pop(){if(this.length===0)return;const e=this.data[this.length-1];return this.length=this.length-1,this._shrink(),e}remove(e){const i=i8(this.data,e,this.length,this._hint);if(i!==-1)return this.data.splice(i,1),this.length=this.length-1,e}removeUnordered(e){return this.removeUnorderedIndex(i8(this.data,e,this.length,this._hint))}removeUnorderedIndex(e){if(!(e>=this.length||e<0))return this.swapElements(e,this.length-1),this.pop()}removeUnorderedMany(e,i=e.length,r){this.length=tMe(this.data,e,this.length,i,this._hint,r),this._shrink()}front(){if(this.length!==0)return this.data[0]}back(){if(this.length!==0)return this.data[this.length-1]}swapElements(e,i){if(e>=this.length||i>=this.length||e===i)return;const r=this.data[e];this.data[e]=this.data[i],this.data[i]=r}sort(e){zMe(this.data,0,this.length,e)}iterableSort(e){return FMe(this.data,0,this.length,e)}some(e,i){for(let r=0;r<this.length;++r)if(e.call(i,this.data[r],r,this.data))return!0;return!1}find(e,i){const{data:r,length:n}=this;for(let s=0;s<n;++s)if(e.call(i,r[s]))return r[s]}filterInPlace(e,i){let r=0;for(let n=0;n<this._length;++n){const s=this.data[n];e.call(i,s,n,this.data)&&(this.data[n]=this.data[r],this.data[r]=s,r++)}if(this._deallocator)for(let n=r;n<this._length;n++)this.data[n]=this._deallocator(this.data[n]);return this._length=r,this._shrink(),this}forAll(e,i){const{data:r,length:n}=this;for(let s=0;s<n;++s)e.call(i,r[s],s,r)}forEach(e,i){this.data.slice(0,this.length).forEach(e,i)}map(e,i){const r=new Array(this.length);for(let n=0;n<this.length;++n)r[n]=e.call(i,this.data[n],n,this.data);return r}reduce(e,i){let r=i;for(let n=0;n<this.length;++n)r=e(r,this.data[n],n,this.data);return r}has(e){const i=this.length,r=this.data;for(let n=0;n<i;++n)if(r[n]===e)return!0;return!1}*[Symbol.iterator](){for(let e=0;e<this.length;e++)yield this.data[e]}};function Kte(t){t.data.length>NMe*t.length&&(t.data.length=Math.floor(t.length*jMe))}function VMe(t){return{setTimeout:(e,i)=>{const r=t.setTimeout(e,i);return Si(()=>t.clearTimeout(r))}}}const xT=VMe(globalThis);function TF(t){return BMe(t)||dpe(t)}function BMe(t){return t!=null&&typeof t=="object"&&"on"in t&&typeof t.on=="function"}function dpe(t){return t!=null&&typeof t=="object"&&"addEventListener"in t&&typeof t.addEventListener=="function"}function zm(t,e,i){if(!TF(t))throw new TypeError("target is not a Evented or EventTarget object");return dpe(t)?UMe(t,e,i):t.on(e,i)}function UMe(t,e,i,r){if(Array.isArray(e)){const n=e.slice();for(const s of n)t.addEventListener(s,i,r);return Si(()=>{for(const s of n)t.removeEventListener(s,i,r)})}return t.addEventListener(e,i,r),Si(()=>t.removeEventListener(e,i,r))}function hpe(t,e,i){if(!TF(t))throw new TypeError("target is not a Evented or EventTarget object");if("once"in t)return t.once(e,i);const r=zm(t,e,n=>{r.remove(),i.call(t,n)});return r}function Hi(t="Aborted"){return new ee("AbortError",t)}function sr(t,e="Aborted"){if(Pa(t))throw Hi(e)}function OM(t){return t instanceof AbortSignal?t:t?.signal??void 0}function Pa(t){const e=OM(t);return e!=null&&e.aborted}function fl(t){if(ss(t))throw t}function Qte(t){if(!ss(t))throw t}function Ma(t,e){const i=OM(t);if(i!=null){if(!i.aborted)return hpe(i,"abort",()=>e());e()}}function HW(t,e){const i=OM(t);if(i!=null)return sr(i),hpe(i,"abort",()=>e(Hi()))}function ppe(t,e){return OM(e)==null?t:new Promise((i,r)=>{let n=Ma(e,()=>r(Hi()));const s=()=>{n=Rr(n)};t.then(s,s),t.then(i,r)})}function ss(t){return t?.name==="AbortError"}async function _v(t){try{return await t}catch(e){if(!ss(e))throw e;return}}async function D0(t){if(!t)return;if(typeof t.forEach!="function"){const i=Object.keys(t),r=i.map(a=>t[a]),n=await D0(r),s={};return i.map((a,o)=>s[a]=n[o]),s}const e=t;return Promise.allSettled(e).then(i=>Array.from(e,(r,n)=>{const s=i[n];return s.status==="fulfilled"?{promise:r,value:s.value}:{promise:r,error:s.reason}}))}async function HMe(t){return(await Promise.allSettled(t)).filter(e=>e.status==="fulfilled").map(e=>e.value)}async function e2t(t){return(await Promise.allSettled(t)).filter(e=>e.status==="rejected").map(e=>e.reason)}function GW(t,e=void 0,i){const r=new AbortController;return Ma(i,()=>r.abort()),new Promise((n,s)=>{let a=setTimeout(()=>{a=0,n(e)},t);Ma(r,()=>{a&&(clearTimeout(a),s(Hi()))})})}function t2t(t,e,i,r){const n=i&&"abort"in i?i:null;r!=null||n||(r=i);let s=setTimeout(()=>{s=0,n?.abort()},e);const a=()=>r||new ee("promiseUtils:timeout","The wrapped promise did not resolve within "+e+" ms");return t.then(o=>{if(s===0)throw a();return clearTimeout(s),o},o=>{throw clearTimeout(s),s===0?a():o})}function GMe(t,e){const i=new AbortController,r=setTimeout(()=>i.abort(),e);return Ma(t,()=>{i.abort(),clearTimeout(r)}),{...t,signal:i.signal}}function ho(t){return t&&typeof t.then=="function"}function a8(t){return ho(t)?t:Promise.resolve(t)}function ST(t,e=-1){let i,r,n,s,a=null;const o=(...l)=>{if(i){r=l,s&&s.reject(Hi()),s=Qs();const g=s.promise;if(a){const y=a;a=null,y.abort()}return g}if(n=s||Qs(),s=null,e>0){const g=new AbortController;i=a8(t(...l,g.signal));const y=i;GW(e).then(()=>{i===y&&(s?g.abort():a=g)})}else i=1,i=a8(t(...l));const c=()=>{const g=r;r=n=i=a=null,g!=null&&o(...g)},h=i,f=n;return h.then(c,c),h.then(f.resolve,f.reject),f.promise};return o}function Qs(){let t,e;const i=new Promise((n,s)=>{t=n,e=s}),r=n=>{t(n)};return r.resolve=n=>t(n),r.reject=n=>e(n),r.timeout=(n,s)=>xT.setTimeout(()=>r.reject(s),n),r.promise=i,r}function i2t(t,e){e.then(t.resolve,t.reject)}async function eie(t){await Promise.resolve(),sr(t)}function r2t(t){return t}function qMe(t){return 1e3*t}function n2t(t){return t}function s2t(t){return .001*t}let WMe=class{constructor(e){this.phases=e,this.paused=!1,this.ticks=-1,this.removed=!1}},YMe=class{constructor(e){this.callback=e,this.isActive=!0}remove(){this.isActive=!1}},o8=0;const Qk={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0},l8=["prepare","preRender","render","postRender","update","finish"],c8=[],jw=new upe;let ZMe=class{constructor(e){this._task=e}remove(){this._task.removed=!0}pause(){this._task.paused=!0}resume(){this._task.paused=!1,fpe()}};function XMe(){Y0!=null&&(cancelAnimationFrame(Y0),Y0=requestAnimationFrame(qW))}function fpe(){Y0==null&&(o8=performance.now(),Y0=requestAnimationFrame(qW))}const lR={frameTasks:jw,willDispatch:!1,clearFrameTasks:JMe,dispatch:gpe,executeFrameTasks:KMe,reschedule:XMe};function $T(t){const e=new YMe(t);return c8.push(e),lR.willDispatch||(lR.willDispatch=!0,aR(gpe)),e}function z$(t){const e=new WMe(t);return jw.push(e),fpe(),new ZMe(e)}let Y0=null;function JMe(t=!1){jw.forAll(e=>{e.removed=!0}),t&&mpe()}function qW(){const t=performance.now();Y0=null,Y0=jw.some(i=>!i.paused&&!i.removed)?requestAnimationFrame(qW):null,lR.executeFrameTasks(t)}function KMe(t){const e=t-o8;o8=t;const i=1e3/60,r=Math.max(0,e-i);Qk.time=t,Qk.frameDuration=i-r;for(let n=0;n<l8.length;n++){const s=performance.now(),a=l8[n];jw.forAll(o=>{o.paused||o.removed||(n===0&&o.ticks++,o.phases[a]&&(Qk.elapsedFrameTime=performance.now()-t,Qk.deltaTime=o.ticks===0?0:e,o.phases[a]?.call(o,Qk)))}),iAe[n].push(performance.now()-s)}mpe(),rAe.push(performance.now()-t)}const YP=new upe;function mpe(){jw.forAll(t=>{t.removed&&YP.push(t)}),jw.removeUnorderedMany(YP.data,YP.length),YP.clear()}function gpe(){for(;c8.length;){const t=c8.shift();t.isActive&&t.callback()}lR.willDispatch=!1}function QMe(t=1,e){const i=Qs(),r=()=>{Pa(e)?i.reject(Hi()):t===0?i():(--t,aR(()=>r()))};return r(),i.promise}function eAe(t){return QMe(1,t)}async function tAe(t){await eAe(t),await new Promise(e=>requestAnimationFrame(()=>{t?.aborted||e()}))}const iAe=l8.map(t=>new cC(t)),rAe=new cC("total");function ype(t,e){for(const i of t.values())if(e(i))return!0;return!1}function cR(t,e){if(!e)return t;for(const i of e)i!=null&&t.add(i);return t}function tie(t,e){return e!=null&&t.add(e),t}function WW(t,e){const i=new Set;return cR(i,t),cR(i,e),i}function nAe(t,e){const i=new Set;for(const r of e)t.has(r)&&i.add(r);return i}function c2t(t,e){if(!t||!e)return!1;if(t===e)return!0;for(const i of t)if(!e.has(i))return!1;return!0}function u2t(t,e){if(t==null&&e==null)return!0;if(t==null||e==null||t.size!==e.size)return!1;for(const i of t)if(!e.has(i))return!1;return!0}function sAe(t,e){const i=new Set(t);for(const r of e)i.delete(r);return i}function aAe(t,e){return sAe(WW(t,e),nAe(t,e))}let oAe=0;function n3(){return++oAe}let LM=class extends $F{constructor(e){super(new lAe(e)),this._observer&&iie.register(this,new WeakRef(this._observer),this)}destroy(){this._observer&&iie.unregister(this._observer),this.accessed?.clear(),this.clear(),this._observer?.destroy()}},lAe=class{constructor(e){this._notify=e,this._invalidCount=0,this.destroyed=!1}onInvalidated(){this._invalidCount++}onCommitted(){if(this.destroyed)return;const e=this._invalidCount;if(e===1)return this._invalidCount=0,void this._notify();this._invalidCount=e>0?e-1:0}destroy(){this.destroyed=!0,this._notify=cAe}};const iie=new FinalizationRegistry(t=>{t.deref()?.destroy()});function cAe(){}let LS=!1;const uR=[];function vpe(t,e){let i=new LM(s),r=null,n=!1;function s(){if(!i||n)return;if(LS)return void _pe(s);const o=r;i.clear(),LS=!0,n=!0,r=Lp(i,t),n=!1,LS=!1,e(r,o),xpe()}function a(){i&&(i.destroy(),i=null,r=null)}return n=!0,r=Lp(i,t),n=!1,Si(a)}function bpe(t,e){let i=new LM(n),r=null;function n(){e(r,a)}function s(){i&&(i.destroy(),i=null),r=null}function a(){return i?(i.clear(),r=Lp(i,t),r):null}return a(),Si(s)}function wpe(t,e){let i=!1,r=!1;const n=!!e?.sync;let s=new LM(()=>{i||r||(r=!0,n?a():queueMicrotask(a))});function a(){r=!1,s&&!i&&(LS?_pe(a):(s.clear(),LS=!0,i=!0,Lp(s,t),i=!1,LS=!1,xpe()))}function o(){s&&(s.destroy(),s=null)}return i=!0,Lp(s,t),i=!1,Si(o)}function _pe(t){uR.includes(t)||uR.unshift(t)}function xpe(){for(;uR.length;)uR.pop()()}var aw;let YW=(aw=class{constructor(){this.uid=n3(),this.removed=!1,this.type=null,this.oldValue=null,this.callback=null,this.getValue=null,this.target=null,this.path=null,this.equals=null}static acquireUntracked(e,i,r,n,s){return this.pool.acquire(0,e,i,r,n,s,VW)}static acquireTracked(e,i,r,n){return this.pool.acquire(1,e,i,r,null,null,n)}notify(e,i){this.type===0?this.callback.call(this.target,e,i,this.path,this.target):this.callback.call(null,e,i,void 0,void 0)}acquire(e,i,r,n,s,a,o){this.uid=n3(),this.removed=!1,this.type=e,this.oldValue=i,this.callback=r,this.getValue=n,this.target=s,this.path=a,this.equals=o}release(){this.target=this.path=this.oldValue=this.callback=this.getValue=null,this.uid=n3(),this.removed=!0}},aw.pool=new lpe(()=>new aw),aw);const s3=new Ao,Fm=new Set;let dR;function hR(t){Fm.delete(t),Fm.add(t),Spe()}function Spe(){dR||(dR=$T(hAe))}function uAe(t){if(t.removed)return;const e=t.oldValue,i=t.getValue();t.equals(e,i)||(t.oldValue=i,t.notify(i,e))}function dAe(t){for(const e of Fm.values())e.target===t&&(e.removed=!0)}function hAe(){let t=10;for(;dR&&t--;){dR=null;const e=pAe(),i=s3.acquire();for(const r of e){const n=r.uid;uAe(r),n===r.uid&&r.removed&&i.push(r)}for(const r of Fm)r.removed&&(i.push(r),Fm.delete(r));for(const r of i)YW.pool.release(r);s3.release(i),s3.release(e),u8.forEach(r=>r())}}function pAe(){const t=s3.acquire();t.length=Fm.size;let e=0;for(const i of Fm)t[e]=i,++e;return Fm.clear(),t}const u8=new Set;function fAe(t){return u8.add(t),Si(()=>u8.delete(t))}function mAe(t,e,i){let r=Jhe(t,e,i,(n,s,a)=>{let o,l,c=bpe(()=>AM(n,s),(h,f)=>{n.__accessor__?.lifecycle===fc.DESTROYED||o&&o.uid!==l?r.remove():(o||(o=YW.acquireUntracked(h,a,f,n,s),l=o.uid),hR(o))});return Si(()=>{c.remove(),o&&(o.uid!==l||o.removed||(o.removed=!0,hR(o)),o=null),r=c=null})});return r}function gAe(t,e,i){const r=Jhe(t,e,i,(n,s,a)=>{let o=!1;return vpe(()=>AM(n,s),(l,c)=>{n.__accessor__.lifecycle!==fc.DESTROYED?o||(o=!0,VW(c,l)||a.call(n,l,c,s,n),o=!1):r.remove()})});return r}function yAe(t,e,i,r=!1){return t.__accessor__&&t.__accessor__.lifecycle!==fc.DESTROYED?r?gAe(t,e,i):mAe(t,e,i):Si()}function vAe(t,e,i){let r,n,s=bpe(t,(a,o)=>{r&&r.uid!==n?s.remove():(r||(r=YW.acquireTracked(a,e,o,i),n=r.uid),hR(r))});return Si(()=>{s.remove(),r&&(r.uid!==n||r.removed||(r.removed=!0,hR(r)),r=null),s=null})}function bAe(t,e,i){let r=!1;return vpe(t,(n,s)=>{r||(r=!0,i(s,n)||e(n,s),r=!1)})}function wAe(t,e,i=!1,r=Hhe){return i?bAe(t,e,r):vAe(t,e,r)}function rie(t){return ype(Fm,e=>e.oldValue===t)}function _Ae(t,e){for(const i of t.values())if(e(i))return!0;return!1}function p2t(t,e){for(const i of t.values())if(!e(i))return!1;return!0}function f2t(t,e){for(const i of t.values())if(e(i))return i;return null}function d_(t,e,i){const r=t.get(e);if(r!==void 0)return r;const n=i();return t.set(e,n),n}function m2t(t){const e=new Map;return i=>(e.has(i)||e.set(i,t(i)),e.get(i))}const Z0=()=>$e.getLogger("esri.core.accessorSupport.ensureTypes");function xAe(t){if(t==null)return t;const e=new Date(t);return isNaN(e.getTime())?(Z0().error("Accessor#set",`Invalid date value: '${t}', falling back to current date`),new Date):e}function SAe(t){return t==null?t:!!t}function DM(t){return t==null?t:t.toString()}function Po(t,e=0){return t==null?t:(t=parseFloat(t),isNaN(t)?e:t)}function ZW(t){return t==null?t:Math.round(parseFloat(t))}function $Ae(t){return null}function TAe(t,e){return i=>{let r=t(i);return e.step!=null&&(r=Math.round(r/e.step)*e.step),e.min!=null&&(r=Math.max(e.min,r)),e.max!=null&&(r=Math.min(e.max,r)),r}}function $pe(t){return t?.constructor&&t.constructor.__accessorMetadata__!==void 0}function pR(t,e){return e!=null&&t&&!(e instanceof t)}function Tpe(t){return t&&"isCollection"in t}function nie(t){return t?.Type?typeof t.Type=="function"?t.Type:t.Type.base:null}function kAe(t,e){if(!e?.constructor||!Tpe(e.constructor))return d8(t,e)?e:new t(e);const i=nie(t.prototype.itemType),r=nie(e.constructor.prototype.itemType);return i?r?i===r?e:i.prototype.isPrototypeOf(r.prototype)?new t(e):(d8(t,e),e):new t(e):e}function d8(t,e){return!!$pe(e)&&(Z0().error("Accessor#set","Assigning an instance of '"+(e.declaredClass||"unknown")+"' which is not a subclass of '"+kF(t)+"'"),!0)}function TT(t,e){return e==null?e:Tpe(t)?kAe(t,e):pR(t,e)?d8(t,e)?e:new t(e):e}function kF(t){return t?.prototype?.declaredClass||"unknown"}const EAe=new WeakMap;function CAe(t){switch(t){case Number:return e=>Po(e);case li:return ZW;case Boolean:return SAe;case String:return DM;case Date:return xAe;case kT:return $Ae;default:return d_(EAe,t,()=>TT.bind(null,t))}}function dn(t,e){const i=CAe(t);return arguments.length===1?i:i(e)}function dI(t,e,i){return arguments.length===1?dI.bind(null,t):e&&(Array.isArray(e)?e.map(r=>t(r,i)):[t(e,i)])}function IAe(t,e){return arguments.length===1?dI(i=>dn(t,i)):dI(i=>dn(t,i),e)}function kpe(t,e,i){return e!==0&&Array.isArray(i)?i.map(r=>kpe(t,e-1,r)):t(i)}function fR(t,e,i){if(arguments.length===2)return s=>fR(t,e,s);if(!i)return i;i=kpe(t,e,i);let r=e,n=i;for(;r>0&&Array.isArray(n);)r--,n=n[0];if(n!==void 0)for(let s=0;s<r;s++)i=[i];return i}function MAe(t,e,i){return arguments.length===2?fR(r=>dn(t,r),e):fR(r=>dn(t,r),e,i)}function Epe(t){return!!Array.isArray(t)&&!t.some(e=>{const i=typeof e;return!(i==="string"||i==="number"||i==="function"&&t.length>1)})}function h8(t,e){if(arguments.length===2)return h8(t).call(null,e);const i=new Set,r=t.filter(o=>typeof o!="function"),n=t.filter(o=>typeof o=="function");for(const o of t)typeof o!="string"&&typeof o!="number"||i.add(o);let s=null,a=null;return(o,l)=>{if(o==null)return o;const c=typeof o,h=c==="string"||c==="number";return h&&(i.has(o)||n.some(f=>c==="string"&&f===String||c==="number"&&f===Number))||c==="object"&&n.some(f=>!pR(f,o))?o:(h&&r.length?(s||(s=r.map(f=>typeof f=="string"?`'${f}'`:`${f}`).join(", ")),Z0().error("Accessor#set",`'${o}' is not a valid value for this property, only the following values are valid: ${s}`)):typeof o=="object"&&n.length?(a||(a=n.map(f=>kF(f)).join(", ")),Z0().error("Accessor#set",`'${o}' is not a valid value for this property, value must be one of ${a}`)):Z0().error("Accessor#set",`'${o}' is not a valid value for this property`),l&&(l.valid=!1),null)}}function Dp(t,e){if(arguments.length===2)return Dp(t).call(null,e);const i={},r=[],n=[];for(const l in t.typeMap){const c=t.typeMap[l];i[l]=dn(c),r.push(kF(c)),n.push(l)}const s=()=>`'${r.join("', '")}'`,a=()=>`'${n.join("', '")}'`,o=typeof t.key=="string"?l=>l[t.key]:t.key;return l=>{if(t.base&&!pR(t.base,l)||l==null)return l;const c=o(l)||t.defaultKeyValue,h=i[c];if(!h)return Z0().error("Accessor#set",`Invalid property value, value needs to be one of ${s()}, or a plain object that can autocast (having .type = ${a()})`),null;if(!pR(t.typeMap[c],l))return l;if(typeof t.key=="string"&&!$pe(l)){const f={};for(const g in l)g!==t.key&&(f[g]=l[g]);return h(f)}return h(l)}}let li=class{},kT=class{};const v2t={native:t=>({type:"native",value:t}),array:t=>({type:"array",value:t}),oneOf:t=>({type:"one-of",values:t})};function AAe(t){if(!t||!("type"in t))return!1;switch(t.type){case"native":case"array":case"one-of":return!0}return!1}function Cpe(t){switch(t.type){case"native":return dn(t.value);case"array":return dI(Cpe(t.value));case"one-of":return PAe(t);default:return null}}function PAe(t){let e=null;return(i,r)=>f8(i,t)?i:(e==null&&(e=p8(t)),Z0().error("Accessor#set",`Invalid property value, value needs to be of type ${e}`),r&&(r.valid=!1),null)}function p8(t){switch(t.type){case"native":switch(t.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case li:return"integer";case Date:return"date";case kT:return"null";default:return kF(t.value)}case"array":return`array of ${p8(t.value)}`;case"one-of":{const e=t.values.map(i=>p8(i));return`one of ${e.slice(0,-1)} or ${e[e.length-1]}`}}return"unknown"}function f8(t,e){if(t==null)return!0;switch(e.type){case"native":switch(e.value){case Number:case li:return typeof t=="number";case Boolean:return typeof t=="boolean";case String:return typeof t=="string";case kT:return t===null}return t instanceof e.value;case"array":return!!Array.isArray(t)&&!t.some(i=>!f8(i,e.value));case"one-of":return e.values.some(i=>f8(t,i))}}function m(t={}){return(e,i)=>{if(e===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${e.name}.${i}. Accessor does not support static properties.`);const r=Object.getOwnPropertyDescriptor(e,i),n=PM(e,i);r&&(r.get||r.set?(n.get=r.get||n.get,n.set=r.set||n.set):"value"in r&&("value"in t&&$e.getLogger("esri.core.accessorSupport.decorators.property").warn(`@property() will redefine the value of "${i}" on "${e.constructor.name}" already defined in the metadata`,t),n.value=t.value=r.value)),t.readOnly!=null&&(n.readOnly=t.readOnly);const s=t.aliasOf;if(s){const l=typeof s=="string"?s:s.source,c=typeof s=="string"?null:s.overridable===!0;let h;n.dependsOn=[l],n.get=function(){let f=co(this,l);if(typeof f=="function"){h||(h=l.split(".").slice(0,-1).join("."));const g=co(this,h);g&&(f=f.bind(g))}return f},n.readOnly||(n.set=c?function(f){this._override(i,f)}:function(f){sR(this,l,f)})}const a=t.type,o=t.types;if(!n.cast){let l;a?l=OAe(a):o&&(l=Array.isArray(o)?dI(Dp(o[0])):Dp(o)),t.cast=LAe(t.cast,l)}yMe(n,t),t.range&&(n.cast=TAe(n.cast,t.range))}}function XW(t,e,i){const r=PM(t,i);r.json||(r.json={});let n=r.json;return e!==void 0&&(n.origins||(n.origins={}),n.origins[e]||(n.origins[e]={}),n=n.origins[e]),n}function OAe(t){let e=0,i=t;if(AAe(t))return Cpe(t);for(;Array.isArray(i)&&i.length===1&&typeof i[0]!="string"&&typeof i[0]!="number";)i=i[0],e++;const r=i;if(Epe(r))return e===0?h8(r):fR(h8(r),e);if(e===1)return IAe(r);if(e>1)return MAe(r,e);const n=t;return n.from?n.from:dn(n)}function LAe(t,e){if(t||e)return t?e?(i,r)=>e(t(i,r),r):t:e}function DAe(t){if(t.json&&t.json.origins){const e=t.json.origins,i={"web-document":["web-scene","web-map"]};for(const r in i)if(e[r]){const n=e[r];i[r].forEach(s=>{e[s]=n}),delete e[r]}}}let kc=class extends ape{constructor(e,i,r){super(e,i,r)}};kc.prototype.type="warning";function Ipe(t){return!!t&&t.prototype?.declaredClass&&t.prototype.declaredClass.indexOf("esri.core.Collection")===0}function RAe(t,e){return JW(t,"any",e?.origin)}function mR(t,e){return JW(t,"read",e?.origin)}function Mpe(t,e){return JW(t,"write",e?.origin)}function JW(t,e,i){let r=t?.json;if(r?.origins&&i){let n;n=i==="link-chart"?r.origins[i]&&(e==="any"||e in r.origins[i])?r.origins[i]:r.origins["web-map"]:r.origins[i],n&&(e==="any"||e in n)&&(r=n)}return r}const m8=()=>$e.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function sie(t,e,i){t&&(!i&&!e.read||e.read?.reader||e.read?.enabled===!1||NAe(t)&&Bn("read.reader",ET(t),e))}function ET(t){const e=t.ndimArray??0;if(e>1)return FAe(t);if(e===1)return aie(t);if("type"in t&&Ppe(t.type)){const i=t.type.prototype?.itemType?.Type,r=aie(typeof i=="function"?{type:i}:{types:i});return(n,s,a)=>{const o=r(n,s,a);return o&&new t.type(o)}}return KW(t)}function KW(t){return"type"in t?zAe(t.type):jAe(t.types)}function zAe(t){return t.prototype.read?(e,i,r)=>{if(e==null)return e;const n=typeof e;if(n!=="object")return void m8().error(`Expected JSON value of type 'object' to deserialize type '${t.prototype.declaredClass}', but got '${n}'`);const s=new t;return s.read(e,r),s}:t.fromJSON}function Ape(t,e,i,r){return r!==0&&Array.isArray(e)?e.map(n=>Ape(t,n,i,r-1)):t(e,void 0,i)}function FAe(t){const e=KW(t),i=Ape.bind(null,e),r=t.ndimArray??0;return(n,s,a)=>{if(n==null)return n;n=i(n,a,r);let o=r,l=n;for(;o>0&&Array.isArray(l);)o--,l=l[0];if(l!==void 0)for(let c=0;c<o;c++)n=[n];return n}}function aie(t){const e=KW(t);return(i,r,n)=>{if(i==null)return i;if(Array.isArray(i)){const a=[];for(const o of i){const l=e(o,void 0,n);l!==void 0&&a.push(l)}return a}const s=e(i,void 0,n);return s!==void 0?[s]:void 0}}function Ppe(t){if(!Ipe(t))return!1;const e=t.prototype.itemType;return!(!e||!e.Type)&&(typeof e.Type=="function"?QW(e.Type):Ope(e.Type))}function NAe(t){return"types"in t?Ope(t.types):QW(t.type)}function QW(t){return!Array.isArray(t)&&!!t&&t.prototype&&("read"in t.prototype||"fromJSON"in t||Ppe(t))}function Ope(t){for(const e in t.typeMap)if(!QW(t.typeMap[e]))return!1;return!0}function jAe(t){let e=null;const i=t.errorContext??"type",r=t.validate;return(n,s,a)=>{if(n==null)return n;const o=typeof n;if(o!=="object")return void m8().error(`Expected JSON value of type 'object' to deserialize, but got '${o}'`);e||(e=BAe(t));const l=t.key;if(typeof l!="string")return;const c=n[VAe(l,e,a)],h=c?e[c]:t.defaultKeyValue?t.typeMap[t.defaultKeyValue]:void 0;if(!h){const g=`Type '${c||"unknown"}' is not supported`;return a?.messages&&n&&a.messages.push(new kc(`${i}:unsupported`,g,{definition:n,context:a})),void m8().error(g)}const f=new h;return f.read(n,a),r?r(f):f}}function VAe(t,e,i){const r=Object.values(e)[0],n=_T(r.prototype)[t],s=mR(n,i),a=s?.read?.source;return a&&typeof a=="string"?a:t}function BAe(t){const e={};for(const i in t.typeMap){const r=t.typeMap[i],n=_T(r.prototype);if(typeof t.key=="function")continue;const s=n[t.key];if(!s)continue;if(s.json?.type&&Array.isArray(s.json.type)&&s.json.type.length===1&&typeof s.json.type[0]=="string"){e[s.json.type[0]]=r;continue}const a=s.json?.write;if(!a?.writer){e[i]=r;continue}const o=a.target,l=typeof o=="string"?o:t.key,c={};a.writer(i,c,l),c[l]&&(e[c[l]]=r)}return e}function UAe(t){if(t.json||(t.json={}),lie(t.json),cie(t.json),oie(t.json),t.json.origins)for(const e in t.json.origins)lie(t.json.origins[e]),cie(t.json.origins[e]),oie(t.json.origins[e]);return!0}function oie(t){t.name&&(t.read&&typeof t.read=="object"?t.read.source===void 0&&(t.read.source=t.name):t.read={source:t.name},t.write&&typeof t.write=="object"?t.write.target===void 0&&(t.write.target=t.name):t.write={target:t.name})}function lie(t){typeof t.read=="boolean"?t.read={enabled:t.read}:typeof t.read=="function"?t.read={enabled:!0,reader:t.read}:t.read&&typeof t.read=="object"&&t.read.enabled===void 0&&(t.read.enabled=!0)}function cie(t){typeof t.write=="boolean"?t.write={enabled:t.write}:typeof t.write=="function"?t.write={enabled:!0,writer:t.write}:t.write&&typeof t.write=="object"&&t.write.enabled===void 0&&(t.write.enabled=!0)}function uie(t,e){if(!e.write||e.write.writer||e.write.enabled===!1&&!e.write.overridePolicy)return;const i=t?.ndimArray??0;t&&(i===1||"type"in t&&Ipe(t.type))?e.write.writer=qAe:i>1?e.write.writer=WAe(i):e.types?Array.isArray(e.types)?e.write.writer=GAe(e.types[0]):e.write.writer=HAe(e.types):e.write.writer=hI}function HAe(t){return(e,i,r,n)=>e?Lpe(e,t,n)?hI(e,i,r,n):void 0:hI(e,i,r,n)}function Lpe(t,e,i){for(const r in e.typeMap)if(t instanceof e.typeMap[r])return!0;if(i?.messages){const r=e.errorContext??"type",n=`Values of type '${(typeof e.key!="function"?t[e.key]:t.declaredClass)??"Unknown"}' cannot be written`;i&&i.messages&&t&&i.messages.push(new ee(`${r}:unsupported`,n,{definition:t,context:i})),$e.getLogger("esri.core.accessorSupport.extensions.serializableProperty.writer").error(n)}return!1}function GAe(t){return(e,i,r,n)=>!e||!Array.isArray(e)?hI(e,i,r,n):hI(e.filter(s=>Lpe(s,t,n)),i,r,n)}function hI(t,e,i,r){Bn(i,gR(t,r),e)}function gR(t,e){return t&&typeof t.write=="function"?t.write({},e):t&&typeof t.toJSON=="function"?t.toJSON():typeof t=="number"?yR(t):t}function yR(t){return t===-1/0?-Number.MAX_VALUE:t===1/0?Number.MAX_VALUE:isNaN(t)?null:t}function qAe(t,e,i,r){let n;t===null?n=null:t&&typeof t.map=="function"?(n=t.map(s=>gR(s,r)),typeof n.toArray=="function"&&(n=n.toArray())):n=[gR(t,r)],Bn(i,n,e)}function Dpe(t,e,i){return i!==0&&Array.isArray(t)?t.map(r=>Dpe(r,e,i-1)):gR(t,e)}function WAe(t){return(e,i,r,n)=>{let s;if(e===null)s=null;else{s=Dpe(e,n,t);let a=t,o=s;for(;a>0&&Array.isArray(o);)a--,o=o[0];if(o!==void 0)for(let l=0;l<a;l++)s=[s]}Bn(r,s,i)}}function YAe(t){const e=ZAe(t);if(t.json.origins)for(const i in t.json.origins){const r=t.json.origins[i],n=r.types?XAe(r):e;sie(n,r,!1),r.types&&!r.write&&t.json.write?.enabled&&(r.write={...t.json.write}),uie(n,r)}sie(e,t.json,!0),uie(e,t.json)}function ZAe(t){return t.json.types?g8(t.json):t.type?Rpe(t):g8(t)}function XAe(t){return t.type?Rpe(t):g8(t)}function Rpe(t){if(!t.type)return;let e=0,i=t.type;for(;Array.isArray(i)&&!Epe(i);)i=i[0],e++;return{type:i,ndimArray:e}}function g8(t){if(!t.types)return;let e=0,i=t.types;for(;Array.isArray(i);)i=i[0],e++;return{types:i,ndimArray:e}}function JAe(t){UAe(t)&&(DAe(t),YAe(t))}const BV=new Set,UV=new Set;function U(t){return e=>{t??="esri.core.Accessor",e.prototype.declaredClass=t,QAe(e);const i=[],r=[];let n=e.prototype;for(;n;)n.hasOwnProperty("initialize")&&!BV.has(n.initialize)&&(BV.add(n.initialize),i.push(n.initialize)),n.hasOwnProperty("destroy")&&!UV.has(n.destroy)&&(UV.add(n.destroy),r.push(n.destroy)),n=Object.getPrototypeOf(n);BV.clear(),UV.clear();const s=class extends e{constructor(...o){if(super(...o),this.constructor===s&&typeof this.postscript=="function"){if(i.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let l=i.length-1;l>=0;l--)i[l].call(this)}}),r.length){let l=!1;const c=this[Yhe];Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!l){this.__accessor__.lifecycle=fc.DESTROYING,l=!0,c.call(this);for(let h=0;h<r.length;h++)r[h].call(this)}}})}Object.defineProperty(this,Symbol.dispose,{enumerable:!1,configurable:!0,value(){this.destroy()}}),this.postscript()}}};s.__accessorMetadata__=_T(e.prototype),s.prototype.declaredClass=t;const a=(t||"AccessorSubclass").split(".").slice(-1)[0];return Object.defineProperty(s,"name",{value:a,configurable:!0}),s}}function KAe(t,e){return e.get==null?function(){const i=this.__accessor__,r=i.propertiesByName.get(t);if(r===void 0)return;i.mutable&&Rt(r);const n=i.store;return n.has(t)?n.get(t):r.metadata.value}:function(){const i=this.__accessor__,r=i.propertiesByName.get(t);if(r!==void 0)return r.getComputed(i)}}function QAe(t){const e=t.prototype,i=_T(e),r={};for(const n of Object.getOwnPropertyNames(i)){const s=i[n];JAe(s),r[n]={enumerable:!0,configurable:!0,get:KAe(n,s),set(a){const o=this.__accessor__;if(o!==void 0){if(o.mutable)return o.initialized&&s.readOnly?die("read-only",n):o.lifecycle===fc.CONSTRUCTED&&s.constructOnly?die("construct-only",n):void o.set(n,a)}else Object.defineProperty(this,n,{enumerable:!0,configurable:!0,writable:!0,value:a})}}}Object.defineProperties(t.prototype,r)}const die=(t,e)=>{$e.getLogger("esri.core.Accessor").error(`cannot assign to ${t} property '${e}'`)};var hie,pie;function ePe(t){if(t==null)return{value:t};if(Array.isArray(t))return{type:[t[0]],value:null};switch(typeof t){case"object":return t.constructor?.__accessorMetadata__||t instanceof Date?{type:t.constructor,value:t}:t;case"boolean":return{type:Boolean,value:t};case"string":return{type:String,value:t};case"number":return{type:Number,value:t};case"function":return{type:t,value:null};default:return}}const Gg=Symbol("Accessor-Handles"),HV=Symbol("Accessor-Initialized");var vv;let lt=(vv=class{static createSubclass(e={}){if(Array.isArray(e))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:i,declaredClass:r,constructor:n}=e;delete e.declaredClass,delete e.properties,delete e.constructor;const s=this;class a extends s{constructor(...l){super(...l),this.inherited=null,n&&n.apply(this,l)}}_T(a.prototype);for(const o in e){const l=e[o];a.prototype[o]=typeof l=="function"?function(...c){const h=this.inherited;let f;this.inherited=function(...g){if(s.prototype[o])return s.prototype[o].apply(this,g)};try{f=l.apply(this,c)}catch(g){throw this.inherited=h,g}return this.inherited=h,f}:e[o]}for(const o in i){const l=ePe(i[o]);m(l)(a.prototype,o)}return U(r)(a)}static freeze(e){return e instanceof vv?e.__accessor__.mutable=!1:Object.freeze(e),e}static isFrozen(e){return e instanceof vv?!e.__accessor__.mutable:Object.isFrozen(e)}constructor(...e){if(this[hie]=null,this[pie]=!1,this.constructor===vv)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");const i=new CMe(this);Object.defineProperty(this,"__accessor__",{enumerable:!1,value:i}),e.length>0&&(i.ctorArgs=this.normalizeCtorArgs?.apply(this,e)??e[0])}postscript(){const e=this.__accessor__,i=e.ctorArgs;e.initialize(),i&&(this.set(i),e.ctorArgs=null),e.constructed(),this.initialize(),this[HV]=!0}initialize(){}[Yhe](){this[Gg]=Ir(this[Gg])}destroy(){this.destroyed||(dAe(this),this.__accessor__.destroy(),DMe()?.onInstanceDestroy(this))}[Symbol.dispose](){this.destroy()}get constructed(){return this.__accessor__&&this.__accessor__.initialized||!1}get initialized(){return this[HV]}get destroyed(){return this.__accessor__?.lifecycle===fc.DESTROYED||!1}get destroying(){return this.__accessor__?.lifecycle===fc.DESTROYING||!1}commitProperty(e){co(this,e)}hasOwnProperty(e){return this.__accessor__?this.__accessor__.has(e):Object.prototype.hasOwnProperty.call(this,e)}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(e,i){return sR(this,e,i),this}watch(e,i,r){return Mhe($e.getLogger(this),"`watch` is deprecated in favor of reactiveUtils.watch",{replacement:"reactiveUtils.watch",version:"4.32",see:"https://arcg.is/1vaqf42#watch",warnOnce:!0}),yAe(this,e,i,r)}addHandles(e,i){if(this.destroyed){const r=Array.isArray(e)?e:[e];for(const n of r)n.remove();return}(this[Gg]??=new wT).add(e,i)}removeHandles(e){this[Gg]?.remove(e)}removeAllHandles(){this[Gg]?.removeAll()}removeHandlesReference(e){this[Gg]?.removeReference(e)}hasHandles(e){return this[Gg]?.has(e)===!0}_override(e,i){i===void 0?this.__accessor__.clearOverride(e):this.__accessor__.override(e,i)}_clearOverride(e){return this.__accessor__.clearOverride(e)}_overrideIfSome(e,i){i==null?this.__accessor__.clearOverride(e):this.__accessor__.override(e,i)}_isOverridden(e){return this.__accessor__.isOverridden(e)}notifyChange(e){this.__accessor__.notifyChange(e)}_get(e){return this.__accessor__.internalGet(e)}_set(e,i){return this.__accessor__.internalSet(e,i),this}},hie=Gg,pie=HV,vv),tPe=class zpe{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(e){const i=new zpe;return this._values.forEach((r,n)=>{e&&e.has(n)||i.set(n,de(r.value),r.origin)}),i}get(e,i){i=this._normalizeOrigin(i);const r=this._values.get(e);return i==null||r?.origin===i?r?.value:void 0}originOf(e){return this._values.get(e)?.origin??7}keys(e){e=this._normalizeOrigin(e);const i=[...this._values.keys()];return e==null?i:i.filter(r=>this._values.get(r)?.origin===e)}set(e,i,r){if((r=this._normalizeOrigin(r))===0){const n=this._values.get(e);if(n?.origin!=null&&n.origin>r)return}this._values.set(e,new iPe(i,r))}delete(e,i){(i=this._normalizeOrigin(i))!=null&&this._values.get(e)?.origin!==i||this._values.delete(e)}has(e,i){return(i=this._normalizeOrigin(i))!=null?this._values.get(e)?.origin===i:this._values.has(e)}isAtOrigin(e,i){return i=this._normalizeOrigin(i),this.has(e,i)&&this.originOf(e)===i}isBelowOrigin(e,i){return i=this._normalizeOrigin(i),!this.has(e)||this.originOf(e)<i}forEach(e){this._values.forEach(({value:i},r)=>e(i,r))}_normalizeOrigin(e){if(e!=null)return e===0?e:7}},iPe=class{constructor(e,i){this.value=e,this.origin=i}};function Fpe(t,e,i){e.keys().forEach(n=>{i.set(n,e.get(n),0)});const r=t.metadata;Object.keys(r).forEach(n=>{t.internalGet(n)&&i.set(n,t.internalGet(n),0)})}function rPe(t,e,i){if(!t?.read||t.read.enabled===!1||!t.read.source)return!1;const r=t.read.source;if(typeof r=="string"){if(r===e||r.includes(".")&&r.startsWith(e)&&Yte(r,i))return!0}else for(const n of r)if(n===e||n.includes(".")&&n.startsWith(e)&&Yte(n,i))return!0;return!1}function nPe(t){return t&&(!t.read||t.read.enabled!==!1&&!t.read.source)}function sPe(t,e,i,r,n){let s=mR(e[i],n);nPe(s)&&(t[i]=!0);for(const a of Object.getOwnPropertyNames(e))s=mR(e[a],n),rPe(s,i,r)&&(t[a]=!0)}function aPe(t,e,i,r){const n=i.metadata,s=RAe(n[e],r),a=s?.default;if(a===void 0)return;const o=typeof a=="function"?a.call(t,e,r):a;o!==void 0&&i.set(e,o)}const Npe={origin:"service"};function jpe(t,e,i=Npe){if(!e||typeof e!="object")return;const r=mo(t),n=r.metadata,s={};for(const a of Object.getOwnPropertyNames(e))sPe(s,n,a,e,i);r.setDefaultOrigin(i.origin);for(const a of Object.getOwnPropertyNames(s)){const o=mR(n[a],i).read,l=o?.source;let c;c=l&&typeof l=="string"?AM(e,l):e[a],o?.reader&&(c=o.reader.call(t,c,e,i)),c!==void 0&&r.set(a,c)}if(!i||!i.ignoreDefaults){r.setDefaultOrigin("defaults");for(const a of Object.getOwnPropertyNames(n))s[a]||aPe(t,a,r,i)}r.setDefaultOrigin("user")}function Vpe(t,e,i,r=Npe){const n={...r,messages:[]};i(n),n.messages?.forEach(s=>{s.type!=="warning"||t.loaded?r?.messages&&r.messages.push(s):t.loadWarnings.push(s)})}function oPe(t,e,i,r,n){const s={};return e.write?.writer?.call(t,r,s,i,n),s}function Bpe(t,e,i,r,n,s){if(!r?.write)return!1;const a=co(t,i);if(!n&&r.write.overridePolicy){const o=r.write.overridePolicy.call(t,a,i,s??void 0);o!==void 0&&(n=o)}if(n||(n=r.write),!n||n.enabled===!1||n.layerContainerTypes&&s?.layerContainerType&&!n.layerContainerTypes.includes(s.layerContainerType))return!1;if((a===null&&!n.allowNull&&!n.writerEnsuresNonNull||a===void 0)&&n.isRequired){const o=new ee("web-document-write:property-required",`Missing value for required property '${i}' on '${t.declaredClass}'`,{propertyName:i,target:t});return o&&s?.messages?s.messages.push(o):o&&!s&&$e.getLogger("esri.core.accessorSupport.write").error(o.name,o.message),!1}return!(a===void 0||a===null&&!n.allowNull&&!n.writerEnsuresNonNull||!n.alwaysWriteDefaults&&(!e.store.multipleOriginsSupported||e.store.originOf(i)===0)&&lPe(t,i,s,r,a)||!n.ignoreOrigin&&s?.origin&&e.store.multipleOriginsSupported&&e.store.originOf(i)<Am(s.origin))}function lPe(t,e,i,r,n){const s=r.default;if(s===void 0)return!1;if(r.defaultEquals!=null)return r.defaultEquals(n);if(typeof s=="function"){if(Array.isArray(n)){const a=s.call(t,e,i??void 0);return wF(a,n)}return!1}return s===n}function cPe(t,e,i,r){const n=mo(t),s=n.metadata,a=Mpe(s[e],r);return!!a&&Bpe(t,n,e,a,i,r)}function Upe(t,e,i){if(t&&typeof t.toJSON=="function"&&(!t.toJSON.isDefaultToJSON||!t.write))return t3(e,t.toJSON(i));const r=mo(t),n=r.metadata;for(const s in n){const a=Mpe(n[s],i);if(!Bpe(t,r,s,a,void 0,i))continue;const o=co(t,s),l=oPe(t,a,a.write&&typeof a.write.target=="string"?a.write.target:s,o,i);Object.keys(l).length>0&&(e=t3(e,l),i?.resources?.pendingOperations?.length&&i.resources.pendingOperations.push(Promise.all(i.resources.pendingOperations).then(()=>t3(e,l,()=>"replace-arrays"))),i?.writtenProperties&&i.writtenProperties.push({target:t,propName:s,oldOrigin:kMe(r.store.originOf(s)),newOrigin:i.origin}))}return e}const rg=t=>{const e=t;let i=class extends e{constructor(...r){super(...r);const n=mo(this),s=n.store,a=new tPe;n.store=a,Fpe(n,s,a)}read(r,n){jpe(this,r,n)}write(r,n){return Upe(this,r??{},n)}toJSON(r){return this.write({},r)}static fromJSON(r,n){return uPe.call(this,r,n)}};return i=d([U("esri.core.JSONSupport")],i),i.prototype.toJSON.isDefaultToJSON=!0,i};function uPe(t,e){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const i=new this;return i.read(t,e),i}const _e=rg(lt);var y8,o$;let ga=(o$=class extends _e{constructor(e){super(e),this._oAuthCred=null,this.appId=null,this.authNamespace="/",this.expiration=20160,this.flowType="auto",this.forceLogin=!1,this.forceUserId=!1,this.locale=null,this.minTimeUntilExpiration=30,this.popup=!1,this.popupCallbackUrl="oauth-callback.html",this.popupWindowFeatures="height=490,width=800,resizable,scrollbars,status",this.portalUrl="https://www.arcgis.com",this.preserveUrlHash=!1,this.userId=null}clone(){return y8.fromJSON(this.toJSON())}},y8=o$,o$);d([m({json:{write:!0}})],ga.prototype,"appId",void 0),d([m({json:{write:!0}})],ga.prototype,"authNamespace",void 0),d([m({json:{write:!0}})],ga.prototype,"expiration",void 0),d([m({json:{write:!0}})],ga.prototype,"flowType",void 0),d([m({json:{write:!0}})],ga.prototype,"forceLogin",void 0),d([m({json:{write:!0}})],ga.prototype,"forceUserId",void 0),d([m({json:{write:!0}})],ga.prototype,"locale",void 0),d([m({json:{write:!0}})],ga.prototype,"minTimeUntilExpiration",void 0),d([m({json:{write:!0}})],ga.prototype,"popup",void 0),d([m({json:{write:!0}})],ga.prototype,"popupCallbackUrl",void 0),d([m({json:{write:!0}})],ga.prototype,"popupWindowFeatures",void 0),d([m({json:{write:!0}})],ga.prototype,"portalUrl",void 0),d([m({json:{write:!0}})],ga.prototype,"preserveUrlHash",void 0),d([m({json:{write:!0}})],ga.prototype,"userId",void 0),ga=y8=d([U("esri.identity.OAuthInfo")],ga);const v8=ga;function pI(t){return t&&typeof t=="object"&&"toJSON"in t&&typeof t.toJSON=="function"}const dPe=/^https:\/\/([a-z\d-]+)(\.maps([^.]*))?\.arcgis\.com/i,hPe={devext:{customBaseUrl:"mapsdevext.arcgis.com",portalHostname:"devext.arcgis.com"},qaext:{customBaseUrl:"mapsqa.arcgis.com",portalHostname:"qaext.arcgis.com"},www:{customBaseUrl:"maps.arcgis.com",portalHostname:"www.arcgis.com"}};function fie(t){const e=t?.match(dPe);if(!e)return null;const[,i,r,n]=e;if(!i)return null;let s=null,a=null,o=null;const{devext:l,qaext:c,www:h}=hPe;if(r)if(s=i,n)switch(n.toLowerCase()){case"devext":({customBaseUrl:a,portalHostname:o}=l);break;case"qa":({customBaseUrl:a,portalHostname:o}=c);break;default:return null}else({customBaseUrl:a,portalHostname:o}=h);else switch(i.toLowerCase()){case"devext":({customBaseUrl:a,portalHostname:o}=l);break;case"qaext":({customBaseUrl:a,portalHostname:o}=c);break;case"www":({customBaseUrl:a,portalHostname:o}=h);break;default:return null}return{customBaseUrl:a,isPortal:!1,portalHostname:o,urlKey:s}}function eY(t){return/\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(t)}function vR(t){const e=/^https?:\/\/(?:cdn|[a-z\d-]+\.maps)\.arcgis\.com/i,i=/^https?:\/\/(?:cdndev|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,r=/^https?:\/\/(?:cdnqa|[a-z\d-]+\.mapsqa)\.arcgis\.com/i;return e.test(t)?t=t.replace(e,"https://www.arcgis.com"):i.test(t)?t=t.replace(i,"https://devext.arcgis.com"):r.test(t)&&(t=t.replace(r,"https://qaext.arcgis.com")),t}function Hpe(t){const e=atob(t),i=new Uint8Array(e.length);for(let r=0;r<e.length;r++)i[r]=e.charCodeAt(r);return i.buffer}function pPe(t){const e=new Uint8Array(t);let i="";for(let r=0;r<e.length;r++)i+=String.fromCharCode(e[r]);return btoa(i)}const fPe=()=>$e.getLogger("esri.core.urlUtils"),CT=yi.request,mie="esri/config: esriConfig.request.proxyUrl is not set.",Gpe=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,qpe=/^\s*http:/i,mPe=/^\s*https:/i,gPe=/^\s*file:/i,Wpe=/:\d+$/,yPe=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,vPe=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),bPe=new RegExp("^((([^[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^[:]*))(:([0-9]+))?$");let Lo=class{constructor(e=""){this.uri=e,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let i=this.uri.match(vPe);this.scheme=i[2]||(i[1]?"":null),this.authority=i[4]||(i[3]?"":null),this.path=i[5],this.query=i[7]||(i[6]?"":null),this.fragment=i[9]||(i[8]?"":null),this.authority!=null&&(i=this.authority.match(bPe),this.user=i[3]||null,this.password=i[4]||null,this.host=i[6]||i[7],this.port=i[9]||null)}toString(){return this.uri}};const ZP={},wPe=new Lo(yi.applicationUrl);let ao=wPe;const _Pe=xPe();let tY=_Pe;const iY=()=>ao,x2t=()=>tY;function xPe(){const t=ao.path,e=t.slice(0,t.lastIndexOf("/")+1);return`${`${ao.scheme}://${ao.host}${ao.port!=null?`:${ao.port}`:""}`}${e}`}function rn(t){if(!t)return null;const e={path:null,query:null},i=new Lo(t),r=t.indexOf("?");return i.query===null?e.path=t:(e.path=t.slice(0,r),e.query=R0(i.query)),i.fragment&&(e.hash=i.fragment,i.query===null&&(e.path=e.path.slice(0,e.path.length-(i.fragment.length+1)))),e}function R0(t){const e=t.split("&"),i={};for(const r of e){if(!r)continue;const n=r.indexOf("=");let s,a;n<0?(s=decodeURIComponent(r),a=""):(s=decodeURIComponent(r.slice(0,n)),a=decodeURIComponent(r.slice(n+1)));let o=i[s];typeof o=="string"&&(o=i[s]=[o]),Array.isArray(o)?o.push(a):i[s]=a}return i}function Vw(t,e){return t?Object.keys(t).map(i=>{const r=t[i];if(r==null)return"";const n=encodeURIComponent(i)+"=",s=e?.[i];return s?n+encodeURIComponent(s(r)):Array.isArray(r)?r.map(a=>pI(a)?n+encodeURIComponent(JSON.stringify(a)):n+encodeURIComponent(a)).join("&"):pI(r)?n+encodeURIComponent(JSON.stringify(r)):n+encodeURIComponent(r)}).filter(i=>i).join("&"):""}function Ype(t=!1){let e,i=CT.proxyUrl;if(typeof t=="string"){e=Kpe(t);const r=RM(t);r&&(i=r.proxyUrl)}else e=!!t;if(!i)throw fPe().warn(mie),new ee("urlUtils:proxy-not-set",mie);return e&&w8()&&(i=oY(i)),rn(i)}function S2t(t,e=!1){const i=RM(t);let r,n;if(i){const s=rY(i.proxyUrl);r=s.path,n=s.query?R0(s.query):null}else if(e){const s=Ype(t);r=s.path,n=s.query}if(r){const s=rn(t);t=r+"?"+s.path;const a=Vw({...n,...s.query});a&&(t=`${t}?${a}`)}return t}const e2={path:"",query:""};function rY(t){const e=t.indexOf("?");return e!==-1?(e2.path=t.slice(0,e),e2.query=t.slice(e+1)):(e2.path=t,e2.query=null),e2}function Zpe(t){return t=(t=wR(t=OPe(t=rY(t).path),!0)).toLowerCase()}function SPe(t){const e={proxyUrl:t.proxyUrl,urlPrefix:Zpe(t.urlPrefix)},i=CT.proxyRules,r=e.urlPrefix;let n=i.length;for(let s=0;s<i.length;s++){const a=i[s].urlPrefix;if(r.startsWith(a)){if(r.length===a.length)return-1;n=s;break}a.startsWith(r)&&(n=s+1)}return i.splice(n,0,e),n}function RM(t){const e=CT.proxyRules,i=Zpe(t);for(let r=0;r<e.length;r++)if(i.startsWith(e[r].urlPrefix))return e[r]}function $Pe(t,e){if(!t||!e)return!1;t=bR(t),e=bR(e);const i=fie(t),r=fie(e);return i!=null&&r!=null?i.portalHostname===r.portalHostname:i==null&&r==null&&Js(t,e,!0)}function Xpe(t,e){return t=bR(t),e=bR(e),wR(t)===wR(e)}function bR(t){const e=(t=_c(t)).indexOf("/sharing");return e>0?t.slice(0,e):t.replace(/\/+$/,"")}function b8(t,e=CT.interceptors){const i=r=>r instanceof RegExp?r.test(t):typeof r=="string"?t.startsWith(r):r==null;if(e){for(const r of e)if(Array.isArray(r.urls)){if(r.urls.some(i))return r}else if(i(r.urls))return r}return null}function Js(t,e,i=!1){if(!t||!e)return!1;const r=x8(t),n=x8(e);return!(!i&&r.scheme!==n.scheme)&&r.host!=null&&n.host!=null&&r.host.toLowerCase()===n.host.toLowerCase()&&r.port===n.port}function nY(t){if(typeof t=="string"){if(!_l(t))return!0;t=x8(t)}if(Js(t,ao))return!0;const e=CT.trustedServers||[];for(let i=0;i<e.length;i++){const r=TPe(e[i]);for(let n=0;n<r.length;n++)if(Js(t,r[n]))return!0}return!1}function TPe(t){return ZP[t]||(aY(t)||Rp(t)?ZP[t]=[new Lo(oo(t))]:ZP[t]=[new Lo(`http://${t}`),new Lo(`https://${t}`)]),ZP[t]}function oo(t,e=tY,i){return Rp(t)?i?.preserveProtocolRelative?t:ao.scheme==="http"&&ao.authority===xc(t).slice(2)?`http:${t}`:`https:${t}`:aY(t)?t:Bw(t.startsWith("/")?PPe(e):e,t)}function sY(t,e=tY,i){if(t==null||!_l(t))return t;const r=_c(t),n=r.toLowerCase(),s=_c(e).toLowerCase().replace(/\/+$/,""),a=i?_c(i).toLowerCase().replace(/\/+$/,""):null;if(a&&!s.startsWith(a))return t;const o=(f,g,y)=>(y=f.indexOf(g,y))===-1?f.length:y;let l=o(n,"/",n.indexOf("//")+2),c=-1;for(;n.slice(0,l+1)===s.slice(0,l)+"/"&&(c=l+1,l!==n.length);)l=o(n,"/",l+1);if(c===-1||a&&c<a.length)return t;t=r.slice(c);const h=s.slice(c-1).replaceAll(/[^/]+/g,"").length;if(h>0)for(let f=0;f<h;f++)t=`../${t}`;else t=`./${t}`;return t}function _c(t){return t=RPe(t=DPe(t=LPe(t=oo(t=t.trim()))))}function Bw(...t){const e=t.filter(un);if(!e?.length)return;const i=[];if(_l(e[0])){const n=e[0],s=n.indexOf("//");s!==-1&&(i.push(n.slice(0,s+1)),MPe(e[0])&&(i[0]+="/"),e[0]=n.slice(s+2))}else e[0].startsWith("/")&&i.push("");const r=e.reduce((n,s)=>s?n.concat(s.split("/")):n,[]);for(let n=0;n<r.length;n++){const s=r[n];s===".."&&i.length>0&&i[i.length-1]!==".."?i.pop():(!s&&n===r.length-1||s&&(s!=="."||i.length===0))&&i.push(s)}return i.join("/")}function xc(t,e=!1){if(t==null||IT(t)||ng(t))return null;let i=t.indexOf("://");if(i===-1&&Rp(t))i=2;else{if(i===-1)return null;i+=3}const r=t.indexOf("/",i);return r!==-1&&(t=t.slice(0,r)),e&&(t=wR(t,!0)),t}function _l(t){return Rp(t)||aY(t)}function IT(t){return t!=null&&t.startsWith("blob:")}function ng(t){return t!=null&&t.startsWith("data:")}function kPe(t){const e=Uw(t);return e?.isBase64?Hpe(e.data):null}function GV(t){return pPe(t).replaceAll("+","-").replaceAll("/","_").replace(/=+$/,"")}const EPe=/^data:(.*?)(;base64)?,(.*)$/;function Uw(t){const e=t.match(EPe);if(!e)return null;const[,i,r,n]=e;return{mediaType:i,isBase64:!!r,data:n}}function Jpe(t){return t.isBase64?`data:${t.mediaType};base64,${t.data}`:`data:${t.mediaType},${t.data}`}async function CPe(t){return(await fetch(t)).blob()}function $2t(t){const e=kPe(t);if(!e)return null;const i=Uw(t);return new Blob([e],{type:i.mediaType})}function Rp(t){return t!=null&&t.startsWith("/")&&t[1]==="/"}function aY(t){return t!=null&&Gpe.test(t)}function Kpe(t){return t!=null&&mPe.test(t)||ao.scheme==="https"&&Rp(t)}function IPe(t){return t!=null&&qpe.test(t)||ao.scheme==="http"&&Rp(t)}function MPe(t){return t!=null&&gPe.test(t)}function oY(t){return Rp(t)?`https:${t}`:t.replace(qpe,"https:")}function APe(){return ao.scheme==="http"}function w8(){return ao.scheme==="https"}function wR(t,e=!1){return Rp(t)?t.slice(2):(t=t.replace(Gpe,""),e&&t.length>1&&t.startsWith("/")&&t[1]==="/"&&(t=t.slice(2)),t)}function PPe(t){const e=t.indexOf("//"),i=t.indexOf("/",e+2);return i===-1?t:t.slice(0,i)}function lY(t){let e=0;if(_l(t)){const r=t.indexOf("//");r!==-1&&(e=r+2)}const i=t.lastIndexOf("/");return i<e?t:t.slice(0,i+1)}function T2t(t,e){if(!t)return"";const i=rn(t).path.replace(/\/+$/,""),r=i.slice(i.lastIndexOf("/")+1);if(!e?.length)return r;const n=new RegExp(`\\.(${e.join("|")})$`,"i");return r.replace(n,"")}function OPe(t){return t.endsWith("/")?t:`${t}/`}function Qpe(t){return t.replace(/\/+$/,"")}function LPe(t){if(/^https?:\/\//i.test(t)){const e=rY(t);t=(t=e.path.replaceAll(/\/{2,}/g,"/")).replace("/","//"),e.query&&(t+=`?${e.query}`)}return t}function DPe(t){return t.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}function RPe(t){const e=CT.httpsDomains;if(!IPe(t))return t;const i=t.indexOf("/",7);let r;if(r=i===-1?t:t.slice(0,i),r=r.toLowerCase().slice(7),Wpe.test(r)){if(!r.endsWith(":80"))return t;r=r.slice(0,-3),t=t.replace(":80","")}return APe()&&r===ao.authority&&!yPe.test(t)||(w8()&&r===ao.authority||e&&e.some(n=>r===n||r.endsWith(`.${n}`))||w8()&&!RM(t))&&(t=oY(t)),t}function _8(t,e,i){if(!(e&&i&&t&&_l(t)))return t;const r=t.indexOf("//"),n=t.indexOf("/",r+2),s=t.indexOf(":",r+2),a=Math.min(n<0?t.length:n,s<0?t.length:s);return t.slice(r+2,a).toLowerCase()!==e.toLowerCase()?t:`${t.slice(0,r+2)}${i}${t.slice(a)}`}function efe(t,e){const i=new URL(t);return i.host=e,i.port&&!Wpe.test(e)&&(i.port=""),i.toString()}function zPe(t){return new URL(t).host}function x8(t){return typeof t=="string"?new Lo(oo(t)):(t.scheme||(t.scheme=ao.scheme),t)}function k2t(t){return FPe.test(t)}function tfe(t,e){const i=rn(t),r=Object.keys(i.query||{});return r.length>0&&e&&e.warn("removeQueryParameters()",`Url query parameters are not supported, the following parameters have been removed: ${r.join(", ")}.`),i.path}function ife(t,e,i){const r=rn(t),n=r.query||{};return n[e]=String(i),`${r.path}?${Vw(n)}`}function uC(t,e){if(!e)return t;const i=rn(t),r=i.query||{};for(const[s,a]of Object.entries(e))a!=null&&(r[s]=a);const n=Vw(r);return n?`${i.path}?${n}`:i.path}function rfe(t){if(t==null)return null;const e=t.match(nfe);return e?e[2]:null}function gie(t){if(t==null)return null;const e=t.match(nfe);return e?{path:e[1],extension:e[2]}:{path:t,extension:null}}async function E2t(t){return typeof t=="string"?Uw(t)??{data:t}:new Promise((e,i)=>{const r=new FileReader;r.readAsDataURL(t),r.onload=()=>e(Uw(r.result)),r.onerror=n=>i(n)})}const nfe=/([^.]*)\.([^/]*)$/,FPe=/(^data:image\/svg|\.svg$)/i,sfe="20251114",afe="ec088c999de2dac6fb9478a47da1bad775545540";Symbol.dispose??=Symbol("Symbol.dispose"),Symbol.asyncDispose??=Symbol("Symbol.asyncDispose");const ofe="4.34";let oi,cY=ofe;function NPe(t){oi=t}function jPe(t){const e=oi?.findCredential(t);return e?.token?ife(t,"token",e.token):t}cY="4.34.8",ve("host-webworker")||globalThis.$arcgis||Object.defineProperty(globalThis,"$arcgis",{configurable:!1,enumerable:!0,writable:!1,value:{}}),ve("host-webworker");const VPe="modulepreload",BPe=function(t){return"/mmsp_land_hl/"+t},yie={},fe=function(e,i,r){let n=Promise.resolve();if(i&&i.length>0){let l=function(c){return Promise.all(c.map(h=>Promise.resolve(h).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=a?.nonce||a?.getAttribute("nonce");n=l(i.map(c=>{if(c=BPe(c),c in yie)return;yie[c]=!0;const h=c.endsWith(".css"),f=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${f}`))return;const g=document.createElement("link");if(g.rel=h?"stylesheet":VPe,h||(g.as="script"),g.crossOrigin="",g.href=c,o&&g.setAttribute("nonce",o),document.head.appendChild(g),h)return new Promise((y,b)=>{g.addEventListener("load",y),g.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return n.then(a=>{for(const o of a||[])o.status==="rejected"&&s(o.reason);return e().catch(s)})};function Wm(t,e){const i=e?.url?.path;if(t&&i&&(t=oo(t,i,{preserveProtocolRelative:!0}),e.portalItem&&e.readResourcePaths)){const r=sY(t,e.portalItem.itemUrl);r!=null&&r.startsWith(UPe)&&e.readResourcePaths.push(e.portalItem.resourceFromPath(r).path)}return(t=S8(t,e?.portal))&&CF.test(t)?uY(t):t}function Hw(t,e,i=0){if((t=t&&CF.test(t)?dfe(t):t)==null)return t;!_l(t)&&e?.blockedRelativeUrls&&e.blockedRelativeUrls.push(t);let r=oo(t);if(e){const n=e.verifyItemRelativeUrls?.rootPath||e.url?.path;if(n){const s=S8(n,e.portal),a=S8(r,e.portal);r=sY(a,s,s),r!=null&&r!==a&&r!==t&&e.verifyItemRelativeUrls&&e.verifyItemRelativeUrls.writtenUrls.push(r)}}return r=ufe(r,e?.portal),_l(r)&&(r=_c(r)),e?.resources&&e?.portalItem&&!_l(r)&&!ng(r)&&i===0&&e.resources.toKeep.push({resource:e.portalItem.resourceFromPath(r),compress:!1}),r}function EF(t,e,i){return Wm(t,i)}function Gw(t,e,i,r){const n=Hw(t,r);n!==void 0&&(e[i]=n)}const CF=/\/items\/([^/]+)\/resources\/(.*)/,UPe="./resources/";function lfe(t){return(t?.match(CF)??null)?.[1]??null}function cfe(t){const e=t?.match(CF)??null;if(e==null)return null;const i=e[2],r=i.lastIndexOf("/");if(r===-1){const{path:a,extension:o}=gie(i);return{prefix:null,filename:a,extension:o}}const{path:n,extension:s}=gie(i.slice(r+1));return{prefix:i.slice(0,r),filename:n,extension:s}}function ufe(t,e){return e&&!e.isPortal&&e.urlKey&&e.customBaseUrl?_8(t,`${e.urlKey}.${e.customBaseUrl}`,e.portalHostname):t}function S8(t,e){if(!e||e.isPortal||!e.urlKey||!e.customBaseUrl)return t;const i=`${e.urlKey}.${e.customBaseUrl}`,r=iY();return Js(r,`${r.scheme}://${i}`)?_8(t,e.portalHostname,i):_8(t,i,e.portalHostname)}function uY(t){if(!t)return t||null;let e=t;return e&&oi&&!oi.findCredential(e)&&(e=vR(e),e=e.replace(/^https?:\/\/www\.arcgis\.com/,"https://cdn.arcgis.com"),e=e.replace(/^https?:\/\/devext\.arcgis\.com/,"https://cdndev.arcgis.com"),e=e.replace(/^https?:\/\/qaext\.arcgis\.com/,"https://cdnqa.arcgis.com")),e}function dfe(t){if(!t)return t||null;let e=t;return e=e.replace(/^https?:\/\/cdn\.arcgis\.com/,"https://www.arcgis.com"),e=e.replace(/^https?:\/\/cdndev\.arcgis\.com/,"https://devext.arcgis.com"),e=e.replace(/^https?:\/\/cdnqa\.arcgis\.com/,"https://qaext.arcgis.com"),e&&oi&&!oi.findCredential(e)&&(e=vR(e)),e}const HPe=Object.freeze(Object.defineProperty({__proto__:null,ensureMainOnlineDomain:ufe,fromCDNUrl:dfe,fromJSON:Wm,itemIdFromResourceUrl:lfe,prefixAndFilenameFromResourceUrl:cfe,read:EF,toCDNUrl:uY,toJSON:Hw,write:Gw},Symbol.toStringTag,{value:"Module"})),hfe={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",knowledgegraphserver:"KnowledgeGraphServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer","3dtilesserver":"3DTilesServer",videoserver:"VideoServer"},pfe=Object.values(hfe),ffe=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${pfe.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),GPe=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^/\\n]+)\\/(${pfe.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),qPe=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function C2t(t){return ffe.test(t)}function wu(t){if(t==null)return null;const e=rn(t),i=e?.path.match(ffe)||e?.path.match(GPe);if(!i)return null;const[,r,n,s,a]=i,o=n.indexOf("/");return{title:dY(o!==-1?n.slice(o+1):n),serverType:hfe[s.toLowerCase()],sublayer:a!=null&&a!==""?parseInt(a,10):null,url:{path:r}}}function WPe(t){const e=rn(t).path.match(qPe);return e?{serviceUrl:e[1],sublayerId:Number(e[2])}:null}function dY(t){return(t=t.replaceAll(/\s*[/_]+\s*/g," "))[0].toUpperCase()+t.slice(1)}function YPe(t,e){const i=[];if(t){const r=wu(t);r!=null&&r.title&&i.push(r.title)}if(e){const r=dY(e);i.push(r)}if(i.length===2){if(i[0].toLowerCase().includes(i[1].toLowerCase()))return i[0];if(i[1].toLowerCase().includes(i[0].toLowerCase()))return i[1]}return i.join(" - ")}function _R(t){let e=xc(t,!0);return!!e&&(e=e.toLowerCase(),e.endsWith(".arcgis.com")&&(e.startsWith("services")||e.startsWith("tiles")||e.startsWith("features")||/^[a-z\d-]+\.svcs[a-z\d-]*\./.test(e)))}function ZPe(t,e){return t&&Qpe(tfe(t,e))}function XPe(t){let{url:e}=t;if(!e)return{url:e};e=tfe(e,t.logger);const i=rn(e),r=wu(i.path);let n;if(r!=null)r.sublayer!=null&&t.layer.layerId==null&&(n=r.sublayer),e=r.url.path;else if(t.nonStandardUrlAllowed){const s=WPe(i.path);s!=null&&(e=s.serviceUrl,n=s.sublayerId)}return{url:Qpe(e),layerId:n}}function JPe(t,e,i,r,n){Gw(e,r,"url",n),r.url&&t.layerId!=null&&(r.url=Bw(r.url,i,t.layerId.toString()))}function I2t(t){if(!t)return!1;const e=t.toLowerCase(),i=e.includes("/services/"),r=e.includes("/mapserver/wmsserver"),n=e.includes("/imageserver/wmsserver"),s=e.includes("/wmsserver");return i&&(r||n||s)}function M2t(t){if(!t)return!1;const e=new Lo(oo(t)),i=e.authority?.toLowerCase();return i==="server.arcgisonline.com"||i==="services.arcgisonline.com"}const KPe=new Set(["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"]);function hY(t){if(!pY(t))return null;const e=r=>r instanceof RegExp?r.test(t):typeof r=="string"&&t.startsWith(r),i=yi.apiKeys;if(Array.isArray(i.scopes)){for(const r of i.scopes)if(Array.isArray(r.urls)){if(r.urls.some(e))return r.token}else if(e(r.urls))return r.token}return i.basemapStyles&&/^https?:\/\/(i?basemaps|basemapstyles)-api\.arcgis\.com\//i.test(t)?i.basemapStyles:yi.apiKey&&/^https?:\/\/.+\.arcgis\.com(\/|$)/i.test(t)?yi.apiKey:null}function $8(){return yi.apiKey!=null||yi.apiKeys.basemapStyles!=null}function mfe(t,e){return e?pY(t):hY(t)!=null}function pY(t){const e=xc(t,!0);return!!e&&!KPe.has(e)&&!t.endsWith("/sharing/rest/generateToken")}function QPe(t,e,i=!1,r){return new Promise((n,s)=>{if(Pa(r))return void s(vie());let a=()=>{c(),s(new Error(`Unable to load ${e}`))},o=async()=>{const h=t;try{await h.decode()}catch{}c(),n(h)},l=()=>{if(!t)return;const h=t;c(),h.src="",s(vie())};const c=()=>{t&&(t.removeEventListener("error",a),t.removeEventListener("load",o),a=null,o=null,t=null,r?.removeEventListener("abort",l),l=null,i&&URL.revokeObjectURL(e))};r?.addEventListener("abort",l),t.addEventListener("error",a),t.addEventListener("load",o)})}function vie(){try{return new DOMException("Aborted","AbortError")}catch{const t=new Error;return t.name="AbortError",t}}const gfe="Timeout exceeded";function eOe(){return new Error(gfe)}function A2t(t){return typeof t=="object"&&!!t&&"message"in t&&t.message===gfe}function tOe(t){yi.request.crossOriginNoCorsDomains||(yi.request.crossOriginNoCorsDomains={});const e=yi.request.crossOriginNoCorsDomains;for(let i of t)i=i.toLowerCase(),/^https?:\/\//.test(i)?e[xc(i)??""]=0:(e[xc("http://"+i)??""]=0,e[xc("https://"+i)??""]=0)}function iOe(t){const e=yi.request.crossOriginNoCorsDomains;if(e){let i=xc(t);if(i)return i=i.toLowerCase(),!Js(i,iY())&&e[i]<Date.now()-36e5}return!1}async function rOe(t){const e=rn(t);t=e.path,e.query?.f==="json"&&(t+="?f=json");try{await fetch(t,{mode:"no-cors",credentials:"include"})}catch{}const i=yi.request.crossOriginNoCorsDomains,r=xc(t);i&&r&&(i[r.toLowerCase()]=Date.now())}const T8=new Map;function nOe(t,e){const i=e?.preferredHost;if(!i||Js(t,`https://${i}`,!0))return;const r=wu(t);if(!r||r.serverType!=="FeatureServer"||eY(t))return;const n=r.url.path.toLowerCase();T8.has(n)||T8.set(n,i)}function bie(t){const e=wu(t)?.url.path.toLowerCase();if(!e)return t;const i=T8.get(e);return i?efe(t,i):t}async function Nt(t,e){t instanceof URL&&(t=t.toString()),e?.query instanceof URLSearchParams&&(e.query=R0(e.query.toString().replaceAll("+"," ")));const i=ng(t),r=IT(t);r||i||(t=_c(t));const n={url:t,requestOptions:{...e}},s=y=>({data:y,getAllHeaders:F$,getHeader:F$,httpStatus:200,requestOptions:n.requestOptions,url:n.url}),a=b8(t,au.internalInterceptors);if(a){const y=await _ie(a,n);if(y!=null)return s(y)}let o=b8(t);if(o){const y=await _ie(o,n);if(y!=null)return s(y);o.after||o.error||(o=null)}if(t=n.url,(e=n.requestOptions).responseType==="image"&&(ve("host-webworker")||ve("host-node")))throw Ld("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),n);if(e.method==="head"){if(e.body)throw Ld("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),n);if(i||r)throw Ld("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),n)}if(await cOe(),xR)return xR.execute(t,e);const l=new AbortController,c=Ma(e,()=>l.abort()),h={controller:l,credential:void 0,credentialToken:void 0,fetchOptions:void 0,hasToken:!1,interceptor:o,params:n,redoRequest:!1,useIdentity:au.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},f=e.useRequestQueue?fOe(h):E8(h),g=await f.finally(()=>c?.remove());return o?.after?.(g),g}let xR,yfe=!1;const au=yi.request,vfe="FormData"in globalThis,sOe=new Set([499,498,403,401]),aOe=new Set(["COM_0056","COM_0057","SB_0008"]),oOe=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],F$=()=>null,SR=Symbol();function lOe(t){const e=xc(t);e&&!Nt._corsServers.includes(e)&&Nt._corsServers.push(e)}function wie(t){const e=xc(t);return!e||e.endsWith(".arcgis.com")||Nt._corsServers.includes(e)||nY(e)}function Ld(t,e,i,r){let n;const s={url:i.url,requestOptions:i.requestOptions,getAllHeaders:F$,getHeader:F$,ssl:!1};if(e instanceof ee)return e.details?(e.details=de(e.details),e.details.url=i.url,e.details.requestOptions=i.requestOptions):e.details=s,e;if(e){const a=r&&(()=>Array.from(r.headers)),o=r&&(h=>r.headers.get(h)),l=r?.status,c=e.message;c&&(n=c),a&&o&&(s.getAllHeaders=a,s.getHeader=o),s.httpStatus=(e.httpCode!=null?e.httpCode:e.code)||l||0,s.subCode=e.subcode,s.messageCode=e.messageCode,typeof e.details=="string"?(s.messages=[e.details],n??=e.details):(s.messages=e.details,n??=s.messages?.[0]),s.raw=SR in e?e[SR]:e}return n??="Error",ss(e)?Hi():new ee(t,n,s)}async function cOe(){ve("host-webworker")&&(!xR&&globalThis.invokeStaticMessage?xR=await fe(()=>import("./request-BfkMEe1T.js"),[]):yfe=!0)}async function k8(){oi||await fe(()=>Promise.resolve().then(()=>qge),void 0)}async function uOe(t){const e=t.params.url,i=t.params.requestOptions,r=t.controller.signal,n=i.body;let s=null,a=null;if(vfe&&"HTMLFormElement"in globalThis&&(n instanceof FormData?s=n:n instanceof HTMLFormElement&&(s=new FormData(n))),typeof n=="string"&&(a=n),t.fetchOptions={cache:i.cacheBust?"no-cache":"default",credentials:"same-origin",headers:i.headers||{},keepalive:i.keepAlive??!1,method:i.method==="head"?"HEAD":"GET",mode:"cors",priority:au.priority,redirect:"follow",signal:r},(s||a)&&(t.fetchOptions.body=s||a),(yfe||i.authMode==="anonymous")&&(t.useIdentity=!1),t.hasToken=!!(/token=/i.test(e)||i.query?.token||s?.get("token")),!t.hasToken){const o=hY(e);o&&(i.query??={},i.query.token=o,t.hasToken=!0)}if(t.useIdentity&&!t.hasToken&&!t.credential&&!t.credentialToken&&!bfe(e)&&!Pa(r)){let o;i.authMode==="immediate"?(await k8(),o=await oi.getCredential(e,{signal:r})):i.authMode==="no-prompt"?(await k8(),o=await oi.getCredential(e,{prompt:!1,signal:r}).catch(()=>{})):oi&&(o=oi.findCredential(e)),o&&(t.credential=o,t.credentialToken=o.token,t.useSSL=!!o.ssl)}}function bfe(t){return oOe.some(e=>e.test(t))}async function dOe(t){let e=t.params.url,i=bie(e);const r=t.params.requestOptions,n=t.fetchOptions??{},s=IT(e)||ng(e),a=r.responseType||"json",o=s?0:r.timeout!=null?r.timeout:au.timeout;let l=!1;if(!s){t.useSSL&&(e=oY(e));let y={...r.query};t.credentialToken&&(y.token=t.credentialToken);let b=Vw(y);ve("esri-url-encodes-apostrophe")&&(b=b.replaceAll("'","%27"));const _=i.length+1+b.length;let S;l=r.method==="delete"||r.method==="post"||r.method==="put"||!!r.body||_>au.maxUrlLength;const $=r.useProxy||!!RM(e);if($){const C=Ype(e);S=C.path,!l&&S.length+1+_>au.maxUrlLength&&(l=!0),C.query&&(y={...C.query,...y})}if(n.method==="HEAD"&&(l||$)){if(l)throw _>au.maxUrlLength?Ld("request:invalid-parameters",new Error("URL exceeds maximum length"),t.params):Ld("request:invalid-parameters",new Error("cannot use POST request when method is 'head'"),t.params);if($)throw Ld("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),t.params)}l?(n.method=r.method==="delete"?"DELETE":r.method==="put"?"PUT":"POST",r.body?e=uC(e,y):(n.body=Vw(y),n.headers||(n.headers={}),n.headers["Content-Type"]="application/x-www-form-urlencoded")):e=uC(e,y),$&&(t.useProxy=!0,e=`${S}?${e}`),y.token&&vfe&&n.body instanceof FormData&&!eY(e)&&n.body.set("token",y.token),r.hasOwnProperty("withCredentials")?t.withCredentials=r.withCredentials:Js(e,iY())||(nY(e)||oi&&oi.findServerInfo(e)?.webTierAuth)&&(t.withCredentials=!0),t.withCredentials&&(n.credentials="include",iOe(e)&&await rOe(l?uC(e,y):e)),i=bie(e)}let c,h,f=0,g=!1;o>0&&(f=setTimeout(()=>{g=!0,t.controller.abort()},o));try{if(r.responseType==="native-request-init")h=n,h.url=i,r.signal?h.signal=r.signal:delete h.signal;else if(r.responseType!=="image"||n.cache!=="default"||n.keepalive||n.method!=="GET"||l||hOe(r.headers)||!s&&!t.useProxy&&au.proxyUrl&&!wie(e)){if(Nt._beforeFetch&&await Nt._beforeFetch(e,n),c=await fetch(i,n),Nt._afterFetch&&await Nt._afterFetch(c),t.useProxy||lOe(e),r.responseType==="native")h=c;else if(n.method!=="HEAD")if(c.ok){switch(a){case"array-buffer":h=await c.arrayBuffer();break;case"blob":case"image":h=await c.blob();break;default:h=await c.text()}if(f&&(clearTimeout(f),f=0),a==="json"||a==="xml"||a==="document")if(h)switch(a){case"json":h=JSON.parse(h);break;case"xml":h=xie(h,"application/xml");break;case"document":h=xie(h,"text/html")}else h=null;if(h){if(a==="array-buffer"||a==="blob"){const y=c.headers.get("Content-Type");if(y&&/application\/json|text\/plain/i.test(y)&&h[a==="blob"?"size":"byteLength"]<=750)try{const b=await new Response(h).json();b.error&&(h=b)}catch{}}a==="image"&&h instanceof Blob&&(h=await Sie(URL.createObjectURL(h),t,!0))}}else{h=await c.text();try{h=JSON.parse(h)}catch{}}}else h=await Sie(i,t)}catch(y){if(y.name==="AbortError")throw g?eOe():Hi("Request canceled");if(!(!c&&y instanceof TypeError&&au.proxyUrl)||r.body||r.method==="delete"||r.method==="head"||r.method==="post"||r.method==="put"||t.useProxy||wie(e))throw y;t.redoRequest=!0,SPe({proxyUrl:au.proxyUrl,urlPrefix:xc(e)??""})}finally{f&&clearTimeout(f)}return[c,h]}async function _ie(t,e){if(t.responseData!=null)return t.responseData;if(t.headers&&(e.requestOptions.headers={...e.requestOptions.headers,...t.headers}),t.query&&(e.requestOptions.query={...e.requestOptions.query,...t.query}),t.before){let i,r;try{r=await t.before(e)}catch(n){i=Ld("request:interceptor",n,e)}if((r instanceof Error||r instanceof ee)&&(i=Ld("request:interceptor",r,e)),i)throw t.error&&t.error(i),i;return r}}function hOe(t){if(t){for(const e of Object.getOwnPropertyNames(t))if(t[e])return!0}return!1}function xie(t,e){let i;try{i=new DOMParser().parseFromString(t,e)}catch{}if(!i||i.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return i}Nt._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"],Nt._beforeFetch=void 0,Nt._afterFetch=void 0;const pOe=new Map;async function fOe(t){const e=gOe(t.params.url);if(!e)return E8(t);const{QueueProcessor:i}=await fe(()=>import("./QueueProcessor-DoxQrXbJ.js"),[]);return d_(pOe,e.origin,()=>{const n=e.isHosted?ve("request-queue-concurrency-hosted"):ve("request-queue-concurrency-non-hosted");return new i({concurrency:n,process:s=>{if(Pa(s.params.requestOptions))throw Ld("",Hi("Request canceled"),s.params);return E8(s)}})}).push(t)}async function E8(t){let e,i;await uOe(t);try{do[e,i]=await dOe(t);while(!await mOe(t,e,i))}catch(s){const a=Ld("request:server",s,t.params,e);throw a.details.ssl=t.useSSL,t.interceptor?.error&&t.interceptor.error(a),a}const r=t.params.url;if(i)if(/\/sharing\/rest\/(accounts|portals)\/self/i.test(r)){if(!t.hasToken&&!t.credentialToken&&i.user?.username&&!nY(r)){const s=xc(r,!0);s&&au.trustedServers.push(s)}Array.isArray(i.authorizedCrossOriginNoCorsDomains)&&tOe(i.authorizedCrossOriginNoCorsDomains)}else(t.params.requestOptions.responseType||"json")==="json"&&nOe(r,i);const n=t.credential;if(n&&oi){let a=oi.findServerInfo(n.server)?.owningSystemUrl;if(a){a=a.replace(/\/?$/,"/sharing");const o=oi.findCredential(a,n.userId);o&&oi._getIdenticalSvcIdx(a,o)===-1&&o.resources.unshift(a)}}return{data:i,getAllHeaders:e?()=>Array.from(e.headers):F$,getHeader:e?s=>e.headers.get(s):F$,httpStatus:e?.status??200,requestOptions:t.params.requestOptions,ssl:t.useSSL,url:t.params.url}}async function mOe(t,e,i){if(t.redoRequest)return t.redoRequest=!1,!1;const r=t.params.requestOptions;if(!e||r.responseType==="native"||r.responseType==="native-request-init")return!0;let n,s;if(i&&(i.error&&typeof i.error=="object"?n=i.error:i.status==="error"&&Array.isArray(i.messages)&&(n={...i},n[SR]=i,n.details=i.messages)),!n&&!e.ok)throw n=new Error(`Unable to load ${e.url} status: ${e.status}`),n[SR]=i,n;let a,o=null;n&&(s=Number(n.code),o=n.hasOwnProperty("subcode")?Number(n.subcode):null,a=n.messageCode,a=a?.toUpperCase());const l=r.authMode;if(s===403&&(o===4||n.message?.toLowerCase().includes("ssl")&&!n.message.toLowerCase().includes("permission"))){if(!t.useSSL)return t.useSSL=!0,!1}else if(!t.hasToken&&t.useIdentity&&(l!=="no-prompt"||s===498)&&s!==void 0&&sOe.has(s)&&!bfe(t.params.url)&&(s!==403||(!a||!aOe.has(a))&&(o==null||o===2&&t.credentialToken))){await k8();try{const c=await oi.getCredential(t.params.url,{error:Ld("request:server",n,t.params),credential:t.credential,prompt:l!=="no-prompt",signal:t.controller.signal,token:t.credentialToken});return t.credential=c,t.credentialToken=c.token,t.useSSL=t.useSSL||c.ssl,!1}catch(c){if(l==="no-prompt")return t.credential=void 0,t.credentialToken=void 0,!1;n=c}}if(n)throw n;return!0}function Sie(t,e,i=!1){const r=e.controller.signal,n=new Image;return e.withCredentials?n.crossOrigin="use-credentials":n.crossOrigin="anonymous",n.alt="",n.fetchPriority=au.priority,n.src=t,QPe(n,t,i,r)}function gOe(t){let e,i;return typeof t=="string"?(e=xc(t,!0),i=_R(t)):(e=t.origin,i=_R(t.toString())),e==null?null:{origin:e,isHosted:i}}const IF=t=>{const e=t;class i extends e{constructor(){super(...arguments),this._listenersMap=null}clearEvents(){this._listenersMap?.clear(),this._listenersMap=null}destroy(){this.clearEvents()}emit(n,s){let a=this._listenersMap?.get(n);if(!a)return!1;let o=!1;for(const l of a.slice()){const c="deref"in l?l.deref():l;c?c?.call(this,s):o=!0}return o&&(a=a.filter(l=>!("deref"in l)||l.deref()!=null),this._listenersMap.set(n,a)),a.length>0}on(n,s){if(Array.isArray(n)){const o=n.map(l=>this.on(l,s));return c_(o)}if(n.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap??=new Map;const a=this._listenersMap.get(n)||[];return a.push(s),this._listenersMap.set(n,a),Si(()=>{const o=this._listenersMap?.get(n),l=o?.indexOf(s)??-1;l>=0&&o.splice(l,1)})}once(n,s){const a=this.on(n,o=>{a.remove(),("deref"in s?s.deref():s)?.call(null,o)});return a}hasEventListener(n){const s=this._listenersMap?.get(n);return s!=null&&s.length>0}}return i},fY=IF(class{}),wfe=fY,Rv=IF(lt);let Gt=class{constructor(e,i={ignoreUnknown:!1,useNumericKeys:!1}){this._jsonToAPI=e,this._options=i,this.apiValues=[],this.jsonValues=[],this._apiToJSON=yOe(e),this.apiValues=$ie(this._apiToJSON),this.jsonValues=$ie(this._jsonToAPI),this.read=r=>this.fromJSON(r),this.write=(r,n,s)=>{const a=this.toJSON(r);a!==void 0&&Bn(s,a,n)},this.write.isJSONMapWriter=!0}toJSON(e){if(e==null)return null;if(this._apiToJSON.hasOwnProperty(e)){const i=this._apiToJSON[e];return this._options.useNumericKeys?+i:i}return this._options.ignoreUnknown?null:e}fromJSON(e){return e!=null&&this._jsonToAPI.hasOwnProperty(e)?this._jsonToAPI[e]:this._options.ignoreUnknown?void 0:e}};function yOe(t){const e={};for(const i in t)e[t[i]]=i;return e}function $ie(t){const e=[];for(const i in t)e.push(i);return e.sort(),e}function Gn(){return function(t,e){return new Gt(t,{ignoreUnknown:!0,...e})}}let dC;const vOe=globalThis.esriConfig?.locale??globalThis.dojoConfig?.locale,C8=globalThis.document?.documentElement;function _fe(){const t=C8?.getAttribute("lang"),e=globalThis.navigator?.language;return vOe??t??e??"en"}function xl(){return dC===void 0&&(dC=_fe()),dC}const bOe=/^(?<language>[a-z]{2,3})(?:-(?<extlang>[a-z]{3}))?(?:-[A-Z][a-z]{3})?(?:-(?<region>[A-Z]{2}|\d{3}))?(?:-.*)?$/;function mY(t=xl()){return Sfe(t)?.language}function xfe(t=xl()){const e=Sfe(t);return e?.language&&e?.extlang?t.replace(`${e.language}-`,""):t}function Sfe(t=xl()){return bOe.exec(t)?.groups}const a3=[];function gY(t){return a3.push(t),Si(()=>{a3.splice(a3.indexOf(t),1)})}const o3=[];function yY(t){return o3.push(t),Si(()=>o3.splice(o3.indexOf(t),1))}function Tie(){const t=_fe();dC!==t&&([...o3].forEach(e=>e(t)),dC=t,[...a3].forEach(e=>e(t)))}globalThis.addEventListener?.("languagechange",Tie),C8&&new MutationObserver(()=>{Tie()}).observe(C8,{attributeFilter:["lang"]});const _u="system",xv="unknown",zp="UTC",wOe=Intl.DateTimeFormat().resolvedOptions().timeZone,kie=new Map([["AUS Central Standard Time","Australia/Darwin"],["AUS Eastern Standard Time","Australia/Sydney"],["Afghanistan Standard Time","Asia/Kabul"],["Alaskan Standard Time","America/Anchorage"],["Aleutian Standard Time","America/Adak"],["Altai Standard Time","Asia/Barnaul"],["Arab Standard Time","Asia/Riyadh"],["Arabian Standard Time","Asia/Dubai"],["Arabic Standard Time","Asia/Baghdad"],["Argentina Standard Time","America/Buenos_Aires"],["Astrakhan Standard Time","Europe/Astrakhan"],["Atlantic Standard Time","America/Halifax"],["Aus Central W. Standard Time","Australia/Eucla"],["Azerbaijan Standard Time","Asia/Baku"],["Azores Standard Time","Atlantic/Azores"],["Bahia Standard Time","America/Bahia"],["Bangladesh Standard Time","Asia/Dhaka"],["Belarus Standard Time","Europe/Minsk"],["Bougainville Standard Time","Pacific/Bougainville"],["Canada Central Standard Time","America/Regina"],["Cape Verde Standard Time","Atlantic/Cape_Verde"],["Caucasus Standard Time","Asia/Yerevan"],["Cen. Australia Standard Time","Australia/Adelaide"],["Central America Standard Time","America/Guatemala"],["Central Asia Standard Time","Asia/Bishkek"],["Central Brazilian Standard Time","America/Cuiaba"],["Central Europe Standard Time","Europe/Budapest"],["Central European Standard Time","Europe/Warsaw"],["Central Pacific Standard Time","Pacific/Guadalcanal"],["Central Standard Time","America/Chicago"],["Central Standard Time (Mexico)","America/Mexico_City"],["Chatham Islands Standard Time","Pacific/Chatham"],["China Standard Time","Asia/Shanghai"],["Cuba Standard Time","America/Havana"],["Dateline Standard Time","Etc/GMT+12"],["E. Africa Standard Time","Africa/Nairobi"],["E. Australia Standard Time","Australia/Brisbane"],["E. Europe Standard Time","Europe/Chisinau"],["E. South America Standard Time","America/Sao_Paulo"],["Easter Island Standard Time","Pacific/Easter"],["Eastern Standard Time","America/New_York"],["Eastern Standard Time (Mexico)","America/Cancun"],["Egypt Standard Time","Africa/Cairo"],["Ekaterinburg Standard Time","Asia/Yekaterinburg"],["FLE Standard Time","Europe/Kiev"],["Fiji Standard Time","Pacific/Fiji"],["GMT Standard Time","Europe/London"],["GTB Standard Time","Europe/Bucharest"],["Georgian Standard Time","Asia/Tbilisi"],["Greenland Standard Time","America/Godthab"],["Greenwich Standard Time","Atlantic/Reykjavik"],["Haiti Standard Time","America/Port-au-Prince"],["Hawaiian Standard Time","Pacific/Honolulu"],["India Standard Time","Asia/Calcutta"],["Iran Standard Time","Asia/Tehran"],["Israel Standard Time","Asia/Jerusalem"],["Jordan Standard Time","Asia/Amman"],["Kaliningrad Standard Time","Europe/Kaliningrad"],["Korea Standard Time","Asia/Seoul"],["Libya Standard Time","Africa/Tripoli"],["Line Islands Standard Time","Pacific/Kiritimati"],["Lord Howe Standard Time","Australia/Lord_Howe"],["Magadan Standard Time","Asia/Magadan"],["Magallanes Standard Time","America/Punta_Arenas"],["Marquesas Standard Time","Pacific/Marquesas"],["Mauritius Standard Time","Indian/Mauritius"],["Middle East Standard Time","Asia/Beirut"],["Montevideo Standard Time","America/Montevideo"],["Morocco Standard Time","Africa/Casablanca"],["Mountain Standard Time","America/Denver"],["Mountain Standard Time (Mexico)","America/Mazatlan"],["Myanmar Standard Time","Asia/Rangoon"],["N. Central Asia Standard Time","Asia/Novosibirsk"],["Namibia Standard Time","Africa/Windhoek"],["Nepal Standard Time","Asia/Katmandu"],["New Zealand Standard Time","Pacific/Auckland"],["Newfoundland Standard Time","America/St_Johns"],["Norfolk Standard Time","Pacific/Norfolk"],["North Asia East Standard Time","Asia/Irkutsk"],["North Asia Standard Time","Asia/Krasnoyarsk"],["North Korea Standard Time","Asia/Pyongyang"],["Omsk Standard Time","Asia/Omsk"],["Pacific SA Standard Time","America/Santiago"],["Pacific Standard Time","America/Los_Angeles"],["Pacific Standard Time (Mexico)","America/Tijuana"],["Pakistan Standard Time","Asia/Karachi"],["Paraguay Standard Time","America/Asuncion"],["Qyzylorda Standard Time","Asia/Qyzylorda"],["Romance Standard Time","Europe/Paris"],["Russia Time Zone 10","Asia/Srednekolymsk"],["Russia Time Zone 11","Asia/Kamchatka"],["Russia Time Zone 3","Europe/Samara"],["Russian Standard Time","Europe/Moscow"],["SA Eastern Standard Time","America/Cayenne"],["SA Pacific Standard Time","America/Bogota"],["SA Western Standard Time","America/La_Paz"],["SE Asia Standard Time","Asia/Bangkok"],["Saint Pierre Standard Time","America/Miquelon"],["Sakhalin Standard Time","Asia/Sakhalin"],["Samoa Standard Time","Pacific/Apia"],["Sao Tome Standard Time","Africa/Sao_Tome"],["Saratov Standard Time","Europe/Saratov"],["Singapore Standard Time","Asia/Singapore"],["South Africa Standard Time","Africa/Johannesburg"],["South Sudan Standard Time","Africa/Juba"],["Sri Lanka Standard Time","Asia/Colombo"],["Sudan Standard Time","Africa/Khartoum"],["Syria Standard Time","Asia/Damascus"],["Taipei Standard Time","Asia/Taipei"],["Tasmania Standard Time","Australia/Hobart"],["Tocantins Standard Time","America/Araguaina"],["Tokyo Standard Time","Asia/Tokyo"],["Tomsk Standard Time","Asia/Tomsk"],["Tonga Standard Time","Pacific/Tongatapu"],["Transbaikal Standard Time","Asia/Chita"],["Turkey Standard Time","Europe/Istanbul"],["Turks And Caicos Standard Time","America/Grand_Turk"],["US Eastern Standard Time","America/Indianapolis"],["US Mountain Standard Time","America/Phoenix"],["UTC","Etc/GMT"],["UTC+01","Etc/GMT-1"],["UTC+02","Etc/GMT-2"],["UTC+03","Etc/GMT-3"],["UTC+04","Etc/GMT-4"],["UTC+05","Etc/GMT-5"],["UTC+06","Etc/GMT-6"],["UTC+07","Etc/GMT-7"],["UTC+08","Etc/GMT-8"],["UTC+09","Etc/GMT-9"],["UTC+10","Etc/GMT-10"],["UTC+11","Etc/GMT-11"],["UTC+12","Etc/GMT-12"],["UTC+13","Etc/GMT-13"],["UTC+14","Etc/GMT-14"],["UTC-01","Etc/GMT+1"],["UTC-02","Etc/GMT+2"],["UTC-03","Etc/GMT+3"],["UTC-04","Etc/GMT+4"],["UTC-05","Etc/GMT+5"],["UTC-06","Etc/GMT+6"],["UTC-07","Etc/GMT+7"],["UTC-08","Etc/GMT+8"],["UTC-09","Etc/GMT+9"],["UTC-10","Etc/GMT+10"],["UTC-11","Etc/GMT+11"],["UTC-12","Etc/GMT+12"],["Ulaanbaatar Standard Time","Asia/Ulaanbaatar"],["Venezuela Standard Time","America/Caracas"],["Vladivostok Standard Time","Asia/Vladivostok"],["Volgograd Standard Time","Europe/Volgograd"],["W. Australia Standard Time","Australia/Perth"],["W. Central Africa Standard Time","Africa/Lagos"],["W. Europe Standard Time","Europe/Berlin"],["W. Mongolia Standard Time","Asia/Hovd"],["West Asia Standard Time","Asia/Tashkent"],["West Bank Standard Time","Asia/Hebron"],["West Pacific Standard Time","Pacific/Port_Moresby"],["Yakutsk Standard Time","Asia/Yakutsk"],["Yukon Standard Time","America/Whitehorse"]]);class h_ extends Error{}class _Oe extends h_{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}}class xOe extends h_{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}}class SOe extends h_{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}}class fS extends h_{}class $fe extends h_{constructor(e){super(`Invalid unit ${e}`)}}class to extends h_{}class qg extends h_{constructor(){super("Zone is an abstract class")}}const dt="numeric",zd="short",Sc="long",$R={year:dt,month:dt,day:dt},Tfe={year:dt,month:zd,day:dt},$Oe={year:dt,month:zd,day:dt,weekday:zd},kfe={year:dt,month:Sc,day:dt},Efe={year:dt,month:Sc,day:dt,weekday:Sc},Cfe={hour:dt,minute:dt},Ife={hour:dt,minute:dt,second:dt},Mfe={hour:dt,minute:dt,second:dt,timeZoneName:zd},Afe={hour:dt,minute:dt,second:dt,timeZoneName:Sc},Pfe={hour:dt,minute:dt,hourCycle:"h23"},Ofe={hour:dt,minute:dt,second:dt,hourCycle:"h23"},Lfe={hour:dt,minute:dt,second:dt,hourCycle:"h23",timeZoneName:zd},Dfe={hour:dt,minute:dt,second:dt,hourCycle:"h23",timeZoneName:Sc},Rfe={year:dt,month:dt,day:dt,hour:dt,minute:dt},zfe={year:dt,month:dt,day:dt,hour:dt,minute:dt,second:dt},Ffe={year:dt,month:zd,day:dt,hour:dt,minute:dt},Nfe={year:dt,month:zd,day:dt,hour:dt,minute:dt,second:dt},TOe={year:dt,month:zd,day:dt,weekday:zd,hour:dt,minute:dt},jfe={year:dt,month:Sc,day:dt,hour:dt,minute:dt,timeZoneName:zd},Vfe={year:dt,month:Sc,day:dt,hour:dt,minute:dt,second:dt,timeZoneName:zd},Bfe={year:dt,month:Sc,day:dt,weekday:Sc,hour:dt,minute:dt,timeZoneName:Sc},Ufe={year:dt,month:Sc,day:dt,weekday:Sc,hour:dt,minute:dt,second:dt,timeZoneName:Sc};class p_{get type(){throw new qg}get name(){throw new qg}get ianaName(){return this.name}get isUniversal(){throw new qg}offsetName(e,i){throw new qg}formatOffset(e,i){throw new qg}offset(e){throw new qg}equals(e){throw new qg}get isValid(){throw new qg}}let qV=null;class MF extends p_{static get instance(){return qV===null&&(qV=new MF),qV}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:i,locale:r}){return eme(e,i,r)}formatOffset(e,i){return hC(this.offset(e),i)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type==="system"}get isValid(){return!0}}const I8=new Map;function kOe(t){let e=I8.get(t);return e===void 0&&(e=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"}),I8.set(t,e)),e}const EOe={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function COe(t,e){const i=t.format(e).replace(/\u200E/g,""),r=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(i),[,n,s,a,o,l,c,h]=r;return[a,n,s,o,l,c,h]}function IOe(t,e){const i=t.formatToParts(e),r=[];for(let n=0;n<i.length;n++){const{type:s,value:a}=i[n],o=EOe[s];s==="era"?r[o]=a:ri(o)||(r[o]=parseInt(a,10))}return r}const WV=new Map;class $l extends p_{static create(e){let i=WV.get(e);return i===void 0&&WV.set(e,i=new $l(e)),i}static resetCache(){WV.clear(),I8.clear()}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch{return!1}}constructor(e){super(),this.zoneName=e,this.valid=$l.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:i,locale:r}){return eme(e,i,r,this.name)}formatOffset(e,i){return hC(this.offset(e),i)}offset(e){if(!this.valid)return NaN;const i=new Date(e);if(isNaN(i))return NaN;const r=kOe(this.name);let[n,s,a,o,l,c,h]=r.formatToParts?IOe(r,i):COe(r,i);o==="BC"&&(n=-Math.abs(n)+1);const g=PF({year:n,month:s,day:a,hour:l===24?0:l,minute:c,second:h,millisecond:0});let y=+i;const b=y%1e3;return y-=b>=0?b:1e3+b,(g-y)/(60*1e3)}equals(e){return e.type==="iana"&&e.name===this.name}get isValid(){return this.valid}}let Eie={};function MOe(t,e={}){const i=JSON.stringify([t,e]);let r=Eie[i];return r||(r=new Intl.ListFormat(t,e),Eie[i]=r),r}const M8=new Map;function A8(t,e={}){const i=JSON.stringify([t,e]);let r=M8.get(i);return r===void 0&&(r=new Intl.DateTimeFormat(t,e),M8.set(i,r)),r}const P8=new Map;function AOe(t,e={}){const i=JSON.stringify([t,e]);let r=P8.get(i);return r===void 0&&(r=new Intl.NumberFormat(t,e),P8.set(i,r)),r}const O8=new Map;function POe(t,e={}){const{base:i,...r}=e,n=JSON.stringify([t,r]);let s=O8.get(n);return s===void 0&&(s=new Intl.RelativeTimeFormat(t,e),O8.set(n,s)),s}let W2=null;function OOe(){return W2||(W2=new Intl.DateTimeFormat().resolvedOptions().locale,W2)}const L8=new Map;function Hfe(t){let e=L8.get(t);return e===void 0&&(e=new Intl.DateTimeFormat(t).resolvedOptions(),L8.set(t,e)),e}const D8=new Map;function LOe(t){let e=D8.get(t);if(!e){const i=new Intl.Locale(t);e="getWeekInfo"in i?i.getWeekInfo():i.weekInfo,"minimalDays"in e||(e={...Gfe,...e}),D8.set(t,e)}return e}function DOe(t){const e=t.indexOf("-x-");e!==-1&&(t=t.substring(0,e));const i=t.indexOf("-u-");if(i===-1)return[t];{let r,n;try{r=A8(t).resolvedOptions(),n=t}catch{const l=t.substring(0,i);r=A8(l).resolvedOptions(),n=l}const{numberingSystem:s,calendar:a}=r;return[n,s,a]}}function ROe(t,e,i){return(i||e)&&(t.includes("-u-")||(t+="-u"),i&&(t+=`-ca-${i}`),e&&(t+=`-nu-${e}`)),t}function zOe(t){const e=[];for(let i=1;i<=12;i++){const r=mt.utc(2009,i,1);e.push(t(r))}return e}function FOe(t){const e=[];for(let i=1;i<=7;i++){const r=mt.utc(2016,11,13+i);e.push(t(r))}return e}function XP(t,e,i,r){const n=t.listingMode();return n==="error"?null:n==="en"?i(e):r(e)}function NOe(t){return t.numberingSystem&&t.numberingSystem!=="latn"?!1:t.numberingSystem==="latn"||!t.locale||t.locale.startsWith("en")||Hfe(t.locale).numberingSystem==="latn"}class jOe{constructor(e,i,r){this.padTo=r.padTo||0,this.floor=r.floor||!1;const{padTo:n,floor:s,...a}=r;if(!i||Object.keys(a).length>0){const o={useGrouping:!1,...r};r.padTo>0&&(o.minimumIntegerDigits=r.padTo),this.inf=AOe(e,o)}}format(e){if(this.inf){const i=this.floor?Math.floor(e):e;return this.inf.format(i)}else{const i=this.floor?Math.floor(e):xY(e,3);return vs(i,this.padTo)}}}class VOe{constructor(e,i,r){this.opts=r,this.originalZone=void 0;let n;if(this.opts.timeZone)this.dt=e;else if(e.zone.type==="fixed"){const a=-1*(e.offset/60),o=a>=0?`Etc/GMT+${a}`:`Etc/GMT${a}`;e.offset!==0&&$l.create(o).valid?(n=o,this.dt=e):(n="UTC",this.dt=e.offset===0?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else e.zone.type==="system"?this.dt=e:e.zone.type==="iana"?(this.dt=e,n=e.zone.name):(n="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);const s={...this.opts};s.timeZone=s.timeZone||n,this.dtf=A8(i,s)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(i=>{if(i.type==="timeZoneName"){const r=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...i,value:r}}else return i}):e}resolvedOptions(){return this.dtf.resolvedOptions()}}class BOe{constructor(e,i,r){this.opts={style:"long",...r},!i&&Kfe()&&(this.rtf=POe(e,r))}format(e,i){return this.rtf?this.rtf.format(e,i):uLe(i,e,this.opts.numeric,this.opts.style!=="long")}formatToParts(e,i){return this.rtf?this.rtf.formatToParts(e,i):[]}}const Gfe={firstDay:1,minimalDays:4,weekend:[6,7]};class dr{static fromOpts(e){return dr.create(e.locale,e.numberingSystem,e.outputCalendar,e.weekSettings,e.defaultToEN)}static create(e,i,r,n,s=!1){const a=e||zn.defaultLocale,o=a||(s?"en-US":OOe()),l=i||zn.defaultNumberingSystem,c=r||zn.defaultOutputCalendar,h=z8(n)||zn.defaultWeekSettings;return new dr(o,l,c,h,a)}static resetCache(){W2=null,M8.clear(),P8.clear(),O8.clear(),L8.clear(),D8.clear()}static fromObject({locale:e,numberingSystem:i,outputCalendar:r,weekSettings:n}={}){return dr.create(e,i,r,n)}constructor(e,i,r,n,s){const[a,o,l]=DOe(e);this.locale=a,this.numberingSystem=i||o||null,this.outputCalendar=r||l||null,this.weekSettings=n,this.intl=ROe(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=s,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=NOe(this)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),i=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&i?"en":"intl"}clone(e){return!e||Object.getOwnPropertyNames(e).length===0?this:dr.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,z8(e.weekSettings)||this.weekSettings,e.defaultToEN||!1)}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,i=!1){return XP(this,e,rme,()=>{const r=this.intl==="ja"||this.intl.startsWith("ja-");i&=!r;const n=i?{month:e,day:"numeric"}:{month:e},s=i?"format":"standalone";if(!this.monthsCache[s][e]){const a=r?o=>this.dtFormatter(o,n).format():o=>this.extract(o,n,"month");this.monthsCache[s][e]=zOe(a)}return this.monthsCache[s][e]})}weekdays(e,i=!1){return XP(this,e,ame,()=>{const r=i?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},n=i?"format":"standalone";return this.weekdaysCache[n][e]||(this.weekdaysCache[n][e]=FOe(s=>this.extract(s,r,"weekday"))),this.weekdaysCache[n][e]})}meridiems(){return XP(this,void 0,()=>ome,()=>{if(!this.meridiemCache){const e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[mt.utc(2016,11,13,9),mt.utc(2016,11,13,19)].map(i=>this.extract(i,e,"dayperiod"))}return this.meridiemCache})}eras(e){return XP(this,e,lme,()=>{const i={era:e};return this.eraCache[e]||(this.eraCache[e]=[mt.utc(-40,1,1),mt.utc(2017,1,1)].map(r=>this.extract(r,i,"era"))),this.eraCache[e]})}extract(e,i,r){const n=this.dtFormatter(e,i),s=n.formatToParts(),a=s.find(o=>o.type.toLowerCase()===r);return a?a.value:null}numberFormatter(e={}){return new jOe(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,i={}){return new VOe(e,this.intl,i)}relFormatter(e={}){return new BOe(this.intl,this.isEnglish(),e)}listFormatter(e={}){return MOe(this.intl,e)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||Hfe(this.intl).locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:Qfe()?LOe(this.locale):Gfe}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let YV=null;class _s extends p_{static get utcInstance(){return YV===null&&(YV=new _s(0)),YV}static instance(e){return e===0?_s.utcInstance:new _s(e)}static parseSpecifier(e){if(e){const i=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(i)return new _s(OF(i[1],i[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${hC(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${hC(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,i){return hC(this.fixed,i)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type==="fixed"&&e.fixed===this.fixed}get isValid(){return!0}}class UOe extends p_{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function Vy(t,e){if(ri(t)||t===null)return e;if(t instanceof p_)return t;if(ZOe(t)){const i=t.toLowerCase();return i==="default"?e:i==="local"||i==="system"?MF.instance:i==="utc"||i==="gmt"?_s.utcInstance:_s.parseSpecifier(i)||$l.create(t)}else return cv(t)?_s.instance(t):typeof t=="object"&&"offset"in t&&typeof t.offset=="function"?t:new UOe(t)}const vY={arab:"[-]",arabext:"[-]",bali:"[-]",beng:"[-]",deva:"[-]",fullwide:"[-]",gujr:"[-]",hanidec:"[|||||||||]",khmr:"[-]",knda:"[-]",laoo:"[-]",limb:"[-]",mlym:"[-]",mong:"[-]",mymr:"[-]",orya:"[-]",tamldec:"[-]",telu:"[-]",thai:"[-]",tibt:"[-]",latn:"\\d"},Cie={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},HOe=vY.hanidec.replace(/[\[|\]]/g,"").split("");function GOe(t){let e=parseInt(t,10);if(isNaN(e)){e="";for(let i=0;i<t.length;i++){const r=t.charCodeAt(i);if(t[i].search(vY.hanidec)!==-1)e+=HOe.indexOf(t[i]);else for(const n in Cie){const[s,a]=Cie[n];r>=s&&r<=a&&(e+=r-s)}}return parseInt(e,10)}else return e}const R8=new Map;function qOe(){R8.clear()}function Hu({numberingSystem:t},e=""){const i=t||"latn";let r=R8.get(i);r===void 0&&(r=new Map,R8.set(i,r));let n=r.get(e);return n===void 0&&(n=new RegExp(`${vY[i]}${e}`),r.set(e,n)),n}let Iie=()=>Date.now(),Mie="system",Aie=null,Pie=null,Oie=null,Lie=60,Die,Rie=null,zn=class{static get now(){return Iie}static set now(e){Iie=e}static set defaultZone(e){Mie=e}static get defaultZone(){return Vy(Mie,MF.instance)}static get defaultLocale(){return Aie}static set defaultLocale(e){Aie=e}static get defaultNumberingSystem(){return Pie}static set defaultNumberingSystem(e){Pie=e}static get defaultOutputCalendar(){return Oie}static set defaultOutputCalendar(e){Oie=e}static get defaultWeekSettings(){return Rie}static set defaultWeekSettings(e){Rie=z8(e)}static get twoDigitCutoffYear(){return Lie}static set twoDigitCutoffYear(e){Lie=e%100}static get throwOnInvalid(){return Die}static set throwOnInvalid(e){Die=e}static resetCaches(){dr.resetCache(),$l.resetCache(),mt.resetCache(),qOe()}};class Id{constructor(e,i){this.reason=e,this.explanation=i}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const qfe=[0,31,59,90,120,151,181,212,243,273,304,334],Wfe=[0,31,60,91,121,152,182,213,244,274,305,335];function gu(t,e){return new Id("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${t}, which is invalid`)}function bY(t,e,i){const r=new Date(Date.UTC(t,e-1,i));t<100&&t>=0&&r.setUTCFullYear(r.getUTCFullYear()-1900);const n=r.getUTCDay();return n===0?7:n}function Yfe(t,e,i){return i+(zM(t)?Wfe:qfe)[e-1]}function Zfe(t,e){const i=zM(t)?Wfe:qfe,r=i.findIndex(s=>s<e),n=e-i[r];return{month:r+1,day:n}}function wY(t,e){return(t-e+7)%7+1}function TR(t,e=4,i=1){const{year:r,month:n,day:s}=t,a=Yfe(r,n,s),o=wY(bY(r,n,s),i);let l=Math.floor((a-o+14-e)/7),c;return l<1?(c=r-1,l=fI(c,e,i)):l>fI(r,e,i)?(c=r+1,l=1):c=r,{weekYear:c,weekNumber:l,weekday:o,...LF(t)}}function zie(t,e=4,i=1){const{weekYear:r,weekNumber:n,weekday:s}=t,a=wY(bY(r,1,e),i),o=DS(r);let l=n*7+s-a-7+e,c;l<1?(c=r-1,l+=DS(c)):l>o?(c=r+1,l-=DS(r)):c=r;const{month:h,day:f}=Zfe(c,l);return{year:c,month:h,day:f,...LF(t)}}function ZV(t){const{year:e,month:i,day:r}=t,n=Yfe(e,i,r);return{year:e,ordinal:n,...LF(t)}}function Fie(t){const{year:e,ordinal:i}=t,{month:r,day:n}=Zfe(e,i);return{year:e,month:r,day:n,...LF(t)}}function Nie(t,e){if(!ri(t.localWeekday)||!ri(t.localWeekNumber)||!ri(t.localWeekYear)){if(!ri(t.weekday)||!ri(t.weekNumber)||!ri(t.weekYear))throw new fS("Cannot mix locale-based week fields with ISO-based week fields");return ri(t.localWeekday)||(t.weekday=t.localWeekday),ri(t.localWeekNumber)||(t.weekNumber=t.localWeekNumber),ri(t.localWeekYear)||(t.weekYear=t.localWeekYear),delete t.localWeekday,delete t.localWeekNumber,delete t.localWeekYear,{minDaysInFirstWeek:e.getMinDaysInFirstWeek(),startOfWeek:e.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function WOe(t,e=4,i=1){const r=AF(t.weekYear),n=yu(t.weekNumber,1,fI(t.weekYear,e,i)),s=yu(t.weekday,1,7);return r?n?s?!1:gu("weekday",t.weekday):gu("week",t.weekNumber):gu("weekYear",t.weekYear)}function YOe(t){const e=AF(t.year),i=yu(t.ordinal,1,DS(t.year));return e?i?!1:gu("ordinal",t.ordinal):gu("year",t.year)}function Xfe(t){const e=AF(t.year),i=yu(t.month,1,12),r=yu(t.day,1,kR(t.year,t.month));return e?i?r?!1:gu("day",t.day):gu("month",t.month):gu("year",t.year)}function Jfe(t){const{hour:e,minute:i,second:r,millisecond:n}=t,s=yu(e,0,23)||e===24&&i===0&&r===0&&n===0,a=yu(i,0,59),o=yu(r,0,59),l=yu(n,0,999);return s?a?o?l?!1:gu("millisecond",n):gu("second",r):gu("minute",i):gu("hour",e)}function ri(t){return typeof t>"u"}function cv(t){return typeof t=="number"}function AF(t){return typeof t=="number"&&t%1===0}function ZOe(t){return typeof t=="string"}function XOe(t){return Object.prototype.toString.call(t)==="[object Date]"}function Kfe(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function Qfe(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function JOe(t){return Array.isArray(t)?t:[t]}function jie(t,e,i){if(t.length!==0)return t.reduce((r,n)=>{const s=[e(n),n];return r&&i(r[0],s[0])===r[0]?r:s},null)[1]}function KOe(t,e){return e.reduce((i,r)=>(i[r]=t[r],i),{})}function N$(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function z8(t){if(t==null)return null;if(typeof t!="object")throw new to("Week settings must be an object");if(!yu(t.firstDay,1,7)||!yu(t.minimalDays,1,7)||!Array.isArray(t.weekend)||t.weekend.some(e=>!yu(e,1,7)))throw new to("Invalid week settings");return{firstDay:t.firstDay,minimalDays:t.minimalDays,weekend:Array.from(t.weekend)}}function yu(t,e,i){return AF(t)&&t>=e&&t<=i}function QOe(t,e){return t-e*Math.floor(t/e)}function vs(t,e=2){const i=t<0;let r;return i?r="-"+(""+-t).padStart(e,"0"):r=(""+t).padStart(e,"0"),r}function Ay(t){if(!(ri(t)||t===null||t===""))return parseInt(t,10)}function _b(t){if(!(ri(t)||t===null||t===""))return parseFloat(t)}function _Y(t){if(!(ri(t)||t===null||t==="")){const e=parseFloat("0."+t)*1e3;return Math.floor(e)}}function xY(t,e,i="round"){const r=10**e;switch(i){case"expand":return t>0?Math.ceil(t*r)/r:Math.floor(t*r)/r;case"trunc":return Math.trunc(t*r)/r;case"round":return Math.round(t*r)/r;case"floor":return Math.floor(t*r)/r;case"ceil":return Math.ceil(t*r)/r;default:throw new RangeError(`Value rounding ${i} is out of range`)}}function zM(t){return t%4===0&&(t%100!==0||t%400===0)}function DS(t){return zM(t)?366:365}function kR(t,e){const i=QOe(e-1,12)+1,r=t+(e-i)/12;return i===2?zM(r)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][i-1]}function PF(t){let e=Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond);return t.year<100&&t.year>=0&&(e=new Date(e),e.setUTCFullYear(t.year,t.month-1,t.day)),+e}function Vie(t,e,i){return-wY(bY(t,1,e),i)+e-1}function fI(t,e=4,i=1){const r=Vie(t,e,i),n=Vie(t+1,e,i);return(DS(t)-r+n)/7}function F8(t){return t>99?t:t>zn.twoDigitCutoffYear?1900+t:2e3+t}function eme(t,e,i,r=null){const n=new Date(t),s={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};r&&(s.timeZone=r);const a={timeZoneName:e,...s},o=new Intl.DateTimeFormat(i,a).formatToParts(n).find(l=>l.type.toLowerCase()==="timezonename");return o?o.value:null}function OF(t,e){let i=parseInt(t,10);Number.isNaN(i)&&(i=0);const r=parseInt(e,10)||0,n=i<0||Object.is(i,-0)?-r:r;return i*60+n}function tme(t){const e=Number(t);if(typeof t=="boolean"||t===""||!Number.isFinite(e))throw new to(`Invalid unit value ${t}`);return e}function ER(t,e){const i={};for(const r in t)if(N$(t,r)){const n=t[r];if(n==null)continue;i[e(r)]=tme(n)}return i}function hC(t,e){const i=Math.trunc(Math.abs(t/60)),r=Math.trunc(Math.abs(t%60)),n=t>=0?"+":"-";switch(e){case"short":return`${n}${vs(i,2)}:${vs(r,2)}`;case"narrow":return`${n}${i}${r>0?`:${r}`:""}`;case"techie":return`${n}${vs(i,2)}${vs(r,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function LF(t){return KOe(t,["hour","minute","second","millisecond"])}const eLe=["January","February","March","April","May","June","July","August","September","October","November","December"],ime=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],tLe=["J","F","M","A","M","J","J","A","S","O","N","D"];function rme(t){switch(t){case"narrow":return[...tLe];case"short":return[...ime];case"long":return[...eLe];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const nme=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],sme=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],iLe=["M","T","W","T","F","S","S"];function ame(t){switch(t){case"narrow":return[...iLe];case"short":return[...sme];case"long":return[...nme];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const ome=["AM","PM"],rLe=["Before Christ","Anno Domini"],nLe=["BC","AD"],sLe=["B","A"];function lme(t){switch(t){case"narrow":return[...sLe];case"short":return[...nLe];case"long":return[...rLe];default:return null}}function aLe(t){return ome[t.hour<12?0:1]}function oLe(t,e){return ame(e)[t.weekday-1]}function lLe(t,e){return rme(e)[t.month-1]}function cLe(t,e){return lme(e)[t.year<0?0:1]}function uLe(t,e,i="always",r=!1){const n={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},s=["hours","minutes","seconds"].indexOf(t)===-1;if(i==="auto"&&s){const f=t==="days";switch(e){case 1:return f?"tomorrow":`next ${n[t][0]}`;case-1:return f?"yesterday":`last ${n[t][0]}`;case 0:return f?"today":`this ${n[t][0]}`}}const a=Object.is(e,-0)||e<0,o=Math.abs(e),l=o===1,c=n[t],h=r?l?c[1]:c[2]||c[1]:l?n[t][0]:t;return a?`${o} ${h} ago`:`in ${o} ${h}`}function Bie(t,e){let i="";for(const r of t)r.literal?i+=r.val:i+=e(r.val);return i}const dLe={D:$R,DD:Tfe,DDD:kfe,DDDD:Efe,t:Cfe,tt:Ife,ttt:Mfe,tttt:Afe,T:Pfe,TT:Ofe,TTT:Lfe,TTTT:Dfe,f:Rfe,ff:Ffe,fff:jfe,ffff:Bfe,F:zfe,FF:Nfe,FFF:Vfe,FFFF:Ufe};class lo{static create(e,i={}){return new lo(e,i)}static parseFormat(e){let i=null,r="",n=!1;const s=[];for(let a=0;a<e.length;a++){const o=e.charAt(a);o==="'"?((r.length>0||n)&&s.push({literal:n||/^\s+$/.test(r),val:r===""?"'":r}),i=null,r="",n=!n):n||o===i?r+=o:(r.length>0&&s.push({literal:/^\s+$/.test(r),val:r}),r=o,i=o)}return r.length>0&&s.push({literal:n||/^\s+$/.test(r),val:r}),s}static macroTokenToFormatOpts(e){return dLe[e]}constructor(e,i){this.opts=i,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,i){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...i}).format()}dtFormatter(e,i={}){return this.loc.dtFormatter(e,{...this.opts,...i})}formatDateTime(e,i){return this.dtFormatter(e,i).format()}formatDateTimeParts(e,i){return this.dtFormatter(e,i).formatToParts()}formatInterval(e,i){return this.dtFormatter(e.start,i).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,i){return this.dtFormatter(e,i).resolvedOptions()}num(e,i=0,r=void 0){if(this.opts.forceSimple)return vs(e,i);const n={...this.opts};return i>0&&(n.padTo=i),r&&(n.signDisplay=r),this.loc.numberFormatter(n).format(e)}formatDateTimeFromString(e,i){const r=this.loc.listingMode()==="en",n=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",s=(y,b)=>this.loc.extract(e,y,b),a=y=>e.isOffsetFixed&&e.offset===0&&y.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,y.format):"",o=()=>r?aLe(e):s({hour:"numeric",hourCycle:"h12"},"dayperiod"),l=(y,b)=>r?lLe(e,y):s(b?{month:y}:{month:y,day:"numeric"},"month"),c=(y,b)=>r?oLe(e,y):s(b?{weekday:y}:{weekday:y,month:"long",day:"numeric"},"weekday"),h=y=>{const b=lo.macroTokenToFormatOpts(y);return b?this.formatWithSystemDefault(e,b):y},f=y=>r?cLe(e,y):s({era:y},"era"),g=y=>{switch(y){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return a({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return a({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return a({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return o();case"d":return n?s({day:"numeric"},"day"):this.num(e.day);case"dd":return n?s({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return c("short",!0);case"cccc":return c("long",!0);case"ccccc":return c("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return c("short",!1);case"EEEE":return c("long",!1);case"EEEEE":return c("narrow",!1);case"L":return n?s({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return n?s({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return l("short",!0);case"LLLL":return l("long",!0);case"LLLLL":return l("narrow",!0);case"M":return n?s({month:"numeric"},"month"):this.num(e.month);case"MM":return n?s({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return l("short",!1);case"MMMM":return l("long",!1);case"MMMMM":return l("narrow",!1);case"y":return n?s({year:"numeric"},"year"):this.num(e.year);case"yy":return n?s({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return n?s({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return n?s({year:"numeric"},"year"):this.num(e.year,6);case"G":return f("short");case"GG":return f("long");case"GGGGG":return f("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"n":return this.num(e.localWeekNumber);case"nn":return this.num(e.localWeekNumber,2);case"ii":return this.num(e.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(e.localWeekYear,4);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return h(y)}};return Bie(lo.parseFormat(i),g)}formatDurationFromString(e,i){const r=this.opts.signMode==="negativeLargestOnly"?-1:1,n=h=>{switch(h[0]){case"S":return"milliseconds";case"s":return"seconds";case"m":return"minutes";case"h":return"hours";case"d":return"days";case"w":return"weeks";case"M":return"months";case"y":return"years";default:return null}},s=(h,f)=>g=>{const y=n(g);if(y){const b=f.isNegativeDuration&&y!==f.largestUnit?r:1;let _;return this.opts.signMode==="negativeLargestOnly"&&y!==f.largestUnit?_="never":this.opts.signMode==="all"?_="always":_="auto",this.num(h.get(y)*b,g.length,_)}else return g},a=lo.parseFormat(i),o=a.reduce((h,{literal:f,val:g})=>f?h:h.concat(g),[]),l=e.shiftTo(...o.map(n).filter(h=>h)),c={isNegativeDuration:l<0,largestUnit:Object.keys(l.values)[0]};return Bie(a,s(l,c))}}const cme=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function MT(...t){const e=t.reduce((i,r)=>i+r.source,"");return RegExp(`^${e}$`)}function AT(...t){return e=>t.reduce(([i,r,n],s)=>{const[a,o,l]=s(e,n);return[{...i,...a},o||r,l]},[{},null,1]).slice(0,2)}function PT(t,...e){if(t==null)return[null,null];for(const[i,r]of e){const n=i.exec(t);if(n)return r(n)}return[null,null]}function ume(...t){return(e,i)=>{const r={};let n;for(n=0;n<t.length;n++)r[t[n]]=Ay(e[i+n]);return[r,null,i+n]}}const dme=/(?:([Zz])|([+-]\d\d)(?::?(\d\d))?)/,hLe=`(?:${dme.source}?(?:\\[(${cme.source})\\])?)?`,SY=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,hme=RegExp(`${SY.source}${hLe}`),$Y=RegExp(`(?:[Tt]${hme.source})?`),pLe=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,fLe=/(\d{4})-?W(\d\d)(?:-?(\d))?/,mLe=/(\d{4})-?(\d{3})/,gLe=ume("weekYear","weekNumber","weekDay"),yLe=ume("year","ordinal"),vLe=/(\d{4})-(\d\d)-(\d\d)/,pme=RegExp(`${SY.source} ?(?:${dme.source}|(${cme.source}))?`),bLe=RegExp(`(?: ${pme.source})?`);function RS(t,e,i){const r=t[e];return ri(r)?i:Ay(r)}function wLe(t,e){return[{year:RS(t,e),month:RS(t,e+1,1),day:RS(t,e+2,1)},null,e+3]}function OT(t,e){return[{hours:RS(t,e,0),minutes:RS(t,e+1,0),seconds:RS(t,e+2,0),milliseconds:_Y(t[e+3])},null,e+4]}function FM(t,e){const i=!t[e]&&!t[e+1],r=OF(t[e+1],t[e+2]),n=i?null:_s.instance(r);return[{},n,e+3]}function NM(t,e){const i=t[e]?$l.create(t[e]):null;return[{},i,e+1]}const _Le=RegExp(`^T?${SY.source}$`),xLe=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function SLe(t){const[e,i,r,n,s,a,o,l,c]=t,h=e[0]==="-",f=l&&l[0]==="-",g=(y,b=!1)=>y!==void 0&&(b||y&&h)?-y:y;return[{years:g(_b(i)),months:g(_b(r)),weeks:g(_b(n)),days:g(_b(s)),hours:g(_b(a)),minutes:g(_b(o)),seconds:g(_b(l),l==="-0"),milliseconds:g(_Y(c),f)}]}const $Le={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function TY(t,e,i,r,n,s,a){const o={year:e.length===2?F8(Ay(e)):Ay(e),month:ime.indexOf(i)+1,day:Ay(r),hour:Ay(n),minute:Ay(s)};return a&&(o.second=Ay(a)),t&&(o.weekday=t.length>3?nme.indexOf(t)+1:sme.indexOf(t)+1),o}const TLe=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function kLe(t){const[,e,i,r,n,s,a,o,l,c,h,f]=t,g=TY(e,n,r,i,s,a,o);let y;return l?y=$Le[l]:c?y=0:y=OF(h,f),[g,new _s(y)]}function ELe(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const CLe=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,ILe=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,MLe=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function Uie(t){const[,e,i,r,n,s,a,o]=t;return[TY(e,n,r,i,s,a,o),_s.utcInstance]}function ALe(t){const[,e,i,r,n,s,a,o]=t;return[TY(e,o,i,r,n,s,a),_s.utcInstance]}const PLe=MT(pLe,$Y),OLe=MT(fLe,$Y),LLe=MT(mLe,$Y),DLe=MT(hme),fme=AT(wLe,OT,FM,NM),RLe=AT(gLe,OT,FM,NM),zLe=AT(yLe,OT,FM,NM),FLe=AT(OT,FM,NM);function NLe(t){return PT(t,[PLe,fme],[OLe,RLe],[LLe,zLe],[DLe,FLe])}function jLe(t){return PT(ELe(t),[TLe,kLe])}function VLe(t){return PT(t,[CLe,Uie],[ILe,Uie],[MLe,ALe])}function BLe(t){return PT(t,[xLe,SLe])}const ULe=AT(OT);function HLe(t){return PT(t,[_Le,ULe])}const GLe=MT(vLe,bLe),qLe=MT(pme),WLe=AT(OT,FM,NM);function YLe(t){return PT(t,[GLe,fme],[qLe,WLe])}const Hie="Invalid Duration",mme={weeks:{days:7,hours:168,minutes:10080,seconds:10080*60,milliseconds:10080*60*1e3},days:{hours:24,minutes:1440,seconds:1440*60,milliseconds:1440*60*1e3},hours:{minutes:60,seconds:3600,milliseconds:3600*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},ZLe={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:2184*60,seconds:2184*60*60,milliseconds:2184*60*60*1e3},months:{weeks:4,days:30,hours:720,minutes:720*60,seconds:720*60*60,milliseconds:720*60*60*1e3},...mme},jc=146097/400,b1=146097/4800,XLe={years:{quarters:4,months:12,weeks:jc/7,days:jc,hours:jc*24,minutes:jc*24*60,seconds:jc*24*60*60,milliseconds:jc*24*60*60*1e3},quarters:{months:3,weeks:jc/28,days:jc/4,hours:jc*24/4,minutes:jc*24*60/4,seconds:jc*24*60*60/4,milliseconds:jc*24*60*60*1e3/4},months:{weeks:b1/7,days:b1,hours:b1*24,minutes:b1*24*60,seconds:b1*24*60*60,milliseconds:b1*24*60*60*1e3},...mme},z0=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],JLe=z0.slice(0).reverse();function xf(t,e,i=!1){const r={values:i?e.values:{...t.values,...e.values||{}},loc:t.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||t.conversionAccuracy,matrix:e.matrix||t.matrix};return new Bi(r)}function gme(t,e){let i=e.milliseconds??0;for(const r of JLe.slice(1))e[r]&&(i+=e[r]*t[r].milliseconds);return i}function Gie(t,e){const i=gme(t,e)<0?-1:1;z0.reduceRight((r,n)=>{if(ri(e[n]))return r;if(r){const s=e[r]*i,a=t[n][r],o=Math.floor(s/a);e[n]+=o*i,e[r]-=o*a*i}return n},null),z0.reduce((r,n)=>{if(ri(e[n]))return r;if(r){const s=e[r]%1;e[r]-=s,e[n]+=s*t[r][n]}return n},null)}function qie(t){const e={};for(const[i,r]of Object.entries(t))r!==0&&(e[i]=r);return e}class Bi{constructor(e){const i=e.conversionAccuracy==="longterm"||!1;let r=i?XLe:ZLe;e.matrix&&(r=e.matrix),this.values=e.values,this.loc=e.loc||dr.create(),this.conversionAccuracy=i?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=r,this.isLuxonDuration=!0}static fromMillis(e,i){return Bi.fromObject({milliseconds:e},i)}static fromObject(e,i={}){if(e==null||typeof e!="object")throw new to(`Duration.fromObject: argument expected to be an object, got ${e===null?"null":typeof e}`);return new Bi({values:ER(e,Bi.normalizeUnit),loc:dr.fromObject(i),conversionAccuracy:i.conversionAccuracy,matrix:i.matrix})}static fromDurationLike(e){if(cv(e))return Bi.fromMillis(e);if(Bi.isDuration(e))return e;if(typeof e=="object")return Bi.fromObject(e);throw new to(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,i){const[r]=BLe(e);return r?Bi.fromObject(r,i):Bi.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,i){const[r]=HLe(e);return r?Bi.fromObject(r,i):Bi.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,i=null){if(!e)throw new to("need to specify a reason the Duration is invalid");const r=e instanceof Id?e:new Id(e,i);if(zn.throwOnInvalid)throw new SOe(r);return new Bi({invalid:r})}static normalizeUnit(e){const i={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!i)throw new $fe(e);return i}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,i={}){const r={...i,floor:i.round!==!1&&i.floor!==!1};return this.isValid?lo.create(this.loc,r).formatDurationFromString(this,e):Hie}toHuman(e={}){if(!this.isValid)return Hie;const i=e.showZeros!==!1,r=z0.map(n=>{const s=this.values[n];return ri(s)||s===0&&!i?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:n.slice(0,-1)}).format(s)}).filter(n=>n);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(r)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=xY(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;const i=this.toMillis();return i<0||i>=864e5?null:(e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1},mt.fromMillis(i,{zone:"UTC"}).toISOTime(e))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?gme(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const i=Bi.fromDurationLike(e),r={};for(const n of z0)(N$(i.values,n)||N$(this.values,n))&&(r[n]=i.get(n)+this.get(n));return xf(this,{values:r},!0)}minus(e){if(!this.isValid)return this;const i=Bi.fromDurationLike(e);return this.plus(i.negate())}mapUnits(e){if(!this.isValid)return this;const i={};for(const r of Object.keys(this.values))i[r]=tme(e(this.values[r],r));return xf(this,{values:i},!0)}get(e){return this[Bi.normalizeUnit(e)]}set(e){if(!this.isValid)return this;const i={...this.values,...ER(e,Bi.normalizeUnit)};return xf(this,{values:i})}reconfigure({locale:e,numberingSystem:i,conversionAccuracy:r,matrix:n}={}){const a={loc:this.loc.clone({locale:e,numberingSystem:i}),matrix:n,conversionAccuracy:r};return xf(this,a)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return Gie(this.matrix,e),xf(this,{values:e},!0)}rescale(){if(!this.isValid)return this;const e=qie(this.normalize().shiftToAll().toObject());return xf(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(e.length===0)return this;e=e.map(a=>Bi.normalizeUnit(a));const i={},r={},n=this.toObject();let s;for(const a of z0)if(e.indexOf(a)>=0){s=a;let o=0;for(const c in r)o+=this.matrix[c][a]*r[c],r[c]=0;cv(n[a])&&(o+=n[a]);const l=Math.trunc(o);i[a]=l,r[a]=(o*1e3-l*1e3)/1e3}else cv(n[a])&&(r[a]=n[a]);for(const a in r)r[a]!==0&&(i[s]+=a===s?r[a]:r[a]/this.matrix[s][a]);return Gie(this.matrix,i),xf(this,{values:i},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const e={};for(const i of Object.keys(this.values))e[i]=this.values[i]===0?0:-this.values[i];return xf(this,{values:e},!0)}removeZeros(){if(!this.isValid)return this;const e=qie(this.values);return xf(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function i(r,n){return r===void 0||r===0?n===void 0||n===0:r===n}for(const r of z0)if(!i(this.values[r],e.values[r]))return!1;return!0}}const w1="Invalid Interval";function KLe(t,e){return!t||!t.isValid?On.invalid("missing or invalid start"):!e||!e.isValid?On.invalid("missing or invalid end"):e<t?On.invalid("end before start",`The end of an interval must be after its start, but you had start=${t.toISO()} and end=${e.toISO()}`):null}class On{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,i=null){if(!e)throw new to("need to specify a reason the Interval is invalid");const r=e instanceof Id?e:new Id(e,i);if(zn.throwOnInvalid)throw new xOe(r);return new On({invalid:r})}static fromDateTimes(e,i){const r=t2(e),n=t2(i),s=KLe(r,n);return s??new On({start:r,end:n})}static after(e,i){const r=Bi.fromDurationLike(i),n=t2(e);return On.fromDateTimes(n,n.plus(r))}static before(e,i){const r=Bi.fromDurationLike(i),n=t2(e);return On.fromDateTimes(n.minus(r),n)}static fromISO(e,i){const[r,n]=(e||"").split("/",2);if(r&&n){let s,a;try{s=mt.fromISO(r,i),a=s.isValid}catch{a=!1}let o,l;try{o=mt.fromISO(n,i),l=o.isValid}catch{l=!1}if(a&&l)return On.fromDateTimes(s,o);if(a){const c=Bi.fromISO(n,i);if(c.isValid)return On.after(s,c)}else if(l){const c=Bi.fromISO(r,i);if(c.isValid)return On.before(o,c)}}return On.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get lastDateTime(){return this.isValid&&this.e?this.e.minus(1):null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds",i){if(!this.isValid)return NaN;const r=this.start.startOf(e,i);let n;return i?.useLocaleWeeks?n=this.end.reconfigure({locale:r.locale}):n=this.end,n=n.startOf(e,i),Math.floor(n.diff(r,e).get(e))+(n.valueOf()!==this.end.valueOf())}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:e,end:i}={}){return this.isValid?On.fromDateTimes(e||this.s,i||this.e):this}splitAt(...e){if(!this.isValid)return[];const i=e.map(t2).filter(a=>this.contains(a)).sort((a,o)=>a.toMillis()-o.toMillis()),r=[];let{s:n}=this,s=0;for(;n<this.e;){const a=i[s]||this.e,o=+a>+this.e?this.e:a;r.push(On.fromDateTimes(n,o)),n=o,s+=1}return r}splitBy(e){const i=Bi.fromDurationLike(e);if(!this.isValid||!i.isValid||i.as("milliseconds")===0)return[];let{s:r}=this,n=1,s;const a=[];for(;r<this.e;){const o=this.start.plus(i.mapUnits(l=>l*n));s=+o>+this.e?this.e:o,a.push(On.fromDateTimes(r,s)),r=s,n+=1}return a}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;const i=this.s>e.s?this.s:e.s,r=this.e<e.e?this.e:e.e;return i>=r?null:On.fromDateTimes(i,r)}union(e){if(!this.isValid)return this;const i=this.s<e.s?this.s:e.s,r=this.e>e.e?this.e:e.e;return On.fromDateTimes(i,r)}static merge(e){const[i,r]=e.sort((n,s)=>n.s-s.s).reduce(([n,s],a)=>s?s.overlaps(a)||s.abutsStart(a)?[n,s.union(a)]:[n.concat([s]),a]:[n,a],[[],null]);return r&&i.push(r),i}static xor(e){let i=null,r=0;const n=[],s=e.map(l=>[{time:l.s,type:"s"},{time:l.e,type:"e"}]),a=Array.prototype.concat(...s),o=a.sort((l,c)=>l.time-c.time);for(const l of o)r+=l.type==="s"?1:-1,r===1?i=l.time:(i&&+i!=+l.time&&n.push(On.fromDateTimes(i,l.time)),i=null);return On.merge(n)}difference(...e){return On.xor([this].concat(e)).map(i=>this.intersection(i)).filter(i=>i&&!i.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()}  ${this.e.toISO()})`:w1}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(e=$R,i={}){return this.isValid?lo.create(this.s.loc.clone(i),e).formatInterval(this):w1}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:w1}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:w1}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:w1}toFormat(e,{separator:i="  "}={}){return this.isValid?`${this.s.toFormat(e)}${i}${this.e.toFormat(e)}`:w1}toDuration(e,i){return this.isValid?this.e.diff(this.s,e,i):Bi.invalid(this.invalidReason)}mapEndpoints(e){return On.fromDateTimes(e(this.s),e(this.e))}}class JP{static hasDST(e=zn.defaultZone){const i=mt.now().setZone(e).set({month:12});return!e.isUniversal&&i.offset!==i.set({month:6}).offset}static isValidIANAZone(e){return $l.isValidZone(e)}static normalizeZone(e){return Vy(e,zn.defaultZone)}static getStartOfWeek({locale:e=null,locObj:i=null}={}){return(i||dr.create(e)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:e=null,locObj:i=null}={}){return(i||dr.create(e)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:e=null,locObj:i=null}={}){return(i||dr.create(e)).getWeekendDays().slice()}static months(e="long",{locale:i=null,numberingSystem:r=null,locObj:n=null,outputCalendar:s="gregory"}={}){return(n||dr.create(i,r,s)).months(e)}static monthsFormat(e="long",{locale:i=null,numberingSystem:r=null,locObj:n=null,outputCalendar:s="gregory"}={}){return(n||dr.create(i,r,s)).months(e,!0)}static weekdays(e="long",{locale:i=null,numberingSystem:r=null,locObj:n=null}={}){return(n||dr.create(i,r,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:i=null,numberingSystem:r=null,locObj:n=null}={}){return(n||dr.create(i,r,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return dr.create(e).meridiems()}static eras(e="short",{locale:i=null}={}){return dr.create(i,null,"gregory").eras(e)}static features(){return{relative:Kfe(),localeWeek:Qfe()}}}function Wie(t,e){const i=n=>n.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),r=i(e)-i(t);return Math.floor(Bi.fromMillis(r).as("days"))}function QLe(t,e,i){const r=[["years",(l,c)=>c.year-l.year],["quarters",(l,c)=>c.quarter-l.quarter+(c.year-l.year)*4],["months",(l,c)=>c.month-l.month+(c.year-l.year)*12],["weeks",(l,c)=>{const h=Wie(l,c);return(h-h%7)/7}],["days",Wie]],n={},s=t;let a,o;for(const[l,c]of r)i.indexOf(l)>=0&&(a=l,n[l]=c(t,e),o=s.plus(n),o>e?(n[l]--,t=s.plus(n),t>e&&(o=t,n[l]--,t=s.plus(n))):t=o);return[t,n,o,a]}function e3e(t,e,i,r){let[n,s,a,o]=QLe(t,e,i);const l=e-n,c=i.filter(f=>["hours","minutes","seconds","milliseconds"].indexOf(f)>=0);c.length===0&&(a<e&&(a=n.plus({[o]:1})),a!==n&&(s[o]=(s[o]||0)+l/(a-n)));const h=Bi.fromObject(s,r);return c.length>0?Bi.fromMillis(l,r).shiftTo(...c).plus(h):h}const t3e="missing Intl.DateTimeFormat.formatToParts support";function tr(t,e=i=>i){return{regex:t,deser:([i])=>e(GOe(i))}}const i3e="",yme=`[ ${i3e}]`,vme=new RegExp(yme,"g");function r3e(t){return t.replace(/\./g,"\\.?").replace(vme,yme)}function Yie(t){return t.replace(/\./g,"").replace(vme," ").toLowerCase()}function Gu(t,e){return t===null?null:{regex:RegExp(t.map(r3e).join("|")),deser:([i])=>t.findIndex(r=>Yie(i)===Yie(r))+e}}function Zie(t,e){return{regex:t,deser:([,i,r])=>OF(i,r),groups:e}}function KP(t){return{regex:t,deser:([e])=>e}}function n3e(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function s3e(t,e){const i=Hu(e),r=Hu(e,"{2}"),n=Hu(e,"{3}"),s=Hu(e,"{4}"),a=Hu(e,"{6}"),o=Hu(e,"{1,2}"),l=Hu(e,"{1,3}"),c=Hu(e,"{1,6}"),h=Hu(e,"{1,9}"),f=Hu(e,"{2,4}"),g=Hu(e,"{4,6}"),y=S=>({regex:RegExp(n3e(S.val)),deser:([$])=>$,literal:!0}),_=(S=>{if(t.literal)return y(S);switch(S.val){case"G":return Gu(e.eras("short"),0);case"GG":return Gu(e.eras("long"),0);case"y":return tr(c);case"yy":return tr(f,F8);case"yyyy":return tr(s);case"yyyyy":return tr(g);case"yyyyyy":return tr(a);case"M":return tr(o);case"MM":return tr(r);case"MMM":return Gu(e.months("short",!0),1);case"MMMM":return Gu(e.months("long",!0),1);case"L":return tr(o);case"LL":return tr(r);case"LLL":return Gu(e.months("short",!1),1);case"LLLL":return Gu(e.months("long",!1),1);case"d":return tr(o);case"dd":return tr(r);case"o":return tr(l);case"ooo":return tr(n);case"HH":return tr(r);case"H":return tr(o);case"hh":return tr(r);case"h":return tr(o);case"mm":return tr(r);case"m":return tr(o);case"q":return tr(o);case"qq":return tr(r);case"s":return tr(o);case"ss":return tr(r);case"S":return tr(l);case"SSS":return tr(n);case"u":return KP(h);case"uu":return KP(o);case"uuu":return tr(i);case"a":return Gu(e.meridiems(),0);case"kkkk":return tr(s);case"kk":return tr(f,F8);case"W":return tr(o);case"WW":return tr(r);case"E":case"c":return tr(i);case"EEE":return Gu(e.weekdays("short",!1),1);case"EEEE":return Gu(e.weekdays("long",!1),1);case"ccc":return Gu(e.weekdays("short",!0),1);case"cccc":return Gu(e.weekdays("long",!0),1);case"Z":case"ZZ":return Zie(new RegExp(`([+-]${o.source})(?::(${r.source}))?`),2);case"ZZZ":return Zie(new RegExp(`([+-]${o.source})(${r.source})?`),2);case"z":return KP(/[a-z_+-/]{1,256}?/i);case" ":return KP(/[^\S\n\r]/);default:return y(S)}})(t)||{invalidReason:t3e};return _.token=t,_}const a3e={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function o3e(t,e,i){const{type:r,value:n}=t;if(r==="literal"){const l=/^\s+$/.test(n);return{literal:!l,val:l?" ":n}}const s=e[r];let a=r;r==="hour"&&(e.hour12!=null?a=e.hour12?"hour12":"hour24":e.hourCycle!=null?e.hourCycle==="h11"||e.hourCycle==="h12"?a="hour12":a="hour24":a=i.hour12?"hour12":"hour24");let o=a3e[a];if(typeof o=="object"&&(o=o[s]),o)return{literal:!1,val:o}}function l3e(t){return[`^${t.map(i=>i.regex).reduce((i,r)=>`${i}(${r.source})`,"")}$`,t]}function c3e(t,e,i){const r=t.match(e);if(r){const n={};let s=1;for(const a in i)if(N$(i,a)){const o=i[a],l=o.groups?o.groups+1:1;!o.literal&&o.token&&(n[o.token.val[0]]=o.deser(r.slice(s,s+l))),s+=l}return[r,n]}else return[r,{}]}function u3e(t){const e=s=>{switch(s){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let i=null,r;return ri(t.z)||(i=$l.create(t.z)),ri(t.Z)||(i||(i=new _s(t.Z)),r=t.Z),ri(t.q)||(t.M=(t.q-1)*3+1),ri(t.h)||(t.h<12&&t.a===1?t.h+=12:t.h===12&&t.a===0&&(t.h=0)),t.G===0&&t.y&&(t.y=-t.y),ri(t.u)||(t.S=_Y(t.u)),[Object.keys(t).reduce((s,a)=>{const o=e(a);return o&&(s[o]=t[a]),s},{}),i,r]}let XV=null;function d3e(){return XV||(XV=mt.fromMillis(1555555555555)),XV}function h3e(t,e){if(t.literal)return t;const i=lo.macroTokenToFormatOpts(t.val),r=xme(i,e);return r==null||r.includes(void 0)?t:r}function bme(t,e){return Array.prototype.concat(...t.map(i=>h3e(i,e)))}class wme{constructor(e,i){if(this.locale=e,this.format=i,this.tokens=bme(lo.parseFormat(i),e),this.units=this.tokens.map(r=>s3e(r,e)),this.disqualifyingUnit=this.units.find(r=>r.invalidReason),!this.disqualifyingUnit){const[r,n]=l3e(this.units);this.regex=RegExp(r,"i"),this.handlers=n}}explainFromTokens(e){if(this.isValid){const[i,r]=c3e(e,this.regex,this.handlers),[n,s,a]=r?u3e(r):[null,null,void 0];if(N$(r,"a")&&N$(r,"H"))throw new fS("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:this.tokens,regex:this.regex,rawMatches:i,matches:r,result:n,zone:s,specificOffset:a}}else return{input:e,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function _me(t,e,i){return new wme(t,i).explainFromTokens(e)}function p3e(t,e,i){const{result:r,zone:n,specificOffset:s,invalidReason:a}=_me(t,e,i);return[r,n,s,a]}function xme(t,e){if(!t)return null;const r=lo.create(e,t).dtFormatter(d3e()),n=r.formatToParts(),s=r.resolvedOptions();return n.map(a=>o3e(a,t,s))}const JV="Invalid DateTime",Xie=864e13;function Y2(t){return new Id("unsupported zone",`the zone "${t.name}" is not supported`)}function KV(t){return t.weekData===null&&(t.weekData=TR(t.c)),t.weekData}function QV(t){return t.localWeekData===null&&(t.localWeekData=TR(t.c,t.loc.getMinDaysInFirstWeek(),t.loc.getStartOfWeek())),t.localWeekData}function xb(t,e){const i={ts:t.ts,zone:t.zone,c:t.c,o:t.o,loc:t.loc,invalid:t.invalid};return new mt({...i,...e,old:i})}function Sme(t,e,i){let r=t-e*60*1e3;const n=i.offset(r);if(e===n)return[r,e];r-=(n-e)*60*1e3;const s=i.offset(r);return n===s?[r,n]:[t-Math.min(n,s)*60*1e3,Math.max(n,s)]}function QP(t,e){t+=e*60*1e3;const i=new Date(t);return{year:i.getUTCFullYear(),month:i.getUTCMonth()+1,day:i.getUTCDate(),hour:i.getUTCHours(),minute:i.getUTCMinutes(),second:i.getUTCSeconds(),millisecond:i.getUTCMilliseconds()}}function l3(t,e,i){return Sme(PF(t),e,i)}function Jie(t,e){const i=t.o,r=t.c.year+Math.trunc(e.years),n=t.c.month+Math.trunc(e.months)+Math.trunc(e.quarters)*3,s={...t.c,year:r,month:n,day:Math.min(t.c.day,kR(r,n))+Math.trunc(e.days)+Math.trunc(e.weeks)*7},a=Bi.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),o=PF(s);let[l,c]=Sme(o,i,t.zone);return a!==0&&(l+=a,c=t.zone.offset(l)),{ts:l,o:c}}function _1(t,e,i,r,n,s){const{setZone:a,zone:o}=i;if(t&&Object.keys(t).length!==0||e){const l=e||o,c=mt.fromObject(t,{...i,zone:l,specificOffset:s});return a?c:c.setZone(o)}else return mt.invalid(new Id("unparsable",`the input "${n}" can't be parsed as ${r}`))}function eO(t,e,i=!0){return t.isValid?lo.create(dr.create("en-US"),{allowZ:i,forceSimple:!0}).formatDateTimeFromString(t,e):null}function e6(t,e,i){const r=t.c.year>9999||t.c.year<0;let n="";if(r&&t.c.year>=0&&(n+="+"),n+=vs(t.c.year,r?6:4),i==="year")return n;if(e){if(n+="-",n+=vs(t.c.month),i==="month")return n;n+="-"}else if(n+=vs(t.c.month),i==="month")return n;return n+=vs(t.c.day),n}function Kie(t,e,i,r,n,s,a){let o=!i||t.c.millisecond!==0||t.c.second!==0,l="";switch(a){case"day":case"month":case"year":break;default:if(l+=vs(t.c.hour),a==="hour")break;if(e){if(l+=":",l+=vs(t.c.minute),a==="minute")break;o&&(l+=":",l+=vs(t.c.second))}else{if(l+=vs(t.c.minute),a==="minute")break;o&&(l+=vs(t.c.second))}if(a==="second")break;o&&(!r||t.c.millisecond!==0)&&(l+=".",l+=vs(t.c.millisecond,3))}return n&&(t.isOffsetFixed&&t.offset===0&&!s?l+="Z":t.o<0?(l+="-",l+=vs(Math.trunc(-t.o/60)),l+=":",l+=vs(Math.trunc(-t.o%60))):(l+="+",l+=vs(Math.trunc(t.o/60)),l+=":",l+=vs(Math.trunc(t.o%60)))),s&&(l+="["+t.zone.ianaName+"]"),l}const $me={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},f3e={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},m3e={ordinal:1,hour:0,minute:0,second:0,millisecond:0},c3=["year","month","day","hour","minute","second","millisecond"],g3e=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],y3e=["year","ordinal","hour","minute","second","millisecond"];function u3(t){const e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[t.toLowerCase()];if(!e)throw new $fe(t);return e}function Qie(t){switch(t.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return u3(t)}}function v3e(t){if(Z2===void 0&&(Z2=zn.now()),t.type!=="iana")return t.offset(Z2);const e=t.name;let i=N8.get(e);return i===void 0&&(i=t.offset(Z2),N8.set(e,i)),i}function ere(t,e){const i=Vy(e.zone,zn.defaultZone);if(!i.isValid)return mt.invalid(Y2(i));const r=dr.fromObject(e);let n,s;if(ri(t.year))n=zn.now();else{for(const l of c3)ri(t[l])&&(t[l]=$me[l]);const a=Xfe(t)||Jfe(t);if(a)return mt.invalid(a);const o=v3e(i);[n,s]=l3(t,o,i)}return new mt({ts:n,zone:i,loc:r,o:s})}function tre(t,e,i){const r=ri(i.round)?!0:i.round,n=ri(i.rounding)?"trunc":i.rounding,s=(o,l)=>(o=xY(o,r||i.calendary?0:2,i.calendary?"round":n),e.loc.clone(i).relFormatter(i).format(o,l)),a=o=>i.calendary?e.hasSame(t,o)?0:e.startOf(o).diff(t.startOf(o),o).get(o):e.diff(t,o).get(o);if(i.unit)return s(a(i.unit),i.unit);for(const o of i.units){const l=a(o);if(Math.abs(l)>=1)return s(l,o)}return s(t>e?-0:0,i.units[i.units.length-1])}function ire(t){let e={},i;return t.length>0&&typeof t[t.length-1]=="object"?(e=t[t.length-1],i=Array.from(t).slice(0,t.length-1)):i=Array.from(t),[e,i]}let Z2;const N8=new Map;class mt{constructor(e){const i=e.zone||zn.defaultZone;let r=e.invalid||(Number.isNaN(e.ts)?new Id("invalid input"):null)||(i.isValid?null:Y2(i));this.ts=ri(e.ts)?zn.now():e.ts;let n=null,s=null;if(!r)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(i))[n,s]=[e.old.c,e.old.o];else{const o=cv(e.o)&&!e.old?e.o:i.offset(this.ts);n=QP(this.ts,o),r=Number.isNaN(n.year)?new Id("invalid input"):null,n=r?null:n,s=r?null:o}this._zone=i,this.loc=e.loc||dr.create(),this.invalid=r,this.weekData=null,this.localWeekData=null,this.c=n,this.o=s,this.isLuxonDateTime=!0}static now(){return new mt({})}static local(){const[e,i]=ire(arguments),[r,n,s,a,o,l,c]=i;return ere({year:r,month:n,day:s,hour:a,minute:o,second:l,millisecond:c},e)}static utc(){const[e,i]=ire(arguments),[r,n,s,a,o,l,c]=i;return e.zone=_s.utcInstance,ere({year:r,month:n,day:s,hour:a,minute:o,second:l,millisecond:c},e)}static fromJSDate(e,i={}){const r=XOe(e)?e.valueOf():NaN;if(Number.isNaN(r))return mt.invalid("invalid input");const n=Vy(i.zone,zn.defaultZone);return n.isValid?new mt({ts:r,zone:n,loc:dr.fromObject(i)}):mt.invalid(Y2(n))}static fromMillis(e,i={}){if(cv(e))return e<-Xie||e>Xie?mt.invalid("Timestamp out of range"):new mt({ts:e,zone:Vy(i.zone,zn.defaultZone),loc:dr.fromObject(i)});throw new to(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,i={}){if(cv(e))return new mt({ts:e*1e3,zone:Vy(i.zone,zn.defaultZone),loc:dr.fromObject(i)});throw new to("fromSeconds requires a numerical input")}static fromObject(e,i={}){e=e||{};const r=Vy(i.zone,zn.defaultZone);if(!r.isValid)return mt.invalid(Y2(r));const n=dr.fromObject(i),s=ER(e,Qie),{minDaysInFirstWeek:a,startOfWeek:o}=Nie(s,n),l=zn.now(),c=ri(i.specificOffset)?r.offset(l):i.specificOffset,h=!ri(s.ordinal),f=!ri(s.year),g=!ri(s.month)||!ri(s.day),y=f||g,b=s.weekYear||s.weekNumber;if((y||h)&&b)throw new fS("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(g&&h)throw new fS("Can't mix ordinal dates with month/day");const _=b||s.weekday&&!y;let S,$,C=QP(l,c);_?(S=g3e,$=f3e,C=TR(C,a,o)):h?(S=y3e,$=m3e,C=ZV(C)):(S=c3,$=$me);let I=!1;for(const Q of S){const ae=s[Q];ri(ae)?I?s[Q]=$[Q]:s[Q]=C[Q]:I=!0}const P=_?WOe(s,a,o):h?YOe(s):Xfe(s),O=P||Jfe(s);if(O)return mt.invalid(O);const N=_?zie(s,a,o):h?Fie(s):s,[R,G]=l3(N,c,r),Y=new mt({ts:R,zone:r,o:G,loc:n});return s.weekday&&y&&e.weekday!==Y.weekday?mt.invalid("mismatched weekday",`you can't specify both a weekday of ${s.weekday} and a date of ${Y.toISO()}`):Y.isValid?Y:mt.invalid(Y.invalid)}static fromISO(e,i={}){const[r,n]=NLe(e);return _1(r,n,i,"ISO 8601",e)}static fromRFC2822(e,i={}){const[r,n]=jLe(e);return _1(r,n,i,"RFC 2822",e)}static fromHTTP(e,i={}){const[r,n]=VLe(e);return _1(r,n,i,"HTTP",i)}static fromFormat(e,i,r={}){if(ri(e)||ri(i))throw new to("fromFormat requires an input string and a format");const{locale:n=null,numberingSystem:s=null}=r,a=dr.fromOpts({locale:n,numberingSystem:s,defaultToEN:!0}),[o,l,c,h]=p3e(a,e,i);return h?mt.invalid(h):_1(o,l,r,`format ${i}`,e,c)}static fromString(e,i,r={}){return mt.fromFormat(e,i,r)}static fromSQL(e,i={}){const[r,n]=YLe(e);return _1(r,n,i,"SQL",e)}static invalid(e,i=null){if(!e)throw new to("need to specify a reason the DateTime is invalid");const r=e instanceof Id?e:new Id(e,i);if(zn.throwOnInvalid)throw new _Oe(r);return new mt({invalid:r})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,i={}){const r=xme(e,dr.fromObject(i));return r?r.map(n=>n?n.val:null).join(""):null}static expandFormat(e,i={}){return bme(lo.parseFormat(e),dr.fromObject(i)).map(n=>n.val).join("")}static resetCache(){Z2=void 0,N8.clear()}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?KV(this).weekYear:NaN}get weekNumber(){return this.isValid?KV(this).weekNumber:NaN}get weekday(){return this.isValid?KV(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?QV(this).weekday:NaN}get localWeekNumber(){return this.isValid?QV(this).weekNumber:NaN}get localWeekYear(){return this.isValid?QV(this).weekYear:NaN}get ordinal(){return this.isValid?ZV(this.c).ordinal:NaN}get monthShort(){return this.isValid?JP.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?JP.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?JP.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?JP.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const e=864e5,i=6e4,r=PF(this.c),n=this.zone.offset(r-e),s=this.zone.offset(r+e),a=this.zone.offset(r-n*i),o=this.zone.offset(r-s*i);if(a===o)return[this];const l=r-a*i,c=r-o*i,h=QP(l,a),f=QP(c,o);return h.hour===f.hour&&h.minute===f.minute&&h.second===f.second&&h.millisecond===f.millisecond?[xb(this,{ts:l}),xb(this,{ts:c})]:[this]}get isInLeapYear(){return zM(this.year)}get daysInMonth(){return kR(this.year,this.month)}get daysInYear(){return this.isValid?DS(this.year):NaN}get weeksInWeekYear(){return this.isValid?fI(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?fI(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(e={}){const{locale:i,numberingSystem:r,calendar:n}=lo.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:i,numberingSystem:r,outputCalendar:n}}toUTC(e=0,i={}){return this.setZone(_s.instance(e),i)}toLocal(){return this.setZone(zn.defaultZone)}setZone(e,{keepLocalTime:i=!1,keepCalendarTime:r=!1}={}){if(e=Vy(e,zn.defaultZone),e.equals(this.zone))return this;if(e.isValid){let n=this.ts;if(i||r){const s=e.offset(this.ts),a=this.toObject();[n]=l3(a,s,e)}return xb(this,{ts:n,zone:e})}else return mt.invalid(Y2(e))}reconfigure({locale:e,numberingSystem:i,outputCalendar:r}={}){const n=this.loc.clone({locale:e,numberingSystem:i,outputCalendar:r});return xb(this,{loc:n})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const i=ER(e,Qie),{minDaysInFirstWeek:r,startOfWeek:n}=Nie(i,this.loc),s=!ri(i.weekYear)||!ri(i.weekNumber)||!ri(i.weekday),a=!ri(i.ordinal),o=!ri(i.year),l=!ri(i.month)||!ri(i.day),c=o||l,h=i.weekYear||i.weekNumber;if((c||a)&&h)throw new fS("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(l&&a)throw new fS("Can't mix ordinal dates with month/day");let f;s?f=zie({...TR(this.c,r,n),...i},r,n):ri(i.ordinal)?(f={...this.toObject(),...i},ri(i.day)&&(f.day=Math.min(kR(f.year,f.month),f.day))):f=Fie({...ZV(this.c),...i});const[g,y]=l3(f,this.o,this.zone);return xb(this,{ts:g,o:y})}plus(e){if(!this.isValid)return this;const i=Bi.fromDurationLike(e);return xb(this,Jie(this,i))}minus(e){if(!this.isValid)return this;const i=Bi.fromDurationLike(e).negate();return xb(this,Jie(this,i))}startOf(e,{useLocaleWeeks:i=!1}={}){if(!this.isValid)return this;const r={},n=Bi.normalizeUnit(e);switch(n){case"years":r.month=1;case"quarters":case"months":r.day=1;case"weeks":case"days":r.hour=0;case"hours":r.minute=0;case"minutes":r.second=0;case"seconds":r.millisecond=0;break}if(n==="weeks")if(i){const s=this.loc.getStartOfWeek(),{weekday:a}=this;a<s&&(r.weekNumber=this.weekNumber-1),r.weekday=s}else r.weekday=1;if(n==="quarters"){const s=Math.ceil(this.month/3);r.month=(s-1)*3+1}return this.set(r)}endOf(e,i){return this.isValid?this.plus({[e]:1}).startOf(e,i).minus(1):this}toFormat(e,i={}){return this.isValid?lo.create(this.loc.redefaultToEN(i)).formatDateTimeFromString(this,e):JV}toLocaleString(e=$R,i={}){return this.isValid?lo.create(this.loc.clone(i),e).formatDateTime(this):JV}toLocaleParts(e={}){return this.isValid?lo.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:i=!1,suppressMilliseconds:r=!1,includeOffset:n=!0,extendedZone:s=!1,precision:a="milliseconds"}={}){if(!this.isValid)return null;a=u3(a);const o=e==="extended";let l=e6(this,o,a);return c3.indexOf(a)>=3&&(l+="T"),l+=Kie(this,o,i,r,n,s,a),l}toISODate({format:e="extended",precision:i="day"}={}){return this.isValid?e6(this,e==="extended",u3(i)):null}toISOWeekDate(){return eO(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:i=!1,includeOffset:r=!0,includePrefix:n=!1,extendedZone:s=!1,format:a="extended",precision:o="milliseconds"}={}){return this.isValid?(o=u3(o),(n&&c3.indexOf(o)>=3?"T":"")+Kie(this,a==="extended",i,e,r,s,o)):null}toRFC2822(){return eO(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return eO(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?e6(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:i=!1,includeOffsetSpace:r=!0}={}){let n="HH:mm:ss.SSS";return(i||e)&&(r&&(n+=" "),i?n+="z":e&&(n+="ZZ")),eO(this,n,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():JV}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};const i={...this.c};return e.includeConfig&&(i.outputCalendar=this.outputCalendar,i.numberingSystem=this.loc.numberingSystem,i.locale=this.loc.locale),i}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,i="milliseconds",r={}){if(!this.isValid||!e.isValid)return Bi.invalid("created by diffing an invalid DateTime");const n={locale:this.locale,numberingSystem:this.numberingSystem,...r},s=JOe(i).map(Bi.normalizeUnit),a=e.valueOf()>this.valueOf(),o=a?this:e,l=a?e:this,c=e3e(o,l,s,n);return a?c.negate():c}diffNow(e="milliseconds",i={}){return this.diff(mt.now(),e,i)}until(e){return this.isValid?On.fromDateTimes(this,e):this}hasSame(e,i,r){if(!this.isValid)return!1;const n=e.valueOf(),s=this.setZone(e.zone,{keepLocalTime:!0});return s.startOf(i,r)<=n&&n<=s.endOf(i,r)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;const i=e.base||mt.fromObject({},{zone:this.zone}),r=e.padding?this<i?-e.padding:e.padding:0;let n=["years","months","days","hours","minutes","seconds"],s=e.unit;return Array.isArray(e.unit)&&(n=e.unit,s=void 0),tre(i,this.plus(r),{...e,numeric:"always",units:n,unit:s})}toRelativeCalendar(e={}){return this.isValid?tre(e.base||mt.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(mt.isDateTime))throw new to("min requires all arguments be DateTimes");return jie(e,i=>i.valueOf(),Math.min)}static max(...e){if(!e.every(mt.isDateTime))throw new to("max requires all arguments be DateTimes");return jie(e,i=>i.valueOf(),Math.max)}static fromFormatExplain(e,i,r={}){const{locale:n=null,numberingSystem:s=null}=r,a=dr.fromOpts({locale:n,numberingSystem:s,defaultToEN:!0});return _me(a,e,i)}static fromStringExplain(e,i,r={}){return mt.fromFormatExplain(e,i,r)}static buildFormatParser(e,i={}){const{locale:r=null,numberingSystem:n=null}=i,s=dr.fromOpts({locale:r,numberingSystem:n,defaultToEN:!0});return new wme(s,e)}static fromFormatParser(e,i,r={}){if(ri(e)||ri(i))throw new to("fromFormatParser requires an input string and a format parser");const{locale:n=null,numberingSystem:s=null}=r,a=dr.fromOpts({locale:n,numberingSystem:s,defaultToEN:!0});if(!a.equals(i.locale))throw new to(`fromFormatParser called with a locale of ${a}, but the format parser was created for ${i.locale}`);const{result:o,zone:l,specificOffset:c,invalidReason:h}=i.explainFromTokens(e);return h?mt.invalid(h):_1(o,l,r,`format ${i.format}`,e,c)}static get DATE_SHORT(){return $R}static get DATE_MED(){return Tfe}static get DATE_MED_WITH_WEEKDAY(){return $Oe}static get DATE_FULL(){return kfe}static get DATE_HUGE(){return Efe}static get TIME_SIMPLE(){return Cfe}static get TIME_WITH_SECONDS(){return Ife}static get TIME_WITH_SHORT_OFFSET(){return Mfe}static get TIME_WITH_LONG_OFFSET(){return Afe}static get TIME_24_SIMPLE(){return Pfe}static get TIME_24_WITH_SECONDS(){return Ofe}static get TIME_24_WITH_SHORT_OFFSET(){return Lfe}static get TIME_24_WITH_LONG_OFFSET(){return Dfe}static get DATETIME_SHORT(){return Rfe}static get DATETIME_SHORT_WITH_SECONDS(){return zfe}static get DATETIME_MED(){return Ffe}static get DATETIME_MED_WITH_SECONDS(){return Nfe}static get DATETIME_MED_WITH_WEEKDAY(){return TOe}static get DATETIME_FULL(){return jfe}static get DATETIME_FULL_WITH_SECONDS(){return Vfe}static get DATETIME_HUGE(){return Bfe}static get DATETIME_HUGE_WITH_SECONDS(){return Ufe}}function t2(t){if(mt.isDateTime(t))return t;if(t&&t.valueOf&&cv(t.valueOf()))return mt.fromJSDate(t);if(t&&typeof t=="object")return mt.fromObject(t);throw new to(`Unknown datetime argument: ${t}, of type ${typeof t}`)}const b3e="shortOffset";function w3e(t){return"timeZoneIANA"in t}function _3e(t){return t.startsWith("UTC")}function CR(t,e=!1){return{json:{read:{source:t,reader:(i,r)=>r[t]?d3(r[t]):null},write:!!e&&{allowNull:!0,writer(i,r){r[t]=i?x3e(i):null}}}}}function d3(t,e=_u){return t?w3e(t)?t.timeZoneIANA:S3e(t,e):e}function x3e(t){return{timeZoneIANA:t}}function S3e(t,e=_u){if(!t||!kie.has(t.timeZone))return e;const i=kie.get(t.timeZone);return _3e(t.timeZone)||t.respectsDaylightSaving?i:$3e(i)}function $3e(t){const e=mt.local().setZone(t),i=Math.min(e.set({month:1,day:1}).offset,e.set({month:5}).offset);return i===0?"Etc/UTC":`Etc/GMT${_s.instance(-i).formatOffset(0,"narrow")}`}function T3e(t,e,i,r,n){if(e&&n==="date")return{timeZone:zp,timeZoneName:void 0};const s=r.hour,a=i===xv;return{timeZone:a?n==="timestamp-offset"?void 0:t??zp:i,timeZoneName:a&&s?b3e:void 0}}function k3e(t){const e=new Set(["etc/utc","etc/gmt","gmt"]),i=new Set(Intl.supportedValuesOf("timeZone").map(r=>r.toLowerCase()));return t===_u||t===xv||e.has(t.toLowerCase())||i.has(t.toLowerCase())}const E3e={dateStyle:void 0,year:void 0,month:void 0,day:void 0,weekday:void 0},C3e={timeStyle:void 0,hour12:void 0,hourCycle:void 0,hour:void 0,minute:void 0,second:void 0},Tme={timeZone:zp},ah={year:"numeric",month:"numeric",day:"numeric"},i2={year:"numeric",month:"long",day:"numeric"},r2={year:"numeric",month:"short",day:"numeric"},n2={year:"numeric",month:"long",weekday:"long",day:"numeric"},Py={hour:"numeric",minute:"numeric"},Vb={...Py,second:"numeric"},kme={hourCycle:"h23"},s2={...Py,...kme},a2={...Vb,...kme},Eme={"short-date":ah,"short-date-short-time":{...ah,...Py},"short-date-short-time-24":{...ah,...s2},"short-date-long-time":{...ah,...Vb},"short-date-long-time-24":{...ah,...a2},"short-date-le":ah,"short-date-le-short-time":{...ah,...Py},"short-date-le-short-time-24":{...ah,...s2},"short-date-le-long-time":{...ah,...Vb},"short-date-le-long-time-24":{...ah,...a2},"long-month-day-year":i2,"long-month-day-year-short-time":{...i2,...Py},"long-month-day-year-short-time-24":{...i2,...s2},"long-month-day-year-long-time":{...i2,...Vb},"long-month-day-year-long-time-24":{...i2,...a2},"day-short-month-year":r2,"day-short-month-year-short-time":{...r2,...Py},"day-short-month-year-short-time-24":{...r2,...s2},"day-short-month-year-long-time":{...r2,...Vb},"day-short-month-year-long-time-24":{...r2,...a2},"long-date":n2,"long-date-short-time":{...n2,...Py},"long-date-short-time-24":{...n2,...s2},"long-date-long-time":{...n2,...Vb},"long-date-long-time-24":{...n2,...a2},"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":Py,"long-time":Vb},I3e=Gn()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"}),Cme={ar:"ar-u-nu-latn-ca-gregory",nn:"no-NN"},M3e=new Intl.DateTimeFormat("bs",{month:"long"}).formatToParts(new Date(2025,2)),A3e=M3e.find(({type:t})=>t==="month")?.value.toLowerCase();function Ime(){const t=mY();return(t&&Cme[t])??xfe()}A3e!=="mart"&&(Cme.bs="sr-Latn-CS");let j8=new WeakMap;const DF=Eme["short-date-short-time"];function P3e(t){let e=j8.get(t);if(!e){const i=Ime(),r=kY(t.timeZone??_u),n={...t,timeZone:r};e=new Intl.DateTimeFormat(i,n),j8.set(t,e)}return e}function o2(t){return Eme[t]}function O3e(t){const{dateStyle:e,timeStyle:i,hour12:r,year:n,month:s}=t,a={};return e?a.dateStyle=e:n&&(a.year=n,a.month=s||void 0),i&&!a.year&&(a.timeStyle=i,a.hour12=r==="auto"?void 0:r==="always"),a}function vu(t,e=DF){return P3e(e).format(t)}function L3e(t,e=DF){return vu(new Date(t),{...e,...Tme,...C3e})}function D3e(t,e=DF){return vu(new Date(`1970-01-01T${t}Z`),{...e,...Tme,...E3e})}function R3e(t,e=DF){if(e.timeZone)return vu(new Date(t),e);const i=mt.fromISO(t,{setZone:!0}),r=i.offset===0?zp:e.timeZone,n={...e,timeZone:r};return i.toLocaleString(n,{locale:Ime()})}function kY(t){switch(t){case _u:return wOe;case xv:return zp;default:return t}}yY(()=>{j8=new WeakMap});const z3e={ar:"ar-u-nu-latn",bs:"sr-Latn-CS",nn:"no-NN"};let h3=new WeakMap,Mme={};function V8(t){const e=t||Mme;if(!h3.has(e)){const i=mY(),r=i&&z3e[i]||xfe();h3.set(e,new Intl.NumberFormat(r,t))}return h3.get(e)}function F3e(t={}){const e={};return t.digitSeparator!=null&&(e.useGrouping=t.digitSeparator),t.places!=null&&(e.minimumFractionDigits=e.maximumFractionDigits=t.places),e}function N3e(t){const{minimumFractionDigits:e,maximumFractionDigits:i,useGrouping:r}=t;return{minimumFractionDigits:e,maximumFractionDigits:i,useGrouping:r==="auto"?"auto":r==="always"}}function Sv(t,e){return Object.is(t,-0)&&(t=0),V8(e).format(t)}function L2t(t,e=xl()){if(!t)return null;let i=rre.get(e);if(!i){const r=V8().formatToParts(12345.6),n=[...V8({useGrouping:!1}).format(9876543210)].reverse(),s=new Map(n.map((f,g)=>[f,g])),a=new RegExp(`[${r.find(f=>f.type==="group")?.value}]`,"g"),o=new RegExp(`[${r.find(f=>f.type==="decimal")?.value}]`),l=new RegExp(`[${n.join("")}]`,"g"),c=/[\u200E\u200F\u202A\u202B\u202C\u202D\u202E\u2066\u2067\u2068\u2069\u061C]/g,h=/[-\u2212\u2013\u2014\u2015]/g;i=f=>{if((f=f.trim().replaceAll(a,"").replace(o,".").replace(l,y=>String(s.get(y))).replaceAll(c,"").replaceAll(h,"-"))==="")return null;const g=Number(f);return isNaN(g)?null:g},rre.set(e,i)}return i(t)}yY(()=>{h3=new WeakMap,Mme={}});const rre=new Map,Ame=()=>$e.getLogger("esri.intl.substitute");function Fp(t,e,i={}){const{format:r={}}=i;return Dv(t,n=>j3e(n,e,r))}function j3e(t,e,i){let r,n;const s=t.indexOf(":");if(s===-1?r=t.trim():(r=t.slice(0,s).trim(),n=t.slice(s+1).trim()),!r)return"";const a=Mm(r,e);if(a==null)return"";const o=(n?i?.[n]:null)??i?.[r];return o?V3e(a,o):n?B3e(a,n):EY(a)}function V3e(t,e){switch(e.type){case"date":return vu(t,e.intlOptions);case"number":return Sv(t,e.intlOptions);default:return Ame().warn("missing format descriptor for key {key}"),EY(t)}}function B3e(t,e){switch(e.toLowerCase()){case"dateformat":return vu(t);case"numberformat":return Sv(t);default:return Ame().warn(`inline format is unsupported since 4.12: ${e}`),/^(dateformat|datestring)/i.test(e)?vu(t):/^numberformat/i.test(e)?Sv(t):EY(t)}}function EY(t){switch(typeof t){case"string":return t;case"number":return Sv(t);case"boolean":return""+t;default:return t instanceof Date?vu(t):""}}const Pme={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:"no",nl:!0,no:!0,nn:"no",pl:!0,pt:"pt-BR","pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,zh:"zh-CN","zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function U3e(t){return t in Pme}function nre(t){if(U3e(t)){const e=Pme[t];return e===!0?t:e}return null}const X2=[],zS=new Map;function sre(t){for(const e of zS.keys())Dme(t.pattern,e)&&zS.delete(e)}function H3e(t){return X2.includes(t)||(sre(t),X2.unshift(t)),Si(()=>{const e=X2.indexOf(t);e>-1&&(X2.splice(e,1),sre(t))})}async function Ome(t){const e=xl();zS.has(t)||zS.set(t,G3e(t,e));const i=zS.get(t);return i&&await q3e.add(i),i}function Lme(t){const e=mY(t);return e?nre(t)??nre(e):null}async function G3e(t,e){const i=[];for(const r of X2)if(Dme(r.pattern,t))try{return await r.fetchMessageBundle(t,e)}catch(n){i.push(n)}throw i.length?new ee("intl:message-bundle-error",`Errors occurred while loading "${t}"`,{errors:i}):new ee("intl:no-message-bundle-loader",`No loader found for message bundle "${t}"`)}function Dme(t,e){return typeof t=="string"?e.startsWith(t):t.test(e)}yY(()=>{zS.clear()});const q3e=new class{constructor(){this._numLoading=0,this._dfd=null}async waitForAll(){this._dfd&&await this._dfd.promise}add(t){return this._increase(),t.then(()=>this._decrease(),()=>this._decrease()),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=Qs())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&this._numLoading===0&&(this._dfd.resolve(),this._dfd=null)}};async function W3e(t,e,i,r){const n=e.exec(i);if(!n)throw new ee("esri-intl:invalid-bundle",`Bundle id "${i}" is not compatible with the pattern "${e}"`);const s=n[1]?`${n[1]}/`:"",a=n[2],o=Lme(r),l=`${s}${a}.json`,c=o?`${s}${a}_${o}.json`:l;let h;try{h=await are(t(c))}catch(f){if(c===l)throw new ee("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:f});try{h=await are(t(l))}catch(g){throw new ee("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:g})}}return h}async function are(t){if(ore.fetchBundleAsset!=null)return ore.fetchBundleAsset(t);const e=await Nt(t,{responseType:"text"});return JSON.parse(e.data)}let Y3e=class{constructor({base:e="",pattern:i,location:r=new URL(window.location.href)}){let n;n=typeof r=="string"?s=>new URL(s,new URL(r,window.location.href)).href:r instanceof URL?s=>new URL(s,r).href:r,this.pattern=typeof i=="string"?new RegExp(`^${i}`):i,this.getAssetUrl=n,e=e?e.endsWith("/")?e:e+"/":"",this.matcher=new RegExp(`^${e}(?:(.*)\\/)?(.*)$`)}fetchMessageBundle(e,i){return W3e(this.getAssetUrl,this.matcher,e,i)}};function Z3e(t){return new Y3e(t)}const ore={};function Ur(t){if(!yi.assetsPath)throw $e.getLogger("esri.assets").errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new ee("assets:path-not-set","config.assetsPath is not set");return Bw(yi.assetsPath,t)}H3e(Z3e({pattern:"esri/",location:Ur}));function CY(t){return typeof t=="string"?document.getElementById(t):t??null}function lre(t,e){for(;;){const i=t.firstChild;if(!i)break;e.appendChild(i)}}let X3e=class{constructor(){this._resolver=Qs(),this._status=0,this._resolvingPromises=[],this._resolver.promise.then(()=>{this._status=1,this._cleanUp()},()=>{this._status=2,this._cleanUp()}),this.promise=this._resolver.promise}destroy(){this._cleanUp()}addResolvingPromise(e){this._resolvingPromises.push(e),this._tryResolve()}isResolved(){return this._status===1}isRejected(){return this._status===2}isFulfilled(){return this._status!==0}abort(){this._resolver.reject(Hi())}_cleanUp(){this._allPromise=null,this._resolvingPromises=null}_tryResolve(){if(this.isFulfilled())return;const e=Qs(),i=[...this._resolvingPromises,e.promise],r=this._allPromise=Promise.all(i);r.then(()=>{this.isFulfilled()||this._allPromise!==r||this._resolver.resolve()},n=>{this.isFulfilled()||this._allPromise!==r||ss(n)||this._resolver.reject(n)}),e.resolve()}};const jM=t=>{const e=t;let i=class extends e{constructor(...r){super(...r),this._promiseProps=new X3e,this.addResolvingPromise(Promise.resolve())}destroy(){this._promiseProps.destroy()}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(r,n){return this._promiseProps.promise.then(()=>this).then(r,n)}catch(r){return this.when(null,r)}addResolvingPromise(r){r&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in r?r.when():r)}addResolvingTask(r){r&&!this._promiseProps.isFulfilled()&&(this.addHandles(pMe(r)),this._promiseProps.addResolvingPromise(r.promise))}};return i=d([U("esri.core.Promise")],i),i},IY=jM(lt);function ze(t,e,i={}){return MY(t,e,i,Rme)}function as(t,e,i={}){return MY(t,e,i,zme)}function MY(t,e,i={},r){let n=null;const s=i.once?(a,o)=>{r(a)&&(Rr(n),e(a,o))}:(a,o)=>{r(a)&&e(a,o)};if(n=wAe(t,s,i.sync,i.equals),i.initial){const a=t();s(a,a)}return n}function Oa(t,e,i,r={}){let n=null,s=null,a=null;function o(){n&&s&&(s.remove(),r.onListenerRemove?.(n),n=null,s=null)}function l(h){r.once&&r.once&&Rr(a),i(h)}const c=ze(t,(h,f)=>{o(),TF(h)&&(n=h,s=zm(h,e,l),r.onListenerAdd?.(h))},{sync:r.sync,initial:!0});return a=Si(()=>{c.remove(),o()}),a}function f_(t,e){return J3e(t,zme,e)}function J3e(t,e,i){if(Pa(i))return Promise.reject(Hi());const r=t();if(e?.(r))return Promise.resolve(r);let n=null;function s(){n=Rr(n)}return new Promise((a,o)=>{n=c_([Ma(i,()=>{s(),o(Hi())}),MY(t,l=>{s(),a(l)},{sync:!1,once:!0},e??Rme)])})}function Rme(t){return!0}function zme(t){return!!t}function K3e(t,e,i={}){let r=!1;const n=ze(t,(s,a)=>{r||e(s,a)},i);return{remove(){n.remove()},pause(){r=!0},resume(){r=!1}}}const xu={sync:!0},Di={initial:!0},Ta={sync:!0,initial:!0},Q3e="randomUUID"in crypto;function LT(){if(Q3e)return crypto.randomUUID();const t=crypto.getRandomValues(new Uint16Array(8));t[3]=4095&t[3]|16384,t[4]=16383&t[4]|32768;const e=i=>t[i].toString(16).padStart(4,"0");return e(0)+e(1)+"-"+e(2)+"-"+e(3)+"-"+e(4)+"-"+e(5)+e(6)+e(7)}function z2t(){return`{${LT().toUpperCase()}}`}function eDe(){return`{${LT()}}`}function tDe(t){const e=t.toUpperCase();return t.startsWith("{")?e:`{${e}}`}const iDe=Object.prototype.toString;function rDe(t){const e="__accessorMetadata__"in t?dn(t):t;return function(...i){if(i.push(e),typeof i[2]=="number")throw new Error("Using @cast has parameter decorator is not supported since 4.16");return nDe.apply(this,i)}}function nDe(t,e,i,r){PM(t,e).cast=r}function sDe(t){return(e,i)=>{PM(e,t).cast=e[i]}}function Ii(...t){if(t.length!==3||typeof t[1]!="string")return t.length===1&&iDe.call(t[0])==="[object Function]"?rDe(t[0]):t.length===1&&typeof t[0]=="string"?sDe(t[0]):void 0}var IR=function(){return IR=Object.assign||function(e){for(var i,r=1,n=arguments.length;r<n;r++){i=arguments[r];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},IR.apply(this,arguments)},B8={exports:{}},kn={},U8={exports:{}},m_={};function Fme(){var t={};return t["align-content"]=!1,t["align-items"]=!1,t["align-self"]=!1,t["alignment-adjust"]=!1,t["alignment-baseline"]=!1,t.all=!1,t["anchor-point"]=!1,t.animation=!1,t["animation-delay"]=!1,t["animation-direction"]=!1,t["animation-duration"]=!1,t["animation-fill-mode"]=!1,t["animation-iteration-count"]=!1,t["animation-name"]=!1,t["animation-play-state"]=!1,t["animation-timing-function"]=!1,t.azimuth=!1,t["backface-visibility"]=!1,t.background=!0,t["background-attachment"]=!0,t["background-clip"]=!0,t["background-color"]=!0,t["background-image"]=!0,t["background-origin"]=!0,t["background-position"]=!0,t["background-repeat"]=!0,t["background-size"]=!0,t["baseline-shift"]=!1,t.binding=!1,t.bleed=!1,t["bookmark-label"]=!1,t["bookmark-level"]=!1,t["bookmark-state"]=!1,t.border=!0,t["border-bottom"]=!0,t["border-bottom-color"]=!0,t["border-bottom-left-radius"]=!0,t["border-bottom-right-radius"]=!0,t["border-bottom-style"]=!0,t["border-bottom-width"]=!0,t["border-collapse"]=!0,t["border-color"]=!0,t["border-image"]=!0,t["border-image-outset"]=!0,t["border-image-repeat"]=!0,t["border-image-slice"]=!0,t["border-image-source"]=!0,t["border-image-width"]=!0,t["border-left"]=!0,t["border-left-color"]=!0,t["border-left-style"]=!0,t["border-left-width"]=!0,t["border-radius"]=!0,t["border-right"]=!0,t["border-right-color"]=!0,t["border-right-style"]=!0,t["border-right-width"]=!0,t["border-spacing"]=!0,t["border-style"]=!0,t["border-top"]=!0,t["border-top-color"]=!0,t["border-top-left-radius"]=!0,t["border-top-right-radius"]=!0,t["border-top-style"]=!0,t["border-top-width"]=!0,t["border-width"]=!0,t.bottom=!1,t["box-decoration-break"]=!0,t["box-shadow"]=!0,t["box-sizing"]=!0,t["box-snap"]=!0,t["box-suppress"]=!0,t["break-after"]=!0,t["break-before"]=!0,t["break-inside"]=!0,t["caption-side"]=!1,t.chains=!1,t.clear=!0,t.clip=!1,t["clip-path"]=!1,t["clip-rule"]=!1,t.color=!0,t["color-interpolation-filters"]=!0,t["column-count"]=!1,t["column-fill"]=!1,t["column-gap"]=!1,t["column-rule"]=!1,t["column-rule-color"]=!1,t["column-rule-style"]=!1,t["column-rule-width"]=!1,t["column-span"]=!1,t["column-width"]=!1,t.columns=!1,t.contain=!1,t.content=!1,t["counter-increment"]=!1,t["counter-reset"]=!1,t["counter-set"]=!1,t.crop=!1,t.cue=!1,t["cue-after"]=!1,t["cue-before"]=!1,t.cursor=!1,t.direction=!1,t.display=!0,t["display-inside"]=!0,t["display-list"]=!0,t["display-outside"]=!0,t["dominant-baseline"]=!1,t.elevation=!1,t["empty-cells"]=!1,t.filter=!1,t.flex=!1,t["flex-basis"]=!1,t["flex-direction"]=!1,t["flex-flow"]=!1,t["flex-grow"]=!1,t["flex-shrink"]=!1,t["flex-wrap"]=!1,t.float=!1,t["float-offset"]=!1,t["flood-color"]=!1,t["flood-opacity"]=!1,t["flow-from"]=!1,t["flow-into"]=!1,t.font=!0,t["font-family"]=!0,t["font-feature-settings"]=!0,t["font-kerning"]=!0,t["font-language-override"]=!0,t["font-size"]=!0,t["font-size-adjust"]=!0,t["font-stretch"]=!0,t["font-style"]=!0,t["font-synthesis"]=!0,t["font-variant"]=!0,t["font-variant-alternates"]=!0,t["font-variant-caps"]=!0,t["font-variant-east-asian"]=!0,t["font-variant-ligatures"]=!0,t["font-variant-numeric"]=!0,t["font-variant-position"]=!0,t["font-weight"]=!0,t.grid=!1,t["grid-area"]=!1,t["grid-auto-columns"]=!1,t["grid-auto-flow"]=!1,t["grid-auto-rows"]=!1,t["grid-column"]=!1,t["grid-column-end"]=!1,t["grid-column-start"]=!1,t["grid-row"]=!1,t["grid-row-end"]=!1,t["grid-row-start"]=!1,t["grid-template"]=!1,t["grid-template-areas"]=!1,t["grid-template-columns"]=!1,t["grid-template-rows"]=!1,t["hanging-punctuation"]=!1,t.height=!0,t.hyphens=!1,t.icon=!1,t["image-orientation"]=!1,t["image-resolution"]=!1,t["ime-mode"]=!1,t["initial-letters"]=!1,t["inline-box-align"]=!1,t["justify-content"]=!1,t["justify-items"]=!1,t["justify-self"]=!1,t.left=!1,t["letter-spacing"]=!0,t["lighting-color"]=!0,t["line-box-contain"]=!1,t["line-break"]=!1,t["line-grid"]=!1,t["line-height"]=!1,t["line-snap"]=!1,t["line-stacking"]=!1,t["line-stacking-ruby"]=!1,t["line-stacking-shift"]=!1,t["line-stacking-strategy"]=!1,t["list-style"]=!0,t["list-style-image"]=!0,t["list-style-position"]=!0,t["list-style-type"]=!0,t.margin=!0,t["margin-bottom"]=!0,t["margin-left"]=!0,t["margin-right"]=!0,t["margin-top"]=!0,t["marker-offset"]=!1,t["marker-side"]=!1,t.marks=!1,t.mask=!1,t["mask-box"]=!1,t["mask-box-outset"]=!1,t["mask-box-repeat"]=!1,t["mask-box-slice"]=!1,t["mask-box-source"]=!1,t["mask-box-width"]=!1,t["mask-clip"]=!1,t["mask-image"]=!1,t["mask-origin"]=!1,t["mask-position"]=!1,t["mask-repeat"]=!1,t["mask-size"]=!1,t["mask-source-type"]=!1,t["mask-type"]=!1,t["max-height"]=!0,t["max-lines"]=!1,t["max-width"]=!0,t["min-height"]=!0,t["min-width"]=!0,t["move-to"]=!1,t["nav-down"]=!1,t["nav-index"]=!1,t["nav-left"]=!1,t["nav-right"]=!1,t["nav-up"]=!1,t["object-fit"]=!1,t["object-position"]=!1,t.opacity=!1,t.order=!1,t.orphans=!1,t.outline=!1,t["outline-color"]=!1,t["outline-offset"]=!1,t["outline-style"]=!1,t["outline-width"]=!1,t.overflow=!1,t["overflow-wrap"]=!1,t["overflow-x"]=!1,t["overflow-y"]=!1,t.padding=!0,t["padding-bottom"]=!0,t["padding-left"]=!0,t["padding-right"]=!0,t["padding-top"]=!0,t.page=!1,t["page-break-after"]=!1,t["page-break-before"]=!1,t["page-break-inside"]=!1,t["page-policy"]=!1,t.pause=!1,t["pause-after"]=!1,t["pause-before"]=!1,t.perspective=!1,t["perspective-origin"]=!1,t.pitch=!1,t["pitch-range"]=!1,t["play-during"]=!1,t.position=!1,t["presentation-level"]=!1,t.quotes=!1,t["region-fragment"]=!1,t.resize=!1,t.rest=!1,t["rest-after"]=!1,t["rest-before"]=!1,t.richness=!1,t.right=!1,t.rotation=!1,t["rotation-point"]=!1,t["ruby-align"]=!1,t["ruby-merge"]=!1,t["ruby-position"]=!1,t["shape-image-threshold"]=!1,t["shape-outside"]=!1,t["shape-margin"]=!1,t.size=!1,t.speak=!1,t["speak-as"]=!1,t["speak-header"]=!1,t["speak-numeral"]=!1,t["speak-punctuation"]=!1,t["speech-rate"]=!1,t.stress=!1,t["string-set"]=!1,t["tab-size"]=!1,t["table-layout"]=!1,t["text-align"]=!0,t["text-align-last"]=!0,t["text-combine-upright"]=!0,t["text-decoration"]=!0,t["text-decoration-color"]=!0,t["text-decoration-line"]=!0,t["text-decoration-skip"]=!0,t["text-decoration-style"]=!0,t["text-emphasis"]=!0,t["text-emphasis-color"]=!0,t["text-emphasis-position"]=!0,t["text-emphasis-style"]=!0,t["text-height"]=!0,t["text-indent"]=!0,t["text-justify"]=!0,t["text-orientation"]=!0,t["text-overflow"]=!0,t["text-shadow"]=!0,t["text-space-collapse"]=!0,t["text-transform"]=!0,t["text-underline-position"]=!0,t["text-wrap"]=!0,t.top=!1,t.transform=!1,t["transform-origin"]=!1,t["transform-style"]=!1,t.transition=!1,t["transition-delay"]=!1,t["transition-duration"]=!1,t["transition-property"]=!1,t["transition-timing-function"]=!1,t["unicode-bidi"]=!1,t["vertical-align"]=!1,t.visibility=!1,t["voice-balance"]=!1,t["voice-duration"]=!1,t["voice-family"]=!1,t["voice-pitch"]=!1,t["voice-range"]=!1,t["voice-rate"]=!1,t["voice-stress"]=!1,t["voice-volume"]=!1,t.volume=!1,t["white-space"]=!1,t.widows=!1,t.width=!0,t["will-change"]=!1,t["word-break"]=!0,t["word-spacing"]=!0,t["word-wrap"]=!0,t["wrap-flow"]=!1,t["wrap-through"]=!1,t["writing-mode"]=!1,t["z-index"]=!1,t}function aDe(t,e,i){}function oDe(t,e,i){}var lDe=/javascript\s*\:/img;function cDe(t,e){return lDe.test(e)?"":e}m_.whiteList=Fme();m_.getDefaultWhiteList=Fme;m_.onAttr=aDe;m_.onIgnoreAttr=oDe;m_.safeAttrValue=cDe;var uDe={indexOf:function(t,e){var i,r;if(Array.prototype.indexOf)return t.indexOf(e);for(i=0,r=t.length;i<r;i++)if(t[i]===e)return i;return-1},forEach:function(t,e,i){var r,n;if(Array.prototype.forEach)return t.forEach(e,i);for(r=0,n=t.length;r<n;r++)e.call(i,t[r],r,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(t){return String.prototype.trimRight?t.trimRight():t.replace(/(\s*$)/g,"")}},l2=uDe;function dDe(t,e){t=l2.trimRight(t),t[t.length-1]!==";"&&(t+=";");var i=t.length,r=!1,n=0,s=0,a="";function o(){if(!r){var h=l2.trim(t.slice(n,s)),f=h.indexOf(":");if(f!==-1){var g=l2.trim(h.slice(0,f)),y=l2.trim(h.slice(f+1));if(g){var b=e(n,a.length,g,y,h);b&&(a+=b+"; ")}}}n=s+1}for(;s<i;s++){var l=t[s];if(l==="/"&&t[s+1]==="*"){var c=t.indexOf("*/",s+2);if(c===-1)break;s=c+1,n=s+1,r=!1}else l==="("?r=!0:l===")"?r=!1:l===";"?r||o():l===`
`&&o()}return l2.trim(a)}var hDe=dDe,tO=m_,pDe=hDe;function cre(t){return t==null}function fDe(t){var e={};for(var i in t)e[i]=t[i];return e}function Nme(t){t=fDe(t||{}),t.whiteList=t.whiteList||tO.whiteList,t.onAttr=t.onAttr||tO.onAttr,t.onIgnoreAttr=t.onIgnoreAttr||tO.onIgnoreAttr,t.safeAttrValue=t.safeAttrValue||tO.safeAttrValue,this.options=t}Nme.prototype.process=function(t){if(t=t||"",t=t.toString(),!t)return"";var e=this,i=e.options,r=i.whiteList,n=i.onAttr,s=i.onIgnoreAttr,a=i.safeAttrValue,o=pDe(t,function(l,c,h,f,g){var y=r[h],b=!1;if(y===!0?b=y:typeof y=="function"?b=y(f):y instanceof RegExp&&(b=y.test(f)),b!==!0&&(b=!1),f=a(h,f),!!f){var _={position:c,sourcePosition:l,source:g,isWhite:b};if(b){var S=n(h,f,_);return cre(S)?h+":"+f:S}else{var S=s(h,f,_);if(!cre(S))return S}}});return o};var mDe=Nme;(function(t,e){var i=m_,r=mDe;function n(a,o){var l=new r(o);return l.process(a)}e=t.exports=n,e.FilterCSS=r;for(var s in i)e[s]=i[s]})(U8,U8.exports);var AY=U8.exports,PY={indexOf:function(t,e){var i,r;if(Array.prototype.indexOf)return t.indexOf(e);for(i=0,r=t.length;i<r;i++)if(t[i]===e)return i;return-1},forEach:function(t,e,i){var r,n;if(Array.prototype.forEach)return t.forEach(e,i);for(r=0,n=t.length;r<n;r++)e.call(i,t[r],r,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(t){var e=/\s|\n|\t/,i=e.exec(t);return i?i.index:-1}},gDe=AY.FilterCSS,yDe=AY.getDefaultWhiteList,MR=PY;function jme(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var Vme=new gDe;function vDe(t,e,i){}function bDe(t,e,i){}function wDe(t,e,i){}function _De(t,e,i){}function Bme(t){return t.replace(SDe,"&lt;").replace($De,"&gt;")}function xDe(t,e,i,r){if(i=Yme(i),e==="href"||e==="src"){if(i=MR.trim(i),i==="#")return"#";if(!(i.substr(0,7)==="http://"||i.substr(0,8)==="https://"||i.substr(0,7)==="mailto:"||i.substr(0,4)==="tel:"||i.substr(0,11)==="data:image/"||i.substr(0,6)==="ftp://"||i.substr(0,2)==="./"||i.substr(0,3)==="../"||i[0]==="#"||i[0]==="/"))return""}else if(e==="background"){if(iO.lastIndex=0,iO.test(i))return""}else if(e==="style"){if(ure.lastIndex=0,ure.test(i)||(dre.lastIndex=0,dre.test(i)&&(iO.lastIndex=0,iO.test(i))))return"";r!==!1&&(r=r||Vme,i=r.process(i))}return i=Zme(i),i}var SDe=/</g,$De=/>/g,TDe=/"/g,kDe=/&quot;/g,EDe=/&#([a-zA-Z0-9]*);?/gim,CDe=/&colon;?/gim,IDe=/&newline;?/gim,iO=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,ure=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,dre=/u\s*r\s*l\s*\(.*/gi;function Ume(t){return t.replace(TDe,"&quot;")}function Hme(t){return t.replace(kDe,'"')}function Gme(t){return t.replace(EDe,function(i,r){return r[0]==="x"||r[0]==="X"?String.fromCharCode(parseInt(r.substr(1),16)):String.fromCharCode(parseInt(r,10))})}function qme(t){return t.replace(CDe,":").replace(IDe," ")}function Wme(t){for(var e="",i=0,r=t.length;i<r;i++)e+=t.charCodeAt(i)<32?" ":t.charAt(i);return MR.trim(e)}function Yme(t){return t=Hme(t),t=Gme(t),t=qme(t),t=Wme(t),t}function Zme(t){return t=Ume(t),t=Bme(t),t}function MDe(){return""}function ADe(t,e){typeof e!="function"&&(e=function(){});var i=!Array.isArray(t);function r(a){return i?!0:MR.indexOf(t,a)!==-1}var n=[],s=!1;return{onIgnoreTag:function(a,o,l){if(r(a))if(l.isClosing){var c="[/removed]",h=l.position+c.length;return n.push([s!==!1?s:l.position,h]),s=!1,c}else return s||(s=l.position),"[removed]";else return e(a,o,l)},remove:function(a){var o="",l=0;return MR.forEach(n,function(c){o+=a.slice(l,c[0]),l=c[1]}),o+=a.slice(l),o}}}function PDe(t){for(var e="",i=0;i<t.length;){var r=t.indexOf("<!--",i);if(r===-1){e+=t.slice(i);break}e+=t.slice(i,r);var n=t.indexOf("-->",r);if(n===-1)break;i=n+3}return e}function ODe(t){var e=t.split("");return e=e.filter(function(i){var r=i.charCodeAt(0);return r===127?!1:r<=31?r===10||r===13:!0}),e.join("")}kn.whiteList=jme();kn.getDefaultWhiteList=jme;kn.onTag=vDe;kn.onIgnoreTag=bDe;kn.onTagAttr=wDe;kn.onIgnoreTagAttr=_De;kn.safeAttrValue=xDe;kn.escapeHtml=Bme;kn.escapeQuote=Ume;kn.unescapeQuote=Hme;kn.escapeHtmlEntities=Gme;kn.escapeDangerHtml5Entities=qme;kn.clearNonPrintableCharacter=Wme;kn.friendlyAttrValue=Yme;kn.escapeAttrValue=Zme;kn.onIgnoreTagStripAll=MDe;kn.StripTagBody=ADe;kn.stripCommentTag=PDe;kn.stripBlankChar=ODe;kn.cssFilter=Vme;kn.getDefaultCSSWhiteList=yDe;var RF={},Oy=PY;function LDe(t){var e=Oy.spaceIndex(t),i;return e===-1?i=t.slice(1,-1):i=t.slice(1,e+1),i=Oy.trim(i).toLowerCase(),i.slice(0,1)==="/"&&(i=i.slice(1)),i.slice(-1)==="/"&&(i=i.slice(0,-1)),i}function DDe(t){return t.slice(0,2)==="</"}function RDe(t,e,i){var r="",n=0,s=!1,a=!1,o=0,l=t.length,c="",h="";e:for(o=0;o<l;o++){var f=t.charAt(o);if(s===!1){if(f==="<"){s=o;continue}}else if(a===!1){if(f==="<"){r+=i(t.slice(n,o)),s=o,n=o;continue}if(f===">"){r+=i(t.slice(n,s)),h=t.slice(s,o+1),c=LDe(h),r+=e(s,r.length,c,h,DDe(h)),n=o+1,s=!1;continue}if(f==='"'||f==="'")for(var g=1,y=t.charAt(o-g);y.trim()===""||y==="=";){if(y==="="){a=f;continue e}y=t.charAt(o-++g)}}else if(f===a){a=!1;continue}}return n<t.length&&(r+=i(t.substr(n))),r}var zDe=/[^a-zA-Z0-9\\_:.-]/gim;function FDe(t,e){var i=0,r=0,n=[],s=!1,a=t.length;function o(g,y){if(g=Oy.trim(g),g=g.replace(zDe,"").toLowerCase(),!(g.length<1)){var b=e(g,y||"");b&&n.push(b)}}for(var l=0;l<a;l++){var c=t.charAt(l),h,f;if(s===!1&&c==="="){s=t.slice(i,l),i=l+1,r=t.charAt(i)==='"'||t.charAt(i)==="'"?i:jDe(t,l+1);continue}if(s!==!1&&l===r){if(f=t.indexOf(c,l+1),f===-1)break;h=Oy.trim(t.slice(r+1,f)),o(s,h),s=!1,l=f,i=l+1;continue}if(/\s|\n|\t/.test(c))if(t=t.replace(/\s|\n|\t/g," "),s===!1)if(f=NDe(t,l),f===-1){h=Oy.trim(t.slice(i,l)),o(h),s=!1,i=l+1;continue}else{l=f-1;continue}else if(f=VDe(t,l-1),f===-1){h=Oy.trim(t.slice(i,l)),h=hre(h),o(s,h),s=!1,i=l+1;continue}else continue}return i<t.length&&(s===!1?o(t.slice(i)):o(s,hre(Oy.trim(t.slice(i))))),Oy.trim(n.join(" "))}function NDe(t,e){for(;e<t.length;e++){var i=t[e];if(i!==" ")return i==="="?e:-1}}function jDe(t,e){for(;e<t.length;e++){var i=t[e];if(i!==" ")return i==="'"||i==='"'?e:-1}}function VDe(t,e){for(;e>0;e--){var i=t[e];if(i!==" ")return i==="="?e:-1}}function BDe(t){return t[0]==='"'&&t[t.length-1]==='"'||t[0]==="'"&&t[t.length-1]==="'"}function hre(t){return BDe(t)?t.substr(1,t.length-2):t}RF.parseTag=RDe;RF.parseAttr=FDe;var UDe=AY.FilterCSS,gd=kn,Xme=RF,HDe=Xme.parseTag,GDe=Xme.parseAttr,p3=PY;function rO(t){return t==null}function qDe(t){var e=p3.spaceIndex(t);if(e===-1)return{html:"",closing:t[t.length-2]==="/"};t=p3.trim(t.slice(e+1,-1));var i=t[t.length-1]==="/";return i&&(t=p3.trim(t.slice(0,-1))),{html:t,closing:i}}function WDe(t){var e={};for(var i in t)e[i]=t[i];return e}function YDe(t){var e={};for(var i in t)Array.isArray(t[i])?e[i.toLowerCase()]=t[i].map(function(r){return r.toLowerCase()}):e[i.toLowerCase()]=t[i];return e}function Jme(t){t=WDe(t||{}),t.stripIgnoreTag&&(t.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),t.onIgnoreTag=gd.onIgnoreTagStripAll),t.whiteList||t.allowList?t.whiteList=YDe(t.whiteList||t.allowList):t.whiteList=gd.whiteList,t.onTag=t.onTag||gd.onTag,t.onTagAttr=t.onTagAttr||gd.onTagAttr,t.onIgnoreTag=t.onIgnoreTag||gd.onIgnoreTag,t.onIgnoreTagAttr=t.onIgnoreTagAttr||gd.onIgnoreTagAttr,t.safeAttrValue=t.safeAttrValue||gd.safeAttrValue,t.escapeHtml=t.escapeHtml||gd.escapeHtml,this.options=t,t.css===!1?this.cssFilter=!1:(t.css=t.css||{},this.cssFilter=new UDe(t.css))}Jme.prototype.process=function(t){if(t=t||"",t=t.toString(),!t)return"";var e=this,i=e.options,r=i.whiteList,n=i.onTag,s=i.onIgnoreTag,a=i.onTagAttr,o=i.onIgnoreTagAttr,l=i.safeAttrValue,c=i.escapeHtml,h=e.cssFilter;i.stripBlankChar&&(t=gd.stripBlankChar(t)),i.allowCommentTag||(t=gd.stripCommentTag(t));var f=!1;i.stripIgnoreTagBody&&(f=gd.StripTagBody(i.stripIgnoreTagBody,s),s=f.onIgnoreTag);var g=HDe(t,function(y,b,_,S,$){var C={sourcePosition:y,position:b,isClosing:$,isWhite:Object.prototype.hasOwnProperty.call(r,_)},I=n(_,S,C);if(!rO(I))return I;if(C.isWhite){if(C.isClosing)return"</"+_+">";var P=qDe(S),O=r[_],N=GDe(P.html,function(R,G){var Y=p3.indexOf(O,R)!==-1,Q=a(_,R,G,Y);return rO(Q)?Y?(G=l(_,R,G,h),G?R+'="'+G+'"':R):(Q=o(_,R,G,Y),rO(Q)?void 0:Q):Q});return S="<"+_,N&&(S+=" "+N),P.closing&&(S+=" /"),S+=">",S}else return I=s(_,S,C),rO(I)?c(S):I},c);return f&&(g=f.remove(g)),g};var ZDe=Jme;(function(t,e){var i=kn,r=RF,n=ZDe;function s(o,l){var c=new n(l);return c.process(o)}e=t.exports=s,e.filterXSS=s,e.FilterXSS=n,(function(){for(var o in i)e[o]=i[o];for(var l in r)e[l]=r[l]})();function a(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}a()&&(self.filterXSS=t.exports)})(B8,B8.exports);var x1=B8.exports,XDe=function(t){if(typeof t!="object"||t===null||Object.prototype.toString.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);if(e===null)return!0;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e},Kme=(function(){function t(e,i){var r=this;this.arcgisWhiteList={a:["href","style","target"],abbr:["title"],article:["style"],aside:["style"],audio:["autoplay","controls","loop","muted","preload"],b:[],blockquote:["style"],br:[],code:["style"],dd:["style"],del:["style"],details:["open","style"],div:["align","aria-hidden","aria-label","style"],dl:["style"],dt:["style"],em:[],figcaption:["style"],figure:["style"],font:["color","face","size","style"],footer:["style"],h1:["style"],h2:["style"],h3:["style"],h4:["style"],h5:["style"],h6:["style"],header:["style"],hr:[],i:[],img:["alt","border","height","src","style","width"],li:[],main:["style"],mark:["style"],nav:["style"],ol:[],p:["style"],pre:["style"],section:["style"],source:["media","src","type"],span:["aria-hidden","aria-label","style"],strong:[],sub:["style"],summary:["style"],sup:["style"],table:["border","cellpadding","cellspacing","height","style","width"],tbody:[],tr:["align","height","style","valign"],td:["align","colspan","height","nowrap","rowspan","style","valign","width"],th:["align","colspan","height","nowrap","rowspan","style","valign","width"],time:["style"],u:[],ul:[],video:["autoplay","controls","height","loop","muted","poster","preload","width"]},this.arcgisCSSWhiteList=IR(IR({},x1.getDefaultCSSWhiteList()),{"align-items":!0,"align-self":!0,flex:!0,"flex-basis":!0,"flex-direction":!0,"flex-flow":!0,"flex-grow":!0,"flex-shrink":!0,"flex-wrap":!0,float:!0,gap:!0,grid:!0,"grid-area":!0,"grid-auto-columns":!0,"grid-auto-flow":!0,"grid-auto-rows":!0,"grid-column":!0,"grid-column-end":!0,"grid-column-start":!0,"grid-row":!0,"grid-row-end":!0,"grid-row-start":!0,"grid-template":!0,"grid-template-areas":!0,"grid-template-columns":!0,"grid-template-rows":!0,"justify-content":!0,"justify-items":!0,"justify-self":!0,"line-height":!0,overflow:!0}),this.allowedProtocols=["http","https","mailto","iform","tel","flow","lfmobile","arcgis-navigator","arcgis-appstudio-player","arcgis-survey123","arcgis-collector","arcgis-workforce","arcgis-explorer","arcgis-trek2there","arcgis-quickcapture","mspbi","comgooglemaps","pdfefile","pdfehttp","pdfehttps","boxapp","boxemm","awb","awbs","gropen","radarscope"],this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(s,a,o,l){return s==="a"&&a==="href"||(s==="img"||s==="source")&&a==="src"?r.sanitizeUrl(o):x1.safeAttrValue(s,a,o,l)}},this._entityMap={"&":"&#x38;","<":"&#x3C;",">":"&#x3E;",'"':"&#x22;","'":"&#x27;","/":"&#x2F;"};var n;e&&!i?n=e:e&&i?(n=Object.create(this.arcgisFilterOptions),n.css={whiteList:this.arcgisCSSWhiteList},Object.keys(e).forEach(function(s){if(s==="whiteList")n.whiteList=r._extendObjectOfArrays([r.arcgisWhiteList,e.whiteList||{}]);else if(s==="css"){var a=e.css.whiteList;a!=null&&e.css instanceof Object&&Object.keys(a).forEach(function(o){return n.css.whiteList[o]=a[o]})}else n[s]=e[s]})):(n=Object.create(this.arcgisFilterOptions),n.whiteList=this.arcgisWhiteList,n.css={whiteList:this.arcgisCSSWhiteList}),this.xssFilterOptions=n,this._xssFilter=new x1.FilterXSS(n)}return t.prototype.sanitize=function(e,i){switch(i===void 0&&(i={}),typeof e){case"number":return isNaN(e)||!isFinite(e)?null:e;case"boolean":return e;case"string":return this._xssFilter.process(e);case"object":return this._iterateOverObject(e,i);default:return i.allowUndefined&&typeof e>"u"?void 0:null}},t.prototype.sanitizeUrl=function(e,i){var r=(i??{}).isProtocolRequired,n=r===void 0?!0:r,s=this._trim(e.substring(0,e.indexOf(":"))),a=e==="/",o=/^#/.test(e),l=s&&this.allowedProtocols.indexOf(s.toLowerCase())>-1;return a||o||l?x1.escapeAttrValue(e):!s&&!n?x1.escapeAttrValue("https://".concat(e)):""},t.prototype.sanitizeHTMLAttribute=function(e,i,r,n){return typeof this.xssFilterOptions.safeAttrValue=="function"?this.xssFilterOptions.safeAttrValue(e,i,r,n):x1.safeAttrValue(e,i,r,n)},t.prototype.validate=function(e,i){i===void 0&&(i={});var r=this.sanitize(e,i);return{isValid:e===r,sanitized:r}},t.prototype.encodeHTML=function(e){var i=this;return String(e).replace(/[&<>"'\/]/g,function(r){return i._entityMap[r]})},t.prototype.encodeAttrValue=function(e){var i=/^[a-zA-Z0-9]$/;return String(e).replace(/[\x00-\xFF]/g,function(r,n){return i.test(r)?r:"&#x".concat(Number(e.charCodeAt(n)).toString(16),";")})},t.prototype._extendObjectOfArrays=function(e){var i={};return e.forEach(function(r){Object.keys(r).forEach(function(n){Array.isArray(r[n])&&Array.isArray(i[n])?i[n]=i[n].concat(r[n]):i[n]=r[n]})}),i},t.prototype._iterateOverObject=function(e,i){var r=this;i===void 0&&(i={});try{var n=!1,s=void 0;if(Array.isArray(e))s=e.reduce(function(o,l){var c=r.validate(l,i);return c.isValid?o.concat([l]):(n=!0,o.concat([c.sanitized]))},[]);else if(XDe(e)){var a=Object.keys(e);s=a.reduce(function(o,l){var c=e[l],h=r.validate(c,i);return h.isValid?o[l]=c:(n=!0,o[l]=h.sanitized),o},{})}else return i.allowUndefined&&typeof e>"u"?void 0:null;return n?s:e}catch{return null}},t.prototype._trim=function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},t})();const JDe=["dd","dl","dt","h1","h2","h3","h4","h5","h6","sub","sup","animate","animatetransform","circle","clippath","defs","ellipse","g","image","line","lineargradient","marker","mask","path","pattern","polygon","polyline","radialgradient","rect","stop","svg","switch","symbol","text","textpath","tspan","use"],KDe=JDe.reduce((t,e)=>(t[e]=[],t),{}),QDe=["align","alink","alt","bgcolor","border","cellpadding","cellspacing","class","color","cols","colspan","coords","d","dir","face","height","hspace","ismap","lang","marginheight","marginwidth","multiple","nohref","noresize","noshade","nowrap","ref","rel","rev","rows","rowspan","scrolling","shape","span","summary","tabindex","title","usemap","valign","value","vlink","vspace","width"],Qme=new Kme({whiteList:KDe,onTagAttr:(t,e,i)=>{const r=`${e}="${i}"`;if(QDe.includes(e))return r},stripIgnoreTag:!0,stripIgnoreTagBody:["script","style"]},!0),eRe=new Kme({whiteList:{br:[]},stripIgnoreTag:!0,escapeHtml:t=>t},!1),ege="http://www.w3.org/",zF=`${ege}2000/svg`,tge=`${ege}1999/xlink`;let pre=[],OY=(t,e)=>{let i={};return Object.keys(t).forEach(r=>{i[r]=t[r]}),e&&Object.keys(e).forEach(r=>{i[r]=e[r]}),i},LY=(t,e)=>t.vnodeSelector===e.vnodeSelector&&(t.properties&&e.properties?t.properties.key===e.properties.key&&t.properties.bind===e.properties.bind:!t.properties&&!e.properties),ige=t=>{if(typeof t!="string")throw new Error("Style values must be strings")},tRe=(t,e,i)=>{if(e.vnodeSelector!==""){for(let r=i;r<t.length;r++)if(LY(t[r],e))return r}return-1},t6=(t,e,i,r)=>{let n=t[e];if(n.vnodeSelector==="")return;let s=n.properties;if(!(s&&(s.key===void 0?s.bind:s.key))){for(let a=0;a<t.length;a++)if(a!==e){let o=t[a];if(LY(o,n))throw new Error(`${i.vnodeSelector} had a ${n.vnodeSelector} child ${r==="added"?r:"removed"}, but there is now more than one. You must add unique key properties to make them distinguishable.`)}}},iRe=t=>{if(t.properties){let e=t.properties.enterAnimation;e&&e(t.domNode,t.properties)}},H8=[],G8=!1,rge=t=>{(t.children||[]).forEach(rge),t.properties&&t.properties.afterRemoved&&t.properties.afterRemoved.apply(t.properties.bind||t.properties,[t.domNode])},fre=()=>{G8=!1,H8.forEach(rge),H8.length=0},mre=t=>{H8.push(t),G8||(G8=!0,typeof window<"u"&&"requestIdleCallback"in window?window.requestIdleCallback(fre,{timeout:16}):setTimeout(fre,16))},gre=t=>{let e=t.domNode;if(t.properties){let i=t.properties.exitAnimation;if(i)return e.style.pointerEvents="none",void i(e,()=>{e.parentNode&&(e.parentNode.removeChild(e),mre(t))},t.properties)}e.parentNode&&(e.parentNode.removeChild(e),mre(t))},rRe=(t,e,i)=>{if(!e)return;let r=i.eventHandlerInterceptor,n=Object.keys(e),s=n.length;for(let a=0;a<s;a++){let o=n[a],l=e[o];if(o==="className")throw new Error('Property "className" is not supported, use "class".');if(o==="class")W8(t,l,!0);else if(o==="classes"){let c=Object.keys(l),h=c.length;for(let f=0;f<h;f++){let g=c[f];l[g]&&t.classList.add(g)}}else if(o==="styles"){let c=Object.keys(l),h=c.length;for(let f=0;f<h;f++){let g=c[f],y=l[g];y&&(ige(y),i.styleApplyer(t,g,y))}}else if(o!=="key"&&l!=null){let c=typeof l;c==="function"?(o.lastIndexOf("on",0)===0&&(r&&(l=r(o,l,t,e)),o==="oninput"&&(function(){let h=l;l=function(f){h.apply(this,[f]),f.target["oninput-value"]=f.target.value}})()),t[o]=l):i.namespace===zF?o==="href"?t.setAttributeNS(tge,o,l):t.setAttribute(o,l):c==="string"&&o!=="value"?o==="innerHTML"?t[o]=Qme.sanitize(l):q8(t)&&o in t?t[o]=l:t.setAttribute(o,l):t[o]=l}}};function q8(t){if(!(t instanceof Element&&t.tagName.includes("-")))return!1;const e=window.customElements.get(t.tagName.toLowerCase());return!!e&&t instanceof e}let AR,nRe=(t,e,i)=>{if(e)for(let r of e)pC(r,t,void 0,i)},nge=(t,e,i)=>{nRe(t,e.children,i),e.text&&(t.textContent=e.text),rRe(t,e.properties,i),e.properties&&e.properties.afterCreate&&e.properties.afterCreate.apply(e.properties.bind||e.properties,[t,i,e.vnodeSelector,e.properties,e.children])},pC=(t,e,i,r)=>{let n,s=0,a=t.vnodeSelector,o=e.ownerDocument;if(a==="")n=t.domNode=o.createTextNode(t.text),i!==void 0?e.insertBefore(n,i):e.appendChild(n);else{for(let l=0;l<=a.length;++l){let c=a.charAt(l);if(l===a.length||c==="."||c==="#"){let h=a.charAt(s-1),f=a.slice(s,l);h==="."?n.classList.add(f):h==="#"?n.id=f:(f==="svg"&&(r=OY(r,{namespace:zF})),r.namespace!==void 0?n=t.domNode=o.createElementNS(r.namespace,f):(n=t.domNode=t.domNode||o.createElement(f),f==="input"&&t.properties&&t.properties.type!==void 0&&n.setAttribute("type",t.properties.type)),i!==void 0?e.insertBefore(n,i):n.parentNode!==e&&e.appendChild(n)),s=l+1}}nge(n,t,r)}},W8=(t,e,i)=>{e&&e.split(" ").forEach(r=>{r&&t.classList.toggle(r,i)})},sRe=(t,e,i,r)=>{if(!i)return;let n=!1,s=Object.keys(i),a=s.length;for(let o=0;o<a;o++){let l=s[o],c=i[l],h=e[l];if(l==="class")h!==c&&(W8(t,h,!1),W8(t,c,!0));else if(l==="classes"){let f=t.classList,g=Object.keys(c),y=g.length;for(let b=0;b<y;b++){let _=g[b],S=!!c[_];S!==!!h[_]&&(n=!0,S?f.add(_):f.remove(_))}}else if(l==="styles"){let f=Object.keys(c),g=f.length;for(let y=0;y<g;y++){let b=f[y],_=c[b];_!==h[b]&&(n=!0,_?(ige(_),r.styleApplyer(t,b,_)):r.styleApplyer(t,b,""))}}else if(c||typeof h!="string"||(c=""),l!=="value"||q8(t)){if(c!==h){let f=typeof c;f==="function"&&r.eventHandlerInterceptor||(r.namespace===zF?l==="href"?t.setAttributeNS(tge,l,c):t.setAttribute(l,c):f==="string"?l==="innerHTML"?t[l]=Qme.sanitize(c):l==="role"&&c===""?t.removeAttribute(l):q8(t)&&l in t?t[l]=c:t.setAttribute(l,c):t[l]!==c&&(t[l]=c),n=!0)}}else{let f=t[l];f!==c&&(t["oninput-value"]?f===t["oninput-value"]:c!==h)&&(t[l]=c,t["oninput-value"]=void 0),c!==h&&(n=!0)}}return n},aRe=(t,e,i,r,n)=>{if(i===r)return!1;r=r||pre;let s,a=(i=i||pre).length,o=r.length,l=0,c=0,h=!1;for(;c<o;){let f=l<a?i[l]:void 0,g=r[c];if(f!==void 0&&LY(f,g))h=AR(f,g,n)||h,l++;else{let y=tRe(i,g,l+1);if(y>=0){for(s=l;s<y;s++)gre(i[s]),t6(i,s,t,"removed");h=AR(i[y],g,n)||h,l=y+1}else pC(g,e,l<a?i[l].domNode:void 0,n),iRe(g),t6(r,c,t,"added")}c++}if(a>l)for(s=l;s<a;s++)gre(i[s]),t6(i,s,t,"removed");return h};AR=(t,e,i)=>{let r=t.domNode,n=!1;if(t===e)return!1;let s=!1;if(e.vnodeSelector===""){if(e.text!==t.text){let a=r.ownerDocument.createTextNode(e.text);return r.parentNode.replaceChild(a,r),e.domNode=a,n=!0,n}e.domNode=r}else e.vnodeSelector.lastIndexOf("svg",0)===0&&(i=OY(i,{namespace:zF})),t.text!==e.text&&(s=!0,e.text===void 0?r.removeChild(r.firstChild):r.textContent=e.text),e.domNode=r,s=aRe(e,r,t.children,e.children,i)||s,s=sRe(r,t.properties,e.properties,i)||s,e.properties&&e.properties.afterUpdate&&e.properties.afterUpdate.apply(e.properties.bind||e.properties,[r,i,e.vnodeSelector,e.properties,e.children]);return s&&e.properties&&e.properties.updateAnimation&&e.properties.updateAnimation(r,e.properties,t.properties),n};let nO=(t,e)=>({getLastRender:()=>t,update:i=>{if(t.vnodeSelector!==i.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");let r=t;t=i,AR(r,i,e)},domNode:t.domNode});const oRe={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(t,e,i)=>{e.charAt(0)==="-"?t.style.setProperty(e,i):t.style[e]=i}};let J2=t=>OY(oRe,t),Xy={append:(t,e,i)=>(i=J2(i),pC(e,t,void 0,i),nO(e,i)),insertBefore:(t,e,i)=>(i=J2(i),pC(e,t.parentNode,t,i),nO(e,i)),merge:(t,e,i)=>(i=J2(i),e.domNode=t,nge(t,e,i),nO(e,i)),replace:(t,e,i)=>(i=J2(i),pC(e,t.parentNode,t,i),t.parentNode.removeChild(t),nO(e,i))},sge,lRe=(t,e)=>{let i=[];for(;t&&t!==e;)i.push(t),t=t.parentNode;return i};sge=Array.prototype.find?(t,e)=>t.find(e):(t,e)=>t.filter(e)[0];let cRe=(t,e)=>{let i=t;return e.forEach(r=>{i=i&&i.children?sge(i.children,n=>n.domNode===r):void 0}),i},uRe=(t,e,i)=>{let r=function(n){i("domEvent",n);let s=e(),a=lRe(n.currentTarget,s.domNode);a.reverse();let o,l=cRe(s.getLastRender(),a);return t.scheduleRender(),l&&(o=l.properties[`on${n.type}`].apply(l.properties.bind||this,arguments)),i("domEventProcessed",n),o};return(n,s,a,o)=>r},Y8=t=>{let e,i,r=J2(t),n=r.performanceLogger,s=!0,a=!1,o=[],l=[],c=(f,g,y)=>{let b,_=()=>b;r.eventHandlerInterceptor=uRe(e,_,n),b=f(g,y(),r),o.push(b),l.push(y)},h=()=>{if(i=void 0,s){s=!1,n("renderStart",void 0);for(let f=0;f<o.length;f++){let g=l[f]();n("rendered",void 0),o[f].update(g),n("patched",void 0)}n("renderDone",void 0),s=!0}};return e={renderNow:h,scheduleRender:()=>{i||a||(i=requestAnimationFrame(h))},stop:()=>{i&&(cancelAnimationFrame(i),i=void 0),a=!0},resume:()=>{a=!1,s=!0,e.scheduleRender()},append:(f,g)=>{c(Xy.append,f,g)},insertBefore:(f,g)=>{c(Xy.insertBefore,f,g)},merge:(f,g)=>{c(Xy.merge,f,g)},replace:(f,g)=>{c(Xy.replace,f,g)},detach:f=>{for(let g=0;g<l.length;g++)if(l[g]===f)return l.splice(g,1),o.splice(g,1)[0];throw new Error("renderFunction was not found")}},e};const dRe={handleInterceptedEvent:(t,e,i,r)=>(t.scheduleRender(),e.properties[`on${r.type}`].apply(e.properties.bind||i,[r]))},hRe={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(t,e,i)=>{e.startsWith("-")?t.style.setProperty(e,i):t.style[e]=i}},pRe=t=>({...hRe,...t}),fRe=(t,e)=>{const i=[];for(;t&&t!==e;)i.push(t),t=t.parentNode;return i},mRe=(t,e)=>t.find(e),yre=(t,e,i=!1)=>{let r=t;return e.forEach((n,s)=>{const a=r?.children?mRe(r.children,o=>o.domNode===n):void 0;i&&!a&&s!==e.length-1||(r=a)}),r},gRe=t=>{let e;const i={...dRe,...t},r=pRe(i),n=r.performanceLogger;let s,a=!0,o=!1;const l=[],c=[],h=(g,y,b)=>{let _;r.eventHandlerInterceptor=($,C,I,P)=>function(O){let N;n("domEvent",O);const R=fRe(O.currentTarget,_.domNode),G=R.some(Q=>customElements.get(Q?.tagName?.toLowerCase()));if(O.eventPhase===Event.CAPTURING_PHASE||!G)R.reverse(),N=yre(_.getLastRender(),R);else{const Q=O.composedPath(),ae=Q.slice(Q.indexOf(O.currentTarget),Q.indexOf(_.domNode)).reverse();N=yre(_.getLastRender(),ae,!0)}let Y;return N&&(Y=i.handleInterceptedEvent(e,N,this,O)),n("domEventProcessed",O),Y},i.postProcessProjectionOptions?.(r);const S=b();_=g(y,S,r),r.eventHandlerInterceptor=void 0,l.push(_),c.push(b),i.afterFirstVNodeRendered&&i.afterFirstVNodeRendered(_,S)};let f=()=>{if(s=void 0,a){a=!1,n("renderStart",void 0);for(let g=0;g<l.length;g++){const y=c[g]();n("rendered",void 0);try{l[g].update(y)}catch(b){console.error(b)}n("patched",void 0)}n("renderDone",void 0),a=!0}};return i.modifyDoRenderImplementation&&(f=i.modifyDoRenderImplementation(f,l,c)),e={renderNow:f,scheduleRender:()=>{s||o||(s=requestAnimationFrame(f))},stop:()=>{s&&(cancelAnimationFrame(s),s=void 0),o=!0},resume:()=>{o=!1,a=!0,e.scheduleRender()},append:(g,y)=>{h(Xy.append,g,y)},insertBefore:(g,y)=>{h(Xy.insertBefore,g,y)},merge:(g,y)=>{h(Xy.merge,g,y)},replace:(g,y)=>{h(Xy.replace,g,y)},detach:g=>{for(let y=0;y<c.length;y++)if(c[y]===g)return c.splice(y,1),l.splice(y,1)[0];throw new Error("renderFunction was not found")}},e},_n=(t,e,...i)=>{try{return t?.call(e,...i)}catch(r){console.error(r,t)}},Z8=async(t,e,...i)=>{try{return await t?.call(e,...i)}catch(r){console.error(r,t)}},DY=Symbol.for("controller"),yRe=t=>typeof t=="object"&&t!==null&&(DY in t||"hostConnected"in t||"hostDisconnected"in t||"hostUpdate"in t||"hostUpdated"in t),vRe=t=>typeof t?.then=="function",bRe=t=>t.M.length;let K2;const mS=t=>{K2!==t&&(K2=t,queueMicrotask(()=>K2===t?K2=void 0:0))},DT=t=>K2;let Bb=[];const RY=t=>{if(t===void 0){Bb=[];return}const e=Bb.indexOf(t);Bb=e===-1?[...Bb,t]:Bb.slice(0,e+1),queueMicrotask(()=>Bb=[])},zY=()=>Bb;let gS;const wRe=t=>{gS!==t&&(gS=t,queueMicrotask(()=>gS===t?gS=void 0:0))},_Re=()=>{const t=gS;return gS=void 0,t},xRe=async(t,e)=>{const i=FY(t);if(i===void 0)return t;if(await i.ready,typeof e=="function"){const r=i.watchExports(n=>e(n,r))}return i.exports},SRe=async t=>{const e=FY(t);return await e.ready,e},FY=t=>{const i=DT().manager.X(t);if(i!==void 0)return i;if(yRe(t))return t;const r=_Re();if(r!==void 0)return r};let X8=!1;const $Re=t=>{X8=!0;try{return t()}finally{X8=!1}};const f3=globalThis,NY=f3.ShadowRoot&&(f3.ShadyCSS===void 0||f3.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,jY=Symbol(),vre=new WeakMap;let age=class{constructor(e,i,r){if(this._$cssResult$=!0,r!==jY)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=i}get styleSheet(){let e=this.o;const i=this.t;if(NY&&e===void 0){const r=i!==void 0&&i.length===1;r&&(e=vre.get(i)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),r&&vre.set(i,e))}return e}toString(){return this.cssText}};const TRe=t=>new age(typeof t=="string"?t:t+"",void 0,jY),St=(t,...e)=>{const i=t.length===1?t[0]:e.reduce((r,n,s)=>r+(a=>{if(a._$cssResult$===!0)return a.cssText;if(typeof a=="number")return a;throw Error("Value passed to 'css' function must be a 'css' function result: "+a+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(n)+t[s+1],t[0]);return new age(i,t,jY)},kRe=(t,e)=>{if(NY)t.adoptedStyleSheets=e.map(i=>i instanceof CSSStyleSheet?i:i.styleSheet);else for(const i of e){const r=document.createElement("style"),n=f3.litNonce;n!==void 0&&r.setAttribute("nonce",n),r.textContent=i.cssText,t.appendChild(r)}},bre=NY?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let i="";for(const r of e.cssRules)i+=r.cssText;return TRe(i)})(t):t;const{is:ERe,defineProperty:CRe,getOwnPropertyDescriptor:IRe,getOwnPropertyNames:MRe,getOwnPropertySymbols:ARe,getPrototypeOf:PRe}=Object,FF=globalThis,wre=FF.trustedTypes,ORe=wre?wre.emptyScript:"",LRe=FF.reactiveElementPolyfillSupport,fC=(t,e)=>t,J8={toAttribute(t,e){switch(e){case Boolean:t=t?ORe:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let i=t;switch(e){case Boolean:i=t!==null;break;case Number:i=t===null?null:Number(t);break;case Object:case Array:try{i=JSON.parse(t)}catch{i=null}}return i}},VY=(t,e)=>!ERe(t,e),_re={attribute:!0,type:String,converter:J8,reflect:!1,useDefault:!1,hasChanged:VY};Symbol.metadata??=Symbol("metadata"),FF.litPropertyMetadata??=new WeakMap;let sx=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??=[]).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,i=_re){if(i.state&&(i.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((i=Object.create(i)).wrapped=!0),this.elementProperties.set(e,i),!i.noAccessor){const r=Symbol(),n=this.getPropertyDescriptor(e,r,i);n!==void 0&&CRe(this.prototype,e,n)}}static getPropertyDescriptor(e,i,r){const{get:n,set:s}=IRe(this.prototype,e)??{get(){return this[i]},set(a){this[i]=a}};return{get:n,set(a){const o=n?.call(this);s?.call(this,a),this.requestUpdate(e,o,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??_re}static _$Ei(){if(this.hasOwnProperty(fC("elementProperties")))return;const e=PRe(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(fC("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(fC("properties"))){const i=this.properties,r=[...MRe(i),...ARe(i)];for(const n of r)this.createProperty(n,i[n])}const e=this[Symbol.metadata];if(e!==null){const i=litPropertyMetadata.get(e);if(i!==void 0)for(const[r,n]of i)this.elementProperties.set(r,n)}this._$Eh=new Map;for(const[i,r]of this.elementProperties){const n=this._$Eu(i,r);n!==void 0&&this._$Eh.set(n,i)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const i=[];if(Array.isArray(e)){const r=new Set(e.flat(1/0).reverse());for(const n of r)i.unshift(bre(n))}else e!==void 0&&i.push(bre(e));return i}static _$Eu(e,i){const r=i.attribute;return r===!1?void 0:typeof r=="string"?r:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise(e=>this.enableUpdating=e),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach(e=>e(this))}addController(e){(this._$EO??=new Set).add(e),this.renderRoot!==void 0&&this.isConnected&&e.hostConnected?.()}removeController(e){this._$EO?.delete(e)}_$E_(){const e=new Map,i=this.constructor.elementProperties;for(const r of i.keys())this.hasOwnProperty(r)&&(e.set(r,this[r]),delete this[r]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return kRe(e,this.constructor.elementStyles),e}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach(e=>e.hostConnected?.())}enableUpdating(e){}disconnectedCallback(){this._$EO?.forEach(e=>e.hostDisconnected?.())}attributeChangedCallback(e,i,r){this._$AK(e,r)}_$ET(e,i){const r=this.constructor.elementProperties.get(e),n=this.constructor._$Eu(e,r);if(n!==void 0&&r.reflect===!0){const s=(r.converter?.toAttribute!==void 0?r.converter:J8).toAttribute(i,r.type);this._$Em=e,s==null?this.removeAttribute(n):this.setAttribute(n,s),this._$Em=null}}_$AK(e,i){const r=this.constructor,n=r._$Eh.get(e);if(n!==void 0&&this._$Em!==n){const s=r.getPropertyOptions(n),a=typeof s.converter=="function"?{fromAttribute:s.converter}:s.converter?.fromAttribute!==void 0?s.converter:J8;this._$Em=n;const o=a.fromAttribute(i,s.type);this[n]=o??this._$Ej?.get(n)??o,this._$Em=null}}requestUpdate(e,i,r,n=!1,s){if(e!==void 0){const a=this.constructor;if(n===!1&&(s=this[e]),r??=a.getPropertyOptions(e),!((r.hasChanged??VY)(s,i)||r.useDefault&&r.reflect&&s===this._$Ej?.get(e)&&!this.hasAttribute(a._$Eu(e,r))))return;this.C(e,i,r)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,i,{useDefault:r,reflect:n,wrapped:s},a){r&&!(this._$Ej??=new Map).has(e)&&(this._$Ej.set(e,a??i??this[e]),s!==!0||a!==void 0)||(this._$AL.has(e)||(this.hasUpdated||r||(i=void 0),this._$AL.set(e,i)),n===!0&&this._$Em!==e&&(this._$Eq??=new Set).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(i){Promise.reject(i)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(const[n,s]of this._$Ep)this[n]=s;this._$Ep=void 0}const r=this.constructor.elementProperties;if(r.size>0)for(const[n,s]of r){const{wrapped:a}=s,o=this[n];a!==!0||this._$AL.has(n)||o===void 0||this.C(n,void 0,s,o)}}let e=!1;const i=this._$AL;try{e=this.shouldUpdate(i),e?(this.willUpdate(i),this._$EO?.forEach(r=>r.hostUpdate?.()),this.update(i)):this._$EM()}catch(r){throw e=!1,this._$EM(),r}e&&this._$AE(i)}willUpdate(e){}_$AE(e){this._$EO?.forEach(i=>i.hostUpdated?.()),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&=this._$Eq.forEach(i=>this._$ET(i,this[i])),this._$EM()}updated(e){}firstUpdated(e){}};sx.elementStyles=[],sx.shadowRootOptions={mode:"open"},sx[fC("elementProperties")]=new Map,sx[fC("finalized")]=new Map,LRe?.({ReactiveElement:sx}),(FF.reactiveElementVersions??=[]).push("2.1.2");const BY=globalThis,xre=t=>t,PR=BY.trustedTypes,Sre=PR?PR.createPolicy("lit-html",{createHTML:t=>t}):void 0,oge="$lit$",By=`lit$${Math.random().toFixed(9).slice(2)}$`,lge="?"+By,DRe=`<${lge}>`,qw=document,mI=()=>qw.createComment(""),gI=t=>t===null||typeof t!="object"&&typeof t!="function",UY=Array.isArray,RRe=t=>UY(t)||typeof t?.[Symbol.iterator]=="function",i6=`[ 	
\f\r]`,c2=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,$re=/-->/g,Tre=/>/g,Sb=RegExp(`>|${i6}(?:([^\\s"'>=/]+)(${i6}*=${i6}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),kre=/'/g,Ere=/"/g,cge=/^(?:script|style|textarea|title)$/i,uge=t=>(e,...i)=>({_$litType$:t,strings:e,values:i}),J=uge(1),Sn=uge(2),vc=Symbol.for("lit-noChange"),Xe=Symbol.for("lit-nothing"),Cre=new WeakMap,F0=qw.createTreeWalker(qw,129);function dge(t,e){if(!UY(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return Sre!==void 0?Sre.createHTML(e):e}const zRe=(t,e)=>{const i=t.length-1,r=[];let n,s=e===2?"<svg>":e===3?"<math>":"",a=c2;for(let o=0;o<i;o++){const l=t[o];let c,h,f=-1,g=0;for(;g<l.length&&(a.lastIndex=g,h=a.exec(l),h!==null);)g=a.lastIndex,a===c2?h[1]==="!--"?a=$re:h[1]!==void 0?a=Tre:h[2]!==void 0?(cge.test(h[2])&&(n=RegExp("</"+h[2],"g")),a=Sb):h[3]!==void 0&&(a=Sb):a===Sb?h[0]===">"?(a=n??c2,f=-1):h[1]===void 0?f=-2:(f=a.lastIndex-h[2].length,c=h[1],a=h[3]===void 0?Sb:h[3]==='"'?Ere:kre):a===Ere||a===kre?a=Sb:a===$re||a===Tre?a=c2:(a=Sb,n=void 0);const y=a===Sb&&t[o+1].startsWith("/>")?" ":"";s+=a===c2?l+DRe:f>=0?(r.push(c),l.slice(0,f)+oge+l.slice(f)+By+y):l+By+(f===-2?o:y)}return[dge(t,s+(t[i]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),r]};let K8=class hge{constructor({strings:e,_$litType$:i},r){let n;this.parts=[];let s=0,a=0;const o=e.length-1,l=this.parts,[c,h]=zRe(e,i);if(this.el=hge.createElement(c,r),F0.currentNode=this.el.content,i===2||i===3){const f=this.el.content.firstChild;f.replaceWith(...f.childNodes)}for(;(n=F0.nextNode())!==null&&l.length<o;){if(n.nodeType===1){if(n.hasAttributes())for(const f of n.getAttributeNames())if(f.endsWith(oge)){const g=h[a++],y=n.getAttribute(f).split(By),b=/([.?@])?(.*)/.exec(g);l.push({type:1,index:s,name:b[2],strings:y,ctor:b[1]==="."?NRe:b[1]==="?"?jRe:b[1]==="@"?VRe:jF}),n.removeAttribute(f)}else f.startsWith(By)&&(l.push({type:6,index:s}),n.removeAttribute(f));if(cge.test(n.tagName)){const f=n.textContent.split(By),g=f.length-1;if(g>0){n.textContent=PR?PR.emptyScript:"";for(let y=0;y<g;y++)n.append(f[y],mI()),F0.nextNode(),l.push({type:2,index:++s});n.append(f[g],mI())}}}else if(n.nodeType===8)if(n.data===lge)l.push({type:2,index:s});else{let f=-1;for(;(f=n.data.indexOf(By,f+1))!==-1;)l.push({type:7,index:s}),f+=By.length-1}s++}}static createElement(e,i){const r=qw.createElement("template");return r.innerHTML=e,r}};function j$(t,e,i=t,r){if(e===vc)return e;let n=r!==void 0?i._$Co?.[r]:i._$Cl;const s=gI(e)?void 0:e._$litDirective$;return n?.constructor!==s&&(n?._$AO?.(!1),s===void 0?n=void 0:(n=new s(t),n._$AT(t,i,r)),r!==void 0?(i._$Co??=[])[r]=n:i._$Cl=n),n!==void 0&&(e=j$(t,n._$AS(t,e.values),n,r)),e}let FRe=class{constructor(e,i){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=i}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:i},parts:r}=this._$AD,n=(e?.creationScope??qw).importNode(i,!0);F0.currentNode=n;let s=F0.nextNode(),a=0,o=0,l=r[0];for(;l!==void 0;){if(a===l.index){let c;l.type===2?c=new NF(s,s.nextSibling,this,e):l.type===1?c=new l.ctor(s,l.name,l.strings,this,e):l.type===6&&(c=new BRe(s,this,e)),this._$AV.push(c),l=r[++o]}a!==l?.index&&(s=F0.nextNode(),a++)}return F0.currentNode=qw,n}p(e){let i=0;for(const r of this._$AV)r!==void 0&&(r.strings!==void 0?(r._$AI(e,r,i),i+=r.strings.length-2):r._$AI(e[i])),i++}},NF=class pge{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(e,i,r,n){this.type=2,this._$AH=Xe,this._$AN=void 0,this._$AA=e,this._$AB=i,this._$AM=r,this.options=n,this._$Cv=n?.isConnected??!0}get parentNode(){let e=this._$AA.parentNode;const i=this._$AM;return i!==void 0&&e?.nodeType===11&&(e=i.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,i=this){e=j$(this,e,i),gI(e)?e===Xe||e==null||e===""?(this._$AH!==Xe&&this._$AR(),this._$AH=Xe):e!==this._$AH&&e!==vc&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):RRe(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==Xe&&gI(this._$AH)?this._$AA.nextSibling.data=e:this.T(qw.createTextNode(e)),this._$AH=e}$(e){const{values:i,_$litType$:r}=e,n=typeof r=="number"?this._$AC(e):(r.el===void 0&&(r.el=K8.createElement(dge(r.h,r.h[0]),this.options)),r);if(this._$AH?._$AD===n)this._$AH.p(i);else{const s=new FRe(n,this),a=s.u(this.options);s.p(i),this.T(a),this._$AH=s}}_$AC(e){let i=Cre.get(e.strings);return i===void 0&&Cre.set(e.strings,i=new K8(e)),i}k(e){UY(this._$AH)||(this._$AH=[],this._$AR());const i=this._$AH;let r,n=0;for(const s of e)n===i.length?i.push(r=new pge(this.O(mI()),this.O(mI()),this,this.options)):r=i[n],r._$AI(s),n++;n<i.length&&(this._$AR(r&&r._$AB.nextSibling,n),i.length=n)}_$AR(e=this._$AA.nextSibling,i){for(this._$AP?.(!1,!0,i);e!==this._$AB;){const r=xre(e).nextSibling;xre(e).remove(),e=r}}setConnected(e){this._$AM===void 0&&(this._$Cv=e,this._$AP?.(e))}},jF=class{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,i,r,n,s){this.type=1,this._$AH=Xe,this._$AN=void 0,this.element=e,this.name=i,this._$AM=n,this.options=s,r.length>2||r[0]!==""||r[1]!==""?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=Xe}_$AI(e,i=this,r,n){const s=this.strings;let a=!1;if(s===void 0)e=j$(this,e,i,0),a=!gI(e)||e!==this._$AH&&e!==vc,a&&(this._$AH=e);else{const o=e;let l,c;for(e=s[0],l=0;l<s.length-1;l++)c=j$(this,o[r+l],i,l),c===vc&&(c=this._$AH[l]),a||=!gI(c)||c!==this._$AH[l],c===Xe?e=Xe:e!==Xe&&(e+=(c??"")+s[l+1]),this._$AH[l]=c}a&&!n&&this.j(e)}j(e){e===Xe?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}},NRe=class extends jF{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===Xe?void 0:e}},jRe=class extends jF{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==Xe)}},VRe=class extends jF{constructor(e,i,r,n,s){super(e,i,r,n,s),this.type=5}_$AI(e,i=this){if((e=j$(this,e,i,0)??Xe)===vc)return;const r=this._$AH,n=e===Xe&&r!==Xe||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,s=e!==Xe&&(r===Xe||n);n&&this.element.removeEventListener(this.name,this,r),s&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){typeof this._$AH=="function"?this._$AH.call(this.options?.host??this.element,e):this._$AH.handleEvent(e)}},BRe=class{constructor(e,i,r){this.element=e,this.type=6,this._$AN=void 0,this._$AM=i,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(e){j$(this,e)}};const URe={I:NF},HRe=BY.litHtmlPolyfillSupport;HRe?.(K8,NF),(BY.litHtmlVersions??=[]).push("3.3.2");const fge=(t,e,i)=>{const r=i?.renderBefore??e;let n=r._$litPart$;if(n===void 0){const s=i?.renderBefore??null;r._$litPart$=n=new NF(e.insertBefore(mI(),s),s,void 0,i??{})}return n._$AI(t),n};const HY=globalThis;let FS=class extends sx{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){const e=super.createRenderRoot();return this.renderOptions.renderBefore??=e.firstChild,e}update(e){const i=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=fge(i,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return vc}};FS._$litElement$=!0,FS.finalized=!0,HY.litElementHydrateSupport?.({LitElement:FS});const GRe=HY.litElementPolyfillSupport;GRe?.({LitElement:FS});(HY.litElementVersions??=[]).push("4.2.2");class yI{constructor(){this.promise=new Promise((e,i)=>{this.resolve=e,this.reject=i})}}const qRe=(t,e)=>{const i=e/WRe;let r=0;const n=setInterval(()=>{r+=i,r>=e&&(clearInterval(n),t())},i);return n},WRe=4,YRe=(t,e,i)=>{const r=Object.keys(t),n=r.length;yS===void 0&&queueMicrotask(VF),yS??=new Map;let s=yS.get(t);return s===void 0&&(s={callbacks:[],keyCount:n},yS.set(t,s)),s.keyCount!==n&&(s.callbacks.forEach(a=>a(r)),s.callbacks=[],s.keyCount=n),s.callbacks.push(a=>{const o=c=>_n(e,null,c),l=a[n];l===void 0?o(void 0):t[l]===i?o(l):o(void 0)}),i};let yS;const VF=()=>{yS?.forEach(({callbacks:t},e)=>{const i=Object.keys(e);t.forEach(r=>r(i))}),yS=void 0},GY=(t,e,i)=>{const r=t.manager;return r.V!==Xe&&r.V!==i&&r.S(void 0,void 0),r.T.length===0&&queueMicrotask(()=>r.S(void 0,void 0)),r.V=i,r.T.push((n,s)=>_n(e,void 0,i===s?n:void 0)),i},qY=(t=[DT(),...zY()],e,i)=>{const r=Array.isArray(t)?t:[t];let n=r.length+1;const s=a=>{n-=1,a!==void 0&&(n=Math.min(n,0)),n===0&&e(a)};r.forEach(a=>YRe(a,o=>s(o===void 0?void 0:{key:o,host:a,isReactive:!1}),i));for(const a of r)if("manager"in a&&a.manager.component===a){GY(a,o=>s(o===void 0?void 0:{key:o,host:a,isReactive:!0}),i);break}return i},WY=(t="",e={},i=DT())=>{const r={emit:n=>{t===""&&VF();const s=new CustomEvent(t,{detail:n,cancelable:!0,bubbles:!0,composed:!0,...e});return i.el.dispatchEvent(s),s}};return t===""&&qY(void 0,n=>t=n.key,r),r},Re=WY.bind(null,"");var mge;mge=DY;class BF{constructor(e){this.#e=[],this.#t=[],this.#i=[],this.#a=[],this.#o=[],this.#l=[],this.#d=[],this.#h=[],this.#c=[],this.#u=!1,this.P=new yI,this.connectedCalled=!1,this.loadedCalled=!1,this[mge]=!0,this.#s=[];const i=this,r=e??DT();i.#r=r,i.ready=i.P.promise,i.#n=Mre(i),i.component=r,i.#r.addController(i),i.#r.manager===void 0||(RY(i),queueMicrotask(()=>i.catchUpLifecycle()))}#e;#t;#i;#a;#o;#l;#d;#h;#c;#u;#r;catchUpLifecycle(){const{manager:e}=this.#r;e.connectedCalled&&!this.connectedCalled&&this.triggerConnected(),e.#u&&this.triggerLoad().then(()=>e.loadedCalled&&this.triggerLoaded()).catch(console.error)}#n;get exports(){return this.#n}set exports(e){const i=this.#n;i!==e&&(this.#n=e,this.#s.forEach(_n),this.connectedCalled&&this.O!==!1&&this.#r.requestUpdate(this.O,i)),this.P.resolve(e)}setProvisionalExports(e,i=!0){this.#n=i?Mre(e):e,this.#s.forEach(_n)}#s;watchExports(e){const i=()=>e(this.#n);return this.#s.push(i),()=>{this.#s.splice(this.#s.indexOf(i),1)}}get use(){return mS(this.#r),xRe}get useRef(){return mS(this.#r),SRe}get useRefSync(){return mS(this.#r),FY}controllerRemoved(){this.#r.el.isConnected&&this.triggerDisconnected(),this.triggerDestroy()}onConnected(e){this.#e.push(e)}onDisconnected(e){this.#t.push(e)}onLoad(e){this.#i.push(e)}onLoaded(e){this.#a.push(e)}onUpdate(e){this.#o.push(e)}onUpdated(e){this.#l.push(e)}onDestroy(e){this.#d.push(e)}onLifecycle(e){this.#h.push(e),this.connectedCalled&&this.#r.el.isConnected&&this.#p(e)}triggerConnected(){const e=this;e.hostConnected&&_n(e.hostConnected,e),e.#e.forEach(_n),e.triggerLifecycle(),e.connectedCalled=!0}triggerDisconnected(){const e=this;e.hostDisconnected&&_n(e.hostDisconnected,e),e.#t.forEach(_n),e.#c.forEach(_n),e.#c=[]}async triggerLoad(){if(this.#u)return;this.#u=!0;const e=this;e.hostLoad&&await Z8(e.hostLoad,e),this.#i.length>0&&await Promise.allSettled(this.#i.map(Z8)),this.P.resolve(this.#n)}triggerLoaded(){this.loadedCalled||(this.hostLoaded&&_n(this.hostLoaded,this),this.#a.forEach(_n),this.loadedCalled=!0)}triggerUpdate(e){this.hostUpdate&&_n(this.hostUpdate,this,e),this.#o.forEach(Ire,e)}triggerUpdated(e){this.hostUpdated&&_n(this.hostUpdated,this,e),this.#l.forEach(Ire,e)}triggerDestroy(){this.hostDestroy&&_n(this.hostDestroy,this),this.#d.forEach(_n)}triggerLifecycle(){this.hostLifecycle&&this.#p(()=>this.hostLifecycle()),this.#h.forEach(this.#p,this)}#p(e){mS(this.#r);const i=_n(e);(Array.isArray(i)?i:[i]).forEach(n=>{typeof n=="function"?this.#c.push(n):typeof n=="object"&&typeof n.remove=="function"&&this.#c.push(n.remove)})}}function Ire(t){_n(t,void 0,this)}const UF=BF,Mre=t=>{if(typeof t!="object"&&typeof t!="function"||t===null)return t;const e={get(r,n,s){if(!((n==="exports"||n==="_exports")&&n in r&&r[n]===i)&&(n in r||n in Promise.prototype||typeof n=="symbol"))return typeof r=="function"?r[n]:Reflect.get(r,n,s)}},i=new Proxy(t,e);return i},ZRe=t=>t.replace(XRe,(e,i)=>`${i===0?"":"-"}${e.toLowerCase()}`),XRe=/[A-Z]+(?![a-z])|[A-Z]/gu,JRe=1,KRe=2,QRe=4,eze=8,tze=16,ize=32,rze=64,gge=t=>{let e=t;for(;e=e.parentNode??e.host;)if(e?.constructor?.lumina){const i=e;return i.manager?.loadedCalled||(i.J??i._offspring).push(t),(i.I??i._postLoad).promise}return!1},Are={};function YY(){}const m3=Object.defineProperty,nze=globalThis.HTMLElement??YY;var cl,km,l$,EM,Q8;const vK=class vK extends nze{constructor(){var n;super();Vu(this,EM);Vu(this,cl);Vu(this,km);Vu(this,l$);Bu(this,km,{}),Bu(this,l$,[]),this.I=new yI,this.H=new yI,this.J=[];const i=this,r=i.constructor;i._offspring=i.J,i._postLoad=i.I,r.C?.forEach(s=>{Object.hasOwn(i,s)&&(or(i,km)[s]=i[s],delete i[s])}),r.A?Xk(n=i,EM,Q8).call(n,{a:r.A}):r.B.then(async s=>{var a;await r.K.p,Xk(a=i,EM,Q8).call(a,await(s.default?.then(o=>typeof o=="function"?{a:o}:o)??s))}).catch(s=>{i.H.reject(s),setTimeout(()=>{throw s})})}static F(){for(const i of this.C??[])m3(this.prototype,i,{configurable:!0,enumerable:!0,get(){return or(this,km)[i]},set(r){or(this,km)[i]=r}});for(const i of this.E??[])m3(this.prototype,i,{async value(...r){return or(this,cl)||await this.H.promise,await or(this,cl)[i](...r)},configurable:!0});for(const i of this.D??[])m3(this.prototype,i,{value(...r){return or(this,cl)[i](...r)},configurable:!0})}get manager(){return or(this,cl)?.manager}attributeChangedCallback(i,r,n){or(this,cl)?.attributeChangedCallback(i,r,n),or(this,cl)||or(this,l$).push(i)}connectedCallback(){or(this,cl)?or(this,cl).connectedCallback?.():queueMicrotask(()=>this.G=gge(this))}disconnectedCallback(){or(this,cl)?.disconnectedCallback?.()}async componentOnReady(){return await this.H.promise,this}addController(){}requestUpdate(){or(this,cl)?.requestUpdate()}};cl=new WeakMap,km=new WeakMap,l$=new WeakMap,EM=new WeakSet,Q8=function(i){const r=this.constructor,n=r.L,s=or(this,km),a=Object.values(i).find(g=>g.L===n),o=`${n}--lazy`;let l=a;for(;l&&!Object.hasOwn(l,"lumina");)l=Object.getPrototypeOf(l);aze(l),!r.A&&(r.A=a,customElements.define(o,a)),a.N=this;const h=document.createElement(o);a.N=void 0,Bu(this,cl,h),Bu(this,km,h),or(this,l$).forEach(g=>h.attributeChangedCallback(g,null,this.getAttribute(g))),Object.entries(s).forEach(sze,h);const f=this.isConnected;(f||this.G)&&(h.connectedCallback?.(),f||h.disconnectedCallback())},vK.lumina=!0;let Pre=vK;function sze([t,e]){this[t]=e}const aze=t=>{const e=t.prototype,i=Element.prototype;Object.hasOwn(e,"isConnected")||(e.setAttribute=function(n,s){i.setAttribute.call(this.el,n,s)},e.removeAttribute=function(n){i.removeAttribute.call(this.el,n)},m3(e,"isConnected",{get(){return Reflect.get(i,"isConnected",this.el)}}))};const Bh={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4},RT=t=>(...e)=>({_$litDirective$:t,values:e});let zT=class{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,i,r){this._$Ct=e,this._$AM=i,this._$Ci=r}_$AS(e,i){return this.update(e,i)}update(e,i){return this.render(...i)}};const oze=RT(class extends zT{constructor(t){if(super(t),t.type!==Bh.ATTRIBUTE||t.name!=="class"||t.strings?.length>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(t){return" "+Object.keys(t).filter(e=>t[e]).join(" ")+" "}update(t,[e]){if(this.st===void 0){this.st=new Set,t.strings!==void 0&&(this.nt=new Set(t.strings.join(" ").split(/\s/).filter(r=>r!=="")));for(const r in e)e[r]&&!this.nt?.has(r)&&this.st.add(r);return this.render(e)}const i=t.element.classList;for(const r of this.st)r in e||(i.remove(r),this.st.delete(r));for(const r in e){const n=!!e[r];n===this.st.has(r)||this.nt?.has(r)||(n?(i.add(r),this.st.add(r)):(i.remove(r),this.st.delete(r)))}return vc}});const yge="important",lze=" !"+yge,cze=RT(class extends zT{constructor(t){if(super(t),t.type!==Bh.ATTRIBUTE||t.name!=="style"||t.strings?.length>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(t){return Object.keys(t).reduce((e,i)=>{const r=t[i];return r==null?e:e+`${i=i.includes("-")?i:i.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${r};`},"")}update(t,[e]){const{style:i}=t.element;if(this.ft===void 0)return this.ft=new Set(Object.keys(e)),this.render(e);for(const r of this.ft)e[r]==null&&(this.ft.delete(r),r.includes("-")?i.removeProperty(r):i[r]=null);for(const r in e){const n=e[r];if(n!=null){this.ft.add(r);const s=typeof n=="string"&&n.endsWith(lze);r.includes("-")||s?i.setProperty(r,s?n.slice(0,-11):n,s?yge:""):i[r]=n}}return vc}});const{I:uze}=URe,Ore=t=>t,vge=t=>t.strings===void 0,Lre=()=>document.createComment(""),u2=(t,e,i)=>{const r=t._$AA.parentNode,n=e===void 0?t._$AB:e._$AA;if(i===void 0){const s=r.insertBefore(Lre(),n),a=r.insertBefore(Lre(),n);i=new uze(s,a,t,t.options)}else{const s=i._$AB.nextSibling,a=i._$AM,o=a!==t;if(o){let l;i._$AQ?.(t),i._$AM=t,i._$AP!==void 0&&(l=t._$AU)!==a._$AU&&i._$AP(l)}if(s!==n||o){let l=i._$AA;for(;l!==s;){const c=Ore(l).nextSibling;Ore(r).insertBefore(l,n),l=c}}}return i},$b=(t,e,i=t)=>(t._$AI(e,i),t),dze={},ZY=(t,e=dze)=>t._$AH=e,hze=t=>t._$AH,r6=t=>{t._$AR(),t._$AA.remove()};const Dre=RT(class extends zT{constructor(t){if(super(t),t.type!==Bh.PROPERTY&&t.type!==Bh.ATTRIBUTE&&t.type!==Bh.BOOLEAN_ATTRIBUTE)throw Error("The `live` directive is not allowed on child or event bindings");if(!vge(t))throw Error("`live` bindings can only contain a single expression")}render(t){return t}update(t,[e]){if(e===vc||e===Xe)return e;const i=t.element,r=t.name;if(t.type===Bh.PROPERTY){if(e===i[r])return vc}else if(t.type===Bh.BOOLEAN_ATTRIBUTE){if(!!e===i.hasAttribute(r))return vc}else if(t.type===Bh.ATTRIBUTE&&i.getAttribute(r)===e+"")return vc;return ZY(t),e}});const mC=(t,e)=>{const i=t._$AN;if(i===void 0)return!1;for(const r of i)r._$AO?.(e,!1),mC(r,e);return!0},OR=t=>{let e,i;do{if((e=t._$AM)===void 0)break;i=e._$AN,i.delete(t),t=e}while(i?.size===0)},bge=t=>{for(let e;e=t._$AM;t=e){let i=e._$AN;if(i===void 0)e._$AN=i=new Set;else if(i.has(t))break;i.add(t),mze(e)}};function pze(t){this._$AN!==void 0?(OR(this),this._$AM=t,bge(this)):this._$AM=t}function fze(t,e=!1,i=0){const r=this._$AH,n=this._$AN;if(n!==void 0&&n.size!==0)if(e)if(Array.isArray(r))for(let s=i;s<r.length;s++)mC(r[s],!1),OR(r[s]);else r!=null&&(mC(r,!1),OR(r));else mC(this,t)}const mze=t=>{t.type==Bh.CHILD&&(t._$AP??=fze,t._$AQ??=pze)};let gze=class extends zT{constructor(){super(...arguments),this._$AN=void 0}_$AT(e,i,r){super._$AT(e,i,r),bge(this),this.isConnected=e._$AU}_$AO(e,i=!0){e!==this.isConnected&&(this.isConnected=e,e?this.reconnected?.():this.disconnected?.()),i&&(mC(this,e),OR(this))}setValue(e){if(vge(this._$Ct))this._$Ct._$AI(e,this);else{const i=[...this._$Ct._$AH];i[this._$Ci]=e,this._$Ct._$AI(i,this,0)}}disconnected(){}reconnected(){}};const wr=()=>new yze;let yze=class{};const n6=new WeakMap,zt=RT(class extends gze{render(t){return Xe}update(t,[e]){const i=e!==this.G;return i&&this.G!==void 0&&this.rt(void 0),(i||this.lt!==this.ct)&&(this.G=e,this.ht=t.options?.host,this.rt(this.ct=t.element)),Xe}rt(t){if(this.isConnected||(t=void 0),typeof this.G=="function"){const e=this.ht??globalThis;let i=n6.get(e);i===void 0&&(i=new WeakMap,n6.set(e,i)),i.get(this.G)!==void 0&&this.G.call(this.ht,void 0),i.set(this.G,t),t!==void 0&&this.G.call(this.ht,t)}else this.G.value=t}get lt(){return typeof this.G=="function"?n6.get(this.ht??globalThis)?.get(this.G):this.G?.value}disconnected(){this.lt===this.ct&&this.rt(void 0)}reconnected(){this.rt(this.ct)}});class vze extends UF{constructor(e){super(e),this.destroyed=!1,this.R=!1,this.V=Xe,this.T=[],this.#i=new WeakMap,this.#t=e,this.exports=void 0,this.hasDestroy=e9 in e&&typeof e.destroy=="function",FS.prototype.addController.call(e,{hostConnected:()=>{if(this.destroyed){const i=e.el.localName;throw e.el.remove(),new Error(`The ${i} component has already been destroyed. It cannot be used again. If you meant to disconnect and reconnect a component without automatic destroy, set the ${e9} prop.`)}this.#e!==void 0&&clearTimeout(this.#e),VF();for(const i of e.M)"triggerConnected"in i?i.triggerConnected():_n(i.hostConnected,i)},hostDisconnected:()=>{for(const i of e.M)"triggerDisconnected"in i?i.triggerDisconnected():_n(i.hostDisconnected,i);this.hasDestroy&&!this.destroyed&&this.U()},hostUpdate:()=>{for(const i of e.M)"triggerUpdate"in i?i.triggerUpdate(this.Q):_n(i.hostUpdate,i,this.Q)},hostUpdated:()=>{for(const i of e.M)"triggerUpdated"in i?i.triggerUpdated(this.Q):_n(i.hostUpdated,i,this.Q);this.Q=void 0}}),queueMicrotask(()=>this.R=!0),mS(e)}#e;#t;async destroy(){if(!this.destroyed){this.#t.el.isConnected&&(this.hasDestroy=!1,this.#t.el.remove()),this.#e=void 0,this.destroyed=!0;for(const e of this.#t.M)"triggerDestroy"in e?e.triggerDestroy():_n(e.hostDestroy,e);this.#t.M.splice(0)}}U(){if(this.#e!==void 0&&clearTimeout(this.#e),!this.#t.el.isConnected&&!this.#t.autoDestroyDisabled){const e=()=>{this.#t.destroy()};this.#e=qRe(e,bze)}}S(e,i){const r=this.T;this.V=Xe,this.T=[],r.forEach(n=>n(e,i))}#i;W(e,i){(typeof i=="object"&&i!==null||typeof i=="function")&&this.#i.set(i,e)}X(e){if(typeof e=="object"&&e!==null||typeof e=="function")return this.#i.get(e)}}let bze=1e3;const e9="autoDestroyDisabled";var q0,CM,IM,W0,Vh,bT,wge,_ge;const sI=class sI extends FS{constructor(){super();Vu(this,bT);Vu(this,q0);Vu(this,CM);Vu(this,IM);Vu(this,W0);Vu(this,Vh);this.M=[],this.manager=new vze(this);const i=this,r=i.constructor,n=r.N,s=r.K.o,a=sI.prototype.shouldUpdate;Bu(i,W0,n?.H??new yI),i.I=n?.I??new yI,i.J=n?.J??[],i._offspring=i.J,i._postLoad=i.I,i.el=n??i,Bu(i,IM,i.enableUpdating),i.enableUpdating=YY,i.shouldUpdate!==a&&(Bu(i,CM,i.shouldUpdate),i.shouldUpdate=a),s&&(Bu(i,q0,new Map),r.elementProperties.forEach((o,l)=>or(i,q0).set(l,s())))}static finalizeStyles(i){const r=super.finalizeStyles(i),n=this.shadowRootOptions===Are;return this.K?.commonStyles===void 0||n?r:[this.K.commonStyles,...r]}static createProperty(i,r){const n=typeof r=="number"?r:Array.isArray(r)?r[0]:0,s=Array.isArray(r)?r[1]:void 0,a=s?.hasChanged??VY,o={attribute:n&JRe&&typeof i=="string"?ZRe(i):!1,reflect:!!(n&KRe),type:n&QRe?Boolean:n&eze?Number:void 0,state:!!(n&tze),readOnly:!!(n&ize),noAccessor:!!(n&rze),c:!1,...s,hasChanged(l,c){const h=a(l,c);return o.c=h,h}};super.createProperty(i,o)}static getPropertyDescriptor(i,r,n){const s=this.K,a=super.getPropertyDescriptor(i,r,n);return n.d=a,{...a,get(){return s.t?.(or(this,q0).get(i)),a.get?.call(this)},set(o){const l=this.manager;if(n.readOnly&&!X8&&(l.R||l.connectedCalled))throw Error(`Cannot assign to read-only property "${i}" of ${this.el.localName}. Trying to assign "${o}"`);a.set.call(this,o??void 0),n.c&&or(this,q0)?.get(i)?.notify(),l.T.length>0&&(VF(),l?.S(i,o))}}}connectedCallback(){if(this.el.hasAttribute("defer-hydration"))return;const i=this.constructor.K.c?.(()=>this.requestUpdate());Bu(this,Vh,i);const r=!this.manager.connectedCalled;super.connectedCallback(),r?queueMicrotask(()=>Xk(this,bT,_ge).call(this).catch(n=>{or(this,W0).reject(n),setTimeout(()=>{throw n})})):i&&this.requestUpdate()}disconnectedCallback(){super.disconnectedCallback(),or(this,Vh)?.destroy(),Bu(this,Vh,void 0)}createRenderRoot(){const i=this.el.shadowRoot,r=this.constructor,n=r.shadowRootOptions,a=i??(n===Are?this.el:this.el.attachShadow(n));if(this.isConnected){const o=a.getRootNode();o.adoptedStyleSheets=[...o.adoptedStyleSheets,...r.elementStyles.map(l=>"styleSheet"in l?l.styleSheet:l)]}return a}shouldUpdate(i){var r;return this.manager.Q=i,((r=or(this,CM))==null?void 0:r.call(this,i))??!0}update(i){or(this,Vh)?Xk(this,bT,wge).call(this,i):super.update(i)}listen(i,r,n){const s=r?.bind(this)??r;this.manager.onLifecycle(()=>(this.el.addEventListener(i,s,n),()=>this.el.removeEventListener(i,s,n)))}listenOn(i,r,n,s){const a=n?.bind(this)??n;this.manager.onLifecycle(()=>(i.addEventListener(r,a,s),()=>i.removeEventListener(r,a,s)))}async componentOnReady(){return await or(this,W0).promise,this}addController(i){this.M.push(i),!(DY in i)&&this.renderRoot&&this.el.isConnected&&i.hostConnected?.()}removeController(i){this.M.splice(this.M.indexOf(i),1),i.controllerRemoved?.()}};q0=new WeakMap,CM=new WeakMap,IM=new WeakMap,W0=new WeakMap,Vh=new WeakMap,bT=new WeakSet,wge=function(i){try{or(this,Vh).clear(),this.constructor.K.r(or(this,Vh),()=>Tte(sI.prototype,this,"update").call(this,i))}catch(r){throw or(this,Vh).clear(),r}},_ge=async function(){const i=this.el.G??gge(this.el);i&&await i;const r=[];for(const s of this.M)"triggerLoad"in s?r.push(s.triggerLoad()):r.push(Z8(s.hostLoad,s));await Promise.all(r),await this.load?.(),this.manager.hasDestroy&&this.manager.onUpdate(s=>s.has(e9)&&this.manager.U()),or(this,IM).call(this,!0),this.performUpdate(),this.I.resolve(),await Promise.resolve();const n=this.J.filter(s=>!s.manager?.loadedCalled);n.length&&await Promise.allSettled(n.map(async s=>await s.componentOnReady())),this.J.length=0,this.el.setAttribute(this.constructor.K.hydratedAttribute,"");for(const s of this.M)"triggerLoaded"in s?s.triggerLoaded():_n(s.hostLoaded,s);this.loaded?.(),or(this,W0).resolve()},sI.lumina=!0;let Et=sI;const xge=t=>{let e;const i=n=>{e=new URL(n,globalThis.location?.href||void 0).href},r={...t,getAssetPath(n){const s=new URL(n,e);return s.origin!==globalThis.location?.origin?s.href:s.pathname},setAssetPath:i,customElement(n,s){s.K=r,s.L=n,customElements.get(n)||customElements.define(n,s)}};return i(t.defaultAssetPath),r},q=t=>typeof t=="object"&&t!=null?oze(t):t,Kt=t=>typeof t=="object"&&t!=null?cze(t):t,De=Xe;function FT(t,e,i){i==null?t.removeAttribute(e):t.setAttribute(e,i)}const Np={toAttribute:t=>t===!0?"":t===!1?null:t},wze={},_ze=(t,e)=>i=>{const r=i.tagName;let n=wze;const s={name:r,get prototype(){if(n===void 0){const o=customElements.get(r);if(!o)throw new Error(`Custom element "${r}" not found`);o.F?.(),o.F=YY,n=o.prototype,Object.defineProperty(s,"prototype",{value:n})}return n}},a=e({...i,react:t,elementClass:s});return n=void 0,a},VM=(t,e)=>({tagName:t,events:e}),Sge=t=>{const e=document.createElement("div");return fge(t,e),e.firstElementChild},xze="calcite-mode-auto",Sze="calcite-mode-dark",Uh={rtl:"calcite--rtl",calciteAnimate:"calcite-animate",calciteAnimateInUp:"calcite-animate__in-up",calciteAnimateInDown:"calcite-animate__in-down",calciteAnimateInRight:"calcite-animate__in-right",calciteAnimateInLeft:"calcite-animate__in-left"},HF={filter:250,nextTick:0,resize:150,reposition:100},$ge=10,Tge=25;function Rre(){const{classList:t}=document.body,e=window.matchMedia("(prefers-color-scheme: dark)").matches,i=()=>t.contains(Sze)||t.contains(xze)&&e?"dark":"light",r=a=>document.body.dispatchEvent(new CustomEvent("calciteModeChange",{bubbles:!0,detail:{mode:a}})),n=a=>{s!==a&&r(a),s=a};let s=i();r(s),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",a=>n(a.matches?"dark":"light")),new MutationObserver(()=>n(i())).observe(document.body,{attributes:!0,attributeFilter:["class"]})}const gC=globalThis.calciteConfig,$ze=gC?.focusTrapStack||[],Tze=gC?.logLevel||"info",zre="3.3.3",kze="2025-10-08",Eze="7391af08e";function Cze(){if(gC&&gC.version)return;console.info(`Using Calcite Components ${zre} [Date: ${kze}, Revision: ${Eze}]`);const t=gC||globalThis.calciteConfig||{};Object.defineProperty(t,"version",{value:zre,writable:!1}),globalThis.calciteConfig=t}document.readyState==="interactive"?Rre():document.addEventListener("DOMContentLoaded",Rre,{once:!0});queueMicrotask(Cze);const Ize=xge({defaultAssetPath:"https://js.arcgis.com/calcite-components/3.3.3/",hydratedAttribute:"calcite-hydrated"}),{customElement:$i,getAssetPath:kge,setAssetPath:Mze}=Ize;let Ege=!1;const Aze=t=>{Ege=!0,Mze(t)};let Cge;function Pze(){Ege||Aze(oo(Ur(Cge)))}function g_(t){const e=[];for(const i of Object.keys(t))customElements.get(`calcite-${i}`)||e.push(t[i]?.());return e.length>0?Promise.all(e):null}Cge="components/assets";const Ige=Symbol("widget"),Mge=Symbol("widget-test-data"),Oze=[],Lze={},LR=new WeakMap;function Age(t,e){let i=e.children;if(i?.length)for(let n=0;n<i.length;++n)i[n]=Age(t,i[n]);else i=Oze;const r=e.vnodeSelector;if(DR(r)){const n=e.properties||Lze,s=n.key||r,a={key:s,afterCreate:Dze,afterUpdate:Rze,afterRemoved:Pge,parentWidget:t,widgetConstructor:r,widgetProperties:{...n,key:s,children:i}};return{vnodeSelector:r.vnodeSelector,properties:a,children:void 0,text:void 0,domNode:null}}return e}function Dze(t,e,i,{parentWidget:r,widgetConstructor:n,widgetProperties:s}){const a=new n(s);a.container=t,LR.set(t,a),a.afterCreate?.(a,t),r.addHandles(Si(()=>Pge(t))),queueMicrotask(()=>{a[Mge].projector?.renderNow()})}function Rze(t,e,i,{widgetProperties:r}){const n=LR.get(t);n&&(n.set(r),n.afterUpdate?.(n,t))}function Pge(t){const e=LR.get(t);e&&(e.afterRemoved?.(e,t),e.destroy(),LR.delete(t))}function DR(t){return typeof t=="function"&&t[Ige]}const Fre=new Set;function zze(t){Fre.add(t),t.finally(()=>Fre.delete(t))}function Fze(t){return Si()}const GF=new Map;function Oge(){GF.clear()}function Nze(t){return GF.get(t)}function jze(t,e){GF.set(t,e)}function s6(t){GF.delete(t)}function Vze(...t){const e=Ao.acquire();for(let r=0;r<t.length;r++){const n=t[r],s=typeof n;if(s==="string")e.push(n);else if(Array.isArray(n))e.push.apply(e,n);else if(s==="object")for(const a in n)n[a]&&e.push(a)}const i=e.join(" ");return Ao.release(e),i}(()=>{const t=new Map,e=new ResizeObserver(r=>{Oge();for(const n of r)t.get(n.target)?.(n)}),i=(r,n,s)=>(t.set(r,n),e.observe(r,s),Si(()=>{e.unobserve(r),t.delete(r)}));return(r,n,s)=>{let a=null;return c_([ze(()=>typeof r=="function"?r():r,o=>{a?.remove(),o&&(a=i(o,n,s))},Ta),Si(()=>a?.remove())])}})();function Bze(t){const e=t?.closest("[dir]");return e!==null&&e instanceof HTMLElement&&e.dir==="rtl"||document.dir==="rtl"}function X2t(t){const e="data-node-ref";this[t.getAttribute(e)]=null}function J2t(t){const e="data-node-ref";this[t.getAttribute(e)]=t}function Uze(t){return t==="Enter"||t===" "}async function NS(t,e){await tAe(OM(e));const i=typeof t=="function"?t():t;i&&("setFocus"in i&&typeof i.setFocus=="function"?await i.setFocus():i instanceof HTMLElement&&i.focus())}function Hze(t,e){return t.assignedElements({flatten:!0}).filter(r=>r.matches(e))}const Ui=(...t)=>{const e=[];for(let r=0;r<t.length;r++){const n=t[r];if(typeof n=="string")e.push(n);else if(Array.isArray(n))e.push.apply(e,n);else if(typeof n=="object")for(const s in n)n[s]&&e.push(s)}const i=e.join(" ");return e.length=0,i},Gze=(t,e)=>{let i=t;for(;i;){if(i===e)return!0;if(!i.parentNode)return!1;i.parentNode instanceof ShadowRoot?i=i.parentNode.host:i=i.parentNode}return!1},Lge=(t,e,i)=>{const r=qze(e).subscribe;return r(n=>{n.some(a=>Gze(t,a.target))&&i()})},a6={},qze=t=>{const e=t.join(","),i=a6[e];if(i!==void 0)return i;const r=new Set,n=new MutationObserver(a=>r.forEach(o=>o(a)));globalThis.document&&n.observe(document.documentElement,{attributes:!0,attributeFilter:t,subtree:!0});const s={subscribe:a=>(r.add(a),()=>{r.delete(a),r.size===0&&(n.disconnect(),a6[e]=void 0)})};return a6[e]=s,s},Dge=(t,e)=>{let i=t;for(;i;){const r=i.closest?.(e);if(r)return r;const n=i.getRootNode?.();if(n===globalThis.document)return;i=n.host}};function Wze(t){const e=Dge(t,".calcite-mode-dark, .calcite-mode-light, .calcite-mode-auto");return e?.classList.contains("calcite-mode-dark")||e?.classList.contains("calcite-mode-auto")&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}const Rge=(t,e,i)=>Dge(t,`[${e}]`)?.getAttribute(e)??i;var Nre;let Yze=0;function zge(t,e){const i=Object.prototype.hasOwnProperty;for(const r in e)i.call(e,r)&&i.call(t,r)&&(t[r]!=null&&e[r]!=null&&typeof t[r]=="object"&&typeof e[r]=="object"?zge(t[r],e[r]):t[r]=e[r]);return t}const Zze=gRe({postProcessProjectionOptions(t){const e=t.eventHandlerInterceptor,i=/capture$/i;t.eventHandlerInterceptor=(r,n,s,a)=>{const o=e?.(r,n,s,a),l=i.test(r);if(!((r=r.replace(i,"")).toLowerCase()in s)||l){const c=r[2].toLowerCase()+r.slice(3),h=y=>o?.call(s,y);s.addEventListener(c,h,l);const f=()=>s.removeEventListener(c,h,l),g=a.afterRemoved;a.afterRemoved=y=>{g?.(y),f()}}return o}},handleInterceptedEvent(t,e,i,r){const{eventPhase:n,type:s}=r,a=n===Event.CAPTURING_PHASE;let o=`on${s}${a?"capture":""}`;const l=e.properties;(l&&o in l||(o=`on${s[0].toUpperCase()}${s.slice(1)}${a?"Capture":""}`,l&&o in l))&&(Oge(),t.scheduleRender(),l[o].call(l.bind||i,r))}});let o6=!1;var ow;let Hs=(ow=class extends jM(Rv){constructor(e,i){super(e,i),this._attached=!1,this._projector=Zze,this._readyForTrueRender=!1,this.key=this,this.autoRenderingEnabled=!0,this._loadLocale=ST(async()=>{if(this._messageBundleProps?.length){const l=await Promise.allSettled(this._messageBundleProps.map(async({bundlePath:c,propertyName:h})=>{if(this.destroyed)return;let f=await Ome(c);this.destroyed||(this.uiStrings&&Object.keys(this.uiStrings)&&(f=zge(de(f),this.uiStrings)),this[h]=f)}));if(this.destroyed)return;for(const c of l)c.status==="rejected"&&$e.getLogger(this).error("widget-intl:locale-error",this.declaredClass,c.reason)}await this.loadLocale()}),this.addHandles(Fze()),Pze();const r="esri-widget-uid-"+LT(),n=this.render.bind(this);this._trackingTarget=new LM(()=>{this.autoRenderingEnabled&&this.scheduleRender()});const s=()=>({vnodeSelector:"div",properties:{key:`${r}-hidden`,class:"",styles:{display:"none"}},domNode:null,children:void 0,text:void 0}),a=()=>{if(!this._readyForTrueRender||this.destroyed)return null;const l=n()??s(),c=l.properties??={};if(c.key??=r,DR(l.vnodeSelector)){if(!this.visible)return s()}else this.visible?c.styles||(c.styles={}):(c.class="",c.styles={display:"none"}),c.styles.display??="";let h=0;return l.children?.forEach(f=>{DR(f.vnodeSelector)||(f.properties??={},f.properties.key??=`${this.id}--${h++}`)}),Age(this,l)};this.render=()=>{if(o6)return a();let l=Nze(this)??null;if(l)return l;this._trackingTarget.clear(),o6=!0;try{l=Lp(this._trackingTarget,a)}catch(c){throw $e.getLogger(this).error(c),c}finally{o6=!1}return l&&jze(this,l),l};const o=this.beforeFirstRender();o?this._resourcesFetch=o.then(()=>{this.destroyed||(this._readyForTrueRender=!0,this._postInitialize())}):(this._resourcesFetch=Promise.resolve().then(()=>{this.destroyed||this._postInitialize()}),this._readyForTrueRender=!0),this.addResolvingPromise(this._resourcesFetch),zze(this._resourcesFetch)}normalizeCtorArgs(e,i){const r={...e};return i&&(r.container=i),r}postInitialize(){}beforeFirstRender(){const e=this.loadDependencies();return this._messageBundleProps?.length||e?Promise.all([e,this._loadLocale()]).then(()=>{}).catch(Qte):null}loadDependencies(){return null}loadLocale(){return null}destroy(){this.destroyed||(Ir(this._trackingTarget),Ir(this.viewModel),this._detach(this.container),this._set("container",null),this.render=()=>null,this._projector=null,s6(this))}set container(e){this._get("container")||this._set("container",e)}castContainer(e){return CY(e)}get destroyed(){return super.destroyed}get domNode(){return this.container}set domNode(e){this.container=e}get icon(){return null}set icon(e){this._overrideIfSome("icon",e)}get id(){return this._get("id")||this.container?.id||Date.now().toString(16)+"-widget-"+Yze++}set id(e){e&&this._set("id",e)}get label(){return this.declaredClass.split(".").pop()}set label(e){this._overrideIfSome("label",e)}get renderable(){return this._resourcesFetch}get visible(){return this._get("visible")}set visible(e){this._set("visible",e)}get[(Nre=Ige,Mge)](){return{projector:this._projector}}render(){throw new Error("not implemented")}scheduleRender(){this.destroyed||(s6(this),this._projector.scheduleRender())}classes(...e){return Vze.apply(this,e)}renderNow(){s6(this),this._projector.renderNow()}_postInitialize(){if(this.destroyed)return;this.scheduleRender(),this._delegatedEventNames?.length&&this.addHandles(ze(()=>this.viewModel,(i,r)=>{r&&this.removeHandles("delegated-events"),i&&TF(i)&&this.addHandles(this._delegatedEventNames.map(n=>zm(i,n,s=>{this.emit(n,s)})),"delegated-events")},Ta)),this.postInitialize();const e=async()=>{await this._loadLocale().catch(Qte),this.scheduleRender()};this.addHandles([gY(e),ze(()=>this.uiStrings,e)]),this.addHandles(as(()=>this.container,i=>{this.destroyed||this._attach(i)},{initial:!0,once:!0}))}_attach(e){e&&(this._projector.merge(e,this.render),this._attached=!0)}_detach(e){this._attached&&(this._projector.detach(this.render),this._attached=!1),e?.parentNode?.removeChild(e)}},ow[Nre]=!0,ow.vnodeSelector="div",ow);d([m()],Hs.prototype,"_readyForTrueRender",void 0),d([m({value:null})],Hs.prototype,"container",null),d([Ii("container")],Hs.prototype,"castContainer",null),d([m()],Hs.prototype,"icon",null),d([m()],Hs.prototype,"id",null),d([m()],Hs.prototype,"label",null),d([m()],Hs.prototype,"renderable",null),d([m()],Hs.prototype,"uiStrings",void 0),d([m()],Hs.prototype,"viewModel",void 0),d([m({value:!0})],Hs.prototype,"visible",null),d([m()],Hs.prototype,"key",void 0),d([m()],Hs.prototype,"children",void 0),d([m()],Hs.prototype,"afterCreate",void 0),d([m()],Hs.prototype,"afterUpdate",void 0),d([m()],Hs.prototype,"afterRemoved",void 0),Hs=d([U("esri.widgets.Widget")],Hs);const zv=Hs;function $v(t){return(e,i)=>{e.hasOwnProperty("_messageBundleProps")||(e._messageBundleProps=e._messageBundleProps?e._messageBundleProps.slice():[]),e._messageBundleProps.push({bundlePath:t,propertyName:i})}}var Xze=function(t){return{vnodeSelector:"",properties:void 0,children:void 0,text:t.toString(),domNode:null}},Fge=function(t,e){for(var i=0,r=t.length;i<r;i++){var n=t[i];Array.isArray(n)?Fge(n,e):n!=null&&n!==!1&&(n.hasOwnProperty("vnodeSelector")||(n=Xze(n)),e.push(n))}},Jze=function(t,e){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];if(i.length===1&&typeof i[0]=="string")return{vnodeSelector:t,properties:e||void 0,children:void 0,text:i[0],domNode:null};var n=[];return Fge(i,n),{vnodeSelector:t,properties:e||void 0,children:n,text:void 0,domNode:null}};function Ke(t,e,...i){return typeof t!="function"||DR(t)?Jze(t,e??null,...i):t(e,...i)}function K2t(...t){return t}const Kze="--esri-calcite-mode-name";function Qze(){const t=getComputedStyle(document.body).getPropertyValue(Kze).replaceAll(/\W/g,"").toLowerCase();return t==="dark"||t==="light"?t:void 0}const Nge="calcite-mode-";function jge(t){return Qze()??Wze(t??document.body)}function Vge(t){return jge(t)==="dark"}function Bge(t){return`${Nge}${jge(t)}`}function e5e(t){const e=Bge(t);t5e(t),t.classList.add(e)}function t5e(t){Array.from(t.classList).forEach(e=>{e.startsWith(Nge)&&t.classList.remove(e)})}const l6="esri-identity-modal",c6={base:l6,info:`${l6}__info`,notice:`${l6}__notice`},i5e="ArcGIS Online";let Gl=class extends zv{constructor(e,i){super(e,i),this.container=document.createElement("div"),this.error=null,this.oAuthPrompt=!1,this.open=!1,this.signingIn=!1,this.server=null,this.resource=null,this._usernameInputNode=null,this._passwordInputNode=null,document.body.appendChild(this.container)}loadDependencies(){return g_({button:()=>fe(()=>Promise.resolve().then(()=>mA),void 0),dialog:()=>fe(()=>import("./index-CD7qSSwV.js"),[]),input:()=>fe(()=>Promise.resolve().then(()=>Fyt),void 0),label:()=>fe(()=>Promise.resolve().then(()=>skt),void 0),notice:()=>fe(()=>Promise.resolve().then(()=>HJ),void 0)})}get title(){return this.commonMessages?.auth.signIn}render(){const{open:e,title:i,messages:r,signingIn:n,oAuthPrompt:s,server:a,resource:o,error:l}=this,{info:c,oAuthInfo:h,lblItem:f,invalidUser:g,noAuthService:y,lblUser:b,lblPwd:_,lblCancel:S,lblSigning:$,lblOk:C}=r;return Ke("div",{class:this.classes(c6.base,Bge(this.container))},Ke("form",{bind:this,onsubmit:this._submit},Ke("calcite-dialog",{bind:this,heading:i,modal:!0,open:e,outsideCloseDisabled:!0,scale:"s",widthScale:"s",onCalciteDialogClose:this._cancel,onCalciteDialogOpen:this._focusUsernameInput},Ke("div",{class:c6.info},Fp(s?h:c,{server:a&&/\.arcgis\.com/i.test(a)?i5e:a,resource:`(${o||f})`})),l?Ke("calcite-notice",{class:c6.notice,icon:"exclamation-mark-triangle",kind:"danger",open:!0},Ke("div",{slot:"message"},l.details?.httpStatus?g:y)):null,s?null:[Ke("calcite-label",null,b,Ke("calcite-input",{afterCreate:I=>this._usernameInputNode=I,autocomplete:"off",bind:this,name:"username",required:!0,spellcheck:!1,type:"text",value:""})),Ke("calcite-label",null,_,Ke("calcite-input",{afterCreate:I=>this._passwordInputNode=I,bind:this,name:"password",required:!0,type:"password",value:""}))],Ke("calcite-button",{appearance:"outline",bind:this,onclick:this._cancel,slot:"footer-end",type:"button"},S),Ke("calcite-button",{loading:!!n,slot:"footer-end",type:"submit"},n?$:C))))}_focusUsernameInput(){return NS(()=>this._usernameInputNode)}_cancel(){this._set("signingIn",!1),this.open=!1,this._usernameInputNode&&(this._usernameInputNode.value=""),this._passwordInputNode&&(this._passwordInputNode.value=""),this.emit("cancel")}_submit(e){e.preventDefault(),this._set("signingIn",!0);const i=this.oAuthPrompt?{}:{username:this._usernameInputNode?.value,password:this._passwordInputNode?.value};this.emit("submit",i)}};d([m({readOnly:!0})],Gl.prototype,"container",void 0),d([m(),$v("esri/t9n/common")],Gl.prototype,"commonMessages",void 0),d([m()],Gl.prototype,"error",void 0),d([m(),$v("esri/identity/t9n/identity")],Gl.prototype,"messages",void 0),d([m()],Gl.prototype,"oAuthPrompt",void 0),d([m()],Gl.prototype,"open",void 0),d([m()],Gl.prototype,"signingIn",void 0),d([m()],Gl.prototype,"server",void 0),d([m({readOnly:!0})],Gl.prototype,"title",null),d([m()],Gl.prototype,"resource",void 0),Gl=d([U("esri.identity.IdentityModal")],Gl);const jre=Gl,u6="esriJSAPIOAuth";let t9=class{constructor(e,i){this.oAuthInfo=null,this.storage=null,this.appId=null,this.codeVerifier=null,this.expires=null,this.refreshToken=null,this.ssl=null,this.stateUID=null,this.token=null,this.userId=null,this.oAuthInfo=e,this.storage=i,this._init()}isValid(){let e=!1;if(this.oAuthInfo&&this.userId&&(this.refreshToken||this.token)){if(this.expires==null&&this.refreshToken)e=!0;else if(this.expires){const i=Date.now();this.expires>i&&(this.expires-i)/1e3>60*this.oAuthInfo.minTimeUntilExpiration&&(e=!0)}}return e}save(){if(!this.storage)return!1;const e=this._load(),i=this.oAuthInfo;if(i?.authNamespace&&i.portalUrl){let r=e[i.authNamespace];r||(r=e[i.authNamespace]={}),this.appId||(this.appId=i.appId),r[i.portalUrl]={appId:this.appId,codeVerifier:this.codeVerifier,expires:this.expires,refreshToken:this.refreshToken,ssl:this.ssl,stateUID:this.stateUID,token:this.token,userId:this.userId};try{this.storage.setItem(u6,JSON.stringify(e))}catch(n){return console.warn(n),!1}return!0}return!1}destroy(){const e=this._load(),i=this.oAuthInfo;if(i?.appId&&i?.portalUrl&&(this.expires==null||this.expires>Date.now())&&(this.refreshToken||this.token)){const r=i.portalUrl.replace(/^http:/i,"https:")+"/sharing/rest/oauth2/revokeToken";Nt(r,{authMode:"anonymous",keepAlive:!0,method:"post",query:{f:"json",auth_token:this.refreshToken||this.token,client_id:i.appId,token_type_hint:this.refreshToken?"refresh_token":"access_token"}})}if(i?.authNamespace&&i.portalUrl&&this.storage){const r=e[i.authNamespace];if(r){delete r[i.portalUrl];try{this.storage.setItem(u6,JSON.stringify(e))}catch(n){console.log(n)}}}i&&(i._oAuthCred=null,this.oAuthInfo=null)}_init(){const e=this._load(),i=this.oAuthInfo;if(i?.authNamespace&&i.portalUrl){let r=e[i.authNamespace];r&&(r=r[i.portalUrl],r&&(this.appId=r.appId,this.codeVerifier=r.codeVerifier,this.expires=r.expires,this.refreshToken=r.refreshToken,this.ssl=r.ssl,this.stateUID=r.stateUID,this.token=r.token,this.userId=r.userId))}}_load(){let e={};if(this.storage){const i=this.storage.getItem(u6);if(i)try{e=JSON.parse(i)}catch(r){console.warn(r)}}return e}};t9.prototype.declaredClass="esri.identity.OAuthCredential";let ql=class extends _e{constructor(e){super(e),this.adminTokenServiceUrl=null,this.currentVersion=null,this.hasPortal=null,this.hasServer=null,this.owningSystemUrl=null,this.owningTenant=null,this.server=null,this.shortLivedTokenValidity=null,this.tokenServiceUrl=null,this.webTierAuth=null}};d([m({json:{write:!0}})],ql.prototype,"adminTokenServiceUrl",void 0),d([m({json:{write:!0}})],ql.prototype,"currentVersion",void 0),d([m({json:{write:!0}})],ql.prototype,"hasPortal",void 0),d([m({json:{write:!0}})],ql.prototype,"hasServer",void 0),d([m({json:{write:!0}})],ql.prototype,"owningSystemUrl",void 0),d([m({json:{write:!0}})],ql.prototype,"owningTenant",void 0),d([m({json:{write:!0}})],ql.prototype,"server",void 0),d([m({json:{write:!0}})],ql.prototype,"shortLivedTokenValidity",void 0),d([m({json:{write:!0}})],ql.prototype,"tokenServiceUrl",void 0),d([m({json:{write:!0}})],ql.prototype,"webTierAuth",void 0),ql=d([U("esri.identity.ServerInfo")],ql);const d6=ql,g3={},Uge=t=>{const e=new Lo(t.owningSystemUrl).host,i=new Lo(t.server).host,r=/.+\.arcgis\.com$/i;return r.test(e)&&r.test(i)},i9=(t,e)=>!!(Uge(t)&&e&&e.some(i=>i.test(t.server)));let y3=null,v3=null;try{y3=window.localStorage,v3=window.sessionStorage}catch{}let Hge=class extends fY{constructor(){super(),this._portalConfig=globalThis.esriGeowConfig,this.serverInfos=[],this.oAuthInfos=[],this.credentials=[],this._soReqs=[],this._xoReqs=[],this._portals=[],this._defaultOAuthInfo=null,this._defaultTokenValidity=60,this.dialog=null,this.tokenValidity=null,this.normalizeWebTierAuth=!1,this._appOrigin=window.origin!=="null"?window.origin:window.location.origin,this._appUrlObj=rn(window.location.href),this._busy=null,this._rejectOnPersistedPageShow=!1,this._oAuthLocationParams=null,this._gwTokenUrl="/sharing/rest/generateToken",this._agsRest="/rest/services",this._agsPortal=/\/sharing(\/|$)/i,this._agsAdmin=/(https?:\/\/[^/]+\/[^/]+)\/admin\/?(\/.*)?$/i,this._adminSvcs=/\/rest\/admin\/services(\/|$)/i,this._gwDomains=[{regex:/^https?:\/\/www\.arcgis\.com/i,customBaseUrl:"maps.arcgis.com",tokenServiceUrl:"https://www.arcgis.com/sharing/rest/generateToken"},{regex:/^https?:\/\/(?:dev|[a-z\d-]+\.mapsdev)\.arcgis\.com/i,customBaseUrl:"mapsdev.arcgis.com",tokenServiceUrl:"https://dev.arcgis.com/sharing/rest/generateToken"},{regex:/^https?:\/\/(?:devext|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,customBaseUrl:"mapsdevext.arcgis.com",tokenServiceUrl:"https://devext.arcgis.com/sharing/rest/generateToken"},{regex:/^https?:\/\/(?:qaext|[a-z\d-]+\.mapsqa)\.arcgis\.com/i,customBaseUrl:"mapsqa.arcgis.com",tokenServiceUrl:"https://qaext.arcgis.com/sharing/rest/generateToken"},{regex:/^https?:\/\/[a-z\d-]+\.maps\.arcgis\.com/i,customBaseUrl:"maps.arcgis.com",tokenServiceUrl:"https://www.arcgis.com/sharing/rest/generateToken"}],this._legacyFed=[],this._regexSDirUrl=/http.+\/rest\/services\/?/gi,this._regexServerType=/(\/(FeatureServer|GPServer|GeoDataServer|GeocodeServer|GeoenrichmentServer|GeometryServer|GlobeServer|ImageServer|KnowledgeGraphServer|MapServer|MissionServer|MobileServer|NAServer|NetworkDiagramServer|OGCFeatureServer|ParcelFabricServer|RelationalCatalogServer|SceneServer|StreamServer|UtilityNetworkServer|ValidationServer|VectorTileServer|VersionManagementServer|VideoServer)).*/gi,this._gwUser=/http.+\/users\/([^/]+).*/i,this._gwItem=/http.+\/items\/([^/]+).*/i,this._gwGroup=/http.+\/groups\/([^/]+).*/i,this._rePortalTokenSvc=/\/sharing(\/rest)?\/generatetoken/i,this._createDefaultOAuthInfo=!0,this._hasTestedIfAppIsOnPortal=!1,this._getPlatformSelfError=null,this._getOAuthLocationParams(),window.addEventListener("pageshow",e=>{this._pageShowHandler(e)})}registerServers(e){const i=this.serverInfos;i?(e=e.filter(r=>!this.findServerInfo(r.server)),this.serverInfos=i.concat(e)):this.serverInfos=e,e.forEach(r=>{r.owningSystemUrl&&this._portals.push(r.owningSystemUrl),r.hasPortal&&this._portals.push(r.server)})}registerOAuthInfos(e){const i=this.oAuthInfos;if(i){for(const r of e){const n=this.findOAuthInfo(r.portalUrl);n&&i.splice(i.indexOf(n),1)}this.oAuthInfos=i.concat(e)}else this.oAuthInfos=e}registerToken(e){e={...e};const i=this._sanitizeUrl(e.server),r=this._isServerRsrc(i);let n,s=this.findServerInfo(i),a=!0;s||(s=new d6,s.server=this._getServerInstanceRoot(i),r?s.hasServer=!0:(s.tokenServiceUrl=this._getTokenSvcUrl(i),s.hasPortal=!0),this.registerServers([s])),n=this._findCredential(i),n?(delete e.server,Object.assign(n,e),a=!1):(n=new Kr({userId:e.userId,server:s.server??void 0,token:e.token,expires:e.expires,ssl:e.ssl,scope:r?"server":"portal"}),n.resources=[i],this.credentials.push(n)),n.emitTokenChange(!1),a||n.refreshServerTokens()}toJSON(){return jW({serverInfos:this.serverInfos.map(e=>e.toJSON()),oAuthInfos:this.oAuthInfos.map(e=>e.toJSON()),credentials:this.credentials.map(e=>e.toJSON())})}initialize(e){if(!e)return;typeof e=="string"&&(e=JSON.parse(e));const i=e.serverInfos,r=e.oAuthInfos,n=e.credentials;if(i){const s=[];i.forEach(a=>{a.server&&a.tokenServiceUrl&&s.push(a.declaredClass?a:new d6(a))}),s.length&&this.registerServers(s)}if(r){const s=[];r.forEach(a=>{a.appId&&s.push(a.declaredClass?a:new v8(a))}),s.length&&this.registerOAuthInfos(s)}n&&n.forEach(s=>{s.server&&s.token&&s.expires&&s.expires>Date.now()&&((s=s.declaredClass?s:new Kr(s)).emitTokenChange(),this.credentials.push(s))})}findServerInfo(e){let i;e=this._sanitizeUrl(e);for(const r of this.serverInfos)if(this._hasSameServerInstance(r.server,e)){i=r;break}return i}findOAuthInfo(e){let i;e=this._sanitizeUrl(e);for(const r of this.oAuthInfos)if(this._hasSameServerInstance(r.portalUrl,e)){i=r;break}return i}findCredential(e,i){if(!e)return;let r;e=this._sanitizeUrl(e);const n=this._isServerRsrc(e)?"server":"portal";if(i){for(const s of this.credentials)if(this._hasSameServerInstance(s.server,e)&&i===s.userId&&s.scope===n){r=s;break}}else for(const s of this.credentials)if(this._hasSameServerInstance(s.server,e)&&this._getIdenticalSvcIdx(e,s)!==-1&&s.scope===n){r=s;break}return r}getCredential(e,i){let r,n=!1,s=!0;i&&(n=!(!i.token&&!i.credential),r=i.error,s=i.prompt!==!1),i={...i},e=this._sanitizeUrl(e);const a=new AbortController,o=Qs();if(i.signal&&Ma(i.signal,()=>{a.abort()}),Ma(a,()=>{o.reject(new ee("identity-manager:user-aborted","ABORTED"))}),Pa(a))return o.promise;i.signal=a.signal;const l=this._isAdminResource(e),c=n?this.findCredential(e):null;let h;if(c&&r?.details?.httpStatus===498)c.destroy();else if(c)return h=new ee("identity-manager:not-authorized","You are currently signed in as: '"+c.userId+"'. You do not have access to this resource: "+e,{error:r}),o.reject(h),o.promise;const f=this._findCredential(e,i);if(f)return o.resolve(f),o.promise;let g=this.findServerInfo(e);if(g)!g.hasPortal&&g.server&&g.owningSystemUrl&&this._hasSameServerInstance(g.server,g.owningSystemUrl)&&(g.hasPortal=!0),!g.hasServer&&this._isServerRsrc(e)&&(g._restInfoPms=this._getTokenSvcUrl(e),g.hasServer=!0);else{const y=this._getTokenSvcUrl(e);if(!y)return h=new ee("identity-manager:unknown-resource","Unknown resource - could not find token service endpoint."),o.reject(h),o.promise;g=new d6,g.server=this._getServerInstanceRoot(e),typeof y=="string"?(g.tokenServiceUrl=y,g.hasPortal=!0):(g._restInfoPms=y,g.hasServer=!0),this.registerServers([g])}return g.hasPortal&&g._selfReq===void 0&&(s||Js(g.tokenServiceUrl,this._appOrigin)||this._gwDomains.some(y=>y.tokenServiceUrl===g.tokenServiceUrl))&&(g._selfReq={owningTenant:i?.owningTenant,selfDfd:this._getPortalSelf(g.tokenServiceUrl.replace(this._rePortalTokenSvc,"/sharing/rest/portals/self"),e)}),this._enqueue(e,g,i,o,l)}getResourceName(e){return this._isRESTService(e)?e.replace(this._regexSDirUrl,"").replace(this._regexServerType,"")||"":this._gwUser.test(e)&&e.replace(this._gwUser,"$1")||this._gwItem.test(e)&&e.replace(this._gwItem,"$1")||this._gwGroup.test(e)&&e.replace(this._gwGroup,"$1")||""}generateToken(e,i,r){const n=this._rePortalTokenSvc.test(e.tokenServiceUrl),s=new Lo(this._appOrigin),a=e.shortLivedTokenValidity;let o,l,c,h,f,g,y,b;i&&(b=this.tokenValidity||a||this._defaultTokenValidity,b>a&&a>0&&(b=a)),r&&(o=r.isAdmin,l=r.serverUrl,c=r.token,g=r.signal,y=r.ssl,e.customParameters=r.customParameters),o?h=e.adminTokenServiceUrl:(h=e.tokenServiceUrl,f=new Lo(h.toLowerCase()),e.webTierAuth&&r?.serverUrl&&!y&&s.scheme==="http"&&(Js(s.uri,h,!0)||f.scheme==="https"&&s.host===f.host&&s.port==="7080"&&f.port==="7443")&&(h=h.replace(/^https:/i,"http:").replace(/:7443/i,":7080")));const _={query:{request:"getToken",username:i?.username,password:i?.password,serverUrl:l,token:c,expiration:b,referer:o||n?this._appOrigin:null,client:o?"referer":null,f:"json",...e.customParameters},method:"post",authMode:"anonymous",useProxy:this._useProxy(e,r),signal:g};return n||(_.withCredentials=!1),Nt(h,_).then(S=>{const $=S.data;if(!$?.token)return new ee("identity-manager:authentication-failed","Unable to generate token");const C=e.server;return g3[C]||(g3[C]={}),i&&(g3[C][i.username]=i.password),$.validity=b,$})}isBusy(){return!!this._busy}async checkSignInStatus(e){return(await this.checkAppAccess(e,"")).credential}checkAppAccess(e,i,r){let n=!1;return this.getCredential(e,{prompt:!1}).then(s=>{let a;const o={f:"json"};if(s.scope==="portal")if(i&&(this._doPortalSignIn(e)||r?.force))a=s.server+"/sharing/rest/oauth2/validateAppAccess",o.client_id=i;else{if(!s.token)return{credential:s};a=s.server+"/sharing/rest"}else{if(!s.token)return{credential:s};a=s.server+"/rest/services"}return s.token&&(o.token=s.token),Nt(a,{query:o,authMode:"anonymous"}).then(l=>{if(l.data.valid===!1)throw new ee("identity-manager:not-authorized",`You are currently signed in as: '${s.userId}'.`,l.data);return n=!!l.data.viewOnlyUserTypeApp,{credential:s}}).catch(l=>{if(l.name==="identity-manager:not-authorized")throw l;const c=l.details?.httpStatus;if(c===498)throw s.destroy(),new ee("identity-manager:not-authenticated","User is not signed in.");if(c===400)throw new ee("identity-manager:invalid-request","Bad request");return{credential:s}})}).then(s=>({credential:s.credential,viewOnly:n}))}setOAuthResponseHash(e){e&&(e.startsWith("#")&&(e=e.slice(1)),this._processOAuthPopupParams(R0(e)))}setOAuthRedirectionHandler(e){this._oAuthRedirectFunc=e}setProtocolErrorHandler(e){this._protocolFunc=e}signIn(e,i,r={}){const n=Qs(),s=()=>{l?.remove(),c?.remove(),this.dialog?.destroy(),this.dialog=l=c=null},a=()=>{s(),this._oAuthDfd=null,n.reject(new ee("identity-manager:user-aborted","ABORTED"))};r.signal&&Ma(r.signal,()=>{a()});const o=new jre({open:!0,resource:this.getResourceName(e),server:i.server});this.dialog=o,this.emit("dialog-create");let l=o.on("cancel",a),c=o.on("submit",h=>{this.generateToken(i,h,{isAdmin:r.isAdmin,signal:r.signal}).then(f=>{s();const g=new Kr({userId:h.username,server:i.server??void 0,token:f.token,expires:f.expires!=null?Number(f.expires):null,ssl:!!f.ssl,isAdmin:r.isAdmin,validity:f.validity});n.resolve(g)}).catch(f=>{o.error=f,o.signingIn=!1})});return n.promise}oAuthSignIn(e,i,r,n){this._oAuthDfd=Qs();const s=this._oAuthDfd;let a;n?.signal&&Ma(n.signal,()=>{const g=this._oAuthDfd&&this._oAuthDfd.oAuthWin_;g&&!g.closed?g.close():this.dialog&&h()}),s.resUrl_=e,s.sinfo_=i,s.oinfo_=r;const o=r._oAuthCred;if(o.storage&&(r.flowType==="authorization-code"||r.flowType==="auto"&&i.currentVersion>=8.4)){let g=crypto.getRandomValues(new Uint8Array(32));a=GV(g),o.codeVerifier=a,g=crypto.getRandomValues(new Uint8Array(32)),o.stateUID=GV(g),o.save()||(o.codeVerifier=a=null)}else o.codeVerifier=null;let l,c;this._getCodeChallenge(a).then(g=>{const y=!n||n.oAuthPopupConfirmation!==!1;if(!r.popup||!y)return void this._doOAuthSignIn(e,i,r,g);const b=new jre({oAuthPrompt:!0,server:i.server,open:!0});this.dialog=b,this.emit("dialog-create"),l=b.on("cancel",h),c=b.on("submit",()=>{f(),this._doOAuthSignIn(e,i,r,g)})});const h=()=>{f(),this._oAuthDfd=null,s.reject(new ee("identity-manager:user-aborted","ABORTED"))},f=()=>{l?.remove(),c?.remove(),this.dialog?.destroy(),this.dialog=null};return s.promise}destroyCredentials(){this.credentials&&this.credentials.slice().forEach(e=>{e.destroy()}),this.emit("credentials-destroy")}enablePostMessageAuth(e="https://www.arcgis.com/sharing/rest"){this._postMessageAuthHandle&&this._postMessageAuthHandle.remove(),this._postMessageAuthHandle=zm(window,"message",i=>{if((i.origin===this._appOrigin||i.origin.endsWith(".arcgis.com"))&&i.data?.type==="arcgis:auth:requestCredential"){const r=i.source;this.getCredential(e).then(n=>{r.postMessage({type:"arcgis:auth:credential",credential:{expires:n.expires,server:n.server,ssl:n.ssl,token:n.token,userId:n.userId}},i.origin)}).catch(n=>{r.postMessage({type:"arcgis:auth:error",error:{name:n.name,message:n.message}},i.origin)})}})}disablePostMessageAuth(){this._postMessageAuthHandle&&(this._postMessageAuthHandle.remove(),this._postMessageAuthHandle=null)}_getOAuthLocationParams(){let e=window.location.hash;if(e){e.startsWith("#")&&(e=e.slice(1));const r=R0(e);let n=!1;if(r.access_token&&r.expires_in&&r.state&&r.hasOwnProperty("username"))try{r.state=JSON.parse(r.state),r.state.portalUrl&&(this._oAuthLocationParams=r,n=!0)}catch{}else if(r.error&&r.error_description&&(console.log("IdentityManager OAuth Error: ",r.error," - ",r.error_description),r.error==="access_denied"&&(n=!0,r.state)))try{r.state=JSON.parse(r.state)}catch{}n&&(window.location.hash=r.state?.hash||"")}let i=window.location.search;if(i){i.startsWith("?")&&(i=i.slice(1));const r=R0(i);let n=!1;if(r.code&&r.state)try{r.state=JSON.parse(r.state),r.state.portalUrl&&r.state.uid&&(this._oAuthLocationParams=r,n=!0)}catch{}else if(r.error&&r.error_description&&(console.log("IdentityManager OAuth Error: ",r.error," - ",r.error_description),r.error==="access_denied"&&(n=!0,r.state)))try{r.state=JSON.parse(r.state)}catch{}if(n){const s={...r};["code","error","error_description","message_code","persist","state"].forEach(l=>{delete s[l]});const a=Vw(s),o=window.location.pathname+(a?`?${a}`:"")+(r.state?.hash||"");window.history.replaceState(window.history.state,"",o)}}}_getOAuthToken(e,i,r,n,s){return e=e.replace(/^http:/i,"https:"),Nt(`${e}/sharing/rest/oauth2/token`,{authMode:"anonymous",method:"post",query:n&&s?{grant_type:"authorization_code",code:i,redirect_uri:n,client_id:r,code_verifier:s}:{grant_type:"refresh_token",refresh_token:i,client_id:r}}).then(a=>a.data)}async _getCodeChallenge(e){if(e&&globalThis.isSecureContext){const i=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",i);return GV(new Uint8Array(r))}return null}_pageShowHandler(e){if(e.persisted&&this.isBusy()&&this._rejectOnPersistedPageShow){const i=new ee("identity-manager:user-aborted","ABORTED");this._errbackFunc(i)}}_findCredential(e,i){let r,n,s,a,o=-1;const l=i?.token,c=i?.resource,h=this._isServerRsrc(e)?"server":"portal",f=this.credentials.filter(g=>this._hasSameServerInstance(g.server,e)&&g.scope===h);if(e=c||e,f.length)if(f.length===1){if(r=f[0],s=this.findServerInfo(r.server),n=s?.owningSystemUrl,a=n?this.findCredential(n,r.userId):void 0,o=this._getIdenticalSvcIdx(e,r),!l)return o===-1&&r.resources.push(e),this._addResource(e,a),r;o!==-1&&(r.resources.splice(o,1),this._removeResource(e,a))}else{let g,y;if(f.some(b=>(y=this._getIdenticalSvcIdx(e,b),y!==-1&&(g=b,s=this.findServerInfo(g.server),n=s?.owningSystemUrl,a=n?this.findCredential(n,g.userId):void 0,o=y,!0))),l)g&&(g.resources.splice(o,1),this._removeResource(e,a));else if(g)return this._addResource(e,a),g}}_findOAuthInfo(e){let i=this.findOAuthInfo(e);if(!i){for(const r of this.oAuthInfos)if(this._isIdProvider(r.portalUrl,e)){i=r;break}}return i}_addResource(e,i){i&&this._getIdenticalSvcIdx(e,i)===-1&&i.resources.push(e)}_removeResource(e,i){let r=-1;i&&(r=this._getIdenticalSvcIdx(e,i),r>-1&&i.resources.splice(r,1))}_useProxy(e,i){return i?.isAdmin&&!Js(e.adminTokenServiceUrl,this._appOrigin)||!this._isPortalDomain(e.tokenServiceUrl)&&String(e.currentVersion)==="10.1"&&!Js(e.tokenServiceUrl,this._appOrigin)}_getOrigin(e){const i=new Lo(e);return i.scheme+"://"+i.host+(i.port!=null?":"+i.port:"")}_getServerInstanceRoot(e){const i=e.toLowerCase();let r=i.indexOf(this._agsRest);return r===-1&&this._isAdminResource(e)&&(r=this._agsAdmin.test(e)?e.replace(this._agsAdmin,"$1").length:e.search(this._adminSvcs)),r!==-1||eY(i)||(r=i.indexOf("/sharing")),r===-1&&i.endsWith("/")&&(r=i.length-1),r>-1?e.slice(0,r):e}_hasSameServerInstance(e,i){return e.endsWith("/")&&(e=e.slice(0,-1)),e=e.toLowerCase(),i=this._getServerInstanceRoot(i).toLowerCase(),e=vR(e),i=vR(i),(e=e.slice(Math.max(0,e.indexOf(":"))))===(i=i.slice(Math.max(0,i.indexOf(":"))))}_sanitizeUrl(e){const i=(yi.request.proxyUrl||"").toLowerCase(),r=i?e.toLowerCase().indexOf(i+"?"):-1;return r!==-1&&(e=e.slice(r+i.length+1)),e=_c(e),rn(e).path}_isRESTService(e){return e.includes(this._agsRest)}_isAdminResource(e){return this._agsAdmin.test(e)||this._adminSvcs.test(e)}_isServerRsrc(e){return this._isRESTService(e)||this._isAdminResource(e)}_isIdenticalService(e,i){let r=!1;if(this._isRESTService(e)&&this._isRESTService(i)){const n=this._getSuffix(e).toLowerCase(),s=this._getSuffix(i).toLowerCase();if(r=n===s,!r){const a=/(.*)\/(MapServer|FeatureServer|UtilityNetworkServer).*/gi;r=n.replaceAll(a,"$1")===s.replaceAll(a,"$1")}}else this._isAdminResource(e)&&this._isAdminResource(i)?r=!0:this._isServerRsrc(e)||this._isServerRsrc(i)||!this._isPortalDomain(e)||(r=!0);return r}_isPortalDomain(e){const i=new Lo(e.toLowerCase()),r=this._portalConfig;let n=this._gwDomains.some(s=>s.regex.test(i.uri));return!n&&r&&(n=this._hasSameServerInstance(this._getServerInstanceRoot(r.restBaseUrl),i.uri)),n||yi.portalUrl&&(n=Js(i,yi.portalUrl,!0)),n||(n=this._portals.some(s=>this._hasSameServerInstance(s,i.uri))),n=n||this._agsPortal.test(i.path),n}_isIdProvider(e,i){let r=-1,n=-1;this._gwDomains.forEach((a,o)=>{r===-1&&a.regex.test(e)&&(r=o),n===-1&&a.regex.test(i)&&(n=o)});let s=!1;if(r>-1&&n>-1&&(r===0||r===4?n!==0&&n!==4||(s=!0):r===1?n!==1&&n!==2||(s=!0):r===2?n===2&&(s=!0):r===3&&n===3&&(s=!0)),!s){const a=this.findServerInfo(i),o=a?.owningSystemUrl;o&&Uge(a)&&this._isPortalDomain(o)&&this._isIdProvider(e,o)&&(s=!0)}return s}_getIdenticalSvcIdx(e,i){let r=-1;for(let n=0;n<i.resources.length;n++){const s=i.resources[n];if(this._isIdenticalService(e,s)){r=n;break}}return r}_getSuffix(e){return e.replace(this._regexSDirUrl,"").replace(this._regexServerType,"$1")}_getTokenSvcUrl(e){let i,r,n;if(this._isRESTService(e)||this._isAdminResource(e)){const s=this._getServerInstanceRoot(e);return i=s+"/admin/generateToken",r=Nt(e=s+"/rest/info",{query:{f:"json"}}).then(a=>a.data),{adminUrl:i,promise:r}}if(this._isPortalDomain(e)){let s="";if(this._gwDomains.some(a=>(a.regex.test(e)&&(s=a.tokenServiceUrl),!!s)),s||this._portals.some(a=>(this._hasSameServerInstance(a,e)&&(s=a+this._gwTokenUrl),!!s)),s||(n=e.toLowerCase().indexOf("/sharing"),n!==-1&&(s=e.slice(0,n)+this._gwTokenUrl)),s||(s=this._getOrigin(e)+this._gwTokenUrl),s){const a=new Lo(e).port;/^http:\/\//i.test(e)&&a==="7080"&&(s=s.replace(/:7080/i,":7443")),s=s.replace(/http:/i,"https:")}return s}}_processOAuthResponseParams(e,i,r){const n=i._oAuthCred;if(e.code){const a=n.codeVerifier;return n.codeVerifier=null,n.stateUID=null,n.save(),this._getOAuthToken(r.server,e.code,i.appId,this._getRedirectURI(i,!0),a).then(o=>{const l=new Kr({userId:o.username,server:r.server??void 0,token:o.access_token,expires:Date.now()+1e3*o.expires_in,ssl:o.ssl,oAuthState:e.state,_oAuthCred:n});return i.userId=l.userId,n.storage=o.persist?y3:v3,n.refreshToken=o.refresh_token,n.token=null,n.expires=o.refresh_token_expires_in?Date.now()+1e3*o.refresh_token_expires_in:null,n.userId=l.userId,n.ssl=l.ssl,n.save(),l})}const s=new Kr({userId:e.username,server:r.server??void 0,token:e.access_token,expires:Date.now()+1e3*Number(e.expires_in),ssl:e.ssl==="true",oAuthState:e.state,_oAuthCred:n});return i.userId=s.userId,n.storage=e.persist?y3:v3,n.refreshToken=null,n.token=s.token,n.expires=s.expires,n.userId=s.userId,n.ssl=s.ssl,n.save(),Promise.resolve(s)}_processOAuthPopupParams(e){const i=this._oAuthDfd;if(this._oAuthDfd=null,i)if(clearInterval(this._oAuthIntervalId),this._oAuthOnPopupHandle?.remove(),e.error){const r=e.error==="access_denied",n=new ee(r?"identity-manager:user-aborted":"identity-manager:authentication-failed",r?"ABORTED":"OAuth: "+e.error+" - "+e.error_description);i.reject(n)}else this._processOAuthResponseParams(e,i.oinfo_,i.sinfo_).then(r=>{i.resolve(r)}).catch(r=>{i.reject(r)})}_setOAuthResponseQueryString(e){e&&(e.startsWith("?")&&(e=e.slice(1)),this._processOAuthPopupParams(R0(e)))}async _exchangeToken(e,i,r){return(await Nt(`${e}/sharing/rest/oauth2/exchangeToken`,{authMode:"anonymous",method:"post",query:{f:"json",client_id:i,token:r}})).data.token}async _getPlatformSelf(e,i){if(this._getPlatformSelfError&&Date.now()-this._getPlatformSelfError[1]<1e3)throw this._getPlatformSelfError[0];e=e.replace(/^http:/i,"https:");try{const r=await Nt(`${e}/sharing/rest/oauth2/platformSelf`,{authMode:"anonymous",headers:{"X-Esri-Auth-Client-Id":i,"X-Esri-Auth-Redirect-Uri":window.location.href.replace(/#.*$/,"")},method:"post",query:{f:"json",expiration:30},withCredentials:!0});return this._getPlatformSelfError=null,r.data}catch(r){throw r.details?.messageCode==="OAUTH_0066"&&(this._getPlatformSelfError=[r,Date.now()]),r}}_getPortalSelf(e,i){let r;return this._gwDomains.some(n=>(n.regex.test(e)&&(r=n.customBaseUrl),!!r)),r?Promise.resolve({allSSL:!0,currentVersion:"8.4",customBaseUrl:r,portalMode:"multitenant",supportsOAuth:!0}):(this._appOrigin.startsWith("https:")?e=e.replace(/^http:/i,"https:").replace(/:7080/i,":7443"):/^http:/i.test(i)&&(e=e.replace(/^https:/i,"http:").replace(/:7443/i,":7080")),Nt(e,{query:{f:"json"},authMode:"anonymous",withCredentials:!0}).then(n=>n.data))}_doPortalSignIn(e){const i=this._portalConfig,r=window.location.href,n=this.findServerInfo(e);return!(!i&&!this._isPortalDomain(r)||!(n?n.hasPortal||n.owningSystemUrl&&this._isPortalDomain(n.owningSystemUrl):this._isPortalDomain(e))||!(this._isIdProvider(r,e)||i&&(this._hasSameServerInstance(this._getServerInstanceRoot(i.restBaseUrl),e)||this._isIdProvider(i.restBaseUrl,e))||Js(r,e,!0)))}_checkProtocol(e,i,r,n){let s=!0;const a=n?i.adminTokenServiceUrl:i.tokenServiceUrl;return a.trim().toLowerCase().startsWith("https:")&&!this._appOrigin.startsWith("https:")&&RM(a)&&(s=!!this._protocolFunc&&!!this._protocolFunc({resourceUrl:e,serverInfo:i}),!s)&&r(new ee("identity-manager:aborted","Aborted the Sign-In process to avoid sending password over insecure connection.")),s}_enqueue(e,i,r,n,s,a){return n||(n=Qs()),n.resUrl_=e,n.sinfo_=i,n.options_=r,n.admin_=s,n.refresh_=a,this._busy?this._hasSameServerInstance(this._getServerInstanceRoot(e),this._busy.resUrl_)?(this._oAuthDfd&&this._oAuthDfd.oAuthWin_&&this._oAuthDfd.oAuthWin_.focus(),this._soReqs.push(n)):this._xoReqs.push(n):this._doSignIn(n),n.promise}_doSignIn(e){this._busy=e,this._rejectOnPersistedPageShow=!1;const i=c=>{const h=e.options_?.resource,f=e.resUrl_,g=e.refresh_;let y=!1;this.credentials.includes(c)||(g&&this.credentials.includes(g)?(g.userId=c.userId,g.token=c.token,g.expires=c.expires,g.validity=c.validity,g.ssl=c.ssl,g.creationTime=c.creationTime,y=!0,c=g):this.credentials.push(c)),c.resources||(c.resources=[]),c.resources.includes(h||f)||c.resources.push(h||f),c.scope=this._isServerRsrc(f)?"server":"portal",c.emitTokenChange();const b=this._soReqs,_={};this._soReqs=[],b.forEach(S=>{if(!this._isIdenticalService(f,S.resUrl_)){const $=this._getSuffix(S.resUrl_);_[$]||(_[$]=!0,c.resources.push(S.resUrl_))}}),e.resolve(c),b.forEach(S=>{this._hasSameServerInstance(this._getServerInstanceRoot(f),S.resUrl_)?S.resolve(c):this._soReqs.push(S)}),this._busy=e.resUrl_=e.sinfo_=e.refresh_=null,y||this.emit("credential-create",{credential:c}),this._soReqs.length?this._doSignIn(this._soReqs.shift()):this._xoReqs.length&&this._doSignIn(this._xoReqs.shift())},r=c=>{e.reject(c),this._busy=e.resUrl_=e.sinfo_=e.refresh_=null,this._soReqs.length?this._doSignIn(this._soReqs.shift()):this._xoReqs.length&&this._doSignIn(this._xoReqs.shift())},n=(c,h,f,g)=>{const y=e.sinfo_,b=!e.options_||e.options_.prompt!==!1,_=y.hasPortal&&this._findOAuthInfo(e.resUrl_);let S,$;if(c)i(new Kr({userId:c,server:y.server??void 0,token:f??void 0,expires:g!=null?Number(g):null,ssl:!!h}));else if(window!==window.parent&&this._appUrlObj.query?.["arcgis-auth-origin"]&&this._appUrlObj.query?.["arcgis-auth-portal"]&&this._hasSameServerInstance(this._getServerInstanceRoot(this._appUrlObj.query["arcgis-auth-portal"]),e.resUrl_)){window.parent.postMessage({type:"arcgis:auth:requestCredential"},this._appUrlObj.query["arcgis-auth-origin"]);const C=zm(window,"message",I=>{I.source===window.parent&&I.data&&(I.data.type==="arcgis:auth:credential"?(C.remove(),I.data.credential.expires<Date.now()?r(new ee("identity-manager:credential-request-failed","Parent application's token has expired.")):i(new Kr(I.data.credential))):I.data.type==="arcgis:auth:error"&&(C.remove(),I.data.error.name==="tokenExpiredError"?r(new ee("identity-manager:credential-request-failed","Parent application's token has expired.")):r(ee.fromJSON(I.data.error))))});Ma(e.options_?.signal,()=>{C.remove()})}else if(_){let C=_._oAuthCred;if(!C){const I=new t9(_,y3),P=new t9(_,v3);I.isValid()&&P.isValid()?I.expires>P.expires?(C=I,P.destroy()):(C=P,I.destroy()):C=I.isValid()?I:P,_._oAuthCred=C}if(C.isValid()){S=new Kr({userId:C.userId??void 0,server:y.server??void 0,token:C.token??void 0,expires:C.expires,ssl:C.ssl??void 0,_oAuthCred:C});const I=_.appId!==C.appId&&this._doPortalSignIn(e.resUrl_);I||C.refreshToken?(e._pendingDfd=C.refreshToken?this._getOAuthToken(y.server,C.refreshToken,C.appId).then(P=>(S.expires=Date.now()+1e3*P.expires_in,S.token=P.access_token,S)):Promise.resolve(S),e._pendingDfd.then(P=>I?this._exchangeToken(P.server,_.appId,P.token).then(O=>(P.token=O,P)).catch(()=>P):P).then(P=>{i(P)}).catch(P=>{const O=P.details?.httpStatus;O>0&&O!==404?(C.destroy(),n()):r(P)})):i(S)}else if(this._oAuthLocationParams&&this._hasSameServerInstance(_.portalUrl,this._oAuthLocationParams.state.portalUrl)&&(this._oAuthLocationParams.access_token||this._oAuthLocationParams.code&&this._oAuthLocationParams.state.uid===C.stateUID&&C.codeVerifier)){const I=this._oAuthLocationParams;this._oAuthLocationParams=null,e._pendingDfd=this._processOAuthResponseParams(I,_,y).then(P=>{i(P)}).catch(r)}else{const I=()=>{b?e._pendingDfd=this.oAuthSignIn(e.resUrl_,y,_,e.options_).then(i,r):($=new ee("identity-manager:not-authenticated","User is not signed in."),r($))};this._doPortalSignIn(e.resUrl_)?e._pendingDfd=this._getPlatformSelf(y.server,_.appId).then(P=>{Js(P.portalUrl,this._appOrigin,!0)?(S=new Kr({userId:P.username,server:y.server??void 0,expires:Date.now()+1e3*P.expires_in,token:P.token}),i(S)):I()}).catch(I):I()}}else if(b){if(this._checkProtocol(e.resUrl_,y,r,e.admin_)){let C=e.options_;e.admin_&&(C=C||{},C.isAdmin=!0),e._pendingDfd=this.signIn(e.resUrl_,y,C).then(i,r)}}else $=new ee("identity-manager:not-authenticated","User is not signed in."),r($)},s=()=>{const c=e.sinfo_,h=c.owningSystemUrl,f=e.options_;let g,y,b,_;if(f&&(g=f.token,y=f.error,b=f.prompt),_=this._findCredential(h,{token:g,resource:e.resUrl_}),!_){for(const S of this.credentials)if(this._isIdProvider(h,S.server)){_=S;break}}if(_){const S=this.findCredential(e.resUrl_,_.userId);if(S)i(S);else if(i9(c,this._legacyFed)){const $=_.toJSON();$.server=c.server,$.resources=null,i(new Kr($))}else(e._pendingDfd=this.generateToken(this.findServerInfo(_.server),null,{serverUrl:e.resUrl_,token:_.token,signal:e.options_.signal,ssl:_.ssl})).then($=>{i(new Kr({userId:_?.userId,server:c.server??void 0,token:$.token,expires:$.expires!=null?Number($.expires):null,ssl:!!$.ssl,isAdmin:e.admin_,validity:$.validity}))},r)}else this._busy=null,g&&(e.options_.token=null),(e._pendingDfd=this.getCredential(h.replace(/\/?$/,"/sharing"),{resource:e.resUrl_,owningTenant:c.owningTenant,signal:e.options_.signal,token:g,error:y,prompt:b})).then(()=>{this._enqueue(e.resUrl_,e.sinfo_,e.options_,e,e.admin_)},S=>{e.resUrl_=e.sinfo_=e.refresh_=null,e.reject(S)})};this._errbackFunc=r;const a=e.sinfo_.owningSystemUrl,o=this._isServerRsrc(e.resUrl_),l=e.sinfo_._restInfoPms;l?l.promise.then(c=>{const h=e.sinfo_;if(h._restInfoPms){h.adminTokenServiceUrl=h._restInfoPms.adminUrl,h._restInfoPms=null,h.tokenServiceUrl=(Mm("authInfo.tokenServicesUrl",c)||Mm("authInfo.tokenServiceUrl",c)||Mm("tokenServiceUrl",c))??null,h.shortLivedTokenValidity=Mm("authInfo.shortLivedTokenValidity",c)??null,h.currentVersion=c.currentVersion,h.owningTenant=c.owningTenant;const f=h.owningSystemUrl=c.owningSystemUrl;f&&this._portals.push(f)}o&&h.owningSystemUrl?s():n()},()=>{e.sinfo_._restInfoPms=null;const c=new ee("identity-manager:server-identification-failed","Unknown resource - could not find token service endpoint.");r(c)}):o&&a?s():e.sinfo_._selfReq?e.sinfo_._selfReq.selfDfd.then(c=>{const h={};let f,g,y,b;return c&&(f=c.user?.username,h.username=f,h.allSSL=c.allSSL,g=c.supportsOAuth,b=parseFloat(c.currentVersion),c.portalMode==="multitenant"&&(y=c.customBaseUrl),e.sinfo_.currentVersion=b),e.sinfo_.webTierAuth=!!f,f&&this.normalizeWebTierAuth?this.generateToken(e.sinfo_,null,{ssl:h.allSSL}).catch(()=>null).then(_=>(h.portalToken=_?.token,h.tokenExpiration=_?.expires,h)):!f&&g&&b>=4.4&&!this._findOAuthInfo(e.resUrl_)?this._generateOAuthInfo({portalUrl:e.sinfo_.server,customBaseUrl:y,owningTenant:e.sinfo_._selfReq.owningTenant}).catch(()=>null).then(()=>h):h}).catch(()=>null).then(c=>{e.sinfo_._selfReq=null,c?n(c.username,c.allSSL,c.portalToken,c.tokenExpiration):n()}):n()}_generateOAuthInfo(e){let i,r=null,n=e.portalUrl;const s=e.customBaseUrl,a=e.owningTenant,o=!this._defaultOAuthInfo&&this._createDefaultOAuthInfo&&!this._hasTestedIfAppIsOnPortal;if(o){r=this._appUrlObj.path;const l=r.search(/\/(apps|home)\//);r=l>-1?r.slice(0,l):null}return o&&r?(this._hasTestedIfAppIsOnPortal=!0,i=Nt(r+"/sharing/rest",{query:{f:"json"}}).then(()=>{this._defaultOAuthInfo=new v8({appId:"arcgisonline",popupCallbackUrl:r+"/home/oauth-callback.html"})})):i=Promise.resolve(),i.then(()=>{if(this._defaultOAuthInfo)return n=n.replace(/^http:/i,"https:"),Nt(n+"/sharing/rest/oauth2/validateRedirectUri",{query:{accountId:a,client_id:this._defaultOAuthInfo.appId,redirect_uri:oo(this._defaultOAuthInfo.popupCallbackUrl),f:"json"}}).then(l=>{if(l.data.valid){const c=this._defaultOAuthInfo.clone();l.data.urlKey&&s?c.portalUrl="https://"+l.data.urlKey.toLowerCase()+"."+s:c.portalUrl=n,c.popup=window!==window.top||!(Js(n,this._appOrigin)||this._gwDomains.some(h=>h.regex.test(n)&&h.regex.test(this._appOrigin))),this.oAuthInfos.push(c)}})})}_doOAuthSignIn(e,i,r,n){const s=r._oAuthCred,a={portalUrl:r.portalUrl};!r.popup&&r.preserveUrlHash&&window.location.hash&&(a.hash=window.location.hash),s.stateUID&&(a.uid=s.stateUID);const o={client_id:r.appId,response_type:s.codeVerifier?"code":"token",state:JSON.stringify(a),expiration:r.expiration,locale:r.locale,redirect_uri:this._getRedirectURI(r,!!s.codeVerifier)};r.forceLogin&&(o.force_login=!0),r.forceUserId&&r.userId&&(o.prepopulatedusername=r.userId),!r.popup&&this._doPortalSignIn(e)&&(o.redirectToUserOrgUrl=!0),s.codeVerifier&&(o.code_challenge=n||s.codeVerifier,o.code_challenge_method=n?"S256":"plain");const l=r.portalUrl.replace(/^http:/i,"https:")+"/sharing/oauth2/authorize",c=l+"?"+Vw(o);if(r.popup){const h=window.open(c,"esriJSAPIOAuth",r.popupWindowFeatures);if(h)h.focus(),this._oAuthDfd.oAuthWin_=h,this._oAuthIntervalId=setInterval(()=>{if(h.closed){clearInterval(this._oAuthIntervalId),this._oAuthOnPopupHandle.remove();const f=this._oAuthDfd;if(f){const g=new ee("identity-manager:user-aborted","ABORTED");f.reject(g)}}},500),this._oAuthOnPopupHandle=zm(window,["arcgis:auth:hash","arcgis:auth:location:search"],f=>{f.type==="arcgis:auth:hash"?this.setOAuthResponseHash(f.detail):this._setOAuthResponseQueryString(f.detail)});else{const f=new ee("identity-manager:popup-blocked","ABORTED");this._oAuthDfd.reject(f)}}else this._rejectOnPersistedPageShow=!0,this._oAuthRedirectFunc?this._oAuthRedirectFunc({authorizeParams:o,authorizeUrl:l,resourceUrl:e,serverInfo:i,oAuthInfo:r}):window.location.href=c}_getRedirectURI(e,i){const r=window.location.href.replace(/#.*$/,"");if(e.popup)return oo(e.popupCallbackUrl);if(i){const n=rn(r);return n.query&&["code","error","error_description","message_code","persist","state"].forEach(s=>{delete n.query[s]}),uC(n.path,n.query)}return r}};Hge.prototype.declaredClass="esri.identity.IdentityManagerBase";let Kr=class extends Rv{constructor(e){super(e),this._oAuthCred=null,this.tokenRefreshBuffer=2,e?._oAuthCred&&(this._oAuthCred=e._oAuthCred)}initialize(){this.resources=this.resources||[],this.creationTime==null&&(this.creationTime=Date.now())}refreshToken(){const e=oi,i=e.findServerInfo(this.server),r=i?.owningSystemUrl,n=!!r&&this.scope==="server",s=n&&i9(i,e._legacyFed),a=i.webTierAuth,o=a&&e.normalizeWebTierAuth,l=g3[this.server],c=l?.[this.userId];let h,f=this.resources&&this.resources[0],g=n?e.findServerInfo(r):null,y={username:this.userId,password:c};if(a&&!o)return;n&&!g&&e.serverInfos.some(_=>(e._isIdProvider(r,_.server)&&(g=_),!!g));const b=g?e.findCredential(g.server,this.userId):null;if(!n||b){if(!s){if(n)h={serverUrl:f,token:b?.token,ssl:b?.ssl};else if(o)y=null,h={ssl:this.ssl};else{if(!c){let _;return f&&(f=e._sanitizeUrl(f),this._enqueued=1,_=e._enqueue(f,i,null,null,this.isAdmin,this),_.then(()=>{this._enqueued=0,this.refreshServerTokens()}).catch(()=>{this._enqueued=0})),_}this.isAdmin&&(h={isAdmin:!0})}return e.generateToken(n?g:i,n?null:y,h).then(_=>{this.token=_.token,this.expires=_.expires!=null?Number(_.expires):null,this.creationTime=Date.now(),this.validity=_.validity,this.emitTokenChange(),this.refreshServerTokens()}).catch(()=>{})}b?.refreshToken()}}refreshServerTokens(){if(this.scope==="portal"){const e=oi;e.credentials.forEach(i=>{const r=e.findServerInfo(i.server),n=r?.owningSystemUrl;i!==this&&i.userId===this.userId&&n&&i.scope==="server"&&(e._hasSameServerInstance(this.server,n)||e._isIdProvider(n,this.server))&&(i9(r,e._legacyFed)?(i.token=this.token,i.expires=this.expires,i.creationTime=this.creationTime,i.validity=this.validity,i.emitTokenChange()):i.refreshToken())})}}emitTokenChange(e){clearTimeout(this._refreshTimer);const i=oi,r=this.server?i.findServerInfo(this.server):null,n=r?.owningSystemUrl,s=n?i.findServerInfo(n):null;e===!1||n&&this.scope!=="portal"&&(!s?.webTierAuth||i.normalizeWebTierAuth)||this.expires==null&&this.validity==null||this._startRefreshTimer(),this.emit("token-change")}destroy(){this.userId=this.server=this.token=this.expires=this.validity=this.resources=this.creationTime=null,this._oAuthCred&&(this._oAuthCred.destroy(),this._oAuthCred=null);const e=oi,i=e.credentials.indexOf(this);i>-1&&e.credentials.splice(i,1),this.emitTokenChange(),this.emit("destroy")}toJSON(){const e=jW({userId:this.userId,server:this.server,token:this.token,expires:this.expires,validity:this.validity,ssl:this.ssl,isAdmin:this.isAdmin,creationTime:this.creationTime,scope:this.scope}),i=this.resources;return i&&i.length>0&&(e.resources=i.slice()),e}_startRefreshTimer(){clearTimeout(this._refreshTimer);const e=6e4*this.tokenRefreshBuffer,i=2**31-1;let r=(this.validity?this.creationTime+6e4*this.validity:this.expires)-Date.now();r<0?r=0:r>i&&(r=i),this._refreshTimer=setTimeout(this.refreshToken.bind(this),r>e?r-e:r)}};d([m()],Kr.prototype,"creationTime",void 0),d([m()],Kr.prototype,"expires",void 0),d([m()],Kr.prototype,"isAdmin",void 0),d([m()],Kr.prototype,"oAuthState",void 0),d([m()],Kr.prototype,"resources",void 0),d([m()],Kr.prototype,"scope",void 0),d([m()],Kr.prototype,"server",void 0),d([m()],Kr.prototype,"ssl",void 0),d([m()],Kr.prototype,"token",void 0),d([m()],Kr.prototype,"tokenRefreshBuffer",void 0),d([m()],Kr.prototype,"userId",void 0),d([m()],Kr.prototype,"validity",void 0),Kr=d([U("esri.identity.Credential")],Kr);let Gge=class extends Hge{};Gge.prototype.declaredClass="esri.identity.IdentityManager";const yC=new Gge;NPe(yC);const qge=Object.freeze(Object.defineProperty({__proto__:null,default:yC},Symbol.toStringTag,{value:"Module"})),r5e="not-loaded",n5e="loading",s5e="failed",Vre="loaded",qF=t=>{const e=t;let i=class extends e{constructor(...r){super(...r),this._loadController=null,this.loadError=null,this.loadStatus="not-loaded",this._set("loadWarnings",[]),this.addResolvingPromise(new Promise(n=>{const s=this.load.bind(this);this.load=a=>{const o=new Promise((l,c)=>{const h=HW(a,c);this.destroyed&&c(new ee("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this})),this.when(l,c).finally(()=>{h&&h.remove()})});if(this.loadStatus===r5e){this._set("loadStatus",n5e);const l=this._loadController=new AbortController;s({signal:l.signal})}return n(),o}})),this.when(()=>{this._set("loadStatus",Vre),this._loadController=null},n=>{this.destroyed||(this._set("loadStatus",s5e),this._set("loadError",n),this._loadController=null)})}destroy(){this._loadController&&(this._loadController=Nw(this._loadController),this._promiseProps.abort()),this._set("loadError",null),this._set("loadWarnings",[])}get loaded(){return this.loadStatus===Vre}get loadWarnings(){return this._get("loadWarnings")}load(r){return null}cancelLoad(){return this.isFulfilled()||(this._set("loadError",new ee("load:cancelled","Cancelled")),this._loadController?.abort(),this._promiseProps.abort()),this}};return d([m({readOnly:!0})],i.prototype,"loaded",null),d([m({readOnly:!0})],i.prototype,"loadError",void 0),d([m({clonable:!1})],i.prototype,"loadStatus",void 0),d([m({type:[kc],readOnly:!0})],i.prototype,"loadWarnings",null),i=d([U("esri.core.Loadable")],i),i},Fv=qF(IY);function RR(t){return!(!t||!t.load)}function Ve(t,e,i){let r,n;return e===void 0||Array.isArray(e)?(n=t,i=e,r=[void 0]):(n=e,r=Array.isArray(t)?t:[t]),(s,a)=>{const o=s.constructor.prototype;r.forEach(l=>{const c=XW(s,l,n);c.read&&typeof c.read=="object"||(c.read={}),c.read.reader=o[a],i&&(c.read.source=(c.read.source||[]).concat(i))})}}let XY=class{constructor(e,i,r,n,s,a){this.semiMajorAxis=e,this.flattening=i,this.outerAtmosphereRimWidth=r,this.atmosphereHeight=n,this.scaleHeight=s;const o=1-this.flattening;this.semiMinorAxis=this.semiMajorAxis*o,this.halfSemiMajorAxis=this.semiMajorAxis/2,this.halfCircumference=Math.PI*this.semiMajorAxis,this.metersPerDegree=this.halfCircumference/180,this.inverseFlattening=1/(1-this.flattening)-1,this.eccentricitySquared=a||2*this.flattening-this.flattening*this.flattening,this.meanRadiusSemiAxes=(2*this.semiMajorAxis+this.semiMinorAxis)/3}get radius(){return this.semiMajorAxis}};const hn=new XY(6378137,1/298.257223563,3e5,1e5,.085,.006694379990137799),Sp=new XY(3396190,1/169.8944472236118,23e4,6e4,.111),Tv=new XY(1737400,0,0,0,0);let h6,ge=null;function Wge(){return!!ge}function a5e(){return!!ve("esri-wasm")}function o5e(){return h6||(h6=fe(async()=>{const{default:t}=await import("./pe-wasm-B87Q3u4k.js");return{default:t}},[]).then(({default:t})=>t({locateFile:e=>Ur(`esri/geometry/support/${e}`)})).then(t=>{Qge(t)}),h6)}const b3={geogToProj(t,e,i){ge.ensureCache.prepare();const r=Ww(i),n=i===r,s=ge.ensureFloat64(r),a=ge._pe_geog_to_proj(ge.getPointer(t),e,s);return a&&kv(i,e,s,n),a},projGeog(t,e,i,r){switch(r){case $n.PE_TRANSFORM_P_TO_G:return b3.projToGeog(t,e,i);case $n.PE_TRANSFORM_G_TO_P:return b3.geogToProj(t,e,i)}return 0},projToGeog:(t,e,i)=>b3.projToGeogCenter(t,e,i,0),projToGeogCenter(t,e,i,r){ge.ensureCache.prepare();const n=Ww(i),s=i===n,a=ge.ensureFloat64(n),o=ge._pe_proj_to_geog_center(ge.getPointer(t),e,a,r);return o&&kv(i,e,a,s),o}};let $n=class ji{static init(){ji.PE_BUFFER_MAX=ge.PeDefs.prototype.PE_BUFFER_MAX,ji.PE_NAME_MAX=ge.PeDefs.prototype.PE_NAME_MAX,ji.PE_MGRS_MAX=ge.PeDefs.prototype.PE_MGRS_MAX,ji.PE_USNG_MAX=ge.PeDefs.prototype.PE_USNG_MAX,ji.PE_DD_MAX=ge.PeDefs.prototype.PE_DD_MAX,ji.PE_DDM_MAX=ge.PeDefs.prototype.PE_DDM_MAX,ji.PE_DMS_MAX=ge.PeDefs.prototype.PE_DMS_MAX,ji.PE_UTM_MAX=ge.PeDefs.prototype.PE_UTM_MAX,ji.PE_PARM_MAX=ge.PeDefs.prototype.PE_PARM_MAX,ji.PE_TYPE_NONE=ge.PeDefs.prototype.PE_TYPE_NONE,ji.PE_TYPE_GEOGCS=ge.PeDefs.prototype.PE_TYPE_GEOGCS,ji.PE_TYPE_PROJCS=ge.PeDefs.prototype.PE_TYPE_PROJCS,ji.PE_TYPE_GEOGTRAN=ge.PeDefs.prototype.PE_TYPE_GEOGTRAN,ji.PE_TYPE_COORDSYS=ge.PeDefs.prototype.PE_TYPE_COORDSYS,ji.PE_TYPE_UNIT=ge.PeDefs.prototype.PE_TYPE_UNIT,ji.PE_TYPE_LINUNIT=ge.PeDefs.prototype.PE_TYPE_LINUNIT,ji.PE_STR_OPTS_NONE=ge.PeDefs.prototype.PE_STR_OPTS_NONE,ji.PE_STR_AUTH_NONE=ge.PeDefs.prototype.PE_STR_AUTH_NONE,ji.PE_STR_AUTH_TOP=ge.PeDefs.prototype.PE_STR_AUTH_TOP,ji.PE_STR_NAME_CANON=ge.PeDefs.prototype.PE_STR_NAME_CANON,ji.PE_STR_FMT_WKT=ge.PeDefs.prototype.PE_STR_FMT_WKT,ji.PE_STR_FMT_WKT2=ge.PeDefs.prototype.PE_STR_FMT_WKT2,ji.PE_PARM_X0=ge.PeDefs.prototype.PE_PARM_X0,ji.PE_PARM_ND=ge.PeDefs.prototype.PE_PARM_ND,ji.PE_TRANSFORM_1_TO_2=ge.PeDefs.prototype.PE_TRANSFORM_1_TO_2,ji.PE_TRANSFORM_2_TO_1=ge.PeDefs.prototype.PE_TRANSFORM_2_TO_1,ji.PE_TRANSFORM_P_TO_G=ge.PeDefs.prototype.PE_TRANSFORM_P_TO_G,ji.PE_TRANSFORM_G_TO_P=ge.PeDefs.prototype.PE_TRANSFORM_G_TO_P,ji.PE_HORIZON_RECT=ge.PeDefs.prototype.PE_HORIZON_RECT,ji.PE_HORIZON_POLY=ge.PeDefs.prototype.PE_HORIZON_POLY,ji.PE_HORIZON_LINE=ge.PeDefs.prototype.PE_HORIZON_LINE,ji.PE_HORIZON_DELTA=ge.PeDefs.prototype.PE_HORIZON_DELTA}},Yge=null;const Bre={},Ure={},Hre=t=>{const e=t.getType();switch(e){case $n.PE_TYPE_GEOGCS:t=ge.castObject(t,ge.PeGeogcs);break;case $n.PE_TYPE_PROJCS:t=ge.castObject(t,ge.PeProjcs);break;case $n.PE_TYPE_GEOGTRAN:t=ge.castObject(t,ge.PeGeogtran);break;default:e&$n.PE_TYPE_UNIT&&(t=ge.castObject(t,ge.PeUnit))}return t},ax={initialize(){ge.PeFactory.prototype.initialize(null)},coordsys:t=>ax.factoryByType($n.PE_TYPE_COORDSYS,t),factoryByType(t,e){let i=null,r=Bre[t];if(r||(r={},Bre[t]=r),r.hasOwnProperty(String(e))&&(i=r[e],ge.compare(i,ge.NULL)&&(i=null)),!i){const n=ge.PeFactory.prototype.factoryByType(t,e);ge.compare(n,ge.NULL)||(i=Hre(n),r[e]=i)}return i},fromString(t,e){let i=null,r=Ure[t];if(r||(r={},Ure[t]=r),r.hasOwnProperty(e)&&(i=r[e],ge.compare(i,ge.NULL)&&(i=null)),!i){const n=ge.PeFactory.prototype.fromString(t,e);ge.compare(n,ge.NULL)||(i=Hre(n),r[e]=i)}return i},geogcs:t=>ax.factoryByType($n.PE_TYPE_GEOGCS,t),geogtran:t=>ax.factoryByType($n.PE_TYPE_GEOGTRAN,t),getCode:t=>ge.PeFactory.prototype.getCode(t),projcs:t=>ax.factoryByType($n.PE_TYPE_PROJCS,t),unit:t=>ax.factoryByType($n.PE_TYPE_UNIT,t)};let Gre,Zge=null;const JY={PE_GTLIST_OPTS_COMMON:0,init(){JY.PE_GTLIST_OPTS_COMMON=ge.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,Gre=ge._pe_getPeGTlistExtendedEntrySize()},getGTlist(t,e,i,r,n,s){let a=null;const o=new ge.PeInteger(s);try{const l=ge.PeGTlistExtended.prototype.getGTlist(t,e,i,r,n,o);if((s=o.val)&&(a=[l],s>1)){const c=ge.getPointer(l);for(let h=1;h<s;h++)a.push(ge.wrapPointer(c+Gre*h,ge.PeGTlistExtendedEntry))}}finally{ge.destroy(o)}return a}},l5e={destroy(t){if(t?.length){for(const e of t)fd(e),e.getEntries().forEach(i=>{fd(i);const r=i.getGeogtran();fd(r),r.getParameters().forEach(fd),[r.getGeogcs1(),r.getGeogcs2()].forEach(n=>{fd(n);const s=n.getDatum();fd(s),fd(s.getSpheroid()),fd(n.getPrimem()),fd(n.getUnit())})});ge.PeGTlistExtendedEntry.prototype.Delete(t[0])}}},c5e={geogToGeog(t,e,i,r,n){ge.ensureCache.prepare();const s=Ww(i),a=i===s,o=ge.ensureFloat64(s);let l=0;r&&(l=ge.ensureFloat64(r));const c=ge._pe_geog_to_geog(ge.getPointer(t),e,o,l,n);return c&&kv(i,e,o,a),c}},u5e={geodesicCoordinate(t,e,i,r,n,s,a,o){ge.PeLineType.prototype.geodesic_coordinate(t,e,i,r,n,s,a,o)},geodeticCoordinate(t,e,i,r,n,s,a,o,l){ge.PeLineType.prototype.geodetic_coordinate(t,e,i,r,n,s,a,o,l)},geodeticDistance(t,e,i,r,n,s,a,o,l,c){ge.PeLineType.prototype.geodetic_distance(t,e,i,r,n,s,a,o,l,c)},greatEllipticDistance(t,e,i,r,n,s,a,o,l){ge.PeLineType.prototype.great_elliptic_distance(t,e,i,r,n,s,a,o,l)}},d5e={phiToEta:(t,e)=>ge.PeMath.prototype.phi_to_eta(t,e),etaToPhi:(t,e)=>ge.PeMath.prototype.eta_to_phi(t,e),phiToPhig:(t,e)=>ge.PeMath.prototype.phi_to_phig(t,e),q:(t,e,i)=>ge.PeMath.prototype.q(t,e,i),q90:(t,e)=>ge.PeMath.prototype.q90(t,e)},p6=(t,e,i,r,n,s)=>{let a,o;switch(ge.ensureCache.prepare(),t){case"dd":a=ge._pe_geog_to_dd,o=$n.PE_DD_MAX;break;case"ddm":a=ge._pe_geog_to_ddm,o=$n.PE_DDM_MAX;break;case"dms":a=ge._pe_geog_to_dms,o=$n.PE_DMS_MAX}let l=0;e&&(l=ge.getPointer(e));const c=Ww(r),h=ge.ensureFloat64(c),f=WF(i,o),g=a(l,i,h,n,ge.ensureInt32(f));if(g)for(let y=0;y<i;y++)s[y]=ge.UTF8ToString(f[y]);return g},f6=(t,e,i,r,n)=>{let s;switch(ge.ensureCache.prepare(),t){case"dd":s=ge._pe_dd_to_geog;break;case"ddm":s=ge._pe_ddm_to_geog;break;case"dms":s=ge._pe_dms_to_geog}let a=0;e&&(a=ge.getPointer(e));const o=r.map(f=>ge.ensureString(f)),l=ge.ensureInt32(o),c=ge.ensureFloat64(new Array(2*i)),h=s(a,i,l,c);return h&&kv(n,i,c),h},h5e={geogToDms:(t,e,i,r,n)=>p6("dms",t,e,i,r,n),dmsToGeog:(t,e,i,r)=>f6("dms",t,e,i,r),geogToDdm:(t,e,i,r,n)=>p6("ddm",t,e,i,r,n),ddmToGeog:(t,e,i,r)=>f6("ddm",t,e,i,r),geogToDd:(t,e,i,r,n)=>p6("dd",t,e,i,r,n),ddToGeog:(t,e,i,r)=>f6("dd",t,e,i,r)};let Xge=class ox{static init(){ox.PE_MGRS_STYLE_NEW=ge.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,ox.PE_MGRS_STYLE_OLD=ge.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,ox.PE_MGRS_STYLE_AUTO=ge.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,ox.PE_MGRS_180_ZONE_1_PLUS=ge.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,ox.PE_MGRS_ADD_SPACES=ge.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES}static geogToMgrsExtended(e,i,r,n,s,a,o){ge.ensureCache.prepare();let l=0;e&&(l=ge.getPointer(e));const c=Ww(r),h=ge.ensureFloat64(c),f=WF(i,$n.PE_MGRS_MAX),g=ge.ensureInt32(f),y=ge._pe_geog_to_mgrs_extended(l,i,h,n,s,a,g);if(y)for(let b=0;b<i;b++)o[b]=ge.UTF8ToString(f[b]);return y}static mgrsToGeogExtended(e,i,r,n,s){ge.ensureCache.prepare();let a=0;e&&(a=ge.getPointer(e));const o=r.map(f=>ge.ensureString(f)),l=ge.ensureInt32(o),c=ge.ensureFloat64(new Array(2*i)),h=ge._pe_mgrs_to_geog_extended(a,i,l,n,c);return h&&kv(s,i,c),h}};const p5e={geogToUsng(t,e,i,r,n,s,a){ge.ensureCache.prepare();let o=0;t&&(o=ge.getPointer(t));const l=Ww(i),c=ge.ensureFloat64(l),h=WF(e,$n.PE_MGRS_MAX),f=ge.ensureInt32(h),g=ge._pe_geog_to_usng(o,e,c,r,n,s,f);if(g)for(let y=0;y<e;y++)a[y]=ge.UTF8ToString(h[y]);return g},usngToGeog(t,e,i,r){ge.ensureCache.prepare();let n=0;t&&(n=ge.getPointer(t));const s=i.map(c=>ge.ensureString(c)),a=ge.ensureInt32(s),o=ge.ensureFloat64(new Array(2*e)),l=ge._pe_usng_to_geog(n,e,a,o);return l&&kv(r,e,o),l}};let Jge=class w3{static init(){w3.PE_UTM_OPTS_NONE=ge.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,w3.PE_UTM_OPTS_ADD_SPACES=ge.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,w3.PE_UTM_OPTS_NS=ge.PeNotationUtm.prototype.PE_UTM_OPTS_NS}static geogToUtm(e,i,r,n,s){ge.ensureCache.prepare();let a=0;e&&(a=ge.getPointer(e));const o=Ww(r),l=ge.ensureFloat64(o),c=WF(i,$n.PE_UTM_MAX),h=ge.ensureInt32(c),f=ge._pe_geog_to_utm(a,i,l,n,h);if(f)for(let g=0;g<i;g++)s[g]=ge.UTF8ToString(c[g]);return f}static utmToGeog(e,i,r,n,s){ge.ensureCache.prepare();let a=0;e&&(a=ge.getPointer(e));const o=r.map(f=>ge.ensureString(f)),l=ge.ensureInt32(o),c=ge.ensureFloat64(new Array(2*i)),h=ge._pe_utm_to_geog(a,i,l,n,c);return h&&kv(s,i,c),h}};var hl;let Kge=(hl=class{static init(){hl.PE_PCSINFO_OPTION_NONE=ge.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,hl.PE_PCSINFO_OPTION_DOMAIN=ge.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,hl.PE_POLE_OUTSIDE_BOUNDARY=ge.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,hl.PE_POLE_POINT=ge.PePCSInfo.prototype.PE_POLE_POINT}static generate(e,i=hl.PE_PCSINFO_OPTION_DOMAIN){let r=null,n=null;return hl.cache.has(e)&&(n=hl.cache.get(e),n[i]&&(r=n[i])),r||(r=ge.PePCSInfo.prototype.generate(e,i),n||(n=[],hl.cache.set(e,n)),n[i]=r),r}},hl.cache=new Map,hl);const f5e={versionString:()=>ge.PeVersion.prototype.version_string()};function Qge(t){function e(s,a,o){s[a]=o(s[a])}ge=t,$n.init(),JY.init(),Xge.init(),Jge.init(),Kge.init(),Yge=class extends ge.PeDouble{constructor(s=NaN){super(s)}destroy(){ge.destroy(this)}[Symbol.dispose](){this.destroy()}},Zge=class extends ge.PeGCSExtent{destroy(){ge.destroy(this)}[Symbol.dispose](){this.destroy()}};const i=[ge.PeAngunit,ge.PeDatum,ge.PeGeogcs,ge.PeGeogtran,ge.PeObject,ge.PeParameter,ge.PePrimem,ge.PeProjcs,ge.PeSpheroid,ge.PeUnit];for(const s of i)e(s.prototype,"getName",a=>function(){return a.call(this,new Array($n.PE_NAME_MAX))});for(const s of[ge.PeGeogtran,ge.PeProjcs])e(s.prototype,"getParameters",a=>function(){const o=new Array($n.PE_PARM_MAX);let l=a.call(this);for(let c=0;c<o.length;c++){const h=ge.getValue(l,"*");o[c]=h?ge.wrapPointer(h,ge.PeParameter):null,l+=Int32Array.BYTES_PER_ELEMENT}return o});e(ge.PeHorizon.prototype,"getCoord",s=>function(a=!1){const o=this.getSize();if(!o)return null;const l=[];return kv(l,o,s.call(this),a),l}),e(ge.PeGTlistExtendedEntry.prototype,"getEntries",s=>{const a=ge._pe_getPeGTlistExtendedGTsSize();return function(){let o=null;const l=s.call(this);if(!ge.compare(l,ge.NULL)){o=[l];const c=this.getSteps();if(c>1){const h=ge.getPointer(l);for(let f=1;f<c;f++)o.push(ge.wrapPointer(h+a*f,ge.PeGTlistExtendedGTs))}}return o}});const r=ge._pe_getPeHorizonSize(),n=s=>function(){let a=this._cache;if(a||(a=new Map,this._cache=a),a.has(s))return a.get(s);let o=null;const l=s.call(this);if(!ge.compare(l,ge.NULL)){o=[l];const c=l.getNump();if(c>1){const h=ge.getPointer(l);for(let f=1;f<c;f++)o.push(ge.wrapPointer(h+r*f,ge.PeHorizon))}}return a.set(s,o),o};e(ge.PeProjcs.prototype,"horizonGcsGenerate",n),e(ge.PeProjcs.prototype,"horizonPcsGenerate",n),ge.PeObject.prototype.toString=function(s=$n.PE_STR_OPTS_NONE){ge.ensureCache.prepare();const a=ge.getPointer(this),o=ge.ensureInt8(new Array($n.PE_BUFFER_MAX));return ge.UTF8ToString(ge._pe_object_to_string_ext(a,s,o))},ge.PeGeogcs.prototype.destroy=function(){this.Delete(),fd(this),this.ptr=0},ge.PeGeogcs.prototype[Symbol.dispose]=function(){this.destroy()},ge.PeProjcs.prototype.destroy=function(){this.Delete(),fd(this),this.ptr=0},ge.PeProjcs.prototype[Symbol.dispose]=function(){this.destroy()}}function fd(t){if(!t)return;const e=ge.getClass(t);if(!e)return;const i=ge.getCache(e);if(!i)return;const r=ge.getPointer(t);r&&delete i[r]}function WF(t,e){const i=[],r=new Array(e);for(let n=0;n<t;n++)i.push(ge.ensureInt8(r));return i}function Ww(t){return ArrayBuffer.isView(t)?t:Array.isArray(t[0])?t.flat():t}function kv(t,e,i,r=!1){if(r)for(let n=0;n<2*e;n++)t[n]=ge.getValue(i+n*Float64Array.BYTES_PER_ELEMENT,"double");else{const n=t.length===0;for(let s=0;s<e;s++)n&&(t[s]=new Array(2)),t[s][0]=ge.getValue(i,"double"),t[s][1]=ge.getValue(i+Float64Array.BYTES_PER_ELEMENT,"double"),i+=2*Float64Array.BYTES_PER_ELEMENT}}const aEt=Object.freeze(Object.defineProperty({__proto__:null,PeCSTransformations:b3,PeDefs:$n,get PeDouble(){return Yge},PeFactory:ax,get PeGCSExtent(){return Zge},PeGTTransformations:c5e,PeGTlistExtended:JY,PeGTlistExtendedEntry:l5e,PeLineType:u5e,PeMath:d5e,PeNotationDms:h5e,PeNotationMgrs:Xge,PeNotationUsng:p5e,PeNotationUtm:Jge,PePCSInfo:Kge,PeVersion:f5e,_init:Qge,get _pe(){return ge},isLoaded:Wge,isSupported:a5e,load:o5e},Symbol.toStringTag,{value:"Module"}));let w;const H={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.1168,20.116756,5e4,15e4],units:["Meter","Foot","Foot_US","Foot_Clarke","Yard_Clarke","Link_Clarke","Yard_Sears","Foot_Sears","Chain_Sears","Chain_Benoit_1895_B","Yard_Indian","Yard_Indian_1937","Foot_Gold_Coast","Chain","Chain_Sears_1922_Truncated","50_Kilometers","150_Kilometers"],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:14,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5041:0,5042:0,5048:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,9709:0,9712:0,9713:0,9716:0,9741:0,9748:2,9749:2,9761:0,9766:0,9793:0,9794:0,9869:0,9874:0,9875:0,9880:0,9895:0,9943:0,9945:0,9947:0,9967:0,9972:0,9977:0,10160:0,10183:0,10188:0,10194:0,10199:0,10207:0,10212:0,10217:0,10222:0,10227:0,10235:0,10240:0,10250:0,10254:0,10270:0,10275:0,10280:0,10306:0,10329:0,10471:0,10477:0,10481:2,10516:2,10592:0,10594:0,10596:0,10598:0,10601:0,10603:0,10626:0,10632:0,10641:0,10665:0,10674:0,10744:0,10745:0,10759:0,10773:0,10802:0,10820:0,20002:0,20042:0,20050:1,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22239:0,22240:0,22332:0,22337:0,22338:0,22391:0,22392:0,22639:0,22700:0,22739:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25e3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,65061:2,65062:2,102041:2,102064:11,102068:15,102069:16,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102731:0,102732:0,102759:1,102760:1,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2,103897:1,103978:2,103979:0,103980:2,103981:0};for(w=2e3;w<=2045;w++)H[w]=0;for(w=2056;w<=2065;w++)H[w]=0;for(w=2067;w<=2135;w++)H[w]=0;for(w=2137;w<=2154;w++)H[w]=0;for(w=2161;w<=2170;w++)H[w]=0;for(w=2172;w<=2193;w++)H[w]=0;for(w=2195;w<=2198;w++)H[w]=0;for(w=2200;w<=2203;w++)H[w]=0;for(w=2205;w<=2217;w++)H[w]=0;for(w=2222;w<=2224;w++)H[w]=1;for(w=2225;w<=2250;w++)H[w]=2;for(w=2251;w<=2253;w++)H[w]=1;for(w=2257;w<=2264;w++)H[w]=2;for(w=2274;w<=2279;w++)H[w]=2;for(w=2280;w<=2282;w++)H[w]=1;for(w=2283;w<=2289;w++)H[w]=2;for(w=2290;w<=2292;w++)H[w]=0;for(w=2308;w<=2313;w++)H[w]=0;for(w=2315;w<=2491;w++)H[w]=0;for(w=2494;w<=2866;w++)H[w]=0;for(w=2867;w<=2869;w++)H[w]=1;for(w=2870;w<=2888;w++)H[w]=2;for(w=2891;w<=2895;w++)H[w]=2;for(w=2896;w<=2898;w++)H[w]=1;for(w=2902;w<=2908;w++)H[w]=2;for(w=2915;w<=2920;w++)H[w]=2;for(w=2921;w<=2923;w++)H[w]=1;for(w=2924;w<=2930;w++)H[w]=2;for(w=2931;w<=2962;w++)H[w]=0;for(w=2964;w<=2968;w++)H[w]=2;for(w=2969;w<=2973;w++)H[w]=0;for(w=2975;w<=2991;w++)H[w]=0;for(w=2995;w<=3051;w++)H[w]=0;for(w=3054;w<=3079;w++)H[w]=0;for(w=3081;w<=3088;w++)H[w]=0;for(w=3092;w<=3101;w++)H[w]=0;for(w=3106;w<=3138;w++)H[w]=0;for(w=3146;w<=3151;w++)H[w]=0;for(w=3153;w<=3166;w++)H[w]=0;for(w=3168;w<=3172;w++)H[w]=0;for(w=3174;w<=3203;w++)H[w]=0;for(w=3294;w<=3358;w++)H[w]=0;for(w=3367;w<=3403;w++)H[w]=0;for(w=3408;w<=3416;w++)H[w]=0;for(w=3417;w<=3438;w++)H[w]=2;for(w=3441;w<=3446;w++)H[w]=2;for(w=3447;w<=3450;w++)H[w]=0;for(w=3451;w<=3459;w++)H[w]=2;for(w=3460;w<=3478;w++)H[w]=0;for(w=3554;w<=3559;w++)H[w]=0;for(w=3560;w<=3570;w++)H[w]=2;for(w=3571;w<=3581;w++)H[w]=0;for(w=3594;w<=3597;w++)H[w]=0;for(w=3601;w<=3604;w++)H[w]=0;for(w=3637;w<=3639;w++)H[w]=0;for(w=3665;w<=3667;w++)H[w]=0;for(w=3693;w<=3695;w++)H[w]=0;for(w=3701;w<=3727;w++)H[w]=0;for(w=3728;w<=3739;w++)H[w]=2;for(w=3740;w<=3751;w++)H[w]=0;for(w=3753;w<=3760;w++)H[w]=2;for(w=3761;w<=3773;w++)H[w]=0;for(w=3775;w<=3777;w++)H[w]=0;for(w=3779;w<=3781;w++)H[w]=0;for(w=3783;w<=3785;w++)H[w]=0;for(w=3788;w<=3791;w++)H[w]=0;for(w=3797;w<=3802;w++)H[w]=0;for(w=3814;w<=3816;w++)H[w]=0;for(w=3825;w<=3829;w++)H[w]=0;for(w=3832;w<=3841;w++)H[w]=0;for(w=3844;w<=3852;w++)H[w]=0;for(w=3873;w<=3885;w++)H[w]=0;for(w=3890;w<=3893;w++)H[w]=0;for(w=3907;w<=3912;w++)H[w]=0;for(w=3942;w<=3950;w++)H[w]=0;for(w=3968;w<=3970;w++)H[w]=0;for(w=3973;w<=3976;w++)H[w]=0;for(w=3986;w<=3989;w++)H[w]=0;for(w=3994;w<=3997;w++)H[w]=0;for(w=4048;w<=4051;w++)H[w]=0;for(w=4056;w<=4063;w++)H[w]=0;for(w=4093;w<=4096;w++)H[w]=0;for(w=4390;w<=4398;w++)H[w]=0;for(w=4399;w<=4413;w++)H[w]=2;for(w=4418;w<=4433;w++)H[w]=2;for(w=4455;w<=4457;w++)H[w]=2;for(w=4484;w<=4489;w++)H[w]=0;for(w=4491;w<=4554;w++)H[w]=0;for(w=4568;w<=4589;w++)H[w]=0;for(w=4652;w<=4656;w++)H[w]=0;for(w=4766;w<=4800;w++)H[w]=0;for(w=5014;w<=5016;w++)H[w]=0;for(w=5069;w<=5072;w++)H[w]=0;for(w=5105;w<=5130;w++)H[w]=0;for(w=5167;w<=5188;w++)H[w]=0;for(w=5253;w<=5259;w++)H[w]=0;for(w=5269;w<=5275;w++)H[w]=0;for(w=5292;w<=5311;w++)H[w]=0;for(w=5329;w<=5331;w++)H[w]=0;for(w=5343;w<=5349;w++)H[w]=0;for(w=5355;w<=5357;w++)H[w]=0;for(w=5387;w<=5389;w++)H[w]=0;for(w=5459;w<=5463;w++)H[w]=0;for(w=5479;w<=5482;w++)H[w]=0;for(w=5518;w<=5520;w++)H[w]=0;for(w=5530;w<=5539;w++)H[w]=0;for(w=5550;w<=5552;w++)H[w]=0;for(w=5562;w<=5583;w++)H[w]=0;for(w=5623;w<=5625;w++)H[w]=2;for(w=5631;w<=5639;w++)H[w]=0;for(w=5649;w<=5653;w++)H[w]=0;for(w=5663;w<=5680;w++)H[w]=0;for(w=5682;w<=5685;w++)H[w]=0;for(w=5875;w<=5877;w++)H[w]=0;for(w=5896;w<=5899;w++)H[w]=0;for(w=5921;w<=5940;w++)H[w]=0;for(w=6050;w<=6125;w++)H[w]=0;for(w=6244;w<=6275;w++)H[w]=0;for(w=6328;w<=6348;w++)H[w]=0;for(w=6350;w<=6356;w++)H[w]=0;for(w=6366;w<=6372;w++)H[w]=0;for(w=6381;w<=6387;w++)H[w]=0;for(w=6393;w<=6404;w++)H[w]=0;for(w=6480;w<=6483;w++)H[w]=0;for(w=6511;w<=6514;w++)H[w]=0;for(w=6579;w<=6581;w++)H[w]=0;for(w=6619;w<=6624;w++)H[w]=0;for(w=6625;w<=6627;w++)H[w]=2;for(w=6628;w<=6632;w++)H[w]=0;for(w=6634;w<=6637;w++)H[w]=0;for(w=6669;w<=6692;w++)H[w]=0;for(w=6707;w<=6709;w++)H[w]=0;for(w=6720;w<=6723;w++)H[w]=0;for(w=6732;w<=6738;w++)H[w]=0;for(w=6931;w<=6933;w++)H[w]=0;for(w=6956;w<=6959;w++)H[w]=0;for(w=7005;w<=7007;w++)H[w]=0;for(w=7057;w<=7070;w++)H[w]=2;for(w=7074;w<=7082;w++)H[w]=0;for(w=7109;w<=7118;w++)H[w]=0;for(w=7119;w<=7127;w++)H[w]=1;for(w=7374;w<=7376;w++)H[w]=0;for(w=7528;w<=7586;w++)H[w]=0;for(w=7587;w<=7645;w++)H[w]=2;for(w=7692;w<=7696;w++)H[w]=0;for(w=7755;w<=7787;w++)H[w]=0;for(w=7791;w<=7795;w++)H[w]=0;for(w=7799;w<=7801;w++)H[w]=0;for(w=7803;w<=7805;w++)H[w]=0;for(w=7825;w<=7831;w++)H[w]=0;for(w=7845;w<=7859;w++)H[w]=0;for(w=8013;w<=8032;w++)H[w]=0;for(w=8065;w<=8068;w++)H[w]=1;for(w=8518;w<=8529;w++)H[w]=2;for(w=8533;w<=8536;w++)H[w]=2;for(w=8538;w<=8540;w++)H[w]=2;for(w=8677;w<=8679;w++)H[w]=0;for(w=8836;w<=8840;w++)H[w]=0;for(w=8857;w<=8859;w++)H[w]=0;for(w=8908;w<=8910;w++)H[w]=0;for(w=9154;w<=9159;w++)H[w]=0;for(w=9205;w<=9218;w++)H[w]=0;for(w=9271;w<=9273;w++)H[w]=0;for(w=9295;w<=9297;w++)H[w]=0;for(w=9356;w<=9360;w++)H[w]=0;for(w=9404;w<=9407;w++)H[w]=0;for(w=9476;w<=9482;w++)H[w]=0;for(w=9487;w<=9494;w++)H[w]=0;for(w=9697;w<=9699;w++)H[w]=0;for(w=9821;w<=9865;w++)H[w]=0;for(w=10285;w<=10291;w++)H[w]=0;for(w=10314;w<=10317;w++)H[w]=0;for(w=10448;w<=10465;w++)H[w]=0;for(w=10726;w<=10729;w++)H[w]=0;for(w=10731;w<=10733;w++)H[w]=0;for(w=11114;w<=11118;w++)H[w]=0;for(w=20004;w<=20032;w++)H[w]=0;for(w=20047;w<=20049;w++)H[w]=0;for(w=20062;w<=20092;w++)H[w]=0;for(w=20135;w<=20138;w++)H[w]=0;for(w=20248;w<=20258;w++)H[w]=0;for(w=20348;w<=20358;w++)H[w]=0;for(w=20436;w<=20440;w++)H[w]=0;for(w=20822;w<=20824;w++)H[w]=0;for(w=20904;w<=20932;w++)H[w]=0;for(w=20934;w<=20936;w++)H[w]=0;for(w=21004;w<=21032;w++)H[w]=0;for(w=21035;w<=21037;w++)H[w]=0;for(w=21095;w<=21097;w++)H[w]=0;for(w=21148;w<=21150;w++)H[w]=0;for(w=21207;w<=21264;w++)H[w]=0;for(w=21307;w<=21364;w++)H[w]=0;for(w=21413;w<=21423;w++)H[w]=0;for(w=21453;w<=21463;w++)H[w]=0;for(w=21473;w<=21483;w++)H[w]=0;for(w=21780;w<=21782;w++)H[w]=0;for(w=21891;w<=21894;w++)H[w]=0;for(w=21896;w<=21899;w++)H[w]=0;for(w=22171;w<=22177;w++)H[w]=0;for(w=22181;w<=22187;w++)H[w]=0;for(w=22191;w<=22197;w++)H[w]=0;for(w=22207;w<=22222;w++)H[w]=0;for(w=22229;w<=22232;w++)H[w]=0;for(w=22234;w<=22236;w++)H[w]=0;for(w=22243;w<=22250;w++)H[w]=0;for(w=22262;w<=22265;w++)H[w]=0;for(w=22307;w<=22322;w++)H[w]=0;for(w=22348;w<=22357;w++)H[w]=0;for(w=22407;w<=22422;w++)H[w]=0;for(w=22462;w<=22465;w++)H[w]=0;for(w=22521;w<=22525;w++)H[w]=0;for(w=22607;w<=22622;w++)H[w]=0;for(w=22641;w<=22646;w++)H[w]=0;for(w=22648;w<=22657;w++)H[w]=0;for(w=22707;w<=22722;w++)H[w]=0;for(w=22762;w<=22765;w++)H[w]=0;for(w=22807;w<=22822;w++)H[w]=0;for(w=22991;w<=22994;w++)H[w]=0;for(w=23028;w<=23038;w++)H[w]=0;for(w=23301;w<=23333;w++)H[w]=2;for(w=23830;w<=23853;w++)H[w]=0;for(w=23866;w<=23872;w++)H[w]=0;for(w=23877;w<=23884;w++)H[w]=0;for(w=23886;w<=23894;w++)H[w]=0;for(w=23946;w<=23948;w++)H[w]=0;for(w=24311;w<=24313;w++)H[w]=0;for(w=24342;w<=24347;w++)H[w]=0;for(w=24370;w<=24374;w++)H[w]=10;for(w=24375;w<=24381;w++)H[w]=0;for(w=24718;w<=24721;w++)H[w]=0;for(w=24817;w<=24821;w++)H[w]=0;for(w=24877;w<=24882;w++)H[w]=0;for(w=24891;w<=24893;w++)H[w]=0;for(w=25391;w<=25395;w++)H[w]=0;for(w=25828;w<=25838;w++)H[w]=0;for(w=26191;w<=26195;w++)H[w]=0;for(w=26391;w<=26393;w++)H[w]=0;for(w=26701;w<=26722;w++)H[w]=0;for(w=26729;w<=26799;w++)H[w]=2;for(w=26801;w<=26803;w++)H[w]=2;for(w=26811;w<=26813;w++)H[w]=2;for(w=26847;w<=26870;w++)H[w]=2;for(w=26891;w<=26899;w++)H[w]=0;for(w=26901;w<=26923;w++)H[w]=0;for(w=26929;w<=26946;w++)H[w]=0;for(w=26948;w<=26998;w++)H[w]=0;for(w=27037;w<=27040;w++)H[w]=0;for(w=27205;w<=27232;w++)H[w]=0;for(w=27258;w<=27260;w++)H[w]=0;for(w=27391;w<=27398;w++)H[w]=0;for(w=27561;w<=27564;w++)H[w]=0;for(w=27571;w<=27574;w++)H[w]=0;for(w=27581;w<=27584;w++)H[w]=0;for(w=27591;w<=27594;w++)H[w]=0;for(w=27700;w<=27707;w++)H[w]=0;for(w=28191;w<=28193;w++)H[w]=0;for(w=28348;w<=28358;w++)H[w]=0;for(w=28402;w<=28432;w++)H[w]=0;for(w=28462;w<=28492;w++)H[w]=0;for(w=29118;w<=29122;w++)H[w]=0;for(w=29168;w<=29172;w++)H[w]=0;for(w=29177;w<=29185;w++)H[w]=0;for(w=29187;w<=29195;w++)H[w]=0;for(w=29900;w<=29903;w++)H[w]=0;for(w=30161;w<=30179;w++)H[w]=0;for(w=30491;w<=30494;w++)H[w]=0;for(w=30729;w<=30732;w++)H[w]=0;for(w=31251;w<=31259;w++)H[w]=0;for(w=31265;w<=31268;w++)H[w]=0;for(w=31275;w<=31279;w++)H[w]=0;for(w=31281;w<=31297;w++)H[w]=0;for(w=31461;w<=31469;w++)H[w]=0;for(w=31491;w<=31495;w++)H[w]=0;for(w=31917;w<=31922;w++)H[w]=0;for(w=31965;w<=32e3;w++)H[w]=0;for(w=32001;w<=32003;w++)H[w]=2;for(w=32005;w<=32031;w++)H[w]=2;for(w=32033;w<=32060;w++)H[w]=2;for(w=32064;w<=32067;w++)H[w]=2;for(w=32074;w<=32077;w++)H[w]=2;for(w=32081;w<=32086;w++)H[w]=0;for(w=32107;w<=32130;w++)H[w]=0;for(w=32133;w<=32159;w++)H[w]=0;for(w=32164;w<=32167;w++)H[w]=2;for(w=32180;w<=32199;w++)H[w]=0;for(w=32201;w<=32260;w++)H[w]=0;for(w=32301;w<=32360;w++)H[w]=0;for(w=32401;w<=32460;w++)H[w]=0;for(w=32501;w<=32560;w++)H[w]=0;for(w=32601;w<=32662;w++)H[w]=0;for(w=32664;w<=32667;w++)H[w]=2;for(w=32701;w<=32761;w++)H[w]=0;for(w=53001;w<=53004;w++)H[w]=0;for(w=53008;w<=53019;w++)H[w]=0;for(w=53021;w<=53032;w++)H[w]=0;for(w=53034;w<=53037;w++)H[w]=0;for(w=53042;w<=53046;w++)H[w]=0;for(w=53074;w<=53080;w++)H[w]=0;for(w=54001;w<=54004;w++)H[w]=0;for(w=54008;w<=54019;w++)H[w]=0;for(w=54021;w<=54032;w++)H[w]=0;for(w=54034;w<=54037;w++)H[w]=0;for(w=54042;w<=54046;w++)H[w]=0;for(w=54048;w<=54053;w++)H[w]=0;for(w=54074;w<=54080;w++)H[w]=0;for(w=54090;w<=54096;w++)H[w]=0;for(w=54098;w<=54101;w++)H[w]=0;for(w=65161;w<=65163;w++)H[w]=0;for(w=102001;w<=102040;w++)H[w]=0;for(w=102042;w<=102063;w++)H[w]=0;for(w=102065;w<=102067;w++)H[w]=0;for(w=102070;w<=102117;w++)H[w]=0;for(w=102122;w<=102216;w++)H[w]=0;for(w=102221;w<=102377;w++)H[w]=0;for(w=102382;w<=102388;w++)H[w]=0;for(w=102389;w<=102398;w++)H[w]=2;for(w=102399;w<=102444;w++)H[w]=0;for(w=102445;w<=102447;w++)H[w]=2;for(w=102448;w<=102458;w++)H[w]=0;for(w=102459;w<=102468;w++)H[w]=2;for(w=102469;w<=102499;w++)H[w]=0;for(w=102500;w<=102519;w++)H[w]=1;for(w=102520;w<=102524;w++)H[w]=0;for(w=102525;w<=102529;w++)H[w]=2;for(w=102530;w<=102588;w++)H[w]=0;for(w=102590;w<=102598;w++)H[w]=0;for(w=102601;w<=102603;w++)H[w]=0;for(w=102605;w<=102628;w++)H[w]=0;for(w=102629;w<=102646;w++)H[w]=2;for(w=102648;w<=102700;w++)H[w]=2;for(w=102701;w<=102703;w++)H[w]=0;for(w=102707;w<=102730;w++)H[w]=2;for(w=102733;w<=102758;w++)H[w]=2;for(w=102767;w<=102900;w++)H[w]=0;for(w=102901;w<=102933;w++)H[w]=2;for(w=102934;w<=102950;w++)H[w]=13;for(w=102951;w<=102963;w++)H[w]=0;for(w=102965;w<=102969;w++)H[w]=0;for(w=102971;w<=102973;w++)H[w]=0;for(w=102975;w<=102989;w++)H[w]=0;for(w=102990;w<=102992;w++)H[w]=1;for(w=102997;w<=103002;w++)H[w]=0;for(w=103003;w<=103008;w++)H[w]=2;for(w=103009;w<=103011;w++)H[w]=0;for(w=103012;w<=103014;w++)H[w]=2;for(w=103019;w<=103021;w++)H[w]=0;for(w=103022;w<=103024;w++)H[w]=2;for(w=103029;w<=103031;w++)H[w]=0;for(w=103032;w<=103034;w++)H[w]=2;for(w=103065;w<=103068;w++)H[w]=0;for(w=103074;w<=103076;w++)H[w]=0;for(w=103077;w<=103079;w++)H[w]=1;for(w=103080;w<=103082;w++)H[w]=0;for(w=103083;w<=103085;w++)H[w]=2;for(w=103090;w<=103093;w++)H[w]=0;for(w=103097;w<=103099;w++)H[w]=0;for(w=103100;w<=103102;w++)H[w]=2;for(w=103107;w<=103109;w++)H[w]=0;for(w=103110;w<=103112;w++)H[w]=2;for(w=103113;w<=103116;w++)H[w]=0;for(w=103117;w<=103120;w++)H[w]=2;for(w=103153;w<=103157;w++)H[w]=0;for(w=103158;w<=103162;w++)H[w]=2;for(w=103163;w<=103165;w++)H[w]=0;for(w=103166;w<=103168;w++)H[w]=1;for(w=103169;w<=103171;w++)H[w]=2;for(w=103186;w<=103188;w++)H[w]=0;for(w=103189;w<=103191;w++)H[w]=2;for(w=103192;w<=103195;w++)H[w]=0;for(w=103196;w<=103199;w++)H[w]=2;for(w=103200;w<=103224;w++)H[w]=0;for(w=103225;w<=103227;w++)H[w]=1;for(w=103232;w<=103237;w++)H[w]=0;for(w=103238;w<=103243;w++)H[w]=2;for(w=103244;w<=103246;w++)H[w]=0;for(w=103247;w<=103249;w++)H[w]=2;for(w=103254;w<=103256;w++)H[w]=0;for(w=103257;w<=103259;w++)H[w]=2;for(w=103264;w<=103266;w++)H[w]=0;for(w=103267;w<=103269;w++)H[w]=2;for(w=103300;w<=103375;w++)H[w]=0;for(w=103381;w<=103383;w++)H[w]=0;for(w=103384;w<=103386;w++)H[w]=1;for(w=103387;w<=103389;w++)H[w]=0;for(w=103390;w<=103392;w++)H[w]=2;for(w=103397;w<=103399;w++)H[w]=0;for(w=103400;w<=103471;w++)H[w]=2;for(w=103476;w<=103478;w++)H[w]=0;for(w=103479;w<=103481;w++)H[w]=2;for(w=103486;w<=103488;w++)H[w]=0;for(w=103489;w<=103491;w++)H[w]=2;for(w=103492;w<=103495;w++)H[w]=0;for(w=103496;w<=103499;w++)H[w]=2;for(w=103528;w<=103543;w++)H[w]=0;for(w=103544;w<=103548;w++)H[w]=2;for(w=103549;w<=103551;w++)H[w]=0;for(w=103552;w<=103554;w++)H[w]=1;for(w=103555;w<=103557;w++)H[w]=2;for(w=103558;w<=103560;w++)H[w]=0;for(w=103571;w<=103573;w++)H[w]=0;for(w=103574;w<=103576;w++)H[w]=2;for(w=103577;w<=103580;w++)H[w]=0;for(w=103581;w<=103583;w++)H[w]=2;for(w=103595;w<=103694;w++)H[w]=0;for(w=103696;w<=103699;w++)H[w]=0;for(w=103700;w<=103793;w++)H[w]=2;for(w=103794;w<=103890;w++)H[w]=0;for(w=103891;w<=103896;w++)H[w]=2;for(w=103900;w<=103971;w++)H[w]=2;for(w=103972;w<=103977;w++)H[w]=0;for(w=112e3;w<=112101;w++)H[w]=0;const eye=[102100,102113,3857,3785,900913],m5e=[104905,104971],g5e=[104903],y5e=[4326,...eye,...m5e,...g5e],vI=[-20037508342788905e-9,20037508342788905e-9],r9=[-20037508342787e-6,20037508342787e-6],m6={wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',valid:vI,origin:r9,dx:1e-5},tye={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:vI,origin:r9,dx:1e-5},102100:m6,3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:vI,origin:r9,dx:1e-5},3857:m6,4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104971:{wkTemplate:'GEOGCS["Mars_2000_(Sphere)",DATUM["Mars_2000_(Sphere)",SPHEROID["Mars_2000_(Sphere)",3396190.0,0.0]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104905:{wkTemplate:'GEOGCS["GCS_Mars_2000",DATUM["D_Mars_2000",SPHEROID["Mars_2000_IAU_IAG",3396190.0,169.8944472236118]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},900913:m6,104903:{wkTemplate:'GEOGCS["GCS_Moon_2000",DATUM["D_Moon_2000",SPHEROID["Moon_2000_IAU_IAG",1737400,0,AUTHORITY["ESRI","107903"]],AUTHORITY["ESRI","106903"]],PRIMEM["Reference_Meridian",0,AUTHORITY["ESRI","108900"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9122"]],AUTHORITY["ESRI","104903"]]',valid:[-180,180],origin:[-180,90],dx:1e-5}};function os(t,e){if(t===e)return!0;if(t==null||e==null)return!1;const i=t.wkid,r=e.wkid;if(i!=null||r!=null){if(i===r||jp(t)&&jp(e))return!0;const a=t.latestWkid;if(a!=null&&r===a)return!0;const o=e.latestWkid;return o!=null&&i===o}let n,s;return t.wkt2&&e.wkt2?(n=t.wkt2,s=e.wkt2):t.wkt&&e.wkt&&(n=t.wkt,s=e.wkt),!(!n||!s)&&n.toUpperCase()===s.toUpperCase()}function No(t){const e=t?.wkid;return e!=null&&e>=2e3&&tye[e]||null}function zR(t){if(!t)return;const{wkid:e,vcsWkid:i}=t;if(e)return i?JSON.stringify({wkid:e,vcsWkid:i}):String(e);const r=t.wkt||t.wkt2;return JSON.stringify(r?i?{wkt:r,vcsWkid:i}:{wkt:r}:{})}function y_(t){if(!bc(t))return!1;const{wkid:e}=t;if(e)return H[e]==null;const i=t.wkt2||t.wkt;return!!i&&/^\s*(?:GEOGCS|GEOGCRS|GEOGRAPHICCRS)/i.test(i)}function v5e(t){return!(KY(t)||QY(t))}function Ev(t){return t?.wkid===4326}function oEt(t){return/^\s*(?:GEOD|GEODETIC|GEOG|GEOGRAPHIC|PROJ|PROJECTED|VERT|VERTICAL|ENG|ENGINEERING|PARAMETRIC|TIME|DERIVEDPROJ|COMPOUND|BOUND)CRS/i.test(t)}function n9(t){return t?.wkid===4490}function jp(t){const e=t?.wkid;return e!=null&&e>=2e3&&eye.includes(e)}function b5e(t){return t?.wkid===32662}function YF(t){return t===104971||t===104905}function KY(t){return YF(t?.wkid)}function ZF(t){return t===104903}function QY(t){return ZF(t?.wkid)}function w5e(t){const e=t?.wkid;return e!=null&&e>=2e3&&y5e.includes(e)}function bc(t){if(t==null)return!1;const e=t.wkid;return e!=null&&e>=2e3||t.wkt2!=null||t.wkt!=null}const iye={wkid:4326,wkt:Dv(tye[4326].wkTemplate,{Central_Meridian:"0.0"})},rye={wkid:102100,latestWkid:3857},_5e={wkid:32662};function eZ(t){return{wkt:`GEOCCS["Spherical geocentric",
    DATUM["Not specified",
      SPHEROID["Sphere",${t.radius},0]],
    PRIMEM["Greenwich",0.0,
      AUTHORITY["EPSG","8901"]],
    UNIT["m",1.0],
    AXIS["Geocentric X",OTHER],
    AXIS["Geocentric Y",EAST],
    AXIS["Geocentric Z",NORTH]
  ]`}}const x5e=eZ(hn),tZ=eZ(Sp),iZ=eZ(Tv),S5e={wkt:`GEOCCS["WGS 84",
  DATUM["WGS_1984",
    SPHEROID["WGS 84",${hn.radius},298.257223563,
      AUTHORITY["EPSG","7030"]],
    AUTHORITY["EPSG","6326"]],
  PRIMEM["Greenwich",0,
    AUTHORITY["EPSG","8901"]],
  UNIT["m",1.0,
    AUTHORITY["EPSG","9001"]],
  AXIS["Geocentric X",OTHER],
  AXIS["Geocentric Y",OTHER],
  AXIS["Geocentric Z",NORTH],
  AUTHORITY["EPSG","4978"]
]`},$5e=tZ.wkt.toUpperCase(),T5e=iZ.wkt.toUpperCase();function k5e(t){if(t!=null&&bc(t)){const e=t.wkid,i=t.wkt2??t.wkt;if(YF(e))return Sp;const r=i?.toUpperCase();if(i&&r===$5e)return Sp;if(ZF(e)||r&&r===T5e)return Tv}return hn}function lEt(t){return YF(t)?Sp:ZF(t)?Tv:hn}function FR(t){return os(t,x5e)}function Cv(t){return FR(t)||os(t,tZ)||os(t,iZ)}const nye=39.37,E5e=hn.radius*Math.PI/200,sye=/(?:LENGTH)?UNIT\[([^\]]+)]]$/i,V$=H,aye=/UNIT\[([^\]]+)]/i,C5e=new Set([4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104025,104026,104139,104140]),I5e=Gn()({millimeter:"millimeters",centimeter:"centimeters",meter:"meters",meter_german:"german-meters",kilometer:"kilometers",decimeter:"decimeters",micrometer:"micrometers",nanometer:"nanometers","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",fathom:"fathoms",nautical_mile:"nautical-miles",chain_us:"us-chains",link_us:"us-links",mile_us:"us-miles",yard_clarke:"clarke-yards",chain_clarke:"clarke-chains",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",link_sears:"sears-links",yard_benoit_1895_a:"benoit-1895-a-yards",foot_benoit_1895_a:"benoit-1895-a-feet",chain_benoit_1895_a:"benoit-1895-a-chains",link_benoit_1895_a:"benoit-1895-a-links",yard_benoit_1895_b:"benoit-1895-b-yards",foot_benoit_1895_b:"benoit-1895-b-feet",chain_benoit_1895_b:"benoit-1895-b-chains",link_benoit_1895_b:"benoit-1895-b-links",foot_1865:"1865-feet",foot_indian:"indian-feet",foot_indian_1937:"indian-1937-feet",foot_indian_1962:"indian-1962-feet",foot_indian_1975:"indian-1975-feet",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",yard_indian_1962:"indian-1962-yards",yard_indian_1975:"indian-1975-yards",statute_mile:"statute-miles",foot_gold_coast:"gold-coast-feet",foot_british_1936:"british-1936-feet",yard:"yards",chain:"chains",link:"links",yard_sears_1922_truncated:"sears-1922-truncated-yards",foot_sears_1922_truncated:"sears-1922-truncated-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains",link_sears_1922_truncated:"sears-1922-truncated-links",yard_us:"us-yards",inch:"inches",inch_us:"us-inches",rod:"rods",rod_us:"us-rods",nautical_mile_us:"us-nautical-miles",nautical_mile_uk:"uk-nautical-miles",smoot:"smoots",vara_tx:"tx-vara",point:"points"}),qu=t=>t*t,Wg=t=>t*t*t,bI={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},meters:{inBaseUnits:1},feet:{inBaseUnits:.3048},"us-feet":{inBaseUnits:.3048006096012192},"clarke-feet":{inBaseUnits:.3047972654},fathoms:{inBaseUnits:1.8288},"nautical-miles":{inBaseUnits:1852},"german-meters":{inBaseUnits:1.0000135965},"us-chains":{inBaseUnits:20.11684023368047},"us-links":{inBaseUnits:.2011684023368047},"us-miles":{inBaseUnits:1609.347218694438},kilometers:{inBaseUnits:1e3},"clarke-yards":{inBaseUnits:.9143917962},"clarke-chains":{inBaseUnits:20.1166195164},"clarke-links":{inBaseUnits:.201166195164},"sears-yards":{inBaseUnits:.9143984146160287},"sears-feet":{inBaseUnits:.3047994715386762},"sears-chains":{inBaseUnits:20.11676512155263},"sears-links":{inBaseUnits:.2011676512155263},"benoit-1895-a-yards":{inBaseUnits:.9143992},"benoit-1895-a-feet":{inBaseUnits:.3047997333333333},"benoit-1895-a-chains":{inBaseUnits:20.1167824},"benoit-1895-a-links":{inBaseUnits:.201167824},"benoit-1895-b-yards":{inBaseUnits:.9143992042898124},"benoit-1895-b-feet":{inBaseUnits:.3047997347632708},"benoit-1895-b-chains":{inBaseUnits:20.11678249437587},"benoit-1895-b-links":{inBaseUnits:.2011678249437587},"1865-feet":{inBaseUnits:.3048008333333334},"indian-feet":{inBaseUnits:.3047995102481469},"indian-1937-feet":{inBaseUnits:.30479841},"indian-1962-feet":{inBaseUnits:.3047996},"indian-1975-feet":{inBaseUnits:.3047995},"indian-yards":{inBaseUnits:.9143985307444408},"indian-1937-yards":{inBaseUnits:.91439523},"indian-1962-yards":{inBaseUnits:.9143988},"indian-1975-yards":{inBaseUnits:.9143985},miles:{inBaseUnits:1609.344},"statute-miles":{inBaseUnits:1609.344},"gold-coast-feet":{inBaseUnits:.3047997101815088},"british-1936-feet":{inBaseUnits:.3048007491},yards:{inBaseUnits:.9144},chains:{inBaseUnits:20.1168},links:{inBaseUnits:.201168},"sears-1922-truncated-yards":{inBaseUnits:.914398},"sears-1922-truncated-feet":{inBaseUnits:.3047993333333334},"sears-1922-truncated-chains":{inBaseUnits:20.116756},"sears-1922-truncated-links":{inBaseUnits:.20116756},"us-yards":{inBaseUnits:.9144018288036576},decimeters:{inBaseUnits:.1},inches:{inBaseUnits:.0254},"us-inches":{inBaseUnits:.0254000508001016},rods:{inBaseUnits:5.0292},"us-rods":{inBaseUnits:5.029210058420118},"us-nautical-miles":{inBaseUnits:1853.248},"uk-nautical-miles":{inBaseUnits:1853.184},smoots:{inBaseUnits:1.7018},"tx-vara":{inBaseUnits:.8466683600033867},points:{inBaseUnits:.0003527777777777778},micrometers:{inBaseUnits:1e-6},nanometers:{inBaseUnits:1e-9},"50-kilometers":{inBaseUnits:5e4},"150-kilometers":{inBaseUnits:15e4}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:qu(.001)},"square-centimeters":{inBaseUnits:qu(.01)},"square-decimeters":{inBaseUnits:qu(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:qu(1e3)},"square-inches":{inBaseUnits:qu(.0254)},"square-feet":{inBaseUnits:qu(.3048)},"square-yards":{inBaseUnits:qu(.9144)},"square-miles":{inBaseUnits:qu(1609.344)},"square-nautical-miles":{inBaseUnits:qu(1852)},"square-us-feet":{inBaseUnits:qu(1200/3937)},acres:{inBaseUnits:.0015625*qu(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*Wg(.001)},"cubic-centimeters":{inBaseUnits:1e3*Wg(.01)},"cubic-decimeters":{inBaseUnits:1e3*Wg(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*Wg(1e3)},"cubic-inches":{inBaseUnits:1e3*Wg(.0254)},"cubic-feet":{inBaseUnits:1e3*Wg(.3048)},"cubic-yards":{inBaseUnits:1e3*Wg(.9144)},"cubic-miles":{inBaseUnits:1e3*Wg(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},M5e=(()=>{const t={};for(const e in bI)for(const i in bI[e].units)t[i]=e;return t})();function A5e(t,e,i){return t*bI[i].units[e].inBaseUnits}function P5e(t,e,i){return t/bI[i].units[e].inBaseUnits}const O5e=["inches","feet","yards","miles","nautical-miles","us-feet","millimeters","centimeters","decimeters","meters","kilometers"],L5e=["metric","imperial"],oye=[...L5e,...O5e],D5e=new Map([["meters","square-meters"],["feet","square-feet"],["us-feet","square-us-feet"]]);function s9(t){const e=M5e[t];if(!e)throw new Error("unknown type");return e}function qre(t,e=null){return e=e||s9(t),bI[e].baseUnit===t}function Dn(t,e,i){if(e===i)return t;const r=s9(e);if(r!==s9(i))throw new Error("incompatible units");const n=qre(e,r)?t:A5e(t,e,r);return qre(i,r)?n:P5e(n,i,r)}function cEt(t,e,i,r=!1){if(!r&&y_(e))throw new Error("Unable to convert from an angular unit to a linear unit.");const n=v_(e);return n!==i&&(t=n?Dn(t,n,i):Dn(t*=kl(e),"meters",i)),t}function uEt(t,e,i,r=!1){if(!r&&y_(i))throw new Error("Unable to convert from a linear unit to an angular unit.");const n=v_(i);return e!==n&&(t=n?Dn(t,e,n):Dn(t,e,"meters")/kl(i)),t}function R5e(t){switch(t){case"metric":return"meters";case"imperial":return"feet";default:return t}}function dEt(t){return R5e(t)}function hEt(t){switch(t){case"metric":return"square-meters";case"imperial":return"square-feet";default:return t}}function pEt(t,e,i){switch(i){case"metric":return z5e(t,e);case"imperial":return N5e(t,e);default:return i}}function fEt(t,e,i){switch(i){case"metric":return F5e(t,e);case"imperial":return j5e(t,e);default:return i}}function z5e(t,e){const i=Dn(t,e,"meters");return Math.abs(i)<3e3?"meters":"kilometers"}function F5e(t,e){const i=Dn(t,e,"meters");return Math.abs(i)<1e5?"meters":"kilometers"}function N5e(t,e){const i=Dn(t,e,"feet");return Math.abs(i)<1e3?"feet":"miles"}function j5e(t,e){const i=Dn(t,e,"feet");return Math.abs(i)<1e5?"feet":"miles"}function mEt(t,e){const i=Dn(t,e,"square-meters");return Math.abs(i)<3e6?"square-meters":"square-kilometers"}function gEt(t,e){const i=Dn(t,e,"square-feet");return Math.abs(i)<1e6?"square-feet":"square-miles"}function V5e(t,e,i){return Dn(t,e,"meters")/(i*Math.PI/180)}function rZ(t){return I5e.fromJSON(t.toLowerCase())||null}function NR(t){if(t!=null&&!v5e(t))return 1;const e=kl(t);return e>1e5?1:e}function lye(t){return kl(t)>=k5e(t).metersPerDegree?"meters":v_(t)}function kl(t,e=hn.metersPerDegree){return B5e(t,!0)??e}function B5e(t,e=!1){const i=t?.wkid??null,r=t?.wkt2??t?.wkt??null;let n=null;if(i){if(YF(i))return Sp.metersPerDegree;if(ZF(i))return Tv.metersPerDegree;n=V$.values[V$[i]],!n&&e&&C5e.has(i)&&(n=E5e)}else r&&(dye(r)?n=Wre(sye.exec(r),n):uye(r)&&(n=Wre(aye.exec(r),n)));return n}function yEt(t){return y_(t)?1:kl(t)}function Wre(t,e){return t?.[1]?cye(t[1]):e}function cye(t){return parseFloat(t.split(",")[1])}function v_(t){const e=t?.wkid??null,i=t?.wkt2??t?.wkt??null;let r=null;if(e)r=V$.units[V$[e]];else if(i){const n=dye(i)?sye:uye(i)?aye:null;if(n){const s=n.exec(i);s?.[1]&&(r=H5e(s[1]))}}return r!=null?rZ(r):null}function vEt(t){const e=v_(t);return e!=null&&oye.includes(e)?e:null}function bEt(t){const e=lye(t);return e!=null&&oye.includes(e)?e:null}function wEt(t){const e=v_(t);return e==null?null:D5e.get(e)}function uye(t){return/^GEOCCS/i.test(t)}function dye(t){return/^\s*(?:PROJCS|PROJCRS|PROJECTEDCRS)/i.test(t)}const U5e=1e-7;function H5e(t){let i=/[\\"']([^\\"']+)/.exec(t)?.[1];if(!i||!rZ(i)){const r=cye(t);i=null;const n=V$.values;for(let s=0;s<n.length;++s)if(Math.abs(r-n[s])<U5e){i=V$.units[s];break}}return i}function _Et(t){const e=v_(t);if(e==null)return null;switch(e){case"feet":case"us-feet":case"clarke-feet":case"fathoms":case"nautical-miles":case"us-chains":case"us-links":case"us-miles":case"clarke-yards":case"clarke-chains":case"clarke-links":case"sears-yards":case"sears-feet":case"sears-chains":case"sears-links":case"benoit-1895-a-yards":case"benoit-1895-a-feet":case"benoit-1895-a-chains":case"benoit-1895-a-links":case"benoit-1895-b-yards":case"benoit-1895-b-feet":case"benoit-1895-b-chains":case"benoit-1895-b-links":case"1865-feet":case"indian-feet":case"indian-1937-feet":case"indian-1962-feet":case"indian-1975-feet":case"indian-yards":case"indian-1937-yards":case"indian-1962-yards":case"indian-1975-yards":case"statute-miles":case"gold-coast-feet":case"british-1936-feet":case"yards":case"chains":case"links":case"sears-1922-truncated-yards":case"sears-1922-truncated-feet":case"sears-1922-truncated-chains":case"sears-1922-truncated-links":case"us-yards":case"inches":case"us-inches":case"rods":case"us-rods":case"us-nautical-miles":case"uk-nautical-miles":case"smoots":case"tx-vara":case"points":return"imperial";case"millimeters":case"centimeters":case"meters":case"german-meters":case"kilometers":case"decimeters":case"micrometers":case"nanometers":case"50-kilometers":case"150-kilometers":return"metric"}return null}const G5e={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},q5e={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},W5e={esriDUDecimalDegrees:"degrees",esriDURadians:"radians"},Y5e=Gn()(G5e),Z5e=Gn()(q5e),xEt=Gn()(W5e);function qe(t,e,i){let r,n;return e===void 0?(n=t,r=[void 0]):typeof e!="string"?(n=t,r=[void 0],i=e):(n=e,r=Array.isArray(t)?t:[t]),(s,a)=>{const o=s.constructor.prototype;for(const l of r){const c=XW(s,l,n);c.write&&typeof c.write=="object"||(c.write={}),i&&(c.write.target=i),c.write.writer=o[a]}}}var mh,Yh;let at=(Yh=class extends _e{static fromJSON(e){if(!e)return null;if(e?.wkid===102100)return mh.WebMercator;if(e?.wkid===4326)return mh.WGS84;const i=new mh;return i.read(e),i}constructor(e){super(e),this.latestWkid=null,this.wkid=null,this.wkt=null,this.wkt2=null,this.vcsWkid=null,this.latestVcsWkid=null,this.imageCoordinateSystem=null}normalizeCtorArgs(e){return e&&typeof e=="object"?e:{[typeof e=="string"?"wkt":"wkid"]:e}}get isWGS84(){return Ev(this)}get isWebMercator(){return jp(this)}get isGeographic(){return y_(this)}get isWrappable(){return w5e(this)}get metersPerUnit(){return kl(this)}get unit(){return v_(this)||(this.isGeographic?"degrees":null)}writeWkt(e,i){this.wkid||(i.wkt=e)}clone(){if(this===mh.WGS84)return new mh(iye);if(this===mh.WebMercator)return new mh(rye);const e=new mh;return this.wkid!=null?(e.wkid=this.wkid,this.latestWkid!=null&&(e.latestWkid=this.latestWkid),this.vcsWkid!=null&&(e.vcsWkid=this.vcsWkid),this.latestVcsWkid!=null&&(e.latestVcsWkid=this.latestVcsWkid)):(this.wkt!=null&&(e.wkt=this.wkt),this.wkt2!=null&&(e.wkt2=this.wkt2)),this.imageCoordinateSystem&&(e.imageCoordinateSystem=de(this.imageCoordinateSystem)),e}equals(e){if(e==null)return!1;if(this.imageCoordinateSystem||e.imageCoordinateSystem){if(this.imageCoordinateSystem==null||e.imageCoordinateSystem==null)return!1;const{id:i,referenceServiceName:r}=e.imageCoordinateSystem,{geodataXform:n}=e.imageCoordinateSystem,s=this.imageCoordinateSystem;return i==null||n?JSON.stringify(s)===JSON.stringify(e.imageCoordinateSystem):r?s.id===i&&s.referenceServiceName===r:s.id===i}return os(this,e)}toJSON(e){return this.write(void 0,e)}},mh=Yh,Yh.GCS_NAD_1927=null,Yh.WGS84=null,Yh.WebMercator=null,Yh.PlateCarree=null,Yh);d([m({readOnly:!0})],at.prototype,"isWGS84",null),d([m({readOnly:!0})],at.prototype,"isWebMercator",null),d([m({readOnly:!0})],at.prototype,"isGeographic",null),d([m({readOnly:!0})],at.prototype,"isWrappable",null),d([m({type:li,json:{write:!0}})],at.prototype,"latestWkid",void 0),d([m({readOnly:!0})],at.prototype,"metersPerUnit",null),d([m({readOnly:!0})],at.prototype,"unit",null),d([m({type:li,json:{write:!0,origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkt==null}}}}}}})],at.prototype,"wkid",void 0),d([m({type:String,json:{origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkid==null}}}}}}})],at.prototype,"wkt",void 0),d([qe("wkt"),qe("web-scene","wkt")],at.prototype,"writeWkt",null),d([m({type:String,json:{write:!1}})],at.prototype,"wkt2",void 0),d([m({type:li,json:{write:!0}})],at.prototype,"vcsWkid",void 0),d([m({type:li,json:{write:!0}})],at.prototype,"latestVcsWkid",void 0),d([m()],at.prototype,"imageCoordinateSystem",void 0),at=mh=d([U("esri.geometry.SpatialReference")],at),at.prototype.toJSON.isDefaultToJSON=!0,at.GCS_NAD_1927=lt.freeze(new at({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'})),at.WGS84=lt.freeze(new at(iye)),at.WebMercator=lt.freeze(new at(rye)),at.PlateCarree=lt.freeze(new at(_5e));let Is=class extends _e{constructor(...e){super(...e),this.type=null,this.hasM=!1,this.hasZ=!1,this.spatialReference=at.WGS84}get cache(){return this.commitProperty("spatialReference"),{}}get extent(){return null}readSpatialReference(e,i){if(e instanceof at)return e;if(e!=null){const r=new at;return r.read(e,i),r}return e}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}clearCache(){this.notifyChange("cache")}getCacheValue(e){return this.cache[e]}setCacheValue(e,i){this.cache[e]=i}};d([m()],Is.prototype,"type",void 0),d([m({readOnly:!0})],Is.prototype,"cache",null),d([m({readOnly:!0})],Is.prototype,"extent",null),d([m({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Is.prototype,"hasM",void 0),d([m({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Is.prototype,"hasZ",void 0),d([m({type:at,json:{write:!0},value:at.WGS84})],Is.prototype,"spatialReference",void 0),d([Ve("spatialReference")],Is.prototype,"readSpatialReference",null),Is=d([U("esri.geometry.Geometry")],Is);function B$(t){if(t&&typeof t=="object"&&"type"in t&&t.type==="mesh")throw new ee("internal:mesh","Mesh geometries are not supported for this operation")}function X5e(t){t.forEach(B$)}const J5e=57.29577951308232,K5e=.017453292519943;function Yre(t){return t*J5e}function Zre(t){return t*K5e}function Xre(t){return t/hn.radius}function Jre(t){return Math.PI/2-2*Math.atan(Math.exp(-t/hn.radius))}function a9(t){return t.wkid!=null||t.wkt!=null}const g6=[0,0];function jR(t,e,i,r,n){const s=t,a=n;if(a.spatialReference=i,"x"in s&&"x"in a)[a.x,a.y]=e(s.x,s.y,g6,r);else if("xmin"in s&&"xmin"in a)[a.xmin,a.ymin]=e(s.xmin,s.ymin,g6,r),[a.xmax,a.ymax]=e(s.xmax,s.ymax,g6,r);else if("paths"in s&&"paths"in a||"rings"in s&&"rings"in a){const o="paths"in s?s.paths:s.rings,l=[];let c;for(let h=0;h<o.length;h++){const f=o[h];c=[],l.push(c);for(let g=0;g<f.length;g++)c.push(e(f[g][0],f[g][1],[0,0],r)),f[g].length>2&&c[g].push(f[g][2]),f[g].length>3&&c[g].push(f[g][3])}"paths"in a?a.paths=l:a.rings=l}else if("points"in s&&"points"in a){const o=s.points,l=[];for(let c=0;c<o.length;c++)l[c]=e(o[c][0],o[c][1],[0,0],r),o[c].length>2&&l[c].push(o[c][2]),o[c].length>3&&l[c].push(o[c][3]);a.points=l}return n}function _3(t,e){const i=t&&(a9(t)?t:t.spatialReference),r=e&&(a9(e)?e:e.spatialReference);return!(t&&"type"in t&&t.type==="mesh"||e&&"type"in e&&e.type==="mesh"||!i||!r)&&(!!os(r,i)||jp(r)&&Ev(i)||jp(i)&&Ev(r))}function XF(t,e){if(t==null)return null;const i=t.spatialReference,r=e&&(a9(e)?e:e.spatialReference);return _3(i,r)?os(i,r)?de(t):jp(r)?jR(t,vS,at.WebMercator,!1,de(t)):Ev(r)?jR(t,JF,at.WGS84,!1,de(t)):null:null}function vS(t,e,i=[0,0]){e>89.99999?e=89.99999:e<-89.99999&&(e=-89.99999);const r=Zre(e);return i[0]=Zre(t)*hn.radius,i[1]=hn.halfSemiMajorAxis*Math.log((1+Math.sin(r))/(1-Math.sin(r))),i}function JF(t,e,i=[0,0],r=!1){if(t===vI[0])i[0]=-180;else if(t===vI[1])i[0]=180;else{const n=Yre(t/hn.radius);i[0]=r?n:n-360*Math.floor((n+180)/360)}return i[1]=Yre(Math.PI/2-2*Math.atan(Math.exp(-e/hn.radius))),i}function Nm(t,e=!1,i=de(t)){return B$(t),B$(i),jR(t,vS,at.WebMercator,e,i)}function bS(t,e=!1,i=de(t)){return B$(t),B$(i),jR(t,JF,at.WGS84,e,i)}function hye(t,e){const i=t.x-e.x,r=t.y-e.y,n=t.z!=null&&e.z!=null?t.z-e.z:0;return Math.sqrt(i*i+r*r+n*n)}function Q5e(t){return pye(t,fye)?.[0]??null}function eFe(t){return pye(t,fye)?.[1]??null}function pye({x:t,y:e,spatialReference:i},r=[0,0]){if(i){if(jp(i))return JF(t,e,r);if(y_(i))return r[0]=t,r[1]=e,r}return null}const fye=[0,0];var x3;const y6=[0,0];function Kre(t){return t&&(t.declaredClass==="esri.geometry.SpatialReference"||t.wkid!=null)}let gt=x3=class extends Is{static copy(t,e){e._set("x",t._get("x")),e._set("y",t._get("y")),e._set("z",t._get("z")),e._set("m",t._get("m"));const i=t._get("spatialReference");e._set("spatialReference",lt.isFrozen(i)?i:i.clone())}constructor(...t){super(...t),this.x=0,this.y=0,this.z=void 0,this.m=void 0,this.type="point"}normalizeCtorArgs(t,e,i,r,n){let s;if(Array.isArray(t))s=t,n=e,t=s[0],e=s[1],i=s[2],r=s[3];else if(t&&typeof t=="object"){if(s=t,t=s.x!=null?s.x:s.longitude,e=s.y!=null?s.y:s.latitude,i=s.z,r=s.m,(n=s.spatialReference)&&n.declaredClass!=="esri.geometry.SpatialReference"&&(n=new at(n)),s.longitude!=null||s.latitude!=null){if(s.longitude==null)$e.getLogger(this).warn(".longitude=","Latitude was defined without longitude");else if(s.latitude==null)$e.getLogger(this).warn(".latitude=","Longitude was defined without latitude");else if(!s.declaredClass&&n?.isWebMercator){const o=vS(s.longitude,s.latitude,y6);t=o[0],e=o[1]}}}else Kre(i)?(n=i,i=null):Kre(r)&&(n=r,r=null);const a={x:t,y:e};return a.x==null&&a.y!=null?$e.getLogger(this).warn(".y=","Y coordinate was defined without an X coordinate"):a.y==null&&a.x!=null&&$e.getLogger(this).warn(".x=","X coordinate was defined without a Y coordinate"),n!=null&&(a.spatialReference=n),i!=null&&(a.z=i),r!=null&&(a.m=r),a}get cache(){return this.commitProperty("x"),this.commitProperty("y"),this.commitProperty("z"),this.commitProperty("m"),this.commitProperty("spatialReference"),{}}get hasM(){return this.m!==void 0}set hasM(t){t!==(this._get("m")!==void 0)&&(this._set("m",t?0:void 0),this._set("hasM",t))}get hasZ(){return this.z!==void 0}set hasZ(t){t!==(this._get("z")!==void 0)&&(this._set("z",t?0:void 0),this._set("hasZ",t))}get latitude(){return eFe(this)}set latitude(t){const{spatialReference:e,x:i}=this;t!=null&&e&&(e.isWebMercator?this._set("y",vS(i,t,y6)[1]):e.isGeographic&&this._set("y",t),this._set("latitude",t))}get longitude(){return Q5e(this)}set longitude(t){const{y:e,spatialReference:i}=this;t!=null&&i&&(i.isWebMercator?this._set("x",vS(t,e,y6)[0]):i.isGeographic&&this._set("x",t),this._set("longitude",t))}writeX(t,e,i){e[i]=isNaN(t)?"NaN":t}readX(t){return typeof t=="string"?NaN:t}clone(){const t=new x3;return t.x=this.x,t.y=this.y,t.z=this.z,t.m=this.m,t.spatialReference=this.spatialReference,t}copy(t){return x3.copy(t,this),this}equals(t){if(t==null)return!1;const{x:e,y:i,z:r,m:n,spatialReference:s}=this,{z:a,m:o}=t;let{x:l,y:c,spatialReference:h}=t;if(!s.equals(h))if(s.isWebMercator&&h.isWGS84)[l,c]=vS(l,c),h=s;else{if(!s.isWGS84||!h.isWebMercator)return!1;[l,c]=JF(l,c),h=s}return e===l&&i===c&&r===a&&n===o&&s.wkid===h.wkid}offset(t,e,i){return this.x+=t,this.y+=e,i!=null&&(this.z=(this.z??0)+i),this}normalize(){if(!this.spatialReference)return this;const t=No(this.spatialReference);if(!t)return this;let e=this.x;const[i,r]=t.valid,n=2*r;let s;return e>r?(s=Math.ceil(Math.abs(e-r)/n),e-=s*n):e<i&&(s=Math.ceil(Math.abs(e-i)/n),e+=s*n),this._set("x",e),this}distance(t){return hye(this,t)}toArray(){const t=this.hasZ,e=this.hasM;return t&&e?[this.x,this.y,this.z,this.m]:t?[this.x,this.y,this.z]:e?[this.x,this.y,this.m]:[this.x,this.y]}toJSON(t){return this.write({},t)}};d([m({readOnly:!0})],gt.prototype,"cache",null),d([m({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],gt.prototype,"hasM",null),d([m({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],gt.prototype,"hasZ",null),d([m({type:Number})],gt.prototype,"latitude",null),d([m({type:Number})],gt.prototype,"longitude",null),d([m({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),Ii(t=>isNaN(t)?t:Po(t))],gt.prototype,"x",void 0),d([qe("x")],gt.prototype,"writeX",null),d([Ve("x")],gt.prototype,"readX",null),d([m({type:Number,json:{write:!0}})],gt.prototype,"y",void 0),d([m({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasZ}}}}})],gt.prototype,"z",void 0),d([m({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasM}}}}})],gt.prototype,"m",void 0),gt=x3=d([U("esri.geometry.Point")],gt),gt.prototype.toJSON.isDefaultToJSON=!0;const v6=[0,0];function BM(t,e){return e!=null&&ko(t,e.x,e.y,e.z)}function $Et(t,e){if(!e.points?.length)return!1;for(const i of e.points)if(!U$(t,i))return!1;return!0}function tFe(t,e){const{xmin:i,ymin:r,zmin:n,xmax:s,ymax:a,zmax:o}=e;return t.hasZ&&e.hasZ?ko(t,i,r,n)&&ko(t,i,a,n)&&ko(t,s,a,n)&&ko(t,s,r,n)&&ko(t,i,r,o)&&ko(t,i,a,o)&&ko(t,s,a,o)&&ko(t,s,r,o):ko(t,i,r)&&ko(t,i,a)&&ko(t,s,a)&&ko(t,s,r)}function U$(t,e){return ko(t,e[0],e[1])}function iFe(t,e){return ko(t,e[0],e[1],e[2])}function ko(t,e,i,r){return e>=t.xmin&&e<=t.xmax&&i>=t.ymin&&i<=t.ymax&&(r==null||!t.hasZ||r>=t.zmin&&r<=t.zmax)}function nZ(t,e){return v6[1]=e.y,v6[0]=e.x,rFe(t,v6)}function rFe(t,e){return sZ(t.rings,e)}function sZ(t,e){if(!t||t.length<1)return!1;if(nFe(t))return Qre(!1,t,e);let i=!1;for(let r=0,n=t.length;r<n;r++)i=Qre(i,t[r],e);return i}function nFe(t){return!Array.isArray(t[0][0])}function Qre(t,e,i){const[r,n]=i;let s=t,a=0;for(let o=0,l=e.length;o<l;o++){a++,a===l&&(a=0);const[c,h]=e[o],[f,g]=e[a];(h<n&&g>=n||g<n&&h>=n)&&c+(n-h)/(g-h)*(f-c)<r&&(s=!s)}return s}function sFe(t,e){return BM(t,e)}function aFe(t,e){const i=t.hasZ&&e.hasZ;let r,n,s;if(t.xmin<=e.xmin){if(r=e.xmin,t.xmax<r)return!1}else if(r=t.xmin,e.xmax<r)return!1;if(t.ymin<=e.ymin){if(n=e.ymin,t.ymax<n)return!1}else if(n=t.ymin,e.ymax<n)return!1;if(i&&e.hasZ){if(t.zmin<=e.zmin){if(s=e.zmin,t.zmax<s)return!1}else if(s=t.zmin,e.zmax<s)return!1}return!0}function oFe(t,e){const{points:i,hasZ:r}=e,n=r?iFe:U$;for(const s of i)if(n(t,s))return!0;return!1}const Yw=[0,0],Zw=[0,0],Xw=[0,0],Jw=[0,0],lFe=[Yw,Zw,Xw,Jw],mye=[[Xw,Yw],[Yw,Zw],[Zw,Jw],[Jw,Xw]];function cFe(t,e){return uFe(t,e.rings)}function uFe(t,e){Yw[0]=t.xmin,Yw[1]=t.ymax,Zw[0]=t.xmax,Zw[1]=t.ymax,Xw[0]=t.xmin,Xw[1]=t.ymin,Jw[0]=t.xmax,Jw[1]=t.ymin;for(const i of lFe)if(sZ(e,i))return!0;for(const i of e){if(!i.length)continue;let r=i[0];if(U$(t,r))return!0;for(let n=1;n<i.length;n++){const s=i[n];if(U$(t,s)||gye(r,s,mye))return!0;r=s}}return!1}function dFe(t,e){Yw[0]=t.xmin,Yw[1]=t.ymax,Zw[0]=t.xmax,Zw[1]=t.ymax,Xw[0]=t.xmin,Xw[1]=t.ymin,Jw[0]=t.xmax,Jw[1]=t.ymin;const i=e.paths;for(const r of i){if(!i.length)continue;let n=r[0];if(U$(t,n))return!0;for(let s=1;s<r.length;s++){const a=r[s];if(U$(t,a)||gye(n,a,mye))return!0;n=a}}return!1}const Bs=[0,0];function hFe(t){for(let e=0;e<t.length;e++){const i=t[e];for(let n=0;n<i.length-1;n++){const s=i[n],a=i[n+1];for(let o=e+1;o<t.length;o++)for(let l=0;l<t[o].length-1;l++){const c=t[o][l],h=t[o][l+1];if(VR(s,a,c,h,Bs)&&!(Bs[0]===s[0]&&Bs[1]===s[1]||Bs[0]===c[0]&&Bs[1]===c[1]||Bs[0]===a[0]&&Bs[1]===a[1]||Bs[0]===h[0]&&Bs[1]===h[1]))return!0}}const r=i.length;if(!(r<=4))for(let n=0;n<r-3;n++){let s=r-1;n===0&&(s=r-2);const a=i[n],o=i[n+1];for(let l=n+2;l<s;l++){const c=i[l],h=i[l+1];if(VR(a,o,c,h,Bs)&&!(Bs[0]===a[0]&&Bs[1]===a[1]||Bs[0]===c[0]&&Bs[1]===c[1]||Bs[0]===o[0]&&Bs[1]===o[1]||Bs[0]===h[0]&&Bs[1]===h[1]))return!0}}}return!1}function gye(t,e,i){for(let r=0;r<i.length;r++)if(VR(t,e,i[r][0],i[r][1]))return!0;return!1}function VR(t,e,i,r,n){const[s,a]=t,[o,l]=e,[c,h]=i,[f,g]=r,y=f-c,b=s-c,_=o-s,S=g-h,$=a-h,C=l-a,I=S*_-y*C;if(I===0)return!1;const P=(y*$-S*b)/I,O=(_*$-C*b)/I;return P>=0&&P<=1&&O>=0&&O<=1&&(n&&(n[0]=s+P*(o-s),n[1]=a+P*(l-a)),!0)}function pFe(t){switch(t){case"esriGeometryEnvelope":case"extent":return aFe;case"esriGeometryMultipoint":case"multipoint":return oFe;case"esriGeometryPoint":case"point":return sFe;case"esriGeometryMultiPatch":case"multipatch":case"esriGeometryPolygon":case"polygon":return cFe;case"esriGeometryPolyline":case"polyline":return dFe}}var rd;function fFe(t){return t&&(t.declaredClass==="esri.geometry.SpatialReference"||t.wkid!=null)}function Yg(t,e,i){return e==null?i:i==null?e:t(e,i)}let Wt=rd=class extends Is{constructor(...t){super(...t),this.type="extent",this.xmin=0,this.ymin=0,this.mmin=void 0,this.zmin=void 0,this.xmax=0,this.ymax=0,this.mmax=void 0,this.zmax=void 0}normalizeCtorArgs(t,e,i,r,n){return fFe(t)?{spatialReference:t,xmin:0,ymin:0,xmax:0,ymax:0}:typeof t=="object"?(t.spatialReference=t.spatialReference==null?at.WGS84:t.spatialReference,t):{xmin:t,ymin:e,xmax:i,ymax:r,spatialReference:n??at.WGS84}}static fromPoint(t){return new rd({xmin:t.x,ymin:t.y,zmin:t.z,xmax:t.x,ymax:t.y,zmax:t.z,spatialReference:t.spatialReference})}get cache(){return this.commitProperty("xmin"),this.commitProperty("ymin"),this.commitProperty("zmin"),this.commitProperty("mmin"),this.commitProperty("xmax"),this.commitProperty("ymax"),this.commitProperty("zmax"),this.commitProperty("mmax"),this.commitProperty("spatialReference"),{}}get center(){const t=new gt({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});return this.hasZ&&(t.z=.5*(this.zmin+this.zmax)),this.hasM&&(t.m=.5*(this.mmin+this.mmax)),t}get extent(){return this.clone()}get hasM(){return this.mmin!=null&&this.mmax!=null}get hasZ(){return this.zmin!=null&&this.zmax!=null}get height(){return Math.abs(this.ymax-this.ymin)}get width(){return Math.abs(this.xmax-this.xmin)}centerAt(t){const e=this.center;return t.z!=null&&this.hasZ?this.offset(t.x-e.x,t.y-e.y,t.z-e.z):this.offset(t.x-e.x,t.y-e.y)}clone(){const t=new rd;return t.xmin=this.xmin,t.ymin=this.ymin,t.xmax=this.xmax,t.ymax=this.ymax,t.spatialReference=this.spatialReference,this.zmin!=null&&(t.zmin=this.zmin,t.zmax=this.zmax),this.mmin!=null&&(t.mmin=this.mmin,t.mmax=this.mmax),t}contains(t){if(!t)return!1;const e=this.spatialReference,i=t.spatialReference;return e&&i&&!e.equals(i)&&_3(e,i)&&(t=e.isWebMercator?Nm(t):bS(t,!0)),t.type==="point"?BM(this,t):t.type==="extent"&&tFe(this,t)}equals(t){if(this===t)return!0;if(t==null)return!1;const e=this.spatialReference,i=t.spatialReference;return e&&i&&!e.equals(i)&&_3(e,i)&&(t=e.isWebMercator?Nm(t):bS(t,!0)),this.xmin===t.xmin&&this.ymin===t.ymin&&this.zmin===t.zmin&&this.mmin===t.mmin&&this.xmax===t.xmax&&this.ymax===t.ymax&&this.zmax===t.zmax&&this.mmax===t.mmax}expand(t){const e=.5*(1-t),i=this.width*e,r=this.height*e;if(this.xmin+=i,this.ymin+=r,this.xmax-=i,this.ymax-=r,this.hasZ){const n=(this.zmax-this.zmin)*e;this.zmin+=n,this.zmax-=n}if(this.hasM){const n=(this.mmax-this.mmin)*e;this.mmin+=n,this.mmax-=n}return this}intersects(t){if(t==null)return!1;t.type==="mesh"&&(t=t.extent);const e=this.spatialReference,i=t.spatialReference;return e&&i&&!os(e,i)&&_3(e,i)&&(t=e.isWebMercator?Nm(t):bS(t,!0)),pFe(t.type)(this,t)}normalize(){const t=this._normalize(!1,!0);return Array.isArray(t)?t:[t]}offset(t,e,i){return this.xmin+=t,this.ymin+=e,this.xmax+=t,this.ymax+=e,i!=null&&(this.zmin+=i,this.zmax+=i),this}shiftCentralMeridian(){return this._normalize(!0)}union(t){return this===t||(this.xmin=Math.min(this.xmin,t.xmin),this.ymin=Math.min(this.ymin,t.ymin),this.xmax=Math.max(this.xmax,t.xmax),this.ymax=Math.max(this.ymax,t.ymax),(this.hasZ||t.hasZ)&&(this.zmin=Yg(Math.min,this.zmin,t.zmin),this.zmax=Yg(Math.max,this.zmax,t.zmax)),(this.hasM||t.hasM)&&(this.mmin=Yg(Math.min,this.mmin,t.mmin),this.mmax=Yg(Math.max,this.mmax,t.mmax))),this}intersection(t){return this===t?this:t!=null&&this.intersects(t)?(this.xmin=Math.max(this.xmin,t.xmin),this.ymin=Math.max(this.ymin,t.ymin),this.xmax=Math.min(this.xmax,t.xmax),this.ymax=Math.min(this.ymax,t.ymax),(this.hasZ||t.hasZ)&&(this.zmin=Yg(Math.max,this.zmin,t.zmin),this.zmax=Yg(Math.min,this.zmax,t.zmax)),(this.hasM||t.hasM)&&(this.mmin=Yg(Math.max,this.mmin,t.mmin),this.mmax=Yg(Math.min,this.mmax,t.mmax)),this):null}toJSON(t){return this.write({},t)}_shiftCM(t=No(this.spatialReference)){if(!t||!this.spatialReference)return this;const e=this.spatialReference,i=this._getCM(t);if(i){const r=e.isWebMercator?bS(i):i;this.xmin-=i.x,this.xmax-=i.x,e.isWebMercator||(r.x=b6(r.x,t).x),this.spatialReference=new at(Dv((e.isWGS84?t.altTemplate:null)??t.wkTemplate,{Central_Meridian:r.x}))}return this}_getCM(t){let e=null;const[i,r]=t.valid,n=this.xmin,s=this.xmax;return n>=i&&n<=r&&s>=i&&s<=r||(e=this.center),e}_normalize(t,e,i){const r=this.spatialReference;if(!r)return this;const n=i??No(r);if(n==null)return this;const s=this._getParts(n).map(l=>l.extent);if(s.length<2)return s[0]||this;if(s.length>2)return t?this._shiftCM(n):this.set({xmin:n.valid[0],xmax:n.valid[1]});if(t)return this._shiftCM(n);if(e)return s;let a=!0,o=!0;return s.forEach(l=>{l.hasZ||(a=!1),l.hasM||(o=!1)}),{rings:s.map(l=>{const c=[[l.xmin,l.ymin],[l.xmin,l.ymax],[l.xmax,l.ymax],[l.xmax,l.ymin],[l.xmin,l.ymin]];if(a){const h=(l.zmax-l.zmin)/2;for(let f=0;f<c.length;f++)c[f].push(h)}if(o){const h=(l.mmax-l.mmin)/2;for(let f=0;f<c.length;f++)c[f].push(h)}return c}),hasZ:a,hasM:o,spatialReference:r}}_getParts(t){let e=this.cache._parts;if(!e){e=[];const{ymin:n,ymax:s,spatialReference:a}=this,o=this.width,l=this.xmin,c=this.xmax;let h;t=t||No(a);const[f,g]=t.valid;h=b6(this.xmin,t);const y=h.x,b=h.frameId;h=b6(this.xmax,t);const _=h.x,S=h.frameId,$=y===_&&o>0;if(o>2*g){const C=new rd(l<c?y:_,n,g,s,a),I=new rd(f,n,l<c?_:y,s,a),P=new rd(0,n,g,s,a),O=new rd(f,n,0,s,a),N=[],R=[];C.contains(P)&&N.push(b),C.contains(O)&&R.push(b),I.contains(P)&&N.push(S),I.contains(O)&&R.push(S);for(let G=b+1;G<S;G++)N.push(G),R.push(G);e.push({extent:C,frameIds:[b]},{extent:I,frameIds:[S]},{extent:P,frameIds:N},{extent:O,frameIds:R})}else y>_||$?e.push({extent:new rd(y,n,g,s,a),frameIds:[b]},{extent:new rd(f,n,_,s,a),frameIds:[S]}):e.push({extent:new rd(y,n,_,s,a),frameIds:[b]});this.cache._parts=e}const i=this.hasZ,r=this.hasM;if(i||r){const n={};i&&(n.zmin=this.zmin,n.zmax=this.zmax),r&&(n.mmin=this.mmin,n.mmax=this.mmax);for(let s=0;s<e.length;s++)e[s].extent.set(n)}return e}};function b6(t,e){const[i,r]=e.valid,n=2*r;let s,a=0;return t>r?(s=Math.ceil(Math.abs(t-r)/n),t-=s*n,a=s):t<i&&(s=Math.ceil(Math.abs(t-i)/n),t+=s*n,a=-s),{x:t,frameId:a}}d([m({readOnly:!0})],Wt.prototype,"cache",null),d([m({readOnly:!0})],Wt.prototype,"center",null),d([m({readOnly:!0})],Wt.prototype,"extent",null),d([m({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],Wt.prototype,"hasM",null),d([m({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],Wt.prototype,"hasZ",null),d([m({readOnly:!0})],Wt.prototype,"height",null),d([m({readOnly:!0})],Wt.prototype,"width",null),d([m({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],Wt.prototype,"xmin",void 0),d([m({type:Number,json:{write:!0}})],Wt.prototype,"ymin",void 0),d([m({type:Number,json:{origins:{"web-scene":{write:!1}},read:t=>t??void 0,write:{overridePolicy(){return{enabled:this.hasM}}}}})],Wt.prototype,"mmin",void 0),d([m({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Wt.prototype,"zmin",void 0),d([m({type:Number,json:{write:!0}})],Wt.prototype,"xmax",void 0),d([m({type:Number,json:{write:!0}})],Wt.prototype,"ymax",void 0),d([m({type:Number,json:{origins:{"web-scene":{write:!1}},read:t=>t??void 0,write:{overridePolicy(){return{enabled:this.hasM}}}}})],Wt.prototype,"mmax",void 0),d([m({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Wt.prototype,"zmax",void 0),Wt=rd=d([U("esri.geometry.Extent")],Wt),Wt.prototype.toJSON.isDefaultToJSON=!0;let sO;function mFe(t){return sO&&!sO.destroyed||(sO=t()),sO}var o9;const gFe=new Gt({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});let Rn=o9=class extends lt{constructor(t){super(t),this.categories=null,this.disableExtraQuery=!1,this.extent=null,this.filter=null,this.num=10,this.query=null,this.sortField=null,this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(t){t!=="asc"&&t!=="desc"||this._set("sortOrder",t)}clone(){return new o9({categories:this.categories?de(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(t,e){let i=[];this.categories&&(i=this.categories.map(a=>Array.isArray(a)?JSON.stringify(a):a));let r="";if(this.extent){const a=XF(this.extent,at.WGS84);a!=null&&(r=`${a.xmin},${a.ymin},${a.xmax},${a.ymax}`)}let n=this.query;!this.disableExtraQuery&&t.extraQuery&&(n="("+n+")"+t.extraQuery);const s={categories:i,bbox:r,q:n,filter:this.filter,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(s.sortField=this.sortField.split(",").map(a=>gFe.toJSON(a.trim())).join(","),s.sortOrder=this.sortOrder),{query:{...e,...s}}}};d([m()],Rn.prototype,"categories",void 0),d([m()],Rn.prototype,"disableExtraQuery",void 0),d([m({type:Wt})],Rn.prototype,"extent",void 0),d([m()],Rn.prototype,"filter",void 0),d([m()],Rn.prototype,"num",void 0),d([m()],Rn.prototype,"query",void 0),d([m()],Rn.prototype,"sortField",void 0),d([m()],Rn.prototype,"sortOrder",null),d([m()],Rn.prototype,"start",void 0),Rn=o9=d([U("esri.portal.PortalQueryParams")],Rn);var l9;let Pn=l9=class extends _e{constructor(t){super(t),this.access=null,this.created=null,this.description=null,this.id=null,this.isInvitationOnly=!1,this.modified=null,this.owner=null,this.portal=null,this.snippet=null,this.sortField=null,this.sortOrder=null,this.sourceJSON=null,this.tags=null,this.title=null}get thumbnailUrl(){const t=this.url,e=this.thumbnail;return t&&e&&this.portal?this.portal?.normalizeUrl(`${t}/info/${e}?f=json`):null}get url(){const t=this.portal?.restUrl;return t?t+"/community/groups/"+this.id:null}fetchCategorySchema(t){return this.portal.request(this.url+"/categorySchema",t).then(e=>{const i=e.categorySchema||[];return i.some(r=>r.source==="contentCategorySetsGroupQuery.LivingAtlas")?this._fetchCategorySchemaSet("LivingAtlas",t):i})}fetchMembers(t){return this.portal.request(this.url+"/users",t)}getThumbnailUrl(t){let e=this.thumbnailUrl;return e&&t&&(e+=`&w=${t}`),e}toJSON(){throw new ee("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const e=new l9({sourceJSON:t});return e.read(t),e}queryItems(t,e){let i=dn(Rn,t);const r=this.portal;return parseFloat(r.currentVersion)>5?(i=i||new Rn,r.queryPortal(`/content/groups/${this.id}/search`,i,"PortalItem",e)):(i=i?i.clone():new Rn,i.query="group:"+this.id+(i.query?" "+i.query:""),r.queryItems(i,e))}_fetchCategorySchemaSet(t,e){const i=this.portal;return i.fetchSelf(i.authMode,!0,e).then(r=>{const n=r.contentCategorySetsGroupQuery;if(n){const s=new Rn({disableExtraQuery:!0,num:1,query:n});return i.queryGroups(s,e)}throw new ee("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")}).then(r=>{if(r.total){const n=r.results[0],s=new Rn({num:1,query:`typekeywords:"${t}"`});return n.queryItems(s,e)}throw new ee("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")}).then(r=>r.total?r.results[0].fetchData("json",e).then(n=>{const s=n?.categorySchema;return s?.length?s:[]}):[])}};d([m()],Pn.prototype,"access",void 0),d([m({type:Date})],Pn.prototype,"created",void 0),d([m()],Pn.prototype,"description",void 0),d([m()],Pn.prototype,"id",void 0),d([m()],Pn.prototype,"isInvitationOnly",void 0),d([m({type:Date})],Pn.prototype,"modified",void 0),d([m()],Pn.prototype,"owner",void 0),d([m()],Pn.prototype,"portal",void 0),d([m()],Pn.prototype,"snippet",void 0),d([m()],Pn.prototype,"sortField",void 0),d([m()],Pn.prototype,"sortOrder",void 0),d([m()],Pn.prototype,"sourceJSON",void 0),d([m()],Pn.prototype,"tags",void 0),d([m()],Pn.prototype,"thumbnail",void 0),d([m({readOnly:!0})],Pn.prototype,"thumbnailUrl",null),d([m()],Pn.prototype,"title",void 0),d([m({readOnly:!0})],Pn.prototype,"url",null),Pn=l9=d([U("esri.portal.PortalGroup")],Pn);let Ub=class extends lt{constructor(e){super(e),this.nextQueryParams=null,this.queryParams=null,this.results=null,this.total=null}};d([m()],Ub.prototype,"nextQueryParams",void 0),d([m()],Ub.prototype,"queryParams",void 0),d([m()],Ub.prototype,"results",void 0),d([m()],Ub.prototype,"total",void 0),Ub=d([U("esri.portal.PortalQueryResult")],Ub);let Rf=class extends _e{constructor(e){super(e),this.created=null,this.id=null,this.portal=null,this.title=null,this.username=null}get url(){const e=this.portal?.restUrl;return e?`${e}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new ee("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented")}};d([m({type:Date})],Rf.prototype,"created",void 0),d([m()],Rf.prototype,"id",void 0),d([m()],Rf.prototype,"portal",void 0),d([m()],Rf.prototype,"title",void 0),d([m({readOnly:!0})],Rf.prototype,"url",null),d([m()],Rf.prototype,"username",void 0),Rf=d([U("esri.portal.PortalFolder")],Rf);var c9;let ur=c9=class extends _e{constructor(t){super(t),this.access=null,this.created=null,this.culture=null,this.description=null,this.email=null,this.fullName=null,this.id=null,this.modified=null,this.orgId=null,this.portal=null,this.preferredView=null,this.privileges=null,this.region=null,this.role=null,this.roleId=null,this.sourceJSON=null,this.units=null,this.username=null,this.userLicenseTypeId=null,this.userType=null}get thumbnailUrl(){const t=this.url,e=this.thumbnail;return t&&e?this.portal.normalizeUrl(`${t}/info/${e}?f=json`):null}get userContentUrl(){const t=this.portal?.restUrl;return t?`${t}/content/users/${this.id}`:null}get url(){const t=this.portal?.restUrl;return t?`${t}/community/users/${this.id}`:null}addItem(t){const e=t&&t.item,i=t?.data,r=t?.folder,n={method:"post"};e&&(n.query=e.createPostQuery(),i!=null&&(typeof i=="string"?n.query.text=i:typeof i=="object"&&(n.query.text=JSON.stringify(i))));let s=this.userContentUrl;return r&&(s+="/"+(typeof r=="string"?r:r.id)),this.portal.request(s+"/addItem",n).then(a=>(e.id=a.id,e.portal=this.portal,e.loaded?e.reload():e.load()))}async deleteItem(t,e=!1){let i=this.userContentUrl;t.ownerFolder&&(i+="/"+t.ownerFolder);const r=e?{permanentDelete:!0}:{};await this.portal.request(i+`/items/${t.id}/delete`,{method:"post",query:r}),t.id=null,t.portal=null}async deleteItems(t,e=!1){t=t.slice();const i=this.userContentUrl+"/deleteItems",r=[],n=t.map(s=>s.id);if(n.length){const s={method:"post",query:{items:n.join(","),permanentDelete:e}},a=await this.portal.request(i,s);for(const o of a.results){const l=t.find(f=>o.itemId===f.id),c=o.success;let h=null;c?(l.id=null,l.portal=null):o.error&&(h=new ee("portal:delete-item-failed",o.error.message,o.error)),r.push({item:l,success:c,error:h})}}return r}fetchFolders(){const t={query:{num:1}};return this.portal.request(this.userContentUrl??"",t).then(e=>{let i;return i=e&&e.folders?e.folders.map(r=>{const n=Rf.fromJSON(r);return n.portal=this.portal,n}):[],i})}fetchGroups(){return this.portal.request(this.url??"").then(t=>{let e;return e=t&&t.groups?t.groups.map(i=>{const r=Pn.fromJSON(i);return r.portal=this.portal,r}):[],e})}async fetchItems(t){t??={};let e=this.userContentUrl??"";t.folder&&(e+="/"+t.folder.id);const{default:i}=await fe(()=>Promise.resolve().then(()=>kbe),void 0),r={folders:!1,inRecycleBin:!!t.inRecycleBin||null,foldersContent:!(t.folder||!t.includeSubfolderItems)||null,num:t.num||10,start:t.start||1,sortField:t.sortField||"created",sortOrder:t.sortOrder||"asc"},n=await this.portal.request(e,{query:r});let s;return n?.items?(s=n.items.map(a=>{const o=i.fromJSON(a);return o.portal=this.portal,o}),await Promise.all(s.map(a=>a.load())),{items:s,nextStart:n.nextStart,total:n.total}):{items:[],nextStart:-1,total:0}}fetchTags(){return this.portal.request(this.url+"/tags").then(t=>t.tags)}getThumbnailUrl(t){let e=this.thumbnailUrl;return e&&t&&(e+=`&w=${t}`),e}queryFavorites(t){return this.favGroupId?(this._favGroup||(this._favGroup=new Pn({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(t)):Promise.reject(new ee("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}async restoreItem(t,e){const i=this.userContentUrl,r=e?{folderID:typeof e=="string"?e:e.id}:null;await this.portal.request(i+`/items/${t.id}/restore`,{method:"post",query:r})}toJSON(){throw new ee("internal:not-yet-implemented","PortalUser.toJSON is not yet implemented")}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const e=new c9({sourceJSON:t});return e.read(t),e}};d([m()],ur.prototype,"access",void 0),d([m({type:Date})],ur.prototype,"created",void 0),d([m()],ur.prototype,"culture",void 0),d([m()],ur.prototype,"description",void 0),d([m()],ur.prototype,"email",void 0),d([m()],ur.prototype,"favGroupId",void 0),d([m()],ur.prototype,"fullName",void 0),d([m()],ur.prototype,"id",void 0),d([m({type:Date})],ur.prototype,"modified",void 0),d([m()],ur.prototype,"orgId",void 0),d([m()],ur.prototype,"portal",void 0),d([m()],ur.prototype,"preferredView",void 0),d([m()],ur.prototype,"privileges",void 0),d([m()],ur.prototype,"region",void 0),d([m()],ur.prototype,"role",void 0),d([m()],ur.prototype,"roleId",void 0),d([m()],ur.prototype,"sourceJSON",void 0),d([m()],ur.prototype,"thumbnail",void 0),d([m({readOnly:!0})],ur.prototype,"thumbnailUrl",null),d([m()],ur.prototype,"units",void 0),d([m({readOnly:!0})],ur.prototype,"userContentUrl",null),d([m({readOnly:!0})],ur.prototype,"url",null),d([m()],ur.prototype,"username",void 0),d([m()],ur.prototype,"userLicenseTypeId",void 0),d([m()],ur.prototype,"userType",void 0),ur=c9=d([U("esri.portal.PortalUser")],ur);var Wl;let d2;const ene={PortalGroup:()=>Promise.resolve({default:Pn}),PortalItem:()=>fe(()=>Promise.resolve().then(()=>kbe),void 0),PortalUser:()=>Promise.resolve({default:ur})};var Zh;let Ue=(Zh=class extends rg(Fv){constructor(e){super(e),this._esriIdCredentialCreateHandle=null,this.access=null,this.allSSL=!1,this.authMode="auto",this.authorizedCrossOriginDomains=null,this.basemapGalleryGroupQuery=null,this.basemapGalleryGroupQuery3D=null,this.g3DTilesGalleryGroupQuery=null,this.g3dTilesEnabled=null,this.bingKey=null,this.canListApps=!1,this.canListData=!1,this.canListPreProvisionedItems=!1,this.canProvisionDirectPurchase=!1,this.canSearchPublic=!0,this.canShareBingPublic=!1,this.canSharePublic=!1,this.canSignInArcGIS=!1,this.canSignInIDP=!1,this.colorSetsGroupQuery=null,this.commentsEnabled=!1,this.created=null,this.culture=null,this.customBaseUrl=null,this.default3DBasemapQuery=null,this.defaultBasemap=null,this.defaultDevBasemap=null,this.defaultExtent=null,this.defaultVectorBasemap=null,this.description=null,this.devBasemapGalleryGroupQuery=null,this.eueiEnabled=null,this.featuredGroups=null,this.featuredItemsGroupQuery=null,this.galleryTemplatesGroupQuery=null,this.layoutGroupQuery=null,this.livingAtlasGroupQuery=null,this.hasCategorySchema=!1,this.hasClassificationSchema=!1,this.helperServices=null,this.homePageFeaturedContent=null,this.homePageFeaturedContentCount=null,this.httpPort=null,this.httpsPort=null,this.id=null,this.ipCntryCode=null,this.isPortal=!1,this.isReadOnly=!1,this.layerTemplatesGroupQuery=null,this.maxTokenExpirationMinutes=null,this.modified=null,this.name=null,this.portalHostname=null,this.portalMode=null,this.portalProperties=null,this.region=null,this.recycleBinEnabled=!1,this.rotatorPanels=null,this.showHomePageDescription=!1,this.sourceJSON=null,this.supportsHostedServices=!1,this.symbolSetsGroupQuery=null,this.templatesGroupQuery=null,this.units=null,this.url=yi.portalUrl,this.urlKey=null,this.user=null,this.use3dBasemaps=!0,this.useDefault3dBasemap=!1,this.useStandardizedQuery=!1,this.useVectorBasemaps=!1,this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(e){return typeof e=="string"?{url:e}:e}destroy(){tne.unregister(this),this.defaultBasemap=Ir(this.defaultBasemap),this.defaultDevBasemap=Ir(this.defaultDevBasemap),this.defaultVectorBasemap=Ir(this.defaultVectorBasemap),this._esriIdCredentialCreateHandle=Rr(this._esriIdCredentialCreateHandle)}readAuthorizedCrossOriginDomains(e){if(e)for(const i of e)yi.request.trustedServers.includes(i)||yi.request.trustedServers.push(i);return e}readDefaultBasemap(e){return this._readBasemap(e)}readDefaultDevBasemap(e){return this._readBasemap(e)}readDefaultVectorBasemap(e){return this._readBasemap(e)}get extraQuery(){const e=this.user?.orgId,i=!e||this.canSearchPublic;return this.id&&!i?` AND orgid:${this.id}`:null}get hasAPIKey(){return mfe(this.restUrl)}get isOrganization(){return!!this.access}get itemPageUrl(){return this.url?`${this.url}/home/item.html`:null}get loaded(){return super.loaded}get restUrl(){let e=this.url;if(e){const i=e.indexOf("/sharing");e=i>0?e.slice(0,i):this.url.replace(/\/+$/,""),e+="/sharing/rest"}return e}get thumbnailUrl(){const e=this.restUrl,i=this.thumbnail;return e&&i?this._normalizeSSL(e+"/portals/self/resources/"+i):null}readUrlKey(e){return e&&e.toLowerCase()}readUser(e){let i=null;return e&&(i=ur.fromJSON(e),i.portal=this),i}load(e){const i=fe(async()=>{const{default:r}=await Promise.resolve().then(()=>IBe);return{default:r}},void 0).then(({default:r})=>{sr(e),d2=r}).then(()=>this.sourceJSON?this.sourceJSON:this.fetchSelf(this.authMode,!1,e)).then(r=>{if(!this.hasAPIKey&&oi){const n=oi;this.credential=n.findCredential(this.restUrl),this.credential||this.authMode!==Wl.AUTH_MODE_AUTO&&this.authMode!==Wl.AUTH_MODE_NO_PROMPT||(this._esriIdCredentialCreateHandle?.remove(),this._esriIdCredentialCreateHandle=n.on("credential-create",yFe(new WeakRef(this))),tne.register(this,this._esriIdCredentialCreateHandle,this))}this.sourceJSON=r,this.read(r)});return this.addResolvingPromise(i),Promise.resolve(this)}async createElevationLayers(){await this.load();const e=this._getHelperService("defaultElevationLayers"),i=(await fe(async()=>{const{default:r}=await import("./ElevationLayer-DGKg4Okc.js");return{default:r}},__vite__mapDeps([0,1,2,3,4]))).default;return e?e.map(r=>new i({id:r.id,url:r.url})):[]}async fetchBasemaps(e,i){const r=await this._fetchBasemaps(e,i);if(i?.include3d===!0&&this.use3dBasemaps!==!1){const n=await this._fetchBasemaps3D(e,i);r.unshift(...n)}return r}async fetchDefault3DBasemap(e){if(!this.useDefault3dBasemap||!this.default3DBasemapQuery||this.default3DBasemapQuery==="none")return null;const i=new Rn;i.query=this.default3DBasemapQuery,i.disableExtraQuery=!0;const r=(await this.queryItems(i,e)).results.find(n=>n.type==="Web Scene");return r?new d2({portalItem:r}):null}fetchCategorySchema(e){return this.hasCategorySchema?this.request(this.restUrl+"/portals/self/categorySchema",e).then(i=>i.categorySchema):Pa(e)?Promise.reject(Hi()):Promise.resolve([])}async fetchClassificationSchema(e){return this.hasClassificationSchema?this.request(this.restUrl+"/portals/self/classification/classificationSchema",e).then(i=>i.classificationSchema):null}fetchFeaturedGroups(e){const i=this.featuredGroups,r=new Rn({num:100,sortField:"title"});if(i?.length){const n=[];for(const s of i)n.push(`(title:"${s.title}" AND owner:${s.owner})`);return r.query=n.join(" OR "),this.queryGroups(r,e).then(s=>s.results)}return Pa(e)?Promise.reject(Hi()):Promise.resolve([])}fetchRegions(e){const i=this.user?.culture||this.culture||xl();return this.request(this.restUrl+"/portals/regions",{...e,query:{culture:i}})}fetchSettings(e){const i=this.user?.culture||this.culture||xl();return this.request(this.restUrl+"/portals/self/settings",{...e,query:{culture:i}})}static getDefault(){return mFe(()=>new Wl)}queryGroups(e,i){return this.queryPortal("/community/groups",e,"PortalGroup",i)}queryItems(e,i){return this.queryPortal("/search",e,"PortalItem",i)}queryUsers(e,i){return e.sortField||(e.sortField="username"),this.queryPortal("/community/users",e,"PortalUser",i)}fetchSelf(e=this.authMode,i=!1,r){const n=this.restUrl+"/portals/self",s={authMode:e,query:{culture:xl().toLowerCase()},withCredentials:!0,...r};return s.authMode==="auto"&&(s.authMode="no-prompt"),i&&(s.query.default=!0),this.request(n,s)}queryPortal(e,i,r,n){const s=dn(Rn,i),a=o=>this.request(this.restUrl+e,{...s.toRequestOptions(this),...n}).then(l=>{const c=s.clone();return c.start=l.nextStart,new Ub({nextQueryParams:c,queryParams:s,total:l.total,results:Wl._resultsToTypedArray(o,{portal:this},l,n)})}).then(l=>Promise.all(l.results.map(c=>typeof c.when=="function"?c.when():l)).then(()=>l,c=>(fl(c),l)));return r&&ene[r]?ene[r]().then(({default:o})=>(sr(n),a(o))):a()}signIn(){if(this.hasAPIKey)return this.load().then(()=>{if(!this.user)throw new ee("portal:not-authenticated","Unable to authenticate user. Portal.user is missing")});if(this.authMode===Wl.AUTH_MODE_ANONYMOUS||this.authMode===Wl.AUTH_MODE_NO_PROMPT&&!oi)return Promise.reject(new ee("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if(this.loadStatus==="failed")return Promise.reject(this.loadError);const e=i=>Promise.resolve().then(()=>this.loadStatus==="not-loaded"?(i||(this.authMode="immediate"),this.load().then(()=>null)):this.loadStatus==="loading"?this.load().then(()=>this.credential?null:(this.credential=i,this.fetchSelf("immediate"))):this.user&&this.credential===i?null:(this.credential=i,this.fetchSelf("immediate"))).then(r=>{r&&(this.sourceJSON=r,this.read(r))});return oi?oi.getCredential(this.restUrl,{prompt:this.authMode!==Wl.AUTH_MODE_NO_PROMPT}).then(i=>e(i)):e(this.credential)}normalizeUrl(e){const i=this.credential?.token;return this._normalizeSSL(i?e+(e.includes("?")?"&":"?")+"token="+i:e)}requestToTypedArray(e,i,r){return this.request(e,i).then(n=>{const s=Wl._resultsToTypedArray(r,{portal:this},n);return Promise.all(s.map(a=>typeof a.when=="function"?a.when():n)).then(()=>s,()=>s)})}request(e,i={}){const r={f:"json",...i.query},{authMode:n=this.authMode===Wl.AUTH_MODE_ANONYMOUS||this.authMode===Wl.AUTH_MODE_NO_PROMPT?this.authMode:"auto",body:s=null,cacheBust:a=!1,method:o="auto",responseType:l="json",signal:c}=i,h={authMode:n,body:s,cacheBust:a,method:o,query:r,responseType:l,timeout:0,signal:c};return i.withCredentials&&(h.withCredentials=!0),Nt(this._normalizeSSL(e),h).then(f=>f.data)}toJSON(){throw new ee("internal:not-yet-implemented","Portal.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new Wl({sourceJSON:e})}_getHelperService(e){const i=this.helperServices?.[e];if(!i)throw new ee("portal:service-not-found",`The \`helperServices\` do not include an entry named "${e}"`);return i}async _fetchBasemaps(e,i){const r=new Rn;r.query=e||($8()?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),r.disableExtraQuery=!0;const n=await this.queryGroups(r,i);if(!n.total)return[];const s=n.results[0];r.num=100,r.query='type:"Web Map" -type:"Web Application"',r.sortField=s.sortField||"name",r.sortOrder=s.sortOrder||"desc";const a=await s.queryItems(r,i);return a.total?a.results.filter(o=>o.type==="Web Map").map(o=>new d2({portalItem:o})):[]}async _fetchBasemaps3D(e,i){const r=e||this.basemapGalleryGroupQuery3D;if(!r)return[];if($8())return[];const n=new Rn({query:r,disableExtraQuery:!0}),s=await this.queryGroups(n,i);if(!s.total)return[];const a=s.results[0];n.num=100,n.query='type:"Web Scene"',n.sortField=a.sortField||"name",n.sortOrder=a.sortOrder||"desc";const o=await a.queryItems(n,i);return o.total?o.results.filter(l=>l.type==="Web Scene").map(l=>new d2({portalItem:l})):[]}_normalizeSSL(e){return e.replace(/^http:/i,"https:").replace(":7080",":7443")}_readBasemap(e){if(e){const i=d2.fromJSON(e);return i.portalItem={portal:this},i}return null}static _resultsToTypedArray(e,i,r,n){let s;if(r){const a=n!=null?n.signal:null;s=r.listings||r.notifications||r.userInvitations||r.tags||r.items||r.groups||r.comments||r.provisions||r.results||r.relatedItems||r,(e||i)&&(s=s.map(o=>{const l=Object.assign(e?e.fromJSON(o):o,i);return typeof l.load=="function"&&l.load(a),l}))}else s=[];return s}},Wl=Zh,Zh.AUTH_MODE_ANONYMOUS="anonymous",Zh.AUTH_MODE_AUTO="auto",Zh.AUTH_MODE_IMMEDIATE="immediate",Zh.AUTH_MODE_NO_PROMPT="no-prompt",Zh);d([m()],Ue.prototype,"access",void 0),d([m()],Ue.prototype,"allSSL",void 0),d([m()],Ue.prototype,"authMode",void 0),d([m()],Ue.prototype,"authorizedCrossOriginDomains",void 0),d([Ve("authorizedCrossOriginDomains")],Ue.prototype,"readAuthorizedCrossOriginDomains",null),d([m()],Ue.prototype,"basemapGalleryGroupQuery",void 0),d([m({json:{name:"3DBasemapGalleryGroupQuery"}})],Ue.prototype,"basemapGalleryGroupQuery3D",void 0),d([m({json:{name:"g3DTilesGalleryGroupQuery"}})],Ue.prototype,"g3DTilesGalleryGroupQuery",void 0),d([m({json:{name:"g3dTilesEnabled"}})],Ue.prototype,"g3dTilesEnabled",void 0),d([m()],Ue.prototype,"bingKey",void 0),d([m()],Ue.prototype,"canListApps",void 0),d([m()],Ue.prototype,"canListData",void 0),d([m()],Ue.prototype,"canListPreProvisionedItems",void 0),d([m()],Ue.prototype,"canProvisionDirectPurchase",void 0),d([m()],Ue.prototype,"canSearchPublic",void 0),d([m()],Ue.prototype,"canShareBingPublic",void 0),d([m()],Ue.prototype,"canSharePublic",void 0),d([m()],Ue.prototype,"canSignInArcGIS",void 0),d([m()],Ue.prototype,"canSignInIDP",void 0),d([m()],Ue.prototype,"colorSetsGroupQuery",void 0),d([m()],Ue.prototype,"commentsEnabled",void 0),d([m({type:Date})],Ue.prototype,"created",void 0),d([m()],Ue.prototype,"credential",void 0),d([m()],Ue.prototype,"culture",void 0),d([m()],Ue.prototype,"currentVersion",void 0),d([m()],Ue.prototype,"customBaseUrl",void 0),d([m()],Ue.prototype,"default3DBasemapQuery",void 0),d([m()],Ue.prototype,"defaultBasemap",void 0),d([Ve("defaultBasemap")],Ue.prototype,"readDefaultBasemap",null),d([m()],Ue.prototype,"defaultDevBasemap",void 0),d([Ve("defaultDevBasemap")],Ue.prototype,"readDefaultDevBasemap",null),d([m({type:Wt})],Ue.prototype,"defaultExtent",void 0),d([m()],Ue.prototype,"defaultVectorBasemap",void 0),d([Ve("defaultVectorBasemap")],Ue.prototype,"readDefaultVectorBasemap",null),d([m()],Ue.prototype,"description",void 0),d([m()],Ue.prototype,"devBasemapGalleryGroupQuery",void 0),d([m()],Ue.prototype,"eueiEnabled",void 0),d([m({readOnly:!0})],Ue.prototype,"extraQuery",null),d([m()],Ue.prototype,"featuredGroups",void 0),d([m()],Ue.prototype,"featuredItemsGroupQuery",void 0),d([m()],Ue.prototype,"galleryTemplatesGroupQuery",void 0),d([m()],Ue.prototype,"layoutGroupQuery",void 0),d([m()],Ue.prototype,"livingAtlasGroupQuery",void 0),d([m({readOnly:!0})],Ue.prototype,"hasAPIKey",null),d([m()],Ue.prototype,"hasCategorySchema",void 0),d([m()],Ue.prototype,"hasClassificationSchema",void 0),d([m()],Ue.prototype,"helpBase",void 0),d([m()],Ue.prototype,"helperServices",void 0),d([m()],Ue.prototype,"helpMap",void 0),d([m()],Ue.prototype,"homePageFeaturedContent",void 0),d([m()],Ue.prototype,"homePageFeaturedContentCount",void 0),d([m()],Ue.prototype,"httpPort",void 0),d([m()],Ue.prototype,"httpsPort",void 0),d([m()],Ue.prototype,"id",void 0),d([m()],Ue.prototype,"ipCntryCode",void 0),d([m({readOnly:!0})],Ue.prototype,"isOrganization",null),d([m()],Ue.prototype,"isPortal",void 0),d([m()],Ue.prototype,"isReadOnly",void 0),d([m({readOnly:!0})],Ue.prototype,"itemPageUrl",null),d([m()],Ue.prototype,"layerTemplatesGroupQuery",void 0),d([m()],Ue.prototype,"maxTokenExpirationMinutes",void 0),d([m({type:Date})],Ue.prototype,"modified",void 0),d([m()],Ue.prototype,"name",void 0),d([m()],Ue.prototype,"portalHostname",void 0),d([m()],Ue.prototype,"portalMode",void 0),d([m()],Ue.prototype,"portalProperties",void 0),d([m()],Ue.prototype,"region",void 0),d([m()],Ue.prototype,"recycleBinEnabled",void 0),d([m({readOnly:!0})],Ue.prototype,"restUrl",null),d([m()],Ue.prototype,"rotatorPanels",void 0),d([m()],Ue.prototype,"showHomePageDescription",void 0),d([m()],Ue.prototype,"sourceJSON",void 0),d([m()],Ue.prototype,"staticImagesUrl",void 0),d([m({json:{name:"2DStylesGroupQuery"}})],Ue.prototype,"stylesGroupQuery2d",void 0),d([m({json:{name:"stylesGroupQuery"}})],Ue.prototype,"stylesGroupQuery3d",void 0),d([m()],Ue.prototype,"supportsHostedServices",void 0),d([m()],Ue.prototype,"symbolSetsGroupQuery",void 0),d([m()],Ue.prototype,"templatesGroupQuery",void 0),d([m()],Ue.prototype,"thumbnail",void 0),d([m({readOnly:!0})],Ue.prototype,"thumbnailUrl",null),d([m()],Ue.prototype,"units",void 0),d([m()],Ue.prototype,"url",void 0),d([m()],Ue.prototype,"urlKey",void 0),d([Ve("urlKey")],Ue.prototype,"readUrlKey",null),d([m()],Ue.prototype,"user",void 0),d([Ve("user")],Ue.prototype,"readUser",null),d([m()],Ue.prototype,"use3dBasemaps",void 0),d([m()],Ue.prototype,"useDefault3dBasemap",void 0),d([m()],Ue.prototype,"useStandardizedQuery",void 0),d([m()],Ue.prototype,"useVectorBasemaps",void 0),d([m()],Ue.prototype,"vectorBasemapGalleryGroupQuery",void 0),Ue=Wl=d([U("esri.portal.Portal")],Ue);const tne=new FinalizationRegistry(t=>{t.remove()});function yFe(t){const e=oi;return()=>{const i=t.deref();i&&e.findCredential(i.restUrl)&&i.signIn().catch(()=>{})}}function vFe(t){return t.map(e=>{let i="";for(let r=0;r<e;r++)i+=((1+Math.random())*65536|0).toString(16).substring(1);return i}).join("-")}const Vd=()=>vFe([2,1,1,1,3]);var bFe=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],u9=bFe.join(","),yye=typeof Element>"u",wI=yye?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,BR=!yye&&Element.prototype.getRootNode?function(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}:function(t){return t?.ownerDocument},UR=function t(e,i){var r;i===void 0&&(i=!0);var n=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),s=n===""||n==="true",a=s||i&&e&&t(e.parentNode);return a},wFe=function(e){var i,r=e==null||(i=e.getAttribute)===null||i===void 0?void 0:i.call(e,"contenteditable");return r===""||r==="true"},vye=function(e,i,r){if(UR(e))return[];var n=Array.prototype.slice.apply(e.querySelectorAll(u9));return i&&wI.call(e,u9)&&n.unshift(e),n=n.filter(r),n},bye=function t(e,i,r){for(var n=[],s=Array.from(e);s.length;){var a=s.shift();if(!UR(a,!1))if(a.tagName==="SLOT"){var o=a.assignedElements(),l=o.length?o:a.children,c=t(l,!0,r);r.flatten?n.push.apply(n,c):n.push({scopeParent:a,candidates:c})}else{var h=wI.call(a,u9);h&&r.filter(a)&&(i||!e.includes(a))&&n.push(a);var f=a.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(a),g=!UR(f,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(a));if(f&&g){var y=t(f===!0?a.children:f.children,!0,r);r.flatten?n.push.apply(n,y):n.push({scopeParent:a,candidates:y})}else s.unshift.apply(s,a.children)}}return n},wye=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},_ye=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||wFe(e))&&!wye(e)?0:e.tabIndex},_Fe=function(e,i){var r=_ye(e);return r<0&&i&&!wye(e)?0:r},xFe=function(e,i){return e.tabIndex===i.tabIndex?e.documentOrder-i.documentOrder:e.tabIndex-i.tabIndex},xye=function(e){return e.tagName==="INPUT"},SFe=function(e){return xye(e)&&e.type==="hidden"},$Fe=function(e){var i=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return i},TFe=function(e,i){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===i)return e[r]},kFe=function(e){if(!e.name)return!0;var i=e.form||BR(e),r=function(o){return i.querySelectorAll('input[type="radio"][name="'+o+'"]')},n;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")n=r(window.CSS.escape(e.name));else try{n=r(e.name)}catch(a){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",a.message),!1}var s=TFe(n,e.form);return!s||s===e},EFe=function(e){return xye(e)&&e.type==="radio"},CFe=function(e){return EFe(e)&&!kFe(e)},IFe=function(e){var i,r=e&&BR(e),n=(i=r)===null||i===void 0?void 0:i.host,s=!1;if(r&&r!==e){var a,o,l;for(s=!!((a=n)!==null&&a!==void 0&&(o=a.ownerDocument)!==null&&o!==void 0&&o.contains(n)||e!=null&&(l=e.ownerDocument)!==null&&l!==void 0&&l.contains(e));!s&&n;){var c,h,f;r=BR(n),n=(c=r)===null||c===void 0?void 0:c.host,s=!!((h=n)!==null&&h!==void 0&&(f=h.ownerDocument)!==null&&f!==void 0&&f.contains(n))}}return s},ine=function(e){var i=e.getBoundingClientRect(),r=i.width,n=i.height;return r===0&&n===0},MFe=function(e,i){var r=i.displayCheck,n=i.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var s=wI.call(e,"details>summary:first-of-type"),a=s?e.parentElement:e;if(wI.call(a,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof n=="function"){for(var o=e;e;){var l=e.parentElement,c=BR(e);if(l&&!l.shadowRoot&&n(l)===!0)return ine(e);e.assignedSlot?e=e.assignedSlot:!l&&c!==e.ownerDocument?e=c.host:e=l}e=o}if(IFe(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return ine(e);return!1},AFe=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var i=e.parentElement;i;){if(i.tagName==="FIELDSET"&&i.disabled){for(var r=0;r<i.children.length;r++){var n=i.children.item(r);if(n.tagName==="LEGEND")return wI.call(i,"fieldset[disabled] *")?!0:!n.contains(e)}return!0}i=i.parentElement}return!1},d9=function(e,i){return!(i.disabled||UR(i)||SFe(i)||MFe(i,e)||$Fe(i)||AFe(i))},rne=function(e,i){return!(CFe(i)||_ye(i)<0||!d9(e,i))},PFe=function(e){var i=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(i)||i>=0)},OFe=function t(e){var i=[],r=[];return e.forEach(function(n,s){var a=!!n.scopeParent,o=a?n.scopeParent:n,l=_Fe(o,a),c=a?t(n.candidates):o;l===0?a?i.push.apply(i,c):i.push(o):r.push({documentOrder:s,tabIndex:l,item:n,isScope:a,content:c})}),r.sort(xFe).reduce(function(n,s){return s.isScope?n.push.apply(n,s.content):n.push(s.content),n},[]).concat(i)},LFe=function(e,i){i=i||{};var r;return i.getShadowRoot?r=bye([e],i.includeContainer,{filter:rne.bind(null,i),flatten:!1,getShadowRoot:i.getShadowRoot,shadowRootFilter:PFe}):r=vye(e,i.includeContainer,rne.bind(null,i)),OFe(r)},DFe=function(e,i){i=i||{};var r;return i.getShadowRoot?r=bye([e],i.includeContainer,{filter:d9.bind(null,i),flatten:!0,getShadowRoot:i.getShadowRoot}):r=vye(e,i.includeContainer,d9.bind(null,i)),r};const aZ={getShadowRoot:!0};function RFe(t){return t?t.id=t.id||`${t.tagName.toLowerCase()}-${Vd()}`:""}function jo(t){const r=NT(t,"[dir]");return r?r.getAttribute("dir"):"ltr"}function UM(t){return t.getRootNode()}function EEt(t){const e=UM(t);return"host"in e?e:null}function Sye(t){return t.host||null}function KF(t,{selector:e,id:i}){if(!t)return null;t.assignedSlot&&(t=t.assignedSlot);const r=UM(t);return(i?"getElementById"in r?r.getElementById(i):null:e?r.querySelector(e):null)||KF(Sye(r),{selector:e,id:i})}function NT(t,e){return t?t.closest(e)||NT(Sye(UM(t)),e):null}function zFe(t){return typeof t?.setFocus=="function"}async function H$(t,e=!1,i="tabbable",r,n){return t?zFe(t)&&r!==t?t.setFocus(n):(i==="tabbable"?FFe:jFe)(t,e,n):void 0}function $ye(t,e){if(t)return LFe(t,{...aZ,includeContainer:e})[0]??t}function FFe(t,e,i){$ye(t,e)?.focus(i)}function NFe(t,e){if(t)return DFe(t,{...aZ,includeContainer:e})[0]??t}function jFe(t,e,i){NFe(t,e)?.focus(i)}function VFe(t,e){return t.filter(i=>i.matches(e))}function Kw(t,e,i){if(typeof e=="string"&&e!=="")return e;if(e===""||e===!0)return t[i]}function QF(t){return(!!t).toString()}function BFe(t){return ni(t)||GFe(t)}function UFe(t){return qFe(t).filter(e=>e.nodeType===Node.TEXT_NODE).map(e=>e.textContent).join("").trim()}function HFe(t){for(const e of t.childNodes)if(e.nodeType===Node.TEXT_NODE&&e.textContent?.trim()!==""||e.nodeType===Node.ELEMENT_NODE)return!0;return!1}function GFe(t){return!!UFe(t)}function qFe(t){return t.currentTarget.assignedNodes({flatten:!0})}function ni(t){return!!Md(t).length}function Md(t,e){return WFe(t.currentTarget,e)}function WFe(t,e){const i=t.assignedElements({flatten:!0});return e?VFe(i,e):i}function Tye(t){return!!(t.isPrimary&&t.button===0)}function YFe(t){return t.detail===0}const Jy=(t,e,i,r=!0,n=!0,s=!1)=>{const a=t.indexOf(e),o=a===0,l=a===t.length-1;r&&(i=i==="previous"&&o?"last":i==="next"&&l?"first":i);let c;return i==="previous"?c=t[a-1]||t[r?t.length-1:a]:i==="next"?c=t[a+1]||t[r?0:a]:i==="last"?c=t[t.length-1]:c=t[0],H$(c,n,"tabbable",s?c:void 0),c};function ZFe(t,e){if(t.parentNode!==e.parentNode)return!1;const i=Array.from(t.parentNode.children);return i.indexOf(t)<i.indexOf(e)}async function XFe(t,e){return kye(t,e,"animation")}async function JFe(t,e){return kye(t,e,"transition")}function nne(t,e,i){const r=e==="transition"?"transitionProperty":"animationName";return t.getAnimations().find(n=>n[r]===i)}async function kye(t,e,i){let r=nne(t,i,e);if(r||(await h9(),r=nne(t,i,e)),!!r)try{await r.finished}catch{}}async function h9(){await new Promise(t=>requestAnimationFrame(()=>t()))}function cu(t){return t.endsWith("px")?parseFloat(t):t.endsWith("vw")?sne(parseFloat(t),window.innerWidth):t.endsWith("vh")?sne(parseFloat(t),window.innerHeight):0}function sne(t,e){return t*e/100}function ea(t,e,i){const r=KFe(t);return new r(e,i)}function KFe(t){class e extends window.MutationObserver{constructor(r){super(r),this.observedEntry=[],this.callback=r}observe(r,n){return this.observedEntry.push({target:r,options:n}),super.observe(r,n)}unobserve(r){const n=this.observedEntry.filter(s=>s.target!==r);this.observedEntry=[],this.callback(super.takeRecords(),this),this.disconnect(),n.forEach(s=>this.observe(s.target,s.options))}}return(function(){return t==="intersection"?window.IntersectionObserver:t==="mutation"?e:window.ResizeObserver})()}function _I(t,e,i,r){if(t&&(e&&t.unobserve(e),!!i)){if(t instanceof MutationObserver){t.observe(i,r);return}t.observe(i)}}const ane=new Set,one={trace:0,debug:1,info:2,warn:4,error:8,off:10};function QFe(t){return one[t]>=one[Tze]}function lx(t,...e){if(!QFe(t))return;console[t].call(this,"%ccalcite","background: #007AC2; color: #fff; border-radius: 4px; padding: 2px 4px;",...e)}let w6;const xI={debug:t=>lx("debug",t),info:t=>lx("info",t),warn:t=>lx("warn",t),error:t=>lx("error",t),trace:t=>lx("trace",t),deprecated:eNe};function eNe(t,{component:e,name:i,suggested:r,removalVersion:n}){const s=`${t}:${t==="component"?"":e}${i}`;if(ane.has(s))return;ane.add(s);const a=Array.isArray(r);a&&!w6&&(w6=new Intl.ListFormat("en",{style:"long",type:"disjunction"}));const o=`[${i}] ${t} is deprecated and will be removed in ${n==="future"?"a future version":`v${n}`}.${r?` Use ${a?w6.format(r.map(l=>`"${l}"`)):`"${r}"`} instead.`:""}`;lx("warn",o)}const lne={flipRtl:"flip-rtl",svg:"svg"},Eye={},_6={},Cye={s:16,m:24,l:32};function Iye({icon:t,scale:e}){const i=Cye[e],r=rNe(t),n=r.charAt(r.length-1)==="F";return`${n?r.substring(0,r.length-1):r}${i}${n?"F":""}`}async function tNe(t){const e=Iye(t),i=Mye(e);if(i)return i;_6[e]||(_6[e]=fetch(kge(`./assets/icon/${e}.json`)).then(n=>n.json()).catch(()=>(xI.error(`${t.icon} (${t.scale}) icon failed to load`),"")));const r=await _6[e];return Eye[e]=r,r}function iNe(t){return Mye(Iye(t))}function Mye(t){return Eye[t]}function rNe(t){const e=!isNaN(Number(t.charAt(0))),i=t.split("-");if(i.length>0){const n=/[a-z]/i;t=i.map((s,a)=>s.replace(n,function(l,c){return a===0&&c===0?l:l.toUpperCase()})).join("")}return e?`i${t}`:t}const nNe=St`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{display:inline-flex;color:var(--calcite-icon-color, var(--calcite-ui-icon-color, currentColor))}:host([scale=s]){inline-size:16px;block-size:16px;min-inline-size:16px;min-block-size:16px}:host([scale=m]){inline-size:24px;block-size:24px;min-inline-size:24px;min-block-size:24px}:host([scale=l]){inline-size:32px;block-size:32px;min-inline-size:32px;min-block-size:32px}.flip-rtl{transform:scaleX(-1)}.svg{display:block}:host([hidden]){display:none}[hidden]{display:none}`,V5=class V5 extends Et{constructor(){super(...arguments),this.visible=!1,this.flipRtl=!1,this.icon=null,this.preload=!1,this.scale="m"}connectedCallback(){if(super.connectedCallback(),this.preload){this.visible=!0,this.loadIconPathData();return}this.visible||this.waitUntilVisible(()=>{this.visible=!0,this.loadIconPathData()})}willUpdate(e){(e.has("icon")&&(this.hasUpdated||this.icon!==null)||e.has("scale")&&(this.hasUpdated||this.scale!=="m"))&&this.loadIconPathData()}disconnectedCallback(){super.disconnectedCallback(),this.intersectionObserver?.disconnect(),this.intersectionObserver=null}async loadIconPathData(){const{icon:e,scale:i,visible:r}=this;if(!e||!r)return;const n={icon:e,scale:i},s=iNe(n)||await tNe(n);e===this.icon&&(this.pathData=s)}waitUntilVisible(e){if(this.intersectionObserver=ea("intersection",i=>{i.forEach(r=>{r.isIntersecting&&(this.intersectionObserver.disconnect(),this.intersectionObserver=null,e())})},{rootMargin:"50px"}),!this.intersectionObserver){e();return}this.intersectionObserver.observe(this.el)}render(){const{el:e,flipRtl:i,pathData:r,scale:n,textLabel:s}=this,a=jo(e),o=Cye[n],l=!!s,c=[].concat(r||"");return this.el.ariaHidden=QF(!l),this.el.ariaLabel=l?s:null,this.el.role=l?"img":null,J`<svg aria-hidden=true class=${q({[lne.flipRtl]:a==="rtl"&&i,[lne.svg]:!0})} fill=currentColor height=100% viewBox=${`0 0 ${o} ${o}`} width=100% xmlns=http://www.w3.org/2000/svg>${c.map(h=>typeof h=="string"?Sn`<path d=${h??Xe} />`:Sn`<path d=${h.d??Xe} opacity=${("opacity"in h?h.opacity:1)??Xe} />`)}</svg>`}};V5.properties={pathData:[16,{},{state:!0}],visible:[16,{},{state:!0}],flipRtl:[7,{},{reflect:!0,type:Boolean}],icon:[3,{},{reflect:!0}],preload:[7,{},{reflect:!0,type:Boolean}],scale:[3,{},{reflect:!0}],textLabel:1},V5.styles=nNe;let HR=V5;$i("calcite-icon",HR);const Aye=Object.freeze(Object.defineProperty({__proto__:null,Icon:HR},Symbol.toStringTag,{value:"Module"}));function sNe(){const{disabled:t}=this;t||HTMLElement.prototype.click.call(this)}function Pye(t){t.target.disabled&&t.preventDefault()}const Oye=["mousedown","mouseup","click"];function Lye(t){t.target.disabled&&(t.stopImmediatePropagation(),t.preventDefault())}const GR={capture:!0};function ta(t){if(t.disabled){t.el.setAttribute("aria-disabled","true"),t.el.contains(document.activeElement)&&document.activeElement.blur(),aNe(t);return}lNe(t),t.el.removeAttribute("aria-disabled")}function aNe(t){t.el.click=sNe,oNe(t.el)}function oNe(t){t.addEventListener("pointerdown",Pye,GR),Oye.forEach(e=>t.addEventListener(e,Lye,GR))}function lNe(t){delete t.el.click,cNe(t.el)}function cNe(t){t.removeEventListener("pointerdown",Pye,GR),Oye.forEach(e=>t.removeEventListener(e,Lye,GR))}const uNe={container:"interaction-container"},ia=({children:t,disabled:e})=>J`<div class=${q(uNe.container)} .inert=${e}>${t}</div>`;function eN(t){return t==="Enter"||t===" "}const tN=["0","1","2","3","4","5","6","7","8","9"];function Dr(t){return t==="l"?"m":"s"}async function dNe(t){await t.componentOnReady(),await t.updateComplete}const HM=t=>(...e)=>{const i=zY(),r=new t(...e),n=r.exports;RY(i.at(-1));const s=r.component.manager;s.W(r,n),r.watchExports(s.W.bind(s,r)),wRe(r);const a=[r.component,...i].reverse();return qY(a,o=>o===void 0?void 0:hNe(r,o,n),n)},hNe=(t,{host:e,key:i,isReactive:r},n)=>{const s=e,a=s[i]!==t.exports,o=s[i]!==n,l=n!==t.exports;if(a&&!o&&l&&(s[i]=t.exports),e===t.component){if(r){const f=t.component.manager;o&&f.W(t,s[i]),t.onUpdate(g=>{if(g.has(i)){const y=s[i];y!==t.exports&&f.W(t,y)}})}t.O=r?void 0:i}const h=t.component.constructor.elementProperties.get(i)?.readOnly;t.watchExports(()=>{s[i]!==t.exports&&(h?$Re(()=>{s[i]=t.exports}):s[i]=t.exports)})},pNe="ar,bg,bs,ca,cs,da,de,el,en,es,et,fi,fr,he,hr,hu,id,it,ja,ko,lt,lv,nl,nb,no,pl,pt-BR,pt-PT,ro,ru,sk,sl,sr,sv,th,tr,uk,vi,zh-CN,zh-HK,zh-TW".split(","),fNe=new Set(pNe),qR="en",mNe={pt:"pt-PT",nb:"no",nn:"no",zh:"zh-CN"},gNe=async(t,e,i="")=>{const r=`${e}/${i}`,n=`${r}${t}.json`;return x6[n]??(x6[n]=Dye(t,r)),await x6[n]},x6={},Dye=async(t,e)=>{const i=`${e}${t}.json`;try{const r=await fetch(i);if(r.ok)return await r.json()}catch(r){return console.error(r),{}}return t===qR?{}:await Dye(qR,e)},Rye=t=>{const e=Rge(t,"lang",globalThis.navigator?.language||qR);return{lang:e,t9nLocale:zye(e)}},zye=t=>{const[e,i]=t.split("-"),r=e.toLowerCase();let n=r;return i&&(n=`${r}-${i.toUpperCase()}`),n=mNe[n]??n,fNe.has(n)?n:i?zye(r):qR},yNe=(t,e,i,r)=>{let n;const s=()=>vNe(t,e(),r).then(a=>{(n?.lang!==a.lang||n.t9nLocale!==a.t9nLocale||n.t9nStrings!==a.t9nStrings)&&i(a),n=a}).catch(console.error);return queueMicrotask(s),Lge(t,["lang"],s)},vNe=async(t,e,i=t.localName.split("-").slice(1).join("-"))=>{const{lang:r,t9nLocale:n}=Rye(t),s=`${e}/${i}/t9n`,o=i===null?{}:await gNe(n,s,"messages.");return{lang:r,t9nLocale:n,t9nStrings:o}},Fye=t=>Nye(void 0,t),b_=t=>e=>Nye(e,t);class bNe extends BF{constructor(e,i){super(e);const r=this.exports;try{mS(this.component);const n=i(this.component,this),s=this.exports!==r;if(vRe(n)){s||this.setProvisionalExports(n);const a=n.then(o=>{this.exports=o,super.catchUpLifecycle()}).catch(o=>{this.P.reject(o),console.error(o)});this.onLoad(async()=>await a)}else(!s||n!==void 0)&&(this.exports=n),queueMicrotask(()=>super.catchUpLifecycle())}catch(n){this.P.reject(n),console.error(n)}}catchUpLifecycle(){}}const Nye=HM(bNe),oZ=(t,e)=>new wNe(t,e);class wNe extends BF{#e;#t;#i;constructor(e,i){super(),this.#t=e,this.#i=i,this.#e=new MutationObserver(r=>{r.forEach(n=>{e.includes(n.attributeName)&&i.call(this.component,this.component.el.getAttribute(n.attributeName),n.oldValue,n.attributeName)})})}hostConnected(){this.#t.forEach(e=>{this.component.el.hasAttribute(e)&&this.#i.call(this.component,null,this.component.el.getAttribute(e),e)}),this.#e.observe(this.component.el,{attributes:!0,attributeOldValue:!0,attributeFilter:this.#t})}hostDisconnected(){this.#e.disconnect()}}const _Ne=t=>(...e)=>{const i=zY(),r=new t(...e);return RY(i.at(-1)),r},cne="ltr",iN=()=>Fye((t,e)=>{e.exports=cne,e.onLifecycle(()=>{const i=()=>{const r=Rge(t.el,"dir",cne);e.exports=r==="rtl"?"rtl":"ltr"};return i(),Lge(t.el,["dir"],i)})}),jye=t=>(e={})=>Fye((i,r)=>{const n=Rye(i.el),s={_lang:n.lang,_t9nLocale:n.t9nLocale,_loading:!0},a=i;r.onLifecycle(()=>yNe(i.el,()=>t("./assets"),({t9nLocale:l,t9nStrings:c,lang:h})=>{const f={...c,_lang:h,_t9nLocale:l,_loading:!1};r.exports=f;const g=c.componentLabel;typeof g=="string"&&"label"in i&&i.label==null&&(i.label??=g),o(a.messageOverrides)},e.name));const o=l=>{const c=r.exports,h=c._original??c,f=Vye(h,l);l&&(f._original=h),r.exports=f};return"messageOverrides"in a&&r.onUpdate(l=>{l.has("messageOverrides")&&o(a.messageOverrides)}),e.blocking?(r.setProvisionalExports(s,!1),r.ready):s}),Vye=(t,e)=>{if(!e)return t;const i={...t};return Object.entries(e).forEach(([r,n])=>{typeof n=="object"?i[r]=Vye(t[r],n):i[r]=n??t[r]}),i},w_=t=>SNe,xNe="arcgisPropertyChange",SNe=(...t)=>{const e=DT(),i=WY(xNe,void 0,e);let r=!0;return e.manager.onUpdated(n=>{if(r||!e.el.isConnected){r=!1;return}for(const s of t)n.has(s)&&i.emit({name:s})}),i};const qn=jye(kge);const pn=()=>b_((t,e)=>{let i;function r(){i?.abort()}return e.onLoad(()=>{t.listen("focus",()=>{i=new AbortController,t.el.addEventListener("focusout",r,{signal:i.signal})})}),e.onDisconnected(()=>{t.el.removeEventListener("focusout",r)}),async(n,s)=>{if(t.disabled)return;const a=TNe(n());if(!a)return;const{target:o,includeContainer:l,strategy:c}=a,h=UM(t.el),f=h.activeElement;if(await dNe(t),!(f!==h.activeElement||i&&!i?.signal.aborted))return t.el.removeEventListener("focus",r),H$(o,l,c,t.el,s)}});function $Ne(t){return"target"in t&&("includeContainer"in t||"strategy"in t)}function TNe(t){if(t)return $Ne(t)?t:{target:t}}const Na={title:"title",close:"close",imageContainer:"image-container",chipIcon:"chip-icon",textSlotted:"text--slotted",container:"container",imageSlotted:"image--slotted",closable:"closable",multiple:"multiple",single:"single",selectable:"selectable",selectIcon:"select-icon",selectIconActive:"select-icon--active",nonInteractive:"non-interactive",isCircle:"is-circle",selected:"selected"},kNe={image:"image"},aO={close:"x",checkedSingle:"circle-f",uncheckedMultiple:"square",checkedMultiple:"check-square-f"},ENe=St`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:inline-flex;cursor:default;border-radius:var(--calcite-chip-corner-radius, 9999px)}:host([closed]){display:none}:host([appearance=outline]) .container,:host([appearance=outline-fill]) .container{color:var(--calcite-chip-text-color, var(--calcite-color-text-1))}:host([appearance=outline]) .close,:host([appearance=outline-fill]) .close{color:var(--calcite-chip-close-icon-color, var(--calcite-close-icon-color, var(--calcite-color-text-3)))}:host([appearance=outline]):host([kind=brand]),:host([appearance=outline-fill]):host([kind=brand]){--calcite-internal-chip-border-color: var(--calcite-chip-border-color, var(--calcite-color-brand));--calcite-internal-chip-selectable-hover-border-color: var(--calcite-chip-border-color, var(--calcite-color-brand));--calcite-internal-chip-selectable-active-border-color: var( --calcite-chip-border-color, var(--calcite-color-brand) )}:host([appearance=outline]):host([kind=inverse]),:host([appearance=outline-fill]):host([kind=inverse]){--calcite-internal-chip-border-color: var(--calcite-chip-border-color, var(--calcite-color-border-inverse))}:host([appearance=outline]):host([kind=neutral]),:host([appearance=outline-fill]):host([kind=neutral]){--calcite-internal-chip-border-color: var(--calcite-chip-border-color, var(--calcite-color-border-1))}:host([appearance=outline]){--calcite-internal-chip-background-color: transparent}:host([appearance=outline-fill]){--calcite-internal-chip-background-color: var(--calcite-chip-background-color, var(--calcite-color-foreground-1))}:host([appearance=solid]){--calcite-internal-chip-border-color: transparent;--calcite-internal-chip-selectable-hover-border-color: transparent;--calcite-internal-chip-selectable-active-border-color: transparent}:host([appearance=solid]):host([kind=brand]) .container,:host([appearance=solid]):host([kind=inverse]) .container{color:var(--calcite-chip-text-color, var(--calcite-color-text-inverse))}:host([appearance=solid]):host([kind=brand]) .close,:host([appearance=solid]):host([kind=inverse]) .close{outline-color:var(--calcite-color-text-inverse)}:host([appearance=solid]):host([kind=brand]){--calcite-internal-chip-background-color: var(--calcite-chip-background-color, var(--calcite-color-brand))}:host([appearance=solid]):host([kind=inverse]){--calcite-internal-chip-background-color: var(--calcite-chip-background-color, var(--calcite-color-inverse))}:host([appearance=solid]):host([kind=inverse]) .close:hover{background-color:var(--calcite-color-inverse-hover)}:host([appearance=solid]):host([kind=inverse]) .close:active{background-color:var(--calcite-color-inverse-press)}:host([appearance=solid]):host([kind=neutral]){--calcite-internal-chip-background-color: var(--calcite-chip-background-color, var(--calcite-color-foreground-2))}:host([kind=neutral]) .container{color:var(--calcite-chip-text-color, var(--calcite-color-text-1))}:host([kind=neutral]) .close{color:var(--calcite-chip-close-icon-color, var(--calcite-close-icon-color, var(--calcite-color-text-3)))}:host([selected]) .select-icon{opacity:1}:host([appearance=solid]):host([kind=neutral]){--calcite-internal-chip-selectable-hover-background-color: var(--calcite-color-foreground-3);--calcite-internal-chip-selectable-active-background-color: var(--calcite-color-border-3)}:host([appearance=solid]):host([kind=inverse]){--calcite-internal-chip-selectable-hover-background-color: var(--calcite-color-inverse-hover);--calcite-internal-chip-selectable-active-background-color: var(--calcite-color-inverse-press)}:host([appearance=solid]):host([kind=brand]){--calcite-internal-chip-selectable-hover-background-color: var(--calcite-color-brand-hover);--calcite-internal-chip-selectable-active-background-color: var(--calcite-color-brand-press)}:host([appearance=outline-fill]):host([kind=neutral]){--calcite-internal-chip-selectable-hover-background-color: var(--calcite-color-foreground-2);--calcite-internal-chip-selectable-hover-border-color: var(--calcite-color-border-input);--calcite-internal-chip-selectable-active-background-color: var(--calcite-color-foreground-3);--calcite-internal-chip-selectable-active-border-color: var(--calcite-color-text-3)}:host([appearance=outline-fill]):host([kind=inverse]),:host([appearance=outline-fill]):host([kind=brand]){--calcite-internal-chip-selectable-hover-background-color: var(--calcite-color-foreground-2);--calcite-internal-chip-selectable-active-background-color: var(--calcite-color-foreground-3)}:host([appearance=outline]):host([kind=neutral]){--calcite-internal-chip-selectable-hover-background-color: var(--calcite-color-transparent-hover);--calcite-internal-chip-selectable-hover-border-color: var(--calcite-color-border-input);--calcite-internal-chip-selectable-active-background-color: var(--calcite-color-transparent-press);--calcite-internal-chip-selectable-active-border-color: var(--calcite-color-text-3)}:host([appearance=outline]):host([kind=inverse]),:host([appearance=outline]):host([kind=brand]){--calcite-internal-chip-selectable-hover-background-color: var(--calcite-color-transparent-hover);--calcite-internal-chip-selectable-active-background-color: var(--calcite-color-transparent-press)}:host([scale=s]) .container{--calcite-internal-chip-block-size: var(--calcite-size-sm, 1.5rem) ;--calcite-internal-chip-container-space-x-end: var(--calcite-spacing-xxs, .25rem) ;--calcite-internal-chip-container-space-x-start: var(--calcite-spacing-xxs, .25rem) ;--calcite-internal-chip-font-size: var(--calcite-font-size--2);--calcite-internal-chip-icon-size: var(--calcite-size-xs, 1rem) ;--calcite-internal-chip-icon-space: var(--calcite-spacing-xxs, .25rem) ;--calcite-internal-chip-image-size: var(--calcite-spacing-xl, 1.25rem) ;--calcite-internal-chip-title-space: var(--calcite-spacing-xxs, .25rem) ;--calcite-internal-close-size: var(--calcite-size-xs, 1rem) }:host([scale=s]) .container:not(.closable).is-circle{--calcite-internal-chip-container-space-x-start: var(--calcite-spacing-px);--calcite-internal-chip-container-space-x-end: var(--calcite-spacing-px)}:host([scale=s]) .container.image--slotted:has(.chip-icon),:host([scale=s]) .container.image--slotted.text--slotted,:host([scale=s]) .container.image--slotted.closable{--calcite-internal-chip-image-space-x-end: var(--calcite-spacing-xxs, .25rem) }:host([scale=s]) .container.image--slotted:not(.text--slotted,:has(.chip-icon)),:host([scale=s]) .container.image--slotted:not(.selectable){--calcite-internal-chip-container-space-x-start: var(--calcite-spacing-px)}:host([scale=s]) .container.selectable.single:not(.is-circle).image--slotted{--calcite-internal-chip-container-space-x-start: var(--calcite-spacing-px)}:host([scale=s]) .container.selectable.single:not(.is-circle).selected{--calcite-internal-chip-select-space-x-end: var(--calcite-spacing-xs, .375rem) ;--calcite-internal-chip-select-space-x-start: var(--calcite-spacing-none, 0)}:host([scale=s]) .container.selectable.single:not(.is-circle).selected.image--slotted{--calcite-internal-chip-select-space-x-end: .5rem ;--calcite-internal-chip-select-space-x-start: .125rem }:host([scale=s]) .container.multiple:not(.is-circle){--calcite-internal-chip-container-space-x-start: var(--calcite-spacing-xxs, .25rem) ;--calcite-internal-chip-select-space-x-end: var(--calcite-spacing-xxs, .25rem) ;--calcite-internal-chip-select-space-x-start: var(--calcite-spacing-xxs, .25rem) }:host([scale=s]) .container.multiple:not(.is-circle).image--slotted{--calcite-internal-chip-select-space-x-end: .5rem ;--calcite-internal-chip-select-space-x-start: var(--calcite-spacing-xs, .375rem) ;--calcite-internal-chip-container-space-x-start: var(--calcite-spacing-px)}:host([scale=s]) .container.multiple:not(.is-circle).image--slotted:not(.text--slotted){--calcite-internal-chip-select-space-x-start: var(--calcite-spacing-xs, .375rem) }:host([scale=m]) .container{--calcite-internal-chip-block-size: var(--calcite-size-md, 2rem) ;--calcite-internal-chip-container-space-x-end: var(--calcite-spacing-xs, .375rem) ;--calcite-internal-chip-container-space-x-start: var(--calcite-spacing-xs, .375rem) ;--calcite-internal-chip-font-size: var(--calcite-font-size--1);--calcite-internal-chip-icon-size: var(--calcite-size-sm, 1.5rem) ;--calcite-internal-chip-icon-space: var(--calcite-spacing-xs, .375rem) ;--calcite-internal-chip-image-size: var(--calcite-size-sm, 1.5rem) ;--calcite-internal-chip-title-space: var(--calcite-spacing-xs, .375rem) ;--calcite-internal-close-size: var(--calcite-size-sm, 1.5rem) }:host([scale=m]) .container:not(.closable).is-circle{--calcite-internal-chip-container-space-x-end: var(--calcite-spacing-px);--calcite-internal-chip-container-space-x-start: var(--calcite-spacing-px)}:host([scale=m]) .container.image--slotted:not(.is-circle){--calcite-internal-chip-container-space-x-start: var(--calcite-spacing-xxs, .25rem) }:host([scale=m]) .container.image--slotted:has(.chip-icon),:host([scale=m]) .container.image--slotted.text--slotted,:host([scale=m]) .container.image--slotted.closable{--calcite-internal-chip-image-space-x-end: var(--calcite-spacing-xs, .375rem) }:host([scale=m]) .container.selectable.single:not(.is-circle).image--slotted{--calcite-internal-chip-container-space-x-start: var(--calcite-spacing-xxs, .25rem) }:host([scale=m]) .container.selectable.single:not(.is-circle).selected{--calcite-internal-chip-select-space-x-end: var(--calcite-spacing-px);--calcite-internal-chip-select-space-x-start: var(--calcite-spacing-none, 0)}:host([scale=m]) .container.selectable.single:not(.is-circle).selected.image--slotted{--calcite-internal-chip-select-space-x-end: var(--calcite-spacing-xxs, .25rem) ;--calcite-internal-chip-select-space-x-start: var(--calcite-spacing-xs, .375rem) }:host([scale=m]) .container.multiple:not(.is-circle){--calcite-internal-chip-select-space-x-end: .125rem ;--calcite-internal-chip-select-space-x-start: .125rem }:host([scale=m]) .container.multiple:not(.is-circle).image--slotted{--calcite-internal-chip-select-space-x-end: .5rem ;--calcite-internal-chip-select-space-x-start: var(--calcite-spacing-xxs, .25rem) }:host([scale=m]) .container.closable:not(.is-circle){--calcite-internal-chip-container-space-x-end: var(--calcite-spacing-xxs, .25rem) }:host([scale=l]) .container{--calcite-internal-chip-block-size: 2.75rem ;--calcite-internal-chip-container-space-x-end: .5rem ;--calcite-internal-chip-container-space-x-start: .5rem ;--calcite-internal-chip-font-size: var(--calcite-font-size-0);--calcite-internal-chip-icon-size: var(--calcite-size-md, 2rem) ;--calcite-internal-chip-icon-space: .5rem ;--calcite-internal-chip-image-size: var(--calcite-size-md, 2rem) ;--calcite-internal-chip-title-space: .5rem ;--calcite-internal-close-size: var(--calcite-size-md, 2rem) }:host([scale=l]) .container:not(.closable).is-circle{--calcite-internal-chip-container-space-x-end: var(--calcite-spacing-xxs, .25rem) ;--calcite-internal-chip-container-space-x-start: var(--calcite-spacing-xxs, .25rem) }:host([scale=l]) .container.image--slotted:not(.is-circle){--calcite-internal-chip-container-space-x-start: var(--calcite-spacing-xs, .375rem) }:host([scale=l]) .container.image--slotted:has(.chip-icon),:host([scale=l]) .container.image--slotted.text--slotted,:host([scale=l]) .container.image--slotted.closable{--calcite-internal-chip-image-space-x-end: .5rem }:host([scale=l]) .container.selectable.single:not(.is-circle).image--slotted{--calcite-internal-chip-container-space-x-start: var(--calcite-spacing-xs, .375rem) }:host([scale=l]) .container.selectable.single:not(.is-circle).selected{--calcite-internal-chip-select-space-x-end: var(--calcite-spacing-xxs, .25rem) ;--calcite-internal-chip-select-space-x-start: var(--calcite-spacing-none, 0)}:host([scale=l]) .container.selectable.single:not(.is-circle).selected.image--slotted{--calcite-internal-chip-select-space-x-end: var(--calcite-spacing-xs, .375rem) ;--calcite-internal-chip-select-space-x-start: .5rem }:host([scale=l]) .container.multiple:not(.is-circle){--calcite-internal-chip-container-space-x-start: .5rem ;--calcite-internal-chip-select-space-x-end: var(--calcite-spacing-xxs, .25rem) ;--calcite-internal-chip-select-space-x-start: var(--calcite-spacing-xxs, .25rem) }:host([scale=l]) .container.multiple:not(.is-circle).image--slotted{--calcite-internal-chip-select-space-x-end: .75rem }:host([scale=l]) .container.closable:not(.is-circle){--calcite-internal-chip-container-space-x-end: var(--calcite-spacing-xs, .375rem) }.container{box-sizing:border-box;display:inline-flex;block-size:100%;max-inline-size:100%;align-items:center;justify-content:center;font-weight:var(--calcite-font-weight-medium);outline-color:transparent;background-color:var(--calcite-internal-chip-background-color);border-color:var(--calcite-internal-chip-border-color);border-radius:var(--calcite-chip-corner-radius, 9999px);border-width:var(--calcite-border-width-sm);border-style:solid;font-size:var(--calcite-internal-chip-font-size, var(--calcite-font-size));padding-inline-start:var(--calcite-internal-chip-container-space-x-start);padding-inline-end:var(--calcite-internal-chip-container-space-x-end);block-size:var(--calcite-internal-chip-block-size, auto);inline-size:var(--calcite-internal-chip-inline-size, auto);min-inline-size:var(--calcite-internal-chip-block-size, auto)}.container:hover .select-icon--active{opacity:var(--calcite-opacity-full, 1)}.container.selectable{cursor:pointer}.container.selectable:hover{background-color:var(--calcite-internal-chip-selectable-hover-background-color);border-color:var(--calcite-internal-chip-selectable-hover-border-color)}.container.selectable:active{background-color:var(--calcite-internal-chip-selectable-active-background-color);border-color:var(--calcite-internal-chip-selectable-active-border-color)}.container:not(.non-interactive):focus{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(var(--calcite-spacing-base) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}.container.text--slotted .title{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.container:not(.text--slotted) .title,.container:not(.image--slotted) .image-container{display:none}.container.is-circle .chip-icon,.container.is-circle .image-container{padding:var(--calcite-spacing-none, 0)}.title{padding-inline:var(--calcite-internal-chip-title-space)}.image-container{display:inline-flex;overflow:hidden;align-items:center;justify-content:center;pointer-events:none;block-size:var(--calcite-internal-chip-image-size, var(--calcite-spacing-xxl, 1.5rem));inline-size:var(--calcite-internal-chip-image-size, var(--calcite-spacing-xxl, 1.5rem));padding-inline-start:var(--calcite-spacing-none, 0);padding-inline-end:var(--calcite-internal-chip-image-space-x-end, 0)}.chip-icon{position:relative;margin-block:0px;display:inline-flex;transition-timing-function:cubic-bezier(.4,0,.2,1);color:var(--calcite-chip-icon-color, var(--calcite-chip-text-color, var(--calcite-icon-color, currentColor)));padding-inline:var(--calcite-internal-chip-icon-space, var(--calcite-spacing-xs, .375rem))}.select-icon{align-self:center;justify-content:center;align-items:center;display:flex;inset-block-start:-1px;position:absolute;visibility:hidden;inline-size:auto;opacity:0;transition:opacity .15s ease-in-out,inline-size .15s ease-in-out;color:var(--calcite-chip-select-icon-color, currentColor)}.select-icon.select-icon--active{position:relative;visibility:visible;opacity:var(--calcite-opacity-half, .5);color:var(--calcite-chip-select-icon-color-press, var(--calcite-chip-select-icon-color-pressed, var(--calcite-chip-select-icon-color, currentColor)))}.multiple .select-icon{display:flex;align-items:center;justify-content:center}.multiple .select-icon,.single .select-icon--active{padding-inline-start:var(--calcite-internal-chip-select-space-x-start);padding-inline-end:var(--calcite-internal-chip-select-space-x-end);block-size:var(--calcite-internal-chip-icon-size, var(--calcite-spacing-xxl, 1.5rem));inline-size:var(--calcite-internal-chip-icon-size, var(--calcite-spacing-xxl, 1.5rem))}slot[name=image]::slotted(*){display:flex;block-size:100%;inline-size:100%;overflow:hidden;border-radius:50%}.close{margin:0;cursor:pointer;align-items:center;border-radius:50%;border-style:none;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;outline-color:transparent;background-color:var(--calcite-close-background-color, var(--calcite-color-transparent));-webkit-appearance:none;display:flex;align-content:center;justify-content:center;color:var(--calcite-chip-close-icon-color, var(--calcite-close-icon-color, currentColor));block-size:var(--calcite-internal-close-size, var(--calcite-spacing-xxl, 1.5rem));inline-size:var(--calcite-internal-close-size, var(--calcite-spacing-xxl, 1.5rem));padding:0}.close:hover,.close:focus{background-color:var(--calcite-close-background-color-hover, var(--calcite-color-transparent-hover))}.close:focus{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(calc(-1 * var(--calcite-spacing-base)) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}.close:active{background-color:var(--calcite-close-background-color-press, var(--calcite-color-transparent-press))}.close calcite-icon{color:inherit}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}:host([hidden]){display:none}[hidden]{display:none}`,B5=class B5 extends Et{constructor(){super(),this.closeButtonRef=wr(),this.containerRef=wr(),this.messages=qn(),this.focusSetter=pn()(this),this.hasImage=!1,this.hasText=!1,this.appearance="solid",this.closable=!1,this.closed=!1,this.closeOnDelete=!1,this.disabled=!1,this.iconFlipRtl=!1,this.interactive=!1,this.kind="neutral",this.scale="m",this.selected=!1,this.selectionMode="none",this.calciteChipClose=Re({cancelable:!1}),this.calciteChipSelect=Re({cancelable:!1}),this.calciteInternalChipKeyEvent=Re({cancelable:!1}),this.calciteInternalChipSelect=Re({cancelable:!1}),this.calciteInternalSyncSelectedChips=Re({cancelable:!1}),this.listen("keydown",this.keyDownHandler),this.listen("click",this.clickHandler)}async setFocus(e){return this.focusSetter(()=>{if(this.interactive)return this.containerRef.value;if(this.closable)return this.closeButtonRef.value},e)}async load(){this.updateHasText()}willUpdate(e){e.has("selected")&&this.hasUpdated&&this.watchSelected(this.selected)}updated(){ta(this)}loaded(){this.selectionMode!=="none"&&this.interactive&&this.selected&&this.handleSelectionPropertyChange(this.selected)}watchSelected(e){this.selectionMode!=="none"&&this.handleSelectionPropertyChange(e)}keyDownHandler(e){if(e.target===this.el)switch(e.key){case" ":case"Enter":this.handleEmittingEvent(),e.preventDefault();break;case"Backspace":case"Delete":this.closable&&!this.closed&&this.closeOnDelete&&(e.preventDefault(),this.close());break;case"ArrowRight":case"ArrowLeft":case"Home":case"End":this.calciteInternalChipKeyEvent.emit(e),e.preventDefault();break}}clickHandler(){!this.interactive&&this.closable&&H$(this.closeButtonRef.value)}handleDefaultSlotChange(){this.updateHasText()}close(){this.calciteChipClose.emit(),this.selected=!1,this.closed=!0}closeButtonKeyDownHandler(e){eN(e.key)&&(e.preventDefault(),this.close())}updateHasText(){this.hasText=this.el.textContent.trim().length>0}handleSlotImageChange(e){this.hasImage=ni(e)}handleEmittingEvent(){this.interactive&&this.calciteChipSelect.emit()}handleSelectionPropertyChange(e){this.selectionMode==="single"&&this.calciteInternalSyncSelectedChips.emit(),!this.parentChipGroup.selectedItems.includes(this.el)&&e&&this.selectionMode!=="multiple"&&this.calciteInternalChipSelect.emit(),this.selectionMode!=="single"&&this.calciteInternalSyncSelectedChips.emit()}renderChipImage(){return J`<div class=${q(Na.imageContainer)}><slot name=${kNe.image} @slotchange=${this.handleSlotImageChange}></slot></div>`}renderSelectionIcon(){const e=this.selectionMode==="multiple"?this.selected?aO.checkedMultiple:aO.uncheckedMultiple:this.selected?aO.checkedSingle:void 0;return J`<div class=${q({[Na.selectIcon]:!0,[Na.selectIconActive]:this.selectionMode==="multiple"||this.selected})}>${e?J`<calcite-icon .icon=${e} .scale=${Dr(this.scale)}></calcite-icon>`:null}</div>`}renderCloseButton(){return J`<button .ariaLabel=${this.messages.dismissLabel} class=${q(Na.close)} @click=${this.close} @keydown=${this.closeButtonKeyDownHandler} .tabIndex=${this.disabled?-1:0} ${zt(this.closeButtonRef)}><calcite-icon .icon=${aO.close} .scale=${Dr(this.scale)}></calcite-icon></button>`}renderIcon(){return J`<calcite-icon class=${q(Na.chipIcon)} .flipRtl=${this.iconFlipRtl} .icon=${this.icon} .scale=${Dr(this.scale)}></calcite-icon>`}render(){const{disabled:e}=this,i=e||!e&&!this.interactive,r=this.selectionMode==="multiple"&&this.interactive?"checkbox":this.selectionMode!=="none"&&this.interactive?"radio":this.interactive?"button":"img";return ia({disabled:e,children:J`<div .ariaChecked=${this.selectionMode!=="none"&&this.interactive?this.selected:void 0} .ariaLabel=${this.label} class=${q({[Na.container]:!0,[Na.textSlotted]:this.hasText,[Na.imageSlotted]:this.hasImage,[Na.selectable]:this.selectionMode!=="none",[Na.multiple]:this.selectionMode==="multiple",[Na.single]:this.selectionMode==="single"||this.selectionMode==="single-persist",[Na.selected]:this.selected,[Na.closable]:this.closable,[Na.nonInteractive]:!this.interactive,[Na.isCircle]:!this.closable&&!this.hasText&&(!this.icon||!this.hasImage)&&(this.selectionMode==="none"||!!this.selectionMode&&this.selectionMode!=="multiple"&&!this.selected)})} @click=${this.handleEmittingEvent} .role=${r} .tabIndex=${i?-1:0} ${zt(this.containerRef)}>${this.selectionMode!=="none"&&this.renderSelectionIcon()||""}${this.renderChipImage()}${this.icon&&this.renderIcon()||""}<span class=${q(Na.title)}><slot @slotchange=${this.handleDefaultSlotChange}></slot></span>${this.closable&&this.renderCloseButton()||""}</div>`})}};B5.properties={hasImage:[16,{},{state:!0}],hasText:[16,{},{state:!0}],appearance:[3,{},{reflect:!0}],closable:[7,{},{reflect:!0,type:Boolean}],closed:[7,{},{reflect:!0,type:Boolean}],closeOnDelete:[7,{},{reflect:!0,type:Boolean}],disabled:[7,{},{reflect:!0,type:Boolean}],icon:[3,{},{reflect:!0}],iconFlipRtl:[7,{},{reflect:!0,type:Boolean}],interactive:[5,{},{type:Boolean}],kind:[3,{},{reflect:!0}],label:1,messageOverrides:[0,{},{attribute:!1}],parentChipGroup:[0,{},{attribute:!1}],scale:[3,{},{reflect:!0}],selected:[7,{},{reflect:!0,type:Boolean}],selectionMode:1,value:1},B5.styles=ENe;let WR=B5;$i("calcite-chip",WR);const CEt=Object.freeze(Object.defineProperty({__proto__:null,Chip:WR},Symbol.toStringTag,{value:"Module"}));const xt=RT(class extends zT{constructor(){super(...arguments),this.key=Xe}render(t,e){return this.key=t,e}update(t,[e,i]){return e!==this.key&&(ZY(t),this.key=e),i}});const CNe=new RegExp("\\.(0+)?$"),INe=new RegExp("0+$"),gr=class gr{constructor(e){if(e instanceof gr)return e;const[i,r]=FNe(e).split(".").concat("");this.value=BigInt(i+r.padEnd(gr.DECIMALS,"0").slice(0,gr.DECIMALS))+BigInt(gr.ROUNDED&&r[gr.DECIMALS]>="5"),this.isNegative=e.charAt(0)==="-"}getIntegersAndDecimals(){const e=this.value.toString().replace("-","").padStart(gr.DECIMALS+1,"0"),i=e.slice(0,-gr.DECIMALS),r=e.slice(-gr.DECIMALS).replace(INe,"");return{integers:i,decimals:r}}toString(){const{integers:e,decimals:i}=this.getIntegersAndDecimals();return`${this.isNegative?"-":""}${e}${i.length?"."+i:""}`}formatToParts(e){const{integers:i,decimals:r}=this.getIntegersAndDecimals(),n=e.numberFormatter.formatToParts(BigInt(i));return this.isNegative&&n.unshift({type:"minusSign",value:e.minusSign}),r.length&&(n.push({type:"decimal",value:e.decimal}),r.split("").forEach(s=>n.push({type:"fraction",value:s}))),n}format(e){const{integers:i,decimals:r}=this.getIntegersAndDecimals(),n=`${this.isNegative?e.minusSign:""}${e.numberFormatter.format(BigInt(i))}`,s=r.length?`${e.decimal}${r.split("").map(a=>e.numberFormatter.format(Number(a))).join("")}`:"";return`${n}${s}`}add(e){return gr.fromBigInt(this.value+new gr(e).value)}subtract(e){return gr.fromBigInt(this.value-new gr(e).value)}multiply(e){return gr._divRound(this.value*new gr(e).value,gr.SHIFT)}divide(e){return gr._divRound(this.value*gr.SHIFT,new gr(e).value)}};gr.DECIMALS=100,gr.ROUNDED=!0,gr.SHIFT=BigInt("1"+"0".repeat(gr.DECIMALS)),gr._divRound=(e,i)=>gr.fromBigInt(e/i+(gr.ROUNDED?e*BigInt(2)/i%BigInt(2):BigInt(0))),gr.fromBigInt=e=>Object.assign(Object.create(gr.prototype),{value:e,isNegative:e<BigInt(0)});let G$=gr;function vm(t){return!(!t||isNaN(Number(t)))}function MNe(t){return!t||!NNe(t)?"":YR(t,e=>{let i=!1;const r=e.split("").filter((n,s)=>n.match(/\./g)&&!i?(i=!0,!0):n.match(/-/g)&&s===0?!0:tN.includes(n)).join("");return vm(r)?new G$(r).toString():""})}const Bye=/^([-0])0+(?=\d)/,ANe=/(?!^\.)\.$/,PNe=/(?!^-)-/g,ONe=/^-\b0\b\.?0*$/,LNe=/0*$/,DNe=new Set(["e","E","-",",",".",...tN]),RNe=t=>{const e=Array.from(t).filter(i=>DNe.has(i)).join("");return YR(e,i=>{const r=i.replace(PNe,"").replace(ANe,"").replace(Bye,"$1");return vm(r)?ONe.test(r)?r:zNe(r):i})};function zNe(t){const e=t.split(".")[1],i=new G$(t).toString(),[r,n]=i.split(".");return e&&n!==e?`${r}.${e}`:i}function YR(t,e){if(!t)return t;const i=t.toLowerCase().indexOf("e")+1;return i?t.replace(/[eE]*$/g,"").substring(0,i).concat(t.slice(i).replace(/[eE]/g,"")).split(/[eE]/).map((r,n)=>e(n===1?r.replace(/\./g,""):r)).join("e").replace(/^e/,"1e"):e(t)}function FNe(t){const e=t.split(/[eE]/);if(e.length===1)return t;const i=+t;if(Number.isSafeInteger(i))return`${i}`;const r=t.charAt(0)==="-",n=+e[1],s=e[0].split("."),a=(r?s[0].substring(1):s[0])||"",o=s[1]||"",l=(f,g)=>{const y=Math.abs(g)-f.length,b=y>0?`${"0".repeat(y)}${f}`:f;return`${b.slice(0,g)}.${b.slice(g)}`},c=(f,g)=>{const y=g>f.length?`${f}${"0".repeat(g-f.length)}`:f;return`${y.slice(0,g)}.${y.slice(g)}`},h=n>0?`${a}${c(o,n)}`:`${l(a,n)}${o}`;return`${r?"-":""}${h.charAt(0)==="."?"0":""}${h.replace(CNe,"").replace(Bye,"")}`}function NNe(t){return tN.some(e=>t.includes(e))}function jNe(t,e,i){const r=e.split(".")[1];if(r){const n=r.match(LNe)[0];if(n&&i.delocalize(t).length!==e.length&&r.indexOf("e")===-1){const s=i.decimal;return t=t.includes(s)?t:`${t}${s}`,t.padEnd(t.length+n.length,i.localize("0"))}}return t}const ZR="en",VNe=["ar","bg","bs","ca","cs","da","de","de-AT","de-CH","el",ZR,"en-AU","en-CA","en-GB","es","es-MX","et","fi","fr","fr-CH","he","hi","hr","hu","id","it","it-CH","ja","ko","lt","lv","mk","no","nl","pl","pt","pt-PT","ro","ru","sk","sl","sr","sv","th","tr","uk","vi","zh-CN","zh-HK","zh-TW"];new Map(Object.entries({bg:{am:"..",pm:".."},bs:{am:"prijepodne",pm:"popodne"},ca:{am:"a.m.",pm:"p.m."},cs:{am:"dop.",pm:"odp."},es:{am:"a.m.",pm:"p.m."},"es-mx":{am:"a.m.",pm:"p.m."},"es-MX":{am:"a.m.",pm:"p.m."},fi:{am:"ap.",pm:"ip."},he:{am:"",pm:""},hu:{am:"de. ",pm:"du."},lt:{am:"priepiet",pm:"popiet"},lv:{am:"priekpusdien",pm:"pcpusdien"},mk:{am:".",pm:"."},no:{am:"a.m.",pm:"p.m."},nl:{am:"a.m.",pm:"p.m."},"pt-pt":{am:"da manh",pm:"da tarde"},"pt-PT":{am:"da manh",pm:"da tarde"},ro:{am:"a.m.",pm:"p.m."},sl:{am:"dop.",pm:"pop."},sv:{am:"fm",pm:"em"},th:{am:"",pm:""},tr:{am:"",pm:"S"},uk:{am:"",pm:""},vi:{am:"SA",pm:"CH"}}));const BNe=["arab","arabext","latn"],S6=[...VNe],Uye=t=>BNe.includes(t),$6=new Intl.NumberFormat().resolvedOptions().numberingSystem,Hye=$6==="arab"||!Uye($6)?"latn":$6,UNe=t=>Uye(t)?t:Hye;function HNe(t){return t?S6.includes(t)?t:(t=t.toLowerCase(),t.includes("-")&&(t=t.replace(/(\w+)-(\w+)/,(e,i,r)=>`${i}-${r.toUpperCase()}`),S6.includes(t)||(t=t.split("-")[0])),t==="nb"||t==="nn"?"no":t==="zh"?"zh-CN":S6.includes(t)?t:(console.warn(`Translations for the "${t}" locale are not available and will fall back to the default, English (en).`),ZR)):ZR}class Gye{constructor(){this.delocalize=e=>this._numberFormatOptions?YR(e,i=>i.replace(new RegExp(`[${this._minusSign}]`,"g"),"-").replace(new RegExp(`[${this._group}]`,"g"),"").replace(new RegExp(`[${this._decimal}]`,"g"),".").replace(new RegExp(`[${this._digits.join("")}]`,"g"),this._getDigitIndex)):e,this.localize=e=>this._numberFormatOptions?YR(e,i=>vm(i.trim())?new G$(i.trim()).format(this).replace(new RegExp(`[${this._actualGroup}]`,"g"),this._group):i):e}get group(){return this._group}get decimal(){return this._decimal}get minusSign(){return this._minusSign}get digits(){return this._digits}get numberFormatter(){return this._numberFormatter}get numberFormatOptions(){return this._numberFormatOptions}set numberFormatOptions(e){if(e.locale=HNe(e?.locale),e.numberingSystem=UNe(e?.numberingSystem),!this._numberFormatOptions&&e.locale===ZR&&e.numberingSystem===Hye&&Object.keys(e).length===2||JSON.stringify(this._numberFormatOptions)===JSON.stringify(e))return;this._numberFormatOptions=e,this._numberFormatter=new Intl.NumberFormat(this._numberFormatOptions.locale,this._numberFormatOptions),this._digits=[...new Intl.NumberFormat(this._numberFormatOptions.locale,{useGrouping:!1,numberingSystem:this._numberFormatOptions.numberingSystem}).format(9876543210)].reverse();const i=new Map(this._digits.map((n,s)=>[n,s])),r=new Intl.NumberFormat(this._numberFormatOptions.locale,{numberingSystem:this._numberFormatOptions.numberingSystem}).formatToParts(-123456789e-1);this._actualGroup=r.find(n=>n.type==="group").value,this._group=this._actualGroup.trim().length===0||this._actualGroup==" "?"":this._actualGroup,this._decimal=e.locale==="bs"||e.locale==="mk"?",":r.find(n=>n.type==="decimal").value,this._minusSign=r.find(n=>n.type==="minusSign").value,this._getDigitIndex=n=>i.get(n)}}const iu=new Gye;function une(t){return t[t.openProp||"open"]}async function __(t){await t.updateComplete,une(t)?t.onBeforeOpen():t.onBeforeClose(),await t.updateComplete,t.transitionEl&&await JFe(t.transitionEl,t.transitionProp),une(t)?t.onOpen():t.onClose()}const p9={brand:"lightbulb",danger:"exclamationMarkTriangle",info:"information",success:"checkCircle",warning:"exclamationMarkTriangle"};const T6={slow:14e3,medium:1e4,fast:6e3},oO={actionsEnd:"actions-end",title:"title",message:"message",link:"link"},Vc={actionsEnd:"actions-end",close:"close",container:"container",containerActive:"container--active",dismissProgress:"dismiss-progress",icon:"icon",containerEmbedded:"container--embedded",queueCount:"queue-count",queueCountActive:"queue-count--active",textContainer:"text-container",focused:"focused"},GNe=300;class qNe{constructor(){this.registeredElements=[],this.queueTimeoutId=null}registerElement(e){const{registeredElements:i}=this;if(!i.includes(e)){switch(e.queue){case"immediate":i.unshift(e);break;case"next":i.splice(1,0,e);break;case"last":i.push(e);break}this.updateAlerts()}}unregisterElement(e){const{registeredElements:i}=this,r=i.indexOf(e);r!==-1&&i.splice(r,1),e.active=!1,this.updateAlerts()}updateAlerts(){window.clearTimeout(this.queueTimeoutId),this.queueTimeoutId=null,this.registeredElements.forEach((e,i)=>{e.openAlertCount=this.registeredElements.length,i===0?this.queueTimeoutId=window.setTimeout(()=>e.active=!0,GNe):e.active=!1})}}const WNe=St`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{display:block;inline-size:var(--calcite-alert-width)}.container{pointer-events:none;position:fixed;z-index:var(--calcite-z-index-toast);margin-inline:auto;margin-block:0px;box-sizing:border-box;display:flex;inline-size:100%;min-inline-size:min-content;align-items:center;justify-content:center;text-align:start;opacity:0;--tw-shadow: 0 6px 20px -4px rgba(0, 0, 0, .1), 0 4px 12px -2px rgba(0, 0, 0, .08);--tw-shadow-colored: 0 6px 20px -4px var(--tw-shadow-color), 0 4px 12px -2px var(--tw-shadow-color);box-shadow:var(--calcite-alert-shadow, var(--tw-ring-offset-shadow, 0 0 rgba(0, 0, 0, 0)), var(--tw-ring-shadow, 0 0 rgba(0, 0, 0, 0)), var(--tw-shadow));background-color:var(--calcite-alert-background-color, var(--calcite-color-foreground-1));border-radius:var(--calcite-alert-corner-radius, var(--calcite-border-radius));border-block-start:0 solid transparent;border-inline:1px solid var(--calcite-color-border-3);border-block-end:1px solid var(--calcite-color-border-3);max-inline-size:calc(100% - var(--calcite-alert-offset-size, 2rem) * 2);transition:opacity var(--calcite-internal-animation-timing-slow) cubic-bezier(.215,.44,.42,.88),all var(--calcite-animation-timing) ease-in-out}.container--bottom,.container--top{inset-inline-end:0;inset-inline-start:0}.container[class*=bottom]{transform:translate3d(0,var(--calcite-alert-offset-size, 2rem),0);inset-block-end:var(--calcite-alert-offset-size, 2rem)}.container[class*=top]{transform:translate3d(0,calc(-1 * var(--calcite-alert-offset-size, 2rem)),0);inset-block-start:var(--calcite-alert-offset-size, 2rem)}.container[class*=start]{inset-inline-start:var(--calcite-alert-offset-size, 2rem);inset-inline-end:auto}.container[class*=end]{inset-inline-end:var(--calcite-alert-offset-size, 2rem);inset-inline-start:auto}.icon{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:0;margin-block:auto;margin-inline-end:auto}.close{display:flex;cursor:pointer;align-items:center;justify-content:flex-end;align-self:stretch;border-style:none;background-color:transparent;color:var(--calcite-color-text-3);outline:2px solid transparent;outline-offset:2px;-webkit-appearance:none;border-start-end-radius:var(--calcite-alert-corner-radius, var(--calcite-border-radius));border-end-end-radius:var(--calcite-alert-corner-radius, var(--calcite-border-radius));outline-color:transparent}.close:focus{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(calc(-1 * var(--calcite-spacing-base)) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}.close:hover,.close:focus{color:var(--calcite-color-text-1);background-color:var(--calcite-color-foreground-2)}.close:active{background-color:var(--calcite-color-foreground-3)}.queue-count{visibility:hidden;display:flex;min-inline-size:min-content;cursor:default;align-items:center;justify-content:space-around;align-self:stretch;overflow:hidden;text-align:center;font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-text-2);opacity:0;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;border-inline:0 solid transparent;border-start-end-radius:0}.queue-count--active{visibility:visible;opacity:1}.dismiss-progress{position:absolute;display:block;inline-size:100%;overflow:hidden;inset-inline:0;inset-block-start:-2px;block-size:2px;border-radius:var(--calcite-border-radius) var(--calcite-border-radius) 0 0}.dismiss-progress:after{position:absolute;inset-block-start:0px;display:block;block-size:2px;content:"";background-color:var(--calcite-color-transparent-tint);inset-inline-end:0}.actions-end{display:flex;align-self:stretch}.text-container{box-sizing:border-box;display:flex;min-inline-size:0px;flex:1 1 auto;flex-direction:column;overflow-wrap:break-word}.footer{position:relative;display:flex;inline-size:auto;justify-content:flex-end;align-self:stretch;padding-block-start:1px;block-size:inherit}:host([scale=s]) slot[name=title]::slotted(*),:host([scale=s]) *::slotted([slot=title]){font-size:var(--calcite-font-size--1);line-height:1.375}:host([scale=s]) slot[name=message]::slotted(*),:host([scale=s]) *::slotted([slot=message]){font-size:var(--calcite-font-size--2);line-height:1.375}:host([scale=s]) slot[name=link]::slotted(*),:host([scale=s]) *::slotted([slot=link]){font-size:var(--calcite-font-size--2);line-height:1.375}:host([scale=s]) .queue-count{margin-inline:.5rem}:host([scale=s]) .container{--calcite-internal-alert-min-height: 3.5rem;inline-size:var(--calcite-alert-width, 40em)}:host([scale=s]) .close{padding:.75rem}:host([scale=s]) .icon{padding-inline-start:.75rem}:host([scale=s]) .text-container{padding-block:.5rem;padding-inline:.75rem .5rem}:host([scale=m]) slot[name=title]::slotted(*),:host([scale=m]) *::slotted([slot=title]){font-size:var(--calcite-font-size-0);line-height:1.375}:host([scale=m]) slot[name=message]::slotted(*),:host([scale=m]) *::slotted([slot=message]){font-size:var(--calcite-font-size--1);line-height:1.375}:host([scale=m]) slot[name=link]::slotted(*),:host([scale=m]) *::slotted([slot=link]){font-size:var(--calcite-font-size--1);line-height:1.375}:host([scale=m]) .queue-count{margin-inline:.75rem}:host([scale=m]) .container{--calcite-internal-alert-min-height: 4.1875rem;inline-size:var(--calcite-alert-width, 50em)}:host([scale=m]) .close{padding:1rem}:host([scale=m]) .icon{padding-inline-start:1rem}:host([scale=m]) .text-container{padding-block:.75rem;padding-inline:1rem .75rem}:host([scale=l]) slot[name=title]::slotted(*),:host([scale=l]) *::slotted([slot=title]){margin-block-end:.25rem;font-size:var(--calcite-font-size-1);line-height:1.375}:host([scale=l]) slot[name=message]::slotted(*),:host([scale=l]) *::slotted([slot=message]){font-size:var(--calcite-font-size-0);line-height:1.375}:host([scale=l]) slot[name=link]::slotted(*),:host([scale=l]) *::slotted([slot=link]){font-size:var(--calcite-font-size-0);line-height:1.375}:host([scale=l]) .queue-count{margin-inline:1rem}:host([scale=l]) .container{--calcite-internal-alert-min-height: 5.625rem;inline-size:var(--calcite-alert-width, 60em)}:host([scale=l]) .close{padding:1.25rem}:host([scale=l]) .icon{padding-inline-start:1.25rem}:host([scale=l]) .text-container{padding-block:1rem;padding-inline:1.25rem 1rem}:host([open]) .container--active{border-block-start-width:2px;opacity:1;pointer-events:initial}:host([open]) .container--active[class*=bottom]{transform:translate3d(0,calc(-1 * var(--calcite-alert-offset-size, 2rem)),inherit)}:host([open]) .container--active[class*=top]{transform:translate3d(0,var(--calcite-alert-offset-size, 2rem),inherit)}:host([auto-close])>.queue-count{border-inline-end:0 solid transparent}slot[name=title]::slotted(*),*::slotted([slot=title]){font-size:var(--calcite-font-size-0);line-height:1.375;font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-text-1)}slot[name=message]::slotted(*),*::slotted([slot=message]){margin:0;display:inline;font-size:var(--calcite-font-size--1);line-height:1.375;font-weight:var(--calcite-font-weight-normal);margin-inline-end:.5rem;color:var(--calcite-color-text-2)}slot[name=link]::slotted(*),*::slotted([slot=link]){display:inline-flex;color:var(--calcite-color-text-link)}:host([kind=brand]) .container{border-block-start-color:var(--calcite-color-brand)}:host([kind=brand]) .container .icon{color:var(--calcite-color-brand)}:host([kind=info]) .container{border-block-start-color:var(--calcite-color-status-info)}:host([kind=info]) .container .icon{color:var(--calcite-color-status-info)}:host([kind=danger]) .container{border-block-start-color:var(--calcite-color-status-danger)}:host([kind=danger]) .container .icon{color:var(--calcite-color-status-danger)}:host([kind=success]) .container{border-block-start-color:var(--calcite-color-status-success)}:host([kind=success]) .container .icon{color:var(--calcite-color-status-success)}:host([kind=warning]) .container{border-block-start-color:var(--calcite-color-status-warning)}:host([kind=warning]) .container .icon{color:var(--calcite-color-status-warning)}:host([auto-close-duration=fast]) .dismiss-progress:after{animation:dismissProgress 6s ease-out}:host(:hover[auto-close-duration=fast]) .dismiss-progress:after,:host(:focus[auto-close-duration=fast]) .dismiss-progress:after{animation-play-state:paused}:host([auto-close-duration=medium]) .dismiss-progress:after{animation:dismissProgress 10s ease-out}:host(:hover[auto-close-duration=medium]) .dismiss-progress:after,:host(:focus[auto-close-duration=medium]) .dismiss-progress:after{animation-play-state:paused}:host([auto-close-duration=slow]) .dismiss-progress:after{animation:dismissProgress 14s ease-out}:host(:hover[auto-close-duration=slow]) .dismiss-progress:after,:host(:focus[auto-close-duration=slow]) .dismiss-progress:after{animation-play-state:paused}.container.focused .dismiss-progress:after{animation-play-state:paused}@keyframes dismissProgress{0%{inline-size:0px;opacity:.75}to{inline-size:100%;opacity:1}}.container--embedded{position:absolute}:host([hidden]){display:none}[hidden]{display:none}:host([calcite-hydrated-hidden]){visibility:hidden!important;pointer-events:none}`,S1=new qNe,U5=class U5 extends Et{constructor(){super(...arguments),this.autoCloseTimeoutId=null,this.transitionProp="opacity",this.totalHoverTime=0,this.totalOpenTime=0,this.messages=qn(),this.focusSetter=pn()(this),this.hasEndActions=!1,this.isFocused=!1,this.numberStringFormatter=new Gye,this.active=!1,this.autoClose=!1,this.autoCloseDuration="medium",this.embedded=!1,this.iconFlipRtl=!1,this.kind="brand",this.open=!1,this.openAlertCount=0,this.placement="bottom",this.queue="last",this.scale="m",this.calciteAlertBeforeClose=Re({cancelable:!1}),this.calciteAlertBeforeOpen=Re({cancelable:!1}),this.calciteAlertClose=Re({cancelable:!1}),this.calciteAlertOpen=Re({cancelable:!1})}async setFocus(e){return this.focusSetter(()=>this.el,e)}connectedCallback(){super.connectedCallback(),this.open&&S1.registerElement(this.el),this.numberStringFormatter.numberFormatOptions={locale:this.messages._lang,numberingSystem:this.numberingSystem,signDisplay:"always"}}willUpdate(e){e.has("open")&&(this.hasUpdated||this.open!==!1)&&this.openHandler(),e.has("active")&&(this.hasUpdated||this.active!==!1)&&this.handleActiveChange(),e.has("autoCloseDuration")&&(this.hasUpdated||this.autoCloseDuration!=="medium")&&this.updateDuration(),e.has("queue")&&(this.hasUpdated||this.queue!=="last")&&this.handleQueueChange(),e.has("numberingSystem")&&this.numberingSystemChange(),e.has("messages")&&this.effectiveLocaleChange()}disconnectedCallback(){super.disconnectedCallback(),S1.unregisterElement(this.el),this.clearAutoCloseTimeout(),this.embedded=!1}handleActiveChange(){__(this),this.clearAutoCloseTimeout(),this.active&&this.autoClose&&!this.autoCloseTimeoutId&&(this.initialOpenTime=Date.now(),this.autoCloseTimeoutId=window.setTimeout(()=>this.closeAlert(),T6[this.autoCloseDuration]))}openHandler(){this.open?S1.registerElement(this.el):S1.unregisterElement(this.el)}updateDuration(){this.autoClose&&this.autoCloseTimeoutId&&(this.clearAutoCloseTimeout(),this.autoCloseTimeoutId=window.setTimeout(()=>this.closeAlert(),T6[this.autoCloseDuration]))}handleQueueChange(){this.open&&(S1.unregisterElement(this.el),S1.registerElement(this.el))}handleKeyBoardFocus(){this.isFocused=!0,this.handleFocus()}handleKeyBoardBlur(){this.isFocused=!1,this.isHovered||this.handleBlur()}effectiveLocaleChange(){this.numberStringFormatter.numberFormatOptions={locale:this.messages._lang,numberingSystem:this.numberingSystem,signDisplay:"always"}}numberingSystemChange(){this.numberStringFormatter.numberFormatOptions={locale:this.messages._lang,numberingSystem:this.numberingSystem,signDisplay:"always"}}clearAutoCloseTimeout(){window.clearTimeout(this.autoCloseTimeoutId),this.autoCloseTimeoutId=null}setTransitionEl(e){e&&(this.transitionEl=e)}closeAlert(){this.open=!1,this.clearAutoCloseTimeout()}onBeforeOpen(){this.calciteAlertBeforeOpen.emit()}onOpen(){this.calciteAlertOpen.emit()}onBeforeClose(){this.calciteAlertBeforeClose.emit()}onClose(){this.calciteAlertClose.emit()}actionsEndSlotChangeHandler(e){this.hasEndActions=ni(e)}handleMouseOver(){this.isHovered=!0,this.handleFocus()}handleMouseLeave(){this.isHovered=!1,this.isFocused||this.handleBlur()}handleFocus(){this.clearAutoCloseTimeout(),this.totalOpenTime=Date.now()-this.initialOpenTime,this.lastMouseOverBegin=Date.now()}handleBlur(){const e=Date.now()-this.lastMouseOverBegin,i=T6[this.autoCloseDuration]-this.totalOpenTime+this.totalHoverTime;this.totalHoverTime=this.totalHoverTime?e+this.totalHoverTime:e,this.autoCloseTimeoutId=window.setTimeout(()=>this.closeAlert(),i)}render(){const{open:e,autoClose:i,label:r,placement:n,active:s,openAlertCount:a}=this,o=i?"alert":"alertdialog",l=!e,c=Kw(p9,this.icon,this.kind),h=a>1;return this.el.inert=l,this.el.ariaLabel=r,this.el.toggleAttribute("calcite-hydrated-hidden",l),this.el.role=o,J`<div class=${q({[Vc.container]:!0,[Vc.containerActive]:s,[`${Vc.container}--${n}`]:!0,[Vc.containerEmbedded]:this.embedded,[Vc.focused]:this.isFocused})} @pointerenter=${this.autoClose&&this.autoCloseTimeoutId?this.handleMouseOver:null} @pointerleave=${this.autoClose?this.handleMouseLeave:null} ${zt(this.setTransitionEl)}>${c&&this.renderIcon(c)||""}<div class=${q(Vc.textContainer)} @focusin=${this.autoClose&&this.autoCloseTimeoutId?this.handleKeyBoardFocus:null} @focusout=${this.autoClose?this.handleKeyBoardBlur:null}><slot name=${oO.title}></slot><slot name=${oO.message}></slot><slot name=${oO.link}></slot></div>${this.renderActionsEnd()}${h?this.renderQueueCount():null}${this.renderCloseButton()}${e&&s&&i?J`<div class=${q(Vc.dismissProgress)}></div>`:null}</div>`}renderCloseButton(){return xt("close",J`<button .ariaLabel=${this.messages.close} class=${q(Vc.close)} @click=${this.closeAlert} @focusin=${this.autoClose?this.handleKeyBoardFocus:null} @focusout=${this.autoClose?this.handleKeyBoardBlur:null} type=button><calcite-icon icon=x .scale=${Dr(this.scale)}></calcite-icon></button>`)}renderQueueCount(){const{openAlertCount:e}=this,i=e>2?e-1:1,r=this.numberStringFormatter.numberFormatter.format(i);return xt("queue-count",J`<div class=${q({[Vc.queueCount]:!0,[Vc.queueCountActive]:e>1})}><calcite-chip .label=${r} .scale=${this.scale} .value=${r}>${r}</calcite-chip></div>`)}renderActionsEnd(){return J`<div class=${q(Vc.actionsEnd)}><slot name=${oO.actionsEnd} @slotchange=${this.actionsEndSlotChangeHandler}></slot></div>`}renderIcon(e){return J`<div class=${q(Vc.icon)}><calcite-icon .flipRtl=${this.iconFlipRtl} .icon=${e} .scale=${Dr(this.scale)}></calcite-icon></div>`}};U5.properties={hasEndActions:[16,{},{state:!0}],isFocused:[16,{},{state:!0}],numberStringFormatter:[16,{},{state:!0}],active:[5,{},{type:Boolean}],autoClose:[7,{},{reflect:!0,type:Boolean}],autoCloseDuration:[3,{},{reflect:!0}],embedded:[5,{},{type:Boolean}],icon:[3,{converter:Np},{reflect:!0}],iconFlipRtl:[7,{},{reflect:!0,type:Boolean}],kind:[3,{},{reflect:!0}],label:1,messageOverrides:[0,{},{attribute:!1}],numberingSystem:[3,{},{reflect:!0}],open:[7,{},{reflect:!0,type:Boolean}],openAlertCount:[9,{},{type:Number}],placement:[3,{},{reflect:!0}],queue:[3,{},{reflect:!0}],scale:[3,{},{reflect:!0}]},U5.styles=WNe;let f9=U5;$i("calcite-alert",f9);const lZ=Symbol.for(""),YNe=t=>{if(t?.r===lZ)return t?._$litStatic$},qye=t=>({_$litStatic$:t,r:lZ}),Qw=(t,...e)=>({_$litStatic$:e.reduce((i,r,n)=>i+(s=>{if(s._$litStatic$!==void 0)return s._$litStatic$;throw Error(`Value passed to 'literal' function must be a 'literal' result: ${s}. Use 'unsafeStatic' to pass non-literal values, but
            take care to ensure page security.`)})(r)+t[n+1],t[0]),r:lZ}),dne=new Map,ZNe=t=>(e,...i)=>{const r=i.length;let n,s;const a=[],o=[];let l,c=0,h=!1;for(;c<r;){for(l=e[c];c<r&&(s=i[c],(n=YNe(s))!==void 0);)l+=n+e[++c],h=!0;c!==r&&o.push(s),a.push(l),c++}if(c===r&&a.push(e[r]),h){const f=a.join("$$lit$$");(e=dne.get(f))===void 0&&(a.raw=a,dne.set(f,e=a)),i=o}return t(e,...i)},GM=ZNe(J);const XNe=St`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:inline}:host a,:host button{position:relative;display:flex;cursor:pointer;align-items:center;justify-content:center;border-radius:0;border-style:none;font-family:inherit;text-decoration:none;line-height:inherit;font-size:inherit;-webkit-appearance:none}:host a:hover,:host button:hover{text-decoration:none}:host a,:host button{transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform,background-size;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;outline-color:transparent}:host a:focus,:host button:focus{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(var(--calcite-spacing-base) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}calcite-icon{inline-size:1em;block-size:1em;min-inline-size:unset;min-block-size:unset}.calcite-link--icon{vertical-align:middle;margin-block-start:-.25em}:host .calcite-link--icon.icon-start{margin-inline-end:.5rem}:host .calcite-link--icon.icon-end{margin-inline-start:.5rem}:host button,:host a{position:relative;display:inline;border-style:none;background-color:transparent;padding:0;color:var(--calcite-link-text-color, var(--calcite-color-text-link));line-height:inherit;white-space:initial;background-image:linear-gradient(currentColor,currentColor),linear-gradient(var(--calcite-color-brand-underline),var(--calcite-color-brand-underline));background-position-x:0%,100%;background-position-y:min(1.5em,100%);background-repeat:no-repeat,no-repeat;background-size:0% 1px,100% 1px}:host button:hover,:host button:focus,:host a:hover,:host a:focus{background-size:100% 1px,100% 1px}:host button:active,:host a:active{background-size:100% 2px,100% 2px}:host button.calcite--rtl,:host a.calcite--rtl{background-position:100% 100%,100% 100%}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}:host([hidden]){display:none}[hidden]{display:none}`,lO={calciteLinkIcon:"calcite-link--icon",iconStart:"icon-start",iconEnd:"icon-end"},H5=class H5 extends Et{constructor(){super(),this.childRef=wr(),this.focusSetter=pn()(this),this.disabled=!1,this.download=!1,this.listen("click",this.clickHandler)}async setFocus(e){return this.focusSetter(()=>this.childRef.value,e)}updated(){ta(this)}clickHandler(e){this.disabled||e.isTrusted||this.childRef.value.click()}childElClickHandler(e){e.isTrusted||e.stopPropagation()}render(){const{download:e,el:i}=this,r=jo(i),n=this.href?"a":"button",s=J`<calcite-icon class=${q({[lO.calciteLinkIcon]:!0,[lO.iconStart]:!0})} .flipRtl=${this.iconFlipRtl==="start"||this.iconFlipRtl==="both"} .icon=${this.iconStart} scale=s></calcite-icon>`,a=J`<calcite-icon class=${q({[lO.calciteLinkIcon]:!0,[lO.iconEnd]:!0})} .flipRtl=${this.iconFlipRtl==="end"||this.iconFlipRtl==="both"} .icon=${this.iconEnd} scale=s></calcite-icon>`,o=n==="button"?Qw`button`:Qw`a`,l=n==="button"?0:null;return this.el.role="presentation",ia({disabled:this.disabled,children:GM`<${o} class=${q({[Uh.rtl]:r==="rtl"})} download=${(n==="a"?e===!0||e===""?"":e||null:null)??De} href=${(n==="a"&&this.href)??De} @click=${this.childElClickHandler} rel=${(n==="a"&&this.rel)??De} tabindex=${l} target=${(n==="a"&&this.target)??De} ${zt(this.childRef)}>${J`${this.iconStart?s:null}<slot></slot>${this.iconEnd?a:null}`}</${o}>`})}};H5.properties={disabled:[7,{},{reflect:!0,type:Boolean}],download:[3,{converter:Np},{reflect:!0}],href:[3,{},{reflect:!0}],iconEnd:[3,{},{reflect:!0}],iconFlipRtl:[3,{},{reflect:!0}],iconStart:[3,{},{reflect:!0}],rel:1,target:1},H5.styles=XNe;let m9=H5;$i("calcite-link",m9);let jT=class extends epe{notify(){const e=this._observers;if(e&&e.length>0){const i=e.slice();for(const r of i)r.onInvalidated(),r.onCommitted()}}},JNe=class{constructor(e,i){this._observable=new jT,this._value=e,this._equalityFunction=i}get value(){return Rt(this._observable),this._value}set value(e){this._equalityFunction(e,this._value)||(this._value=e,this._observable.notify())}mutate(e){e(this._value),this._observable.notify()}};function q$(t,e=Hhe){return new JNe(t,e)}function Wye(){return new jT}function KNe(t){return new LM(t)}function Yye(t){Rt(t)}function QNe(t,e){return Lp(t,e)}const eje=St`:host{display:block;box-sizing:border-box;*,*:before,*:after{box-sizing:inherit}}:host([hidden]){display:none}:host(:not(arcgis-basemap-gallery-item,arcgis-layer-list-item,arcgis-print-custom-text-elements,arcgis-print-dpi-input,arcgis-print-export-button,arcgis-print-exported-link,arcgis-print-exports-panel,arcgis-print-format-select,arcgis-print-layout-advanced-options,arcgis-print-layout-panel,arcgis-print-main-panel,arcgis-print-map-only-advanced-options,arcgis-print-map-only-panel,arcgis-print-out-spatial-reference-input,arcgis-print-preview-input,arcgis-print-scale-section,arcgis-print-template-select,arcgis-print-template-selector,arcgis-labeled-switch,arcgis-measurement-content,arcgis-version-management-service-item,arcgis-version-management-version-item,arcgis-version-management-version-list,arcgis-version-management-version-properties,arcgis-video-player-action-bar,arcgis-video-player-actions-group,arcgis-video-player-controls-group,arcgis-video-player-metadata,arcgis-video-player-settings,arcgis-video-player-slider)){font-family:var(--calcite-font-family)}`,qM=xge({defaultAssetPath:"https://js.arcgis.com/4.34/map-components/",hydratedAttribute:"hydrated",commonStyles:eje}),{customElement:nn,getAssetPath:Zye,setAssetPath:AEt}=qM;qM.t=Yye;qM.o=Wye;qM.c=KNe;qM.r=QNe;const tje=Symbol("ClonableMixin"),$t=t=>{var n;var e;const i=t;let r=(n=class extends i{constructor(){super(...arguments),this[e]=!0}clone(s){const a=mo(this);MM(a,"unable to clone instance of non-accessor class");const o=a.metadata,l=a.store,c={},h=new Map;for(const g in o){const y=o[g],b=l?.originOf(g),_=y.clonable;if(y.readOnly||_===!1||b!==7&&b!==0&&b!==5&&b!==4)continue;const S=this[g];let $=null;if(typeof _=="function")$=_(S,s);else if(_==="reference")$=S;else if($=n8(S,s),S!=null&&$==null)continue;b===0?h.set(g,$):c[g]=$}const f=new(Object.getPrototypeOf(this)).constructor(c);if(h.size){const g=mo(f)?.store;if(g)for(const[y,b]of h)g.set(y,b,0)}return f}},e=tje,n);return r=d([U("esri.core.Clonable")],r),r},cZ=$t(lt);let Hb=class extends cZ{constructor(e){super(e),this.row=0,this.column=0,this.rows=1,this.columns=1}equals(e){return e!=null&&this.row===e.row&&this.rows===e.rows&&this.column===e.column&&this.columns===e.columns}};d([m({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],Hb.prototype,"row",void 0),d([m({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],Hb.prototype,"column",void 0),d([m({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],Hb.prototype,"rows",void 0),d([m({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],Hb.prototype,"columns",void 0),Hb=d([U("esri.CameraLayout")],Hb);const Xye=Hb,hne=new Float32Array(1);function OEt(t){--t;for(let e=1;e<32;e<<=1)t|=t>>e;return t+1}function go(t,e,i){return Math.min(Math.max(t,e),i)}function LEt(t){return!(t&t-1)}function ije(t){return t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,++t}function Q2(t,e,i){return t+(e-t)*i}function DEt(t,e,i,r,n){return Q2(r,n,(t-e)/(i-e))}function _p(t){return t*Math.PI/180}function Jye(t){return 180*t/Math.PI}function REt(t,e=1e-6){return(t<0?-1:1)/Math.max(Math.abs(t),e)}function zEt(t){return Math.acos(go(t,-1,1))}function rje(t){return Math.asin(go(t,-1,1))}function po(t,e,i=1e-6){return t===e?!0:!Number.isFinite(t)||!Number.isFinite(e)?!1:(t>e?t-e:e-t)<=i}function Kye(t,e,i=1e-6){return!po(t,e,i)&&t>e}function g9(t,e,i=1e-6){return!po(t,e,i)&&t<e}function nje(t,e,i=1e-6){return po(t,e,i)||t>e}const XR=new DataView(new ArrayBuffer(Float64Array.BYTES_PER_ELEMENT));function y9(t){return XR.setFloat64(0,t),XR.getBigInt64(0)}function sje(t){return XR.setBigInt64(0,t),XR.getFloat64(0)}const S3=1000000n,aje=Qye(1);function Qye(t){const e=y9(t=Math.abs(t)),i=sje(e<=S3?S3:e-S3);return Math.abs(t-i)}function FEt(t,e,i=aje){if(t===e)return!0;if(!Number.isFinite(t)||!Number.isFinite(e))return!1;if(i!=null&&Qye(Math.min(Math.abs(t),Math.abs(e)))<i)return Math.abs(t-e)<=i;const r=y9(t),n=y9(e);return r<0!=n<0?!1:!((r<n?n-r:r-n)>S3)}function uZ(t,e,i=1e-6){if(t===e)return!0;if(!Number.isFinite(t)||!Number.isFinite(e))return!1;const r=Math.abs(t-e),n=Math.abs(t),s=Math.abs(e);if(t===0||e===0||n<1e-12&&s<1e-12){if(r>.01*i)return!1}else if(r/(n+s)>i)return!1;return!0}function oje(t){return eve(Math.max(-v9,Math.min(t,v9)))}function eve(t){return hne[0]=t,hne[0]}function NEt(t){const e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[3]*t[3]+t[4]*t[4]+t[5]*t[5],r=t[6]*t[6]+t[7]*t[7]+t[8]*t[8];return!(po(e,1)&&po(i,1)&&po(r,1))}function jEt(t,e){return(t%e+e)%e}const v9=eve(34028234663852886e22);function VEt(t,e,i){if(i===void 0||+i==0)return Math[t](e);if(e=+e,i=+i,isNaN(e)||typeof i!="number"||i%1!=0)return NaN;let r=e.toString().split("e");return r=(e=Math[t](+(r[0]+"e"+(r[1]?+r[1]-i:-i)))).toString().split("e"),+(r[0]+"e"+(r[1]?+r[1]+i:i))}let rN=class{constructor(e,i){this.min=e,this.max=i,this.range=i-e}normalize(e,i=0,r=!1){return pne(this.range,this.min,this.max,e,i,r)}clamp(e,i=0){return go(e-i,this.min,this.max)+i}monotonic(e,i,r){return e<i?i:i+b9(this.range,e-i,r)}minimalMonotonic(e,i,r){return pne(this.range,e,e+this.range,i,r)}center(e,i,r){return i=this.monotonic(e,i,r),this.normalize((e+i)/2,r)}diff(e,i,r){return this.monotonic(e,i,r)-e}shortestSignedDiff(e,i){e=this.normalize(e);const r=(i=this.normalize(i))-e,n=i<e?this.minimalMonotonic(e,i)-e:i-this.minimalMonotonic(i,e);return Math.abs(r)<Math.abs(n)?r:n}contains(e,i,r){return i=this.minimalMonotonic(e,i),(r=this.minimalMonotonic(e,r))>e&&r<i}};function pne(t,e,i,r,n=0,s=!1){return(r-=n)<e?r+=b9(t,e-r):r>i&&(r-=b9(t,r-i)),s&&r===i&&(r=e),r+n}function b9(t,e,i=0){return Math.ceil((e-i)/t)*t+i}const UEt=new rN(0,2*Math.PI),HEt=new rN(-Math.PI,Math.PI),lje=new rN(0,360);let gh=class extends $t(_e){constructor(...e){super(...e),this.position=new gt([0,0,0]),this.heading=0,this.tilt=0,this.fov=55,this.layout=new Xye}normalizeCtorArgs(e,i,r,n){if(e&&typeof e=="object"&&("x"in e||Array.isArray(e))){const s={position:e};return i!=null&&(s.heading=i),r!=null&&(s.tilt=r),n!=null&&(s.fov=n),s}return e}writePosition(e,i,r,n){const s=e.clone();s.x=Po(e.x||0),s.y=Po(e.y||0),s.z=e.hasZ?Po(e.z||0):e.z,i[r]=s.write({},n)}readPosition(e,i){const r=new gt;return r.read(e,i),r.x=Po(r.x||0),r.y=Po(r.y||0),r.z=r.hasZ?Po(r.z||0):r.z,r}equals(e){return e!=null&&this.tilt===e.tilt&&this.heading===e.heading&&this.fov===e.fov&&this.position.equals(e.position)&&this.layout.equals(e.layout)}};d([m({type:gt,json:{write:{isRequired:!0}}})],gh.prototype,"position",void 0),d([qe("position")],gh.prototype,"writePosition",null),d([Ve("position")],gh.prototype,"readPosition",null),d([m({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),Ii(t=>lje.normalize(Po(t)))],gh.prototype,"heading",void 0),d([m({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),Ii(t=>go(Po(t),-180,180))],gh.prototype,"tilt",void 0),d([m({type:Number,nonNullable:!0,json:{default:55,write:!0}}),Ii(t=>go(Po(t,55),1,170))],gh.prototype,"fov",void 0),d([m({type:Xye,nonNullable:!0,json:{read:!1,write:!1}})],gh.prototype,"layout",void 0),gh=d([U("esri.Camera")],gh);const cje=gh;function tn(t=yje){return[t[0],t[1],t[2],t[3]]}function tve(t,e){return t!==e&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3]),t}function ive(t,e,i,r,n=tn()){return n[0]=t,n[1]=e,n[2]=i,n[3]=r,n}function uje(t,e=tn()){return e[0]=t.xmin,e[1]=t.ymin,e[2]=t.xmax,e[3]=t.ymax,e}function dje(t,e,i=new Wt){return i.xmin=t[0],i.ymin=t[1],i.xmax=t[2],i.ymax=t[3],i.spatialReference=e,i}function Aa(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function hje(t,e){e<t[0]&&(t[0]=e),e>t[2]&&(t[2]=e)}function pje(t,e){e<t[1]&&(t[1]=e),e>t[3]&&(t[3]=e)}function qEt(t,e,i){if(e!=null)if("length"in e)_9(e)?(i[0]=Math.min(t[0],e[0]),i[1]=Math.min(t[1],e[1]),i[2]=Math.max(t[2],e[2]),i[3]=Math.max(t[3],e[3])):e.length!==2&&e.length!==3||(i[0]=Math.min(t[0],e[0]),i[1]=Math.min(t[1],e[1]),i[2]=Math.max(t[2],e[0]),i[3]=Math.max(t[3],e[1]));else switch(e.type){case"extent":i[0]=Math.min(t[0],e.xmin),i[1]=Math.min(t[1],e.ymin),i[2]=Math.max(t[2],e.xmax),i[3]=Math.max(t[3],e.ymax);break;case"point":i[0]=Math.min(t[0],e.x),i[1]=Math.min(t[1],e.y),i[2]=Math.max(t[2],e.x),i[3]=Math.max(t[3],e.y)}else tve(i,t)}function WEt(t,e,i=t){const r=e.length;let n=t[0],s=t[1],a=t[2],o=t[3];for(let l=0;l<r;l++){const c=e[l];n=Math.min(n,c[0]),s=Math.min(s,c[1]),a=Math.max(a,c[0]),o=Math.max(o,c[1])}return i[0]=n,i[1]=s,i[2]=a,i[3]=o,i}function YEt(t){for(let e=0;e<4;e++)if(!isFinite(t[e]))return!1;return!0}function nN(t){return t==null||t[0]>=t[2]?0:t[2]-t[0]}function sN(t){return t==null||t[1]>=t[3]?0:t[3]-t[1]}function ZEt(t){return nN(t)*sN(t)}function fne(t,e=[0,0]){return e[0]=(t[0]+t[2])/2,e[1]=(t[1]+t[3])/2,e}function fje(t){const e=nN(t),i=sN(t);return Math.sqrt(e*e+i*i)}function XEt(t,e){return!!t&&w9(t,e.x,e.y)}function w9(t,e,i){return e>=t[0]&&i>=t[1]&&e<=t[2]&&i<=t[3]}function JEt(t,e){return Math.max(e[0],t[0])<=Math.min(e[2],t[2])&&Math.max(e[1],t[1])<=Math.min(e[3],t[3])}function KEt(t,e,i){return Math.max(e[0],t[0])-i<=Math.min(e[2],t[2])&&Math.max(e[1],t[1])-i<=Math.min(e[3],t[3])}function mje(t,e){return e[0]>=t[0]&&e[2]<=t[2]&&e[1]>=t[1]&&e[3]<=t[3]}function QEt(t,e,i,r){return r??=t,r[0]=t[0]+e,r[1]=t[1]+i,r[2]=t[2]+e,r[3]=t[3]+i,r}function gje(t){return t?tve(t,mne):tn(mne)}function _9(t){return t!=null&&t.length===4}function eCt(t,e){return _9(t)&&_9(e)?t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]:t===e}const mne=[1/0,1/0,-1/0,-1/0],yje=[0,0,0,0];let dZ=1e-6;function Vo(){return dZ}function vje(t){dZ=t}const aN=Math.random,bje=Math.PI/180,wje=180/Math.PI;function hZ(t){return t*bje}function _je(t){return t*wje}function xje(t,e){return Math.abs(t-e)<=dZ*Math.max(1,Math.abs(t),Math.abs(e))}Object.freeze(Object.defineProperty({__proto__:null,RANDOM:aN,equals:xje,getEpsilon:Vo,setEpsilon:vje,toDegree:_je,toRadian:hZ},Symbol.toStringTag,{value:"Module"}));function jS(t,e){return t[0]=e[0],t[1]=e[1],t}function Fn(t,e,i){return t[0]=e,t[1]=i,t}function rve(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t}function SI(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t}function nve(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t}function sve(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t}function Sje(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function $je(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function Tje(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t}function kje(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t}function Eje(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function WM(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t}function Cje(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t}function oN(t,e){const i=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(i*i+r*r)}function $I(t,e){const i=e[0]-t[0],r=e[1]-t[1];return i*i+r*r}function JR(t){const e=t[0],i=t[1];return Math.sqrt(e*e+i*i)}function ave(t){const e=t[0],i=t[1];return e*e+i*i}function ove(t,e){return t[0]=-e[0],t[1]=-e[1],t}function Ije(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function x9(t,e){const i=e[0],r=e[1];let n=i*i+r*r;return n>0&&(n=1/Math.sqrt(n),t[0]=e[0]*n,t[1]=e[1]*n),t}function lve(t,e){return t[0]*e[0]+t[1]*e[1]}function cve(t,e,i){const r=e[0]*i[1]-e[1]*i[0];return t[0]=t[1]=0,t[2]=r,t}function Mje(t,e,i,r){const n=e[0],s=e[1];return t[0]=n+r*(i[0]-n),t[1]=s+r*(i[1]-s),t}function Aje(t,e=1){const i=2*aN()*Math.PI;return t[0]=Math.cos(i)*e,t[1]=Math.sin(i)*e,t}function Pje(t,e,i){const r=e[0],n=e[1];return t[0]=i[0]*r+i[2]*n,t[1]=i[1]*r+i[3]*n,t}function so(t,e,i){const r=e[0],n=e[1];return t[0]=i[0]*r+i[2]*n+i[4],t[1]=i[1]*r+i[3]*n+i[5],t}function $3(t,e,i){const r=e[0],n=e[1];return t[0]=i[0]*r+i[3]*n+i[6],t[1]=i[1]*r+i[4]*n+i[7],t}function Oje(t,e,i){const r=e[0],n=e[1];return t[0]=i[0]*r+i[4]*n+i[12],t[1]=i[1]*r+i[5]*n+i[13],t}function Lje(t,e,i,r){const n=e[0]-i[0],s=e[1]-i[1],a=Math.sin(r),o=Math.cos(r);return t[0]=n*o-s*a+i[0],t[1]=n*a+s*o+i[1],t}function Dje(t,e){const i=t[0],r=t[1],n=e[0],s=e[1];let a=i*i+r*r;a>0&&(a=1/Math.sqrt(a));let o=n*n+s*s;o>0&&(o=1/Math.sqrt(o));const l=(i*n+r*s)*a*o;return l>1?0:l<-1?Math.PI:Math.acos(l)}function Rje(t){return"vec2("+t[0]+", "+t[1]+")"}function zje(t,e){return t[0]===e[0]&&t[1]===e[1]}function Fje(t,e){const i=t[0],r=t[1],n=e[0],s=e[1],a=Vo();return Math.abs(i-n)<=a*Math.max(1,Math.abs(i),Math.abs(n))&&Math.abs(r-s)<=a*Math.max(1,Math.abs(r),Math.abs(s))}function Nje(t,e,i,r,n){let s=e[0]-i[0],a=e[1]-i[1];const o=(r[0]*s+r[1]*a)*(n-1);return s=r[0]*o,a=r[1]*o,t[0]=e[0]+s,t[1]=e[1]+a,t}const jje=JR,pZ=SI,Vje=nve,Bje=sve,Uje=oN,Hje=$I,Gje=ave;Object.freeze(Object.defineProperty({__proto__:null,add:rve,angle:Dje,ceil:Sje,copy:jS,cross:cve,dist:Uje,distance:oN,div:Bje,divide:sve,dot:lve,equals:Fje,exactEquals:zje,floor:$je,inverse:Ije,len:jje,length:JR,lerp:Mje,max:kje,min:Tje,mul:Vje,multiply:nve,negate:ove,normalize:x9,projectAndScale:Nje,random:Aje,rotate:Lje,round:Eje,scale:WM,scaleAndAdd:Cje,set:Fn,sqrDist:Hje,sqrLen:Gje,squaredDistance:$I,squaredLength:ave,str:Rje,sub:pZ,subtract:SI,transformMat2:Pje,transformMat2d:so,transformMat3:$3,transformMat4:Oje},Symbol.toStringTag,{value:"Module"}));function bm(t,e,i,r){return t[0]=e[0]*(1-r)+i[0]*r,t[1]=e[1]*(1-r)+i[1]*r,t}function Ro(t,e){return $I(t,e)}function tCt(t,e,i){const r=Ro(e,i);if(r===0)return Ro(e,t);const n=(e[0]-t[0])*(i[1]-t[1])-(e[1]-t[1])*(i[0]-t[0]);return n*n/r}function qje(t,e,i,r,n){const[s,a]=e,[o,l]=i,[c,h]=r,[f,g]=n,y=(s-o)*(h-g)-(a-l)*(c-f);if(y===0)return null;const b=(s*l-a*o)*(c-f)-(s-o)*(c*g-h*f),_=(s*l-a*o)*(h-g)-(a-l)*(c*g-h*f);return t[0]=b/y,t[1]=_/y,t}const Ad=2*Math.PI;function X0(t,e){const i=Math.atan2(t,e);return i<0?i+Ad:i}function uve(t){return Math.abs(t)%Ad}function gne(t){const e=uve(t);return e<Math.PI?e:Ad-e}function lN(t,e){return{min:Math.min(t,e),max:Math.max(t,e)}}function dve(t,e,i,r){if(po(uve(t-e),0))return i?[t,t]:[t,r?t-Ad:t+Ad];const[n,s]=r?[t-Ad,t]:[t,t+Ad];return[t,YM({min:n,max:s},e)]}function YM({min:t,max:e},i){let r;return r=e-i,r>=Ad?(r-=r%Ad,i+r):(r=i-t,r>=Ad?(r-=r%Ad,i-r):i)}function Wje(t,e){const i=YM(t,e);return i>t.min&&i<t.max?i:gne(i-t.min)<gne(i-t.max)?t.min:t.max}function hve(t,e,i,r=10){return e.map(n=>{let s=n;for(let a=0;a<r;a++){const[o,l,c,h,f,g]=i(s),y=t[0]-o,b=t[1]-l,_=-c,S=-h;s+=-(2*y*_+2*b*S)/(2*_*_+2*y*-f+2*S*S+2*b*-g||1e-6)}return s})}const Yje=[0,0];function pve(t){const e=1-t,i=e*e,r=t*t;return[i*e,3*t*i,3*r*e,r*t]}function S9(t,e,i,r,n){const[s,a,o,l]=pve(n);return[t[0]*s+e[0]*a+i[0]*o+r[0]*l,t[1]*s+e[1]*a+i[1]*o+r[1]*l]}function yne(t,e,i,r,n){const[s,a,o,l]=pve(n);return t*s+e*a+i*o+r*l}function iCt(t,e,i){const r=t,[n,s,a]=e.b;return S9(r,s,a,n,i)}function Zje(t,e,i){const r=t,[n,s,a]=e.b,o=bm([0,0],r,s,i),l=bm(Yje,s,a,i),c=bm([0,0],a,n,i),h=bm([0,0],o,l,i),f=bm([0,0],l,c,i);return[{b:[bm([],h,f,i),o,h]},{b:[[...n],f,c]}]}function rCt(t,e,i){const r=t,[n,s,a]=e.b,o=hve(i,[.1,.5,.9],f=>{const g=1-f,[y,b]=S9(r,s,a,n,f);return[y,b,3*g*g*(s[0]-r[0])+6*g*f*(a[0]-s[0])+3*f*f*(n[0]-a[0]),3*g*g*(s[1]-r[1])+6*g*f*(a[1]-s[1])+3*f*f*(n[1]-a[1]),6*g*(a[0]-2*s[0]+r[0])+6*f*(n[0]-2*a[0]+s[0]),6*g*(a[1]-2*s[1]+r[1])+6*f*(n[1]-2*a[1]+s[1])]}).map(f=>Math.min(1,Math.max(0,f)));o.push(0,1);let l=1/0;const c=o.map(f=>{const g=S9(r,s,a,n,f),[y,b]=g,_=i[0]-y,S=i[1]-b,$=Math.sqrt(_*_+S*S);return l=Math.min($,l),{t:f,curvePoint:g,distance:$}}),h=[];for(const f of c){const{t:g,distance:y}=f;uZ(y,l)&&!h.some(({t:b})=>po(b,g))&&h.push(f)}return h}function Xje(t,e,i){const r=e,[n,s,a]=i.b;if(Aa(t,r),Aa(t,n),w9(t,s[0],s[1])&&w9(t,a[0],a[1]))return t;for(const o of vne(r[0],s[0],a[0],n[0]))o>0&&o<1&&hje(t,yne(r[0],s[0],a[0],n[0],o));for(const o of vne(r[1],s[1],a[1],n[1]))o>0&&o<1&&pje(t,yne(r[1],s[1],a[1],n[1],o));return t}function vne(t,e,i,r){const n=3*(3*(e-i)-t+r),s=6*(t-2*e+i),a=3*(e-t);if(n===0)return s!==0?[-a/s]:[];const o=Math.sqrt(s*s-4*n*a);return[(-s+o)/(2*n),(-s-o)/(2*n)]}function nCt(t,e,i){let n=0,s=[e];for(let a=0;a<16;a++){let o=t;const l=[];for(const h of s)l.push(...Zje(o,h,.5)),o=h.b[0];s=l,o=t,n=0;let c=0;for(const h of s){const[f,g,y]=h.b,b=Math.sqrt(Ro(o,f));n+=(b+(Math.sqrt(Ro(o,g))+Math.sqrt(Ro(g,y))+Math.sqrt(Ro(y,f))))/2,c+=b,o=f}if(n-c<i)return n}return n}function Jje(t,e,i){const[r,n]=t,[s,a]=e,[o,l]=i,[c,h]=[s-r,a-n];let f=c*(o-r)+h*(l-n);f/=c**2+h**2,f=go(f,0,1);const g=bm([0,0],t,e,f);return{t:f,curvePoint:g,distance:Math.sqrt(Ro(g,i))}}let fve=class{constructor(e,i,r,n,s,a){this.cx=e,this.cy=i,this.radius=r,this.thetaStart=n,this.thetaEnd=s,this.isInvalid=a}get startPoint(){const{cx:e,cy:i,radius:r,thetaStart:n}=this;return[e+r*Math.cos(n),i+r*Math.sin(n)]}get endPoint(){const{cx:e,cy:i,radius:r,thetaEnd:n}=this;return[e+r*Math.cos(n),i+r*Math.sin(n)]}};function KR(t,e){const{cx:i,cy:r,radius:n}=t;return[i+n*Math.cos(e),r+n*Math.sin(e)]}function T3(t,e){if(t.isInvalid)return bm([0,0],t.startPoint,t.endPoint,e);const{thetaStart:i,thetaEnd:r}=t;return KR(t,i*(1-e)+r*e)}function aCt(t,e){if(t.isInvalid)return Jje(t.startPoint,t.endPoint,e);const{cx:i,cy:r,thetaStart:n,thetaEnd:s}=t,[a,o]=e,l=Wje(lN(n,s),Math.atan2(o-r,a-i)),c=KR(t,l);return{t:(l-n)/(s-n),curvePoint:c,distance:Math.sqrt(Ro(e,c))}}function bne(t,e){if(e.isInvalid)return Aa(t,e.startPoint),Aa(t,e.endPoint),t;const{cx:i,cy:r,radius:n,thetaStart:s,thetaEnd:a}=e;Aa(t,KR(e,s)),Aa(t,KR(e,a));const o=lN(s,a),l=Math.PI/2;let c=0;for(const h of[[i+n,r],[i,r+n],[i-n,r],[i,r-n]])c=YM(o,c),c>o.min&&c<o.max&&Aa(t,h),c+=l;return t}function oCt(t){if(t.isInvalid)return 2*t.radius;const{radius:e,thetaStart:i,thetaEnd:r}=t;return e*Math.abs(r-i)}function Kje(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function Qje(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function VS(t,e,i,r,n,s,a,o,l,c){return t[0]=e,t[1]=i,t[2]=r,t[3]=n,t[4]=s,t[5]=a,t[6]=o,t[7]=l,t[8]=c,t}function mve(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function gve(t,e){if(t===e){const i=e[1],r=e[2],n=e[5];t[1]=e[3],t[2]=e[6],t[3]=i,t[5]=e[7],t[6]=r,t[7]=n}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function yve(t,e){const i=e[0],r=e[1],n=e[2],s=e[3],a=e[4],o=e[5],l=e[6],c=e[7],h=e[8],f=h*a-o*c,g=-h*s+o*l,y=c*s-a*l;let b=i*f+r*g+n*y;return b?(b=1/b,t[0]=f*b,t[1]=(-h*r+n*c)*b,t[2]=(o*r-n*a)*b,t[3]=g*b,t[4]=(h*i-n*l)*b,t[5]=(-o*i+n*s)*b,t[6]=y*b,t[7]=(-c*i+r*l)*b,t[8]=(a*i-r*s)*b,t):null}function e4e(t,e){const i=e[0],r=e[1],n=e[2],s=e[3],a=e[4],o=e[5],l=e[6],c=e[7],h=e[8];return t[0]=a*h-o*c,t[1]=n*c-r*h,t[2]=r*o-n*a,t[3]=o*l-s*h,t[4]=i*h-n*l,t[5]=n*s-i*o,t[6]=s*c-a*l,t[7]=r*l-i*c,t[8]=i*a-r*s,t}function k3(t){const e=t[0],i=t[1],r=t[2],n=t[3],s=t[4],a=t[5],o=t[6],l=t[7],c=t[8];return e*(c*s-a*l)+i*(-c*n+a*o)+r*(l*n-s*o)}function TI(t,e,i){const r=e[0],n=e[1],s=e[2],a=e[3],o=e[4],l=e[5],c=e[6],h=e[7],f=e[8],g=i[0],y=i[1],b=i[2],_=i[3],S=i[4],$=i[5],C=i[6],I=i[7],P=i[8];return t[0]=g*r+y*a+b*c,t[1]=g*n+y*o+b*h,t[2]=g*s+y*l+b*f,t[3]=_*r+S*a+$*c,t[4]=_*n+S*o+$*h,t[5]=_*s+S*l+$*f,t[6]=C*r+I*a+P*c,t[7]=C*n+I*o+P*h,t[8]=C*s+I*l+P*f,t}function $9(t,e,i){const r=e[0],n=e[1],s=e[2],a=e[3],o=e[4],l=e[5],c=e[6],h=e[7],f=e[8],g=i[0],y=i[1];return t[0]=r,t[1]=n,t[2]=s,t[3]=a,t[4]=o,t[5]=l,t[6]=g*r+y*a+c,t[7]=g*n+y*o+h,t[8]=g*s+y*l+f,t}function vve(t,e,i){const r=e[0],n=e[1],s=e[2],a=e[3],o=e[4],l=e[5],c=e[6],h=e[7],f=e[8],g=Math.sin(i),y=Math.cos(i);return t[0]=y*r+g*a,t[1]=y*n+g*o,t[2]=y*s+g*l,t[3]=y*a-g*r,t[4]=y*o-g*n,t[5]=y*l-g*s,t[6]=c,t[7]=h,t[8]=f,t}function t4e(t,e,i){const r=i[0],n=i[1],s=i[2];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=n*e[3],t[4]=n*e[4],t[5]=n*e[5],t[6]=s*e[6],t[7]=s*e[7],t[8]=s*e[8],t}function i4e(t,e,i){const r=i[0],n=i[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=n*e[3],t[4]=n*e[4],t[5]=n*e[5],t}function r4e(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function n4e(t,e){const i=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=i,t[2]=0,t[3]=-i,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function s4e(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function a4e(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function o4e(t,e){const i=e[0],r=e[1],n=e[2],s=e[3],a=i+i,o=r+r,l=n+n,c=i*a,h=r*a,f=r*o,g=n*a,y=n*o,b=n*l,_=s*a,S=s*o,$=s*l;return t[0]=1-f-b,t[3]=h-$,t[6]=g+S,t[1]=h+$,t[4]=1-c-b,t[7]=y-_,t[2]=g-S,t[5]=y+_,t[8]=1-c-f,t}function l4e(t,e){const i=e[0],r=e[1],n=e[2],s=e[4],a=e[5],o=e[6],l=e[8],c=e[9],h=e[10],f=h*a-o*c,g=-h*s+o*l,y=c*s-a*l,b=i*f+r*g+n*y;if(!b)return null;const _=1/b;return t[0]=f*_,t[1]=(-h*r+n*c)*_,t[2]=(o*r-n*a)*_,t[3]=g*_,t[4]=(h*i-n*l)*_,t[5]=(-o*i+n*s)*_,t[6]=y*_,t[7]=(-c*i+r*l)*_,t[8]=(a*i-r*s)*_,t}function c4e(t,e){const i=e[0],r=e[1],n=e[2],s=e[3],a=e[4],o=e[5],l=e[6],c=e[7],h=e[8],f=e[9],g=e[10],y=e[11],b=e[12],_=e[13],S=e[14],$=e[15],C=i*o-r*a,I=i*l-n*a,P=i*c-s*a,O=r*l-n*o,N=r*c-s*o,R=n*c-s*l,G=h*_-f*b,Y=h*S-g*b,Q=h*$-y*b,ae=f*S-g*_,ce=f*$-y*_,ne=g*$-y*S;let K=C*ne-I*ce+P*ae+O*Q-N*Y+R*G;return K?(K=1/K,t[0]=(o*ne-l*ce+c*ae)*K,t[1]=(l*Q-a*ne-c*Y)*K,t[2]=(a*ce-o*Q+c*G)*K,t[3]=(n*ce-r*ne-s*ae)*K,t[4]=(i*ne-n*Q+s*Y)*K,t[5]=(r*Q-i*ce-s*G)*K,t[6]=(_*R-S*N+$*O)*K,t[7]=(S*P-b*R-$*I)*K,t[8]=(b*N-_*P+$*C)*K,t):null}function u4e(t,e,i){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/i,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function d4e(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function h4e(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+t[6]**2+t[7]**2+t[8]**2)}function p4e(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t[6]=e[6]+i[6],t[7]=e[7]+i[7],t[8]=e[8]+i[8],t}function bve(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t[6]=e[6]-i[6],t[7]=e[7]-i[7],t[8]=e[8]-i[8],t}function f4e(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*i,t}function m4e(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t[3]=e[3]+i[3]*r,t[4]=e[4]+i[4]*r,t[5]=e[5]+i[5]*r,t[6]=e[6]+i[6]*r,t[7]=e[7]+i[7]*r,t[8]=e[8]+i[8]*r,t}function g4e(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function y4e(t,e){const i=t[0],r=t[1],n=t[2],s=t[3],a=t[4],o=t[5],l=t[6],c=t[7],h=t[8],f=e[0],g=e[1],y=e[2],b=e[3],_=e[4],S=e[5],$=e[6],C=e[7],I=e[8],P=Vo();return Math.abs(i-f)<=P*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(r-g)<=P*Math.max(1,Math.abs(r),Math.abs(g))&&Math.abs(n-y)<=P*Math.max(1,Math.abs(n),Math.abs(y))&&Math.abs(s-b)<=P*Math.max(1,Math.abs(s),Math.abs(b))&&Math.abs(a-_)<=P*Math.max(1,Math.abs(a),Math.abs(_))&&Math.abs(o-S)<=P*Math.max(1,Math.abs(o),Math.abs(S))&&Math.abs(l-$)<=P*Math.max(1,Math.abs(l),Math.abs($))&&Math.abs(c-C)<=P*Math.max(1,Math.abs(c),Math.abs(C))&&Math.abs(h-I)<=P*Math.max(1,Math.abs(h),Math.abs(I))}function v4e(t){const e=Vo(),i=t[0],r=t[1],n=t[2],s=t[3],a=t[4],o=t[5],l=t[6],c=t[7],h=t[8];return Math.abs(1-(i*i+s*s+l*l))<=e&&Math.abs(1-(r*r+a*a+c*c))<=e&&Math.abs(1-(n*n+o*o+h*h))<=e}const b4e=TI,w4e=bve;Object.freeze(Object.defineProperty({__proto__:null,add:p4e,adjoint:e4e,copy:Qje,determinant:k3,equals:y4e,exactEquals:g4e,frob:h4e,fromMat2d:a4e,fromMat4:Kje,fromQuat:o4e,fromRotation:n4e,fromScaling:s4e,fromTranslation:r4e,identity:mve,invert:yve,isOrthoNormal:v4e,mul:b4e,multiply:TI,multiplyScalar:f4e,multiplyScalarAndAdd:m4e,normalFromMat4:c4e,normalFromMat4Legacy:l4e,projection:u4e,rotate:vve,scale:t4e,scaleByVec2:i4e,set:VS,str:d4e,sub:w4e,subtract:bve,translate:$9,transpose:gve},Symbol.toStringTag,{value:"Module"}));function x_(){return[1,0,0,0,1,0,0,0,1]}function _4e(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8]]}function x4e(t,e,i,r,n,s,a,o,l){return[t,e,i,r,n,s,a,o,l]}const S4e=x_();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:S4e,clone:_4e,create:x_,fromValues:x4e},Symbol.toStringTag,{value:"Module"}));const $1=x_();function $4e(t,e,i){const[r,n]=t,[s,a]=e,[o,l]=i;VS($1,r,s,o,n,a,l,1,1,1);const c=k3($1),h=4*c/(Ro(t,e)+Ro(e,i)+Ro(i,t));if(!isFinite(h)||Math.abs(h)<1e-8)return null;const f=r**2+n**2,g=s**2+a**2,y=o**2+l**2;VS($1,f,g,y,n,a,l,1,1,1);const b=k3($1);return VS($1,f,g,y,r,s,o,1,1,1),[b/c*.5,k3($1)/c*-.5]}function wve(t,e){const[i,r]=e.c,n=$4e(t,r,i),s=n==null,a=n??bm([],t,i,.5),[o,l]=t,[c,h]=r,[f,g]=i,[y,b]=a,_=o-y,S=l-b,$=Math.sqrt(_*_+S*S),C=X0(l-b,o-y),I=X0(h-b,c-y);let P=X0(g-b,f-y);return(I-C)*(P-I)<0&&(P+=2*Math.sign(C-P)*Math.PI),new fve(y,b,$,C,P,s)}function lCt(t,e,i){const r=T3(t,i/2),n=T3(t,i),s=T3(t,(i+1)/2);return[{c:[n,r]},{c:[[...e.c[0]],s]}]}function cCt(t,e){const[i]=e.c,{cx:r,cy:n,thetaStart:s,thetaEnd:a,radius:o,isInvalid:l}=wve(t,e);return{a:[i,[r,n],Math.abs(a-s)<Math.PI?1:0,s>a?1:0,l?s:0,o,l?0:1]}}function uCt(t){return"curveRings"in t&&!!t.curveRings?.length||"curvePaths"in t&&!!t.curvePaths?.length}function dCt(t){return"curveRings"in t?t.curveRings:t.curvePaths}function fZ(t){return"b"in t}function mZ(t){return"c"in t}function cN(t){return Array.isArray(t)}function hCt(t){return"a"in t}function _ve(t){return"a"in t&&t.a.length===4}function T4e(t){return"a"in t&&t.a.length===7}function k6(t){return cN(t)?t:fZ(t)?t.b[0]:mZ(t)?t.c[0]:t.a[0]}function k4e(t){if(fZ(t)){const[e,i,r]=t.b;return{b:[[...e],[...i],[...r]]}}if(mZ(t)){const[e,i]=t.c;return{c:[[...e],[...i]]}}if(cN(t))return[...t];if(_ve(t)){const[e,i,r,n]=t.a;return{a:[[...e],[...i],r,n]}}if(T4e(t)){const[e,i,r,n,s,a,o]=t.a;return{a:[[...e],[...i],r,n,s,a,o]}}return t}function E4e(t,e){const[i,r,n,s]=e.a,[a,o]=t,[l,c]=i,[h,f]=r,g=a-h,y=o-f,b=Math.sqrt(g*g+y*y),_=l-h,S=c-f,$=Math.sqrt(_*_+S*S),C=b===0||$===0||!uZ(b,$),I=b,[P,O]=dve(X0(o-f,a-h),Math.atan2(c-f,l-h),n,s);return new fve(h,f,I,P,O,C)}function pCt(t,e,i){const{cx:r,cy:n,thetaStart:s,thetaEnd:a}=t,[o,l,c,h]=e.a,f=s*(1-i)+a*i;return[{a:[T3(t,i),[r,n],Math.abs(f-s)<Math.PI?1:0,h]},{a:[[...o],[r,n],Math.abs(a-f)<Math.PI?1:0,h]}]}let C4e=class{constructor(e,i,r,n,s,a,o,l,c){this.cx=e,this.cy=i,this.a=r,this.b=n,this.cosR=s,this.sinR=a,this.u1=o,this.u2=l,this.isInvalid=c}};function gZ(t,e){const[i,r,n,s,a,o,l]=e.a,[c,h]=t,[f,g]=i,[y,b]=r,_=o*l,S=Math.cos(a),$=Math.sin(a),[C,I]=dve(X0(1/_*(h-b)*S-1/_*(c-y)*$,1/o*(h-b)*$+1/o*(c-y)*S),Math.atan2(1/_*(g-b)*S-1/_*(f-y)*$,1/o*(g-b)*$+1/o*(f-y)*S),n,s);return new C4e(y,b,o,_,S,$,C,I,o===0||_===0)}function kI(t,e){const{a:i,b:r,cosR:n,sinR:s,cx:a,cy:o}=t,l=Math.cos(e),c=Math.sin(e);return[i*l*n-r*c*s+a,i*l*s+r*c*n+o]}function cx(t,e){const{u1:i,u2:r}=t;return kI(t,i*(1-e)+r*e)}function mCt(t,e,i){if(i<0||i>1)return[];if(i===0||i===1)return[k4e(e)];const[r,[n,s],a,o,l,c,h]=e.a,{u1:f,u2:g}=t,y=f*(1-i)+g*i;return[{a:[[...cx(t,i)],[n,s],Math.abs(y-f)<Math.PI?1:0,o,l,c,h]},{a:[[...r],[n,s],Math.abs(g-y)<Math.PI?1:0,o,l,c,h]}]}function gCt(t,e){const{a:i,b:r,cosR:n,sinR:s,u1:a,u2:o}=t,l=Math.PI/6,c=hve(e,[1*l,2*l,4*l,5*l,7*l,8*l,10*l,11*l],_=>{const S=Math.cos(_),$=Math.sin(_),[C,I]=kI(t,_);return[C,I,-i*n*$-r*s*S,-i*s*$+r*n*S,-i*n*S+r*s*$,-i*s*S-r*n*$]}),h=lN(a,o),f=new Set(c.map(_=>YM(h,_)).filter(_=>_>h.min&&_<h.max));f.add(a),f.add(o);let g,y,b=1/0;for(const _ of f){const S=kI(t,_),[$,C]=S,I=e[0]-$,P=e[1]-C,O=I*I+P*P;O<b&&(g=(_-a)/(o-a),y=S,b=O)}return{t:g,curvePoint:y,distance:Math.sqrt(b)}}function I4e(t,e,i){const r=gZ(e,i),{a:n,b:s,u1:a,u2:o,cosR:l,sinR:c,isInvalid:h}=r,f=i.a[0];if(Aa(t,e),Aa(t,f),h)return t;const g=Math.atan2(-s*c,n*l),y=g+Math.PI,b=Math.atan2(s*l,n*c),_=b+Math.PI,S=lN(a,o);for(const $ of[g,y,b,_].map(C=>YM(S,C)))$>S.min&&$<S.max&&Aa(t,kI(r,$));return t}function yCt(t,e,i){const[r,n,s,a,o,l,c]=e.a,h=gZ(t,e),{u1:f,u2:g,isInvalid:y}=h,b=g-f;if(y)return Math.sqrt(Ro(t,r));const _=14,S=[0,0];let $=0,C=[cx(h,0),cx(h,.25),cx(h,.5),cx(h,.75),cx(h,1)];for(let I=0;I<_;I++){const P=C.length-1,O=b/(2*P),N=[];for(let G=0;G<P;G++)N.push(C[G]),N.push(kI(h,f+(2*G+1)*O));N.push(C[C.length-1]),C=N,$=0;let R=0;for(let G=1;G<C.length;G++){const Y=C[G-1],Q=C[G];if($+=Math.sqrt(Ro(Y,Q)),G>1){const ae=C[G-2],ce=qje(S,ae,Y,n,Q);R+=ce?Math.sqrt(Ro(Y,ce)):Math.abs(Q[0]-Y[0])+Math.abs(Q[1]-Y[1])}else R+=$}if(R-$<i)return $}return $}const wne=x_(),cO=x_(),_ne=x_(),Zg=x_();function vCt(t,e,i){const[r,n,s,a,o,l,c]=e.a,h=gZ(t,e),{cosR:f,sinR:g,a:y,b,cx:_,cy:S}=h,$=$3([0,0],r,i),C=$3([0,0],n,i),I=i[0]*i[4]<0?1-a:a;{const P=y*y*g*g+b*b*f*f,O=2*(b*b-y*y)*g*f,N=y*y*f*f+b*b*g*g,R=-2*P*_-O*S,G=-O*_-2*N*S;VS(wne,P,O/2,R/2,O/2,N,G/2,R/2,G/2,P*_*_+O*_*S+N*S*S-y*y*b*b)}if(yve(cO,i),cO==null){const P=$3([0,0],t,i);return{a:[$,C,s,a,X0($[1],$[0]),Math.sqrt(Ro($,P))/2,0]}}gve(_ne,cO),TI(Zg,TI(Zg,_ne,wne),cO);{const P=Zg[0],O=2*Zg[1],N=Zg[4],R=2*Zg[2],G=2*Zg[5],Y=O*O-4*P*N,Q=2*(P*G*G+N*R*R-O*R*G+Y*Zg[8]),ae=Math.sqrt((P-N)**2+O*O),ce=-Math.sqrt(Q*(P+N+ae))/Y,ne=-Math.sqrt(Q*(P+N-ae))/Y;return{a:[$,C,s,I,.5*X0(-O,N-P),ce,ne/ce]}}}function M4e(t,e,i){if(cN(i))return Aa(t,e),Aa(t,i),t;if(fZ(i))return Xje(t,e,i);if(mZ(i)){const r=wve(e,i);return bne(t,r)}if(_ve(i)){const r=E4e(e,i);return bne(t,r)}return I4e(t,e,i)}function xve(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function Sve(t){return t.points!==void 0}function $ve(t){return t.x!==void 0&&t.y!==void 0}function Tve(t){return t.paths!==void 0}function kve(t){return t.rings!==void 0}function Eve(t){function e(i,r){return i==null?r:r==null?i:t(i,r)}return e}const Ky=Eve(Math.min),Qy=Eve(Math.max);function yZ(t,e){return Tve(e)?W$(t,e.curvePaths??e.paths,!1,!1)??t:kve(e)?W$(t,e.curveRings??e.rings,!1,!1)??t:Sve(e)?vZ(t,e.points,!1,!1,!1,!1):xve(e)?Ive(t,e):($ve(e)&&(t[0]=e.x,t[1]=e.y,t[2]=e.x,t[3]=e.y),t)}function ZM(t){let e,i,r,n;for(t.reset(),e=r=1/0,i=n=-1/0;t.nextPath();){const s=Cve(t);e=Math.min(s[0],e),r=Math.min(s[1],r),i=Math.max(s[2],i),n=Math.max(s[3],n)}return tn([e,r,i,n])}function Cve(t){let e,i,r,n;for(e=r=1/0,i=n=-1/0;t.nextPoint();)e=Math.min(t.x,e),r=Math.min(t.y,r),i=Math.max(t.x,i),n=Math.max(t.y,n);return tn([e,r,i,n])}function bCt(t,e){return Tve(e)?W$(t,e.curvePaths??e.paths,!0,!1)??t:kve(e)?W$(t,e.curveRings??e.rings,!0,!1)??t:Sve(e)?vZ(t,e.points,!0,!1,!0,!1):xve(e)?Ive(t,e,!0,!1,!0,!1):($ve(e)&&(t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.x,t[4]=e.y,t[5]=e.z),t)}function W$(t,e,i,r){const n=i?3:2;if(!e.length||!e[0].length)return null;let s,a,o,l,[c,h]=k6(e[0][0]),f=c,g=h;for(let y=0;y<e.length;y++){const b=e[y];for(let _=0;_<b.length;_++){const S=k6(b[_]),[$,C]=S;if(c=Ky(c,$),h=Ky(h,C),f=Qy(f,$),g=Qy(g,C),i&&S.length>2){const N=S[2];s=Ky(s,N),a=Qy(a,N)}if(r&&S.length>n){const N=S[n];o=Ky(s,N),l=Qy(a,N)}const I=b[_];if(cN(I)||_<1)continue;const P=k6(b[_-1]),O=ive(c,h,f,g);[c,h,f,g]=M4e(O,P,I)}}return i?r?(t[0]=c,t[1]=h,t[2]=s,t[3]=o,t[4]=f,t[5]=g,t[6]=a,t[7]=l,t.length=8,t):(t[0]=c,t[1]=h,t[2]=s,t[3]=f,t[4]=g,t[5]=a,t.length=6,t):r?(t[0]=c,t[1]=h,t[2]=o,t[3]=f,t[4]=g,t[5]=l,t.length=6,t):(t[0]=c,t[1]=h,t[2]=f,t[3]=g,t.length=4,t)}function Ive(t,e,i,r,n,s){const a=e.xmin,o=e.xmax,l=e.ymin,c=e.ymax;let h=e.zmin,f=e.zmax,g=e.mmin,y=e.mmax;return n?(h=h||0,f=f||0,s?(g=g||0,y=y||0,t[0]=a,t[1]=l,t[2]=h,t[3]=g,t[4]=o,t[5]=c,t[6]=f,t[7]=y,t):(t[0]=a,t[1]=l,t[2]=h,t[3]=o,t[4]=c,t[5]=f,t)):s?(g=g||0,y=y||0,t[0]=a,t[1]=l,t[2]=g,t[3]=o,t[4]=c,t[5]=y,t):(t[0]=a,t[1]=l,t[2]=o,t[3]=c,t)}function vZ(t,e,i,r,n,s){const a=i?3:2,o=r&&s,l=i&&n;if(!e.length||!e[0].length)return null;let c,h,f,g,[y,b]=e[0],[_,S]=e[0];for(let $=0;$<e.length;$++){const C=e[$],[I,P]=C;if(y=Ky(y,I),b=Ky(b,P),_=Qy(_,I),S=Qy(S,P),l&&C.length>2){const O=C[2];c=Ky(c,O),h=Qy(h,O)}if(o&&C.length>a){const O=C[a];f=Ky(c,O),g=Qy(h,O)}}return n?(c=c||0,h=h||0,s?(f=f||0,g=g||0,t[0]=y,t[1]=b,t[2]=c,t[3]=f,t[4]=_,t[5]=S,t[6]=h,t[7]=g,t):(t[0]=y,t[1]=b,t[2]=c,t[3]=_,t[4]=S,t[5]=h,t)):s?(f=f||0,g=g||0,t[0]=y,t[1]=b,t[2]=f,t[3]=_,t[4]=S,t[5]=g,t):(t[0]=y,t[1]=b,t[2]=_,t[3]=S,t)}function A4e(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function P4e(t){return t.points!==void 0}function O4e(t){return t.x!==void 0&&t.y!==void 0}function L4e(t){return t.paths!==void 0}function D4e(t){return t.rings!==void 0}const bZ=[];function Mve(t,e,i,r){return{xmin:t,ymin:e,xmax:i,ymax:r}}function Ave(t,e,i,r,n,s){return{xmin:t,ymin:e,zmin:i,xmax:r,ymax:n,zmax:s}}function Pve(t,e,i,r,n,s){return{xmin:t,ymin:e,mmin:i,xmax:r,ymax:n,mmax:s}}function Ove(t,e,i,r,n,s,a,o){return{xmin:t,ymin:e,zmin:i,mmin:r,xmax:n,ymax:s,zmax:a,mmax:o}}function wZ(t,e=!1,i=!1){return e?i?Ove(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]):Ave(t[0],t[1],t[2],t[3],t[4],t[5]):i?Pve(t[0],t[1],t[2],t[3],t[4],t[5]):Mve(t[0],t[1],t[2],t[3])}function wCt(t){return t?A4e(t)?t:O4e(t)?R4e(t):D4e(t)?Dve(t):L4e(t)?Rve(t):P4e(t)?Lve(t):null:null}function Lve(t){const{hasZ:e,hasM:i,points:r}=t,n=vZ(bZ,r,e??!1,i??!1,e??!1,i??!1);return n?wZ(n,e,i):null}function R4e(t){const{x:e,y:i,z:r,m:n}=t,s=n!=null;return r!=null?s?Ove(e,i,r,n,e,i,r,n):Ave(e,i,r,e,i,r):s?Pve(e,i,n,e,i,n):Mve(e,i,e,i)}function Dve(t){const{hasZ:e,hasM:i,rings:r,curveRings:n}=t,s=W$(bZ,n??r,e??!1,i??!1);return s?wZ(s,e,i):null}function Rve(t){const{hasZ:e,hasM:i,paths:r,curvePaths:n}=t,s=W$(bZ,n??r,e??!1,i??!1);return s?wZ(s,e,i):null}function Y$(t,e,i=!1){let{hasM:r,hasZ:n}=t;Array.isArray(e)?e.length!==4||r||n?e.length===3&&i&&!r?(n=!0,r=!1):e.length===3&&r&&n&&(r=!1,n=!1):(r=!0,n=!0):(n=!n&&e.hasZ&&(!r||e.hasM),r=!r&&e.hasM&&(!n||e.hasZ)),t.hasZ=n,t.hasM=r}var T9;function z4e(t){if(!t)return;let{points:e,hasM:i,hasZ:r,spatialReference:n}=t;switch(e??=[],e?.at(0)?.length){case 4:r??=!0,i??=!0;break;case 3:r??=i!==!0,i??=!r;break;default:r??=!1,i??=!1}return n??=at.WGS84,{...t,hasM:i,hasZ:r,points:e,spatialReference:n}}let ou=T9=class extends Is{constructor(t){super(z4e(t)),this.points=[],this.type="multipoint"}get cache(){return this.commitProperty("points"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const t=Lve(this);return t?new Wt({...t,spatialReference:this.spatialReference}):null}writePoints(t,e){e.points=de(this.points)}clone(){const{points:t,spatialReference:e,hasM:i,hasZ:r}=this;return new T9({points:de(t),spatialReference:e.clone(),hasM:i,hasZ:r})}addPoint(t){return Y$(this,t),Array.isArray(t)?this.points.push(t):this.points.push(t.toArray()),this.notifyChange("points"),this}getPoint(t){if(!this._validateInputs(t))return null;const e=this.points[t],i={x:e[0],y:e[1],spatialReference:this.spatialReference};let r=2;return this.hasZ&&(i.z=e[2],r=3),this.hasM&&(i.m=e[r]),new gt(i)}removePoint(t){if(!this._validateInputs(t))return null;const e=new gt(this.points.splice(t,1)[0],this.spatialReference);return this.notifyChange("points"),e}setPoint(t,e){return this._validateInputs(t)?(Y$(this,e),Array.isArray(e)||(e=e.toArray()),this.points[t]=e,this.notifyChange("points"),this):this}toJSON(t){return this.write({},t)}_validateInputs(t){return t!=null&&t>=0&&t<this.points.length}};d([m({readOnly:!0})],ou.prototype,"cache",null),d([m({readOnly:!0})],ou.prototype,"extent",null),d([m({type:[[Number]],json:{write:{isRequired:!0}}})],ou.prototype,"points",void 0),d([qe("points")],ou.prototype,"writePoints",null),ou=T9=d([U("esri.geometry.Multipoint")],ou),ou.prototype.toJSON.isDefaultToJSON=!0;function uN(t){const e=[];for(t.reset();t.nextPath();){const i=[];for(;t.nextPoint();)i.push([t.x,t.y]);e.push(i)}return t.reset(),e}function uv(t){const e=[];for(;t.nextPoint();)e.push([t.x,t.y]);return t.seekPathStart(),e}function _Ct(t){if(!t)return null;if(Array.isArray(t))return t;const e=t.hasZ,i=t.hasM;if(t.type==="point")return i&&e?[t.x,t.y,t.z,t.m]:e?[t.x,t.y,t.z]:i?[t.x,t.y,t.m]:[t.x,t.y];if(t.type==="polygon")return t.rings.slice();if(t.type==="polyline")return t.paths.slice();if(t.type==="multipoint")return t.points.map(r=>[r]);if(t.type==="extent"){const r=t.clone().normalize();if(!r)return null;let n=!1,s=!1;return r.forEach(a=>{a.hasZ&&(n=!0),a.hasM&&(s=!0)}),r.map(a=>{const o=[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]];if(n&&a.hasZ){const l=.5*(a.zmax-a.zmin);for(let c=0;c<o.length;c++)o[c].push(l)}if(s&&a.hasM){const l=.5*(a.mmax-a.mmin);for(let c=0;c<o.length;c++)o[c].push(l)}return o})}return null}function dN(t,e){const i=e[0]-t[0],r=e[1]-t[1];if(t.length>2&&e.length>2){const n=t[2]-e[2];return Math.sqrt(i*i+r*r+n*n)}return Math.sqrt(i*i+r*r)}function zve(t,e,i){const r=t[0]+i*(e[0]-t[0]),n=t[1]+i*(e[1]-t[1]);return t.length>2&&e.length>2?[r,n,t[2]+i*(e[2]-t[2])]:[r,n]}function F4e(t,e,i,r){return Fve(t,e,i[r],i[r+1])}function Fve(t,e,i,r){const[n,s]=e,[a,o]=i,[l,c]=r,h=l-a,f=c-o,g=h*h+f*f,y=(n-a)*h+(s-o)*f,b=Math.min(1,Math.max(0,y/g));return t[0]=a+h*b,t[1]=o+f*b,t}function N4e(t,e,i,r,n,s){let a=i,o=r,l=n-a,c=s-o;if(l!==0||c!==0){const h=((t-a)*l+(e-o)*c)/(l*l+c*c);h>1?(a=n,o=s):h>0&&(a+=l*h,o+=c*h)}return l=t-a,c=e-o,l*l+c*c}function Nve(t,e){return zve(t,e,.5)}function j4e(t){const e=t.length;let i=0;for(let r=0;r<e-1;++r)i+=dN(t[r],t[r+1]);return i}function xCt(t,e){if(e<=0)return t[0];const i=t.length;let r=0;for(let n=0;n<i-1;++n){const s=dN(t[n],t[n+1]);if(e-r<s){const a=(e-r)/s;return zve(t[n],t[n+1],a)}r+=s}return t[i-1]}function jve(t,e=0,i=1){let r=0;const n=t.length;let s=t[0];for(let a=1;a<n;a++){const o=t[a];r+=(o[e]-s[e])*(o[i]+s[i]),s=o}if(Vve(t)){const a=t[0];r+=(a[e]-s[e])*(a[i]+s[i])}return r>=0}function Vve(t){const e=t.length;return e>0&&!wF(t[0],t[e-1])}function SCt(t){"rings"in t&&(V4e(t),B4e(t))}function V4e(t){if("rings"in t)for(const e of t.rings)Vve(e)&&e.push(e[0].slice())}function B4e(t){if(!("rings"in t)||t.rings.length===0||jve(t.rings[0]))return!1;for(const e of t.rings)e.reverse();return!0}function $Ct(t){return t.type!=="polygon"&&t.type!=="polyline"||U4e(t.type==="polygon"?t.rings:t.paths,t.spatialReference),t}function U4e(t,e){const i=No(e);if(!i)return;const r=i.valid[0],n=i.valid[1],s=n-r;for(const a of t){let o=1/0,l=-1/0;for(const h of a){const f=H4e(h[0],r,n);o=Math.min(o,f),l=Math.max(l,f),h[0]=f}const c=l-o;s-c<c&&a.forEach(h=>{h[0]<0&&(h[0]+=s)})}}function H4e(t,e,i){const r=i-e;return t<e?i-(e-t)%r:t>i?e+(t-e)%r:t}function TCt(t,e){if(t===e)return!0;if(t.type!==e.type)return!1;if(t.type==="point"||t.type==="mesh"||t.type==="extent")return!0;if(t.type==="multipoint")return t.points.length===e.points.length;const[i,r]=t.type==="polyline"?[t.paths,e.paths]:[t.rings,e.rings];return i.length===r.length&&i.every((n,s)=>n.length===r[s].length)}function kCt(t){return t?t.hasZ?[t.xmax-t.xmin/2,t.ymax-t.ymin/2,t.zmax-t.zmin/2]:[t.xmax-t.xmin/2,t.ymax-t.ymin/2]:null}function Bve(t){return G4e(t.rings,t.hasZ??!1)}function Uve(t){const e=Bve(t);if(!e)return null;const{hasZ:i,spatialReference:r}=t,[n,s,a]=e;return isNaN(n)||isNaN(s)||i&&isNaN(a)?null:{x:n,y:s,z:i?a:void 0,spatialReference:r}}function G4e(t,e){if(!t?.length)return null;const i=[],r=[],n=e?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0];for(let s=0,a=t.length;s<a;s++){const o=Hve(t[s],e,n);o&&r.push(o)}if(r.sort((s,a)=>{let o=s[2]-a[2];return o===0&&e&&(o=s[4]-a[4]),o}),r.length&&(i[0]=r[0][0],i[1]=r[0][1],e&&(i[2]=r[0][3]),(i[0]<n[0]||i[0]>n[1]||i[1]<n[2]||i[1]>n[3]||e&&(i[2]<n[4]||i[2]>n[5]))&&(i.length=0)),!i.length){const s=t[0]&&t[0].length?W4e(t[0],e):null;if(!s)return null;i[0]=s[0],i[1]=s[1],e&&s.length>2&&(i[2]=s[2])}return i}function Hve(t,e,i){let r=0,n=0,s=0,a=0,o=0;const l=t.length?t[0][0]:0,c=t.length?t[0][1]:0,h=t.length&&e?t[0][2]:0;for(let g=0;g<t.length;g++){const y=t[g],b=t[(g+1)%t.length],[_,S,$]=y,C=_-l,I=S-c,[P,O,N]=b,R=P-l,G=O-c,Y=C*G-R*I;if(a+=Y,r+=(C+R)*Y,n+=(I+G)*Y,e&&y.length>2&&b.length>2){const Q=$-h,ae=N-h,ce=C*ae-R*Q;s+=(Q+ae)*ce,o+=ce}_<i[0]&&(i[0]=_),_>i[1]&&(i[1]=_),S<i[2]&&(i[2]=S),S>i[3]&&(i[3]=S),e&&($<i[4]&&(i[4]=$),$>i[5]&&(i[5]=$))}if(a>0&&(a*=-1),o>0&&(o*=-1),!a)return null;a*=.5,o*=.5;const f=[r/(6*a)+l,n/(6*a)+c,a];return e&&(i[4]===i[5]||o===0?(f[3]=(i[4]+i[5])/2,f[4]=0):(f[3]=s/(6*o)+h,f[4]=o)),f}function q4e(t,e){let i=0,r=0,n=0;t.nextPoint();const s=t.pathSize?t.x:0,a=t.pathSize?t.y:0;for(let o=0;o<t.pathSize;o++){t.seekInPath(o);const l=[t.x,t.y];t.seekInPath((o+1)%t.pathSize);const c=[t.x,t.y],[h,f]=l,g=h-s,y=f-a,[b,_]=c,S=b-s,$=_-a,C=g*$-S*y;n+=C,i+=(g+S)*C,r+=(y+$)*C,h<e[0]&&(e[0]=h),h>e[1]&&(e[1]=h),f<e[2]&&(e[2]=f),f>e[3]&&(e[3]=f)}return n>0&&(n*=-1),n?(n*=.5,[i/(6*n)+s,r/(6*n)+a,n]):null}function W4e(t,e){const i=e?[0,0,0]:[0,0],r=e?[0,0,0]:[0,0];let n=0,s=0,a=0,o=0;for(let l=0,c=t.length;l<c-1;l++){const h=t[l],f=t[l+1];if(h&&f){i[0]=h[0],i[1]=h[1],r[0]=f[0],r[1]=f[1],e&&h.length>2&&f.length>2&&(i[2]=h[2],r[2]=f[2]);const g=dN(i,r);if(g){n+=g;const y=Nve(h,f);s+=g*y[0],a+=g*y[1],e&&y.length>2&&(o+=g*y[2])}}}return n>0?e?[s/n,a/n,o/n]:[s/n,a/n]:t.length?t[0]:null}function Gve(t){const{hasZ:e,totalSize:i}=t;if(i===0)return null;const r=[],n=[],s=e?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];for(t.reset();t.nextPath();){const a=Hve(uv(t),t.hasZ,s);a&&n.push(a)}if(n.sort((a,o)=>{let l=a[2]-o[2];return l===0&&e&&(l=a[4]-o[4]),l}),n.length&&(r[0]=n[0][0],r[1]=n[0][1],e&&(r[2]=n[0][3]),(r[0]<s[0]||r[0]>s[1]||r[1]<s[2]||r[1]>s[3]||e&&(r[2]<s[4]||r[2]>s[5]))&&(r.length=0)),!r.length){t.reset(),t.nextPath();const a=t.pathSize?Y4e(t):null;if(!a)return null;r[0]=a[0],r[1]=a[1],e&&a.length>2&&(r[2]=a[2])}return r}function Y4e(t){const{hasZ:e}=t,i=e?[0,0,0]:[0,0],r=e?[0,0,0]:[0,0];let n=0,s=0,a=0,o=0;if(t.nextPoint()){let l=t.x,c=t.y,h=t.z;for(;t.nextPoint();){const f=t.x,g=t.y,y=t.z;i[0]=l,i[1]=c,r[0]=f,r[1]=g,e&&(i[2]=h,r[2]=y);const b=dN(i,r);if(b){n+=b;const _=Nve(i,r);s+=b*_[0],a+=b*_[1],e&&_.length>2&&(o+=b*_[2])}l=f,c=g,h=y}}return n>0?e?[s/n,a/n,o/n]:[s/n,a/n]:t.pathSize?(t.seekPathStart(),t.nextPoint(),[t.x,t.y]):null}const Z4e=1e-6;function X4e(t){let e=0;for(t.reset();t.nextPath();)e+=t.getCurrentRingArea();if(e<Z4e){const n=Gve(t);return n?[n[0],n[1]]:null}const i=[0,0];if(t.reset(),!t.nextPath()||!t.nextPoint())return null;const r=[t.x,t.y];for(t.reset();t.nextPath();)K4e(i,r,t);return i[0]*=1/e,i[1]*=1/e,i[0]+=r[0],i[1]+=r[1],i}const J4e=1/3;function K4e(t,e,i){if(!t||!i||i.pathSize<3)return null;i.nextPoint();const r=i.x,n=i.y;i.nextPoint();let s,a=i.x-r,o=i.y-n,l=0,c=0;for(;i.nextPoint();)l=i.x-r,c=i.y-n,s=.5*J4e*(l*o-c*a),t[0]+=s*(a+l),t[1]+=s*(o+c),a=l,o=c;const h=i.getCurrentRingArea(),f=[r,n];return f[0]-=e[0],f[1]-=e[1],f[0]*=h,f[1]*=h,t[0]+=f[0],t[1]+=f[1],t}var E3;function xne(t){return!Array.isArray(t[0])}function Q4e(t){return typeof t[0]?.[0]=="number"}function eVe(t){if(!t)return;let{rings:e,hasM:i,hasZ:r,spatialReference:n}=t;switch(e??=[],Q4e(e)&&(e=[e]),e[0]?.[0]?.length){case 4:r??=!0,i??=!0;break;case 3:r??=i!==!0,i??=!r;break;default:r??=!1,i??=!1}return n??=at.WGS84,{...t,hasM:i,hasZ:r,rings:e,spatialReference:n}}let br=E3=class extends Is{static fromExtent(t){const e=t.clone().normalize(),{spatialReference:i}=t;let r=!1,n=!1;for(const a of e)a.hasZ&&(r=!0),a.hasM&&(n=!0);const s={rings:e.map(a=>{const o=[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]];if(r&&a.hasZ){const l=a.zmin+.5*(a.zmax-a.zmin);for(let c=0;c<o.length;c++)o[c].push(l)}if(n&&a.hasM){const l=a.mmin+.5*(a.mmax-a.mmin);for(let c=0;c<o.length;c++)o[c].push(l)}return o}),spatialReference:i};return r&&(s.hasZ=!0),n&&(s.hasM=!0),new E3(s)}constructor(t){super(eVe(t)),this.curveRings=void 0,this.rings=[],this.type="polygon"}get cache(){return this.commitProperty("curveRings"),this.commitProperty("hasM"),this.commitProperty("hasZ"),this.commitProperty("rings"),this.commitProperty("spatialReference"),{}}get centroid(){t8($e.getLogger(this),"centroid",{replacement:"Please use centroidOperator.execute() instead.",version:"4.34",warnOnce:!0});const t=Uve(this);return t?gt.fromJSON(t):null}writeCurveRings(t,e){e.curveRings=de(t)}get extent(){const t=Dve(this),{spatialReference:e}=this;return t?new Wt({...t,spatialReference:e}):null}get isSelfIntersecting(){return t8($e.getLogger(this),"isSelfIntersecting",{replacement:"Please use simplifyOperator.isSimple() instead.",version:"4.33",warnOnce:!0}),hFe(this.rings)}writeRings(t,e){e.rings=de(this.rings)}addRing(t){if(!t)return;const e=this.rings,i=e.length;if(xne(t)){const r=[];for(let n=0,s=t.length;n<s;n++)r[n]=t[n].toArray();e[i]=r}else e[i]=t.slice();return this.notifyChange("rings"),this}clone(){const t=new E3;return t.spatialReference=this.spatialReference,t.rings=de(this.rings),t.curveRings=de(this.curveRings),t.hasZ=this.hasZ,t.hasM=this.hasM,t}equals(t){if(this===t)return!0;if(t==null)return!1;const e=this.spatialReference,i=t.spatialReference;if(e!=null!=(i!=null)||e!=null&&i!=null&&!e.equals(i)||this.rings.length!==t.rings.length)return!1;const r=([n,s,a,o],[l,c,h,f])=>n===l&&s===c&&(a==null&&h==null||a===h)&&(o==null&&f==null||o===f);for(let n=0;n<this.rings.length;n++){const s=this.rings[n],a=t.rings[n];if(!wF(s,a,r))return!1}return!0}contains(t){if(!t)return!1;const e=XF(t,this.spatialReference);return nZ(this,e??t)}isClockwise(t){const e=xne(t)?t.map(i=>this.hasZ?this.hasM?[i.x,i.y,i.z,i.m]:[i.x,i.y,i.z]:[i.x,i.y]):t;return jve(e)}getPoint(t,e){if(!this._validateInputs(t,e))return null;const i=this.rings[t][e],r=this.hasZ,n=this.hasM;return r&&!n?new gt(i[0],i[1],i[2],void 0,this.spatialReference):n&&!r?new gt(i[0],i[1],void 0,i[2],this.spatialReference):r&&n?new gt(i[0],i[1],i[2],i[3],this.spatialReference):new gt(i[0],i[1],this.spatialReference)}insertPoint(t,e,i){return this._validateInputs(t,e,!0)?(Y$(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[t].splice(e,0,i),this.notifyChange("rings"),this):this}removePoint(t,e){if(!this._validateInputs(t,e))return null;const i=new gt(this.rings[t].splice(e,1)[0],this.spatialReference);return this.notifyChange("rings"),i}removeRing(t){if(!this._validateInputs(t,null))return null;const e=this.rings.splice(t,1)[0],i=this.spatialReference,r=e.map(n=>new gt(n,i));return this.notifyChange("rings"),r}setPoint(t,e,i){return this._validateInputs(t,e)?(Y$(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[t][e]=i,this.notifyChange("rings"),this):this}_validateInputs(t,e,i=!1){if(t==null||t<0||t>=this.rings.length)return!1;if(e!=null){const r=this.rings[t];if(i&&(e<0||e>r.length)||!i&&(e<0||e>=r.length))return!1}return!0}toJSON(t){return this.write({},t)}};d([m({readOnly:!0})],br.prototype,"cache",null),d([m({readOnly:!0})],br.prototype,"centroid",null),d([m({json:{write:!0,origins:{"portal-item":{write:!1},"web-map":{write:!1},"web-scene":{write:!1}}}})],br.prototype,"curveRings",void 0),d([qe("curveRings")],br.prototype,"writeCurveRings",null),d([m({readOnly:!0})],br.prototype,"extent",null),d([m({readOnly:!0})],br.prototype,"isSelfIntersecting",null),d([m({type:[[[Number]]],json:{write:{isRequired:!0}}})],br.prototype,"rings",void 0),d([qe("rings")],br.prototype,"writeRings",null),br=E3=d([U("esri.geometry.Polygon")],br),br.prototype.toJSON.isDefaultToJSON=!0;var k9;function tVe(t){return!Array.isArray(t[0])}function iVe(t){return typeof t[0]?.[0]=="number"}function rVe(t){if(!t)return;let{paths:e,hasM:i,hasZ:r,spatialReference:n}=t;switch(e??=[],iVe(e)&&(e=[e]),e[0]?.[0]?.length){case 4:r??=!0,i??=!0;break;case 3:r??=i!==!0,i??=!r;break;default:r??=!1,i??=!1}return n??=at.WGS84,{...t,hasM:i,hasZ:r,paths:e,spatialReference:n}}let xn=k9=class extends Is{constructor(t){super(rVe(t)),this.curvePaths=void 0,this.paths=[],this.type="polyline"}get cache(){return this.commitProperty("curvePaths"),this.commitProperty("hasM"),this.commitProperty("hasZ"),this.commitProperty("paths"),this.commitProperty("spatialReference"),{}}writeCurvePaths(t,e){e.curvePaths=de(t)}get extent(){const t=Rve(this),{spatialReference:e}=this;return t?new Wt({...t,spatialReference:e}):null}writePaths(t,e){e.paths=de(this.paths)}addPath(t){if(!t)return;const e=this.paths,i=e.length;if(tVe(t)){const r=[];for(let n=0,s=t.length;n<s;n++)r[n]=t[n].toArray();e[i]=r}else e[i]=t.slice();return this.notifyChange("paths"),this}clone(){const t=new k9;return t.spatialReference=this.spatialReference,t.paths=de(this.paths),t.curvePaths=de(this.curvePaths),t.hasZ=this.hasZ,t.hasM=this.hasM,t}getPoint(t,e){if(!this._validateInputs(t,e))return null;const i=this.paths[t][e],r=this.hasZ,n=this.hasM;return r&&!n?new gt(i[0],i[1],i[2],void 0,this.spatialReference):n&&!r?new gt(i[0],i[1],void 0,i[2],this.spatialReference):r&&n?new gt(i[0],i[1],i[2],i[3],this.spatialReference):new gt(i[0],i[1],this.spatialReference)}insertPoint(t,e,i){return this._validateInputs(t,e,!0)?(Y$(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[t].splice(e,0,i),this.notifyChange("paths"),this):this}removePath(t){if(!this._validateInputs(t,null))return null;const e=this.paths.splice(t,1)[0],i=this.spatialReference,r=e.map(n=>new gt(n,i));return this.notifyChange("paths"),r}removePoint(t,e){if(!this._validateInputs(t,e))return null;const i=new gt(this.paths[t].splice(e,1)[0],this.spatialReference);return this.notifyChange("paths"),i}setPoint(t,e,i){return this._validateInputs(t,e)?(Y$(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[t][e]=i,this.notifyChange("paths"),this):this}_validateInputs(t,e,i=!1){if(t==null||t<0||t>=this.paths.length)return!1;if(e!=null){const r=this.paths[t];if(i&&(e<0||e>r.length)||!i&&(e<0||e>=r.length))return!1}return!0}toJSON(t){return this.write({},t)}};d([m({readOnly:!0})],xn.prototype,"cache",null),d([m({json:{write:!0,origins:{"portal-item":{write:!1},"web-map":{write:!1},"web-scene":{write:!1}}}})],xn.prototype,"curvePaths",void 0),d([qe("curvePaths")],xn.prototype,"writeCurvePaths",null),d([m({readOnly:!0})],xn.prototype,"extent",null),d([m({type:[[[Number]]],json:{write:{isRequired:!0}}})],xn.prototype,"paths",void 0),d([qe("paths")],xn.prototype,"writePaths",null),xn=k9=d([U("esri.geometry.Polyline")],xn),xn.prototype.toJSON.isDefaultToJSON=!0;function Mo(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function BS(t){return t.points!==void 0}function EI(t){return t.x!==void 0&&t.y!==void 0}function ka(t){return t.paths!==void 0||t.curvePaths!==void 0}function jn(t){return t.rings!==void 0||t.curveRings!==void 0}function Vp(t){return t==null?null:t instanceof Is?t:EI(t)?gt.fromJSON(t):ka(t)?xn.fromJSON(t):jn(t)?br.fromJSON(t):BS(t)?ou.fromJSON(t):Mo(t)?Wt.fromJSON(t):null}function VT(t){return t?EI(t)?"esriGeometryPoint":ka(t)?"esriGeometryPolyline":jn(t)?"esriGeometryPolygon":Mo(t)?"esriGeometryEnvelope":BS(t)?"esriGeometryMultipoint":null:null}const nVe={esriGeometryPoint:gt,esriGeometryPolyline:xn,esriGeometryPolygon:br,esriGeometryEnvelope:Wt,esriGeometryMultipoint:ou,esriGeometryMultiPatch:br};function sVe(t){return t&&nVe[t]||null}const aVe=Gn()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),Sne=Gn()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"}),BT={base:Is,key:"type",typeMap:{extent:Wt,multipoint:ou,point:gt,polyline:xn,polygon:br}};function ECt(t){return t.type==="point"}function CCt(t){return t.type==="multipoint"}function ICt(t){return t.type==="polygon"}function MCt(t){return t.type==="polyline"}var E9;let dy=E9=class extends _e{constructor(t){super(t),this.rotation=0,this.scale=0,this.targetGeometry=null,this.camera=null}castRotation(t){return(t%=360)<0&&(t+=360),t}clone(){return new E9({rotation:this.rotation,scale:this.scale,targetGeometry:this.targetGeometry!=null?this.targetGeometry.clone():null,camera:this.camera!=null?this.camera.clone():null})}};d([m({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:E6}}}}})],dy.prototype,"rotation",void 0),d([Ii("rotation")],dy.prototype,"castRotation",null),d([m({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:E6}}}}})],dy.prototype,"scale",void 0),d([m({types:BT,json:{read:Vp,write:!0,origins:{"web-scene":{read:Vp,write:{overridePolicy:E6}}}}})],dy.prototype,"targetGeometry",void 0),d([m({type:cje,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}}})],dy.prototype,"camera",void 0),dy=E9=d([U("esri.Viewpoint")],dy);const Os=dy;function E6(){return{enabled:!this.camera}}function _Z(t){return(e,i)=>{e[i]=t}}var zf;let oVe=class{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}preventDefault(){this.cancellable&&(this.defaultPrevented=!0)}reset(e){this.defaultPrevented=!1,this.item=e}},lVe=class{constructor(e,i,r,n,s){this.target=e,this.added=i,this.removed=r,this.start=n,this.deleteCount=s}};const Bc=new u_(()=>new oVe,void 0,t=>{t.item=null,t.target=null,t.defaultPrevented=!1,t.cancellable=!1});function $ne(t){t&&typeof t=="object"&&"destroy"in t&&typeof t.destroy=="function"&&t.destroy()}function C6(t){return t?t instanceof Ly?t.toArray():t.length?Array.prototype.slice.apply(t):[]:[]}function I6(t){if(t?.length)return t[0]}function cVe(t,e,i,r){const n=Math.min(t.length-i,e.length-r);let s=0;for(;s<n&&t[i+s]===e[r+s];)s++;return s}function qve(t,e,i,r){e&&e.forEach((n,s,a)=>{t.push(n),qve(t,i.call(r,n,s,a),i,r)})}const Xg=new Set,Jg=new Set,Kg=new Set,M6=new Map;let uVe=0,Ly=zf=class extends Rv{static ofType(t){if(!t)return zf;if(M6.has(t))return M6.get(t);let e=null;if(typeof t=="function")e=t.prototype.declaredClass;else if(t.base)e=t.base.prototype.declaredClass;else for(const r in t.typeMap){const n=t.typeMap[r].prototype.declaredClass;e?e+=` | ${n}`:e=n}let i=class extends zf{};return d([_Z({Type:t,ensureType:typeof t=="function"?dn(t):Dp(t)})],i.prototype,"itemType",void 0),i=d([U(`esri.core.Collection<${e}>`)],i),M6.set(t,i),i}static isCollection(t){return t!=null&&t instanceof zf}constructor(t){super(t),this._chgListeners=[],this._notifications=null,this._updating=!1,this._timer=null,this._observable=new jT,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:uVe++})}normalizeCtorArgs(t){return t?Array.isArray(t)||t instanceof zf?{items:t}:t:{}}destroy(){this._removeAllRaw(),this._timer&&this._timer.remove(),super.destroy(),this._notifications=null}*[Symbol.iterator](){yield*this.items}get items(){return Rt(this._observable),this._items}set items(t){this._emitBeforeChanges(1)||(this._splice(0,this.length,C6(t)),this._emitAfterChanges(1))}hasEventListener(t){return!this.destroyed&&(t==="change"?this._chgListeners.length>0:super.hasEventListener(t))}on(t,e){if(this.destroyed)return Si();if(t==="change"){const i=this._chgListeners,r={removed:!1,callback:e};return i.push(r),this._notifications&&this._notifications.push({listeners:i.slice(),items:this._items.slice(),changes:[]}),Si(()=>{r.removed=!0,i.splice(i.indexOf(r),1)})}return super.on(t,e)}once(t,e){const i="deref"in e?()=>e.deref():()=>e,r=this.on(t,n=>{i()?.call(null,n),r.remove()});return r}add(t,e){if(Rt(this._observable),this._emitBeforeChanges(1))return this;const i=this.getNextIndex(e??null);return this._splice(i,0,[t]),this._emitAfterChanges(1),this}addMany(t,e=this._items.length){if(Rt(this._observable),!t?.length)return this;if(this._emitBeforeChanges(1))return this;const i=this.getNextIndex(e);return this._splice(i,0,C6(t)),this._emitAfterChanges(1),this}at(t){if(Rt(this._observable),(t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this._items[t]}removeAll(){if(Rt(this._observable),!this.length||this._emitBeforeChanges(2))return[];const t=this._removeAllRaw();return this._emitAfterChanges(2),t}_removeAllRaw(){return this.length===0?[]:this._splice(0,this.length)||[]}clone(){return Rt(this._observable),this._createNewInstance({items:this._items.map(de)})}concat(...t){Rt(this._observable);const e=t.map(C6);return this._createNewInstance({items:this._items.concat(...e)})}drain(t,e){if(Rt(this._observable),!this.length||this._emitBeforeChanges(2))return;const i=this._splice(0,this.length),r=i.length;for(let n=0;n<r;n++)t.call(e,i[n],n,i);this._emitAfterChanges(2)}destroyAll(){this.drain($ne)}destroyMany(t){const e=this.removeMany(t);return e.forEach($ne),e}every(t,e){return Rt(this._observable),this._items.every(t,e)}filter(t,e){Rt(this._observable);const i=arguments.length===2?this._items.filter(t,e):this._items.filter(t);return this._createNewInstance({items:i})}find(t,e){return Rt(this._observable),this._items.find(t,e)}findIndex(t,e){return Rt(this._observable),this._items.findIndex(t,e)}flatten(t,e){Rt(this._observable);const i=[];return qve(i,this,t,e),new zf(i)}forEach(t,e){return Rt(this._observable),this._items.forEach(t,e)}getItemAt(t){return Rt(this._observable),this._items[t]}getNextIndex(t){Rt(this._observable);const e=this.length;return(t=t??e)<0?t=0:t>e&&(t=e),t}includes(t,e=0){return Rt(this._observable),this._items.includes(t,e)}indexOf(t,e=0){return Rt(this._observable),this._items.indexOf(t,e)}join(t=","){return Rt(this._observable),this._items.join(t)}lastIndexOf(t,e=this.length-1){return Rt(this._observable),this._items.lastIndexOf(t,e)}map(t,e){Rt(this._observable);const i=this._items.map(t,e);return new zf({items:i})}reorder(t,e=this.length-1){Rt(this._observable);const i=this.indexOf(t);if(i!==-1){if(e<0?e=0:e>=this.length&&(e=this.length-1),i!==e){if(this._emitBeforeChanges(4))return t;this._splice(i,1),this._splice(e,0,[t]),this._emitAfterChanges(4)}return t}}pop(){if(Rt(this._observable),!this.length||this._emitBeforeChanges(2))return;const t=I6(this._splice(this.length-1,1));return this._emitAfterChanges(2),t}push(...t){return Rt(this._observable),this._emitBeforeChanges(1)||(this._splice(this.length,0,t),this._emitAfterChanges(1)),this.length}reduce(t,e){Rt(this._observable);const i=this._items;return arguments.length===2?i.reduce(t,e):i.reduce(t)}reduceRight(t,e){Rt(this._observable);const i=this._items;return arguments.length===2?i.reduceRight(t,e):i.reduceRight(t)}remove(t){return Rt(this._observable),this.removeAt(this.indexOf(t))}removeAt(t){if(Rt(this._observable),t<0||t>=this.length||this._emitBeforeChanges(2))return;const e=I6(this._splice(t,1));return this._emitAfterChanges(2),e}removeMany(t){if(Rt(this._observable),!t?.length||this._emitBeforeChanges(2))return[];const e=t instanceof zf?t.toArray():t,i=this._items,r=[],n=e.length;for(let s=0;s<n;s++){const a=e[s],o=i.indexOf(a);if(o>-1){const l=1+cVe(e,i,s+1,o+1),c=this._splice(o,l);c&&c.length>0&&r.push.apply(r,c),s+=l-1}}return this._emitAfterChanges(2),r}reverse(){if(Rt(this._observable),this._emitBeforeChanges(4))return this;const t=this._splice(0,this.length);return t&&(t.reverse(),this._splice(0,0,t)),this._emitAfterChanges(4),this}shift(){if(Rt(this._observable),!this.length||this._emitBeforeChanges(2))return;const t=I6(this._splice(0,1));return this._emitAfterChanges(2),t}slice(t=0,e=this.length){return Rt(this._observable),this._createNewInstance({items:this._items.slice(t,e)})}some(t,e){return Rt(this._observable),this._items.some(t,e)}sort(t){if(Rt(this._observable),!this.length||this._emitBeforeChanges(4)||!this._requiresSort(t))return this;const e=this._splice(0,this.length);return arguments.length?e.sort(t):e.sort(),this._splice(0,0,e),this._emitAfterChanges(4),this}_requiresSort(t=(e,i)=>e===i?0:e<i?-1:1){const e=this.length-1;for(let i=0;i<e;i++)if(t(this.items[i],this.items[i+1])>0)return!0;return!1}splice(t,e,...i){Rt(this._observable),arguments.length===1&&(e=this.length),e??=0;const r=(e?2:0)|(i.length?1:0);if(this._emitBeforeChanges(r))return[];const n=this._splice(t,e,i)||[];return this._emitAfterChanges(r),n}toArray(){return Rt(this._observable),this._items.slice()}toJSON(t){return Rt(this._observable),this.toArray().map(e=>pI(e)?e.toJSON(t):e)}toLocaleString(){return Rt(this._observable),this._items.toLocaleString()}toString(){return Rt(this._observable),this._items.toString()}unshift(...t){return Rt(this._observable),!t.length||this._emitBeforeChanges(1)||(this._splice(0,0,t),this._emitAfterChanges(1)),this.length}_createNewInstance(t){return new this.constructor(t)}_splice(t,e,i){const r=this._items,n=this.itemType;let s,a;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._updating=!0,this._timer=$T(()=>this._dispatchChange())),t<0&&(t+=this.length),e){if(a=r.splice(t,e),this.hasEventListener("before-remove")){const o=Bc.acquire();o.target=this,o.cancellable=!0;for(let l=0,c=a.length;l<c;l++)s=a[l],o.reset(s),this.emit("before-remove",o),o.defaultPrevented&&(a.splice(l,1),r.splice(t,0,s),t+=1,l-=1,c-=1);Bc.release(o)}if(this.length=this._items.length,this.hasEventListener("after-remove")){const o=Bc.acquire();o.target=this,o.cancellable=!1;const l=a.length;for(let c=0;c<l;c++)o.reset(a[c]),this.emit("after-remove",o);Bc.release(o)}}if(i?.length){if(n){const h=[];for(const f of i){const g=n.ensureType(f);g==null&&f!=null||h.push(g)}i=h}const o=this.hasEventListener("before-add"),l=this.hasEventListener("after-add"),c=t===this.length;if(o||l){const h=Bc.acquire();h.target=this,h.cancellable=!0;const f=Bc.acquire();f.target=this,f.cancellable=!1;for(const g of i)o?(h.reset(g),this.emit("before-add",h),h.defaultPrevented||(c?r.push(g):r.splice(t++,0,g),this._set("length",r.length),l&&(f.reset(g),this.emit("after-add",f)))):(c?r.push(g):r.splice(t++,0,g),this._set("length",r.length),f.reset(g),this.emit("after-add",f));Bc.release(f),Bc.release(h)}else{if(c)for(const h of i)r.push(h);else r.splice(t,0,...i);this._set("length",r.length)}}if((i?.length||a?.length)&&this._notifyChangeEvent(i,a),this.hasEventListener("after-splice")){const o=new lVe(this,i,a,t,e);this.emit("after-splice",o)}return a}_emitBeforeChanges(t){let e=!1;if(this.hasEventListener("before-changes")){const i=Bc.acquire();i.target=this,i.cancellable=!0,i.type=t,this.emit("before-changes",i),e=i.defaultPrevented,Bc.release(i)}return e}_emitAfterChanges(t){if(this.hasEventListener("after-changes")){const e=Bc.acquire();e.target=this,e.cancellable=!1,e.type=t,this.emit("after-changes",e),Bc.release(e)}this._observable.notify()}_notifyChangeEvent(t,e){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:t,removed:e})}get updating(){return this._updating}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),this._updating=!1,!this._notifications)return;const t=this._notifications;this._notifications=null;for(const e of t){const i=e.changes;Xg.clear(),Jg.clear(),Kg.clear();for(const{added:l,removed:c}of i){if(l)if(Kg.size===0&&Jg.size===0)for(const h of l)Xg.add(h);else for(const h of l)Jg.has(h)?(Kg.add(h),Jg.delete(h)):Kg.has(h)||Xg.add(h);if(c)if(Kg.size===0&&Xg.size===0)for(const h of c)Jg.add(h);else for(const h of c)Xg.has(h)?Xg.delete(h):(Kg.delete(h),Jg.add(h))}const r=Ao.acquire();Xg.forEach(l=>{r.push(l)});const n=Ao.acquire();Jg.forEach(l=>{n.push(l)});const s=this._items,a=e.items,o=Ao.acquire();if(Kg.forEach(l=>{a.indexOf(l)!==s.indexOf(l)&&o.push(l)}),e.listeners&&(r.length||n.length||o.length)){const l={target:this,added:r,removed:n,moved:o},c=e.listeners.length;for(let h=0;h<c;h++){const f=e.listeners[h];f.removed||f.callback.call(this,l)}}Ao.release(r),Ao.release(n),Ao.release(o)}Xg.clear(),Jg.clear(),Kg.clear()}};d([m()],Ly.prototype,"_updating",void 0),d([m()],Ly.prototype,"length",void 0),d([m()],Ly.prototype,"items",null),d([m({readOnly:!0})],Ly.prototype,"updating",null),Ly=zf=d([U("esri.core.Collection")],Ly);const We=Ly;let hu=class extends We{constructor(e){super(e),this.getCollections=null}initialize(){this.addHandles(wpe(()=>this._refresh(),xu))}destroy(){this.getCollections=null}_refresh(){const e=this.getCollections?.();if(e==null)return void this.removeAll();let i=0;for(const r of e)r!=null&&(i=this._processCollection(i,r));this.splice(i)}_createNewInstance(e){return new We(e)}_processCollection(e,i){if(!i)return e;const r=this.itemFilterFunction??(n=>!!n);for(const n of i)if(n){if(r(n)){const s=this.indexOf(n,e);s>=0?s!==e&&this.reorder(n,e):this.add(n,e),++e}if(this.getChildrenFunction){const s=this.getChildrenFunction(n);if(Array.isArray(s))for(const a of s)e=this._processCollection(e,a);else e=this._processCollection(e,s)}}return e}};d([m()],hu.prototype,"getCollections",void 0),d([m()],hu.prototype,"getChildrenFunction",void 0),d([m()],hu.prototype,"itemFilterFunction",void 0),hu=d([U("esri.core.CollectionFlattener")],hu);let CI=class{constructor(e=i=>i.values().next().value){this._peeker=e,this._observable=new jT,this._items=new Set}get length(){return Rt(this._observable),this._items.size}clear(){this.length!==0&&(this._items.clear(),this._observable.notify())}last(){if(this.length===0)return;let e;for(e of this._items);return e}peek(){if(this.length!==0)return this._peeker(this._items)}push(e){this.contains(e)||(this._items.add(e),this._observable.notify())}contains(e){return Rt(this._observable),this._items.has(e)}pop(){if(this.length===0)return;const e=this.peek();return this._items.delete(e),this._observable.notify(),e}popLast(){if(this.length===0)return;const e=this.last();return this._items.delete(e),this._observable.notify(),e}remove(e){this.contains(e)&&(this._items.delete(e),this._observable.notify())}filter(e){const i=this.length;return this._items.forEach(r=>{e(r)||this._items.delete(r)}),i!==this._items.size&&this._observable.notify(),this}*[Symbol.iterator](){Rt(this._observable),yield*this._items}};const Wve=new FinalizationRegistry(t=>{t.close()});function dVe(t,e){Wve.register(t,e,e)}function hVe(t){Wve.unregister(t)}function Yve(t,e){return new Proxy({},{get:(i,r,n)=>(...s)=>{let a,o;const l=s[s.length-1];return pVe(l)&&(a=l.signal,o=l.transferList,s.pop()),t.apply(e?`${e}.${r.toString()}`:r.toString(),s,{transferList:o,signal:a})}})}function pVe(t){return typeof t=="object"&&!Array.isArray(t)&&t!=null&&("signal"in t||"transferList"in t||Object.keys(t).length===0)}const fVe={statsWorker:()=>fe(()=>import("./statsWorker-BoFetfL6.js"),__vite__mapDeps([5,6,7,8])),geometryEngineWorker:()=>fe(()=>import("./geometryEngineWorker-BkMQzpX8.js"),__vite__mapDeps([9,10,11,12])),arcadeGeometryOperatorsWorker:()=>fe(()=>import("./operatorsWorker-D6F936SR.js"),[]),CSVSourceWorker:()=>fe(()=>import("./CSVSourceWorker-D1kpkZ4Y.js"),__vite__mapDeps([13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,6,7,8,28,29,30,31,32])),EdgeProcessingWorker:()=>fe(()=>import("./EdgeProcessingWorker-DnFCgWL3.js"),__vite__mapDeps([33,34,35,36,37,38,39,40,41,42,43])),ElevationSamplerWorker:()=>fe(()=>import("./ElevationSamplerWorker-JdPtmdVP.js"),__vite__mapDeps([44,20,45,46,47,48,49,50,51,36,52])),FeatureServiceSnappingSourceWorker:()=>fe(()=>import("./FeatureServiceSnappingSourceWorker-DSEixYNV.js"),__vite__mapDeps([53,16,17,15,18,19,20,21,22,23,24,25,26,27,6,7,8,28,29,54,55,56,57])),GaussianSplatSortWorker:()=>fe(()=>import("./GaussianSplatSortWorker-CkystscD.js"),[]),GeoJSONSourceWorker:()=>fe(()=>import("./GeoJSONSourceWorker-DVTFQUN9.js"),__vite__mapDeps([58,17,15,18,16,19,20,21,22,23,24,25,26,27,6,7,8,28,29,59,14,32,60])),LercWorker:()=>fe(()=>import("./LercWorker-x-QTk56L.js"),[]),MemorySourceWorker:()=>fe(()=>import("./MemorySourceWorker-Bc2WrtkJ.js"),__vite__mapDeps([61,17,15,18,62,16,19,20,21,22,23,24,25,26,27,6,7,8,28,29,32,60,14])),PBFDecoderWorker:()=>fe(()=>import("./PBFDecoderWorker-Q_eDvUQe.js"),__vite__mapDeps([63,64,17,15,18,55,56])),FeaturePipelineWorker:()=>fe(()=>import("./FeaturePipelineWorker-zBVUrBXI.js"),__vite__mapDeps([65,66,67,38,68,69,15,17,18,70,22,21,71,72,73,74,75,76,23,24,25,26,27,6,7,8,28,29,77,78,79,80,81,82,83,84,85,59,14,32,60,57,55,56,86,87])),PointCloudWorker:()=>fe(()=>import("./PointCloudWorker-CG-MZlqL.js"),__vite__mapDeps([88,89,90,91,92,93,94,47,48,95,96])),RasterWorker:()=>fe(()=>import("./RasterWorker-BkGcNfzl.js"),__vite__mapDeps([97,98,99,12,100,101,102,103,104,105])),SceneLayerSnappingSourceWorker:()=>fe(()=>import("./SceneLayerSnappingSourceWorker-CsYd9uCJ.js"),__vite__mapDeps([106,107,108,96,90,109,110,95,36,40,41,42,35,37,38,39,43])),SceneLayerWorker:()=>fe(()=>import("./SceneLayerWorker-B3N857dR.js"),__vite__mapDeps([111,45,51,112,49])),WFSSourceWorker:()=>fe(()=>import("./WFSSourceWorker-BlfXkm4W.js"),__vite__mapDeps([113,17,15,18,16,19,20,21,22,23,24,25,26,27,6,7,8,28,29,59,14,60,114,115])),WorkerTileHandler:()=>fe(()=>import("./WorkerTileHandler-IjM681do.js"),__vite__mapDeps([116,117,118,56,74,119,120,39,38,121])),Lyr3DWorker:()=>fe(()=>import("./Lyr3DWorker-COZcoQMt.js"),[]),Feature3DPipelineWorker:()=>fe(()=>import("./Feature3DPipelineWorker-BVoKWhpZ.js"),__vite__mapDeps([122,24,17,15,18,25,26,21,22,27,6,7,8,28,29,123,50,45,112,49,124,91,125,42,36,126,108,96,90,107,127,128,110,95,94,89,47,48,39,38,35,37,129,130,131,132,133,134,135,136,137,138,20,57,55,56,139])),TextureCompressionWorker:()=>fe(()=>import("./TextureCompressionWorker-CX3r9cbF.js"),[]),FlowWorker:()=>fe(()=>import("./FlowWorker-Ca7MWq83.js"),__vite__mapDeps([140,105])),ParquetSourceWorker:()=>fe(()=>import("./ParquetSourceWorker-DHBRAyfW.js"),__vite__mapDeps([141,76,24,17,15,18,25,26,21,22,27,6,7,8,28,29,32,142,31,79,69,78,77])),PanoramicMeshWorker:()=>fe(()=>import("./PanoramicMeshWorker-Cw13C837.js"),__vite__mapDeps([143,98]))},Zve="worker:port-closed",jm={HANDSHAKE:0,OPEN:1,OPENED:2,RESPONSE:3,INVOKE:4,ABORT:5,CLOSE:6,OPEN_PORT:7,ON:8};let mVe=0;function Xve(){return mVe++}function gVe(t){return t&&typeof t=="object"&&("result"in t||"transferList"in t)}function QR(t){return t?typeof t=="string"?JSON.stringify({name:"message",message:t}):t.toJSON?JSON.stringify(t):JSON.stringify({name:t.name,message:t.message,details:t.details||{stack:t.stack}}):null}function Jve(t,e,i,r){if(e.type===jm.OPEN_PORT)return void t.postMessage(e,[e.port]);if(e.type!==jm.INVOKE&&e.type!==jm.RESPONSE)return void t.postMessage(e);let n;gVe(i)?(n=Tne(i.transferList),e.data=i.result):(n=Tne(r),e.data=i),n?t.postMessage(e,n):t.postMessage(e)}function II(t){if(!t)return null;const e=t.data;return e?typeof e=="string"?JSON.parse(e):e:null}function Tne(t){if(!t?.length)return null;if(ve("esri-workers-arraybuffer-transfer"))return t;const e=t.filter(i=>!yVe(i));return e.length?e:null}function yVe(t){return t instanceof ArrayBuffer||t?.constructor?.name==="ArrayBuffer"}async function DCt(t){try{return await t}catch(e){const i=e?.name===Zve;if(!(ss(e)||i))throw e;return}}const{CLOSE:uO,ABORT:C9,INVOKE:kne,RESPONSE:h2,OPEN_PORT:Ene,ON:Cne}=jm,vVe=2;let bVe=class{constructor(e){this._invoke=e,this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._timer=null,this._process=this._process.bind(this)}push(e){e.type===C9?this._cancelledJobIds.add(e.jobId):(this._invokeMessages.push(e),this._timer===null&&(this._timer=setTimeout(this._process,0)))}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}_process(){this._timer=null;for(const e of this._invokeMessages)this._cancelledJobIds.has(e.jobId)||this._invoke(e);this._cancelledJobIds.clear(),this._invokeMessages.length=0}};var lu;let Z$=(lu=class{static connect(e,i){const r=new MessageChannel;let n;n=typeof e=="function"?new e:"default"in e&&typeof e.default=="function"?new e.default:e;const s=new lu(r.port1,{channel:r,client:n,schedule:i});return typeof n=="object"&&"remoteClient"in n&&(n.remoteClient=s),lu.clients.set(s,n),r.port2}static loadWorker(e){const i=fVe[e];return i?i():Promise.resolve(null)}constructor(e,i,r,n){this._port=e,this._jobQueue=r,this._lowPriorityJobQueue=n,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new bVe(s=>this._onInvokeMessage(s)),this._client=i.client,this._onMessage=this._onMessage.bind(this),this._channel=i.channel,this._schedule=i.schedule,this._port.addEventListener("message",this._onMessage),this._port.start()}close(){this._post({type:uO}),this._close()}isBusy(){return this._outJobs.size>0}invoke(e,i,r){return this.apply(e,[i],r)}apply(e,i,r){const n=r?.signal,s=r?.transferList;if(!this._port)return Promise.reject(new ee(Zve,`Cannot call invoke('${e}'), port is closed`,{methodName:e,data:i}));const a=Xve();return new Promise((o,l)=>{if(Pa(n))return this._processWork(),void l(Hi());const c=Ma(n,()=>{const f=this._outJobs.get(a);f&&(this._outJobs.delete(a),this._processWork(),Rr(f.abortHandle),this._post({type:C9,jobId:a}),l(Hi()))}),h={resolve:o,reject:l,abortHandle:c,debugInfo:e};this._outJobs.set(a,h),this._post({type:kne,jobId:a,methodName:e,abortable:n!=null},i,s)})}createInvokeProxy(e){return Yve(this,e)}on(e,i){const r=new MessageChannel;function n(s){i(s.data)}return this._port.postMessage({type:Cne,eventType:e,port:r.port2},[r.port2]),r.port1.addEventListener("message",n),r.port1.start(),Si(()=>{r.port1.postMessage({type:uO}),r.port1.close(),r.port1.removeEventListener("message",n)})}jobAdded(){this._processWork()}openPort(){const e=new MessageChannel;return this._post({type:Ene,port:e.port2}),e.port1}_processWork(){if(this._outJobs.size>=vVe)return;const e=this._jobQueue?.pop()??this._lowPriorityJobQueue?.pop();if(!e)return;const{methodName:i,data:r,invokeOptions:n,resolver:s}=e;this.apply(i,r,n).then(a=>s.resolve(a)).catch(a=>s.reject(a))}_close(){this._channel&&(this._channel=void 0),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach(e=>{Rr(e.abortHandle),e.reject(Hi(`Worker closing, aborting job calling '${e.debugInfo}'`))}),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=null,this._client=null,this._schedule=null,this._onMessage=null,this._channel=null,this._jobQueue=void 0,this._invokeQueue=void 0,this._lowPriorityJobQueue=void 0}_onMessage(e){this._schedule!=null?this._schedule(()=>this._processMessage(e,!0)):this._processMessage(e,!1)}_processMessage(e,i){const r=II(e);if(r)switch(r.type){case h2:this._onResponseMessage(r);break;case kne:i?this._onInvokeMessage(r):this._invokeQueue.push(r);break;case C9:this._onAbortMessage(r);break;case uO:this._onCloseMessage();break;case Ene:this._onOpenPortMessage(r);break;case Cne:this._onOnMessage(r)}}_onAbortMessage(e){const i=this._inJobs,r=e.jobId,n=i.get(r);this._invokeQueue.push(e),n&&(n.controller&&n.controller.abort(),i.delete(r))}_onCloseMessage(){const e=this._client;this._close(),e&&"destroy"in e&&lu.clients.get(this)===e&&e.destroy(),lu.clients.delete(this),e?.remoteClient&&(e.remoteClient=null)}_onInvokeMessage(e){const{methodName:i,jobId:r,data:n=[],abortable:s}=e,a=s?new AbortController:null,o=this._inJobs;let l,c=this._client,h=c[i];try{if(!h&&i&&i.includes(".")){const f=i.split(".");for(let g=0;g<f.length-1;g++)c=c[f[g]],h=c[f[g+1]]}if(typeof h!="function")throw new TypeError(`${i} is not a function`);n.push({client:this,signal:a?a.signal:null}),l=h.apply(c,n)}catch(f){return void this._post({type:h2,jobId:r,error:QR(f)})}ho(l)?(o.set(r,{controller:a,promise:l}),l.then(f=>{o.has(r)&&(o.delete(r),this._post({type:h2,jobId:r},f))},f=>{o.has(r)&&(o.delete(r),ss(f)||this._post({type:h2,jobId:r,error:QR(f||{message:`Error encountered at method ${i}`})}))})):this._post({type:h2,jobId:r},l)}_onOpenPortMessage(e){new lu(e.port,{client:this._client})}_onOnMessage(e){const{port:i}=e,r=this._client.on(e.eventType,s=>{i.postMessage(s)}),n=zm(e.port,"message",s=>{II(s)?.type===uO&&(n.remove(),r.remove(),i.close())})}_onResponseMessage(e){const{jobId:i,error:r,data:n}=e,s=this._outJobs;if(!s.has(i))return;const a=s.get(i);s.delete(i),this._processWork(),Rr(a.abortHandle),r?a.reject(ee.fromJSON(JSON.parse(r))):a.resolve(n)}_post(e,i,r){return Jve(this._port,e,i,r)}},lu.kernelInfo={buildDate:sfe,fullVersion:cY,revision:afe},lu.clients=new Map,lu),wVe=class{constructor(){this._inUseClients=new Array,this._clients=new Array,this._clientPromises=new Array,this._ongoingJobsQueue=new CI,this._ongoingLowPriorityJobsQueue=new CI}destroy(){this.close()}get closed(){return!this._clients?.length}open(e,i){return new Promise((r,n)=>{let s=!0;const a=o=>{sr(i.signal),s&&(s=!1,o())};this._clients.length=e.length,this._clientPromises.length=e.length,this._inUseClients.length=e.length;for(let o=0;o<e.length;++o){const l=e[o];ho(l)?this._clientPromises[o]=l.then(c=>(this._clients[o]=new Z$(c,i,this._ongoingJobsQueue,this._ongoingLowPriorityJobsQueue),a(r),this._clients[o]),()=>(a(n),null)):(this._clients[o]=new Z$(l,i,this._ongoingJobsQueue,this._ongoingLowPriorityJobsQueue),this._clientPromises[o]=Promise.resolve(this._clients[o]),a(r))}})}broadcast(e,i,r){const n=new Array(this._clientPromises.length);for(let s=0;s<this._clientPromises.length;++s){const a=this._clientPromises[s];n[s]=a.then(o=>o?.invoke(e,i,r))}return n}close(){let e;for(;e=this._ongoingJobsQueue.pop();)e.resolver.reject(Hi(`Worker closing, aborting job calling '${e.methodName}'`));for(;e=this._ongoingLowPriorityJobsQueue.pop();)e.resolver.reject(Hi(`Worker closing, aborting job calling '${e.methodName}'`));for(const i of this._clientPromises)i.then(r=>r?.close());this._clients.length=0,this._clientPromises.length=0,this._inUseClients.length=0,hVe(this)}invoke(e,i,r){return this.apply(e,[i],r)}apply(e,i,r){const n=Qs();(r?.priority==="low"?this._ongoingLowPriorityJobsQueue:this._ongoingJobsQueue).push({methodName:e,data:i,invokeOptions:r,resolver:n});for(let s=0;s<this._clientPromises.length;s++){const a=this._clients[s];a?a.jobAdded():this._clientPromises[s].then(o=>o?.jobAdded())}return n.promise}createInvokeProxy(e){return Yve(this,e)}on(e,i){return Promise.all(this._clientPromises).then(()=>c_(this._clients.map(r=>r.on(e,i))))}openPorts(){return new Promise(e=>{const i=new Array(this._clientPromises.length);let r=i.length;for(let n=0;n<this._clientPromises.length;++n)this._clientPromises[n].then(s=>{s&&(i[n]=s.openPort()),--r===0&&e(i)})})}get test(){}};const _Ve={async request(t,e){const i=t.options,r=i.responseType;i.signal=e?.signal,i.responseType=r==="native"||r==="native-request-init"?"native-request-init":r&&["blob","json","text"].includes(r)&&b8(t.url)?.after?r:"array-buffer";const n=await Nt(t.url,i),s={data:n.data,httpStatus:n.httpStatus,ssl:n.ssl};switch(n.requestOptions?.responseType){case"native-request-init":return delete s.data.signal,s;case"blob":s.data=await s.data.arrayBuffer();break;case"json":s.data=new TextEncoder().encode(JSON.stringify(s.data)).buffer;break;case"text":s.data=new TextEncoder().encode(s.data).buffer}return{result:s,transferList:[s.data]}}},Ine={};function xVe(t){const e={async:t.async,isDebug:t.isDebug,locale:t.locale,baseUrl:t.baseUrl,has:{...t.has},map:{...t.map},packages:t.packages?.slice()||[],paths:{...Ine.paths,...t.paths}};return t.hasOwnProperty("async")||(e.async=!0),t.hasOwnProperty("isDebug")||(e.isDebug=!1),t.baseUrl||(e.baseUrl=Ine.baseUrl),e}let SVe=class{constructor(){const e=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(i=>{this[i]=(...r)=>e[i](...r)})}},C3=class{constructor(){this._dispatcher=new SVe,this._workerPostMessage({type:jm.HANDSHAKE})}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(e){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=e,e&&this.addEventListener("message",e)}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(e){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=e,e&&this.addEventListener("messageerror",e)}get onerror(){return this._onerrorHandler}set onerror(e){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=e,e&&this.addEventListener("error",e)}postMessage(e){aR(()=>{this._workerMessageHandler(new MessageEvent("message",{data:e}))})}dispatchEvent(e){return this._dispatcher.dispatchEvent(e)}addEventListener(e,i,r){this._dispatcher.addEventListener(e,i,r)}removeEventListener(e,i,r){this._dispatcher.removeEventListener(e,i,r)}_workerPostMessage(e){aR(()=>{this.dispatchEvent(new MessageEvent("message",{data:e}))})}async _workerMessageHandler(e){const i=II(e);if(i&&i.type===jm.OPEN){const{modulePath:r,jobId:n}=i;let s=await Z$.loadWorker(r);s||(s=await import(r));const a=Z$.connect(s);this._workerPostMessage({type:jm.OPENED,jobId:n,data:a})}}};const I9=()=>$e.getLogger("esri.core.workers.workerFactory"),{HANDSHAKE:$Ve}=jm,TVe='let globalId=0;const outgoing=new Map,configuration={CONFIGURATION};self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;let s=null;return new Promise((r,i)=>{if(t){if(t.aborted)return i(createAbortError());s=()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:5,jobId:n}),i(createAbortError()))},t.addEventListener("abort",s)}outgoing.set(n,{resolve:r,reject:i}),self.postMessage({type:4,jobId:n,methodName:e,abortable:null!=t,data:o})}).finally(()=>{t&&t.removeEventListener("abort",s)})}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,fullVersion:r}=configuration.kernelInfo,{revision:t,fullVersion:n,version:s}=e.kernelInfo;esriConfig.assetsPath!==esriConfig.defaultAssetsPath&&o!==t&&console.warn(`Version mismatch detected between ArcGIS Maps SDK for JavaScript modules and assets. For more information visit https://esriurl.com/using-local-assets.\nModules version: ${r}\nAssets version: ${n??s}\nAssets path: ${esriConfig.assetsPath}`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case 1:let n;function t(e){const o=n.connect(e);self.postMessage({type:2,jobId:r,data:o},[o])}"function"==typeof define&&define.amd?require([workerPath],e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then(e=>e||new Promise(e=>{require([o.modulePath],e)})).then(t)}):"System"in self&&"function"==typeof System.import?System.import(workerPath).then(e=>(n=e.default,checkWorkerRevision(n),n.loadWorker(o.modulePath))).then(e=>e||System.import(o.modulePath)).then(t):esriConfig.workers.useDynamicImport?import(workerPath).then(e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then(e=>e||import(o.modulePath)).then(t)}):(self.RemoteClient||importScripts(workerPath),n=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(n),n.loadWorker(o.modulePath).then(t));break;case 3:if(outgoing.has(r)){const s=outgoing.get(r);outgoing.delete(r),o.error?s.reject(JSON.parse(o.error)):s.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});';let dO,hO;const Mne="Failed to create Worker. Fallback to execute module in main thread";async function kVe(){if(!ve("esri-workers"))return Ane(new C3);if(!dO&&!hO)try{const e=TVe.split("{CONFIGURATION}").join(EVe());dO=URL.createObjectURL(new Blob([e],{type:"text/javascript"}))}catch(e){hO=e||{}}let t;if(dO)try{t=new Worker(dO,{name:"esri-worker-"+CVe++})}catch{I9().warn(Mne,hO),t=new C3}else I9().warn(Mne,hO),t=new C3;return Ane(t)}async function Ane(t){return new Promise(e=>{function i(n){const s=II(n);s&&s.type===$Ve&&(t.removeEventListener("message",i),t.removeEventListener("error",r),e(t))}function r(n){n.preventDefault(),t.removeEventListener("message",i),t.removeEventListener("error",r),I9().warn("Failed to create Worker. Fallback to execute module in main thread",n),(t=new C3).addEventListener("message",i),t.addEventListener("error",r)}t.addEventListener("message",i),t.addEventListener("error",r)})}function EVe(){let t;if(yi.default!=null){const n={...yi};delete n.default,t=JSON.parse(JSON.stringify(n))}else t=JSON.parse(JSON.stringify(yi));t.assetsPath=oo(t.assetsPath),t.defaultAssetsPath=t.defaultAssetsPath?oo(t.defaultAssetsPath):void 0,t.request.interceptors=[],t.log.interceptors=[],t.locale=xl(),t.has={"esri-csp-restrictions":ve("esri-csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":ve("esri-2d-update-debug"),"esri-2d-log-updating":ve("esri-2d-log-updating"),"featurelayer-pbf":ve("featurelayer-pbf"),"featurelayer-fast-triangulation-enabled":ve("featurelayer-fast-triangulation-enabled"),"featurelayer-simplify-thresholds":ve("featurelayer-simplify-thresholds"),"featurelayer-simplify-payload-size-factors":ve("featurelayer-simplify-payload-size-factors"),"featurelayer-simplify-mobile-factor":ve("featurelayer-simplify-mobile-factor"),"featurelayer-query-max-depth":ve("featurelayer-query-max-depth"),"featurelayer-query-tile-max-features":ve("featurelayer-query-tile-max-features"),"featurelayer-query-tile-concurrency":ve("featurelayer-query-tile-concurrency"),"featurelayer-query-pausing-enabled":ve("featurelayer-query-pausing-enabled"),"featurelayer-snapshot-concurrency":ve("featurelayer-snapshot-concurrency"),"featurelayer-snapshot-enabled":ve("featurelayer-snapshot-enabled"),"parquetlayer-full-query-feature-count":ve("parquetlayer-full-query-feature-count"),"esri-atomics":ve("esri-atomics"),"esri-shared-array-buffer":ve("esri-shared-array-buffer"),"esri-tiles-debug":ve("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":ve("esri-workers-arraybuffer-transfer"),"feature-polyline-generalization-factor":ve("feature-polyline-generalization-factor"),"host-webworker":1},t.workers.loaderUrl&&(t.workers.loaderUrl=oo(t.workers.loaderUrl)),t.workers.workerPath?t.workers.workerPath=oo(t.workers.workerPath):t.workers.workerPath=oo(Ur("esri/core/workers/RemoteClient.js")),t.workers.useDynamicImport=!1;const e=yi.workers.loaderConfig,i=xVe({baseUrl:e?.baseUrl,locale:xl(),has:{"csp-restrictions":1,"dojo-test-sniff":0,"host-webworker":1,...e?.has},map:{...e?.map},paths:{...e?.paths},packages:e?.packages||[]});return JSON.stringify({esriConfig:t,loaderConfig:i,kernelInfo:{buildDate:sfe,fullVersion:cY,revision:afe}})}let CVe=0;const{ABORT:Pne,INVOKE:IVe,OPEN:MVe,OPENED:AVe,RESPONSE:p2}=jm;let PVe=class Kve{static async create(e){const i=await kVe();return new Kve(i,e)}constructor(e,i){this._outJobs=new Map,this._inJobs=new Map,this.worker=e,this.id=i,e.addEventListener("message",this._onMessage.bind(this)),e.addEventListener("error",r=>{r.preventDefault(),$e.getLogger("esri.core.workers.WorkerOwner").error(r)})}terminate(){this.worker.terminate()}async open(e,i={}){const{signal:r}=i,n=Xve();return new Promise((s,a)=>{const o={resolve:s,reject:a,abortHandle:HW(r,()=>{this._outJobs.delete(n),this._post({type:Pne,jobId:n})})};this._outJobs.set(n,o),this._post({type:MVe,jobId:n,modulePath:e})})}_onMessage(e){const i=II(e);if(i)switch(i.type){case AVe:this._onOpenedMessage(i);break;case p2:this._onResponseMessage(i);break;case Pne:this._onAbortMessage(i);break;case IVe:this._onInvokeMessage(i)}}_onAbortMessage(e){const i=this._inJobs,r=e.jobId,n=i.get(r);n&&(n.controller&&n.controller.abort(),i.delete(r))}_onInvokeMessage(e){const{methodName:i,jobId:r,data:n,abortable:s}=e,a=s?new AbortController:null,o=this._inJobs,l=_Ve[i];let c;try{if(typeof l!="function")throw new TypeError(`${i} is not a function`);c=l.call(null,n,{signal:a?a.signal:null})}catch(h){return void this._post({type:p2,jobId:r,error:QR(h)})}ho(c)?(o.set(r,{controller:a,promise:c}),c.then(h=>{o.has(r)&&(o.delete(r),this._post({type:p2,jobId:r},h))},h=>{o.has(r)&&(o.delete(r),h||(h={message:"Error encountered at method"+i}),ss(h)||this._post({type:p2,jobId:r,error:QR(h||{message:`Error encountered at method ${i}`})}))})):this._post({type:p2,jobId:r},c)}_onOpenedMessage(e){const{jobId:i,data:r}=e,n=this._outJobs.get(i);n&&(this._outJobs.delete(i),Rr(n.abortHandle),n.resolve(r))}_onResponseMessage(e){const{jobId:i,error:r,data:n}=e,s=this._outJobs.get(i);s&&(this._outJobs.delete(i),Rr(s.abortHandle),r?s.reject(ee.fromJSON(JSON.parse(r))):s.resolve(n))}_post(e,i,r){return Jve(this.worker,e,i,r)}};const One=ve("host-browser")?Math.min(navigator.hardwareConcurrency-1,ve("workers-pool-size")??8):0;let N0=ve("esri-mobile")?Math.min(One,3):One;N0||(N0=ve("safari")&&ve("mac")?7:2);let Lne=0;const I3=[];function OVe(){Qve()}async function pO(t,e){const i=new wVe,{registryTarget:r,...n}=e;return await i.open(t,n),r&&dVe(r,i),i}async function LVe(t,e={}){if(typeof t!="string")throw new ee("workers:undefined-module","modulePath is missing");let i=e.strategy||"distributed";if(ve("host-webworker")&&!ve("esri-workers")&&(i="local"),i==="local"){let r=await Z$.loadWorker(t);r||(r=await import(t)),sr(e.signal);const n=e.client||r;return pO([Z$.connect(r,e.schedule)],{...e,client:n})}if(await Qve(),sr(e.signal),i==="dedicated"){const r=Lne++%N0;return pO([await I3[r].open(t,e)],e)}if(e.maxNumWorkers&&e.maxNumWorkers>0){const r=Math.min(e.maxNumWorkers,N0);if(r<N0){const n=new Array(r);for(let s=0;s<r;++s){const a=Lne++%N0;n[s]=I3[a].open(t,e)}return pO(n,e)}}return pO(I3.map(r=>r.open(t,e)),e)}let fO=null;async function Qve(){if(fO)return fO;new AbortController;const t=[];for(let e=0;e<N0;e++){const i=PVe.create(e).then(r=>(I3[e]=r,r));t.push(i)}return fO=Promise.all(t),fO}function $p(t,e,i=We){return e||(e=new i),e===t||e.destroyed||(e.removeAll(),DVe(t)?e.addMany(t):t&&e.add(t)),e}function ebe(t){return t}function DVe(t){return t&&(Array.isArray(t)||"items"in t&&Array.isArray(t.items))}let vC=class extends We{constructor(e){super(e),this.addHandles([this.on("before-add",i=>{i.item==null&&i.preventDefault()}),this.on("after-add",i=>this._own(i.item)),this.on("after-remove",i=>this._release(i.item))])}get owner(){return this._get("owner")}set owner(e){this.destroyed||e!==this._get("owner")&&(this._releaseAll(),this._set("owner",e),this._ownAll())}_ownAll(){for(const e of this.items)this._own(e)}_releaseAll(){for(const e of this.items)this._release(e)}_createNewInstance(e){return this.itemType?new(We.ofType(this.itemType.Type))(e):new We(e)}};function M9(t,e){return{type:t,cast:ebe,set(i){const r=$p(i,this._get(e),t);r&&!r.destroyed&&(r.owner=this),this._set(e,r)}}}d([m()],vC.prototype,"owner",null),vC=d([U("esri.core.support.OwningCollection")],vC);function Nv(){return[0,0,0]}function RVe(t){return[t[0],t[1],t[2]]}function UT(t,e,i){return[t,e,i]}function zVe(t,e,i){return[t,e,i]}function FVe(t,e=Nv()){const i=Math.min(3,t.length);for(let r=0;r<i;++r)e[r]=t[r];return e}function tbe(){return Nv()}function ibe(){return UT(1,1,1)}function rbe(){return UT(1,0,0)}function nbe(){return UT(0,1,0)}function sbe(){return UT(0,0,1)}const NVe=tbe(),abe=ibe(),jVe=rbe(),VVe=nbe(),BVe=sbe();Object.freeze(Object.defineProperty({__proto__:null,ONES:abe,UNIT_X:jVe,UNIT_Y:VVe,UNIT_Z:BVe,ZEROS:NVe,clone:RVe,create:Nv,freeze:zVe,fromArray:FVe,fromValues:UT,ones:ibe,unitX:rbe,unitY:nbe,unitZ:sbe,zeros:tbe},Symbol.toStringTag,{value:"Module"}));var A9;let ux=A9=class extends lt{constructor(t){super(t),this.isInverse=!1,this.wkt=null,this.wkid=null}getInverse(){return new A9({isInverse:!this.isInverse,wkid:this.wkid,wkt:this.wkt})}};d([m()],ux.prototype,"isInverse",void 0),d([m()],ux.prototype,"wkt",void 0),d([m()],ux.prototype,"wkid",void 0),ux=A9=d([U("esri.geometry.operators.support.GeographicTransformationStep")],ux);var P9;let bC=P9=class extends lt{constructor(t){super(t),this.steps=[]}getInverse(){const t=new P9;for(let e=this.steps.length-1;e>=0;e--){const i=this.steps[e];t.steps.push(i.getInverse())}return t}};d([m({type:[ux],nonNullable:!0})],bC.prototype,"steps",void 0),bC=P9=d([U("esri.geometry.operators.support.GeographicTransformation")],bC);const VCt=Math.PI/180,BCt=/(?:SPHEROID|ELLIPSOID)\[([^\]]+)]/i,Qg=hn.radius,Wu=hn.eccentricitySquared,UVe={a1:Qg*Wu,a2:Qg*Wu*Qg*Wu,a3:Qg*Wu*Wu/2,a4:Qg*Wu*Qg*Wu*2.5,a5:Qg*Wu+Qg*Wu*Wu/2,a6:1-Wu},UCt={4267:{a:63782064e-1,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:hn.radius,f:hn.flattening},4490:{a:6378137,f:1/298.257222101},104900:{a:2439700,f:0},104901:{a:6051e3,f:0},104902:{a:6051800,f:0},104903:{a:Tv.radius,f:Tv.flattening},104904:{a:3393400,f:1/192.0430107526882},104905:{a:Sp.radius,f:Sp.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492e3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1e4,f:0},104912:{a:2409300,f:0},104913:{a:15e3,f:0},104914:{a:4e4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85e3,f:0},104918:{a:1821460,f:0},104919:{a:5e3,f:0},104920:{a:12e3,f:0},104921:{a:3e4,f:3},104922:{a:18e3,f:0},104923:{a:14e3,f:0},104924:{a:49300,f:0},104925:{a:60268e3,f:1/10.2079945799458},104926:{a:16e3,f:0},104927:{a:9500,f:0},104928:{a:56e4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16e3,f:0},104932:{a:133e3,f:0},104933:{a:718e3,f:0},104934:{a:888e3,f:0},104935:{a:1986300,f:0},104936:{a:1e4,f:0},104937:{a:41900,f:0},104938:{a:11e4,f:0},104939:{a:50100,f:0},104940:{a:764e3,f:0},104941:{a:11e3,f:0},104942:{a:529800,f:0},104943:{a:2575e3,f:0},104944:{a:25559e3,f:1/43.61604095563141},104945:{a:578900,f:0},104946:{a:33e3,f:0},104947:{a:21e3,f:0},104948:{a:13e3,f:0},104949:{a:31e3,f:0},104950:{a:27e3,f:0},104951:{a:42e3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15e3,f:0},104955:{a:54e3,f:0},104956:{a:77e3,f:0},104957:{a:27e3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764e3,f:.01708124697141011},104961:{a:74e3,f:0},104962:{a:79e3,f:0},104963:{a:104e3,f:.14423076923076922},104964:{a:29e3,f:0},104965:{a:17e4,f:0},104966:{a:208e3,f:0},104967:{a:4e4,f:0},104968:{a:1352600,f:0},104969:{a:1195e3,f:0},104970:{a:593e3,f:0},104971:{a:Sp.radius,f:0},104972:{a:47e4,f:0},104973:{a:255e3,f:0},104974:{a:2439400,f:0}},HVe={2:{5:Xr,7:null,9:null,10:Xr,1:_C,6:null,8:null,0:null,3:US,11:HS,2:Xr,4:WS},5:{5:Xr,7:null,9:null,10:Xr,1:_C,6:null,8:null,0:null,3:US,11:HS,2:Xr,4:WS},7:{5:null,7:Xr,9:null,10:Xr,1:null,6:zne,8:null,0:null,3:null,11:null,2:null,4:null},9:{5:null,7:null,9:Xr,10:Xr,1:null,6:null,8:Rne,0:null,3:null,11:null,2:null,4:null},3:{5:wC,7:null,9:null,10:wC,1:qVe,6:null,8:null,0:null,3:Xr,11:ZVe,2:wC,4:WVe},4:{5:YS,7:null,9:null,10:YS,1:n6e,6:null,8:null,0:null,3:s6e,11:XVe,2:YS,4:Xr},1:{5:qS,7:null,9:null,10:qS,1:Xr,6:null,8:null,0:null,3:t6e,11:JVe,2:qS,4:i6e},6:{5:null,7:Nne,9:null,10:Nne,1:null,6:Xr,8:null,0:null,3:null,11:null,2:null,4:null},8:{5:null,7:null,9:Fne,10:Fne,1:null,6:null,8:Xr,0:null,3:null,11:null,2:null,4:null},0:{5:null,7:null,9:null,10:null,1:null,6:null,8:null,0:Xr,3:null,11:null,2:null,4:null},10:{5:Xr,7:Xr,9:Xr,10:Xr,1:_C,6:zne,8:Rne,0:null,3:US,11:HS,2:Xr,4:WS},11:{5:GS,7:null,9:null,10:GS,1:KVe,6:null,8:null,0:null,3:QVe,11:Xr,2:GS,4:e6e}};function obe(t,e){return GVe(t,e)?.projector}function GVe(t,e){if(t==null||e==null)return null;if(Sf.source.spatialReference===t&&Sf.dest.spatialReference===e)return Sf;const i=Dne(t,Sf.source),r=Dne(e,Sf.dest);return i===0&&r===0?os(t,e)?Sf.projector=Xr:Sf.projector=null:Sf.projector=HVe[i][r],Sf}function Dne(t,e){return t?e.spatialReference===t?e.spatialReferenceId:(e.spatialReference=t,"metersPerUnit"in e&&(e.metersPerUnit=kl(t,1)),FR(t)?e.spatialReferenceId=1:Ev(t)?e.spatialReferenceId=2:jp(t)?e.spatialReferenceId=3:b5e(t)?e.spatialReferenceId=11:t.wkt===S5e.wkt?e.spatialReferenceId=4:t.wkid===4490?e.spatialReferenceId=5:t.wkt===tZ.wkt?e.spatialReferenceId=6:t.wkt===iZ.wkt?e.spatialReferenceId=8:KY(t)?e.spatialReferenceId=7:QY(t)?e.spatialReferenceId=9:e.spatialReferenceId=0):0}function Xr(t,e,i,r){t!==i&&(i[r++]=t[e++],i[r++]=t[e++],i[r]=t[e])}function wC(t,e,i,r){i[r]=J$*(t[e]/J0),i[r+1]=J$*(lbe-2*Math.atan(Math.exp(-t[e+1]/J0))),i[r+2]=t[e+2]}function qVe(t,e,i,r){const n=t[e]/J0,s=lbe-2*Math.atan(Math.exp(-t[e+1]/J0)),a=J0+t[e+2],o=Math.cos(s)*a;i[r]=Math.cos(n)*o,i[r+1]=Math.sin(n)*o,i[r+2]=Math.sin(s)*a}function WVe(t,e,i,r){wC(t,e,i,r),WS(i,r,i,r)}function YVe(t,e,i,r,n){const s=.4999999*Math.PI,a=go(X$*t[e+1],-s,s),o=Math.sin(a);i[r++]=X$*t[e]*n.radius,i[r++]=n.halfSemiMajorAxis*Math.log((1+o)/(1-o)),i[r]=t[e+2]}function US(t,e,i,r){YVe(t,e,i,r,hn)}function HS(t,e,i,r){i[r]=t[e]*jne,i[r+1]=t[e+1]*jne,i[r+2]=t[e+2]}function GS(t,e,i,r){i[r]=t[e]*Vne,i[r+1]=t[e+1]*Vne,i[r+2]=t[e+2]}function ZVe(t,e,i,r){wC(t,e,i,r),HS(i,r,i,r)}function XVe(t,e,i,r){YS(t,e,i,r),HS(i,r,i,r)}function JVe(t,e,i,r){qS(t,e,i,r),HS(i,r,i,r)}function KVe(t,e,i,r){GS(t,e,i,r),_C(i,r,i,r)}function QVe(t,e,i,r){GS(t,e,i,r),US(i,r,i,r)}function e6e(t,e,i,r){GS(t,e,i,r),WS(i,r,i,r)}function xZ(t,e,i,r,n){const s=n+t[e+2],a=X$*t[e+1],o=X$*t[e],l=Math.cos(a)*s;i[r]=Math.cos(o)*l,i[r+1]=Math.sin(o)*l,i[r+2]=Math.sin(a)*s}function Rne(t,e,i,r){xZ(t,e,i,r,Tv.radius)}function zne(t,e,i,r){xZ(t,e,i,r,Sp.radius)}function _C(t,e,i,r){xZ(t,e,i,r,hn.radius)}function SZ(t,e,i,r,n){const s=t[e],a=t[e+1],o=t[e+2],l=Math.sqrt(s*s+a*a+o*o),c=rje(o/(l===0?1:l)),h=Math.atan2(a,s);i[r++]=J$*h,i[r++]=J$*c,i[r]=l-n}function Fne(t,e,i,r){SZ(t,e,i,r,Tv.radius)}function Nne(t,e,i,r){SZ(t,e,i,r,Sp.radius)}function qS(t,e,i,r){SZ(t,e,i,r,hn.radius)}function t6e(t,e,i,r){qS(t,e,i,r),US(i,r,i,r)}function i6e(t,e,i,r){qS(t,e,i,r),WS(i,r,i,r)}function r6e(t,e,i,r,n){const s=X$*t[e],a=X$*t[e+1],o=t[e+2],l=Math.sin(a),c=Math.cos(a),h=n.radius/Math.sqrt(1-n.eccentricitySquared*l*l);i[r++]=(h+o)*c*Math.cos(s),i[r++]=(h+o)*c*Math.sin(s),i[r++]=(h*(1-n.eccentricitySquared)+o)*l}function WS(t,e,i,r){r6e(t,e,i,r,hn)}function YS(t,e,i,r){const n=UVe,s=t[e],a=t[e+1],o=t[e+2];let l,c,h,f,g,y,b,_,S,$,C,I,P,O,N,R,G,Y,Q,ae,ce;l=Math.abs(o),c=s*s+a*a,h=Math.sqrt(c),f=c+o*o,g=Math.sqrt(f),ae=Math.atan2(a,s),y=o*o/f,b=c/f,O=n.a2/g,N=n.a3-n.a4/g,b>.3?(_=l/g*(1+b*(n.a1+O+y*N)/g),Q=Math.asin(_),$=_*_,S=Math.sqrt(1-$)):(S=h/g*(1-y*(n.a5-O-b*N)/g),Q=Math.acos(S),$=1-S*S,_=Math.sqrt($)),C=1-hn.eccentricitySquared*$,I=hn.radius/Math.sqrt(C),P=n.a6*I,O=h-I*S,N=l-P*_,G=S*O+_*N,R=S*N-_*O,Y=R/(P/C+G),Q+=Y,ce=G+R*Y/2,o<0&&(Q=-Q),i[r++]=J$*ae,i[r++]=J$*Q,i[r]=ce}function n6e(t,e,i,r){YS(t,e,i,r),_C(i,r,i,r)}function s6e(t,e,i,r){YS(t,e,i,r),US(i,r,i,r)}const Sf={source:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},projector:Xr},X$=_p(1),J$=Jye(1),lbe=.5*Math.PI,J0=hn.radius,jne=J0*Math.PI/180,Vne=180/(J0*Math.PI);function XM(t,e,i,r,n,s,a=Math.floor(t.length/3)){const o=obe(e,n);if(o==null)return!1;if(o===Xr){if(t===r&&i===s)return!0;const c=i+3*a;for(let h=i,f=s;h<c;h++,f++)r[f]=t[h];return!0}const l=i+3*a;for(let c=i,h=s;c<l;c+=3,h+=3)o(t,c,r,h);return!0}const HCt=Object.freeze(Object.defineProperty({__proto__:null,projectBuffer:XM},Symbol.toStringTag,{value:"Module"}));function Bne(t,e,i,r,n,s){return mO[0]=t,mO[1]=e,mO[2]=i,XM(mO,r,0,n,s,0)}const mO=Nv();function cbe(t,e,i){if(e==null||i==null||i.vcsWkid||os(e,i)||Cv(e)||Cv(i))return null;const r=NR(e)/NR(i);if(r===1)return null;switch(t){case"point":case"esriGeometryPoint":return n=>a6e(n,r);case"polyline":case"esriGeometryPolyline":return n=>l6e(n,r);case"polygon":case"esriGeometryPolygon":return n=>o6e(n,r);case"multipoint":case"esriGeometryMultipoint":return n=>c6e(n,r);case"extent":case"esriGeometryEnvelope":return n=>u6e(n,r);default:return null}}function a6e(t,e){t?.z!=null&&(t.z*=e)}function o6e(t,e){if(t)for(const i of t.rings)for(const r of i)r.length>2&&(r[2]*=e)}function l6e(t,e){if(t)for(const i of t.paths)for(const r of i)r.length>2&&(r[2]*=e)}function c6e(t,e){if(t)for(const i of t.points)i.length>2&&(i[2]*=e)}function u6e(t,e){t&&t.zmin!=null&&t.zmax!=null&&(t.zmin*=e,t.zmax*=e)}let xC=null,MI=null,AI=null,K$=null,O9={};const $Z=new jT;function Wp(){return!!(MI?.isLoaded()&&AI?.isLoaded()&&K$?.isLoaded())}function ube(){return!!Wp()||(Rt($Z),Ym(),!1)}function dbe(t,e){return!t||!e||Su(t,e)||ube()}function d6e(t,e){return!Su(t,e)&&!Wp()}async function Ym(t){xC==null&&(xC=Promise.all([fe(()=>import("./projectOperator-DJqsgDyB.js"),__vite__mapDeps([144,145,81])).then(e=>(MI=e,MI.load())),fe(()=>import("./projectOperator-DVcBn81X.js"),__vite__mapDeps([146,145,81])).then(e=>(AI=e,AI.load())),fe(()=>import("./geographicTransformationUtils-DMew4wXH.js"),[]).then(e=>(K$=e,K$.load()))])),await xC,sr(t),$Z.notify()}function jv(t,e,i){return Array.isArray(t)?t.length===0?[]:(X5e(t),L9(t,t[0].spatialReference,e,i)):(B$(t),L9([t],t.spatialReference,e,i)[0])}function L9(t,e,i,r){if(e==null||i==null)return t;if(Su(e,i,r))return t.map(n=>M3(n,e,i));if(r?.geographicTransformation==null&&FR(e))return t.map(n=>M3(n,e,at.WGS84)).map(n=>PI(n,i));if(r?.geographicTransformation==null&&FR(i))return t.map(n=>PI(n,at.WGS84)).map(n=>M3(n,at.WGS84,i));if(!Wp())throw new pbe;if(!r?.geographicTransformation){if(r?.extendedParams)r={...r,geographicTransformation:K$.getTransformation(e,i,r.areaOfInterestExtent)||new bC};else if(!r?.areaOfInterestExtent){const n=h6e(e,i);let s=O9[n];s||(s=K$.getTransformation(e,i)||new bC,O9[n]=s),r={geographicTransformation:s}}}return t[0].spatialReference||(t[0].spatialReference=e),t[0]instanceof Is?MI.executeMany(t,i,r):AI.executeMany(t,i,r)}function h6e(t,e){return[t.wkid?.toString()??"-1",t.wkt?.toString()??"",t.wkt2?.toString()??"",e.wkid?.toString()??"-1",e.wkt?.toString()??"",e.wkt2?.toString()??""].join()}function p6e(t,e){const i=hbe([t],e);return i.pending!=null?{pending:i.pending,geometry:null}:i.geometries!=null?{pending:null,geometry:i.geometries[0]}:{pending:null,geometry:null}}function hbe(t,e){if(!Wp()){for(const i of t)if(i!=null&&!os(i.spatialReference,e)&&bc(i.spatialReference)&&bc(e)&&!Su(i.spatialReference,e))return Rt($Z),{pending:Ym(),geometries:null}}return{pending:null,geometries:t.map(i=>i==null?null:os(i.spatialReference,e)?i:bc(i.spatialReference)&&bc(e)?PI(i,e):null)}}let pbe=class extends ee{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}};function f6e(){xC=null,MI=null,AI=null,K$=null,O9={}}const m6e={get loadPromise(){return xC}};function PI(t,e){try{const i=jv(t,e);if(i==null)return null;"xmin"in t&&"xmin"in i&&(i.zmin=t.zmin,i.zmax=t.zmax);const r=cbe(i.type,t.spatialReference,e);return r?.(i),i}catch(i){if(!(i instanceof pbe))throw i;return null}}async function fbe(t,e,i){const r=t.spatialReference;return r!=null&&e!=null&&await TZ(r,e,null,i),PI(t,e)}function Su(t,e,i){return!(i?.areaOfInterestExtent||i?.extendedParams||i?.geographicTransformation)&&(!!os(t,e)||bc(t)&&bc(e)&&!!obe(t,e))}function g6e(t,e){if(os(t,e))return!0;if(!bc(t)||!bc(e))return!1;const i=Ev(t)||jp(t)||n9(t),r=Ev(e)||jp(e)||n9(e);return i&&r}async function TZ(t,e,i,r){if(Wp())return eie(r);if(Array.isArray(t)){for(const{source:n,dest:s,options:a}of t)if(n&&s&&!Su(n,s,a))return Ym(r)}else if(t&&e&&!Su(t,e,i))return Ym(r);return eie(r)}function M3(t,e,i){return t?"x"in t?mbe(t,e,new gt,i,0):"xmin"in t?wbe(t,e,new Wt,i,0):"rings"in t?bbe(t,e,new br,i,0):"paths"in t?ybe(t,e,new xn,i,0):"points"in t?gbe(t,e,new ou,i,0):null:null}function y6e(t,e,i=e.spatialReference,r=0){return i!=null&&t.spatialReference!=null&&mbe(t,t.spatialReference,e,i,r)!=null}function mbe(t,e,i,r,n){io[0]=t.x,io[1]=t.y;const s=t.z;return io[2]=s!==void 0?s:n,XM(io,e,0,io,r,0)?(i.x=io[0],i.y=io[1],i.spatialReference=r,s!==void 0||Cv(r)?(i.z=io[2],i.hasZ=!0):(i.z=void 0,i.hasZ=!1),t.m===void 0?(i.m=void 0,i.hasM=!1):(i.m=t.m,i.hasM=!0),i):null}function v6e(t,e,i=e.spatialReference,r=0){return t.spatialReference!=null&&i!=null&&gbe(t,t.spatialReference,e,i,r)!=null}function gbe(t,e,i,r,n){const{points:s,hasZ:a,hasM:o}=t,l=[],c=s.length,h=[];for(const g of s)h.push(g[0],g[1],a?g[2]:n);if(!XM(h,e,0,h,r,0,c))return null;const f=a||Cv(r);for(let g=0;g<c;++g){const y=3*g,b=h[y],_=h[y+1];f&&o?l.push([b,_,h[y+2],s[g][3]]):f?l.push([b,_,h[y+2]]):o?l.push([b,_,s[g][2]]):l.push([b,_])}return i.points=l,i.spatialReference=r,i.hasZ=a,i.hasM=o,i}function b6e(t,e,i=e.spatialReference,r=0){return t.spatialReference!=null&&i!=null&&ybe(t,t.spatialReference,e,i,r)!=null}function ybe(t,e,i,r,n){const{paths:s,hasZ:a,hasM:o}=t,l=[];if(!_be(s,a??!1,o??!1,e,l,r,n))return null;const c=a||Cv(r);return i.paths=l,i.spatialReference=r,i.hasZ=c,i.hasM=o,i}function vbe(t,e,i=e.spatialReference,r=0){return t.spatialReference!=null&&i!=null&&bbe(t,t.spatialReference,e,i,r)!=null}function bbe(t,e,i,r,n){const{rings:s,hasZ:a,hasM:o}=t,l=[];if(!_be(s,a??!1,o??!1,e,l,r,n))return null;const c=a||Cv(r);return i.rings=l,i.spatialReference=r,i.hasZ=c,i.hasM=o,i}function w6e(t,e,i=e.spatialReference,r=0){return t.spatialReference!=null&&i!=null&&wbe(t,t.spatialReference,e,i,r)!=null}function wbe(t,e,i,r,n){const{xmin:s,ymin:a,xmax:o,ymax:l,hasZ:c,hasM:h}=t,f=c?t.zmin:n;if(!Bne(s,a,f,e,io,r))return null;const g=c||Cv(r);i.xmin=io[0],i.ymin=io[1],g&&(i.zmin=io[2]);const y=c?t.zmax:n;return Bne(o,l,y,e,io,r)?(i.xmax=io[0],i.ymax=io[1],g&&(i.zmax=io[2]),h&&(i.mmin=t.mmin,i.mmax=t.mmax),i.spatialReference=r,i):null}function _be(t,e,i,r,n,s,a=0){const o=new Array;for(const h of t)for(const f of h)o.push(f[0],f[1],e?f[2]:a);if(!XM(o,r,0,o,s,0))return!1;let l=0;n.length=0;const c=e||Cv(s);for(const h of t){const f=new Array;for(const g of h)c&&i?f.push([o[l++],o[l++],o[l++],g[3]]):c?f.push([o[l++],o[l++],o[l++]]):i?(f.push([o[l++],o[l++],g[2]]),l++):(f.push([o[l++],o[l++]]),l++);n.push(f)}return!0}const io=Nv(),qCt=Object.freeze(Object.defineProperty({__proto__:null,canProjectWithoutEngine:Su,initializeProjection:TZ,isEqualBaseGCS:g6e,isLoaded:Wp,isLoadedOrLoad:ube,isLoadedOrLoadFor:dbe,load:Ym,project:jv,projectExtent:w6e,projectMany:L9,projectMultipoint:v6e,projectOrLoad:p6e,projectOrLoadMany:hbe,projectPoint:y6e,projectPolygon:vbe,projectPolyline:b6e,projectWithZConversion:fbe,projectWithoutEngine:M3,requiresLoad:d6e,test:m6e,tryProjectWithZConversion:PI,unload:f6e},Symbol.toStringTag,{value:"Module"}));var D9,c$;let rs=(c$=class extends _e{constructor(e){super(e),this.cols=null,this.level=0,this.levelValue=null,this.origin=null,this.resolution=0,this.rows=null,this.scale=0}clone(){return new D9({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}},D9=c$,c$);d([m({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],rs.prototype,"cols",void 0),d([m({type:li,json:{write:!0}})],rs.prototype,"level",void 0),d([m({type:String,json:{write:!0}})],rs.prototype,"levelValue",void 0),d([m({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],rs.prototype,"origin",void 0),d([m({type:Number,json:{write:!0}})],rs.prototype,"resolution",void 0),d([m({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],rs.prototype,"rows",void 0),d([m({type:Number,json:{write:!0}})],rs.prototype,"scale",void 0),rs=D9=d([U("esri.layers.support.LOD")],rs);let _6e=class xbe{constructor(e,i,r,n=tn()){this._level=e,this._row=i,this._col=r,this.extent=n}get id(){return this._id??=`${this.level}/${this.row}/${this.col}`,this._id}get level(){return this._level}set level(e){this._level=e,this._id=null}get row(){return this._row}set row(e){this._row=e,this._id=null}get col(){return this._col}set col(e){this._col=e,this._id=null}toJSON(){return{level:this._level,row:this._row,col:this._col,extent:this.extent}}static fromJSON(e){return new xbe(e.level,e.row,e.col,e.extent)}};var dx;const Une=new Gt({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});var u$;let Cs=(u$=class extends _e{static create(e={}){const{resolutionFactor:i=1,scales:r,size:n=256,spatialReference:s=at.WebMercator,numLODs:a=24}=e;if(!bc(s)){const g=[];if(r)for(let y=0;y<r.length;y++){const b=r[y];g.push(new rs({level:y,scale:b,resolution:b}))}else{let y=5e-4;for(let b=a-1;b>=0;b--)g.unshift(new rs({level:b,scale:y,resolution:y})),y*=2}return new dx({dpi:96,lods:g,origin:new gt(0,0,s),size:[n,n],spatialReference:s})}const o=No(s),l=e.origin?new gt({x:e.origin.x,y:e.origin.y,spatialReference:s}):new gt(o?{x:o.origin[0],y:o.origin[1],spatialReference:s}:{x:0,y:0,spatialReference:s}),c=96,h=1/(kl(s)*39.37*c),f=[];if(r)for(let g=0;g<r.length;g++){const y=r[g],b=y*h;f.push(new rs({level:g,scale:y,resolution:b}))}else{let g=y_(s)?512/n*5916575275917094e-7:256/n*591657527591555e-6;const y=Math.ceil(a/i);f.push(new rs({level:0,scale:g,resolution:g*h}));for(let b=1;b<y;b++){const _=g/2**i,S=_*h;f.push(new rs({level:b,scale:_,resolution:S})),g=_}}return new dx({dpi:c,lods:f,origin:l,size:[n,n],spatialReference:s})}constructor(e){super(e),this.dpi=96,this.format=null,this.origin=null,this.size=null,this.spatialReference=null}get isWrappable(){const{spatialReference:e,origin:i}=this;if(e&&i){const r=No(e);return e.isWrappable&&!!r&&Math.abs(r.origin[0]-i.x)<=r.dx}return!1}readOrigin(e,i){return gt.fromJSON({spatialReference:i.spatialReference,...e})}set lods(e){let i=0,r=0;const n=[],s=this._levelToLOD={};e&&(i=-1/0,r=1/0,e.forEach(a=>{n.push(a.scale),i=a.scale>i?a.scale:i,r=a.scale<r?a.scale:r,s[a.level]=a})),this._set("scales",n),this._set("lods",e),this._initializeUpsampleLevels()}readSize(e,i){return[i.cols,i.rows]}writeSize(e,i){i.cols=e[0],i.rows=e[1]}zoomToScale(e){const i=this.scales;if(e<=0)return i[0];if(e>=i.length-1)return i[i.length-1];const r=Math.floor(e),n=r+1;return i[r]/(i[r]/i[n])**(e-r)}scaleToZoom(e){const i=this.scales,r=i.length-1;let n=0;for(;n<r;n++){const s=i[n],a=i[n+1];if(s<=e)return n;if(a===e)return n+1;if(s>e&&a<e)return n+Math.log(s/e)/Math.log(s/a)}return n}tileAt(e,i,r,n){const s=this.lodAt(e);if(!s)return null;let a,o;if(typeof i=="number")a=i,o=r;else if(os(i.spatialReference,this.spatialReference))a=i.x,o=i.y,n=r;else{const h=XF(i,this.spatialReference);if(h==null)return null;a=h.x,o=h.y,n=r}const l=s.resolution*this.size[0],c=s.resolution*this.size[1];return n??=new _6e(0,0,0),n.level=e,n.row=Math.floor((this.origin.y-o)/c+.001),n.col=Math.floor((a-this.origin.x)/l+.001),this.updateTileInfo(n),n}updateTileInfo(e,i=0){if(!("extent"in e))return!1;let r=this.lodAt(e.level);if(!r&&i===1){const o=this.lods[this.lods.length-1];o.level<e.level&&(r=o)}if(!r)return!1;const n=e.level-r.level,s=r.resolution*this.size[0]/2**n,a=r.resolution*this.size[1]/2**n;return e.extent[0]=this.origin.x+e.col*s,e.extent[1]=this.origin.y-(e.row+1)*a,e.extent[2]=e.extent[0]+s,e.extent[3]=e.extent[1]+a,!0}upsampleTile(e){const i=this._upsampleLevels[e.level];return!(!i||i.parentLevel===-1)&&(e.level=i.parentLevel,e.row=Math.floor(e.row/i.factor+.001),e.col=Math.floor(e.col/i.factor+.001),this.updateTileInfo(e),!0)}getTileBounds(e,i){const r=this.lodAt(i.level);if(r==null)return null;const{resolution:n}=r,s=n*this.size[0],a=n*this.size[1];return e[0]=this.origin.x+i.col*s,e[1]=this.origin.y-(i.row+1)*a,e[2]=e[0]+s,e[3]=e[1]+a,e}lodAt(e){return this._levelToLOD?.[e]??null}clone(){return dx.fromJSON(this.write({}))}getCompatibleForVTL(e){if(this.size[0]!==this.size[1]||this.size[0]===256&&e===512)return null;const i=(this.size[0]===512&&e===256?-1:0)+(this.spatialReference.isGeographic?1:0);if(this.size[0]===e&&i===0)return this;const r=[],n=this.lods.length-i;for(let s=0;s<n;s++){const a=s+i,{scale:o,resolution:l}=a>=0?this.lods[a]:{scale:2*this.lods[0].scale,resolution:2*this.lods[0].resolution};r.push(new rs({level:s,scale:o,resolution:l}))}return new dx({size:[e,e],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:r})}_initializeUpsampleLevels(){const e=this.lods;this._upsampleLevels=[];let i=null;for(let r=0;r<e.length;r++){const n=e[r];this._upsampleLevels[n.level]={parentLevel:i?i.level:-1,factor:i?i.resolution/n.resolution:0},i=n}}},dx=u$,u$);d([m({type:Number,json:{write:!0}})],Cs.prototype,"compressionQuality",void 0),d([m({type:Number,json:{write:!0}})],Cs.prototype,"dpi",void 0),d([m({type:String,json:{read:Une.read,write:Une.write,origins:{"web-scene":{read:!1,write:!1}}}})],Cs.prototype,"format",void 0),d([m({readOnly:!0})],Cs.prototype,"isWrappable",null),d([m({type:gt,json:{write:!0}})],Cs.prototype,"origin",void 0),d([Ve("origin")],Cs.prototype,"readOrigin",null),d([m({type:[rs],value:null,json:{write:!0}})],Cs.prototype,"lods",null),d([m({readOnly:!0})],Cs.prototype,"scales",void 0),d([m({cast:t=>Array.isArray(t)?t:typeof t=="number"?[t,t]:[256,256]})],Cs.prototype,"size",void 0),d([Ve("size",["rows","cols"])],Cs.prototype,"readSize",null),d([qe("size",{cols:{type:li},rows:{type:li}})],Cs.prototype,"writeSize",null),d([m({type:at,json:{write:!0}})],Cs.prototype,"spatialReference",void 0),Cs=dx=d([U("esri.layers.support.TileInfo")],Cs);let Q$=class extends vC{constructor(e){super(e),this.addHandles(this.on("before-add",i=>{i.item!=null&&i.item.parent===this.owner&&($e.getLogger(this).warn("Analysis inside the collection must be unique. Not adding this element again."),i.preventDefault())}))}_own(e){e.parent=this.owner}_release(e){e.parent=null}};Q$=d([U("esri.support.AnalysesCollection")],Q$);const A3={widthBreakpoint:{getValue(t){const e=t.viewSize[0],i=t.breakpoints,r=this.values;return e<=i.xsmall?r.xsmall:e<=i.small?r.small:e<=i.medium?r.medium:e<=i.large?r.large:r.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(t){const e=t.viewSize[1],i=t.breakpoints,r=this.values;return e<=i.xsmall?r.xsmall:e<=i.small?r.small:e<=i.medium?r.medium:e<=i.large?r.large:r.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(t){const e=t.viewSize,i=e[0],r=e[1],n=this.values;return r>=i?n.portrait:n.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},A6={xsmall:544,small:768,medium:992,large:1200};function x6e(t){const e=t;return e&&e.xsmall<e.small&&e.small<e.medium&&e.medium<e.large}function P6(t,e){return e?A3[t].valueToClassName[e].split(" "):[]}const S6e=t=>{const e=t;let i=class extends e{constructor(...r){super(...r),this.orientation=null,this.widthBreakpoint=null,this.heightBreakpoint=null,this.breakpoints=A6}initialize(){this.addHandles(ze(()=>[this.breakpoints,this.size],()=>this._updateClassNames(),Di))}destroy(){this.destroyed||this._removeActiveClassNames()}set breakpoints(r){if(r!==this._get("breakpoints")){if(!x6e(r)){const n=JSON.stringify(A6,null,2);console.warn("provided breakpoints are not valid, using defaults:"+n),r=A6}this._set("breakpoints",{...r})}}_updateClassNames(){if(!this.container)return;const r=Ao.acquire(),n=Ao.acquire();let s,a=!1;for(s in A3){const o=this[s],l=A3[s].getValue({viewSize:this.size,breakpoints:this.breakpoints});o!==l&&(a=!0,this[s]=l,P6(s,o).forEach(c=>n.push(c)),P6(s,l).forEach(c=>r.push(c)))}a&&(this._applyClassNameChanges(r,n),Ao.release(r),Ao.release(n))}_applyClassNameChanges(r,n){const s=this.container;s&&(n.forEach(a=>s.classList.remove(a)),r.forEach(a=>s.classList.add(a)))}_removeActiveClassNames(){const r=this.container;if(!r)return;let n;for(n in A3)P6(n,this[n]).forEach(s=>r.classList.remove(s))}};return d([m()],i.prototype,"breakpoints",null),d([m()],i.prototype,"orientation",void 0),d([m()],i.prototype,"widthBreakpoint",void 0),d([m()],i.prototype,"heightBreakpoint",void 0),i=d([U("esri.views.BreakpointsOwner")],i),i};let K0=class extends lt{constructor(){super(...arguments),this.updating=!1,this._handleId=0,this._scheduleHandleId=0,this._pendingPromises=new Set}destroy(){this.removeAll()}add(e,i,r={}){return this._installWatch(e,i,r,ze)}addWhen(e,i,r={}){return this._installWatch(e,i,r,as)}addOnCollectionChange(e,i,{initial:r=!1,final:n=!1}={}){const s=++this._handleId;return this.addHandles([Oa(e,"after-changes",this._createSyncUpdatingCallback(),xu),Oa(e,"change",i,{onListenerAdd:r?a=>i({added:a.toArray(),removed:[]}):void 0,onListenerRemove:n?a=>i({added:[],removed:a.toArray()}):void 0})],s),Si(()=>this.removeHandles(s))}addPromise(e){if(e==null)return e;const i=++this._handleId;this.addHandles(Si(()=>{this._pendingPromises.delete(e)&&(this._pendingPromises.size!==0||this.hasHandles(gO)||this._set("updating",!1))}),i),this._pendingPromises.add(e),this._set("updating",!0);const r=()=>this.removeHandles(i);return e.then(r,r),e}removeAll(){this._pendingPromises.clear(),this.removeAllHandles(),this._set("updating",!1)}_installWatch(e,i,r={},n){const s=++this._handleId;r.sync||this._installSyncUpdatingWatch(e,s);const a=n(e,i,r);return this.addHandles(a,s),Si(()=>this.removeHandles(s))}_installSyncUpdatingWatch(e,i){const r=this._createSyncUpdatingCallback(),n=ze(e,r,{sync:!0,equals:()=>!1});return this.addHandles(n,i),n}_createSyncUpdatingCallback(){return()=>{this.removeHandles(gO),++this._scheduleHandleId;const e=this._scheduleHandleId;this._get("updating")||this._set("updating",!0),this.addHandles($T(()=>{e===this._scheduleHandleId&&(this._set("updating",this._pendingPromises.size>0),this.removeHandles(gO))}),gO)}}};d([m({readOnly:!0})],K0.prototype,"updating",void 0),K0=d([U("esri.core.support.UpdatingHandles")],K0);const gO=-42;let hy=class extends lt{constructor(){super(...arguments),this.items=new We,this._watchUpdatingTracking=new K0,this._callbacks=new Map,this._projector=Y8(),this._hiddenProjector=Y8()}get needsRender(){return this.items.length>0}get updating(){return this._watchUpdatingTracking?.updating??!1}initialize(){const e=document.createElement("div");e.className="esri-overlay-surface",this._set("surface",e),this._hiddenSurface=document.createElement("div"),this._hiddenSurface.setAttribute("style","visibility: hidden;"),e.appendChild(this._hiddenSurface),this._watchUpdatingTracking.addOnCollectionChange(()=>this.items,i=>{for(const r of i.added){const n=()=>r.render();this._callbacks.set(r,n),this._projector.append(this.surface,n)}for(const r of i.removed){const n=this._projector.detach(this._callbacks.get(r));this.surface.removeChild(n.domNode),this._callbacks.delete(r)}})}addItem(e){this.items.add(e)}removeItem(e){this.items.remove(e)}destroy(){this.items.removeAll(),this._callbacks.forEach(e=>this._projector.detach(e)),this._callbacks=null,this._projector=null,this._watchUpdatingTracking.destroy()}render(){this._projector.renderNow()}computeBoundingRect(e){const i=this._hiddenSurface,r=this._hiddenProjector;let n;const s=()=>(n=e.render(),n);r.append(i,s),r.renderNow();const a={left:0,top:0,right:0,bottom:0};if(n?.domNode){const o=n.domNode.getBoundingClientRect();a.left=o.left,a.top=o.top,a.right=o.right,a.bottom=o.bottom}for(r.detach(s);i.firstChild;)i.removeChild(i.firstChild);return a}overlaps(e,i){const r=this.computeBoundingRect(e),n=this.computeBoundingRect(i);return Math.max(r.left,n.left)<=Math.min(r.right,n.right)&&Math.max(r.top,n.top)<=Math.min(r.bottom,n.bottom)}get hasVisibleItems(){return this.items.some(e=>e.visible)}async prepare(){await document.fonts.load(this._fontString()).catch(()=>{})}renderCanvas(e,i){const r=!!i?.disableDecorations;if(!this.items.some(s=>s.visible&&!(r&&s.isDecoration)))return;const n=e.getContext("2d");n.save(),n.font=this._fontString(),this.items.forEach(s=>{r&&s.isDecoration||(n.save(),s.renderCanvas(n),n.restore())}),n.restore()}_fontString(){return`10px ${getComputedStyle(this.surface).fontFamily}`}};d([m({readOnly:!0})],hy.prototype,"surface",void 0),d([m({readOnly:!0})],hy.prototype,"items",void 0),d([m({readOnly:!0})],hy.prototype,"needsRender",null),d([m({readOnly:!0})],hy.prototype,"_watchUpdatingTracking",void 0),d([m({readOnly:!0})],hy.prototype,"updating",null),hy=d([U("esri.views.overlay.ViewOverlay")],hy);const Hne=hy,O6=[0,0];function $6e(t){const e=(t.ownerDocument||window.document).defaultView,i=t.getBoundingClientRect();return O6[0]=i.left+(e?.pageXOffset??0),O6[1]=i.top+(e?.pageYOffset??0),O6}function Gne(t){t&&(t.textContent="",t.parentNode&&t.parentNode.removeChild(t))}function T6e(t){const e=document.createElement("div");return t.appendChild(e),e}const T1=16,f2=750,k6e=512,E6e=2,C6e=t=>{const e=t;let i=class extends e{constructor(...r){super(...r),this._freqInfo={freq:T1,time:f2},this._overlayRenderTaskHandle=null,this.aria={},this.height=0,this.messagesCommon=null,this.overlay=null,this.position=null,this.resizing=!1,this.root=null,this.surface=null,this.suspended=!0,this.userContent=null,this.width=0,this.widthBreakpoint=null,this.addHandles([ze(()=>this.cursor,n=>{const{surface:s}=this;s&&s.setAttribute("data-cursor",n)}),ze(()=>this.navigating,n=>{const{surface:s}=this;s&&s.setAttribute("data-navigating",n.toString())}),ze(()=>[this.aria,this.surface],()=>this._updateAria(),{initial:!0})])}initialize(){const r=this;this.addHandles([ze(()=>this.ui,(n,s)=>this._handleUIChange(n,s),Di),r.on("focus",()=>this.notifyChange("focused")),r.on("blur",()=>this.notifyChange("focused"))])}destroy(){this.destroyed||(this.ui?.destroy(),this.container=null)}get container(){return this._get("container")??null}set container(r){const n=this._get("container"),s=CY(r);if(s||typeof r!="string"||$e.getLogger(this).error("#container",`element with id '${r}' not found`),n===s)return;if(this._stopMeasuring(),n&&(n.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay&&(this.overlay.destroy(),this._set("overlay",null)),this.root&&(Gne(this.root),this._set("root",null)),this.userContent&&(lre(this.userContent,n),Gne(this.userContent),this._set("userContent",null))),!s)return this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),void this._set("container",null);s.classList.add("esri-view");const a=document.createElement("div");a.className="esri-view-user-storage",lre(s,a),s.appendChild(a),this._set("userContent",a);const o=document.createElement("div");o.className="esri-view-root",s.insertBefore(o,s.firstChild),this._set("root",o);const l=document.createElement("div");l.className="esri-view-surface",l.setAttribute("role","application"),l.tabIndex=0,o.appendChild(l),this._set("surface",l);const c=new Hne;o.appendChild(c.surface),this._set("overlay",c),this.addHandles(ze(()=>c.needsRender,h=>{h&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=z$({render:()=>this.overlay?.render()}):this._overlayRenderTaskHandle=Rr(this._overlayRenderTaskHandle)})),this.forceDOMReadyCycle(),this._set("container",s),this._startMeasuring()}get focused(){const r=document.activeElement===this.surface;return document.hasFocus()&&r}get size(){return[this.width,this.height]}set ui(r){const n=this._get("ui");n!==r&&n?.destroy(),this._set("ui",r)}blur(){this.surface?.blur()}focus(){this.surface?.focus()}pageToContainer(r,n,s){const a=this.position;return r-=a?a[0]:0,n-=a?a[1]:0,s?(s[0]=r,s[1]=n):s=[r,n],s}containerToPage(r,n,s){const a=this.position;return r+=a?a[0]:0,n+=a?a[1]:0,s?(s[0]=r,s[1]=n):s=[r,n],s}_updateAria(){const{surface:r,aria:n}=this;r&&(r.ariaLabelledByElements=n?.labelledByElements??null,r.ariaDescribedByElements=n?.describedByElements??null,r.ariaLabel=n?.label??null,r.ariaDescription=n?.description??null)}_handleUIChange(r,n){this.removeHandles("ui"),n&&n!==r&&n.destroy(),r&&(r.view=this,this.addHandles(ze(()=>this.root,s=>{r.container=s?T6e(s):null},Di),"ui")),this._set("ui",r)}_stopMeasuring(){this.removeHandles("measuring"),this._get("resizing")&&this._set("resizing",!1)}_startMeasuring(){const r=this._freqInfo;r.freq=T1,r.time=f2;const n=z$({prepare:o=>{const l=this._measure(),c=this._freqInfo;if(c.time+=o.deltaTime,l&&(c.freq=T1,this._get("resizing")||this._set("resizing",!0)),c.time<c.freq)return;c.time=0;const h=this._position();c.freq=h||l?T1:Math.min(f2,c.freq*E6e),!l&&c.freq>=k6e&&(n.pause(),this._get("resizing")&&this._set("resizing",!1))}}),s=new ResizeObserver(o=>{r.freq=T1,r.time=f2,n.resume()});this.container!=null&&s.observe(this.container);const a=Si(()=>s.disconnect());this.addHandles([zm(window,"resize",()=>{r.freq=T1,r.time=f2,n.resume()}),a,n],"measuring"),this._measure(),this._position()}_measure(){const r=this.container,n=r?r.clientWidth:0,s=r?r.clientHeight:0;if(n===0||s===0)return this.suspended||this._set("suspended",!0),!1;const a=this.width,o=this.height;return n===a&&s===o?(this.suspended&&this._set("suspended",!1),!1):(this._set("width",n),this._set("height",s),this.suspended&&this._set("suspended",!1),this.emit("resize",{oldWidth:a,oldHeight:o,width:n,height:s}),!0)}_position(){const r=this.container,n=this.position,s=r&&$6e(r);return!!s&&(!n||s[0]!==n[0]||s[1]!==n[1])&&(this._set("position",[s[0],s[1]]),!0)}forceDOMReadyCycle(){}};return d([m()],i.prototype,"aria",void 0),d([m()],i.prototype,"container",null),d([m({readOnly:!0})],i.prototype,"focused",null),d([m({readOnly:!0})],i.prototype,"height",void 0),d([m()],i.prototype,"messagesCommon",void 0),d([m({type:Hne})],i.prototype,"overlay",void 0),d([m({readOnly:!0})],i.prototype,"position",void 0),d([m({readOnly:!0})],i.prototype,"resizing",void 0),d([m({readOnly:!0})],i.prototype,"root",void 0),d([m({value:null,readOnly:!0})],i.prototype,"size",null),d([m({readOnly:!0})],i.prototype,"surface",void 0),d([m({readOnly:!0})],i.prototype,"suspended",void 0),d([m({nonNullable:!0})],i.prototype,"ui",null),d([m({readOnly:!0})],i.prototype,"userContent",void 0),d([m({readOnly:!0})],i.prototype,"width",void 0),d([m()],i.prototype,"widthBreakpoint",void 0),i=d([U("esri.views.DOMContainer")],i),i};function I6e(t,e,i){return D0(t.map((r,n)=>e.apply(i,[r,n])))}async function M6e(t,e,i){return(await D0(t.map((r,n)=>e.apply(i,[r,n])))).map(r=>r.value)}function kZ(t){return{ok:!0,value:t}}function EZ(t){return{ok:!1,error:t}}function A6e(t){return t!=null&&t.ok===!0?t.value:null}function P6e(t){return t!=null&&t.ok===!1?t.error:null}async function hN(t){if(t==null)return{ok:!1,error:new Error("no promise provided")};try{return kZ(await t)}catch(e){return EZ(e)}}async function O6e(t){try{return kZ(await t)}catch(e){return fl(e),EZ(e)}}function JM(t,e){return new py(t,e)}let py=class extends lt{get value(){return A6e(this._result)}get error(){return P6e(this._result)}get finished(){return this._result!=null}constructor(e,i){super({}),this._result=null,this._abortHandle=null,this.abort=()=>{this._abortController=Nw(this._abortController)},this.remove=this.abort,this._abortController=new AbortController;const{signal:r}=this._abortController;this.promise=e(r),this.promise.then(n=>{this._result=kZ(n),this._cleanup()},n=>{this._result=EZ(n),this._cleanup()}),this._abortHandle=Ma(i,this.abort)}normalizeCtorArgs(){return{}}destroy(){this.abort()}_cleanup(){this._abortHandle=Rr(this._abortHandle),this._abortController=null}};d([m()],py.prototype,"value",null),d([m()],py.prototype,"error",null),d([m()],py.prototype,"finished",null),d([m()],py.prototype,"promise",void 0),d([m()],py.prototype,"_result",void 0),py=d([U("esri.core.asyncUtils.ReactiveTask")],py);const yO="popup",qne="manual";function Wne(t){const{popupElement:e,popup:i}=t||{};return e??i??null}function Tp(t){return t!=null&&"open"in t&&"declaredClass"in t}function Zm(t){return!!t&&t.tagName.toLowerCase()==="arcgis-popup"&&"open"in t}function L6e(t,e,i){const[r,n,s]=e;if(i){const[a,o,l]=i;a&&Tp(o)&&(o.view=null,a.remove(o,yO),o!==n&&n&&o.destroy()),a&&l&&Zm(l)&&(l.view=null,a.remove(l,yO),l!==s&&s&&l.remove())}r&&Tp(n)&&(n.view=t,r.add(n,{key:yO,position:qne,internal:!0})),r&&s&&Zm(s)&&(s.view=t,r.add(s,{key:yO,position:qne,internal:!0}))}async function D6e(t,e){const{popup:i,popupElement:r}=t;Tp(i)?await vO(i,null,e):r&&Zm(r)?await vO(null,r,e):e?.defer(async()=>{await t.setupPopup();const{popup:n,popupElement:s}=t;Tp(n)&&!t.destroyed&&t.ready&&t.popupEnabled?await vO(n,null,e):s&&Zm(s)&&await vO(null,s,e)})}function R6e(t,e){const{popup:i,popupElement:r}=t;if(Tp(i))return i.open(e);r&&Zm(r)&&r.open(e)}function Sbe(t,e){Tp(t)&&t.close(),e&&Zm(e)&&(e.visible=!1)}async function vO(t,e,i){if(Tp(t)){const r=await t.viewModel.handleViewClick(i);return void(r?.promises?.length?t.open(r):t.visible&&t.close())}if(e&&Zm(e)){const r=await e.handleViewClick(i);r?.promises?.length?e.open(r):e.visible&&(e.visible=!1)}}const z6e=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i,F6e="screenUtils.toPt: input not recognized!",$be=96;function Fi(t){return t?t/72*$be:0}function Xi(t){return t?72*t/$be:0}function xi(t){if(typeof t=="string"){const e=t.match(z6e);if(e){const i=Number(e[1]),r=e[3]&&e[3].toLowerCase(),n=t.startsWith("-"),s=r==="px"?Xi(i):i;return n?-s:s}return console.warn(F6e),null}return t}function Ps(t=0,e=0){return{x:t,y:e}}function JCt(t){return t?Ps(t.x,t.y):null}function KCt(t=0,e=0){return[t,e]}function QCt(t=0,e=0,i=0){return[t,e,i]}function eIt(t){return t}function tIt(t){return t}function iIt(t){return t}function rIt(t,e){return e?(e[0]=t.x,e[1]=t.y,e.length>2&&(e[2]=0),e):[t.x,t.y]}const Tbe=ve("mac")?"Meta":"Control",N6e=new Set(["Alt","Control","Meta","Shift","Ctrl","Primary"]),j6e=t=>N6e.has(t);let V6e=class{constructor(e,i=[]){this.eventType=e,this.keyModifiers=i}matches(e){if(e.type!==this.eventType)return!1;if(this.keyModifiers.length===0)return!0;const i=e.modifiers;for(const r of this.keyModifiers)if(!i.has(r))return!1;return!0}},Ls=class{constructor(e){this._manager=null,this._incoming={},this._outgoing={},this._incomingEventMatches=null,this._incomingEventTypes=null,this._outgoingEventTypes=null,this._hasSideEffects=e}get incomingEventMatches(){if(!this._incomingEventMatches){this._incomingEventMatches=[];for(const e in this._incoming){const i=this._incoming[e];for(const r of i)this._incomingEventMatches.push(r.match)}}return this._incomingEventMatches}get incomingEventTypes(){return this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map(e=>e.eventType)),this._incomingEventTypes}get outgoingEventTypes(){return this._outgoingEventTypes||(this._outgoingEventTypes=Object.keys(this._outgoing)),this._outgoingEventTypes}get hasSideEffects(){return this._hasSideEffects}get hasPendingInputs(){return!1}onInstall(e){this._manager||(e.setEventCallback(i=>this._handleEvent(i)),e.setUninstallCallback(()=>this._onUninstall()),this._manager=e)}onUninstall(){}registerIncoming(e,i,r){let n;typeof i=="function"?(r=i,n=[]):n=i||[];const s=typeof e=="string"?new V6e(e,n):e,a=()=>{this._incomingEventTypes=null,this._incomingEventMatches=null},o=h=>{const f=this._incoming[h.match.eventType];if(f){const g=f.indexOf(h);f.splice(g,1),a(),this._manager&&this._manager.updateDependencies()}},l=new B6e(s,r,{onPause:o,onRemove:o,onResume:h=>{const f=this._incoming[h.match.eventType];f&&!f.includes(h)&&(f.push(h),a(),this._manager&&this._manager.updateDependencies())}});let c=this._incoming[s.eventType];return c||(c=[],this._incoming[s.eventType]=c),c.push(l),a(),this._manager&&this._manager.updateDependencies(),l}registerOutgoing(e){if(this._outgoing[e])throw new Error("There is already a callback registered for this outgoing InputEvent: "+e);const i=new U6e(e,{onEmit:(r,n,s,a)=>{this._manager?.emit(r.eventType,n,s,a)},onRemove:r=>{delete this._outgoing[r.eventType],this._manager?.updateDependencies()}});return this._outgoing[e]=i,this._outgoingEventTypes=null,this._manager&&this._manager.updateDependencies(),i}startCapturingPointer(e){this._manager?.setPointerCapture(e,!0)}stopCapturingPointer(e){this._manager?.setPointerCapture(e,!1)}refreshHasPendingInputs(){this._manager?.refreshHasPendingInputs()}_onUninstall(){this._manager&&(this.onUninstall(),this._manager=null)}_handleEvent(e){const i=this._incoming[e.type];if(i){for(const r of i)if(r.match.matches(e)&&(r.callback?.(e),e.shouldStopPropagation()))break}}},B6e=class{constructor(e,i,r){this.match=e,this._callback=i,this._handler=r}pause(){this._handler.onPause(this)}resume(){this._handler.onResume(this)}remove(){this._handler.onRemove(this)}get callback(){return this._callback}},U6e=class{constructor(e,i){this.eventType=e,this._removed=!1,this._handler=i}emit(e,i,r){this._removed||this._handler.onEmit(this,e,i,r)}remove(){this._removed=!0,this._handler.onRemove(this)}},H6e=class extends Ls{constructor(e){super(!0),this._onChange=e,this._value="mouse",this._x=null,this._y=null,this._id=null,this.registerIncoming("pointer-move",i=>this._update(i.data))}_update(e){const i=e.native.pointerType==="touch"?"touch":"mouse",{x:r,y:n,native:{pointerId:s}}=e;i===this._value&&this._x===r&&this._y===n&&this._id===s||(this._value=i,this._x=r,this._y=n,this._id=s,this._onChange(s,i,r,n))}},G6e=class extends Ls{get multiTouchActive(){return this._multiTouchActive.value}constructor(){super(!0),this._activeTouchPointerIds=new Set,this._multiTouchActive=q$(!1),this._onPointerAdd=({data:e})=>{e.pointerType==="touch"&&(this._activeTouchPointerIds.add(e.native.pointerId),this._update())},this._onPointerRemove=({data:e})=>{e.pointerType==="touch"&&(this._activeTouchPointerIds.delete(e.native.pointerId),this._update())},this.registerIncoming("pointer-down",this._onPointerAdd),this.registerIncoming("pointer-up",this._onPointerRemove),this.registerIncoming("pointer-capture-lost",this._onPointerRemove),this.registerIncoming("pointer-cancel",this._onPointerRemove)}_update(){this._multiTouchActive.value=this._activeTouchPointerIds.size>1}},q6e=class{constructor(e,i){this._owner=i,this._properties={},this._afterDispatchHandle=null;for(const r in e){const n=e[r],s=new lpe(n,void 0,void 0,2,2);this._properties[r]={pool:s,acquired:[]}}this._afterDispatchHandle=fAe(()=>this._release())}destroy(){this._afterDispatchHandle&&(this._afterDispatchHandle.remove(),this._afterDispatchHandle=null);for(const e in this._properties){const i=this._properties[e];for(const r of i.acquired)rie(r)||i.pool.release(r);i.pool.destroy(),i.pool=null,i.acquired=null}this._properties=null,this._owner=null}get(e){const i=this._owner._get(e),r=this._properties[e];let n=r.pool.acquire();for(r.acquired.push(n);n===i;)n=r.pool.acquire(),r.acquired.push(n);return Spe(),n}_release(){for(const e in this._properties){const i=this._properties[e];let r=0;for(const n of i.acquired)rie(n)?i.acquired[r++]=n:i.pool.release(n);i.acquired.length=r}}},W6e=class{constructor(){this.id=0,this.type="mouse",this.location=Ps()}},nd=class extends lt{constructor(e){super(e),this._pointerCaptures=new Map,this._nameToGroup={},this._handlers=[],this._handlersPriority=[],this._currentPropagation=null,this._updateDependenciesAfterPropagation=!1,this._sourceEvents=new Set,this._keyModifiers=new Set,this._activeKeyModifiers=new Set,this._stoppedPropagationEventIds=new Set,this.primaryKey=Tbe,this._propertiesPool=new q6e({latestPointerInfo:()=>new W6e},this),this._latestPointerInfo=void 0,this._paused=!1,this._testTimestamp=void 0}initialize(){this.eventSource.onEventReceived=this._onEventReceived.bind(this),this._installRecognizers()}destroy(){const e=Object.keys(this._nameToGroup);for(const i of e)this.uninstallHandlers(i);this.eventSource.destroy(),this._currentPropagation=null,this._propertiesPool.destroy()}get hasPendingInputs(){return this._handlers.some(e=>e.handler.hasPendingInputs)}get multiTouchActive(){return this._multiTouchHandler.multiTouchActive}get latestPointerInfo(){return this._latestPointerInfo}get updating(){return this.hasPendingInputs||this._paused}installHandlers(e,i,r=Vm.INTERNAL){if(this._nameToGroup[e]||i.length===0)return;const n={name:e,handlers:i.map(s=>({handler:s,active:!0,removed:!1,priorityIndex:0,groupPriority:r,eventCallback:null,uninstallCallback:null}))};this._nameToGroup[e]=n;for(let s=n.handlers.length-1;s>=0;s--){const a=n.handlers[s];this._handlers.push(a),a.handler.onInstall({updateDependencies:()=>{this.updateDependencies()},emit:(o,l,c,h,f)=>{this._emitInputEvent(a.priorityIndex+1,o,l,c,f,h)},setPointerCapture:(o,l)=>{this._setPointerCapture(n,a,o,l)},setEventCallback:o=>{a.eventCallback=o},setUninstallCallback:o=>{a.uninstallCallback=o},refreshHasPendingInputs:()=>{this.notifyChange("hasPendingInputs")}})}this.updateDependencies()}uninstallHandlers(e){const i=this._nameToGroup[e];i?(i.handlers.forEach(r=>{r.removed=!0,r.uninstallCallback?.()}),delete this._nameToGroup[e],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):$e.getLogger(this).error("There is no InputHandler group registered under the name `"+e+"`")}hasHandlers(e){return this._nameToGroup[e]!==void 0}isModifierKeyDown(e){return this._activeKeyModifiers.has(e)}updateDependencies(){if(this._currentPropagation)return void(this._updateDependenciesAfterPropagation=!0);this._updateDependenciesAfterPropagation=!1;const e=new Set,i=new Set;this._handlersPriority=[];for(let r=this._handlers.length-1;r>=0;r--){const n=this._handlers[r];n.priorityIndex=r,this._handlersPriority.push(n)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(let r=this._handlersPriority.length-1;r>=0;r--){const n=this._handlersPriority[r];n.priorityIndex=r;let s=n.handler.hasSideEffects;if(!s){for(const a of n.handler.outgoingEventTypes)if(e.has(a)){s=!0;break}}if(s)for(const a of n.handler.incomingEventMatches){e.add(a.eventType);for(const o of a.keyModifiers)j6e(o)||i.add(o)}n.active=s}this._sourceEvents=e,this._keyModifiers=i,this._pointerCaptures.size>0&&this._sourceEvents.add("pointer-capture-lost"),this._keyModifiers.size>0&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up")),this.eventSource&&(this.eventSource.activeEvents=this._sourceEvents)}_setLatestPointer(e,i,r,n){const s=this._latestPointerInfo;if(s==null||s.id!==e||s.type!==i||s.location.x!==r||s.location.y!==n){const a=this._propertiesPool.get("latestPointerInfo");a.id=e,a.type=i,a.location.x=r,a.location.y=n,this._latestPointerInfo=a}}_onEventReceived(e,i){if(e==="pointer-capture-lost"){const s=i;this._pointerCaptures.delete(s.native.pointerId)}this._updateKeyModifiers(e,i);const r=this._testTimestamp??i.native?.timestamp,n=i.native?.cancelable;this._emitInputEventFromSource(e,i,r,n)}_updateKeyModifiers(e,i){if(!i)return;let r=!1;const n=()=>{r||(this._activeKeyModifiers=new Set(this._activeKeyModifiers),r=!0)},s=(o,l)=>{l&&!this._activeKeyModifiers.has(o)?(n(),this._activeKeyModifiers.add(o)):!l&&this._activeKeyModifiers.has(o)&&(n(),this._activeKeyModifiers.delete(o))};if(e==="key-down"||e==="key-up"){const o=i.key;this._keyModifiers.has(o)&&s(o,e==="key-down")}const a=i.native;s("Alt",!!a?.altKey),s("Control",!!a?.ctrlKey),s("Ctrl",!!a?.ctrlKey),s("Shift",!!a?.shiftKey),s("Meta",!!a?.metaKey),s("Primary",this._activeKeyModifiers.has(this.primaryKey))}_installRecognizers(){this._latestPointerHandler=new H6e((e,i,r,n)=>this._setLatestPointer(e,i,r,n)),this._multiTouchHandler=new G6e,this.installHandlers("input-manager-logic",[this._latestPointerHandler,this._multiTouchHandler],Vm.ALWAYS),this.recognizers.length>0&&this.installHandlers("default",this.recognizers,Vm.INTERNAL)}_setPointerCapture(e,i,r,n){const s=e.name+"-"+i.priorityIndex,a=this._pointerCaptures.get(r.pointerId)||new Set;this._pointerCaptures.set(r.pointerId,a),n?(a.add(s),a.size===1&&this.eventSource&&this.eventSource.setPointerCapture(r,!0)):a.has(s)&&(a.delete(s),a.size===0&&(this._pointerCaptures.delete(r.pointerId),this.eventSource&&this.eventSource.setPointerCapture(r,!1)))}_garbageCollectRemovedHandlers(){this._handlers=this._handlers.filter(e=>!e.removed),this.updateDependencies()}_emitInputEventFromSource(e,i,r,n){this._emitInputEvent(0,e,i,r,n)}_emitInputEvent(e,i,r,n,s,a){const o=n??this._currentPropagation?.timestamp??performance.now(),l=s??!1,c={event:new Y6e(i,r,o,a||this._activeKeyModifiers,l),priorityIndex:e};this._currentPropagation?this._currentPropagation.events.push(c):this._doNewPropagation(c)}_doNewPropagation(e){this._currentPropagation={events:new CI,currentHandler:null,needsHandlerGarbageCollect:!1,timestamp:e.event.timestamp},this._currentPropagation.events.push(e),this._continuePropagation()}_continuePropagation(){this._paused=!1;const e=this._currentPropagation;if(e){for(;e.events.length>0;){const{event:i,priorityIndex:r}=e.events.pop(),n=i.data?.eventId;if(!(n!=null&&this._stoppedPropagationEventIds.has(n)))for(e.currentHandler=this._handlersPriority[r];e.currentHandler;){if(e.currentHandler.removed)e.needsHandlerGarbageCollect=!0;else{if(e.currentHandler.active&&!i.shouldStopPropagation()&&e.currentHandler.eventCallback?.(i),i.shouldStopPropagation()){n!=null&&this._stoppedPropagationEventIds.add(n);break}if(i.shouldPausePropagation(()=>this._continuePropagation()))return void this._pausePropagation({event:i,priorityIndex:e.currentHandler.priorityIndex+1})}e.currentHandler=this._handlersPriority[e.currentHandler.priorityIndex+1]}}e.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers(),this.hasPendingInputs||this._stoppedPropagationEventIds.clear(),this._currentPropagation=null,this._updateDependenciesAfterPropagation&&this.updateDependencies()}}_pausePropagation(e){const i=new CI;i.push(e);const r=this._currentPropagation;if(r){for(;r.events.length;)i.push(r.events.pop());r.events=i,r.currentHandler=null,this._paused=!0}}_compareHandlerPriority(e,i){if(e.handler.hasSideEffects!==i.handler.hasSideEffects)return e.handler.hasSideEffects?1:-1;if(e.groupPriority!==i.groupPriority)return e.groupPriority>i.groupPriority?-1:1;for(const r of e.handler.incomingEventMatches)for(const n of i.handler.incomingEventMatches){if(r.eventType!==n.eventType)continue;const s=r.keyModifiers.filter(a=>n.keyModifiers.includes(a));if(s.length===r.keyModifiers.length!=(s.length===n.keyModifiers.length))return r.keyModifiers.length>n.keyModifiers.length?-1:1}return e.priorityIndex>i.priorityIndex?-1:1}_sortHandlersPriority(e){const i=[];for(const r of e){let n=0;for(;n<i.length&&this._compareHandlerPriority(r,i[n])>=0;)n++;i.splice(n,0,r)}return i}get test(){}};d([m({readOnly:!0})],nd.prototype,"hasPendingInputs",null),d([m({constructOnly:!0})],nd.prototype,"eventSource",void 0),d([m({constructOnly:!0})],nd.prototype,"recognizers",void 0),d([m()],nd.prototype,"multiTouchActive",null),d([m()],nd.prototype,"_latestPointerInfo",void 0),d([m()],nd.prototype,"latestPointerInfo",null),d([m()],nd.prototype,"_paused",void 0),d([m({readOnly:!0})],nd.prototype,"updating",null),nd=d([U("esri.views.input.InputManager")],nd);let Y6e=class{constructor(e,i,r,n,s){this.type=e,this.data=i,this.timestamp=r,this.modifiers=n,this.cancelable=s,this._propagationState=0,this._resumeCallback=null}stopPropagation(){this._propagationState|=1}shouldStopPropagation(){return!!(1&this._propagationState)}defer(e){this._propagationState|=2;const i=(r,n)=>{this._propagationState&=-3;const s=this._resumeCallback;if(this._resumeCallback=null,s&&s(),n)throw r;return r};return(typeof e=="function"?e():e).then(r=>i(r,!1),r=>i(r,!0))}shouldPausePropagation(e){return!!(2&this._propagationState)&&(this._resumeCallback=e,!0)}preventDefault(){this.data.native.preventDefault()}};const Vm={ALWAYS:1,DEFAULT:0,TOOL:-1,WIDGET:-2,INTERNAL:-3},Z6e=t=>{const e=t;let i=class extends e{constructor(){super(...arguments),this._popupSetupTask=null,this.popup={},this.popupEnabled=!0}initialize(){this.addHandles([ze(()=>[this.ui,this.popup,this.popupElement],([r,n,s],a)=>{const[o,l,c]=a??[];L6e(this,[r,n,s],[o,l,c])},Ta),this.on("click",r=>{this.popup&&this.popupEnabled&&(r.pointerType!=="mouse"||r.button===0)&&D6e(this,r)},Vm.WIDGET)]),f_(()=>this.ready&&this.popupEnabled&&!this.updating).then(()=>fe(()=>import("./Popup-DiGKMLwd.js").then(r=>r.P),__vite__mapDeps([147,148,149,150,151,152,153,154,57,55,56,15,18,155,156,157,71,158])))}destroy(){this.destroyed||this.closePopup()}async openPopup(r){if(Tp(this.popup))return this.popup.open(r);if(this.popupElement&&Zm(this.popupElement))this.popupElement.open(r).catch(()=>{});else try{if(await this.setupPopup(),!this.popup)return void $e.getLogger(this).error(new ee("view:null-popup","Popup is null and can't be opened"));R6e(this,r)}catch{}}closePopup(){this._popupSetupTask?.abort(),Sbe(this.popup,this.popupElement)}async fetchPopupFeatures(r,n){return await this.when(),this._popupHitsToFeatures(await this._getPopupHits(r,n),n)}async setupPopup(){if(this._popupSetupTask?.abort(),this.popup&&!Tp(this.popup))return this._popupSetupTask=JM(async r=>{if(!this.popupEnabled||!Zm(this.popupElement))if(this.dependencies.popup&&typeof this.dependencies.popup=="function")await this.dependencies.popup(),sr(r),customElements.get("arcgis-popup")||$e.getLogger(this).error(new ee("view:undefined-popup-element","`arcgis-popup` custom element is undefined and can't be opened")),this.popupElement=document.createElement("arcgis-popup");else{const{default:n}=await fe(()=>import("./Popup-DiGKMLwd.js").then(a=>a.P),__vite__mapDeps([147,148,149,150,151,152,153,154,57,55,56,15,18,155,156,157,71,158]));if(sr(r),!this.popup||Tp(this.popup))return;const s=this.popup;if("open"in s||"close"in s){const{open:a,close:o,...l}=s;this.popup=new n({...l})}else this.popup=new n(s)}}),this._popupSetupTask.promise}async _popupHitsToFeatures({location:r,hits:n},s){const a=[],o=[];let l=!1;const c=GMe(s,ve("popup-view-fetch-timeout")??J6e),h=y=>{const b=new X6e(y);return o.push(b),a.push(b.promise),b},f=y=>{const b=o.at(-1);return b&&b.layerView===y&&!l?b:h(y)};for(const y of n)"graphic"in y?(f(y.layerView).graphics.push(y.graphic),l=!1):(a.push(y.layerView.fetchPopupFeaturesAtLocation(y.mapPoint,c)),l=!0);o.forEach(y=>y.resolve(c));const g=HMe(a).then(y=>y.filter(b=>!!b).flat());return{pendingFeatures:a,allGraphicsPromise:g,location:r}}async _getPopupHits(r,n){const{hits:s,location:a}=await this.popupHitTest(r);sr(n);const o=[];for(const l of s)if("graphic"in l){if(this._isValidPopupGraphic(l.graphic,n)){const c=this._isValidPopupGraphicsLayerView(l.layerView)?l.layerView:void 0;o.push({graphic:l.graphic,layerView:c})}}else this._isValidPopupLocationLayerView(l.layerView)&&o.push({mapPoint:l.mapPoint,layerView:l.layerView});return{hits:o,location:a}}_isValidPopupGraphic(r,n){return r&&!!r.getEffectivePopupTemplate(n?.defaultPopupTemplateEnabled)}_isValidPopupGraphicsLayerView(r){return!r||(!("layer"in r)||!r.suspended)&&"fetchPopupFeaturesFromGraphics"in r}_isValidPopupLocationLayerView(r){return(!("layer"in r)||!r.suspended)&&"fetchPopupFeaturesAtLocation"in r}};return d([m()],i.prototype,"popup",void 0),d([m()],i.prototype,"popupElement",void 0),d([m()],i.prototype,"popupEnabled",void 0),i=d([U("esri.views.PopupView")],i),i};let X6e=class{constructor(e){this.layerView=e,this._resolver=Qs(),this.graphics=[]}get promise(){return this._resolver.promise}resolve(e){const{layerView:i,graphics:r,_resolver:n}=this;if(!i)return n.resolve(r),n.promise;let s;return i.fetchPopupFeaturesFromGraphics(r,e).catch(a=>(s=a,null)).then(a=>{a?n.resolve(a):n.reject(s)}),n.promise}};const J6e=5e3;async function KM(t,e){return await t.load(),K6e(t,e)}async function K6e(t,e){const i=[],r=(...s)=>{for(const a of s)a!=null&&(Array.isArray(a)?r(...a):We.isCollection(a)?a.forEach(o=>r(o)):RR(a)&&i.push(a))};e(r);let n=null;if(await M6e(i,async s=>{const a=await hN(Q6e(s)?s.loadAll():s.load());a.ok!==!1||n||(n=a)}),n)throw n.error;return t}function Q6e(t){return"loadAll"in t&&typeof t.loadAll=="function"}let Ff=class extends lt{constructor(e){super(e),this.portalItem=null}normalizeCtorArgs(e){return e?.portalItem&&e.path?{...e,path:Yne(e.path,e.portalItem)}:e}set path(e){e!=null&&_l(e)?$e.getLogger(this).error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",e)}_castPath(e){return Yne(e,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get cdnUrl(){return this.portalItem&&this.path?`${this.portalItem.itemCdnUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(e="json",i){const r=this.cdnUrl;if(r==null)throw new ee("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal.request(r,{responseType:e,query:{token:this.portalItem.apiKey,_ts:i?.cacheBust?Date.now():null},signal:i?.signal})}async update(e,i){const{addOrUpdateResources:r}=await fe(()=>import("./resourceUtils-2WVkU8eQ.js"),[]);return await r(this.portalItem,[{resource:this,content:e,compress:i?.compress,access:i?.access}],"update",i),this}hasPath(){return this.path!=null}};function Yne(t,e){return t==null?t:(t=t.replace(/^\/+/,""),e!=null&&_l(t)&&(t=sY(t,e.itemUrl)),t?.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}d([m()],Ff.prototype,"portalItem",void 0),d([m({type:String,value:null})],Ff.prototype,"path",null),d([Ii("path")],Ff.prototype,"_castPath",null),d([m({type:String,readOnly:!0})],Ff.prototype,"url",null),d([m({type:String,readOnly:!0})],Ff.prototype,"cdnUrl",null),d([m({type:String,readOnly:!0})],Ff.prototype,"itemRelativeUrl",null),Ff=d([U("esri.portal.PortalItemResource")],Ff);let j0=class extends lt{constructor(e){super(e),this.created=null,this.rating=null}};d([m({type:Date})],j0.prototype,"created",void 0),d([m()],j0.prototype,"rating",void 0),j0=d([U("esri.portal.PortalRating")],j0);var Gb;const eBe=new Set(["3DTiles Service","CSV","Feature Collection","Feature Service","Feed","GeoJson","Group Layer","Image Service","KML","Knowledge Graph Layer","Map Service","Media Layer","Scene Service","Stream Service","Video Service","Vector Tile Service","WCS","WFS","WMS","WMTS"]),tBe=new Set(["KML","GeoJson","CSV"]);let Mt=Gb=class extends rg(Fv){static from(t){return TT(Gb,t)}constructor(t){super(t),this.access=null,this.accessInformation=null,this.apiKey=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.classification=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.isOrgItem=!1,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.sourceUrl=null,this.spatialReference=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null}destroy(){this.portal=null}get displayName(){const t=this.type,e=this.typeKeywords||[];let i=t;return t==="Feature Service"||t==="Feature Collection"?i=e.includes("Table")?"Table":e.includes("Route Layer")?"Route Layer":e.includes("Markup")?"Markup":"Feature Layer":t==="Image Service"?i=e.includes("Elevation 3D Layer")?"Elevation Layer":e.includes("Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":t==="Scene Service"?i="Scene Layer":t==="Video Service"?i="Video Layer":t==="Scene Package"?i="Scene Layer Package":t==="Stream Service"?i="Feature Layer":t==="Geoprocessing Service"?i=e.includes("Web Tool")?"Tool":"Geoprocessing Service":t==="Geoenrichment Service"?i="GeoEnrichment Service":t==="Geocoding Service"?i="Locator":t==="Microsoft Powerpoint"?i="Microsoft PowerPoint":t==="GeoJson"?i="GeoJSON":t==="Globe Service"?i="Globe Layer":t==="Vector Tile Service"?i="Tile Layer":t==="netCDF"?i="NetCDF":t==="Map Service"?i=e.includes("Spatiotemporal")||!e.includes("Hosted Service")&&!e.includes("Tiled")||e.includes("Relational")?"Map Image Layer":"Tile Layer":t?.toLowerCase().includes("add in")?i=t.replaceAll(/(add in)/gi,"Add-In"):t==="datastore catalog service"?i="Big Data File Share":t==="Compact Tile Package"?i="Tile Package (tpkx)":t==="Raster function template"?i="Raster Function Template":t==="OGCFeatureServer"?i="OGC Feature Layer":t==="web mapping application"&&e.includes("configurableApp")?i="Instant App":t==="Insights Page"?i="Insights Report":t==="Excalibur Imagery Project"?i="Excalibur Project":t==="3DTiles Service"?i="3D tiles layer":t==="3DTiles Package"&&(i="3D tiles package"),i}readExtent(t){return t&&t.length?new Wt(t[0][0],t[0][1],t[1][0],t[1][1]):null}get iconUrl(){const t=this.type?.toLowerCase()||"",e=this.typeKeywords||[],i="esri/images/portal/",r="16";let n,s=!1,a=!1,o=!1,l=!1,c=!1,h=!1,f=!1,g=!1;return t.indexOf("service")>0||t==="feature collection"||t==="kml"||t==="wms"||t==="wmts"||t==="wfs"?(s=e.includes("Hosted Service"),t==="feature service"||t==="feature collection"||t==="kml"||t==="wfs"?(a=e.includes("Table"),o=e.includes("Route Layer"),l=e.includes("Markup"),c=e.includes("Spatiotemporal"),h=e.includes("UtilityNetwork"),n=c&&a?"spatiotemporaltable":a?"table":o?"routelayer":l?"markup":c?"spatiotemporal":h?"utilitynetwork":s?"featureshosted":"features"):t==="map service"||t==="wms"||t==="wmts"?(c=e.includes("Spatiotemporal"),f=e.includes("Relational"),n=c||f?"mapimages":s||e.includes("Tiled")||t==="wmts"?"maptiles":"mapimages"):n=t==="scene service"?e.includes("Line")?"sceneweblayerline":e.includes("3DObject")?"sceneweblayermultipatch":e.includes("Point")?"sceneweblayerpoint":e.includes("IntegratedMesh")?"sceneweblayermesh":e.includes("PointCloud")?"sceneweblayerpointcloud":e.includes("Polygon")?"sceneweblayerpolygon":e.includes("Building")?"sceneweblayerbuilding":e.includes("Voxel")?"sceneweblayervoxel":"sceneweblayer":t==="image service"?e.includes("Elevation 3D Layer")?"elevationlayer":e.includes("Tiled Imagery")?"tiledimagerylayer":"imagery":t==="stream service"?"streamlayer":t==="vector tile service"?"vectortile":t==="datastore catalog service"?"datastorecollection":t==="geocoding service"?"geocodeservice":t==="video service"?e.includes("Live Stream")?"livestreamvideolayer":"videolayer":t==="geoprocessing service"?e.includes("Web Tool")?"tool":"layers":t==="geodata service"?"geodataservice":t==="3dtiles service"?e.includes("3DObject")?"3dobjecttileslayer":e.includes("IntegratedMesh")?"integratedmeshtileslayer":e.includes("GaussianSplat")?"gaussiansplatlayer":"3dtileslayer":"layers"):t==="web map"||t==="cityengine web scene"?n="maps":t==="web scene"?n=e.includes("ViewingMode-Local")?"webscenelocal":"websceneglobal":t==="web mapping application"&&e.includes("configurableApp")?n="instantapps":t==="web mapping application"||t==="mobile application"||t==="application"||t==="operation view"||t==="desktop application"?n="apps":t==="map document"||t==="map package"||t==="published map"||t==="scene document"||t==="globe document"||t==="basemap package"||t==="mobile basemap package"||t==="mobile map package"||t==="project package"||t==="project template"||t==="pro map"||t==="layout"||t==="layer"&&e.includes("ArcGIS Pro")||t==="explorer map"&&e.indexOf("Explorer Document")?n="mapsgray":t==="service definition"||t==="shapefile"||t==="cad drawing"||t==="geojson"||t==="netcdf"||t==="administrative report"?n="datafiles":t==="360 vr experience"?n="360vr":t==="explorer add in"||t==="desktop add in"||t==="windows viewer add in"||t==="windows viewer configuration"?n="appsgray":t==="arcgis pro add in"||t==="arcgis pro configuration"?n="addindesktop":t==="pdf"?n="pdf":t==="microsoft word"?n="word":t==="microsoft excel"?n="excel":t==="microsoft powerpoint"?n="ppt":t==="rule package"||t==="file geodatabase"||t==="sqlite geodatabase"||t==="csv collection"||t==="kml collection"||t==="windows mobile package"||t==="map template"||t==="desktop application template"||t==="gml"||t==="arcpad package"||t==="code sample"||t==="document link"||t==="earth configuration"||t==="operations dashboard add in"||t==="rules package"||t==="workflow manager package"||t==="explorer map"&&e.includes("Explorer Mapping Application")||e.includes("Document")?n="datafilesgray":t==="network analysis service"||t==="geoprocessing service"||t==="geodata service"||t==="geometry service"||t==="geoprocessing package"||t==="locator package"||t==="geoprocessing sample"||t==="workflow manager service"?n="toolsgray":t==="layer"||t==="layer package"||t==="explorer layer"?n="layersgray":t==="analysis model"?n="analysismodel":t==="scene package"?n="scenepackage":t==="3dtiles package"?n="3dtileslayerpackage":t==="3dtiles service"?n="3dtileslayer":t==="mobile scene package"?n="mobilescenepackage":t==="tile package"||t==="compact tile package"?n="tilepackage":t==="task file"?n="taskfile":t==="report template"?n="report-template":t==="statistical data collection"?n="statisticaldatacollection":t==="insights workbook"?n="workbook":t==="insights model"?n="insightsmodel":t==="insights page"?n="insightspage":t==="insights theme"?n="insightstheme":t==="hub initiative"?n="hubinitiative":t==="hub page"?n="hubpage":t==="hub site application"?n="hubsite":t==="hub event"?n="hubevent":t==="hub project"?n="hubproject":t==="relational database connection"?n="relationaldatabaseconnection":t==="big data file share"?n="datastorecollection":t==="image collection"?n="imagecollection":t==="desktop style"?n="desktopstyle":t==="style"?n=e.includes("Dictionary")?"dictionarystyle":"style":t==="dashboard"?n="dashboard":t==="raster function template"?n="rasterprocessingtemplate":t==="vector tile package"?n="vectortilepackage":t==="ortho mapping project"?n="orthomappingproject":t==="ortho mapping template"?n="orthomappingtemplate":t==="solution"?n="solutions":t==="geopackage"?n="geopackage":t==="deep learning package"?n="deeplearningpackage":t==="real time analytic"?n="realtimeanalytics":t==="reality mapping project"?n="realitymappingproject":t==="big data analytic"?n="bigdataanalytics":t==="feed"?n="feed":t==="excalibur imagery project"?n="excaliburimageryproject":t==="notebook"?n="notebook":t==="storymap"?n="storymap":t==="survey123 add in"?n="survey123addin":t==="mission"?n="mission":t==="mission report"?n="missionreport":t==="mission template"?n="missiontemplate":t==="quickcapture project"?n="quickcaptureproject":t==="pro report"?n="proreport":t==="pro report template"?n="proreporttemplate":t==="urban model"?n="urbanmodel":t==="urban project"?n="urbanproject":t==="web experience"?n="experiencebuilder":t==="web experience template"?n="webexperiencetemplate":t==="experience builder widget"?n="experiencebuilderwidget":t==="experience builder widget package"?n="experiencebuilderwidgetpackage":t==="workflow"?n="workflow":t==="kernel gateway connection"?n="kernelgatewayconnection":t==="insights script"?n="insightsscript":t==="hub initiative template"?n="hubinitiativetemplate":t==="storymap theme"?n="storymaptheme":t==="knowledge graph"?n="knowledgegraph":t==="knowledge graph layer"?n="knowledgegraphlayer":t==="knowledge studio project"?n="knowledgestudio":t==="native application"?n="nativeapp":t==="native application installer"?n="nativeappinstaller":t==="web link chart"?n="linkchart":t==="knowledge graph web investigation"?n="investigation":t==="ogcfeatureserver"?n="features":t==="pro presentation"?n="propresentation":t==="pro project"?n="proproject":t==="insights workbook package"?n="insightsworkbookpackage":t==="apache parquet"?n="apacheparquet":t==="notebook code snippet library"?n="notebookcodesnippets":t==="suitability model"?n="suitabilitymodel":t==="esri classifier definition"?n="classifierdefinition":t==="esri classification schema"?n="classificationschema":t==="insights data engineering workbook"?n="dataengineeringworkbook":t==="insights data engineering model"?n="dataengineeringmodel":t==="deep learning studio project"?n="deeplearningproject":t==="discussion"?n="discussion":t==="allsource project"?n="allsourceproject":t==="api key"?n="apikey":t==="data pipeline"?n="datapipelines":t==="group layer"?(g=e.includes("Map"),n=g?"layergroup2d":"layergroup"):n=t==="media layer"?"onlinemedialayer":t==="form"?e.includes("Survey123")?"survey":"datafilesgray":t==="csv"?"csv":t==="image"?"image":t==="xr experience"?"xrexperience":"maps",n?Ur(i+n+r+".png"):null}get isLayer(){return this.type!=null&&eBe.has(this.type)}get itemCdnUrl(){return uY(this.itemUrl)}get itemPageUrl(){const t=this.portal?.itemPageUrl;return t&&this.id?`${t}?id=${this.id}`:null}get itemUrl(){const t=this.portal?.restUrl;return t&&this.id?`${t}/content/items/${this.id}`:null}get loaded(){return super.loaded}get thumbnailUrl(){const t=this.itemUrl,e=this.thumbnail;return t&&e?this.portal?.normalizeUrl(`${t}/info/${e}?f=json`)??null:null}get userItemUrl(){const t=this.portal?.restUrl;if(!t)return null;const e=this.owner||this.portal?.user?.id;return e?`${t}/content/users/${this.ownerFolder?`${e}/${this.ownerFolder}`:e}/items/${this.id}`:null}load(t){const e=this.portal??(this.portal=Ue.getDefault()),i=e.load(t).then(()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?e.request(this.itemUrl,{signal:t!=null?t.signal:null,query:{token:this.apiKey}}):{}).then(r=>{this.sourceJSON=r,this.read(r)});return this.addResolvingPromise(i),Promise.resolve(this)}async addRating(t){const e={method:"post",query:{}},i=t instanceof j0?t.rating:t;return i==null||isNaN(i)||typeof t!="number"||(e.query.rating=i),this.portal?(await this.portal.request(this.itemUrl+"/addRating",e),new j0({rating:i,created:new Date})):null}clone(){const t={access:this.access,accessInformation:this.accessInformation,applicationProxies:de(this.applicationProxies),avgRating:this.avgRating,categories:de(this.categories),classification:de(this.classification),created:de(this.created),culture:this.culture,description:this.description,extent:de(this.extent),groupCategories:de(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:de(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:de(this.screenshots),size:this.size,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:de(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:de(this.typeKeywords),url:this.url};this.loaded&&(t.loadStatus="loaded");const e=new Gb({sourceJSON:this.sourceJSON}).set(t);return e._set("isOrgItem",this.isOrgItem),e}createPostQuery(){const t=this.toJSON();for(const e of["tags","typeKeywords","categories"])t[e]=t[e]?.join(", ");for(const e of["extent","classification"]){const i=t[e];i&&(t[e]=JSON.stringify(i))}return t}async deleteRating(){await this.portal.request(this.itemUrl+"/deleteRating",{method:"post"})}fetchData(t="json",e){return this.portal.request(this.itemUrl+"/data",{responseType:t,...e,query:{token:this.apiKey}})}async fetchRating(t){const e=await this.portal.request(this.itemUrl+"/rating",{query:{token:this.apiKey},...t});return e.rating!=null?(e.created=new Date(e.created),new j0(e)):null}fetchRelatedItems(t,e){return this.portal.requestToTypedArray(this.itemUrl+"/relatedItems",{query:{...t,token:this.apiKey},...e},Gb)}getThumbnailUrl(t){let e=this.thumbnailUrl;return e&&t&&(e+=`&w=${t}`),e}reload(){return this.portal.request(this.itemUrl??"",{cacheBust:!0,query:{token:this.apiKey}}).then(t=>(this.applicationProxies&&!Object.hasOwn(t,"appProxies")&&(this.applicationProxies=null),this.sourceJSON=t,this.read(t),this))}update(t){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const e=t?.data,i={method:"post"};i.query=this.createPostQuery();for(const r in i.query)i.query[r]===null&&(i.query[r]="");return i.query.clearEmptyFields=!0,e!=null&&(typeof e=="string"?i.query.text=e:typeof e=="object"&&(i.query.text=JSON.stringify(e))),this.portal.request(`${this.userItemUrl}/update`,i).then(()=>this.reload())}):Promise.reject(new ee("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async copy(t){if(!this.id)throw new ee("portal:item-does-not-exist","The item does not exist yet");await this.load();const{portal:e,itemUrl:i}=this;await e.signIn();const{copyResources:r,folder:n,tags:s,title:a}=t||{},o={method:"post",query:{copyPrivateResources:r==="all",folder:typeof n=="string"?n:n?.id,includeResources:!!r,tags:s?.join(","),title:a}},{itemId:l}=await e.request(`${i}/copy`,o);return new Gb({id:l,portal:e})}updateThumbnail(t){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const e=t.thumbnail,i=t.filename,r={method:"post"};if(typeof e=="string")ng(e)?r.query={data:e}:r.query={url:oo(e)},i!=null&&(r.query.filename=i);else{const n=new FormData;i!=null?n.append("file",e,i):n.append("file",e),r.body=n}return this.portal.request(`${this.userItemUrl}/updateThumbnail`,r).then(()=>this.reload())}):Promise.reject(new ee("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(t={},e){const{fetchResources:i}=await fe(()=>import("./resourceUtils-2WVkU8eQ.js"),[]);return i(this,t,e)}async addResource(t,e,i){const{addOrUpdateResources:r}=await fe(()=>import("./resourceUtils-2WVkU8eQ.js"),[]);return t.portalItem=this,await r(this,[{resource:t,content:e,compress:i?.compress,access:i?.access}],"add",i),t}async removeResource(t,e){const{removeResource:i}=await fe(()=>import("./resourceUtils-2WVkU8eQ.js"),[]);if(t.portalItem&&t.portalItem.itemUrl!==this.itemUrl)throw new ee("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return i(this,t,e)}async removeAllResources(t){const{removeAllResources:e}=await fe(()=>import("./resourceUtils-2WVkU8eQ.js"),[]);return e(this,t)}resourceFromPath(t){return new Ff({portalItem:this,path:t})}toJSON(){const t=this.extent,e={accessInformation:this.accessInformation,categories:de(this.categories),classification:de(this.classification),created:this.created?.getTime(),description:this.description,extent:t&&[[t.xmin,t.ymin],[t.xmax,t.ymax]],id:this.id,isOrgItem:this.isOrgItem,licenseInfo:this.licenseInfo,modified:this.modified?.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:de(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:de(this.typeKeywords),url:this.url};return jW(e)}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");return new Gb({sourceJSON:t})}_getPostQuery(){const t=this.toJSON();for(const e in t)e==="tags"&&t[e]!==null&&(t[e]=t[e].join(", ")),e==="typeKeywords"&&t[e]!==null&&(t[e]=t[e].join(", ")),e==="extent"&&t[e]&&(t[e]=JSON.stringify(t[e]));return t}};d([m({type:["private","shared","org","public"]})],Mt.prototype,"access",void 0),d([m()],Mt.prototype,"accessInformation",void 0),d([m({type:String})],Mt.prototype,"apiKey",void 0),d([m({json:{read:{source:"appProxies"}}})],Mt.prototype,"applicationProxies",void 0),d([m()],Mt.prototype,"avgRating",void 0),d([m()],Mt.prototype,"categories",void 0),d([m()],Mt.prototype,"classification",void 0),d([m({type:Date})],Mt.prototype,"created",void 0),d([m()],Mt.prototype,"culture",void 0),d([m()],Mt.prototype,"description",void 0),d([m({readOnly:!0})],Mt.prototype,"displayName",null),d([m({type:Wt})],Mt.prototype,"extent",void 0),d([Ve("extent")],Mt.prototype,"readExtent",null),d([m()],Mt.prototype,"groupCategories",void 0),d([m({readOnly:!0})],Mt.prototype,"iconUrl",null),d([m()],Mt.prototype,"id",void 0),d([m({readOnly:!0})],Mt.prototype,"isLayer",null),d([m({type:Boolean,readOnly:!0})],Mt.prototype,"isOrgItem",void 0),d([m()],Mt.prototype,"itemControl",void 0),d([m({readOnly:!0})],Mt.prototype,"itemPageUrl",null),d([m({readOnly:!0})],Mt.prototype,"itemUrl",null),d([m()],Mt.prototype,"licenseInfo",void 0),d([m({type:Date})],Mt.prototype,"modified",void 0),d([m()],Mt.prototype,"name",void 0),d([m()],Mt.prototype,"numComments",void 0),d([m()],Mt.prototype,"numRatings",void 0),d([m()],Mt.prototype,"numViews",void 0),d([m()],Mt.prototype,"owner",void 0),d([m()],Mt.prototype,"ownerFolder",void 0),d([m({type:Ue})],Mt.prototype,"portal",void 0),d([m()],Mt.prototype,"screenshots",void 0),d([m()],Mt.prototype,"size",void 0),d([m()],Mt.prototype,"snippet",void 0),d([m()],Mt.prototype,"sourceJSON",void 0),d([m({type:String})],Mt.prototype,"sourceUrl",void 0),d([m({type:String})],Mt.prototype,"spatialReference",void 0),d([m()],Mt.prototype,"tags",void 0),d([m()],Mt.prototype,"thumbnail",void 0),d([m({readOnly:!0})],Mt.prototype,"thumbnailUrl",null),d([m()],Mt.prototype,"title",void 0),d([m()],Mt.prototype,"type",void 0),d([m()],Mt.prototype,"typeKeywords",void 0),d([m({type:String,json:{read(t,e){if(tBe.has(e.type)){const i=this.portal?.restUrl;t||=i&&this.id?`${i}/content/items/${this.id}/data`:null}return t}}})],Mt.prototype,"url",void 0),d([m({readOnly:!0})],Mt.prototype,"userItemUrl",null),Mt=Gb=d([U("esri.portal.PortalItem")],Mt);const kbe=Object.freeze(Object.defineProperty({__proto__:null,get default(){return Mt}},Symbol.toStringTag,{value:"Module"}));async function iBe(t){if(!t)return;const e=t.includes("-vector")?t.slice(0,t.indexOf("-vector")):t.includes("-3d")?t.slice(0,t.indexOf("-3d")):t,i=await Ome("esri/t9n/basemaps");return i[t]||i[e]}const R9={satellite:{id:"satellite",classic:!0,get thumbnailUrl(){return Ur("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",classic:!0,get thumbnailUrl(){return Ur("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/30d6b8271e1849cd9c3042060001f425/resources/styles/root.json",layerType:"VectorTileLayer",title:"Hybrid Reference Layer",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",classic:!0,get thumbnailUrl(){return Ur("esri/images/basemap/terrain.jpg")},baseMapLayers:[{id:"terrain-hillshade",url:"https://services.arcgisonline.com/ArcGIS/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1},{id:"terrain-base",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/33064a20de0c48d2bb61efa8faca93a8/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Terrain Base"},{id:"terrain-reference",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/14fbc125ccc9488888b014db09f35f67/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Reference Reference",isReference:!0}]},oceans:{id:"oceans",classic:!0,get thumbnailUrl(){return Ur("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/94329802cbfa44a18f423e6f1a0b875c/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},osm:{id:"osm",classic:!0,get thumbnailUrl(){return Ur("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",classic:!0,get thumbnailUrl(){return Ur("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get"dark-gray"(){return{...this["dark-gray-vector"],id:"dark-gray"}},"gray-vector":{id:"gray-vector",classic:!0,get thumbnailUrl(){return Ur("esri/images/basemap/gray-vector.jpg")},baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get gray(){return{...this["gray-vector"],id:"gray"}},"streets-vector":{id:"streets-vector",classic:!0,get thumbnailUrl(){return Ur("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},get streets(){return{...this["streets-vector"],id:"streets"}},"topo-vector":{id:"topo-vector",classic:!0,get thumbnailUrl(){return Ur("esri/images/basemap/topo-vector.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},get topo(){return{...this["topo-vector"],id:"topo"}},"streets-night-vector":{id:"streets-night-vector",classic:!0,get thumbnailUrl(){return Ur("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",classic:!0,get thumbnailUrl(){return Ur("esri/images/basemap/streets-relief.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",classic:!0,get thumbnailUrl(){return Ur("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"topo-3d":{id:"topo-3d",is3d:!0,get thumbnailUrl(){return Ur("esri/images/basemap/topo-3d.png")},baseMapLayers:[{id:"topo-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/1e7d1784d1ef4b79ba6764d0bd6c3150/resources/styles/root.json",layerType:"VectorTileLayer",title:"Topographic",visibility:!0,opacity:1},{id:"topo-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Open3D_Trees_v1/SceneServer",itemId:"9d3d89d42cfe4e2c9d108a2f0d518406",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Esri3D_Buildings_v1/SceneServer",itemId:"b8fec5af7dfe4866b1b8ac2d2800f282",layerType:"ArcGISSceneServiceLayer"}]},"navigation-3d":{id:"navigation-3d",is3d:!0,get thumbnailUrl(){return Ur("esri/images/basemap/navigation-3d.jpg")},baseMapLayers:[{id:"navigation-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/ccc904ff872b4144b94934e55e32784b/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation",visibility:!0,opacity:1},{id:"navigation-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Esri3D_Buildings_v1/SceneServer",itemId:"b8fec5af7dfe4866b1b8ac2d2800f282",layerType:"ArcGISSceneServiceLayer"}]},"streets-3d":{id:"streets-3d",is3d:!0,get thumbnailUrl(){return Ur("esri/images/basemap/streets-3d.png")},baseMapLayers:[{id:"streets-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/198298c4c64c4cb19de5b46aa00c198d/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"streets-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"streets-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Esri3D_Buildings_v1/SceneServer",itemId:"b8fec5af7dfe4866b1b8ac2d2800f282",layerType:"ArcGISSceneServiceLayer"}]},"osm-3d":{id:"osm-3d",is3d:!0,get thumbnailUrl(){return Ur("esri/images/basemap/osm-3d.png")},baseMapLayers:[{id:"osm-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/8628d259c9d14bdc848771c23c513940/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap",visibility:!0,opacity:1},{id:"osm-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Open3D_Trees_v1/SceneServer",itemId:"9d3d89d42cfe4e2c9d108a2f0d518406",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Open3D_Buildings_v1/SceneServer",itemId:"cd33b09dde0a419c986ca1a78a5fc06d",layerType:"ArcGISSceneServiceLayer"}]},"gray-3d":{id:"gray-3d",is3d:!0,get thumbnailUrl(){return Ur("esri/images/basemap/gray-3d.png")},baseMapLayers:[{id:"gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/01a14b466345455ba4176d2e6390db92/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Esri3D_Buildings_v1/SceneServer",itemId:"b8fec5af7dfe4866b1b8ac2d2800f282",layerType:"ArcGISSceneServiceLayer"}]},"navigation-dark-3d":{id:"navigation-dark-3d",itemId:"5a1365328b4943f09a54cf5fd1205707",is3d:!0,baseMapLayers:[{id:"navigation-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/451a1777ab3f4bf095fae24a117439d9/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation Dark"},{id:"navigation-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Esri3D_Buildings_v1/SceneServer",itemId:"b8fec5af7dfe4866b1b8ac2d2800f282",layerType:"ArcGISSceneServiceLayer"}]},"streets-dark-3d":{id:"streets-dark-3d",itemId:"8a4efa2c20484ec9b4557895e65736ff",is3d:!0,baseMapLayers:[{id:"streets-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/bc599b6d741a4ac084b7eea7bf8c5938/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Streets Night (for 3D)"},{id:"streets-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"streets-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Esri3D_Buildings_v1/SceneServer",itemId:"b8fec5af7dfe4866b1b8ac2d2800f282",layerType:"ArcGISSceneServiceLayer"}]},"dark-gray-3d":{id:"dark-gray-3d",itemId:"a8b7322a5fe94002bb0f5e0eeb0c5c18",is3d:!0,baseMapLayers:[{id:"dark-gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/4178f71acb934fb89f169e7d667c20c6/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Dark Gray Canvas (for 3D)"},{id:"dark-gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"dark-gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Esri3D_Buildings_v1/SceneServer",itemId:"b8fec5af7dfe4866b1b8ac2d2800f282",layerType:"ArcGISSceneServiceLayer"}]}};let Nf=class extends lt{constructor(e){super(e),this.apiKey=null,this.id=null,this.language=null,this.places=null,this.serviceUrl="https://basemapstyles-api.arcgis.com/arcgis/rest/services/styles/v2",this.worldview=null}get languageParameter(){const e=this.language;let i=e==="local"||e==="global"?e:Lme(e??xl())??"global";return i=i==="no"?"nb":i,i}};d([m()],Nf.prototype,"apiKey",void 0),d([m()],Nf.prototype,"id",void 0),d([m()],Nf.prototype,"language",void 0),d([m()],Nf.prototype,"places",void 0),d([m()],Nf.prototype,"serviceUrl",void 0),d([m()],Nf.prototype,"worldview",void 0),Nf=d([U("esri.support.BasemapStyle")],Nf);const rBe=Nf,Ebe=Symbol("BasemapInstance");function vIt(t){return t!=null&&typeof t=="object"&&Ebe in t}let Cbe=0;const sg=t=>{const e=t;let i=class extends e{constructor(...r){super(...r),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+Cbe++})}};return i=d([U("esri.core.Identifiable")],i),i},CZ=t=>{const e=t;let i=class extends e{constructor(...r){super(...r),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Cbe++})}};return i=d([U("esri.core.Identifiable.NumericIdentifiable")],i),i};sg(class{});async function nBe(t){const e="portalItem"in t?t:{portalItem:t},{fromItem:i}=await fe(async()=>{const{fromItem:r}=await Promise.resolve().then(()=>O0t);return{fromItem:r}},void 0);try{return await i(e)}catch(r){const n=e?.portalItem,s=n?.id||"unset",a=n?.portal?.url||yi.portalUrl;throw $e.getLogger("esri.layers.support.fromPortalItem").error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+a+"', id: '"+s+"')",r),r}}const z9={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8};function L6(t,e,i,r=_u){const n=new $l(kY(r)),s=mt.fromJSDate(t,{zone:n}),a=i==="decades"||i==="centuries"?"year":Mbe(i);return i==="decades"&&(e*=10),i==="centuries"&&(e*=100),s.plus({[a]:e}).toJSDate()}function bIt(t,e,i="milliseconds"){const r=t.getTime(),n=Ibe(e,i,"milliseconds");return new Date(r+n)}function Zne(t,e,i=_u){const r=new $l(kY(i)),n=mt.fromJSDate(t,{zone:r});if(e==="decades"||e==="centuries"){const a=n.startOf("year"),{year:o}=a,l=o-o%(e==="decades"?10:100);return a.set({year:l}).toJSDate()}const s=Mbe(e);return n.startOf(s).toJSDate()}function Ibe(t,e,i){return t===0?0:t*z9[e]/z9[i]}function wIt(t,e){return t&&e?t.intersection(e):t||e}function Mbe(t){switch(t){case"milliseconds":return"millisecond";case"seconds":return"second";case"minutes":return"minute";case"hours":return"hour";case"days":return"day";case"weeks":return"week";case"months":return"month";case"years":return"year"}}var Gc,d$;let nr=(d$=class extends _e{static get allTime(){return Xne}static get empty(){return sBe}static fromArray(e){return new Gc({start:e[0]!=null?new Date(e[0]):e[0],end:e[1]!=null?new Date(e[1]):e[1]})}constructor(e){super(e),this.end=null,this.start=null}readEnd(e,i){return i.end!=null?new Date(i.end):null}writeEnd(e,i){i.end=e?.getTime()??null}get isAllTime(){return this.equals(Gc.allTime)}get isEmpty(){return this.equals(Gc.empty)}readStart(e,i){return i.start!=null?new Date(i.start):null}writeStart(e,i){i.start=e?.getTime()??null}clone(){return new Gc({end:this.end,start:this.start})}equals(e){if(!e)return!1;const i=this.start?.getTime()??this.start,r=this.end?.getTime()??this.end,n=e.start?.getTime()??e.start,s=e.end?.getTime()??e.end;return i===n&&r===s}expandTo(e,i=_u){if(this.isEmpty||this.isAllTime)return this.clone();let r=this.start;r&&(r=Zne(r,e,i));let n=this.end;if(n){const s=Zne(n,e,i);n=n.getTime()===s.getTime()?s:L6(s,1,e,i)}return new Gc({start:r,end:n})}intersection(e){if(!e)return this.clone();if(this.isEmpty||e.isEmpty)return Gc.empty;if(this.isAllTime)return e.clone();if(e.isAllTime)return this.clone();const i=this.start?.getTime()??-1/0,r=this.end?.getTime()??1/0,n=e.start?.getTime()??-1/0,s=e.end?.getTime()??1/0;let a,o;return n>=i&&n<=r?a=n:i>=n&&i<=s&&(a=i),r>=n&&r<=s?o=r:s>=i&&s<=r&&(o=s),a==null||o==null||isNaN(a)||isNaN(o)?Gc.empty:new Gc({start:a===-1/0?null:new Date(a),end:o===1/0?null:new Date(o)})}offset(e,i,r=_u){if(this.isEmpty||this.isAllTime)return this.clone();const n=new Gc,{start:s,end:a}=this;return s!=null&&(n.start=L6(s,e,i,r)),a!=null&&(n.end=L6(a,e,i,r)),n}toArray(){return this.isEmpty?[void 0,void 0]:[this.start?.getTime()??null,this.end?.getTime()??null]}union(e){if(!e||e.isEmpty)return this.clone();if(this.isEmpty)return e.clone();if(this.isAllTime||e.isAllTime)return Xne.clone();const i=this.start!=null&&e.start!=null?new Date(Math.min(this.start.getTime(),e.start.getTime())):null,r=this.end!=null&&e.end!=null?new Date(Math.max(this.end.getTime(),e.end.getTime())):null;return new Gc({start:i,end:r})}},Gc=d$,d$);d([m({type:Date,json:{write:{allowNull:!0}}})],nr.prototype,"end",void 0),d([Ve("end")],nr.prototype,"readEnd",null),d([qe("end")],nr.prototype,"writeEnd",null),d([m({readOnly:!0,json:{read:!1}})],nr.prototype,"isAllTime",null),d([m({readOnly:!0,json:{read:!1}})],nr.prototype,"isEmpty",null),d([m({type:Date,json:{write:{allowNull:!0}}})],nr.prototype,"start",void 0),d([Ve("start")],nr.prototype,"readStart",null),d([qe("start")],nr.prototype,"writeStart",null),nr=Gc=d([U("esri.time.TimeExtent")],nr);const Xne=new nr,sBe=new nr({start:void 0,end:void 0});let aBe=0,Br=class extends IF(sg(Fv)){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new Wt(-180,-90,180,90,at.WGS84),this.id=Date.now().toString(16)+"-layer-"+aBe++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.persistenceEnabled=!1,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=at.WGS84,this.title=null,this.type=null,this.url=null,this.visibilityTimeExtent=null,this.visible=!0}static async fromArcGISServerUrl(e){const i=typeof e=="string"?{url:e}:e;return(await fe(async()=>{const{fromUrl:r}=await import("./arcgisLayers-BtHh0Tug.js");return{fromUrl:r}},[])).fromUrl(i)}static fromPortalItem(e){return nBe(e)}initialize(){this.when().catch(e=>{ss(e)||$e.getLogger(this).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:e})})}destroy(){const{parent:e}=this;e&&(this.parent=null,e.removeChildLayer?.(this))}get effectiveVisible(){return this.visible&&(this.parent?.effectiveVisible??!0)}get hasAttributionData(){return this.attributionDataUrl!=null}get loaded(){return super.loaded}removeFromParent(){const{parent:e}=this;e&&(e.removeChildLayer?.(this),this.parent=null)}get parsedUrl(){return rn(this.url)}createLayerView(e,i){return Promise.reject(new ee("layer:create-layer-view","Layer does not support creating a layer view"))}async fetchAttributionData(){const e=this.attributionDataUrl;if(this.hasAttributionData&&e)return(await Nt(e,{query:{f:"json"},responseType:"json"})).data;throw new ee("layer:no-attribution-data","Layer does not have attribution data")}};d([m({type:String})],Br.prototype,"attributionDataUrl",void 0),d([m({readOnly:!0})],Br.prototype,"effectiveVisible",null),d([m({type:Wt})],Br.prototype,"fullExtent",void 0),d([m({readOnly:!0})],Br.prototype,"hasAttributionData",null),d([m({type:String,clonable:!1})],Br.prototype,"id",void 0),d([m({type:Boolean,nonNullable:!0})],Br.prototype,"legendEnabled",void 0),d([m({type:["show","hide","hide-children"]})],Br.prototype,"listMode",void 0),d([m({type:Number,range:{min:0,max:1},nonNullable:!0})],Br.prototype,"opacity",void 0),d([m({clonable:!1})],Br.prototype,"parent",void 0),d([m({readOnly:!0})],Br.prototype,"parsedUrl",null),d([m({type:Boolean,readOnly:!0})],Br.prototype,"persistenceEnabled",void 0),d([m({type:Boolean})],Br.prototype,"popupEnabled",void 0),d([m({type:Boolean})],Br.prototype,"attributionVisible",void 0),d([m({type:at})],Br.prototype,"spatialReference",void 0),d([m({type:String})],Br.prototype,"title",void 0),d([m({readOnly:!0,json:{read:!1}})],Br.prototype,"type",void 0),d([m()],Br.prototype,"url",void 0),d([m({type:nr})],Br.prototype,"visibilityTimeExtent",void 0),d([m({type:Boolean,nonNullable:!0})],Br.prototype,"visible",void 0),Br=d([U("esri.layers.Layer")],Br);const bO=new WeakMap;function pN(t){return!t.destroyed&&(bO.has(t)||t.addHandles([ze(()=>{const{parent:e}=t;return!!(e&&e instanceof Br)&&(e.type==="catalog-dynamic-group"||pN(e))},e=>bO.set(t,e),Ta),Si(()=>bO.delete(t))]),bO.get(t))}function Jne(t,e){const i=t.parent,{layer:r}=t;if(r?.type!=="map-image"||!r.sourceJSON||!i)return!1;const n=r.sourceJSON.layers;if(!n)return!1;const s=n.find(o=>t.id===o.id),a=e==="footprints"?"Feature Layer":"Catalog Dynamic Group Layer";return s?.type===a&&n.find(o=>o.id===i.id)?.type==="Catalog Layer"}function oBe(t){return Abe(t)||uBe(t)}function IZ(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="feature"}function xIt(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="graphics"}function lBe(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="map-image"}function cBe(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="knowledge-graph"&&"layers"in t}function SIt(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="knowledge-graph-sublayer"}function uBe(t){return t?.type==="scene"}function Kne(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="subtype-group"&&"sublayers"in t}function Uy(t){return t?.type==="subtype-sublayer"}function Abe(t){const e=t?.type;return e==="imagery-tile"||e==="tile"||e==="open-street-map"||e==="vector-tile"||e==="web-tile"||e==="wmts"}function dBe(t){const e=t?.type;return e==="base-tile"||e==="tile"||e==="elevation"||e==="imagery-tile"||e==="base-elevation"||e==="open-street-map"||e==="wcs"||e==="web-tile"||e==="wmts"||e==="vector-tile"}const D6={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};function F9(t){const e=t?.type;return e==="building-scene"||e==="integrated-mesh"||e==="point-cloud"||e==="scene"}function $It(t){return t.type==="integrated-mesh"||t.type==="integrated-mesh-3dtiles"}function hBe(t){return t.type==="integrated-mesh-3dtiles"}function fN(t){return t?.type==="feature"&&!t.url&&t.source?.type==="memory"}function TIt(t){const e=t?.type;return(e==="feature"||e==="subtype-group"||e==="oriented-imagery")&&t?.source?.type==="feature-layer"}function pBe(t){return t?.type==="feature"&&t.source?.type==="feature-layer"}function MZ(t){return IZ(t)&&pBe(t)}function fBe(t){if(t.activeLayer){const e=t.activeLayer.tileMatrixSet;if(e)return e;const i=t.activeLayer.tileMatrixSets;if(i)return i}return null}async function AZ(t,e){const i=oi?.findServerInfo(t);if(i?.currentVersion!=null)return i.owningSystemUrl||null;const r=t.toLowerCase().indexOf("/rest/services");if(r===-1)return null;const n=`${t.slice(0,r)}/rest/info`,s=e!=null?e.signal:null,{data:a}=await Nt(n,{query:{f:"json"},responseType:"json",signal:s});return a?.owningSystemUrl||null}function Pbe(t){if(!("capabilities"in t))return!1;switch(t.type){case"catalog":case"catalog-footprint":case"csv":case"feature":case"geojson":case"imagery":case"knowledge-graph-sublayer":case"ogc-feature":case"oriented-imagery":case"scene":case"sublayer":case"subtype-group":case"subtype-sublayer":case"wfs":return!0;default:return!1}}function mBe(t){return Pbe(t)?"effectiveCapabilities"in t?t.effectiveCapabilities:t.capabilities:null}function gBe(t){if(!("editingEnabled"in t))return!1;switch(t.type){case"csv":case"feature":case"geojson":case"oriented-imagery":case"scene":case"subtype-group":case"subtype-sublayer":case"knowledge-graph-sublayer":return!0;default:return!1}}function yBe(t){return!!gBe(t)&&("effectiveEditingEnabled"in t?t.effectiveEditingEnabled:t.editingEnabled)}function vBe(t){const e=new We;for(const i of t.allLayers.concat(t.allTables))i.type==="csv"||pN(i)||("charts"in i&&e.push(i),i.type==="subtype-group"&&e.push(...i.sublayers));return e}function bBe(t,e){return null}function PZ(t){return null}function N9(t){return!t||t.type==="Feature Service"&&!t.sourceUrl}function Qne(t,e){!e||!N9(t)||bBe(t.url)}const wBe=new Set(["bing-maps","imagery","imagery-tile","map-image","open-street-map","tile","unknown","unsupported","vector-tile","web-tile","wcs","wms","wmts"]),_Be=new Set(["integrated-mesh-3dtiles"]),Obe=new Set(["catalog","csv","feature","geo-rss","geojson","group","imagery","imagery-tile","kml","knowledge-graph","map-image","map-notes","media","ogc-feature","oriented-imagery","parquet","route","stream","subtype-group","tile","unknown","unsupported","vector-tile","video","web-tile","wcs","wfs","wms","wmts"]),xBe=new Set([...Obe,"link-chart"]);function SBe(t){switch(t.layerContainerType){case"basemap-base-layers":return wBe;case"basemap-ground-layers":return _Be;case"operational-layers":return t.origin==="link-chart"?xBe:Obe;default:return null}}function $Be(t,e){if(e.restrictedWebMapWriting){const i=SBe(e);return i==null||i.has(t.type)&&!fN(t)}return!0}function TBe(t,e){if(e)if(fN(t)){const i=Mm("featureCollection.layers",e),r=i?.[0]?.layerDefinition;r&&ese(t,r)}else t.type!=="group"&&ese(t,e)}function ese(t,e){"maxScale"in t&&(e.maxScale=yR(t.maxScale)??void 0),"minScale"in t&&(e.minScale=yR(t.minScale)??void 0)}function kBe(t,e){if(TBe(t,e),e&&(e.id=t.id,"blendMode"in t&&(e.blendMode=t.blendMode,e.blendMode==="normal"&&delete e.blendMode),e.opacity=yR(t.opacity)??void 0,e.title=t.title||"Layer",e.visibility=t.visible,"legendEnabled"in t&&t.type!=="wmts"))if(fN(t)){const i=e.featureCollection;i&&(i.showLegend=t.legendEnabled)}else e.showLegend=t.legendEnabled}function SC(t,e,i){if(!t.persistenceEnabled)return null;if(!("write"in t)||!t.write)return i?.messages&&i.messages.push(new ee("layer:unsupported",`Layers (${t.title}, ${t.id}) of type '${t.declaredClass}' cannot be persisted`,{layer:t})),null;if(fN(t)&&!t.isTable)e=t.resourceInfo;else if($Be(t,i)){const r={};return t.write(r,i)?r:null}return e!=null&&kBe(t,e=de(e)),e}var tse,hx,lw;let Jo=(lw=class extends rg(Fv){constructor(e){super(e),this[tse]=!0,this.id=null,this.portalItem=null,this.spatialReference=null,this.style=null,this.thumbnailUrl=null,this.title="Basemap",this.type="Basemap",this.id=Date.now().toString(16)+"-basemap-"+hx.idCounter++,this.baseLayers=new We,this.referenceLayers=new We,this.groundLayers=new We;const i=o=>{const{parent:l}=o;l&&l!==this&&"remove"in l&&l.remove?.(o),o.parent=this,o.type!=="elevation"&&o.type!=="integrated-mesh-3dtiles"||$e.getLogger(this).error(`Layer '${o.title}, id:${o.id}' of type '${o.type}' is not supported as a basemap layer and will therefore be ignored.`)},r=o=>{const{parent:l}=o;l&&l!==this&&"remove"in l&&l.remove?.(o),o.parent=this},n=o=>{const l=o.item;return l.parent===this?($e.getLogger(this).error(`Layer '${l.title}, id:${l.id}' of type '${l.type}' already a ground layer, second add will be ignored.`),void o.preventDefault()):l.type!=="integrated-mesh-3dtiles"&&l.type!=="integrated-mesh"?($e.getLogger(this).error(`Layer '${l.title}, id:${l.id}' of type '${l.type}' is not supported as a ground layer and will therefore be ignored.`),void o.preventDefault()):void 0},s=o=>{o.parent=null},a=o=>{o.parent===this&&(o.parent=null)};this.addHandles([this.baseLayers.on("after-add",o=>i(o.item)),this.baseLayers.on("after-remove",o=>s(o.item)),this.referenceLayers.on("after-add",o=>i(o.item)),this.referenceLayers.on("after-remove",o=>s(o.item)),this.groundLayers.on("before-add",n),this.groundLayers.on("after-add",o=>r(o.item)),this.groundLayers.on("after-remove",o=>a(o.item))])}initialize(){this.when().catch(e=>{$e.getLogger(this).error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,e)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const e=this.baseLayers.toArray();for(const n of e)n.destroyed||n.destroy();const i=this.groundLayers.toArray();for(const n of i)n.destroyed||n.destroy();const r=this.referenceLayers.toArray();for(const n of r)n.destroyed||n.destroy();this.baseLayers.destroy(),this.groundLayers.destroy(),this.referenceLayers.destroy(),this.portalItem=Ir(this.portalItem)}removeChildLayer(e){for(const i of[this.baseLayers,this.referenceLayers,this.groundLayers])i.remove(e)}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}set baseLayers(e){this._set("baseLayers",$p(e,this._get("baseLayers")))}_writeBaseLayers(e,i,r){const n=[];e&&(r={...r,layerContainerType:"basemap-base-layers"},this.baseLayers.forEach(s=>{const a=SC(s,r.webmap?r.webmap.getLayerJSONFromResourceInfo(s):null,r);a!=null&&n.push(a)}),this.referenceLayers.forEach(s=>{const a=SC(s,r.webmap?r.webmap.getLayerJSONFromResourceInfo(s):null,r);a!=null&&(s.type!=="scene"&&(a.isReference=!0),n.push(a))})),i.baseMapLayers=n}set groundLayers(e){this._set("groundLayers",$p(e,this._get("groundLayers")))}_writeGroundLayers(e,i,r){const n=[];e&&(r={...r,layerContainerType:"basemap-ground-layers"},this.groundLayers.forEach(s=>{const a=SC(s,r.webmap?r.webmap.getLayerJSONFromResourceInfo(s):null,r);a!=null&&n.push(a)}),n.length>0&&(i.groundLayers=n))}get loaded(){return super.loaded}set referenceLayers(e){this._set("referenceLayers",$p(e,this._get("referenceLayers")))}writeTitle(e,i){i.title=e||"Basemap"}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return KM(this,e=>{e(this.baseLayers,this.groundLayers,this.referenceLayers)})}clone(){const e={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.map(i=>oC(i)?i.clone():i),groundLayers:this.groundLayers.map(i=>oC(i)?i.clone():i),referenceLayers:this.referenceLayers.map(i=>oC(i)?i.clone():i)};return this.loaded&&(e.loadStatus="loaded"),new hx({resourceInfo:this.resourceInfo}).set(e)}read(e,i){this.resourceInfo||this._set("resourceInfo",{data:e,context:i}),super.read(e,i)}write(e,i){return e=e||{},i?.origin||(i={origin:"web-map",...i}),super.write(e,i),!this.loaded&&this.resourceInfo?.data.baseMapLayers&&(e.baseMapLayers=this.resourceInfo.data.baseMapLayers.map(r=>{const n=de(r);return n.url&&Rp(n.url)&&(n.url=`https:${n.url}`),n.templateUrl&&Rp(n.templateUrl)&&(n.templateUrl=`https:${n.templateUrl}`),n})),e}async _loadFromSource(e){const{resourceInfo:i,portalItem:r,style:n}=this;sr(e);const s=[];if(i){const a=i.context?i.context.url:null;if(s.push(this._loadLayersFromJSON(i.data,a,e)),i.data.id&&!i.data.title){const o=i.data.id;s.push(iBe(o).then(l=>{l&&this.read({title:l},i.context)}))}}else r?s.push(this._loadFromItem(r,e)):n&&s.push(this._loadFromStylesService(n,e));await Promise.all(s)}async _loadLayersFromJSON(e,i,r){const n=this.resourceInfo?.context,s=this.portalItem?.portal||n?.portal||null,a=CBe[n?.origin||""]??"web-map",{populateOperationalLayers:o}=await fe(async()=>{const{populateOperationalLayers:c}=await Promise.resolve().then(()=>tK);return{populateOperationalLayers:c}},void 0),l=[];if(sr(r),e.baseMapLayers&&Array.isArray(e.baseMapLayers)){const c={context:{...n,origin:a,url:i,portal:s,layerContainerType:"basemap-base-layers"},defaultLayerType:"DefaultTileLayer"},h=y=>a==="web-scene"&&y.layerType==="ArcGISSceneServiceLayer"||y.isReference,f=o(this.baseLayers,e.baseMapLayers.filter(y=>!h(y)),c);l.push(f);const g=o(this.referenceLayers,e.baseMapLayers.filter(h),c);l.push(g)}if(e.groundLayers&&Array.isArray(e.groundLayers)){const c={context:{...n,origin:a,url:i,portal:s,layerContainerType:"basemap-ground-layers"},defaultLayerType:"IntegratedMesh3DTilesLayer"},h=o(this.groundLayers,e.groundLayers,c);l.push(h)}await Promise.allSettled(l)}async _loadFromItem(e,i){const r=await e.load(i),n=await r.fetchData("json",i),s=rn(e.itemUrl??"");return this._set("resourceInfo",{data:n.baseMap??{},context:{origin:EBe[e.type||""]??"web-map",portal:e.portal||Ue.getDefault(),url:s}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:n.spatialReference},this.resourceInfo.context),this.read({title:e.title,thumbnailUrl:e.thumbnailUrl},{origin:"portal-item",portal:e.portal||Ue.getDefault(),url:s}),this._loadLayersFromJSON(this.resourceInfo.data,s,i)}async _loadFromStylesService(e,i){const r=e.serviceUrl.endsWith("/webmaps")?e.serviceUrl.slice(0,-8):e.serviceUrl,n=`${r}/styles/${e.id}/self`,s=`${r}/webmaps/${e.id}`,a=e.apiKey??yi.apiKeys.basemapStyles,[o,l]=await Promise.all([(await Nt(n,{query:{token:a},signal:i?.signal})).data,(await Nt(s,{query:{language:e.languageParameter,places:e.places,worldview:e.worldview,token:a},signal:i?.signal})).data]);this.thumbnailUrl??=o.thumbnailUrl;const c=rn(s);if(this._set("resourceInfo",{data:l.baseMap??{},context:{origin:"web-map",url:c}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:l.spatialReference},this.resourceInfo.context),await this._loadLayersFromJSON(this.resourceInfo.data,c,i),a)for(const h of[...this.baseLayers,...this.groundLayers,...this.referenceLayers])"apiKey"in h&&(h.apiKey=a)}static fromId(e){const i=R9[e];return i?i.itemId?new hx({portalItem:{id:i.itemId,portal:{url:"https://www.arcgis.com"}}}):hx.fromJSON(i,i.is3d?{origin:"web-scene",portal:new Ue({url:"https://www.arcgis.com"})}:{origin:"web-map"}):null}},tse=Ebe,hx=lw,lw.idCounter=0,lw);d([m({json:{read:!1,write:{ignoreOrigin:!0,target:"baseMapLayers",writer(t,e,i,r){this._writeBaseLayers(t,e,r)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:We}},writer(t,e,i,r){this._writeBaseLayers(t,e,r)}}}}}})],Jo.prototype,"baseLayers",null),d([m({json:{read:!1,write:{ignoreOrigin:!0,target:"groundLayers",writer(t,e,i,r){this._writeGroundLayers(t,e,r)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{groundLayers:{type:We}},writer(t,e,i,r){this._writeGroundLayers(t,e,r)}}}}}})],Jo.prototype,"groundLayers",null),d([m({type:String,json:{origins:{"web-scene":{write:!0}}}})],Jo.prototype,"id",void 0),d([m({type:Mt})],Jo.prototype,"portalItem",void 0),d([m()],Jo.prototype,"referenceLayers",null),d([m({readOnly:!0})],Jo.prototype,"resourceInfo",void 0),d([m({type:at})],Jo.prototype,"spatialReference",void 0),d([m({type:rBe})],Jo.prototype,"style",void 0),d([m()],Jo.prototype,"thumbnailUrl",void 0),d([m({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],Jo.prototype,"title",void 0),d([qe("title")],Jo.prototype,"writeTitle",null),Jo=hx=d([U("esri.Basemap")],Jo);const EBe={"Web Scene":"web-scene","Web Map":"web-map","Link Chart":"link-chart"},CBe={"web-scene":"web-scene","web-map":"web-map","link-chart":"link-chart"},dv=Jo,IBe=Object.freeze(Object.defineProperty({__proto__:null,default:dv},Symbol.toStringTag,{value:"Module"})),ez={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,50,1]};function Lbe(t){return!!ez[t]||!!ez[t.toLowerCase()]}function OZ(t){return ez[t]??ez[t.toLowerCase()]}function MBe(t){return[...OZ(t)]}function R6(t,e,i){i<0&&++i,i>1&&--i;const r=6*i;return r<1?t+(e-t)*r:2*i<1?e:3*i<2?t+(e-t)*(2/3-i)*6:t}function Dbe(t,e,i,r=1){const n=(t%360+360)%360/360,s=i<=.5?i*(e+1):i+e-i*e,a=2*i-s;return[Math.round(255*R6(a,s,n+1/3)),Math.round(255*R6(a,s,n)),Math.round(255*R6(a,s,n-1/3)),r]}function ABe(t){const e=t.length>5,i=e?8:4,r=(1<<i)-1,n=e?1:17,s=e?t.length===9:t.length===5;let a=+("0x"+t.slice(1));if(isNaN(a))return null;const o=[0,0,0,1];let l;return s&&(l=a&r,a>>=i,o[3]=n*l/255),l=a&r,a>>=i,o[2]=n*l,l=a&r,a>>=i,o[1]=n*l,l=a&r,a>>=i,o[0]=n*l,o}function Rbe(t){if(!t.startsWith("#")||isNaN(+`0x${t.slice(1)}`))return null;switch(t.length){case 4:case 5:{const e=parseInt(t.slice(1,2),16),i=parseInt(t.slice(2,3),16),r=parseInt(t.slice(3,4),16),n=t.length===4?15:parseInt(t.slice(4),16);return[e+16*e,i+16*i,r+16*r,(n+16*n)/255]}case 7:case 9:return[parseInt(t.slice(1,3),16),parseInt(t.slice(3,5),16),parseInt(t.slice(5,7),16),(t.length===7?255:parseInt(t.slice(7),16))/255];default:return null}}function zbe(t){const e=t.toLowerCase().match(/^(rgba?|hsla?)\(([\s.\-,%0-9]+)\)/);if(e){const i=e[2].split(/\s*,\s*/),r=e[1];if(r==="rgb"&&i.length===3||r==="rgba"&&i.length===4){if(i[0].endsWith("%")){const n=i.map(s=>2.56*parseFloat(s));return i.length===4&&(n[3]=parseFloat(i[3])),ise(n)}return ise(i.map(n=>parseFloat(n)))}if(r==="hsl"&&i.length===3||r==="hsla"&&i.length===4)return Dbe(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100,parseFloat(i[3]??"1"))}return null}function ise(t){return t[0]=ZS(t[0]),t[1]=ZS(t[1]),t[2]=ZS(t[2]),t[3]=t.length===4?Nbe(t[3]):1,t}function Fbe(t){let e=Lbe(t)?OZ(t):null;return e??=zbe(t),e??=Rbe(t),e}function kIt(t){const e=Fbe(t);return e!=null?[e[0]/255,e[1]/255,e[2]/255,e[3]]:null}function Nbe(t){return jbe(t,0,1)}function ZS(t){return Math.round(jbe(t,0,255))}function jbe(t,e,i){return t=Number(t),isNaN(t)?i:t<e?e:t>i?i:t}const Vbe=2.2,PBe=1/Vbe;function EIt(t){return t**Vbe}function CIt(t){return t**PBe}function wO(t){return go(ZW(t),0,255)}function _O(t,e){const i=t.toString(16).padStart(2,"0");return e?i.slice(0,1):i}let Ye=class qc{static blendColors(e,i,r,n=new qc){return n.r=Math.round(e.r+(i.r-e.r)*r),n.g=Math.round(e.g+(i.g-e.g)*r),n.b=Math.round(e.b+(i.b-e.b)*r),n.a=e.a+(i.a-e.a)*r,n._sanitize()}static fromRgb(e,i){const r=zbe(e);return r?qc.fromArray(r,i):null}static fromHex(e,i=new qc){const r=Rbe(e);return r?qc.fromArray(r,i):null}static fromArray(e,i=new qc){return i._set(Number(e[0]),Number(e[1]),Number(e[2]),Number(e[3])),isNaN(i.a)&&(i.a=1),i._sanitize()}static fromString(e,i){const r=Fbe(e);return r?qc.fromArray(r,i):null}static fromJSON(e){return e!=null?new qc([e[0],e[1],e[2],(e[3]??255)/255]):void 0}static toUnitRGB(e){return e!=null?[e.r/255,e.g/255,e.b/255]:null}static toUnitRGBA(e,i){return e==null?null:(i??=[0,0,0,0],i[0]=e.r/255,i[1]=e.g/255,i[2]=e.b/255,i[3]=e.a!=null?e.a:1,i)}constructor(e){this.r=255,this.g=255,this.b=255,this.a=1,e&&this.setColor(e)}get isBright(){return .299*this.r+.587*this.g+.114*this.b>=127}setColor(e){return typeof e=="string"?qc.fromString(e,this):Array.isArray(e)?qc.fromArray(e,this):(this._set(e.r??0,e.g??0,e.b??0,e.a??1),e instanceof qc||this._sanitize()),this}toRgb(){return[this.r,this.g,this.b]}toRgba(){return[this.r,this.g,this.b,this.a]}toHex(e){const i=e?.capitalize??!1,r=e?.digits??6,n=r===3||r===4,s=r===4||r===8,a=`#${_O(this.r,n)}${_O(this.g,n)}${_O(this.b,n)}${s?_O(Math.round(255*this.a),n):""}`;return i?a.toUpperCase():a}toCss(e=!1){const i=this.r+", "+this.g+", "+this.b;return e?`rgba(${i}, ${this.a})`:`rgb(${i})`}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray(e=0){const i=wO(this.r),r=wO(this.g),n=wO(this.b);return e===0||this.a!==1?[i,r,n,wO(255*this.a)]:[i,r,n]}clone(){return new qc(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}equals(e){return e!=null&&e.r===this.r&&e.g===this.g&&e.b===this.b&&e.a===this.a}_sanitize(){return this.r=ZS(this.r),this.g=ZS(this.g),this.b=ZS(this.b),this.a=Nbe(this.a),this}_set(e,i,r,n){this.r=e,this.g=i,this.b=r,this.a=n}};Ye.prototype.declaredClass="esri.Color";function pt(t,e={}){const i=t instanceof Gt?t:new Gt(t,e),{alwaysWriteDefaults:r,default:n,ignoreUnknown:s=!0,name:a,nonNullable:o,readOnly:l=!1}=e;return m({type:s?i.apiValues:String,json:{type:i.jsonValues,default:n,name:a,read:!l&&{reader:i.read},write:{writer:i.write,alwaysWriteDefaults:r}},nonNullable:o,readOnly:l})}var j9;let P3=j9=class extends _e{constructor(t){super(t),this.type="none"}clone(){return new j9({type:this.type})}};d([pt({none:"none",stayAbove:"stay-above"}),m({json:{write:{isRequired:!0}}})],P3.prototype,"type",void 0),P3=j9=d([U("esri.ground.NavigationConstraint")],P3);const Bbe=Symbol("GroundInstance");function IIt(t){return t!=null&&typeof t=="object"&&Bbe in t}function mN(t){const e=ZW(100*(1-t));return Math.max(0,Math.min(e,100))}function OI(t){const e=1-t/100;return Math.max(0,Math.min(e,1))}var rse,V9,Ehe;let Wc=V9=(Ehe=class extends rg(Fv){constructor(t){super(t),this[rse]=!0,this.parent=null,this.opacity=1,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new We;const e=r=>{const{parent:n}=r;n&&n!==this&&"remove"in n&&n.remove?.(r),r.parent=this,r.type!=="elevation"&&r.type!=="base-elevation"&&$e.getLogger(this).error(`Layer '${r.title}, id:${r.id}' of type '${r.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`)},i=r=>{r.parent=null};this.addHandles([this.layers.on("after-add",r=>e(r.item)),this.layers.on("after-remove",r=>i(r.item))]),this.allLayers=new hu({getCollections:()=>[this.layers,this.parent?.basemap?.groundLayers]})}removeChildLayer(t){this.layers.remove(t)}initialize(){this.when().catch(t=>{ss(t)||$e.getLogger(this).error("#load()","Failed to load ground",t)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}get integratedMeshGround(){const t=this.parent?.basemap?.groundLayers.at(0);return t?.replacesTerrain?t:null}destroy(){const t=this.layers.removeAll();for(const e of t)Ir(e);this.layers.destroy()}normalizeCtorArgs(t){return t&&"resourceInfo"in t&&(this._set("resourceInfo",t.resourceInfo),delete(t={...t}).resourceInfo),t}get loaded(){return super.loaded}get layers(){return this._get("layers")}set layers(t){this._set("layers",$p(t,this._get("layers")))}writeLayers(t,e,i,r){const n=[];t&&(r={...r,layerContainerType:"ground"},t.forEach(s=>{if("write"in s){const a={};XIe(s)().write(a,r)&&n.push(a)}else r?.messages&&r.messages.push(new ee("layer:unsupported",`Layers (${s.title}, ${s.id}) of type '${s.declaredClass}' cannot be persisted in the ground`,{layer:s}))})),e.layers=n}load(t){return this.addResolvingPromise(this._loadFromSource(t)),Promise.resolve(this)}loadAll(){return KM(this,t=>{t(this.layers)})}async queryElevation(t,e){await this.load({signal:e?.signal});const{queryAll:i}=await fe(()=>import("./ElevationQuery-CZk5wnW1.js"),__vite__mapDeps([159,160]));return sr(e),i(this.layers.filter(nse).toArray(),t,e)}async createElevationSampler(t,e){await this.load({signal:e?.signal});const{createSampler:i}=await fe(()=>import("./ElevationQuery-CZk5wnW1.js"),__vite__mapDeps([159,160]));return sr(e),i(this.layers.filter(nse).toArray(),t,e)}clone(){const t={opacity:this.opacity,surfaceColor:de(this.surfaceColor),navigationConstraint:de(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(t.loadStatus="loaded"),new V9({resourceInfo:this.resourceInfo}).set(t)}read(t,e){this.resourceInfo||this._set("resourceInfo",{data:t,context:e}),super.read(t,e)}_loadFromSource(t){const e=this.resourceInfo;return e?this._loadLayersFromJSON(e.data,e.context,t):Promise.resolve()}async _loadLayersFromJSON(t,e,i){const r=e?.origin||"web-scene",n=e?.portal||null,s=e?.url||null,{populateOperationalLayers:a}=await fe(async()=>{const{populateOperationalLayers:l}=await Promise.resolve().then(()=>tK);return{populateOperationalLayers:l}},void 0);sr(i);const o=[];if(t.layers&&Array.isArray(t.layers)){const l={context:{origin:r,url:s,portal:n,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"};o.push(a(this.layers,t.layers,l))}await Promise.allSettled(o)}},rse=Bbe,Ehe);function nse(t){return t&&"createElevationSampler"in t}d([m()],Wc.prototype,"parent",void 0),d([m()],Wc.prototype,"integratedMeshGround",null),d([m({json:{read:!1,write:{isRequired:!0}}})],Wc.prototype,"layers",null),d([m()],Wc.prototype,"allLayers",void 0),d([qe("layers")],Wc.prototype,"writeLayers",null),d([m({readOnly:!0})],Wc.prototype,"resourceInfo",void 0),d([m({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:li,read:{reader:OI,source:"transparency"},write:{writer:(t,e)=>{e.transparency=mN(t)},target:"transparency"}}})],Wc.prototype,"opacity",void 0),d([m({type:Ye,json:{type:[li],write:(t,e)=>{e.surfaceColor=t.toJSON().slice(0,3)}}})],Wc.prototype,"surfaceColor",void 0),d([m({type:P3,json:{write:!0}})],Wc.prototype,"navigationConstraint",void 0),Wc=V9=d([U("esri.Ground")],Wc);const tz=Wc,k1={Base64:0,Hex:1,String:2,Raw:3},XS=8,Ube=(1<<XS)-1;function ev(t,e){const i=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(i>>16)<<16|65535&i}function OBe(t){const e=[];for(let i=0,r=t.length*XS;i<r;i+=XS)e[i>>5]|=(t.charCodeAt(i/XS)&Ube)<<i%32;return e}function LBe(t){const e=[];for(let i=0,r=32*t.length;i<r;i+=XS)e.push(String.fromCharCode(t[i>>5]>>>i%32&Ube));return e.join("")}function DBe(t){const e="0123456789abcdef",i=[];for(let r=0,n=4*t.length;r<n;r++)i.push(e.charAt(t[r>>2]>>r%4*8+4&15)+e.charAt(t[r>>2]>>r%4*8&15));return i.join("")}function RBe(t){const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=[];for(let n=0,s=4*t.length;n<s;n+=3){const a=(t[n>>2]>>n%4*8&255)<<16|(t[n+1>>2]>>(n+1)%4*8&255)<<8|t[n+2>>2]>>(n+2)%4*8&255;for(let o=0;o<4;o++)8*n+6*o>32*t.length?r.push("="):r.push(i.charAt(a>>6*(3-o)&63))}return r.join("")}function zBe(t,e){return t<<e|t>>>32-e}function gN(t,e,i,r,n,s){return ev(zBe(ev(ev(e,t),ev(r,s)),n),i)}function ja(t,e,i,r,n,s,a){return gN(e&i|~e&r,t,e,n,s,a)}function Va(t,e,i,r,n,s,a){return gN(e&r|i&~r,t,e,n,s,a)}function Ba(t,e,i,r,n,s,a){return gN(e^i^r,t,e,n,s,a)}function Ua(t,e,i,r,n,s,a){return gN(i^(e|~r),t,e,n,s,a)}function FBe(t,e){t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;let i=1732584193,r=-271733879,n=-1732584194,s=271733878;for(let a=0;a<t.length;a+=16){const o=i,l=r,c=n,h=s;i=ja(i,r,n,s,t[a],7,-680876936),s=ja(s,i,r,n,t[a+1],12,-389564586),n=ja(n,s,i,r,t[a+2],17,606105819),r=ja(r,n,s,i,t[a+3],22,-1044525330),i=ja(i,r,n,s,t[a+4],7,-176418897),s=ja(s,i,r,n,t[a+5],12,1200080426),n=ja(n,s,i,r,t[a+6],17,-1473231341),r=ja(r,n,s,i,t[a+7],22,-45705983),i=ja(i,r,n,s,t[a+8],7,1770035416),s=ja(s,i,r,n,t[a+9],12,-1958414417),n=ja(n,s,i,r,t[a+10],17,-42063),r=ja(r,n,s,i,t[a+11],22,-1990404162),i=ja(i,r,n,s,t[a+12],7,1804603682),s=ja(s,i,r,n,t[a+13],12,-40341101),n=ja(n,s,i,r,t[a+14],17,-1502002290),r=ja(r,n,s,i,t[a+15],22,1236535329),i=Va(i,r,n,s,t[a+1],5,-165796510),s=Va(s,i,r,n,t[a+6],9,-1069501632),n=Va(n,s,i,r,t[a+11],14,643717713),r=Va(r,n,s,i,t[a],20,-373897302),i=Va(i,r,n,s,t[a+5],5,-701558691),s=Va(s,i,r,n,t[a+10],9,38016083),n=Va(n,s,i,r,t[a+15],14,-660478335),r=Va(r,n,s,i,t[a+4],20,-405537848),i=Va(i,r,n,s,t[a+9],5,568446438),s=Va(s,i,r,n,t[a+14],9,-1019803690),n=Va(n,s,i,r,t[a+3],14,-187363961),r=Va(r,n,s,i,t[a+8],20,1163531501),i=Va(i,r,n,s,t[a+13],5,-1444681467),s=Va(s,i,r,n,t[a+2],9,-51403784),n=Va(n,s,i,r,t[a+7],14,1735328473),r=Va(r,n,s,i,t[a+12],20,-1926607734),i=Ba(i,r,n,s,t[a+5],4,-378558),s=Ba(s,i,r,n,t[a+8],11,-2022574463),n=Ba(n,s,i,r,t[a+11],16,1839030562),r=Ba(r,n,s,i,t[a+14],23,-35309556),i=Ba(i,r,n,s,t[a+1],4,-1530992060),s=Ba(s,i,r,n,t[a+4],11,1272893353),n=Ba(n,s,i,r,t[a+7],16,-155497632),r=Ba(r,n,s,i,t[a+10],23,-1094730640),i=Ba(i,r,n,s,t[a+13],4,681279174),s=Ba(s,i,r,n,t[a],11,-358537222),n=Ba(n,s,i,r,t[a+3],16,-722521979),r=Ba(r,n,s,i,t[a+6],23,76029189),i=Ba(i,r,n,s,t[a+9],4,-640364487),s=Ba(s,i,r,n,t[a+12],11,-421815835),n=Ba(n,s,i,r,t[a+15],16,530742520),r=Ba(r,n,s,i,t[a+2],23,-995338651),i=Ua(i,r,n,s,t[a],6,-198630844),s=Ua(s,i,r,n,t[a+7],10,1126891415),n=Ua(n,s,i,r,t[a+14],15,-1416354905),r=Ua(r,n,s,i,t[a+5],21,-57434055),i=Ua(i,r,n,s,t[a+12],6,1700485571),s=Ua(s,i,r,n,t[a+3],10,-1894986606),n=Ua(n,s,i,r,t[a+10],15,-1051523),r=Ua(r,n,s,i,t[a+1],21,-2054922799),i=Ua(i,r,n,s,t[a+8],6,1873313359),s=Ua(s,i,r,n,t[a+15],10,-30611744),n=Ua(n,s,i,r,t[a+6],15,-1560198380),r=Ua(r,n,s,i,t[a+13],21,1309151649),i=Ua(i,r,n,s,t[a+4],6,-145523070),s=Ua(s,i,r,n,t[a+11],10,-1120210379),n=Ua(n,s,i,r,t[a+2],15,718787259),r=Ua(r,n,s,i,t[a+9],21,-343485551),i=ev(i,o),r=ev(r,l),n=ev(n,c),s=ev(s,h)}return[i,r,n,s]}function LZ(t,e=k1.Hex){const i=e||k1.Base64,r=FBe(OBe(t),t.length*XS);switch(i){case k1.Raw:return r;case k1.Hex:return DBe(r);case k1.String:return LBe(r);case k1.Base64:return RBe(r)}}function NBe(t){return t&&"getAtOrigin"in t&&"originOf"in t}function B9(t){return DZ[jBe(t)]||BBe}function jBe(t){return t.type==="json"?"application/json":t.type==="blob"?t.blob.type:VBe(t.url)}function VBe(t){const e=rfe(t);return U9[e]||Hbe}const DZ={},Hbe="text/plain",BBe=DZ[Hbe],U9={png:"image/png",jpeg:"image/jpeg",jpg:"image/jpg",bmp:"image/bmp",gif:"image/gif",json:"application/json",txt:"text/plain",xml:"application/xml",svg:"image/svg+xml",zip:"application/zip",pbf:"application/vnd.mapbox-vector-tile",gz:"application/gzip","bin.gz":"application/octet-stream"};for(const t in U9)DZ[U9[t]]=t;function UBe(t){const e=t?.origins??[void 0];return(i,r)=>{const n=HBe(t,i,r);for(const s of e){const a=XW(i,s,r);for(const o in n)a[o]=n[o]}}}function HBe(t,e,i){if(t?.type==="resource")return GBe(t,e,i);switch(t?.type??"other"){case"other":return{read:!0,write:!0};case"url":{const{read:r,write:n}=HPe;return{read:r,write:n}}}}function GBe(t,e,i){const r=PM(e,i);return{type:String,read:(n,s,a)=>{const o=EF(n,s,a);return r.type===String?o:typeof r.type=="function"?new r.type({url:o}):void 0},write:{isRequired:r.json?.write?.isRequired,writer(n,s,a,o){if(!o?.resources)return typeof n=="string"?void(s[a]=Hw(n,o)):void(s[a]=n.write({},o));const l=YBe(n),c=Hw(l,{...o,verifyItemRelativeUrls:o?.verifyItemRelativeUrls?{writtenUrls:o.verifyItemRelativeUrls.writtenUrls,rootPath:void 0}:void 0},1),h=r.type!==String&&(!NBe(this)||o?.origin&&this.originIdOf(i)>Am(o.origin)),f={object:this,propertyName:i,value:n,targetUrl:c,dest:s,targetPropertyName:a,context:o,params:t};o?.portalItem&&c&&!_l(c)?h&&t?.contentAddressed?H9(f):h?qBe(f):WBe(f):o?.portalItem&&(c==null||lfe(c)!=null||IT(c)||h)?H9(f):s[a]=c}}}}function H9(t){const{targetUrl:e,params:i,value:r,context:n,dest:s,targetPropertyName:a}=t;if(!n.portalItem)return;const o=cfe(e),l=qbe(r,e,n);if(i?.contentAddressed&&l.type!=="json")return void n.messages?.push(new ee("persistable:contentAddressingUnsupported",`Property "${a}" is trying to serializing a resource with content of type ${l.type} with content addressing. Content addressing is only supported for json resources.`,{content:l}));const c=i?.contentAddressed&&l.type==="json"?LZ(l.jsonString):o?.filename??LT(),h=Bw(i?.prefix??o?.prefix,c),f=`${h}.${B9(l)}`;if(i?.contentAddressed&&n.resources&&l.type==="json"){const b=n.resources.toKeep.find(({resource:_})=>_.path===f)??n.resources.toAdd.find(({resource:_})=>_.path===f);if(b)return void(s[a]=b.resource.itemRelativeUrl)}const g=n.portalItem.resourceFromPath(f);IT(e)&&n.resources&&n.resources.pendingOperations.push(CPe(e).then(b=>{g.path=`${h}.${B9({type:"blob",blob:b})}`,s[a]=g.itemRelativeUrl}).catch(()=>{}));const y=i?.compress??!1;n.resources&&Gbe({...t,resource:g,content:l,compress:y,updates:n.resources.toAdd}),s[a]=g.itemRelativeUrl}function qBe(t){const{context:e,targetUrl:i,params:r,value:n,dest:s,targetPropertyName:a}=t;if(!e.portalItem)return;const o=e.portalItem.resourceFromPath(i),l=qbe(n,i,e),c=B9(l),h=rfe(o.path),f=r?.compress??!1;c===h?(e.resources&&Gbe({...t,resource:o,content:l,compress:f,updates:e.resources.toUpdate}),s[a]=i):H9(t)}function WBe({context:t,targetUrl:e,dest:i,targetPropertyName:r}){t.portalItem&&t.resources&&(t.resources.toKeep.push({resource:t.portalItem.resourceFromPath(e),compress:!1}),i[r]=e)}function Gbe({object:t,propertyName:e,updates:i,resource:r,content:n,compress:s}){const a=o=>{ZBe(t,e,o)};i.push({resource:r,content:n,compress:s,finish:a})}function qbe(t,e,i){return typeof t=="string"?{type:"url",url:e}:{type:"json",jsonString:JSON.stringify(t.toJSON(i))}}function YBe(t){return t==null?null:typeof t=="string"?t:t.url}function ZBe(t,e,i){typeof t[e]=="string"?t[e]=i.url:t[e].url=i.url}let O3=class extends $t(_e){constructor(e){super(e),this.color=null}};d([m({type:Ye,json:{type:[li],write:!0}})],O3.prototype,"color",void 0),O3=d([U("esri.effects.FocusAreaOutline")],O3);const XBe=O3;var L3;let G9=L3=class extends rg(We.ofType(br)){constructor(t){super(t)}clone(){return new L3(this.items.map(t=>t.clone()))}write(t,e){return this.toJSON(e)}toJSON(t){const e=t?.layer?.spatialReference;return e?this.toArray().map(i=>{if(!e.equals(i.spatialReference)){if(!Su(i.spatialReference,e))return t?.messages?.push(new kc("scenefilter:unsupported","Scene filters with incompatible spatial references are not supported",{modification:this,spatialReference:t.layer.spatialReference,context:t})),null;const n=new br;vbe(i,n,e),i=n}const r=i.toJSON(t);return delete r.spatialReference,r}).filter(i=>i!=null):this.toArray().map(i=>i.toJSON(t))}static fromJSON(t,e){const i=new L3;return t.forEach(r=>i.add(br.fromJSON(r,e))),i}};G9=L3=d([U("esri.layers.support.PolygonCollection")],G9);const $C=G9;let jf=class extends rg(cZ){constructor(e){super(e),this.id=`focusarea-${LT()}`,this.title=null,this.enabled=!0,this.outline=null,this.geometries=new $C}readGeometries(e,i,r){Array.isArray(e)?this.geometries=$C.fromJSON(e,r):r.origin!=="web-scene"&&r.origin!=="portal-item"||r.hooks?.onAfterLoad?.(()=>this._loadGeometries(Wm(e,r),r))}async _loadGeometries(e,i){const r=await Nt(e,{responseType:"json"});this.geometries=$C.fromJSON(r.data,i)}};d([m({type:String,nonNullable:!0,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}}}),m()],jf.prototype,"id",void 0),d([m({type:String,json:{write:!0}})],jf.prototype,"title",void 0),d([m({type:Boolean,nonNullable:!0,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}}})],jf.prototype,"enabled",void 0),d([m({type:XBe,json:{write:!0}})],jf.prototype,"outline",void 0),d([m({type:$C,nonNullable:!0,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}},clonable:t=>new $C(t.items.map(e=>e.clone()))}),UBe({origins:["web-scene","portal-item"],type:"resource",prefix:"geometries",contentAddressed:!0})],jf.prototype,"geometries",void 0),d([Ve(["web-scene","portal-item","service"],"geometries")],jf.prototype,"readGeometries",null),jf=d([U("esri.effects.FocusArea")],jf);const JBe=jf;let eE=class extends rg(cZ){constructor(e){super(e),this.areas=new We,this.style="bright"}};d([m({type:We.ofType(JBe),nonNullable:!0,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}},clonable:t=>new We(t.items.map(e=>e.clone()))})],eE.prototype,"areas",void 0),d([m({type:["bright","dark"],nonNullable:!0,json:{write:!0}})],eE.prototype,"style",void 0),eE=d([U("esri.effects.FocusAreas")],eE);const Wbe=eE;function KBe(t){return typeof t=="object"&&t!=null&&"loaded"in t&&t.loaded===!0&&"type"in t}function QBe(t){return!(!KBe(t)||!mBe(t)?.operations?.supportsEditing||"editingEnabled"in t&&!yBe(t)||pN(t))}function yN(){const t=new Float32Array(16);return t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function eUe(t){const e=new Float32Array(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function tUe(t,e,i,r,n,s,a,o,l,c,h,f,g,y,b,_){const S=new Float32Array(16);return S[0]=t,S[1]=e,S[2]=i,S[3]=r,S[4]=n,S[5]=s,S[6]=a,S[7]=o,S[8]=l,S[9]=c,S[10]=h,S[11]=f,S[12]=g,S[13]=y,S[14]=b,S[15]=_,S}const iUe=yN();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:iUe,clone:eUe,create:yN,fromValues:tUe},Symbol.toStringTag,{value:"Module"}));function Ybe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Vv(t,e,i,r,n,s,a,o,l,c,h,f,g,y,b,_,S){return t[0]=e,t[1]=i,t[2]=r,t[3]=n,t[4]=s,t[5]=a,t[6]=o,t[7]=l,t[8]=c,t[9]=h,t[10]=f,t[11]=g,t[12]=y,t[13]=b,t[14]=_,t[15]=S,t}function vN(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Bv(t,e){if(t===e){const i=e[1],r=e[2],n=e[3],s=e[6],a=e[7],o=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=i,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=s,t[11]=e[14],t[12]=n,t[13]=a,t[14]=o}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function rUe(t,e){return Zbe(t,e)||vN(t),t}function Zbe(t,e){const i=e[0],r=e[1],n=e[2],s=e[3],a=e[4],o=e[5],l=e[6],c=e[7],h=e[8],f=e[9],g=e[10],y=e[11],b=e[12],_=e[13],S=e[14],$=e[15],C=i*o-r*a,I=i*l-n*a,P=i*c-s*a,O=r*l-n*o,N=r*c-s*o,R=n*c-s*l,G=h*_-f*b,Y=h*S-g*b,Q=h*$-y*b,ae=f*S-g*_,ce=f*$-y*_,ne=g*$-y*S;let K=C*ne-I*ce+P*ae+O*Q-N*Y+R*G;return K?(K=1/K,t[0]=(o*ne-l*ce+c*ae)*K,t[1]=(n*ce-r*ne-s*ae)*K,t[2]=(_*R-S*N+$*O)*K,t[3]=(g*N-f*R-y*O)*K,t[4]=(l*Q-a*ne-c*Y)*K,t[5]=(i*ne-n*Q+s*Y)*K,t[6]=(S*P-b*R-$*I)*K,t[7]=(h*R-g*P+y*I)*K,t[8]=(a*ce-o*Q+c*G)*K,t[9]=(r*Q-i*ce-s*G)*K,t[10]=(b*N-_*P+$*C)*K,t[11]=(f*P-h*N-y*C)*K,t[12]=(o*Y-a*ae-l*G)*K,t[13]=(i*ae-r*Y+n*G)*K,t[14]=(_*I-b*O-S*C)*K,t[15]=(h*O-f*I+g*C)*K,t):null}function nUe(t,e){const i=e[0],r=e[1],n=e[2],s=e[3],a=e[4],o=e[5],l=e[6],c=e[7],h=e[8],f=e[9],g=e[10],y=e[11],b=e[12],_=e[13],S=e[14],$=e[15];return t[0]=o*(g*$-y*S)-f*(l*$-c*S)+_*(l*y-c*g),t[1]=-(r*(g*$-y*S)-f*(n*$-s*S)+_*(n*y-s*g)),t[2]=r*(l*$-c*S)-o*(n*$-s*S)+_*(n*c-s*l),t[3]=-(r*(l*y-c*g)-o*(n*y-s*g)+f*(n*c-s*l)),t[4]=-(a*(g*$-y*S)-h*(l*$-c*S)+b*(l*y-c*g)),t[5]=i*(g*$-y*S)-h*(n*$-s*S)+b*(n*y-s*g),t[6]=-(i*(l*$-c*S)-a*(n*$-s*S)+b*(n*c-s*l)),t[7]=i*(l*y-c*g)-a*(n*y-s*g)+h*(n*c-s*l),t[8]=a*(f*$-y*_)-h*(o*$-c*_)+b*(o*y-c*f),t[9]=-(i*(f*$-y*_)-h*(r*$-s*_)+b*(r*y-s*f)),t[10]=i*(o*$-c*_)-a*(r*$-s*_)+b*(r*c-s*o),t[11]=-(i*(o*y-c*f)-a*(r*y-s*f)+h*(r*c-s*o)),t[12]=-(a*(f*S-g*_)-h*(o*S-l*_)+b*(o*g-l*f)),t[13]=i*(f*S-g*_)-h*(r*S-n*_)+b*(r*g-n*f),t[14]=-(i*(o*S-l*_)-a*(r*S-n*_)+b*(r*l-n*o)),t[15]=i*(o*g-l*f)-a*(r*g-n*f)+h*(r*l-n*o),t}function sUe(t){const e=t[0],i=t[1],r=t[2],n=t[3],s=t[4],a=t[5],o=t[6],l=t[7],c=t[8],h=t[9],f=t[10],g=t[11],y=t[12],b=t[13],_=t[14],S=t[15];return(e*a-i*s)*(f*S-g*_)-(e*o-r*s)*(h*S-g*b)+(e*l-n*s)*(h*_-f*b)+(i*o-r*a)*(c*S-g*y)-(i*l-n*a)*(c*_-f*y)+(r*l-n*o)*(c*b-h*y)}function Xbe(t,e,i){const r=e[0],n=e[1],s=e[2],a=e[3],o=e[4],l=e[5],c=e[6],h=e[7],f=e[8],g=e[9],y=e[10],b=e[11],_=e[12],S=e[13],$=e[14],C=e[15];let I=i[0],P=i[1],O=i[2],N=i[3];return t[0]=I*r+P*o+O*f+N*_,t[1]=I*n+P*l+O*g+N*S,t[2]=I*s+P*c+O*y+N*$,t[3]=I*a+P*h+O*b+N*C,I=i[4],P=i[5],O=i[6],N=i[7],t[4]=I*r+P*o+O*f+N*_,t[5]=I*n+P*l+O*g+N*S,t[6]=I*s+P*c+O*y+N*$,t[7]=I*a+P*h+O*b+N*C,I=i[8],P=i[9],O=i[10],N=i[11],t[8]=I*r+P*o+O*f+N*_,t[9]=I*n+P*l+O*g+N*S,t[10]=I*s+P*c+O*y+N*$,t[11]=I*a+P*h+O*b+N*C,I=i[12],P=i[13],O=i[14],N=i[15],t[12]=I*r+P*o+O*f+N*_,t[13]=I*n+P*l+O*g+N*S,t[14]=I*s+P*c+O*y+N*$,t[15]=I*a+P*h+O*b+N*C,t}function aUe(t,e,i){const r=i[0],n=i[1],s=i[2];if(e===t)t[12]=e[0]*r+e[4]*n+e[8]*s+e[12],t[13]=e[1]*r+e[5]*n+e[9]*s+e[13],t[14]=e[2]*r+e[6]*n+e[10]*s+e[14],t[15]=e[3]*r+e[7]*n+e[11]*s+e[15];else{const a=e[0],o=e[1],l=e[2],c=e[3],h=e[4],f=e[5],g=e[6],y=e[7],b=e[8],_=e[9],S=e[10],$=e[11];t[0]=a,t[1]=o,t[2]=l,t[3]=c,t[4]=h,t[5]=f,t[6]=g,t[7]=y,t[8]=b,t[9]=_,t[10]=S,t[11]=$,t[12]=a*r+h*n+b*s+e[12],t[13]=o*r+f*n+_*s+e[13],t[14]=l*r+g*n+S*s+e[14],t[15]=c*r+y*n+$*s+e[15]}return t}function oUe(t,e,i){const r=i[0],n=i[1],s=i[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*s,t[9]=e[9]*s,t[10]=e[10]*s,t[11]=e[11]*s,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function lUe(t,e,i,r){let n=r[0],s=r[1],a=r[2],o=Math.sqrt(n*n+s*s+a*a);if(o<=Vo())return void Ybe(t,e);o=1/o,n*=o,s*=o,a*=o;const l=Math.sin(i),c=Math.cos(i),h=1-c,f=e[0],g=e[1],y=e[2],b=e[3],_=e[4],S=e[5],$=e[6],C=e[7],I=e[8],P=e[9],O=e[10],N=e[11],R=n*n*h+c,G=s*n*h+a*l,Y=a*n*h-s*l,Q=n*s*h-a*l,ae=s*s*h+c,ce=a*s*h+n*l,ne=n*a*h+s*l,K=s*a*h-n*l,le=a*a*h+c;t[0]=f*R+_*G+I*Y,t[1]=g*R+S*G+P*Y,t[2]=y*R+$*G+O*Y,t[3]=b*R+C*G+N*Y,t[4]=f*Q+_*ae+I*ce,t[5]=g*Q+S*ae+P*ce,t[6]=y*Q+$*ae+O*ce,t[7]=b*Q+C*ae+N*ce,t[8]=f*ne+_*K+I*le,t[9]=g*ne+S*K+P*le,t[10]=y*ne+$*K+O*le,t[11]=b*ne+C*K+N*le,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15])}function cUe(t,e,i){const r=Math.sin(i),n=Math.cos(i),s=e[4],a=e[5],o=e[6],l=e[7],c=e[8],h=e[9],f=e[10],g=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=s*n+c*r,t[5]=a*n+h*r,t[6]=o*n+f*r,t[7]=l*n+g*r,t[8]=c*n-s*r,t[9]=h*n-a*r,t[10]=f*n-o*r,t[11]=g*n-l*r,t}function uUe(t,e,i){const r=Math.sin(i),n=Math.cos(i),s=e[0],a=e[1],o=e[2],l=e[3],c=e[8],h=e[9],f=e[10],g=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*n-c*r,t[1]=a*n-h*r,t[2]=o*n-f*r,t[3]=l*n-g*r,t[8]=s*r+c*n,t[9]=a*r+h*n,t[10]=o*r+f*n,t[11]=l*r+g*n,t}function dUe(t,e,i){const r=Math.sin(i),n=Math.cos(i),s=e[0],a=e[1],o=e[2],l=e[3],c=e[4],h=e[5],f=e[6],g=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*n+c*r,t[1]=a*n+h*r,t[2]=o*n+f*r,t[3]=l*n+g*r,t[4]=c*n-s*r,t[5]=h*n-a*r,t[6]=f*n-o*r,t[7]=g*n-l*r,t}function hUe(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function pUe(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function fUe(t,e,i){if(e===0)return vN(t);let r=i[0],n=i[1],s=i[2],a=Math.sqrt(r*r+n*n+s*s);if(a<=Vo())return null;a=1/a,r*=a,n*=a,s*=a;const o=Math.sin(e),l=Math.cos(e),c=1-l;return t[0]=r*r*c+l,t[1]=n*r*c+s*o,t[2]=s*r*c-n*o,t[3]=0,t[4]=r*n*c-s*o,t[5]=n*n*c+l,t[6]=s*n*c+r*o,t[7]=0,t[8]=r*s*c+n*o,t[9]=n*s*c-r*o,t[10]=s*s*c+l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function mUe(t,e){const i=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=i,t[7]=0,t[8]=0,t[9]=-i,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function gUe(t,e){const i=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-i,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=i,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function yUe(t,e){const i=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=i,t[2]=0,t[3]=0,t[4]=-i,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Jbe(t,e,i){const r=e[0],n=e[1],s=e[2],a=e[3],o=r+r,l=n+n,c=s+s,h=r*o,f=r*l,g=r*c,y=n*l,b=n*c,_=s*c,S=a*o,$=a*l,C=a*c;return t[0]=1-(y+_),t[1]=f+C,t[2]=g-$,t[3]=0,t[4]=f-C,t[5]=1-(h+_),t[6]=b+S,t[7]=0,t[8]=g+$,t[9]=b-S,t[10]=1-(h+y),t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t}function vUe(t,e){const i=bUe,r=-e[0],n=-e[1],s=-e[2],a=e[3],o=e[4],l=e[5],c=e[6],h=e[7],f=r*r+n*n+s*s+a*a;return f>0?(i[0]=2*(o*a+h*r+l*s-c*n)/f,i[1]=2*(l*a+h*n+c*r-o*s)/f,i[2]=2*(c*a+h*s+o*n-l*r)/f):(i[0]=2*(o*a+h*r+l*s-c*n),i[1]=2*(l*a+h*n+c*r-o*s),i[2]=2*(c*a+h*s+o*n-l*r)),Jbe(t,e,i),t}const bUe=Nv();function wUe(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function _Ue(t,e){const i=e[0],r=e[1],n=e[2],s=e[4],a=e[5],o=e[6],l=e[8],c=e[9],h=e[10];return t[0]=Math.sqrt(i*i+r*r+n*n),t[1]=Math.sqrt(s*s+a*a+o*o),t[2]=Math.sqrt(l*l+c*c+h*h),t}function xUe(t,e){const i=e[0]+e[5]+e[10];let r=0;return i>0?(r=2*Math.sqrt(i+1),t[3]=.25*r,t[0]=(e[6]-e[9])/r,t[1]=(e[8]-e[2])/r,t[2]=(e[1]-e[4])/r):e[0]>e[5]&&e[0]>e[10]?(r=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/r,t[0]=.25*r,t[1]=(e[1]+e[4])/r,t[2]=(e[8]+e[2])/r):e[5]>e[10]?(r=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/r,t[0]=(e[1]+e[4])/r,t[1]=.25*r,t[2]=(e[6]+e[9])/r):(r=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/r,t[0]=(e[8]+e[2])/r,t[1]=(e[6]+e[9])/r,t[2]=.25*r),t}function SUe(t,e,i,r){const n=e[0],s=e[1],a=e[2],o=e[3],l=n+n,c=s+s,h=a+a,f=n*l,g=n*c,y=n*h,b=s*c,_=s*h,S=a*h,$=o*l,C=o*c,I=o*h,P=r[0],O=r[1],N=r[2];return t[0]=(1-(b+S))*P,t[1]=(g+I)*P,t[2]=(y-C)*P,t[3]=0,t[4]=(g-I)*O,t[5]=(1-(f+S))*O,t[6]=(_+$)*O,t[7]=0,t[8]=(y+C)*N,t[9]=(_-$)*N,t[10]=(1-(f+b))*N,t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t}function $Ue(t,e,i,r,n){const s=e[0],a=e[1],o=e[2],l=e[3],c=s+s,h=a+a,f=o+o,g=s*c,y=s*h,b=s*f,_=a*h,S=a*f,$=o*f,C=l*c,I=l*h,P=l*f,O=r[0],N=r[1],R=r[2],G=n[0],Y=n[1],Q=n[2],ae=(1-(_+$))*O,ce=(y+P)*O,ne=(b-I)*O,K=(y-P)*N,le=(1-(g+$))*N,re=(S+C)*N,he=(b+I)*R,xe=(S-C)*R,Pe=(1-(g+_))*R;return t[0]=ae,t[1]=ce,t[2]=ne,t[3]=0,t[4]=K,t[5]=le,t[6]=re,t[7]=0,t[8]=he,t[9]=xe,t[10]=Pe,t[11]=0,t[12]=i[0]+G-(ae*G+K*Y+he*Q),t[13]=i[1]+Y-(ce*G+le*Y+xe*Q),t[14]=i[2]+Q-(ne*G+re*Y+Pe*Q),t[15]=1,t}function TUe(t,e){const i=e[0],r=e[1],n=e[2],s=e[3],a=i+i,o=r+r,l=n+n,c=i*a,h=r*a,f=r*o,g=n*a,y=n*o,b=n*l,_=s*a,S=s*o,$=s*l;return t[0]=1-f-b,t[1]=h+$,t[2]=g-S,t[3]=0,t[4]=h-$,t[5]=1-c-b,t[6]=y+_,t[7]=0,t[8]=g+S,t[9]=y-_,t[10]=1-c-f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function kUe(t,e,i,r,n,s,a){const o=1/(i-e),l=1/(n-r),c=1/(s-a);return t[0]=2*s*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*s*l,t[6]=0,t[7]=0,t[8]=(i+e)*o,t[9]=(n+r)*l,t[10]=(a+s)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*s*2*c,t[15]=0,t}function EUe(t,e,i,r,n){const s=1/Math.tan(e/2);let a;return t[0]=s/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,n!=null&&n!==1/0?(a=1/(r-n),t[10]=(n+r)*a,t[14]=2*n*r*a):(t[10]=-1,t[14]=-2*r),t}function CUe(t,e,i,r){const n=Math.tan(e.upDegrees*Math.PI/180),s=Math.tan(e.downDegrees*Math.PI/180),a=Math.tan(e.leftDegrees*Math.PI/180),o=Math.tan(e.rightDegrees*Math.PI/180),l=2/(a+o),c=2/(n+s);return t[0]=l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-(a-o)*l*.5,t[9]=(n-s)*c*.5,t[10]=r/(i-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*i/(i-r),t[15]=0,t}function IUe(t,e,i,r,n,s,a){const o=1/(e-i),l=1/(r-n),c=1/(s-a);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+i)*o,t[13]=(n+r)*l,t[14]=(a+s)*c,t[15]=1,t}function MUe(t,e,i,r){const n=e[0],s=e[1],a=e[2];let o=n-i[0],l=s-i[1],c=a-i[2];const h=Vo();if(Math.abs(o)<h&&Math.abs(l)<h&&Math.abs(c)<h)return void vN(t);let f=1/Math.sqrt(o*o+l*l+c*c);o*=f,l*=f,c*=f;const g=r[0],y=r[1],b=r[2];let _=y*c-b*l,S=b*o-g*c,$=g*l-y*o;f=Math.sqrt(_*_+S*S+$*$),f?(f=1/f,_*=f,S*=f,$*=f):(_=0,S=0,$=0);let C=l*$-c*S,I=c*_-o*$,P=o*S-l*_;f=Math.sqrt(C*C+I*I+P*P),f?(f=1/f,C*=f,I*=f,P*=f):(C=0,I=0,P=0),t[0]=_,t[1]=C,t[2]=o,t[3]=0,t[4]=S,t[5]=I,t[6]=l,t[7]=0,t[8]=$,t[9]=P,t[10]=c,t[11]=0,t[12]=-(_*n+S*s+$*a),t[13]=-(C*n+I*s+P*a),t[14]=-(o*n+l*s+c*a),t[15]=1}function AUe(t,e,i,r){const n=e[0],s=e[1],a=e[2],o=r[0],l=r[1],c=r[2];let h=n-i[0],f=s-i[1],g=a-i[2],y=h*h+f*f+g*g;y>0&&(y=1/Math.sqrt(y),h*=y,f*=y,g*=y);let b=l*g-c*f,_=c*h-o*g,S=o*f-l*h;return y=b*b+_*_+S*S,y>0&&(y=1/Math.sqrt(y),b*=y,_*=y,S*=y),t[0]=b,t[1]=_,t[2]=S,t[3]=0,t[4]=f*S-g*_,t[5]=g*b-h*S,t[6]=h*_-f*b,t[7]=0,t[8]=h,t[9]=f,t[10]=g,t[11]=0,t[12]=n,t[13]=s,t[14]=a,t[15]=1,t}function PUe(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function OUe(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+t[6]**2+t[7]**2+t[8]**2+t[9]**2+t[10]**2+t[11]**2+t[12]**2+t[13]**2+t[14]**2+t[15]**2)}function LUe(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t[6]=e[6]+i[6],t[7]=e[7]+i[7],t[8]=e[8]+i[8],t[9]=e[9]+i[9],t[10]=e[10]+i[10],t[11]=e[11]+i[11],t[12]=e[12]+i[12],t[13]=e[13]+i[13],t[14]=e[14]+i[14],t[15]=e[15]+i[15],t}function Kbe(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t[6]=e[6]-i[6],t[7]=e[7]-i[7],t[8]=e[8]-i[8],t[9]=e[9]-i[9],t[10]=e[10]-i[10],t[11]=e[11]-i[11],t[12]=e[12]-i[12],t[13]=e[13]-i[13],t[14]=e[14]-i[14],t[15]=e[15]-i[15],t}function DUe(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*i,t[9]=e[9]*i,t[10]=e[10]*i,t[11]=e[11]*i,t[12]=e[12]*i,t[13]=e[13]*i,t[14]=e[14]*i,t[15]=e[15]*i,t}function RUe(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t[3]=e[3]+i[3]*r,t[4]=e[4]+i[4]*r,t[5]=e[5]+i[5]*r,t[6]=e[6]+i[6]*r,t[7]=e[7]+i[7]*r,t[8]=e[8]+i[8]*r,t[9]=e[9]+i[9]*r,t[10]=e[10]+i[10]*r,t[11]=e[11]+i[11]*r,t[12]=e[12]+i[12]*r,t[13]=e[13]+i[13]*r,t[14]=e[14]+i[14]*r,t[15]=e[15]+i[15]*r,t}function zUe(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function FUe(t,e){if(t===e)return!0;const i=t[0],r=t[1],n=t[2],s=t[3],a=t[4],o=t[5],l=t[6],c=t[7],h=t[8],f=t[9],g=t[10],y=t[11],b=t[12],_=t[13],S=t[14],$=t[15],C=e[0],I=e[1],P=e[2],O=e[3],N=e[4],R=e[5],G=e[6],Y=e[7],Q=e[8],ae=e[9],ce=e[10],ne=e[11],K=e[12],le=e[13],re=e[14],he=e[15],xe=Vo();return Math.abs(i-C)<=xe*Math.max(1,Math.abs(i),Math.abs(C))&&Math.abs(r-I)<=xe*Math.max(1,Math.abs(r),Math.abs(I))&&Math.abs(n-P)<=xe*Math.max(1,Math.abs(n),Math.abs(P))&&Math.abs(s-O)<=xe*Math.max(1,Math.abs(s),Math.abs(O))&&Math.abs(a-N)<=xe*Math.max(1,Math.abs(a),Math.abs(N))&&Math.abs(o-R)<=xe*Math.max(1,Math.abs(o),Math.abs(R))&&Math.abs(l-G)<=xe*Math.max(1,Math.abs(l),Math.abs(G))&&Math.abs(c-Y)<=xe*Math.max(1,Math.abs(c),Math.abs(Y))&&Math.abs(h-Q)<=xe*Math.max(1,Math.abs(h),Math.abs(Q))&&Math.abs(f-ae)<=xe*Math.max(1,Math.abs(f),Math.abs(ae))&&Math.abs(g-ce)<=xe*Math.max(1,Math.abs(g),Math.abs(ce))&&Math.abs(y-ne)<=xe*Math.max(1,Math.abs(y),Math.abs(ne))&&Math.abs(b-K)<=xe*Math.max(1,Math.abs(b),Math.abs(K))&&Math.abs(_-le)<=xe*Math.max(1,Math.abs(_),Math.abs(le))&&Math.abs(S-re)<=xe*Math.max(1,Math.abs(S),Math.abs(re))&&Math.abs($-he)<=xe*Math.max(1,Math.abs($),Math.abs(he))}function NUe(t){const e=Vo(),i=t[0],r=t[1],n=t[2],s=t[4],a=t[5],o=t[6],l=t[8],c=t[9],h=t[10];return Math.abs(1-(i*i+s*s+l*l))<=e&&Math.abs(1-(r*r+a*a+c*c))<=e&&Math.abs(1-(n*n+o*o+h*h))<=e}function jUe(t){return t[0]===1&&t[1]===0&&t[2]===0&&t[4]===0&&t[5]===1&&t[6]===0&&t[8]===0&&t[9]===0&&t[10]===1}const VUe=Xbe,BUe=Kbe;Object.freeze(Object.defineProperty({__proto__:null,add:LUe,adjoint:nUe,copy:Ybe,determinant:sUe,equals:FUe,exactEquals:zUe,frob:OUe,fromQuat:TUe,fromQuat2:vUe,fromRotation:fUe,fromRotationTranslation:Jbe,fromRotationTranslationScale:SUe,fromRotationTranslationScaleOrigin:$Ue,fromScaling:pUe,fromTranslation:hUe,fromXRotation:mUe,fromYRotation:gUe,fromZRotation:yUe,frustum:kUe,getRotation:xUe,getScale:_Ue,getTranslation:wUe,hasIdentityRotation:jUe,identity:vN,invert:Zbe,invertOrIdentity:rUe,isOrthoNormal:NUe,lookAt:MUe,mul:VUe,multiply:Xbe,multiplyScalar:DUe,multiplyScalarAndAdd:RUe,ortho:IUe,perspective:EUe,perspectiveFromFieldOfView:CUe,rotate:lUe,rotateX:cUe,rotateY:uUe,rotateZ:dUe,scale:oUe,set:Vv,str:PUe,sub:BUe,subtract:Kbe,targetTo:AUe,translate:aUe,transpose:Bv},Symbol.toStringTag,{value:"Module"}));const UUe=(t,e)=>{const i=Vv(t,e,0,0,0,0,e,0,0,0,0,e,0,0,0,0,1);return Bv(i,i)},HUe=(t,e)=>{const i=Vv(t,e,0,0,.5-.5*e,0,e,0,.5-.5*e,0,0,e,.5-.5*e,0,0,0,1);return Bv(i,i)},GUe=(t,e)=>{const i=1-e,r=Vv(t,.2126+.7874*i,.7152-.7152*i,.0722-.0722*i,0,.2126-.2126*i,.7152+.2848*i,.0722-.0722*i,0,.2126-.2126*i,.7152-.7152*i,.0722+.9278*i,0,0,0,0,1);return Bv(r,r)},qUe=(t,e)=>{const i=Math.sin(e*Math.PI/180),r=Math.cos(e*Math.PI/180),n=Vv(t,.213+.787*r-.213*i,.715-.715*r-.715*i,.072-.072*r+.928*i,0,.213-.213*r+.143*i,.715+.285*r+.14*i,.072-.072*r-.283*i,0,.213-.213*r-.787*i,.715-.715*r+.715*i,.072+.928*r+.072*i,0,0,0,0,1);return Bv(n,n)},WUe=(t,e)=>{const i=1-2*e,r=Vv(t,i,0,0,e,0,i,0,e,0,0,i,e,0,0,0,1);return Bv(r,r)},YUe=(t,e)=>{const i=Vv(t,.213+.787*e,.715-.715*e,.072-.072*e,0,.213-.213*e,.715+.285*e,.072-.072*e,0,.213-.213*e,.715-.715*e,.072+.928*e,0,0,0,0,1);return Bv(i,i)},ZUe=(t,e)=>{const i=1-e,r=Vv(t,.393+.607*i,.769-.769*i,.189-.189*i,0,.349-.349*i,.686+.314*i,.168-.168*i,0,.272-.272*i,.534-.534*i,.131+.869*i,0,0,0,0,1);return Bv(r,r)};let Qbe=class e0e{constructor(e,i,r){this.strength=e,this.radius=i,this.threshold=r,this.type="bloom"}interpolate(e,i,r){this.strength=pl(e.strength,i.strength,r),this.radius=pl(e.radius,i.radius,r),this.threshold=pl(e.threshold,i.threshold,r)}clone(){return new e0e(this.strength,this.radius,this.threshold)}toJSON(){return{type:"bloom",radius:TC(this.radius),strength:this.strength,threshold:this.threshold}}},t0e=class i0e{constructor(e){this.radius=e,this.type="blur"}interpolate(e,i,r){this.radius=Math.round(pl(e.radius,i.radius,r))}clone(){return new i0e(this.radius)}toJSON(){return{type:"blur",radius:TC(this.radius)}}},q9=class r0e{constructor(e,i){this.type=e,this.amount=i,this.type!=="invert"&&this.type!=="grayscale"&&this.type!=="sepia"||(this.amount=Math.min(this.amount,1))}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(e,i,r){this.amount=pl(e.amount,i.amount,r),this._updateMatrix()}clone(){return new r0e(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const e=this._colorMatrix||yN();switch(this.type){case"brightness":this._colorMatrix=UUe(e,this.amount);break;case"contrast":this._colorMatrix=HUe(e,this.amount);break;case"grayscale":this._colorMatrix=GUe(e,this.amount);break;case"invert":this._colorMatrix=WUe(e,this.amount);break;case"saturate":this._colorMatrix=YUe(e,this.amount);break;case"sepia":this._colorMatrix=ZUe(e,this.amount)}}},n0e=class s0e{constructor(e,i,r,n){this.offsetX=e,this.offsetY=i,this.blurRadius=r,this.color=n,this.type="drop-shadow"}interpolate(e,i,r){this.offsetX=pl(e.offsetX,i.offsetX,r),this.offsetY=pl(e.offsetY,i.offsetY,r),this.blurRadius=pl(e.blurRadius,i.blurRadius,r),this.color[0]=Math.round(pl(e.color[0],i.color[0],r)),this.color[1]=Math.round(pl(e.color[1],i.color[1],r)),this.color[2]=Math.round(pl(e.color[2],i.color[2],r)),this.color[3]=pl(e.color[3],i.color[3],r)}clone(){return new s0e(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const e=[...this.color];return e[3]*=255,{type:"drop-shadow",xoffset:TC(this.offsetX),yoffset:TC(this.offsetY),blurRadius:TC(this.blurRadius),color:e}}},a0e=class o0e{constructor(e){this.angle=e,this.type="hue-rotate"}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(e,i,r){this.angle=pl(e.angle,i.angle,r),this._updateMatrix()}clone(){return new o0e(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const e=this._colorMatrix||yN();this._colorMatrix=qUe(e,this.angle)}},l0e=class c0e{constructor(e){this.amount=e,this.type="opacity",this.amount=Math.min(this.amount,1)}interpolate(e,i,r){this.amount=pl(e.amount,i.amount,r)}clone(){return new c0e(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}};function pl(t,e,i){return t+(e-t)*i}function TC(t){return Math.round(1e3*Xi(t))/1e3}function XUe(t){switch(t.type){case"grayscale":case"sepia":case"invert":return new q9(t.type,0);case"saturate":case"brightness":case"contrast":return new q9(t.type,1);case"opacity":return new l0e(1);case"hue-rotate":return new a0e(0);case"blur":return new t0e(0);case"drop-shadow":return new n0e(0,0,0,[...OZ("transparent")]);case"bloom":return new Qbe(0,0,1)}}function u0e(t,e){const i=t.length>e.length?t:e;return(t.length>e.length?e:t).every((r,n)=>r.type===i[n].type)}function d0e(t,e){const i=t.length>e.length?t:e,r=t.length>e.length?e:t;for(let n=r.length;n<i.length;n++)r.push(XUe(i[n]))}function JUe(t){const e=t[0];return!!e&&"type"in e}function KUe(t,e){return JSON.stringify(t??null)===JSON.stringify(e??null)}function OIt(t,e){return t.allLayerViews.find(r=>r.uid===e)?.layer.parent===t.map?.basemap}function QUe(t,e){return t===e||t?.portalItem?.id!=null&&t.portalItem.id===e?.portalItem?.id?!0:a8e(ase(t),ase(e))==="equal"}function LIt(t){return!!t?.baseLayers.concat(t.referenceLayers).some(e8e)}function e8e(t){if(sse(t.url))return!0;if(t.type==="vector-tile")for(const e in t.sourceNameToSource){const i=t.sourceNameToSource[e];if(sse(i?.sourceUrl))return!0}return!1}function t8e(t,e){if(e==null||t==null)return{spatialReference:null,updating:!1};if(e.loadStatus==="not-loaded")return e.load(),{spatialReference:null,updating:!0};if(e.spatialReference)return{spatialReference:e.spatialReference,updating:!1};if(e.baseLayers.length===0)return{spatialReference:null,updating:!1};const i=e.baseLayers.at(0);switch(i.loadStatus){case"not-loaded":i.load();case"loading":return{spatialReference:null,updating:!0};case"failed":return{spatialReference:null,updating:!1}}const r=(("supportedSpatialReferences"in i?i.supportedSpatialReferences:null)||["tileInfo"in i?i.tileInfo?.spatialReference:i.spatialReference]).filter(Boolean),n=t.spatialReference;return n?{spatialReference:r.find(s=>n.equals(s))??r[0]??null,updating:!1}:{spatialReference:r[0],updating:!1}}const i8e=/^(basemaps|ibasemaps).*-api\.arcgis\.com$/i;function sse(t){if(!t)return!1;const e=new Lo(oo(t));return!!e.authority&&i8e.test(e.authority)}function ase(t){return t?!t.loaded&&t.resourceInfo?n8e(t.resourceInfo.data):{baseLayers:z6(t.baseLayers),referenceLayers:z6(t.referenceLayers),groundLayers:z6(t.groundLayers)}:null}function z6(t){return(We.isCollection(t)?t.toArray():t).map(r8e)}function r8e(t){return{type:t.type,effect:"effect"in t?t.effect:void 0,url:h0e("urlTemplate"in t&&t.urlTemplate||t.url||"styleUrl"in t&&t.styleUrl||""),minScale:"minScale"in t&&t.minScale!=null?t.minScale:0,maxScale:"maxScale"in t&&t.maxScale!=null?t.maxScale:0,opacity:t.opacity!=null?t.opacity:1,visible:t.visible==null||!!t.visible,sublayers:t.type!=="map-image"&&t.type!=="wms"||t.sublayers==null?void 0:t.sublayers?.map(e=>({id:e.id,visible:e.visible})),activeLayerId:t.type==="wmts"?t.activeLayer?.id:void 0}}function ose(t){return t.isReference||t.layerType==="ArcGISSceneServiceLayer"}function n8e(t){return t?{baseLayers:F6((t.baseMapLayers??[]).filter(e=>!ose(e))),referenceLayers:F6((t.baseMapLayers??[]).filter(e=>ose(e))),groundLayers:F6(t.groundLayers??[])}:null}function F6(t){return t.map(e=>s8e(e))}function s8e(t){let e;switch(t.layerType){case"VectorTileLayer":e="vector-tile";break;case"ArcGISTiledMapServiceLayer":e="tile";break;case"ArcGISSceneServiceLayer":e="scene";break;case"IntegratedMesh3DTilesLayer":e="IntegratedMesh3DTilesLayer";break;default:e="unknown"}return{type:e,effect:t.effect,url:h0e(t.templateUrl||t.urlTemplate||t.styleUrl||t.url),minScale:t.minScale??0,maxScale:t.maxScale??0,opacity:t.opacity??1,visible:t.visibility==null||!!t.visibility,sublayers:void 0,activeLayerId:void 0}}function a8e(t,e,i){return t!=null!=(e!=null)?"not-equal":!t||!e||lse(t.baseLayers,e.baseLayers)&&lse(t.referenceLayers,e.referenceLayers)?"equal":"not-equal"}function lse(t,e){if(t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(!o8e(t[i],e[i]))return!1;return!0}function o8e(t,e){if(t.type!==e.type||t.url!==e.url||t.minScale!==e.minScale||t.maxScale!==e.maxScale||t.visible!==e.visible||t.opacity!==e.opacity||!KUe(t.effect,e.effect))return!1;if(t.activeLayerId!=null||e.activeLayerId!=null)return t.activeLayerId===e.activeLayerId;if(t.sublayers!=null||e.sublayers!=null){if(t.sublayers==null||e.sublayers==null||t.sublayers.length!==e.sublayers.length)return!1;for(let i=0;i<t.sublayers.length;i++){const r=t.sublayers.at(i),n=e.sublayers.at(i);if(r?.id!==n?.id||r?.visible!==n?.visible)return!1}}return!0}function h0e(t){return t?_c(t).replace(/^\s*https?:/i,"").toLowerCase():""}const N6=()=>$e.getLogger("esri.support.basemapUtils");function l8e(){return{}}function c8e(t){for(const e in t){const i=t[e];i&&!i.destroyed&&i.destroy(),delete t[e]}}function p0e(t,e){let i;if(typeof t=="string"){const r=t in R9,n=!r&&t.includes("/");if(!r&&!n){if($8())N6().warn(`Unable to find basemap definition for: ${t}. See available styles at https://developers.arcgis.com/rest/basemap-styles/`);else{const s=Object.entries(R9).filter(([a,o])=>o.classic||o.is3d).map(([a])=>`"${a}"`).sort().join(", ");N6().warn(`Unable to find basemap definition for: ${t}. Try one of these: ${s}`)}return null}e&&(i=e[t]),i||(i=r?dv.fromId(t):new dv({style:{id:t}}),e&&(e[t]=i))}else i=dn(dv,t);return i?.destroyed&&(N6().warn("The provided basemap is already destroyed",{basemap:i}),i=null),i}function f0e(t){return new hu({getCollections:()=>[t.tables,t.layers],getChildrenFunction:e=>{const i=[];return"tables"in e&&i.push(e.tables),"layers"in e&&i.push(e.layers),i},itemFilterFunction:e=>{const i=e.parent;return!!i&&"tables"in i&&i.tables.includes(e)}})}function xO(t){for(const e of t.values())e?.destroy();t.clear()}const cse={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};function u8e(t){let e=null;if(typeof t=="string")if(t in cse){const i=cse[t];e=new tz({resourceInfo:{data:{layers:[i]}}})}else $e.getLogger("esri.support.groundUtils").warn(`Unable to find ground definition for: ${t}. Try "world-elevation"`);else e=dn(tz,t);return e}function W9(t,e,i){let r,n;if(t)for(let s=0,a=t.length;s<a;s++){if(r=t.at(s),r?.[e]===i)return r;if(r?.type==="group"&&(n=W9(r.layers,e,i),n))return n}}const m0e=t=>{const e=t;let i=class extends e{constructor(...r){super(...r),this.layers=new We;const n=o=>{o.parent&&o.removeFromParent()},s=o=>{o.parent=this,this.layerAdded(o),o.type!=="elevation"&&o.type!=="base-elevation"||$e.getLogger(this).error(`Layer 'title:${o.title}, id:${o.id}' of type '${o.type}' is not supported as an operational layer and will therefore be ignored.`)},a=o=>{o.parent=null,this.layerRemoved(o)};this.addHandles([this.layers.on("before-add",o=>{if(o.item===this)return o.preventDefault(),void $e.getLogger(this).error("#add()","Cannot add layer to itself.");n(o.item)}),this.layers.on("after-add",o=>s(o.item)),this.layers.on("after-remove",o=>a(o.item))])}destroy(){const r=this.layers.toArray();for(const n of r)n.destroy();this.layers.destroy()}removeChildLayer(r){this.layers.remove(r),super.removeChildLayer?.(r)}set layers(r){this._set("layers",$p(r,this._get("layers")))}add(r,n){const s=this.layers;if(n=s.getNextIndex(n),r instanceof Br){const a=r;a.parent===this?this.reorder(a,n):s.add(a,n)}else ho(r)?r.then(a=>{this.destroyed||this.add(a,n)}):$e.getLogger(this).error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")}addMany(r,n){const s=this.layers;let a=s.getNextIndex(n);r.slice().forEach(o=>{o.parent!==this?(s.add(o,a),a+=1):this.reorder(o,a)})}findLayerById(r){return W9(this.layers,"id",r)}findLayerByUid(r){return W9(this.layers,"uid",r)}remove(r){return this.layers.remove(r)}removeMany(r){return this.layers.removeMany(r)}removeAll(){return this.layers.removeAll()}reorder(r,n){return this.layers.reorder(r,n)}layerAdded(r){}layerRemoved(r){}};return d([m()],i.prototype,"layers",null),i=d([U("esri.support.LayersMixin")],i),i},d8e=new Set(["feature","subtype-group"]);function Y9(t,e,i){if(t)for(let r=0,n=t.length;r<n;r++){const s=t.at(r);if(s[e]===i)return s;if(s?.type==="group"){const a=Y9(s.tables,e,i);if(a)return a}}}const g0e=t=>{const e=t;let i=class extends e{constructor(...r){super(...r),this.tables=new We,this.addHandles([this.tables.on("after-add",n=>{const s=n.item;s.parent&&s.parent!==this&&s.removeFromParent(),s.parent=this,d8e.has(s.type)||$e.getLogger(this).error(`Layer 'title:${s.title}, id:${s.id}' of type '${s.type}' is not supported as a table and will therefore be ignored.`)}),this.tables.on("after-remove",n=>{n.item.parent=null})])}destroy(){const r=this.tables.toArray();for(const n of r)n.destroy();this.tables.destroy()}removeChildLayer(r){this.tables.remove(r),super.removeChildLayer?.(r)}set tables(r){this._set("tables",$p(r,this._get("tables")))}findTableById(r){return Y9(this.tables,"id",r)}findTableByUid(r){return Y9(this.tables,"uid",r)}};return d([m()],i.prototype,"tables",null),i=d([U("esri.support.TablesMixin")],i),i};let Yc=class extends g0e(m0e(Rv)){constructor(e){super(e),this.allLayers=new hu({getCollections:()=>[this.basemap?.baseLayers,this.basemap?.groundLayers,this.ground?.layers,this.layers,this.basemap?.referenceLayers],getChildrenFunction:i=>"layers"in i?i.layers:null}),this.focusAreas=new Wbe,this.allTables=f0e(this),this.basemap=null,this.editableLayers=new hu({getCollections:()=>[this.allLayers],itemFilterFunction:QBe}),this.ground=new tz,this._basemapCache=l8e(),this.addHandles(as(()=>this.ground,(i,r)=>{r?.parent===this&&(r.parent=null),i.parent=this},{sync:!0}))}destroy(){c8e(this._basemapCache),this._basemapCache=null,this.focusAreas.destroy(),this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),this.basemap=Ir(this.basemap),Ir(this.ground),this._set("ground",null)}castBasemap(e){return p0e(e,this._basemapCache)}castGround(e){return u8e(e)??this._get("ground")}findLayerById(e){return this.allLayers.find(i=>i.id===e)}findTableById(e){return this.allTables.find(i=>i.id===e)}};d([m({readOnly:!0,dependsOn:[]})],Yc.prototype,"allLayers",void 0),d([m({type:Wbe,nonNullable:!0,json:{write:{overridePolicy:t=>({enabled:t.areas.length>0,ignoreOrigin:!0})}}})],Yc.prototype,"focusAreas",void 0),d([m({readOnly:!0})],Yc.prototype,"allTables",void 0),d([m({type:dv,json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],Yc.prototype,"basemap",void 0),d([Ii("basemap")],Yc.prototype,"castBasemap",null),d([m({readOnly:!0})],Yc.prototype,"editableLayers",void 0),d([m({type:tz,nonNullable:!0})],Yc.prototype,"ground",void 0),d([Ii("ground")],Yc.prototype,"castGround",null),d([m()],Yc.prototype,"undoRedo",void 0),Yc=d([U("esri.Map")],Yc);const y0e=Yc;var tE;const iz=Gn()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),v0e=iz.jsonValues.slice();r8(v0e,"orthometric");const kC=Gn()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});let Eo=tE=class extends _e{constructor(t){super(t),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(t,e,i){return iz.write(t,e,i)}readHeightModel(t,e,i){return iz.read(t)||(i?.messages&&i.messages.push(h8e(t,{context:i})),null)}readHeightUnit(t,e,i){return kC.read(t)||(i?.messages&&i.messages.push(use(t,{context:i})),null)}readHeightUnitService(t,e,i){return rZ(t)||kC.read(t)||(i?.messages&&i.messages.push(use(t,{context:i})),null)}readVertCRS(t,e){return e.vertCRS||e.ellipsoid||e.geoid}clone(){return new tE({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(t){return!!t&&(this===t||this.heightModel===t.heightModel&&this.heightUnit===t.heightUnit&&this.vertCRS===t.vertCRS)}static deriveUnitFromSR(t,e){const i=lye(e);return new tE({heightModel:t.heightModel,heightUnit:i??void 0,vertCRS:t.vertCRS})}write(t,e){return e={origin:"web-scene",...e},super.write(t,e)}static fromJSON(t){if(!t)return null;const e=new tE;return e.read(t,{origin:"web-scene"}),e}};function use(t,e){return new kc("height-unit:unsupported",`Height unit of value '${t}' is not supported`,e)}function h8e(t,e){return new kc("height-model:unsupported",`Height model of value '${t}' is not supported`,e)}d([m({type:iz.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:v0e,default:"ellipsoidal",write:{isRequired:!0}}}}})],Eo.prototype,"heightModel",void 0),d([qe("web-scene","heightModel")],Eo.prototype,"writeHeightModel",null),d([Ve(["web-scene","service"],"heightModel")],Eo.prototype,"readHeightModel",null),d([m({type:kC.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:kC.jsonValues,write:{writer:kC.write,isRequired:!0}}}}})],Eo.prototype,"heightUnit",void 0),d([Ve("web-scene","heightUnit")],Eo.prototype,"readHeightUnit",null),d([Ve("service","heightUnit")],Eo.prototype,"readHeightUnitService",null),d([m({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],Eo.prototype,"vertCRS",void 0),d([Ve("service","vertCRS",["vertCRS","ellipsoid","geoid"])],Eo.prototype,"readVertCRS",null),Eo=tE=d([U("esri.geometry.HeightModelInfo")],Eo);let j6;async function p8e(){return j6==null&&(j6=fe(()=>import("./WhereClauseCache-Cx2Ac1a8.js"),__vite__mapDeps([25,26])).then(t=>new t.WhereClauseCache(500,500))),j6}async function RZ(t,e){const i=await p8e(),r=i.get(t,e);if(r==null)throw i.getError(t,e);return r}function EC(t,e){return t||=null,e||=null,t==="1=1"?e??t:e==="1=1"?t??e:t&&e?`(${t}) AND (${e})`:t??e}function Z9(t,e){return t||=null,e||=null,t==="1=1"||e==="1=1"||t===e?t==="1=1"?t:e:t&&e?`(${t}) OR (${e})`:t??e}function f8e(t,e){return e.length===0?null:`${t} IN (${m8e(e)})`}function m8e(t){return t.map(e=>typeof e=="string"?g8e(e):e).join(",")}function g8e(t){return`'${t.replaceAll("'","''")}'`}function y8e(t){return typeof t=="number"}function RIt(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t}function zIt(t){return typeof t=="boolean"}function QM(t){return typeof t=="string"||t instanceof String}function v8e(t){return t==null||QM(t)}function FIt(t){return Array.isArray(t)}function b0e(t){return t?.declaredClass==="esri.Graphic"}function NIt(t){return t instanceof Date}const b8e="HH:mm",w8e="HH:mm:ss",_8e="HH:mm:ss.SSS",x8e=[_8e,w8e,b8e,"TT"],S8e="yyyy-MM-dd";function dse(t){if(!t||!QM(t))return null;const e=mt.fromFormat(t,S8e);return e.isValid?e:null}function hse(t){return t&&QM(t)?iR(x8e,e=>{const i=mt.fromFormat(t,e);return i.isValid?i:null})??null:null}function pse(t){if(!t||!QM(t))return null;const e=mt.fromISO(t);return e.isValid?e:null}const w0e=new Set(["integer","small-integer","long","big-integer","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeLong","esriFieldTypeBigInteger"]);function $8e(t){return t!=null&&w0e.has(t.type)}function _0e(t){return t!=null&&(t.type==="date-only"||t.type==="esriFieldTypeDateOnly")}function x0e(t){return t!=null&&(t.type==="timestamp-offset"||t.type==="esriFieldTypeTimestampOffset")}function S0e(t){return t!=null&&(t.type==="time-only"||t.type==="esriFieldTypeTimeOnly")}const T8e=new Set(["single","double","esriFieldTypeSingle","esriFieldTypeDouble"]);WW(w0e,T8e);function jIt(t,e){const i=t?.domain;if(!i||i.type!=="range")return;const r="range"in i?i.range[0]:i.minValue,n="range"in i?i.range[1]:i.maxValue,s=$8e(t);return _0e(t)||S0e(t)||x0e(t)?{...k8e(t,n,r),isInteger:s}:{min:r!=null&&typeof r=="number"?r:null,max:n!=null&&typeof n=="number"?n:null,rawMin:r,rawMax:n,isInteger:s}}function k8e(t,e,i){return _0e(t)?{min:dse(i)?.toMillis(),max:dse(e)?.toMillis(),rawMin:i,rawMax:e}:S0e(t)?{min:hse(i)?.toMillis(),max:hse(e)?.toMillis(),rawMin:i,rawMax:e}:x0e(t)?{min:pse(i)?.toMillis(),max:pse(e)?.toMillis(),rawMin:i,rawMax:e}:{max:null,min:null}}function E8e(t){if(!t)return;const e=t.match(C8e);return e?.groups?e.groups.doubleQuoted??e.groups.singleQuoted??e.groups.dotNotation:void 0}const C8e=/^(\$feature\[(?:"(?<doubleQuoted>[^"]+)"|'(?<singleQuoted>[^']+)')\]|\$feature\.(?<dotNotation>[a-z_][a-z0-9_]*))$/i;function I8e(t){return t.match(M8e)?.[1]?.replaceAll("\\'","'")??null}const M8e=/^hash\(\$feature\['((\\'|[^'])+)'\]\) \* 8\.381e-8$/;let V6;function Xm(){return V6||(V6=(async()=>{const[t,e,i]=await Promise.all([fe(()=>import("./arcadeUtils-C21f3P-K.js"),__vite__mapDeps([161,162,163,164,165,155,30,166,17,15,18,167,26,71,168,156,157,169])),fe(()=>import("./batchExec-DbQKLWOI.js"),__vite__mapDeps([170,76])),fe(()=>import("./aiServices-CKqLbJEZ.js").then(r=>r.a),__vite__mapDeps([167,164,165,155,30,163]))]);return{arcade:t.arcade,arcadeUtils:t,batchExec:e,aiServices:i,Dictionary:t.Dictionary,Feature:t.arcadeFeature,Voxel:t.Voxel,Pixel:t.Pixel}})()),V6}const A8e=/^([0-9_])/,P8e=/[^a-z0-9_\u0080-\uffff]+/gi;function O8e(t){return t==null?null:t.trim().replaceAll(P8e,"_").replace(A8e,"F$1")||null}const L8e=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],D8e=["field","normalizationField"];function fse(t,e){if(t!=null&&e!=null){for(const i of Array.isArray(t)?t:[t])if(mse(L8e,i,e),"visualVariables"in i&&i.visualVariables)for(const r of i.visualVariables)mse(D8e,r,e)}}function mse(t,e,i){if(t)for(const r of t){const n=Mm(r,e),s=n&&typeof n!="function"&&i.get(n);s&&Bn(r,s.name,e)}}function $0e(t,e){if(t!=null&&e?.fields?.length)if("startField"in t){const i=e.get(t.startField),r=e.get(t.endField);t.startField=i?.name??null,t.endField=r?.name??null}else{const i=e.get(t.startTimeField),r=e.get(t.endTimeField);t.startTimeField=i?.name??null,t.endTimeField=r?.name??null}}const B6=new Set;function bN(t,e){return t&&e?(B6.clear(),Iv(B6,t,e),Array.from(B6).sort()):[]}function Iv(t,e,i){if(i)if(e?.fields?.length)if(i.includes("*"))for(const{name:r}of e.fields)t.add(r);else for(const r of i)fo(t,e,r);else{if(i.includes("*"))return t.clear(),void t.add("*");for(const r of i)r!=null&&t.add(r)}}function fo(t,e,i){if(typeof i=="string")if(e){const r=e.get(i);r&&t.add(r.name)}else t.add(i)}function VIt(t,e){return e==null||t==null?[]:e.includes("*")?(t.fields??[]).map(i=>i.name):e}function BIt(t,e,i=1){if(!e||!t)return[];if(e.includes("*"))return["*"];const r=bN(t,e);return r.length/t.fields.length>=i?["*"]:r}async function La(t,e,i,r){if(!r)return;const n=E8e(r);if(n)fo(t,e,n);else{const{arcadeUtils:s}=await Xm(),a=s.extractFieldNames(r,i?.partitions??e?.fields?.map(o=>o.name));for(const o of a)fo(t,i?.index??e,o)}}async function zZ(t,e,i){if(i&&i!=="1=1"){const r=await RZ(i,e);if(!r.isStandardized)throw new ee("fieldUtils:collectFilterFields","Where clause is not standardized",{where:i});Iv(t,e,r.fieldNames)}}function R8e({displayField:t,fields:e}){return t||(e?.length?z8e(e):null)}function z8e(t){return U6(t,"name-or-title")||U6(t,"unique-identifier")||U6(t,"type-or-category")||F8e(t)}function F8e(t){for(const e of t){if(!e?.name)continue;const i=e.name.toLowerCase();if(i.includes("name")||i.includes("title"))return e.name}return null}function U6(t,e){for(const i of t)if(i?.valueType&&i.valueType===e)return i.name;return null}async function UIt(t,e){if(!e)return;const i=e.elevationInfo?.featureExpressionInfo;return i?i.collectRequiredFields(t,e.fieldsIndex):void 0}function N8e(t,e,i){i.onStatisticExpression?La(t,e,null,i.onStatisticExpression.expression):t.add(i.onStatisticField)}async function HIt(t,e,i){if(!e||!i||!("fields"in i))return;const r=[],n=i.popupTemplate;r.push(T0e(t,e,n)),i.fields&&r.push(...i.fields.map(async s=>N8e(t,e.fieldsIndex,s))),await Promise.all(r)}async function GIt(t,e){const{fieldsIndex:i,trackInfo:r}=e;if(!e||!r||!i)return;const n=[r.latestObservations.renderer?.collectRequiredFields(t,i),r.previousObservations.renderer?.collectRequiredFields(t,i),r.trackLines.renderer?.collectRequiredFields(t,i)];r.popupTemplate&&n.push(T0e(t,e,r.popupTemplate));for(const s of[r.latestObservations.labelingInfo,r.previousObservations.labelingInfo,r.trackLines.labelingInfo])if(s)for(const a of s)n.push(I0e(t,i,a));await Promise.all(n)}async function T0e(t,e,i){const r=[];i?.expressionInfos&&r.push(...i.expressionInfos.map(s=>La(t,e.fieldsIndex,null,s.expression)));const n=i?.content;if(Array.isArray(n))for(const s of n)s.type==="expression"&&s.expressionInfo&&r.push(La(t,e.fieldsIndex,null,s.expressionInfo.expression));await Promise.all(r)}async function qIt(t,e,i){e&&(e.timeInfo&&i?.timeExtent&&Iv(t,e.fieldsIndex,[e.timeInfo.startField,e.timeInfo.endField]),e.floorInfo&&Iv(t,e.fieldsIndex,[e.floorInfo.floorField]),i?.where!=null&&await zZ(t,e.fieldsIndex,i.where))}async function WIt(t,e,i){e&&i&&await Promise.all(i.map(r=>j8e(t,e,r)))}async function j8e(t,e,i){e&&i&&(i.valueExpression?await La(t,e.fieldsIndex,null,i.valueExpression):i.field&&fo(t,e.fieldsIndex,i.field))}function YIt(t){return t?bN(t.fieldsIndex,k0e(t)):[]}function V8e(t){if(!t)return[];const e=t.geometryFieldsInfo;return e?bN(t.fieldsIndex,[e.shapeAreaField,e.shapeLengthField]):[]}async function ZIt(t,e,i){if(!e||!i)return;const r=e.fieldsIndex;await Promise.all(i.filters.map(n=>zZ(t,r,n.where)))}const B8e=new Set(["oid","global-id","guid"]),U8e=new Set(["oid","global-id"]),H8e=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^shape$/i,/^shape_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/objectid/i,/^perimeter_/i,/_perimeter$/i,/_i$/i];function G8e(t){const e=new Set;E0e(t).forEach(r=>e.add(r)),V8e(t).forEach(r=>e.add(r.toLowerCase()));const i=t&&"infoFor3D"in t?t.infoFor3D:void 0;return i&&(Object.values(i.assetMapFieldRoles).forEach(r=>e.add(r.toLowerCase())),Object.values(i.transformFieldRoles).forEach(r=>e.add(r.toLowerCase()))),Array.from(e)}function k0e(t){if(!t)return[];const e="editFieldsInfo"in t&&t.editFieldsInfo;if(!e)return[];const{creationDateField:i,creatorField:r,editDateField:n,editorField:s}=e;return[i,r,n,s].filter(Boolean)}function E0e(t){return k0e(t).map(e=>e.toLowerCase())}function C0e(t,e){return t.editable&&!B8e.has(t.type)&&!E0e(e).includes(t.name?.toLowerCase()??"")}function q8e(t,e){const i=t.name?.toLowerCase()??"";return!(e?.objectIdField!=null&&i===e.objectIdField.toLowerCase()||e?.globalIdField!=null&&i===e.globalIdField.toLowerCase()||G8e(e).includes(i)||U8e.has(t.type)||H8e.some(r=>r.test(i)))}async function XIt(t,e){const{labelingInfo:i,fieldsIndex:r}=e;i?.length&&await Promise.all(i.map(n=>I0e(t,r,n)))}async function I0e(t,e,i){if(!i)return;const r=i.getLabelExpression(),n=i.where;if(r.type==="arcade")await La(t,e,null,r.expression);else{const s=r.expression.match(/{[^}]*}/g);s&&s.forEach(a=>{fo(t,e,a.slice(1,-1))})}await zZ(t,e,n)}function W8e(t){const e=t.defaultValue;return e!==void 0&&A0e(t,e)?e:t.nullable?null:void 0}function JIt(t){const e=typeof t=="string"?{type:t}:t;return O0e(e)?255:e.type==="esriFieldTypeDate"||e.type==="date"?8:void 0}function M0e(t){return typeof t=="number"&&!isNaN(t)&&isFinite(t)}function Y8e(t){return t===null||M0e(t)}function Z8e(t){return t===null||Number.isInteger(t)}function X8e(){return!0}function A0e(t,e){let i;switch(t.type){case"date":case"integer":case"long":case"small-integer":case"big-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":case"esriFieldTypeBigInteger":i=t.nullable?Z8e:Number.isInteger;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":i=t.nullable?Y8e:M0e;break;case"string":case"esriFieldTypeString":i=t.nullable?v8e:QM;break;default:i=X8e}return arguments.length===1?i:i(e)}const J8e=["integer","small-integer","big-integer","long"],K8e=["single","double"],Q8e=["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeLong","esriFieldTypeBigInteger"],e9e=["esriFieldTypeSingle","esriFieldTypeDouble"],P0e=new Set([...J8e,...Q8e]),t9e=new Set([...K8e,...e9e]),i9e=WW(P0e,t9e);function r9e(t){return t!=null&&P0e.has(t.type)}function FZ(t){return t!=null&&i9e.has(t.type)}function O0e(t){return t!=null&&(t.type==="string"||t.type==="esriFieldTypeString")}function wN(t){return t!=null&&(t.type==="date"||t.type==="esriFieldTypeDate")}function L0e(t){return t!=null&&(t.type==="date-only"||t.type==="esriFieldTypeDateOnly")}function D0e(t){return t!=null&&(t.type==="timestamp-offset"||t.type==="esriFieldTypeTimestampOffset")}function R0e(t){return t!=null&&(t.type==="time-only"||t.type==="esriFieldTypeTimeOnly")}function gse(t){return t!=null&&(t.type==="oid"||t.type==="esriFieldTypeOID")}function yse(t){return t!=null&&(t.type==="global-id"||t.type==="esriFieldTypeGlobalID")}function KIt(t,e){return n9e(t,e)===null}function QIt(t){return t==null||typeof t=="number"&&isNaN(t)?null:t}function n9e(t,e){return t==null||t.nullable&&e===null?null:A0e(t,e)?FZ(t)&&!s9e(t.type,Number(e))?"numeric-range-validation-error::out-of-range":null:"type-validation-error::invalid-type"}function s9e(t,e){const i=typeof t=="string"?z0e(t):t;if(!i)return!1;const r=i.min,n=i.max;return i.isInteger?Number.isInteger(e)&&e>=r&&e<=n:e>=r&&e<=n}function z0e(t){switch(t){case"esriFieldTypeSmallInteger":case"small-integer":return a9e;case"esriFieldTypeInteger":case"esriFieldTypeLong":case"integer":case"long":return o9e;case"esriFieldTypeBigInteger":case"big-integer":return l9e;case"esriFieldTypeSingle":case"single":return c9e;case"esriFieldTypeDouble":case"double":return u9e}}const a9e={min:-32768,max:32767,isInteger:!0,rawMin:-32768,rawMax:32767},o9e={min:-2147483648,max:2147483647,isInteger:!0,rawMin:-2147483648,rawMax:2147483647},l9e={min:-Number.MAX_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,isInteger:!0,rawMin:-Number.MAX_SAFE_INTEGER,rawMax:Number.MAX_SAFE_INTEGER},SO=(2-2**-23)*2**127,c9e={min:-SO,max:SO,isInteger:!1,rawMin:-SO,rawMax:SO},u9e={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1,rawMin:-Number.MAX_VALUE,rawMax:Number.MAX_VALUE};function eMt(t,e,i){switch(t){case"domain-validation-error::invalid-coded-value":return`Value ${i} is not in the coded domain - field: ${e.name}, domain: ${JSON.stringify(e.domain)}`;case"domain-validation-error::value-out-of-range":return`Value ${i} is out of the range of valid values - field: ${e.name}, domain: ${JSON.stringify(e.domain)}`;case"type-validation-error::invalid-type":return`Value ${i} is not a valid value for the field type - field: ${e.name}, type: ${e.type}, nullable: ${e.nullable}`;case"numeric-range-validation-error::out-of-range":{const{min:r,max:n}=z0e(e.type);return`Value ${i} is out of range for the number type - field: ${e.name}, type: ${e.type}, value range is ${r} to ${n}`}}}function d9e(t,e){return!h9e(t,e,null)}function h9e(t,e,i){if(!t?.attributes||!e)return!0;const r=new Set(Object.keys(t.attributes));let n=!1;for(const s of e)if(!r.has(s)&&(n=!0,i==null))break;return n}function p9e(t){return!!t&&["raster.itempixelvalue","raster.servicepixelvalue"].some(e=>t.toLowerCase().startsWith(e))}function NZ(t){const e=t?.match(/{[^}]+}/g);return e?e.map(i=>i.slice(1,-1).split(":")[0].trim()):[]}let D3=class extends _e{constructor(e){super(e),this.type=null}};d([m({type:["attachments","custom","fields","media","text","expression","relationship","utility-network-associations"],readOnly:!0,json:{read:!1,write:!0}})],D3.prototype,"type",void 0),D3=d([U("esri.popup.content.Content")],D3);const ag=D3,$O=new Gt({asc:"ascending",desc:"descending"});let iE=class extends $t(_e){constructor(e){super(e),this.field=null,this.order="ascending"}};d([m({type:String,json:{write:!0}})],iE.prototype,"field",void 0),d([m({type:$O.apiValues,json:{type:$O.jsonValues,read:$O.read,write:$O.write}})],iE.prototype,"order",void 0),iE=d([U("esri.popup.support.AttachmentsOrderByInfo")],iE);const f9e=iE;let yh=class extends $t(ag){constructor(e){super(e),this.attachmentKeywords=null,this.attachmentTypes=null,this.description=null,this.displayType="auto",this.orderByFields=null,this.title=null,this.type="attachments"}};d([m({type:[String],json:{write:!0}})],yh.prototype,"attachmentKeywords",void 0),d([m({type:[["application","audio","image","model","text","video"]],json:{write:!0}})],yh.prototype,"attachmentTypes",void 0),d([m({type:String,json:{write:!0}})],yh.prototype,"description",void 0),d([m({type:["auto","preview","list"],json:{write:!0}})],yh.prototype,"displayType",void 0),d([m({type:[f9e],json:{write:!0}})],yh.prototype,"orderByFields",void 0),d([m({type:String,json:{write:!0}})],yh.prototype,"title",void 0),d([m({type:["attachments"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],yh.prototype,"type",void 0),yh=d([U("esri.popup.content.AttachmentsContent")],yh);const eT=yh;var X9;let qb=X9=class extends ag{constructor(t){super(t),this.creator=null,this.destroyer=null,this.outFields=null,this.type="custom"}clone(){return new X9({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?de(this.outFields):null})}};d([m()],qb.prototype,"creator",void 0),d([m()],qb.prototype,"destroyer",void 0),d([m()],qb.prototype,"outFields",void 0),d([m({type:["custom"],readOnly:!0})],qb.prototype,"type",void 0),qb=X9=d([U("esri.popup.content.CustomContent")],qb);const m9e=qb;var J9;let px=J9=class extends _e{constructor(t){super(t),this.title=null,this.expression=null,this.returnType="dictionary"}clone(){return new J9({title:this.title,expression:this.expression})}};d([m({type:String,json:{write:!0}})],px.prototype,"title",void 0),d([m({type:String,json:{write:!0}})],px.prototype,"expression",void 0),d([m({type:["dictionary"],readOnly:!0,json:{read:!1,write:!0}})],px.prototype,"returnType",void 0),px=J9=d([U("esri.popup.ElementExpressionInfo")],px);const g9e=px;var K9;let rE=K9=class extends ag{constructor(t){super(t),this.expressionInfo=null,this.type="expression"}clone(){return new K9({expressionInfo:this.expressionInfo?.clone()})}};d([m({type:g9e,json:{write:!0}})],rE.prototype,"expressionInfo",void 0),d([m({type:["expression"],readOnly:!0,json:{read:!1,write:!0}})],rE.prototype,"type",void 0),rE=K9=d([U("esri.popup.content.ExpressionContent")],rE);const _N=rE;let R3=class extends $t(_e){constructor(e){super(e),this.type=null}};d([m({type:["date-time","number"],nonNullable:!0,readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],R3.prototype,"type",void 0),R3=d([U("esri.layers.support.FieldFormat")],R3);const jZ=R3,F0e="auto";let Vf=class extends jZ{constructor(e){super(e),this.dateStyle=null,this.hour12=F0e,this.month=null,this.timeStyle=null,this.type="date-time",this.year=null}};d([m({type:["full","long","medium","short"],json:{write:!0}})],Vf.prototype,"dateStyle",void 0),d([m({type:["always","auto","never"],nonNullable:!0,json:{default:F0e,write:!0}})],Vf.prototype,"hour12",void 0),d([m({type:["long","short"],json:{write:!0}})],Vf.prototype,"month",void 0),d([m({type:["full","long","medium","short"],json:{write:!0}})],Vf.prototype,"timeStyle",void 0),d([m({type:["date-time"]})],Vf.prototype,"type",void 0),d([m({type:["numeric"],json:{write:!0}})],Vf.prototype,"year",void 0),Vf=d([U("esri.layers.support.DateTimeFieldFormat")],Vf);const hv=Vf,vse={min:0,max:20},N0e=2,j0e=0,V0e="decimal",B0e="auto";let fy=class extends jZ{constructor(e){super(e),this.maximumFractionDigits=N0e,this.minimumFractionDigits=j0e,this.style=V0e,this.type="number",this.useGrouping=B0e}};d([m({type:li,nonNullable:!0,range:vse,json:{default:N0e,write:!0}})],fy.prototype,"maximumFractionDigits",void 0),d([m({type:li,nonNullable:!0,range:vse,json:{default:j0e,write:!0}})],fy.prototype,"minimumFractionDigits",void 0),d([m({type:["decimal"],nonNullable:!0,json:{default:V0e,write:!0}})],fy.prototype,"style",void 0),d([m({type:["number"]})],fy.prototype,"type",void 0),d([m({type:["always","auto","never"],nonNullable:!0,json:{default:B0e,write:!0}})],fy.prototype,"useGrouping",void 0),fy=d([U("esri.layers.support.NumberFieldFormat")],fy);const rz=fy;let fx=class extends $t(_e){constructor(e){super(e),this.dateFormat=null,this.digitSeparator=!1,this.places=null}};d([pt(I3e)],fx.prototype,"dateFormat",void 0),d([m({type:Boolean,json:{write:!0}})],fx.prototype,"digitSeparator",void 0),d([m({type:li,json:{write:!0}})],fx.prototype,"places",void 0),fx=d([U("esri.popup.support.FieldInfoFormat")],fx);const kp=fx,U0e={base:jZ,key:"type",errorContext:"field-configuration-field-format",typeMap:{"date-time":hv,number:rz}};function y9e(t,e){const{format:i}=t;return e&&S_(e)?i?H0e(i,e):CC(e,{hour12:"always",useGrouping:"always"}):null}function H0e(t,e){const{dateFormat:i}=t;if(!e)return i?wse(t):bse(t);if(!S_(e))return;const r={hour12:"always"};switch(e.type){case"integer":case"small-integer":case"big-integer":case"long":return G0e(t);case"single":case"double":return bse(t);case"date":case"timestamp-offset":return i?wse(t):CC(e,r);case"date-only":return i?v9e(t):CC(e);case"time-only":return i?b9e(t):CC(e,r)}}function S_(t){return FZ(t)||wN(t)||L0e(t)||R0e(t)||D0e(t)}function G0e(t){return new rz({useGrouping:t.digitSeparator?"always":"never"})}function bse(t){const e=G0e(t),{places:i}=t;return e.minimumFractionDigits=i??0,e.maximumFractionDigits=i??2,e}function wse(t){return new hv({dateStyle:q0e(t),year:X0e(t),month:Y0e(t),timeStyle:Z0e(t),hour12:W0e(t)})}function v9e(t){return new hv({dateStyle:q0e(t),year:X0e(t),month:Y0e(t)})}function b9e(t){return new hv({timeStyle:Z0e(t),hour12:W0e(t)})}function q0e(t){const{dateFormat:e}=t;return e?e.startsWith("short-date")?"short":e.startsWith("day-short-month-year")?"medium":e.startsWith("long-month-day-year")?"long":e.startsWith("long-date")?"full":null:null}function W0e(t){return t.dateFormat?.endsWith("-24")?"never":"always"}function Y0e(t){switch(t.dateFormat){case"short-month-year":return"short";case"long-month-year":return"long";default:return null}}function Z0e(t){const{dateFormat:e}=t;return e?e.includes("short-time")?"short":e.includes("long-time")?"medium":null:null}function X0e(t){switch(t.dateFormat){case"short-month-year":case"long-month-year":case"year":return"numeric";default:return null}}function VZ(t,e){const i=t.type==="number",r=t.type==="date-time";if(!e)return i?_se(t):r?xse(t):null;if(S_(e))switch(e.type){case"integer":case"small-integer":case"big-integer":case"long":return i?J0e(t):null;case"single":case"double":return i?_se(t):null;case"date":case"timestamp-offset":return r?xse(t):null;case"date-only":return r?w9e(t):null;case"time-only":return r?_9e(t):null}}function J0e(t){return new kp({digitSeparator:t.useGrouping!=="never"})}function _se(t){const e=J0e(t);return e.places=t.maximumFractionDigits,e}function xse(t){let e;const i=K0e(t),r=Q0e(t),n=t.hour12==="never"?"24":null,s=t.year==="numeric"?"year":null,a=ewe(t);return i&&r&&n?e=`${i}-${r}-${n}`:i&&r?e=`${i}-${r}`:i?e=i:s&&a?e=`${a}-${s}`:s&&(e=s),e?new kp({dateFormat:e}):null}function w9e(t){let e;const i=K0e(t),r=t.year==="numeric"?"year":null,n=ewe(t);return i?e=i:r&&n?e=`${n}-${r}`:r&&(e=r),e?new kp({dateFormat:e}):null}function _9e(t){let e;const i=Q0e(t),r=t.hour12==="never"?"24":null;return i&&r?e=`short-date-${i}-${r}`:i&&(e=`short-date-${i}`),e?new kp({dateFormat:e}):null}function K0e(t){switch(t.dateStyle){case"short":return"short-date";case"medium":return"day-short-month-year";case"long":return"long-month-day-year";case"full":return"long-date";default:return}}function Q0e(t){return t.timeStyle&&(t.timeStyle==="short"?"short-time":"long-time")}function ewe(t){switch(t.month){case"short":return"short-month";case"long":return"long-month";default:return}}function CC(t,e){if(!S_(t))return;const i=e?.useGrouping??"auto",r=e?.hour12??"auto";switch(t.type){case"integer":case"small-integer":case"big-integer":case"long":return new rz({minimumFractionDigits:0,maximumFractionDigits:0,useGrouping:i});case"single":case"double":return new rz({minimumFractionDigits:0,maximumFractionDigits:2,useGrouping:i});case"date":case"timestamp-offset":return new hv({dateStyle:"short",timeStyle:"short",hour12:r});case"date-only":return new hv({dateStyle:"short"});case"time-only":return new hv({timeStyle:"short",hour12:r})}}let Yl=class extends $t(_e){constructor(e){super(e),this.fieldName=null,this.isEditable=!0,this.label=null,this.statisticType=null,this.stringFieldOption="text-box",this.tooltip=null,this.visible=!0}set fieldFormat(e){this._set("fieldFormat",e),this._set("format",e?VZ(e):null)}set format(e){this._set("format",e),this._set("fieldFormat",e?H0e(e):null)}readFormat(e,i){if(!i.fieldFormat)return e?kp.fromJSON(e):null}clone(){const e=super.clone();return e._set("format",this.format?.clone()),e._set("fieldFormat",this.fieldFormat?.clone()),e}};d([m({value:null,clonable:!1,types:U0e,json:{write:{overridePolicy(t,e,i){const{fieldName:r}=this;return{enabled:!!r&&!r.startsWith("expression/")&&!r.startsWith("relationships/")&&!!i?.writeFieldFormat}}}}})],Yl.prototype,"fieldFormat",null),d([m({type:String,json:{write:!0}})],Yl.prototype,"fieldName",void 0),d([m({value:null,clonable:!1,type:kp,json:{write:!0}})],Yl.prototype,"format",null),d([Ve("format")],Yl.prototype,"readFormat",null),d([m({type:Boolean,json:{write:{alwaysWriteDefaults:!0},default:!0}})],Yl.prototype,"isEditable",void 0),d([m({type:String,json:{write:!0}})],Yl.prototype,"label",void 0),d([m({type:["count","sum","min","max","avg","stddev","var"],json:{write:!0}})],Yl.prototype,"statisticType",void 0),d([pt(new Gt({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),{default:"text-box"})],Yl.prototype,"stringFieldOption",void 0),d([m({type:String,json:{write:!0}})],Yl.prototype,"tooltip",void 0),d([m({type:Boolean,json:{write:!0}})],Yl.prototype,"visible",void 0),Yl=d([U("esri.popup.FieldInfo")],Yl);const xN=Yl;var Q9;let my=Q9=class extends ag{constructor(t){super(t),this.attributes=null,this.description=null,this.fieldInfos=null,this.title=null,this.type="fields"}clone(){return new Q9(de({attributes:this.attributes,description:this.description,fieldInfos:this.fieldInfos,title:this.title}))}};d([m({type:Object,json:{write:!0}})],my.prototype,"attributes",void 0),d([m({type:String,json:{write:!0}})],my.prototype,"description",void 0),d([m({type:[xN],json:{write:!0}})],my.prototype,"fieldInfos",void 0),d([m({type:String,json:{write:!0}})],my.prototype,"title",void 0),d([m({type:["fields"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],my.prototype,"type",void 0),my=Q9=d([U("esri.popup.content.FieldsContent")],my);const tT=my;let Wb=class extends _e{constructor(e){super(e),this.altText=null,this.caption="",this.title="",this.type=null}};d([m({type:String,json:{write:!0}})],Wb.prototype,"altText",void 0),d([m({type:String,json:{write:!0}})],Wb.prototype,"caption",void 0),d([m({type:String,json:{write:!0}})],Wb.prototype,"title",void 0),d([m({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],Wb.prototype,"type",void 0),Wb=d([U("esri.popup.content.mixins.MediaInfo")],Wb);const BZ=Wb;var e7;let Yb=e7=class extends lt{constructor(t){super(t),this.color=null,this.fieldName=null,this.tooltip=null,this.value=null}clone(){return new e7({color:this.color?.clone(),fieldName:this.fieldName,tooltip:this.tooltip,value:this.value})}};d([m()],Yb.prototype,"color",void 0),d([m()],Yb.prototype,"fieldName",void 0),d([m()],Yb.prototype,"tooltip",void 0),d([m()],Yb.prototype,"value",void 0),Yb=e7=d([U("esri.popup.content.support.ChartMediaInfoValueSeries")],Yb);const x9e=Yb;var t7;let gy=t7=class extends _e{constructor(t){super(t),this.colors=null,this.fields=[],this.normalizeField=null,this.series=[],this.tooltipField=null}clone(){return new t7({colors:de(this.colors),fields:de(this.fields),normalizeField:this.normalizeField,series:de(this.series),tooltipField:this.tooltipField})}};d([m({type:[Ye],json:{type:[[li]],write:!0}})],gy.prototype,"colors",void 0),d([m({type:[String],json:{write:{isRequired:!0}}})],gy.prototype,"fields",void 0),d([m({type:String,json:{write:!0}})],gy.prototype,"normalizeField",void 0),d([m({type:[x9e],json:{read:!1}})],gy.prototype,"series",void 0),d([m({type:String,json:{write:!0}})],gy.prototype,"tooltipField",void 0),gy=t7=d([U("esri.popup.content.support.ChartMediaInfoValue")],gy);const S9e=gy;let nE=class extends BZ{constructor(e){super(e),this.type=null,this.value=void 0}};d([m({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],nE.prototype,"type",void 0),d([m({type:S9e,json:{write:{isRequired:!0}}})],nE.prototype,"value",void 0),nE=d([U("esri.popup.content.mixins.ChartMediaInfo")],nE);const SN=nE,$N=Gn()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"});var i7;let z3=i7=class extends SN{constructor(t){super(t),this.type="bar-chart"}clone(){return new i7({altText:this.altText,title:this.title,caption:this.caption,value:this.value?.clone()})}};d([m({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:{writer:$N.write,isRequired:!0}}})],z3.prototype,"type",void 0),z3=i7=d([U("esri.popup.content.BarChartMediaInfo")],z3);const twe=z3;var r7;let F3=r7=class extends SN{constructor(t){super(t),this.type="column-chart"}clone(){return new r7({altText:this.altText,title:this.title,caption:this.caption,value:this.value?.clone()})}};d([m({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:{writer:$N.write,isRequired:!0}}})],F3.prototype,"type",void 0),F3=r7=d([U("esri.popup.content.ColumnChartMediaInfo")],F3);const iwe=F3;var n7;let sE=n7=class extends _e{constructor(t){super(t),this.linkURL=null,this.sourceURL=null}clone(){return new n7({linkURL:this.linkURL,sourceURL:this.sourceURL})}};d([m({type:String,json:{write:!0}})],sE.prototype,"linkURL",void 0),d([m({type:String,json:{write:{isRequired:!0}}})],sE.prototype,"sourceURL",void 0),sE=n7=d([U("esri.popup.content.support.ImageMediaInfoValue")],sE);const $9e=sE;var s7;let mx=s7=class extends BZ{constructor(t){super(t),this.refreshInterval=0,this.type="image",this.value=void 0}clone(){return new s7({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:this.value?.clone()})}};d([m({type:Number,json:{write:!0}})],mx.prototype,"refreshInterval",void 0),d([m({type:["image"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],mx.prototype,"type",void 0),d([m({type:$9e,json:{write:{isRequired:!0}}})],mx.prototype,"value",void 0),mx=s7=d([U("esri.popup.content.ImageMediaInfo")],mx);const rwe=mx;var a7;let N3=a7=class extends SN{constructor(t){super(t),this.type="line-chart"}clone(){return new a7({altText:this.altText,title:this.title,caption:this.caption,value:this.value?.clone()})}};d([m({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:{writer:$N.write,isRequired:!0}}})],N3.prototype,"type",void 0),N3=a7=d([U("esri.popup.content.LineChartMediaInfo")],N3);const nwe=N3;var o7;let j3=o7=class extends SN{constructor(t){super(t),this.type="pie-chart"}clone(){return new o7({altText:this.altText,title:this.title,caption:this.caption,value:this.value?.clone()})}};d([m({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:{writer:$N.write,isRequired:!0}}})],j3.prototype,"type",void 0),j3=o7=d([U("esri.popup.content.PieChartMediaInfo")],j3);const swe=j3,l7={base:BZ,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":twe,"column-chart":iwe,"line-chart":nwe,"pie-chart":swe,image:rwe}};var c7;let sd=c7=class extends ag{constructor(t){super(t),this.activeMediaInfoIndex=null,this.attributes=null,this.description=null,this.mediaInfos=null,this.title=null,this.type="media"}readMediaInfos(t){return t&&t.map(e=>e.type==="image"?rwe.fromJSON(e):e.type==="barchart"?twe.fromJSON(e):e.type==="columnchart"?iwe.fromJSON(e):e.type==="linechart"?nwe.fromJSON(e):e.type==="piechart"?swe.fromJSON(e):void 0).filter(Boolean)}writeMediaInfos(t,e){e.mediaInfos=t&&t.map(i=>i.toJSON())}clone(){return new c7(de({activeMediaInfoIndex:this.activeMediaInfoIndex,attributes:this.attributes,description:this.description,mediaInfos:this.mediaInfos,title:this.title}))}};d([m()],sd.prototype,"activeMediaInfoIndex",void 0),d([m({type:Object,json:{write:!0}})],sd.prototype,"attributes",void 0),d([m({type:String,json:{write:!0}})],sd.prototype,"description",void 0),d([m({types:[l7]})],sd.prototype,"mediaInfos",void 0),d([Ve("mediaInfos")],sd.prototype,"readMediaInfos",null),d([qe("mediaInfos")],sd.prototype,"writeMediaInfos",null),d([m({type:String,json:{write:!0}})],sd.prototype,"title",void 0),d([m({type:["media"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],sd.prototype,"type",void 0),sd=c7=d([U("esri.popup.content.MediaContent")],sd);const LI=sd;var u7;let aE=u7=class extends _e{constructor(t){super(t),this.field=null,this.order=null}clone(){return new u7({field:this.field,order:this.order})}};d([m({type:String,json:{write:!0}})],aE.prototype,"field",void 0),d([m({type:["asc","desc"],json:{write:!0}})],aE.prototype,"order",void 0),aE=u7=d([U("esri.popup.support.RelatedRecordsInfoFieldOrder")],aE);const UZ=aE;let vh=class extends $t(ag){constructor(e){super(e),this.description=null,this.displayCount=null,this.displayType="list",this.orderByFields=null,this.relationshipId=null,this.title=null,this.type="relationship"}};d([m({type:String,json:{write:!0}})],vh.prototype,"description",void 0),d([m({type:Number,json:{type:li,write:!0}})],vh.prototype,"displayCount",void 0),d([m({type:["list"],json:{write:{isRequired:!0}}})],vh.prototype,"displayType",void 0),d([m({type:[UZ],json:{write:!0}})],vh.prototype,"orderByFields",void 0),d([m({type:Number,json:{type:li,write:{isRequired:!0}}})],vh.prototype,"relationshipId",void 0),d([m({type:String,json:{write:!0}})],vh.prototype,"title",void 0),d([m({type:["relationship"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],vh.prototype,"type",void 0),vh=d([U("esri.popup.content.RelationshipContent")],vh);const DI=vh;var d7;let oE=d7=class extends ag{constructor(t){super(t),this.text=null,this.type="text"}clone(){return new d7({text:this.text})}};d([m({type:String,json:{write:!0}})],oE.prototype,"text",void 0),d([m({type:["text"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],oE.prototype,"type",void 0),oE=d7=d([U("esri.popup.content.TextContent")],oE);const RI=oE;let Bf=class extends $t(_e){constructor(e){super(e),this.title=null,this.description=null,this.type=null,this.associatedNetworkSourceId=null,this.associatedAssetGroup=null,this.associatedAssetType=null}};d([m({type:String,json:{write:!0}})],Bf.prototype,"title",void 0),d([m({type:String,json:{write:!0}})],Bf.prototype,"description",void 0),d([m({type:["attachment","connectivity","container","content","structure"],json:{write:!0}})],Bf.prototype,"type",void 0),d([m({type:Number,json:{type:li,write:!0}})],Bf.prototype,"associatedNetworkSourceId",void 0),d([m({type:Number,json:{type:li,write:!0}})],Bf.prototype,"associatedAssetGroup",void 0),d([m({type:Number,json:{type:li,write:!0}})],Bf.prototype,"associatedAssetType",void 0),Bf=d([U("esri.popup.support.UtilityNetworkAssociationType")],Bf);const awe=Bf;let yy=class extends $t(ag){constructor(e){super(e),this.description=null,this.displayCount=null,this.title=null,this.associationTypes=[],this.type="utility-network-associations"}};d([m({type:String,json:{write:!0}})],yy.prototype,"description",void 0),d([m({type:Number,json:{type:li,write:!0}})],yy.prototype,"displayCount",void 0),d([m({type:String,json:{write:!0}})],yy.prototype,"title",void 0),d([m({type:[awe],json:{write:!0}})],yy.prototype,"associationTypes",void 0),d([pt({utilityNetworkAssociations:"utility-network-associations"})],yy.prototype,"type",void 0),yy=d([U("esri.popup.content.UtilityNetworkAssociationsContent")],yy);const HZ=yy,T9e={base:null,key:"type",typeMap:{attachment:eT,media:LI,text:RI,expression:_N,field:tT,relationship:DI,utilityNetworkAssociations:HZ}},k9e={base:null,key:"type",typeMap:{attachment:eT,media:LI,text:RI,expression:_N,field:tT,relationship:DI}};var h7;let Zb=h7=class extends _e{constructor(t){super(t),this.name=null,this.title=null,this.expression=null,this.returnType=null}clone(){return new h7({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};d([m({type:String,json:{write:!0}})],Zb.prototype,"name",void 0),d([m({type:String,json:{write:!0}})],Zb.prototype,"title",void 0),d([m({type:String,json:{write:!0}})],Zb.prototype,"expression",void 0),d([m({type:["string","number"],json:{write:!0}})],Zb.prototype,"returnType",void 0),Zb=h7=d([U("esri.popup.ExpressionInfo")],Zb);const E9e=Zb;var p7;let lE=p7=class extends _e{constructor(t){super(t),this.returnTopmostRaster=null,this.showNoDataRecords=null}clone(){return new p7({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})}};d([m({type:Boolean,json:{write:!0}})],lE.prototype,"returnTopmostRaster",void 0),d([m({type:Boolean,json:{write:!0}})],lE.prototype,"showNoDataRecords",void 0),lE=p7=d([U("esri.popup.LayerOptions")],lE);const C9e=lE;var f7;let cE=f7=class extends _e{constructor(t){super(t),this.showRelatedRecords=null,this.orderByFields=null}clone(){return new f7({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?de(this.orderByFields):null})}};d([m({type:Boolean,json:{write:!0}})],cE.prototype,"showRelatedRecords",void 0),d([m({type:[UZ],json:{write:!0}})],cE.prototype,"orderByFields",void 0),cE=f7=d([U("esri.popup.RelatedRecordsInfo")],cE);const Sse=cE;var m7;let Zc=m7=class extends sg(lt){constructor(t){super(t),this.active=!1,this.className=null,this.disabled=!1,this.icon=null,this.id=null,this.indicator=!1,this.title=null,this.type=null,this.visible=!0}clone(){return new m7({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}};d([m()],Zc.prototype,"active",void 0),d([m()],Zc.prototype,"className",void 0),d([m()],Zc.prototype,"disabled",void 0),d([m()],Zc.prototype,"icon",void 0),d([m()],Zc.prototype,"id",void 0),d([m()],Zc.prototype,"indicator",void 0),d([m()],Zc.prototype,"title",void 0),d([m()],Zc.prototype,"type",void 0),d([m()],Zc.prototype,"visible",void 0),Zc=m7=d([U("esri.support.actions.ActionBase")],Zc);const TN=Zc;var g7;let V3=g7=class extends TN{constructor(t){super(t),this.image=null,this.type="button"}clone(){return new g7({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}};d([m()],V3.prototype,"image",void 0),V3=g7=d([U("esri.support.actions.ActionButton")],V3);const owe=V3;var y7;let uE=y7=class extends TN{constructor(t){super(t),this.image=null,this.type="toggle",this.value=!1}clone(){return new y7({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}};d([m()],uE.prototype,"image",void 0),d([m()],uE.prototype,"value",void 0),uE=y7=d([U("esri.support.actions.ActionToggle")],uE);const lwe=uE,m2="relationships/",$se="expression/",I9e=We.ofType({key:"type",defaultKeyValue:"button",base:TN,typeMap:{button:owe,toggle:lwe}}),M9e={base:ag,key:"type",typeMap:{media:LI,custom:m9e,text:RI,attachments:eT,fields:tT,expression:_N,relationship:DI,utilityNetworkAssociations:HZ}},cwe=new Set(["attachments","fields","media","text","expression","relationship"]),A9e=new Set([...cwe,"utility-network-associations"]);let ps=class extends $t(_e){constructor(e){super(e),this.actions=null,this.content="",this.expressionInfos=null,this.fieldInfos=null,this.layerOptions=null,this.lastEditInfoEnabled=!0,this.outFields=null,this.overwriteActions=!1,this.returnGeometry=!1,this.title=""}castContent(e){return Array.isArray(e)?e.map(i=>Dp(M9e,i)):typeof e=="string"||typeof e=="function"||e instanceof HTMLElement||ho(e)?e:($e.getLogger(this).error("content error","unsupported content value",{value:e}),null)}readContent(e,i){const{popupElements:r}=i;return Array.isArray(r)&&r.length>0?this._readPopupInfoElements(i.description,i.mediaInfos,r):this._readPopupInfo(i)}writeWebSceneContent(e,i,r,n){this._writePopupTemplateContent(e,i,n)}writeWebMapContent(e,i,r,n){this._writePopupTemplateContent(e,i,n)}writeFieldInfos(e,i,r,n){const{content:s}=this,a=Array.isArray(s)?s:null,{writeFieldFormat:o,...l}=n||{};if(e){const c=a?a.filter(f=>f.type==="fields"):[],h=c.length&&c.every(f=>f.fieldInfos?.length);i.fieldInfos=e.filter(Boolean).map(f=>{const g=f.toJSON(l);return h&&(g.visible=!1),g})}if(a)for(const c of a)c.type==="fields"&&this._writeFieldsContent(c,i,l)}writeLayerOptions(e,i,r,n){i[r]=!e||e.showNoDataRecords===null&&e.returnTopmostRaster===null?null:e.toJSON(n)}writeTitle(e,i){i.title=e||""}async collectRequiredFields(e,i,r){const n=this.expressionInfos||[];await this._collectExpressionInfoFields(e,i,r,[...n,...this._getContentExpressionInfos(this.content,n)]),Iv(e,i,[...this.outFields||[],...this._getActionsFields(this.actions),...this._getTitleFields(this.title),...this._getContentFields(this.content)])}async getRequiredFields(e,i){const r=new Set;return await this.collectRequiredFields(r,e,i),[...r].sort()}_writePopupTemplateContent(e,i,r){typeof e!="string"?Array.isArray(e)&&(i.popupElements=e.filter(n=>r?.origin==="web-scene"?cwe.has(n.type):A9e.has(n.type)).map(n=>n?.toJSON(r)),i.popupElements.forEach(n=>{n.type==="attachments"?this._writeAttachmentContent(i):n.type==="media"?this._writeMediaContent(n,i):n.type==="text"?this._writeTextContent(n,i):n.type==="relationship"&&this._writeRelationshipContent(n,i)})):i.description=e}_writeFieldsContent(e,i,r){const n=e.fieldInfos;if(!Array.isArray(n)||!n.length)return;const s=i.fieldInfos;if(Array.isArray(s))for(const a of n){const o=s.find(l=>l.fieldName?.toLowerCase()===a.fieldName?.toLowerCase());o?o.visible=!0:s.push(a.toJSON(r))}else i.fieldInfos=n.map(a=>a.toJSON(r))}_writeAttachmentContent(e){e.showAttachments||(e.showAttachments=!0)}_writeRelationshipContent(e,i){const r=e.orderByFields?.map(s=>this._toFieldOrderJSON(s,e.relationshipId))||[],n=[...i.relatedRecordsInfo?.orderByFields||[],...r];i.relatedRecordsInfo={showRelatedRecords:!0,...n?.length&&{orderByFields:n}}}_writeTextContent(e,i){!i.description&&e.text&&(i.description=e.text)}_writeMediaContent(e,i){if(!Array.isArray(e.mediaInfos)||!e.mediaInfos.length)return;const r=de(e.mediaInfos);Array.isArray(i.mediaInfos)?i.mediaInfos=[...i.mediaInfos,...r]:i.mediaInfos=r}_readPopupInfoElements(e,i,r){const n={description:!1,mediaInfos:!1};return r.map(s=>s.type==="media"?(s.mediaInfos||!i||n.mediaInfos||(s.mediaInfos=i,n.mediaInfos=!0),LI.fromJSON(s)):s.type==="text"?(s.text||!e||n.description||(s.text=e,n.description=!0),RI.fromJSON(s)):s.type==="attachments"?eT.fromJSON(s):s.type==="fields"?tT.fromJSON(s):s.type==="expression"?_N.fromJSON(s):s.type==="relationship"?DI.fromJSON(s):s.type==="utilityNetworkAssociations"?HZ.fromJSON(s):void 0).filter(Boolean)}_toRelationshipContent(e){const{field:i,order:r}=e;if(!i?.startsWith(m2))return null;const n=i.replace(m2,"").split("/");if(n.length!==2)return null;const s=parseInt(n[0],10),a=n[1];return!Number.isNaN(s)&&a?DI.fromJSON({relationshipId:s,orderByFields:[{field:a,order:r}]}):null}_toFieldOrderJSON(e,i){const{order:r,field:n}=e;return{field:`${m2}${i}/${n}`,order:r}}_readPopupInfo({description:e,mediaInfos:i,showAttachments:r,relatedRecordsInfo:n={showRelatedRecords:!1}}){const s=[];e?s.push(new RI({text:e})):s.push(new tT),Array.isArray(i)&&i.length&&s.push(LI.fromJSON({mediaInfos:i})),r&&s.push(eT.fromJSON({displayType:"auto"}));const{showRelatedRecords:a,orderByFields:o}=n;return a&&o?.length&&o.forEach(l=>{const c=this._toRelationshipContent(l);c&&s.push(c)}),s.length?s:e}_getContentElementFields(e){const i=e?.type;if(i==="attachments")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description)];if(i==="custom")return e.outFields||[];if(i==="fields")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...this._getFieldInfoFields(e.fieldInfos??this.fieldInfos)];if(i==="media"){const r=e.mediaInfos||[];return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...r.reduce((n,s)=>[...n,...this._getMediaInfoFields(s)],[])]}return i==="text"?this._extractFieldNames(e.text):i==="relationship"||i==="utility-network-associations"?[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description)]:[]}_getMediaInfoFields(e){const{caption:i,title:r,value:n}=e,s=n||{},{fields:a,normalizeField:o,tooltipField:l,sourceURL:c,linkURL:h}=s,f=[...this._extractFieldNames(r),...this._extractFieldNames(i),...this._extractFieldNames(c),...this._extractFieldNames(h),...a??[]];return o&&f.push(o),l&&f.push(l),f}_getContentExpressionInfos(e,i){return Array.isArray(e)?e.reduce((r,n)=>[...r,...n.type==="expression"&&n.expressionInfo?[n.expressionInfo]:[]],i):[]}_getContentFields(e){return typeof e=="string"?this._extractFieldNames(e):Array.isArray(e)?e.reduce((i,r)=>[...i,...this._getContentElementFields(r)],[]):[]}async _collectExpressionInfoFields(e,i,r,n){n&&await Promise.all(n.map(s=>La(e,i,r,s.expression)))}_getFieldInfoFields(e){return e?e.filter(({fieldName:i,visible:r})=>!(r!==void 0&&!r||!i||i.startsWith(m2)||i.startsWith($se))).map(i=>i.fieldName):[]}_getActionsFields(e){return e?e.toArray().reduce((i,r)=>[...i,...this._getActionFields(r)],[]):[]}_getActionFields(e){const{className:i,title:r,type:n}=e,s=n==="button"||n==="toggle"?e.image:"";return[...this._extractFieldNames(r),...this._extractFieldNames(i),...this._extractFieldNames(s)]}_getTitleFields(e){return typeof e=="string"?this._extractFieldNames(e):[]}_extractFieldNames(e){return NZ(e).filter(i=>!(i.startsWith(m2)||i.startsWith($se)))}};d([m({type:I9e})],ps.prototype,"actions",void 0),d([m()],ps.prototype,"content",void 0),d([Ii("content")],ps.prototype,"castContent",null),d([Ve("content",["description","fieldInfos","popupElements","mediaInfos","showAttachments","relatedRecordsInfo"])],ps.prototype,"readContent",null),d([qe("web-scene","content",{popupElements:{type:We.ofType(k9e)},showAttachments:{type:Boolean},mediaInfos:{type:We.ofType(l7)},description:{type:String},relatedRecordsInfo:{type:Sse}})],ps.prototype,"writeWebSceneContent",null),d([qe("content",{popupElements:{type:We.ofType(T9e)},showAttachments:{type:Boolean},mediaInfos:{type:We.ofType(l7)},description:{type:String},relatedRecordsInfo:{type:Sse}})],ps.prototype,"writeWebMapContent",null),d([m({type:[E9e],json:{write:!0}})],ps.prototype,"expressionInfos",void 0),d([m({type:[xN]})],ps.prototype,"fieldInfos",void 0),d([qe("fieldInfos")],ps.prototype,"writeFieldInfos",null),d([m({type:C9e})],ps.prototype,"layerOptions",void 0),d([qe("layerOptions")],ps.prototype,"writeLayerOptions",null),d([m({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],ps.prototype,"lastEditInfoEnabled",void 0),d([m()],ps.prototype,"outFields",void 0),d([m()],ps.prototype,"overwriteActions",void 0),d([m()],ps.prototype,"returnGeometry",void 0),d([m({json:{type:String}})],ps.prototype,"title",void 0),d([qe("title")],ps.prototype,"writeTitle",null),ps=d([U("esri.PopupTemplate")],ps);const Bp=ps,GZ=Symbol("idFieldsProviderSymbol");function P9e(t){return!!t&&GZ in t}function Tse(t){return P9e(t)?t[GZ]:void 0}const eA=Symbol("popupProvider");function mMt(t){return typeof t=="object"&&t!==null&&"popupEnabled"in t&&"popupTemplate"in t}function O9e(t){return!!t&&eA in t}function L9e(t){return O9e(t)?t[eA]:null}function gMt(t,e){switch(e.type){case"object-id":case"unique-id-simple":return t.attributes[e.fieldName];case"unique-id-composite":{const i=[];for(const r of e.fieldNames)i.push(t.attributes[r]??null);return JSON.stringify(i)}}}function kse(t,e){if("uniqueIdFields"in e&&e.uniqueIdFields?.length){if(e.uniqueIdFields.length===1)return t.attributes?.[e.uniqueIdFields[0]];const i=e.uniqueIdFields.map(r=>t.attributes?.[r]);return JSON.stringify(i)}return"objectIdField"in e&&e.objectIdField?t.attributes?.[e.objectIdField]:null}const Ese=new Gt({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let D9e=0,Vn=class extends _e{constructor(e){super(e),this.id="sym"+D9e++,this.type=null,this.color=new Ye([0,0,0,1])}readColor(e){return e?.[0]!=null?[e[0],e[1],e[2],e[3]/255]:e}async collectRequiredFields(e,i){}hash(){return JSON.stringify(this.toJSON())}clone(){}};d([m({type:Ese.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:Ese.write,isRequired:!0}}})],Vn.prototype,"type",void 0),d([m({type:Ye,json:{write:{allowNull:!0}}})],Vn.prototype,"color",void 0),d([Ve("color")],Vn.prototype,"readColor",null),Vn=d([U("esri.symbols.Symbol")],Vn);var v7;let no=v7=class extends Vn{constructor(t){super(t),this.data=null,this.type="cim"}readData(t,e){return e}writeData(t,e){Object.assign(e,t)}async collectRequiredFields(t,e){if(this.data?.type==="CIMSymbolReference"){const i=this.data.primitiveOverrides;if(i){const r=i.map(n=>{const s=n.valueExpressionInfo;return s?La(t,e,null,s.expression):null});await Promise.all(r)}}}clone(){return new v7({data:de(this.data)})}hash(){return Whe(JSON.stringify(this.data)).toString()}};d([m({json:{write:!1}})],no.prototype,"color",void 0),d([m({json:{write:!0}})],no.prototype,"data",void 0),d([Ve("data",["symbol"])],no.prototype,"readData",null),d([qe("data",{})],no.prototype,"writeData",null),d([pt({CIMSymbolReference:"cim"},{readOnly:!0})],no.prototype,"type",void 0),no=v7=d([U("esri.symbols.CIMSymbol")],no);let Do=class extends _e{constructor(e){super(e),this.enabled=!0,this.type=null,this.ignoreDrivers=!1}writeEnabled(e,i,r){e||(i[r]=e)}};d([m({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],Do.prototype,"enabled",void 0),d([qe("enabled")],Do.prototype,"writeEnabled",null),d([m({type:["icon","object","line","path","fill","water","extrude","text"],readOnly:!0,json:{write:{isRequired:!0}}})],Do.prototype,"type",void 0),Do=d([U("esri.symbols.Symbol3DLayer")],Do);function R9e(t,e){const i=e.transparency!=null?OI(e.transparency):1,r=e.color;return r&&Array.isArray(r)?new Ye([r[0]||0,r[1]||0,r[2]||0,i]):null}function z9e(t,e){e.color=t.toJSON().slice(0,3);const i=mN(t.a);i!==0&&(e.transparency=i)}function Uv(t){return{type:Ye,nonNullable:t?.nonNullable,json:{type:[li],default:null,read:{source:["color","transparency"],reader:R9e},write:{target:{color:{type:[li],isRequired:t?.colorRequiredOnWrite},transparency:{type:li}},writer:z9e}}}}const Up={type:Number,cast:xi,json:{write:!0}};function bMt(t){return t==="emissive"?0:1}let Xb=class extends _e{constructor(e){super(e),this.color=new Ye([0,0,0,1]),this.extensionLength=0,this.size=Xi(1)}clone(){}cloneProperties(){return{color:de(this.color),size:this.size,extensionLength:this.extensionLength}}};d([m({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0,isRequired:!0}}})],Xb.prototype,"type",void 0),d([m(Uv({colorRequiredOnWrite:!0}))],Xb.prototype,"color",void 0),d([m({...Up,json:{write:{overridePolicy:t=>({enabled:!!t})}}})],Xb.prototype,"extensionLength",void 0),d([m(Up)],Xb.prototype,"size",void 0),Xb=d([U("esri.symbols.edges.Edges3D")],Xb);const qZ=Xb;var b7;let B3=b7=class extends qZ{constructor(t){super(t),this.type="sketch"}clone(){return new b7(this.cloneProperties())}};d([pt({sketch:"sketch"},{readOnly:!0})],B3.prototype,"type",void 0),B3=b7=d([U("esri.symbols.edges.SketchEdges3D")],B3);const F9e=B3;var w7;let U3=w7=class extends qZ{constructor(t){super(t),this.type="solid"}clone(){return new w7(this.cloneProperties())}};d([pt({solid:"solid"},{readOnly:!0})],U3.prototype,"type",void 0),U3=w7=d([U("esri.symbols.edges.SolidEdges3D")],U3);const uwe=U3,dwe={types:{key:"type",base:qZ,typeMap:{solid:uwe,sketch:F9e}},json:{write:!0}};var _7;let wS=_7=class extends _e{constructor(){super(...arguments),this.strength=null,this.source="emissive"}clone(){const t={strength:this.strength,source:this.source};return new _7(t)}};d([m({json:{write:!1}})],wS.prototype,"strength",void 0),d([m({json:{write:!1}})],wS.prototype,"source",void 0),wS=_7=d([U("esri.symbols.support.Symbol3DEmissive")],wS);var x7;let bl=x7=class extends _e{constructor(t){super(t),this.color=null,this.emissive=new wS({source:"emissive"})}clone(){const t={color:this.color?.clone()??null,emissive:this.emissive?.clone()??null};return new x7(t)}};d([m(Uv())],bl.prototype,"color",void 0),d([m({type:wS,json:{write:!1}})],bl.prototype,"emissive",void 0),bl=x7=d([U("esri.symbols.support.Symbol3DMaterial")],bl);var S7,h$;let am=(h$=class extends Do{constructor(e){super(e),this.type="extrude",this.size=1,this.material=null,this.castShadows=!0,this.edges=null}clone(){return new S7({edges:this.edges?.clone(),enabled:this.enabled,material:this.material?.clone(),castShadows:this.castShadows,size:this.size})}},S7=h$,h$);d([pt({Extrude:"extrude"},{readOnly:!0})],am.prototype,"type",void 0),d([m({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],am.prototype,"size",void 0),d([m({type:bl,json:{write:!0}})],am.prototype,"material",void 0),d([m({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],am.prototype,"castShadows",void 0),d([m(dwe)],am.prototype,"edges",void 0),am=S7=d([U("esri.symbols.ExtrudeSymbol3DLayer")],am);let IC=class extends _e{constructor(e){super(e)}clone(){throw new Error("Subclasses of LinePattern3D should implement their own clone method.")}};d([m({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],IC.prototype,"type",void 0),IC=d([U("esri.symbols.patterns.LinePattern3D")],IC);const N9e=["dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","none","short-dash","short-dash-dot","short-dash-dot-dot","short-dot","solid"];var $7;const j9e=Gn()({dash:"dash","dash-dot":"dash-dot","dash-dot-dot":"long-dash-dot-dot",dot:"dot","long-dash":"long-dash","long-dash-dot":"long-dash-dot",null:"none","short-dash":"short-dash","short-dash-dot":"short-dash-dot","short-dash-dot-dot":"short-dash-dot-dot","short-dot":"short-dot",solid:"solid"});let V0=$7=class extends IC{constructor(t){super(t),this.type="style",this.style="solid"}clone(){const t={style:this.style};return new $7(t)}};d([m({type:["style"],json:{write:{isRequired:!0}}})],V0.prototype,"type",void 0),d([pt(j9e),m({type:N9e,json:{write:{isRequired:!0}}})],V0.prototype,"style",void 0),V0=$7=d([U("esri.symbols.patterns.LineStylePattern3D")],V0);let MC=class extends _e{constructor(e){super(e),this.type="style"}clone(){throw new Error("Subclasses of Pattern3D should implement their own clone method.")}};d([m({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],MC.prototype,"type",void 0),MC=d([U("esri.symbols.patterns.Pattern3D")],MC);const V9e=["backward-diagonal","cross","diagonal-cross","forward-diagonal","horizontal","none","solid","vertical"];var T7;let _S=T7=class extends MC{constructor(t){super(t),this.type="style",this.style="solid"}clone(){return new T7({style:this.style})}};d([m({type:["style"],json:{write:{isRequired:!0}}})],_S.prototype,"type",void 0),d([m({type:V9e,json:{read:!0,write:{isRequired:!0}}})],_S.prototype,"style",void 0),_S=T7=d([U("esri.symbols.patterns.StylePattern3D")],_S);const B9e={types:{key:"type",base:MC,typeMap:{style:_S}},json:{write:!0}},hwe={types:{key:"type",base:IC,typeMap:{style:V0}},json:{write:!0}},AC=new Ye("white"),U9e=new Ye([255,255,255,0]);function H9e(t){return t.r===0&&t.g===0&&t.b===0}var k7;let PC=k7=class extends bl{constructor(t){super(t),this.colorMixMode=null}clone(){const t={color:this.color?.clone()??null,colorMixMode:this.colorMixMode,emissive:this.emissive?.clone()??null};return new k7(t)}};d([pt({multiply:"multiply",replace:"replace",tint:"tint"})],PC.prototype,"colorMixMode",void 0),PC=k7=d([U("esri.symbols.support.Symbol3DFillMaterial")],PC);function WZ(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function G9e(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]]}function q9e(t,e,i,r,n,s,a,o,l,c,h,f,g,y,b,_){return[t,e,i,r,n,s,a,o,l,c,h,f,g,y,b,_]}const W9e=WZ();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:W9e,clone:G9e,create:WZ,fromValues:q9e},Symbol.toStringTag,{value:"Module"}));function Y9e(t){return t<=jhe?new Array(t).fill(0):new Float64Array(t)}function SMt(t){return(Nhe(t)?t.byteLength/8:t.length)<=jhe?Array.from(t):new Float64Array(t)}function $Mt(t,e,i){return Array.isArray(t)?t.slice(e,e+i):t.subarray(e,e+i)}function TMt(t){return[...t]}function kMt(t){const e=WZ();for(let i=0;i<16;++i)e[i]=t[i];return e}function tA(t=K9e){return[t[0],t[1],t[2],t[3],t[4],t[5]]}function YZ(t,e,i,r,n,s,a=tA()){return a[0]=t,a[1]=e,a[2]=i,a[3]=r,a[4]=n,a[5]=s,a}function EMt(t,e=tA()){return Z9e(t,0,t.length/3,e)}function Z9e(t,e,i,r=tA()){return pwe(r,E7),X9e(r,t,e,i),r}function CMt(t,e=Y9e(24)){const[i,r,n,s,a,o]=t;return e[0]=i,e[1]=r,e[2]=n,e[3]=i,e[4]=r,e[5]=o,e[6]=i,e[7]=a,e[8]=n,e[9]=i,e[10]=a,e[11]=o,e[12]=s,e[13]=r,e[14]=n,e[15]=s,e[16]=r,e[17]=o,e[18]=s,e[19]=a,e[20]=n,e[21]=s,e[22]=a,e[23]=o,e}function IMt(t,e){const i=isFinite(t[2])||isFinite(t[5]);return new Wt(i?{xmin:t[0],xmax:t[3],ymin:t[1],ymax:t[4],zmin:t[2],zmax:t[5],spatialReference:e}:{xmin:t[0],xmax:t[3],ymin:t[1],ymax:t[4],spatialReference:e})}function MMt(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.min(t[2],e[2]),t[3]=Math.max(t[3],e[3]),t[4]=Math.max(t[4],e[4]),t[5]=Math.max(t[5],e[5])}function AMt(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[3]=Math.max(t[3],e[2]),t[4]=Math.max(t[4],e[3])}function PMt(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.min(t[2],e[2]),t[3]=Math.max(t[3],e[0]),t[4]=Math.max(t[4],e[1]),t[5]=Math.max(t[5],e[2])}function X9e(t,e,i=0,r=e.length/3){let n=t[0],s=t[1],a=t[2],o=t[3],l=t[4],c=t[5];for(let h=0;h<r;h++)n=Math.min(n,e[i+3*h]),s=Math.min(s,e[i+3*h+1]),a=Math.min(a,e[i+3*h+2]),o=Math.max(o,e[i+3*h]),l=Math.max(l,e[i+3*h+1]),c=Math.max(c,e[i+3*h+2]);t[0]=n,t[1]=s,t[2]=a,t[3]=o,t[4]=l,t[5]=c}function OMt(t,e,i){const r=e.length;let n=t[0],s=t[1],a=t[2],o=t[3],l=t[4],c=t[5];if(i)for(let h=0;h<r;h++){const f=e[h];n=Math.min(n,f[0]),s=Math.min(s,f[1]),a=Math.min(a,f[2]),o=Math.max(o,f[0]),l=Math.max(l,f[1]),c=Math.max(c,f[2])}else for(let h=0;h<r;h++){const f=e[h];n=Math.min(n,f[0]),s=Math.min(s,f[1]),o=Math.max(o,f[0]),l=Math.max(l,f[1])}t[0]=n,t[1]=s,t[2]=a,t[3]=o,t[4]=l,t[5]=c}function LMt(t){for(let e=0;e<6;e++)if(!isFinite(t[e]))return!1;return!0}function iA(t){return t[0]>=t[3]?0:t[3]-t[0]}function rA(t){return t[1]>=t[4]?0:t[4]-t[1]}function nA(t){return t[2]>=t[5]?0:t[5]-t[2]}function DMt(t){const e=iA(t),i=nA(t),r=rA(t);return Math.sqrt(e*e+i*i+r*r)}function RMt(t,e=[0,0,0]){return e[0]=t[0]+iA(t)/2,e[1]=t[1]+rA(t)/2,e[2]=t[2]+nA(t)/2,e}function zMt(t,e=[0,0,0]){return e[0]=iA(t),e[1]=rA(t),e[2]=nA(t),e}function FMt(t,e){return e[0]>=t[0]&&e[1]>=t[1]&&e[2]>=t[2]&&e[0]<=t[3]&&e[1]<=t[4]&&e[2]<=t[5]}function J9e(t,e){return Math.max(e[0],t[0])<=Math.min(e[3],t[3])&&Math.max(e[1],t[1])<=Math.min(e[4],t[4])&&Math.max(e[2],t[2])<=Math.min(e[5],t[5])}function NMt(t,e){return e==null||J9e(t,e)}function jMt(t,e,i,r,n=t){return n[0]=t[0]+e,n[1]=t[1]+i,n[2]=t[2]+r,n[3]=t[3]+e,n[4]=t[4]+i,n[5]=t[5]+r,n}function VMt(t,e,i=t){const r=t[0]+iA(t)/2,n=t[1]+rA(t)/2,s=t[2]+nA(t)/2;return i[0]=r+(t[0]-r)*e,i[1]=n+(t[1]-n)*e,i[2]=s+(t[2]-s)*e,i[3]=r+(t[3]-r)*e,i[4]=n+(t[4]-n)*e,i[5]=s+(t[5]-s)*e,i}function BMt(t,e){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function UMt(t,e,i=t){return i[0]=e[0],i[1]=e[1],i[2]=e[2],i!==t&&(i[3]=t[3],i[4]=t[4],i[5]=t[5]),i}function HMt(t,e,i=t){return i[3]=e[0],i[4]=e[1],i[5]=e[2],i!==t&&(i[0]=t[0],i[1]=t[1],i[2]=t[2]),t}function pwe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function GMt(t){return t?pwe(t,E7):tA(E7)}function qMt(t,e=tn()){return e[0]=t[0],e[1]=t[1],e[2]=t[3],e[3]=t[4],e}function WMt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=Number.NEGATIVE_INFINITY,t[3]=e[2],t[4]=e[3],t[5]=Number.POSITIVE_INFINITY,t}function YMt(t,e,i,r,n){return t[0]=e,t[1]=i,t[2]=Number.NEGATIVE_INFINITY,t[3]=r,t[4]=n,t[5]=Number.POSITIVE_INFINITY,t}function Cse(t){return t.length===6}function ZMt(t){return iA(t)===0&&rA(t)===0&&nA(t)===0}function XMt(t,e,i){if(t==null||e==null)return t===e;if(!Cse(t)||!Cse(e))return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}const E7=[1/0,1/0,1/0,-1/0,-1/0,-1/0],K9e=[0,0,0,0,0,0];tA();function JMt(t,{isPrimitive:e,width:i,depth:r,height:n}){const s=e?10:1;if(i==null&&n==null&&r==null)return[s*t[0],s*t[1],s*t[2]];const a=UT(i,r,n);let o;for(let l=0;l<3;l++){const c=a[l];if(c!=null){o=c/t[l];break}}for(let l=0;l<3;l++)a[l]==null&&(a[l]=t[l]*o);return a}const Q9e=YZ(-.5,-.5,-.5,.5,.5,.5),e7e=YZ(-.5,-.5,0,.5,.5,1),t7e=YZ(-.5,-.5,0,.5,.5,.5);function KMt(t){switch(t){case"sphere":case"cube":case"diamond":return Q9e;case"cylinder":case"cone":case"inverted-cone":return e7e;case"tetrahedron":return t7e;default:return}}const ZZ=["butt","square","round"],i7e=[...ZZ,"none"],fwe=["miter","bevel","round"];var C7;let Jb=C7=class extends _e{constructor(t){super(t),this.color=new Ye([0,0,0,1]),this.size=Xi(1),this.pattern=null,this.patternCap="butt"}clone(){const t={color:this.color!=null?this.color.clone():null,size:this.size,pattern:this.pattern!=null?this.pattern.clone():null,patternCap:this.patternCap};return new C7(t)}};d([m(Uv({colorRequiredOnWrite:!0}))],Jb.prototype,"color",void 0),d([m({...Up,json:{write:{isRequired:!0}}})],Jb.prototype,"size",void 0),d([m(hwe)],Jb.prototype,"pattern",void 0),d([m({type:ZZ,json:{default:"butt",write:{overridePolicy(){return{enabled:this.pattern!=null}}}}})],Jb.prototype,"patternCap",void 0),Jb=C7=d([U("esri.symbols.support.Symbol3DOutline")],Jb);var H3,p$;let Io=(p$=class extends Do{constructor(e){super(e),this.type="fill",this.material=null,this.pattern=null,this.castShadows=!0,this.outline=null,this.edges=null}clone(){const e={edges:this.edges!=null?this.edges.clone():null,enabled:this.enabled,material:this.material!=null?this.material.clone():null,pattern:this.pattern!=null?this.pattern.clone():null,castShadows:this.castShadows,outline:this.outline!=null?this.outline.clone():null};return new H3(e)}static fromSimpleFillSymbol(e){const i=e.outline&&e.outline.style&&e.outline.style!=="solid"?new V0({style:e.outline.style}):null,r={size:e.outline?.width??0,color:(e.outline?.color??AC).clone(),pattern:i};return i&&e.outline?.cap&&(r.patternCap=e.outline.cap),new H3({material:new PC({color:(e.color??U9e).clone()}),pattern:e.style&&e.style!=="solid"?new _S({style:e.style}):null,outline:r})}},H3=p$,p$);d([pt({Fill:"fill"},{readOnly:!0})],Io.prototype,"type",void 0),d([m({type:PC,json:{write:!0}})],Io.prototype,"material",void 0),d([m(B9e)],Io.prototype,"pattern",void 0),d([m({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Io.prototype,"castShadows",void 0),d([m({type:Jb,json:{write:!0}})],Io.prototype,"outline",void 0),d([m(dwe)],Io.prototype,"edges",void 0),Io=H3=d([U("esri.symbols.FillSymbol3DLayer")],Io);var I7;const r7e=Gn()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});let Kb=I7=class extends _e{constructor(t){super(t)}readHref(t,e,i){return t?Wm(t,i):e.dataURI}writeHref(t,e,i,r){t&&(ng(t)?e.dataURI=t:(e.href=Hw(t,r),_l(e.href)&&(e.href=_c(e.href))))}clone(){return new I7({href:this.href,primitive:this.primitive})}equals(t){return t.primitive===this.primitive&&t.href===this.href}};d([m({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],Kb.prototype,"href",void 0),d([Ve("href")],Kb.prototype,"readHref",null),d([qe("href",{href:{type:String},dataURI:{type:String}})],Kb.prototype,"writeHref",null),d([pt(r7e)],Kb.prototype,"primitive",void 0),Kb=I7=d([U("esri.symbols.support.IconSymbol3DLayerResource")],Kb);const n7e="circle";let G3=class extends $t(_e){constructor(e){super(e),this.mode="hidden"}equals(e){return this.mode===e.mode}};d([m({type:["adaptive","hidden","visible"],json:{write:{isRequired:!0}}})],G3.prototype,"mode",void 0),G3=d([U("esri.symbols.support.OccludedVisibility")],G3);const mwe=G3;var M7;let xS=M7=class extends lt{constructor(t){super(t),this.x=0,this.y=0}clone(){return new M7({x:this.x,y:this.y})}equals(t){return t.x===this.x&&t.y===this.y}};d([m({type:Number})],xS.prototype,"x",void 0),d([m({type:Number})],xS.prototype,"y",void 0),xS=M7=d([U("esri.symbols.support.Symbol3DAnchorPosition2D")],xS);var A7;let dE=A7=class extends _e{constructor(t){super(t),this.color=new Ye([0,0,0,1]),this.size=Xi(1)}clone(){const t={color:this.color!=null?this.color.clone():null,size:this.size};return new A7(t)}equals(t){return t.size===this.size&&(this.color==null?t.color==null:this.color.equals(t.color))}};d([m(Uv({colorRequiredOnWrite:!0}))],dE.prototype,"color",void 0),d([m({...Up,json:{write:{isRequired:!0}}})],dE.prototype,"size",void 0),dE=A7=d([U("esri.symbols.support.Symbol3DIconOutline")],dE);var gx,f$;let Ys=(f$=class extends Do{constructor(e){super(e),this.material=null,this.resource=null,this.type="icon",this.size=12,this.anchor="center",this.anchorPosition=null,this.outline=null,this.angle=0,this.occludedVisibility=null}clone(){return new gx({anchor:this.anchor,anchorPosition:de(this.anchorPosition),enabled:this.enabled,material:de(this.material),outline:de(this.outline),resource:de(this.resource),angle:this.angle,size:this.size,occludedVisibility:de(this.occludedVisibility)})}static fromSimpleMarkerSymbol(e){const i=e.color||AC,r=Ise(e),n=e.outline&&e.outline.width>0?{size:e.outline.width,color:(e.outline.color||AC).clone()}:null;return new gx({size:e.size,angle:e.angle,resource:{primitive:a7e(()=>$e.getLogger(this.prototype),e.style)},material:{color:i},outline:n,anchor:r?"relative":void 0,anchorPosition:r})}static fromPictureMarkerSymbol(e){const i=!e.color||H9e(e.color)?AC:e.color,r=Ise(e);return new gx({size:e.width<=e.height?e.height:e.width,angle:e.angle,resource:{href:e.url},material:{color:i.clone()},anchor:r?"relative":void 0,anchorPosition:r})}static fromCIMSymbol(e){return new gx({resource:{href:Jpe({mediaType:"application/json",data:JSON.stringify(e.data)})}})}},gx=f$,f$);function Ise(t){const e="width"in t?t.width:t.size,i="height"in t?t.height:t.size,r=Mse(t.xoffset),n=Mse(t.yoffset);return(r||n)&&e&&i?{x:-r/e,y:n/i}:null}function Mse(t){return isFinite(t)?t:0}d([m({type:bl,json:{write:!0}})],Ys.prototype,"material",void 0),d([m({type:Kb,json:{write:!0}})],Ys.prototype,"resource",void 0),d([pt({Icon:"icon"},{readOnly:!0})],Ys.prototype,"type",void 0),d([m({...Up,json:{write:{isRequired:!0}}})],Ys.prototype,"size",void 0),d([pt({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"},{default:"center"})],Ys.prototype,"anchor",void 0),d([m({type:xS,json:{type:[Number],read:{reader:t=>new xS({x:t[0],y:t[1]})},write:{writer:(t,e)=>{e.anchorPosition=[t.x,t.y]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],Ys.prototype,"anchorPosition",void 0),d([m({type:dE,json:{write:!0}})],Ys.prototype,"outline",void 0),d([m({type:Number,json:{write:!0,default:0}})],Ys.prototype,"angle",void 0),d([m({type:mwe})],Ys.prototype,"occludedVisibility",void 0),Ys=gx=d([U("esri.symbols.IconSymbol3DLayer")],Ys);const s7e={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};function a7e(t,e){return s7e[e]||(t().warn(`${e} cannot be mapped to Icon symbol. Fallback to "circle"`),"circle")}const o7e=["begin","end","begin-end"],gwe=["arrow","circle","square","diamond","cross","x"];let wm=class extends $t(_e){constructor(e){super(e),this.type="style",this.placement="begin-end",this.style="arrow",this.color=null}equals(e){return e!=null&&e.placement===this.placement&&e.style===this.style&&(this.color==null&&e.color==null||this.color!=null&&e.color!=null&&this.color.toJSON()===e.color.toJSON())}};d([m({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0,isRequired:!0}}})],wm.prototype,"type",void 0),d([m({type:o7e,json:{default:"begin-end",write:!0}})],wm.prototype,"placement",void 0),d([m({type:gwe,json:{default:"arrow",write:!0}})],wm.prototype,"style",void 0),d([m({type:Ye,json:{type:[li],default:null,write:!0}})],wm.prototype,"color",void 0),wm=d([U("esri.symbols.LineStyleMarker3D")],wm);var q3,m$;let Co=(m$=class extends Do{constructor(e){super(e),this.material=null,this.type="line",this.join="miter",this.cap="butt",this.size=Xi(1),this.pattern=null,this.marker=null}clone(){const e={enabled:this.enabled,material:this.material!=null?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,pattern:this.pattern!=null?this.pattern.clone():null,marker:this.marker!=null?this.marker.clone():null};return new q3(e)}static fromSimpleLineSymbol(e){const i={enabled:!0,size:e.width??Xi(1),cap:e.cap||"butt",join:e.join||"miter",pattern:e.style?new V0({style:e.style}):null,material:new bl({color:(e.color||AC).clone()}),marker:e.marker?new wm({placement:e.marker.placement,style:e.marker.style,color:e.marker.color?.clone()??null}):null};return new q3(i)}},q3=m$,m$);d([m({type:bl,json:{write:!0}})],Co.prototype,"material",void 0),d([pt({Line:"line"},{readOnly:!0})],Co.prototype,"type",void 0),d([m({type:fwe,json:{write:!0,default:"miter"}})],Co.prototype,"join",void 0),d([m({type:ZZ,json:{write:!0,default:"butt"}})],Co.prototype,"cap",void 0),d([m({...Up,json:{write:{isRequired:!0}}})],Co.prototype,"size",void 0),d([m(hwe)],Co.prototype,"pattern",void 0),d([m({types:{key:"type",base:wm,typeMap:{style:wm}},json:{write:!0}})],Co.prototype,"marker",void 0),Co=q3=d([U("esri.symbols.LineSymbol3DLayer")],Co);var P7;const l7e=Gn()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});let hE=P7=class extends _e{clone(){return new P7({href:this.href,primitive:this.primitive})}};d([m({type:String,json:{read:EF,write:Gw}})],hE.prototype,"href",void 0),d([pt(l7e)],hE.prototype,"primitive",void 0),hE=P7=d([U("esri.symbols.support.ObjectSymbol3DLayerResource")],hE);const c7e="sphere";var O7;let k0=O7=class extends lt{constructor(){super(...arguments),this.x=0,this.y=0,this.z=0}clone(){return new O7({x:this.x,y:this.y,z:this.z})}};d([m({type:Number})],k0.prototype,"x",void 0),d([m({type:Number})],k0.prototype,"y",void 0),d([m({type:Number})],k0.prototype,"z",void 0),k0=O7=d([U("esri.symbols.support.Symbol3DAnchorPosition3D")],k0);var L7,g$;let qs=(g$=class extends Do{constructor(e){super(e),this.material=null,this.castShadows=!0,this.resource=null,this.type="object",this.width=void 0,this.height=void 0,this.depth=void 0,this.anchor=void 0,this.anchorPosition=void 0,this.heading=void 0,this.tilt=void 0,this.roll=void 0}clone(){return new L7({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:this.anchorPosition?.clone(),depth:this.depth,enabled:this.enabled,height:this.height,material:this.material?.clone()??null,castShadows:this.castShadows,resource:this.resource?.clone(),width:this.width})}get isPrimitive(){return!this.resource||typeof this.resource.href!="string"}},L7=g$,g$);d([m({type:bl,json:{write:!0}})],qs.prototype,"material",void 0),d([m({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],qs.prototype,"castShadows",void 0),d([m({type:hE,json:{write:!0}})],qs.prototype,"resource",void 0),d([pt({Object:"object"},{readOnly:!0})],qs.prototype,"type",void 0),d([m({type:Number,json:{write:!0}})],qs.prototype,"width",void 0),d([m({type:Number,json:{write:!0}})],qs.prototype,"height",void 0),d([m({type:Number,json:{write:!0}})],qs.prototype,"depth",void 0),d([pt({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"},{default:"origin"})],qs.prototype,"anchor",void 0),d([m({type:k0,json:{type:[Number],read:{reader:t=>new k0({x:t[0],y:t[1],z:t[2]})},write:{writer:(t,e)=>{e.anchorPosition=[t.x,t.y,t.z]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],qs.prototype,"anchorPosition",void 0),d([m({type:Number,json:{write:!0}})],qs.prototype,"heading",void 0),d([m({type:Number,json:{write:!0}})],qs.prototype,"tilt",void 0),d([m({type:Number,json:{write:!0}})],qs.prototype,"roll",void 0),d([m({readOnly:!0})],qs.prototype,"isPrimitive",null),qs=L7=d([U("esri.symbols.ObjectSymbol3DLayer")],qs);var D7,y$;let xa=(y$=class extends Do{constructor(e){super(e),this.material=null,this.castShadows=!0,this.type="path",this.profile="circle",this.join="miter",this.cap="butt",this.width=void 0,this.height=void 0,this.anchor="center",this.profileRotation="all"}readWidth(e,i){return e??(i.height==null&&i.size!=null?i.size:void 0)}readHeight(e,i){return e??(i.width==null&&i.size!=null?i.size:void 0)}clone(){return new D7({enabled:this.enabled,material:this.material!=null?this.material.clone():null,castShadows:this.castShadows,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})}},D7=y$,y$);d([m({type:bl,json:{write:!0}})],xa.prototype,"material",void 0),d([m({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],xa.prototype,"castShadows",void 0),d([pt({Path:"path"},{readOnly:!0})],xa.prototype,"type",void 0),d([m({type:["circle","quad"],nonNullable:!0,json:{write:!0,default:"circle"}})],xa.prototype,"profile",void 0),d([m({type:fwe,nonNullable:!0,json:{write:!0,default:"miter"}})],xa.prototype,"join",void 0),d([m({type:i7e,nonNullable:!0,json:{write:!0,default:"butt"}})],xa.prototype,"cap",void 0),d([m({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],xa.prototype,"width",void 0),d([Ve("width",["width","size","height"])],xa.prototype,"readWidth",null),d([m({type:Number,json:{write:!0}})],xa.prototype,"height",void 0),d([Ve("height",["height","size","width"])],xa.prototype,"readHeight",null),d([m({type:["center","bottom","top"],nonNullable:!0,json:{write:!0,default:"center"}})],xa.prototype,"anchor",void 0),d([m({type:["heading","all"],nonNullable:!0,json:{write:!0,default:"all"}})],xa.prototype,"profileRotation",void 0),xa=D7=d([U("esri.symbols.PathSymbol3DLayer")],xa);const u7e=["none","underline","line-through"],d7e=["normal","italic","oblique"],h7e=["normal","lighter","bold","bolder"],ywe={type:Number,cast:t=>{const e=Po(t);return e===0?1:go(e,.1,4)},nonNullable:!0},p7e=["left","right","center"],f7e=["baseline","top","middle","bottom"],vwe={type:p7e,nonNullable:!0},bwe={type:f7e,nonNullable:!0},m7e=8;var R7;let dc=R7=class extends _e{constructor(t){super(t),this.decoration="none",this.family="sans-serif",this.size=9,this.style="normal",this.weight="normal"}castSize(t){return xi(t)}clone(){return new R7({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})}hash(){return`${this.decoration}.${this.family}.${this.size}.${this.style}.${this.weight}`}};d([m({type:u7e,json:{default:"none",write:!0}})],dc.prototype,"decoration",void 0),d([m({type:String,json:{write:!0}})],dc.prototype,"family",void 0),d([m({type:Number,json:{write:{overridePolicy:(t,e,i)=>({enabled:!i||!i.textSymbol3D})}}})],dc.prototype,"size",void 0),d([Ii("size")],dc.prototype,"castSize",null),d([m({type:d7e,json:{default:"normal",write:!0}})],dc.prototype,"style",void 0),d([m({type:h7e,json:{default:"normal",write:!0}})],dc.prototype,"weight",void 0),dc=R7=d([U("esri.symbols.Font")],dc);var z7;let SS=z7=class extends _e{constructor(){super(...arguments),this.color=new Ye([0,0,0,1]),this.size=0}clone(){const t={color:de(this.color),size:this.size};return new z7(t)}};d([m(Uv())],SS.prototype,"color",void 0),d([m(Up)],SS.prototype,"size",void 0),SS=z7=d([U("esri.symbols.support.Symbol3DHalo")],SS);let OC=class extends $t(_e){constructor(e){super(e),this.color=null}};d([m(Uv())],OC.prototype,"color",void 0),OC=d([U("esri.symbols.support.Symbol3DTextBackground")],OC);var W3,v$;let ys=(v$=class extends Do{constructor(e){super(e),this._userSize=void 0,this.halo=null,this.horizontalAlignment="center",this.lineHeight=1,this.material=null,this.background=null,this.text=null,this.type="text",this.verticalAlignment="baseline",this.occludedVisibility=null}get font(){return this._get("font")||null}set font(e){e!=null&&this._userSize!=null&&(e.size=this._userSize),this._set("font",e)}writeFont(e,i,r,n){const s={...n,textSymbol3D:!0};i.font=e.write({},s),delete i.font.size}get size(){return this._userSize!=null?this._userSize:this.font?.size!=null?this.font.size:9}set size(e){this._userSize=e,this.font!=null&&(this.font.size=this._userSize),this.notifyChange("size")}clone(){const e=new W3({enabled:this.enabled,font:de(this.font),halo:de(this.halo),horizontalAlignment:this.horizontalAlignment,lineHeight:this.lineHeight,material:this.material!=null?this.material.clone():null,text:this.text,verticalAlignment:this.verticalAlignment,background:de(this.background),occludedVisibility:de(this.occludedVisibility)});return e._userSize=this._userSize,e}static fromTextSymbol(e){return new W3({font:e.font!=null?e.font.clone():new dc,halo:g7e(e.haloColor,e.haloSize),horizontalAlignment:e.horizontalAlignment,lineHeight:e.lineHeight,material:e.color?new bl({color:e.color.clone()}):null,text:e.text,verticalAlignment:e.verticalAlignment,background:e.backgroundColor?new OC({color:e.backgroundColor.clone()}):null})}},W3=v$,v$);function g7e(t,e){return t&&e!=null&&e>0?new SS({color:de(t),size:e}):null}d([m({type:dc,json:{write:!0}})],ys.prototype,"font",null),d([qe("font")],ys.prototype,"writeFont",null),d([m({type:SS,json:{write:!0}})],ys.prototype,"halo",void 0),d([m({...vwe,json:{default:"center",write:!0}})],ys.prototype,"horizontalAlignment",void 0),d([m({...ywe,json:{default:1,write:!0}})],ys.prototype,"lineHeight",void 0),d([m({type:bl,json:{write:!0}})],ys.prototype,"material",void 0),d([m({type:OC,json:{write:!0}})],ys.prototype,"background",void 0),d([m(Up)],ys.prototype,"size",null),d([m({type:String,json:{write:!0}})],ys.prototype,"text",void 0),d([pt({Text:"text"},{readOnly:!0})],ys.prototype,"type",void 0),d([m({...bwe,json:{default:"baseline",write:!0}})],ys.prototype,"verticalAlignment",void 0),d([m({type:mwe})],ys.prototype,"occludedVisibility",void 0),ys=W3=d([U("esri.symbols.TextSymbol3DLayer")],ys);var F7,b$;let om=(b$=class extends Do{constructor(e){super(e),this.color=N7.clone(),this.type="water",this.waterbodySize="medium",this.waveDirection=null,this.waveStrength="moderate"}clone(){return new F7({color:this.color.clone(),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})}},F7=b$,b$);d([m({type:Ye,nonNullable:!0,json:{type:[li],write:(t,e,i)=>e[i]=t.toArray(1),default:()=>N7.clone(),defaultEquals:t=>t.toCss(!0)===N7.toCss(!0)}})],om.prototype,"color",void 0),d([pt({Water:"water"},{readOnly:!0})],om.prototype,"type",void 0),d([m({type:["small","medium","large"],json:{write:!0,default:"medium"}})],om.prototype,"waterbodySize",void 0),d([m({type:Number,json:{write:!0,default:null}})],om.prototype,"waveDirection",void 0),d([m({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],om.prototype,"waveStrength",void 0),om=F7=d([U("esri.symbols.WaterSymbol3DLayer")],om);const N7=new Ye([0,119,190]);var j7;let Td=j7=class extends lt{constructor(t){super(t),this.name=null,this.styleUrl=null,this.styleName=null,this.portal=null}clone(){return new j7({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}};d([m({type:String})],Td.prototype,"name",void 0),d([m({type:String})],Td.prototype,"styleUrl",void 0),d([m({type:String})],Td.prototype,"styleName",void 0),d([m({type:Ue})],Td.prototype,"portal",void 0),Td=j7=d([U("esri.symbols.support.StyleOrigin")],Td);var V7;let Q0=V7=class extends lt{constructor(){super(...arguments),this.url=""}clone(){return new V7({url:this.url})}};d([m({type:String})],Q0.prototype,"url",void 0),Q0=V7=d([U("esri.symbols.support.Thumbnail")],Q0);const wwe={icon:Ys,object:qs,line:Co,path:xa,fill:Io,extrude:am,text:ys,water:om},y7e=We.ofType({base:Do,key:"type",typeMap:wwe,errorContext:"symbol-layer"});let ul=class extends Vn{constructor(e){super(e),this.styleOrigin=null,this.thumbnail=null,this.type=null;const i=this.__accessor__&&this.__accessor__.metadata&&this.__accessor__.metadata.symbolLayers,r=i?.type,n=r||We;this._set("symbolLayers",new n)}get color(){return null}set color(e){this.constructed&&$e.getLogger(this).error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}set symbolLayers(e){$p(e,this._get("symbolLayers"))}readStyleOrigin(e,i,r){if(e.styleUrl&&e.name){const n=Wm(e.styleUrl,r);return new Td({styleUrl:n,name:e.name})}if(e.styleName&&e.name)return new Td({portal:r?.portal||Ue.getDefault(),styleName:e.styleName,name:e.name});r?.messages&&r.messages.push(new kc("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:r,definition:e}))}writeStyleOrigin(e,i,r,n){if(e.styleUrl&&e.name){let s=Hw(e.styleUrl,n);_l(s)&&(s=_c(s)),i.styleOrigin={styleUrl:s,name:e.name}}else e.styleName&&e.name&&(e.portal&&n?.portal&&!Xpe(e.portal.restUrl,n.portal.restUrl)?n?.messages&&n.messages.push(new kc("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):i.styleOrigin={styleName:e.styleName,name:e.name})}normalizeCtorArgs(e){return e instanceof Do||e&&wwe[e.type]?{symbolLayers:[e]}:Array.isArray(e)?{symbolLayers:e}:e}};d([m({json:{read:!1,write:!1}})],ul.prototype,"color",null),d([m({type:y7e,nonNullable:!0,json:{write:!0}}),Ii(ebe)],ul.prototype,"symbolLayers",null),d([m({type:Td})],ul.prototype,"styleOrigin",void 0),d([Ve("styleOrigin")],ul.prototype,"readStyleOrigin",null),d([qe("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],ul.prototype,"writeStyleOrigin",null),d([m({type:Q0,json:{read:!1}})],ul.prototype,"thumbnail",void 0),d([m({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],ul.prototype,"type",void 0),ul=d([U("esri.symbols.Symbol3D")],ul);let $S=class extends _e{constructor(e){super(e),this.visible=!0}clone(){throw new Error("Subclasses of Callout3D should implement their own clone method.")}};d([m({type:["line"],constructOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,isRequired:!0}}})],$S.prototype,"type",void 0),d([m({readOnly:!0})],$S.prototype,"visible",void 0),$S=d([U("esri.symbols.callouts.Callout3D")],$S);var B7;let Y3=B7=class extends _e{constructor(t){super(t),this.color=new Ye("white")}clone(){return new B7({color:de(this.color)})}};d([m(Uv({colorRequiredOnWrite:!0}))],Y3.prototype,"color",void 0),Y3=B7=d([U("esri.symbols.callouts.LineCallout3DBorder")],Y3);const v7e=Y3;var U7;let lm=U7=class extends $S{constructor(t){super(t),this.type="line",this.color=new Ye([0,0,0,1]),this.size=Xi(1),this.border=null}get visible(){return this.size>0&&this.color!=null&&this.color.a>0}clone(){return new U7({color:de(this.color),size:this.size,border:de(this.border)})}};d([pt({line:"line"})],lm.prototype,"type",void 0),d([m(Uv({colorRequiredOnWrite:!0}))],lm.prototype,"color",void 0),d([m({...Up,json:{write:{isRequired:!0}}})],lm.prototype,"size",void 0),d([m({type:v7e,json:{write:!0}})],lm.prototype,"border",void 0),d([m({readOnly:!0})],lm.prototype,"visible",null),lm=U7=d([U("esri.symbols.callouts.LineCallout3D")],lm);function XZ(t){if(!t)return!1;const e=t.verticalOffset;return!(!e||e.screenLength<=0||e.maxWorldLength!=null&&e.maxWorldLength<=0)}function _we(t){return!t||!t.supportsCallout||!t.supportsCallout()?!1:!!t.callout?.visible&&!!XZ(t)}function nAt(t){return t.type==="point-3d"||t.type==="label-3d"}function sAt(t){return t.horizontalAlignment==="center"}const xwe={types:{key:"type",base:$S,typeMap:{line:lm}},json:{write:!0}};var H7;let Hy=H7=class extends _e{constructor(t){super(t),this.screenLength=0,this.minWorldLength=0,this.maxWorldLength=null}clone(){return new H7({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})}};d([m({...Up,json:{write:{isRequired:!0}}})],Hy.prototype,"screenLength",void 0),d([m({type:Number,nonNullable:!0,json:{write:!0,default:0}})],Hy.prototype,"minWorldLength",void 0),d([m({type:Number,json:{write:!0}})],Hy.prototype,"maxWorldLength",void 0),Hy=H7=d([U("esri.symbols.support.Symbol3DVerticalOffset")],Hy);var Z3;const Swe=We.ofType({base:null,key:"type",typeMap:{text:ys}});let vd=Z3=class extends ul{constructor(t){super(t),this.verticalOffset=null,this.callout=null,this.styleOrigin=null,this.symbolLayers=new Swe,this.type="label-3d"}supportsCallout(){return!0}hasVisibleCallout(){return _we(this)}hasVisibleVerticalOffset(){return XZ(this)}clone(){return new Z3({styleOrigin:de(this.styleOrigin),symbolLayers:de(this.symbolLayers),thumbnail:de(this.thumbnail),callout:de(this.callout),verticalOffset:de(this.verticalOffset)})}static fromTextSymbol(t){return new Z3({symbolLayers:new We([ys.fromTextSymbol(t)])})}};d([m({type:Hy,json:{write:!0}})],vd.prototype,"verticalOffset",void 0),d([m(xwe)],vd.prototype,"callout",void 0),d([m({json:{read:!1,write:!1}})],vd.prototype,"styleOrigin",void 0),d([m({type:Swe})],vd.prototype,"symbolLayers",void 0),d([pt({LabelSymbol3D:"label-3d"},{readOnly:!0})],vd.prototype,"type",void 0),vd=Z3=d([U("esri.symbols.LabelSymbol3D")],vd);var X3;const $we=We.ofType({base:null,key:"type",typeMap:{line:Co,path:xa}}),b7e=We.ofType({base:null,key:"type",typeMap:{line:Co,path:xa}});let Pd=X3=class extends ul{constructor(t){super(t),this.symbolLayers=new $we,this.type="line-3d"}clone(){return new X3({styleOrigin:de(this.styleOrigin),symbolLayers:de(this.symbolLayers),thumbnail:de(this.thumbnail)})}static fromSimpleLineSymbol(t){return new X3({symbolLayers:new We([Co.fromSimpleLineSymbol(t)])})}};d([m({type:$we,json:{type:b7e}})],Pd.prototype,"symbolLayers",void 0),d([pt({LineSymbol3D:"line-3d"},{readOnly:!0})],Pd.prototype,"type",void 0),Pd=X3=d([U("esri.symbols.LineSymbol3D")],Pd);var J3;const Twe=We.ofType({base:null,key:"type",typeMap:{fill:Io}});let Pm=J3=class extends ul{constructor(t){super(t),this.symbolLayers=new Twe,this.type="mesh-3d"}clone(){return new J3({styleOrigin:de(this.styleOrigin),symbolLayers:de(this.symbolLayers),thumbnail:de(this.thumbnail)})}static fromSimpleFillSymbol(t){return new J3({symbolLayers:new We([Io.fromSimpleFillSymbol(t)])})}};d([m({type:Twe})],Pm.prototype,"symbolLayers",void 0),d([pt({MeshSymbol3D:"mesh-3d"},{readOnly:!0})],Pm.prototype,"type",void 0),Pm=J3=d([U("esri.symbols.MeshSymbol3D")],Pm);let pE=class extends Vn{constructor(e){super(e),this.type="simple-line",this.width=.75}hash(){return`${this.type}.${this.width}`}};d([pt({esriSLS:"simple-line"},{readOnly:!0})],pE.prototype,"type",void 0),d([m({type:Number,cast:xi,json:{write:!0}})],pE.prototype,"width",void 0),pE=d([U("esri.symbols.LineSymbol")],pE);var G7;let bh=G7=class extends _e{constructor(t){super(t),this.placement="begin-end",this.type="line-marker",this.style="arrow"}writeStyle(t,e,i,r){e[i]=r?.origin==="web-map"?"arrow":t}set color(t){this._set("color",t)}readColor(t){return t?.[0]!=null?[t[0],t[1],t[2],t[3]/255]:t}writeColor(t,e,i,r){r?.origin==="web-map"||(e[i]=t)}clone(){return new G7({color:de(this.color),placement:this.placement,style:this.style})}hash(){return`${this.placement}.${this.color?.hash()}.${this.style}`}};d([m({type:["begin","end","begin-end"],json:{write:!0}})],bh.prototype,"placement",void 0),d([pt({"line-marker":"line-marker"},{readOnly:!0}),m({json:{origins:{"web-map":{write:!1}}}})],bh.prototype,"type",void 0),d([m({type:gwe})],bh.prototype,"style",void 0),d([qe("style")],bh.prototype,"writeStyle",null),d([m({type:Ye,value:null,json:{write:{allowNull:!0}}})],bh.prototype,"color",null),d([Ve("color")],bh.prototype,"readColor",null),d([qe("color")],bh.prototype,"writeColor",null),bh=G7=d([U("esri.symbols.LineSymbolMarker")],bh);const w7e=bh;var q7;const H6=new Gt({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});let en=q7=class extends pE{constructor(...t){super(...t),this.type="simple-line",this.style="solid",this.cap="round",this.join="round",this.marker=null,this.miterLimit=2}normalizeCtorArgs(t,e,i,r,n,s){if(t&&typeof t!="string")return t;const a={};return t!=null&&(a.style=t),e!=null&&(a.color=e),i!=null&&(a.width=xi(i)),r!=null&&(a.cap=r),n!=null&&(a.join=n),s!=null&&(a.miterLimit=xi(s)),a}clone(){return new q7({color:de(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit,marker:this.marker?.clone()})}hash(){return`${super.hash()}.${this.color?.hash()}.${this.style}.${this.cap}.${this.join}.${this.miterLimit}.${this.marker?.hash()}`}};d([pt({esriSLS:"simple-line"},{readOnly:!0})],en.prototype,"type",void 0),d([m({type:H6.apiValues,json:{read:H6.read,write:H6.write}})],en.prototype,"style",void 0),d([m({type:["butt","round","square"],json:{write:{overridePolicy:(t,e,i)=>({enabled:t!=="round"&&i?.origin==null})}}})],en.prototype,"cap",void 0),d([m({type:["miter","round","bevel"],json:{write:{overridePolicy:(t,e,i)=>({enabled:t!=="round"&&i?.origin==null})}}})],en.prototype,"join",void 0),d([m({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":w7e}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],en.prototype,"marker",void 0),d([m({type:Number,json:{read:!1,write:!1}})],en.prototype,"miterLimit",void 0),en=q7=d([U("esri.symbols.SimpleLineSymbol")],en);let TS=class extends Vn{constructor(e){super(e),this.outline=null,this.type=null}hash(){return`${this.type}.${this.outline?.hash()}`}};d([m({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":en}},json:{default:null,write:!0}})],TS.prototype,"outline",void 0),d([m({type:["simple-fill","picture-fill"],readOnly:!0})],TS.prototype,"type",void 0),TS=d([U("esri.symbols.FillSymbol")],TS);function _7e(t,e,i){return e.imageData?Jpe({mediaType:e.contentType||"image/png",isBase64:!0,data:e.imageData}):kwe(e.url,i)}function kwe(t,e){if(!_l(t)){const i=S7e(e);if(i)return Bw(i,"images",t)}return Wm(t,e)}function x7e(t,e,i,r){if(ng(t)){const n=Uw(t);if(!n)return;e.contentType=n.mediaType,e.imageData=n.data,i&&i.imageData===e.imageData&&i.url&&Gw(i.url,e,"url",r)}else Gw(t,e,"url",r)}const Ewe={json:{read:{source:["imageData","url"],reader:_7e},write:{writer(t,e,i,r){x7e(t,e,this.source,r)}}}},Cwe={readOnly:!0,json:{read:{source:["imageData","url"],reader(t,e,i){const r={};return e.imageData&&(r.imageData=e.imageData),e.contentType&&(r.contentType=e.contentType),e.url&&(r.url=kwe(e.url,i)),r}}}};function S7e(t){if(!t)return null;const{origin:e,layer:i}=t;if(e!=="service"&&e!=="portal-item")return null;const r=i?.type;return r==="feature"||r==="stream"?i.parsedUrl?.path:r==="map-image"||r==="tile"?t.url?.path:null}var W7;let ol=W7=class extends TS{constructor(...t){super(...t),this.type="picture-fill",this.url=null,this.xscale=1,this.yscale=1,this.width=12,this.height=12,this.xoffset=0,this.yoffset=0,this.source=null}normalizeCtorArgs(t,e,i,r){if(t&&typeof t!="string"&&t.imageData==null)return t;const n={};return t&&(n.url=t),e&&(n.outline=e),i!=null&&(n.width=xi(i)),r!=null&&(n.height=xi(r)),n}clone(){const t=new W7({color:de(this.color),height:this.height,outline:de(this.outline),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return t._set("source",de(this.source)),t}hash(){return`${super.hash()}.${this.color?.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`}};d([pt({esriPFS:"picture-fill"},{readOnly:!0})],ol.prototype,"type",void 0),d([m(Ewe)],ol.prototype,"url",void 0),d([m({type:Number,json:{write:!0}})],ol.prototype,"xscale",void 0),d([m({type:Number,json:{write:!0}})],ol.prototype,"yscale",void 0),d([m({type:Number,cast:xi,json:{write:!0}})],ol.prototype,"width",void 0),d([m({type:Number,cast:xi,json:{write:!0}})],ol.prototype,"height",void 0),d([m({type:Number,cast:xi,json:{write:!0}})],ol.prototype,"xoffset",void 0),d([m({type:Number,cast:xi,json:{write:!0}})],ol.prototype,"yoffset",void 0),d([m(Cwe)],ol.prototype,"source",void 0),ol=W7=d([U("esri.symbols.PictureFillSymbol")],ol);let cm=class extends Vn{constructor(e){super(e),this.angle=0,this.type=null,this.xoffset=0,this.yoffset=0,this.size=9}hash(){return`${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`}};d([m({type:Number,json:{read:t=>t&&-1*t,write:(t,e)=>e.angle=t&&-1*t}})],cm.prototype,"angle",void 0),d([m({type:["simple-marker","picture-marker"],readOnly:!0})],cm.prototype,"type",void 0),d([m({type:Number,cast:xi,json:{write:!0}})],cm.prototype,"xoffset",void 0),d([m({type:Number,cast:xi,json:{write:!0}})],cm.prototype,"yoffset",void 0),d([m({cast:t=>t==="auto"?t:Po(xi(t)),json:{write:!0}})],cm.prototype,"size",void 0),cm=d([U("esri.symbols.MarkerSymbol")],cm);var Y7;let Ka=Y7=class extends cm{constructor(...t){super(...t),this.color=null,this.type="picture-marker",this.url=null,this.source=null,this.height=12,this.width=12,this.size=null}normalizeCtorArgs(t,e,i){if(t&&typeof t!="string"&&t.imageData==null)return t;const r={};return t&&(r.url=t),e!=null&&(r.width=xi(e)),i!=null&&(r.height=xi(i)),r}readHeight(t,e){return e.size||t}readWidth(t,e){return e.size||t}clone(){const t=new Y7({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return t._set("source",de(this.source)),t}hash(){return`${super.hash()}.${this.height}.${this.url}.${this.width}`}};d([m({json:{write:!1}})],Ka.prototype,"color",void 0),d([pt({esriPMS:"picture-marker"},{readOnly:!0})],Ka.prototype,"type",void 0),d([m(Ewe)],Ka.prototype,"url",void 0),d([m(Cwe)],Ka.prototype,"source",void 0),d([m({type:Number,cast:xi,json:{write:!0}})],Ka.prototype,"height",void 0),d([Ve("height",["height","size"])],Ka.prototype,"readHeight",null),d([m({type:Number,cast:xi,json:{write:!0}})],Ka.prototype,"width",void 0),d([m({json:{write:!1}})],Ka.prototype,"size",void 0),Ka=Y7=d([U("esri.symbols.PictureMarkerSymbol")],Ka);var Qb;const Iwe=We.ofType({base:null,key:"type",typeMap:{icon:Ys,object:qs,text:ys}});let Oo=Qb=class extends ul{constructor(t){super(t),this.verticalOffset=null,this.callout=null,this.symbolLayers=new Iwe,this.type="point-3d"}supportsCallout(){if((this.symbolLayers?this.symbolLayers.length:0)<1)return!1;for(const t of this.symbolLayers.items)switch(t.type){case"icon":case"text":case"object":continue;default:return!1}return!0}hasVisibleCallout(){return _we(this)}hasVisibleVerticalOffset(){return XZ(this)}clone(){return new Qb({verticalOffset:de(this.verticalOffset),callout:de(this.callout),styleOrigin:de(this.styleOrigin),symbolLayers:de(this.symbolLayers),thumbnail:de(this.thumbnail)})}static fromSimpleMarkerSymbol(t){return new Qb({symbolLayers:new We([Ys.fromSimpleMarkerSymbol(t)])})}static fromPictureMarkerSymbol(t){return new Qb({symbolLayers:new We([Ys.fromPictureMarkerSymbol(t)])})}static fromCIMSymbol(t){if(t.data?.symbol?.type!=="CIMPointSymbol")return null;const i=t.data.symbol;return new Qb(i?.callout?{symbolLayers:new We([Ys.fromCIMSymbol(t)]),callout:new lm({size:.5,color:new Ye([0,0,0])}),verticalOffset:new Hy({screenLength:40})}:{symbolLayers:new We([Ys.fromCIMSymbol(t)])})}static fromTextSymbol(t){return new Qb({symbolLayers:new We([ys.fromTextSymbol(t)])})}};d([m({type:Hy,json:{write:!0}})],Oo.prototype,"verticalOffset",void 0),d([m(xwe)],Oo.prototype,"callout",void 0),d([m({type:Iwe,json:{origins:{"web-scene":{write:!0}}}})],Oo.prototype,"symbolLayers",void 0),d([pt({PointSymbol3D:"point-3d"},{readOnly:!0})],Oo.prototype,"type",void 0),Oo=Qb=d([U("esri.symbols.PointSymbol3D")],Oo);var fE;const Mwe=We.ofType({base:null,key:"type",typeMap:{extrude:am,fill:Io,icon:Ys,line:Co,object:qs,text:ys,water:om}});let bu=fE=class extends ul{constructor(t){super(t),this.symbolLayers=new Mwe,this.type="polygon-3d"}initialize(){const t=e=>{e.type==="line"&&wv($e.getLogger(this),"LineSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use FillSymbol3DLayer.outline instead.",version:"4.28"}),e.type==="text"&&wv($e.getLogger(this),"TextSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use Labels instead.",version:"4.28"})};for(const e of this.symbolLayers)t(e);this.addHandles(Oa(()=>this.symbolLayers,"after-add",({item:e})=>t(e),xu))}clone(){return new fE({styleOrigin:de(this.styleOrigin),symbolLayers:de(this.symbolLayers),thumbnail:de(this.thumbnail)})}static fromJSON(t){const e=new fE;if(e.read(t),e.symbolLayers.length===2&&e.symbolLayers.at(0).type==="fill"&&e.symbolLayers.at(1).type==="line"){const i=e.symbolLayers.at(0),r=e.symbolLayers.at(1);!r.enabled||t.symbolLayers?.[1]&&t.symbolLayers[1].enable===!1||(i.outline={size:r.size,color:r.material!=null?r.material.color:null}),e.symbolLayers.removeAt(1)}return e}static fromSimpleFillSymbol(t){return new fE({symbolLayers:new We([Io.fromSimpleFillSymbol(t)])})}};d([m({type:Mwe,json:{write:!0}})],bu.prototype,"symbolLayers",void 0),d([pt({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],bu.prototype,"type",void 0),bu=fE=d([U("esri.symbols.PolygonSymbol3D")],bu);var Z7;const G6=new Gt({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});let Zi=Z7=class extends TS{constructor(...t){super(...t),this.color=new Ye([0,0,0,.25]),this.outline=new en,this.type="simple-fill",this.style="solid"}normalizeCtorArgs(t,e,i){if(t&&typeof t!="string")return t;const r={};return t&&(r.style=t),e&&(r.outline=e),i&&(r.color=i),r}clone(){return new Z7({color:de(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}hash(){return`${super.hash()}${this.style}.${this.color&&this.color.hash()}`}};d([m()],Zi.prototype,"color",void 0),d([m()],Zi.prototype,"outline",void 0),d([pt({esriSFS:"simple-fill"},{readOnly:!0})],Zi.prototype,"type",void 0),d([m({type:G6.apiValues,json:{read:G6.read,write:G6.write}})],Zi.prototype,"style",void 0),Zi=Z7=d([U("esri.symbols.SimpleFillSymbol")],Zi);var X7;const q6=new Gt({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});let Gr=X7=class extends cm{constructor(...t){super(...t),this.color=new Ye([255,255,255,.25]),this.type="simple-marker",this.size=12,this.style="circle",this.outline=new en}normalizeCtorArgs(t,e,i,r){if(t&&typeof t!="string")return t;const n={};return t&&(n.style=t),e!=null&&(n.size=xi(e)),i&&(n.outline=i),r&&(n.color=r),n}writeColor(t,e){t&&this.style!=="x"&&this.style!=="cross"&&(e.color=t.toJSON()),t===null&&(e.color=null)}set path(t){this.style="path",this._set("path",t)}clone(){return new X7({angle:this.angle,color:de(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){return`${super.hash()}.${this.color&&this.color.hash()}.${this.path}.${this.style}.${this.outline?.hash()}`}};d([m()],Gr.prototype,"color",void 0),d([qe("color")],Gr.prototype,"writeColor",null),d([pt({esriSMS:"simple-marker"},{readOnly:!0})],Gr.prototype,"type",void 0),d([m()],Gr.prototype,"size",void 0),d([m({type:q6.apiValues,json:{read:q6.read,write:q6.write}})],Gr.prototype,"style",void 0),d([m({type:String,json:{write:!0}})],Gr.prototype,"path",null),d([m({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":en}},json:{default:null,write:!0}})],Gr.prototype,"outline",void 0),Gr=X7=d([U("esri.symbols.SimpleMarkerSymbol")],Gr);var J7;let Yi=J7=class extends Vn{constructor(...t){super(...t),this.backgroundColor=null,this.borderLineColor=null,this.borderLineSize=null,this.font=new dc,this.horizontalAlignment="center",this.kerning=!0,this.haloColor=null,this.haloSize=null,this.rightToLeft=null,this.rotated=!1,this.text="",this.type="text",this.verticalAlignment="baseline",this.xoffset=0,this.yoffset=0,this.angle=0,this.width=null,this.lineWidth=192,this.lineHeight=1}normalizeCtorArgs(t,e,i){if(t&&typeof t!="string")return t;const r={};return t&&(r.text=t),e&&(r.font=e),i&&(r.color=i),r}writeLineWidth(t,e,i,r){r&&typeof r!="string"?r.origin:e[i]=t}castLineWidth(t){return xi(t)}writeLineHeight(t,e,i,r){r&&typeof r!="string"?r.origin:e[i]=t}clone(){return new J7({angle:this.angle,backgroundColor:de(this.backgroundColor),borderLineColor:de(this.borderLineColor),borderLineSize:this.borderLineSize,color:de(this.color),font:this.font&&this.font.clone(),haloColor:de(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){return`${this.backgroundColor?.hash()}.${this.borderLineColor}.${this.borderLineSize}.${this.color?.hash()}.${this.font&&this.font.hash()}.${this.haloColor?.hash()}.${this.haloSize}.${this.horizontalAlignment}.${this.kerning}.${this.rightToLeft}.${this.rotated}.${this.text}.${this.verticalAlignment}.${this.width}.${this.xoffset}.${this.yoffset}.${this.lineHeight}.${this.lineWidth}.${this.angle}`}};d([m({type:Ye,json:{write:!0}})],Yi.prototype,"backgroundColor",void 0),d([m({type:Ye,json:{write:!0}})],Yi.prototype,"borderLineColor",void 0),d([m({type:Number,json:{write:!0},cast:xi})],Yi.prototype,"borderLineSize",void 0),d([m({type:dc,json:{write:!0}})],Yi.prototype,"font",void 0),d([m({...vwe,json:{write:!0}})],Yi.prototype,"horizontalAlignment",void 0),d([m({type:Boolean,json:{write:!0}})],Yi.prototype,"kerning",void 0),d([m({type:Ye,json:{write:!0}})],Yi.prototype,"haloColor",void 0),d([m({type:Number,cast:xi,json:{write:!0}})],Yi.prototype,"haloSize",void 0),d([m({type:Boolean,json:{write:!0}})],Yi.prototype,"rightToLeft",void 0),d([m({type:Boolean,json:{write:!0}})],Yi.prototype,"rotated",void 0),d([m({type:String,json:{write:!0}})],Yi.prototype,"text",void 0),d([pt({esriTS:"text"},{readOnly:!0})],Yi.prototype,"type",void 0),d([m({...bwe,json:{write:!0}})],Yi.prototype,"verticalAlignment",void 0),d([m({type:Number,cast:xi,json:{write:!0}})],Yi.prototype,"xoffset",void 0),d([m({type:Number,cast:xi,json:{write:!0}})],Yi.prototype,"yoffset",void 0),d([m({type:Number,json:{read:t=>t&&-1*t,write:(t,e)=>e.angle=t&&-1*t}})],Yi.prototype,"angle",void 0),d([m({type:Number,json:{write:!0}})],Yi.prototype,"width",void 0),d([m({type:Number})],Yi.prototype,"lineWidth",void 0),d([qe("lineWidth")],Yi.prototype,"writeLineWidth",null),d([Ii("lineWidth")],Yi.prototype,"castLineWidth",null),d([m(ywe)],Yi.prototype,"lineHeight",void 0),d([qe("lineHeight")],Yi.prototype,"writeLineHeight",null),Yi=J7=d([U("esri.symbols.TextSymbol")],Yi);var K7;let Sa=K7=class extends Vn{constructor(t){super(t),this.color=null,this.styleName=null,this.portal=null,this.styleUrl=null,this.thumbnail=null,this.name=null,this.type="web-style"}get _fetchCacheKey(){const t=this.portal!=null?this.portal:Ue.getDefault(),e=t.user?t.user.username:null;return`${this.styleName}:${this.styleUrl}:${this.name}:${e}:${t.url}`}read(t,e){this.portal=e?.portal,super.read(t,e)}clone(){return new K7({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}fetchSymbol(t){return this._fetchSymbol(t)}async fetchCIMSymbol(t){Mhe($e.getLogger(this),"WebStyleSymbol.fetchCIMSymbol is deprecated in favour of WebStyleSymbol.fetchSymbol which now supports both web and cim symbology",{version:"4.33",replacement:"WebStyleSymbol.fetchSymbol",see:"https://arcg.is/0CXPTr#fetchSymbol",warnOnce:!0});const e=await this._fetchSymbol({...t,acceptedFormats:["cim"]});if(e?.type!=="cim")throw new ee("webstylesymbol:fetchCIMSymbol","Resolved web style symbol is not of type 'cim'");return e}async _fetchSymbol(t){const e=t!=null?t.cache:null,i=e?this._fetchCacheKey:null;if(e!=null){const a=i&&e.get(i);if(a)return a.clone()}const{resolveWebStyleSymbol:r}=await fe(()=>Promise.resolve().then(()=>Mot),void 0);sr(t);const n=r(this,{portal:this.portal},t);n.catch(a=>{$e.getLogger(this).error("#fetchSymbol()","Failed to create symbol from style",a)});const s=await n;return e?.set(i,s.clone()),s}};d([m({json:{write:!1}})],Sa.prototype,"color",void 0),d([m({type:String,json:{write:!0}})],Sa.prototype,"styleName",void 0),d([m({type:Ue,json:{write:!1}})],Sa.prototype,"portal",void 0),d([m({type:String,json:{read:EF,write:Gw}})],Sa.prototype,"styleUrl",void 0),d([m({type:Q0,json:{read:!1}})],Sa.prototype,"thumbnail",void 0),d([m({type:String,json:{write:!0}})],Sa.prototype,"name",void 0),d([pt({styleSymbolReference:"web-style"},{readOnly:!0})],Sa.prototype,"type",void 0),d([m()],Sa.prototype,"_fetchCacheKey",null),Sa=K7=d([U("esri.symbols.WebStyleSymbol")],Sa);function kN(t){if(!t)return!1;switch(t.type){case"picture-fill":case"picture-marker":case"simple-fill":case"simple-line":case"simple-marker":case"text":case"cim":return!0;default:return!1}}function Bd(t){switch(t?.type){case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":return!0;default:return!1}}const tv={base:Vn,key:"type",typeMap:{"simple-fill":Zi,"picture-fill":ol,"picture-marker":Ka,"simple-line":en,"simple-marker":Gr,text:Yi,"label-3d":vd,"line-3d":Pd,"mesh-3d":Pm,"point-3d":Oo,"polygon-3d":bu,"web-style":Sa,cim:no},errorContext:"symbol"},cAt={base:Vn,key:"type",typeMap:{"picture-marker":Ka,"simple-marker":Gr,"point-3d":Oo,cim:no},errorContext:"symbol"},uAt={base:Vn,key:"type",typeMap:{"simple-line":en,"line-3d":Pd,cim:no},errorContext:"symbol"},dAt={base:Vn,key:"type",typeMap:{"simple-fill":Zi,"picture-fill":ol,"polygon-3d":bu,cim:no},errorContext:"symbol"},$7e={base:Vn,key:"type",typeMap:{"picture-marker":Ka,"simple-marker":Gr,text:Yi,"web-style":Sa,cim:no},errorContext:"symbol"},T7e=ET({types:tv}),Awe={base:Vn,key:"type",typeMap:{"simple-fill":Zi,"picture-fill":ol,"picture-marker":Ka,"simple-line":en,"simple-marker":Gr,text:Yi,"line-3d":Pd,"mesh-3d":Pm,"point-3d":Oo,"polygon-3d":bu,"web-style":Sa,cim:no},errorContext:"symbol"},k7e={base:Vn,key:"type",typeMap:{text:Yi,"label-3d":vd},errorContext:"symbol"},Ase={base:Vn,key:"type",typeMap:{"line-3d":Pd,"mesh-3d":Pm,"point-3d":Oo,"polygon-3d":bu,"web-style":Sa,cim:no},errorContext:"symbol"},E7e={base:Vn,key:"type",typeMap:{"label-3d":vd},errorContext:"symbol"},Pwe=Dp(tv);var Q7;function C7e(t){if(!t)return null;const e={};for(const i in t){const r=Vp(t[i]);r&&(e[i]=r)}return Object.keys(e).length!==0?e:null}function I7e(t){if(t==null)return null;const e={};for(const i in t){const r=t[i];r&&(e[i]=r.toJSON())}return Object.keys(e).length!==0?e:null}var w$;let Hr=(w$=class extends $t(_e){constructor(e){super(e),this.isAggregate=!1,this.layer=null,this.origin=null,this.sourceLayer=null,this._version=0,Object.defineProperty(this,"uid",{value:n3(),configurable:!0}),Object.defineProperty(this,"_lastMeshTransform",{value:{},configurable:!0,writable:!0,enumerable:!1}),arguments.length>1&&YIe($e.getLogger(this),"Graphic",{version:"4.30"})}initialize(){this._watchMeshGeometryChanges()}set aggregateGeometries(e){const i=this._get("aggregateGeometries");JSON.stringify(i)!==JSON.stringify(e)&&this._set("aggregateGeometries",e)}set attributes(e){const i=this._get("attributes");i!==e&&(this._set("attributes",e),this._notifyLayer("attributes",i,e))}set geometry(e){const i=this._get("geometry");i!==e&&(this._set("geometry",e),e?.type!=="mesh"&&this._notifyLayer("geometry",i,e))}set popupTemplate(e){const i=this._get("popupTemplate");i!==e&&(this._set("popupTemplate",e),this._notifyLayer("popupTemplate",i,e))}set symbol(e){const i=this._get("symbol");i!==e&&(this._set("symbol",e),this._notifyLayer("symbol",i,e))}get version(){return this._version}set visible(e){const i=this._get("visible");i!==e&&(this._set("visible",e),this._notifyLayer("visible",i,e))}cloneShallow(){return new Q7({aggregateGeometries:this.aggregateGeometries,attributes:this.attributes,geometry:this.geometry,isAggregate:this.isAggregate,layer:this.layer,popupTemplate:this.popupTemplate,sourceLayer:this.sourceLayer,symbol:this.symbol,visible:this.visible,origin:this.origin})}getEffectivePopupTemplate(e=!1){if(this.popupTemplate)return this.popupTemplate;const i=L9e(this.origin);if(i)return i.popupTemplate??(e?i.defaultPopupTemplate:null)??null;const r=this.origin&&"layer"in this.origin?this.origin.layer:null;for(const n of[r,this.sourceLayer,this.layer])if(n&&typeof n=="object"){if("popupTemplate"in n&&n.popupTemplate)return n.popupTemplate;if(e&&"defaultPopupTemplate"in n&&n.defaultPopupTemplate!=null)return n.defaultPopupTemplate}return null}getAttribute(e){return this.attributes?.[e]}setAttribute(e,i){if(this.attributes){const r=this.getAttribute(e);this.attributes[e]=i,this._notifyLayer("attributes",r,i,e)}else this.attributes={[e]:i}}getObjectId(){const e=Tse(this.origin);if(e)return kse(this,e);const i=this.sourceLayer??this.layer;return i?kse(this,i):null}getGlobalId(){const e=Tse(this.origin);if(e?.globalIdField)return this.getAttribute(e.globalIdField);const i=this.sourceLayer??this.layer;return i&&"globalIdField"in i&&i.globalIdField?this.getAttribute(i.globalIdField):null}toJSON(){return{aggregateGeometries:I7e(this.aggregateGeometries),geometry:this.geometry!=null?this.geometry.toJSON():null,symbol:this.symbol!=null?this.symbol.toJSON():null,attributes:pI(this.attributes)?this.attributes.toJSON():{...this.attributes},popupTemplate:this.popupTemplate?.toJSON()??null}}notifyMeshTransformChanged(e={}){const{geometry:i}=this;if(i?.type==="mesh"){const r={origin:i.origin,transform:i.transform};this._notifyLayer("origin-transform",r,r,e.action)}}_notifyLayer(e,i,r,n){if(this._version++,!this.layer||!("graphicChanged"in this.layer))return;const s={graphic:this,property:e,oldValue:i,newValue:r};e==="origin-transform"&&(s.action=n),e==="attributes"&&(s.attributeName=n),this.layer.graphicChanged(s)}_watchMeshGeometryChanges(){this.addHandles([as(()=>this.geometry?.type==="mesh"&&this.geometry.vertexSpace.origin?{localMatrix:this.geometry.transform?.localMatrix,origin:this.geometry.vertexSpace.origin}:void 0,({localMatrix:e,origin:i})=>{this._lastMeshTransform.localMatrix===e&&this._lastMeshTransform.origin===i||(this._lastMeshTransform.localMatrix=e,this._lastMeshTransform.origin=i,this.notifyMeshTransformChanged())}),as(()=>this.geometry?.type==="mesh"?{vertexAttributes:this.geometry.vertexAttributes}:void 0,()=>{const e=this.geometry;e?.type==="mesh"&&e.vertexSpace.origin?(this._lastMeshTransform.localMatrix=e.transform?.localMatrix,this._lastMeshTransform.origin=e.vertexSpace.origin):(this._lastMeshTransform.localMatrix=void 0,this._lastMeshTransform.origin=void 0),this._notifyLayer("geometry",this.geometry,this.geometry)},{equals:(e,i)=>e===i,sync:!0})])}},Q7=w$,w$);d([m({value:null,json:{read:C7e}})],Hr.prototype,"aggregateGeometries",null),d([m({value:null})],Hr.prototype,"attributes",null),d([m({value:null,types:BT,json:{read:Vp}})],Hr.prototype,"geometry",null),d([m({type:Boolean})],Hr.prototype,"isAggregate",void 0),d([m({clonable:!1})],Hr.prototype,"layer",void 0),d([m({clonable:"reference"})],Hr.prototype,"origin",void 0),d([m({type:Bp,value:null})],Hr.prototype,"popupTemplate",null),d([m({clonable:"reference"})],Hr.prototype,"sourceLayer",void 0),d([m({value:null,types:tv})],Hr.prototype,"symbol",null),d([m({clonable:!1,json:{read:!1,write:!1}})],Hr.prototype,"_version",void 0),d([m({type:Boolean,value:!0})],Hr.prototype,"visible",null),Hr=Q7=d([U("esri.Graphic")],Hr);let LC=class extends vC{_own(e){e.layer&&"remove"in e.layer&&e.layer!==this.owner&&e.layer.remove(e),e.layer=this.owner}_release(e){e.layer===this.owner&&(e.layer=null)}};d([_Z({Type:Hr,ensureType:dn(Hr)})],LC.prototype,"itemType",void 0),LC=d([U("esri.support.GraphicsCollection")],LC);let Uf=class extends lt{constructor(e){super(e),this.view=null,this.baseLayerViews=new We,this.groundLayerViews=new We,this.referenceLayerViews=new We,this._loadingHandle=ze(()=>this.view?.map?.basemap,i=>{i&&i.load().catch(()=>{})},Di)}destroy(){this._set("view",null),this._loadingHandle=Rr(this._loadingHandle),this.baseLayerViews.destroyAll(),this.groundLayerViews.destroyAll(),this.referenceLayerViews.destroyAll()}get suspended(){return this.view?.suspended??!0}get updating(){return this.view?.suspended?!1:!!this.view?.map?.basemap?.loaded&&(this.baseLayerViews.some(i=>i.updating)||this.groundLayerViews.some(i=>i.updating)||this.referenceLayerViews.some(i=>i.updating))}};d([m({constructOnly:!0})],Uf.prototype,"view",void 0),d([m({readOnly:!0})],Uf.prototype,"baseLayerViews",void 0),d([m({readOnly:!0})],Uf.prototype,"groundLayerViews",void 0),d([m({readOnly:!0})],Uf.prototype,"referenceLayerViews",void 0),d([m({readOnly:!0})],Uf.prototype,"suspended",null),d([m({type:Boolean,readOnly:!0})],Uf.prototype,"updating",null),Uf=d([U("esri.views.BasemapView")],Uf);const M7e=Uf;let Zl=class extends lt{constructor(e){super(e),this.factor=1.5,this.offset=Ps(0,0),this.position=null,this.size=120,this.maskUrl=null,this.maskEnabled=!0,this.overlayUrl=null,this.overlayEnabled=!0,this.visible=!0}get version(){return this.commitProperty("factor"),this.commitProperty("offset"),this.commitProperty("position"),this.commitProperty("visible"),this.commitProperty("size"),this.commitProperty("maskUrl"),this.commitProperty("maskEnabled"),this.commitProperty("overlayUrl"),this.commitProperty("overlayEnabled"),(this._get("version")||0)+1}};d([m({type:Number})],Zl.prototype,"factor",void 0),d([m({nonNullable:!0})],Zl.prototype,"offset",void 0),d([m()],Zl.prototype,"position",void 0),d([m({type:Number,range:{min:0}})],Zl.prototype,"size",void 0),d([m()],Zl.prototype,"maskUrl",void 0),d([m()],Zl.prototype,"maskEnabled",void 0),d([m()],Zl.prototype,"overlayUrl",void 0),d([m()],Zl.prototype,"overlayEnabled",void 0),d([m({readOnly:!0})],Zl.prototype,"version",null),d([m({type:Boolean})],Zl.prototype,"visible",void 0),Zl=d([U("esri.views.Magnifier")],Zl);const Owe=Zl;let pv=class{constructor(e){this._observable=new jT,this._map=new Map(e)}get size(){return Rt(this._observable),this._map.size}clear(){this._map.size>0&&(this._map.clear(),this._observable.notify())}delete(e){const i=this._map.delete(e);return i&&this._observable.notify(),i}entries(){return Rt(this._observable),this._map.entries()}forEach(e,i){Rt(this._observable),this._map.forEach((r,n)=>e.call(i,r,n,this),i)}get(e){return Rt(this._observable),this._map.get(e)}has(e){return Rt(this._observable),this._map.has(e)}keys(){return Rt(this._observable),this._map.keys()}set(e,i){return this._map.set(e,i),this._observable.notify(),this}values(){return Rt(this._observable),this._map.values()}[Symbol.iterator](){return Rt(this._observable),this._map[Symbol.iterator]()}[Symbol.dispose](){this._observable.destroy()}get[Symbol.toStringTag](){return this._map[Symbol.toStringTag]}};var eH;let B0=eH=class extends _e{constructor(t){super(t),this.name=null,this.code=null}clone(){return new eH({name:this.name,code:this.code})}};d([m({type:String,json:{write:{isRequired:!0}}})],B0.prototype,"name",void 0),d([m({type:[String,Number],json:{write:{isRequired:!0}}})],B0.prototype,"code",void 0),B0=eH=d([U("esri.layers.support.CodedValue")],B0);const A7e=new Gt({inherited:"inherited",codedValue:"coded-value",range:"range"});let iv=class extends _e{constructor(e){super(e),this.name=null,this.type=null}};d([m({type:String,json:{write:!0}})],iv.prototype,"name",void 0),d([pt(A7e),m({json:{write:{isRequired:!0}}})],iv.prototype,"type",void 0),iv=d([U("esri.layers.support.Domain")],iv);var tH,_$;let rv=(_$=class extends iv{constructor(e){super(e),this.codedValues=null,this.type="coded-value"}getName(e){let i=null;if(this.codedValues){const r=String(e);this.codedValues.some(n=>(String(n.code)===r&&(i=n.name),!!i))}return i}clone(){return new tH({codedValues:de(this.codedValues),name:this.name})}},tH=_$,_$);d([m({type:[B0],json:{write:{isRequired:!0}}})],rv.prototype,"codedValues",void 0),d([pt({codedValue:"coded-value"})],rv.prototype,"type",void 0),rv=tH=d([U("esri.layers.support.CodedValueDomain")],rv);var iH,x$;let DC=(x$=class extends iv{constructor(e){super(e),this.type="inherited"}clone(){return new iH}},iH=x$,x$);d([pt({inherited:"inherited"})],DC.prototype,"type",void 0),DC=iH=d([U("esri.layers.support.InheritedDomain")],DC);var rH,S$;let E0=(S$=class extends iv{constructor(e){super(e),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new rH({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}},rH=S$,S$);d([m({json:{type:[Number],read:{source:"range",reader:(t,e)=>e.range?.[1]},write:{enabled:!1,overridePolicy(){return{enabled:this.maxValue!=null&&this.minValue==null}},target:"range",writer(t,e,i){e[i]=[this.minValue||0,t]},isRequired:!0}}})],E0.prototype,"maxValue",void 0),d([m({json:{type:[Number],read:{source:"range",reader:(t,e)=>e.range?.[0]},write:{target:"range",writer(t,e,i){e[i]=[t,this.maxValue||0]},isRequired:!0}}})],E0.prototype,"minValue",void 0),d([pt({range:"range"})],E0.prototype,"type",void 0),E0=rH=d([U("esri.layers.support.RangeDomain")],E0);const Lwe={key:"type",base:iv,typeMap:{range:E0,"coded-value":rv,inherited:DC}};function EN(t){if(!t?.type)return null;switch(t.type){case"range":return E0.fromJSON(t);case"codedValue":return rv.fromJSON(t);case"inherited":return DC.fromJSON(t)}return null}const JZ=new Gt({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml",esriFieldTypeBigInteger:"big-integer",esriFieldTypeDateOnly:"date-only",esriFieldTypeTimeOnly:"time-only",esriFieldTypeTimestampOffset:"timestamp-offset"});var nH;const P7e=new Gt({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",currency:"currency",dateAndTime:"date-and-time",description:"description",emailAddress:"email-address",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",phoneNumber:"phone-number",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});var $$;let Ws=($$=class extends _e{constructor(e){super(e),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=void 0,this.name=null,this.nullable=!0,this.type=null,this.valueType=null,this.visible=!0}readDescription(e,{description:i}){let r=null;try{r=i?JSON.parse(i):null}catch{}return r?.value??null}readValueType(e,{description:i}){let r=null;try{r=i?JSON.parse(i):null}catch{}return r?P7e.fromJSON(r.fieldValueType):null}clone(){return new nH({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain?.clone()??null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})}},nH=$$,$$);d([m({type:String,json:{write:!0}})],Ws.prototype,"alias",void 0),d([m({type:[String,Number],json:{write:{allowNull:!0}}})],Ws.prototype,"defaultValue",void 0),d([m()],Ws.prototype,"description",void 0),d([Ve("description")],Ws.prototype,"readDescription",null),d([m({types:Lwe,json:{read:{reader:EN},write:!0}})],Ws.prototype,"domain",void 0),d([m({type:Boolean,json:{write:!0}})],Ws.prototype,"editable",void 0),d([m({type:li,json:{write:{overridePolicy:t=>({enabled:Number.isFinite(t)})}}})],Ws.prototype,"length",void 0),d([m({type:String,json:{write:!0}})],Ws.prototype,"name",void 0),d([m({type:Boolean,json:{write:!0}})],Ws.prototype,"nullable",void 0),d([pt(JZ)],Ws.prototype,"type",void 0),d([m()],Ws.prototype,"valueType",void 0),d([Ve("valueType",["description"])],Ws.prototype,"readValueType",null),d([m({type:Boolean,json:{read:!1}})],Ws.prototype,"visible",void 0),Ws=nH=d([U("esri.layers.support.Field")],Ws);var sH;let yx=sH=class extends _e{constructor(t){super(t),this.type="map-layer"}clone(){const{mapLayerId:t,gdbVersion:e}=this;return new sH({mapLayerId:t,gdbVersion:e})}};d([pt({mapLayer:"map-layer"}),m({json:{write:{isRequired:!0}}})],yx.prototype,"type",void 0),d([m({type:li,json:{write:{isRequired:!0}}})],yx.prototype,"mapLayerId",void 0),d([m({type:String,json:{write:!0}})],yx.prototype,"gdbVersion",void 0),yx=sH=d([U("esri.layers.support.source.MapLayerSource")],yx);var aH;let Hf=aH=class extends _e{constructor(t){super(t),this.type="query-table"}clone(){const{workspaceId:t,query:e,oidFields:i,spatialReference:r,geometryType:n}=this,s={workspaceId:t,query:e,oidFields:i,spatialReference:r?.clone()??void 0,geometryType:n};return new aH(s)}};d([pt({queryTable:"query-table"}),m({json:{write:{isRequired:!0}}})],Hf.prototype,"type",void 0),d([m({type:String,json:{write:!0}})],Hf.prototype,"workspaceId",void 0),d([m({type:String,json:{write:!0}})],Hf.prototype,"query",void 0),d([m({type:String,json:{write:!0}})],Hf.prototype,"oidFields",void 0),d([m({type:at,json:{write:!0}})],Hf.prototype,"spatialReference",void 0),d([pt(aVe)],Hf.prototype,"geometryType",void 0),Hf=aH=d([U("esri.layers.support.source.QueryTableDataSource")],Hf);var oH;let vx=oH=class extends _e{constructor(t){super(t),this.type="raster"}clone(){const{workspaceId:t,dataSourceName:e}=this;return new oH({workspaceId:t,dataSourceName:e})}};d([pt({raster:"raster"}),m({json:{write:{isRequired:!0}}})],vx.prototype,"type",void 0),d([m({type:String,json:{write:!0}})],vx.prototype,"dataSourceName",void 0),d([m({type:String,json:{write:!0}})],vx.prototype,"workspaceId",void 0),vx=oH=d([U("esri.layers.support.source.RasterDataSource")],vx);var lH;let e0=lH=class extends _e{constructor(t){super(t),this.type="table"}clone(){const{workspaceId:t,gdbVersion:e,dataSourceName:i}=this;return new lH({workspaceId:t,gdbVersion:e,dataSourceName:i})}};d([pt({table:"table"}),m({json:{write:{isRequired:!0}}})],e0.prototype,"type",void 0),d([m({type:String,json:{write:!0}})],e0.prototype,"workspaceId",void 0),d([m({type:String,json:{write:!0}})],e0.prototype,"gdbVersion",void 0),d([m({type:String,json:{write:!0}})],e0.prototype,"dataSourceName",void 0),e0=lH=d([U("esri.layers.support.source.TableDataSource")],e0);var cH,uH;const O7e=Gn()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});let Xl=cH=class extends _e{constructor(t){super(t),this.type="join-table"}readLeftTableSource(t,e,i){return Pse()(t,e,i)}castLeftTableSource(t){return Dp(dH(),t)}readRightTableSource(t,e,i){return Pse()(t,e,i)}castRightTableSource(t){return Dp(dH(),t)}clone(){const{leftTableKey:t,rightTableKey:e,leftTableSource:i,rightTableSource:r,joinType:n}=this,s={leftTableKey:t,rightTableKey:e,leftTableSource:i?.clone()??void 0,rightTableSource:r?.clone()??void 0,joinType:n};return new cH(s)}};d([pt({joinTable:"join-table"}),m({json:{write:{isRequired:!0}}})],Xl.prototype,"type",void 0),d([m({type:String,json:{write:!0}})],Xl.prototype,"leftTableKey",void 0),d([m({type:String,json:{write:!0}})],Xl.prototype,"rightTableKey",void 0),d([m({json:{write:!0}})],Xl.prototype,"leftTableSource",void 0),d([Ve("leftTableSource")],Xl.prototype,"readLeftTableSource",null),d([Ii("leftTableSource")],Xl.prototype,"castLeftTableSource",null),d([m({json:{write:!0}})],Xl.prototype,"rightTableSource",void 0),d([Ve("rightTableSource")],Xl.prototype,"readRightTableSource",null),d([Ii("rightTableSource")],Xl.prototype,"castRightTableSource",null),d([pt(O7e)],Xl.prototype,"joinType",void 0),Xl=cH=d([U("esri.layers.support.source.JoinTableDataSource")],Xl);let W6=null;function Pse(){return W6||(W6=ET({types:dH()})),W6}let Y6=null;function dH(){return Y6||(Y6={key:"type",base:null,typeMap:{"data-layer":bd,"map-layer":yx}}),Y6}const L7e={key:"type",base:null,typeMap:{"join-table":Xl,"query-table":Hf,raster:vx,table:e0}};var T$;let bd=(T$=class extends _e{constructor(e){super(e),this.type="data-layer"}clone(){const{fields:e,dataSource:i}=this;return new uH({fields:e,dataSource:i})}},uH=T$,T$);d([pt({dataLayer:"data-layer"}),m({json:{write:{isRequired:!0}}})],bd.prototype,"type",void 0),d([m({type:[Ws],json:{write:!0}})],bd.prototype,"fields",void 0),d([m({types:L7e,json:{write:!0}})],bd.prototype,"dataSource",void 0),bd=uH=d([U("esri.layers.support.source.DataLayerSource")],bd),bd.from=dn(bd);let t0=class extends $t(_e){constructor(e){super(e),this.onFields=null,this.operator=null,this.searchTerm=null,this.searchType=null}};d([m({type:[String],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.onFields!=null&&this.onFields.length>0}}}}})],t0.prototype,"onFields",void 0),d([m({type:String,json:{write:!0}})],t0.prototype,"operator",void 0),d([m({type:String,json:{write:!0}})],t0.prototype,"searchTerm",void 0),d([m({type:String,json:{write:!0}})],t0.prototype,"searchType",void 0),t0=d([U("esri.rest.support.FullTextSearch")],t0);const Dwe=t0;var hH;const Ose=new Gt({upperLeft:"upper-left",lowerLeft:"lower-left"});let Dy=hH=class extends _e{constructor(t){super(t),this.extent=null,this.mode="view",this.originPosition="upper-left",this.tolerance=1}clone(){return new hH(de({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};d([m({type:Wt,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],Dy.prototype,"extent",void 0),d([m({type:["view","edit"],json:{write:!0}})],Dy.prototype,"mode",void 0),d([m({type:String,json:{read:Ose.read,write:Ose.write}})],Dy.prototype,"originPosition",void 0),d([m({type:Number,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],Dy.prototype,"tolerance",void 0),Dy=hH=d([U("esri.rest.support.QuantizationParameters")],Dy);const D7e=t=>{const e=t;let i=class extends e{};return i=d([U("esri.rest.support.QueryMixin")],i),i},R7e=new Gt({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"});var pH;const Lse=new Gt({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete",EnvelopeAggregate:"envelope-aggregate",CentroidAggregate:"centroid-aggregate",ConvexHullAggregate:"convex-hull-aggregate"});let Qa=pH=class extends _e{constructor(t){super(t),this.maxPointCount=void 0,this.maxRecordCount=void 0,this.maxVertexCount=void 0,this.onStatisticField=null,this.outStatisticFieldName=null,this.statisticType=null,this.statisticParameters=null}writeStatisticParameters(t,e){this.statisticType!=="percentile-continuous"&&this.statisticType!=="percentile-discrete"||(e.statisticParameters=de(t))}clone(){return new pH({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:de(this.statisticParameters)})}};d([m({type:Number,json:{write:!0}})],Qa.prototype,"maxPointCount",void 0),d([m({type:Number,json:{write:!0}})],Qa.prototype,"maxRecordCount",void 0),d([m({type:Number,json:{write:!0}})],Qa.prototype,"maxVertexCount",void 0),d([m({type:String,json:{write:!0}})],Qa.prototype,"onStatisticField",void 0),d([m({type:String,json:{write:!0}})],Qa.prototype,"outStatisticFieldName",void 0),d([m({type:String,json:{read:{source:"statisticType",reader:Lse.read},write:{target:"statisticType",writer:Lse.write}}})],Qa.prototype,"statisticType",void 0),d([m({type:Object})],Qa.prototype,"statisticParameters",void 0),d([qe("statisticParameters")],Qa.prototype,"writeStatisticParameters",null),Qa=pH=d([U("esri.rest.support.StatisticDefinition")],Qa);var K3;const z7e=new Gt({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});var cw;let _t=(cw=class extends D7e(_e){static from(e){return TT(K3,e)}constructor(e){super(e),this.aggregateIds=null,this.cacheHint=void 0,this.compactGeometryEnabled=!1,this.datumTransformation=null,this.defaultSpatialReferenceEnabled=!1,this.distance=void 0,this.dynamicDataSource=void 0,this.formatOf3DObjects=null,this.fullText=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=void 0,this.groupByFieldsForStatistics=null,this.having=null,this.historicMoment=null,this.maxAllowableOffset=void 0,this.maxRecordCountFactor=1,this.multipatchOption=null,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.outStatistics=null,this.parameterValues=null,this.pixelSize=null,this.quantizationParameters=null,this.rangeValues=null,this.relationParameter=null,this.resultType=null,this.returnCentroid=!1,this.returnDistinctValues=!1,this.returnExceededLimitFeatures=!0,this.returnGeometry=!1,this.returnQueryGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.returnTrueCurves=void 0,this.sourceSpatialReference=null,this.spatialRelationship="intersects",this.start=void 0,this.sqlFormat=null,this.text=null,this.timeExtent=null,this.timeReferenceUnknownClient=!1,this.units=null,this.where=null}castDatumTransformation(e){return typeof e=="number"||typeof e=="object"?e:null}writeHistoricMoment(e,i){i.historicMoment=e&&e.getTime()}writeParameterValues(e,i){if(e){const r={};for(const n in e){const s=e[n];Array.isArray(s)?r[n]=s.map(a=>a instanceof Date?a.getTime():a):s instanceof Date?r[n]=s.getTime():r[n]=s}i.parameterValues=r}}writeStart(e,i){i.resultOffset=this.start,i.resultRecordCount=this.num||10,i.where="1=1"}writeWhere(e,i){i.where=e||"1=1"}clone(){return new K3(de({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,compactGeometryEnabled:this.compactGeometryEnabled,datumTransformation:this.datumTransformation,defaultSpatialReferenceEnabled:this.defaultSpatialReferenceEnabled,distance:this.distance,fullText:this.fullText,formatOf3DObjects:this.formatOf3DObjects,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:this.historicMoment!=null?new Date(this.historicMoment):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,returnTrueCurves:this.returnTrueCurves,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}},K3=cw,cw.MAX_MAX_RECORD_COUNT_FACTOR=5,cw);d([m({json:{write:!0}})],_t.prototype,"aggregateIds",void 0),d([m({type:Boolean,json:{write:!0}})],_t.prototype,"cacheHint",void 0),d([m({type:Boolean,json:{default:!1,write:!0}})],_t.prototype,"compactGeometryEnabled",void 0),d([m({json:{write:!0}})],_t.prototype,"datumTransformation",void 0),d([Ii("datumTransformation")],_t.prototype,"castDatumTransformation",null),d([m({type:Boolean,json:{default:!1,write:!0}})],_t.prototype,"defaultSpatialReferenceEnabled",void 0),d([m({type:Number,json:{write:!0}})],_t.prototype,"distance",void 0),d([m({type:bd,json:{write:!0}})],_t.prototype,"dynamicDataSource",void 0),d([m({type:String,json:{write:!0}})],_t.prototype,"formatOf3DObjects",void 0),d([m({type:[Dwe],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.fullText!=null&&this.fullText.length>0}}}}})],_t.prototype,"fullText",void 0),d([m({type:String,json:{write:!0}})],_t.prototype,"gdbVersion",void 0),d([m({types:BT,json:{read:Vp,write:!0}})],_t.prototype,"geometry",void 0),d([m({type:Number,json:{write:!0}})],_t.prototype,"geometryPrecision",void 0),d([m({type:[String],json:{write:!0}})],_t.prototype,"groupByFieldsForStatistics",void 0),d([m({type:String,json:{write:!0}})],_t.prototype,"having",void 0),d([m({type:Date})],_t.prototype,"historicMoment",void 0),d([qe("historicMoment")],_t.prototype,"writeHistoricMoment",null),d([m({type:Number,json:{write:!0}})],_t.prototype,"maxAllowableOffset",void 0),d([m({type:Number,cast:t=>t<1?1:t>_t.MAX_MAX_RECORD_COUNT_FACTOR?_t.MAX_MAX_RECORD_COUNT_FACTOR:t,json:{write:{overridePolicy:t=>({enabled:t>1})}}})],_t.prototype,"maxRecordCountFactor",void 0),d([m({type:["xyFootprint"],json:{write:!0}})],_t.prototype,"multipatchOption",void 0),d([m({type:Number,json:{read:{source:"resultRecordCount"}}})],_t.prototype,"num",void 0),d([m({json:{write:!0}})],_t.prototype,"objectIds",void 0),d([m({type:[String],json:{write:!0}})],_t.prototype,"orderByFields",void 0),d([m({type:[String],json:{write:!0}})],_t.prototype,"outFields",void 0),d([m({type:at,json:{name:"outSR",write:!0}})],_t.prototype,"outSpatialReference",void 0),d([m({type:[Qa],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.outStatistics!=null&&this.outStatistics.length>0}}}}})],_t.prototype,"outStatistics",void 0),d([m({json:{write:!0}})],_t.prototype,"parameterValues",void 0),d([qe("parameterValues")],_t.prototype,"writeParameterValues",null),d([m({type:gt,json:{write:!0}})],_t.prototype,"pixelSize",void 0),d([m({type:Dy,json:{write:!0}})],_t.prototype,"quantizationParameters",void 0),d([m({type:[Object],json:{write:!0}})],_t.prototype,"rangeValues",void 0),d([m({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:this.spatialRelationship==="relation"}}}}})],_t.prototype,"relationParameter",void 0),d([m({type:String,json:{write:!0}})],_t.prototype,"resultType",void 0),d([m({type:Boolean,json:{default:!1,write:!0}})],_t.prototype,"returnCentroid",void 0),d([m({type:Boolean,json:{default:!1,write:!0}})],_t.prototype,"returnDistinctValues",void 0),d([m({type:Boolean,json:{default:!0,write:!0}})],_t.prototype,"returnExceededLimitFeatures",void 0),d([m({type:Boolean,json:{write:!0}})],_t.prototype,"returnGeometry",void 0),d([m({type:Boolean,json:{default:!1,write:!0}})],_t.prototype,"returnQueryGeometry",void 0),d([m({type:Boolean,json:{default:!1,write:!0}})],_t.prototype,"returnM",void 0),d([m({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],_t.prototype,"returnZ",void 0),d([m({type:Boolean,json:{write:!0}})],_t.prototype,"returnTrueCurves",void 0),d([m({type:at,json:{write:!0}})],_t.prototype,"sourceSpatialReference",void 0),d([pt(R7e,{ignoreUnknown:!1,name:"spatialRel"})],_t.prototype,"spatialRelationship",void 0),d([m({type:Number,json:{read:{source:"resultOffset"}}})],_t.prototype,"start",void 0),d([qe("start"),qe("num")],_t.prototype,"writeStart",null),d([m({type:String,json:{write:!0}})],_t.prototype,"sqlFormat",void 0),d([m({type:String,json:{write:!0}})],_t.prototype,"text",void 0),d([m({type:nr,json:{write:!0}})],_t.prototype,"timeExtent",void 0),d([m({type:Boolean,json:{default:!1,write:!0}})],_t.prototype,"timeReferenceUnknownClient",void 0),d([pt(z7e,{ignoreUnknown:!1}),m({json:{write:{overridePolicy(t){return{enabled:!!t&&this.distance!=null}}}}})],_t.prototype,"units",void 0),d([m({type:String,json:{write:{overridePolicy(t){return{enabled:t!=null||this.start!=null&&this.start>0}}}}})],_t.prototype,"where",void 0),d([qe("where")],_t.prototype,"writeWhere",null),_t=K3=d([U("esri.rest.support.Query")],_t);function ey(t){return!(t==null||typeof t!="object"||!("createQuery"in t)||!t.createQuery)}let Xc=class extends Rv{constructor(e){super(e),this._selectionMap=new pv,this._sources=new We,this._trashCan=[],this._layerEditHandles=new We,this._vizTaskId=0,this.view=null,this.showHighlight=!0,this.highlightName="default"}initialize(){this.addHandles([ze(()=>[this.view,this.showHighlight],()=>this._refreshVisualization()),ze(()=>this.view,e=>{e?.when().then(()=>this.syncSources())},Di),Oa(()=>this.sources,"change",e=>{const i=this._selectionMap,r=[];for(const n of e.removed){const s=i.get(n);s&&(i.delete(n),s.highlightHandle?.remove(),r.push({layer:n,selection:[],added:[],removed:[...s.selection]}))}this._refreshListeners(),r.length&&this._onSelectionChange(r)},{onListenerAdd:()=>this._refreshListeners()})])}destroy(){this.clear(),this._layerEditHandles.drain(Rr)}get selections(){return Array.from(this._selectionMap.entries()).map(e=>{const[i,r]=e;return{layer:i,selection:[...r.selection]}})}get count(){let e=0;for(const i of this._selectionMap.values())e+=i.selection.length;return e}get hasSelection(){return this.count>0}get sources(){return this._sources}set sources(e){$p(e,this._sources)}syncSources(){const e=new Set,i=this.view?.map;if(!i)return;const r=n=>{cBe(n)?(n.layers?.forEach(r),n.tables?.forEach(r)):lBe(n)?(n.sublayers?.forEach(r),n.subtables?.forEach(r)):Kne(n)?n.sublayers?.forEach(r):ey(n)&&e.add(n)};i.allLayers.forEach(r),i.allTables.forEach(r),this.sources=[...e]}async getSelectedFeatures(e,i={},r="layerView"){const{view:n,selections:s}=this;if(!n&&r==="layerView")return $e.getLogger(this).warn("Cannot query layer views without a view."),[];const a=(e?.length?s.filter(o=>e.includes(o.layer)):s).map(async o=>{const{layer:l,selection:c}=o;if(!c.length)return;const h=Uy(l)?l.parent:l;if(h!=null){if(n&&r==="layerView"&&!Dse(h)&&Rse(h)){const f=await n.whenLayerView(h).catch(()=>null);if(f)return zse(f,c,i)}return zse(h,c,i)}}).filter(un);return(await Promise.all(a)).filter(un)}updateSelection(e){const i=new Map;for(const[s,a]of this._selectionMap)i.set(s,[...a.selection]);let r=!1;const n=e.current.concat(e.added);for(const s of n){const a=s.sourceLayer,o=s.getObjectId();if(this.sources.includes(a)&&(ey(a)||Uy(a))&&o!==null){const l=d_(i,a,()=>[]);l.includes(o)||(l.push(o),r=!0)}}for(const s of e.removed){const a=s.sourceLayer,o=s.getObjectId();if(this.sources.includes(a)&&(ey(a)||Uy(a))&&o!==null){const l=i.get(a),c=l?.indexOf(o);c!==void 0&&c>=0&&(l?.splice(c,1),r=!0)}}if(r){const{_selectionMap:s,_trashCan:a}=this,o=[];for(const[l,c]of i){const h=s.get(l);h!==void 0&&a.push(h),s.set(l,{selection:c}),o.push({layer:l,selection:c,...jte(h!==void 0?h.selection:[],c)})}this._onSelectionChange(o)}}setSelection(e,i){this._setSelection(e,i)}getSelection(e){return this._selectionMap.get(e)?.selection}appendToSelection(e,i){const r=this._selectionMap.get(e),n=r!==void 0?[...r.selection]:[];for(const s of i)n.includes(s)||n.push(s);this._setSelection(e,n)}removeFromSelection(e,i){const r=this._selectionMap.get(e);if(!r)return;const n=[];for(const s of r.selection)i.includes(s)||n.push(s);this._setSelection(e,n)}toggleInSelection(e,i){const r=this._selectionMap.get(e);if(!r||r.selection.length===0)return void this._setSelection(e,i);const n=new Set(r.selection),s=new Set(i),a=aAe(n,s);this._setSelection(e,Array.from(a))}clear(){const e=this._selectionMap.values();this._trashCan.push(...e);const i=[];for(const[r,n]of this._selectionMap.entries())i.push({layer:r,added:[],removed:[...n.selection],selection:[]});this._selectionMap.clear(),this._onSelectionChange(i)}_onSelectionChange(e){this._refreshVisualization(),this.emit("selection-change",{view:this.view,changes:e})}_refreshVisualization(){for(this._vizTaskId++;this._trashCan.length>0;)this._trashCan.pop()?.highlightHandle?.remove();if(this.view==null)return;const{sources:e,view:i,_selectionMap:r,showHighlight:n}=this,s=this._vizTaskId;for(const a of e){const o=r.get(a),l=Uy(a)?a.parent:a;if(l!=null&&Rse(l)){if(Dse(l))continue;i.whenLayerView(l).then(c=>{o?.highlightHandle?.remove(),o!=null&&n&&s===this._vizTaskId&&"highlight"in c&&typeof c.highlight=="function"&&o.selection.length>0&&(o.highlightHandle=c.highlight(o.selection,this.highlightName))}).catch(()=>{o?.highlightHandle?.remove()})}}}_refreshListeners(){this._layerEditHandles.drain(Rr);const e=new Set(this.sources.map(i=>Uy(i)?i.parent:i));for(const i of e)ey(i)&&"on"in i&&i.on&&this._layerEditHandles.push(i.on("edits",r=>this._onLayerEdit(r,i)))}_onLayerEdit(e,i){if(Kne(i))this._onParentLayerEdit(e,i);else if(e.deletedFeatures.length&&this._selectionMap.has(i)){const r=[];e.deletedFeatures.forEach(({error:n,objectId:s})=>{s!=null&&n==null&&r.push(s)}),this.removeFromSelection(i,r)}}_onParentLayerEdit(e,i){const{deletedFeatures:r,edits:n,updatedFeatures:s}=e;if(n?.updateFeatures?.forEach(a=>{const o=a.getObjectId()??a.attributes[i.objectIdField];if(o==null||s.find(h=>h.objectId===o)?.error)return;const l=i.findSublayerForFeature(a);if(!ey(l))return;const c=i.sublayers.find(h=>!(!ey(h)||!this.getSelection(h)?.includes(o)));ey(c)&&c!==l&&(this.removeFromSelection(c,[o]),this.appendToSelection(l,[o]))}),r.length){const a=[];r.forEach(({error:o,objectId:l})=>{l!=null&&o==null&&a.push(l)}),i.sublayers.forEach(o=>{ey(o)&&this._selectionMap.has(o)&&this.removeFromSelection(o,a)})}}_setSelection(e,i){if(!this.sources.includes(e))throw new Error(`Cannot set selection on layer ${e.title} because it is not in 'sources'`);const r=this._selectionMap.get(e);if(r===void 0||!N7e(r,{selection:i})){r!==void 0&&this._trashCan.push(r),this._selectionMap.set(e,{selection:[...i]});const n={layer:e,selection:[...i],...jte(r!==void 0?r.selection:[],i)};this._onSelectionChange([n])}}};d([m()],Xc.prototype,"_selectionMap",void 0),d([m()],Xc.prototype,"_sources",void 0),d([m({readOnly:!0,nonNullable:!0})],Xc.prototype,"selections",null),d([m({readOnly:!0,nonNullable:!0})],Xc.prototype,"count",null),d([m()],Xc.prototype,"view",void 0),d([m({readOnly:!0,nonNullable:!0})],Xc.prototype,"hasSelection",null),d([m()],Xc.prototype,"showHighlight",void 0),d([m()],Xc.prototype,"sources",null),d([m()],Xc.prototype,"highlightName",void 0),Xc=d([U("esri.views.SelectionManager")],Xc);const Dse=t=>Uy(t)?t.parent?.isTable===!0:t.isTable,F7e=t=>t.layer!==void 0,Rse=t=>t?.when!==void 0,N7e=(t,e)=>{if(t==null&&e==null)return!0;if(t!=null&&e==null||t==null&&e!=null)return!1;if(t!=null&&e!=null&&t.selection!=null&&e.selection!=null){const i=[...t.selection],r=[...e.selection];if(i.length!==r.length)return!1;i.sort(),r.sort();for(let n=0;n<i.length;n++)if(i[n]!==r[n])return!1}return!0},zse=async(t,e,i={})=>{let r;if(F7e(t)){const n=t;r=n===void 0?null:await n.queryFeatures(new _t({...i,objectIds:e})).then(s=>({data:s,layer:t.layer}))}else{const n=t;r=n===void 0?null:await n.queryFeatures(new _t({...i,objectIds:e})).then(s=>({data:s,layer:n}))}return r},j7e=Xc;let mE=class extends $t(lt){constructor(e){super(e),this.accentColor=new Ye([255,127,0]),this.textColor=new Ye([255,255,255])}};d([m({type:Ye,nonNullable:!0})],mE.prototype,"accentColor",void 0),d([m({type:Ye,nonNullable:!0})],mE.prototype,"textColor",void 0),mE=d([U("esri.views.Theme")],mE);const fH=mE,Rwe=["click","double-click","immediate-click","immediate-double-click","hold","drag","key-down","key-up","pointer-down","pointer-move","pointer-up","pointer-drag","mouse-wheel","pointer-enter","pointer-leave","gamepad","focus","blur"],zwe={};function Fwe(t){return!!zwe[t]}function V7e(t){for(const e of t)if(!Fwe(e))return!1;return!0}Rwe.forEach(t=>{zwe[t]=!0});let Nwe=class{constructor(e){this._handlers=new Map,this._counter=0,this._handlerCounts=new Map,this.view=e,this.inputManager=null}connect(e){e&&this.disconnect(),this.inputManager=e,this._handlers.forEach(({handler:i,priority:r},n)=>this.inputManager?.installHandlers(n,[i],r))}disconnect(){this.inputManager&&this._handlers.forEach((e,i)=>this.inputManager?.uninstallHandlers(i)),this.inputManager=null}destroy(){this.disconnect(),this._handlers.clear(),this.view=null}on(e,i,r,n){const s=Array.isArray(e)?e:e.split(",");if(!V7e(s))return s.some(Fwe)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;let a,o;Array.isArray(i)?o=i:(a=i,o=[]),typeof r=="function"?a=r:n=r,n=n??Vm.DEFAULT;const l=this._createUniqueGroupName(),c=new B7e(this.view,s,o,a);this._handlers.set(l,{handler:c,priority:n});for(const h of s){const f=this._handlerCounts.get(h)||0;this._handlerCounts.set(h,f+1)}return this.inputManager&&this.inputManager.installHandlers(l,[c],n),Si(()=>this._removeHandler(l,s))}hasHandler(e){return!!this._handlerCounts.get(e)}_removeHandler(e,i){if(this._handlers.has(e)){this._handlers.delete(e);for(const r of i){const n=this._handlerCounts.get(r);n===void 0||(n===1?this._handlerCounts.delete(r):this._handlerCounts.set(r,n-1))}}this.inputManager&&this.inputManager.uninstallHandlers(e)}_createUniqueGroupName(){return this._counter+=1,`viewEvents_${this._counter}`}},B7e=class extends Ls{constructor(e,i,r,n){super(!0),this._latestDragStart=void 0,this.view=e;for(const s of i)switch(s){case"click":this.registerIncoming("click",r,a=>n(G7e(e,a)));break;case"double-click":this.registerIncoming("double-click",r,a=>n(q7e(e,a)));break;case"immediate-click":this.registerIncoming("immediate-click",r,a=>n(W7e(e,a)));break;case"immediate-double-click":this.registerIncoming("immediate-double-click",r,a=>n(Y7e(e,a)));break;case"hold":this.registerIncoming("hold",r,a=>n(Z7e(e,a)));break;case"drag":this.registerIncoming("drag",r,a=>{const o=this._wrapDrag(a);o&&n(o)});break;case"key-down":this.registerIncoming("key-down",r,a=>n(X7e(a)));break;case"key-up":this.registerIncoming("key-up",r,a=>n(J7e(a)));break;case"pointer-down":this.registerIncoming("pointer-down",r,a=>n(g2(a,"pointer-down")));break;case"pointer-move":this.registerIncoming("pointer-move",r,a=>n(g2(a,"pointer-move")));break;case"pointer-up":this.registerIncoming("pointer-up",r,a=>n(g2(a,"pointer-up")));break;case"pointer-drag":this.registerIncoming("pointer-drag",r,a=>n(K7e(a)));break;case"mouse-wheel":this.registerIncoming("mouse-wheel",r,a=>n(Q7e(a)));break;case"pointer-enter":this.registerIncoming("pointer-enter",r,a=>n(g2(a,"pointer-enter")));break;case"pointer-leave":this.registerIncoming("pointer-leave",r,a=>n(g2(a,"pointer-leave")));break;case"gamepad":this.registerIncoming("gamepad",r,a=>{n(eHe(a))});break;case"focus":this.registerIncoming("focus",r,a=>{n(U7e(a))});break;case"blur":this.registerIncoming("blur",r,a=>{n(H7e(a))})}}_wrapDrag(e){const i=e.data,{x:r,y:n}=i.center,{action:s,pointerType:a,button:o}=i;if(s==="start"&&(this._latestDragStart=i),!this._latestDragStart)return;const l=i.pointer.native,c=i.buttons,{cancelable:h,timestamp:f}=e,g={x:this._latestDragStart.center.x,y:this._latestDragStart.center.y};return s==="end"&&(this._latestDragStart=void 0),{type:"drag",action:s,x:r,y:n,origin:g,pointerType:a,button:o,buttons:c,radius:i.radius,angle:Jye(i.angle),native:l,timestamp:f,cancelable:h,stopPropagation:()=>e.stopPropagation(),defer:y=>e.defer(y),preventDefault:()=>e.preventDefault()}}};function U7e(t){return{type:"focus",timestamp:t.timestamp,native:t.data.native,cancelable:t.cancelable,stopPropagation:()=>t.stopPropagation(),defer:e=>t.defer(e),preventDefault:()=>t.preventDefault()}}function H7e(t){return{type:"blur",timestamp:t.timestamp,native:t.data.native,cancelable:t.cancelable,stopPropagation:()=>t.stopPropagation(),defer:e=>t.defer(e),preventDefault:()=>t.preventDefault()}}function G7e(t,e){const{pointerType:i,button:r,buttons:n,x:s,y:a,native:o,eventId:l}=e.data,{cancelable:c,timestamp:h}=e;return{type:"click",pointerType:i,button:r,buttons:n,x:s,y:a,native:o,timestamp:h,screenPoint:Ps(s,a),mapPoint:sA(t,s,a),eventId:l,cancelable:c,stopPropagation:()=>e.stopPropagation(),defer:f=>e.defer(f),preventDefault:()=>e.preventDefault()}}function q7e(t,e){const{pointerType:i,button:r,buttons:n,x:s,y:a,native:o,eventId:l}=e.data,{cancelable:c,timestamp:h}=e;return{type:"double-click",pointerType:i,button:r,buttons:n,x:s,y:a,native:o,timestamp:h,mapPoint:sA(t,s,a),eventId:l,cancelable:c,stopPropagation:()=>e.stopPropagation(),defer:f=>e.defer(f),preventDefault:()=>e.preventDefault()}}function W7e(t,e){const{pointerType:i,button:r,buttons:n,x:s,y:a,native:o,eventId:l}=e.data,c=o.pointerId,{cancelable:h,timestamp:f}=e;return{type:"immediate-click",pointerId:c,pointerType:i,button:r,buttons:n,x:s,y:a,native:o,timestamp:f,mapPoint:sA(t,s,a),eventId:l,cancelable:h,stopPropagation:()=>e.stopPropagation(),defer:g=>e.defer(g),preventDefault:()=>e.preventDefault()}}function Y7e(t,e){const{pointerType:i,button:r,buttons:n,x:s,y:a,native:o,eventId:l}=e.data,c=o.pointerId,{cancelable:h,timestamp:f}=e;return{type:"immediate-double-click",pointerId:c,pointerType:i,button:r,buttons:n,x:s,y:a,native:o,timestamp:f,mapPoint:sA(t,s,a),eventId:l,cancelable:h,stopPropagation:()=>e.stopPropagation(),defer:g=>e.defer(g),preventDefault:()=>e.preventDefault()}}function Z7e(t,e){const{pointerType:i,button:r,buttons:n,x:s,y:a,native:o}=e.data,{cancelable:l,timestamp:c}=e;return{type:"hold",pointerType:i,button:r,buttons:n,x:s,y:a,native:o,timestamp:c,mapPoint:sA(t,s,a),cancelable:l,stopPropagation:()=>e.stopPropagation(),defer:h=>e.defer(h),preventDefault:()=>e.preventDefault()}}function sA(t,e,i){return t.toMap(Ps(e,i),{exclude:[]})}function X7e(t){const{key:e,repeat:i,native:r}=t.data,{cancelable:n,timestamp:s}=t;return{type:"key-down",key:e,repeat:i,native:r,timestamp:s,cancelable:n,stopPropagation:()=>t.stopPropagation(),defer:a=>t.defer(a),preventDefault:()=>t.preventDefault()}}function J7e(t){const{key:e,native:i}=t.data,{cancelable:r,timestamp:n}=t;return{type:"key-up",key:e,native:i,timestamp:n,cancelable:r,stopPropagation:()=>t.stopPropagation(),defer:s=>t.defer(s),preventDefault:()=>t.preventDefault()}}function g2(t,e){const{x:i,y:r,button:n,buttons:s,native:a,eventId:o}=t.data,l=a.pointerId,c=a.pointerType,{cancelable:h,timestamp:f}=t;return{type:e,x:i,y:r,pointerId:l,pointerType:c,button:n,buttons:s,native:a,timestamp:f,eventId:o,cancelable:h,stopPropagation:()=>t.stopPropagation(),defer:g=>t.defer(g),preventDefault:()=>t.preventDefault()}}function K7e(t){const{x:e,y:i,buttons:r,native:n,eventId:s}=t.data.currentEvent,{button:a}=t.data.startEvent,o=t.data.startEvent.native.pointerId,l=t.data.startEvent.native.pointerType,c=t.data.action,h={x:t.data.startEvent.x,y:t.data.startEvent.y},{cancelable:f,timestamp:g}=t;return{type:"pointer-drag",x:e,y:i,pointerId:o,pointerType:l,button:a,buttons:r,action:c,origin:h,native:n,timestamp:g,eventId:s,cancelable:f,stopPropagation:()=>t.stopPropagation(),defer:y=>t.defer(y),preventDefault:()=>t.preventDefault()}}function Q7e(t){const{cancelable:e,data:i,timestamp:r}=t,{x:n,y:s,deltaY:a,native:o}=i;return{type:"mouse-wheel",x:n,y:s,deltaY:a,native:o,timestamp:r,cancelable:e,stopPropagation:()=>t.stopPropagation(),defer:l=>t.defer(l),preventDefault:()=>t.preventDefault()}}function eHe(t){const{action:e,state:i,device:r}=t.data,{cancelable:n,timestamp:s}=t,{buttons:a,axes:o}=i;return{type:"gamepad",device:r,timestamp:s,action:e,buttons:a,axes:o,cancelable:n,stopPropagation:()=>t.stopPropagation(),defer:l=>t.defer(l),preventDefault:()=>t.preventDefault()}}const tHe="z",iHe="r",jwe={cancel:"Escape",complete:"Enter"},xAt={...jwe,redo:iHe,undo:tHe,center:"Alt",constraint:"Shift",delete:["Backspace","Delete"],vertexAdd:"f",pan:" "},SAt={toggle:"Control"},$At={enterInputMode:"Tab",commit:"Enter",discard:"Escape",next:"Tab"},TAt={moveUp:{key:"ArrowUp",modifier:"Shift",repeats:!0},moveDown:{key:"ArrowDown",modifier:"Shift",repeats:!0},moveLeft:{key:"ArrowLeft",modifier:"Shift",repeats:!0},moveRight:{key:"ArrowRight",modifier:"Shift",repeats:!0},scaleUp:{key:"+",modifier:"Shift"},scaleDown:{key:"-",modifier:"Shift"},factorModifier:{key:Tbe,continuePropagation:!0},toggleOpacity:"t",preserveAspectRatio:{key:"Shift",continuePropagation:!0},rotateIncrements:{key:"Shift",continuePropagation:!0}};let kAt=class{constructor(){this._bindings=new Map}add(e,i){return this.addToggle(e,r=>{r.type==="key-down"&&i(r)})}addToggle(e,i){const r=rHe.fromDefinition(e,i),n=d_(this._bindings,r.key,()=>[]);return n.push(r),Si(()=>RW(n,r))}register(e,i=Vm.WIDGET){return c_([e.on("key-down",r=>this.dispatch(e.inputManager,r),i),e.on("key-up",r=>this.dispatch(e.inputManager,r),i)])}dispatch(e,i){const r=i.key,n=this._bindings.get(r);if(n)for(const s of n)s.process(e,i)}},rHe=class mH{constructor(e,i,r,n,s){this.key=e,this.modifiers=i,this.repeats=r,this.continuePropagation=n,this.callback=s}process(e,i){if(!(i.key!==this.key||"repeat"in i&&i.repeat&&!this.repeats)){for(const r of this.modifiers)if(!e.isModifierKeyDown(r))return;this.continuePropagation||i.stopPropagation(),this.callback(i)}}static fromDefinition(e,i){if(typeof e=="string")return new mH(e,[],!1,!1,i);const{key:r,modifier:n,repeats:s,continuePropagation:a}=e;return new mH(r,n?Array.isArray(n)?n:[n]:[],!!s,!!a,i)}};function nHe(t){return[t.on("before-add",e=>{const i=e.item;if(i==null||t.includes(i))return $e.getLogger("esri.views.interactive.interactiveToolUtils").warn("Tool is either already in the list of tools or tool is `null`. Not adding tool."),void e.preventDefault();i.onAdd()}),t.on("after-remove",e=>{const i=e.item;i.active&&(i.view.activeTool=null),i.destroy()})]}function gH(t){return t.visible&&t.getEditableFlag!=null&&t.getEditableFlag(0)&&t.getEditableFlag(1)}function sHe(t){return t.type==="key-down"&&t.key===jwe.cancel}function wh(t){return Ps(t.x,t.y)}function Vwe(t,e){const i=(t instanceof HTMLElement?t:t.surface)?.getBoundingClientRect();return i?Ps(e.clientX-i.left,e.clientY-i.top):Ps(0,0)}function Bwe(t,e){return e instanceof Event?Vwe(t,e):wh(e)}function Uwe(t){if(t instanceof Event)return!0;if(typeof t=="object"&&"type"in t)switch(t.type){case"click":case"double-click":case"pointer-down":case"pointer-drag":case"pointer-enter":case"pointer-leave":case"pointer-up":case"pointer-move":case"immediate-click":case"immediate-double-click":case"hold":case"drag":case"mouse-wheel":return!0;default:return!1}return!1}let Q3=class extends lt{constructor(){super(...arguments),this._pointerLocations=new Map,this._hoveredManipulators=new pv,this._grabbedManipulators=new pv,this._draggedManipulators=new Map,this._stopDrag=!1,this._externallyDragging=!1,this._revertToNullActiveTool=!1}get cursor(){return this._cursorFromMap(this._grabbedManipulators,"grabbing")??this._cursorFromMap(this._hoveredManipulators,"pointer")}get hasFocusedManipulators(){return this._grabbedManipulators.size>0||this._draggedManipulators.size>0}handleInputEvent(e,i){const r=()=>e.stopPropagation();switch(e.type){case"pointer-move":Fse(e.pointerType)&&this._pointerLocations.set(e.pointerId,{x:e.x,y:e.y,pointerType:e.pointerType});break;case"drag":this._grabbedManipulators.size>0?this._stopDrag=!0:e.action==="start"?this._externallyDragging=!0:e.action==="end"&&(this._externallyDragging=!1),this._stopDrag&&(r(),e.action==="end"&&(this._stopDrag=!1));break;case"pointer-down":{if(!Nse(e))break;const n=wh(e),s=E1(n,e.pointerType,i.tools);if(s==null)break;const a=s.manipulator,o=s.tool;a==null||o==null||!a.interactive||a.grabbable&&a.grabbableForEvent(e)||!a.grabbing||a.dragging||this._releaseManipulatorBeforeDragging(a,e,i),a!=null&&o!=null&&a.interactive&&a.grabbable&&a.grabbableForEvent(e)&&!a.grabbing&&(this._grabbedManipulators.set(e.pointerId,{manipulator:a,tool:o,start:n,pointerType:e.pointerType}),this._grabbedManipulators.size===1&&i.activeTool==null&&(this._revertToNullActiveTool=!0,i.setActiveTool(s.tool)),a.grabbing=!0,a.events.emit("grab-changed",{action:"start",pointerType:e.pointerType,screenPoint:n}),r());break}case"pointer-up":this._draggedManipulators.has(e.pointerId)||this._handlePointerEnd(e,i);break;case"pointer-drag":{if(!Nse(e))break;const n=this._grabbedManipulators.get(e.pointerId),s=n?.manipulator,a=n?.tool;if(s==null||a==null)break;const o=wh(e);o.x=go(o.x,0,i.view.width),o.y=go(o.y,0,i.view.height);const l=n.start,c=this._draggedManipulators.get(e.pointerId);switch(e.action){case"start":case"update":e.action!=="update"&&this._grabbedManipulators.size!==1||(s.dragging=!0,c?s.events.emit("drag",{action:"update",start:l,screenPoint:o}):s.events.emit("drag",{action:"start",start:l,screenPoint:o,pointerType:e.pointerType}),this._draggedManipulators.set(e.pointerId,{tool:a,manipulator:s,start:l}));break;case"end":s.dragging=!1,c&&s.events.emit("drag",{action:"end",start:l,screenPoint:o}),this._draggedManipulators.delete(e.pointerId),this._handlePointerEnd(e,i)}r();break}case"immediate-click":{const n=wh(e),s=E1(n,e.pointerType,i.tools);if(!aHe(e)){for(const c of i.tools)if((s==null||s.tool!==c||c.automaticManipulatorSelection)&&c.manipulators){let h=!1;c.manipulators.forEach(({manipulator:f})=>{f.selected&&(f.selected=!1,h=!0)}),h&&c.onManipulatorSelectionChanged&&c.onManipulatorSelectionChanged()}}if(s==null)break;const{manipulator:a,tool:o}=s;if(!a.interactive)break;a.selectable&&o.automaticManipulatorSelection&&(a.selected=!a.selected,o.onManipulatorSelectionChanged&&o.onManipulatorSelectionChanged());const l=e.native.shiftKey;a.events.emit("immediate-click",{screenPoint:n,button:e.button,pointerType:e.pointerType,shiftKey:l,stopPropagation:r}),Z6(a,r);break}case"click":{const n=wh(e),s=E1(n,e.pointerType,i.tools),a=s?.manipulator;if(a==null||!a.interactive)break;const o=e.native.shiftKey;a.events.emit(e.type,{screenPoint:n,button:e.button,pointerType:e.pointerType,shiftKey:o}),r();break}case"double-click":{const n=wh(e),s=E1(n,e.pointerType,i.tools),a=s!=null?s.manipulator:null;if(a==null||!a.interactive)break;const o=e.native.shiftKey;a.events.emit("double-click",{screenPoint:n,button:e.button,pointerType:e.pointerType,shiftKey:o,stopPropagation:r}),Z6(a,r);break}case"immediate-double-click":{const n=wh(e),s=E1(n,e.pointerType,i.tools),a=s!=null?s.manipulator:null;if(a==null||!a.interactive)break;const o=e.native.shiftKey;a.events.emit("immediate-double-click",{screenPoint:n,button:e.button,pointerType:e.pointerType,shiftKey:o,stopPropagation:r}),e.pointerType==="mouse"&&Z6(a,r);break}}this._onFocusChange(i.tools)}_releaseManipulatorBeforeDragging(e,i,r){e.grabbing=!1,e.events.emit("grab-changed",{action:"end",pointerType:i.pointerType,screenPoint:wh(i)}),this._grabbedManipulators.forEach(({manipulator:n},s)=>{n===e&&this._grabbedManipulators.delete(s)}),this._afterManipulatorRelease(r.setActiveTool)}_handlePointerEnd(e,i){const r=this._grabbedManipulators.get(e.pointerId)?.manipulator;r!=null&&r.grabbing&&(r.grabbing=!1,r.events.emit("grab-changed",{action:"end",pointerType:e.pointerType,screenPoint:wh(e)}),this._grabbedManipulators.delete(e.pointerId),this._afterManipulatorRelease(i.setActiveTool))}_onFocusChange(e){this._updateFocusedManipulatorTools(e)}_updateFocusedManipulatorTools(e){const i=new Set,r=new Set;this._grabbedManipulators.forEach(({tool:n})=>i.add(n)),this._hoveredManipulators.forEach(({tool:n})=>r.add(n));for(const n of e){n.hasGrabbedManipulators=i.has(n),n.hasHoveredManipulators=r.has(n);const s=this._grabbedManipulators.values(),a=ZIe(s,({tool:o})=>o===n);n.firstGrabbedManipulator=a!=null?a.manipulator:null}}clearPointers(e,{tools:i,setActiveTool:r},n=!0,s){const a=(o,l)=>o===e&&(s==null||s===l);this._grabbedManipulators.forEach(({tool:o,manipulator:l,pointerType:c},h)=>{a(o,l)&&(this._grabbedManipulators.delete(h),l.grabbing=!1,l.events.emit("grab-changed",{action:"end",screenPoint:null,pointerType:c}))}),this._draggedManipulators.forEach(({tool:o,manipulator:l},c)=>{a(o,l)&&(this._draggedManipulators.delete(c),l.dragging=!1,l.events.emit("drag",{action:"cancel"}))}),n&&this._hoveredManipulators.forEach(({tool:o,manipulator:l},c)=>{a(o,l)&&(this._hoveredManipulators.delete(c),l.hovering=!1)}),this._afterManipulatorRelease(r),this._onFocusChange(i)}updateHoveredStateFromKnownPointers(e){this._pointerLocations.forEach((i,r)=>{this._updateHoveredStateForPointerAtScreenPosition(Ps(i.x,i.y),r,i.pointerType,e)})}handleHoverEvent(e,i){const r=e.type;r!=="pointer-up"&&r!=="immediate-click"&&r!=="pointer-move"||!Fse(e.pointerType)||(r!=="pointer-up"&&this._externallyDragging?this._clearHoveredManipulatorStates(e.pointerId):this._updateHoveredStateForPointerAtScreenPosition(wh(e),e.pointerId,e.pointerType,i))}_updateHoveredStateForPointerAtScreenPosition(e,i,r,n){let s=E1(e,r,n);const a=this._hoveredManipulators.get(i)?.manipulator;s==null||s.manipulator.interactive||(s=null),s!=null&&a===s.manipulator||(a!=null&&(a.hovering=!1),s!=null?(s.manipulator.hovering=!0,this._hoveredManipulators.set(i,s)):this._hoveredManipulators.delete(i),this._onFocusChange(n))}_afterManipulatorRelease(e){this._grabbedManipulators.size===0&&this._revertToNullActiveTool&&(e(null),this._revertToNullActiveTool=!1)}_clearHoveredManipulatorStates(e){this._hoveredManipulators.forEach(({manipulator:i},r)=>{e===r&&(this._hoveredManipulators.delete(e),i.hovering=!1)})}_cursorFromMap(e,i){if(!e?.size)return null;for(const{manipulator:r}of e.values())if(r?.interactive){if(r.grabbing&&r.grabCursor)return r.grabCursor;if(r.cursor)return r.cursor}return i}};function E1(t,e,i){for(const r of i){if(r.manipulators==null||!gH(r))continue;const n=r.manipulators.intersect(t,e);if(n!=null)return{tool:r,manipulator:n}}return null}function Fse(t){return t==="mouse"}function Nse(t){return t.pointerType!=="mouse"||t.button===0}function aHe(t){return!!t.native.shiftKey}function Z6(t,e){t?.consumesClicks&&e()}d([m()],Q3.prototype,"cursor",null),Q3=d([U("esri.views.interactive.ToolViewManagerManipulatorState")],Q3);const jse="attached",X6="tools",oHe=1e3;let _h=class extends lt{constructor(e){super(e),this._updatingHandles=new K0,this._clock=xT,this._manipulatorState=new Q3,this.tools=new We,this._interacting=!1,this._interactingTimeout=oHe,this._interactingTimeoutHandle=null}initialize(){this.addHandles([this.view.on(Rwe,e=>{this._handleInputEvent(e)},Vm.TOOL),...nHe(this.tools),this.tools.on("before-add",({item:e})=>{this._updateToolEditableFlag(e)}),this.tools.on("before-remove",({item:e})=>{this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs)}),this.tools.on("change",()=>{this._refreshToolWatchers()})])}destroy(){this.activeTool=null,this.tools.drain(e=>e.destroy()),this._clearInteractingTimeout(),this._interacting=!1,this._updatingHandles.destroy(),this._manipulatorState.destroy()}get _manipulatorStateEventArgs(){return{tools:this.tools,activeTool:this.activeTool,setActiveTool:e=>{this.activeTool=e},view:this.view}}set activeTool(e){if(e!=null&&!this.view.ready)return void $e.getLogger(this).error("Cannot set active tool while view is not ready.");if(e===this.activeTool)return;const i=this.activeTool;this._set("activeTool",e),i?.deactivate(),e?.activate(),this._removeIncompleteTools(e);for(const r of this.tools){this._updateToolEditableFlag(r);const n=gH(r);this.activeTool!=null&&n||this._manipulatorState.clearPointers(r,this._manipulatorStateEventArgs,!n)}}get cursor(){const e=this._manipulatorState.cursor;if(e!=null)return e;for(const i of this.tools)if(i.visible&&i.cursor!=null)return i.cursor;return null}get updating(){return this._updatingHandles.updating||this.tools.some(e=>e.updating)}get interacting(){return this._interacting}_clearInteractingTimeout(){this._interactingTimeoutHandle=Rr(this._interactingTimeoutHandle)}_startInteractingTimeout(){this._clearInteractingTimeout(),this._interactingTimeoutHandle=this._clock.setTimeout(()=>this._interacting=!1,this._interactingTimeout)}attach(){this.view.type==="3d"?this.addHandles([ze(()=>{const{state:e}=this.view;return"camera"in e&&e.camera},()=>this._forEachManipulator(e=>e.onViewChange())),this.view.elevationProvider.on("elevation-change",e=>this._forEachManipulator(i=>i.onElevationChange(e)))],jse):this.addHandles(ze(()=>this.view.extent,()=>this._forEachManipulator(e=>e.onViewChange())))}detach(){this.activeTool=null,this.tools.removeAll(),this.removeHandles(jse),this._clearInteractingTimeout(),this._interacting=!1}_forEachManipulator(e){for(const i of this.tools)i.manipulators&&i.manipulators.forEach(({manipulator:r})=>e(r,i))}_handleInputEvent(e){let i=!1;const r={...e,stopPropagation:()=>{i=!0,e.stopPropagation()}};if(this.activeTool!=null)this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(r);else for(const n of this.tools)!i&&n.visible&&n.handleInputEvent(r);!i&&sHe(e)&&this.activeTool&&(e.stopPropagation(),e.preventDefault(),this.activeTool.cancel(),this.activeTool=null),this._manipulatorState.handleInputEvent(r,this._manipulatorStateEventArgs),i||this.activeTool==null||this.activeTool.handleInputEventAfter(r),this._manipulatorState.handleHoverEvent(r,this.tools),e.type==="pointer-move"&&(this._manipulatorState.hasFocusedManipulators||this.activeTool)&&(this._interacting=!0,this._startInteractingTimeout())}_refreshToolWatchers(){this.removeHandles(X6);for(const e of this.tools){if(e instanceof lt){const i=ze(()=>[e.cursor,e.visible,e.editable],()=>{gH(e)||this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs)});this.addHandles(i,X6)}e.manipulators&&this.addHandles([e.manipulators.on("after-remove",i=>{this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs,!0,i.item.manipulator)}),e.manipulators.on("change",()=>{this._manipulatorState.updateHoveredStateFromKnownPointers(this.tools)})],X6)}this._manipulatorState.updateHoveredStateFromKnownPointers(this.tools)}_updateToolEditableFlag(e){e.setEditableFlag?.(1,this.activeTool==null||e===this.activeTool)}_removeIncompleteTools(e){this.tools.filter(i=>(e==null||i!==e)&&!i.created&&i.removeIncompleteOnCancel).forEach(i=>{this.tools.remove(i)})}get test(){}};d([m({constructOnly:!0,nonNullable:!0})],_h.prototype,"view",void 0),d([m({value:null})],_h.prototype,"activeTool",null),d([m({readOnly:!0,type:We})],_h.prototype,"tools",void 0),d([m()],_h.prototype,"cursor",null),d([m({readOnly:!0})],_h.prototype,"updating",null),d([m()],_h.prototype,"_interacting",void 0),d([m({readOnly:!0})],_h.prototype,"interacting",null),_h=d([U("esri.views.ToolViewManager")],_h);const lHe=new Ye("cyan"),cHe=1,uHe=.25,dHe=new Ye("black"),hHe=.4,pHe=.2,MAt=.25,Hwe="default",fHe="temporary",mHe=new Ye("yellow");var yH;let Jl=yH=class extends lt{constructor(t){super(t),this.name=Hwe,this.color=lHe.clone(),this.haloColor=null,this.haloOpacity=cHe,this.fillOpacity=uHe,this.shadowColor=dHe.clone(),this.shadowOpacity=hHe,this.shadowDifference=pHe,this.haloWidth=2.1,this.haloBlur=.8/this.haloWidth}equals(t){return this.color.equals(t.color)&&(this.haloColor||this.color).equals(t.haloColor||t.color)&&this.haloOpacity===t.haloOpacity&&this.fillOpacity===t.fillOpacity&&this.haloWidth===t.haloWidth&&this.haloBlur===t.haloBlur&&this.shadowColor.equals(t.shadowColor)&&this.shadowOpacity===t.shadowOpacity&&this.shadowDifference===t.shadowDifference}clone(){return new yH({...this,color:this.color.clone(),haloColor:this.haloColor?.clone(),shadowColor:this.shadowColor?.clone()})}assignFrom(t){this.color=t.color.clone(),this.haloColor=t.haloColor?.clone(),this.haloOpacity=t.haloOpacity,this.fillOpacity=t.fillOpacity,this.shadowColor=t.shadowColor.clone(),this.shadowDifference=t.shadowDifference,this.shadowOpacity=t.shadowOpacity,this.haloBlur=t.haloBlur,this.haloWidth=t.haloWidth}};d([m({type:String,constructOnly:!0,nonNullable:!0})],Jl.prototype,"name",void 0),d([m({type:Ye,nonNullable:!0})],Jl.prototype,"color",void 0),d([m({type:Ye})],Jl.prototype,"haloColor",void 0),d([m({nonNullable:!0})],Jl.prototype,"haloOpacity",void 0),d([m({nonNullable:!0})],Jl.prototype,"fillOpacity",void 0),d([m({type:Ye,nonNullable:!0})],Jl.prototype,"shadowColor",void 0),d([m({nonNullable:!0})],Jl.prototype,"shadowOpacity",void 0),d([m({nonNullable:!0})],Jl.prototype,"shadowDifference",void 0),d([m({nonNullable:!0})],Jl.prototype,"haloWidth",void 0),d([m({nonNullable:!0})],Jl.prototype,"haloBlur",void 0),Jl=yH=d([U("esri.views.support.HighlightOptions")],Jl);const fv=Jl;function gHe(){return new(We.ofType(fv))([new fv({name:Hwe}),new fv({name:fHe,color:mHe})])}let bx=class extends lt{constructor(e){super(),this.nativeIndex=null,this._detectedDeviceType="unknown",e.mapping==="standard"?this._detectedDeviceType="standard":yHe.test(e.id)?this._detectedDeviceType="spacemouse":this._detectedDeviceType="unknown",this.nativeIndex=e.index}get native(){const e=navigator.getGamepads?navigator.getGamepads():[];return this.nativeIndex!=null&&this.nativeIndex<e.length?e[this.nativeIndex]:null}get deviceType(){return this._detectedDeviceType}get axisThreshold(){return vHe[this.deviceType]}};d([m({nonNullable:!0,readOnly:!0})],bx.prototype,"nativeIndex",void 0),d([m({type:String,readOnly:!0})],bx.prototype,"deviceType",null),d([m({type:Number,readOnly:!0})],bx.prototype,"axisThreshold",null),bx=d([U("esri.views.input.gamepad.GamepadInputDevice")],bx);const KZ=bx,yHe=new RegExp("^(3dconnexion|space(mouse|navigator|pilot|explorer))","i"),vHe={standard:.15,spacemouse:.025,unknown:0};let gE=class extends lt{constructor(e){super(e),this.devices=new We,this.enabledFocusMode="document"}};d([m({type:We.ofType(KZ),readOnly:!0})],gE.prototype,"devices",void 0),d([m({type:["document","view","none"]})],gE.prototype,"enabledFocusMode",void 0),gE=d([U("esri.views.input.gamepad.GamepadSettings")],gE);const bHe=gE;let eD=class extends lt{constructor(){super(...arguments),this.gamepad=new bHe}};d([m({readOnly:!0})],eD.prototype,"gamepad",void 0),eD=d([U("esri.views.input.Input")],eD);const wHe=eD,J6=()=>m({type:["pan","rotate","zoom","none"],nonNullable:!0});let i0=class extends lt{constructor(e){super(e),this.dragPrimary="pan",this.dragSecondary="rotate",this.dragTertiary="zoom",this.mouseWheel="zoom"}};d([J6()],i0.prototype,"dragPrimary",void 0),d([J6()],i0.prototype,"dragSecondary",void 0),d([J6()],i0.prototype,"dragTertiary",void 0),d([m({type:["zoom","none"],nonNullable:!0})],i0.prototype,"mouseWheel",void 0),i0=d([U("esri.views.navigation.NavigationActionMap")],i0);const QZ=i0;let vy=class extends lt{constructor(e){super(e),this.enabled=!0,this.device=null,this.mode="pan",this.tiltDirection="forward-down",this.velocityFactor=1}};d([m({type:Boolean,nonNullable:!0})],vy.prototype,"enabled",void 0),d([m({type:KZ})],vy.prototype,"device",void 0),d([m({type:["pan","zoom"],nonNullable:!0})],vy.prototype,"mode",void 0),d([m({type:["forward-down","forward-up"],nonNullable:!0})],vy.prototype,"tiltDirection",void 0),d([m({type:Number,nonNullable:!0})],vy.prototype,"velocityFactor",void 0),vy=d([U("esri.views.navigation.gamepad.GamepadSettings")],vy);const Gwe=vy;let by=class extends lt{constructor(e){super(e),this.actionMap=new QZ,this.browserTouchPanEnabled=!0,this.gamepad=new Gwe,this.momentumEnabled=!0}get mouseWheelZoomEnabled(){return this.actionMap.mouseWheel==="zoom"}set mouseWheelZoomEnabled(e){t8($e.getLogger(this),"mouseWheelZoomEnabled",{replacement:"actionMap.mouseWheel",version:"4.32",warnOnce:!0}),this.actionMap.mouseWheel=e?"zoom":"none"}};d([m({type:QZ,nonNullable:!0})],by.prototype,"actionMap",void 0),d([m({type:Boolean})],by.prototype,"browserTouchPanEnabled",void 0),d([m({type:Gwe,nonNullable:!0})],by.prototype,"gamepad",void 0),d([m({type:Boolean})],by.prototype,"momentumEnabled",void 0),d([m({type:Boolean})],by.prototype,"mouseWheelZoomEnabled",null),by=d([U("esri.views.navigation.Navigation")],by);const CN=by;function zAt(t,e,i){const r=qwe(t),n=e,s=_He(r,n,i);if(r){const a=Eo.deriveUnitFromSR(r,t.spatialReference).heightUnit;if(!i&&a!==r.heightUnit){const o=new ee("layerview:unmatched-height-unit",`The vertical units of the layer must match the horizontal units (${a})`,{horizontalUnit:a});return new ee("layerview:unsupported-height-model-info","The vertical coordinate system of the layer is not supported",{heightModelInfo:r,error:o})}}if(!xHe(t)||s===4)return new ee("layerview:unsupported-height-model-info","The vertical coordinate system of the layer is not supported",{heightModelInfo:r});switch(s){case 1:{const a=r?.heightUnit||"unknown",o=n?.heightUnit||"unknown",l=new ee("layerview:incompatible-height-unit",`The vertical units of the layer (${a}) must match the vertical units of the scene (${o})`,{layerUnit:a,sceneUnit:o});return new ee("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:r,sceneHeightModelInfo:n,error:l})}case 2:{const a=r?.heightModel||"unknown",o=n?.heightModel||"unknown",l=new ee("layerview:incompatible-height-model",`The height model of the layer (${a}) must match the height model of the scene (${o})`,{layerHeightModel:a,sceneHeightModel:o});return new ee("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:r,sceneHeightModelInfo:n,error:l})}case 3:{const a=r?.vertCRS||"unknown",o=n?.vertCRS||"unknown",l=new ee("layerview:incompatible-vertical-datum",`The vertical datum of the layer (${a}) must match the vertical datum of the scene (${o})`,{layerDatum:a,sceneDatum:o});return new ee("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:r,sceneHeightModelInfo:n,error:l})}}return null}function _He(t,e,i){if(!Vse(t)||!Vse(e))return 4;if(t==null||e==null)return 0;if(!i&&t.heightUnit!==e.heightUnit)return 1;if(t.heightModel!==e.heightModel)return 2;switch(t.heightModel){case"gravity-related-height":return 0;case"ellipsoidal":return t.vertCRS===e.vertCRS?0:3;default:return 4}}function Vse(t){return t==null||t.heightModel!=null&&t.heightUnit!=null}function xHe(t){return"heightModelInfo"in t&&t.heightModelInfo!=null||t.spatialReference!=null||!Zwe(t)}function qwe(t){if(t.type==="integrated-mesh-3dtiles"||t.type==="gaussian-splat")return null;const e=t.url?wu(t.url):void 0;return!(t.spatialReference?.vcsWkid==null&&e!=null&&e.serverType==="ImageServer")&&Wwe(t)&&t.heightModelInfo?t.heightModelInfo:Zwe(t)?Eo.deriveUnitFromSR($He,t.spatialReference):null}function Wwe(t){return"heightModelInfo"in t}function Ywe(t){if(t.type==="unknown"||!("capabilities"in t))return!1;switch(t.type){case"catalog":case"catalog-footprint":case"csv":case"feature":case"geojson":case"subtype-group":case"ogc-feature":case"oriented-imagery":case"wfs":case"knowledge-graph-sublayer":return!0;default:return!1}}function Zwe(t){return Ywe(t)?!!(t.capabilities&&t.capabilities.data&&t.capabilities.data.supportsZ):Xwe(t)}function SHe(t){return t.layers!=null||Xwe(t)||Ywe(t)||Wwe(t)}function Xwe(t){switch(t.type){case"building-scene":case"elevation":case"integrated-mesh":case"integrated-mesh-3dtiles":case"point-cloud":case"scene":case"voxel":return!0;case"base-dynamic":case"base-elevation":case"base-tile":case"bing-maps":case"catalog":case"catalog-footprint":case"catalog-dynamic-group":case"csv":case"dimension":case"gaussian-splat":case"geojson":case"feature":case"subtype-group":case"geo-rss":case"graphics":case"group":case"imagery":case"imagery-tile":case"kml":case"knowledge-graph":case"link-chart":case"knowledge-graph-sublayer":case"line-of-sight":case"map-image":case"map-notes":case"media":case"ogc-feature":case"open-street-map":case"oriented-imagery":case"parquet":case"route":case"stream":case"tile":case"unknown":case"unsupported":case"vector-tile":case"video":case"viewshed":case"wcs":case"web-tile":case"wfs":case"wms":case"wmts":case null:return!1}return!1}const $He=new Eo({heightModel:"gravity-related-height"});let vH,K6=null;async function THe(t){K6||(K6=fe(()=>import("./geometryServiceUtils-BFfQXmZQ.js"),[]).then(e=>vH=e)),await K6,sr(t)}async function Jwe(t,e,i,r){if(!t)return null;const n=t.spatialReference;return Wp()||Su(n,e)?jv(t,e):vH?vH.projectGeometry(t,e,i,r):(await Promise.race([THe(r),Ym(r)]),Jwe(t,e,i,r))}async function FAt(t,e){try{return t?.spatialReference?await fbe(t,e):null}catch{return null}}let Er=class extends lt{constructor(e){super(e),this.required={extent:!1,heightModelInfo:!1,tileInfo:!1},this.defaultSpatialReference=null,this.userSpatialReference=null,this.sourcePreloadCount=10,this.priorityCollection=null,this.requiresExtentInSpatialReference=!0,this.suspended=!1,this._projectExtentTask={task:null,input:null,output:null,spatialReference:null}}destroy(){this._projectExtentTask.task&&(this._projectExtentTask.task=Nw(this._projectExtentTask.task)),this._set("map",null)}get ready(){return!this._spatialReferenceTask.updating&&!this._tileInfoTask.updating&&!this._extentTask.updating}get heightModelInfoReady(){return!this._heightModelInfoTask.updating}get spatialReference(){return this.userSpatialReference??this._spatialReferenceTask.spatialReference}get extent(){return this._extentTask.extent}get heightModelInfo(){return this._heightModelInfoTask.heightModelInfo}get vcsWkid(){return this._heightModelInfoTask.vcsWkid}get latestVcsWkid(){return this._heightModelInfoTask.latestVcsWkid}get viewingMode(){return this.userSpatialReference==null||this.userSpatialReference.equals(this._spatialReferenceTask.spatialReference)?this._spatialReferenceTask.viewingMode:null}get tileInfo(){return this._tileInfoTask.tileInfo}get mapCollections(){const e=this.map?.(),i=[];return this.priorityCollection!=null&&i.push(this.priorityCollection),i.push({parent:e?.basemap,layers:e?.basemap?.baseLayers},{parent:e?.basemap,layers:e?.basemap?.groundLayers},{layers:e?.layers},{parent:e?.ground,layers:e?.ground?.layers},{parent:e?.basemap,layers:e?.basemap?.referenceLayers}),i}get _spatialReferenceTask(){if(this.suspended)return this._get("_spatialReferenceTask")??{updating:!1};let e;if(this._collectLayers(this.mapCollections,r=>{const n=this._getSupportedSpatialReferences(r);if(n.length>0){const s=this._narrowDownSpatialReferenceCandidates(e,n);s!=null&&(e=s)}return e?.length===1})&&e?.length!==1)return{updating:!0};const i=this._pickSpatialReferenceCandidate(e);return{spatialReference:i?.spatialReference??null,viewingMode:i?.viewingMode??null,updating:!1}}get _tileInfoTask(){if(!this.required.tileInfo)return this._get("_tileInfoTask")??{updating:!1};const e=this.map?.(),i=this.spatialReference;if(!i)return{updating:this._spatialReferenceTask.updating};let r;const n=this._collectLayers([{parent:e?.basemap,layers:e?.basemap?.baseLayers},{parent:e?.basemap,layers:e?.basemap?.groundLayers},{layers:e?.layers}],s=>!(!("tileInfo"in s)||!s.tileInfo?.spatialReference.equals(i))&&(r=s,!0),s=>"tileInfo"in s);return r?{tileInfo:r.tileInfo,updating:!1}:{updating:n}}get _heightModelInfoTask(){if(!this.required.heightModelInfo||this.suspended&&this._get("_heightModelInfoTask")?.heightModelInfo)return this._get("_heightModelInfoTask")??{updating:!1};let e={};const i=this._collectLayers(this.mapCollections,r=>{const n=qwe(r);return!!n&&(e={heightModelInfo:n,vcsWkid:r.spatialReference?.vcsWkid,latestVcsWkid:r.spatialReference?.latestVcsWkid},!0)},r=>SHe(r));return{...e,updating:i}}get _extentCandidatesTask(){if(this.suspended||!this.required.extent)return this._get("_extentCandidatesTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const e=[],i=this._collectLayers(this.mapCollections,r=>{const n="fullExtents"in r&&r.fullExtents||(r.fullExtent!=null?[r.fullExtent]:[]),s=this.requiresExtentInSpatialReference?null:n[0],a=n.find(o=>o.spatialReference.equals(this.spatialReference))??s;if(a)return e.push({extent:a,layer:r}),!0;if(this._getSupportedSpatialReferences(r).length>0)for(const o of n)e.push({extent:o,layer:r});return!1});return{candidates:e,updating:i}}get _extentTask(){const{candidates:e,updating:i}=this._extentCandidatesTask;if(i)return{updating:i};if(e==null||e.length===0)return{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const r=this._pickExtentCandidate(e),n=this.spatialReference;return r.extent.equals(this._projectExtentTask.input)&&n.equals(this._projectExtentTask.spatialReference)?{extent:this._projectExtentTask.output,updating:this._projectExtentTask.task!=null&&!this._projectExtentTask.task.finished}:(this._projectExtentTask.task!=null&&(this._projectExtentTask.task=Nw(this._projectExtentTask.task)),this._projectExtentTask={input:r.extent.clone(),output:null,spatialReference:n.clone(),task:JM(async s=>{try{const a=await Jwe(r.extent,n,"portalItem"in r.layer?r.layer.portalItem:void 0,s);this._projectExtentTask={...this._projectExtentTask,task:null,output:a}}catch{if(Pa(s))return;this._projectExtentTask={...this._projectExtentTask,task:null}}})},{updating:!0})}_narrowDownSpatialReferenceCandidates(e,i){if(e==null)return i;const r=new Array;for(const n of e)for(const s of i){if(!n.spatialReference.equals(s.spatialReference))continue;const a=EHe(n.viewingMode,s.viewingMode);if(a!==!1){r.push({spatialReference:n.spatialReference,viewingMode:a});break}}return r.length>0?r:null}_pickSpatialReferenceCandidate(e){const i=this.defaultSpatialReference;return e==null||e.length<1?i?{spatialReference:i,viewingMode:null}:null:(i!=null&&e.length>1&&e.some(({spatialReference:r})=>r.equals(i))&&(e=e.filter(({spatialReference:r})=>r.equals(i))),e.length>1&&e.some(({viewingMode:r})=>r!==2)&&(e=e.filter(({viewingMode:r})=>r!==2)),e[0])}_getSupportedSpatialReferences(e){const i="supportedSpatialReferences"in e&&e.supportedSpatialReferences||(e.spatialReference?[e.spatialReference]:[]);if(i.length===0)return[];const r=[];for(const n of i){const s=this.getSpatialReferenceSupport(n,e);if(s!=null){const a=s.constraints??[{spatialReference:n,viewingMode:null}];for(const{spatialReference:o,viewingMode:l}of a)this.requiresExtentInSpatialReference&&this.userSpatialReference!=null&&!o.equals(this.userSpatialReference)||r.push({spatialReference:o,viewingMode:l})}}return r}_pickExtentCandidate(e){const i=this.spatialReference;return e.find(({extent:r})=>i.equals(r.spatialReference))||e[0]}_collectLayers(e,i,r=()=>!0){switch(this._loadMaybe(this.map?.())){case"loading":return!0;case"failed":return!1}const n=new kHe(r,i);for(const s of e)if(this._collectCollection(s,n),n.done||n.preloading===this.sourcePreloadCount)break;return n.updating}_collectCollection(e,i){if(e.layers){switch(this._loadMaybe(e.parent)){case"loading":return i.updating=!0,void++i.preloading;case"failed":return}for(const r of e.layers)if((r.type!=="graphics"||!r.internal)&&i.layerFilter(r)){switch(this._loadMaybe(r)){case"failed":continue;case"loading":i.updating=!0,++i.preloading;break;case"loaded":if(i.updating||(i.done=i.pushLayer(r)),i.done||i.preloading===this.sourcePreloadCount)break;"layers"in r&&this._collectCollection({layers:r.layers},i)}if(i.done||i.preloading===this.sourcePreloadCount)break}}}_loadMaybe(e){return e&&"loadStatus"in e&&e.loadStatus!=null?e.loadStatus==="not-loaded"?(e.load().catch(i=>{ss(i)}),"loading"):e.loadStatus:"loaded"}};d([m()],Er.prototype,"required",void 0),d([m({constructOnly:!0})],Er.prototype,"map",void 0),d([m({constructOnly:!0})],Er.prototype,"getSpatialReferenceSupport",void 0),d([m()],Er.prototype,"defaultSpatialReference",void 0),d([m()],Er.prototype,"userSpatialReference",void 0),d([m()],Er.prototype,"sourcePreloadCount",void 0),d([m()],Er.prototype,"priorityCollection",void 0),d([m()],Er.prototype,"requiresExtentInSpatialReference",void 0),d([m()],Er.prototype,"suspended",void 0),d([m({readOnly:!0})],Er.prototype,"ready",null),d([m({readOnly:!0})],Er.prototype,"heightModelInfoReady",null),d([m({readOnly:!0})],Er.prototype,"spatialReference",null),d([m({readOnly:!0})],Er.prototype,"extent",null),d([m({readOnly:!0})],Er.prototype,"heightModelInfo",null),d([m({readOnly:!0})],Er.prototype,"vcsWkid",null),d([m({readOnly:!0})],Er.prototype,"latestVcsWkid",null),d([m({readOnly:!0})],Er.prototype,"viewingMode",null),d([m({readOnly:!0})],Er.prototype,"tileInfo",null),d([m({readOnly:!0})],Er.prototype,"mapCollections",null),d([m({readOnly:!0})],Er.prototype,"_spatialReferenceTask",null),d([m({readOnly:!0})],Er.prototype,"_tileInfoTask",null),d([m({readOnly:!0})],Er.prototype,"_heightModelInfoTask",null),d([m({readOnly:!0})],Er.prototype,"_extentCandidatesTask",null),d([m()],Er.prototype,"_extentTask",null),d([m()],Er.prototype,"_projectExtentTask",void 0),Er=d([U("esri.views.support.DefaultsFromMap")],Er);let kHe=class{constructor(e,i){this.layerFilter=e,this.pushLayer=i,this.preloading=-1,this.updating=!1,this.done=!1}};function EHe(t,e){return t!=null?e!=null?t===e&&t:t:e}function CHe(t){return"tryRecycleWith"in t}let IHe=class{constructor(e,i,r){this.layer=e,this.view=i,this.layerViewImporter=r,this._controller=new AbortController,this._started=!1,this.done=!1,this._deferred=Qs(),this.promise=this._deferred.promise,Ma(this._controller.signal,()=>{this._recycleController?.abort();const n=new ee("cancelled:layerview-create","layerview creation cancelled",{layer:e});this._deferred?.reject(n)})}tryRecycle(e){if(!this.done||!this.layerView||!CHe(this.layerView))return null;this._recycleController?.abort(),this._recycleController=new AbortController;const i=this.layer.type,r=this._recycleController.signal;for(let n=0;n<e.length;n++){const s=e[n];if(s.type!==i)continue;const a=this.layerView.tryRecycleWith(s,{signal:r});if(a){e.splice(n,1),this.layer=s;const o=this.layerView,l=o.view;return this.promise=a.then(()=>(sr(r),s.emit("layerview-destroy",{view:l,layerView:o}),l.emit("layerview-destroy",{view:l,layerView:o}),s.emit("layerview-create",{view:l,layerView:o}),l.emit("layerview-create",{view:l,layerView:o}),o)),this.promise}}return null}destroy(){this._controller.abort();const{layerView:e}=this;if(e){const{layer:i,view:r}=this;i.emit("layerview-destroy",{view:r,layerView:e}),r.emit("layerview-destroy",{layer:i,layerView:e})}this.done=!0,this.layer=null,this.layerView=null,this.view=null,this.layerViewImporter=null,this._map=null,this.promise=null,this._deferred=null}async start(){const{view:e}=this;if(this._started||!e.map)return;this._started=!0;const{_controller:{signal:i},layer:r}=this;this._map=e.map;try{let n,s;if(await r.load({signal:i}),r.prefetchResources&&await r.prefetchResources({signal:i}),MHe(r))n=await r.createLayerView(e,{signal:i});else{if(!this.layerViewImporter.hasLayerViewModule(r))throw new ee("layer:view-not-supported","No layerview implementation was found");const l=await this.layerViewImporter.importLayerView(r);sr(i),n="default"in l?new l.default({layer:r,view:e}):new l({layer:r,view:e})}const a=()=>{s=Rr(s),n.destroyed||n.destroy(),this.done=!0};s=Ma(i,a),sr(i);try{await n.when()}catch(l){throw a(),l}if(!this._map?.allLayers?.includes(r))return a(),void this._deferred?.reject(new ee("view:no-layerview-for-layer","The layer has been removed from the map",{layer:r}));this.layerView=n,r.emit("layerview-create",{view:e,layerView:n}),e.emit("layerview-create",{layer:r,layerView:n}),this.done=!0,this._deferred?.resolve(n)}catch(n){r.emit("layerview-create-error",{view:e,error:n}),e.emit("layerview-create-error",{layer:r,error:n}),this.done=!0,this._deferred?.reject(new ee("layerview:create-error","layerview creation failed",{layer:r,error:n}))}}};function MHe(t){return t.createLayerView!==Br.prototype.createLayerView}function AHe(t){return t!=null&&typeof t=="object"&&"layerViews"in t}let Ko=class extends lt{constructor(e){super(e),this._layerLayerViewInfoMap=new Map,this._recyclingInfoMap=new Map,this._watchUpdatingTracking=new K0,this.supportsGround=!0,this._preloadLayerViewModules=()=>{const i=this.view.map?.allLayers;if(i)for(const r of i)this.layerViewFilter?.(r)!==!1&&this.layerViewImporter.hasLayerViewModule(r)&&this.layerViewImporter.importLayerView(r)},this._reschedule=()=>this.destroyed?Promise.reject():(this._workPromise==null&&(this._workPromise=Qs(),this._workPromise.promise.catch(()=>{})),this.removeHandles("reschedule"),this.addHandles($T(this._doWork),"reschedule"),this._workPromise.promise),this._doWork=()=>{if(this.destroyed)return;const{map:i}=this.view;if(!i)return void this.clear();if(this._map!==i&&(this.clear(),this._map=i),this._workPromise==null)return void this.notifyChange("updating");this.removeHandles("reschedule"),this.removeHandles("collection-change");const r=new Set,n=[],s=this.view.ready,a=h=>{if(h!=null){for(const f of h)if(f){if(this.layerViewFilter?.(f)===!1)continue;r.add(f);const g=this._layerLayerViewInfoMap.get(f);g&&s?g.start():g||this._recyclingInfoMap.has(f)||n.push(f),"layers"in f&&f.layers&&a(f.layers)}}};for(const h of this._rootCollectionNames)a(co(this,h));const o=new Array,l=h=>{const f=h.tryRecycle(n);f?(this._recyclingInfoMap.set(h.layer,h),this.notifyChange("updating"),f.then(()=>{this._recyclingInfoMap.delete(h.layer),this._layerLayerViewInfoMap.set(h.layer,h),this._reschedule(),this.notifyChange("updating")}).catch(g=>{ss(g)||(this._recyclingInfoMap.delete(h.layer),h.destroy(),this._reschedule(),this.notifyChange("updating"))})):o.push(h)};for(const h of this._layerLayerViewInfoMap.values())r.has(h.layer)||(this._layerLayerViewInfoMap.delete(h.layer),l(h));for(const h of this._recyclingInfoMap.values())r.has(h.layer)||(this._recyclingInfoMap.delete(h.layer),l(h));for(const h of n)this._createLayerView(h);this._refreshCollections(),o.forEach(h=>h.destroy());const c=[i?.ground?.layers,i?.basemap?.baseLayers,i?.basemap?.groundLayers,i?.basemap?.referenceLayers,i?.layers].filter(h=>!!h);r.forEach(h=>"layers"in h&&c.push(h.layers)),this.addHandles(c.map(h=>this._watchUpdatingTracking.addOnCollectionChange(()=>h,this._reschedule)),"collection-change"),this._workPromise.resolve(),this._workPromise=null},this._layersToLayerViews=new Map(e.layerviewMapping)}initialize(){this.addHandles([Oa(()=>this.view?.map?.allLayers,"change",this._preloadLayerViewModules,{onListenerAdd:this._preloadLayerViewModules}),ze(()=>{const e=this.view,i=e?.map;return[i?.basemap,i?.ground,i?.layers,e?.ready]},()=>this._reschedule(),Ta)]),this._preloadLayerViewModules(),this._reschedule()}clearHandles(){this._watchUpdatingTracking.removeAll()}destroy(){this.clear(),xO(this._recyclingInfoMap),xO(this._layerLayerViewInfoMap),this._watchUpdatingTracking.destroy(),this._map=null,this._workPromise!=null&&(this._workPromise.reject(Hi()),this._workPromise=null)}get _rootCollectionNames(){return Array.from(this._layersToLayerViews.keys())}get updating(){return this._workPromise!=null||this._watchUpdatingTracking.updating||_Ae(this._layerLayerViewInfoMap,e=>!e.done)||this._recyclingInfoMap.size>0}get updatingRemaining(){let e=0;for(const i of this._layerLayerViewInfoMap.values())i.done||++e;return e}clear(){this.destroyed||(this._clearCollections(),xO(this._layerLayerViewInfoMap),xO(this._recyclingInfoMap))}async whenLayerView(e){await this._reschedule();const i=this._layerLayerViewInfoMap.get(e)?.promise;if(!i){const r=this._recyclingInfoMap.get(e)?.promise;if(!r)throw new ee("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:e});return r}return i}isCreatingLayerViewsForLayer(e,i){this.commitProperty("updatingRemaining");const r=this._layerLayerViewInfoMap.get(e);if(!r?.done)return!0;const n=r.layerView;return!(!n||!i||n.parent===i)||!!(r.done&&n&&"layers"in e&&e.layers?.length)&&e.layers.some(s=>this.isCreatingLayerViewsForLayer(s,n))}_refreshCollections(){for(const[e,i]of this._layersToLayerViews)this._populateLayerViewsOwners(co(this,e),co(this,i),this.view);this.notifyChange("updating"),this.notifyChange("updatingRemaining")}_clearCollections(){for(const e of this._layersToLayerViews.values())co(this,e)?.removeAll()}_populateLayerViewsOwners(e,i,r){if(!e||!i)return void i?.removeAll();let n=0;for(const s of e){const a=this._layerLayerViewInfoMap.get(s);if(!a?.layerView)continue;const{layerView:o}=a;o.layer=s,o.parent=r,i.at(n)!==o&&i.splice(n,0,o),"layers"in s&&AHe(o)&&this._populateLayerViewsOwners(s.layers,o.layerViews,o),++n}n<i.length&&i.splice(n)}_createLayerView(e){e.load().catch(()=>{}),this.layerViewImporter.hasLayerViewModule(e)&&this.layerViewImporter.importLayerView(e);const i=new IHe(e,this.view,this.layerViewImporter);i.promise?.then(()=>this._refreshCollections(),r=>{r&&(ss(r)||r.name==="cancelled:layerview-create")||$e.getLogger(this).error(`Failed to create layerview for layer title:'${e.title??"no title"}', id:'${e.id??"no id"}' of type '${e.type}'.`,{layer:e,error:r}),this.destroyed||this._refreshCollections()}),this._layerLayerViewInfoMap.set(e,i),this.view.ready&&i.start(),this.notifyChange("updating"),this.notifyChange("updatingRemaining")}};d([m()],Ko.prototype,"_workPromise",void 0),d([m({readOnly:!0})],Ko.prototype,"_watchUpdatingTracking",void 0),d([m({readOnly:!0})],Ko.prototype,"_layersToLayerViews",void 0),d([m({constructOnly:!0})],Ko.prototype,"layerviewMapping",void 0),d([m({readOnly:!0})],Ko.prototype,"_rootCollectionNames",null),d([m({constructOnly:!0})],Ko.prototype,"layerViewFilter",void 0),d([m()],Ko.prototype,"layerViewImporter",void 0),d([m()],Ko.prototype,"supportsGround",void 0),d([m({readOnly:!0})],Ko.prototype,"updating",null),d([m({readOnly:!0})],Ko.prototype,"updatingRemaining",null),d([m({constructOnly:!0})],Ko.prototype,"view",void 0),Ko=d([U("esri.views.support.LayerViewManager")],Ko);const PHe=Ko;let wx=class extends lt{constructor(e){super(e),this.featureTitleFields=!1,this.utilityNetworkFields=!1,this.globalIdField=!1}};d([m()],wx.prototype,"featureTitleFields",void 0),d([m()],wx.prototype,"utilityNetworkFields",void 0),d([m()],wx.prototype,"globalIdField",void 0),wx=d([U("esri.views.support.RequiredFieldsOptions")],wx);const OHe=wx;var _x,bv;let wt=(bv=class extends IF(IY){constructor(e){super(e),this._userSpatialReference=null,this.handles=new wT,this.updatingHandles=new K0,this.allLayerViews=new hu({getCollections:()=>this.layerviewCollections,getChildrenFunction:DHe}),this.analyses=new Q$,this.basemapView=null,this.dependencies={popup:void 0},this.displayFilterEnabled=!0,this.fatalError=null,this.graphics=new LC,this.typeSpecificPreconditionsReady=!0,this.layerViews=new We,this.magnifier=new Owe,this.padding={left:0,top:0,right:0,bottom:0},this.ready=!1,this._readyStateWaitingTask=null,this.type=null,this.scale=null,this.updating=!1,this.initialExtentRequired=!0,this._lowPriorityCursorHandles=new We,this._highPriorityCursorHandles=new We,this.input=new wHe,this.navigation=new CN,this.layerViewManager=null,this.analysisViewManager=null,this.isHeightModelInfoRequired=!1,this.width=null,this.height=null,this.resizing=!1,this.suspended=!1,this.viewEvents=new Nwe(this),this.persistableViewModels=new We,this.requiredFieldsOptions=new OHe,this._isValid=!1,this._readyCycleForced=!1,this._lockedSpatialReference=null,this._userTimeZone=null,this._lockedTimeZone=null,this._userTimeExtent=null,this._lockedTimeExtent=null,this.theme=null,this.handles.add(ze(()=>this.preconditionsReady,i=>{const r=this.ready;if(i?(this._lockedSpatialReference=this.spatialReference,this._lockedTimeZone=this.timeZone,this._lockedTimeExtent=this.timeExtent,_x.views.add(this)):(this._lockedSpatialReference=null,_x.views.remove(this)),this.notifyChange("spatialReference"),!i&&r)this.toolViewManager?.detach(),this.analysisViewManager?.detach(),this.layerViewManager?.clear(),this._teardown();else if(i&&!r){try{this._startup()}catch(n){return void queueMicrotask(()=>{this.fatalError=new ee("view:startup-error","View._startup failed",n)})}this.analysisViewManager?.attach(),this.toolViewManager.attach()}},xu))}initialize(){this.addResolvingPromise(Promise.all([this.loadAsyncDependencies(),this._validateWithErrorDisplay()]).then(()=>(this._isValid=!0,f_(()=>this.ready)))),this.basemapView=new M7e({view:this}),this.layerViewManager=new PHe({view:this,layerViewFilter:e=>this.layerViewFilter?.(e)??!0,layerViewImporter:{importLayerView:e=>this.importLayerView(e),hasLayerViewModule:e=>this.hasLayerViewModule(e)},layerviewMapping:this._layerToLayerviewMapping}),this.toolViewManager=new _h({view:this}),this.selectionManager=new j7e({view:this}),this.addHandles([as(()=>this.readyState==="map-content-error"&&!this.spatialReference,()=>{$e.getLogger(this).warn("#spatialReference","no spatial reference could be derived from the currently added map layers")}),ze(()=>this.initialExtentRequired,e=>this.defaultsFromMap.required={...this.defaultsFromMap.required,extent:e},Ta),ze(()=>this.ready,e=>{this.defaultsFromMap&&(this.defaultsFromMap.suspended=e,this.defaultsFromMap.userSpatialReference=e?this.spatialReference:this._userSpatialReference)},xu),ze(()=>this._userSpatialReference,e=>{this.defaultsFromMap&&(this.defaultsFromMap.userSpatialReference=e)},Ta)])}get _layerToLayerviewMapping(){return _x._layerToLayerview}destroy(){this.destroyed||(_x.views.remove(this),this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this.graphics=Ir(this.graphics),this.analyses=Ir(this.analyses),this.defaultsFromMap.destroy(),this._set("defaultsFromMap",null),this.analysisViewManager=Ir(this.analysisViewManager),this.toolViewManager=Ir(this.toolViewManager),this.layerViewManager=Ir(this.layerViewManager),this.selectionManager=Ir(this.selectionManager),this.basemapView=Ir(this.basemapView),this.layerViews?.forEach(e=>e.destroy()),this.layerViews.length=0,this.invalidate(),this.handles.destroy(),this.map=Ir(this.map),this.updatingHandles.destroy())}_startup(){this._set("ready",!0)}_teardown(){this._set("ready",!1)}whenReady(){return Promise.resolve(this)}toMap(){return $e.getLogger(this).error("#toMap()","Not implemented on this instance of View"),null}get activeTool(){return this.toolViewManager?.activeTool}set activeTool(e){this.toolViewManager&&(this.toolViewManager.activeTool=e)}get layerviewCollections(){return[this.basemapView?.baseLayerViews,this.basemapView?.groundLayerViews,this.layerViews,this.basemapView?.referenceLayerViews]}get animation(){return this._get("animation")}set animation(e){this._set("animation",e)}get center(){return null}get defaultsFromMapSettings(){return{}}get defaultsFromMap(){return new Er({required:{tileInfo:!1,heightModelInfo:!1,extent:!1},map:()=>this.map,getSpatialReferenceSupport:(e,i)=>this.getSpatialReferenceSupport(e,i),...this.defaultsFromMapSettings})}get extent(){return this._get("extent")}set extent(e){this._set("extent",e)}get heightModelInfo(){return this.getDefaultHeightModelInfo()}get highlights(){return this._get("highlights")??gHe()}set highlights(e){this._set("highlights",$p(e,this._get("highlights"),We.ofType(fv)))}get interacting(){return this.navigating}get navigating(){return!1}get preconditionsReady(){return!this.destroying&&!this.destroyed&&!(this.fatalError||!this._isValid||this._readyCycleForced||!this.map||RR(this.map)&&!this.map.loaded||this.width===0||this.height===0||!this.spatialReference||!this._validateSpatialReference(this.spatialReference)||!this._lockedSpatialReference&&!this.defaultsFromMap?.ready||!this.typeSpecificPreconditionsReady)}get resolution(){return 0}set map(e){e!==this._get("map")&&(e?.destroyed&&($e.getLogger(this).warn("#map","The provided map is already destroyed",{map:e}),e=null),RR(e)&&e.load().catch(()=>{}),this.constructed&&!this.destroyed&&(this.forceReadyCycle(),this._lockedSpatialReference=null),this._set("map",e))}get readyState(){if(this.destroyed)return this._get("readyState");if(!this.map)return"missing-map";if("container"in this&&!this.container)return"missing-container";if(this.fatalError)return"rendering-error";if((this.defaultsFromMap?.ready??!1)&&!this.spatialReference){const e=!("loaded"in this.map)||this.map.loaded,i=this.map.ground.loaded,r=this.map.basemap?.loaded??!0;return e&&r&&i&&!this.map?.allLayers.length?"empty-map":(this._readyStateWaitingTask||(this._readyStateWaitingTask=JM(n=>GW(ve("view-readyState-waiting-delay"),null,n)),this.addHandles(this._readyStateWaitingTask),this.addHandles(this._readyStateWaitingTask,"ready-state-task")),this._readyStateWaitingTask?.finished?"map-content-error":"loading")}return this._readyStateWaitingTask=Nw(this._readyStateWaitingTask),this.removeHandles("ready-state-task"),this.ready?"ready":"loading"}get spatialReference(){const e=this._userSpatialReference||this._lockedSpatialReference||this.getDefaultSpatialReference()||null;if(e&&this.defaultsFromMap?.required?.heightModelInfo){const i=e.clone();return i.vcsWkid=this.defaultsFromMap.vcsWkid,i.latestVcsWkid=this.defaultsFromMap.latestVcsWkid,i}return e}set spatialReference(e){const i=!os(e,this._get("spatialReference"));this._set("_userSpatialReference",e),i&&(this._set("spatialReference",e),this._spatialReferenceChanged(e))}_spatialReferenceChanged(e){}get stationary(){return!this.animation&&!this.navigating&&!this.resizing}get timeExtent(){return this._userTimeExtent??this._lockedTimeExtent??this.getDefaultTimeExtent()??null}set timeExtent(e){this._userTimeExtent=e}get timeZone(){return this._userTimeZone??this._lockedTimeZone??this.getDefaultTimeZone()??_u}set timeZone(e){this._userTimeZone=e,k3e(e)||$e.getLogger(this).warn("#timeZone",`the parsed value '${e}' may not be a valid IANA time zone`)}get tools(){return this.toolViewManager?.tools}get initialExtent(){return this.defaultsFromMap?.extent}get cursor(){return this.toolViewManager?.cursor??this._highPriorityCursorHandles.at(-1)?.cursor??this._lowPriorityCursorHandles.at(-1)?.cursor??"default"}acquireCursor(e,i="low"){const r=i==="high"?this._highPriorityCursorHandles:this._lowPriorityCursorHandles,n={cursor:e},s=Si(()=>r.remove(n));return r.add(n),this.addHandles(s),s}get size(){return[this.width,this.height]}get effectiveTheme(){return this.theme??new fH}whenLayerView(e){return this.layerViewManager?.whenLayerView(e)??Promise.reject()}getDefaultSpatialReference(){return this.defaultsFromMap?.spatialReference}getDefaultHeightModelInfo(){return(this.map&&"heightModelInfo"in this.map?this.map.heightModelInfo:void 0)??this.defaultsFromMap?.heightModelInfo??null}getDefaultTimeZone(){return null}getDefaultTimeExtent(){return null}getSurface(){return null}importLayerView(e){throw new ee("view:importLayerView-missing","importLayerView() not implemented")}hasLayerViewModule(e){return!1}async validate(){}async loadAsyncDependencies(){}invalidate(){this._isValid=!1}getSpatialReferenceSupport(){return{constraints:null}}_validateSpatialReference(e){return this.getSpatialReferenceSupport(e)!=null}when(e,i){return this.isResolved()&&!this.ready&&$e.getLogger(this).warn("#when()","Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use reactiveUtils.whenOnce(() => view.ready).then(...) instead."),super.when(e,i)}forceReadyCycle(){this.ready&&(as(()=>this.destroyed||this.preconditionsReady===!1,()=>this._readyCycleForced=!1,{once:!0}),this._readyCycleForced=!0)}on(e,i){return super.on(e,i)}addAndActivateTool(e){this.toolViewManager.tools.add(e),this.activeTool=e}tryFatalErrorRecovery(){this.fatalError=null}async _validateWithErrorDisplay(){try{await this.validate()}catch(e){const i=document.createElement("div");i.setAttribute("style","display: flex; flex-direction: column; gap: 8px; padding: 20px; height: 100%; justify-content: center; color: black; background: white; font-family: sans-serif;");const r=document.createElement("div");r.innerHTML="Unable to display map. WebGL2 support is required.",r.setAttribute("style","font-size: 24px; font-weight: bold;");const n=document.createElement("div");n.innerHTML="Ensure that your browser and hardware meet the minimum requirements.",n.setAttribute("style","font-size: 18px;");const s=document.createElement("a");s.innerHTML="https://esriurl.com/webgl-faq",s.target="_blank",s.setAttribute("style","font-size: 18px;"),s.href="https://esriurl.com/webgl-faq",i.appendChild(r),i.appendChild(n),i.appendChild(s);const a=this.getSurface();throw a&&a.appendChild(i),e}}},_x=bv,bv._layerToLayerview=[["view.map.basemap.baseLayers","view.basemapView.baseLayerViews"],["view.map.basemap.groundLayers","view.basemapView.groundLayerViews"],["view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews"],["view.map.layers","view.layerViews"]],bv.views=new We,bv);d([m()],wt.prototype,"_userSpatialReference",void 0),d([m()],wt.prototype,"activeTool",null),d([m({readOnly:!0})],wt.prototype,"allLayerViews",void 0),d([m({readOnly:!0})],wt.prototype,"layerviewCollections",null),d([m(M9(Q$,"analyses"))],wt.prototype,"analyses",void 0),d([m()],wt.prototype,"animation",null),d([m()],wt.prototype,"basemapView",void 0),d([m()],wt.prototype,"center",null),d([m()],wt.prototype,"defaultsFromMapSettings",null),d([m()],wt.prototype,"defaultsFromMap",null),d([m()],wt.prototype,"dependencies",void 0),d([m()],wt.prototype,"displayFilterEnabled",void 0),d([m({type:Wt})],wt.prototype,"extent",null),d([m()],wt.prototype,"fatalError",void 0),d([m(M9(LC,"graphics"))],wt.prototype,"graphics",void 0),d([m({readOnly:!0,type:Eo})],wt.prototype,"heightModelInfo",null),d([m({type:We.ofType(fv)})],wt.prototype,"highlights",null),d([m({readOnly:!0})],wt.prototype,"interacting",null),d([m({constructOnly:!0})],wt.prototype,"layerViewFilter",void 0),d([m({readOnly:!0})],wt.prototype,"navigating",null),d([m({readOnly:!0,dependsOn:["fatalError","_isValid","_readyCycleForced","map","map.loaded?","width","height","spatialReference","_lockedSpatialReference","defaultsFromMap.ready","typeSpecificPreconditionsReady"]})],wt.prototype,"preconditionsReady",null),d([m({readOnly:!0})],wt.prototype,"typeSpecificPreconditionsReady",void 0),d([m({type:We,readOnly:!0})],wt.prototype,"layerViews",void 0),d([m()],wt.prototype,"resolution",null),d([m({type:Owe})],wt.prototype,"magnifier",void 0),d([m({value:null,type:y0e})],wt.prototype,"map",null),d([m()],wt.prototype,"padding",void 0),d([m({readOnly:!0})],wt.prototype,"ready",void 0),d([m()],wt.prototype,"_readyStateWaitingTask",void 0),d([m({readOnly:!0})],wt.prototype,"readyState",null),d([m({type:at})],wt.prototype,"spatialReference",null),d([m()],wt.prototype,"stationary",null),d([m({type:nr})],wt.prototype,"timeExtent",null),d([m({type:String,nonNullable:!0})],wt.prototype,"timeZone",null),d([m()],wt.prototype,"tools",null),d([m()],wt.prototype,"toolViewManager",void 0),d([m({readOnly:!0})],wt.prototype,"type",void 0),d([m({type:Number})],wt.prototype,"scale",void 0),d([m({readOnly:!0})],wt.prototype,"updating",void 0),d([m({readOnly:!0})],wt.prototype,"initialExtentRequired",void 0),d([m({readOnly:!0})],wt.prototype,"initialExtent",null),d([m()],wt.prototype,"cursor",null),d([m({readOnly:!0})],wt.prototype,"input",void 0),d([m({type:CN,nonNullable:!0})],wt.prototype,"navigation",void 0),d([m()],wt.prototype,"layerViewManager",void 0),d([m()],wt.prototype,"analysisViewManager",void 0),d([m()],wt.prototype,"selectionManager",void 0),d([m()],wt.prototype,"width",void 0),d([m()],wt.prototype,"height",void 0),d([m({readOnly:!0})],wt.prototype,"resizing",void 0),d([m({value:null,readOnly:!0})],wt.prototype,"size",null),d([m({readOnly:!0})],wt.prototype,"suspended",void 0),d([m({readOnly:!0})],wt.prototype,"viewEvents",void 0),d([m({readOnly:!0})],wt.prototype,"persistableViewModels",void 0),d([m()],wt.prototype,"_isValid",void 0),d([m()],wt.prototype,"_readyCycleForced",void 0),d([m()],wt.prototype,"_lockedSpatialReference",void 0),d([m()],wt.prototype,"_userTimeZone",void 0),d([m()],wt.prototype,"_lockedTimeZone",void 0),d([m()],wt.prototype,"_userTimeExtent",void 0),d([m()],wt.prototype,"_lockedTimeExtent",void 0),d([m({type:fH})],wt.prototype,"theme",void 0),d([m({readOnly:!0,type:fH})],wt.prototype,"effectiveTheme",null),wt=_x=d([U("esri.views.View")],wt);const Q6=globalThis.$arcgis;Q6&&!Q6.views&&Object.defineProperty(Q6,"views",{configurable:!1,enumerable:!0,writable:!1,value:wt.views});const LHe=wt;function DHe(t){return t.layerViews}function Tn(){return[0,0]}function RHe(t){return[t[0],t[1]]}function aA(t,e){return[t,e]}function zHe(t,e){return[t,e]}function FHe(t,e=Tn()){const i=Math.min(2,t.length);for(let r=0;r<i;++r)e[r]=t[r];return e}function Kwe(){return Tn()}function Qwe(){return aA(1,1)}function e_e(){return aA(1,0)}function t_e(){return aA(0,1)}const NHe=Kwe(),jHe=Qwe(),VHe=e_e(),BHe=t_e();Object.freeze(Object.defineProperty({__proto__:null,ONES:jHe,UNIT_X:VHe,UNIT_Y:BHe,ZEROS:NHe,clone:RHe,create:Tn,freeze:zHe,fromArray:FHe,fromValues:aA,ones:Qwe,unitX:e_e,unitY:t_e,zeros:Kwe},Symbol.toStringTag,{value:"Module"}));function UHe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function oA(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function HHe(t,e,i,r,n,s,a){return t[0]=e,t[1]=i,t[2]=r,t[3]=n,t[4]=s,t[5]=a,t}function eX(t,e){const i=e[0],r=e[1],n=e[2],s=e[3],a=e[4],o=e[5];let l=i*s-r*n;return l?(l=1/l,t[0]=s*l,t[1]=-r*l,t[2]=-n*l,t[3]=i*l,t[4]=(n*o-s*a)*l,t[5]=(r*a-i*o)*l,t):null}function GHe(t){return t[0]*t[3]-t[1]*t[2]}function Wh(t,e,i){const r=e[0],n=e[1],s=e[2],a=e[3],o=e[4],l=e[5],c=i[0],h=i[1],f=i[2],g=i[3],y=i[4],b=i[5];return t[0]=r*c+s*h,t[1]=n*c+a*h,t[2]=r*f+s*g,t[3]=n*f+a*g,t[4]=r*y+s*b+o,t[5]=n*y+a*b+l,t}function Mv(t,e,i){const r=e[0],n=e[1],s=e[2],a=e[3],o=e[4],l=e[5],c=Math.sin(i),h=Math.cos(i);return t[0]=r*h+s*c,t[1]=n*h+a*c,t[2]=r*-c+s*h,t[3]=n*-c+a*h,t[4]=o,t[5]=l,t}function lA(t,e,i){const r=e[0],n=e[1],s=e[2],a=e[3],o=e[4],l=e[5],c=i[0],h=i[1];return t[0]=r*c,t[1]=n*c,t[2]=s*h,t[3]=a*h,t[4]=o,t[5]=l,t}function Ep(t,e,i){const r=e[0],n=e[1],s=e[2],a=e[3],o=e[4],l=e[5],c=i[0],h=i[1];return t[0]=r,t[1]=n,t[2]=s,t[3]=a,t[4]=r*c+s*h+o,t[5]=n*c+a*h+l,t}function IN(t,e){const i=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=i,t[2]=-i,t[3]=r,t[4]=0,t[5]=0,t}function i_e(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t}function tX(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t}function qHe(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function WHe(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+1)}function YHe(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t}function r_e(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t}function ZHe(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t}function XHe(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t[3]=e[3]+i[3]*r,t[4]=e[4]+i[4]*r,t[5]=e[5]+i[5]*r,t}function JHe(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function KHe(t,e){const i=t[0],r=t[1],n=t[2],s=t[3],a=t[4],o=t[5],l=e[0],c=e[1],h=e[2],f=e[3],g=e[4],y=e[5],b=Vo();return Math.abs(i-l)<=b*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(r-c)<=b*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(n-h)<=b*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(s-f)<=b*Math.max(1,Math.abs(s),Math.abs(f))&&Math.abs(a-g)<=b*Math.max(1,Math.abs(a),Math.abs(g))&&Math.abs(o-y)<=b*Math.max(1,Math.abs(o),Math.abs(y))}const QHe=Wh,eGe=r_e;Object.freeze(Object.defineProperty({__proto__:null,add:YHe,copy:UHe,determinant:GHe,equals:KHe,exactEquals:JHe,frob:WHe,fromRotation:IN,fromScaling:i_e,fromTranslation:tX,identity:oA,invert:eX,mul:QHe,multiply:Wh,multiplyScalar:ZHe,multiplyScalarAndAdd:XHe,rotate:Mv,scale:lA,set:HHe,str:qHe,sub:eGe,subtract:r_e,translate:Ep},Symbol.toStringTag,{value:"Module"}));function Cp(){return[1,0,0,1,0,0]}function tGe(t){return[t[0],t[1],t[2],t[3],t[4],t[5]]}function iGe(t,e,i,r,n,s){return[t,e,i,r,n,s]}const rGe=Cp();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:rGe,clone:tGe,create:Cp,fromValues:iGe},Symbol.toStringTag,{value:"Module"}));const TO={102100:{maxX:20037508342788905e-9,minX:-20037508342788905e-9,plus180Line:new xn({paths:[[[20037508342788905e-9,-20037508342788905e-9],[20037508342788905e-9,20037508342788905e-9]]],spatialReference:at.WebMercator}),minus180Line:new xn({paths:[[[-20037508342788905e-9,-20037508342788905e-9],[-20037508342788905e-9,20037508342788905e-9]]],spatialReference:at.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new xn({paths:[[[180,-180],[180,180]]],spatialReference:at.WGS84}),minus180Line:new xn({paths:[[[-180,-180],[-180,180]]],spatialReference:at.WGS84})}};function U0(t,e){return Math.ceil((t-e)/(2*e))}function n_e(t,e){const i=RC(t);for(const r of i)for(const n of r)n[0]+=e;return t}function RC(t){return jn(t)?t.rings:t.paths}function iX(t,e){return e?{...e,query:{...t,...e.query}}:{query:t}}function cA(t){return typeof t=="string"?rn(t):de(t)}function rX(t,e,i){const r={};for(const n in t){if(n==="declaredClass")continue;const s=t[n];if(s!=null&&typeof s!="function")if(Array.isArray(s))r[n]=s.map(a=>rX(a));else if(typeof s=="object")if(s.toJSON){const a=s.toJSON(i?.[n]);r[n]=e?a:JSON.stringify(a)}else r[n]=e?s:JSON.stringify(s);else r[n]=s}return r}function nGe(t,e){return t?e&&pY(t)?e:hY(t)??oi?.findCredential(t)?.token:null}async function HAt(t,e,i){const r=nGe(t,e);return r||(!oi&&yi.request.useIdentity&&await fe(()=>Promise.resolve().then(()=>qge),void 0),(await oi.getCredential(t,i))?.token)}async function sGe(t,e,i,r){const n=cA(t),s=e[0].spatialReference,a={...r,responseType:"json",query:{...n.query,f:"json",sr:zR(s),target:JSON.stringify({geometryType:VT(e[0]),geometries:e}),cutter:JSON.stringify(i)}},o=await Nt(n.path+"/cut",a),{cutIndexes:l,geometries:c=[]}=o.data;return{cutIndexes:l,geometries:c.map(h=>{const f=Vp(h);return f.spatialReference=s,f})}}function aGe(t){return{geometryType:VT(t[0]),geometries:t.map(e=>e.toJSON())}}function s_e(t,e,i){const r=sVe(e);return t.map(n=>{const s=r.fromJSON(n);return s.spatialReference=i,s})}async function oGe(t,e,i){const r=typeof t=="string"?rn(t):t,n=e[0].spatialReference,s=VT(e[0]),a={...i,query:{...r.query,f:"json",sr:zR(n),geometries:JSON.stringify(aGe(e))}},{data:o}=await Nt(r.path+"/simplify",a);return s_e(o.geometries,s,n)}const a_e=()=>$e.getLogger("esri.geometry.support.normalizeUtils");function lGe(t){return t.type==="polygon"}function cGe(t){return t[0].type==="polygon"}function uGe(t){return t[0].type==="polyline"}function Bse(t){const e=[];let i=0,r=0;for(let n=0;n<t.length;n++){const s=t[n];let a=null;for(let o=0;o<s.length;o++)a=s[o],e.push(a),o===0?(i=a[0],r=i):(i=Math.min(i,a[0]),r=Math.max(r,a[0]));a&&e.push([(i+r)/2,0])}return e}function dGe(t,e){if(!(t instanceof xn||t instanceof br)){const n="straightLineDensify: the input geometry is neither polyline nor polygon";throw a_e().error(n),new ee("internal:geometry",n)}const i=RC(t),r=[];for(const n of i){const s=[];r.push(s),s.push([n[0][0],n[0][1]]);for(let a=0;a<n.length-1;a++){const o=n[a][0],l=n[a][1],c=n[a+1][0],h=n[a+1][1],f=Math.sqrt((c-o)*(c-o)+(h-l)*(h-l)),g=(h-l)/f,y=(c-o)/f,b=f/e;if(b>1){for(let C=1;C<=b-1;C++){const I=C*e,P=y*I+o,O=g*I+l;s.push([P,O])}const _=(f+Math.floor(b-1)*e)/2,S=y*_+o,$=g*_+l;s.push([S,$])}s.push([c,h])}}return lGe(t)?new br({rings:r,spatialReference:t.spatialReference}):new xn({paths:r,spatialReference:t.spatialReference})}function Use(t,e,i){if(e){const r=dGe(t,1e6);t=bS(r,!0)}return i&&(t=n_e(t,i)),t}function Hse(t,e,i){if(Array.isArray(t)){const r=t[0];if(r>e){const n=U0(r,e);t[0]=r+n*(-2*e)}else if(r<i){const n=U0(r,i);t[0]=r+n*(-2*i)}}else{const r=t.x;if(r>e){const n=U0(r,e);t=t.clone().offset(n*(-2*e),0)}else if(r<i){const n=U0(r,i);t=t.clone().offset(n*(-2*i),0)}}return t}function hGe(t,e){let i=-1;for(let r=0;r<e.cutIndexes.length;r++){const n=e.cutIndexes[r],s=e.geometries[r],a=RC(s);for(let o=0;o<a.length;o++){const l=a[o];l.some(c=>{if(c[0]<180)return!0;{let h=0;for(let g=0;g<l.length;g++){const y=l[g][0];h=y>h?y:h}h=Number(h.toFixed(9));const f=-360*U0(h,180);for(let g=0;g<l.length;g++){const y=s.getPoint(o,g);s.setPoint(o,g,y.clone().offset(f,0))}return!0}})}if(n===i){if(cGe(t))for(const o of RC(s))t[n]=t[n].addRing(o);else if(uGe(t))for(const o of RC(s))t[n]=t[n].addPath(o)}else i=n,t[n]=s}return t}async function pGe(t,e,i){if(!Array.isArray(t))return pGe([t],e);e&&typeof e!="string"&&a_e().warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");const r=typeof e=="string"?e:e?.url??yi.geometryServiceUrl;let n,s,a,o,l,c,h,f,g=0;const y=[],b=[];for(const P of t)if(P!=null)if(n||(n=P.spatialReference,s=No(n),a=n.isWebMercator,c=a?102100:4326,o=TO[c].maxX,l=TO[c].minX,h=TO[c].plus180Line,f=TO[c].minus180Line),s)if(P.type==="mesh")b.push(P);else if(P.type==="point")b.push(Hse(P.clone(),o,l));else if(P.type==="multipoint"){const O=P.clone();O.points=O.points.map(N=>Hse(N,o,l)),b.push(O)}else if(P.type==="extent"){const O=P.clone()._normalize(!1,!1,s);b.push(O.rings?new br(O):O)}else if(P.extent){const O=P.extent,N=U0(O.xmin,l)*(2*o);let R=N===0?P.clone():n_e(P.clone(),N);O.offset(N,0);let{xmin:G,xmax:Y}=O;G=Number(G.toFixed(9)),Y=Number(Y.toFixed(9)),O.intersects(h)&&Y!==o?(g=Y>g?Y:g,R=Use(R,a),y.push(R),b.push("cut")):O.intersects(f)&&G!==l?(g=Y*(2*o)>g?Y*(2*o):g,R=Use(R,a,360),y.push(R),b.push("cut")):b.push(R)}else b.push(P.clone());else b.push(P);else b.push(P);let _=U0(g,o),S=-90;const $=_,C=new xn;for(;_>0;){const P=360*_-180;C.addPath([[P,S],[P,-1*S]]),S*=-1,_--}if(y.length>0&&$>0){const P=hGe(y,await sGe(r,y,C,i)),O=[],N=[];for(let Y=0;Y<b.length;Y++){const Q=b[Y];if(Q!=="cut")N.push(Q);else{const ae=P.shift(),ce=t[Y];ce!=null&&ce.type==="polygon"&&ce.rings&&ce.rings.length>1&&ae.rings.length>=ce.rings.length?(O.push(ae),N.push("simplify")):N.push(a?Nm(ae):ae)}}if(!O.length)return N;const R=await oGe(r,O,i),G=[];for(let Y=0;Y<N.length;Y++){const Q=N[Y];Q!=="simplify"?G.push(Q):G.push(a?Nm(R.shift()):R.shift())}return G}const I=[];for(let P=0;P<b.length;P++){const O=b[P];if(O!=="cut")I.push(O);else{const N=y.shift();I.push(a===!0?Nm(N):N)}}return I}function fGe(t){if(!t)return null;const e=t.extent;if(!e)return null;const i=t.spatialReference&&No(t.spatialReference);if(!i)return e;const[r,n]=i.valid,s=2*n,{width:a}=e;let o,{xmin:l,xmax:c}=e;if([l,c]=[c,l],t.type==="extent"||a===0||a<=n||a>s||l<r||c>n)return e;switch(t.type){case"polygon":if(!(t.rings.length>1))return e;o=Bse(t.rings);break;case"polyline":if(!(t.paths.length>1))return e;o=Bse(t.paths);break;case"multipoint":o=t.points}const h=e.clone();for(let f=0;f<o.length;f++){let g=o[f][0];g<0?(g+=n,c=Math.max(g,c)):(g-=n,l=Math.min(g,l))}return h.xmin=l,h.xmax=c,h.width<a?(h.xmin-=n,h.xmax-=n,h):e}function nX(t,e,i){const r=No(i);if(r==null)return t;const[n,s]=r.valid,a=2*s;let o=0,l=0;e>s?o=Math.ceil(Math.abs(e-s)/a):e<n&&(o=-Math.ceil(Math.abs(e-n)/a)),t>s?l=Math.ceil(Math.abs(t-s)/a):t<n&&(l=-Math.ceil(Math.abs(t-n)/a));let c=t+(o-l)*a;const h=c-e;return h>s?c-=a:h<n&&(c+=a),c}function GAt(t,e){return sX(e)?.normalize(t)??t}function sX(t){const e=No(t);if(e==null)return null;const[i,r]=e.valid;return new rN(i,r)}const qAt=sX(at.WGS84);sX(at.WebMercator);const o_e=96,l_e=39.37,mGe=180/Math.PI;function c_e(t){return t.wkid?t:t.spatialReference||at.WGS84}function aX(t,e){return e.type?Fn(t,e.x,e.y):jS(t,e)}function u_e(t){return kl(t)}function MN(t,e,i=0){let r=t.width,n=t.height;if(i!==0){const o=_p(i),l=Math.abs(Math.cos(o)),c=Math.abs(Math.sin(o));r=t.width*l+t.height*c,n=t.width*c+t.height*l}const s=Math.max(1,e[0]),a=Math.max(1,e[1]);return Math.max(r/s,n/a)*SGe(t.spatialReference)}async function yE(t,e,i,r){let n,s;if(!t||Array.isArray(t)&&!t.length)return null;if(We.isCollection(t)&&(t=t.toArray()),Array.isArray(t)&&t.length&&typeof t[0]=="object"){const o=t.every(h=>"attributes"in h),l=t.some(h=>!h.geometry);let c=t;if(o&&l&&e&&e.allLayerViews){const h=new Map;for(const b of t){const _=b.layer,S=h.get(_)||[],$=b.attributes[_.objectIdField];$!=null&&S.push($),h.set(_,S)}const f=[];h.forEach((b,_)=>{const S=e.allLayerViews?.find($=>$.layer.id===_.id);if(S&&"queryFeatures"in S){const $=_.createQuery();$.objectIds=b,$.returnGeometry=!0,f.push(S.queryFeatures($))}});const g=await Promise.all(f),y=[];for(const b of g)if(b&&b.features&&b.features.length)for(const _ of b.features)_.geometry!=null&&y.push(_.geometry);c=y}for(const h of c)r=await yE(h,e,i,r);return r}if(Array.isArray(t)&&t.length===2&&typeof t[0]=="number"&&typeof t[1]=="number")n=new gt(t);else if(t instanceof Is)n=t;else if("geometry"in t){if(t.geometry)n=t.geometry;else if(t.layer){const o=t.layer,l=e.allLayerViews?.find(c=>c.layer.id===o.id);if(l&&"queryFeatures"in l){const c=o.createQuery();c.objectIds=[t.attributes[o.objectIdField]],c.returnGeometry=!0,n=(await l.queryFeatures(c))?.features?.[0]?.geometry}}}if(n==null)return null;switch(n.type){case"point":s=new Wt({xmin:n.x,ymin:n.y,xmax:n.x,ymax:n.y,spatialReference:n.spatialReference});break;case"extent":case"multipoint":case"polygon":case"polyline":s=fGe(n);break;default:s=n.extent}if(!s)return null;Wp()||Su(s.spatialReference,i)||await Ym();const a=jv(s,i);if(!a)return null;if(r){const o=a.center,l=o.clone();l.x=nX(o.x,r.center.x,i),l.x!==o.x&&a.centerAt(l),r=r.union(a)}else r=a;return r}function gGe(t){if(t&&(!Array.isArray(t)||typeof t[0]!="number")&&(typeof t=="object"||Array.isArray(t)&&typeof t[0]=="object")){if("layer"in t&&t.layer?.minScale!=null&&t.layer.maxScale!=null){const e=t.layer;return{min:e.minScale,max:e.maxScale}}if(Array.isArray(t)&&t.length&&t.every(e=>"layer"in e)){let e=0,i=0;for(const r of t){const n=r.layer;n?.minScale&&n.maxScale&&(e=n.minScale<e?n.minScale:e,i=n.maxScale>i?n.maxScale:i)}return e&&i?{min:e,max:i}:null}}}function Gse(t,e){const i=c_e(t);return os(i,e)||i.imageCoordinateSystem||e.imageCoordinateSystem?t:jv(t,e)}async function yGe(t,e){if(!t||!e)return new Os({targetGeometry:new gt,scale:0,rotation:0});let i=e.spatialReference;const{constraints:r,padding:n,viewpoint:s,size:a}=e,o=[n?a[0]-n.left-n.right:a[0],n?a[1]-n.top-n.bottom:a[1]];let l=null;t instanceof Os?l=t:t.viewpoint?l=t.viewpoint:t.target&&t.target.declaredClass==="esri.Viewpoint"&&(l=t.target);let c=null;l?.targetGeometry?c=l.targetGeometry:t instanceof Wt?c=t:t instanceof Is?c=await yE(t,e,i):t&&(c=await yE(t.center,e,i)||await yE(t.target,e,i)||await yE(t,e,i)),!c&&s?.targetGeometry?c=s.targetGeometry:!c&&e.extent&&(c=e.extent),i||(i=c_e(e.spatialReference||e.extent||c)),Wp()||os(c.spatialReference,i)||Su(c.spatialReference,i)||await Ym();const h=Gse(c,i),f="center"in h?h.center:h;e.pickClosestTarget!==!1&&f.type==="point"&&s.targetGeometry?.type==="point"&&(f.x=nX(f.x,s.targetGeometry.x,f.spatialReference));let g=0;l?g=l.rotation:t.hasOwnProperty("rotation")?g=t.rotation:s&&(g=s.rotation);let y=0;y=l?.targetGeometry!=null&&l.targetGeometry.type==="point"?l.scale:"scale"in t&&t.scale?t.scale:"zoom"in t&&t.zoom!==-1&&r&&r.effectiveLODs?r.zoomToScale(t.zoom):Array.isArray(c)||c.type==="point"||c.type==="extent"&&c.width===0&&c.height===0?s.scale:MN(Gse(c.extent,i),o,g);const b=gGe(t.target??t);b&&(b.min&&b.min<y?y=b.min:b.max&&b.max>y&&(y=b.max));let _=new Os({targetGeometry:f,scale:y,rotation:g});return r&&(_=r.fit(_),r.constrainByGeometry(_),r.rotationEnabled||(_.rotation=s.rotation)),_}function uo(t,e){const i=t.targetGeometry,r=e.targetGeometry;return i.x=r.x,i.y=r.y,i.spatialReference=r.spatialReference,t.scale=e.scale,t.rotation=e.rotation,t}function vGe(t,e,i){return i?Fn(t,.5*(e[0]-i.right+i.left),.5*(e[1]-i.bottom+i.top)):WM(t,e,.5)}const bGe=(function(){const t=Tn();return function(e,i,r){const n=i.targetGeometry;aX(t,n);const s=.5*HT(i);return e.xmin=t[0]-s*r[0],e.ymin=t[1]-s*r[1],e.xmax=t[0]+s*r[0],e.ymax=t[1]+s*r[1],e.spatialReference=n.spatialReference,e}})();function wGe(t,e,i,r,n){return bH(t,e,i.center),t.scale=MN(i,r),n?.constraints?.constrain(t),t}function _Ge(t,e,i,r){return cX(t,e,i,r),eX(t,t)}const d_e=(function(){const t=Tn();return function(e,i,r){return pZ(e,$Ge(e,i),vGe(t,i,r))}})(),xGe=(function(){const t=Cp(),e=Tn();return function(i,r,n,s){const a=HT(r),o=oX(r);return Fn(e,a,a),i_e(t,e),Mv(t,t,o),Ep(t,t,d_e(e,n,s)),Ep(t,t,[0,s.top-s.bottom]),Fn(i,t[4],t[5])}})();function HT(t){return t.scale*h_e(t.targetGeometry?.spatialReference)}function h_e(t){return bc(t)?1/(u_e(t)*l_e*o_e):1}function oX(t){return hZ(t.rotation)||0}function SGe(t){return bc(t)?u_e(t)*l_e*o_e:1}function $Ge(t,e){return WM(t,e,.5)}const lX=(function(){const t=Tn(),e=Tn(),i=Tn();return function(r,n,s,a,o,l){return ove(t,n),WM(e,s,.5*l),Fn(i,1/a*l,-1/a*l),tX(r,e),o&&Mv(r,r,o),lA(r,r,i),Ep(r,r,t),r}})(),cX=(function(){const t=Tn();return function(e,i,r,n){const s=HT(i),a=oX(i);return aX(t,i.targetGeometry),lX(e,t,r,s,a,n)}})(),TGe=(function(){const t=Tn();return function(e,i,r,n){const s=HT(i);return aX(t,i.targetGeometry),lX(e,t,r,s,0,n)}})();function p_e(t){const e=No(t);return e?e.valid[1]-e.valid[0]:0}function kGe(t,e){return Math.round(p_e(t)/e)}const EGe=(function(){const t=Tn(),e=Tn(),i=[0,0,0];return function(r,n,s){SI(t,r,n),x9(t,t),SI(e,r,s),x9(e,e),cve(i,t,e);let a=Math.acos(lve(t,e)/(JR(t)*JR(e)))*mGe;return i[2]<0&&(a=-a),isNaN(a)&&(a=0),a}})(),CGe=(function(){const t=Tn();return function(e,i,r,n){const s=e.targetGeometry;return uo(e,i),xGe(t,i,r,n),s.x+=t[0],s.y+=t[1],e}})(),bH=function(t,e,i){uo(t,e);const r=t.targetGeometry;return r.x=i.x,r.y=i.y,r.spatialReference=i.spatialReference,t},IGe=(function(){const t=Tn();return function(e,i,r,n,s){s||(s="center"),pZ(t,r,n),WM(t,t,.5);const a=t[0],o=t[1];switch(s){case"center":Fn(t,0,0);break;case"left":Fn(t,-a,0);break;case"top":Fn(t,0,o);break;case"right":Fn(t,a,0);break;case"bottom":Fn(t,0,-o);break;case"top-left":Fn(t,-a,o);break;case"bottom-left":Fn(t,-a,-o);break;case"top-right":Fn(t,a,o);break;case"bottom-right":Fn(t,a,-o)}return AN(e,i,t),e}})();function WAt(t,e,i){return uo(t,e),t.rotation+=i,t}function MGe(t,e,i){return uo(t,e),t.rotation=i,t}const AGe=(function(){const t=Tn();return function(e,i,r,n,s){return uo(e,i),isNaN(r)||r===0||(m_e(t,n,i,s),e.scale=i.scale*r,g_e(t,t,e,s),AN(e,e,Fn(t,t[0]-n[0],n[1]-t[1]))),e}})();function qse(t,e,i){return uo(t,e),t.scale=i,t}const f_e=(function(){const t=Tn();return function(e,i,r,n,s,a){return uo(e,i),isNaN(r)||r===0||(m_e(t,s,i,a),e.scale=i.scale*r,e.rotation+=n,g_e(t,t,e,a),AN(e,e,Fn(t,t[0]-s[0],s[1]-t[1]))),e}})(),YAt=(function(){const t=Tn(),e=Tn();return function(i,r,n,s,a,o,l){return d_e(e,o,l),rve(t,a,e),s?f_e(i,r,n,s,t,o):AGe(i,r,n,t,o)}})(),m_e=(function(){const t=Cp();return function(e,i,r,n){return so(e,i,_Ge(t,r,n,1))}})(),g_e=(function(){const t=Cp();return function(e,i,r,n){return so(e,i,cX(t,r,n,1))}})(),AN=(function(){const t=Tn(),e=Cp();return function(i,r,n){uo(i,r);const s=HT(r),a=i.targetGeometry;return IN(e,oX(r)),lA(e,e,aA(s,s)),so(t,n,e),a.x+=t[0],a.y+=t[1],i}})();function Bm(){const t=new Float32Array(6);return t[0]=1,t[3]=1,t}function PGe(t){const e=new Float32Array(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function OGe(t,e,i,r,n,s){const a=new Float32Array(6);return a[0]=t,a[1]=e,a[2]=i,a[3]=r,a[4]=n,a[5]=s,a}function y_e(t,e,i,r){const n=e[r],s=e[r+1];t[r]=i[0]*n+i[2]*s+i[4],t[r+1]=i[1]*n+i[3]*s+i[5]}function v_e(t,e,i,r=0,n=0,s=2){const a=n||e.length/s;for(let o=r;o<a;o++)y_e(t,e,i,o*s)}Object.freeze(Object.defineProperty({__proto__:null,clone:PGe,create:Bm,fromValues:OGe,transform:y_e,transformMany:v_e},Symbol.toStringTag,{value:"Module"}));function tD(){const t=new Float32Array(9);return t[0]=1,t[4]=1,t[8]=1,t}function LGe(t){const e=new Float32Array(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function DGe(t,e,i,r,n,s,a,o,l){const c=new Float32Array(9);return c[0]=t,c[1]=e,c[2]=i,c[3]=r,c[4]=n,c[5]=s,c[6]=a,c[7]=o,c[8]=l,c}Object.freeze(Object.defineProperty({__proto__:null,clone:LGe,create:tD,fromValues:DGe},Symbol.toStringTag,{value:"Module"}));function zI(){return new Float32Array(2)}function RGe(t){const e=new Float32Array(2);return e[0]=t[0],e[1]=t[1],e}function e_(t,e){const i=new Float32Array(2);return i[0]=t,i[1]=e,i}function b_e(){return zI()}function w_e(){return e_(1,1)}function __e(){return e_(1,0)}function x_e(){return e_(0,1)}const zGe=b_e(),FGe=w_e(),NGe=__e(),jGe=x_e();Object.freeze(Object.defineProperty({__proto__:null,ONES:FGe,UNIT_X:NGe,UNIT_Y:jGe,ZEROS:zGe,clone:RGe,create:zI,fromValues:e_,ones:w_e,unitX:__e,unitY:x_e,zeros:b_e},Symbol.toStringTag,{value:"Module"}));function VGe(t){return t instanceof Float32Array&&t.length>=2}function BGe(t){return Array.isArray(t)&&t.length>=2}function eB(t){return VGe(t)||BGe(t)}var wH;const $f=[0,0];let Gf=wH=class extends _e{constructor(t){super(t),this._viewpoint2D={center:Tn(),rotation:0,scale:0,spatialReference:void 0},this.center=[0,0],this.extent=new Wt,this.id=0,this.inverseTransform=Cp(),this.resolution=0,this.rotation=0,this.scale=0,this.transform=Cp(),this.transformNoRotation=Cp(),this.displayMat3=tD(),this.displayViewMat3=tD(),this.viewMat3=tD(),this.viewMat2d=Bm(),this.worldScreenWidth=0,this.size=[0,0]}set pixelRatio(t){this._set("pixelRatio",t),this._update()}set size(t){this._set("size",t),this._update()}set viewpoint(t){if(t){const e=this._viewpoint2D,i=t.targetGeometry;e.center[0]=i.x,e.center[1]=i.y,e.rotation=t.rotation,e.scale=t.scale,e.spatialReference=i.spatialReference}this._update()}get visibleArea(){const[t,e]=this.size;return[this.toMap([0,0],0,0),this.toMap([0,0],0,e),this.toMap([0,0],t,e),this.toMap([0,0],t,0)]}copy(t){const e=this.size,i=this.viewpoint;return i&&e?(this.viewpoint=uo(i,t.viewpoint),this._set("size",jS(e,t.size))):(this.viewpoint=t.viewpoint.clone(),this._set("size",[t.size[0],t.size[1]])),this._set("pixelRatio",t.pixelRatio),this}clone(){return new wH({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(t,e,i){return eB(e)?so(t,e,this.inverseTransform):($f[0]=e,$f[1]=i,so(t,$f,this.inverseTransform))}toScreen(t,e,i){return eB(e)?so(t,e,this.transform):($f[0]=e,$f[1]=i,so(t,$f,this.transform))}toScreenNoRotation(t,e,i){return eB(e)?so(t,e,this.transformNoRotation):($f[0]=e,$f[1]=i,so(t,$f,this.transformNoRotation))}wrapMapCoordinate(t,e){jS(t,e);const[i]=e,[r]=this.center,{extent:n,spatialReference:s}=this;let{xmin:a,xmax:o}=n;if(s.isWrappable){const l=p_e(s)/2;a=Math.max(a,r-l),o=Math.min(o,r+l)}return(i<a||i>o)&&(t[0]=nX(i,r,s)),t}getScreenTransform(t,e){const{center:i}=this._viewpoint2D,r=this._get("pixelRatio")||1,n=this._get("size");return lX(t,i,n,e,0,r),t}_update(){const{center:t,spatialReference:e,scale:i,rotation:r}=this._viewpoint2D,n=this._get("pixelRatio")||1,s=this._get("size"),a=new Os({targetGeometry:new gt(t[0],t[1],e),scale:i,rotation:r});if(this._set("viewpoint",a),!s||!e||!i)return;this.resolution=HT(a),this.rotation=r,this.scale=i,this.spatialReference=e,jS(this.center,t);const o=s[0]!==0?2/s[0]:0,l=s[1]!==0?-2/s[1]:0;VS(this.displayMat3,o,0,0,0,l,0,-1,1,1);const c=mve(this.viewMat3),h=e_(s[0]/2,s[1]/2),f=e_(-s[0]/2,-s[1]/2),g=hZ(r);$9(c,c,h),vve(c,c,g),$9(c,c,f),TI(this.displayViewMat3,this.displayMat3,c);const y=tX(this.viewMat2d,h);return Mv(y,y,g),Ep(y,y,f),bGe(this.extent,a,s),cX(this.transform,a,s,n),eX(this.inverseTransform,this.transform),TGe(this.transformNoRotation,a,s,n),this.worldScreenWidth=kGe(this.spatialReference,this.resolution),this._set("id",this.id+1),this.notifyChange("visibleArea"),this}};d([m({readOnly:!0})],Gf.prototype,"id",void 0),d([m({value:1,json:{write:!0}})],Gf.prototype,"pixelRatio",null),d([m({json:{write:!0}})],Gf.prototype,"size",null),d([m()],Gf.prototype,"spatialReference",void 0),d([m({type:Os,json:{write:!0}})],Gf.prototype,"viewpoint",null),d([m({readOnly:!0})],Gf.prototype,"visibleArea",null),Gf=wH=d([U("esri.views.2d.ViewState")],Gf);const Wse=Gf;var _H,xH;let _m=_H=class extends lt{constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0}clone(){return new _H({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}};d([m()],_m.prototype,"left",void 0),d([m()],_m.prototype,"top",void 0),d([m()],_m.prototype,"right",void 0),d([m()],_m.prototype,"bottom",void 0),_m=_H=d([U("esri.views.2d.PaddedViewState.Padding")],_m);let xx=xH=class extends Wse{constructor(...t){super(...t),this.paddedViewState=new Wse,this._updateContent=(()=>{const e=Tn();return()=>{const i=this._get("size"),r=this._get("padding");if(!i||!r)return;const n=this.paddedViewState;Fn(e,r.left+r.right,r.top+r.bottom),SI(e,i,e),jS(n.size,e);const s=n.viewpoint;s&&(this.viewpoint=s)}})(),this.addHandles(ze(()=>[this.size,this.padding],()=>this._updateContent(),xu)),this.padding=new _m,this.size=[0,0]}set padding(t){this._set("padding",t||new _m)}set viewpoint(t){if(t){this.paddedViewState.viewpoint=t;let e=t;const i=this._get("padding");i&&(e=CGe(t.clone(),t,this._get("size"),i));const{targetGeometry:r,rotation:n,scale:s}=e,{x:a,y:o,spatialReference:l}=r,c=this._viewpoint2D;c.center[0]=a,c.center[1]=o,c.rotation=n,c.scale=s,c.spatialReference=l,this._update()}}clone(){return new xH({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})}};d([m()],xx.prototype,"paddedViewState",void 0),d([m({type:_m})],xx.prototype,"padding",null),d([m()],xx.prototype,"viewpoint",null),xx=xH=d([U("esri.views.2d.PaddedViewState")],xx);const uX=xx;let vE=class extends lt{constructor(){super(...arguments),this.SCHEDULER_LOG_SLOW_TASKS=!1,this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1}};d([m()],vE.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0),d([m()],vE.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0),vE=d([U("esri.views.support.debugFlags")],vE);const UGe=new vE,S_e=Symbol("Yield");let HGe=class{constructor(){this._tasks=new Array,this._numPendingTasks=q$(0),this._readyToRun=q$(!1)}get length(){return this._tasks.length}get updating(){return this._numPendingTasks.value>0}get readyToRun(){return this._readyToRun.value}_updateReadyToRun(){this._readyToRun.value=this._tasks.length>0}destroy(){this.cancelAll()}runTask(e){if(this.length===0)return S_e;for(;!e.done&&this._process(e);)e.madeProgress()}push(e,i,r){return this._addTask((n,s)=>new Zse(n,s,e,i,r),Array.prototype.push)}unshift(e,i,r){return this._addTask((n,s)=>new Zse(n,s,e,i,r),Array.prototype.unshift)}pushGenerator(e,i,r){return this._addTask((n,s)=>new GGe(n,s,e,i,r),Array.prototype.push)}_process(e){if(this._tasks.length===0)return!1;const i=this._tasks.shift();this._updateReadyToRun();try{if(Pa(i.signal))this._cancelTask(i,Hi());else switch(i.type){case 0:this._processSimple(i,e);break;case 1:this._processGenerator(i,e);break;case 2:this._processIterator(i,e);break;default:}}catch(r){i.reject(r)}return!0}cancelAll(){const e=Hi();for(const i of this._tasks)this._cancelTask(i,e);this._tasks.length=0,this._updateReadyToRun()}_cancelTask(e,i){if(e.abortCallback){const r=e.abortCallback(i);e.type===2&&e.iterator.return&&Yse(e.iterator.return()),ho(r)?r.then(e.resolve,e.reject):e.resolve(r)}else e.type===2&&e.iterator.throw&&Yse(e.iterator.throw(i)),e.reject(i)}_onIteratorResult(e,i){i.done?e.resolve(i.value):(this._tasks.unshift(e),this._updateReadyToRun())}_processSimple(e,i){const r=e.callback(i);ho(r)?r.then(e.resolve,e.reject):e.resolve(r)}_processGenerator(e,i){const r=e.generatorFunction(i),n=new qGe(e.resolve,e.reject,r,e.signal,e.abortCallback);this._processIterator(n,i)}_processIterator(e,i){const r=e.iterator.next(i);ho(r)?r.then(n=>this._onIteratorResult(e,n),e.reject):this._onIteratorResult(e,r)}_addTask(e,i){return new Promise((r,n)=>{const s=e(r,n);i.call(this._tasks,s),++this._numPendingTasks.value,this._updateReadyToRun()}).finally(()=>--this._numPendingTasks.value)}};function Yse(t){ho(t)?t.then(tB,tB):tB(t)}function tB(t){ss(t)||t instanceof Error||t instanceof ee||t!=null&&typeof t=="object"&&"done"in t&&t.done||$e.getLogger("esri.layers.support.PromiseQueue").warn("Generator iterator was aborted, but it is not done.")}let dX=class{constructor(e,i,r=void 0,n=void 0){this.resolve=e,this.reject=i,this.signal=r,this.abortCallback=n}},Zse=class extends dX{constructor(e,i,r,n,s){super(e,i,n,s),this.callback=r,this.type=0}},GGe=class extends dX{constructor(e,i,r,n,s){super(e,i,n,s),this.generatorFunction=r,this.type=1}},qGe=class extends dX{constructor(e,i,r,n,s){super(e,i,n,s),this.iterator=r,this.type=2}};function WGe(){return new KGe}const di={RESOURCE_CONTROLLER_IMMEDIATE:"immediate",RESOURCE_CONTROLLER:"schedule",SLIDE:"slide",STREAM_DATA_LOADER:"stream loader",ELEVATION_QUERY:"elevation query",TERRAIN_SURFACE:"terrain",SURFACE_GEOMETRY_UPDATES:"surface geometry updates",LOD_RENDERER:"LoD renderer",GRAPHICS_CORE:"Graphics3D",I3S_CONTROLLER:"I3S",POINT_CLOUD_LAYER:"point cloud",FEATURE_TILE_FETCHER:"feature fetcher",STREAM_CONTROLLER:"stream controller",OVERLAY:"overlay",OVERLAY_RENDERER:"overlay renderer",STAGE:"stage",GRAPHICS_DECONFLICTOR:"graphics deconflictor",FILTER_VISIBILITY:"Graphics3D filter visibility",SCALE_VISIBILITY:"Graphics3D scale visibility",FRUSTUM_VISIBILITY:"Graphics3D frustum visibility",POINT_OF_INTEREST_FREQUENT:"POI frequent",POINT_OF_INTEREST_INFREQUENT:"POI infrequent",LABELER:"labeler",FEATURE_QUERY_ENGINE:"feature query",FEATURE_TILE_TREE:"feature tile tree",FEATURE_TILE_TREE_ACTIVE:"fast feature tile tree",ELEVATION_ALIGNMENT:"elevation alignment",ELEVATION_ALIGNMENT_SCENE:"elevation alignment scene",TEXT_TEXTURE_ATLAS:"text texture atlas",TEXTURE_UNLOAD:"texture unload",LINE_OF_SIGHT_TOOL:"line of sight tool",LINE_OF_SIGHT_TOOL_INTERACTIVE:"interactive line of sight tool",ELEVATION_PROFILE:"elevation profile",SNAPPING:"snapping",SHADOW_ACCUMULATOR:"shadow accumulator",CLOUDS_GENERATOR:"clouds generator",FLOW_GENERATOR:"flow generator",MAPVIEW_FETCH_QUEUE:"mapview fetch queue",MAPVIEW_LAYERVIEW_UPDATE:"mapview layerview update",MAPVIEW_VECTOR_TILE_PARSING_QUEUE:"mapview vector tile parsing queue",NONE:0,TEST_PRIO:1},ru=0,Xse=new Map([[di.RESOURCE_CONTROLLER_IMMEDIATE,ru],[di.RESOURCE_CONTROLLER,4],[di.SLIDE,ru],[di.STREAM_DATA_LOADER,ru],[di.ELEVATION_QUERY,ru],[di.TERRAIN_SURFACE,1],[di.SURFACE_GEOMETRY_UPDATES,1],[di.LOD_RENDERER,2],[di.GRAPHICS_CORE,2],[di.I3S_CONTROLLER,2],[di.POINT_CLOUD_LAYER,2],[di.FEATURE_TILE_FETCHER,2],[di.STREAM_CONTROLLER,2],[di.CLOUDS_GENERATOR,2],[di.OVERLAY,4],[di.OVERLAY_RENDERER,4],[di.STAGE,4],[di.GRAPHICS_DECONFLICTOR,4],[di.FILTER_VISIBILITY,4],[di.SCALE_VISIBILITY,4],[di.FRUSTUM_VISIBILITY,4],[di.POINT_OF_INTEREST_FREQUENT,6],[di.POINT_OF_INTEREST_INFREQUENT,30],[di.LABELER,8],[di.FEATURE_QUERY_ENGINE,8],[di.FEATURE_TILE_TREE,16],[di.FEATURE_TILE_TREE_ACTIVE,ru],[di.ELEVATION_ALIGNMENT,12],[di.ELEVATION_ALIGNMENT_SCENE,14],[di.TEXT_TEXTURE_ATLAS,12],[di.TEXTURE_UNLOAD,12],[di.LINE_OF_SIGHT_TOOL,16],[di.LINE_OF_SIGHT_TOOL_INTERACTIVE,ru],[di.SNAPPING,ru],[di.SHADOW_ACCUMULATOR,30],[di.FLOW_GENERATOR,12],[di.MAPVIEW_FETCH_QUEUE,ru],[di.MAPVIEW_LAYERVIEW_UPDATE,2],[di.MAPVIEW_VECTOR_TILE_PARSING_QUEUE,ru]]);function Jse(t){return Xse.has(t)?Xse.get(t):typeof t=="number"?t:1}const YGe=6.5,Kse=1,ZGe=30,XGe=1e3/30,JGe=100,Qse=.9;let KGe=class{get updating(){return this._updating.value}_updatingChanged(){this._updating.value=this._tasks.some(e=>e.needsUpdate)}constructor(){this._updating=q$(!0),this._microTaskQueued=!1,this._frameNumber=0,this.performanceInfo={total:new cC("total"),tasks:new Map},this._frameTaskTimes=new Map,this._budget=new $_e,this.state=1,this._tasks=new Array,this._runQueue=new Array,this._load=0,this._forceTask=!1,this._debug=!1,this._debugHandle=ze(()=>UGe.SCHEDULER_LOG_SLOW_TASKS,e=>this._debug=e,Di);for(const e of Object.keys(di))this.performanceInfo.tasks.set(di[e],new cC(String(di[e])))}destroy(){this._tasks.forEach(e=>e.remove()),this._tasks.length=0,this._runQueue.length=0,Rr(this._debugHandle),this._microTaskQueued=!1,this._updatingChanged()}taskRunningChanged(e){this._updatingChanged(),e&&this._budget.remaining>0&&!this._microTaskQueued&&(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.remaining>0&&this._schedule()&&this._runFrame())}))}registerTask(e,i){const r=new QGe(this,e,i);return this._tasks.push(r),this._updatingChanged(),this.performanceInfo.tasks.has(e)||this.performanceInfo.tasks.set(e,new cC(e)),r}get load(){return this._load}frame(e){if(this._startFrameTaskTimes(),this._updateBudget(e)){const i=this._budget.now();return this._runFrame(),this._recordFrameTaskTimes(this._budget.now()-i),!0}return this._recordFrameTaskTimes(0),!1}_updateBudget(e){this._test&&(this._test.usedBudget=0),++this._frameNumber;let i=YGe,r=e.frameDuration,n=Kse;switch(this.state){case 2:i=0,r=Math.max(JGe,e.frameDuration),n=ZGe;break;case 1:r=Math.max(XGe,e.frameDuration)}return r=r-e.elapsedFrameTime-i,this.state!==2&&r<Kse&&!this._forceTask?(this._forceTask=!0,!1):(r=Math.max(r,n),this._budget.reset(r),this._updateLoad(),this._schedule())}_runFrame(){switch(this._forceTask=!1,this._microTaskQueued=!1,this.state){case 2:this._runIdle();break;case 1:this._runInteracting();break;default:this._runAnimating()}this._test&&(this._test.usedBudget=this._budget.elapsed)}stopFrame(){this._budget.reset(0),this._budget.madeProgress()}removeTask(e){r8(this._tasks,e),r8(this._runQueue,e),this._updatingChanged()}_updateTask(e){this._tasks.forEach(i=>{i.name===e&&i.setPriority(e)})}_getState(e){if(this._runQueue.some(r=>r.name===e))return"s";let i="i";return this._tasks.forEach(r=>{r.name===e&&r.needsUpdate&&(r.schedulePriority<=1?i="r":i!=="r"&&(i="w"))}),i}_getRuntime(e){let i=0;return this._tasks.forEach(r=>{r.name===e&&(i+=r.runtime)}),i}_resetRuntimes(){this._tasks.forEach(e=>e.runtime=0)}_getRunning(){const e=new Map;if(this._tasks.forEach(r=>{r.needsUpdate&&e.set(r.name,(e.get(r.name)||0)+1)}),e.size===0)return null;let i="";return e.forEach((r,n)=>{i+=r>1?` ${r}x ${n}`:` ${n}`}),i}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){const e=this._tasks.reduce((i,r)=>r.needsUpdate?++i:i,0);this._load=this._load*Qse+e*(1-Qse)}_schedule(){for(iMe(this._runQueue,e=>!!e.needsUpdate||(e.schedulePriority=e.basePriority,!1)),this._tasks.forEach(e=>{e.basePriority===ru&&e.needsUpdate&&!this._runQueue.includes(e)&&e.blockFrame!==this._frameNumber&&this._runQueue.unshift(e)});this._runQueue.length===0;){let e=!1,i=0;if(this._tasks.forEach(r=>{r.needsUpdate&&r.schedulePriority!==0&&r.basePriority!==ru&&r.blockFrame!==this._frameNumber&&(e=!0,i=Math.max(i,r.basePriority),r.schedulePriority===1?(r.schedulePriority=0,this._runQueue.push(r)):--r.schedulePriority)}),!e)return this._updatingChanged(),!1}return this._updatingChanged(),!0}_run(){do for(;this._runQueue.length>0;){const e=this._budget.now(),i=this._runQueue.pop();this._budget.resetProgress();try{i.task.runTask(this._budget)===S_e&&(i.blockFrame=this._frameNumber)}catch(n){$e.getLogger("esri.views.support.Scheduler").error(`Exception in task "${i.name}"`,n),i.blockFrame=this._frameNumber}!this._budget.hasProgressed&&i.blockFrame!==this._frameNumber&&i.needsUpdate&&(i.name,i.blockFrame=this._frameNumber),i.schedulePriority=i.basePriority;const r=this._budget.now()-e;if(i.runtime+=r,this._frameTaskTimes.set(i.priority,this._frameTaskTimes.get(i.priority)+r),this._budget.remaining<=0)return void this._updatingChanged()}while(this._schedule());this._updatingChanged()}_startFrameTaskTimes(){for(const e of Object.keys(di))this._frameTaskTimes.set(di[e],0)}_recordFrameTaskTimes(e){this._frameTaskTimes.forEach((i,r)=>this.performanceInfo.tasks.get(r).push(i)),this.performanceInfo.total.push(e)}get test(){return this._test}},QGe=class{get task(){return this._task.value}get readyToRun(){return this._queue.readyToRun}get updating(){return this._queue.updating}constructor(e,i,r){this._scheduler=e,this.name=i,this.blockFrame=0,this.runtime=0,this._queue=new HGe,this._handles=new wT,this._basePriority=Jse(i),this.schedulePriority=this._basePriority,this._task=q$(r??this._queue),this._handles.add(as(()=>this.task.readyToRun,n=>e.taskRunningChanged(n)))}remove(){this.processQueue(zC),this._scheduler.removeTask(this),this.schedule=iB.schedule,this.reschedule=iB.reschedule,this.scheduleGenerator=iB.scheduleGenerator,this._handles.destroy()}get basePriority(){return this._basePriority}setPriority(e){if(this.name===e)return;this.name=e;const i=Jse(e);this._basePriority!==ru&&this.schedulePriority===0||(this.schedulePriority=i),this._basePriority=i}get priority(){return this.name}set priority(e){this.setPriority(e)}get needsUpdate(){return this.readyToRun||!this.task.destroyed&&this.task.readyToRun}schedule(e,i,r){return this._queue.push(e,i,r)}reschedule(e,i,r){return this._queue.unshift(e,i,r)}scheduleGenerator(e,i,r){return this._queue.pushGenerator(e,i,r)}processQueue(e){return this._queue.runTask(e)}},$_e=class{constructor(){this._begin=performance?.now()??0,this._budget=0,this._done=!1,this._progressed=!1,this._enabled=!0}run(e){return!this.done&&(e()===!0&&this.madeProgress(),!0)}get done(){return this._done}get budget(){return this._budget}madeProgress(){return this._progressed=!0,this._done=this.elapsed>=this._budget&&this._enabled,this._done}get enabled(){return this._enabled}set enabled(e){this._enabled=e}reset(e){this._begin=this.now(),this._budget=e,this.resetProgress()}get remaining(){return Math.max(this._budget-this.elapsed,0)}now(){return performance.now()}get elapsed(){return this.now()-this._begin}resetProgress(){this._progressed=!1,this._done=!1}get hasProgressed(){return this._progressed}};const zC=new $_e;zC.enabled=!1;let eqe=class{remove(){}processQueue(){}schedule(e,i,r){try{if(Pa(i)){const n=Hi();return r?Promise.resolve(r(n)):Promise.reject(n)}return a8(e(zC))}catch(n){return Promise.reject(n)}}reschedule(e,i,r){return this.schedule(e,i,r)}async scheduleGenerator(e,i,r){if(Pa(i)){const s=Hi();if(r)return r(s);throw s}const n=e(zC);for(;;){const s=n.next(zC),a=ho(s)?await s:s;if(Pa(i)){const o=Hi();if(r){const c=r(o),h=n.return(null);return ho(h)&&await _v(h),c}const l=n.throw(o);throw ho(l)&&await _v(l),o}if(a.done)return a.value}}};const iB=new eqe;let tqe=class{constructor(e){this.view=e,this._stationaryHandle=null,this._frameTaskHandle=null,this._updateParameters=null,this._updateRequested=!1,this._scheduler=WGe(),this._schedulerHandle=as(()=>this._scheduler.updating,()=>this.requestFrame()),this.stationary=!0,this.prepare=()=>{this._updateParameters&&(this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions,this._updateParameters.targetState.copy(this.view.state),this.view.animation?.target==null||ho(this.view.animation.target)||(this._updateParameters.targetState.viewpoint=this.view.animation.target))},this.update=i=>{if(this._updateRequested=!1,this.view?.destroyed)return;const{allLayerViews:r,graphicsView:n,labelManager:s,state:{id:a}}=this.view;r?.forEach(this._updateLayerView,this),s!=null&&(s.lastUpdateId!==a&&(s.viewChange(),s.lastUpdateId=a),s.updateRequested&&s.processUpdate(this._updateParameters)),n!=null&&(n.lastUpdateId!==a&&(n.viewChange(),n.lastUpdateId=a),n.updateRequested&&n.processUpdate(this._updateParameters)),this.view.graphicsTileStore?.setViewState(this._updateParameters.state),this.view.animation?this._scheduler.state=0:this.view.interacting?this._scheduler.state=1:this._scheduler.state=2,this._scheduler.frame(i)||this._updateRequested||this._scheduler.state!==2||this._frameTaskHandle?.pause()}}destroy(){this.stop(),this._schedulerHandle.remove(),this._scheduler.destroy()}get scheduler(){return this._scheduler}start(){if(this._frameTaskHandle)return;const e=this.view;this.stationary=e.stationary,this._updateParameters={state:e.state,targetState:new uX,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:e.renderingOptions},this._stationaryHandle=ze(()=>e.stationary,i=>{this.stationary=i,this.requestFrame()}),this._frameTaskHandle=z$(this),this.requestUpdate()}stop(){this._frameTaskHandle&&(this._updateRequested=!1,this._stationaryHandle?.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(e){if(!e.attached)return void this.requestUpdate();const i=this.view.state,r=e.lastUpdateId;r!=null&&(this.stationary||e.moving)||(e.moving=!0),r!==i.id&&e.viewChange(),this.stationary&&e.moving&&(e.moving=!1,e.moveEnd()),e.lastUpdateId=i.id,e.updateRequested&&e.processUpdate(this._updateParameters),"layerViews"in e&&e.layerViews?.forEach(this._updateLayerView,this)}};function iqe(t,e){const{spatialReference:i}=e,r=[e.x,e.y];let n,s,a,o;const l=[0,0],c=rqe(t);for(let g=0;g<c.length;g++){const y=c[g];for(let b=0;b<y.length-1;b++){F4e(l,r,y,b);const _=oN(r,l);(n==null||_<n)&&(n=_,s=[...l],a=g,o=b)}}if(n==null||!s||a==null||o==null)throw new ee("nearest-coordinate:failed","Failed to find the nearest coordinate");const[h,f]=s;return{coordinate:new gt({x:h,y:f,spatialReference:i}),distance:n}}function rqe(t){switch(t.type){case"extent":return[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]];case"polygon":return t.rings;case"polyline":return t.paths}}var SH;let C0=SH=class extends CZ(lt){constructor(t){super(t),this.geometry=null,this.spatialReference=null}get normalizedGeometry(){if(this.geometry==null||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return jv(this.geometry,this.spatialReference)}catch(t){return $e.getLogger(this).error("#constraints.geometry","could not project the geometry to the view's spatial reference",{geometry:this.geometry,spatialReference:this.spatialReference,error:t}),null}return this.geometry}constrain(t,e){if(this.normalizedGeometry==null)return t;const i=t.targetGeometry;if(this.normalizedGeometry.type==="extent"?BM(this.normalizedGeometry,i):nZ(this.normalizedGeometry,i))return t;const{coordinate:r}=iqe(this.normalizedGeometry,i);return r&&(t.targetGeometry=r),t}clone(){return new SH({geometry:this.geometry?.clone(),spatialReference:this.spatialReference?.clone()})}};d([m({constructOnly:!0})],C0.prototype,"geometry",void 0),d([m({readOnly:!0})],C0.prototype,"normalizedGeometry",null),d([m({constructOnly:!0})],C0.prototype,"spatialReference",void 0),C0=SH=d([U("esri.views.2d.constraints.GeometryConstraint")],C0);var $H;let bE=$H=class extends CZ(lt){constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0}constrain(t,e){return this.enabled&&e&&(this.rotationEnabled||(t.rotation=e.rotation)),t}clone(){return new $H({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};d([m()],bE.prototype,"enabled",void 0),d([m()],bE.prototype,"rotationEnabled",void 0),bE=$H=d([U("esri.views.2d.constraints.RotationConstraint")],bE);const T_e=bE;var TH;let Qo=TH=class extends CZ(lt){constructor(t){super(t),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0}initialize(){let t,{lods:e,minScale:i,maxScale:r,minZoom:n,maxZoom:s}=this,a=-1,o=-1,l=!1,c=!1;if(i!==0&&r!==0&&i<r&&([i,r]=[r,i]),!e?.length)return this._set("effectiveMinScale",i),void this._set("effectiveMaxScale",r);e=e.map(h=>h.clone()),e.sort((h,f)=>f.scale-h.scale),e.forEach((h,f)=>h.level=f);for(const h of e)!l&&i>0&&i>=h.scale&&(a=h.level,l=!0),!c&&r>0&&r>=h.scale&&(o=t?t.level:-1,c=!0),t=h;n===-1&&(n=i===0?0:a),s===-1&&(s=r===0?e.length-1:o),n=Math.max(n,0),n=Math.min(n,e.length-1),s=Math.max(s,0),s=Math.min(s,e.length-1),n>s&&([n,s]=[s,n]),i=e[n].scale,r=e[s].scale,e.splice(0,n),e.splice(s-n+1),e.forEach((h,f)=>{this._lodByScale[h.scale]=h,this._scales[f]=h.scale}),this._set("effectiveLODs",e),this._set("effectiveMinZoom",n),this._set("effectiveMaxZoom",s),this._set("effectiveMinScale",i),this._set("effectiveMaxScale",r)}constrain(t,e){if(e&&t.scale===e.scale)return t;const i=this.effectiveMinScale,r=this.effectiveMaxScale,n=t.targetGeometry,s=e&&e.targetGeometry,a=r!==0&&t.scale<r,o=i!==0&&t.scale>i;if(a||o){const l=o?i:r;if(e&&s){const c=(l-e.scale)/(t.scale-e.scale);n.x=s.x+(n.x-s.x)*c,n.y=s.y+(n.y-s.y)*c}t.scale=l}return this.snapToZoom&&this.effectiveLODs&&(t.scale=this._getClosestScale(t.scale)),t}fit(t){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(t,null);const e=this.scaleToZoom(t.scale),i=Math.abs(e-Math.floor(e));return t.scale=this.zoomToScale(i>.99?Math.round(e):Math.floor(e)),t}zoomToScale(t){if(!this.effectiveLODs)return 0;t-=this.effectiveMinZoom,t=Math.max(0,t);const e=this._scales;if(t<=0)return e[0];if(t>=e.length)return e[e.length-1];const i=Math.floor(t),r=Math.ceil(t);return e[i]+(t-i)*(e[r]-e[i])}scaleToZoom(t){if(!this.effectiveLODs)return-1;const e=this._scales;let i,r;if(t>=e[0])return this.effectiveMinZoom;if(t<=e[e.length-1])return this.effectiveMaxZoom;for(let n=0;n<e.length-1;n++){if(i=e[n],r=e[n+1],r===t)return n+this.effectiveMinZoom+1;if(i>t&&r<t)return n+this.effectiveMinZoom+1-(t-r)/(i-r)}return-1}snapToClosestScale(t){if(!this.effectiveLODs)return t;const e=this.scaleToZoom(t);return this.zoomToScale(Math.round(e))}snapToNextScale(t,e=.5){if(!this.effectiveLODs)return t*e;const i=Math.round(this.scaleToZoom(t));return this.zoomToScale(i+1)}snapToPreviousScale(t,e=2){if(!this.effectiveLODs)return t*e;const i=Math.round(this.scaleToZoom(t));return this.zoomToScale(i-1)}clone(){return new TH({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(t){return this._lodByScale[t]||(t=this._scales.reduce((e,i)=>Math.abs(i-t)<=Math.abs(e-t)?i:e,this._scales[0])),this._lodByScale[t].scale}};d([m({readOnly:!0})],Qo.prototype,"effectiveLODs",void 0),d([m({readOnly:!0})],Qo.prototype,"effectiveMinZoom",void 0),d([m({readOnly:!0})],Qo.prototype,"effectiveMaxZoom",void 0),d([m({readOnly:!0})],Qo.prototype,"effectiveMinScale",void 0),d([m({readOnly:!0})],Qo.prototype,"effectiveMaxScale",void 0),d([m()],Qo.prototype,"lods",void 0),d([m()],Qo.prototype,"minZoom",void 0),d([m()],Qo.prototype,"maxZoom",void 0),d([m()],Qo.prototype,"minScale",void 0),d([m()],Qo.prototype,"maxScale",void 0),d([m()],Qo.prototype,"snapToZoom",void 0),Qo=TH=d([U("esri.views.2d.constraints.ZoomConstraint")],Qo);const k_e=Qo,nqe={base:null,key:"type",typeMap:{extent:Wt,polygon:br}};let Mn=class extends lt{constructor(e){super(e),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0,this.customConstraints=new We}destroy(){this.view=null}get effectiveLODs(){return this._zoom.effectiveLODs}get effectiveMinScale(){return this._zoom.effectiveMinScale}get effectiveMaxScale(){return this._zoom.effectiveMaxScale}get effectiveMinZoom(){return this._zoom.effectiveMinZoom}get effectiveMaxZoom(){return this._zoom.effectiveMaxZoom}set geometry(e){e?this._set("geometry",e):this._set("geometry",null)}get version(){return`${this._zoom?.uid}/${this._rotation?.uid}/${this._geometry?.uid}`}get _geometry(){const e=this._get("_geometry");return e&&this.geometry===e.geometry&&this.view?.constraintsInfo.spatialReference===e.spatialReference?e:new C0({geometry:this.geometry,spatialReference:this.view?.constraintsInfo.spatialReference})}get _rotation(){return new T_e({rotationEnabled:this.rotationEnabled})}get _zoom(){const e=this._get("_zoom"),i=this.lods||this.view?.constraintsInfo.lods,r=this.minZoom,n=this.maxZoom,s=this.minScale,a=this.maxScale,o=this.snapToZoom;return e&&e.lods===i&&e.minZoom===r&&e.maxZoom===n&&e.minScale===s&&e.maxScale===a&&e.snapToZoom===o?e:new k_e({lods:i,minZoom:r,maxZoom:n,minScale:s,maxScale:a,snapToZoom:o})}canZoomInTo(e){const i=this.effectiveMaxScale;return i===0||e>=i}canZoomOutTo(e){const i=this.effectiveMinScale;return i===0||e<=i}constrain(e,i){return this._zoom.constrain(e,i),this._rotation.constrain(e,i),this._geometry.constrain(e,i),this.customConstraints.forEach(r=>r.constrain(e,i)),e}constrainByGeometry(e){return this._geometry.constrain(e),this.customConstraints.forEach(i=>i.applyPanConstraint?.(e)),e}fit(e){return this._zoom.fit(e)}zoomToScale(e){return this._zoom.zoomToScale(e)}scaleToZoom(e){return this._zoom.scaleToZoom(e)}snapScale(e){return this._zoom.snapToClosestScale(e)}snapToNextScale(e){return this._zoom.snapToNextScale(e)}snapToPreviousScale(e){return this._zoom.snapToPreviousScale(e)}};d([m({readOnly:!0})],Mn.prototype,"effectiveLODs",null),d([m({readOnly:!0})],Mn.prototype,"effectiveMinScale",null),d([m({readOnly:!0})],Mn.prototype,"effectiveMaxScale",null),d([m({readOnly:!0})],Mn.prototype,"effectiveMinZoom",null),d([m({readOnly:!0})],Mn.prototype,"effectiveMaxZoom",null),d([m({types:nqe,value:null})],Mn.prototype,"geometry",null),d([m({type:[rs]})],Mn.prototype,"lods",void 0),d([m()],Mn.prototype,"minScale",void 0),d([m()],Mn.prototype,"maxScale",void 0),d([m()],Mn.prototype,"minZoom",void 0),d([m()],Mn.prototype,"maxZoom",void 0),d([m()],Mn.prototype,"rotationEnabled",void 0),d([m()],Mn.prototype,"snapToZoom",void 0),d([m({type:We})],Mn.prototype,"customConstraints",void 0),d([m()],Mn.prototype,"view",void 0),d([m({readOnly:!0})],Mn.prototype,"version",null),d([m({type:C0,readOnly:!0})],Mn.prototype,"_geometry",null),d([m({type:T_e})],Mn.prototype,"_rotation",null),d([m({readOnly:!0,type:k_e})],Mn.prototype,"_zoom",null),Mn=d([U("esri.views.2d.MapViewConstraints")],Mn);const eae=Mn;let Wa=class extends lt{constructor(e){super(e),this.constraints=null,this.ready=!1,this.resizeAlign="center",this.addHandles([ze(()=>this.constraints?.version,i=>{this.constraints&&i&&this.ready&&(this.state.viewpoint=this.constraints.fit(this.state.paddedViewState.viewpoint))},xu)])}get center(){if(!this.ready)return this._get("center");const{center:e,spatialReference:i}=this.state.paddedViewState;return this.state.commitProperty("id"),new gt({x:e[0],y:e[1],spatialReference:i})}set center(e){if(e==null)return;if(!this.ready)return void this._set("center",e);let i;try{i=this._project(e,this.state.spatialReference)}catch(n){return void $e.getLogger(this).error(new ee("mapview:invalid-center","could not project the value in the view's spatial reference",{input:e,error:n}))}const r=this.viewpoint;bH(r,r,i),this.viewpoint=r}get extent(){return this.ready?(this.state.commitProperty("id"),this.state.paddedViewState.extent.clone()):this._get("extent")}set extent(e){if(e==null)return;if(!e.width||!e.height)return void $e.getLogger(this).error(new ee("mapview:invalid-extent","invalid extent size"));if(!this.ready)return this._set("extent",e),this._set("center",void 0),this._set("viewpoint",void 0),this._set("scale",void 0),void this._set("zoom",void 0);let i;try{i=this._project(e,this.state.spatialReference)}catch(n){return void $e.getLogger(this).error(new ee("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:n}))}const r=this.viewpoint;wGe(r,r,i,this.state.size,{constraints:this.constraints}),this.viewpoint=r}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(e){this.ready?(this.state.padding=e,this._set("padding",this.state.padding)):this._set("padding",e)}get resolution(){return this.ready?(this.state.commitProperty("id"),this.state.resolution):0}get rotation(){return this.ready?(this.state.commitProperty("id"),this.state.rotation):this._get("rotation")}set rotation(e){if(isNaN(e))return;if(!this.ready)return void this._set("rotation",e);const i=this.viewpoint;MGe(i,i,e),this.viewpoint=i}get scale(){return this.ready?(this.state.commitProperty("id"),this.state.scale):this._get("scale")}set scale(e){if(!e||isNaN(e))return;if(!this.ready){this._set("scale",e),this._set("zoom",void 0);const r=this._get("extent");return void(r&&(this._set("extent",void 0),this._set("center",r.center)))}const i=this.viewpoint;qse(i,i,e),this.viewpoint=i}get viewpoint(){return this.ready?this.state.paddedViewState.viewpoint.clone():this._get("viewpoint")}set viewpoint(e){if(e==null)return;if(!this.ready)return this._set("viewpoint",e),this._set("extent",void 0),this._set("center",void 0),this._set("zoom",void 0),void this._set("scale",void 0);let i,r;try{i=this._project(e,this.state.spatialReference),!e.scale||isNaN(e.scale)?r=new ee("mapview:invalid-viewpoint",`invalid scale value of ${e.scale}`):e.targetGeometry==null&&(r=new ee("mapview:invalid-viewpoint","geometry not defined"))}catch(s){r=new ee("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:s})}if(r)return void $e.getLogger(this).error(r);this._scaleBeforeChangingSpatialReference=null;const n=new Os({targetGeometry:new gt,scale:0,rotation:0});uo(n,i),this.constraints?.constrain(n,this.state.paddedViewState.viewpoint),this.state.viewpoint=n,this._set("viewpoint",n)}get visibleArea(){return this.ready?this.state.visibleArea:null}get zoom(){return this.ready?this.constraints?.scaleToZoom(this.scale)??-1:this._get("zoom")}set zoom(e){if(!(e>=0))return;if(!this.ready){this._set("zoom",e),this._set("scale",void 0);const n=this._get("extent");return void(n&&(this._set("extent",void 0),this._set("center",n.center)))}const i=this.constraints?.zoomToScale(e)??0;if(!i)return void this._set("zoom",-1);const r=this.viewpoint;qse(r,r,i),this.viewpoint=r,this._set("zoom",this.constraints?.scaleToZoom(this.scale)??-1)}getUserStartupOptions(e){if(!e[0]&&!e[1])return{center:void 0,rotation:void 0,scale:void 0};const{padding:i,constraints:r}=this,n=this._get("center"),s=this._get("extent"),a=this._get("scale"),o=this._get("rotation"),l=this._get("viewpoint"),c=this._get("zoom"),h=c!=null&&r!=null&&r.zoomToScale(c)||void 0;let f,g,y;const b=l?.rotation,_=l?.targetGeometry;_?.type==="extent"?f=_:_?.type==="point"&&(g=_,y=l?.scale);const S=s??f;return{center:n??g??S?.center,rotation:o??b,scale:(a??h??y??(S&&MN(S,[e[0]-i.left-i.right,e[1]-i.top-i.bottom])))||void 0}}startup(e,i,r,n){const s=e.targetGeometry;try{this._project(e,r)}catch(a){$e.getLogger(this).warn(new kc("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:s.toJSON(),spatialReference:r,error:a})),e.targetGeometry=n||new gt({x:0,y:0,spatialReference:r})}this.constraints?.fit(e),this._set("state",new uX({padding:this.padding,size:i,viewpoint:e})),this._set("ready",!0)}teardown(){this._set("ready",!1);const{center:[e,i],spatialReference:r,rotation:n,scale:s}=this.state.paddedViewState,a=new gt({x:e,y:i,spatialReference:r});this._set("viewpoint",null),this._set("extent",null),this._set("center",a),this._set("zoom",-1),this._set("rotation",n),this._set("scale",s),this._set("state",null)}changeSpatialReference(e){const i=this.state.paddedViewState.clone();if(this._scaleBeforeChangingSpatialReference==null)this._scaleBeforeChangingSpatialReference=i.scale;else{const l=i.viewpoint.clone();l.scale=this._scaleBeforeChangingSpatialReference,i.viewpoint=l}const r=i.clone(),[n,s]=i.center;let a=null;try{a=this._project(new gt({x:n,y:s,spatialReference:i.spatialReference}),e)}catch(l){Wge()||$e.getLogger(this).warn(new kc("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",{center:a?.toJSON(),spatialReference:e,error:l}))}a||(a=new gt({x:0,y:0,spatialReference:e}));const o=bH(new Os({targetGeometry:new gt,scale:0,rotation:0}),i.viewpoint,a);r.viewpoint=o;try{const c=[i.size[0]/2,i.size[1]/2],h=[c[0]+20,c[1]],f=i.toMap([0,0],h),{x:g,y}=this._project(new gt({x:f[0],y:f[1],spatialReference:i.spatialReference}),e);f[0]=g,f[1]=y,r.toScreen(f,f);const b=EGe(c,f,h),_=Math.hypot(f[0]-c[0],f[1]-c[1])/20;!Number.isFinite(_)||Math.abs(_)>4?(o.rotation=0,o.targetGeometry=new gt({x:0,y:0,spatialReference:e})):(o.scale*=_,o.scale>ve("mapview-srswitch-adjust-rotation-scale-threshold")?o.rotation=0:o.rotation+=Number.isFinite(b)?b:0)}catch{}this._get("constraints")?.constrain(o,void 0),this._get("state").viewpoint=o}resize(e,i){if(!this.ready)return;const r=this.state;let n=this.state.paddedViewState.viewpoint;const s=this.state.paddedViewState.size.slice();r.size=[e,i],IGe(n,n,s,this.state.paddedViewState.size,this.resizeAlign),n=this.constraints?.constrain(n,void 0)??n,this.state.viewpoint=n}toMap(e){if(!this.ready)return null;const i=[0,0],[r,n]=this.state.toMap(i,[e.x,e.y]),s=this.state.spatialReference;return new gt({x:r,y:n,spatialReference:s})}toScreen(e,i){if(!this.ready)return null;const r=this._project(e,this.state.spatialReference),n=[r.x,r.y];return i?.pickClosestTarget===!1||this.state.paddedViewState.wrapMapCoordinate(n,n),this.state.toScreen(n,n),Ps(n[0],n[1])}_project(e,i){const r=e?.targetGeometry||e;if(!i)return e;if(!r)return null;if(i.imageCoordinateSystem||r.spatialReference?.imageCoordinateSystem||os(i,r.spatialReference))return e;const n=jv(r,i);if(!n)throw new ee("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:r,spatialReference:i});return sqe(e)?(e.targetGeometry=n,e):n}};function sqe(t){return t?.declaredClass==="esri.Viewpoint"}d([m({type:gt})],Wa.prototype,"center",null),d([m()],Wa.prototype,"constraints",void 0),d([m({type:Wt})],Wa.prototype,"extent",null),d([m({value:{top:0,right:0,bottom:0,left:0},cast:t=>({top:0,right:0,bottom:0,left:0,...t})})],Wa.prototype,"padding",null),d([m()],Wa.prototype,"ready",void 0),d([m()],Wa.prototype,"resizeAlign",void 0),d([m({readOnly:!0})],Wa.prototype,"resolution",null),d([m({type:Number})],Wa.prototype,"rotation",null),d([m({type:Number})],Wa.prototype,"scale",null),d([m({readOnly:!0})],Wa.prototype,"state",void 0),d([m({type:Os})],Wa.prototype,"viewpoint",null),d([m({readOnly:!0})],Wa.prototype,"visibleArea",null),d([m()],Wa.prototype,"zoom",null),Wa=d([U("esri.views.2d.ViewStateManager")],Wa);const tae=160;let wE=class extends lt{constructor(){super(...arguments),this._timer=void 0}get stationary(){return!this._timer}flip(){this._timestamp=performance.now(),this._timer==null&&(this._timer=setInterval(()=>{performance.now()-this._timestamp>=tae&&this.clear()},tae))}clear(){this._timer&&(clearInterval(this._timer),this._timer=void 0)}};d([m()],wE.prototype,"_timer",void 0),d([m()],wE.prototype,"stationary",null),wE=d([U("esri.views.2d.support.StationaryManager")],wE);const aqe=t=>{const e=t;let i=class extends e{constructor(...r){super(...r),this.fullOpacity=1,this.stateManager=new Wa({constraints:new eae({view:this})}),this.stationaryManager=new wE,this.mapViewNavigation=null,this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!1,labelsAnimationTime:0,labelCollisionsEnabled:!1},this.frameTask=new tqe(this),this.viewEvents=new Nwe(this),this.padding={top:0,right:0,bottom:0,left:0},this.addHandles([ze(()=>this.viewpoint,()=>this.stationaryManager.flip(),xu)])}get constraintsInfo(){return{lods:null,spatialReference:null}}get extent(){return this.stateManager?.extent??null}set extent(r){this.stateManager.extent=r}get state(){return this.stateManager.state}get interacting(){return!1}get stationary(){return!this.animation&&this.stationaryManager.stationary}set animation(r){const n=this._get("animation");if(r===n)return;if(n&&n.stop(),r!==this.animationManager.animation&&this.animationManager.stop(),!r||r.isFulfilled())return void this._set("animation",null);this._set("animation",r);const s=()=>{this.destroyed||r===this._get("animation")&&(this._set("animation",null),this.frameTask?.requestFrame())};r.when(s,s)}get constraints(){return this.stateManager?.constraints}set constraints(r){r.view=this;const n=this.stateManager.constraints;this.stateManager.constraints=r,n?.destroy()}get padding(){return this.stateManager?.padding}set padding(r){this.stateManager&&(this.stateManager.padding=r)}get resizeAlign(){return this.stateManager.resizeAlign}set resizeAlign(r){this.stateManager.resizeAlign=r}get rotation(){return this.stateManager.rotation??0}set rotation(r){const{rotationEnabled:n}=this.constraints;this.constraints.rotationEnabled=!0,this.stateManager.rotation=r,this.constraints.rotationEnabled=n}get viewpoint(){return this.stateManager.viewpoint??null}set viewpoint(r){this.stateManager.viewpoint=r,this.frameTask.requestFrame()}};return d([m({readOnly:!0})],i.prototype,"animationManager",void 0),d([m({readOnly:!0})],i.prototype,"fullOpacity",void 0),d([m()],i.prototype,"stateManager",void 0),d([m()],i.prototype,"constraintsInfo",null),d([m()],i.prototype,"extent",null),d([m({readOnly:!0})],i.prototype,"state",null),d([m({readOnly:!0})],i.prototype,"mapViewNavigation",void 0),d([m()],i.prototype,"renderingOptions",void 0),d([m({readOnly:!0})],i.prototype,"interacting",null),d([m()],i.prototype,"stationary",null),d([m()],i.prototype,"animation",null),d([m({type:eae})],i.prototype,"constraints",null),d([m()],i.prototype,"padding",null),d([m()],i.prototype,"resizeAlign",null),d([m()],i.prototype,"rotation",null),d([m({readOnly:!0})],i.prototype,"viewEvents",void 0),d([m({type:Os})],i.prototype,"viewpoint",null),i=d([U("esri.views.Viewport2DBaseMixin")],i),i},oqe=()=>yi.respectPrefersReducedMotion&&window.matchMedia("(prefers-reduced-motion: reduce)").matches;var k$;let Sx=(k$=class extends IY{constructor(e){super(e),this.state="running",this.target=null,this._resolver=null}initialize(){this._resolver=Qs(),this.addResolvingPromise(this._resolver.promise)}get done(){return this.state==="finished"||this.state==="stopped"}stop(){this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","stopped"),this._resolver?.reject(new ee("view:animation-stopped","ViewAnimation stopped")))}finish(){this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","finished"),this._resolver?.resolve())}update(e,i){i||(i=ho(e)?"waiting-for-target":"running"),this._set("target",e),this._set("state",i)}},k$.state={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"},k$);d([m({readOnly:!0})],Sx.prototype,"done",null),d([m({readOnly:!0,type:String})],Sx.prototype,"state",void 0),d([m()],Sx.prototype,"target",void 0),Sx=d([U("esri.views.ViewAnimation")],Sx);const kH=Sx;let iD=class extends lt{constructor(e){super(e),this._gotoTask=null}destroy(){this._gotoTask=null}async goTo(e,i){if(!e)return void $e.getLogger(this).error("#goTo()","target cannot be null or undefined");const r=new kH;this.view.animation=r,await f_(()=>this.view.ready,i);const n={...i,animate:i?.animate??(!oqe()&&this.view.animationsEnabled),animationMode:i?.animationMode??"auto"},{extent:s,spatialReference:a,size:o,viewpoint:l,constraints:c,padding:h,allLayerViews:f}=this.view,g=yGe(e,{extent:s,spatialReference:a,size:o,viewpoint:l,constraints:c,padding:h,allLayerViews:f,pickClosestTarget:i?.pickClosestTarget??!0});return r?.update(g),this._gotoTask={},n.animate?this._gotoAnimated(g,n):this._gotoImmediate(g,n)}_gotoImmediate(e,i){const r=this._gotoTask,n=this.view.animation,s=e.then(a=>{if(sr(i),r!==this._gotoTask)throw new ee("view:goto-interrupted","Goto was interrupted");this.view.viewpoint=n.target=a,n.finish()});return this._cancellableGoTo(r,n,s,i)}_gotoAnimated(e,i){const r=this._gotoTask,n=this.view.animation;if(!n)return Promise.resolve();const s=e.then(a=>{if(sr(i),r!==this._gotoTask)throw new ee("view:goto-interrupted","Goto was interrupted");return n.update(a),this.view.animationManager.animate(n,this.view.viewpoint,i),n.when().then(()=>{},()=>{})});return this._cancellableGoTo(r,n,s,i)}_cancellableGoTo(e,i,r,n){const s=()=>e===this._gotoTask;return ppe(r,n).finally(()=>{s()&&(i.done||i.stop())})}};d([m({constructOnly:!0})],iD.prototype,"view",void 0),iD=d([U("esri.views.2d.GoToManager")],iD);function E_e(t,e){switch(e){case"primary":return t.pointerType==="touch"||t.button===0;case"secondary":return t.pointerType!=="touch"&&t.button===2;case"tertiary":return t.pointerType!=="touch"&&t.button===1}}function C_e(t,e){return e.some(i=>E_e(t,i))}function iae(t,{dragPrimary:e,dragSecondary:i,dragTertiary:r}){return[{key:"primary",value:e},{key:"secondary",value:i},{key:"tertiary",value:r}].filter(n=>n.value===t).map(n=>n.key)}let rae=class extends Ls{constructor(e,i){super(!0),this._view=e,this.registerIncoming("double-click",i,r=>this._handleDoubleClick(r,i))}_handleDoubleClick(e,i){E_e(e.data,"primary")&&(e.stopPropagation(),i?this._view.mapViewNavigation.zoomOut([e.data.x,e.data.y]):this._view.mapViewNavigation.zoomIn([e.data.x,e.data.y]))}},lqe=class extends Ls{constructor(e,i,r){super(!0),this.view=e,this.pointerType=i,this.registerIncoming("double-tap-drag",r,n=>this._handleDoubleTapDrag(n))}_handleDoubleTapDrag(e){const{data:i}=e,{pointerType:r}=i;if(r!==this.pointerType)return;e.stopPropagation();const{action:n,delta:s}=i,{view:a}=this,{mapViewNavigation:o}=a;switch(n){case"begin":{const{scale:l}=a;this._startScale=l,this._currentScale=l,this._previousDelta=s,o.begin();break}case"update":{if(this._previousDelta.y===s.y)return;this._previousDelta=s;const l=1.015**s.y,c=this._startScale*l,h=c/this._currentScale;o.setViewpointImmediate(h),this._currentScale=c;break}case"end":{const{constraints:l}=a,{effectiveLODs:c,snapToZoom:h}=l;if(!h||!c)return void o.end();const f=l.snapScale(this._currentScale),g=(s.y>0?Math.max(f,l.snapToPreviousScale(this._startScale)):Math.min(f,l.snapToNextScale(this._startScale)))/this._currentScale;o.zoom(g).then(()=>{o.end()});break}}}},PN=class{constructor(e){this._callbacks=e,this._currentCount=0,this._callbacks.condition||(this._callbacks.condition=()=>!0)}handle(e){const i=e.data,r=i.pointers.size;switch(i.action){case"start":this._currentCount=r,this._emitStart(e);break;case"added":this._emitEnd(this._previousEvent),this._currentCount=r,this._emitStart(e);break;case"update":this._emitUpdate(e);break;case"removed":this._startEvent&&this._emitEnd(this._previousEvent),this._currentCount=r,this._emitStart(e);break;case"end":this._emitEnd(e),this._currentCount=0}this._previousEvent=e}_emitStart(e){this._startEvent=e,this._callbacks.condition?.(this._currentCount,e)&&this._callbacks.start(this._currentCount,e,this._startEvent)}_emitUpdate(e){this._callbacks.condition?.(this._currentCount,e)&&this._callbacks.update(this._currentCount,e,this._startEvent)}_emitEnd(e){this._callbacks.condition?.(this._currentCount,e)&&this._callbacks.end(this._currentCount,e,this._startEvent),this._startEvent=null}},cqe=class extends Ls{constructor(e,i,r){super(!0),this.view=e,this.pointerActions=i,this.registerIncoming("drag",r,n=>this._handleDrag(n)),this.registerIncoming("pointer-down",()=>this.stopMomentumNavigation())}onInstall(e){super.onInstall(e),this._dragEventSeparator=new PN({start:(i,r)=>{this.view.mapViewNavigation.pan.begin(this.view,r.data),r.stopPropagation()},update:(i,r)=>{this.view.mapViewNavigation.pan.update(this.view,r.data),r.stopPropagation()},end:(i,r)=>{this.view.mapViewNavigation.pan.end(this.view,r.data),r.stopPropagation()},condition:(i,r)=>i===1&&C_e(r.data,this.pointerActions)})}_handleDrag(e){const i=this.view.mapViewNavigation;i.pinch.zoomMomentum||i.pinch.rotateMomentum?this.stopMomentumNavigation():this._dragEventSeparator.handle(e)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}},uqe=class extends Ls{constructor(e,i,r){super(!0),this._view=e,this.pointerActions=i;const n=this._view.mapViewNavigation;this._dragEventSeparator=new PN({start:(s,a)=>{n.rotate.begin(this._view,a.data),a.stopPropagation()},update:(s,a)=>{n.rotate.update(this._view,a.data),a.stopPropagation()},end:(s,a)=>{n.rotate.end(),a.stopPropagation()},condition:(s,a)=>s===1&&C_e(a.data,this.pointerActions)}),this.registerIncoming("drag",r,s=>this._dragEventSeparator.handle(s))}};function I_e(t){const e=t[0],i=t[1],r=t[2];return Math.sqrt(e*e+i*i+r*r)}function dqe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function hqe(t,e,i,r){return t[0]=e,t[1]=i,t[2]=r,t}function pqe(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t}function M_e(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t}function A_e(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t}function P_e(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t[2]=e[2]/i[2],t}function fqe(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function mqe(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function gqe(t,e){return t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t[2]=Math.abs(e[2]),t}function yqe(t,e){return t[0]=Math.sign(e[0]),t[1]=Math.sign(e[1]),t[2]=Math.sign(e[2]),t}function vqe(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t[2]=Math.min(e[2],i[2]),t}function bqe(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t[2]=Math.max(e[2],i[2]),t}function wqe(t,e=0,i=1){return t[0]=Math.min(Math.max(t[0],e),i),t[1]=Math.min(Math.max(t[1],e),i),t[2]=Math.min(Math.max(t[2],e),i),t}function _qe(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function O_e(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t}function xqe(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t}function L_e(t,e){const i=e[0]-t[0],r=e[1]-t[1],n=e[2]-t[2];return Math.sqrt(i*i+r*r+n*n)}function D_e(t,e){const i=e[0]-t[0],r=e[1]-t[1],n=e[2]-t[2];return i*i+r*r+n*n}function R_e(t){const e=t[0],i=t[1],r=t[2];return e*e+i*i+r*r}function Sqe(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function $qe(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function EH(t,e){const i=e[0],r=e[1],n=e[2];let s=i*i+r*r+n*n;return s>0&&(s=1/Math.sqrt(s),t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s),t}function z_e(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Tqe(t,e,i){const r=e[0],n=e[1],s=e[2],a=i[0],o=i[1],l=i[2];return t[0]=n*l-s*o,t[1]=s*a-r*l,t[2]=r*o-n*a,t}function kqe(t,e,i){const r=e[0],n=e[1],s=e[2],a=i[0],o=i[1],l=i[2],c=n*l-s*o,h=s*a-r*l,f=r*o-n*a,g=Math.sqrt(c*c+h*h+f*f);return t[0]=c/g,t[1]=h/g,t[2]=f/g,t}function Eqe(t,e,i,r){const n=e[0],s=e[1],a=e[2];return t[0]=n+r*(i[0]-n),t[1]=s+r*(i[1]-s),t[2]=a+r*(i[2]-a),t}function Cqe(t,e,i,r,n,s){const a=s*s,o=a*(2*s-3)+1,l=a*(s-2)+s,c=a*(s-1),h=a*(3-2*s);return t[0]=e[0]*o+i[0]*l+r[0]*c+n[0]*h,t[1]=e[1]*o+i[1]*l+r[1]*c+n[1]*h,t[2]=e[2]*o+i[2]*l+r[2]*c+n[2]*h,t}function Iqe(t,e,i,r,n,s){const a=1-s,o=a*a,l=s*s,c=o*a,h=3*s*o,f=3*l*a,g=l*s;return t[0]=e[0]*c+i[0]*h+r[0]*f+n[0]*g,t[1]=e[1]*c+i[1]*h+r[1]*f+n[1]*g,t[2]=e[2]*c+i[2]*h+r[2]*f+n[2]*g,t}function Mqe(t,e=1){const i=aN,r=2*i()*Math.PI,n=2*i()-1,s=Math.sqrt(1-n*n)*e;return t[0]=Math.cos(r)*s,t[1]=Math.sin(r)*s,t[2]=n*e,t}function Aqe(t,e,i){const r=e[0],n=e[1],s=e[2];return t[0]=i[0]*r+i[4]*n+i[8]*s+i[12],t[1]=i[1]*r+i[5]*n+i[9]*s+i[13],t[2]=i[2]*r+i[6]*n+i[10]*s+i[14],t}function Pqe(t,e,i){const r=e[0],n=e[1],s=e[2];return t[0]=r*i[0]+n*i[3]+s*i[6],t[1]=r*i[1]+n*i[4]+s*i[7],t[2]=r*i[2]+n*i[5]+s*i[8],t}function Oqe(t,e,i){const r=i[0],n=i[1],s=i[2],a=i[3],o=e[0],l=e[1],c=e[2],h=n*c-s*l,f=s*o-r*c,g=r*l-n*o,y=n*g-s*f,b=s*h-r*g,_=r*f-n*h,S=2*a;return t[0]=o+h*S+2*y,t[1]=l+f*S+2*b,t[2]=c+g*S+2*_,t}function Lqe(t,e,i,r){const n=[],s=[];return n[0]=e[0]-i[0],n[1]=e[1]-i[1],n[2]=e[2]-i[2],s[0]=n[0],s[1]=n[1]*Math.cos(r)-n[2]*Math.sin(r),s[2]=n[1]*Math.sin(r)+n[2]*Math.cos(r),t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t}function Dqe(t,e,i,r){const n=[],s=[];return n[0]=e[0]-i[0],n[1]=e[1]-i[1],n[2]=e[2]-i[2],s[0]=n[2]*Math.sin(r)+n[0]*Math.cos(r),s[1]=n[1],s[2]=n[2]*Math.cos(r)-n[0]*Math.sin(r),t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t}function Rqe(t,e,i,r){const n=[],s=[];return n[0]=e[0]-i[0],n[1]=e[1]-i[1],n[2]=e[2]-i[2],s[0]=n[0]*Math.cos(r)-n[1]*Math.sin(r),s[1]=n[0]*Math.sin(r)+n[1]*Math.cos(r),s[2]=n[2],t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t}function zqe(t,e){EH(nae,t),EH(sae,e);const i=z_e(nae,sae);return i>1?0:i<-1?Math.PI:Math.acos(i)}const nae=Nv(),sae=Nv();function Fqe(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function Nqe(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function jqe(t,e){if(t===e)return!0;const i=t[0],r=t[1],n=t[2],s=e[0],a=e[1],o=e[2],l=Vo();return Math.abs(i-s)<=l*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(r-a)<=l*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(n-o)<=l*Math.max(1,Math.abs(n),Math.abs(o))}function Vqe(t,e,i){const r=i[0]-e[0],n=i[1]-e[1],s=i[2]-e[2];let a=r*r+n*n+s*s;return a>0?(a=1/Math.sqrt(a),t[0]=r*a,t[1]=n*a,t[2]=s*a,t):(t[0]=0,t[1]=0,t[2]=0,t)}const Bqe=M_e,Uqe=A_e,Hqe=P_e,Gqe=L_e,qqe=D_e,Wqe=I_e,Yqe=R_e;Object.freeze(Object.defineProperty({__proto__:null,abs:gqe,add:pqe,angle:zqe,bezier:Iqe,ceil:fqe,clamp:wqe,copy:dqe,cross:Tqe,crossAndNormalize:kqe,direction:Vqe,dist:Gqe,distance:L_e,div:Hqe,divide:P_e,dot:z_e,equals:jqe,exactEquals:Nqe,floor:mqe,hermite:Cqe,inverse:$qe,len:Wqe,length:I_e,lerp:Eqe,max:bqe,min:vqe,mul:Uqe,multiply:A_e,negate:Sqe,normalize:EH,random:Mqe,rotateX:Lqe,rotateY:Dqe,rotateZ:Rqe,round:_qe,scale:O_e,scaleAndAdd:xqe,set:hqe,sign:yqe,sqrDist:qqe,sqrLen:Yqe,squaredDistance:D_e,squaredLength:R_e,str:Fqe,sub:Bqe,subtract:M_e,transformMat3:Pqe,transformMat4:Aqe,transformQuat:Oqe},Symbol.toStringTag,{value:"Module"}));function Yu(t){let e=t*t;return t<0&&(e*=-1),e}function Zqe(t){return t.translation[0]=0,t.translation[1]=0,t.translation[2]=0,t.heading=0,t.tilt=0,t}function Xqe(t,e,i){const r=i,n=t.state,s=t.device,a=e.tiltDirection==="forward-down"?1:-1,o=1;return s.deviceType==="standard"?(r.translation[0]=Yu(n.axes[0]),r.translation[1]=Yu(n.axes[1]),r.translation[2]=Yu(n.buttons[7])-Yu(n.buttons[6]),r.heading=Yu(n.axes[2]),r.tilt=Yu(n.axes[3])):s.deviceType==="spacemouse"&&(r.translation[0]=1.2*Yu(n.axes[0]),r.translation[1]=1.2*Yu(n.axes[1]),r.translation[2]=2*-Yu(n.axes[2]),r.heading=1.2*Yu(n.axes[5]),r.tilt=1.2*Yu(n.axes[3])),r.tilt*=a,O_e(r.translation,r.translation,o),r}function Jqe(t){return t.translation[0]===0&&t.translation[1]===0&&t.translation[2]===0&&t.heading===0&&t.tilt===0&&t.zoom===0}let Kqe=class extends Ls{constructor(e){super(!0),this._view=e,this._frameTask=null,this._watchHandles=new wT,this._currentDevice=null,this._transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this._handle=this.registerIncoming("gamepad",i=>this._handleGamePadEvent(i)),this._handle.pause()}onInstall(e){super.onInstall(e),this._watchHandles.add([ze(()=>this._view.navigation.gamepad?.enabled,i=>{i?(this._handle.resume(),this._frameTask||(this._frameTask=z$({update:r=>this._frameUpdate(r.deltaTime)}))):(this._handle.pause(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null))},Di)])}onUninstall(){this._watchHandles.removeAll(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null),super.onUninstall()}_handleGamePadEvent(e){const i=this._view.navigation.gamepad.device;i&&e.data.device!==i||this._currentDevice&&this._currentDevice!==e.data.device||(e.data.action==="end"?(this._currentDevice=null,Zqe(this._transformation)):(this._currentDevice=e.data.device,Xqe(e.data,this._view.navigation.gamepad,this._transformation)),this._frameTask?.resume())}_frameUpdate(e){const i=this._transformation;if(Jqe(i))return void this._frameTask?.pause();const r=this._view.viewpoint.clone(),n=this._view.navigation.gamepad.velocityFactor,s=eWe*n*e;AN(r,r,[i.translation[0]*s,-i.translation[1]*s]);const a=1+i.translation[2]*tWe*e,o=this._view.constraints.rotationEnabled?-i.heading*Qqe*e:0,l=this._view.size,c=[l[0]/2,l[1]];f_e(r,r,a,o,c,l);const h=this._view.constraints.constrain(r,this._view.viewpoint);this._view.viewpoint=h}};const Qqe=.06,eWe=.7,tWe=6e-4;function F_e(t){const e=()=>t(document.visibilityState==="visible");return document.addEventListener("visibilitychange",e),Si(()=>document.removeEventListener("visibilitychange",e))}let iWe=class extends Ls{constructor(e,i,r){super(!0),this.view=e,this.keys=i,this._isSticky=!1,this._pressedKeys=new Set,this._timeout=void 0,this._currentDirection=void 0,this._stickyKeyDuration=200,this._handleKey=n=>{const s=this._keyMap[n.data.key];if(n.modifiers.has("Meta")||n.modifiers.has("Control"))return void this._stopMovement();if(s==null)return;n.stopPropagation(),n.preventDefault();const a=n.type==="key-down";if(this._pressedKeys[a?"add":"delete"](s),a){if(this._direction===s)return;this._direction=s,this._isSticky=!1,this._setTimeout(()=>{this._isSticky&&this._handlePopKey()})}else{const o=this._timeout===void 0,l=this._pressedKeys.size>0;o||l?this._handlePopKey():this._isSticky=!0}},this._handlePopKey=()=>{this._direction=Array.from(this._pressedKeys).pop(),this._direction==null&&this._stopMovement()},this._stopMovement=()=>{this._isSticky=!1,this._direction=void 0,this._pressedKeys.clear(),this._setTimeout(void 0)},this._keyMap={[i.left]:"left",[i.right]:"right",[i.up]:"up",[i.down]:"down"},this.registerIncoming("key-down",r,this._handleKey),this.registerIncoming("key-up",r,this._handleKey),this.registerIncoming("blur",r,this._stopMovement),this._visibilityHandle=F_e(n=>n?null:this._stopMovement())}onUninstall(){this._stopMovement(),this._visibilityHandle?.remove()}get _direction(){return this._currentDirection}set _direction(e){const i=this._currentDirection!=null;if(e!=null){if(i||this.view.mapViewNavigation.begin(),this._currentDirection!==e)switch(e){case"left":this.view.mapViewNavigation.continuousPanLeft();break;case"right":this.view.mapViewNavigation.continuousPanRight();break;case"up":this.view.mapViewNavigation.continuousPanUp();break;case"down":this.view.mapViewNavigation.continuousPanDown()}}else i&&this.view.mapViewNavigation.stop();this._currentDirection=e}_setTimeout(e){clearTimeout(this._timeout),this._timeout=e===void 0?void 0:setTimeout(()=>{this._timeout=void 0,e()},this._stickyKeyDuration)}},rWe=class extends Ls{constructor(e,i,r){super(!0),this.view=e,this.keys=i,this._keyToDirection=new Map,this._pressed=!1,this._addKeysMapping(i),this.registerIncoming("key-down",r,n=>this._handleKeyDown(n)),this.registerIncoming("key-up",r,n=>this._handleKeyUp(n)),this.registerIncoming("blur",r,()=>this._handleStop()),this._visibilityHandle=F_e(n=>n?null:this._handleStop())}onUninstall(){this._visibilityHandle?.remove(),this._handleStop()}_addKeysMapping(e){this._addKeyMapping(e.clockwise,"clockwise"),this._addKeyMapping(e.counterClockwise,"counterClockwise"),this._addKeyMapping(e.reset,"reset")}_addKeyMapping(e,i){for(const r of e)this._keyToDirection.set(r,i)}_handleKeyDown(e){e.data.repeat||this._handleKey(e,!0)}_handleKeyUp(e){this._handleKey(e,!1)}_handleStop(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(e,i){const r=e.modifiers;if(r.size>0&&!r.has("Shift")||!this.view.constraints.rotationEnabled)return;const n=this._keyToDirection.get(e.data.key);if(this._pressed=n!=null,this._pressed){if(e.preventDefault(),i)switch(this.view.mapViewNavigation.begin(),n){case"clockwise":this.view.mapViewNavigation.continuousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continuousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();e.stopPropagation()}}},nWe=class extends Ls{constructor(e,i,r){super(!0),this.view=e,this.keys=i,this._keysToZoomAction={},this.registerIncoming("key-down",r,n=>this._handleKeyDown(n)),i.zoomIn.forEach(n=>this._keysToZoomAction[n]=0),i.zoomOut.forEach(n=>this._keysToZoomAction[n]=1)}_handleKeyDown(e){this._handleKey(e)}_handleKey(e){const i=e.modifiers;if(i.size>0&&!i.has("Shift"))return;const{key:r}=e.data;if(!(r in this._keysToZoomAction))return;const n=this._keysToZoomAction[r],{mapViewNavigation:s}=this.view;let a=null;switch(n){case 0:a=s.zoomIn();break;case 1:a=s.zoomOut();break;default:return}s.begin(),a.then(()=>s.end()),e.stopPropagation()}};const sWe=.6;let aWe=class extends Ls{constructor(e,i){super(!0),this._view=e,this._canZoom=!0,this.registerIncoming("mouse-wheel",i,r=>this._handleMouseWheel(r))}_handleMouseWheel(e){if(this._view.navigation.actionMap.mouseWheel!=="zoom"||(e.preventDefault(),e.stopPropagation(),!this._canZoom))return;const i=this._view.mapViewNavigation,{x:r,y:n,deltaY:s}=e.data,a=1/sWe**(1/60*s),o=i.zoom(a,[r,n]);this._canZoom=!1,o.catch(()=>{}).then(()=>{this._canZoom=!0,i.end()})}},oWe=class extends Ls{constructor(e){super(!0),this.view=e,this.registerIncoming("drag",r=>this._handleDrag(r)),this.registerIncoming("pointer-down",()=>this._stopMomentumNavigation());const i=this.view.mapViewNavigation;this._dragEventSeparator=new PN({start:(r,n)=>{i.pinch.begin(this.view,n.data),n.stopPropagation()},update:(r,n)=>{i.pinch.update(this.view,n.data),n.stopPropagation()},end:(r,n)=>{i.pinch.end(this.view),n.stopPropagation()},condition:r=>r>=2})}_handleDrag(e){this._dragEventSeparator.handle(e)}_stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}};function aae(t){const e=t.native;return e?{buttons:e.buttons.map(i=>i.pressed?i.value||1:0),axes:e.axes.map(i=>uWe(i,t.axisThreshold))}:{buttons:[],axes:[]}}function lWe(t,e){if(t.axes.length!==e.axes.length||t.buttons.length!==e.buttons.length)return!1;for(let i=0;i<t.axes.length;i++)if(t.axes[i]!==e.axes[i])return!1;for(let i=0;i<t.buttons.length;i++)if(t.buttons[i]!==e.buttons[i])return!1;return!0}function cWe(t){for(let e=0;e<t.axes.length;e++)if(t.axes[e]!==0)return!1;for(let e=0;e<t.buttons.length;e++)if(t.buttons[e]!==0)return!1;return!0}function uWe(t,e){const i=Math.abs(t);return i<e?0:Math.sign(t)*(i-e)/(1-e)}let dWe=class{constructor(e,i){this._element=e,this._input=i,this._hasEventListeners=!1,this._onConnectGamepad=s=>{this._connectGamepad(s.gamepad)},this._onDisconnectGamepad=s=>{const a=s.gamepad,o=a.index,l=this._inputDevices[o];l&&(this._emitGamepadEvent(a,aae(l),!1),this._inputDevices.splice(o,1),this._latestUpdate.splice(o,1),this._input.gamepad.devices.remove(l),this.ensurePollingState())},this._frameTask=null,this._latestUpdate=new Array,this._inputDevices=new Array,this._callback=null;const r="getGamepads"in window.navigator,n=window.isSecureContext;this.supported=r&&n,this.supported&&(oae(s=>this._connectGamepad(s)),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState())}destroy(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener("gamepadconnected",this._onConnectGamepad),window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))}set hasEventListeners(e){this._hasEventListeners!==e&&(this._hasEventListeners=e,this.ensurePollingState())}get _eventsEnabled(){return this.supported&&this._inputDevices.length>0&&this._hasEventListeners}set onEvent(e){this._callback=e}_connectGamepad(e){const i=new KZ(e);i.deviceType!=="unknown"&&(this._inputDevices[e.index]=i,this._input.gamepad.devices.add(i)),this.ensurePollingState()}ensurePollingState(){this._eventsEnabled?this._startPolling():this._stopPolling()}_startPolling(){this._frameTask==null&&(this._frameTask=z$({update:()=>this._readGamepadState()}))}_stopPolling(){this._frameTask!=null&&(this._frameTask.remove(),this._frameTask=null,this._latestUpdate=new Array)}_readGamepadState(){const e=document.hasFocus(),i=this._element.contains(document.activeElement),r=this._input.gamepad.enabledFocusMode==="document"&&!e||this._input.gamepad.enabledFocusMode==="view"&&!i;oae(n=>{const s=this._inputDevices[n.index];if(!s)return;const a=this._latestUpdate[n.index],o=aae(s),l=r||cWe(o);a&&(a.timestamp===n.timestamp||!a.active&&l||lWe(a.state,o))||this._emitGamepadEvent(n,o,!l)})}_emitGamepadEvent(e,i,r){const n=this._latestUpdate[e.index],s=n&&n.active;if(!s&&!r)return;const a=!s&&r?"start":s&&r?"update":"end";this._latestUpdate[e.index]={timestamp:e.timestamp,state:i,active:r},this._callback&&this._callback({device:this._inputDevices[e.index],state:i,action:a})}};function hWe(t){if(!t||!t.connected)return!1;for(let e=0;e<t.axes.length;e++)if(isNaN(t.axes[e]))return!1;return!0}function oae(t){for(const e of navigator.getGamepads())hWe(e)&&t(e)}const lae=ve("edge"),pWe=ve("chrome"),fWe=ve("ff"),mWe=ve("safari"),cae="esri-view-surface",C1={touchNone:`${cae}--touch-none`,touchPan:`${cae}--touch-pan`};var uw;let gWe=(uw=class{constructor(e,i){this._active={},this._callback=()=>{},this._activePointerCaptures=new Set,this._keyDownState=new Set,this._eventId=1,this._browserTouchPanningEnabled=!1,this._element=e,e.getAttribute("tabindex")||e.setAttribute("tabindex","0"),this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost},this._updateTouchAction(),this._element.addEventListener("keydown",this._preventAltKeyDefault),this._gamepadSource=new dWe(e,i),this._gamepadSource.onEvent=r=>this._callback("gamepad",r)}destroy(){this._callback=()=>{},this.activeEvents=null,this._activePointerCaptures.forEach(e=>this._releasePointerCaptureSafe(e)),this._activePointerCaptures.clear(),this._gamepadSource=Ir(this._gamepadSource),this._removeTouchAction(),this._element.removeEventListener("keydown",this._preventAltKeyDefault)}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(e){this._browserTouchPanningEnabled=e,this._updateTouchAction(),this._updateTouchEventHandling()}set onEventReceived(e){this._callback=e}set activeEvents(e){for(const i in this._active)if(!e||!e.has(i)){const r=this._active[i];this._element.removeEventListener(rB[i],r),delete this._active[i]}e&&e.forEach(i=>{if(!this._active[i]&&rB[i]){const r=(this._eventHandlers[i]||this._handleDefault).bind(this,i);this._element.addEventListener(rB[i],r),this._active[i]=r}}),this._gamepadSource&&(this._gamepadSource.hasEventListeners=e?.has("gamepad")??!1)}setPointerCapture(e,i){i?this._setPointerCaptureSafe(e.pointerId):(this._releasePointerCaptureSafe(e.pointerId),this._activePointerCaptures.delete(e.pointerId))}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?C1.touchNone:C1.touchPan),this._element.classList.add(this._browserTouchPanningEnabled?C1.touchPan:C1.touchNone)}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_removeTouchAction(){this._element.classList.remove(C1.touchNone),this._element.classList.remove(C1.touchPan),this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_setPointerCaptureSafe(e){try{this._element.setPointerCapture(e),this._activePointerCaptures.add(e)}catch{}}_releasePointerCaptureSafe(e){try{if(this._element.hasPointerCapture&&!this._element.hasPointerCapture(e))return;this._element.releasePointerCapture(e)}catch{}}_updateNormalizedPointerLikeEvent(e,i){const r=Vwe(this._element,e);return uw.test.disableSubpixelCoordinates&&(r.x=Math.round(r.x),r.y=Math.round(r.y)),i.x=r.x,i.y=r.y,i}_handleKey(e,i){const{key:r}=i;r&&e==="key-up"&&this._keyDownState.delete(r);const n={native:i,key:r,repeat:!!r&&this._keyDownState.has(r)};r&&e==="key-down"&&this._keyDownState.add(n.key),this._callback(e,n)}_handlePointer(e,i){const r=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,pointerType:i.pointerType,button:i.button,buttons:i.buttons,eventId:this._eventId++});this._callback(e,r)}_handlePointerPreventDefault(e,i){const r=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,pointerType:i.pointerType,button:i.button,buttons:i.buttons,eventId:this._eventId++});i.preventDefault(),this._callback(e,r)}_getDeltaFromTrackpadOrMouseWheel(e){return e.shiftKey&&ve("mac")&&e.deltaY===0?e.deltaX:e.deltaY}_handleMouseWheel(e,i){let r=this._getDeltaFromTrackpadOrMouseWheel(i);switch(i.deltaMode){case 0:lae&&(r=r/document.documentElement.clientHeight*600);break;case 1:r*=30;break;case 2:r*=900}lae?r*=.7:pWe||mWe?r*=.6:fWe&&(r*=1.375);const n=100,s=Math.abs(r);s>n&&(r=r/s*200/(1+Math.exp(-.02*(s-n))));const a=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,deltaY:r});this._callback(e,a)}_handlePointerCaptureLost(e,i){this._activePointerCaptures.delete(i.pointerId),this._handleDefault(e,i)}_handleDefault(e,i){const r={native:i};i.preventDefault(),this._callback(e,r)}_preventAltKeyDefault(e){e.key==="Alt"&&e.preventDefault()}_preventMultiTouchPanning(e){e.touches.length>1&&e.preventDefault()}},uw.test={disableSubpixelCoordinates:!1},uw);const rB={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};let yWe=class extends Ls{constructor(){super(!0),this.registerIncoming("context-menu",e=>e.data.native.preventDefault())}};const N_e=()=>({maximumClickDelay:300}),vWe=(t={})=>({...N_e(),movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500,...t}),hX=(t={})=>({...N_e(),maximumDoubleClickDistance:10,maximumDoubleTouchDistance:35,maximumDoubleClickDelay:250,maximumDoubleTouchDelay:350,...t});function nz(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)}function bWe(t,e){const i=e.x-t.x,r=e.y-t.y;return Math.sqrt(i*i+r*r)}function wWe(t,e){if(e?(e.radius=0,e.center.x=0,e.center.y=0):e={radius:0,center:Ps()},t.length===0)return e;if(t.length===1)return e.center.x=t[0].x,e.center.y=t[0].y,e;if(t.length===2){const[I,P]=t,[O,N]=[P.x-I.x,P.y-I.y];return e.radius=Math.sqrt(O*O+N*N)/2,e.center.x=(I.x+P.x)/2,e.center.y=(I.y+P.y)/2,e}let i=0,r=0;for(let I=0;I<t.length;I++)i+=t[I].x,r+=t[I].y;i/=t.length,r/=t.length;const n=t.map(I=>I.x-i),s=t.map(I=>I.y-r);let a=0,o=0,l=0,c=0,h=0,f=0,g=0;for(let I=0;I<n.length;I++){const P=n[I],O=s[I],N=P*P,R=O*O;a+=N,o+=R,l+=P*O,c+=N*P,h+=R*O,f+=P*R,g+=O*N}const y=.5*(c+f),b=.5*(h+g),_=a*o-l*l,S=(y*o-b*l)/_,$=(a*b-l*y)/_,C=Ps(S+i,$+r);return{radius:Math.sqrt(S*S+$*$+(a+o)/t.length),center:C}}function ew(t){const{native:e}=t,{pointerId:i,button:r,pointerType:n}=e;return n==="mouse"?`${i}:${r}`:`${n}`}let _We=class extends Ls{constructor(e={},i=xT){super(!1),this._clock=i,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=Ps(0,0),this._pointerState=new Map,this._parameters=hX(e),this._doubleTapDrag=this.registerOutgoing("double-tap-drag"),this._dragEventSeparator=new PN({start:(r,n)=>this._dragStart(r,n),update:(r,n)=>this._dragUpdate(n),end:(r,n)=>this._dragEnd(n)}),this.registerIncoming("drag",r=>this._dragEventSeparator.handle(r)),this.registerIncoming("pointer-down",r=>this._handlePointerDown(r)),this.registerIncoming("pointer-up",()=>this._handlePointerUp())}onUninstall(){this._pointerState.forEach(e=>{e.doubleTapTimeout=Rr(e.doubleTapTimeout)})}get hasPendingInputs(){for(const e of this._pointerState.values())if(e.doubleTapTimeout!=null)return!0;return!1}_clearPointerDown(e){const i=this._pointerState.get(e);i&&(i.doubleTapTimeout=Rr(i.doubleTapTimeout),this._pointerState.delete(e),this.refreshHasPendingInputs())}_dragStart(e,i){if(!this._doubleTapDragReady||e!==1)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;const{data:r,modifiers:n}=i,{center:s}=r;this._dragStartCenter=s;const a=nB("begin",Ps(0,0),r);this._doubleTapDrag.emit(a,void 0,n),i.stopPropagation()}_dragUpdate(e){if(!this._doubleTapDragActive)return;const{data:i,modifiers:r}=e,{center:n}=i,s=nB("update",Ps(n.x-this._dragStartCenter.x,n.y-this._dragStartCenter.y),i);this._doubleTapDrag.emit(s,void 0,r),e.stopPropagation()}_dragEnd(e){if(!this._doubleTapDragActive)return;const{data:i,modifiers:r}=e,{center:n}=i,s=nB("end",Ps(n.x-this._dragStartCenter.x,n.y-this._dragStartCenter.y),i);this._doubleTapDrag.emit(s,void 0,r),this._doubleTapDragActive=!1,e.stopPropagation()}_handlePointerDown(e){const{data:i}=e,r=ew(i),n=this._pointerState.get(r),{pointerType:s}=i.native;if(n){const a=s==="touch"?this._parameters.maximumDoubleTouchDistance:this._parameters.maximumDoubleClickDistance;this._clearPointerDown(r),nz(n.event.data,i)>a?this._storePointerDown(e):this._doubleTapDragReady=!0}else this._storePointerDown(e)}_handlePointerUp(){this._doubleTapDragReady=!1}_storePointerDown(e){const{data:i}=e,{pointerType:r}=i.native,n=ew(i),s=r==="touch"?this._parameters.maximumDoubleTouchDelay:this._parameters.maximumDoubleClickDelay,a=this._clock.setTimeout(()=>this._clearPointerDown(n),s);this._pointerState.set(n,{event:e,doubleTapTimeout:a}),this.refreshHasPendingInputs()}};function nB(t,e,i){const{button:r,buttons:n,pointer:s,pointers:a,pointerType:o,timestamp:l}=i;return{action:t,delta:e,button:r,buttons:n,pointer:s,pointers:a,pointerType:o,timestamp:l}}let xWe=class extends Ls{constructor(e){super(!1),this._navigationTouch=e,this._startStateModifiers=new Set,this._activePointerMap=new Map,this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._drag=this.registerOutgoing("drag"),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-capture-lost",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-cancel",this._handlePointerUpAndPointerLost.bind(this))}_createPayload(e,i,r,n){return{action:e,pointerType:this._pointerType,button:this._mouseButton,buttons:i.buttons,timestamp:n,pointers:SWe(this._activePointerMap),pointer:i,angle:r.angle,radius:r.radius,center:r.center}}_addPointer(e){const i=e.native.pointerId,r=kO(this._activePointerMap).angle,n={event:e,initialAngle:0,lastAngle:0};this._activePointerMap.set(i,n);const s=rD(n,j_e(this._activePointerMap));n.initialAngle=s,n.lastAngle=s,this._updatePointerAngles(r)}_updatePointer(e){if(e&&e.x==null&&e.y==null)return;const i=e.native.pointerId,r=this._activePointerMap.get(i);r?r.event=e:this._addPointer(e)}_removePointer(e){const i=kO(this._activePointerMap).angle;this._activePointerMap.delete(e),this._updatePointerAngles(i)}_updatePointerAngles(e){const i=kO(this._activePointerMap);this._activePointerMap.forEach(r=>{r.initialAngle=rD(r,i)-e,r.lastAngle=rD(r,i)-e})}_emitEvent(e,i,r){const n=kO(this._activePointerMap);this._drag.emit(this._createPayload(e,i,n,r),void 0,this._startStateModifiers)}_handlePointerUpAndPointerLost(e){const i=e.data.native.pointerId,r=e.timestamp;this._activePointerMap.get(i)&&(this._activePointerMap.size===1?(this._updatePointer(e.data),!this._isCurrentDragSuppressed&&this._emitEvent("end",e.data,r),this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._removePointer(i)):(this._removePointer(i),this._emitEvent("removed",e.data,e.timestamp)))}_handlePointerDrag(e){const i=e.data,r=i.currentEvent,n=e.timestamp;switch(i.action){case"start":case"update":this._isDragging?this._activePointerMap.has(r.native.pointerId)?(this._updatePointer(r),!this._isCurrentDragSuppressed&&this._emitEvent("update",r,n)):(this._addPointer(r),this._emitEvent("added",r,n),this._isCurrentDragSuppressed=this._isSuppressed):(this._updatePointer(r),this._pointerType=e.data.startEvent.pointerType,this._mouseButton=e.data.startEvent.button,this._startStateModifiers=e.modifiers,this._isDragging=!0,this._isCurrentDragSuppressed=this._isSuppressed,!this._isCurrentDragSuppressed&&this._emitEvent("start",r,n))}}get _isSuppressed(){return!!this._navigationTouch&&!this._navigationTouch.browserTouchPanEnabled&&this._pointerType==="touch"&&this._activePointerMap.size===1}};function j_e(t){const e=[];return t.forEach(i=>{e.push(Ps(i.event.x,i.event.y))}),wWe(e)}function kO(t){const e=j_e(t);let i=0;return t.forEach(r=>{let n=rD(r,e),s=n-r.lastAngle;for(;s>Math.PI;)s-=2*Math.PI;for(;s<-Math.PI;)s+=2*Math.PI;n=r.lastAngle+s,r.lastAngle=n;const a=n-r.initialAngle;i+=a}),i/=t.size||1,{angle:i,radius:e.radius,center:e.center}}function SWe(t){const e=new Map;return t.forEach((i,r)=>e.set(r,i.event)),e}function rD(t,e){const i=t.event,r=i.x-e.center.x,n=i.y-e.center.y;return Math.atan2(n,r)}let $We=class extends Ls{constructor(e={},i=xT){super(!1),this._clock=i,this._pointerState=new Map,this._parameters=hX(e),this._immediateDoubleClick=this.registerOutgoing("immediate-double-click"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUp.bind(this))}onUninstall(){this._pointerState.forEach(e=>{e.immediateDoubleClick&&e.immediateDoubleClick.timeoutHandle.remove()}),super.onUninstall()}_handlePointerDown(e){const i=e.data,r=ew(i);if(!this._pointerState.has(r)){const n={downButton:i.native.button,x:i.x,y:i.y,immediateDoubleClick:null};this._pointerState.set(r,n),this.startCapturingPointer(i.native)}}_handlePointerUp(e){const i=e.data,r=ew(i),n=this._pointerState.get(r);if(n&&n.downButton===i.native.button){const s=n.immediateDoubleClick,a=e.data.native.pointerType==="touch"?this._parameters.maximumDoubleTouchDistance:this._parameters.maximumDoubleClickDistance;s?(s.timeoutHandle.remove(),nz(s,e.data)>a?this._startImmediateDoubleClick(e,n):(this._immediateDoubleClick.emit(e.data,void 0,s.modifiers),this._removeState(i))):nz(n,e.data)>a?this._removeState(i):this._startImmediateDoubleClick(e,n)}}_startImmediateDoubleClick(e,i){const r=e.data.native.pointerType==="touch"?this._parameters.maximumDoubleTouchDelay:this._parameters.maximumDoubleClickDelay;i.immediateDoubleClick={x:e.data.x,y:e.data.y,modifiers:e.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(e.data),r)}}_removeState(e){const i=ew(e);this._pointerState.delete(i),this.stopCapturingPointer(e.native),this.refreshHasPendingInputs()}},TWe=class extends Ls{constructor(e={},i=xT){super(!1),this._clock=i,this._pointerState=new Map,this._parameters=vWe(e),this._pointerDrag=this.registerOutgoing("pointer-drag"),this._immediateClick=this.registerOutgoing("immediate-click"),this._pointerHold=this.registerOutgoing("hold"),this.registerIncoming("pointer-down",r=>this._handlePointerDown(r)),this.registerIncoming("pointer-up",r=>this._handlePointerLoss(r,"pointer-up")),this.registerIncoming("pointer-capture-lost",r=>this._handlePointerLoss(r,"pointer-capture-lost")),this.registerIncoming("pointer-cancel",r=>this._handlePointerLoss(r,"pointer-cancel")),this._moveHandle=this.registerIncoming("pointer-move",r=>this._handlePointerMove(r)),this._moveHandle.pause()}onUninstall(){this._pointerState.forEach(e=>{e.holdTimeout=Rr(e.holdTimeout)}),super.onUninstall()}_handlePointerDown(e){const i=e.data,r=i.native.pointerId;let n=null;this._pointerState.size===0&&(n=this._clock.setTimeout(()=>{const a=this._pointerState.get(r);if(a){if(!a.isDragging){const o=a.previousEvent;this._pointerHold.emit(o,void 0,e.modifiers),a.holdEmitted=!0}a.holdTimeout=null}},this._parameters.holdDelay));const s={startEvent:i,previousEvent:i,startTimestamp:e.timestamp,isDragging:!1,downButton:i.native.button,holdTimeout:n,modifiers:new Set};this._pointerState.set(r,s),this.startCapturingPointer(i.native),this._moveHandle.resume(),this._pointerState.size>1&&this._startDragging(e)}_handlePointerMove(e){const i=e.data,r=i.native.pointerId,n=this._pointerState.get(r);n&&(n.isDragging?this._pointerDrag.emit(EO("update",n,i),void 0,n.modifiers):bWe(i,n.startEvent)>this._getDragThreshold(i.native.pointerType)&&this._startDragging(e),n.previousEvent=i)}_getDragThreshold(e){switch(e){case"touch":return this._parameters.movementUntilTouchDrag;case"pen":return this._parameters.movementUntilPenDrag;default:return this._parameters.movementUntilMouseDrag}}_startDragging(e){const i=e.data,r=i.native.pointerId;this._pointerState.forEach(n=>{n.holdTimeout!=null&&(n.holdTimeout.remove(),n.holdTimeout=null),n.isDragging||(n.modifiers=e.modifiers,n.isDragging=!0,r===n.startEvent.native.pointerId?this._pointerDrag.emit(EO("start",n,i)):this._pointerDrag.emit(EO("start",n,n.previousEvent),e.timestamp))})}_handlePointerLoss(e,i){const r=e.data,n=r.native.pointerId,s=this._pointerState.get(n);s&&(s.holdTimeout!=null&&(s.holdTimeout.remove(),s.holdTimeout=null),s.isDragging?this._pointerDrag.emit(EO("end",s,i==="pointer-up"?r:s.previousEvent),void 0,s.modifiers):i==="pointer-up"&&s.downButton===r.native.button&&e.timestamp-s.startTimestamp<=this._parameters.maximumClickDelay&&!s.holdEmitted&&this._immediateClick.emit(r),this._pointerState.delete(n),this.stopCapturingPointer(r.native),this._pointerState.size===0&&this._moveHandle.pause())}};function EO(t,e,i){return{action:t,startEvent:e.startEvent,previousEvent:e.previousEvent,currentEvent:i}}let kWe=class extends Ls{constructor(e={},i=xT){super(!1),this._clock=i,this._pointerState=new Map,this._parameters=hX(e),this._click=this.registerOutgoing("click"),this._doubleClick=this.registerOutgoing("double-click"),this.registerIncoming("immediate-click",r=>this._handleImmediateClick(r)),this.registerIncoming("pointer-down",r=>this._handlePointerDown(r))}onUninstall(){this._pointerState.forEach(e=>e.doubleClickTimer=Rr(e.doubleClickTimer))}get hasPendingInputs(){for(const e of this._pointerState.values())if(e.doubleClickTimer!=null)return!0;return!1}_clearDoubleClickTimer(e,i){const r=this._pointerState.get(e);r&&(r.doubleClickTimer=Rr(r.doubleClickTimer),i&&this._click.emit(r.event.data,void 0,r.event.modifiers),this._pointerState.delete(e),this.refreshHasPendingInputs())}_doubleClickTimeoutExceeded(e){const i=this._pointerState.get(e);i.pointerDownCount===1&&this._click.emit(i.event.data,void 0,i.event.modifiers),i.doubleClickTimer=null,this._pointerState.delete(e),this.refreshHasPendingInputs()}_handleImmediateClick(e){const i=e.data,{pointerType:r}=i.native,n=EWe(i);if(!this._pointerState.has(n))return void this._startClick(e);const s=this._pointerState.get(n),{data:a,modifiers:o}=s.event,l=r==="touch"?this._parameters.maximumDoubleTouchDistance:this._parameters.maximumDoubleClickDistance;nz(a,i)>l?(this._clearDoubleClickTimer(n,!0),this._startClick(e)):(this._clearDoubleClickTimer(n,!1),s.pointerDownCount===2&&this._doubleClick.emit(a,void 0,o))}_handlePointerDown(e){const i=ew(e.data),r=this._pointerState.get(i);r&&(r.pointerDownCount+=1)}_startClick(e){const{data:i}=e,{native:{pointerType:r}}=i,n=ew(i),s=r==="touch"?this._parameters.maximumDoubleTouchDelay:this._parameters.maximumDoubleClickDelay,a=this._clock.setTimeout(()=>this._doubleClickTimeoutExceeded(n),s);this._pointerState.set(n,{event:e,doubleClickTimer:a,pointerDownCount:1}),this.refreshHasPendingInputs()}};function EWe(t){const{pointerId:e,pointerType:i,button:r}=t.native;return i==="mouse"?`${e}:${r}`:`${i}`}const CO={counter:"Control",pan:{left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},zoom:{zoomIn:["=","+"],zoomOut:["-","_"]},rotate:{clockwise:["a","A"],counterClockwise:["d","D"],reset:["n","N"]}},uae=Symbol("handles");let $x=class extends lt{initialize(){const e=()=>this.view?.ready;this.addHandles([as(()=>!e(),()=>this._disconnect()),as(e,()=>this._connect())])}destroy(){this._disconnect()}get latestPointerInfo(){return this._inputManager?.latestPointerInfo}get multiTouchActive(){return this._inputManager?.multiTouchActive??!1}isModifierKeyDown(e){return this._inputManager?.isModifierKeyDown(e)??!1}_disconnect(){this.view.viewEvents.disconnect(),this.removeHandles(uae),this._inputManager=Ir(this._inputManager)}_connect(){const e=this.view.surface,i=new gWe(e,this.view.input),r=[new $We,new TWe,new kWe,new xWe(this.view.navigation),new _We],n=new nd({eventSource:i,recognizers:r}),s=new cqe(this.view,["primary"]),a=new uqe(this.view,["secondary"]);n.installHandlers("prevent-context-menu",[new yWe],Vm.INTERNAL),n.installHandlers("navigation",[new oWe(this.view),new Kqe(this.view),new aWe(this.view),new rae(this.view),new rae(this.view,[CO.counter]),s,new iWe(this.view,CO.pan),new nWe(this.view,CO.zoom),new rWe(this.view,CO.rotate),a,new lqe(this.view,"touch")],Vm.INTERNAL),this.view.viewEvents.connect(n),this._source=i,this._inputManager=n,this.addHandles([ze(()=>this.view?.navigation?.browserTouchPanEnabled,o=>{this._source&&(this._source.browserTouchPanningEnabled=!o)},Di),ze(()=>{const{actionMap:o}=this.view.navigation;return{panActions:iae("pan",o),rotateActions:iae("rotate",o)}},({panActions:o,rotateActions:l})=>{s.pointerActions=o,a.pointerActions=l},Ta)],uae)}get test(){}};d([m()],$x.prototype,"view",void 0),d([m()],$x.prototype,"latestPointerInfo",null),d([m()],$x.prototype,"multiTouchActive",null),$x=d([U("esri.views.2d.input.MapViewInputManager")],$x);const CWe=$x,IWe=t=>{const e=t;let i=class extends e{constructor(...r){super(...r),this.goToManager=new iD({view:this}),this.animationsEnabled=!0,this.inputManager=new CWe({view:this}),this.addHandles([this.on("resize",n=>this.stateManager.resize(n.width,n.height))])}get interacting(){return this.navigating}get stationary(){return!this.animation&&!this.navigating&&!this.resizing&&this.stationaryManager.stationary}on(r,n,s,a){return this.viewEvents.on(r,n,s,a)||super.on(r,n)}hasEventListener(r){return super.hasEventListener(r)||this.viewEvents.hasHandler(r)}goTo(r,n){return this.goToManager.goTo(r,n)}toMap(r){if(!this.ready)return null;const n=Uwe(r)?Bwe(this,r):r;return this.stateManager.toMap(n)}};return d([m()],i.prototype,"goToManager",void 0),d([m({readOnly:!0})],i.prototype,"interacting",null),d([m()],i.prototype,"stationary",null),d([m()],i.prototype,"animationsEnabled",void 0),d([m({readOnly:!0})],i.prototype,"inputManager",void 0),i=d([U("esri.views.Viewport2DMixin")],i),i};let dae=class{constructor(e){this._view=e,this.viewpoint=new Os({targetGeometry:new gt,scale:0,rotation:0})}get view(){return this._view}get size(){const[e,i]=this._view.size;return Math.sqrt(e*e+i*i)}get scale(){return this.viewpoint.scale}get rotation(){return this.viewpoint.rotation}get center(){return this.viewpoint.targetGeometry}get scaleToResolutionFactor(){return h_e(this.center.spatialReference)}pixelsPerPanAtZoom(e){return 1/(e*this.scaleToResolutionFactor)}zoomAtPixelsPerPan(e){return 1/(e*this.scaleToResolutionFactor)}pixelsPerRotate(){return this.size/2}compareTo(e,i){i.pan=hye(this.center,e.center);let r=Math.abs(e.rotation-this.rotation);r=r>=180?360-r:r,i.rotate=_p(r),i.sourceZoom=this.scale,i.targetZoom=e.scale}interpolate(e,i,r){const{pan:n,rotate:s,zoom:a,zoomOffset:o}=r,{center:l}=this;l.spatialReference=e.center.spatialReference,l.x=Q2(e.center.x,i.center.x,n),l.y=Q2(e.center.y,i.center.y,n),this.viewpoint.scale=Q2(e.scale,i.scale+o,a);let c=e.rotation;const h=i.rotation;Math.abs(h-c)>=180&&(c+=360*(c<h?1:-1)),this.viewpoint.rotation=Q2(c,h,s)}copyFrom(e){uo(this.viewpoint,e.viewpoint),this._view=e.view}};function y2(t,e,i,r){const n=3*t,s=3*(i-t)-n,a=1-n-s,o=3*e,l=3*(r-e)-o,c=1-o-l;function h(b){return((a*b+s)*b+n)*b}function f(b){return((c*b+l)*b+o)*b}function g(b){return(3*a*b+2*s)*b+n}function y(b,_){let S,$,C,I,P,O;for(C=b,O=0;O<8;O++){if(I=h(C)-b,Math.abs(I)<_)return C;if(P=g(C),Math.abs(P)<1e-6)break;C-=I/P}if(S=0,$=1,C=b,C<S)return S;if(C>$)return $;for(;S<$;){if(I=h(C),Math.abs(I-b)<_)return C;b>I?S=C:$=C,C=.5*($-S)+S}return C}return function(b,_=1e-6){return f(y(b,_))}}const su={};su.ease=y2(.25,.1,.25,1),su.linear=y2(0,0,1,1),su.easeIn=su["ease-in"]=y2(.42,0,1,1),su.easeOut=su["ease-out"]=y2(0,0,.58,1),su.easeInOut=su["ease-in-out"]=y2(.42,0,.58,1);const MWe=t=>t,FI=t=>t*t,sz=t=>1-FI(1-t),hae=t=>t<.5?FI(2*t)/2:(sz(2*(t-.5))+1)/2,az=t=>t*t*t,CH=t=>1-az(1-t),pae=t=>t<.5?az(2*t)/2:(CH(2*(t-.5))+1)/2,oz=t=>t*t*t*t,IH=t=>1-oz(1-t),fae=t=>t<.5?oz(2*t)/2:(IH(2*(t-.5))+1)/2,lz=t=>t*t*t*t*t,MH=t=>1-lz(1-t),mae=t=>t<.5?lz(2*t)/2:(MH(2*(t-.5))+1)/2,cz=t=>1-Math.cos(t*Math.PI/2),AH=t=>1-cz(1-t),gae=t=>t<.5?cz(2*t)/2:(AH(2*(t-.5))+1)/2,uz=t=>2**(10*(t-1)),dz=t=>1-uz(1-t),yae=t=>t<.5?uz(2*t)/2:(dz(2*(t-.5))+1)/2,hz=t=>-(Math.sqrt(1-t*t)-1),PH=t=>1-hz(1-t),vae=t=>t<.5?hz(2*t)/2:(PH(2*(t-.5))+1)/2;function Tu(t){const e=2*(t-Math.sqrt((t-1)*t)),i=e/2/t;return r=>r<i?t*r*r:e*r-e+1}function ku(t,e){return(i,r)=>i<e?e*t(i/e,r):1-t((1-i)/(1-e),r)*(1-e)}const bae=ku(Tu(1),1),wae=ku(Tu(1),0),pz=ku(Tu(1),.5),_ae=ku(Tu(2),1),xae=ku(Tu(2),0),Sae=ku(Tu(2),.5),$ae=ku(Tu(3),1),Tae=ku(Tu(3),0),kae=ku(Tu(3),.5),Eae=ku(Tu(4),1),Cae=ku(Tu(4),0),Iae=ku(Tu(4),.5),Mae={linear:MWe,"in-quad":FI,"out-quad":sz,"in-out-quad":hae,"in-coast-quad":bae,"out-coast-quad":wae,"in-out-coast-quad":pz,"in-cubic":az,"out-cubic":CH,"in-out-cubic":pae,"in-coast-cubic":_ae,"out-coast-cubic":xae,"in-out-coast-cubic":Sae,"in-quart":oz,"out-quart":IH,"in-out-quart":fae,"in-coast-quart":$ae,"out-coast-quart":Tae,"in-out-coast-quart":kae,"in-quint":lz,"out-quint":MH,"in-out-quint":mae,"in-coast-quint":Eae,"out-coast-quint":Cae,"in-out-coast-quint":Iae,"in-sine":cz,"out-sine":AH,"in-out-sine":gae,"in-expo":uz,"out-expo":dz,"in-out-expo":yae,"in-circ":hz,"out-circ":PH,"in-out-circ":vae,"quad-in":FI,"quad-out":sz,"quad-in-out":hae,"quad-in-coast":bae,"quad-out-coast":wae,"quad-in-out-coast":pz,"cubic-in":az,"cubic-out":CH,"cubic-in-out":pae,"cubic-in-coast":_ae,"cubic-out-coast":xae,"cubic-in-out-coast":Sae,"quart-in":oz,"quart-out":IH,"quart-in-out":fae,"quart-in-coast":$ae,"quart-out-coast":Tae,"quart-in-out-coast":kae,"quint-in":lz,"quint-out":MH,"quint-in-out":mae,"quint-in-coast":Eae,"quint-out-coast":Cae,"quint-in-out-coast":Iae,"sine-in":cz,"sine-out":AH,"sine-in-out":gae,"expo-in":uz,"expo-out":dz,"expo-in-out":yae,"circ-in":hz,"circ-out":PH,"circ-in-out":vae,ease:t=>su.ease(t),"ease-in":t=>su.easeIn(t),"ease-out":t=>su.easeOut(t),"ease-in-out":t=>su.easeInOut(t)};let AWe=class{constructor(){this.pan=0,this.rotate=0,this.fov=0,this.sourceZoom=0,this.targetZoom=0}};const fz={desiredScreenFlow:2,minDuration:500,maxDuration:8e3},V_e={maxDuration:4e3};let PWe=class B_e{constructor(e){this._createCamera=e,this.compared=new AWe,this.segmentStart=0,this.segmentEnd=1,this.settings={desiredScreenFlow:fz.desiredScreenFlow},this.source=e(),this.target=e()}clone(){const e=new B_e(this._createCamera);return e.copyFrom(this),e}copyFrom(e){this.update(e.source,e.target,e.settings)}update(e,i,r){this.source!==e&&this.source.copyFrom(e),this.target!==i&&this.target.copyFrom(i),this.source.compareTo(this.target,this.compared),this.settings.desiredScreenFlow=r.desiredScreenFlow??fz.desiredScreenFlow,this.desiredPixelFlow=this.settings.desiredScreenFlow*this.target.size,this.halfWindowSize=this.target.size/2}halfWindowPanAtZoom(e){const i=this.target.pixelsPerPanAtZoom(e);return this.halfWindowSize/i}get hasZoom(){return Math.abs(this.compared.sourceZoom-this.compared.targetZoom)>1e-5}get hasPan(){return this.compared.pan>Vo()}get hasFov(){return Math.abs(this.compared.fov)>Vo()}get hasRotate(){return this.compared.rotate>Vo()}},OWe=class{constructor(){this.pan=0,this.rotate=0,this.zoom=0,this.fov=0,this.zoomOffset=0}},LWe=class{constructor(){this.segments=new Array}get time(){return this.segments.reduce((e,i)=>e+i.time,0)}interpolateComponentsAt(e,i){e=Math.min(Math.max(e,0),1),e*=this.time;let r=0,n=0;const s=this.definition,a=this.segments.reduce((o,l)=>o||l.definition.hasZoom,!1);for(let o=0;o<this.segments.length;o++){const l=this.segments[o],c=l.definition;if(e<=l.time||o===this.segments.length-1){if(this.segmentInterpolateComponentsAt(l,l.time===0?0:e/l.time,i),s.hasPan&&!isNaN(i.pan)&&isFinite(s.compared.pan)?i.pan=(r+c.compared.pan*i.pan)/s.compared.pan:i.pan=1,s.hasRotate&&!isNaN(i.rotate)&&isFinite(s.compared.rotate)?i.rotate=(n+c.compared.rotate*i.rotate)/s.compared.rotate:i.rotate=1,a&&!isNaN(i.zoom)&&isFinite(c.compared.targetZoom)){const{sourceZoom:h,targetZoom:f}=c.compared,g=i.zoom*(f-h)+h,y=this.segments[0].definition.compared.sourceZoom,b=this.segments[this.segments.length-1].definition.compared.targetZoom,_=Math.abs(f-y)>Math.abs(h-y)?f:h;i.zoomOffset=_-b,i.zoom=(g-y)/(_-y)}else i.zoom=1;return i}e-=l.time,r+=c.compared.pan,n+=c.compared.rotate}}segmentInterpolateComponentsAt(e,i,r){e.interpolateComponentsAt(i,r)}},sB=class{get time(){return this._time}constructor(e){e&&this.update(e)}update(e){e&&(this.definition?this.definition.copyFrom(e):this.definition=e.clone()),this._updatePrecomputedVariables(),this._updatePixelFlow()}_updatePrecomputedVariables(){const e=this.definition,i=e.compared,r=i.sourceZoom,n=i.targetZoom;this._zoomSign=r>n?1:-1,this._panPixelsAtSource=i.pan*e.source.pixelsPerPanAtZoom(r);const s=(e.source.pixelsPerRotate()+e.target.pixelsPerRotate())/2;this._rotatePixels=i.rotate*s}_updatePixelFlow(){const e=this.definition.compared.sourceZoom,i=this.definition.compared.targetZoom,{hasZoom:r,hasPan:n,hasRotate:s}=this.definition;let a=0,o=0;r&&(n&&(a=(i/e-1)/(-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2*this._panPixelsAtSource)),s&&(o=this._zoomSign*(Math.log(e/i)/Math.LN2)*this.definition.halfWindowSize/this._rotatePixels)),this._zoomPixelFlow=0,this._panPixelFlow=0,this._rotatePixelFlow=0;const l=this.definition.desiredPixelFlow;if(r&&n&&s){const c=a+o+a*o;this._zoomPixelFlow=a*o/c*l,this._panPixelFlow=o/c*l,this._rotatePixelFlow=a/c*l}else if(r&&n){const c=1+a;this._zoomPixelFlow=a/c*l,this._panPixelFlow=1/c*l}else if(r&&s){const c=1+o;this._zoomPixelFlow=o/c*l,this._rotatePixelFlow=1/c*l}else if(n&&s){const c=this._panPixelsAtSource/this._rotatePixels,h=1+c;this._panPixelFlow=c/h*l,this._rotatePixelFlow=1/h*l}else n?this._panPixelFlow=l:r?this._zoomPixelFlow=l:s&&(this._rotatePixelFlow=l);if(this._time=Math.max(this.rotateTime,this.zoomTime,this.panTime),this.fovTime>this._time){const c=this.fovTime/this._time;this._time=this.fovTime,this._zoomPixelFlow/=c,this._panPixelFlow/=c,this._rotatePixelFlow/=c}}get rotateTime(){return this.definition.hasRotate?this._rotatePixels/this._rotatePixelFlow:0}get zoomTime(){return this.definition.hasZoom?this._zoomSign*(Math.log(this.definition.compared.sourceZoom/this.definition.compared.targetZoom)/Math.LN2)*this.definition.halfWindowSize/this._zoomPixelFlow:0}get fovTime(){return this.definition.hasFov?Math.abs(this.definition.compared.fov)/DWe:0}get panTime(){if(!this.definition.hasPan)return 0;if(this.definition.hasZoom){const e=-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2,i=e*this._panPixelsAtSource;return Math.log(i*(this._zoomPixelFlow/this._panPixelFlow)+1)/(e*this._zoomPixelFlow)}return this._panPixelsAtSource/this._panPixelFlow}_interpolateComponentsZoom(e){if(e===0||e===1)return e;if(this.definition.hasZoom){const i=this.definition.compared.sourceZoom,r=this.definition.compared.targetZoom;return(i*(i/r)**-e-i)/(r-i)}return e}_interpolateComponentsFov(e){if(e===0)return this.definition.segmentStart;if(e===1)return this.definition.segmentEnd;if(this.definition.hasFov){const{segmentStart:i,segmentEnd:r}=this.definition;return i+e*(r-i)}return this.definition.segmentStart}_interpolateComponentsPan(e){if(e===0||e===1)return e;if(this.definition.hasPan&&this.definition.hasZoom){const i=-1/(this._zoomSign*this.definition.halfWindowSize)*this._zoomPixelFlow;return 1/this._panPixelsAtSource*(this._panPixelFlow*(2**(i*e*this._time)-1))/(i*Math.LN2)}return e}_interpolateComponentsRotate(e){return e}interpolateComponentsAt(e,i){e=Math.min(Math.max(e,0),1),i.zoom=this._interpolateComponentsZoom(e),i.pan=this._interpolateComponentsPan(e),i.rotate=this._interpolateComponentsRotate(e),i.zoomOffset=0,i.fov=this._interpolateComponentsFov(e)}};const DWe=_p(45);function RWe(t,e,i){const r=e-t.compared.sourceZoom,n=t.halfWindowPanAtZoom(r);return-t.halfWindowSize*(i.ascensionFactor*Math.LN2*t.compared.pan+n)*Math.log(t.compared.sourceZoom/e)/(t.desiredPixelFlow*Math.LN2*n)}function zWe(t,e,i){const r=1/e,n=Math.log(t.compared.sourceZoom*r),s=1/t.desiredPixelFlow,a=1/Math.LN2,o=e-t.compared.sourceZoom,l=1/o,c=(i.ascensionFactor*Math.LN2*t.compared.pan+t.halfWindowPanAtZoom(o))/t.halfWindowPanAtZoom(1);return t.halfWindowSize*r*s*a*l*c-t.halfWindowSize*n*s*a*l+t.halfWindowSize*n*s*a*c/(o*o)}function FWe(t,e,i){const r=e-t.compared.sourceZoom,n=1/r,s=1/e,a=Math.log(t.compared.sourceZoom*s),o=(i.ascensionFactor*Math.LN2*t.compared.pan+t.halfWindowPanAtZoom(r))/t.halfWindowPanAtZoom(1);return t.halfWindowSize*n*(-2*n*s*o+2*n*a+2*s-2*a*o/(r*r)-o/(e*e))/(t.desiredPixelFlow*Math.LN2)}function NWe(t,e){return-t.halfWindowSize*Math.log(t.compared.sourceZoom/e)/(t.desiredPixelFlow*Math.LN2)}function jWe(t,e){return t.halfWindowSize/(e*t.desiredPixelFlow*Math.LN2)}function VWe(t,e){return-t.halfWindowSize/(e*e*t.desiredPixelFlow*Math.LN2)}function BWe(t,e,i){return-t.compared.pan*t.halfWindowSize*(i.ascensionFactor+i.descensionFactor-1)/(t.desiredPixelFlow*t.halfWindowPanAtZoom(e))}function UWe(t,e,i){return t.compared.pan*t.halfWindowSize*(i.ascensionFactor+i.descensionFactor-1)/(t.desiredPixelFlow*t.halfWindowPanAtZoom(e*e))}function HWe(t,e,i){return-2*t.compared.pan*t.halfWindowSize*(i.ascensionFactor+i.descensionFactor-1)/(t.desiredPixelFlow*t.halfWindowPanAtZoom(e*e*e))}function GWe(t,e,i){return t.halfWindowSize*(-t.halfWindowPanAtZoom(e)-i.descensionFactor*Math.LN2*t.compared.pan+t.halfWindowPanAtZoom(t.compared.targetZoom))*Math.log(e/t.compared.targetZoom)/(t.desiredPixelFlow*Math.LN2*t.halfWindowPanAtZoom(-e+t.compared.targetZoom))}function qWe(t,e,i){const r=Math.log(e/t.compared.targetZoom),n=1/t.desiredPixelFlow,s=1/Math.LN2,a=-e+t.compared.targetZoom,o=1/a,l=(-t.halfWindowPanAtZoom(e)-i.descensionFactor*Math.LN2*t.compared.pan+t.halfWindowPanAtZoom(t.compared.targetZoom))/t.halfWindowPanAtZoom(1);return-t.halfWindowSize*r*n*s*o+t.halfWindowSize*r*n*s*l/(a*a)+t.halfWindowSize*n*s*o*l/e}function WWe(t,e,i){const r=e-t.compared.targetZoom,n=1/r,s=1/e,a=Math.log(e/t.compared.targetZoom),o=(t.halfWindowPanAtZoom(e)+i.descensionFactor*Math.LN2*t.compared.pan-t.halfWindowPanAtZoom(t.compared.targetZoom))/t.halfWindowPanAtZoom(1);return t.halfWindowSize*n*(-2*n*s*o-2*n*a+2*s+2*a*o/(r*r)-o/(e*e))/(t.desiredPixelFlow*Math.LN2)}function YWe(t,e){return t.halfWindowSize*Math.log(e/t.compared.targetZoom)/(t.desiredPixelFlow*Math.LN2)}function ZWe(t,e){return t.halfWindowSize/(e*t.desiredPixelFlow*Math.LN2)}function XWe(t,e){return-t.halfWindowSize/(e*e*t.desiredPixelFlow*Math.LN2)}function JWe(t){const e=t.compared.sourceZoom-t.compared.targetZoom;if(e===0)return t.compared.pan*t.halfWindowSize/(t.desiredPixelFlow*t.halfWindowPanAtZoom(t.compared.sourceZoom));const i=Math.LN2*t.compared.pan,r=e,n=t.halfWindowPanAtZoom(r),s=t.halfWindowSize*Math.log(t.compared.sourceZoom/t.compared.targetZoom)/(t.desiredPixelFlow*Math.LN2*n);return t.compared.sourceZoom<=t.compared.targetZoom?s*(i-n):s*(i+n)}function KWe(t,e){let i=QWe(t,e);const r={ascensionFactor:e.ascensionFactor!=null?e.ascensionFactor:.5,descensionFactor:e.descensionFactor!=null?e.descensionFactor:.5},n=r.ascensionFactor===0,s=r.descensionFactor===0,a=n?NWe:RWe,o=n?jWe:zWe,l=n?VWe:FWe,c=s?YWe:GWe,h=s?ZWe:qWe,f=s?XWe:WWe,g=O=>a(t,O,r)+BWe(t,O,r)+c(t,O,r),y=O=>o(t,O,r)+UWe(t,O,r)+h(t,O,r),b=O=>l(t,O,r)+HWe(t,O,r)+f(t,O,r);let _=g(i);const S=JWe(t);let $;const C=e.maximumIterations||20,I=e.maximumDistance!=null?e.maximumDistance:1/0;for($=0;$<C;$++){const O=e.desiredSlope??1e-6;let N=y(i);Math.abs(N)>O&&(N+=O);const R=N/b(i);if(isNaN(R)||i>=I&&R<0){if(!isFinite(I))return null;i=I,_=g(i);break}if(i-=R,i<=t.compared.sourceZoom||i<=t.compared.targetZoom)return null;const G=g(i);if(Math.abs(G-_)/_<=.005)break;_=G}return isNaN(_)||_>S*(1-.3)||i<=t.compared.sourceZoom||i<=t.compared.targetZoom?null:i}function QWe(t,e){const i=Math.max(t.compared.sourceZoom,t.compared.targetZoom),r=t.source.zoomAtPixelsPerPan(t.desiredPixelFlow/t.compared.pan)/2;return r<i?e.maximumDistance!=null?i+(e.maximumDistance-i)/2:1.5*i:e.maximumDistance?Math.min(e.maximumDistance,r):r}let eYe=class extends LWe{constructor(e,i){super(),this._preallocSegments=[new sB,new sB,new sB],this._ascensionSegment=null,this._descensionSegment=null,this.update(e,i)}update(e,i){if(!e)return;this.definition?this.definition.copyFrom(e):this.definition=e.clone();const r=i?.apex?KWe(e,i.apex):null;this.segments.length=0,this._ascensionSegment=null,this._descensionSegment=null,r?this._updateWithApex(r,i?.apex):this._updateWithoutApex()}segmentInterpolateComponentsAt(e,i,r){e.interpolateComponentsAt(i,r),e===this._ascensionSegment?r.zoom=sz(r.zoom):e===this._descensionSegment&&(r.zoom=FI(r.zoom))}_updateWithApex(e,i){const[r,n,s]=this._preallocSegments,a=i?.ascensionFactor??.5,o=Math.min(1-a,i?.ascensionFactor!=null&&i.descensionFactor!=null?i.descensionFactor:.5),l=1-a-o;r.definition?r.definition.copyFrom(this.definition):r.definition=this.definition.clone(),r.definition.compared.targetZoom=e,r.definition.compared.pan=this.definition.compared.pan*a,r.definition.compared.rotate=this.definition.compared.rotate*a,r.definition.segmentEnd=a,r.update(),this._ascensionSegment=r,this.segments.push(r),l>0&&(n.definition?n.definition.copyFrom(this.definition):n.definition=this.definition.clone(),n.definition.copyFrom(this.definition),n.definition.compared.sourceZoom=e,n.definition.compared.targetZoom=e,n.definition.compared.pan=this.definition.compared.pan*l,n.definition.compared.rotate=this.definition.compared.rotate*l,n.definition.segmentStart=r.definition.segmentEnd,n.definition.segmentEnd=r.definition.segmentEnd+l,n.update(),this.segments.push(n)),s.definition?s.definition.copyFrom(this.definition):s.definition=this.definition.clone(),s.definition.compared.sourceZoom=e,s.definition.compared.pan=this.definition.compared.pan*o,s.definition.compared.rotate=this.definition.compared.rotate*o,s.definition.segmentStart=a+l,s.update(),this._descensionSegment=s,this.segments.push(s)}_updateWithoutApex(){const[e]=this._preallocSegments;e.update(this.definition),this.segments.push(e)}};const tYe=new OWe;let iYe=class{get time(){return this._time}get isLinear(){return this.path.segments.length===1}constructor(e){this._time=0,this._easing=pz,this.definition=new PWe(e),this.path=new eYe}update(e,i,r){this.definition.update(e,i,r),this.path.update(this.definition,r),this._time=this._applyTimeSettings(qMe(isFinite(this.path.time)?this.path.time:0),r),this._easing=r.easing??(this._time>=1e3?pz:dz)}cameraAt(e,i){e=Math.min(Math.max(0,e),1),e=this._normalizedEasing(e);const r=this.path.interpolateComponentsAt(e,tYe);i.interpolate(this.definition.source,this.definition.target,r)}_normalizedEasing(e){const i=this._easing(0,this._time),r=this._easing(1,this._time);return(this._easing(e,this._time)-i)/(r-i)}_applyTimeSettings(e,i){const r=i.speedFactor!=null?i.speedFactor:1,n=i.minDuration??fz.minDuration/r,s=i.maxDuration??fz.maxDuration/r;return e=i.duration!=null?i.duration:Math.min(Math.max(e/r,n),s)}};const rYe=2e3,nYe=64;let sYe=class{constructor(e){this._view=e,this._animation=new iYe(()=>new dae(this._view)),this._current=new dae(this._view)}get _source(){return this._animation.definition.source}get _target(){return this._animation.definition.target}get duration(){return this._animation.time}get animation(){return this._animation}update(e,i,r={}){uo(this._current.viewpoint,e),uo(this._source.viewpoint,e),uo(this._target.viewpoint,i),this._animation.update(this._source,this._target,r)}applyRatio(e,i){this._animation.cameraAt(i,this._current),uo(e,this._current.viewpoint)}},Tx=class extends lt{constructor(e){super(e),this._animation=null,this._destinationViewState=new uX,this.updateFunction=null,this.easing=Mae.ease,this.viewpoint=new Os({targetGeometry:new gt,scale:0,rotation:0}),this._updateTask=z$({postRender:this._postRender.bind(this)}),this._updateTask.pause(),this._transition=new sYe(e.view)}destroy(){this._updateTask=Rr(this._updateTask)}get animation(){return this._animation}set animation(e){this._animation=e,this.view.animation=e}animate(e,i,r){this.stop();const n=this.viewpoint;uo(n,i);const s=e.target;this._transition.update(this.viewpoint,s,{apex:{maximumDistance:Math.min(Math.min(i.scale,s.scale)*nYe,this.view.constraints.effectiveMinScale),desiredSlope:5e-8},duration:r?.duration,maxDuration:r?.animationMode==="auto"?1/0:r?.maxDuration??V_e.maxDuration,speedFactor:r?.speedFactor,easing:(typeof r?.easing=="string"?Mae[r.easing]:r?.easing)||this.easing}),r?.animationMode==="auto"&&(this._destinationViewState.copy(this.view.state),this._destinationViewState.viewpoint=s,aYe(this._transition.animation,r,this.view.state,this._destinationViewState)||this._transition.update(this.viewpoint,s,{duration:0}));const a=()=>{this.animation===e&&this._updateTask&&(e.state==="finished"&&(this._transition.applyRatio(this.viewpoint,1),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null)};return e.when(a,a),this._startTime=performance.now(),this._updateTask.resume(),this.animation=e,e}animateContinuous(e,i){this.stop(),this.updateFunction=i,this.viewpoint=e;const r=new kH({target:e.clone()}),n=()=>{this.animation===r&&this._updateTask&&(this.animation=null,this.updateFunction=null)};return r.when(n,n),this._startTime=performance.now(),this._updateTask.resume(),this.animation=r,r}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}_postRender(e){const i=this.animation;if(i&&i.state!==kH.state.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,e.deltaTime),this.animation?.update(this.viewpoint);else{const r=performance.now()-this._startTime,n=this._transition.duration,s=n>0?r/n:1,a=s>=1;this._transition.applyRatio(this.viewpoint,s),a&&this.animation?.finish()}this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};function aYe(t,e,i,r){if(e?.duration!=null)return!0;const{time:n,isLinear:s}=t,a=e?.speedFactor||1;if(n>(e?.maxDuration??V_e.maxDuration/a))return!1;if(s){const l=Tn(),c=Ps(...r.toScreen(l,...i.center)),h=Ps(...i.toScreen(l,...r.center)),f=h!=null&&h.x>-1*i.size[0]&&h.x<(1.5+.5)*i.size[0]&&h.y>-1*i.size[1]&&h.y<(1.5+.5)*i.size[1],g=c!=null&&c.x>-1*r.size[0]&&c.x<(1.5+.5)*r.size[0]&&c.y>-1*r.size[1]&&c.y<(1.5+.5)*r.size[1];if(n>rYe/a&&!f&&!g)return!1}return!0}d([m()],Tx.prototype,"easing",void 0),d([m()],Tx.prototype,"view",void 0),d([m()],Tx.prototype,"viewpoint",void 0),Tx=d([U("esri.views.2d.AnimationManager")],Tx);const oYe=Tx;function jr(){return Promise.all([fe(()=>import("./webglDeps-CmjNAB84.js"),__vite__mapDeps([171,138,172,173,174,39])),fe(()=>import("./mapViewDeps-_ChtFB2J.js"),__vite__mapDeps([175,176,177,138,172,173,129,68,178,70,174,39,137,38,179,67,91,180,118,121,17,15,18,71,76,181,73,74,171,182,86,183,184,117,185,127,128,56,66,69,22,21,186,75,187,72,144,145,81,188,77,83,189,64,190,191,192,193,134,194,195]))])}const v2=()=>jr().then(()=>fe(()=>import("./TileLayerView2D-DHBKi7Am.js"),__vite__mapDeps([196,180,179,67,38,173,174,39,137,138,91,118,121,17,15,18,182,177,172,129,178,70,86,183,184,117,56,176,68,71,76,73,74,127,128,188,66,69,22,21,77,83,189,64,197,198,199,193,200,201,191,192,202,203,204,205,206,207]))),Tb=()=>jr().then(()=>fe(()=>import("./FeatureLayerView2D-Bbcjj8hK.js").then(t=>t.F),__vite__mapDeps([208,189,17,15,18,209,210,211,22,29,200,180,192,68,67,38,172,138,193,179,173,174,39,137,91,118,121,176,177,129,178,70,71,76,86,57,55,56,84,77,181,212,142,31,79,206,202,203,207]))),Aae={"base-dynamic":()=>jr().then(()=>fe(()=>import("./BaseDynamicLayerView2D-DElvO6QF.js"),__vite__mapDeps([213,214,179,67,38,173,174,39,137,138,91,180,118,121,17,15,18,198,177,172,129,199,200,215,202,203]))),"base-tile":v2,"bing-maps":v2,catalog:()=>jr().then(()=>fe(()=>import("./CatalogLayerView2D-BKWD18bf.js"),__vite__mapDeps([216,200,180,202]))),"catalog-dynamic-group":()=>jr().then(()=>fe(()=>import("./CatalogDynamicGroupLayerView2D-Ca-Mm-Ye.js"),__vite__mapDeps([217,200,180,202]))),"catalog-footprint":()=>jr().then(()=>fe(()=>import("./CatalogFootprintLayerView2D-BenGqSR9.js"),__vite__mapDeps([218,208,189,17,15,18,209,210,211,22,29,200,180,192,68,67,38,172,138,193,179,173,174,39,137,91,118,121,176,177,129,178,70,71,76,86,57,55,56,84,77,181,212,142,31,79,206,202,203,207]))),csv:Tb,"geo-rss":()=>jr().then(()=>fe(()=>import("./GeoRSSLayerView2D-CYetqTji.js"),__vite__mapDeps([219,200,180,190,191,192,68,67,38,172,138,193,179,173,174,39,137,91,118,121,17,15,18,176,177,129,178,70,71,76,188,66,69,22,21,77,83,189,64,202]))),feature:Tb,geojson:Tb,parquet:Tb,graphics:()=>jr().then(()=>fe(()=>import("./GraphicsLayerView2D-BGCN5DEH.js"),__vite__mapDeps([220,200,180,190,191,192,68,67,38,172,138,193,179,173,174,39,137,91,118,121,17,15,18,176,177,129,178,70,71,76,188,66,69,22,21,77,83,189,64,202,207]))),group:()=>jr().then(()=>fe(()=>import("./GroupLayerView2D-D_gRdoG4.js"),__vite__mapDeps([221,200,180,202]))),imagery:()=>jr().then(()=>fe(()=>import("./ImageryLayerView2D-BERFEy55.js"),__vite__mapDeps([222,223,174,39,137,138,38,105,179,67,173,91,180,118,121,17,15,18,100,98,200,188,66,68,69,70,22,21,176,177,172,129,178,71,76,77,83,189,64,201,191,192,193,214,198,199,215,103,169,209,206,202,203,207]))),"imagery-tile":()=>jr().then(()=>fe(()=>import("./ImageryTileLayerView2D-CuJ5F52p.js"),__vite__mapDeps([224,225,223,174,39,137,138,38,105,179,67,173,91,180,118,121,17,15,18,100,98,200,102,226,193,177,172,129,187,178,70,199,227,103,207,169,209,206,202,203]))),kml:()=>jr().then(()=>fe(()=>import("./KMLLayerView2D-DuW892w7.js"),__vite__mapDeps([228,229,198,180,177,138,172,173,129,199,214,179,67,38,174,39,137,91,118,121,17,15,18,200,190,191,192,68,193,176,178,70,71,76,188,66,69,22,21,77,83,189,64,202,144,145,81,103,185,171,127,128,183,226]))),"knowledge-graph":()=>jr().then(()=>fe(()=>import("./KnowledgeGraphLayerView2D-B9wDtHYY.js"),__vite__mapDeps([230,200,180,202]))),"link-chart":()=>jr().then(()=>fe(()=>import("./KnowledgeGraphLayerView2D-B9wDtHYY.js"),__vite__mapDeps([230,200,180,202]))),"knowledge-graph-sublayer":Tb,"map-image":()=>jr().then(()=>fe(()=>import("./MapImageLayerView2D-CAuuPrt3.js"),__vite__mapDeps([231,214,179,67,38,173,174,39,137,138,91,180,118,121,17,15,18,198,177,172,129,199,200,188,66,68,69,70,22,21,176,178,71,76,77,83,189,64,201,191,192,193,215,202,209,203,204,205,206,207]))),"map-notes":()=>jr().then(()=>fe(()=>import("./MapNotesLayerView2D-3__sDZNE.js"),__vite__mapDeps([232,200,180,190,191,192,68,67,38,172,138,193,179,173,174,39,137,91,118,121,17,15,18,176,177,129,178,70,71,76,188,66,69,22,21,77,83,189,64,202,207]))),media:()=>jr().then(()=>fe(()=>import("./MediaLayerView2D-DI6M83Y8.js"),__vite__mapDeps([233,234,83,180,179,67,38,173,174,39,137,138,91,118,121,17,15,18,182,177,172,129,178,70,86,183,184,117,56,176,68,71,76,73,74,127,128,188,66,69,22,21,77,189,64,186,75,235,187,200,202]))),"ogc-feature":()=>jr().then(()=>fe(()=>import("./OGCFeatureLayerView2D-Rsk7Ua0m.js"),__vite__mapDeps([236,208,189,17,15,18,209,210,211,22,29,200,180,192,68,67,38,172,138,193,179,173,174,39,137,91,118,121,176,177,129,178,70,71,76,86,57,55,56,84,77,181,212,142,31,79,206,202,203,207]))),"open-street-map":v2,"oriented-imagery":Tb,route:()=>jr().then(()=>fe(()=>import("./RouteLayerView2D-DIfk79Ci.js"),__vite__mapDeps([237,238,239,200,180,190,191,192,68,67,38,172,138,193,179,173,174,39,137,91,118,121,17,15,18,176,177,129,178,70,71,76,188,66,69,22,21,77,83,189,64,202,207]))),stream:()=>jr().then(()=>fe(()=>import("./StreamLayerView2D-B5FzBV8f.js"),__vite__mapDeps([240,208,189,17,15,18,209,210,211,22,29,200,180,192,68,67,38,172,138,193,179,173,174,39,137,91,118,121,176,177,129,178,70,71,76,86,57,55,56,84,77,181,212,142,31,79,206,202,203,207]))),"subtype-group":()=>jr().then(()=>fe(()=>import("./SubtypeGroupLayerView2D-BaXmbv2M.js"),__vite__mapDeps([241,208,189,17,15,18,209,210,211,22,29,200,180,192,68,67,38,172,138,193,179,173,174,39,137,91,118,121,176,177,129,178,70,71,76,86,57,55,56,84,77,181,212,142,31,79,206,202,203,207]))),tile:v2,"vector-tile":()=>jr().then(()=>fe(()=>import("./VectorTileLayerView2D-FXFkBxQA.js"),__vite__mapDeps([242,56,117,184,118,138,174,39,137,179,67,38,173,91,180,121,17,15,18,193,20,119,120,200,202,203]))),video:()=>jr().then(()=>fe(()=>import("./VideoLayerView2D-DhWqs4vl.js"),__vite__mapDeps([243,244,245,235,91,179,67,38,173,174,39,137,138,180,118,121,17,15,18,176,177,172,129,68,178,70,71,76,187,246,200,190,191,192,193,188,66,69,22,21,77,83,189,64,202]))),wcs:()=>jr().then(()=>fe(()=>import("./ImageryTileLayerView2D-CuJ5F52p.js"),__vite__mapDeps([224,225,223,174,39,137,138,38,105,179,67,173,91,180,118,121,17,15,18,100,98,200,102,226,193,177,172,129,187,178,70,199,227,103,207,169,209,206,202,203]))),"web-tile":v2,wfs:Tb,wms:()=>jr().then(()=>fe(()=>import("./WMSLayerView2D-YcErkpKU.js"),__vite__mapDeps([247,214,179,67,38,173,174,39,137,138,91,180,118,121,17,15,18,198,177,172,129,199,200,215,202,203,248,209]))),wmts:()=>jr().then(()=>fe(()=>import("./WMTSLayerView2D-DDENDYII.js"),__vite__mapDeps([249,197,198,180,177,138,172,173,129,199,179,67,38,174,39,137,91,118,121,17,15,18,193,200,202,203]))),"base-elevation":null,"building-scene":null,dimension:null,elevation:null,"gaussian-splat":null,"integrated-mesh-3dtiles":null,"integrated-mesh":null,"line-of-sight":null,"point-cloud":null,scene:null,unknown:null,unsupported:null,viewshed:null,voxel:null};function lYe(t){const e=t.declaredClass?t.declaredClass.slice(t.declaredClass.lastIndexOf(".")+1):"Unknown",i=e.replaceAll(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new ee(`${i}:view-not-supported`,`${e} is not supported in 2D`)}const Pae={hasLayerViewModule:t=>Aae[t.type]!=null,importLayerView:t=>{const e=Aae[t.type];if(e==null)throw lYe(t);return e(t)}};var hc;let GT=(hc=class{static getId(e,i,r,n){return typeof e=="object"?`${e.level}/${e.row}/${e.col}/${e.world}`:`${e}/${i}/${r}/${n}`}constructor(e,i,r,n){this.set(e,i,r,n)}get key(){return this}get id(){return this.toString()}get normalizedId(){return`${this.level}/${this.row}/${this.col}`}set id(e){this.set(e)}get hash(){const e=4095&this.row,i=4095&this.col,r=63&this.level;return(3&this.world)<<30|i<<22|e<<8|r}acquire(e,i,r,n){this.set(e,i,r,n)}contains(e){const i=e.level-this.level;return i>=0&&this.row===e.row>>i&&this.col===e.col>>i&&this.world===e.world}containsChild(e){const i=e.level-this.level;return i>0&&this.row===e.row>>i&&this.col===e.col>>i&&this.world===e.world}equals(e){return this.level===e.level&&this.row===e.row&&this.col===e.col&&this.world===e.world}clone(){return new hc(this)}release(){this.level=0,this.row=0,this.col=0,this.world=0}set(e,i,r,n){if(e==null)this.level=0,this.row=0,this.col=0,this.world=0;else if(typeof e=="object")this.level=e.level||0,this.row=e.row||0,this.col=e.col||0,this.world=e.world||0;else if(typeof e=="string"){const[s,a,o,l]=e.split("/");this.level=parseFloat(s),this.row=parseFloat(a),this.col=parseFloat(o),this.world=parseFloat(l)}else this.level=+e,this.row=+i,this.col=+r,this.world=+n||0;return this}toString(){return`${this.level}/${this.row}/${this.col}/${this.world}`}getParentKey(){return this.level<=0?null:new hc(this.level-1,this.row>>1,this.col>>1,this.world)}getNormalizedNeighbor(e,i,r){const n=this.clone();return n.col+=e,n.row+=i,r.normalizeKey(n),n}getChildKeys(){const e=this.level+1,i=this.row<<1,r=this.col<<1,n=this.world;return[new hc(e,i,r,n),new hc(e,i,r+1,n),new hc(e,i+1,r,n),new hc(e,i+1,r+1,n)]}compareRowMajor(e){return this.row<e.row?-1:this.row>e.row?1:this.col<e.col?-1:this.col>e.col?1:0}},hc.pool=new u_(()=>new hc(""),null,null,25,50),hc);function I1(t,e){return[t,e]}function kb(t,e,i){return t[0]=e,t[1]=i,t}function cYe(t,e,i,r,n){return t[0]=e,t[1]=i,t[2]=r,t[3]=n,t}const Zu=new GT("0/0/0/0");let uYe=class U_e{static create(e,i,r=null){const n=No(e.spatialReference),s=i.origin||I1(e.origin.x,e.origin.y),a=I1(e.size[0]*i.resolution,e.size[1]*i.resolution),o=I1(-1/0,-1/0),l=I1(1/0,1/0),c=I1(1/0,1/0);r!=null&&(kb(o,Math.max(0,Math.floor((r.xmin-s[0])/a[0])),Math.max(0,Math.floor((s[1]-r.ymax)/a[1]))),kb(l,Math.max(0,Math.floor((r.xmax-s[0])/a[0])),Math.max(0,Math.floor((s[1]-r.ymin)/a[1]))),kb(c,l[0]-o[0]+1,l[1]-o[1]+1));const{cols:h,rows:f}=i;let g,y,b,_;return!r&&h&&f&&(kb(o,h[0],f[0]),kb(l,h[1],f[1]),kb(c,h[1]-h[0]+1,f[1]-f[0]+1)),e.isWrappable?(g=I1(Math.ceil(Math.round((n.valid[1]-n.valid[0])/i.resolution)/e.size[0]),c[1]),y=!0,b=n.origin,_=n.valid):(g=c,y=!1),new U_e(i.level,i.resolution,i.scale,s,o,l,c,a,g,y,b,_)}constructor(e,i,r,n,s,a,o,l,c,h,f,g){this.level=e,this.resolution=i,this.scale=r,this.origin=n,this.first=s,this.last=a,this.size=o,this.norm=l,this.worldSize=c,this.wrap=h,this._spatialReferenceOrigin=f,this._spatialReferenceValid=g}normalizeCol(e){if(!this.wrap)return e;const i=this.worldSize[0];return e<0?i-1-Math.abs((e+1)%i):e%i}normalizeKey(e){if(!this.wrap)return;const i=this.worldSize[0],r=e.col;r<0?(e.col=r+i,e.world-=1):r>=i&&(e.col=r-i,e.world+=1)}denormalizeCol(e,i){return this.wrap?this.worldSize[0]*i+e:e}getWorldForColumn(e){return this.wrap?Math.floor(e/this.worldSize[0]):0}getFirstColumnForWorld(e){return e*this.worldSize[0]+this.first[0]}getLastColumnForWorld(e){return e*this.worldSize[0]+this.first[0]+this.size[0]-1}getColumnForX(e){return(e-this.origin[0])/this.norm[0]}getXForColumn(e){const i=this.origin[0]+e*this.norm[0],r=this._spatialReferenceOrigin,n=this._spatialReferenceValid;return this.wrap&&r&&n?i===r[0]?n[0]:this.origin[0]===r[0]&&e===this.worldSize[0]?n[1]:i:i}getRowForY(e){return(this.origin[1]-e)/this.norm[1]}getYForRow(e){return this.origin[1]-e*this.norm[1]}getTileBounds(e,i,r=!1){Zu.set(i);const n=r?Zu.col:this.denormalizeCol(Zu.col,Zu.world),s=Zu.row;return cYe(e,this.getXForColumn(n),this.getYForRow(s+1),this.getXForColumn(n+1),this.getYForRow(s)),e}getTileCoords(e,i,r=!1){Zu.set(i);const n=r?Zu.col:this.denormalizeCol(Zu.col,Zu.world);return Array.isArray(e)?kb(e,this.getXForColumn(n),this.getYForRow(Zu.row)):(e.x=this.getXForColumn(n),e.y=this.getYForRow(Zu.row)),e}};var dw;let pX=(dw=class{constructor(){this.spans=[]}acquire(e){this.lodInfo=e}release(){this.lodInfo=null,this.spans.length=0}*keys(){const e=this.lodInfo;for(const{row:i,colFrom:r,colTo:n}of this.spans)for(let s=r;s<=n;s++){const a=e.getWorldForColumn(s);yield new GT(e.level,i,e.normalizeCol(s),a)}}forEach(e,i){const{spans:r,lodInfo:n}=this,{level:s}=n;if(r.length!==0)for(const{row:a,colFrom:o,colTo:l}of r)for(let c=o;c<=l;c++)e.call(i,s,a,n.normalizeCol(c),n.getWorldForColumn(c))}},dw.pool=new u_(()=>new dw),dw),aB=class{constructor(e,i,r){this.row=e,this.colFrom=i,this.colTo=r}};const Zr=new GT("0/0/0/0");let dYe=class H_e{static create(e,i){e[1]>i[1]&&([e,i]=[i,e]);const[r,n]=e,[s,a]=i,o=s-r,l=a-n,c=l!==0?o/l:0,h=(Math.ceil(n)-n)*c,f=(Math.floor(n)-n)*c;return new H_e(r,Math.floor(n),Math.ceil(a),c,o<0?h:f,o<0?f:h,o<0?s:r,o<0?r:s)}constructor(e,i,r,n,s,a,o,l){this.x=e,this.ymin=i,this.ymax=r,this.invM=n,this.leftAdjust=s,this.rightAdjust=a,this.leftBound=o,this.rightBound=l}incrRow(){this.x+=this.invM}getLeftCol(){return Math.max(this.x+this.leftAdjust,this.leftBound)}getRightCol(){return Math.min(this.x+this.rightAdjust,this.rightBound)}};const Nl=[[0,0],[0,0],[0,0],[0,0]],hYe=1e-6;let pYe=class{constructor(e,i=null,r=e.lods[0].level,n=e.lods[e.lods.length-1].level){this.tileInfo=e,this.fullExtent=i,this.scales=[],this._infoByScale={},this._infoByLevel={};const s=e.lods.filter(o=>o.level>=r&&o.level<=n);this.minScale=s[0].scale,this.maxScale=s[s.length-1].scale;const a=this._lodInfos=s.map(o=>uYe.create(e,o,i));s.forEach((o,l)=>{this._infoByLevel[o.level]=a[l],this._infoByScale[o.scale]=a[l],this.scales[l]=o.scale},this),this._wrap=e.isWrappable}get spatialReference(){return this.tileInfo.spatialReference}getLODInfoAt(e){return this._infoByLevel[typeof e=="number"?e:e.level]}getTileBounds(e,i,r=!1){Zr.set(i);const n=this._infoByLevel[Zr.level];return n?n.getTileBounds(e,Zr,r):e}getTileCoords(e,i,r=!1){Zr.set(i);const n=this._infoByLevel[Zr.level];return n?n.getTileCoords(e,Zr,r):e}getTileCoverage(e,i=192,r=!0,n="closest"){if(!r&&(e.scale>this.minScale||e.scale<this.maxScale))return null;const s=n==="closest"?this.getClosestInfoForScale(e.scale):this.getSmallestInfoForScale(e.scale),a=pX.pool.acquire(s),o=this._wrap;let l,c,h,f=1/0,g=-1/0;const y=a.spans;Nl[0][0]=Nl[0][1]=Nl[1][1]=Nl[3][0]=-i,Nl[1][0]=Nl[2][0]=e.size[0]+i,Nl[2][1]=Nl[3][1]=e.size[1]+i;for(const $ of Nl)e.toMap($,$),$[0]=s.getColumnForX($[0]),$[1]=s.getRowForY($[1]);const b=[];let _=3;for(let $=0;$<4;$++){if(Nl[$][1]===Nl[_][1]){_=$;continue}const C=dYe.create(Nl[$],Nl[_]);f=Math.min(C.ymin,f),g=Math.max(C.ymax,g),b[C.ymin]===void 0&&(b[C.ymin]=[]),b[C.ymin].push(C),_=$}if(f==null||g==null||g-f>100)return null;let S=[];for(l=f;l<g;){b[l]!=null&&(S=S.concat(b[l])),c=1/0,h=-1/0;for(let $=S.length-1;$>=0;$--){const C=S[$];c=Math.min(c,C.getLeftCol()),h=Math.max(h,C.getRightCol())}if(c=Math.floor(c),h=Math.floor(h),l>=s.first[1]&&l<=s.last[1])if(o)if(s.size[0]<s.worldSize[0]){const $=Math.floor(h/s.worldSize[0]);for(let C=Math.floor(c/s.worldSize[0]);C<=$;C++)y.push(new aB(l,Math.max(s.getFirstColumnForWorld(C),c),Math.min(s.getLastColumnForWorld(C),h)))}else y.push(new aB(l,c,h));else c>s.last[0]||h<s.first[0]||(c=Math.max(c,s.first[0]),h=Math.min(h,s.last[0]),y.push(new aB(l,c,h)));l+=1;for(let $=S.length-1;$>=0;$--){const C=S[$];C.ymax>=l?C.incrRow():S.splice($,1)}}return a}getTileParentId(e){Zr.set(e);const i=this._infoByLevel[Zr.level],r=this._lodInfos.indexOf(i)-1;return r<0?null:(this._getTileIdAtLOD(Zr,this._lodInfos[r],Zr),Zr.id)}getTileResolution(e){const i=this._infoByLevel[typeof e=="object"?e.level:e];return i?i.resolution:-1}getTileScale(e){const i=this._infoByLevel[e.level];return i?i.scale:-1}intersects(e,i){Zr.set(i);const r=this._infoByLevel[Zr.level],n=e.lodInfo;if(n.resolution>r.resolution){this._getTileIdAtLOD(Zr,n,Zr);const a=n.denormalizeCol(Zr.col,Zr.world);for(const o of e.spans)if(o.row===Zr.row&&o.colFrom<=a&&o.colTo>=a)return!0}if(n.resolution<r.resolution){const[a,o,l,c]=e.spans.reduce((_,S)=>(_[0]=Math.min(_[0],S.row),_[1]=Math.max(_[1],S.row),_[2]=Math.min(_[2],S.colFrom),_[3]=Math.max(_[3],S.colTo),_),[1/0,-1/0,1/0,-1/0]),h=r.denormalizeCol(Zr.col,Zr.world),f=n.getColumnForX(r.getXForColumn(h)),g=n.getRowForY(r.getYForRow(Zr.row)),y=n.getColumnForX(r.getXForColumn(h+1))-1,b=n.getRowForY(r.getYForRow(Zr.row+1))-1;return!(f>c||y<l||g>o||b<a)}const s=n.denormalizeCol(Zr.col,Zr.world);return e.spans.some(a=>a.row===Zr.row&&a.colFrom<=s&&a.colTo>=s)}normalizeBounds(e,i,r){if(e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],this._wrap){const n=No(this.tileInfo.spatialReference),s=-r*(n.valid[1]-n.valid[0]);e[0]+=s,e[2]+=s}return e}getSmallestInfoForScale(e){const i=this.scales;if(this._infoByScale[e])return this._infoByScale[e];if(e>i[0])return this._infoByScale[i[0]];for(let r=1;r<i.length-1;r++)if(e>i[r]+hYe)return this._infoByScale[i[r-1]];return this._infoByScale[i[i.length-1]]}getClosestInfoForScale(e){const i=this.scales;return this._infoByScale[e]||(e=i.reduce((r,n)=>Math.abs(n-e)<Math.abs(r-e)?n:r,i[0])),this._infoByScale[e]}scaleToLevel(e){const i=this.scales;if(this._infoByScale[e])return this._infoByScale[e].level;for(let r=i.length-1;r>=0;r--)if(e<i[r])return r===i.length-1?this._infoByScale[i[i.length-1]].level:this._infoByScale[i[r]].level+(i[r]-e)/(i[r]-i[r+1]);return this._infoByScale[i[0]].level}scaleToZoom(e){return this.tileInfo.scaleToZoom(e)}zoomToScale(e){return this.tileInfo.zoomToScale(e)}_getTileIdAtLOD(e,i,r){const n=this._infoByLevel[r.level];return e.set(r),i.resolution<n.resolution?null:(i.resolution===n.resolution||(e.level=i.level,e.col=Math.floor(r.col*n.resolution/i.resolution+.01),e.row=Math.floor(r.row*n.resolution/i.resolution+.01)),e)}},fYe=class{constructor(e,i){this.item=e,this.controller=i,this.promise=null}},mYe=class{constructor(e){this._schedule=null,this._task=null,this._deferreds=new pv,this._controllers=new pv,this._processingItems=new pv,this._pausedSignal=q$(!1),this.concurrency=1,e.concurrency&&(this.concurrency=e.concurrency),this._queue=new CI(e.peeker),this.process=e.process;const i=e.scheduler;e.priority&&i&&(this._task=i.registerTask(e.priority,this))}destroy(){this.clear(),this._schedule=Rr(this._schedule),this._task=Rr(this._task)}get updating(){return!!this._task?.updating||this.readyToRun}get length(){return this._processingItems.size+this._queue.length}abort(e){const i=this._controllers.get(e);i&&i.abort()}clear(){this._queue.clear();const e=[];this._controllers.forEach(i=>e.push(i)),this._controllers.clear(),e.forEach(i=>i.abort()),this._processingItems.clear(),this._cancelNext()}forEach(e){this._deferreds.forEach((i,r)=>e(r))}get(e){const i=this._deferreds.get(e);return i?i.promise:void 0}isOngoing(e){return this._processingItems.has(e)}has(e){return this._deferreds.has(e)}pause(){this._pausedSignal.value||(this._pausedSignal.value=!0,this._cancelNext())}push(e,i){const r=this.get(e);if(r)return r;const n=new AbortController;let s=null;i&&(s=Ma(i,()=>n.abort()));const a=()=>{const h=this._processingItems.get(e);h&&h.controller.abort(),o(),c.reject(Hi())},o=()=>{l.remove(),s?.remove(),this._removeItem(e),this._queue.remove(e),this._scheduleNext()},l=HW(n.signal,a),c=Qs();return this._deferreds.set(e,c),this._controllers.set(e,n),c.promise.then(o,o),this._queue.push(e),this._scheduleNext(),c.promise}last(){return this._queue.last()}lastPromise(){const e=this.last();return e?this.get(e):null}peek(){return this._queue.peek()}popLast(){const e=this._queue.popLast();return e&&(this._deferreds.get(e)?.reject(Hi()),this._removeItem(e)),e}reset(){const e=Array.from(this._processingItems.values());this._processingItems.clear();for(const i of e)this._queue.push(i.item),i.controller.abort();this._scheduleNext()}resume(){this._pausedSignal.value&&(this._pausedSignal.value=!1,this._scheduleNext())}takeAll(){const e=[];for(;this._queue.length;)e.push(this._queue.pop());return this.clear(),e}get readyToRun(){return!this._pausedSignal.value&&this._queue.length>0&&this._processingItems.size<this.concurrency}runTask(e){for(;!e.done&&this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),e.madeProgress()}_removeItem(e){this._deferreds.delete(e),this._controllers.delete(e),this._processingItems.delete(e)}_scheduleNext(){this._task||this._pausedSignal.value||this._schedule||(this._schedule=$T(()=>{this._schedule=null,this._next()}))}_next(){for(;this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())}_cancelNext(){this._schedule&&(this._schedule.remove(),this._schedule=null)}_processResult(e,i){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).resolve(i))}_processError(e,i){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).reject(i))}_canProcessFulfillment(e){return!!this._deferreds.get(e.item)&&this._processingItems.get(e.item)===e}_process(e){if(e==null)return;let i;const r=new AbortController,n=new fYe(e,r);this._processingItems.set(e,n);try{i=this.process(e,r.signal)}catch(s){this._processError(n,s)}ho(i)?(n.promise=i,i.then(s=>this._processResult(n,s),s=>this._processError(n,s))):this._processResult(n,i)}get test(){}};const Oae=[0,0];let qf=class extends lt{constructor(e){super(e),this._keyToItem=new Map,this._tilesByScale=new Map,this.concurrency=6}initialize(){const{concurrency:e,process:i,scheduler:r,priority:n}=this;this._queue=new mYe({concurrency:e,scheduler:r,priority:n,process:(s,a)=>{const o=this._keyToItem.get(s);return i(o,{signal:a})},peeker:s=>this._peek(s)})}destroy(){this.clear(),this._queue=Ir(this._queue)}get length(){return this._queue?this._queue.length:0}abort(e){const i=typeof e=="string"?e:e.id;this._queue.abort(i)}clear(){this._queue.clear(),this._keyToItem.clear(),this._tilesByScale.clear()}has(e){return typeof e=="string"?this._keyToItem.has(e):this._keyToItem.has(e.id)}pause(){this._queue.pause()}push(e){const i=e.key.id;if(this._queue.has(i))return this._queue.get(i);const r=this._queue.push(i),n=this.tileInfoView.getTileScale(e.key),s=d_(this._tilesByScale,n,()=>new Set),a=()=>{s.delete(e.key),s.size===0&&this._tilesByScale.delete(n),this._keyToItem.delete(i)};return s.add(e.key),this._keyToItem.set(i,e),r.then(a,a),r}reset(){this._queue.reset()}resume(){this._queue.resume()}_peek(e){if(!this.state)return e.values().next().value;const i=new Set;for(const a of e)i.add(this._keyToItem.get(a).key);const r=this.state.scale;let n,s=Number.POSITIVE_INFINITY;for(const[a,o]of this._tilesByScale)if(ype(o,l=>i.has(l))){const l=Math.abs(a-r);l<s&&(n=o,s=l)}return this._getClosestTileKey(n,e).id}_getClosestTileKey(e,i){const r=this.tileInfoView,n=this.state.center;let s,a=Number.POSITIVE_INFINITY;for(const o of e)if(i.has(o.id)){r.getTileCoords(Oae,o);const l=oN(Oae,n);l<a&&(a=l,s=o)}return s}};d([m({constructOnly:!0})],qf.prototype,"concurrency",void 0),d([m({constructOnly:!0})],qf.prototype,"priority",void 0),d([m({constructOnly:!0})],qf.prototype,"process",void 0),d([m({constructOnly:!0})],qf.prototype,"scheduler",void 0),d([m()],qf.prototype,"state",void 0),d([m({constructOnly:!0})],qf.prototype,"tileInfoView",void 0),qf=d([U("esri.views.2d.tiling.TileQueue")],qf);const UPt=qf;let gYe=class{constructor(e,i,r){this.maxSize=e,this._tileInfoView=i,this._removedFunc=r,this._tilePerId=new Map,this._tileKeysPerLevel=[]}clear(){this._tilePerId.clear(),this._tileKeysPerLevel=[]}has(e){return this._tilePerId.has(e)}get(e){return this._tilePerId.get(e)}pop(e){const i=this._tilePerId.get(e);if(!i)return;const r=i.key.level,n=this._tileKeysPerLevel[r];Lae(this._tilePerId,e);for(let s=0;s<n.length;s++)if(n[s].id===e){n.splice(s,1);break}return i.visible=!0,i}add(e){e.visible=!1;const i=e.key,r=i.id;if(this._tilePerId.has(r))return;this._tilePerId.set(r,e);const n=i.level;this._tileKeysPerLevel[n]||(this._tileKeysPerLevel[n]=[]),this._tileKeysPerLevel[n].push(i)}prune(e,i,r){let n=this._tilePerId.size;if(n<=this.maxSize)return;let s=this._tileKeysPerLevel.length-1;for(;n>this.maxSize&&s>=0;)s!==e&&(n=this._pruneAroundCenterTile(n,i,r,s)),s--;n>this.maxSize&&(n=this._pruneAroundCenterTile(n,i,r,e))}_pruneAroundCenterTile(e,i,r,n){const s=this._tileKeysPerLevel[n];if(!s||s.length===0)return e;const{size:a,origin:o}=this._tileInfoView.tileInfo,l=r*a[0],c=r*a[1],h=[0,0],f=[0,0];for(s.sort((g,y)=>(h[0]=o.x+l*(g.col+.5),h[1]=o.y-c*(g.row+.5),f[0]=o.x+l*(y.col+.5),f[1]=o.y-c*(y.row+.5),$I(h,i)-$I(f,i)));s.length>0;){const g=s.pop();if(this._removeTile(g.id),--e===this.maxSize)break}return e}_removeTile(e){const i=this._tilePerId.get(e);this._removedFunc&&i&&this._removedFunc(i),Lae(this._tilePerId,e)}};function Lae(t,e){t.delete(e)}const Eb=new GT(0,0,0,0),Tf=new Map,b2=[],oB=[];let GPt=class{constructor(e){this._previousScale=Number.POSITIVE_INFINITY,this.cachePolicy="keep",this.coveragePolicy="closest",this.resampling=!0,this.tileIndex=new Map,this.tiles=[],this.buffer=192,this.acquireTile=e.acquireTile,this.releaseTile=e.releaseTile,this.tileInfoView=e.tileInfoView,e.resampling!=null&&(this.resampling=e.resampling),e.cachePolicy&&(this.cachePolicy=e.cachePolicy),e.coveragePolicy&&(this.coveragePolicy=e.coveragePolicy),e.buffer!=null&&(this.buffer=e.buffer),e.cacheSize&&(this._tileCache=new gYe(e.cacheSize,this.tileInfoView,i=>{this.releaseTile(i)}))}destroy(){this.tileIndex.clear()}update(e){const{resampling:i,tileIndex:r}=this,{scale:n,center:s,resolution:a}=e.state,{minScale:o,maxScale:l}=this.tileInfoView,c=!e.stationary&&n>this._previousScale;if(this._previousScale=n,!i&&(n>o||n<l))return this.tiles.length=0,void this.clear();const h=this.tileInfoView.getTileCoverage(e.state,this.buffer,this.resampling,this.coveragePolicy);if(!h)return this.tiles.length=0,void this.clear();const{spans:f,lodInfo:g}=h,{level:y}=g;this.tiles.length=0,r.forEach($=>$.visible=!0);let b=0,_=0;if(f.length>0)for(const{row:$,colFrom:C,colTo:I}of f)for(let P=C;P<=I;P++){b++;const O=Eb.set(y,$,g.normalizeCol(P),g.getWorldForColumn(P)).id;let N=r.get(O);if(N)N.isReady?(Tf.set(O,N),_++):c||this._addParentTile(O,Tf);else{if(this._tileCache?.has(O)){if(N=this._tileCache.pop(O),this.tileIndex.set(O,N),N.isReady){Tf.set(O,N),_++;continue}}else N=this.acquireTile(Eb),this.tileIndex.set(O,N);c||this._addParentTile(O,Tf)}}const S=_===b;for(const[$,C]of r){if(Tf.has($))continue;Eb.set($);const I=this.tileInfoView.intersects(h,Eb),P=this.cachePolicy==="purge"?Eb.level!==y:Eb.level>y;!I||!c&&S?!P&&I||b2.push(C):C.isReady?P&&this.cachePolicy==="purge"&&this._hasReadyAncestor(Eb,y)?b2.push(C):oB.push(C):P&&b2.push(C)}for(const $ of oB)$.isReady&&Tf.set($.key.id,$);for(const $ of b2)this._tileCache?this._tileCache.add($):this.releaseTile($),r.delete($.key.id);for(const $ of Tf.values())this.tiles.push($);for(const $ of r.values())Tf.has($.key.id)||($.visible=!1);this._tileCache?.prune(y,s,a),pX.pool.release(h),oB.length=0,b2.length=0,Tf.clear()}clear(){const{tileIndex:e}=this;for(const i of e.values())this.releaseTile(i);e.clear()}refresh(e){for(const i of this.tileIndex.values())e(i);this._tileCache?.clear()}updateCacheSize(e){this._tileCache&&(this._tileCache.maxSize=e)}_addParentTile(e,i){let r=e,n=null;for(;r=this.tileInfoView.getTileParentId(r),r;)if(this.tileIndex.has(r)){if(n=this.tileIndex.get(r),n?.isReady){i.has(n.key.id)||i.set(n.key.id,n);break}}else if(this._tileCache?.has(r)&&(n=this._tileCache.pop(r),this.tileIndex.set(r,n),n?.isReady)){i.has(n.key.id)||i.set(n.key.id,n);break}}_hasReadyAncestor(e,i){const r=tn();this.tileInfoView.getTileBounds(r,e,!0);for(const n of this.tileIndex.values())if(n.isReady&&n.key.level>=i&&n.key.level<e.level){const s=tn();if(this.tileInfoView.getTileBounds(s,n.key,!0),mje(s,r))return!0}return!1}};const yYe={"area-measurement":null,dimension:null,"direct-line-measurement":null,"elevation-profile":()=>fe(()=>import("./ElevationProfileAnalysisView2D-HR8_kGIR.js"),__vite__mapDeps([250,148,244,251,195,252,253,254,255,256,257,81,258,259,260,261,262,89,90,263,264,265,160,266,267,112,49,95,96,108,150,47,268,82,121,126,107])),"line-of-sight":null,slice:null,viewshed:null,"volume-measurement":null};function vYe(t){const e=yYe[t.type];if(!e)throw new ee("analysis-view-module-import-utils:analysis-not-supported",`Analysis "${t.type}" is not supported`);return e()}let bYe=class{constructor(e,i={}){this.events=new wfe,this._hasMajorPerformanceCaveat=!1,this._lastRenderFrameCounter=0,e!=null?(this._canvas=document.createElement("canvas"),this._canvas.setAttribute("style","width: 100%; height:100%; display:block; willChange:transform"),e.contains(this._canvas)||e.appendChild(this._canvas)):i.canvas!=null&&(this._canvas=i.canvas);const r={failIfMajorPerformanceCaveat:!0,alpha:!0,antialias:!1,depth:!0,stencil:!0,powerPreference:"high-performance"};let n=this._canvas.getContext("webgl2",r);n||(n=this._canvas.getContext("webgl2",{...r,failIfMajorPerformanceCaveat:!1}),this._hasMajorPerformanceCaveat=!0),this._gl=n,this._handles=c_([zm(this._canvas,"webglcontextlost",s=>this.events.emit("webgl-context-lost",s))])}destroy(){this._canvas.remove(),this._canvas=null,this._handles.remove(),this._gl=null}get gl(){return this._gl}get canvas(){return this._canvas}render(e,i){if(this._hasMajorPerformanceCaveat||ve("esri-force-performance-mode")){if(++this._lastRenderFrameCounter>=ve("esri-performance-mode-frames-between-render")&&(i(),this._lastRenderViewState=e.state.clone(),this._lastRenderFrameCounter=0),this._lastRenderViewState){const[r,n,s,a,o,l]=this._computeViewTransform(this._lastRenderViewState,e.state);this._canvas.style.transform=`matrix(${r}, ${n}, ${s}, ${a}, ${o}, ${l})`}}else i()}resize(e){const i=this._canvas,r=i.style,{state:{size:n},pixelRatio:s}=e,a=n[0],o=n[1],l=Math.round(a*s),c=Math.round(o*s);i.width===l&&i.height===c||(i.width=l,i.height=c),r.width=a+"px",r.height=o+"px"}_computeViewTransform(e,i){const[r,n]=e.center,[s,a]=i.center,[o,l]=e.toScreen([0,0],s,a),[c,h]=e.toScreen([0,0],r,n),f=c-o,g=h-l,y=e.scale/i.scale,b=i.rotation-e.rotation,_=Cp();return oA(_),lA(_,_,[y,y]),Mv(_,_,_p(b)),Ep(_,_,[f,g]),_}};function wYe(t,e,i,r,n){G_e(t,e,i||0,r||t.length-1,n||_Ye)}function G_e(t,e,i,r,n){for(;r>i;){if(r-i>600){var s=r-i+1,a=e-i+1,o=Math.log(s),l=.5*Math.exp(2*o/3),c=.5*Math.sqrt(o*l*(s-l)/s)*(a-s/2<0?-1:1);G_e(t,e,Math.max(i,Math.floor(e-a*l/s+c)),Math.min(r,Math.floor(e+(s-a)*l/s+c)),n)}var h=t[e],f=i,g=r;for(w2(t,i,e),n(t[r],h)>0&&w2(t,i,r);f<g;){for(w2(t,f,g),f++,g--;n(t[f],h)<0;)f++;for(;n(t[g],h)>0;)g--}n(t[i],h)===0?w2(t,i,g):w2(t,++g,r),g<=e&&(i=g+1),e<=g&&(r=g-1)}}function w2(t,e,i){var r=t[e];t[e]=t[i],t[i]=r}function _Ye(t,e){return t<e?-1:t>e?1:0}function mz(t,e){if(!(this instanceof mz))return new mz(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&(typeof e=="function"?this.toBBox=e:this._initFormat(e)),this.clear()}function xYe(t,e,i){if(!i)return e.indexOf(t);for(var r=0;r<e.length;r++)if(i(t,e[r]))return r;return-1}function M1(t,e){_E(t,0,t.children.length,e,t)}function _E(t,e,i,r,n){n||(n=kx(null)),n.minX=1/0,n.minY=1/0,n.maxX=-1/0,n.maxY=-1/0;for(var s,a=e;a<i;a++)s=t.children[a],xE(n,t.leaf?r(s):s);return n}function xE(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function Dae(t,e){return t.minX-e.minX}function Rae(t,e){return t.minY-e.minY}function lB(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function IO(t){return t.maxX-t.minX+(t.maxY-t.minY)}function SYe(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}function $Ye(t,e){var i=Math.max(t.minX,e.minX),r=Math.max(t.minY,e.minY),n=Math.min(t.maxX,e.maxX),s=Math.min(t.maxY,e.maxY);return Math.max(0,n-i)*Math.max(0,s-r)}function cB(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function MO(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function kx(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function zae(t,e,i,r,n){for(var s,a=[e,i];a.length;)(i=a.pop())-(e=a.pop())<=r||(s=e+Math.ceil((i-e)/r/2)*r,wYe(t,s,e,i,n),a.push(e,s,s,i))}mz.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,i=[],r=this.toBBox;if(!MO(t,e))return i;for(var n,s,a,o,l=[];e;){for(n=0,s=e.children.length;n<s;n++)a=e.children[n],MO(t,o=e.leaf?r(a):a)&&(e.leaf?i.push(a):cB(t,o)?this._all(a,i):l.push(a));e=l.pop()}return i},collides:function(t){var e=this.data,i=this.toBBox;if(!MO(t,e))return!1;for(var r,n,s,a,o=[];e;){for(r=0,n=e.children.length;r<n;r++)if(s=e.children[r],MO(t,a=e.leaf?i(s):s)){if(e.leaf||cB(t,a))return!0;o.push(s)}e=o.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,i=t.length;e<i;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var n=this.data;this.data=r,r=n}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(t){return t!=null&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=kx([]),this},remove:function(t,e){if(t==null)return this;for(var i,r,n,s,a=this.data,o=this.toBBox(t),l=[],c=[];a||l.length;){if(a||(a=l.pop(),r=l[l.length-1],i=c.pop(),s=!0),a.leaf&&(n=xYe(t,a.children,e))!==-1)return a.children.splice(n,1),l.push(a),this._condense(l),this;s||a.leaf||!cB(a,o)?r?(i++,a=r.children[i],s=!1):a=null:(l.push(a),c.push(i),i=0,r=a,a=a.children[0])}return this},toBBox:function(t){return t},compareMinX:Dae,compareMinY:Rae,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var i=[];t;)t.leaf?e.push.apply(e,t.children):i.push.apply(i,t.children),t=i.pop();return e},_build:function(t,e,i,r){var n,s=i-e+1,a=this._maxEntries;if(s<=a)return M1(n=kx(t.slice(e,i+1)),this.toBBox),n;r||(r=Math.ceil(Math.log(s)/Math.log(a)),a=Math.ceil(s/Math.pow(a,r-1))),(n=kx([])).leaf=!1,n.height=r;var o,l,c,h,f=Math.ceil(s/a),g=f*Math.ceil(Math.sqrt(a));for(zae(t,e,i,g,this.compareMinX),o=e;o<=i;o+=g)for(zae(t,o,c=Math.min(o+g-1,i),f,this.compareMinY),l=o;l<=c;l+=f)h=Math.min(l+f-1,c),n.children.push(this._build(t,l,h,r-1));return M1(n,this.toBBox),n},_chooseSubtree:function(t,e,i,r){for(var n,s,a,o,l,c,h,f;r.push(e),!e.leaf&&r.length-1!==i;){for(h=f=1/0,n=0,s=e.children.length;n<s;n++)l=lB(a=e.children[n]),(c=SYe(t,a)-l)<f?(f=c,h=l<h?l:h,o=a):c===f&&l<h&&(h=l,o=a);e=o||e.children[0]}return e},_insert:function(t,e,i){var r=this.toBBox,n=i?t:r(t),s=[],a=this._chooseSubtree(n,this.data,e,s);for(a.children.push(t),xE(a,n);e>=0&&s[e].children.length>this._maxEntries;)this._split(s,e),e--;this._adjustParentBBoxes(n,s,e)},_split:function(t,e){var i=t[e],r=i.children.length,n=this._minEntries;this._chooseSplitAxis(i,n,r);var s=this._chooseSplitIndex(i,n,r),a=kx(i.children.splice(s,i.children.length-s));a.height=i.height,a.leaf=i.leaf,M1(i,this.toBBox),M1(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(i,a)},_splitRoot:function(t,e){this.data=kx([t,e]),this.data.height=t.height+1,this.data.leaf=!1,M1(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,i){var r,n,s,a,o,l,c,h;for(l=c=1/0,r=e;r<=i-e;r++)a=$Ye(n=_E(t,0,r,this.toBBox),s=_E(t,r,i,this.toBBox)),o=lB(n)+lB(s),a<l?(l=a,h=r,c=o<c?o:c):a===l&&o<c&&(c=o,h=r);return h},_chooseSplitAxis:function(t,e,i){var r=t.leaf?this.compareMinX:Dae,n=t.leaf?this.compareMinY:Rae;this._allDistMargin(t,e,i,r)<this._allDistMargin(t,e,i,n)&&t.children.sort(r)},_allDistMargin:function(t,e,i,r){t.children.sort(r);var n,s,a=this.toBBox,o=_E(t,0,e,a),l=_E(t,i-e,i,a),c=IO(o)+IO(l);for(n=e;n<i-e;n++)s=t.children[n],xE(o,t.leaf?a(s):s),c+=IO(o);for(n=i-e-1;n>=e;n--)s=t.children[n],xE(l,t.leaf?a(s):s),c+=IO(l);return c},_adjustParentBBoxes:function(t,e,i){for(var r=i;r>=0;r--)xE(e[r],t)},_condense:function(t){for(var e,i=t.length-1;i>=0;i--)t[i].children.length===0?i>0?(e=t[i-1].children).splice(e.indexOf(t[i]),1):this.clear():M1(t[i],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}};function TYe(t,{timeZone:e,timeExtent:i}){return{$view:{scale:t,timeZone:e,timeProperties:{currentStart:i?.start,currentEnd:i?.end}}}}let Fae=class q_e{constructor(e,i){this.key=new GT(0,0,0,0),this.bounds=tn(),this.objectIds=new Set,this.key.set(i);const r=e.getLODInfoAt(this.key);this.tileInfoView=e,this.tileInfoView.getTileBounds(this.bounds,this.key,!0),this.resolution=r.resolution,this.level=r.level,this.scale=r.scale,this.minScale=e.zoomToScale(r.level-1),this.maxScale=e.zoomToScale(r.level+1)}get lod(){return this.tileInfoView.getLODInfoAt(this.key)}get id(){return this.key.id}get extent(){return dje(this.bounds,this.tileInfoView.tileInfo.spatialReference)}get transform(){return{originPosition:"upperLeft",scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}}createArcadeEvaluationOptions(e){return TYe(this.scale,e)}createChildTiles(){const e=this.key.getChildKeys(),i=Ao.acquire();for(let r=0;r<e.length;r++)i[r]=new q_e(this.tileInfoView,e[r]);return i}getQuantizationParameters(){return Dy.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})}};const Cb={added:[],removed:[]},uB=new Set,kYe=new GT(0,0,0,0);function EYe(t,e){const i=No(e);if(!i)return null;const[r,n]=i.valid;return t[2]>n?[tn([t[0],t[1],n,t[3]]),tn([r,t[1],r+t[2]-n,t[3]])]:t[0]<r?[tn([r,t[1],t[2],t[3]]),tn([n-(r-t[0]),t[1],n,t[3]])]:null}let CYe=class extends fY{constructor(e){super(),this._tiles=new Map,this._index=mz(9,ve("esri-csp-restrictions")?i=>({minX:i.bounds[0],minY:i.bounds[1],maxX:i.bounds[2],maxY:i.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]),this.tiles=[],this.tileScheme=e}destroy(){super.destroy(),this.clear()}clear(){this.tiles.length=0,this._tiles.clear(),this._index.clear()}has(e){return this._tiles.has(e)}get(e){return this._tiles.get(e)}getIntersectingTiles(e){if(!e||nN(e)===0||sN(e)===0)return[];const i=EYe(e,this.tileScheme.spatialReference);return i!=null?[...new Set([...this.boundsIntersections(i[0]),...this.boundsIntersections(i[1])])]:this.boundsIntersections(e)}boundsIntersections(e){return this._index.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]})}updateTiles(e){const i={added:[],removed:[]};for(const r of e.added)if(!this.has(r)){const n=new Fae(this.tileScheme,r);this._tiles.set(r,n),this._index.insert(n),i.added.push(n)}for(const r of e.removed)if(this.has(r)){const n=this.get(r);this._tiles.delete(r),this._index.remove(n),i.removed.push(n)}this.tiles.length=0,this._tiles.forEach(r=>this.tiles.push(r)),(i.added.length||i.removed.length)&&this.emit("update",i)}setViewState(e){const i=this.tileScheme.getTileCoverage(e,0);if(!i)return;const{spans:r,lodInfo:n}=i,{level:s}=n;if(r.length>0)for(const{row:a,colFrom:o,colTo:l}of r)for(let c=o;c<=l;c++){const h=kYe.set(s,a,n.normalizeCol(c),n.getWorldForColumn(c)).id;if(uB.add(h),!this.has(h)){const f=new Fae(this.tileScheme,h);this._tiles.set(h,f),this._index.insert(f),this.tiles.push(f),Cb.added.push(f)}}for(let a=this.tiles.length-1;a>=0;a--){const o=this.tiles[a];uB.has(o.id)||(this._tiles.delete(o.id),this.tiles.splice(a,1),this._index.remove(o),Cb.removed.push(o))}(Cb.added.length||Cb.removed.length)&&this.emit("update",Cb),pX.pool.release(i),uB.clear(),Cb.added.length=0,Cb.removed.length=0}};const ZPt=1e-30,Nae=512,AO=16777216,XPt=8,W_e=29,Y_e=24,JPt=4,KPt=0,QPt=0,eOt=0,tOt=1,iOt=2,rOt=3,nOt=4,sOt=5,aOt=6,oOt=12,lOt=13,cOt=5,IYe=6,uOt=5,dOt=6,Z_e=6,MYe=1<<Z_e,hOt=MYe<<1,pOt=1.05,fOt=3,mOt=1,AYe=3,PYe=3,gOt=5,yOt=6,vOt=1.15,OYe=4,bOt=128,LYe=256,wOt=LYe-2*OYe,_Ot=2,xOt=128,X_e=1,SOt=10,DYe=1024,$Ot=128,TOt=4,kOt=1,EOt=1<<20,COt=.75,IOt=10,MOt=.75,AOt=256,RYe=32,zYe=512,POt=0,OOt=1,FYe=1,LOt=[0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],DOt=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],_2=256,NYe=()=>$e.getLogger("esri.views.webgl.checkWebGLError");function J_e(t){switch(t.getError()){case t.NO_ERROR:return null;case t.INVALID_ENUM:return"Invalid Enum. An unacceptable value has been specified for an enumerated argument.";case t.INVALID_VALUE:return"Invalid Value. A numeric argument is out of range.";case t.INVALID_OPERATION:return"Invalid Operation. The specified command is not allowed for the current state.";case t.INVALID_FRAMEBUFFER_OPERATION:return"Invalid Framebuffer operation. The currently bound framebuffer is not framebuffer complete when trying to render to or to read from it.";case t.OUT_OF_MEMORY:return"Out of memory. Not enough memory is left to execute the command.";case t.CONTEXT_LOST_WEBGL:return"WebGL context has been lost";default:return"Unknown error"}}const K_e=!!ve("enable-feature:webgl-debug");function Q_e(){return K_e}function ROt(){return K_e}function Ib(t,e=Q_e()){if(e){const i=J_e(t);if(i){const r=new Error().stack;NYe().error(new ee("webgl-error","WebGL error occurred",{message:i,stack:r}))}}}const zOt={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},Mb={BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,HALF_FLOAT:5131},It={RGBA4:32854,R16F:33325,RG16F:33327,RGB32F:34837,RGBA16F:34842,R32F:33326,RG32F:33328,RGBA32F:34836,R11F_G11F_B10F:35898,RGB8:32849,RGBA8:32856,RGB5_A1:32855,R8:33321,RG8:33323,R8I:33329,R8UI:33330,R16I:33331,R16UI:33332,R32I:33333,R32UI:33334,RG8I:33335,RG8UI:33336,RG16I:33337,RG16UI:33338,RG32I:33339,RG32UI:33340,RGB16F:34843,RGB9_E5:35901,SRGB8:35905,SRGB8_ALPHA8:35907,RGB565:36194,RGBA32UI:36208,RGB32UI:36209,RGBA16UI:36214,RGB16UI:36215,RGBA8UI:36220,RGB8UI:36221,RGBA32I:36226,RGB32I:36227,RGBA16I:36232,RGB16I:36233,RGBA8I:36238,RGB8I:36239,R8_SNORM:36756,RG8_SNORM:36757,RGB8_SNORM:36758,RGBA8_SNORM:36759,RGB10_A2:32857,RGB10_A2UI:36975},jYe=Object.values(It),gz={DEPTH24_STENCIL8:35056,DEPTH32F_STENCIL8:36013},FC={DEPTH_COMPONENT16:33189,DEPTH_COMPONENT24:33190,DEPTH_COMPONENT32F:36012},OH={FLOAT:Mb.FLOAT,UNSIGNED_BYTE:Mb.UNSIGNED_BYTE,UNSIGNED_INT_24_8:34042,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,BYTE:Mb.BYTE,UNSIGNED_SHORT:Mb.UNSIGNED_SHORT,SHORT:Mb.SHORT,UNSIGNED_INT:Mb.UNSIGNED_INT,INT:Mb.INT,HALF_FLOAT:5131,UNSIGNED_INT_2_10_10_10_REV:33640,UNSIGNED_INT_10F_11F_11F_REV:35899,UNSIGNED_INT_5_9_9_9_REV:35902,FLOAT_32_UNSIGNED_INT_24_8_REV:36269},FOt=33984,jae={Texture:0,TileTexture:1,BufferObject:2,VertexArrayObject:3,Shader:4,Program:5,FramebufferObject:6,Renderbuffer:7,TransformFeedback:8,Sync:9,UNCOUNTED:10,LinesOfCode:10,Uniform:11,COUNT:12},NOt=1029,jOt=0,VOt=36064,BOt=36065,UOt=36066,HOt=36067,GOt=33306,qOt=36096,WOt=36128,Ja={COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779,COMPRESSED_R11_EAC:37488,COMPRESSED_SIGNED_R11_EAC:37489,COMPRESSED_RG11_EAC:37490,COMPRESSED_SIGNED_RG11_EAC:37491,COMPRESSED_RGB8_ETC2:37492,COMPRESSED_SRGB8_ETC2:37493,COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:37494,COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:37495,COMPRESSED_RGBA8_ETC2_EAC:37496,COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:37497};function YOt(t,e,i,r=0){const n=t.gl;t.bindBuffer(i);for(const s of i.layout){const a=e.get(s.name);if(a==null){console.warn(`There is no location for vertex attribute '${s.name}' defined.`);continue}const o=r*s.stride;if(s.count<=4)n.vertexAttribPointer(a,s.count,s.type,s.normalized,s.stride,s.offset+o),n.enableVertexAttribArray(a),s.divisor>0&&n.vertexAttribDivisor(a,s.divisor);else if(s.count===9)for(let l=0;l<3;l++)n.vertexAttribPointer(a+l,3,s.type,s.normalized,s.stride,s.offset+12*l+o),n.enableVertexAttribArray(a+l),s.divisor>0&&n.vertexAttribDivisor(a+l,s.divisor);else if(s.count===16)for(let l=0;l<4;l++)n.vertexAttribPointer(a+l,4,s.type,s.normalized,s.stride,s.offset+16*l+o),n.enableVertexAttribArray(a+l),s.divisor>0&&n.vertexAttribDivisor(a+l,s.divisor);else console.error("Unsupported vertex attribute element count: "+s.count);if(Q_e()){const l=J_e(t.gl);l&&console.error(`Unable to bind vertex attribute "${s.name}" with baseInstanceOffset ${o}:`,l,s)}}}function ZOt(t){switch(t){case 6406:case 6409:case 6403:case 36244:case 6402:case 34041:return 1;case 6410:case 33319:case 33320:return 2;case 6407:case 36248:return 3;case 6408:case 36249:return 4}return 0}function VYe(t){switch(t){case 6406:case 6409:case 6403:case 36244:case It.R8:case It.R8I:case It.R8UI:case It.R8_SNORM:case 36168:return 1;case 6410:case 33319:case 33320:case It.RGBA4:case It.R16F:case It.R16I:case It.R16UI:case It.RG8:case It.RG8I:case It.RG8UI:case It.RG8_SNORM:case It.RGB565:case It.RGB5_A1:case FC.DEPTH_COMPONENT16:return 2;case 6407:case 36248:case It.RGB8:case It.RGB8I:case It.RGB8UI:case It.RGB8_SNORM:case It.SRGB8:case FC.DEPTH_COMPONENT24:return 3;case 6408:case 36249:case It.RGBA8:case It.R32F:case It.R11F_G11F_B10F:case It.RG16F:case It.R32I:case It.R32UI:case It.RG16I:case It.RG16UI:case It.RGBA8I:case It.RGBA8UI:case It.RGBA8_SNORM:case It.SRGB8_ALPHA8:case It.RGB9_E5:case It.RGB10_A2UI:case It.RGB10_A2:case FC.DEPTH_COMPONENT32F:case gz.DEPTH24_STENCIL8:return 4;case gz.DEPTH32F_STENCIL8:return 5;case It.RGB16F:case It.RGB16I:case It.RGB16UI:return 6;case It.RG32F:case It.RG32I:case It.RG32UI:case It.RGBA16F:case It.RGBA16I:case It.RGBA16UI:return 8;case It.RGB32F:case It.RGB32I:case It.RGB32UI:return 12;case It.RGBA32F:case It.RGBA32I:case It.RGBA32UI:return 16;case Ja.COMPRESSED_RGB_S3TC_DXT1_EXT:case Ja.COMPRESSED_RGBA_S3TC_DXT1_EXT:return .5;case Ja.COMPRESSED_RGBA_S3TC_DXT3_EXT:case Ja.COMPRESSED_RGBA_S3TC_DXT5_EXT:return 1;case Ja.COMPRESSED_R11_EAC:case Ja.COMPRESSED_SIGNED_R11_EAC:case Ja.COMPRESSED_RGB8_ETC2:case Ja.COMPRESSED_SRGB8_ETC2:case Ja.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:case Ja.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:return .5;case Ja.COMPRESSED_RG11_EAC:case Ja.COMPRESSED_SIGNED_RG11_EAC:case Ja.COMPRESSED_RGBA8_ETC2_EAC:case Ja.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:return 1}return 0}let e1e=class{constructor(e=0,i=e){this.width=e,this.height=i,this.type=0,this.target=3553,this.pixelFormat=6408,this.dataType=OH.UNSIGNED_BYTE,this.samplingMode=9729,this.wrapMode=10497,this.maxAnisotropy=1,this.flipped=!1,this.hasMipmap=!1,this.isOpaque=!1,this.unpackAlignment=4,this.preMultiplyAlpha=!1,this.compareEnabled=!1,this.linearFilterDepth=!1,this.depth=1,this.isImmutable=!1}};function BYe(t){return t.width<=0||t.height<=0||t.depth<=0?0:Math.round(t.width*t.height*t.depth*(t.hasMipmap?4/3:1)*(t.internalFormat==null?4:VYe(t.internalFormat))*(t.target===34067?6:1))}const x2=()=>$e.getLogger("esri/views/webgl/textureUtils");function S2(t){const{width:e,height:i,depth:r}=t;(e!=null&&e<0||i!=null&&i<0||r!=null&&r<0)&&x2().error("Negative dimension parameters are not allowed!");const{internalFormat:n}=t;if(n&&(t1e(n)||i1e(n))){const{linearFilterDepth:s,compareEnabled:a,samplingMode:o,hasMipmap:l}=t;l&&x2().error("Depth textures cannot have mipmaps"),s?o!==9729&&o!==9728&&x2().error("Depth textures cannot sample mipmaps"):(o!==9728&&x2().error("Depth textures without filtering must use NEAREST filtering"),a&&x2().error("Depth textures without filtering cannot use compare function"))}}function UYe(t){return jYe.includes(t)}function t1e(t){return SF(FC,t)}function i1e(t){return SF(gz,t)}function HYe(t){return t!=null&&SF(Ja,t)}function Ex(t){return t!=null&&"type"in t&&t.type==="compressed"}function GYe(t){return t!=null&&"byteLength"in t}function Vae(t){return t!=null&&!Ex(t)&&!GYe(t)}function A1(t){return t===32879||t===35866}function Bae(t,e,i,r=1){let n=Math.max(e,i);return t===32879&&(n=Math.max(n,r)),Math.floor(Math.log2(n))+1}function PO(t){if(t.internalFormat!=null)return t.internalFormat;switch(t.dataType){case OH.FLOAT:switch(t.pixelFormat){case 6408:return It.RGBA32F;case 6407:return It.RGB32F;default:throw new ee("texture:unknown-format","Unable to derive format")}case OH.UNSIGNED_BYTE:switch(t.pixelFormat){case 6408:return It.RGBA8;case 6407:return It.RGB8}}const{pixelFormat:e}=t;return t.internalFormat=e===34041?gz.DEPTH24_STENCIL8:e===6402?FC.DEPTH_COMPONENT24:e,t.internalFormat}function qYe(t){let e="width"in t?t.width:t.codedWidth,i="height"in t?t.height:t.codedHeight;return t instanceof HTMLVideoElement&&(e=t.videoWidth,i=t.videoHeight),{width:e,height:i,depth:1}}let WYe=class r1e extends e1e{constructor(e,i){switch(super(),this.context=e,Object.assign(this,i),this.internalFormat){case It.R16F:case It.R32F:case It.R8_SNORM:case It.R8:this.pixelFormat=6403;break;case It.R8I:case It.R8UI:case It.R16I:case It.R16UI:case It.R32I:case It.R32UI:this.pixelFormat=36244}}static validate(e,i){return new r1e(e,i)}};const YYe=!!ve("esri-tests-disable-gpu-memory-measurements"),kf=()=>$e.getLogger("esri/views/webgl/Texture");var gs;let ZYe=(gs=class{constructor(e,i=null,r=null){if(this.type=1,this._glName=null,this._samplingModeDirty=!1,this._wrapModeDirty=!1,this._shadowFilterDirty=!1,this._wasImmutablyAllocated=!1,"context"in e)this._descriptor=e,r=i;else{const n=WYe.validate(e,i);if(!n)throw new ee("texture:invalid-descriptor","Texture descriptor invalid");this._descriptor=n}this._descriptor.target===34067?this._setDataCubeMap(r):this.setData(r)}get glName(){return this._glName}get descriptor(){return this._descriptor}get usedMemory(){return YYe?0:BYe(this._descriptor)}get isDirty(){return this._samplingModeDirty||this._wrapModeDirty||this._shadowFilterDirty}get hasWebGLTextureObject(){return!!this._glName}dispose(){this.abortCompression(),this.hasWebGLTextureObject&&this._descriptor.context?.gl&&(this._descriptor.context.instanceCounter.decrement(jae.Texture,this),this._descriptor.context.unbindTexture(this),this._descriptor.context.gl.deleteTexture(this._glName),this._glName=null,this._descriptor=null)}release(){this.dispose()}[Symbol.dispose](){this.dispose()}resize(e,i){const r=this._descriptor;if(r.width!==e||r.height!==i){if(this._wasImmutablyAllocated)throw new ee("texture:immutable-resize","Immutable textures can't be resized!");r.width=e,r.height=i,this._descriptor.target===34067?this._setDataCubeMap(null):this.setData(null)}}enableCompression(e){this._descriptor.compress=e}disableCompression(){this._descriptor.compress=void 0}setData(e){this.abortCompression(),!Ex(e)&&this._descriptor.internalFormat&&SF(Ja,this._descriptor.internalFormat)&&(this._descriptor.internalFormat=void 0),this._setData(e),!Ex(e)&&this._descriptor.compress&&this._compressOnWorker(e)}updateData(e,i,r,n,s,a,o=0){a||kf().error("An attempt to use uninitialized data!"),this.hasWebGLTextureObject||kf().error("An attempt to update uninitialized texture!");const l=this._descriptor;l.internalFormat=PO(l);const{context:c,pixelFormat:h,dataType:f,target:g,isImmutable:y}=l;if(y&&!this._wasImmutablyAllocated)throw new ee("texture:uninitialized","Cannot update immutable texture before allocation!");const b=c.bindTexture(this,gs.TEXTURE_UNIT_FOR_UPDATES,!0);(i<0||r<0||i+n>l.width||r+s>l.height)&&kf().error("An attempt to update out of bounds of the texture!"),this._configurePixelStorage();const{gl:_}=c;o&&(n&&s||kf().warn("Must pass width and height if `UNPACK_SKIP_ROWS` is used"),_.pixelStorei(_.UNPACK_SKIP_ROWS,o)),Vae(a)?_.texSubImage2D(g,e,i,r,n,s,h,f,a):Ex(a)?_.compressedTexSubImage2D(g,e,i,r,n,s,l.internalFormat,a.levels[e]):_.texSubImage2D(g,e,i,r,n,s,h,f,a),o&&_.pixelStorei(_.UNPACK_SKIP_ROWS,0),c.bindTexture(b,gs.TEXTURE_UNIT_FOR_UPDATES)}updateData3D(e,i,r,n,s,a,o,l){l||kf().error("An attempt to use uninitialized data!"),this.hasWebGLTextureObject||kf().error("An attempt to update an uninitialized texture!");const c=this._descriptor;c.internalFormat=PO(c);const{context:h,pixelFormat:f,dataType:g,isImmutable:y,target:b}=c;if(y&&!this._wasImmutablyAllocated)throw new ee("texture:uninitialized","Cannot update immutable texture before allocation!");A1(b)||kf().warn("Attempting to set 3D texture data on a non-3D texture");const _=h.bindTexture(this,gs.TEXTURE_UNIT_FOR_UPDATES);h.setActiveTexture(gs.TEXTURE_UNIT_FOR_UPDATES),(i<0||r<0||n<0||i+s>c.width||r+a>c.height||n+o>c.depth)&&kf().error("An attempt to update out of bounds of the texture!"),this._configurePixelStorage();const{gl:S}=h;if(Ex(l))l=l.levels[e],S.compressedTexSubImage3D(b,e,i,r,n,s,a,o,c.internalFormat,l);else{const $=l;S.texSubImage3D(b,e,i,r,n,s,a,o,f,g,$)}h.bindTexture(_,gs.TEXTURE_UNIT_FOR_UPDATES)}generateMipmap(){const e=this._descriptor;if(e.width===0||e.height===0)return;if(!e.hasMipmap){if(this._wasImmutablyAllocated)throw new ee("texture:immutable-change","Cannot add mipmaps to immutable texture after allocation");e.hasMipmap=!0,this._samplingModeDirty=!0,S2(e)}e.samplingMode===9729?(this._samplingModeDirty=!0,e.samplingMode=9985):e.samplingMode===9728&&(this._samplingModeDirty=!0,e.samplingMode=9984);const i=this._descriptor.context.bindTexture(this,gs.TEXTURE_UNIT_FOR_UPDATES);this._descriptor.context.setActiveTexture(gs.TEXTURE_UNIT_FOR_UPDATES),this._descriptor.context.gl.generateMipmap(e.target),this._descriptor.context.bindTexture(i,gs.TEXTURE_UNIT_FOR_UPDATES)}clearMipmap(){const e=this._descriptor;if(e.hasMipmap){if(this._wasImmutablyAllocated)throw new ee("texture:immutable-change","Cannot delete mipmaps to immutable texture after allocation");e.hasMipmap=!1,this._samplingModeDirty=!0,S2(e)}e.samplingMode===9985?(this._samplingModeDirty=!0,e.samplingMode=9729):e.samplingMode===9984&&(this._samplingModeDirty=!0,e.samplingMode=9728)}setSamplingMode(e){e!==this._descriptor.samplingMode&&(this._descriptor.samplingMode=e,this._samplingModeDirty=!0)}setWrapMode(e){e!==this._descriptor.wrapMode&&(this._descriptor.wrapMode=e,S2(this._descriptor),this._wrapModeDirty=!0)}setShadowFiltering(e){e!==this._descriptor.linearFilterDepth&&(this._descriptor.linearFilterDepth=this._descriptor.compareEnabled=e,this.setSamplingMode(e?9729:9728),S2(this._descriptor),this._shadowFilterDirty=!0)}applyChanges(){this._samplingModeDirty&&(this._applySamplingMode(),this._samplingModeDirty=!1),this._wrapModeDirty&&(this._applyWrapMode(),this._wrapModeDirty=!1),this._shadowFilterDirty&&(this._applyShadowMode(),this._shadowFilterDirty=!1)}abortCompression(){this._compressionAbortController=Nw(this._compressionAbortController)}_setData(e,i){const r=this._descriptor,n=r.context?.gl;if(!n)return;Ib(n),this.hasWebGLTextureObject||(this._glName=n.createTexture(),r.context.instanceCounter.increment(jae.Texture,this)),S2(r);const s=r.context.bindTexture(this,gs.TEXTURE_UNIT_FOR_UPDATES);r.context.setActiveTexture(gs.TEXTURE_UNIT_FOR_UPDATES),this._configurePixelStorage(),Ib(n);const a=i??r.target,o=A1(a);if(Vae(e))this._setDataFromTexImageSource(e,a);else{const{width:l,height:c,depth:h}=r;if(l==null||c==null)throw new ee("texture:missing-size","Width and height must be specified!");if(o&&h==null)throw new ee("texture:missing-depth","Depth must be specified!");if(r.internalFormat=PO(r),r.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(a,r.internalFormat,r.hasMipmap,l,c,h),Ex(e)){if(!HYe(r.internalFormat))throw new ee("texture:format-mismatch","Attempting to use compressed data with an uncompressed format!");this._setDataFromCompressedSource(e,r.internalFormat,a)}else this._texImage(a,0,r.internalFormat,l,c,h,e),Ib(n),r.hasMipmap&&this.generateMipmap()}this._applySamplingMode(),this._applyWrapMode(),this._applyAnisotropicFilteringParameters(),this._applyShadowMode(),Ib(n),r.context.bindTexture(s,gs.TEXTURE_UNIT_FOR_UPDATES)}_setDataCubeMap(e=null){for(let i=34069;i<=34074;i++)this._setData(e,i)}_configurePixelStorage(){const e=this._descriptor.context.gl,{unpackAlignment:i,flipped:r,preMultiplyAlpha:n}=this._descriptor;e.pixelStorei(e.UNPACK_ALIGNMENT,i),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,r?1:0),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n?1:0)}_setDataFromTexImageSource(e,i){const{gl:r}=this._descriptor.context,n=this._descriptor;n.internalFormat=PO(n);const s=A1(i),{width:a,height:o,depth:l}=qYe(e);n.width&&n.height,n.width||(n.width=a),n.height||(n.height=o),s&&n.depth,s&&(n.depth=l),n.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(i,n.internalFormat,n.hasMipmap,a,o,l),this._texImage(i,0,n.internalFormat,a,o,l,e),Ib(r),n.hasMipmap&&(this.generateMipmap(),Ib(r))}_setDataFromCompressedSource(e,i,r){const n=this._descriptor,{width:s,height:a,depth:o}=n,l=e.levels,c=Bae(r,s,a,o),h=Math.min(c,l.length)-1;this._descriptor.context.gl.texParameteri(n.target,33085,h),this._forEachMipmapLevel((f,g,y,b)=>{const _=l[Math.min(f,l.length-1)];this._compressedTexImage(r,f,i,g,y,b,_)},h)}_texStorage(e,i,r,n,s,a){const{gl:o}=this._descriptor.context;if(!UYe(i)&&!t1e(i)&&!i1e(i))throw new ee("texture:missing-format","Immutable textures must have a sized internal format");if(!this._descriptor.isImmutable)return;const l=r?Bae(e,n,s,a):1;if(A1(e)){if(a==null)throw new ee("texture:missing-depth","Missing depth dimension for 3D texture upload");o.texStorage3D(e,l,i,n,s,a)}else o.texStorage2D(e,l,i,n,s);this._wasImmutablyAllocated=!0}_texImage(e,i,r,n,s,a,o){const l=this._descriptor.context.gl,c=A1(e),{isImmutable:h,pixelFormat:f,dataType:g}=this._descriptor;if(h){if(o!=null){const y=o;if(c){if(a==null)throw new ee("texture:missing-depth","Missing depth dimension for 3D texture upload");l.texSubImage3D(e,i,0,0,0,n,s,a,f,g,y)}else l.texSubImage2D(e,i,0,0,n,s,f,g,y)}}else{const y=o;if(c){if(a==null)throw new ee("texture:missing-depth","Missing depth dimension for 3D texture upload");l.texImage3D(e,i,r,n,s,a,0,f,g,y)}else l.texImage2D(e,i,r,n,s,0,f,g,y)}}_compressedTexImage(e,i,r,n,s,a,o){const l=this._descriptor.context.gl,c=A1(e);if(this._descriptor.isImmutable){if(o!=null)if(c){if(a==null)throw new ee("texture:missing-depth","Missing depth dimension for 3D texture upload");l.compressedTexSubImage3D(e,i,0,0,0,n,s,a,r,o)}else l.compressedTexSubImage2D(e,i,0,0,n,s,r,o)}else if(c){if(a==null)throw new ee("texture:missing-depth","Missing depth dimension for 3D texture upload");l.compressedTexImage3D(e,i,r,n,s,a,0,o)}else l.compressedTexImage2D(e,i,r,n,s,0,o)}async _compressOnWorker(e){const{width:i,height:r,context:n,flipped:s,preMultiplyAlpha:a,hasMipmap:o}=this._descriptor,l=this._descriptor.compress?.compressionTracker,c=this._descriptor.compress?.compressionCallback,{compressedTextureETC:h,compressedTextureS3TC:f}=n.capabilities;if(!gs.compressionWorkerHandle?.isCompressible(e,this._descriptor)||!h&&!f)return;this.abortCompression();const g=new AbortController;let y;this._compressionAbortController=g,l?.increment();try{e instanceof Uint8Array?y=e.buffer:(y=await createImageBitmap(e,{imageOrientation:s?"flipY":"none"}),sr(g));const b={data:y,width:i,height:r,needsFlip:e instanceof Uint8Array&&this.descriptor.flipped,components:this._descriptor.pixelFormat===6408?4:3,preMultiplyAlpha:a,hasMipmap:o,hasETC:!!h,hasS3TC:!!f},_=await gs.compressionWorkerHandle.invoke(b,g.signal,"low");if(sr(g),_.compressedTexture&&this.hasWebGLTextureObject){const S=this.usedMemory;this._descriptor.internalFormat=_.internalFormat,this._setData(_.compressedTexture),c?.(S-this.usedMemory)}}catch(b){ss(b)||kf().error("Texture compression failed!")}finally{l?.decrement(),this._compressionAbortController?.signal.aborted&&(this._compressionAbortController=null),y instanceof ImageBitmap&&y.close()}}_forEachMipmapLevel(e,i=1/0){let{width:r,height:n,depth:s,hasMipmap:a,target:o}=this._descriptor;const l=o===32879;if(r==null||n==null||l&&s==null)throw new ee("texture:missing-size","Missing texture dimensions for mipmap calculation");for(let c=0;e(c,r,n,s),a&&(r!==1||n!==1||l&&s!==1)&&!(c>=i);++c)r=Math.max(1,r>>1),n=Math.max(1,n>>1),l&&(s=Math.max(1,s>>1))}_applySamplingMode(){const e=this._descriptor,i=e.context?.gl;let r=e.samplingMode,n=e.samplingMode;r===9985||r===9987?(r=9729,e.hasMipmap||(n=9729)):r!==9984&&r!==9986||(r=9728,e.hasMipmap||(n=9728)),i.texParameteri(e.target,i.TEXTURE_MAG_FILTER,r),i.texParameteri(e.target,i.TEXTURE_MIN_FILTER,n)}_applyWrapMode(){const e=this._descriptor,i=e.context?.gl;typeof e.wrapMode=="number"?(i.texParameteri(e.target,i.TEXTURE_WRAP_S,e.wrapMode),i.texParameteri(e.target,i.TEXTURE_WRAP_T,e.wrapMode)):(i.texParameteri(e.target,i.TEXTURE_WRAP_S,e.wrapMode.s),i.texParameteri(e.target,i.TEXTURE_WRAP_T,e.wrapMode.t))}_applyShadowMode(){const e=this._descriptor,i=e.context?.gl,r=e.compareEnabled?i.COMPARE_REF_TO_TEXTURE:i.NONE;i.texParameteri(e.target,i.TEXTURE_COMPARE_MODE,r),e.compareEnabled&&i.texParameteri(e.target,i.TEXTURE_COMPARE_FUNC,i.GREATER),Ib(i)}_applyAnisotropicFilteringParameters(){const e=this._descriptor,i=e.context.capabilities.textureFilterAnisotropic;i&&e.context.gl.texParameterf(e.target,i.TEXTURE_MAX_ANISOTROPY,e.maxAnisotropy??1)}},gs.TEXTURE_UNIT_FOR_UPDATES=0,gs.compressionWorkerHandle=null,gs);const dB=()=>$e.getLogger("esri.views.2d.engine.webgl.painter.highlight.HighlightGradient");function XYe(t,e){e.fillColor[0]=t.color.r/255,e.fillColor[1]=t.color.g/255,e.fillColor[2]=t.color.b/255,e.fillColor[3]=t.color.a,t.haloColor?(e.outlineColor[0]=t.haloColor.r/255,e.outlineColor[1]=t.haloColor.g/255,e.outlineColor[2]=t.haloColor.b/255,e.outlineColor[3]=t.haloColor.a):(e.outlineColor[0]=e.fillColor[0],e.outlineColor[1]=e.fillColor[1],e.outlineColor[2]=e.fillColor[2],e.outlineColor[3]=e.fillColor[3]),e.fillColor[3]*=t.fillOpacity,e.outlineColor[3]*=t.haloOpacity,e.fillColor[0]*=e.fillColor[3],e.fillColor[1]*=e.fillColor[3],e.fillColor[2]*=e.fillColor[3],e.outlineColor[0]*=e.outlineColor[3],e.outlineColor[1]*=e.outlineColor[3],e.outlineColor[2]*=e.outlineColor[3],e.outlineWidth=(1-t.haloBlur)*t.haloWidth,e.outerHaloWidth=t.haloBlur*t.haloWidth/2,e.innerHaloWidth=t.haloBlur*t.haloWidth/2,e.outlinePosition=0}const JYe=[0,0,0,0];let n1e=class{constructor(){this.type="single",this._highlightOptions=new fv,this._convertedHighlightOptions={fillColor:[0,0,0,0],outlineColor:[0,0,0,0],outlinePosition:0,outlineWidth:0,innerHaloWidth:0,outerHaloWidth:0},this._optionsShadeTexKey="",this._texelData=new Uint8Array(4*_2),this._minMaxDistance=[0,0]}setHighlightOptions(e){this._highlightOptions=e}applyHighlightOptions(e,i){this._updateGradientTexture(e),e.bindTexture(this._shadeTex,IYe),i.setUniform2fv("u_minMaxDistance",this._minMaxDistance)}destroy(){this._shadeTex?.dispose(),this._shadeTex=null}getReasonsWithGradients(){return[{activeReasons:(1<<Z_e)-1,activeGradient:this}]}_updateGradientTexture(e){const i=KYe(this._highlightOptions);if(i===this._optionsShadeTexKey)return;this._optionsShadeTexKey=i,XYe(this._highlightOptions,this._convertedHighlightOptions);const r=this._convertedHighlightOptions,n=r.outlinePosition-r.outlineWidth/2-r.outerHaloWidth,s=r.outlinePosition-r.outlineWidth/2,a=r.outlinePosition+r.outlineWidth/2,o=r.outlinePosition+r.outlineWidth/2+r.innerHaloWidth,l=Math.sqrt(Math.PI/2)*FYe,c=Math.abs(n)>l?Math.round(10*(Math.abs(n)-l))/10:0,h=Math.abs(o)>l?Math.round(10*(Math.abs(o)-l))/10:0;let f;c&&!h?dB().error("The outer rim of the highlight is "+c+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards positive values (inwards)."):!c&&h?dB().error("The inner rim of the highlight is "+h+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards negative values (outwards)."):c&&h&&dB().error("The highlight is "+Math.max(c,h)+"px away from the edge of the feature; consider reducing some width values.");const g=[void 0,void 0,void 0,void 0];function y(_,S,$){g[0]=(1-$)*_[0]+$*S[0],g[1]=(1-$)*_[1]+$*S[1],g[2]=(1-$)*_[2]+$*S[2],g[3]=(1-$)*_[3]+$*S[3]}const{_texelData:b}=this;for(let _=0;_<_2;++_)f=n+_/(_2-1)*(o-n),f<n?(g[0]=0,g[1]=0,g[2]=0,g[3]=0):f<s?y(JYe,r.outlineColor,(f-n)/(s-n)):f<a?[g[0],g[1],g[2],g[3]]=r.outlineColor:f<o?y(r.outlineColor,r.fillColor,(f-a)/(o-a)):[g[0],g[1],g[2],g[3]]=r.fillColor,b[4*_]=255*g[0],b[4*_+1]=255*g[1],b[4*_+2]=255*g[2],b[4*_+3]=255*g[3];if(this._minMaxDistance[0]=n,this._minMaxDistance[1]=o,!this._shadeTex){const _=new e1e(_2,1);_.wrapMode=33071,this._shadeTex=new ZYe(e,_)}this._shadeTex.updateData(0,0,0,_2,1,this._texelData)}};function KYe(t){return`${t.color};${t.haloColor};${t.haloOpacity};${t.fillOpacity};${t.haloWidth};${t.haloBlur}`}let QYe=class{constructor(){this.type="multi",this.gradients=[]}setHighlightOptions(e){for(let i=0;i<e.length;i++)this.gradients[i]||(this.gradients[i]=new n1e),this.gradients[i].setHighlightOptions(e[i]);for(let i=e.length+1;i<this.gradients.length;i++)this.gradients[i].destroy();this.gradients.length=e.length}destroy(){for(const e of this.gradients)e.destroy()}getReasonsWithGradients(){let e=1;const i=[];for(let r=0;r<this.gradients.length;r++){const n=this.gradients[r];i.push({activeReasons:e,activeGradient:n}),e<<=1}return i}};const s1e={color:{write:[!0,!0,!0,!0],blendMode:"composite"},depth:!1,stencil:{write:!1,test:{compare:514,mask:255,op:{fail:7680,zFail:7680,zPass:7681}}}},eZe={color:{write:[!0,!0,!0,!0],blendMode:"additive"},depth:!1,stencil:!1},tZe={...s1e,color:{write:[!0,!0,!0,!0],blendMode:"delete"}};function iZe({pixelRatio:t,state:e,displayLevel:i,requiredLevel:r},n){const s=1/2**(i-n.key.level),a=1/2**(r-n.key.level);return{displayMat3:e.displayMat3,displayViewMat3:e.displayViewMat3,displayViewScreenMat3:n.transforms.displayViewScreenMat3,viewMat3:e.viewMat3,tileMat3:n.transforms.tileMat3,displayZoomFactor:s,requiredZoomFactor:a,tileOffset:[n.x,n.y],currentScale:e.scale,currentZoom:i,metersPerSRUnit:kl(e.spatialReference),rotation:e.rotation,pixelRatio:t}}function a1e(t){return t.passOptions?.type==="highlight"}function o1e(t){return t.passOptions?.type==="hittest"}function rZe(t){if(!o1e(t))return null;const{position:e,distance:i,smallSymbolDistance:r,smallSymbolSizeThreshold:n}=t.passOptions;return{position:e,distance:i,smallSymbolDistance:r,smallSymbolSizeThreshold:n}}function nZe(t){if(!a1e(t))return null;const{activeReasons:e,highlightAll:i}=t.passOptions;return{activeReasons:e,highlightAll:i?1:0}}function QOt(t,e,i){const r={};for(const n in i)typeof i[n]!="function"?r[n]=i[n]:r[n]=i[n](t,e);return r}function eLt(t,e){const{attributeView:i,context:r}=t;return{storage:i.getUniforms(r),view:iZe(t,e),hittestRequest:rZe(t),highlight:nZe(t)}}function tLt(t){return{inside:t.selection===2,outside:t.selection===3}}function sZe(t){return o1e(t)?eZe:a1e(t)&&t.passOptions.stepType==="clear"?tZe:s1e}function iLt(t){const{row:e,col:i}=t.key,r=i*Nae,n=e*Nae;return{tileOffsetFromLocalOrigin:[r%AO,n%AO],maxIntsToLocalOrigin:[Math.floor(r/AO),Math.floor(n/AO)]}}const aZe=new Gt({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch",mesh:"mesh"});function rLt(t){return aZe.toJSON(t)}function nLt(t){const{bandCount:e,attributeTable:i,colormap:r,pixelType:n}=t.raster.rasterInfo;return e===1&&(i!=null||r!=null||n==="u8"||n==="s8")}function oZe(t,e){return e==null?(t?.destroy(),null):(t?.type==="single"&&Array.isArray(e)&&(t.destroy(),t=null),t?.type!=="multi"||Array.isArray(e)||(t.destroy(),t=null),t||(t=Array.isArray(e)?new QYe:new n1e),Array.isArray(e)?t.type==="multi"&&t.setHighlightOptions(e):t.type==="single"&&t.setHighlightOptions(e),t)}function sLt(t,e,i,r){const{painter:n,highlightGradient:s}=t,{highlight:a}=n.effects;if(!s)return;const o=t.passOptions,l=s.getReasonsWithGradients();for(let c=0;c<l.length;c++){const h={...t,passOptions:{type:"highlight",activeGradient:l[c].activeGradient,activeReasons:l[c].activeReasons,stepType:"burn",highlightAll:e}};if(a.bind(h),i(h),c<l.length-1){let g=0;for(let y=c+1;y<l.length;y++)g|=l[y].activeReasons;i({...t,passOptions:{type:"highlight",activeGradient:l[c].activeGradient,activeReasons:g,stepType:"clear",highlightAll:e}})}const f={...t,passOptions:{type:"highlight",activeGradient:l[c].activeGradient,activeReasons:l[c].activeReasons,stepType:"draw",highlightAll:e}};n.setPipelineState(sZe(t)),n.updatePipelineState(t.context),a.draw(f),a.unbind()}t.passOptions=o}const OO=t=>parseFloat(t)/100;function lZe(t,e,i){const r=typeof t.left=="string"?OO(t.left)*e:t.left,n=typeof t.right=="string"?OO(t.right)*e:t.right,s=typeof t.top=="string"?OO(t.top)*i:t.top,a=typeof t.bottom=="string"?OO(t.bottom)*i:t.bottom,o=s;return{xmin:r,xmax:Math.max(e-n,r),ymin:o,ymax:Math.max(i-a,s)}}function l1e(t,e,i,r){switch(e.type){case"rect":{const{width:n,height:s}=t,{xmin:a,xmax:o,ymin:l,ymax:c}=lZe(e,n,s),{x:h,y:f}=i;return h>a&&h<o&&f>l&&f<c}case"path":return e.path.length===0||!Array.isArray(e.path[0][0])||sZ(e.path,[i.x,i.y]);case"geometry":return e.geometry==null||(e.geometry.type==="polygon"?nZ(e.geometry,r):BM(e.geometry,r))}}function cZe(t){if(!t.highlights)return null;const e=t.highlights.findIndex(i=>i.name==="default");return e===-1?null:t.highlights.items[e]}function uZe(t,e){if(!t.highlights){if(!e)return;t.highlights=new We([new fv])}const i=t.highlights.findIndex(r=>r.name==="default");e?t.highlights.items[i].assignFrom(e):(t.highlights.removeAt(i),t.highlights.length===0&&(t.highlights=null))}async function dZe(t,e,i){const r=Uwe(e)?Bwe(t,e):e;if(!t.ready||isNaN(r.x)||isNaN(r.y))return{screenPoint:r,results:[]};let n=new Set;const s=new Set;let a=!1,o=null,l=null;i?.include?Hae(i.include,Uae(t,g=>{n.add(g),hB(g,y=>s.add(y))},(g,y)=>{s.add(g),n.add(y)},g=>{o||(o=new Set),o.add(g)},g=>n.add(g),()=>a=!0)):(a=!0,n=new Set(t.allLayerViews),n.forEach(g=>{hB(g,y=>s.add(y))})),i?.exclude&&Hae(i.exclude,Uae(t,g=>{n.delete(g),hB(g,y=>s.delete(y))},g=>s.delete(g),g=>{l||(l=new Set),l.add(g)}));const c=t.toMap(r),h=t.allLayerViews.filter(g=>!g.suspended&&n.has(g)&&g.clips.every(y=>l1e(t,y,r,c))).reverse();let f=[...a?t.graphicsView.hitTest(c).map(g=>({type:"graphic",graphic:g,layer:null,mapPoint:c})):[],...await Promise.all(h.map(g=>g.hitTest(c,r)).toArray())].filter(un).flat().filter(un);return f=f.filter(g=>g.type!=="graphic"||g.layer?.type!=="subtype-group"||s.has(g.graphic.layer)),o&&(f=f.filter(g=>!("graphic"in g)||!g.graphic||o?.has(LH(g.graphic)))),l&&(f=f.filter(g=>!("graphic"in g)||!g.graphic||!l?.has(LH(g.graphic)))),{screenPoint:r,results:f}}function Uae(t,e,i,r,n,s){return a=>{if(a instanceof Hr){if(a.layer===t)s?.();else{const o=t.allLayerViews.find(l=>l.layer===a.layer);o&&n?.(o)}r(LH(a))}else if(!("layer"in a&&"element"in a))if(a.type==="subtype-sublayer"){const o=t.allLayerViews.find(l=>l.layer===a.parent);o&&i(a,o)}else{const o=t.allLayerViews.find(l=>l.layer===a);o&&e(o)}}}function Hae(t,e){if(t)if(tR(t))for(const i of t)if(tR(i))for(const r of i)e(r);else e(i);else e(t)}function LH(t){const e=t.getObjectId();return e?`${t.layer?.uid??t.sourceLayer?.uid??"MapView"}/${e}`:`"MapView/${t.uid}`}function hB(t,e){const i=t.layer;i?.type==="subtype-group"&&i.sublayers.forEach(r=>{e(r)})}let $2=null,yz=!0;function hZe(t,e,i){if(!t||!e)throw new Error("Cannot construct image data without dimensions");if(yz)try{return new ImageData(t,e)}catch{yz=!1}return c1e(t,e,i)}function aLt(t,e,i,r){if(!e||!i)throw new Error("Cannot construct image data without dimensions");if(yz)try{return new ImageData(t,e,i)}catch{yz=!1}const n=c1e(e,i,r);return n.data.set(t,0),n}function pZe(){return $2||($2=document.createElement("canvas"),$2.width=1,$2.height=1),$2}function c1e(t,e,i){return i||(i=pZe()),i.getContext("2d").createImageData(t,e)}async function fZe(t,e){const i=window.URL.createObjectURL(t);try{const{data:r}=await Nt(i,{...e,responseType:"image"});return r}catch(r){throw ss(r)?r:new ee("invalid-image",`Could not fetch requested image at ${i}`)}finally{window.URL.revokeObjectURL(i)}}async function mZe(t,e){const{arrayBuffer:i,mediaType:r}=await gZe(t,e),n=r==="image/png";if(r==="image/gif"){const{isAnimatedGIF:s,parseGif:a}=await fe(()=>import("./gif-kdNgY3yg.js"),[]);if(s(i))return a(i,e)}if(n){const{isAnimatedPNG:s,parseApng:a}=await fe(()=>import("./apng-C1TNhten.js"),__vite__mapDeps([269,12]));if(s(i))return a(i,e)}return fZe(new Blob([i],{type:r}),e)}async function gZe(t,e){const i=Uw(t);if(i?.isBase64)return{arrayBuffer:Hpe(i.data),mediaType:i.mediaType};const r=await Nt(t,{responseType:"array-buffer",...e});return{arrayBuffer:r.data,mediaType:r.getHeader?.("Content-Type")??""}}function u1e(t,e,i){const{ctx:r,canvas:n}=h1e(t,i),s=r.getImageData(0,0,t.width,t.height),a=f1e(n,e);return p1e(n),{dataUrl:a,data:s}}function d1e(t,e){const{ctx:i,canvas:r}=h1e(t,e),n=i.getImageData(0,0,t.width,t.height);return p1e(r),n}function h1e(t,e){const i=yZe();e.premultipliedAlpha&&_Ze(t),i.width=t.width,i.height=t.height;const r=i.getContext("2d",{willReadFrequently:!0});return r.putImageData(t,0,0),e.flipY&&wZe(r),{ctx:r,canvas:i}}function p1e(t){t.width=0,t.height=0}function yZe(){return pB==null&&(pB=document.createElement("canvas")),pB}let pB=null;function f1e(t,e){const i=xZe[e.format],r=e.quality/100;return t.toDataURL(i,r)}function m1e(t,e){const i=bZe(t),r=$Ze[i];return{format:i,quality:go(e??r,0,100)}}function g1e(t,e){return e/Math.max(t[0],t[1])}function vZe(t,e,i,r=0,n=0,s=t.width-r,a=t.height-n,o=!1){const{data:l}=t,{width:c,height:h,data:f}=e,g=s/c,y=a/h,b=Math.ceil(g/2),_=Math.ceil(y/2),S=t.width;for(let $=0;$<h;$++)for(let C=0;C<c;C++){const I=4*(C+(o?h-$-1:$)*c);let P=0,O=0,N=0,R=0,G=0,Y=0;const Q=($+.5)*y;for(let ae=Math.floor($*y);ae<($+1)*y;ae++){const ce=Math.abs(Q-(ae+.5))/_,ne=(C+.5)*g,K=ce*ce;for(let le=Math.floor(C*g);le<(C+1)*g;le++){const re=Math.abs(ne-(le+.5))/b,he=Math.sqrt(K+re*re);if(he>=1)continue;let xe=2*he*he*he-3*he*he+1;const Pe=4*(r+le+(n+ae)*S);Y+=xe*l[Pe+3],O+=xe,!i&&l[Pe+3]<255&&(xe=xe*l[Pe+3]/255),N+=xe*l[Pe],R+=xe*l[Pe+1],G+=xe*l[Pe+2],P+=xe}}f[I]=N/P,f[I+1]=R/P,f[I+2]=G/P,f[I+3]=Y/O}return e}function bZe(t){switch(t){case"png":case"jpg":case"jpeg":return t;default:return SZe}}function wZe(t){t.save(),t.globalCompositeOperation="copy",t.scale(1,-1),t.translate(0,-t.canvas.height),t.drawImage(t.canvas,0,0),t.restore()}function _Ze(t){const e=t.data,i=e.length;for(let r=0;r<i;r+=4){const n=e[r+3];if(n!==255&&n>0){const s=255/n;e[r]=e[r]*s,e[r+1]=e[r+1]*s,e[r+2]=e[r+2]*s}}}const xZe={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},Gae=98,SZe="png",$Ze={png:100,jpg:Gae,jpeg:Gae},oLt=Object.freeze(Object.defineProperty({__proto__:null,createEmptyImageData:hZe,encode:u1e,encodeData:d1e,getFormatAndQuality:m1e,getMaximumResolutionScale:g1e,resampleHermite:vZe,toDataUrl:f1e},Symbol.toStringTag,{value:"Module"})),y1e={flipY:!0,premultipliedAlpha:!0};async function TZe(t,e){const i=await v1e(t,e),{format:r,quality:n}=m1e(e?.format,e?.quality);return u1e(i,{format:r,quality:n},y1e)}async function kZe(t,e){const i=await v1e(t,e);return d1e(i,y1e)}function v1e(t,e){const i=IZe(e||{},CZe(t.stage,t.size),t.size,t.padding),r=EZe(e,t.allLayerViews);return t.stage.takeScreenshot(i,r,t.backgroundColor,e?.rotation)}function EZe(t={},e){if(!t.layers)return;const i=[];return t.layers.forEach(r=>{const n=e.find(s=>s.layer.id===r.id);n?.container&&i.push(n.container)}),i}function CZe(t,e){return Math.min(4,g1e(e,Math.min(4096,t.context.parameters.maxTextureSize)))}function IZe(t,e,i,r){t.ignorePadding&&(r={left:0,right:0,top:0,bottom:0});let n=null;t.width!=null&&t.height!=null?n=[t.width,t.height]:t.width==null&&t.height!=null?n=[t.height,t.height]:t.width!=null&&t.height==null?n=[t.width,t.width]:t.width==null&&t.height==null&&(n=null);const s=i[0]-(r.left+r.right),a=i[1]-(r.top+r.bottom);let o,l,c=t.area||{x:0,y:0,width:s,height:a};if(n){const h=s/a,f=n[0]/n[1];if(f>h){const g=c.width/f;c={x:c.x,y:Math.round(c.y+(c.height-g)/2),width:c.width,height:Math.round(g)}}else{const g=c.height*f;c={x:Math.round(c.x+(c.width-g)/2),y:c.y,width:Math.round(g),height:c.height}}}else n=[c.width,c.height];return n[0]>c.width?(o=Math.min(n[0]/c.width,e),l=n[0]/c.width/o):(o=1,l=n[0]/c.width),{cropArea:{x:Math.round((c.x+r.left)*o),y:Math.round((c.y+r.top)*o),width:Math.round(c.width*o),height:Math.round(c.height*o)},outputScale:l,resolutionScale:o}}const MZe=t=>t.includes("Brush");let b1e=class{constructor(){this._names=new Map}begin(e){this._names.has(e)||(this._names.set(e,!1),MZe(e)&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${e}.Start`))}end(e){this._names.has(e)&&!this._names.get(e)&&(this._names.set(e,!0),performance.mark(`Esri.${e}.End`))}record(e){this._names.has(e)||(this._names.set(e,!0),performance.mark(`Esri.${e}`))}};const qae=Symbol("analyses-owner-handles");let wy=class extends lt{constructor(e){super(e),this._allAnalysisViews=new We,this._creatingViewCount=0,this._attachedToViewResolver=Wae(),this._items=new Map,this._moduleMap=new Map,this._scheduledUpdateHandle=null,this._emitOnView=(i,r)=>this.view.emit(i,r)}destroy(){this._disconnectOwners(),this._attachedToViewResolver.reject(Hi("AnalysisViewManager was destroyed")),this._set("view",null)}attach(){this._connectOwners(),this._attachedToViewResolver.resolve()}detach(){this._disconnectOwners(),this._attachedToViewResolver.reject(Hi()),this._attachedToViewResolver=Wae()}get updating(){return!this.view.ready||this._creatingViewCount!==0||this._allAnalysisViews.some(e=>e.updating)}get testInfo(){}async whenAnalysisView(e){await this._attachedToViewResolver.promise;const i=this._items.get(e);if(i==null||i.state.list===1)throw new ee("AnalysisViewManager:no-analysis-view-for-analysis","The analysis does not exist in view.analyses",{analysis:e});return i.createAnalysisViewTask.promise}_connectOwners(){this.addHandles(this._connectAnalysesCollection(this.view.analyses),qae)}_disconnectOwners(){this.removeHandles(qae),this._update(),this._creatingViewCount=0}_connectAnalysesCollection(e){for(const n of e)this._addAnalysis(n);const i=e.on("after-add",n=>this._addAnalysis(n.item)),r=e.on("after-remove",n=>this._removeAnalysis(n.item));return Si(()=>{i.remove(),r.remove();for(const n of e)this._removeAnalysis(n)})}_addAnalysis(e){const i=this._items.get(e);if(i==null){const r={state:{view:0,list:0},analysis:e,view:null,createAnalysisViewTask:null};this._items.set(e,r),r.createAnalysisViewTask=JM(n=>this._createAnalysisViewPromise(r,n).then(s=>(this._emitOnView("analysis-view-create",{analysis:e,analysisView:s}),s),s=>{throw this._emitOnView("analysis-view-create-error",{analysis:e,error:s}),s}))}else i.state.list=0}_removeAnalysis(e){const i=this._items.get(e);i!=null?(i.state.list=1,this._scheduleUpdate()):$e.getLogger(this).error("Trying to remove analysis which was not added")}_scheduleUpdate(){this._scheduledUpdateHandle==null&&(this._scheduledUpdateHandle=$T(()=>this._update()))}_update(){this._scheduledUpdateHandle=Rr(this._scheduledUpdateHandle),this._items.forEach(e=>{if(e.state.list!==1)return;const{analysis:i,view:r}=e;switch(this._items.delete(i),e.state.view){case 0:e.createAnalysisViewTask=Nw(e.createAnalysisViewTask);break;case 1:r!=null&&(this._allAnalysisViews.remove(r),e.view=Ir(r),e.createAnalysisViewTask=null,this._emitOnView("analysis-view-destroy",{analysis:i,analysisView:r}))}})}async _createAnalysisViewPromise(e,i){const{analysis:r}=e;if(this._creatingViewCount+=1,!this._moduleMap.has(r.type))try{this._moduleMap.set(r.type,await this.importAnalysisViewModule(r))}catch{throw this._creatingViewCount-=1,new ee("AnalysisViewManager:no-analysis-view-for-analysis",`Analysis of type "${r.type}" is not supported`)}if(Pa(i))throw this._creatingViewCount-=1,Hi("AnalysisView creation aborted");const n=new(this._moduleMap.get(r.type)).default({analysis:r,view:this.view});let s=!0;Ma(i,()=>{s&&this._destroyAnalysisView(r,n)});try{await n.when()}catch(a){throw s=!1,this._destroyAnalysisView(r,n),a}if(Pa(i))throw Hi();return s=!1,e.view=n,e.state.view=1,this._allAnalysisViews.add(n),this._creatingViewCount-=1,n}_destroyAnalysisView(e,i){i.destroyed||(this._creatingViewCount-=1,i.destroy(),this._emitOnView("analysis-view-destroy",{analysis:e,analysisView:i}))}};d([m()],wy.prototype,"updating",null),d([m({constructOnly:!0})],wy.prototype,"importAnalysisViewModule",void 0),d([m({constructOnly:!0})],wy.prototype,"view",void 0),d([m()],wy.prototype,"_allAnalysisViews",void 0),d([m()],wy.prototype,"_creatingViewCount",void 0),wy=d([U("esri.views.support.AnalysisViewManager")],wy);const AZe=wy;function Wae(){const t=Qs();return t.promise.catch(()=>{}),t}let PZe=class{constructor(e){this.getUnmaskedRenderer=e}};function OZe(t){const e=t.getExtension("WEBGL_debug_renderer_info");return e?new PZe(()=>t.getParameter(e.UNMASKED_RENDERER_WEBGL)):null}let Yae;function LZe(){return Yae??=zZe(),Yae}let DZe=class{constructor(){this.available=!1,this.majorPerformanceCaveat=!1,this.maxTextureSize=0,this.supportsVertexShaderSamplers=!1,this.supportsHighPrecisionFragment=!1,this.supportsColorBufferFloat=!1,this.supportsColorBufferFloatBlend=!1,this.supportsColorBufferHalfFloat=!1,this.unmaskedRenderer="unloaded"}};function RZe(t){if(typeof WebGL2RenderingContext>"u")return null;const e=document.createElement("canvas");if(!e)return null;let i=e.getContext("webgl2",{failIfMajorPerformanceCaveat:!0});if(i==null&&(i=e.getContext("webgl2"),i!=null&&(t.majorPerformanceCaveat=!0,t.unmaskedRenderer=OZe(i)?.getUnmaskedRenderer()??"unknown")),i==null)return i;t.available=!0,t.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE),t.supportsVertexShaderSamplers=i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0;const r=i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT);return r&&(t.supportsHighPrecisionFragment=r.precision>0),i}function zZe(){const t=new DZe,e=RZe(t);return e==null||(t.supportsColorBufferFloat=e.getExtension("EXT_color_buffer_float")!==null,t.supportsColorBufferFloatBlend=e.getExtension("EXT_float_blend")!==null,t.supportsColorBufferHalfFloat=t.supportsColorBufferFloat||e.getExtension("EXT_color_buffer_half_float")!==null),t}function FZe(t){const e=LZe();return e.available?t==="3d"&&e.majorPerformanceCaveat?new ee("webgl:major-performance-caveat-detected",`Your WebGL implementation (${e.unmaskedRenderer}) doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist.`):e.supportsHighPrecisionFragment?e.supportsVertexShaderSamplers?null:new ee("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported."):new ee("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported."):new ee("webgl:required","WebGL2 is required but not supported.",new Error().stack)}function NZe(t){return t&&"nodeType"in t}function jZe(t){return t&&typeof t.render=="function"}const Zae={component:"esri-component"};let r0=class extends lt{constructor(){super(...arguments),this.widget=null}destroy(){this.node=null,this.widget?.destroy()}get id(){return this._get("id")??this.widget?.id??this.node?.id}set id(e){this._set("id",e)}set node(e){const i=this._get("node");e!==i&&(e&&e.classList.add(Zae.component),i&&i.classList.remove(Zae.component),this._set("node",e))}castNode(e){return this.widget?.destroy(),e?typeof e=="string"||NZe(e)?(this._set("widget",null),CY(e)):(jZe(e)&&!e.domNode&&(e.domNode=document.createElement("div")),this._set("widget",e),e.domNode):(this._set("widget",null),null)}};d([m()],r0.prototype,"id",null),d([m()],r0.prototype,"node",null),d([Ii("node")],r0.prototype,"castNode",null),d([m({readOnly:!0})],r0.prototype,"widget",void 0),r0=d([U("esri.views.ui.Component")],r0);const nD=r0,VZe={left:0,top:0,bottom:0,right:0},w1e={bottom:30,top:15,right:15,left:15},Ef="esri-ui",Zo={ui:Ef,corner:`${Ef}-corner`,innerContainer:`${Ef}-inner-container`,manualContainer:`${Ef}-manual-container`,cornerContainer:`${Ef}-corner-container`,topLeft:`${Ef}-top-left`,topRight:`${Ef}-top-right`,bottomLeft:`${Ef}-bottom-left`,bottomRight:`${Ef}-bottom-right`};function BZe(t){return t&&!t._started&&typeof t.postMixInProperties=="function"&&typeof t.buildRendering=="function"&&typeof t.postCreate=="function"&&typeof t.startup=="function"}function LO(t){return t===0?"0":`${t}px`}function fB(t){const e=typeof t=="object"&&t!==null&&Object.getPrototypeOf(t);return(e===null||e===Object.prototype)&&("component"in t||"index"in t||"position"in t)?t:null}function mB(t,{top:e,bottom:i,left:r,right:n}){t.style.top=e,t.style.bottom=i,t.style.left=r,t.style.right=n}let xh=class extends Rv{constructor(e){super(e),this._cornerNameToContainerLookup={},this._positionNameToContainerLookup={},this._components=new Array,this._componentMap=new Map,this._removeWidgetHandleKey=Symbol("componentOnRemoveSymbol"),this._locale=xl(),this.view=null,this._applyViewPadding=()=>{const i=this.container;i&&mB(i,this._toPixelPosition(this._getViewPadding()))},this._applyUIPadding=()=>{const i=this._innerContainer;i&&mB(i,this._toPixelPosition(this.padding))},this._initContainers()}initialize(){this.addHandles([ze(()=>[this.view?.padding,this.container],this._applyViewPadding,Di),ze(()=>this.padding,this._applyUIPadding,Di),ze(()=>[this.container,this._locale],([e,i])=>{e&&e.setAttribute("lang",i)},Di),gY(e=>{this._locale=e})])}destroy(){this.removeAllHandles(),this.container=null;for(const e of this._components)e.destroy();this._components.length=0,this._componentMap.clear(),this.view=null,this._set("view",null)}set container(e){const i=this._get("container");e!==i&&(e&&(e.classList.add(Zo.ui),e5e(e),this._attachContainers(e)),i&&(i.classList.remove(Zo.ui),mB(i,{top:"",bottom:"",left:"",right:""}),i.textContent=""),this._set("container",e))}get height(){const e=this.view?.height??0;if(e===0)return e;const i=this._getViewPadding(),{top:r,bottom:n}=i;return Math.max(e-r-n,0)}get padding(){return this._get("padding")}set padding(e){this._overrideIfSome("padding",e)}castPadding(e){return typeof e=="number"?{bottom:e,top:e,right:e,left:e}:{...w1e,...e}}get width(){const e=this.view?.width??0;if(e===0)return e;const i=this._getViewPadding(),{left:r,right:n}=i;return Math.max(e-r-n,0)}add(e,i){let r,n,s;if(Array.isArray(e))return void e.forEach(o=>this.add(o,i));const a=fB(e);a&&({index:r,position:i,component:e,key:n}=a),i&&typeof i=="object"&&({index:r,key:n,position:i,internal:s}=i),!e||i&&!this._isValidPosition(i)||this._add(e,i,r??this._getNumComponentsAtPosition(i),n,s)}remove(e,i){if(!e)return;if(Array.isArray(e))return e.map(n=>this.remove(n,i));const r=this._find(e);if(r){const n=this._componentMap.get(r);if(!n||n.key!==i)return;const s=this._components.indexOf(r);return r.node.parentNode?.removeChild(r.node),this._componentMap.delete(r),r.widget?.removeHandlesReference(this._removeWidgetHandleKey),this._components.forEach(o=>{const l=this._componentMap.get(o);l&&l.position===n.position&&l.index>n.index&&l.index--}),this._components.splice(s,1)[0]}}empty(e,i={removeInternal:!1}){if(Array.isArray(e)){for(const s of e)this.empty(s,i);return}const r=this._positionNameToContainerLookup[e??"manual"],n=Array.prototype.slice.call(r.children).map(s=>this._findByNode(s)).filter(s=>s==null?!1:!(this._componentMap.get(s)?.internal??!1)||i.removeInternal);for(const s of n)this.remove(s)}move(e,i){if(Array.isArray(e)&&e.forEach(a=>this.move(a,i)),!e)return;let r;const n=fB(e)||fB(i);if(n&&(r=n.index,i=n.position,e=n.component||e),i&&!this._isValidPosition(i))return;const s=this.remove(e);s&&this.add(s,{position:i,index:r})}find(e){if(!e)return null;const i=this._findById(e);return i&&(i.widget||i.node)}getComponents(e,i={includeInternal:!1}){return e?Array.isArray(e)?e.flatMap(r=>this._getComponentsAtPosition(r,i)):this._getComponentsAtPosition(e,i):this._components.filter(r=>i.includeInternal||!this._componentMap.get(r)?.internal).map(({widget:r,node:n})=>r??n)}getPosition(e){for(const i in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[i].contains(e))return i;return null}_add(e,i,r,n,s){e instanceof nD||(e=new nD({node:e}));const{widget:a}=e;a!=null&&a instanceof lt&&a.addHandles(Si(()=>{queueMicrotask(()=>this.remove(e))}),this._removeWidgetHandleKey);const o=this._positionNameToContainerLookup[i];this._components.some(l=>{const c=this._componentMap.get(l)?.position,h=c?this._positionNameToContainerLookup[c]:null;return o===h&&this._componentMap.get(l)?.index===r})&&this._components.forEach(l=>{const c=this._componentMap.get(l),h=c?.position,f=h?this._positionNameToContainerLookup[h]:null;c&&f===o&&c.index>=r&&c.index++}),this._place({component:e,position:i,index:r}),this._components.push(e),this._componentMap.set(e,{key:n,position:i,internal:s,index:r})}_find(e){return e?e instanceof nD?this._findByComponent(e):typeof e=="string"?this._findById(e):"domNode"in e?this._findByNode(e.domNode):this._findByNode(e):null}_getViewPadding(){return this.view?.padding??VZe}_attachContainers(e){e.appendChild(this._innerContainer),e.appendChild(this._manualContainer)}_initContainers(){const e=document.createElement("div");e.classList.add(Zo.innerContainer,Zo.cornerContainer);const i=document.createElement("div");i.classList.add(Zo.innerContainer,Zo.manualContainer);const r=document.createElement("div");r.classList.add(Zo.topLeft,Zo.corner),e.appendChild(r);const n=document.createElement("div");n.classList.add(Zo.topRight,Zo.corner),e.appendChild(n);const s=document.createElement("div");s.classList.add(Zo.bottomLeft,Zo.corner),e.appendChild(s);const a=document.createElement("div");a.classList.add(Zo.bottomRight,Zo.corner),e.appendChild(a),this._innerContainer=e,this._manualContainer=i;const o=Bze();this._cornerNameToContainerLookup={"top-left":r,"top-right":n,"bottom-left":s,"bottom-right":a,"top-leading":o?n:r,"top-trailing":o?r:n,"bottom-leading":o?a:s,"bottom-trailing":o?s:a},this._positionNameToContainerLookup={manual:i,...this._cornerNameToContainerLookup}}_isValidPosition(e){return!!this._positionNameToContainerLookup[e]}_place(e){const i=e.position??"manual",{component:r,index:n}=e,s=this._positionNameToContainerLookup[i],a=n!=null&&n>-1;if(BZe(r.widget)&&r.widget.startup(),!a)return void s.appendChild(r.node);const o=Array.from(s.children);if(o.length!==0){for(const l of o){const c=this._findByNode(l);if(c&&n<(this._componentMap.get(c)?.index??0))return void l.parentNode?.insertBefore(r.node,l)}s.appendChild(r.node)}else s.appendChild(r.node)}_toPixelPosition(e){return{top:LO(e.top),left:LO(e.left),right:LO(e.right),bottom:LO(e.bottom)}}_findByComponent(e){return this._components.find(i=>i===e)??null}_findById(e){return this._components.find(({id:i})=>i===e)??null}_findByNode(e){return e?this._components.find(({node:i})=>i===e):null}_getComponentsAtPosition(e,i){const r=this._positionNameToContainerLookup[e];return Array.prototype.slice.call(r.children).map(n=>this._findByNode(n)).filter(un).filter(n=>i.includeInternal||!this._componentMap.get(n)?.internal).map(({widget:n,node:s})=>n??s)}_getNumComponentsAtPosition(e){return this._positionNameToContainerLookup[e]?.children.length??0}};d([m()],xh.prototype,"_locale",void 0),d([m()],xh.prototype,"container",null),d([m()],xh.prototype,"height",null),d([m({value:w1e})],xh.prototype,"padding",null),d([Ii("padding")],xh.prototype,"castPadding",null),d([m()],xh.prototype,"view",void 0),d([m()],xh.prototype,"width",null),xh=d([U("esri.views.ui.UI")],xh);const UZe=xh,HZe=new Map;function GZe(t){return HZe.get(t)}function Xae(t,e){return t&&"copyright"in t&&(!e||typeof t.originOf=="function"&&t.originOf("copyright")==="user")}function qZe(t,e){return t.length!==e.length||t.some((i,r)=>i.text!==e[r].text)}function DO(t,e,i){!i||!e||t.find(r=>r.layerView===e&&r.text===i)||t.push({text:i,layerView:e})}function WZe(t){return t.type==="bing-maps"}const oh=[];let Cx=class extends lt{constructor(e){super(e),this._clear=()=>{this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.removeHandles("suspension"),this.notifyChange("state")},this._pendingAttributions=new Set,this._fetchedAttributionData=new Map,this.items=new We,this.view=null,this._allLayerViewsChange=i=>{this.removeHandles("suspension"),this.removeHandles("visible-geometry-changed");const r=this.view?.allLayerViews;r&&(this.addHandles(r.map(n=>ze(()=>[n.suspended,n.layer?.attributionVisible],()=>this._updateAttributionItems())).toArray(),"suspension"),r.forEach(n=>{n.declaredClass==="esri.views.3d.layers.IntegratedMesh3DTilesLayerView3D"&&this.addHandles(n.on("visible-geometry-changed",()=>this._updateAttributionItems()),"visible-geometry-changed")})),i?.removed&&i.removed.forEach(n=>{this._pendingAttributions.delete(n),this._fetchedAttributionData.delete(n)}),this._updateAttributionItems()},this.addHandles([Oa(()=>this.view?.allLayerViews,"change",i=>this._allLayerViewsChange(i),{onListenerAdd:()=>this._allLayerViewsChange(),onListenerRemove:this._clear}),as(()=>this.view?.stationary===!0,()=>this._updateAttributionItems())])}destroy(){this.view=null,this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.items.removeAll()}get state(){return this.view?.ready?this._pendingAttributions.size>0?"loading":"ready":"disabled"}_updateAttributionItems(){const e=this.view,i=e?.allLayerViews;oh.length=0;let r=!1,n=null;if(!e||!i)return void this._clear();i.forEach(a=>{if(a.suspended||!a.layer?.attributionVisible)return;const o=a.layer;if(Xae(o,"user"))return void DO(oh,a,o.copyright);if(o.type==="integrated-mesh-3dtiles"&&o.hasGoogleUrl&&(r=!0,n=a),o.hasAttributionData){if(this._fetchedAttributionData.has(a)){const c=this._fetchedAttributionData.get(a);return void(c?DO(oh,a,this._getDynamicAttribution(c,e,o)):Xae(o)&&DO(oh,a,o.copyright))}return void this._fetchAttributionData(a)}const l="portalItem"in o?o.portalItem?.accessInformation:void 0;DO(oh,a,l||o.copyright)});const s=i.find(a=>a.layer?.type==="integrated-mesh-3dtiles");if(this.view&&s){const a=GZe(this.view);if(a){const o=a.getAttributionText();for(let l=o.length-1;l>-1;--l)oh.unshift({text:o[l],layerView:s})}}r&&n&&oh.unshift({text:"Google Maps",layerView:n}),qZe(this.items,oh)&&(this.items.removeAll(),this.items.addMany(oh)),oh.length=0,this.notifyChange("state")}async _fetchAttributionData(e){if(this._pendingAttributions.has(e))return;this._pendingAttributions.add(e);const i=await hN(e.layer.fetchAttributionData());if(this._pendingAttributions.has(e)){const r=i.ok?this._createContributionIndex(i.value,WZe(e.layer)):null;this._pendingAttributions.delete(e),this._fetchedAttributionData.set(e,r)}this._updateAttributionItems()}_createContributionIndex(e,i){const r=e.contributors,n={};if(!r)return n;for(let s=0;s<r.length;s++){const a=r[s],o=a.coverageAreas;if(!o)return;for(const l of o){const c=l.bbox,h=l.zoomMin-(i&&l.zoomMin?1:0),f=l.zoomMax-(i&&l.zoomMax?1:0),g=new Wt({xmin:c[1],ymin:c[0],xmax:c[3],ymax:c[2],spatialReference:at.WGS84}),y={extent:Nm(g),attribution:a.attribution||"",score:l.score!=null?l.score:100,id:s};for(let b=h;b<=f;b++)n[b]??=[],n[b].push(y)}}return n.maxKey=Math.max.apply(null,Object.keys(n)),n}_getDynamicAttribution(e,i,r){const{extent:n,scale:s}=i;let a=r.tileInfo?.scaleToZoom(s)??0;if(a=Math.min(e.maxKey??0,Math.round(a)),!n||a==null||a<=-1)return"";const o=e[a],l=XF(n.center.clone().normalize(),at.WebMercator),c=new Set;return o?o.filter(h=>{const f=h.id,g=!c.has(f)&&l&&h.extent&&BM(h.extent,l);return g&&c.add(f),g}).sort((h,f)=>f.score-h.score||h.objectId-f.objectId).map(h=>h.attribution).join(", "):""}};d([m({readOnly:!0,type:We})],Cx.prototype,"items",void 0),d([m({readOnly:!0})],Cx.prototype,"state",null),d([m()],Cx.prototype,"view",void 0),Cx=d([U("esri.widgets.Attribution.AttributionViewModel")],Cx);const _1e=Cx,wl={button:"esri-button",buttonDisabled:"esri-button--disabled",buttonHalf:"esri-button--half",buttonSecondary:"esri-button--secondary",buttonSmall:"esri-button--small",buttonTertiary:"esri-button--tertiary",buttonThird:"esri-button--third",disabled:"esri-disabled",empty:"esri-widget__content--empty",heading:"esri-widget__heading",hidden:"esri-hidden",interactive:"esri-interactive",panel:"esri-widget--panel",table:"esri-widget__table",widget:"esri-widget",widgetButton:"esri-widget--button"};function YZe(){return function(t,e){if(!t[e])throw new TypeError(`Cannot auto bind undefined function '${String(e)}'`);return{value:XZe(t[e])}}}function ZZe(t){const e=t?.type;return t instanceof KeyboardEvent||e==="keyup"||e==="keydown"||e==="keypress"}function XZe(t){return function(e,...i){ZZe(e)?Uze(e.key)&&(e.preventDefault(),e.stopPropagation(),e.target.click()):t.call(this,e,...i)}}const P1="esri-attribution",O1={base:P1,poweredBy:`${P1}__powered-by`,sources:`${P1}__sources`,open:`${P1}--open`,sourcesOpen:`${P1}__sources--open`,link:`${P1}__link`};let xo=class extends zv{constructor(e,i){super(e,i),this._isOpen=!1,this._attributionTextOverflowed=!1,this._prevSourceNodeHeight=0,this._sourcesNode=null,this._overflowRequestAnimationFrame=null,this._resizeObserver=new ResizeObserver(r=>{r.forEach(({target:n})=>{this._scheduleOverflowCheck(n)})}),this._mutationObserver=new MutationObserver(r=>{let n=!1;for(const s of r)if(s.type==="childList"||s.type==="characterData"||s.type==="attributes"){n=!0;break}n&&this._sourcesNode&&this._scheduleOverflowCheck(this._sourcesNode)}),this.itemDelimiter=" | ",this.messages=null,this.viewModel=new _1e}initialize(){this.addHandles(Oa(()=>this.viewModel?.items,"change",()=>this.scheduleRender()))}destroy(){this._resizeObserver?.disconnect(),this._mutationObserver?.disconnect(),this._overflowRequestAnimationFrame!=null&&(cancelAnimationFrame(this._overflowRequestAnimationFrame),this._overflowRequestAnimationFrame=null)}get _isInteractive(){return this._isOpen||this._attributionTextOverflowed}_scheduleOverflowCheck(e){this._overflowRequestAnimationFrame==null&&(this._overflowRequestAnimationFrame=requestAnimationFrame(()=>{this._overflowRequestAnimationFrame=null,this._checkSourceTextOverflow(e)}))}get attributionText(){return this.viewModel.items.reduce((e,i)=>(e.includes(i.text)||e.push(i.text),e),[]).join(this.itemDelimiter)}get icon(){return"description"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){const e={[O1.open]:this._isOpen};return Ke("div",{bind:this,class:this.classes(O1.base,wl.widget,e),dir:"ltr",onclick:this._toggleState,onkeydown:this._toggleState},this._renderSourcesNode(),this._renderPoweredBy())}_renderPoweredBy(){return Ke("div",{class:O1.poweredBy},"Powered by"," ",Ke("a",{class:O1.link,href:"https://www.esri.com/",rel:"noreferrer",target:"_blank"},"Esri"))}_renderSourcesNode(){const e=this._isOpen,i=this._isInteractive,r=i?0:void 0,{attributionText:n}=this,s={[O1.sourcesOpen]:e,[wl.interactive]:i};return Ke("div",{afterCreate:this._afterSourcesNodeCreate,bind:this,class:this.classes(O1.sources,s),innerHTML:n,tabIndex:r})}_afterSourcesNodeCreate(e){this._prevSourceNodeHeight=e.clientWidth,this._sourcesNode=e,this._resizeObserver.observe(e),this._mutationObserver.observe(e,{subtree:!0,childList:!0,characterData:!0,attributes:!0}),this._scheduleOverflowCheck(e)}_checkSourceTextOverflow(e){let i=!1;const{clientHeight:r,clientWidth:n,scrollWidth:s}=e,a=s>n,o=this._attributionTextOverflowed!==a;if(this._attributionTextOverflowed=a,o&&(i=!0),this._isOpen){const l=r<this._prevSourceNodeHeight;this._prevSourceNodeHeight=r,l&&(this._isOpen=!1,i=!0)}i&&this.scheduleRender()}_toggleState(){this._isInteractive&&(this._isOpen=!this._isOpen)}};d([m()],xo.prototype,"_isOpen",void 0),d([m()],xo.prototype,"_isInteractive",null),d([m()],xo.prototype,"_attributionTextOverflowed",void 0),d([m()],xo.prototype,"_prevSourceNodeHeight",void 0),d([m({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],xo.prototype,"attributionText",null),d([m()],xo.prototype,"icon",null),d([m()],xo.prototype,"itemDelimiter",void 0),d([m()],xo.prototype,"label",null),d([m(),$v("esri/widgets/Attribution/t9n/Attribution")],xo.prototype,"messages",void 0),d([m()],xo.prototype,"view",null),d([m({type:_1e})],xo.prototype,"viewModel",void 0),d([YZe()],xo.prototype,"_toggleState",null),xo=d([U("esri.widgets.Attribution")],xo);const JZe=xo;function KZe(){const t=ve("mapview-essential-goto-duration");return t==null?t:t}function QZe(t){return t?.spatialReference?.isWebMercator||t?.spatialReference?.isGeographic||!1}function eXe(t,e,i){return t.goTo(e,i)}const x1e=t=>{const e=t;let i=class extends e{constructor(...r){super(...r),this.goToOverride=null,this.view=null}callGoTo(r){const{view:n}=this;return MM(n),this.goToOverride?this.goToOverride(n,r):eXe(n,r.target,r.options)}};return d([m()],i.prototype,"goToOverride",void 0),d([m()],i.prototype,"view",void 0),i=d([U("esri.widgets.support.GoTo")],i),i};let n0=class extends x1e(lt){constructor(e){super(e),this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this._watchForView(Di)}destroy(){this.view=null}get canShowNorth(){return QZe(this.view)}get state(){return!this.view?.ready||this.view.type==="2d"&&!this.view.constraints.rotationEnabled?"disabled":this.canShowNorth?"compass":"rotation"}reset(){this.view?.ready&&(this.view?.type==="2d"?this.callGoTo({target:{rotation:0},options:{animationMode:"always",duration:KZe()}}):this.callGoTo({target:{heading:0}}))}_updateForRotation(e){e!=null&&this._set("orientation",{z:e})}_updateForCamera(e){if(!e)return;const i=-e.heading;this._set("orientation",{x:0,y:0,z:i})}_updateRotationWatcher(e){this.removeAllHandles(),this._watchForView(),e&&this.addHandles(e.type==="2d"?ze(()=>e?.rotation,this._updateForRotation,Di):ze(()=>e?.camera,this._updateForCamera,Di))}_watchForView(e){this.addHandles(ze(()=>this.view,this._updateRotationWatcher,e))}};d([m({readOnly:!0})],n0.prototype,"canShowNorth",null),d([m({readOnly:!0})],n0.prototype,"orientation",void 0),d([m({readOnly:!0})],n0.prototype,"state",null),d([m()],n0.prototype,"view",void 0),n0=d([U("esri.widgets.Compass.CompassViewModel")],n0);const fX=n0,Jae="esri-compass",Kae={base:Jae,iconContainer:`${Jae}__icon-container`};let Wf=class extends zv{constructor(e,i){super(e,i),this.messages=null,this.viewModel=new fX,this._reset=()=>{this.viewModel.reset()},this._toRotationTransform=r=>({transform:`rotateZ(${r.z}deg)`})}loadDependencies(){return g_({button:()=>fe(()=>Promise.resolve().then(()=>mA),void 0),icon:()=>fe(()=>Promise.resolve().then(()=>Aye),void 0)})}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(e){this.viewModel.goToOverride=e}get icon(){return this.viewModel.state==="rotation"?"arrow-up":"compass-needle"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}reset(){return this.viewModel.reset()}render(){const{orientation:e,state:i}=this.viewModel,{messages:r}=this;return Ke("div",{class:this.classes(Kae.base,wl.widget)},Ke("calcite-button",{class:wl.widgetButton,disabled:i==="disabled",kind:"neutral",label:r.reset,onclick:this._reset,round:!0,scale:"s",title:r.reset},Ke("div",{"aria-hidden":"true",class:Kae.iconContainer,title:r.reset},Ke("calcite-icon",{icon:this.icon,styles:this._toRotationTransform(e)}))))}};d([m()],Wf.prototype,"goToOverride",null),d([m()],Wf.prototype,"icon",null),d([m()],Wf.prototype,"label",null),d([m(),$v("esri/widgets/Compass/t9n/Compass")],Wf.prototype,"messages",void 0),d([m()],Wf.prototype,"view",null),d([m({type:fX})],Wf.prototype,"viewModel",void 0),Wf=d([U("esri.widgets.Compass")],Wf);const tXe=Wf,Qae="esri-navigation-toggle",eoe={base:Qae,isLayoutHorizontal:`${Qae}--horizontal`};let Ix=class extends lt{constructor(e){super(e),this._navigationMode="pan",this.view=null,e?.isDefaultViewModel||qIe($e.getLogger(this),"Navigation Toggle","arcgis-navigation-toggle",{version:"4.33"})}normalizeCtorArgs(e={}){const{isDefaultViewModel:i,...r}=e;return r}initialize(){this.addHandles(as(()=>this.view?.navigation?.actionMap,()=>this._updateNavigationActionMap()))}destroy(){this.view=null}get state(){return this.view?.ready&&this.view?.type==="3d"?"ready":"disabled"}get navigationMode(){return this._navigationMode}set navigationMode(e){this._navigationMode=e,this._updateNavigationActionMap()}toggle(){this.state!=="disabled"&&(this.navigationMode=this.navigationMode!=="pan"?"pan":"rotate")}_updateNavigationActionMap(){const e=this.view?.navigation?.actionMap;if(!e)return;const i=this._navigationMode==="pan";e.dragPrimary=i?"pan":"rotate",e.dragSecondary=i?"rotate":"pan"}};d([m({readOnly:!0})],Ix.prototype,"state",null),d([m()],Ix.prototype,"_navigationMode",void 0),d([m()],Ix.prototype,"view",void 0),Ix=d([U("esri.widgets.NavigationToggle.NavigationToggleViewModel")],Ix);const S1e=Ix;let Yf=class extends zv{constructor(e,i){super(e,i),this.messages=null,this.viewModel=new S1e({isDefaultViewModel:!0}),this.toggle=()=>this.viewModel.toggle(),this._panButton=null,this._rotateButton=null,this._toggle=()=>{const r=this.viewModel?.navigationMode==="pan"?this._rotateButton:this._panButton;NS(r),this.toggle()},e?.isDefaultUI||GIe($e.getLogger(this),"Navigation Toggle","arcgis-navigation-toggle",{version:"4.32"})}normalizeCtorArgs(e={}){const{isDefaultUI:i,...r}=e;return r}loadDependencies(){return g_({button:()=>fe(()=>Promise.resolve().then(()=>mA),void 0)})}get icon(){return"move"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){const e=this.viewModel?.state==="disabled",i=this.viewModel?.navigationMode==="pan",r=this.messages.toggle;return Ke("div",{class:this.classes(eoe.base,wl.widget,{[eoe.isLayoutHorizontal]:this.layout==="horizontal"})},Ke("calcite-button",{afterCreate:n=>{this._panButton=n},appearance:i?"outline-fill":"solid",class:wl.widgetButton,disabled:e,iconStart:"move",kind:"neutral",label:r,onclick:this._toggle,tabIndex:i?void 0:-1,title:r}),Ke("calcite-button",{afterCreate:n=>{this._rotateButton=n},appearance:i?"solid":"outline-fill",class:wl.widgetButton,disabled:e,iconStart:"rotate",kind:"neutral",label:r,onclick:this._toggle,tabIndex:i?-1:void 0,title:r}))}};d([m()],Yf.prototype,"icon",null),d([m()],Yf.prototype,"label",null),d([m({value:"vertical"})],Yf.prototype,"layout",null),d([m(),$v("esri/widgets/NavigationToggle/t9n/NavigationToggle")],Yf.prototype,"messages",void 0),d([m()],Yf.prototype,"view",null),d([m({type:S1e})],Yf.prototype,"viewModel",void 0),Yf=d([U("esri.widgets.NavigationToggle")],Yf);const iXe=Yf;let s0=class extends lt{get canZoomIn(){if(!this.view?.ready)return!1;const i=this.view?.constraints?.effectiveMaxScale;return i===0||this._scale>i}get canZoomOut(){const{view:e}=this;if(!e?.ready)return!1;const r=e.constraints?.effectiveMinScale;return r===0||this._scale<r}get _scale(){const e=this.view?.animation?.target;return(e&&"then"in e?void 0:e?.scale)??this.view?.scale??0}};d([m({readOnly:!0})],s0.prototype,"canZoomIn",null),d([m({readOnly:!0})],s0.prototype,"canZoomOut",null),d([m()],s0.prototype,"view",void 0),d([m()],s0.prototype,"_scale",null),s0=d([U("esri.widgets.Zoom.ZoomConditions2D")],s0);const rXe=s0;let Mx=class extends lt{get canZoomIn(){return!!this.view.ready}get canZoomOut(){return!!this.view.ready}};d([m({readOnly:!0})],Mx.prototype,"canZoomIn",null),d([m({readOnly:!0})],Mx.prototype,"canZoomOut",null),d([m()],Mx.prototype,"view",void 0),Mx=d([U("esri.widgets.Zoom.ZoomConditions3D")],Mx);const nXe=Mx;let _y=class extends lt{constructor(e){super(e)}destroy(){this.view=null}get canZoomIn(){return this._zoomConditions!=null&&this._zoomConditions.canZoomIn}get canZoomOut(){return this._zoomConditions!=null&&this._zoomConditions?.canZoomOut}get state(){return this.view?.ready?"ready":"disabled"}set view(e){e?e.type==="2d"?this._zoomConditions=new rXe({view:e}):e.type==="3d"&&(this._zoomConditions=new nXe({view:e})):this._zoomConditions=null,this._set("view",e)}zoomIn(){const e=this.view;this.canZoomIn&&e&&(e.type==="2d"?e.mapViewNavigation.zoomIn():_v(e.goTo({zoomFactor:2})))}zoomOut(){const e=this.view;this.canZoomOut&&e&&(e.type==="2d"?e.mapViewNavigation.zoomOut():_v(e.goTo({zoomFactor:.5})))}};d([m()],_y.prototype,"_zoomConditions",void 0),d([m()],_y.prototype,"canZoomIn",null),d([m()],_y.prototype,"canZoomOut",null),d([m({readOnly:!0})],_y.prototype,"state",null),d([m()],_y.prototype,"view",null),_y=d([U("esri.widgets.Zoom.ZoomViewModel")],_y);const $1e=_y,toe={base:"esri-zoom",horizontalLayout:"esri-zoom--horizontal"};let Zf=class extends zv{constructor(e,i){super(e,i),this.messages=null,this.viewModel=new $1e,this.zoomIn=()=>this.viewModel.zoomIn(),this.zoomOut=()=>this.viewModel.zoomOut()}loadDependencies(){return g_({button:()=>fe(()=>Promise.resolve().then(()=>mA),void 0)})}get icon(){return"magnifying-glass-plus"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}set view(e){this.viewModel.view=e}get view(){return this.viewModel.view}render(){const e={[toe.horizontalLayout]:this.layout==="horizontal"},{canZoomIn:i,canZoomOut:r}=this.viewModel,{zoomIn:n,zoomOut:s}=this.messages;return Ke("div",{class:this.classes(toe.base,wl.widget,e)},Ke("calcite-button",{class:wl.widgetButton,disabled:!i,iconStart:"plus",kind:"neutral",label:n,onclick:this.zoomIn,title:n}),Ke("calcite-button",{class:wl.widgetButton,disabled:!r,iconStart:"minus",kind:"neutral",label:s,onclick:this.zoomOut,title:s}))}};d([m()],Zf.prototype,"icon",null),d([m()],Zf.prototype,"label",null),d([m({value:"vertical"})],Zf.prototype,"layout",null),d([m(),$v("esri/widgets/Zoom/t9n/Zoom")],Zf.prototype,"messages",void 0),d([m()],Zf.prototype,"view",null),d([m({type:$1e})],Zf.prototype,"viewModel",void 0),Zf=d([U("esri.widgets.Zoom")],Zf);const sXe=Zf;function aXe(t){return t?.view!==void 0}let sD=class extends UZe{constructor(e){super(e),this._defaultPositionLookup={attribution:"manual",compass:"top-left","navigation-toggle":"top-left",zoom:"top-left"},this.components=[],this._updateViewAwareWidgets=i=>{this.components.forEach(r=>{const n=this._find(r),s=n?.widget;aXe(s)&&(s.view=i)})},this._componentsWatcher=(i,r)=>{this._removeComponents(r),this._addComponents(i),this._adjustPadding(i)}}initialize(){this.addHandles([ze(()=>this.components,this._componentsWatcher,Di),ze(()=>this.view,this._updateViewAwareWidgets,Di)])}_add(e,i,r,n,s){let a=e;if(typeof e=="string"&&this._defaultPositionLookup[e]){if(this._find(e))return;a=this._createComponent(e)}super._add(a,i,r,n,s)}_removeComponents(e){e.forEach(i=>{const r=this._find(i);r&&(this.remove(r),r.destroy())})}_adjustPadding(e){if(!e.includes("attribution")&&!this._isOverridden("padding")){const{top:i}=this.padding;this.padding=i}}_addComponents(e){this.constructed&&e.forEach(i=>this.add(this._createComponent(i),this._defaultPositionLookup[i]))}_createComponent(e){const i=this._createWidget(e);return new nD({id:e,node:i})}_createWidget(e){const i=this.view;switch(e){case"attribution":return new JZe({view:i});case"compass":return new tXe({view:i});case"navigation-toggle":return new iXe({view:i,isDefaultUI:!0});case"zoom":return new sXe({view:i})}}};d([m()],sD.prototype,"components",void 0),sD=d([U("esri.views.ui.DefaultUI")],sD);const T1e=sD;let aD=class extends T1e{constructor(e){super(e),this.components=["attribution","zoom"]}};d([m()],aD.prototype,"components",void 0),aD=d([U("esri.views.ui.2d.DefaultUI2D")],aD);const k1e=aD;let oXe=class{constructor(e={},i={},r=8,n=1/0){this.disabledExtensions=e,this.debugWebGLExtensions=i,this.maxAnisotropy=r,this.maxPreferredTexturePixels=n}},E1e=class DH{constructor(e,i,r=""){this.major=e,this.minor=i,this._context=r}lessThan(e,i){return this.major<e||e===this.major&&this.minor<i}greaterEqual(e,i){return!this.lessThan(e,i)}validate(e){if(this.major!==e.major){const i=this._context&&this._context+":",r=this._context&&this._context+" ";throw new ee(i+"unsupported-version",`Required major ${r}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:e})}}clone(){return new DH(this.major,this.minor,this._context)}static parse(e,i=""){const[r,n]=e.split("."),s=/^\s*\d+\s*$/;if(!r?.match||!s.test(r))throw new ee((i&&i+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:e});if(!n?.match||!s.test(n))throw new ee((i&&i+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:e});const a=parseInt(r,10),o=parseInt(n,10);return new DH(a,o,i)}},JS=class extends E1e{constructor(e,i){super(e,i,"webmap")}};function gB(t){return t!=null&&typeof t=="object"&&"declaredClass"in t&&t.declaredClass==="esri.WebMap"}const C1e=new JS(2,35);var RH;let oD=RH=class extends _e{constructor(t){super(t),this.color=new Ye([0,0,0,1])}clone(){return new RH(de({color:this.color}))}};d([m({type:Ye,json:{write:!0}})],oD.prototype,"color",void 0),oD=RH=d([U("esri.webmap.background.ColorBackground")],oD);const ON=oD;let I1e,M1e,A1e,P1e,O1e,L1e,D1e;async function lXe(){const[,{GraphicsView2D:t,GraphicContainer:e,LabelManager:i,MapViewNavigation:r,MagnifierView2D:n,GridView2D:s,Stage:a}]=await Promise.all([fe(()=>import("./webglDeps-CmjNAB84.js"),__vite__mapDeps([171,138,172,173,174,39])),fe(()=>import("./mapViewDeps-_ChtFB2J.js"),__vite__mapDeps([175,176,177,138,172,173,129,68,178,70,174,39,137,38,179,67,91,180,118,121,17,15,18,71,76,181,73,74,171,182,86,183,184,117,185,127,128,56,66,69,22,21,186,75,187,72,144,145,81,188,77,83,189,64,190,191,192,193,134,194,195]))]);M1e=t,A1e=e,P1e=i,O1e=r,L1e=n,D1e=s,I1e=a}var E$;let wi=(E$=class extends IWe(aqe(S6e(Z6e(C6e(LHe))))){get timeZone(){return super.timeZone}set timeZone(e){super.timeZone=e}constructor(e){super(e),this._magnifierView=null,this._gridView=null,this.stage=null,this._resolveWhenReady=[],this.rootLayerViews=new hu({getCollections:()=>[this.basemapView?.baseLayerViews,this.layerViews,this.basemapView?.referenceLayerViews],getChildrenFunction:()=>null}),this.featuresTilingScheme=null,this.graphicsView=null,this.labelManager=null,this.navigation=new CN({actionMap:new QZ({dragTertiary:"none"})}),this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},this.supersampleScreenshotsEnabled=!0,this.analyses=new Q$,this.analysisViewManager=new AZe({importAnalysisViewModule:i=>vYe(i),view:this}),this.floors=new We,this.grid=null,this.map=null,this.timeline=new b1e,this.type="2d",this.view2dType=null,this.ui=new k1e,this.animationsEnabled=!0,this.test={takeScreenshot:async i=>kZe(this._getScreenshotView(i),i)},this.padding={top:0,right:0,bottom:0,left:0},OVe()}destroy(){this.layerViewManager.clear(),this._set("preconditionsReady",!1),this.frameTask=Ir(this.frameTask),this.goToManager.destroy(),this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}get graphicsTileStore(){return new CYe(this.featuresTilingScheme)}get constraintsInfo(){const e=this.defaultsFromMap?.tileInfo,i=this.spatialReference;return{lods:e?.spatialReference?.equals(i)?e.lods:null,spatialReference:i}}get initialExtentRequired(){if(!this.stateManager)return!1;const{scale:e,constraints:i,center:r,viewpoint:n,extent:s}=this;let a=this.zoom;return!(this.map&&"initialViewProperties"in this.map&&this.map.initialViewProperties?.viewpoint)&&!s&&(i?.effectiveLODs||(a=-1),(!r||e===0&&a===-1)&&(n?.targetGeometry==null||n.targetGeometry.type!=="extent"&&!n.scale))}get defaultsFromMapSettings(){return{required:{extent:!1,heightModelInfo:!1,tileInfo:!0},requiresExtentInSpatialReference:this.spatialReferenceLocked}}get scheduler(){return this.frameTask.scheduler}get typeSpecificPreconditionsReady(){const e=this._getDefaultViewpoint();if(!e)return!1;const i=e.targetGeometry,r=this.spatialReference;return dbe(i.spatialReference,r)}get background(){return gB(this.map)?this.map.initialViewProperties.background:null}set background(e){this._override("background",e)}get center(){return this.stateManager?.center??null}set center(e){this.stateManager.center=e}get constraints(){return super.constraints}set constraints(e){super.constraints=e}get highlightOptions(){return cZe(this)}set highlightOptions(e){uZe(this,e)}get padding(){return this.stateManager?.padding}set padding(e){this.stateManager&&(this.stateManager.padding=e)}get rendering(){return this.stage?.renderRequested??!1}get resizeAlign(){return super.resizeAlign}set resizeAlign(e){super.resizeAlign=e}get resolution(){return this.stateManager.resolution??0}get rotation(){return super.rotation}set rotation(e){super.rotation=e}get scale(){return this.stateManager?.scale??0}set scale(e){this.stateManager&&(this.stateManager.scale=e)}get spatialReference(){return super.spatialReference}set spatialReference(e){super.spatialReference=e}get spatialReferenceLocked(){return this._get("spatialReferenceLocked")}set spatialReferenceLocked(e){this.stage&&$e.getLogger(this).warn("spatialReferenceLocked cannot be changed after the view has become ready"),this._set("spatialReferenceLocked",e)}get tileInfo(){return this.featuresTilingScheme?.tileInfo}get updating(){const e=!(!this.magnifier.visible||this.magnifier.position===null||!this._magnifierView?.updatingHandles.updating),i=!this.destroyed&&(!this.analysisViewManager||!this.layerViewManager||!this.labelManager||!this.graphicsView||this.analysisViewManager.updating===!0||this.layerViewManager.updating===!0||this.labelManager.updating===!0||this.graphicsView.updating===!0||this.allLayerViews.some(r=>!r.destroyed&&!("layerViews"in r)&&r.updating===!0)||e);if(ve("esri-2d-log-updating")){const r=this.allLayerViews.reduce((n,s)=>({...n,[`${s.layer.id}(${s.layer.type})`]:!s.destroyed&&!("layerViews"in s)&&s.updating}),{});console.log(`Updating MapView: ${i}
-> Null LayerViewManager: ${!this.layerViewManager}
-> Null LabelManager: ${!this.labelManager}
-> Null GraphicsView: ${!this.graphicsView}
-> layerViewManager.updating: ${this.layerViewManager?.updating}
-> labelManager.updating: ${this.labelManager?.updating}
-> graphicsView.updating: ${this.graphicsView?.updating}
-> allLayerViews: ${JSON.stringify(r)}
-> updatingMagnifier: ${e}
`)}return i}get viewpoint(){return super.viewpoint}set viewpoint(e){super.viewpoint=e}get visibleArea(){const e=this.stateManager.visibleArea;return e&&new br({rings:[e.map(i=>[i[0],i[1]])],spatialReference:this.spatialReference})}get zoom(){return this.stateManager.zoom??-1}set zoom(e){this.stateManager.zoom=e}get navigating(){return this.mapViewNavigation?.interacting??!1}async hitTest(e,i){return dZe(this,e,i)}async takeScreenshot(e){return TZe(this._getScreenshotView(e),e)}toScreen(e,i){return this.stateManager.toScreen(e,i)}async whenAnalysisView(e){if(e.parent==null)throw new ee("view:no-analysisview-for-analysis","The analysis does not exist in view.analyses",{analysis:e});return this.analysisViewManager.whenAnalysisView(e)}whenLayerView(e){return super.whenLayerView(e)}graphicChanged(e){this.graphicsView&&this.graphicsView.graphicUpdateHandler(e)}whenReady(){return new Promise(e=>{this.ready?e(this):this._resolveWhenReady.push(e)})}forceDOMReadyCycle(){this.forceReadyCycle()}getDefaultSpatialReference(){return this.map&&"initialViewProperties"in this.map&&this.map.initialViewProperties.spatialReference||this.defaultsFromMap?.spatialReference||null}getDefaultTimeZone(){return gB(this.map)?this.map.initialViewProperties.timeZone:null}getDefaultTimeExtent(){return gB(this.map)?this.map.initialViewProperties.timeExtent:null}getSurface(){return this.surface}hasLayerViewModule(e){return Pae.hasLayerViewModule(e)}importLayerView(e){return Pae.importLayerView(e)}pixelSizeAt(){return this.ready?this.resolution:($e.getLogger(this).error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}async popupHitTest(e){const i=this.toMap(e),r=await this.hitTest(e),n=this.allLayerViews.toArray().filter(c=>c.clips.every(h=>l1e(this,h,e,i))).reverse(),s=new globalThis.Map(n.map(c=>[c.layer.uid,c])),a=[];let o=0,l=0;for(;o<r.results.length||l<n.length;){const c=r.results.at(o);if(c&&c.type!=="graphic"){++o;continue}const h=s.get((c?.layer??c?.graphic.layer)?.uid);if((!c||h)&&l<n.length&&n.at(l)!==h){const f=n.at(l);"fetchPopupFeaturesAtLocation"in f&&a.push({mapPoint:i,layerView:f}),++l}else c&&(a.push({graphic:c.graphic,layerView:h}),++o)}return{hits:a,location:i}}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}async validate(){let e=FZe(this.type);if(ve("safari")&&ve("safari")<9&&(e=new ee("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:ve("safari")})),e!=null)throw $e.getLogger(this).warn("#validate()",e.message),e}loadAsyncDependencies(){return lXe()}_getDefaultViewpoint(){const{constraints:e,initialExtent:i,map:r,padding:n,size:s}=this;if(!e)return null;const a=r&&"initialViewProperties"in r?r.initialViewProperties:void 0,o=this.stateManager.getUserStartupOptions(this.size),l=a?.viewpoint,c=l?.targetGeometry?.extent??i,h=c?.center,f=l?.rotation??0,g=l?.scale||c&&MN(c,[s[0]-n.left-n.right,s[1]-n.top-n.bottom]),y=o.center??h,b=o.rotation??f,_=o.scale??g;return y&&_?new Os({targetGeometry:y,scale:_,rotation:b}):null}_startup(){this.timeline.begin("MapView Startup");const e=this._getDefaultViewpoint();this.stateManager.startup(e,this.size,this.spatialReference,this.defaultsFromMap.extent?.center),this.graphics.owner=this;const i=new bYe(this.surface),r=new I1e(this.surface,{canvas:this.renderCanvas,contextOptions:new oXe(this.deactivatedWebGLExtensions,this.debugWebGLExtensions),renderingOptions:this.renderingOptions,timeline:this.timeline},i);this.stage=r,this._magnifierView=new L1e,this._magnifierView.magnifier=this.magnifier,this._gridView=new D1e;const n=new P1e({view:this});this._set("labelManager",n);const s=new oYe({view:this});this._set("animationManager",s);const a=new O1e({view:this,animationManager:s});this._set("mapViewNavigation",a),this._setupSpatialReferenceDependentProperties(),this.addHandles([this.rootLayerViews.on("change",()=>this._updateStageChildren()),r.on("webgl-error",l=>this.fatalError=l.error),ze(()=>this.stationary,l=>r.stationary=l,Ta),ze(()=>this.background,l=>{r.backgroundColor=l?.color,this._magnifierView.backgroundColor=l?.color},Ta),ze(()=>this.magnifier,l=>this._magnifierView.magnifier=l,Ta),ze(()=>this.grid,l=>this._gridView.grid=l,Ta),ze(()=>this.renderingOptions,l=>r.renderingOptions=l,Ta),ze(()=>this.highlights.items.map(l=>({name:l.name,options:{fillColor:l.color,haloColor:l.haloColor,fillOpacity:l.fillOpacity,haloOpacity:l.haloOpacity,haloWidth:l.haloWidth,haloBlur:l.haloBlur}})),()=>{r.highlightGradient=oZe(r.highlightGradient,this.highlights.items)},Ta),ze(()=>this.state.id,()=>r.state=this.state,Ta),ze(()=>this.animationsEnabled,l=>{this.stage.animationsEnabled=l},Ta)],"map-view"),this._updateStageChildren();const o=this._resolveWhenReady;this._resolveWhenReady=[],o.forEach(l=>l(this)),this.timeline.end("MapView Startup"),this.frameTask.start(),this._set("ready",!0)}_teardown(){this._destroySpatialReferenceDependentProperties(),this.removeHandles("map-view"),this.mapViewNavigation.destroy(),this._set("mapViewNavigation",null),this.animation=null,this.animationManager.destroy(),this._set("animationManager",null),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this._gridView.destroy(),this.stage.destroy(),this.stage=null,this._set("graphicsView",null),this._magnifierView=null,this._gridView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,this.frameTask.stop(),this.stationaryManager.clear(),this._set("ready",!1),this.stateManager.teardown()}_updateStageChildren(){this.stage.removeAllChildren(),this.rootLayerViews.forEach(i=>{this.stage.addChild(i.container)});const e=this.graphicsView;this.stage.addChild(e.container),this.stage.addChild(this._magnifierView),this.stage.addChild(this._gridView)}_setupSpatialReferenceDependentProperties(){const e=new pYe(Cs.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",e);const i=new M1e({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new A1e(e)});this._set("graphicsView",i)}_destroySpatialReferenceDependentProperties(){const e=this.graphicsView;this._set("graphicsView",null),e.destroy(),this._set("featuresTilingScheme",null)}_getScreenshotView(e){const{allLayerViews:i,padding:r,size:n,stage:s}=this;return{allLayerViews:i,backgroundColor:e?.ignoreBackground?null:this.background?.color,padding:r,size:n,stage:s}}_spatialReferenceChanged(e){if(this.ready){this.frameTask.stop();for(const i of this.allLayerViews)i.processDetach();this._destroySpatialReferenceDependentProperties(),this.stateManager.changeSpatialReference(e),this.stage.state=this.state,this._setupSpatialReferenceDependentProperties();for(const i of this.allLayerViews)i.processAttach();this.frameTask.requestFrame(),this.frameTask.start(),this._updateStageChildren()}}},E$.type="2d",E$);d([m({constructOnly:!0})],wi.prototype,"deactivatedWebGLExtensions",void 0),d([m({constructOnly:!0})],wi.prototype,"debugWebGLExtensions",void 0),d([m({readOnly:!0})],wi.prototype,"featuresTilingScheme",void 0),d([m({readOnly:!0})],wi.prototype,"graphicsTileStore",null),d([m()],wi.prototype,"graphicsView",void 0),d([m()],wi.prototype,"constraintsInfo",null),d([m()],wi.prototype,"initialExtentRequired",null),d([m()],wi.prototype,"labelManager",void 0),d([m({type:CN,nonNullable:!0})],wi.prototype,"navigation",void 0),d([m({constructOnly:!0})],wi.prototype,"renderCanvas",void 0),d([m()],wi.prototype,"renderingOptions",void 0),d([m({constructOnly:!0})],wi.prototype,"supersampleScreenshotsEnabled",void 0),d([m()],wi.prototype,"defaultsFromMapSettings",null),d([m({readOnly:!0})],wi.prototype,"typeSpecificPreconditionsReady",null),d([m(M9(Q$,"analyses"))],wi.prototype,"analyses",void 0),d([m()],wi.prototype,"analysisViewManager",void 0),d([m({type:ON})],wi.prototype,"background",null),d([m()],wi.prototype,"center",null),d([m({type:We})],wi.prototype,"floors",void 0),d([m()],wi.prototype,"grid",void 0),d([m({type:fv})],wi.prototype,"highlightOptions",null),d([m()],wi.prototype,"map",void 0),d([m()],wi.prototype,"padding",null),d([m({readOnly:!0})],wi.prototype,"rendering",null),d([m({readOnly:!0})],wi.prototype,"resolution",null),d([m()],wi.prototype,"scale",null),d([m({type:Boolean,value:!1})],wi.prototype,"spatialReferenceLocked",null),d([m({readOnly:!0})],wi.prototype,"tileInfo",null),d([m({type:b1e,readOnly:!0})],wi.prototype,"timeline",void 0),d([m({readOnly:!0})],wi.prototype,"type",void 0),d([m({readOnly:!0})],wi.prototype,"updating",null),d([m({readOnly:!0})],wi.prototype,"view2dType",void 0),d([m({readOnly:!0})],wi.prototype,"visibleArea",null),d([m()],wi.prototype,"zoom",null),d([m({readOnly:!0})],wi.prototype,"navigating",null),d([m(),Ii(t=>t instanceof T1e?t:TT(k1e,t))],wi.prototype,"ui",void 0),d([m()],wi.prototype,"animationsEnabled",void 0),wi=d([U("esri.views.View2D")],wi);const cXe=wi;let lD=class extends cXe{constructor(e){super(e),this.view2dType="map"}};d([m({readOnly:!0})],lD.prototype,"view2dType",void 0),lD=d([U("esri.views.MapView")],lD);const uXe=lD;let dXe=class R1e{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(s8),this._values=new Map,this.multipleOriginsSupported=!0}clone(e){const i=new R1e,r=this._originStores[0];r&&r.forEach((n,s)=>{i.set(s,de(n),0)});for(let n=2;n<s8;n++){const s=this._originStores[n];s&&s.forEach((a,o)=>{e&&e.has(o)||i.set(o,de(a),n)})}return i}get(e,i){const r=i===void 0?this._values:this._originStores[i];return r?r.get(e):void 0}keys(e){const i=e==null?this._values:this._originStores[e];return i?[...i.keys()]:[]}set(e,i,r=7){let n=this._originStores[r];if(n||(n=new Map,this._originStores[r]=n),n.set(e,i),!this._values.has(e)||this._propertyOriginMap.get(e)<=r){const s=this._values.get(e);return this._values.set(e,i),this._propertyOriginMap.set(e,r),s!==i}return!1}delete(e,i=7){const r=this._originStores[i];if(!r)return;const n=r.get(e);if(r.delete(e),this._values.has(e)&&this._propertyOriginMap.get(e)===i){this._values.delete(e);for(let s=i-1;s>=0;s--){const a=this._originStores[s];if(a&&a.has(e)){this._values.set(e,a.get(e)),this._propertyOriginMap.set(e,s);break}}}return n}has(e,i){const r=i===void 0?this._values:this._originStores[i];return!!r&&r.has(e)}revert(e,i){for(;i>0&&!this.has(e,i);)--i;const r=this._originStores[i],n=r?.get(e),s=this._values.get(e);return this._values.set(e,n),this._propertyOriginMap.set(e,i),s!==n}originOf(e){return this._propertyOriginMap.get(e)||0}isAtOrigin(e,i){return this.has(e,i)&&this.originOf(e)===i}isBelowOrigin(e,i){return!this.has(e)||this.originOf(e)<i}forEach(e){this._values.forEach(e)}};const z1e=t=>{const e=t;let i=class extends e{constructor(...r){super(...r);const n=mo(this),s=n.store,a=new dXe;n.store=a,Fpe(n,s,a)}read(r,n){jpe(this,r,n)}getAtOrigin(r,n){const s=yB(this),a=Am(n);if(typeof r=="string")return s.get(r,a);const o={};return r.forEach(l=>{o[l]=s.get(l,a)}),o}originOf(r){return uI(this.originIdOf(r))}originIdOf(r){return yB(this).originOf(r)}revert(r,n){const s=yB(this),a=Am(n),o=mo(this);let l;l=typeof r=="string"?r==="*"?s.keys(a):[r]:r,l.forEach(c=>{o.invalidate(c),s.revert(c,a),o.commit(c)})}};return i=d([U("esri.core.ReadOnlyMultiOriginJSONSupport")],i),i};function yB(t){return mo(t).store}z1e(lt);const hXe=t=>{const e=t;let i=class extends e{constructor(...r){super(...r)}clear(r,n="user"){mo(this).clearOrigin(r,Am(n))}write(r,n){return Upe(this,r=r||{},n),r}setAtOrigin(r,n,s){mo(this).setAtOrigin(r,n,Am(s))}removeOrigin(r){const n=ioe(this),s=Am(r),a=n.keys(s);for(const o of a)n.originOf(o)===s&&n.set(o,n.get(o,s),7)}updateOrigin(r,n){const s=ioe(this),a=Am(n),o=co(this,r);for(let l=a+1;l<s8;++l)s.delete(r,l);s.set(r,o,a)}toJSON(r){return this.write({},r)}};return i=d([U("esri.core.MultiOriginJSONSupport.WriteableMultiOriginJSONSupport")],i),i.prototype.toJSON.isDefaultToJSON=!0,i};function ioe(t){return mo(t).store}const uA=t=>{const e=hXe(z1e(t));let i=class extends e{};return i=d([U("esri.core.MultiOriginJSONSupport")],i),i},pXe=uA(lt);async function fXe(t){const e=t.spatialReference;if(e.isWGS84)return t.clone();if(e.isWebMercator)return bS(t);const i=at.WGS84;return await TZ(e,i),jv(t,i)}function mXe(t,e){if(!KS(t,e)){const i=t.typeKeywords;i?i.push(e):t.typeKeywords=[e]}}function KS(t,e){return!!t.typeKeywords?.includes(e)}function ILt(t){return KS(t,mX.HOSTED_SERVICE)}function gXe(t,e){const i=t.typeKeywords;if(i){const r=i.indexOf(e);r>-1&&i.splice(r,1)}}function MLt(t,e,i){i?mXe(t,e):gXe(t,e)}async function ALt(t){const e=t.clone().normalize();let i;if(e.length>1)for(const r of e)i?r.width>i.width&&(i=r):i=r;else i=e[0];return fXe(i)}const mX={CHARTS:"Charts",DYNAMIC:"Dynamic",DEVELOPER_BASEMAP:"DeveloperBasemap",GROUP_LAYER_MAP:"Map",HOSTED_SERVICE:"Hosted Service",JSAPI:"ArcGIS API for JavaScript",METADATA:"Metadata",MULTI_LAYER:"Multilayer",ORIENTED_IMAGERY_LAYER:"OrientedImageryLayer",SINGLE_LAYER:"Singlelayer",SUBTYPE_GROUP_LAYER:"SubtypeGroupLayer",SUBTYPE_GROUP_TABLE:"SubtypeGroupTable",TABLE:"Table",TILED_IMAGERY:"Tiled Imagery"};function yXe(t){const{portal:e,isOrgItem:i,itemControl:r}=t,n=e.user?.privileges;let s=!n||n.includes("features:user:edit"),a=!!i&&!!n?.includes("features:user:fullEdit");const o=r==="update"||r==="admin";return o?a=s=!0:a&&(s=!0),{features:{edit:s,fullEdit:a},content:{updateItem:o}}}let xy=class extends _e{constructor(e){super(e),this.facilityIdField=null,this.layerId=null,this.nameField=null,this.siteIdField=null,this.sublayerId=null}};d([m({type:String,json:{write:{isRequired:!0}}})],xy.prototype,"facilityIdField",void 0),d([m({type:String,json:{write:{isRequired:!0}}})],xy.prototype,"layerId",void 0),d([m({type:String,json:{write:{isRequired:!0}}})],xy.prototype,"nameField",void 0),d([m({type:String,json:{write:!0}})],xy.prototype,"siteIdField",void 0),d([m({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],xy.prototype,"sublayerId",void 0),xy=d([U("esri.layers.support.FacilityLayerInfo")],xy);const vXe=xy;let ad=class extends _e{constructor(e){super(e),this.facilityIdField=null,this.layerId=null,this.levelIdField=null,this.levelNumberField=null,this.longNameField=null,this.shortNameField=null,this.sublayerId=null,this.verticalOrderField=null}};d([m({type:String,json:{write:{isRequired:!0}}})],ad.prototype,"facilityIdField",void 0),d([m({type:String,json:{write:{isRequired:!0}}})],ad.prototype,"layerId",void 0),d([m({type:String,json:{write:{isRequired:!0}}})],ad.prototype,"levelIdField",void 0),d([m({type:String,json:{write:{isRequired:!0}}})],ad.prototype,"levelNumberField",void 0),d([m({type:String,json:{write:{isRequired:!0}}})],ad.prototype,"longNameField",void 0),d([m({type:String,json:{write:{isRequired:!0}}})],ad.prototype,"shortNameField",void 0),d([m({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],ad.prototype,"sublayerId",void 0),d([m({type:String,json:{write:{isRequired:!0}}})],ad.prototype,"verticalOrderField",void 0),ad=d([U("esri.layers.support.LevelLayerInfo")],ad);const bXe=ad;let a0=class extends _e{constructor(e){super(e),this.layerId=null,this.nameField=null,this.siteIdField=null,this.sublayerId=null}};d([m({type:String,json:{write:{isRequired:!0}}})],a0.prototype,"layerId",void 0),d([m({type:String,json:{write:{isRequired:!0}}})],a0.prototype,"nameField",void 0),d([m({type:String,json:{write:{isRequired:!0}}})],a0.prototype,"siteIdField",void 0),d([m({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],a0.prototype,"sublayerId",void 0),a0=d([U("esri.layers.support.SiteLayerInfo")],a0);const wXe=a0;let Ax=class extends _e{constructor(e){super(e),this.levelLayer=null,this.facilityLayer=null,this.siteLayer=null}};d([m({type:bXe,json:{write:{isRequired:!0}}})],Ax.prototype,"levelLayer",void 0),d([m({type:vXe,json:{write:{isRequired:!0}}})],Ax.prototype,"facilityLayer",void 0),d([m({type:wXe,json:{write:!0}})],Ax.prototype,"siteLayer",void 0),Ax=d([U("esri.support.MapFloorInfo")],Ax);const _Xe=Ax;var zH;let Px=zH=class extends _e{constructor(t){super(t),this.activeRange=null,this.currentRangeExtent=null,this.fullRangeExtent=null}clone(){return new zH(de({activeRange:this.activeRange,currentRangeExtent:this.currentRangeExtent,fullRangeExtent:this.fullRangeExtent}))}};d([m({type:String,nonNullable:!0,json:{read:{source:"activeRangeName"},write:{target:"activeRangeName",isRequired:!0}}})],Px.prototype,"activeRange",void 0),d([m({type:[Number],json:{write:!0}})],Px.prototype,"currentRangeExtent",void 0),d([m({type:[Number],json:{write:!0}})],Px.prototype,"fullRangeExtent",void 0),Px=zH=d([U("esri.webdoc.RangeInfo")],Px);const gX=Px;var FH;let Sh=FH=class extends _e{constructor(t){super(t),this.enabled=!1,this.longNames=!1,this.minimized=!1,this.pinnedLevels=!1,this.site=null,this.facility=null,this.level=null}clone(){return new FH(de({enabled:this.enabled,longNames:this.longNames,minimized:this.minimized,pinnedLevels:this.pinnedLevels,site:this.site,facility:this.facility,level:this.level}))}};d([m({type:Boolean,json:{read:{source:"enabled"},write:{target:"enabled"}}})],Sh.prototype,"enabled",void 0),d([m({type:Boolean,json:{read:{source:"longNames"},write:{target:"longNames"}}})],Sh.prototype,"longNames",void 0),d([m({type:Boolean,json:{read:{source:"minimized"},write:{target:"minimized"}}})],Sh.prototype,"minimized",void 0),d([m({type:Boolean,json:{read:{source:"pinnedLevels"},write:{target:"pinnedLevels"}}})],Sh.prototype,"pinnedLevels",void 0),d([m({type:String,json:{read:{source:"site"},write:{target:"site"}}})],Sh.prototype,"site",void 0),d([m({type:String,json:{read:{source:"facility"},write:{target:"facility"}}})],Sh.prototype,"facility",void 0),d([m({type:String,json:{read:{source:"level"},write:{target:"level"}}})],Sh.prototype,"level",void 0),Sh=FH=d([U("esri.webdoc.widgets.FloorFilter")],Sh);const xXe=Sh;var NH;const RO=new Gt({slider:"slider",picker:"picker"});let Ox=NH=class extends _e{constructor(t){super(t),this.interactionMode=null,this.numStops=null,this.stopInterval=null}clone(){return new NH({interactionMode:this.interactionMode,numStops:this.numStops,stopInterval:this.stopInterval})}};d([m({type:RO.apiValues,nonNullable:!0,json:{type:RO.jsonValues,default:null,read:{reader:RO.read},write:{isRequired:!0,writer:RO.write}}})],Ox.prototype,"interactionMode",void 0),d([m({type:li,json:{read:{source:"numberOfStops"},write:{target:"numberOfStops",overridePolicy(){const t=this.stopInterval!=null;return{enabled:!t,isRequired:!t}}}}})],Ox.prototype,"numStops",void 0),d([m({type:Number,json:{write:{overridePolicy(){return{isRequired:this.numStops==null}}}}})],Ox.prototype,"stopInterval",void 0),Ox=NH=d([U("esri.webdoc.widgets.Range")],Ox);const SXe=Ox,yX=Gn()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0});let Od=class extends $t(_e){constructor(e){super(e),this.unit="milliseconds",this.value=0}toMilliseconds(){return Ibe(this.value,this.unit,"milliseconds")}};d([pt(yX,{nonNullable:!0})],Od.prototype,"unit",void 0),d([m({type:Number,json:{write:!0},nonNullable:!0})],Od.prototype,"value",void 0),Od=d([U("esri.time.TimeInterval")],Od);var jH;let Ss=jH=class extends _e{constructor(t){super(t),this.currentTimeExtent=null,this.fullTimeExtent=null,this.loop=!1,this.numStops=null,this.numThumbs=null,this.stopDelay=null,this.stopInterval=null,this.stops=null}readCurrentTimeExtent(t){return t?nr.fromArray(t):void 0}writeCurrentTimeExtent(t,e,i){t&&Bn(i,t.toArray(),e)}readFullTimeExtent(t,e){const i=e.properties;if(!i)return;const r=i.endTime!=null?new Date(i.endTime):null,n=i.startTime!=null?new Date(i.startTime):null;return new nr({start:n,end:r})}writeFullTimeExtent(t,e){if(!t)return;const i=e.properties=e.properties||{},r=t.end,n=t.start;r&&(i.endTime=r!=null?r.getTime():null),n&&(i.startTime=n!=null?n.getTime():null)}readStopInterval(t,e,i){return t?Od.fromJSON({value:t.interval,unit:t.units},i):null}writeStopInterval(t,e,i,r){if(!t)return;const n=t.toJSON(r);Bn("properties.timeStopInterval",{interval:n.value,units:n.unit},e)}readStops(t){return t?.length?t.map(e=>new Date(e)):null}writeStops(t,e,i){t?.length&&Bn(i,t.map(r=>r.getTime()),e)}clone(){return new jH(de({currentTimeExtent:this.currentTimeExtent,fullTimeExtent:this.fullTimeExtent,loop:this.loop,numStops:this.numStops,numThumbs:this.numThumbs,stopDelay:this.stopDelay,stopInterval:this.stopInterval,stops:this.stops}))}};d([m({type:nr,json:{type:[[li,kT]],read:{source:"properties.currentTimeExtent"},write:{target:"properties.currentTimeExtent"}}})],Ss.prototype,"currentTimeExtent",void 0),d([Ve("currentTimeExtent")],Ss.prototype,"readCurrentTimeExtent",null),d([qe("currentTimeExtent")],Ss.prototype,"writeCurrentTimeExtent",null),d([m({type:nr,json:{read:{source:["properties.endTime","properties.startTime"]},write:{target:{"properties.endTime":{type:Number},"properties.startTime":{type:Number}}}}})],Ss.prototype,"fullTimeExtent",void 0),d([Ve("fullTimeExtent")],Ss.prototype,"readFullTimeExtent",null),d([qe("fullTimeExtent")],Ss.prototype,"writeFullTimeExtent",null),d([m({type:Boolean,nonNullable:!0,json:{default:!1,read:{source:"properties.loop"},write:{target:"properties.loop"}}})],Ss.prototype,"loop",void 0),d([m({type:li,json:{read:{source:"properties.numberOfStops"},write:{target:"properties.numberOfStops",overridePolicy(){const t=!!this.stopInterval,e=!!this.stops?.length,i=!(t||e);return{enabled:i,isRequired:i}}}}})],Ss.prototype,"numStops",void 0),d([m({type:[1,2],nonNullable:!0,json:{type:li,read:{source:"properties.thumbCount"},write:{target:"properties.thumbCount",isRequired:!0}}})],Ss.prototype,"numThumbs",void 0),d([m({type:Number,nonNullable:!0,json:{read:{source:"properties.thumbMovingRate"},write:{target:"properties.thumbMovingRate",isRequired:!0}}})],Ss.prototype,"stopDelay",void 0),d([m({type:Od,json:{read:{source:"properties.timeStopInterval"},write:{target:{"properties.timeStopInterval.interval":{type:Number},"properties.timeStopInterval.units":{type:yX.jsonValues.filter(t=>t!=="esriTimeUnitsUnknown")}},overridePolicy(){const t=this.numStops!=null,e=!!this.stops?.length;return{enabled:!e,isRequired:!(t||e)}}}}})],Ss.prototype,"stopInterval",void 0),d([Ve("stopInterval")],Ss.prototype,"readStopInterval",null),d([qe("stopInterval")],Ss.prototype,"writeStopInterval",null),d([m({type:[Date],json:{type:[li],read:{source:"properties.stops"},write:{target:"properties.stops",overridePolicy(){return{isRequired:this.numStops==null&&!this.stopInterval}}}}})],Ss.prototype,"stops",void 0),d([Ve("stops")],Ss.prototype,"readStops",null),d([qe("stops")],Ss.prototype,"writeStops",null),Ss=jH=d([U("esri.webdoc.widgets.TimeSlider")],Ss);const $Xe=Ss;var VH;let Lx=VH=class extends _e{constructor(t){super(t),this.range=null,this.timeSlider=null,this.floorFilter=null}clone(){return new VH(de({range:this.range,timeSlider:this.timeSlider,floorFilter:this.floorFilter}))}};d([m({type:SXe,json:{write:!0}})],Lx.prototype,"range",void 0),d([m({type:$Xe,json:{write:!0}})],Lx.prototype,"timeSlider",void 0),d([m({type:xXe,json:{write:!0}})],Lx.prototype,"floorFilter",void 0),Lx=VH=d([U("esri.webdoc.Widgets")],Lx);const TXe=Lx,kXe={width:600,height:400},zO=1.5;function EXe(t,e){e=e||kXe;let{width:i,height:r}=e;const n=i/r;return n<zO?r=i/zO:n>zO&&(i=r*zO),i>t.width&&(r*=t.width/i,i=t.width),r>t.height&&(i*=t.height/r,r=t.height),{width:Math.round(i),height:Math.round(r)}}function CXe(t,e){return{...F1e(t,e),readResourcePaths:[]}}function zLt(t,e,i){const r=rn(t.itemUrl);return{...F1e(t,e),messages:[],writtenProperties:[],blockedRelativeUrls:[],verifyItemRelativeUrls:r?{rootPath:r.path,writtenUrls:[]}:null,resources:i?{toAdd:[],toUpdate:[],toKeep:[],pendingOperations:[]}:null}}function F1e(t,e){return{origin:e,url:rn(t.itemUrl),portal:t.portal||Ue.getDefault(),portalItem:t}}let xm=class extends _e{constructor(e){super(e),this.geometries=[],this.outSpatialReference=null,this.transformation=null,this.transformForward=null}toJSON(){const e=this.geometries.map(n=>n.toJSON()),i=this.geometries[0],r={};return r.outSR=zR(this.outSpatialReference),r.inSR=zR(i.spatialReference),r.geometries=JSON.stringify({geometryType:VT(i),geometries:e}),this.transformation&&(r.transformation=this.transformation.wkid||JSON.stringify(this.transformation)),this.transformForward!=null&&(r.transformForward=this.transformForward),r}};d([m()],xm.prototype,"geometries",void 0),d([m({type:at,json:{read:{source:"outSR"}}})],xm.prototype,"outSpatialReference",void 0),d([m()],xm.prototype,"transformation",void 0),d([m()],xm.prototype,"transformForward",void 0),xm=d([U("esri.rest.support.ProjectParameters")],xm);const IXe=dn(xm);async function N1e(t,e,i){e=IXe(e);const r=cA(t),n={...r.query,f:"json",...e.toJSON()},s=e.outSpatialReference,a=VT(e.geometries[0]),o=iX(n,i);return Nt(r.path+"/project",o).then(({data:{geometries:l}})=>s_e(l,a,s))}function MXe(t,e){return e.resourceInfo?j1e(e,e.resourceInfo,{origin:t.origin}):e.portalItem?.id?AXe(t,e,e.portalItem):Promise.resolve()}function j1e(t,e,i){const r={context:{...i,layerContainerType:"operational-layers"}};return t.portalItem&&(r.context.portal=t.portalItem.portal||Ue.getDefault()),fe(async()=>{const{populateOperationalLayers:n}=await Promise.resolve().then(()=>tK);return{populateOperationalLayers:n}},void 0).then(({populateOperationalLayers:n})=>{const s=[],a=e.operationalLayers;a?.length&&s.push(n(t.layers,a,r));const o={...r,context:{...r.context,layerContainerType:"tables"},defaultLayerType:"ArcGISFeatureLayer"},l=e.tables;return l?.length&&s.push(n(t.tables,l,o)),Promise.allSettled(s).then(()=>{})})}async function AXe(t,e,i){if(await i.load().catch(a=>{throw new ee(`${t.name}:load-portal-item`,"Failed to load portal item",{error:a})}),i.type!==t.itemType)throw new ee(`${t.name}:invalid-portal-item`,`Invalid portal item type '${i.type}', expected '${t.itemType}'`,{type:i.type});const r=await i.fetchData();e.resourceInfo=r;const n=CXe(i,t.origin);await PXe(t,e,r,n),e.resourceReferences={portalItem:i,paths:n.readResourcePaths};const s=await LXe(e.initialViewProperties,i,$e.getLogger(e));if(s){const a=e.initialViewProperties?.clone()??t.createInitialViewProperties();a.viewpoint=s,e.initialViewProperties=a}}function PXe(t,e,i,r){const n=OXe(t,i);return e.read(n,r),j1e(e,n,r)}function OXe(t,e){const i=t.parseVersion(e.version||"",t.name);return t.currentVersion.validate(i),e.version=`${i.major}.${i.minor}`,e}async function LXe(t,e,i){if(t?.viewpoint?.targetGeometry)return null;const n=await DXe(t,e,i);return n?new Os({targetGeometry:n}):null}async function DXe(t,e,i){const r=t?.spatialReference,n=e?.extent;if(!r||!n)return null;if(r.isWGS84)return n.clone();if(r.isWebMercator)return Nm(n);const{getGeometryServiceURL:s}=await fe(()=>import("./geometryServiceUtils-BFfQXmZQ.js"),[]);try{const a=await s(e),o=new xm({geometries:[n],outSpatialReference:r});return(await N1e(a,o))[0]}catch(a){i.error("Error projecting item's extent:",a)}return null}function roe(t){return{enabled:!!t?.length}}var BH;let Dx=BH=class extends _e{constructor(t){super(t),this.exactMatch=!1,this.name=null,this.type=null}clone(){return new BH({exactMatch:this.exactMatch,type:this.type,name:this.name})}};d([m({type:Boolean,json:{write:!0}})],Dx.prototype,"exactMatch",void 0),d([m({type:String,json:{write:!0}})],Dx.prototype,"name",void 0),d([pt(JZ)],Dx.prototype,"type",void 0),Dx=BH=d([U("esri.webdoc.applicationProperties.SearchLayerField")],Dx);const RXe=Dx;var UH;let Rx=UH=class extends _e{constructor(t){super(t),this.field=null,this.id=null,this.subLayer=null}clone(){return new UH(de({field:this.field,id:this.id,subLayer:this.subLayer}))}};d([m({type:RXe,json:{write:{isRequired:!0}}})],Rx.prototype,"field",void 0),d([m({type:String,json:{write:{isRequired:!0}}})],Rx.prototype,"id",void 0),d([m({type:li,json:{write:!0}})],Rx.prototype,"subLayer",void 0),Rx=UH=d([U("esri.webdoc.applicationProperties.SearchLayer")],Rx);const zXe=Rx;var HH;let zx=HH=class extends _e{constructor(t){super(t),this.exactMatch=!1,this.name=null,this.type=null}clone(){return new HH({exactMatch:this.exactMatch,type:this.type,name:this.name})}};d([m({type:Boolean,json:{write:!0}})],zx.prototype,"exactMatch",void 0),d([m({type:String,json:{write:!0}})],zx.prototype,"name",void 0),d([pt(JZ)],zx.prototype,"type",void 0),zx=HH=d([U("esri.webdoc.applicationProperties.SearchTableField")],zx);const FXe=zx;var GH;let SE=GH=class extends _e{constructor(t){super(t),this.field=null,this.id=null}clone(){return new GH(de({field:this.field,id:this.id}))}};d([m({type:FXe,json:{write:{isRequired:!0}}})],SE.prototype,"field",void 0),d([m({type:String,json:{write:{isRequired:!0}}})],SE.prototype,"id",void 0),SE=GH=d([U("esri.webdoc.applicationProperties.SearchTable")],SE);const NXe=SE;var qH;const V1e=We.ofType(zXe),B1e=We.ofType(NXe);let $h=qH=class extends _e{constructor(t){super(t),this.addressSearchEnabled=!0,this.enabled=!0,this.hintText=null,this.layers=new V1e,this.tables=new B1e}readAddressSearchEnabled(t){return!t}writeAddressSearchEnabled(t,e,i){e[i]=!t}clone(){return new qH(de({addressSearchEnabled:this.addressSearchEnabled,enabled:this.enabled,hintText:this.hintText,layers:this.layers,tables:this.tables}))}};d([m({type:Boolean,nonNullable:!0,json:{read:{source:"disablePlaceFinder"},write:{target:"disablePlaceFinder",isRequired:!0},origins:{"web-scene":{read:!1,write:!1}}}})],$h.prototype,"addressSearchEnabled",void 0),d([Ve("addressSearchEnabled")],$h.prototype,"readAddressSearchEnabled",null),d([qe("addressSearchEnabled")],$h.prototype,"writeAddressSearchEnabled",null),d([m({type:Boolean,nonNullable:!0,json:{write:!0,origins:{"web-map":{write:{isRequired:!0}},"web-scene":{default:!0,write:!0}}}})],$h.prototype,"enabled",void 0),d([m({type:String,json:{write:!0}})],$h.prototype,"hintText",void 0),d([m({type:V1e,json:{write:{overridePolicy:roe},origins:{"web-scene":{write:{isRequired:!0}}}}})],$h.prototype,"layers",void 0),d([m({type:B1e,json:{read:!0,write:{overridePolicy:roe}}})],$h.prototype,"tables",void 0),$h=qH=d([U("esri.webdoc.applicationProperties.Search")],$h);const jXe=$h;var WH;let cD=WH=class extends _e{constructor(t){super(t),this.search=null}clone(){return new WH(de({search:this.search}))}};d([m({type:jXe,json:{write:!0}})],cD.prototype,"search",void 0),cD=WH=d([U("esri.webdoc.applicationProperties.Viewing")],cD);const VXe=cD;var YH;let Fx=YH=class extends _e{constructor(t){super(t),this.editing=null,this.offline=null,this.viewing=null}clone(){return new YH(de({editing:this.editing,offline:this.offline,viewing:this.viewing}))}};d([m({json:{write:!0}})],Fx.prototype,"editing",void 0),d([m({json:{write:!0}})],Fx.prototype,"offline",void 0),d([m({type:VXe,json:{write:!0}})],Fx.prototype,"viewing",void 0),Fx=YH=d([U("esri.webmap.ApplicationProperties")],Fx);const BXe=Fx;var ZH;let Em=ZH=class extends _e{constructor(){super(...arguments),this.url=""}destroy(){this.url=""}get isSecureUrl(){return Kpe(this.url)}get isDataURI(){return ng(this.url)}clone(){return new ZH({url:this.url})}};d([m({type:String,json:{write:{isRequired:!0}}})],Em.prototype,"url",void 0),d([m()],Em.prototype,"isSecureUrl",null),d([m()],Em.prototype,"isDataURI",null),Em=ZH=d([U("esri.webdoc.support.SlideThumbnail")],Em);const UXe={type:nr,json:{read:{source:"timeExtent",reader:t=>t?Array.isArray(t)?nr.fromArray(t):nr.fromJSON(t):null},write:{writer:(t,e,i,r)=>{t&&(t.isEmpty?r?.messages&&r.messages.push(new ee("invalid-timeExtent","TimeExtent cannot be empty")):e[i]=t.toArray())},target:{timeExtent:{type:[[li,kT]]}}}}};var XH;let Th=XH=class extends sg(_e){constructor(t){super(t),this.name=null,this.thumbnail=new Em,this.timeExtent=null}castThumbnail(t){return typeof t=="string"?new Em({url:t}):dn(Em,t)}set viewpoint(t){const{targetGeometry:e,scale:i}=t;e!=null&&e.type==="point"&&i==null&&$e.getLogger(this).warn("Bookmark.viewpoint should include 'scale' when its targetGeometry is a point.",t),this._set("viewpoint",t)}readViewpoint(t,e){const{extent:i,viewpoint:r}=e;return Os.fromJSON(r||{targetGeometry:i})}writeViewpoint(t,e,i,r){if(!t)return;const{targetGeometry:n}=t;if(n!=null&&n.type!=="extent"){const s="Bookmark.viewpoint cannot be written to JSON when the viewpoint's targetGeometry is not an extent.";return void(r?.messages?r.messages.push(new ee("property:unsupported",s)):$e.getLogger(this).error(s))}n!=null&&(e.extent=n.toJSON()),e[i]=t.toJSON()}clone(){return new XH(de({name:this.name,thumbnail:this.thumbnail,timeExtent:this.timeExtent,viewpoint:this.viewpoint}))}};d([m({type:String,nonNullable:!0,json:{write:{isRequired:!0}}})],Th.prototype,"name",void 0),d([m({type:Em,json:{write:{overridePolicy:t=>({enabled:!(!t||!t.url)})}}})],Th.prototype,"thumbnail",void 0),d([Ii("thumbnail")],Th.prototype,"castThumbnail",null),d([m(UXe)],Th.prototype,"timeExtent",void 0),d([m({type:Os,nonNullable:!0,json:{write:!0}})],Th.prototype,"viewpoint",null),d([Ve("viewpoint",["extent","viewpoint"])],Th.prototype,"readViewpoint",null),d([qe("viewpoint")],Th.prototype,"writeViewpoint",null),Th=XH=d([U("esri.webmap.Bookmark")],Th);const HXe=Th;let Xf=class extends $t(lt){constructor(e){super(e),this.background=null,this.rangeInfo=null,this.spatialReference=null,this.timeExtent=null,this.timeZone=_u,this.viewpoint=null}};d([m({type:ON})],Xf.prototype,"background",void 0),d([m({type:gX})],Xf.prototype,"rangeInfo",void 0),d([m({type:at})],Xf.prototype,"spatialReference",void 0),d([m({type:nr})],Xf.prototype,"timeExtent",void 0),d([m({nonNullable:!0})],Xf.prototype,"timeZone",void 0),d([m({type:Os})],Xf.prototype,"viewpoint",void 0),Xf=d([U("esri.webmap.InitialViewProperties")],Xf);const vz=Xf,U1e=We.ofType(HXe),GXe=new Map([["image/jpeg","jpeg"],["image/jpg","jpg"],["image/png","png"],["image/gif","gif"]]),qXe="ArcGIS Pro",WXe=mX.JSAPI;let Nr=class extends uA(qF(jM(y0e))){constructor(e){super(e),this._isAuthoringAppSetByUser=!1,this._isAuthoringAppVersionSetByUser=!1,this._thumbnailFilename=null,this._updateFromPromise=null,this.resourceReferences={portalItem:null,paths:[]},this.applicationProperties=null,this.bookmarks=new U1e,this.floorInfo=null,this.initialViewProperties=new vz,this.portalItem=null,this.sourceVersion=null,this.widgets=null,this._debouncedSaveOperations=ST(async(i,r,n)=>{const{save:s,saveAs:a}=await fe(()=>import("./webdocSaveUtils-D-DZai9d.js"),__vite__mapDeps([270,271,272,273]));switch(i){case 0:return s(this.context,this,r);case 1:return a(this.context,this,n,r)}}),this.authoringApp=this.authoringAppVersion=null,this._isAuthoringAppSetByUser=this._isAuthoringAppVersionSetByUser=!1}destroy(){this.portalItem=Ir(this.portalItem)}initialize(){if(this.when().catch(e=>{$e.getLogger(this).error("#load()","Failed to load web map",e)}),this.resourceInfo){let e;try{e=this._validateJSON(this.resourceInfo)}catch(i){return void this.addResolvingPromise(Promise.reject(i))}this.read(e)}}set authoringApp(e){this._isAuthoringAppSetByUser=!0,this._set("authoringApp",e)}writeAuthoringApp(e,i){e&&this._isAuthoringAppSetByUser?i.authoringApp=e:i.authoringApp=WXe}set authoringAppVersion(e){this._isAuthoringAppVersionSetByUser=!0,this._set("authoringAppVersion",e)}writeAuthoringAppVersion(e,i){e&&this._isAuthoringAppVersionSetByUser?i.authoringAppVersion=e:i.authoringAppVersion=ofe}readInitialViewProperties(e,i){const r=new vz;i.background&&(r.background=ON.fromJSON(i.background));const n=i.initialState?.timeExtent;n&&(r.timeExtent=nr.fromArray(n));const s=i.initialState?.viewpoint;return s&&(s.rotation&&JS.parse(i.version||"","webmap").lessThan(2,20)&&i.authoringApp===qXe&&(s.rotation*=-1),r.viewpoint=Os.fromJSON(s)),i.mapRangeInfo&&(r.rangeInfo=gX.fromJSON(i.mapRangeInfo)),i.spatialReference&&(r.spatialReference=at.fromJSON(i.spatialReference)),i.timeZone&&(r.timeZone=i.timeZone),r}writeInitialViewProperties(e,i,r,n){if(!e)return;e.background?.color&&(i.background=e.background.write({},n));const{timeExtent:s,viewpoint:a}=e;if(a||s){const o={};a&&(o.viewpoint=a.write({},n)),s&&(o.timeExtent=s.toArray()),i.initialState=o}e.rangeInfo&&(i.mapRangeInfo=e.rangeInfo.toJSON(n)),e.spatialReference&&(i.spatialReference=e.spatialReference.write({},n)),i.timeZone=e.timeZone}writeLayers(e,i,r,n){i[r]=this._writeLayers(e,n,"operational-layers")}get loaded(){return super.loaded}readSourceVersion(e,i){const[r,n]=i.version.split(".");return new JS(parseInt(r,10),parseInt(n,10))}writeSourceVersion(e,i,r){i[r]=`${this.context.currentVersion.major}.${this.context.currentVersion.minor}`}writeTables(e,i,r,n){const s=this._writeLayers(e,n,"tables");s.length&&(i[r]=s)}get thumbnailUrl(){return this.portalItem?.thumbnailUrl||null}set thumbnailUrl(e){e?(this._override("thumbnailUrl",e),this._thumbnailFilename=this._generateCustomThumbnailFilename(e)):this._clearThumbnailOverride()}get updatingFromView(){return!!this._updateFromPromise}load(e){return this.addResolvingPromise(MXe(this.context,this)),Promise.resolve(this)}loadAll(){return KM(this,e=>{e(this.ground,this.basemap,this.layers,this.tables)})}read(e,i){i={...i,origin:this.context.origin};const r=this._getAuthoringPropsState();Vpe(this,e,n=>super.read(e,n),i),this._restoreAuthoringPropsFromState(r)}write(e,i){if(this.loadStatus!=="loaded"){const r=new ee("webmap:not-loaded","Web map must be loaded before it can be serialized");throw $e.getLogger(this).error("#toJSON()","Web map must be loaded before it can be serialized",this.loadError||this.loadStatus),r}return this._removeDanglingLayerRefs(),i={...i,origin:this.context.origin,restrictedWebMapWriting:!0,webmap:this},super.write(e,i)}async save(e){return this._debouncedSaveOperations(0,e)}async saveAs(e,i){return this._debouncedSaveOperations(1,i,e)}async updateFrom(e,i){const r=this._updateFromInternal(e,i);this._updateFromPromise=r,await r,r===this._updateFromPromise&&(this._updateFromPromise=null)}getLayerJSONFromResourceInfo(e){const i=this.resourceInfo;return this._collectAllLayersJSON([...i?.baseMap?.baseMapLayers||[],...i?.operationalLayers||[],...this.basemap?.resourceInfo?.data?.baseMapLayers||[]]).find(r=>r.id===e.id)}async updateItemThumbnail(){this.thumbnailUrl&&this._isOverridden("thumbnailUrl")&&(await this.portalItem?.updateThumbnail({thumbnail:this.thumbnailUrl,filename:this._thumbnailFilename}),this._clearThumbnailOverride())}getThumbnailState(){let e=this.thumbnailUrl;return e&&(e=this._isOverridden("thumbnailUrl")?e:ife(e,"w","8192")),{thumbnailUrl:e,filename:this._thumbnailFilename}}restoreThumbnailFromState(e){this.thumbnailUrl=e.thumbnailUrl,this._thumbnailFilename=e.filename}_collectAllLayersJSON(e){return e.reduce((i,r)=>(i.push(r),r.layerType==="GroupLayer"&&(i=i.concat(this._collectAllLayersJSON(r.layers||[]))),i),[])}_writeLayers(e,i,r){return i={...i,layerContainerType:r},e.map(n=>SC(n,r==="tables"?null:this.getLayerJSONFromResourceInfo(n),i)).filter(un).toArray()}_validateJSON(e){const i=JS.parse(e.version||"","webmap");return this.context.currentVersion.validate(i),e.version=`${i.major}.${i.minor}`,e}_removeDanglingLayerRefs(){const e=this.applicationProperties,i=e?.viewing?.search,r=a=>this.allLayers.some(o=>o.id===a);if(i?.layers&&(i.layers=i.layers.filter(a=>r(a.id))),i?.tables&&(i.tables=i.tables.filter(a=>this.tables.some(o=>o.id===a.id))),e){const a=e.editing?.locationTracking;a?.info&&!r(a.info.layerId)&&(e.editing=null)}const n="presentation"in this?this.presentation:null,s=n?.slides;s&&s.forEach(a=>{a.visibleLayers&&(a.visibleLayers=a.visibleLayers.filter(o=>r(o.id)))})}async _updateFromInternal(e,i){if(i??={},await f_(()=>e.ready),this._updateInitialViewProperties(e,i),e.map===this)for(const r of e.allLayerViews)"visible"in r&&"visible"in r.layer&&r._isOverridden("visible")&&(r.layer.visible=r.visible),"featureEffect"in r&&"featureEffect"in r.layer&&r._isOverridden("featureEffect")&&(r.layer.featureEffect=r.featureEffect);await this._updateThumbnailUrl(e,i)}_updateInitialViewProperties(e,i){if(i.backgroundExcluded||(this.initialViewProperties.background=e.background?.clone()),this.initialViewProperties.spatialReference=e.spatialReference?.clone(),this.initialViewProperties.timeZone=e.timeZone,i.viewpointExcluded||(this.initialViewProperties.viewpoint=new Os({rotation:e.rotation,scale:i.scalePreserved?e.scale:null,targetGeometry:this._getViewExtent(e)})),!i.widgetsExcluded)for(const r of e.persistableViewModels)r.updateWebDocument(this)}_getViewExtent(e){const i=e.center.clone().normalize(),r=e.extent.clone(),n=r.width/2;return r.xmin=i.x-n,r.xmax=i.x+n,r}async _updateThumbnailUrl(e,i){if(i.thumbnailExcluded)return;const r=EXe(e,i.thumbnailSize),n=await e.takeScreenshot({format:"png",width:r.width,height:r.height});this._setAutoGeneratedThumbnail(n.dataUrl)}_setAutoGeneratedThumbnail(e){this.thumbnailUrl=e,this._thumbnailFilename=null}_clearThumbnailOverride(){this._clearOverride("thumbnailUrl"),this.clear("thumbnailUrl","user"),this._thumbnailFilename=null}_generateCustomThumbnailFilename(e){if(ng(e)){const i=Uw(e),r=i?.mediaType,n=r&&GXe.get(r.toLowerCase())||null,s=`thumbnail${Date.now()}`;return n?`${s}.${n}`:s}return null}_getAuthoringPropsState(){return{authoringApp:this.authoringApp,authoringAppVersion:this.authoringAppVersion,isAuthoringAppSetByUser:this._isAuthoringAppSetByUser,isAuthoringAppVersionSetByUser:this._isAuthoringAppVersionSetByUser}}_restoreAuthoringPropsFromState(e){e.isAuthoringAppSetByUser?this.authoringApp=e.authoringApp:this._isAuthoringAppSetByUser=!1,e.isAuthoringAppVersionSetByUser?this.authoringAppVersion=e.authoringAppVersion:this._isAuthoringAppVersionSetByUser=!1}};d([m()],Nr.prototype,"_updateFromPromise",void 0),d([m({type:BXe,json:{write:!0}})],Nr.prototype,"applicationProperties",void 0),d([m({type:String,json:{write:{allowNull:!0,ignoreOrigin:!0}}})],Nr.prototype,"authoringApp",null),d([qe("authoringApp")],Nr.prototype,"writeAuthoringApp",null),d([m({type:String,json:{write:{allowNull:!0,ignoreOrigin:!0}}})],Nr.prototype,"authoringAppVersion",null),d([qe("authoringAppVersion")],Nr.prototype,"writeAuthoringAppVersion",null),d([m({type:U1e,json:{write:{overridePolicy:t=>({enabled:!!(t&&t.length>0),ignoreOrigin:!0})}}})],Nr.prototype,"bookmarks",void 0),d([m({type:_Xe,json:{name:"mapFloorInfo",write:!0}})],Nr.prototype,"floorInfo",void 0),d([m({type:vz,nonNullable:!0,json:{read:{source:["background","initialState.timeExtent","initialState.viewpoint","mapRangeInfo","spatialReference","timeZone"]},write:{ignoreOrigin:!0,target:{background:{type:ON},"initialState.timeExtent":{type:nr},"initialState.viewpoint":{type:Os},mapRangeInfo:{type:gX},spatialReference:{type:at},"timeZone:":{type:String}}}}})],Nr.prototype,"initialViewProperties",void 0),d([Ve("initialViewProperties")],Nr.prototype,"readInitialViewProperties",null),d([qe("initialViewProperties")],Nr.prototype,"writeInitialViewProperties",null),d([m({json:{read:!1,write:{target:"operationalLayers",ignoreOrigin:!0}}})],Nr.prototype,"layers",void 0),d([qe("layers")],Nr.prototype,"writeLayers",null),d([m({type:Mt})],Nr.prototype,"portalItem",void 0),d([m()],Nr.prototype,"resourceInfo",void 0),d([m({readOnly:!0,type:JS,json:{read:{source:"version"},write:{allowNull:!0,ignoreOrigin:!0,target:"version",isRequired:!0}}})],Nr.prototype,"sourceVersion",void 0),d([Ve("sourceVersion")],Nr.prototype,"readSourceVersion",null),d([qe("sourceVersion")],Nr.prototype,"writeSourceVersion",null),d([m({json:{read:!1,write:{ignoreOrigin:!0}}})],Nr.prototype,"tables",void 0),d([qe("tables")],Nr.prototype,"writeTables",null),d([m()],Nr.prototype,"thumbnailUrl",null),d([m()],Nr.prototype,"updatingFromView",null),d([m({type:TXe,json:{write:!0}})],Nr.prototype,"widgets",void 0),Nr=d([U("esri.WebDocument2D")],Nr);const YXe=Nr,Mr=(t=>t)(["operational-layers","basemap-base-layers","basemap-ground-layers","ground"]);var JH;let o0=JH=class extends _e{constructor(t){super(t),this.expression=null,this.name=null,this.returnType="boolean",this.title=null}clone(){return new JH({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};d([m({type:String,json:{write:!0}})],o0.prototype,"expression",void 0),d([m({type:String,json:{write:!0}})],o0.prototype,"name",void 0),d([m({type:["boolean","date","number","string"],json:{write:!0}})],o0.prototype,"returnType",void 0),d([m({type:String,json:{write:!0}})],o0.prototype,"title",void 0),o0=JH=d([U("esri.form.ExpressionInfo")],o0);const ZXe=o0;let ml=class extends _e{constructor(e){super(e),this.description=null,this.label=null,this.type=null,this.visibilityExpression=null}};d([m({type:String,json:{write:!0}})],ml.prototype,"description",void 0),d([m({type:String,json:{write:!0}})],ml.prototype,"label",void 0),d([m()],ml.prototype,"type",void 0),d([m({type:String,json:{write:!0}})],ml.prototype,"visibilityExpression",void 0),ml=d([U("esri.form.elements.Element")],ml);let uD=class extends $t(_e){constructor(e){super(e),this.type=null}};d([m()],uD.prototype,"type",void 0),uD=d([U("esri.form.elements.inputs.attachments.Input")],uD);const Av=uD,LN=["any","capture","upload"];let Nx=class extends Av{constructor(e){super(e),this.type="audio",this.inputMethod="any",this.maxDuration=null}};d([m({type:["audio"],readOnly:!0,json:{write:!0}})],Nx.prototype,"type",void 0),d([m({type:LN,json:{write:!0}})],Nx.prototype,"inputMethod",void 0),d([m({type:Number,json:{write:!0}})],Nx.prototype,"maxDuration",void 0),Nx=d([U("esri.form.elements.inputs.attachments.AudioInput")],Nx);const noe=Nx;let $E=class extends Av{constructor(e){super(e),this.type="document",this.maxFileSize=null}};d([m({type:["document"],readOnly:!0,json:{write:!0}})],$E.prototype,"type",void 0),d([m({type:Number,json:{write:!0}})],$E.prototype,"maxFileSize",void 0),$E=d([U("esri.form.elements.inputs.attachments.DocumentInput")],$E);const soe=$E;let jx=class extends Av{constructor(e){super(e),this.type="image",this.inputMethod="any",this.maxImageSize=null}};d([m({type:["image"],readOnly:!0,json:{write:!0}})],jx.prototype,"type",void 0),d([m({type:LN,json:{write:!0}})],jx.prototype,"inputMethod",void 0),d([m({type:Number,json:{write:!0}})],jx.prototype,"maxImageSize",void 0),jx=d([U("esri.form.elements.inputs.attachments.ImageInput")],jx);const aoe=jx;let TE=class extends Av{constructor(e){super(e),this.type="signature",this.inputMethod="any"}};d([m({type:["signature"],readOnly:!0,json:{write:!0}})],TE.prototype,"type",void 0),d([m({type:LN,json:{write:!0}})],TE.prototype,"inputMethod",void 0),TE=d([U("esri.form.elements.inputs.attachments.SignatureInput")],TE);const ooe=TE;let Vx=class extends Av{constructor(e){super(e),this.type="video",this.inputMethod="any",this.maxDuration=null}};d([m({type:["video"],readOnly:!0,json:{write:!0}})],Vx.prototype,"type",void 0),d([m({type:LN,json:{write:!0}})],Vx.prototype,"inputMethod",void 0),d([m({type:Number,json:{write:!0}})],Vx.prototype,"maxDuration",void 0),Vx=d([U("esri.form.elements.inputs.attachments.VideoInput")],Vx);const loe=Vx;function H1e(t){return{nestableTypes:{base:Av,key:"type",typeMap:{audio:noe,document:soe,image:aoe,signature:ooe,video:loe}},allTypes:{base:Av,key:"type",typeMap:{attachment:t,audio:noe,document:soe,image:aoe,signature:ooe,video:loe}}}}function XXe(t,e,i){return t?t.map(r=>Dp(e.nestableTypes,r)):null}function JXe(t,e,i){if(!t)return null;const r=e.nestableTypes.typeMap;return t.filter(n=>r[n.type]).map(n=>r[n.type].fromJSON(n))}function KXe(t,e,i){if(!t)return null;const r=e.nestableTypes.typeMap;return t.filter(n=>r[n.type]).map(n=>n.toJSON())}let Oh=class extends Av{constructor(e){super(e),this.type="attachment",this.attachmentAssociationType="exact",this.inputTypes=null}castInputs(e){return XXe(e,vB)}readInputs(e,i){return JXe(i.inputTypes,vB)}writeInputs(e,i){i.inputTypes=KXe(e,vB)}};d([m({type:["attachment"],readOnly:!0,json:{write:!0}})],Oh.prototype,"type",void 0),d([m({type:["any","exact","exactOrNone"],json:{write:!0}})],Oh.prototype,"attachmentAssociationType",void 0),d([m({json:{write:{isRequired:!0}}})],Oh.prototype,"inputTypes",void 0),d([Ii("inputTypes")],Oh.prototype,"castInputs",null),d([Ve("inputTypes")],Oh.prototype,"readInputs",null),d([qe("inputTypes")],Oh.prototype,"writeInputs",null),Oh=d([U("esri.form.elements.inputs.attachments.AttachmentInput")],Oh);const vB=H1e(Oh),QXe=Oh;var KH;const eJe=H1e(QXe);let Kl=KH=class extends ml{constructor(t){super(t),this.allowUserRename=!0,this.attachmentKeyword=null,this.displayFilename=!1,this.editableExpression=null,this.filenameExpression="{attachmentKeyword}_{now}",this.input=null,this.maxAttachmentCount=null,this.minAttachmentCount=null,this.type="attachment",this.useOriginalFilename=!0}clone(){return new KH({allowUserRename:this.allowUserRename,attachmentKeyword:this.attachmentKeyword,description:this.description,displayFilename:this.displayFilename,editableExpression:this.editableExpression,filenameExpression:this.filenameExpression,input:this.input?.clone(),label:this.label,maxAttachmentCount:this.maxAttachmentCount,minAttachmentCount:this.minAttachmentCount,useOriginalFilename:this.useOriginalFilename,visibilityExpression:this.visibilityExpression})}};d([m({type:Boolean,json:{write:!0}})],Kl.prototype,"allowUserRename",void 0),d([m({type:String,json:{write:{isRequired:!0}}})],Kl.prototype,"attachmentKeyword",void 0),d([m({type:Boolean,json:{write:!0}})],Kl.prototype,"displayFilename",void 0),d([m({type:String,json:{write:!0}})],Kl.prototype,"editableExpression",void 0),d([m({type:String,json:{write:!0}})],Kl.prototype,"filenameExpression",void 0),d([m({types:eJe.allTypes,json:{read:{source:"inputType"},write:{target:"inputType",isRequired:!0}}})],Kl.prototype,"input",void 0),d([m({type:Number,json:{write:!0}})],Kl.prototype,"maxAttachmentCount",void 0),d([m({type:Number,json:{write:!0}})],Kl.prototype,"minAttachmentCount",void 0),d([m({type:["attachment"],readOnly:!0,json:{read:!1,write:!0}})],Kl.prototype,"type",void 0),d([m({type:Boolean,json:{write:!0}})],Kl.prototype,"useOriginalFilename",void 0),Kl=KH=d([U("esri.form.elements.AttachmentElement")],Kl);const coe=Kl;let dD=class extends _e{constructor(e){super(e),this.type=null}};d([m()],dD.prototype,"type",void 0),dD=d([U("esri.form.elements.inputs.Input")],dD);const og=dD;let kE=class extends og{constructor(e){super(e),this.maxLength=null,this.minLength=0}};d([m({type:Number,json:{write:!0}})],kE.prototype,"maxLength",void 0),d([m({type:Number,json:{write:!0}})],kE.prototype,"minLength",void 0),kE=d([U("esri.form.elements.inputs.TextInput")],kE);const vX=kE;var QH;let hD=QH=class extends vX{constructor(t){super(t),this.type="barcode-scanner"}clone(){return new QH({maxLength:this.maxLength,minLength:this.minLength})}};d([m({type:["barcode-scanner"],json:{read:!1,write:!0}})],hD.prototype,"type",void 0),hD=QH=d([U("esri.form.elements.inputs.BarcodeScannerInput")],hD);const tJe=hD;var eG;let Bx=eG=class extends og{constructor(t){super(t),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="combo-box"}clone(){return new eG({showNoValueOption:this.showNoValueOption,noValueOptionLabel:this.noValueOptionLabel})}};d([m({type:String,json:{write:!0}})],Bx.prototype,"noValueOptionLabel",void 0),d([m({type:Boolean,json:{write:!0}})],Bx.prototype,"showNoValueOption",void 0),d([m({type:["combo-box"],json:{read:!1,write:!0}})],Bx.prototype,"type",void 0),Bx=eG=d([U("esri.form.elements.inputs.ComboBoxInput")],Bx);const iJe=Bx;var tG;function uoe(t){return t??null}function doe(t){return t??null}let kh=tG=class extends og{constructor(t){super(t),this.max=null,this.min=null,this.type="date-picker"}readMax(t,e){return uoe(e.max)}writeMax(t,e){e.max=doe(t)}readMin(t,e){return uoe(e.min)}writeMin(t,e){e.min=doe(t)}clone(){return new tG({max:this.max,min:this.min})}};d([m({type:String,json:{type:String,write:!0}})],kh.prototype,"max",void 0),d([Ve("max")],kh.prototype,"readMax",null),d([qe("max")],kh.prototype,"writeMax",null),d([m({type:String,json:{type:String,write:!0}})],kh.prototype,"min",void 0),d([Ve("min")],kh.prototype,"readMin",null),d([qe("min")],kh.prototype,"writeMin",null),d([m({type:["date-picker"],json:{read:!1,write:!0}})],kh.prototype,"type",void 0),kh=tG=d([U("esri.form.elements.inputs.DatePickerInput")],kh);const rJe=kh;var iG;function bB(t){return t??null}function wB(t){return t??null}let el=iG=class extends og{constructor(t){super(t),this.includeTimeOffset=!0,this.max=null,this.min=null,this.timeResolution="minutes",this.type="datetimeoffset-picker"}readMax(t,e){return bB(e.max)}writeMax(t,e){e.max=wB(t)}readMin(t,e){return bB(e.min)}writeMin(t,e){e.min=wB(t)}readTimeResolution(t,e){return bB(e.timeResolution)}writeTimeResolution(t,e){e.timeResolution=wB(t)}clone(){return new iG({includeTimeOffset:this.includeTimeOffset,max:this.max,min:this.min,timeResolution:this.timeResolution})}};d([m({type:Boolean,json:{write:!0}})],el.prototype,"includeTimeOffset",void 0),d([m({type:String,json:{type:String,write:!0}})],el.prototype,"max",void 0),d([Ve("max")],el.prototype,"readMax",null),d([qe("max")],el.prototype,"writeMax",null),d([m({type:String,json:{type:String,write:!0}})],el.prototype,"min",void 0),d([Ve("min")],el.prototype,"readMin",null),d([qe("min")],el.prototype,"writeMin",null),d([m({type:String,json:{type:String,write:!0}})],el.prototype,"timeResolution",void 0),d([Ve("timeResolution")],el.prototype,"readTimeResolution",null),d([qe("timeResolution")],el.prototype,"writeTimeResolution",null),d([m({type:["datetimeoffset-picker"],json:{read:!1,write:!0}})],el.prototype,"type",void 0),el=iG=d([U("esri.form.elements.inputs.DateTimeOffsetPickerInput")],el);const nJe=el;var rG;function hoe(t){return t!=null?new Date(t):null}function poe(t){return t?t.getTime():null}let od=rG=class extends og{constructor(t){super(t),this.includeTime=!1,this.max=null,this.min=null,this.type="datetime-picker"}readMax(t,e){return hoe(e.max)}writeMax(t,e){e.max=poe(t)}readMin(t,e){return hoe(e.min)}writeMin(t,e){e.min=poe(t)}clone(){return new rG({includeTime:this.includeTime,max:this.max,min:this.min})}};d([m({type:Boolean,json:{write:!0}})],od.prototype,"includeTime",void 0),d([m({type:Date,json:{type:Number,write:!0}})],od.prototype,"max",void 0),d([Ve("max")],od.prototype,"readMax",null),d([qe("max")],od.prototype,"writeMax",null),d([m({type:Date,json:{type:Number,write:!0}})],od.prototype,"min",void 0),d([Ve("min")],od.prototype,"readMin",null),d([qe("min")],od.prototype,"writeMin",null),d([m({type:["datetime-picker"],json:{read:!1,write:!0}})],od.prototype,"type",void 0),od=rG=d([U("esri.form.elements.inputs.DateTimePickerInput")],od);const sJe=od;var nG;let Ux=nG=class extends og{constructor(t){super(t),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="radio-buttons"}clone(){return new nG({noValueOptionLabel:this.noValueOptionLabel,showNoValueOption:this.showNoValueOption})}};d([m({type:String,json:{write:!0}})],Ux.prototype,"noValueOptionLabel",void 0),d([m({type:Boolean,json:{write:!0}})],Ux.prototype,"showNoValueOption",void 0),d([m({type:["radio-buttons"],json:{read:!1,write:!0}})],Ux.prototype,"type",void 0),Ux=nG=d([U("esri.form.elements.inputs.RadioButtonsInput")],Ux);const aJe=Ux;var sG;let Hx=sG=class extends og{constructor(t){super(t),this.offValue=null,this.onValue=null,this.type="switch"}clone(){return new sG({offValue:this.offValue,onValue:this.onValue})}};d([m({type:[String,Number],json:{write:!0}})],Hx.prototype,"offValue",void 0),d([m({type:[String,Number],json:{write:!0}})],Hx.prototype,"onValue",void 0),d([m({type:["switch"],json:{read:!1,write:!0}})],Hx.prototype,"type",void 0),Hx=sG=d([U("esri.form.elements.inputs.SwitchInput")],Hx);const oJe=Hx;var aG;let pD=aG=class extends vX{constructor(t){super(t),this.type="text-area"}clone(){return new aG({maxLength:this.maxLength,minLength:this.minLength})}};d([m({type:["text-area"],json:{read:!1,write:!0}})],pD.prototype,"type",void 0),pD=aG=d([U("esri.form.elements.inputs.TextAreaInput")],pD);const lJe=pD;var oG;let fD=oG=class extends vX{constructor(t){super(t),this.type="text-box"}clone(){return new oG({maxLength:this.maxLength,minLength:this.minLength})}};d([m({type:["text-box"],json:{read:!1,write:!0}})],fD.prototype,"type",void 0),fD=oG=d([U("esri.form.elements.inputs.TextBoxInput")],fD);const cJe=fD;var lG;function _B(t){return t??null}function xB(t){return t??null}let Ql=lG=class extends og{constructor(t){super(t),this.max=null,this.min=null,this.timeResolution="minutes",this.type="time-picker"}readMax(t,e){return _B(e.max)}writeMax(t,e){e.max=xB(t)}readMin(t,e){return _B(e.min)}writeMin(t,e){e.min=xB(t)}readTimeResolution(t,e){return _B(e.timeResolution)}writeTimeResolution(t,e){e.timeResolution=xB(t)}clone(){return new lG({max:this.max,min:this.min,timeResolution:this.timeResolution})}};d([m({type:String,json:{type:String,write:!0}})],Ql.prototype,"max",void 0),d([Ve("max")],Ql.prototype,"readMax",null),d([qe("max")],Ql.prototype,"writeMax",null),d([m({type:String,json:{type:String,write:!0}})],Ql.prototype,"min",void 0),d([Ve("min")],Ql.prototype,"readMin",null),d([qe("min")],Ql.prototype,"writeMin",null),d([m({type:String,json:{type:String,write:!0}})],Ql.prototype,"timeResolution",void 0),d([Ve("timeResolution")],Ql.prototype,"readTimeResolution",null),d([qe("timeResolution")],Ql.prototype,"writeTimeResolution",null),d([m({type:["time-picker"],json:{read:!1,write:!0}})],Ql.prototype,"type",void 0),Ql=lG=d([U("esri.form.elements.inputs.TimePickerInput")],Ql);const uJe=Ql,dJe=tJe,hJe=iJe,pJe=rJe,fJe=nJe,mJe=sJe,gJe=aJe,yJe=oJe,vJe=lJe,bJe=cJe,wJe=uJe,_Je={base:og,key:"type",typeMap:{"barcode-scanner":dJe,"combo-box":hJe,"date-picker":pJe,"datetime-picker":mJe,"datetimeoffset-picker":fJe,"radio-buttons":gJe,switch:yJe,"text-area":vJe,"text-box":bJe,"time-picker":wJe}};var cG;let lc=cG=class extends ml{constructor(t){super(t),this.domain=null,this.editable=null,this.editableExpression=null,this.fieldName=null,this.hint=null,this.input=null,this.requiredExpression=null,this.type="field",this.valueExpression=null}clone(){return new cG({description:this.description,domain:this.domain,editable:this.editable,editableExpression:this.editableExpression,fieldName:this.fieldName,hint:this.hint,input:this.input,label:this.label,requiredExpression:this.requiredExpression,valueExpression:this.valueExpression,visibilityExpression:this.visibilityExpression})}};d([m({types:Lwe,json:{read:{reader:EN},write:!0}})],lc.prototype,"domain",void 0),d([m({type:Boolean,json:{write:!0}})],lc.prototype,"editable",void 0),d([m({type:String,json:{write:!0}})],lc.prototype,"editableExpression",void 0),d([m({type:String,json:{write:!0}})],lc.prototype,"fieldName",void 0),d([m({type:String,json:{write:!0}})],lc.prototype,"hint",void 0),d([m({types:_Je,json:{read:{source:"inputType"},write:{target:"inputType"}}})],lc.prototype,"input",void 0),d([m({type:String,json:{write:!0}})],lc.prototype,"requiredExpression",void 0),d([m({type:String,json:{read:!1,write:!0}})],lc.prototype,"type",void 0),d([m({type:String,json:{write:!0}})],lc.prototype,"valueExpression",void 0),lc=cG=d([U("esri.form.elements.FieldElement")],lc);var uG;let Jf=uG=class extends ml{constructor(t){super(t),this.displayCount=null,this.displayType="list",this.editableExpression=null,this.orderByFields=null,this.relationshipId=null,this.type="relationship"}clone(){return new uG({description:this.description,displayCount:this.displayCount,displayType:this.displayType,editableExpression:this.editableExpression,label:this.label,orderByFields:de(this.orderByFields),relationshipId:this.relationshipId,visibilityExpression:this.visibilityExpression})}};d([m({type:Number,json:{write:!0}})],Jf.prototype,"displayCount",void 0),d([m({type:["list"],json:{write:!0}})],Jf.prototype,"displayType",void 0),d([m({type:String,json:{write:!0}})],Jf.prototype,"editableExpression",void 0),d([m({type:[UZ],json:{write:!0}})],Jf.prototype,"orderByFields",void 0),d([m({type:Number,json:{write:!0}})],Jf.prototype,"relationshipId",void 0),d([m({type:["relationship"],json:{read:!1,write:!0}})],Jf.prototype,"type",void 0),Jf=uG=d([U("esri.form.elements.RelationshipElement")],Jf);const foe=Jf;var dG;let Gx=dG=class extends ml{constructor(t){super(t),this.text=null,this.textFormat="plain-text",this.type="text"}clone(){return new dG({text:this.text,textFormat:this.textFormat,visibilityExpression:this.visibilityExpression})}};d([m({type:String,json:{write:!0}})],Gx.prototype,"text",void 0),d([m({type:String,json:{write:!0}})],Gx.prototype,"textFormat",void 0),d([m({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],Gx.prototype,"type",void 0),Gx=dG=d([U("esri.form.elements.TextElement")],Gx);const moe=Gx;let qx=class extends $t(ml){constructor(e){super(e),this.associationTypes=null,this.editableExpression=null,this.type="utilityNetworkAssociations"}};d([m({type:[awe],json:{write:{isRequired:!0}}})],qx.prototype,"associationTypes",void 0),d([m({type:String,json:{write:!0}})],qx.prototype,"editableExpression",void 0),d([m({type:["utilityNetworkAssociations"],json:{read:!1,write:!0}})],qx.prototype,"type",void 0),qx=d([U("esri.form.elements.UtilityNetworkAssociationsElement")],qx);const goe=qx,xJe=t=>t.type==="field",SJe=t=>t.type==="group",$Je=t=>t.type==="text";function G1e(t){return{typesWithGroup:{base:ml,key:"type",typeMap:{attachment:coe,field:lc,group:t,relationship:foe,text:moe,utilityNetworkAssociations:goe}},typesWithoutGroup:{base:ml,key:"type",typeMap:{attachment:coe,field:lc,relationship:foe,text:moe,utilityNetworkAssociations:goe}}}}function q1e(t,e,i=!0){if(!t)return null;const r=i?e.typesWithGroup.typeMap:e.typesWithoutGroup.typeMap;return t.filter(n=>r[n.type]).map(n=>r[n.type].fromJSON(n))}function W1e(t,e,i=!0){if(!t)return null;const r=i?e.typesWithGroup.typeMap:e.typesWithoutGroup.typeMap;return t.filter(n=>r[n.type]).map(n=>n.toJSON())}function Y1e(t,e,i=!0){return t?t.map(r=>Dp(i?e.typesWithGroup:e.typesWithoutGroup,r)):null}var hG;let Lh=hG=class extends ml{constructor(t){super(t),this.elements=null,this.initialState="expanded",this.type="group"}castElements(t){return Y1e(t,SB,!1)}readElements(t,e){return q1e(e.formElements,SB,!1)}writeElements(t,e){e.formElements=W1e(t,SB,!1)}clone(){return new hG({description:this.description,elements:de(this.elements),initialState:this.initialState,label:this.label,visibilityExpression:this.visibilityExpression})}};d([m({json:{write:!0}})],Lh.prototype,"elements",void 0),d([Ii("elements")],Lh.prototype,"castElements",null),d([Ve("elements",["formElements"])],Lh.prototype,"readElements",null),d([qe("elements")],Lh.prototype,"writeElements",null),d([m({type:["collapsed","expanded"],json:{write:!0}})],Lh.prototype,"initialState",void 0),d([m({type:String,json:{read:!1,write:!0}})],Lh.prototype,"type",void 0),Lh=hG=d([U("esri.form.elements.GroupElement")],Lh);const SB=G1e(Lh),TJe=Lh;var pG;const $B=G1e(TJe);let ld=pG=class extends _e{constructor(t){super(t),this.description=null,this.elements=null,this.expressionInfos=null,this.preserveFieldValuesWhenHidden=!1,this.title=null}castElements(t){return Y1e(t,$B)}readElements(t,e){return q1e(e.formElements,$B)}writeElements(t,e){e.formElements=W1e(t,$B)}clone(){return new pG({description:this.description,expressionInfos:de(this.expressionInfos),elements:de(this.elements),title:this.title,preserveFieldValuesWhenHidden:this.preserveFieldValuesWhenHidden})}async getFieldsUsed(t,e){const i=new Set,{description:r,elements:n,expressionInfos:s,title:a}=this;if(NC(i,t,r),NC(i,t,a),!n)return[];const o=kJe(n,s).map(l=>La(i,t,null,l));await Promise.all(o);for(const l of n)Z1e(i,{fieldsIndex:t,relationships:e},l);return Array.from(i).sort()}};function Z1e(t,e,i){const{fieldsIndex:r}=e;if(!r||r.fields.length!==t.size)switch(NC(t,r,i.label),NC(t,r,i.description),i.type){case"field":fo(t,r,i.fieldName);break;case"group":i.elements.forEach(n=>Z1e(t,e,n));break;case"relationship":if(e.relationships){const n=e.relationships.find(s=>s.id===i.relationshipId);n&&fo(t,r,n.keyField)}Iv(t,r,i.orderByFields?.map(n=>n.field));break;case"text":NC(t,r,i.text)}}function kJe(t,e){if(!e||e.length===0)return[];const i=X1e(t),r=[];for(const n of e)i.has(n.name)&&r.push(n.expression);return r}function X1e(t){const e=new Set;for(const i of t)if(tie(e,i.visibilityExpression),!$Je(i)){if(SJe(i))cR(e,X1e(i.elements));else if(tie(e,i.editableExpression),xJe(i)){const{requiredExpression:r,valueExpression:n}=i;cR(e,[r,n])}}return e}function NC(t,e,i){Iv(t,e,NZ(i))}d([m({type:String,json:{write:!0}})],ld.prototype,"description",void 0),d([m({json:{write:!0}})],ld.prototype,"elements",void 0),d([Ii("elements")],ld.prototype,"castElements",null),d([Ve("elements",["formElements"])],ld.prototype,"readElements",null),d([qe("elements")],ld.prototype,"writeElements",null),d([m({type:[ZXe],json:{write:!0}})],ld.prototype,"expressionInfos",void 0),d([m({type:Boolean,json:{default:!1,write:!0}})],ld.prototype,"preserveFieldValuesWhenHidden",void 0),d([m({type:String,json:{write:!0}})],ld.prototype,"title",void 0),ld=pG=d([U("esri.form.FormTemplate")],ld);const EJe=Symbol("getSliceableSymbol");let NI=class{};NI=d([U("esri.graphic.GraphicOrigin")],NI);const CJe=Symbol("isFeatureGraphicOrigin");var yoe;let IJe=class extends NI{get[(yoe=CJe,eA)](){return this.layer}get[GZ](){return this.layer}get[EJe](){return this.layer}constructor(e){super(),this[yoe]=!0,this.type="feature",this.layer=e}get id(){return this.layer.id}};function voe(t,e,i){if(t.hasM==null||t.hasZ)for(const r of e)for(const n of r)n.length>2&&(n[2]*=i)}function MJe(t,e,i){if(!t&&!e||!i)return;const r=NR(i);boe(t,i,r),boe(e,i,r)}function boe(t,e,i){if(t)for(const r of t)AJe(r.geometry,e,i)}function AJe(t,e,i){if(!t?.spatialReference||os(t.spatialReference,e))return;const r=NR(t.spatialReference)/i;if(r!==1){if("x"in t)t.z!=null&&(t.z*=r);else if("rings"in t)voe(t,t.rings,r);else if("paths"in t)voe(t,t.paths,r);else if("points"in t&&(t.hasM==null||t.hasZ))for(const n of t.points)n.length>2&&(n[2]*=r)}}function woe(t,e,i){if(!i?.features||!i.hasZ)return;const r=cbe(i.geometryType,e,t.outSpatialReference);if(r!=null)for(const n of i.features)r(n.geometry)}var fG;const mG=new Gt({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let ks=fG=class extends _e{constructor(t){super(t),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(t,e){return this.readFeaturesWithClass(t,e,Hr)}writeGeometryType(t,e,i,r){if(t)return void mG.write(t,e,i,r);const{features:n}=this;if(n){for(const s of n)if(s?.geometry!=null)return void mG.write(s.geometry.type,e,i,r)}}readQueryGeometry(t,e){if(!t)return null;const i=!!t.spatialReference,r=Vp(t);return r&&!i&&e.spatialReference&&(r.spatialReference=at.fromJSON(e.spatialReference)),r}writeSpatialReference(t,e){if(t)return void(e.spatialReference=t.toJSON());const{features:i}=this;if(i){for(const r of i)if(r&&r.geometry!=null&&r.geometry.spatialReference)return void(e.spatialReference=r.geometry.spatialReference.toJSON())}}clone(){return new fG(this.cloneProperties())}cloneProperties(){return de({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(t){const e=this.write();if(e.features&&Array.isArray(t)&&t.length>0)for(let i=0;i<e.features.length;i++){const r=e.features[i];if(r.geometry){const n=t?.[i];r.geometry=n?.toJSON()||r.geometry}}return e}quantize(t){const{scale:[e,i],translate:[r,n]}=t,s=c=>Math.round((c-r)/e),a=c=>Math.round((n-c)/i),o=this.features,l=this._getQuantizationFunction(this.geometryType,s,a);for(let c=0,h=o.length;c<h;c++)l?.(o[c].geometry)||(o.splice(c,1),c--,h--);return this.transform=t,this}unquantize(){const{geometryType:t,features:e,transform:i}=this;if(!i)return this;const{translate:[r,n],scale:[s,a]}=i,o=g=>g*s+r,l=g=>n-g*a;let c=null,h=null;if(this.hasZ&&i?.scale?.[2]!=null){const{translate:[,,g],scale:[,,y]}=i;c=b=>b*y+g}if(this.hasM&&i?.scale?.[3]!=null){const{translate:[,,,g],scale:[,,,y]}=i;h=b=>b==null?b:b*y+g}const f=this._getHydrationFunction(t,o,l,c,h);for(const{geometry:g}of e)g!=null&&f&&f(g);return this.transform=null,this}readFeaturesWithClass(t,e,i){const r=at.fromJSON(e.spatialReference),n=[];for(let s=0;s<t.length;s++){const a=t[s],o=i.fromJSON(a),l=a.geometry?.spatialReference;o.geometry==null||l||(o.geometry.spatialReference=r);const c=a.aggregateGeometries,h=o.aggregateGeometries;if(c&&h!=null)for(const f in h){const g=h[f],y=c[f],b=y?.spatialReference;g==null||b||(g.spatialReference=r)}n.push(o)}return n}_quantizePoints(t,e,i){let r,n;const s=[];for(let a=0,o=t.length;a<o;a++){const l=t[a];if(a>0){const c=e(l[0]),h=i(l[1]);c===r&&h===n||(s.push([c-r,h-n]),r=c,n=h)}else r=e(l[0]),n=i(l[1]),s.push([r,n])}return s.length>0?s:null}_getQuantizationFunction(t,e,i){return t==="point"?r=>(r.x=e(r.x),r.y=i(r.y),r):t==="polyline"||t==="polygon"?r=>{const n=jn(r)?r.rings:r.paths,s=[];for(let a=0,o=n.length;a<o;a++){const l=n[a],c=this._quantizePoints(l,e,i);c&&s.push(c)}return s.length>0?(jn(r)?r.rings=s:r.paths=s,r):null}:t==="multipoint"?r=>{const n=this._quantizePoints(r.points,e,i);return n&&n.length>0?(r.points=n,r):null}:t==="extent"?r=>r:null}_getHydrationFunction(t,e,i,r,n){return t==="point"?s=>{s.x=e(s.x),s.y=i(s.y),r&&(s.z=r(s.z))}:t==="polyline"||t==="polygon"?s=>{const a=jn(s)?s.rings:s.paths;let o,l;for(let c=0,h=a.length;c<h;c++){const f=a[c];for(let g=0,y=f.length;g<y;g++){const b=f[g];g>0?(o+=b[0],l+=b[1]):(o=b[0],l=b[1]),b[0]=e(o),b[1]=i(l)}}if(r&&n)for(let c=0,h=a.length;c<h;c++){const f=a[c];for(let g=0,y=f.length;g<y;g++){const b=f[g];b[2]=r(b[2]),b[3]=n(b[3])}}else if(r)for(let c=0,h=a.length;c<h;c++){const f=a[c];for(let g=0,y=f.length;g<y;g++){const b=f[g];b[2]=r(b[2])}}else if(n)for(let c=0,h=a.length;c<h;c++){const f=a[c];for(let g=0,y=f.length;g<y;g++){const b=f[g];b[2]=n(b[2])}}}:t==="extent"?s=>{s.xmin=e(s.xmin),s.ymin=i(s.ymin),s.xmax=e(s.xmax),s.ymax=i(s.ymax),r&&s.zmax!=null&&s.zmin!=null&&(s.zmax=r(s.zmax),s.zmin=r(s.zmin)),n&&s.mmax!=null&&s.mmin!=null&&(s.mmax=n(s.mmax),s.mmin=n(s.mmin))}:t==="multipoint"?s=>{const a=s.points;let o,l;for(let c=0,h=a.length;c<h;c++){const f=a[c];c>0?(o+=f[0],l+=f[1]):(o=f[0],l=f[1]),f[0]=e(o),f[1]=i(l)}if(r&&n)for(let c=0,h=a.length;c<h;c++){const f=a[c];f[2]=r(f[2]),f[3]=n(f[3])}else if(r)for(let c=0,h=a.length;c<h;c++){const f=a[c];f[2]=r(f[2])}else if(n)for(let c=0,h=a.length;c<h;c++){const f=a[c];f[2]=n(f[2])}}:null}};d([m({type:String,json:{write:!0}})],ks.prototype,"displayFieldName",void 0),d([m({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],ks.prototype,"exceededTransferLimit",void 0),d([m({type:[Hr],json:{write:!0}})],ks.prototype,"features",void 0),d([Ve("features")],ks.prototype,"readFeatures",null),d([m({type:[Ws],json:{write:!0}})],ks.prototype,"fields",void 0),d([m({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:mG.read}}})],ks.prototype,"geometryType",void 0),d([qe("geometryType")],ks.prototype,"writeGeometryType",null),d([m({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],ks.prototype,"hasM",void 0),d([m({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],ks.prototype,"hasZ",void 0),d([m({types:BT,json:{write:!0}})],ks.prototype,"queryGeometry",void 0),d([Ve("queryGeometry")],ks.prototype,"readQueryGeometry",null),d([m({type:at,json:{write:!0}})],ks.prototype,"spatialReference",void 0),d([qe("spatialReference")],ks.prototype,"writeSpatialReference",null),d([m({json:{write:!0}})],ks.prototype,"transform",void 0),ks=fG=d([U("esri.rest.support.FeatureSet")],ks),ks.prototype.toJSON.isDefaultToJSON=!0;let PJe=0,um=class extends qF(jM(We)){constructor(e){super(e),this._idToClientGeometry=null,this.type="memory"}load(e){const i=e!=null?e.signal:null;return this.addResolvingPromise(this._startWorker(i)),Promise.resolve(this)}destroy(){this._connection?.close(),this._connection=null}get _workerGeometryType(){const e=this.layer?.geometryType;return e?this._geometryTypeRequiresClientGraphicMapping(e)?"polygon":e:null}applyEdits(e){return this.load().then(()=>this._applyEdits(e))}openPorts(){return this.load().then(()=>this._connection.openPorts())}async queryFeatures(e,i={}){await this.load(i);const r=await this._connection.invoke("queryFeatures",e?e.toJSON():null,i);woe(e,this.layer.spatialReference,r);const n=ks.fromJSON(r);if(!this._requiresClientGraphicMapping()||!this._idToClientGeometry)return n;const s=this.layer.objectIdField;for(const a of n.features){const o=a.attributes[s],l=this._idToClientGeometry.get(o);l!==void 0&&(a.geometry=l)}return n.geometryType=this.layer.geometryType,n}async queryFeaturesJSON(e,i={}){if(this._requiresClientGraphicMapping())throw new ee("query-features-json:unsupported","Cannot query in JSON format for client only geometry types (mesh and extent)");await this.load(i);const r=await this._connection.invoke("queryFeatures",e?e.toJSON():null,i);return woe(e,this.layer.spatialReference,r),r}queryFeatureCount(e,i={}){return this.load(i).then(()=>this._connection.invoke("queryFeatureCount",e?e.toJSON():null,i))}queryObjectIds(e,i={}){return this.load(i).then(()=>this._connection.invoke("queryObjectIds",e?e.toJSON():null,i))}queryExtent(e,i={}){return this.load(i).then(()=>this._connection.invoke("queryExtent",e?e.toJSON():null,i)).then(r=>({count:r.count,extent:Wt.fromJSON(r.extent)}))}querySnapping(e,i={}){return this.load(i).then(()=>this._connection.invoke("querySnapping",e,i))}async queryAttributeBins(e,i={}){return await this.load(),this._connection.invoke("queryAttributeBins",e?.toJSON(),i)}async _applyEdits(e){if(!this._connection)throw new ee("feature-layer-source:edit-failure","Memory source not loaded");const i=this.layer.objectIdField;let r=null;const n=[],s=[];await Promise.all([this._prepareClientMapping(e.addFeatures,null),this._prepareClientMapping(e.updateFeatures,null)]);const a=h=>"objectId"in h&&h.objectId!=null?h.objectId:"attributes"in h&&h.attributes[i]!=null?h.attributes[i]:null;if(e.addFeatures&&(r=this._prepareAddFeatures(e.addFeatures)),e.deleteFeatures)for(const h of e.deleteFeatures){const f=a(h);f!=null&&n.push(f)}const o=e.updateFeatures&&this._idToClientGeometry?new Map:null;if(e.updateFeatures){for(const h of e.updateFeatures)if(s.push(this._serializeFeature(h)),o&&h.geometry!=null){const f=a(h);f!=null&&o.set(f,h)}}MJe(r?r.features:null,s,this.layer.spatialReference);const{fullExtent:l,featureEditResults:c}=await this._connection.invoke("applyEdits",{adds:r?r.features:[],updates:s,deletes:n});return this.fullExtent=l,r&&r.finish(c.uidToObjectId),this._updateIdToClientGeometries(o,c),this._createEditsResult(c)}async _prepareClientMapping(e,i){if(this._layerOrSourceGeometryType!=="mesh"||e==null)return;const r=[];for(const{geometry:n}of e)n==null||n.type!=="mesh"||n.hasExtent||n.loaded||r.push(n.load({signal:i}));r.length&&await Promise.all(r)}_updateIdToClientGeometries(e,i){if(this._idToClientGeometry){if(e)for(const r of i.updateResults){if(!r.success)continue;const n=e.get(r.objectId);n!=null&&this._addIdToClientGeometry(n)}for(const r of i.deleteResults)r.success&&this._idToClientGeometry.delete(r.objectId)}}_createEditsResult(e){return{addFeatureResults:e.addResults?e.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:e.updateResults?e.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:e.deleteResults?e.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}_createFeatureEditResult(e){const i=e.success===!0?null:e.error||{code:void 0,description:""};return{objectId:e.objectId,globalId:e.globalId,error:i?new ee("feature-layer-source:edit-failure",i.description,{code:i.code}):null}}_prepareAddFeatures(e){const i=new Map,r=new Array(e.length);let n=null;for(let a=0;a<e.length;a++){const o=e[a],l=this._serializeFeature(o);n||o.geometry==null||(n=o.geometry.type),r[a]=l,i.set(`${l.uid}`,o)}const s=this;return{features:r,inferredGeometryType:n,finish(a){const o=s.sourceJSON.objectIdField;for(const l in a){const c=a[l],h=i.get(l);h&&(h.attributes||(h.attributes={}),c===-1?delete h.attributes[o]:h.attributes[o]=c,s._addIdToClientGeometry(h))}}}}_addIdToClientGeometry(e){if(!this._idToClientGeometry)return;const i=this.sourceJSON.objectIdField,r=e.attributes?.[i];r!=null&&this._idToClientGeometry.set(r,e.geometry??null)}get _layerOrSourceGeometryType(){return this.layer?.geometryType??this.sourceJSON?.geometryType}_requiresClientGraphicMapping(){return this._geometryTypeRequiresClientGraphicMapping(this._layerOrSourceGeometryType)}_geometryRequiresClientGraphicMapping(e){return this._geometryTypeRequiresClientGraphicMapping(e.type)}_geometryTypeRequiresClientGraphicMapping(e){return e==="mesh"||e==="multipatch"||e==="extent"}_serializeFeature(e){const{attributes:i}=e,r=this._geometryForSerialization(e),n=(PJe++).toString();return r?{uid:n,geometry:r.toJSON(),attributes:i}:{uid:n,attributes:i}}_geometryForSerialization(e){const{geometry:i}=e;return i==null?null:this._geometryRequiresClientGraphicMapping(i)?i.extent?br.fromExtent(i.extent):null:i}async _startWorker(e){this._connection=await LVe("MemorySourceWorker",{strategy:ve("feature-layers-workers")?"dedicated":"local",signal:e,registryTarget:this});const{fields:i,spatialReference:r,objectIdField:n,hasM:s,hasZ:a,timeInfo:o,dateFieldsTimeZone:l}=this.layer,c=this.layer.originOf("spatialReference")==="defaults";await this._prepareClientMapping(this.items,e);const h=this._prepareAddFeatures(this.items);this.addHandles(this.on("before-changes",b=>{$e.getLogger(this).error("Source modifications will not propagate after layer has been loaded. Please use .applyEdits() instead"),b.preventDefault()}));const f={features:h.features,fields:i?.map(b=>b.toJSON()),geometryType:Sne.toJSON(this._workerGeometryType),hasM:this._layerOrSourceGeometryType!=="mesh"&&s,hasZ:this._layerOrSourceGeometryType==="mesh"||a,objectIdField:n,spatialReference:c?null:r&&r.toJSON(),timeInfo:o?.toJSON()??null,dateFieldsTimeZone:l},g=await this._connection.invoke("load",f,{signal:e});for(const b of g.warnings)$e.getLogger(this.layer).warn("#load()",`${b.message} (title: '${this.layer.title||"no title"}', id: '${this.layer.id??"no id"}')`,{warning:b});g.featureErrors.length&&$e.getLogger(this.layer).warn("#load()",`Encountered ${g.featureErrors.length} validation errors while loading features. (title: '${this.layer.title||"no title"}', id: '${this.layer.id??"no id"}')`,{errors:g.featureErrors});const y=g.layerDefinition;this._geometryTypeRequiresClientGraphicMapping(h.inferredGeometryType)&&(y.geometryType=Sne.toJSON(h.inferredGeometryType)),this.sourceJSON=y,this._requiresClientGraphicMapping()&&(this._idToClientGeometry=new Map),h.finish(g.assignedObjectIds)}};d([_Z({Type:Hr,ensureType:dn(Hr)})],um.prototype,"itemType",void 0),d([m()],um.prototype,"type",void 0),d([m({constructOnly:!0})],um.prototype,"layer",void 0),d([m({readOnly:!0})],um.prototype,"_workerGeometryType",null),d([m()],um.prototype,"sourceJSON",void 0),um=d([U("esri.layers.graphics.sources.MemorySource")],um);function OJe(t){return"portalItem"in t}const LJe=t=>{const e=t;let i=class extends e{get apiKey(){return this._isOverridden("apiKey")?this._get("apiKey"):OJe(this)?this.portalItem?.apiKey:null}set apiKey(r){r!=null?this._override("apiKey",r):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return d([m({type:String})],i.prototype,"apiKey",null),i=d([U("esri.layers.mixins.APIKeyMixin")],i),i},DJe=t=>{const e=t;let i=class extends e{get title(){if(this._get("title")&&this.originOf("title")!=="defaults")return this._get("title");if(this.url){const r=wu(this.url);if(r?.title)return r.title}return this._get("title")||""}set title(r){this._set("title",r)}set url(r){this._set("url",ZPe(r,$e.getLogger(this)))}};return d([m()],i.prototype,"title",null),d([m({type:String})],i.prototype,"url",null),i=d([U("esri.layers.mixins.ArcGISService")],i),i};let _oe=class extends SyntaxError{constructor(e,i,r,n){super(e),this.expected=i,this.found=r,this.location=n,this.name="SyntaxError"}format(e){let i="Error: "+this.message;if(this.location){let r=null;const n=e.find(l=>l.source===this.location.source);n&&(r=n.text.split(/\r\n|\n|\r/g));const s=this.location.start,a=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(s):s,o=this.location.source+":"+a.line+":"+a.column;if(r){const l=this.location.end,c="".padEnd(a.line.toString().length," "),h=r[s.line-1],f=(s.line===l.line?l.column:h.length+1)-s.column||1;i+=`
 --> `+o+`
`+c+` |
`+a.line+" | "+h+`
`+c+" | "+"".padEnd(s.column-1," ")+"".padEnd(f,"^")}else i+=`
 at `+o}return i}static buildMessage(e,i){function r(g){return g.codePointAt(0).toString(16).toUpperCase()}const n=Object.prototype.hasOwnProperty.call(RegExp.prototype,"unicode")?new RegExp("[\\p{C}\\p{Mn}\\p{Mc}]","gu"):null;function s(g){return n?g.replace(n,y=>"\\u{"+r(y)+"}"):g}function a(g){return s(g.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,y=>"\\x0"+r(y)).replace(/[\x10-\x1F\x7F-\x9F]/g,y=>"\\x"+r(y)))}function o(g){return s(g.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,y=>"\\x0"+r(y)).replace(/[\x10-\x1F\x7F-\x9F]/g,y=>"\\x"+r(y)))}const l={literal:g=>'"'+a(g.text)+'"',class(g){const y=g.parts.map(b=>Array.isArray(b)?o(b[0])+"-"+o(b[1]):o(b));return"["+(g.inverted?"^":"")+y.join("")+"]"+(g.unicode?"u":"")},any:()=>"any character",end:()=>"end of input",other:g=>g.description};function c(g){return l[g.type](g)}function h(g){const y=g.map(c);if(y.sort(),y.length>0){let b=1;for(let _=1;_<y.length;_++)y[_-1]!==y[_]&&(y[b]=y[_],b++);y.length=b}switch(y.length){case 1:return y[0];case 2:return y[0]+" or "+y[1];default:return y.slice(0,-1).join(", ")+", or "+y[y.length-1]}}function f(g){return g?'"'+a(g)+'"':"end of input"}return"Expected "+h(e)+" but "+f(i)+" found."}};function RJe(t,e){const i={},r=(e=e!==void 0?e:{}).grammarSource,n={start:N_};let s=N_;const a="none",o=")",l=",",c="(",h="%",f="px",g="cm",y="mm",b="in",_="pt",S="pc",$="deg",C="rad",I="grad",P="turn",O="#",N=".",R="e",G=/^[ \t\n\r]/,Y=/^[a-z\-]/,Q=/^[0-9a-fA-F]/,ae=/^[+\-]/,ce=/^[0-9]/,ne=hr("none"),K=Ki("none",!1),le=Ki(")",!1),re=Ki(",",!1),he=Xd([" ","	",`
`,"\r"],!1,!1,!1),xe=hr("function"),Pe=Ki("(",!1),He=hr("identifier"),oe=Xd([["a","z"],"-"],!1,!1,!1),be=hr("percentage"),Le=Ki("%",!1),Je=hr("length"),st=Ki("px",!1),ut=Ki("cm",!1),Pt=Ki("mm",!1),pi=Ki("in",!1),it=Ki("pt",!1),Wn=Ki("pc",!1),fn=hr("angle"),El=Ki("deg",!1),Ud=Ki("rad",!1),ra=Ki("grad",!1),Cl=Ki("turn",!1),Il=hr("number"),A_=hr("color"),Hd=Ki("#",!1),dg=Xd([["0","9"],["a","f"],["A","F"]],!1,!1,!1),Eu=Xd(["+","-"],!1,!1,!1),na=Xd([["0","9"]],!1,!1,!1),P_=Ki(".",!1),O_=Ki("e",!1);function ls(){return[]}function L_(se,Te){return{type:"function",name:se,parameters:Te||[]}}function Gd(se,Te){return Te.length>0?Xv(se,Te,3):[se]}function D_(se){return{type:"quantity",value:se.value,unit:se.unit}}function qd(se){return{type:"color",colorType:se.type,value:se.value}}function rk(se){return se}function hg(){return Fs()}function Gv(se){return{value:se,unit:"%"}}function qv(se){return{value:se,unit:"px"}}function Wd(se){return{value:se,unit:"cm"}}function Rs(se){return{value:se,unit:"mm"}}function vo(se){return{value:se,unit:"in"}}function zs(se){return{value:se,unit:"pt"}}function R_(se){return{value:se,unit:"pc"}}function Zp(se){return{value:se,unit:"deg"}}function Xp(se){return{value:se,unit:"rad"}}function Ml(se){return{value:se,unit:"grad"}}function Jp(se){return{value:se,unit:"turn"}}function Yd(se){return{value:se,unit:null}}function Cc(){return{type:"hex",value:Fs()}}function Zd(se){return{type:"function",value:se}}function Cu(){return{type:"named",value:Fs()}}function z_(){return parseFloat(Fs())}let Ie=0|e.peg$currPos,ar=Ie;const Da=[{line:1,column:1}];let Iu,Ra=Ie,Kp=e.peg$maxFailExpected||[],bt=0|e.peg$silentFails;if(e.startRule){if(!(e.startRule in n))throw new Error(`Can't start parsing from rule "`+e.startRule+'".');s=n[e.startRule]}function Fs(){return t.substring(ar,Ie)}function Al(se=Ie){const Te=t.codePointAt(se);return Te===void 0?"":String.fromCodePoint(Te)}function Ki(se,Te){return{type:"literal",text:se,ignoreCase:Te}}function Xd(se,Te,Qe,jt){return{type:"class",parts:se,inverted:Te,ignoreCase:Qe,unicode:jt}}function Ic(){return{type:"end"}}function hr(se){return{type:"other",description:se}}function zr(se){let Te,Qe=Da[se];if(Qe)return Qe;if(se>=Da.length)Te=Da.length-1;else for(Te=se;!Da[--Te];);for(Qe=Da[Te],Qe={line:Qe.line,column:Qe.column};Te<se;)t.charCodeAt(Te)===10?(Qe.line++,Qe.column=1):Qe.column++,Te++;return Da[se]=Qe,Qe}function Ft(se,Te,Qe){const jt=zr(se),Mi=zr(Te);return{source:r,start:{offset:se,line:jt.line,column:jt.column},end:{offset:Te,line:Mi.line,column:Mi.column}}}function Zt(se){Ie<Ra||(Ie>Ra&&(Ra=Ie,Kp=[]),Kp.push(se))}function F_(se,Te,Qe){return new _oe(_oe.buildMessage(se,Te),se,Te,Qe)}function N_(){let se;return se=j_(),se===i&&(se=Pl()),se}function j_(){let se,Te;return bt++,se=Ie,Fr(),t.substr(Ie,4)===a?(Te=a,Ie+=4):(Te=i,bt===0&&Zt(K)),Te!==i?(Fr(),ar=se,se=ls()):(Ie=se,se=i),bt--,se===i&&bt===0&&Zt(ne),se}function Pl(){let se,Te;if(se=[],Te=Mu(),Te!==i)for(;Te!==i;)se.push(Te),Te=Mu();else se=i;return se}function Mu(){let se,Te,Qe,jt;return se=Ie,Fr(),Te=Au(),Te!==i?(Fr(),Qe=Jd(),Qe===i&&(Qe=null),Fr(),t.charCodeAt(Ie)===41?(jt=o,Ie++):(jt=i,bt===0&&Zt(le)),jt!==i?(Fr(),ar=se,se=L_(Te,Qe)):(Ie=se,se=i)):(Ie=se,se=i),se}function Jd(){let se,Te,Qe,jt,Mi,xr,pr,qr;if(se=Ie,Te=Mc(),Te!==i){for(Qe=[],jt=Ie,Mi=Fr(),t.charCodeAt(Ie)===44?(xr=l,Ie++):(xr=i,bt===0&&Zt(re)),xr===i&&(xr=null),pr=Fr(),qr=Mc(),qr!==i?(Mi=[Mi,xr,pr,qr],jt=Mi):(Ie=jt,jt=i);jt!==i;)Qe.push(jt),jt=Ie,Mi=Fr(),t.charCodeAt(Ie)===44?(xr=l,Ie++):(xr=i,bt===0&&Zt(re)),xr===i&&(xr=null),pr=Fr(),qr=Mc(),qr!==i?(Mi=[Mi,xr,pr,qr],jt=Mi):(Ie=jt,jt=i);ar=se,se=Gd(Te,Qe)}else Ie=se,se=i;return se}function Mc(){let se,Te;return se=Ie,Te=Wv(),Te===i&&(Te=Yv(),Te===i&&(Te=Bo(),Te===i&&(Te=Pu()))),Te!==i&&(ar=se,Te=D_(Te)),se=Te,se===i&&(se=Ie,Te=Zv(),Te!==i&&(ar=se,Te=qd(Te)),se=Te),se}function Fr(){let se,Te;for(bt++,se=[],Te=t.charAt(Ie),G.test(Te)?Ie++:(Te=i,bt===0&&Zt(he));Te!==i;)se.push(Te),Te=t.charAt(Ie),G.test(Te)?Ie++:(Te=i,bt===0&&Zt(he));return bt--,se}function Au(){let se,Te,Qe;return bt++,se=Ie,Te=mn(),Te!==i?(t.charCodeAt(Ie)===40?(Qe=c,Ie++):(Qe=i,bt===0&&Zt(Pe)),Qe!==i?(ar=se,se=Te):(Ie=se,se=i)):(Ie=se,se=i),bt--,se===i&&(Te=i,bt===0&&Zt(xe)),se}function mn(){let se,Te,Qe;if(bt++,se=Ie,Te=[],Qe=t.charAt(Ie),Y.test(Qe)?Ie++:(Qe=i,bt===0&&Zt(oe)),Qe!==i)for(;Qe!==i;)Te.push(Qe),Qe=t.charAt(Ie),Y.test(Qe)?Ie++:(Qe=i,bt===0&&Zt(oe));else Te=i;return Te!==i&&(ar=se,Te=hg()),se=Te,bt--,se===i&&(Te=i,bt===0&&Zt(He)),se}function Wv(){let se,Te,Qe;return bt++,se=Ie,Fr(),Te=Ns(),Te!==i?(t.charCodeAt(Ie)===37?(Qe=h,Ie++):(Qe=i,bt===0&&Zt(Le)),Qe!==i?(ar=se,se=Gv(Te)):(Ie=se,se=i)):(Ie=se,se=i),bt--,se===i&&bt===0&&Zt(be),se}function Yv(){let se,Te,Qe;return bt++,se=Ie,Fr(),Te=Ns(),Te!==i?(t.substr(Ie,2)===f?(Qe=f,Ie+=2):(Qe=i,bt===0&&Zt(st)),Qe!==i?(ar=se,se=qv(Te)):(Ie=se,se=i)):(Ie=se,se=i),se===i&&(se=Ie,Fr(),Te=Ns(),Te!==i?(t.substr(Ie,2)===g?(Qe=g,Ie+=2):(Qe=i,bt===0&&Zt(ut)),Qe!==i?(ar=se,se=Wd(Te)):(Ie=se,se=i)):(Ie=se,se=i),se===i&&(se=Ie,Fr(),Te=Ns(),Te!==i?(t.substr(Ie,2)===y?(Qe=y,Ie+=2):(Qe=i,bt===0&&Zt(Pt)),Qe!==i?(ar=se,se=Rs(Te)):(Ie=se,se=i)):(Ie=se,se=i),se===i&&(se=Ie,Fr(),Te=Ns(),Te!==i?(t.substr(Ie,2)===b?(Qe=b,Ie+=2):(Qe=i,bt===0&&Zt(pi)),Qe!==i?(ar=se,se=vo(Te)):(Ie=se,se=i)):(Ie=se,se=i),se===i&&(se=Ie,Fr(),Te=Ns(),Te!==i?(t.substr(Ie,2)===_?(Qe=_,Ie+=2):(Qe=i,bt===0&&Zt(it)),Qe!==i?(ar=se,se=zs(Te)):(Ie=se,se=i)):(Ie=se,se=i),se===i&&(se=Ie,Fr(),Te=Ns(),Te!==i?(t.substr(Ie,2)===S?(Qe=S,Ie+=2):(Qe=i,bt===0&&Zt(Wn)),Qe!==i?(ar=se,se=R_(Te)):(Ie=se,se=i)):(Ie=se,se=i)))))),bt--,se===i&&bt===0&&Zt(Je),se}function Bo(){let se,Te,Qe;return bt++,se=Ie,Te=Ns(),Te!==i?(t.substr(Ie,3)===$?(Qe=$,Ie+=3):(Qe=i,bt===0&&Zt(El)),Qe!==i?(ar=se,se=Zp(Te)):(Ie=se,se=i)):(Ie=se,se=i),se===i&&(se=Ie,Te=Ns(),Te!==i?(t.substr(Ie,3)===C?(Qe=C,Ie+=3):(Qe=i,bt===0&&Zt(Ud)),Qe!==i?(ar=se,se=Xp(Te)):(Ie=se,se=i)):(Ie=se,se=i),se===i&&(se=Ie,Te=Ns(),Te!==i?(t.substr(Ie,4)===I?(Qe=I,Ie+=4):(Qe=i,bt===0&&Zt(ra)),Qe!==i?(ar=se,se=Ml(Te)):(Ie=se,se=i)):(Ie=se,se=i),se===i&&(se=Ie,Te=Ns(),Te!==i?(t.substr(Ie,4)===P?(Qe=P,Ie+=4):(Qe=i,bt===0&&Zt(Cl)),Qe!==i?(ar=se,se=Jp(Te)):(Ie=se,se=i)):(Ie=se,se=i)))),bt--,se===i&&(Te=i,bt===0&&Zt(fn)),se}function Pu(){let se,Te;return bt++,se=Ie,Fr(),Te=Ns(),Te!==i?(ar=se,se=Yd(Te)):(Ie=se,se=i),bt--,se===i&&bt===0&&Zt(Il),se}function Zv(){let se,Te,Qe,jt;if(bt++,se=Ie,t.charCodeAt(Ie)===35?(Te=O,Ie++):(Te=i,bt===0&&Zt(Hd)),Te!==i){if(Qe=[],jt=t.charAt(Ie),Q.test(jt)?Ie++:(jt=i,bt===0&&Zt(dg)),jt!==i)for(;jt!==i;)Qe.push(jt),jt=t.charAt(Ie),Q.test(jt)?Ie++:(jt=i,bt===0&&Zt(dg));else Qe=i;Qe!==i?(ar=se,se=Cc()):(Ie=se,se=i)}else Ie=se,se=i;return se===i&&(se=Ie,Te=Mu(),Te!==i&&(ar=se,Te=Zd(Te)),se=Te,se===i&&(se=Ie,Te=mn(),Te!==i&&(ar=se,Te=Cu()),se=Te)),bt--,se===i&&(Te=i,bt===0&&Zt(A_)),se}function Ns(){let se,Te,Qe,jt,Mi,xr,pr,qr;for(se=Ie,Te=t.charAt(Ie),ae.test(Te)?Ie++:(Te=i,bt===0&&Zt(Eu)),Te===i&&(Te=null),Qe=Ie,jt=[],Mi=t.charAt(Ie),ce.test(Mi)?Ie++:(Mi=i,bt===0&&Zt(na));Mi!==i;)jt.push(Mi),Mi=t.charAt(Ie),ce.test(Mi)?Ie++:(Mi=i,bt===0&&Zt(na));if(t.charCodeAt(Ie)===46?(Mi=N,Ie++):(Mi=i,bt===0&&Zt(P_)),Mi!==i){if(xr=[],pr=t.charAt(Ie),ce.test(pr)?Ie++:(pr=i,bt===0&&Zt(na)),pr!==i)for(;pr!==i;)xr.push(pr),pr=t.charAt(Ie),ce.test(pr)?Ie++:(pr=i,bt===0&&Zt(na));else xr=i;xr!==i?(jt=[jt,Mi,xr],Qe=jt):(Ie=Qe,Qe=i)}else Ie=Qe,Qe=i;if(Qe===i)if(Qe=[],jt=t.charAt(Ie),ce.test(jt)?Ie++:(jt=i,bt===0&&Zt(na)),jt!==i)for(;jt!==i;)Qe.push(jt),jt=t.charAt(Ie),ce.test(jt)?Ie++:(jt=i,bt===0&&Zt(na));else Qe=i;if(Qe!==i){if(jt=Ie,t.charCodeAt(Ie)===101?(Mi=R,Ie++):(Mi=i,bt===0&&Zt(O_)),Mi!==i){if(xr=t.charAt(Ie),ae.test(xr)?Ie++:(xr=i,bt===0&&Zt(Eu)),xr===i&&(xr=null),pr=[],qr=t.charAt(Ie),ce.test(qr)?Ie++:(qr=i,bt===0&&Zt(na)),qr!==i)for(;qr!==i;)pr.push(qr),qr=t.charAt(Ie),ce.test(qr)?Ie++:(qr=i,bt===0&&Zt(na));else pr=i;pr!==i?(Mi=[Mi,xr,pr],jt=Mi):(Ie=jt,jt=i)}else Ie=jt,jt=i;jt===i&&(jt=null),ar=se,se=z_()}else Ie=se,se=i;return se}function V_(se,Te){return se.map(function(Qe){return Qe[Te]})}function Xv(se,Te,Qe){return[se].concat(V_(Te,Qe))}Iu=s();const Kd=Iu!==i&&Ie===t.length;function Ou(){throw Iu!==i&&Ie<t.length&&Zt(Ic()),F_(Kp,Ra<t.length?Al(Ra):null,Ra<t.length?Ft(Ra,Ra+1):Ft(Ra,Ra))}return e.peg$library?{peg$result:Iu,peg$currPos:Ie,peg$FAILED:i,peg$maxFailExpected:Kp,peg$maxFailPos:Ra,peg$success:Kd,peg$throw:Kd?void 0:Ou}:Kd?Iu:void Ou()}function bX(t){if(!t||t.length===0)return null;if(typeof t=="string"){const i=xoe(t);return i&&i.length!==0?i:null}const e=t.map(i=>{if(!Number.isFinite(i.scale)||i.scale<=0)throw new ee("effect:invalid-scale","scale must be finite and greater than 0",{stop:i});return{scale:i.scale,effects:xoe(i.value)}});e.sort((i,r)=>r.effects.length-i.effects.length);for(let i=0;i<e.length-1;i++){if(!u0e(e[i].effects,e[i+1].effects))throw new ee("effect:interpolation-impossible","Cannot interpolate by scale between 2 lists of mixed effects",{a:e[i].effects,b:e[i+1].effects});d0e(e[i].effects,e[i+1].effects)}return e.sort((i,r)=>r.scale-i.scale),e}function xoe(t){let e;if(!t)return[];try{e=RJe(t)}catch(i){throw new ee("effect:invalid-syntax","Invalid effect syntax",{value:t,error:i})}return e.map(i=>zJe(i))}function zJe(t){try{switch(t.name){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":return FJe(t);case"opacity":return NJe(t);case"hue-rotate":return jJe(t);case"blur":return VJe(t);case"drop-shadow":return BJe(t);case"bloom":return UJe(t)}}catch(e){throw e.details.filter=t,e}throw new ee("effect:unknown-effect",`Effect '${t.name}' is not supported`,{effect:t})}function FJe(t){let e=1;return qT(t.parameters,1),t.parameters.length===1&&(e=wd(t.parameters[0])),new q9(t.name,e)}function NJe(t){let e=1;return qT(t.parameters,1),t.parameters.length===1&&(e=wd(t.parameters[0])),new l0e(e)}function jJe(t){let e=0;return qT(t.parameters,1),t.parameters.length===1&&(e=ZJe(t.parameters[0])),new a0e(e)}function VJe(t){let e=0;return qT(t.parameters,1),t.parameters.length===1&&(e=xX(t.parameters[0]),dA(e,t.parameters[0])),new t0e(e)}function BJe(t){const e=[];let i=null;for(const r of t.parameters)if(r.type==="color"){if(e.length&&Object.freeze(e),i)throw new ee("effect:type-error","Accepts only one color",{});i=XJe(r)}else{const n=xX(r);if(Object.isFrozen(e))throw new ee("effect:type-error","<length> parameters not consecutive",{lengths:e});e.push(n),e.length===3&&dA(n,r)}if(e.length<2||e.length>3)throw new ee("effect:type-error",`Expected <length>{2,3}, Actual: <length>{${e.length}}`,{lengths:e});return new n0e(e[0],e[1],e[2]||0,i||J1e("black"))}function UJe(t){let e=1,i=0,r=0;return qT(t.parameters,3),t.parameters[0]&&(e=wd(t.parameters[0])),t.parameters[1]&&(i=xX(t.parameters[1]),dA(i,t.parameters[1])),t.parameters[2]&&(r=wd(t.parameters[2])),new Qbe(e,i,r)}function qT(t,e){if(t.length>e)throw new ee("effect:type-error",`Function supports up to ${e} parameters, Actual: ${t.length}`,{parameters:t})}function DN(t){if(t.type==="color")return"<color>";if(t.unit){if(t.unit in _X)return"<length>";if(t.unit in wX)return"<angle>";if(t.unit==="%")return"<percentage>"}return"<double>"}function dA(t,e){if(t<0)throw new ee("effect:type-error",`Negative values are not allowed, Actual: ${t}`,{term:e})}function HJe(t){if(t.type!=="quantity"||t.unit!==null)throw new ee("effect:type-error",`Expected <double>, Actual: ${DN(t)}`,{term:t})}function GJe(t){if(t.type!=="quantity"||t.unit!==null&&t.unit!=="%")throw new ee("effect:type-error",`Expected <double> or <percentage>, Actual: ${DN(t)}`,{term:t})}const wX={deg:1,grad:.9,rad:180/Math.PI,turn:360};function qJe(t){if(t.type!=="quantity"||!(t.value===0&&t.unit===null||t.unit&&wX[t.unit]!=null))throw new ee("effect:type-error",`Expected <angle>, Actual: ${DN(t)}`,{term:t})}const _X={px:1,cm:96/2.54,mm:96/2.54/10,in:96,pc:16,pt:96/72};function WJe(t){if(t.type!=="quantity"||!(t.value===0&&t.unit===null||t.unit&&_X[t.unit]!=null))throw new ee("effect:type-error",`Expected <length>, Actual: ${DN(t)}`,{term:t})}function wd(t){GJe(t);const e=t.value;return dA(e,t),t.unit==="%"?.01*e:e}function YJe(t){return HJe(t),dA(t.value,t),t.value}function ZJe(t){return qJe(t),t.value*wX[t.unit]||0}function xX(t){return WJe(t),t.value*_X[t.unit]||0}function XJe(t){switch(t.colorType){case"hex":return ABe(t.value);case"named":return J1e(t.value);case"function":return QJe(t.value)}}function J1e(t){if(!Lbe(t))throw new ee("effect:unknown-color",`color '${t}' isn't valid`,{namedColor:t});return MBe(t)}const JJe=/^rgba?/i,KJe=/^hsla?/i;function QJe(t){if(qT(t.parameters,4),JJe.test(t.name))return[wd(t.parameters[0]),wd(t.parameters[1]),wd(t.parameters[2]),t.parameters[3]?wd(t.parameters[3]):1];if(KJe.test(t.name))return Dbe(YJe(t.parameters[0]),wd(t.parameters[1]),wd(t.parameters[2]),t.parameters[3]?wd(t.parameters[3]):1);throw new ee("effect:syntax-error",`Invalid color function '${t.name}'`,{colorFunction:t})}function jI(t,e,i){try{return tKe(t)}catch(r){i?.messages?.push(r)}return null}function VI(t,e,i,r){try{const n=eKe(t);Bn(i,n,e)}catch(n){r.messages&&r.messages.push(n)}}function eKe(t){const e=bX(t);return e?JUe(e)?e.map(i=>i.toJSON()):e.map(({scale:i,effects:r})=>({scale:i,value:r.map(n=>n.toJSON())})):null}function tKe(t){if(!t||t.length===0)return null;if(iKe(t)){const e=[];for(const i of t)e.push({scale:i.scale,value:gG(i.value)});return e}return gG(t)}function iKe(t){const e=t[0];return!!e&&"scale"in e}function gG(t){if(!t?.length)return"";const e=[];for(const i of t){let r=[];switch(i.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":r=[Cf(i,"amount")];break;case"blur":r=[Cf(i,"radius","pt")];break;case"hue-rotate":r=[Cf(i,"angle","deg")];break;case"drop-shadow":r=[Cf(i,"xoffset","pt"),Cf(i,"yoffset","pt"),Cf(i,"blurRadius","pt"),rKe(i,"color")];break;case"bloom":r=[Cf(i,"strength"),Cf(i,"radius","pt"),Cf(i,"threshold")]}const n=`${i.type}(${r.filter(Boolean).join(" ")})`;bX(n),e.push(n)}return e.join(" ")}function Cf(t,e,i){if(t[e]==null)throw new ee("effect:missing-parameter",`Missing parameter '${e}' in ${t.type} effect`,{effect:t});return i?t[e]+i:""+t[e]}function rKe(t,e){if(t[e]==null)throw new ee("effect:missing-parameter",`Missing parameter '${e}' in ${t.type} effect`,{effect:t});const i=t[e];return`rgba(${i[0]||0}, ${i[1]||0}, ${i[2]||0}, ${i[3]/255||0})`}const nKe={type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:{layerContainerTypes:Mr}},"portal-item":{read:!0,write:{layerContainerTypes:Mr}}}}},Soe={read:{reader:jI},write:{allowNull:!0,writer:VI,layerContainerTypes:Mr}},sKe={json:{read:!1,write:!1,origins:{"web-map":Soe,"portal-item":Soe}}},K1e=t=>{const e=t;let i=class extends e{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return d([m(nKe)],i.prototype,"blendMode",void 0),d([m(sKe)],i.prototype,"effect",void 0),i=d([U("esri.layers.mixins.BlendLayer")],i),i},aKe=t=>{const e=t;let i=class extends e{constructor(){super(...arguments),this.customParameters=null}};return d([m({type:Object,json:{write:{overridePolicy:r=>({enabled:!!(r&&Object.keys(r).length>0)})}}})],i.prototype,"customParameters",void 0),i=d([U("esri.layers.mixins.CustomParametersMixin")],i),i},Q1e=96;function i3t(t,e){const i=t.extent,r=t.width,n=kl(i?.spatialReference);return i&&r?i.width/r*n*nye*Q1e:0}function oKe(t,e){return t/(kl(e)*nye*Q1e)}function lKe(t,e){const i=t.extent,r=t.width-(t.padding?t.padding.left+t.padding.right:0),n=oKe(e,i.spatialReference);return i.clone().expand(n*r/i.width)}function cKe(t,e,i){return uKe(t,e)&&dKe(t,i)}function uKe(t,e){return e===0||po(t,e)||t<e}function dKe(t,e){return e===0||po(t,e)||t>e}function hKe(t,e){return po(t,e)?0:(t||Number.POSITIVE_INFINITY)>(e||Number.POSITIVE_INFINITY)?1:-1}const $oe={write:{overridePolicy:(t,e,i)=>({enabled:!i||i.filterMode==="scale"})}};let dm=class extends $t(_e){constructor(e){super(e),this.id=LT(),this.maxScale=0,this.minScale=0,this.title="",this.where=null}};d([m({type:String,json:{write:!0}})],dm.prototype,"id",void 0),d([m({type:Number,json:$oe})],dm.prototype,"maxScale",void 0),d([m({type:Number,json:$oe})],dm.prototype,"minScale",void 0),d([m({type:String,json:{write:!0}})],dm.prototype,"title",void 0),d([m({type:String,json:{write:!0}})],dm.prototype,"where",void 0),dm=d([U("esri.layers.support.DisplayFilter")],dm);function pKe(t,e){return{...e,filterMode:t.mode}}function fKe(t,e){return exe(t,e).next().value??null}function n3t(t,e,i){const r=mKe(t);if(r&&(Kye(e,r[0])||g9(i,r[1])))return"";const n=Array.from(exe(t,e,i)),s=gKe(n,e,i)?"1=1":n.map(a=>a.where||"1=1").reduce((a,o)=>Z9(a,o),"");return s&&s!=="1=1"?s:""}function mKe(t){if(txe(t)==="manual")return null;const e=[Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY];for(const{minScale:i,maxScale:r}of t.filters)e[0]=Math.max(e[0],BI(i)),e[1]=Math.min(e[1],bz(r));return e}function*exe(t,e,i){if(txe(t)==="manual"){const r=t.filters.find(n=>n.id===t.activeFilterId);r&&(yield r)}else{typeof e=="object"&&(e=e.scale);for(const r of t.filters)yKe(r.minScale,r.maxScale,e,i)&&(yield r)}}function gKe(t,e,i){if(t.length===0)return!0;const r=BI(t.at(0)?.minScale),n=bz(t.at(-1)?.maxScale);if(g9(r,e)||Kye(n,i))return!0;for(let s=0;s<t.length-1;s++){const a=t[s],o=t[s+1];if(g9(BI(o.minScale),bz(a.maxScale)))return!0}return!1}function yKe(t,e,i,r){return t=BI(t),i=BI(i),e=bz(e),!(!po(i,t)&&(r??i)>t)&&!nje(e,i)&&(r===void 0||!po(r,t))}function txe(t){return"mode"in t?t.mode:t.filterMode}function BI(t){return t||Number.POSITIVE_INFINITY}function bz(t){return t||0}let l0=class extends $t(_e){constructor(e){super(e),this.activeFilterId=null,this.filters=new(We.ofType(dm)),this.mode="manual"}writeFilters(e,i,r,n){const s=e.toArray();this.mode==="scale"&&s.sort((a,o)=>{const l=hKe(o.minScale,a.minScale),c=a.maxScale-o.maxScale;return l===0?c:l}),i[r]=s.map(a=>a.toJSON(n))}write(e,i){return super.write(e,pKe(this,i))}};d([m({type:String,json:{write:{overridePolicy:(t,e,i)=>({enabled:i.filterMode==="manual",isRequired:!0})}}})],l0.prototype,"activeFilterId",void 0),d([m({type:We.ofType(dm),nonNullable:!0,json:{write:!0}})],l0.prototype,"filters",void 0),d([qe("filters")],l0.prototype,"writeFilters",null),d([m({type:["manual","scale"],nonNullable:!0,json:{name:"filterMode",write:!0}})],l0.prototype,"mode",void 0),l0=d([U("esri.layers.support.DisplayFilterInfo")],l0);const vKe=t=>{const e=t;let i=class extends e{constructor(){super(...arguments),this.displayFilterEnabled=!0,this.displayFilterInfo=null}};return d([m(bKe)],i.prototype,"displayFilterEnabled",void 0),d([m(wKe)],i.prototype,"displayFilterInfo",void 0),i=d([U("esri.layers.mixins.DisplayFilteredLayer")],i),i},bKe={type:Boolean,json:{name:"layerDefinition.disableDisplayFilter",read:{reader:t=>!t},write:{layerContainerTypes:Mr,writer(t,e,i){Bn(i,!t,e)}},origins:{"web-scene":{write:!1,read:!1}}}},wKe={type:l0,json:{name:"layerDefinition.displayFilterInfo",write:{enabled:!0,allowNull:!0,layerContainerTypes:Mr},origins:{"web-scene":{write:!1,read:!1}}}},yG=eDe(),ixe=new Map,rxe=new Map;async function a3t(t,e,i){if(!t||!i)return!1;if(!e)return!0;const r=new URL(t).host;let n=ixe.get(r);if(!n){const s=t.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,"");n=(await Nt(s,{responseType:"json",query:{f:"json"}})).data.defaultVersionName}return n===e}async function Toe(t,e,i=!1){if(!t||!e)return!0;const r=t.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,""),n=rxe.get(r)?.entries();if(n){for(const[s,a]of n)if(a.name===e){const o=!a.stack?.hasForwardEdits();if(!o&&i){const[{deleteForwardEdits:l},{default:c}]=await Promise.all([fe(()=>import("./deleteForwardEdits-CiDHUgWt.js"),[]),fe(()=>import("./DeleteForwardEditsParameters-DB7PLdlh.js"),[])]),h=await l(r,s,new c({sessionId:yG,moment:a.moment}));return h.success&&a.stack?.clearForwardEdits(),h.success}return o}}return!0}function mD(t,e){if(!t)return!1;const i=t.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,""),r=rxe.get(i)?.entries();if(r){for(const[n,s]of r)if(s.name===e)return s.lockType==="edit"}return!1}const SX=new wfe;function nxe(t){return SX.on("apply-edits",new WeakRef(t))}function sxe(t){return SX.on("update-moment",new WeakRef(t))}function koe(t,e,i=null,r=!1){const n=Qs();return r=e==null||r,SX.emit("apply-edits",{serviceUrl:t,layerId:e,gdbVersion:i,mayReceiveServiceEdits:r,result:n.promise}),n}const axe=Symbol();function o3t(t){return t!=null&&typeof t=="object"&&axe in t}function T2(t){return t!=null&&typeof t=="object"&&"gdbVersion"in t}function jC(t,e,i){const r=new URL(t).host,n=ixe.get(r),s=a=>!a||a===n;return s(e)&&s(i)||e===i}const _Ke=t=>{var n;var e;const i=t;let r=(n=class extends i{constructor(...s){super(...s),this[e]=!0,this._applyEditsHandler=a=>{const{serviceUrl:o,layerId:l,gdbVersion:c,mayReceiveServiceEdits:h,result:f}=a,g=o===this.url,y=l!=null&&this.layerId!=null&&l===this.layerId,b=T2(this),_=T2(this)&&jC(o,c,this.gdbVersion);if(!g||b&&!_||!y&&!h)return;const S=f.then($=>{if(this.lastEditsEventDate=new Date,y&&($.addedFeatures.length||$.updatedFeatures.length||$.deletedFeatures.length||$.addedAttachments.length||$.updatedAttachments.length||$.deletedAttachments.length))return this.emit("edits",de($)),$;const C=$.editedFeatures?.find(({layerId:P})=>P===this.layerId);if(C){const{adds:P,updates:O,deletes:N}=C.editedFeatures,R={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:P?P.map(({attributes:G})=>({objectId:this.objectIdField&&G[this.objectIdField],globalId:this.globalIdField&&G[this.globalIdField]})):[],deletedFeatures:N?N.map(({attributes:G})=>({objectId:this.objectIdField&&G[this.objectIdField],globalId:this.globalIdField&&G[this.globalIdField]})):[],updatedFeatures:O?O.map(({current:{attributes:G}})=>({objectId:this.objectIdField&&G[this.objectIdField],globalId:this.globalIdField&&G[this.globalIdField]})):[],editedFeatures:de($.editedFeatures),exceededTransferLimit:!1,historicMoment:de($.historicMoment)};return this.emit("edits",R),R}const I={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:[],deletedFeatures:[],updatedFeatures:[],editedFeatures:de($.editedFeatures),exceededTransferLimit:!1,historicMoment:de($.historicMoment)};return"historicMoment"in this&&this._shouldUpdateHistoricMoment(o,c,I.historicMoment)&&this.emit("edits",I),I}).then($=>("historicMoment"in this&&this._shouldUpdateHistoricMoment(o,c,$.historicMoment)&&(this.historicMoment=$.historicMoment),$));this.emit("apply-edits",{result:S})},this._updateMomentHandler=a=>{const{serviceUrl:o,gdbVersion:l,moment:c}=a,h=o===this.url,f=T2(this),g=T2(this)&&jC(o,l,this.gdbVersion),y=T2(this)&&!jC(o,this.gdbVersion,null);h&&f&&g&&y&&"historicMoment"in this&&this.historicMoment!==c&&(this.historicMoment=c)},this.when().then(()=>{this.addHandles(nxe(this._applyEditsHandler)),"historicMoment"in this&&this.addHandles(sxe(this._updateMomentHandler))},()=>{})}_shouldUpdateHistoricMoment(s,a,o){return"historicMoment"in this&&this.historicMoment!==o&&mD(s,a)}},e=axe,n);return d([m()],r.prototype,"lastEditsEventDate",void 0),r=d([U("esri.layers.mixins.EditBusLayer")],r),r};var vG;const TB=new Gt({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),kB=new Gt({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let Eh=vG=class extends _e{constructor(t){super(t),this.where=null,this.geometry=null,this.spatialRelationship="intersects",this.distance=void 0,this.objectIds=null,this.units=null,this.timeExtent=null}createQuery(t={}){const{where:e,geometry:i,spatialRelationship:r,timeExtent:n,objectIds:s,units:a,distance:o}=this;return new _t({geometry:de(i),objectIds:de(s),spatialRelationship:r,timeExtent:de(n),where:e,units:a,distance:o,...t})}clone(){const{where:t,geometry:e,spatialRelationship:i,timeExtent:r,objectIds:n,units:s,distance:a}=this;return new vG({geometry:de(e),objectIds:de(n),spatialRelationship:i,timeExtent:de(r),where:t,units:s,distance:a})}};d([m({type:String,json:{write:!0}})],Eh.prototype,"where",void 0),d([m({types:BT,json:{write:!0}})],Eh.prototype,"geometry",void 0),d([m({type:TB.apiValues,json:{name:"spatialRel",read:{reader:TB.read},write:{allowNull:!1,writer:TB.write,overridePolicy(){return{enabled:this.geometry!=null}}}}})],Eh.prototype,"spatialRelationship",void 0),d([m({type:Number,json:{write:{overridePolicy(t){return{enabled:t!=null&&this.geometry!=null}}}}})],Eh.prototype,"distance",void 0),d([m({type:[Number],json:{write:!0}})],Eh.prototype,"objectIds",void 0),d([m({type:kB.apiValues,json:{read:kB.read,write:{writer:kB.write,overridePolicy(t){return{enabled:t!=null&&this.geometry!=null}}}}})],Eh.prototype,"units",void 0),d([m({type:nr,json:{write:!0}})],Eh.prototype,"timeExtent",void 0),Eh=vG=d([U("esri.layers.support.FeatureFilter")],Eh);const gD=Eh;var bG;const Eoe={read:{reader:jI},write:{writer:VI,overridePolicy(){return{allowNull:this.excludedEffect!=null,isRequired:this.excludedEffect==null}}}},Coe={read:{reader:jI},write:{writer:VI,overridePolicy(){return{allowNull:this.includedEffect!=null,isRequired:this.includedEffect==null}}}},Ioe={name:"showExcludedLabels",default:!0};let c0=bG=class extends _e{constructor(t){super(t),this.filter=null,this.includedEffect=null,this.excludedEffect=null,this.excludedLabelsVisible=!1}write(t,e){const i=super.write(t,e);if(e?.origin){if(i.filter){const r=Object.keys(i.filter);if(r.length>1||r[0]!=="where")return e.messages?.push(new ee("web-document-write:unsupported-feature-effect","Invalid feature effect 'filter'. A filter can only contain a 'where' property",{layer:e.layer,effect:this})),null}if("showExcludedLabels"in i)return e.messages?.push(new ee("web-document-write:unsupported-feature-effect","Invalid value for property 'excludedLabelsVisible' which should always be 'true'",{layer:e.layer,effect:this})),null}return i}clone(){return new bG({filter:this.filter!=null?this.filter.clone():null,includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})}};d([m({type:gD,json:{write:{allowNull:!0,writer(t,e,i,r){const n=t?.write({},r);n&&Object.keys(n).length!==0?Bn(i,n,e):Bn(i,null,e)}}}})],c0.prototype,"filter",void 0),d([m({json:{read:jI,write:{writer:VI,allowNull:!0},origins:{"web-map":Eoe,"portal-item":Eoe}}})],c0.prototype,"includedEffect",void 0),d([m({json:{read:jI,write:{writer:VI,allowNull:!0},origins:{"web-map":Coe,"portal-item":Coe}}})],c0.prototype,"excludedEffect",void 0),d([m({type:Boolean,json:{write:!0,name:"showExcludedLabels",origins:{"web-map":Ioe,"portal-item":Ioe}}})],c0.prototype,"excludedLabelsVisible",void 0),c0=bG=d([U("esri.layers.support.FeatureEffect")],c0);const Moe={write:{allowNull:!0}},xKe={type:c0,json:{origins:{"web-map":Moe,"portal-item":Moe}}},SKe=t=>{const e=t;let i=class extends e{constructor(){super(...arguments),this.featureEffect=null}};return d([m(xKe)],i.prototype,"featureEffect",void 0),i=d([U("esri.layers.mixins.FeatureEffectLayer")],i),i};var wG;let EE=wG=class extends _e{constructor(t){super(t),this.expression=void 0,this.title=void 0}async collectRequiredFields(t,e){return La(t,e,null,this.expression)}clone(){return new wG({expression:this.expression,title:this.title})}equals(t){return this.expression===t.expression&&this.title===t.title}};d([m({type:String,json:{write:{isRequired:!0}}})],EE.prototype,"expression",void 0),d([m({type:String,json:{write:!0}})],EE.prototype,"title",void 0),EE=wG=d([U("esri.symbols.support.FeatureExpressionInfo")],EE);const Aoe=EE,RN={unknown:1,inches:Dn(1,"meters","inches"),feet:Dn(1,"meters","feet"),"us-feet":Dn(1,"meters","us-feet"),yards:Dn(1,"meters","yards"),miles:Dn(1,"meters","miles"),"nautical-miles":Dn(1,"meters","nautical-miles"),millimeters:Dn(1,"meters","millimeters"),centimeters:Dn(1,"meters","centimeters"),decimeters:Dn(1,"meters","decimeters"),meters:Dn(1,"meters","meters"),kilometers:Dn(1,"meters","kilometers"),"decimal-degrees":1/V5e(1,"meters",hn.radius)};function l3t(t){return!!t&&RN[t]!=null}function c3t(t){return 1/(RN[t]||1)}function $Ke(){const t=Object.keys(RN);return RW(t,"decimal-degrees"),t.sort(),t}const TKe=$Ke(),FO=Gn()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),Poe=new Gt({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"});let Kf=class extends $t(_e){constructor(e){super(e),this.featureExpressionInfo=void 0,this.offset=null}readFeatureExpressionInfo(e,i){return e!=null?e.expression?e:void 0:i.featureExpression&&i.featureExpression.value===0?{expression:"0"}:void 0}writeFeatureExpressionInfo(e,i,r,n){i[r]=e.write({},n),e.expression==="0"&&(i.featureExpression={value:0})}get mode(){const{offset:e,featureExpressionInfo:i}=this;return this._isOverridden("mode")?this._get("mode"):e!=null||i?"relative-to-ground":"on-the-ground"}set mode(e){this._override("mode",e)}set unit(e){this._set("unit",e)}write(e,i){return this.offset||this.mode||this.featureExpressionInfo||this.unit?super.write(e,i):null}equals(e){return this.mode===e.mode&&this.offset===e.offset&&this.unit===e.unit&&dMe(this.featureExpressionInfo,e.featureExpressionInfo)}};d([m({type:Aoe,json:{write:!0}})],Kf.prototype,"featureExpressionInfo",void 0),d([Ve("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],Kf.prototype,"readFeatureExpressionInfo",null),d([qe("featureExpressionInfo",{featureExpressionInfo:{type:Aoe},"featureExpression.value":{type:[0]}})],Kf.prototype,"writeFeatureExpressionInfo",null),d([m({type:FO.apiValues,nonNullable:!0,json:{type:FO.jsonValues,read:FO.read,write:{writer:FO.write,isRequired:!0}}})],Kf.prototype,"mode",null),d([m({type:Number,json:{write:!0}})],Kf.prototype,"offset",void 0),d([m({type:TKe,json:{type:String,read:Poe.read,write:Poe.write}})],Kf.prototype,"unit",null),Kf=d([U("esri.symbols.support.ElevationInfo")],Kf);let Wx=class extends _e{constructor(e){super(e),this.description=null,this.label=null,this.type=null}};d([m({type:String,json:{write:!0}})],Wx.prototype,"description",void 0),d([m({type:String,json:{write:!0}})],Wx.prototype,"label",void 0),d([m()],Wx.prototype,"type",void 0),Wx=d([U("esri.tables.elements.AttributeTableElement")],Wx);const WT=Wx;let CE=class extends $t(WT){constructor(e){super(e),this.displayType="auto",this.type="attachment"}clone(){return super.clone()}};d([m({type:["auto"],json:{write:!0}})],CE.prototype,"displayType",void 0),d([m({type:["attachment"],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],CE.prototype,"type",void 0),CE=d([U("esri.tables.elements.AttributeTableAttachmentElement")],CE);const oxe=CE;let u0=class extends $t(WT){constructor(e){super(e),this.description=null,this.fieldName=null,this.label=null,this.type="field"}clone(){return super.clone()}};d([m({type:String,json:{read:!1,write:!1}})],u0.prototype,"description",void 0),d([m({type:String,json:{write:{enabled:!0,isRequired:!0}}})],u0.prototype,"fieldName",void 0),d([m({type:String,json:{read:!1,write:!1}})],u0.prototype,"label",void 0),d([m({type:["field"],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],u0.prototype,"type",void 0),u0=d([U("esri.tables.elements.AttributeTableFieldElement")],u0);const lxe=u0;let IE=class extends $t(WT){constructor(e){super(e),this.relationshipId=null,this.type="relationship"}clone(){return super.clone()}};d([m({type:Number,json:{type:li,write:{enabled:!0,isRequired:!0}}})],IE.prototype,"relationshipId",void 0),d([m({type:["relationship"],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],IE.prototype,"type",void 0),IE=d([U("esri.tables.elements.AttributeTableRelationshipElement")],IE);const cxe=IE,uxe={base:WT,key:"type",typeMap:{attachment:oxe,field:lxe,relationship:cxe}};function kKe(t){return{typesWithGroup:{base:WT,key:"type",typeMap:{attachment:oxe,field:lxe,group:t,relationship:cxe}},typesWithoutGroup:uxe}}let ME=class extends $t(WT){constructor(e){super(e),this.elements=null,this.type="group"}clone(){return super.clone()}};d([m({types:[uxe],json:{name:"attributeTableElements",write:!0}})],ME.prototype,"elements",void 0),d([m({type:["group"],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],ME.prototype,"type",void 0),ME=d([U("esri.tables.elements.AttributeTableGroupElement")],ME);const EKe=ME;let AE=class extends $t(_e){constructor(e){super(e),this.field=null,this.order=null}};d([m({type:String,json:{write:!0}})],AE.prototype,"field",void 0),d([m({type:["asc","desc"],json:{write:!0}})],AE.prototype,"order",void 0),AE=d([U("esri.tables.support.FieldOrder")],AE);const CKe=AE;var _G;const IKe=kKe(EKe);let PE=_G=class extends _e{constructor(t){super(t),this.elements=null,this.orderByFields=null}clone(){return new _G({elements:de(this.elements),orderByFields:de(this.orderByFields)})}};d([m({types:[IKe.typesWithGroup],json:{name:"attributeTableElements",write:!0}})],PE.prototype,"elements",void 0),d([m({type:[CKe],json:{write:!0}})],PE.prototype,"orderByFields",void 0),PE=_G=d([U("esri.tables.AttributeTableTemplate")],PE);const MKe=PE,AKe={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:{enabled:!0,layerContainerTypes:Mr}}},zN={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(t,e)=>!e.disablePopup},write:{enabled:!0,writer(t,e,i){e[i]=!t}}}},FN={type:Boolean,value:!0,nonNullable:!0,json:{name:"showLabels",write:{enabled:!0,layerContainerTypes:Mr}}},PKe={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:Gw}}},OKe={type:Boolean,value:!0,nonNullable:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:{enabled:!0,layerContainerTypes:Mr}}},LKe={value:null,type:Kf,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:{enabled:!0,layerContainerTypes:Mr}}};function y3t(t){return{type:t,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const dxe={write:{enabled:!0,layerContainerTypes:Mr},read:!0},xG={type:Number,json:{origins:{"web-document":dxe,"portal-item":{write:{layerContainerTypes:Mr}}}}},DKe={...xG,json:{...xG.json,origins:{"web-document":{...dxe,write:{enabled:!0,layerContainerTypes:Mr,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}}},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(t,e,i)=>i&&i.origin!=="service"||!e.drawingInfo||e.drawingInfo.transparency===void 0?e.layerDefinition?.drawingInfo&&e.layerDefinition.drawingInfo.transparency!==void 0?OI(e.layerDefinition.drawingInfo.transparency):void 0:OI(e.drawingInfo.transparency)}}},v3t={type:Wt,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(t,e)=>{const i=Wt.fromJSON(t);return e.spatialReference!=null&&typeof e.spatialReference=="object"&&(i.spatialReference=at.fromJSON(e.spatialReference)),i}}}},read:!1}},RKe={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},zKe={type:Number,json:{origins:{service:{write:{enabled:!1}}},name:"layerDefinition.minScale",write:{layerContainerTypes:Mr}}},FKe={type:Number,json:{origins:{service:{write:{enabled:!1}}},name:"layerDefinition.maxScale",write:{layerContainerTypes:Mr}}},hxe={json:{write:{ignoreOrigin:!0,layerContainerTypes:Mr},origins:{"web-map":{read:!1,write:!1}}}},NKe={type:MKe,json:{name:"attributeTableInfo",write:!0}};let Qf=class extends $t(_e){constructor(e){super(e),this.creatorField=null,this.creationDateField=null,this.editorField=null,this.editDateField=null,this.realm=null,this.timeZone=null}};d([m()],Qf.prototype,"creatorField",void 0),d([m()],Qf.prototype,"creationDateField",void 0),d([m()],Qf.prototype,"editorField",void 0),d([m()],Qf.prototype,"editDateField",void 0),d([m()],Qf.prototype,"realm",void 0),d([m(CR("dateFieldsTimeReference",!0))],Qf.prototype,"timeZone",void 0),Qf=d([U("esri.layers.support.EditFieldsInfo")],Qf);let Dh=class extends $t(_e){constructor(e){super(e)}};d([m({constructOnly:!0,json:{write:!0}})],Dh.prototype,"name",void 0),d([m({constructOnly:!0,json:{write:!0}})],Dh.prototype,"fields",void 0),d([m({constructOnly:!0,json:{write:!0}})],Dh.prototype,"isAscending",void 0),d([m({constructOnly:!0,json:{write:!0}})],Dh.prototype,"indexType",void 0),d([m({constructOnly:!0,json:{write:!0}})],Dh.prototype,"isUnique",void 0),d([m({constructOnly:!0,json:{write:!0}})],Dh.prototype,"description",void 0),Dh=d([U("esri.layers.support.FeatureIndex")],Dh);async function pxe(t,e,i){e=e.clone(),t.capabilities.query.supportsMaxRecordCountFactor&&(e.maxRecordCountFactor=fxe(t));const r=jKe(t),n=t.capabilities.query.supportsPagination;e.start=0,e.num=r;let s=null;for(;;){const a=await t.source.queryFeaturesJSON(e,i);if(s==null?s=a:s.features=s.features.concat(a.features),s.exceededTransferLimit=a.exceededTransferLimit,!n||!a.exceededTransferLimit)break;e.start+=r}return s}function jKe(t){return fxe(t)*VKe(t)}function VKe(t){return t.capabilities.query.maxRecordCount||2e3}function fxe(t){return t.capabilities.query.supportsMaxRecordCountFactor?_t.MAX_MAX_RECORD_COUNT_FACTOR:1}var SG;let OE=SG=class extends _e{constructor(t){super(t),this.minValue=0,this.maxValue=0}clone(){return new SG({minValue:this.minValue,maxValue:this.maxValue})}};d([m({type:Number,json:{write:!0}})],OE.prototype,"minValue",void 0),d([m({type:Number,json:{write:!0}})],OE.prototype,"maxValue",void 0),OE=SG=d([U("esri.renderers.support.AuthoringInfoClassBreakInfo")],OE);var $G;let Ry=$G=class extends _e{constructor(t){super(t),this.field="",this.normalizationField="",this.label="",this.classBreakInfos=new Array}clone(){return new $G({field:this.field,normalizationField:this.normalizationField,label:this.label,classBreakInfos:de(this.classBreakInfos)})}};d([m({type:String,json:{write:!0}})],Ry.prototype,"field",void 0),d([m({type:String,json:{write:!0}})],Ry.prototype,"normalizationField",void 0),d([m({type:String,json:{write:!0}})],Ry.prototype,"label",void 0),d([m({type:[OE],json:{write:!0}})],Ry.prototype,"classBreakInfos",void 0),Ry=$G=d([U("esri.renderers.support.AuthoringInfoFieldInfo")],Ry);var TG;let Yx=TG=class extends _e{constructor(t){super(t),this.label=null,this.size=null,this.value=null}clone(){return new TG({label:this.label,value:this.value,size:this.size})}};d([m({type:String,json:{write:!0}})],Yx.prototype,"label",void 0),d([m({type:Number,json:{write:!0}})],Yx.prototype,"size",void 0),d([m({type:Number,json:{write:!0}})],Yx.prototype,"value",void 0),Yx=TG=d([U("esri.renderers.support.AuthoringInfoSizeStop")],Yx);const BKe=Yx;var kG;const NO=new Gt({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"}),jO=new Gt({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),Ooe={key:t=>typeof t=="number"?"number":"string",typeMap:{number:Number,string:String},base:null},Loe=["high-to-low","above-and-below","centered-on","extremes"],Doe=[...new Set(["high-to-low","above-and-below","centered-on","extremes","above","below","high-to-low","above-and-below","above","below","reference-size","spike"])],Roe=["seconds","minutes","hours","days","months","years"],UKe=["circle","diamond","hexagon-flat","hexagon-pointy","square"],HKe=["triangle-closed-outline","triangle-gradient-fill-closed","triangle-gradient-fill-closed-outline","triangle-gradient-fill-open","triangle-gradient-fill-open-outline","triangle-open-outline","triangle-solid-fill-closed","triangle-solid-fill-closed-outline","triangle-solid-fill-open","triangle-solid-fill-open-outline"];let $s=kG=class extends _e{constructor(t){super(t),this.endTime=null,this.field=null,this.maxSliderValue=null,this.minSliderValue=null,this.startTime=null,this.type=null,this.units=null}castEndTime(t){return typeof t=="string"||typeof t=="number"?t:null}get normalizationField(){return this.theme==="reference-size"||this.theme==="spike"?this._get("normalizationField"):null}set normalizationField(t){this._set("normalizationField",t)}get referenceSizeScale(){return this.theme==="reference-size"?this._get("referenceSizeScale"):null}set referenceSizeScale(t){this._set("referenceSizeScale",t)}get referenceSizeSymbolStyle(){return this.theme==="reference-size"?this._get("referenceSizeSymbolStyle"):null}set referenceSizeSymbolStyle(t){this._set("referenceSizeSymbolStyle",t)}get spikeSymbolStyle(){return this.theme==="spike"?this._get("spikeSymbolStyle"):null}set spikeSymbolStyle(t){this._set("spikeSymbolStyle",t)}castStartTime(t){return typeof t=="string"||typeof t=="number"?t:null}get sizeStops(){return this.theme==="reference-size"||this.theme==="spike"?this._get("sizeStops"):null}set sizeStops(t){this._set("sizeStops",t)}get style(){return this.type==="color"?this._get("style"):null}set style(t){this._set("style",t)}get theme(){return this.type==="color"||this.type==="size"?this._get("theme")||"high-to-low":null}set theme(t){this._set("theme",t)}clone(){return new kG({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,normalizationField:this.normalizationField,referenceSizeScale:this.referenceSizeScale,referenceSizeSymbolStyle:this.referenceSizeSymbolStyle,spikeSymbolStyle:this.spikeSymbolStyle,sizeStops:de(this.sizeStops),startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})}};d([m({types:Ooe,json:{write:!0}})],$s.prototype,"endTime",void 0),d([Ii("endTime")],$s.prototype,"castEndTime",null),d([m({type:String,json:{write:!0}})],$s.prototype,"field",void 0),d([m({type:Number,json:{write:!0}})],$s.prototype,"maxSliderValue",void 0),d([m({type:Number,json:{write:!0}})],$s.prototype,"minSliderValue",void 0),d([m({type:String,json:{origins:{"web-scene":{write:!1}},write:!0}})],$s.prototype,"normalizationField",null),d([m({type:Number,value:null,json:{origins:{"web-scene":{write:!1}},write:!0}})],$s.prototype,"referenceSizeScale",null),d([m({type:UKe,value:null,json:{origins:{"web-scene":{write:!1}},write:!0}})],$s.prototype,"referenceSizeSymbolStyle",null),d([m({type:HKe,value:null,json:{origins:{"web-scene":{write:!1}},write:!0}})],$s.prototype,"spikeSymbolStyle",null),d([m({types:Ooe,json:{write:!0}})],$s.prototype,"startTime",void 0),d([Ii("startTime")],$s.prototype,"castStartTime",null),d([m({type:[BKe],json:{origins:{"web-scene":{write:!1}},write:!0}})],$s.prototype,"sizeStops",null),d([m({type:NO.apiValues,value:null,json:{type:NO.jsonValues,read:NO.read,write:NO.write}})],$s.prototype,"style",null),d([m({type:Doe,value:null,json:{type:Doe,origins:{"web-scene":{type:Loe,write:{writer:(t,e)=>{Loe.includes(t)&&(e.theme=t)}}}},write:!0}})],$s.prototype,"theme",null),d([m({type:jO.apiValues,json:{type:jO.jsonValues,read:jO.read,write:jO.write}})],$s.prototype,"type",void 0),d([m({type:Roe,json:{type:Roe,write:!0}})],$s.prototype,"units",void 0),$s=kG=d([U("esri.renderers.support.AuthoringInfoVisualVariable")],$s);const GKe=$s;let QS=class extends _e{constructor(e){super(e),this.type=null}};d([m({readOnly:!0,json:{read:!1,write:!0}})],QS.prototype,"type",void 0),QS=d([U("esri.rest.support.ColorRamp")],QS);var EG;let Sm=EG=class extends QS{constructor(t){super(t),this.algorithm=null,this.fromColor=null,this.toColor=null,this.type="algorithmic"}clone(){return new EG({fromColor:de(this.fromColor),toColor:de(this.toColor),algorithm:this.algorithm})}};d([pt({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],Sm.prototype,"algorithm",void 0),d([m({type:Ye,json:{type:[li],write:{isRequired:!0}}})],Sm.prototype,"fromColor",void 0),d([m({type:Ye,json:{type:[li],write:{isRequired:!0}}})],Sm.prototype,"toColor",void 0),d([m({type:["algorithmic"],json:{write:{isRequired:!0}}})],Sm.prototype,"type",void 0),Sm=EG=d([U("esri.rest.support.AlgorithmicColorRamp")],Sm);var CG;let hm=CG=class extends QS{constructor(t){super(t),this.colorRamps=null,this.type="multipart",this.weights=void 0}writeColorRamps(t,e,i,r){const n=t?.map(a=>a.toJSON(r)),{weights:s}=this;if(n&&s?.length&&n.length===s?.length){const a=100/s.reduce((l,c)=>l+c);let o=0;n.forEach((l,c)=>{l.start=o,o+=s[c]*a,l.stop=o})}e.colorRamps=n}readWeights(t,e){const i=e.colorRamps?.map(({start:r,stop:n})=>r==null||n==null?-1:n-r);if(!i?.some(r=>r<0))return i}clone(){return new CG({colorRamps:de(this.colorRamps)})}};d([m({type:[Sm],json:{write:{isRequired:!0}}})],hm.prototype,"colorRamps",void 0),d([qe("colorRamps")],hm.prototype,"writeColorRamps",null),d([m({type:["multipart"],json:{write:{isRequired:!0}}})],hm.prototype,"type",void 0),d([m({type:[Number]})],hm.prototype,"weights",void 0),d([Ve("weights",["colorRamps"])],hm.prototype,"readWeights",null),hm=CG=d([U("esri.rest.support.MultipartColorRamp")],hm);const qKe={key:"type",base:QS,typeMap:{algorithmic:Sm,multipart:hm}};function WKe(t){return t?.type?t.type==="algorithmic"?Sm.fromJSON(t):t.type==="multipart"?hm.fromJSON(t):null:null}var IG;const Ab=new Gt({esriClassifyDefinedInterval:"defined-interval",esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),VO=new Gt({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density",flow:"flow"}),zoe=["inches","feet","yards","miles","nautical-miles","millimeters","centimeters","decimeters","meters","kilometers"],YKe=["high-to-low","above-and-below","above","below"],ZKe=["flow-line","wave-front"],XKe=["caret","circle-caret","arrow","circle-arrow","plus-minus","circle-plus-minus","square","circle","triangle","happy-sad","thumb","custom"];let Jr=IG=class extends _e{constructor(t){super(t),this.colorRamp=null,this.fadeRatio=null,this.isAutoGenerated=!1,this.lengthUnit=null,this.maxSliderValue=null,this.minSliderValue=null,this.visualVariables=null}get classificationMethod(){const t=this._get("classificationMethod"),e=this.type;return e&&e!=="relationship"?e==="class-breaks-size"||e==="class-breaks-color"?t||"manual":null:t}set classificationMethod(t){this._set("classificationMethod",t)}readColorRamp(t){return t?WKe(t):void 0}get fields(){return this.type&&this.type!=="predominance"?null:this._get("fields")}set fields(t){this._set("fields",t)}get field1(){return this.type&&this.type!=="relationship"?null:this._get("field1")}set field1(t){this._set("field1",t)}get field2(){return this.type&&this.type!=="relationship"?null:this._get("field2")}set field2(t){this._set("field2",t)}get flowTheme(){return this.type==="flow"?this._get("flowTheme"):null}set flowTheme(t){this._set("flowTheme",t)}get focus(){return this.type&&this.type!=="relationship"?null:this._get("focus")}set focus(t){this._set("focus",t)}get numClasses(){return this.type&&this.type!=="relationship"?null:this._get("numClasses")}set numClasses(t){this._set("numClasses",t)}get statistics(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("statistics"):null}set statistics(t){this._set("statistics",t)}get standardDeviationInterval(){const t=this.type;return t&&t!=="relationship"&&t!=="class-breaks-size"&&t!=="class-breaks-color"||this.classificationMethod&&this.classificationMethod!=="standard-deviation"?null:this._get("standardDeviationInterval")}set standardDeviationInterval(t){this._set("standardDeviationInterval",t)}get type(){return this._get("type")}set type(t){let e=t;t==="classed-size"?e="class-breaks-size":t==="classed-color"&&(e="class-breaks-color"),this._set("type",e)}get univariateSymbolStyle(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("univariateSymbolStyle"):null}set univariateSymbolStyle(t){this._set("univariateSymbolStyle",t)}get univariateTheme(){return this.type==="univariate-color-size"?this._get("univariateTheme"):null}set univariateTheme(t){this._set("univariateTheme",t)}clone(){return new IG({classificationMethod:this.classificationMethod,colorRamp:de(this.colorRamp),fadeRatio:de(this.fadeRatio),fields:this.fields?.slice(),field1:de(this.field1),field2:de(this.field2),isAutoGenerated:this.isAutoGenerated,focus:this.focus,numClasses:this.numClasses,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,lengthUnit:this.lengthUnit,statistics:this.statistics,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map(t=>t.clone()),univariateSymbolStyle:this.univariateSymbolStyle,univariateTheme:this.univariateTheme,flowTheme:this.flowTheme})}};d([m({type:Ab.apiValues,value:null,json:{type:Ab.jsonValues,read:Ab.read,write:Ab.write,origins:{"web-document":{default:"manual",type:Ab.jsonValues,read:Ab.read,write:Ab.write}}}})],Jr.prototype,"classificationMethod",null),d([m({types:qKe,json:{write:!0}})],Jr.prototype,"colorRamp",void 0),d([Ve("colorRamp")],Jr.prototype,"readColorRamp",null),d([m({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Jr.prototype,"fadeRatio",void 0),d([m({type:[String],value:null,json:{write:!0}})],Jr.prototype,"fields",null),d([m({type:Ry,value:null,json:{write:!0}})],Jr.prototype,"field1",null),d([m({type:Ry,value:null,json:{write:!0}})],Jr.prototype,"field2",null),d([m({type:ZKe,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Jr.prototype,"flowTheme",null),d([m({type:["HH","HL","LH","LL"],value:null,json:{write:!0}})],Jr.prototype,"focus",null),d([m({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1}}}})],Jr.prototype,"isAutoGenerated",void 0),d([m({type:Number,value:null,json:{type:li,write:!0}})],Jr.prototype,"numClasses",null),d([m({type:zoe,json:{type:zoe,read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],Jr.prototype,"lengthUnit",void 0),d([m({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Jr.prototype,"maxSliderValue",void 0),d([m({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Jr.prototype,"minSliderValue",void 0),d([m({type:Object,value:null,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Jr.prototype,"statistics",null),d([m({type:[.25,.33,.5,1],value:null,json:{type:[.25,.33,.5,1],write:!0}})],Jr.prototype,"standardDeviationInterval",null),d([m({type:VO.apiValues,value:null,json:{type:VO.jsonValues,read:VO.read,write:VO.write}})],Jr.prototype,"type",null),d([m({type:[GKe],json:{write:!0}})],Jr.prototype,"visualVariables",void 0),d([m({type:XKe,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Jr.prototype,"univariateSymbolStyle",null),d([m({type:YKe,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Jr.prototype,"univariateTheme",null),Jr=IG=d([U("esri.renderers.support.AuthoringInfo")],Jr);const EB=new Gt({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap",dotDensity:"dot-density",dictionary:"dictionary",pieChart:"pie-chart"},{ignoreUnknown:!0});let wc=class extends _e{constructor(e){super(e),this.authoringInfo=null,this.type=null}async getRequiredFields(e){if(!this.collectRequiredFields)return[];const i=new Set;return await this.collectRequiredFields(i,e),Array.from(i).sort()}getSymbol(e,i){}async getSymbolAsync(e,i){}get symbols(){return[]}get arcadeRequired(){return!1}getAttributeHash(){return JSON.stringify(this)}getMeshHash(){return JSON.stringify(this)}};d([m({type:Jr,json:{write:!0}})],wc.prototype,"authoringInfo",void 0),d([m({type:EB.apiValues,readOnly:!0,json:{type:EB.jsonValues,read:!1,write:{writer:EB.write,ignoreOrigin:!0,isRequired:!0}}})],wc.prototype,"type",void 0),wc=d([U("esri.renderers.Renderer")],wc);let LE=class extends $t(_e){constructor(){super(...arguments),this.showLegend=null,this.title=null}};d([m({type:Boolean,json:{write:!0}})],LE.prototype,"showLegend",void 0),d([m({type:String,json:{write:!0}})],LE.prototype,"title",void 0),LE=d([U("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],LE);const mxe=LE,CB=new Gt({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"});let eo=class extends _e{constructor(e){super(e),this.index=null,this.type=null,this.field=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null}castField(e){return e==null?e:typeof e=="function"?($e.getLogger(this).error(".field: field must be a string value"),null):DM(e)}get arcadeRequired(){return!!this.valueExpression}clone(){}getAttributeHash(){return`${this.type}-${this.field}-${this.valueExpression}`}};d([m()],eo.prototype,"index",void 0),d([m({type:CB.apiValues,readOnly:!0,json:{read:CB.read,write:{writer:CB.write,isRequired:!0}}})],eo.prototype,"type",void 0),d([m({type:String,json:{write:!0}})],eo.prototype,"field",void 0),d([Ii("field")],eo.prototype,"castField",null),d([m({type:String,json:{write:!0}})],eo.prototype,"valueExpression",void 0),d([m({type:String,json:{write:!0}})],eo.prototype,"valueExpressionTitle",void 0),d([m({readOnly:!0})],eo.prototype,"arcadeRequired",null),d([m({type:mxe,json:{write:!0}})],eo.prototype,"legendOptions",void 0),eo=d([U("esri.renderers.visualVariables.VisualVariable")],eo);var MG;let d0=MG=class extends _e{constructor(t){super(t),this.color=null,this.label=null,this.value=null}writeValue(t,e,i){e[i]=t??0}clone(){return new MG({color:this.color&&this.color.clone(),label:this.label,value:this.value})}};d([m({type:Ye,json:{type:[li],write:{isRequired:!0}}})],d0.prototype,"color",void 0),d([m({type:String,json:{write:!0}})],d0.prototype,"label",void 0),d([m({type:Number,json:{write:{writerEnsuresNonNull:!0}}})],d0.prototype,"value",void 0),d([qe("value")],d0.prototype,"writeValue",null),d0=MG=d([U("esri.renderers.visualVariables.support.ColorStop")],d0);const JKe=d0;var AG;let zy=AG=class extends eo{constructor(t){super(t),this.type="color",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(t){t&&Array.isArray(t)&&(t=t.filter(e=>!!e)).sort((e,i)=>e.value-i.value),this._set("stops",t)}clone(){return new AG({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(t=>t.clone()),legendOptions:this.legendOptions?.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(t=>t.value||0)}};d([m({readOnly:!0})],zy.prototype,"cache",null),d([m({type:["color"],json:{type:["colorInfo"]}})],zy.prototype,"type",void 0),d([m({type:String,json:{write:!0}})],zy.prototype,"normalizationField",void 0),d([m({type:[JKe],json:{write:!0}})],zy.prototype,"stops",null),zy=AG=d([U("esri.renderers.visualVariables.ColorVariable")],zy);var PG;let Sy=PG=class extends _e{constructor(t){super(t),this.label=null,this.opacity=null,this.value=null}readOpacity(t,e){return OI(e.transparency)}writeOpacity(t,e,i){e[i]=mN(t)}clone(){return new PG({label:this.label,opacity:this.opacity,value:this.value})}};d([m({type:String,json:{write:!0}})],Sy.prototype,"label",void 0),d([m({type:Number,json:{type:li,write:{target:"transparency",isRequired:!0}}})],Sy.prototype,"opacity",void 0),d([Ve("opacity",["transparency"])],Sy.prototype,"readOpacity",null),d([qe("opacity")],Sy.prototype,"writeOpacity",null),d([m({type:Number,json:{write:{isRequired:!0}}})],Sy.prototype,"value",void 0),Sy=PG=d([U("esri.renderers.visualVariables.support.OpacityStop")],Sy);const KKe=Sy;var OG;let $m=OG=class extends eo{constructor(t){super(t),this.type="opacity",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(t){t&&Array.isArray(t)&&(t=t.filter(e=>!!e)).sort((e,i)=>e.value-i.value),this._set("stops",t)}clone(){return new OG({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(t=>t.clone()),legendOptions:this.legendOptions?.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(t=>t.value||0)}};d([m({readOnly:!0})],$m.prototype,"cache",null),d([m({type:["opacity"],json:{type:["transparencyInfo"]}})],$m.prototype,"type",void 0),d([m({type:String,json:{write:!0}})],$m.prototype,"normalizationField",void 0),d([m({type:[KKe],json:{write:!0}})],$m.prototype,"stops",null),$m=OG=d([U("esri.renderers.visualVariables.OpacityVariable")],$m);var LG;let Fy=LG=class extends eo{constructor(t){super(t),this.axis=null,this.type="rotation",this.rotationType="geographic"}get cache(){return{hasExpression:!!this.valueExpression,compiledFunc:null}}clone(){return new LG({axis:this.axis,rotationType:this.rotationType,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:this.legendOptions?.clone()})}};d([m({readOnly:!0})],Fy.prototype,"cache",null),d([m({type:["heading","tilt","roll"],json:{origins:{"web-scene":{default:"heading",write:!0}}}})],Fy.prototype,"axis",void 0),d([m({type:["rotation"],json:{type:["rotationInfo"]}})],Fy.prototype,"type",void 0),d([m({type:["geographic","arithmetic"],json:{write:!0,origins:{"web-document":{write:!0,default:"geographic"}}}})],Fy.prototype,"rotationType",void 0),Fy=LG=d([U("esri.renderers.visualVariables.RotationVariable")],Fy);function QKe(t){return xi(t)}var DG;let _d=DG=class extends _e{constructor(t){super(t),this.label=null,this.size=null,this.value=null,this.useMinValue=null,this.useMaxValue=null}clone(){return new DG({label:this.label,size:this.size,value:this.value,useMaxValue:this.useMaxValue,useMinValue:this.useMinValue})}};d([m({type:String,json:{write:!0}})],_d.prototype,"label",void 0),d([m({type:Number,cast:xi,json:{write:{isRequired:!0}}})],_d.prototype,"size",void 0),d([m({type:Number,json:{write:{isRequired:!0}}})],_d.prototype,"value",void 0),d([m({type:Boolean,json:{write:!1}})],_d.prototype,"useMinValue",void 0),d([m({type:Boolean,json:{write:!1}})],_d.prototype,"useMaxValue",void 0),_d=DG=d([U("esri.renderers.visualVariables.support.SizeStop")],_d);let yD=class extends mxe{constructor(){super(...arguments),this.customValues=null}};d([m({type:[Number],json:{write:!0}})],yD.prototype,"customValues",void 0),yD=d([U("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],yD);const gxe=yD;function kS(t){return t&&t.declaredClass==="esri.renderers.visualVariables.SizeVariable"}function t_(t){return t!=null&&!isNaN(t)&&isFinite(t)}function yxe(t){return t.valueExpression?"expression":t.field&&typeof t.field=="string"?"field":"unknown"}function eQe(t,e){const i=e||yxe(t),r=t.valueUnit||"unknown";return i==="unknown"?"constant":t.stops?"stops":t.minSize!=null&&t.maxSize!=null&&t.minDataValue!=null&&t.maxDataValue!=null?"clamped-linear":r==="unknown"?t.minSize!=null&&t.minDataValue!=null?t.minSize&&t.minDataValue?"proportional":"additive":"identity":"real-world-size"}const vxe=()=>$e.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),NN=t=>vxe().warn(`The visualVariable should be an instance of esri.renderers.visualVariables.${t}`),jN=()=>vxe().error("Use of arcade expressions requires an arcade context"),Foe=new Hr,vD=Math.PI,bxe=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function wxe(t,e,i){const r="visualVariables"in t?t.visualVariables?.find(b=>b.type==="color"):t;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.ColorVariable")return void NN("ColorVariable");const n=typeof e=="number",s=n?null:e,a=s?.attributes;let o=n?e:null;const l=r.field,{ipData:c,hasExpression:h}=r.cache;let f=r.cache.compiledFunc;if(!l&&!h){const b=r.stops;return b&&b[0]&&b[0].color}if(typeof o!="number")if(h){if(i?.arcade==null)return void jN();const b={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},_=i.arcade.arcadeUtils,S=_.getViewInfo(b),$=_.createExecContext(s,S,i.timeZone);if(!f){const C=_.createSyntaxTree(r.valueExpression);f=_.createFunction(C),r.cache.compiledFunc=f}o=_.executeFunction(f,$)}else a&&(o=a[l]);const g=r.normalizationField,y=a!=null&&g!=null?parseFloat(a[g]):void 0;if(o!=null&&(!g||n||!isNaN(y)&&y!==0)){t_(y)&&!n&&(o/=y);const b=$X(o,c);if(b){const _=b[0],S=b[1],$=_===S?r.stops[_].color:Ye.blendColors(r.stops[_].color,r.stops[S].color,b[2],i?.color);return new Ye($)}}}function _xe(t,e,i){const r="visualVariables"in t?t.visualVariables?.find(b=>b.type==="opacity"):t;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.OpacityVariable")return void NN("OpacityVariable");const n=typeof e=="number",s=n?null:e,a=s?.attributes;let o=n?e:null;const l=r.field,{ipData:c,hasExpression:h}=r.cache;let f=r.cache.compiledFunc;if(!l&&!h){const b=r.stops;return b&&b[0]&&b[0].opacity}if(typeof o!="number")if(h){if(i?.arcade==null)return void jN();const b={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},_=i.arcade.arcadeUtils,S=_.getViewInfo(b),$=_.createExecContext(s,S,i.timeZone);if(!f){const C=_.createSyntaxTree(r.valueExpression);f=_.createFunction(C),r.cache.compiledFunc=f}o=_.executeFunction(f,$)}else a&&(o=a[l]);const g=r.normalizationField,y=a!=null&&g!=null?parseFloat(a[g]):void 0;if(o!=null&&(!g||n||!isNaN(y)&&y!==0)){t_(y)&&!n&&(o/=y);const b=$X(o,c);if(b){const _=b[0],S=b[1];if(_===S)return r.stops[_].opacity;{const $=r.stops[_].opacity;return $+(r.stops[S].opacity-$)*b[2]}}}}function xxe(t,e,i){const r="visualVariables"in t?t.visualVariables?.find(y=>y.type==="rotation"):t;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.RotationVariable")return void NN("RotationVariable");const n=r.axis||"heading",s=n==="heading"&&r.rotationType==="arithmetic"?90:0,a=n==="heading"&&r.rotationType==="arithmetic"?-1:1,o=typeof e=="number"?null:e,l=o?.attributes,c=r.field,{hasExpression:h}=r.cache;let f=r.cache.compiledFunc,g=null;if(!c&&!h)return g;if(h){if(i?.arcade==null)return void jN();const y={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},b=i.arcade.arcadeUtils,_=b.getViewInfo(y),S=b.createExecContext(o,_,i.timeZone);if(!f){const $=b.createSyntaxTree(r.valueExpression);f=b.createFunction($),r.cache.compiledFunc=f}g=b.executeFunction(f,S)}else l&&(g=l[c]);return g=typeof g!="number"||isNaN(g)?null:s+a*g,g}function tQe(t,e,i){const r=typeof e=="number",n=r?null:e,s=n?.attributes;let a=r?e:null;const{isScaleDriven:o}=t.cache;let l=t.cache.compiledFunc;if(o){const h=i?.scale,f=i?.view;a=h==null||f==="3d"?iQe(t):h}else if(!r)switch(t.inputValueType){case"expression":{if(i?.arcade==null)return void jN();const h={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},f=i.arcade.arcadeUtils,g=f.getViewInfo(h),y=f.createExecContext(n,g,i.timeZone);if(!l){const b=f.createSyntaxTree(t.valueExpression);l=f.createFunction(b),t.cache.compiledFunc=l}a=f.executeFunction(l,y);break}case"field":s&&(a=s[t.field]);break;case"unknown":a=null}if(!t_(a))return null;if(r||!t.normalizationField)return a;const c=s?parseFloat(s[t.normalizationField]):null;return t_(c)&&c!==0?a/c:null}function iQe(t){let e=null,i=null;const r=t.stops;return r?(e=r[0].value,i=r[r.length-1].value):(e=t.minDataValue||0,i=t.maxDataValue||0),(e+i)/2}function VN(t,e,i){const r="visualVariables"in t?t.visualVariables?.find(s=>s.type==="size"):t;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.SizeVariable")return void NN("SizeVariable");const n=$xe(tQe(r,e,i),r,e,i,r.cache.ipData);return n==null||isNaN(n)?void 0:n}function Sl(t,e,i){return t==null?null:kS(t)?VN(t,e,i):t_(t)?t:null}function Sxe(t,e,i){return t_(i)&&t>i?i:t_(e)&&t<e?e:t}function rQe(t,e,i,r){const n=Sl(e.minSize,i,r)||e.minDataValue;return t==null&&n==null?null:(t??0)+(n??0)}function nQe(t,e,i){const r=t.stops;let n=r?.length&&r[0].size;return n==null&&(n=t.minSize),Sl(n,e,i)}function sQe(t,e,i,r){const n=Sl(e.minSize,i,r);if(t==null)return n;const{minDataValue:s,maxDataValue:a}=e;if(s==null||a==null)return null;const o=(t-s)/(a-s),l=Sl(e.maxSize,i,r),c=r?.shape;if(t<=s)return n;if(t>=a)return l;if(n==null||l==null)return null;if(e.scaleBy==="area"&&c){const h=c==="circle",f=h?vD*(n/2)**2:n*n,g=f+o*((h?vD*(l/2)**2:l*l)-f);return h?2*Math.sqrt(g/vD):Math.sqrt(g)}return n+o*(l-n)}function aQe(t,e,i,r){const n=Sl(e.minSize,i,r);if(t==null||n==null)return n;const s=r?.shape,{minDataValue:a}=e;if(a==null)return null;const o=t/a,l=Sl(e.maxSize,i,r);let c=null;return c=s==="circle"?2*Math.sqrt(o*(n/2)**2):s==="square"||s==="diamond"||s==="image"?Math.sqrt(o*n**2):o*n,Sxe(c,n,l)}function oQe(t,e,i,r,n){if(t==null)return null;const[s,a,o]=$X(t,n);if(s===a)return Sl(e.stops?.[s].size,i,r);{const l=Sl(e.stops?.[s].size,i,r),c=Sl(e.stops?.[a].size,i,r);return l==null||c==null?null:l+(c-l)*o}}function lQe(t,e,i,r){const n=(r?.resolution??1)*RN[e.valueUnit],s=Sl(e.minSize,i,r),a=Sl(e.maxSize,i,r),{valueRepresentation:o}=e;if(t==null)return s;let l=null;return l=o==="area"?2*Math.sqrt(t/vD)/n:o==="radius"||o==="distance"?2*t/n:t/n,Sxe(l,s,a)}function $xe(t,e,i,r,n){switch(e.transformationType){case"additive":return rQe(t,e,i,r);case"constant":return nQe(e,i,r);case"clamped-linear":return sQe(t,e,i,r);case"proportional":return aQe(t,e,i,r);case"stops":return oQe(t,e,i,r,n);case"real-world-size":return lQe(t,e,i,r);case"identity":return t;case"unknown":return null}}function cQe(t,e,i){const{isScaleDriven:r}=t.cache;if(!(r&&i==="3d"||e))return null;const n={scale:e,view:i};let s=Sl(t.minSize,Foe,n),a=Sl(t.maxSize,Foe,n);if(s!=null||a!=null){if(s>a){const o=a;a=s,s=o}return{minSize:s,maxSize:a}}}function uQe(t,e,i){if(!t.visualVariables)return;const r=[],n=[],s=[],a=[],o=[];for(const l of t.visualVariables)switch(l.type){case"color":n.push(l);break;case"opacity":s.push(l);break;case"rotation":o.push(l);break;case"size":a.push(l)}return n.forEach(l=>{const c=wxe(l,e,i);r.push({variable:l,value:c})}),s.forEach(l=>{const c=_xe(l,e,i);r.push({variable:l,value:c})}),o.forEach(l=>{const c=xxe(l,e,i);r.push({variable:l,value:c})}),a.forEach(l=>{const c=VN(l,e,i);r.push({variable:l,value:c})}),r}function $X(t,e){if(!e)return;let i=0,r=e.length-1;return e.some((n,s)=>t<n?(r=s,!0):(i=s,!1)),[i,r,(t-e[i])/(e[r]-e[i])]}function dQe(t,e,i){const r=["proportional","proportional","proportional"];for(const n of t){const s=n.useSymbolValue?"symbol-value":VN(n,e,i)??"proportional";switch(n.axis){case"width":r[0]=s;break;case"depth":r[1]=s;break;case"height":r[2]=s;break;case"width-and-depth":r[0]=s,r[1]=s;break;case"all":case void 0:case null:r[0]=s,r[1]=s,r[2]=s;break;default:n.axis}}return r}const $_=Object.freeze(Object.defineProperty({__proto__:null,getAllSizes:dQe,getColor:wxe,getOpacity:_xe,getRotationAngle:xxe,getSize:VN,getSizeForValue:$xe,getSizeFromNumberOrVariable:Sl,getSizeRangeAtScale:cQe,getVisualVariableValues:uQe,viewScaleRE:bxe},Symbol.toStringTag,{value:"Module"}));var RG;const BO=new Gt({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",all:"all"}),zG=new Gt({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers"});function Noe(t){if(t!=null)return typeof t=="string"||typeof t=="number"?QKe(t):t.type==="size"?kS(t)?t:(delete(t={...t}).type,new Ei(t)):void 0}function joe(t,e,i){if(typeof t!="object")return t;const r=new Ei;return r.read(t,i),r}let Ei=RG=class extends eo{constructor(t){super(t),this.axis=null,this.legendOptions=null,this.normalizationField=null,this.scaleBy=null,this.target=null,this.type="size",this.useSymbolValue=null,this.valueExpression=null,this.valueRepresentation=null,this.valueUnit=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null,isScaleDriven:this.valueExpression!=null&&bxe.test(this.valueExpression)}}set index(t){kS(this.maxSize)&&(this.maxSize.index=`visualVariables[${t}].maxSize`),kS(this.minSize)&&(this.minSize.index=`visualVariables[${t}].minSize`),this._set("index",t)}get inputValueType(){return yxe(this)}set maxDataValue(t){t&&this.stops&&($e.getLogger(this).warn("cannot set maxDataValue when stops is not null."),t=null),this._set("maxDataValue",t)}set maxSize(t){t&&this.stops&&($e.getLogger(this).warn("cannot set maxSize when stops is not null."),t=null),this._set("maxSize",t)}castMaxSize(t){return Noe(t)}readMaxSize(t,e,i){return joe(t,e,i)}set minDataValue(t){t&&this.stops&&($e.getLogger(this).warn("cannot set minDataValue when stops is not null."),t=null),this._set("minDataValue",t)}set minSize(t){t&&this.stops&&($e.getLogger(this).warn("cannot set minSize when stops is not null."),t=null),this._set("minSize",t)}castMinSize(t){return Noe(t)}readMinSize(t,e,i){return joe(t,e,i)}get arcadeRequired(){return!!this.valueExpression||this.minSize!=null&&typeof this.minSize=="object"&&this.minSize.arcadeRequired||this.maxSize!=null&&typeof this.maxSize=="object"&&this.maxSize.arcadeRequired}set stops(t){this.minDataValue==null&&this.maxDataValue==null&&this.minSize==null&&this.maxSize==null?t&&Array.isArray(t)&&(t=t.filter(e=>!!e)).sort((e,i)=>e.value-i.value):t&&($e.getLogger(this).warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),t=null),this._set("stops",t)}get transformationType(){return eQe(this,this.inputValueType)}readValueExpression(t,e){return t||e.expression&&"$view.scale"}writeValueExpressionWebScene(t,e,i,r){if(t==="$view.scale"){if(r?.messages){const n=this.index,s=typeof n=="string"?n:`visualVariables[${n}]`;r.messages.push(new ee("property:unsupported",this.type+"VisualVariable.valueExpression = '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:s+".valueExpression",context:r}))}}else e[i]=t}readValueUnit(t){return t?zG.read(t):null}clone(){return new RG({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:kS(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:kS(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:this.stops?.map(t=>t.clone()),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions?.clone()})}flipSizes(){if(this.transformationType==="clamped-linear"){const{minSize:t,maxSize:e}=this;return this.minSize=e,this.maxSize=t,this}if(this.transformationType==="stops"){const t=this.stops;if(!t)return this;const e=t.map(r=>r.size).reverse(),i=t.length;for(let r=0;r<i;r++)t[r].size=e[r];return this}return this}getAttributeHash(){return`${super.getAttributeHash()}-${this.target}-${this.normalizationField}`}_interpolateData(){return this.stops?.map(t=>t.value||0)}};d([m({readOnly:!0})],Ei.prototype,"cache",null),d([m({type:BO.apiValues,json:{type:BO.jsonValues,origins:{"web-map":{read:!1}},read:BO.read,write:BO.write}})],Ei.prototype,"axis",void 0),d([m()],Ei.prototype,"index",null),d([m({type:String,readOnly:!0})],Ei.prototype,"inputValueType",null),d([m({type:gxe,json:{write:!0}})],Ei.prototype,"legendOptions",void 0),d([m({type:Number,value:null,json:{write:!0}})],Ei.prototype,"maxDataValue",null),d([m({type:Number,value:null,json:{write:!0}})],Ei.prototype,"maxSize",null),d([Ii("maxSize")],Ei.prototype,"castMaxSize",null),d([Ve("maxSize")],Ei.prototype,"readMaxSize",null),d([m({type:Number,value:null,json:{write:!0}})],Ei.prototype,"minDataValue",null),d([m({type:Number,value:null,json:{write:!0}})],Ei.prototype,"minSize",null),d([Ii("minSize")],Ei.prototype,"castMinSize",null),d([Ve("minSize")],Ei.prototype,"readMinSize",null),d([m({type:String,json:{write:!0}})],Ei.prototype,"normalizationField",void 0),d([m({readOnly:!0})],Ei.prototype,"arcadeRequired",null),d([m({type:String})],Ei.prototype,"scaleBy",void 0),d([m({type:[_d],value:null,json:{write:!0}})],Ei.prototype,"stops",null),d([m({type:["outline"],json:{write:!0}})],Ei.prototype,"target",void 0),d([m({type:String,readOnly:!0})],Ei.prototype,"transformationType",null),d([m({type:["size"],json:{type:["sizeInfo"]}})],Ei.prototype,"type",void 0),d([m({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],Ei.prototype,"useSymbolValue",void 0),d([m({type:String,json:{write:!0}})],Ei.prototype,"valueExpression",void 0),d([Ve("valueExpression",["valueExpression","expression"])],Ei.prototype,"readValueExpression",null),d([qe("web-scene","valueExpression")],Ei.prototype,"writeValueExpressionWebScene",null),d([m({type:["radius","diameter","area","width","distance"],json:{write:!0}})],Ei.prototype,"valueRepresentation",void 0),d([m({type:zG.apiValues,json:{write:zG.write,origins:{"web-map":{read:!1},"web-scene":{write:!0},"portal-item":{write:!0}}}})],Ei.prototype,"valueUnit",void 0),d([Ve("valueUnit")],Ei.prototype,"readValueUnit",null),Ei=RG=d([U("esri.renderers.visualVariables.SizeVariable")],Ei);const hQe={color:zy,size:Ei,opacity:$m,rotation:Fy},pQe=new Gt({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),fQe=/^\[([^\]]+)\]$/i;let bD=class extends lt{constructor(){super(...arguments),this.colorVariables=null,this.opacityVariables=null,this.rotationVariables=null,this.sizeVariables=null}set visualVariables(e){if(this._resetVariables(),e=e?.filter(i=>!!i),e?.length){for(const i of e)switch(i.type){case"color":this.colorVariables.push(i);break;case"opacity":this.opacityVariables.push(i);break;case"rotation":this.rotationVariables.push(i);break;case"size":this.sizeVariables.push(i)}this.sizeVariables.length&&this.sizeVariables.some(i=>!!i.target)&&e.sort((i,r)=>{let n=null;return n=i.target===r.target?0:i.target?1:-1,n});for(let i=0;i<e.length;i++)e[i].index=i;this._set("visualVariables",e)}else this._set("visualVariables",e)}readVariables(e,i,r){const{rotationExpression:n,rotationType:s}=i,a=n?.match(fQe),o=a?.[1];if(o&&(e||(e=[]),e.push({type:"rotationInfo",rotationType:s,field:o})),e)return e.map(l=>{const c=pQe.read(l.type),h=hQe[c];h||($e.getLogger(this).warn(`Unknown variable type: ${c}`),r?.messages&&r.messages.push(new kc("visual-variable:unsupported",`visualVariable of type '${c}' is not supported`,{definition:l,context:r})));const f=new h;return f.read(l,r),f})}writeVariables(e,i){const r=[];for(const n of e){const s=n.toJSON(i);s&&r.push(s)}return r}_resetVariables(){this.colorVariables=[],this.opacityVariables=[],this.rotationVariables=[],this.sizeVariables=[]}};d([m()],bD.prototype,"visualVariables",null),bD=d([U("esri.renderers.visualVariables.VisualVariableFactory")],bD);const mQe={base:eo,key:"type",typeMap:{opacity:$m,color:zy,rotation:Fy,size:Ei}},YT=t=>{const e=t;let i=class extends e{constructor(){super(...arguments),this._vvFactory=new bD}set visualVariables(r){this._vvFactory.visualVariables=r,this._set("visualVariables",this._vvFactory.visualVariables)}readVisualVariables(r,n,s){return this._vvFactory.readVariables(r,n,s)}writeVisualVariables(r,n,s,a){n[s]=this._vvFactory.writeVariables(r,a)}get arcadeRequiredForVisualVariables(){return this.visualVariables?.some(({arcadeRequired:r})=>r)??!1}hasVisualVariables(r,n){return r?this.getVisualVariablesForType(r,n).length>0:this.getVisualVariablesForType("size",n).length>0||this.getVisualVariablesForType("color",n).length>0||this.getVisualVariablesForType("opacity",n).length>0||this.getVisualVariablesForType("rotation",n).length>0}getVisualVariablesForType(r,n){return this.visualVariables?.filter(s=>s.type===r&&(typeof n=="string"?s.target===n:n!==!1||!s.target))??[]}async collectVVRequiredFields(r,n){let s=[];this.visualVariables&&(s=s.concat(this.visualVariables));for(const a of s)a&&(a.field&&fo(r,n,a.field),a.normalizationField&&fo(r,n,a.normalizationField),a.valueExpression&&(gQe(a.valueExpression,r,n)||await La(r,n,null,a.valueExpression)))}};return d([m({types:[mQe],value:null,json:{write:!0}})],i.prototype,"visualVariables",null),d([Ve("visualVariables",["visualVariables","rotationType","rotationExpression"])],i.prototype,"readVisualVariables",null),d([qe("visualVariables")],i.prototype,"writeVisualVariables",null),i=d([U("esri.renderers.mixins.VisualVariablesMixin")],i),i};function gQe(t,e,i){const r=I8e(t);return r!=null&&(fo(e,i,r),!0)}const TX=[252,146,31,255],yQe=[153,153,153,255],vQe={type:"esriSMS",style:"esriSMSCircle",size:6,color:TX,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},bQe={type:"esriSLS",style:"esriSLSSolid",width:.75,color:TX},wQe={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},_Qe={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},xQe={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},SQe={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},$Qe={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null},wz=Gr.fromJSON(vQe),BN=en.fromJSON(bQe),Txe=Zi.fromJSON(wQe),TQe=Yi.fromJSON(_Qe);function E3t(t){if(t==null)return null;switch(t.type){case"mesh":return null;case"point":case"multipoint":return wz;case"polyline":return BN;case"polygon":case"extent":return Txe}return null}const C3t=Gr.fromJSON(xQe),I3t=en.fromJSON(SQe),M3t=Zi.fromJSON($Qe),kQe=Oo.fromSimpleMarkerSymbol(wz),EQe=Pd.fromSimpleLineSymbol(BN),CQe=bu.fromSimpleFillSymbol(Txe),IQe=new Pm({symbolLayers:new We([new Io({material:{color:TX},edges:new uwe({size:Xi(1),color:new Ye(yQe)})})])}),MQe=new Pd({symbolLayers:new We([new Co({material:{color:new Ye([0,0,0])},size:Xi(1)})])}),AQe=new bu({symbolLayers:new We([new Io({outline:{color:new Ye([0,0,0]),size:Xi(1)}})])});function A3t(t){if(t==null)return null;switch(t.type){case"mesh":return IQe;case"point":case"multipoint":return kQe;case"polyline":return EQe;case"polygon":case"extent":return CQe}return null}const Voe="#useCIMFallbackSymbology()",Tm={retainId:!1,ignoreDrivers:!1,hasLabelingContext:!0};function iT(t,e=Tm){if(!t)return{symbol:null};const{retainId:i=Tm.retainId,ignoreDrivers:r=Tm.ignoreDrivers,hasLabelingContext:n=Tm.hasLabelingContext,retainCIM:s=Tm.retainCIM,cimFallbackEnabled:a=Tm.cimFallbackEnabled}=e;let o=null;if(Bd(t))o=t.clone();else if(t.type==="web-style")o=t.clone();else if(t.type==="cim"){const l=t.data?.symbol?.type;switch(l){case"CIMPointSymbol":o=s?t.clone():Oo.fromCIMSymbol(t);break;case"CIMLineSymbol":a&&(o=MQe.clone(),e?.logWarning?.(Voe,"Unsupported CIM line symbology converted to fallback 3D line symbology"));break;case"CIMPolygonSymbol":a&&(o=AQe.clone(),e?.logWarning?.(Voe,"Unsupported CIM polygon symbology converted to fallback 3D polygon symbology"))}if(!o)return{error:new ee("symbol-conversion:unsupported-cim-symbol",`CIM symbol of type '${l||"unknown"}' is unsupported in 3D`,{symbol:t})}}else if(t instanceof en)o=Pd.fromSimpleLineSymbol(t);else if(t instanceof Gr)o=Oo.fromSimpleMarkerSymbol(t);else if(t instanceof Ka)o=Oo.fromPictureMarkerSymbol(t);else if(t instanceof Zi)o=e.geometryType&&e.geometryType==="mesh"?Pm.fromSimpleFillSymbol(t):bu.fromSimpleFillSymbol(t);else{if(!(t instanceof Yi))return{error:new ee("symbol-conversion:unsupported-2d-symbol",`2D symbol of type '${t.type||t.declaredClass}' is unsupported in 3D`,{symbol:t})};o=n?vd.fromTextSymbol(t):Oo.fromTextSymbol(t)}return i&&o&&o.type!=="cim"&&(o.id=t.id),!r||o.type==="cim"||o instanceof Sa||o.symbolLayers.forEach(l=>l.ignoreDrivers=!0),{symbol:o}}function _z(t,e,i,r){const n=kxe(t,{},{context:r,isLabelSymbol:!1});n!=null&&Bn(i,n,e)}function Boe(t,e,i,r){const n=kxe(t,{},{context:r,isLabelSymbol:!0});n!=null&&(e[i]=n)}function Uoe(t){return Bd(t)||t instanceof Sa}function PQe(t){return t?.type==="polygon-3d"||t?.type==="line-3d"}function kxe(t,e,i){if(t==null)return null;const{context:r,isLabelSymbol:n}=i,s=r?.origin,a=r?.messages;if(s==="web-scene"&&!Uoe(t)){const o=iT(t,{retainCIM:!0,hasLabelingContext:n});return o.symbol!=null?o.symbol.write(e,r):(a?.push(new ee("symbol:unsupported",`Symbols of type '${t.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:t,context:r,error:o.error})),null)}return F9(r?.layer)&&PQe(t)?(a?.push(new ee("symbol:unsupported",`Symbols of type '${t.declaredClass}' are not supported on layers of type '${r?.layer?.declaredClass}'.`,{symbol:t,context:r})),null):(s==="web-map"||s==="portal-item"&&!F9(r?.layer))&&Uoe(t)?(a?.push(new ee("symbol:unsupported",`Symbols of type '${t.declaredClass}' are not supported in web maps and portal items. Use 2D symbology and CIMSymbol instead when working with MapView`,{symbol:t,context:r})),null):t.write(e,r)}function Exe(t,e){return T7e(t,null,e)}const UN={types:Awe,json:{write:{writer:_z},origins:{"web-scene":{types:Ase,write:{writer:_z},read:{reader:ET({types:Ase})}}}}},kX=BW({json:{origins:{"web-scene":{write:{isRequired:!0}}}}},UN),EX={types:{base:Vn,key:"type",typeMap:{"simple-fill":tv.typeMap["simple-fill"],"picture-fill":tv.typeMap["picture-fill"],"polygon-3d":tv.typeMap["polygon-3d"],cim:tv.typeMap.cim}},json:{write:{writer:_z},origins:{"web-scene":{type:bu,write:{writer:_z}}}}},wD={cast:t=>t==null||typeof t=="string"||typeof t=="number"?t:`${t}`,json:{type:String,write:{writer:(t,e)=>{e.value=t?.toString()}}}};var FG;let Ca=FG=class extends YT(wc){constructor(t){super(t),this.description=null,this.label=null,this.symbol=null,this.type="simple"}async collectRequiredFields(t,e){await Promise.all([this.collectSymbolFields(t,e),this.collectVVRequiredFields(t,e)])}async collectSymbolFields(t,e){await Promise.all(this.symbols.map(i=>i.collectRequiredFields(t,e)))}getSymbol(t,e){return this.symbol}async getSymbolAsync(t,e){return this.symbol}get symbols(){return this.symbol?[this.symbol]:[]}getAttributeHash(){return this.visualVariables?.reduce((t,e)=>t+e.getAttributeHash(),"")??""}getMeshHash(){return this.symbols.reduce((t,e)=>t+JSON.stringify(e),"")}get arcadeRequired(){return this.arcadeRequiredForVisualVariables}clone(){return new FG({description:this.description,label:this.label,symbol:de(this.symbol),visualVariables:de(this.visualVariables),authoringInfo:de(this.authoringInfo)})}};d([m({type:String,json:{write:!0}})],Ca.prototype,"description",void 0),d([m({type:String,json:{write:!0}})],Ca.prototype,"label",void 0),d([m(kX)],Ca.prototype,"symbol",void 0),d([pt({simple:"simple"})],Ca.prototype,"type",void 0),Ca=FG=d([U("esri.renderers.SimpleRenderer")],Ca);const OQe=new Set(["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"]);function NG(t){return t instanceof lt}function Hoe(t){return t instanceof We?Object.keys(t.items):NG(t)?mo(t).keys():t?Object.keys(t):[]}function UO(t,e){return t instanceof We?t.items[e]:t[e]}function LQe(t,e){return!(!Array.isArray(t)||!Array.isArray(e))&&t.length!==e.length}function VC(t){return t?t.declaredClass:null}function Cxe(t,e){const i=t.diff;if(i&&typeof i=="function")return i(t,e);const r=Hoe(t),n=Hoe(e);if(r.length===0&&n.length===0)return;if(!r.length||!n.length||LQe(t,e))return{type:"complete",oldValue:t,newValue:e};const s=n.filter(f=>!r.includes(f)),a=r.filter(f=>!n.includes(f)),o=r.filter(f=>n.includes(f)&&UO(t,f)!==UO(e,f)).concat(s,a).sort(),l=VC(t);if(l&&OQe.has(l)&&o.length)return{type:"complete",oldValue:t,newValue:e};let c;const h=NG(t)&&NG(e);for(const f of o){const g=UO(t,f),y=UO(e,f);let b;if((h||typeof g!="function"&&typeof y!="function")&&g!==y&&(g!=null||y!=null)){if(i&&i[f]&&typeof i[f]=="function")b=i[f]?.(g,y);else if(g instanceof Date&&y instanceof Date){if(g.getTime()===y.getTime())continue;b={type:"complete",oldValue:g,newValue:y}}else b=typeof g=="object"&&typeof y=="object"&&VC(g)===VC(y)?Cxe(g,y):{type:"complete",oldValue:g,newValue:y};b!=null&&(c!=null?c.diff[f]=b:c={type:"partial",diff:{[f]:b}})}}return c}function P3t(t,e){if(t==null)return!1;const i=e.split(".");let r=t;for(const n of i){if(r.type==="complete")return!0;if(r.type!=="partial")return!1;{const s=r.diff[n];if(!s)return!1;r=s}}return!0}function DQe(t,e){if(typeof t!="function"&&typeof e!="function"&&(t!=null||e!=null))return t==null||e==null||typeof t=="object"&&typeof e=="object"&&VC(t)!==VC(e)?{type:"complete",oldValue:t,newValue:e}:Cxe(t,e)}function HO(t){if(t==null)return!0;switch(t.type){case"complete":return!1;case"collection":{const e=t;for(const i of e.added)if(!HO(i))return!1;for(const i of e.removed)if(!HO(i))return!1;for(const i of e.changed)if(!HO(i))return!1;return!0}case"partial":for(const e in t.diff)if(!HO(t.diff[e]))return!1;return!0}}var jG;const RQe=Gn()({ascendingValues:"ascending-values",descendingValues:"descending-values"});let DE=jG=class extends $t(_e){static from(t){return TT(jG,t)}constructor(t){super(t),this.title=null,this.order=null}};d([m({type:String,json:{write:!0}})],DE.prototype,"title",void 0),d([pt(RQe)],DE.prototype,"order",void 0),DE=jG=d([U("esri.renderers.support.RendererLegendOptions")],DE);const CX=DE;let Cd=class extends $t(_e){constructor(e){super(e),this.value=null,this.value2=null,this.value3=null}};d([m(wD)],Cd.prototype,"value",void 0),d([m(wD)],Cd.prototype,"value2",void 0),d([m(wD)],Cd.prototype,"value3",void 0),Cd=d([U("esri.renderers.support.UniqueValue")],Cd);let pm=class extends $t(_e){constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.values=null}castValues(e){if(e==null)return null;const i=typeof(e=Array.isArray(e)?e:[e])[0];return i==="string"||i==="number"?e.map(r=>new Cd({value:r})):i==="object"?e[0]instanceof Cd?e:e.map(r=>new Cd(r)):null}};d([m({type:String,json:{write:!0}})],pm.prototype,"description",void 0),d([m({type:String,json:{write:!0}})],pm.prototype,"label",void 0),d([m(UN)],pm.prototype,"symbol",void 0),d([m({type:[Cd],json:{type:[[String]],read:{reader:t=>t?t.map(e=>new Cd({value:e[0],value2:e[1],value3:e[2]})):null},write:{writer:(t,e)=>{const i=[];for(const r of t){const n=[r.value,r.value2,r.value3].filter(un).map(s=>s.toString());i.push(n)}e.values=i}}}})],pm.prototype,"values",void 0),d([Ii("values")],pm.prototype,"castValues",null),pm=d([U("esri.renderers.support.UniqueValueClass")],pm);let H0=class extends $t(_e){constructor(e){super(e),this.heading=null,this.classes=null}};d([m({type:String,json:{write:!0}})],H0.prototype,"heading",void 0),d([m({type:[pm],json:{write:{isRequired:!0}}})],H0.prototype,"classes",void 0),H0=d([U("esri.renderers.support.UniqueValueGroup")],H0);var VG;let kd=VG=class extends _e{constructor(t){super(t),this.description=null,this.label=null,this.symbol=null,this.value=null}clone(){return new VG({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){const t=JSON.stringify(this.symbol?.toJSON());return`${this.value}.${t}`}};d([m({type:String,json:{write:!0}})],kd.prototype,"description",void 0),d([m({type:String,json:{write:!0}})],kd.prototype,"label",void 0),d([m(kX)],kd.prototype,"symbol",void 0),d([m(wD)],kd.prototype,"value",void 0),kd=VG=d([U("esri.renderers.support.UniqueValueInfo")],kd);const Goe=new Map;async function zQe(t,e){try{return{data:(await IX(t,e)).data,baseUrl:lY(t),styleUrl:t}}catch(i){return fl(i),null}}function FQe(t,e,i){const r=e.portal!=null?e.portal:Ue.getDefault();let n;const s=`${r.url} - ${r.user?.username} - ${t}`,a=Goe.get(s);if(a)return a;const o=NQe(t,r,i).then(l=>(n=l,l.fetchData())).then(l=>({data:l,baseUrl:n.itemUrl??"",styleName:t}));return Goe.set(s,o),o}function NQe(t,e,i){return e.load(i).then(()=>{const r=new Rn({disableExtraQuery:!0,query:`owner:${qoe} AND type:${Woe} AND typekeywords:"${t}"`});return e.queryItems(r,i)}).then(({results:r})=>{let n=null;const s=t.toLowerCase();if(r&&Array.isArray(r)){for(const a of r)if(a.typeKeywords?.some(l=>l.toLowerCase()===s)&&a.type===Woe&&a.owner===qoe){n=a;break}}if(!n)throw new ee("symbolstyleutils:style-not-found",`The style '${t}' could not be found`,{styleName:t});return n.load(i)})}function Ixe(t,e,i){return t?.styleUrl!=null?zQe(t.styleUrl,i):t?.styleName!=null?FQe(t.styleName,e,i):Promise.reject(new ee("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function Mxe(t){return t===null||t.type==="CIMSymbolReference"?t:{type:"CIMSymbolReference",symbol:t}}function jQe(t,e){for(const i of e)switch(i){case"cim":if(t.cimRef)return{format:i,url:encodeURI(t.cimRef)};break;case"web-gltf-basisu":{const r=IB(t,"gltf_basisu");if(r)return{format:i,url:r};break}case"web-gltf":{const r=IB(t,"gltf");if(r)return{format:i,url:r};break}case"web":{const r=IB(t,"gltf");if(r)return{format:"web-gltf",url:r};if(t.webRef)return{format:i,url:encodeURI(t.webRef)};break}}}function IB(t,e){if(!ve("enable-feature:force-wosr"))return t.formatInfos?.find(i=>i.type===e)?.href}function IX(t,e){const i={responseType:"json",query:{f:"json"},...e};return Nt(_c(t),i)}const qoe="esri_en",Woe="Style",VQe="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json";var RE;const Yoe="uvInfos-watcher",Zoe="uvGroups-watcher",BQe=",",UQe=dn(kd);function HQe(t){const{field1:e,field2:i,field3:r,fieldDelimiter:n,uniqueValueInfos:s,valueExpression:a}=t,o=!(!e||!i);return[{classes:(s??[]).map(l=>{const{symbol:c,label:h,value:f,description:g}=l,[y,b,_]=o?f?.toString()?.split(n||"")||[]:[f],S=[];return(e||a)&&S.push(y),i&&S.push(b),r&&S.push(_),{symbol:c,label:h,values:[S],description:g}})}]}function L1(t){return t!=null&&t!==""&&(typeof t!="string"||t.trim()!==""&&t.toLowerCase()!=="<null>")||(t=null),t+""}let Ni=RE=class extends YT(wc){constructor(t){super(t),this._valueInfoMap={},this._isDefaultSymbolDerived=!1,this._isInfosSource=null,this.type="unique-value",this.backgroundFillSymbol=null,this.orderByClassesEnabled=!1,this.valueExpressionTitle=null,this.legendOptions=null,this.defaultLabel=null,this.portal=null,this.styleOrigin=null,this.diff={uniqueValueInfos(e,i){if(!e&&!i)return;if(!e||!i)return{type:"complete",oldValue:e,newValue:i};let r=!1;const n={type:"collection",added:[],removed:[],changed:[],unchanged:[]};for(let s=0;s<i.length;s++){const a=e.find(o=>o.value===i[s].value);a?DQe(a,i[s])?(n.changed.push({type:"complete",oldValue:a,newValue:i[s]}),r=!0):n.unchanged.push({oldValue:a,newValue:i[s]}):(n.added.push(i[s]),r=!0)}for(let s=0;s<e.length;s++)i.find(a=>a.value===e[s].value)||(n.removed.push(e[s]),r=!0);return r?n:void 0}},this._set("uniqueValueInfos",[]),this._set("uniqueValueGroups",[])}get _cache(){return{compiledFunc:null}}set field(t){this._set("field",t),this._updateFieldDelimiter(),this._updateUniqueValues()}castField(t){return t==null||typeof t=="function"?t:DM(t)}writeField(t,e,i,r){typeof t=="string"?e[i]=t:r?.messages?r.messages.push(new ee("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):$e.getLogger(this).error(".field: cannot write field to JSON since it's not a string value")}set field2(t){this._set("field2",t),this._updateFieldDelimiter(),this._updateUniqueValues()}set field3(t){this._set("field3",t),this._updateUniqueValues()}set valueExpression(t){this._set("valueExpression",t),this._updateUniqueValues()}set defaultSymbol(t){this._isDefaultSymbolDerived=!1,this._set("defaultSymbol",t)}set fieldDelimiter(t){this._set("fieldDelimiter",t),this._updateUniqueValues()}readPortal(t,e,i){return i.portal||Ue.getDefault()}readStyleOrigin(t,e,i){if(e.styleName)return Object.freeze({styleName:e.styleName});if(e.styleUrl){const r=Wm(e.styleUrl,i);return Object.freeze({styleUrl:r})}}writeStyleOrigin(t,e,i,r){t.styleName?e.styleName=t.styleName:t.styleUrl&&(e.styleUrl=Hw(t.styleUrl,r))}set uniqueValueGroups(t){this.styleOrigin?$e.getLogger(this).error("#uniqueValueGroups=","Cannot modify unique value groups of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueGroups",t),this._updateInfosFromGroups(),this._isInfosSource=!1,this._watchUniqueValueGroups())}set uniqueValueInfos(t){this.styleOrigin?$e.getLogger(this).error("#uniqueValueInfos=","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",t),this._updateValueInfoMap(),this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos())}addUniqueValueInfo(t,e){if(this.styleOrigin)return void $e.getLogger(this).error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");let i;i=typeof t=="object"?UQe(t):new kd({value:t,symbol:Pwe(e)}),this.uniqueValueInfos?.push(i),this._valueInfoMap[L1(i.value)]=i,this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}removeUniqueValueInfo(t){if(this.styleOrigin)return void $e.getLogger(this).error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");const e=this.uniqueValueInfos;if(e)for(let i=0;i<e.length;i++){const r=e[i];if(String(r.value)===String(t)){delete this._valueInfoMap[L1(t)],e.splice(i,1);break}}this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}async getUniqueValueInfo(t,e){let i=e;return this.valueExpression&&e?.arcade==null&&(i={...i,arcade:await Xm()}),this._getUniqueValueInfo(t,i)}getSymbol(t,e){return this.valueExpression&&e?.arcade==null?void $e.getLogger(this).error("#getSymbol()","Please use getSymbolAsync if valueExpression is used"):this._getUniqueValueInfo(t,e)?.symbol||this.defaultSymbol}async getSymbolAsync(t,e){let i=e;if(this.valueExpression&&i?.arcade==null){const n=await Xm(),{arcadeUtils:s}=n;s.hasGeometryOperations(this.valueExpression)&&await s.enableGeometryOperations(),i={...i,arcade:n}}return this._getUniqueValueInfo(t,i)?.symbol||this.defaultSymbol}get symbols(){const t=[];if(this._isInfosSource)for(const e of this.uniqueValueInfos??[])e.symbol&&t.push(e.symbol);else for(const e of this.uniqueValueGroups??[])for(const i of e.classes??[])i.symbol&&t.push(i.symbol);return this.defaultSymbol&&t.push(this.defaultSymbol),t}getAttributeHash(){return this.visualVariables?.reduce((t,e)=>t+e.getAttributeHash(),"")??""}getMeshHash(){const t=JSON.stringify(this.backgroundFillSymbol),e=JSON.stringify(this.defaultSymbol),i=this.uniqueValueInfos?.reduce((r,n)=>r+n.getMeshHash(),"");return`${t}.${e}.${i}.${`${this.field}.${this.field2}.${this.field3}.${this.fieldDelimiter}`}.${this.valueExpression}`}clone(){const t=new RE({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:de(this.defaultSymbol),orderByClassesEnabled:this.orderByClassesEnabled,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:de(this.visualVariables),legendOptions:de(this.legendOptions),authoringInfo:de(this.authoringInfo),backgroundFillSymbol:de(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(t._isDefaultSymbolDerived=!0),t._set("portal",this.portal);const e=de(this.uniqueValueInfos),i=de(this.uniqueValueGroups);return this.styleOrigin&&(t._set("styleOrigin",Object.freeze(de(this.styleOrigin))),Object.freeze(e),Object.freeze(i)),t._set("uniqueValueInfos",e),t._updateValueInfoMap(),t._set("uniqueValueGroups",i),t._isInfosSource=this._isInfosSource,t._watchUniqueValueInfosAndGroups(),t}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}async collectRequiredFields(t,e){const i=[this.collectVVRequiredFields(t,e),this.collectSymbolFields(t,e)];await Promise.all(i)}async collectSymbolFields(t,e){const i=[...this.symbols.map(r=>r.collectRequiredFields(t,e)),La(t,e,null,this.valueExpression)];fo(t,e,this.field),fo(t,e,this.field2),fo(t,e,this.field3),await Promise.all(i)}populateFromStyle(){return Ixe(this.styleOrigin,{portal:this.portal}).then(t=>{const e=[];return this._valueInfoMap={},t?.data&&Array.isArray(t.data.items)&&t.data.items.forEach(i=>{const r=new Sa({styleUrl:t.styleUrl,styleName:t.styleName,portal:this.portal,name:i.name});this.defaultSymbol||i.name!==t.data.defaultItem||(this.defaultSymbol=r,this._isDefaultSymbolDerived=!0);const n=new kd({value:i.name,symbol:r});e.push(n),this._valueInfoMap[L1(i.name)]=n}),this._set("uniqueValueInfos",Object.freeze(e)),this._updateGroupsFromInfos(!0),this._isInfosSource=null,this._watchUniqueValueInfos(),!this.defaultSymbol&&this.uniqueValueInfos?.length&&(this.defaultSymbol=this.uniqueValueInfos[0].symbol,this._isDefaultSymbolDerived=!0),this})}_updateFieldDelimiter(){this.field&&this.field2&&!this.fieldDelimiter&&this._set("fieldDelimiter",BQe)}_updateUniqueValues(){this._isInfosSource!=null&&(this._isInfosSource?this._updateGroupsFromInfos():this._updateInfosFromGroups())}_updateValueInfoMap(){this._valueInfoMap={};const{uniqueValueInfos:t}=this;if(t)for(const e of t)this._valueInfoMap[L1(e.value)]=e}_watchUniqueValueInfosAndGroups(){this._watchUniqueValueInfos(),this._watchUniqueValueGroups()}_watchUniqueValueInfos(){this.removeHandles(Yoe);const{uniqueValueInfos:t}=this;if(t){const e=[];for(const i of t)e.push(ze(()=>({symbol:i.symbol,value:i.value,label:i.label,description:i.description}),(r,n)=>{r!==n&&(this._updateGroupsFromInfos(),this._isInfosSource=!0)},{sync:!0}));this.addHandles(e,Yoe)}}_watchUniqueValueGroups(){this.removeHandles(Zoe);const{uniqueValueGroups:t}=this;if(t){const e=[];for(const i of t){e.push(ze(()=>({classes:i.classes}),(r,n)=>{r!==n&&(this._updateInfosFromGroups(),this._isInfosSource=!1)},{sync:!0}));for(const r of i.classes??[])e.push(ze(()=>({symbol:r.symbol,values:r.values,label:r.label,description:r.description}),(n,s)=>{n!==s&&(this._updateInfosFromGroups(),this._isInfosSource=!1)},{sync:!0}))}this.addHandles(e,Zoe)}}_updateInfosFromGroups(){if(!this.uniqueValueGroups)return this._set("uniqueValueInfos",null),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const t=[],{field:e,field2:i,field3:r,fieldDelimiter:n,uniqueValueGroups:s,valueExpression:a}=this;if(!e&&!a)return this._set("uniqueValueInfos",t),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const o=!(!e||!i);for(const l of s)for(const c of l.classes??[]){const{symbol:h,label:f,values:g,description:y}=c;for(const b of g??[]){const{value:_,value2:S,value3:$}=b,C=[_];i&&C.push(S),r&&C.push($);const I=o?C.join(n||""):C[0]??void 0;t.push(new kd({symbol:h,label:f,value:I,description:y}))}}this._set("uniqueValueInfos",t),this._updateValueInfoMap(),this._watchUniqueValueInfos()}_updateGroupsFromInfos(t=!1){if(!this.uniqueValueInfos)return this._set("uniqueValueGroups",null),void this._watchUniqueValueGroups();const{field:e,field2:i,valueExpression:r,fieldDelimiter:n,uniqueValueInfos:s}=this;if(!e&&!r||!s.length)return this._set("uniqueValueGroups",[]),void this._watchUniqueValueGroups();const a=!(!e||!i),o=s.map(c=>{const{symbol:h,label:f,value:g,description:y}=c,[b,_,S]=a?g?.toString()?.split(n||"")||[]:[g];return new pm({symbol:h,label:f,description:y,values:[new Cd({value:b,value2:_,value3:S})]})}),l=[new H0({classes:o})];t&&Object.freeze(l),this._set("uniqueValueGroups",l),this._watchUniqueValueGroups()}_getUniqueValueInfo(t,e){return this.valueExpression?this._getUnqiueValueInfoForExpression(t,e):this._getUnqiueValueInfoForFields(t)}_getUnqiueValueInfoForExpression(t,e){const{viewingMode:i,scale:r,spatialReference:n,arcade:s,timeZone:a}=e??{};let o=this._cache.compiledFunc;const l=s.arcadeUtils;if(!o){const h=l.createSyntaxTree(this.valueExpression);o=l.createFunction(h),this._cache.compiledFunc=o}const c=l.executeFunction(o,l.createExecContext(t,l.getViewInfo({viewingMode:i,scale:r,spatialReference:n}),a));return this._valueInfoMap[L1(c)]}_getUnqiueValueInfoForFields(t){const e=this.field,i=t.attributes;let r;if(this.field2){const n=this.field2,s=this.field3,a=[];e&&a.push(i[e]),n&&a.push(i[n]),s&&a.push(i[s]),r=a.join(this.fieldDelimiter||"")}else e&&(r=i[e]);return this._valueInfoMap[L1(r)]}static fromPortalStyle(t,e){const i=new RE(e?.properties);i._set("styleOrigin",Object.freeze({styleName:t})),i._set("portal",e?.portal||Ue.getDefault());const r=i.populateFromStyle();return r.catch(n=>{$e.getLogger(this.prototype).error(`#fromPortalStyle('${t}'[, ...])`,"Failed to create unique value renderer from style name",n)}),r}static fromStyleUrl(t,e){const i=new RE(e?.properties);i._set("styleOrigin",Object.freeze({styleUrl:t}));const r=i.populateFromStyle();return r.catch(n=>{$e.getLogger(this.prototype).error(`#fromStyleUrl('${t}'[, ...])`,"Failed to create unique value renderer from style URL",n)}),r}};d([m({readOnly:!0})],Ni.prototype,"_cache",null),d([pt({uniqueValue:"unique-value"})],Ni.prototype,"type",void 0),d([m(EX)],Ni.prototype,"backgroundFillSymbol",void 0),d([m({value:null,json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],Ni.prototype,"field",null),d([Ii("field")],Ni.prototype,"castField",null),d([qe("field")],Ni.prototype,"writeField",null),d([m({type:String,value:null,json:{write:!0}})],Ni.prototype,"field2",null),d([m({type:String,value:null,json:{write:!0}})],Ni.prototype,"field3",null),d([m({type:Boolean,json:{name:"drawInClassOrder",default:!1,write:!0,origins:{"web-scene":{write:!1}}}})],Ni.prototype,"orderByClassesEnabled",void 0),d([m({type:String,value:null,json:{write:!0}})],Ni.prototype,"valueExpression",null),d([m({type:String,json:{write:!0}})],Ni.prototype,"valueExpressionTitle",void 0),d([m({type:CX,json:{write:!0}})],Ni.prototype,"legendOptions",void 0),d([m({type:String,json:{write:!0}})],Ni.prototype,"defaultLabel",void 0),d([m(BW({...UN},{json:{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}},origins:{"web-scene":{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}}}}}}))],Ni.prototype,"defaultSymbol",null),d([m({type:String,value:null,json:{write:!0}})],Ni.prototype,"fieldDelimiter",null),d([m({type:Ue,readOnly:!0})],Ni.prototype,"portal",void 0),d([Ve("portal",["styleName"])],Ni.prototype,"readPortal",null),d([m({readOnly:!0,json:{write:{enabled:!1,overridePolicy:()=>({enabled:!0})}}})],Ni.prototype,"styleOrigin",void 0),d([Ve("styleOrigin",["styleName","styleUrl"])],Ni.prototype,"readStyleOrigin",null),d([qe("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],Ni.prototype,"writeStyleOrigin",null),d([m({type:[H0],json:{read:{source:["uniqueValueGroups","uniqueValueInfos"],reader:(t,e,i)=>(e.uniqueValueGroups||HQe(e)).map(r=>H0.fromJSON(r,i))},write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],Ni.prototype,"uniqueValueGroups",null),d([m({type:[kd],json:{read:!1,write:{isRequired:!0,overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0,isRequired:!0}}}}})],Ni.prototype,"uniqueValueInfos",null),Ni=RE=d([U("esri.renderers.UniqueValueRenderer")],Ni);var BG,C$;let Ts=(C$=class extends _e{constructor(e){super(e),this.attachmentTypes=null,this.attachmentsWhere=null,this.cacheHint=void 0,this.keywords=null,this.globalIds=null,this.name=null,this.num=null,this.objectIds=null,this.orderByFields=null,this.returnMetadata=!1,this.size=null,this.start=null,this.where=null}writeStart(e,i){i.resultOffset=this.start,i.resultRecordCount=this.num||10}clone(){return new BG(de({attachmentTypes:this.attachmentTypes,attachmentsWhere:this.attachmentsWhere,cacheHint:this.cacheHint,keywords:this.keywords,where:this.where,globalIds:this.globalIds,name:this.name,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,returnMetadata:this.returnMetadata,size:this.size,start:this.start}))}},BG=C$,C$);d([m({type:[String],json:{write:!0}})],Ts.prototype,"attachmentTypes",void 0),d([m({type:String,json:{read:{source:"attachmentsDefinitionExpression"},write:{target:"attachmentsDefinitionExpression"}}})],Ts.prototype,"attachmentsWhere",void 0),d([m({type:Boolean,json:{write:!0}})],Ts.prototype,"cacheHint",void 0),d([m({type:[String],json:{write:!0}})],Ts.prototype,"keywords",void 0),d([m({type:[String],json:{write:!0}})],Ts.prototype,"globalIds",void 0),d([m({json:{write:!0}})],Ts.prototype,"name",void 0),d([m({type:Number,json:{read:{source:"resultRecordCount"}}})],Ts.prototype,"num",void 0),d([m({type:[Number],json:{write:!0}})],Ts.prototype,"objectIds",void 0),d([m({type:[String],json:{write:!0}})],Ts.prototype,"orderByFields",void 0),d([m({type:Boolean,json:{default:!1,write:!0}})],Ts.prototype,"returnMetadata",void 0),d([m({type:[Number],json:{write:!0}})],Ts.prototype,"size",void 0),d([m({type:Number,json:{read:{source:"resultOffset"}}})],Ts.prototype,"start",void 0),d([qe("start"),qe("num")],Ts.prototype,"writeStart",null),d([m({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],Ts.prototype,"where",void 0),Ts=BG=d([U("esri.rest.support.AttachmentQuery")],Ts),Ts.from=dn(Ts);const Axe=Gn()({naturalLog:"natural-log",squareRoot:"square-root",percentOfTotal:"percent-of-total",log:"log",field:"field"}),Xoe="percent-of-total",Joe="field",R3t=t=>{const e=t;let i=class extends e{constructor(){super(...arguments),this.normalizationField=null,this.normalizationMaxValue=null,this.normalizationMinValue=null,this.normalizationTotal=null}get normalizationType(){let r=this._get("normalizationType");const n=!!this.normalizationField,s=this.normalizationTotal!=null;return n||s?(r=n&&Joe||s&&Xoe||null,n&&s&&$e.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):r!==Joe&&r!==Xoe||(r=null),r}set normalizationType(r){this._set("normalizationType",r)}};return d([m({type:String,json:{name:"parameters.normalizationField",write:!0}})],i.prototype,"normalizationField",void 0),d([m({type:Number,json:{name:"parameters.normalizationMaxValue",write:!0}})],i.prototype,"normalizationMaxValue",void 0),d([m({type:Number,json:{name:"parameters.normalizationMinValue",write:!0}})],i.prototype,"normalizationMinValue",void 0),d([m({type:Number,json:{name:"parameters.normalizationTotal",write:!0}})],i.prototype,"normalizationTotal",void 0),d([pt(Axe,{name:"parameters.normalizationType"})],i.prototype,"normalizationType",null),i=d([U("esri.rest.support.NormalizationBinParametersMixin")],i),i};var UG,I$;let Vr=(I$=class extends _e{constructor(e){super(e),this.cacheHint=void 0,this.dynamicDataSource=void 0,this.gdbVersion=null,this.geometryPrecision=void 0,this.historicMoment=null,this.maxAllowableOffset=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.relationshipId=void 0,this.start=void 0,this.num=void 0,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.where=null}_writeHistoricMoment(e,i){i.historicMoment=e&&e.getTime()}writeStart(e,i){i.resultOffset=this.start,i.resultRecordCount=this.num||10,this.start>0&&this.where==null&&(i.definitionExpression="1=1")}clone(){return new UG(de({cacheHint:this.cacheHint,dynamicDataSource:this.dynamicDataSource,gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&new Date(this.historicMoment),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,start:this.start,num:this.num,returnGeometry:this.returnGeometry,where:this.where,returnZ:this.returnZ,returnM:this.returnM}))}},UG=I$,I$);d([m({type:Boolean,json:{write:!0}})],Vr.prototype,"cacheHint",void 0),d([m({type:bd,json:{write:!0}})],Vr.prototype,"dynamicDataSource",void 0),d([m({type:String,json:{write:!0}})],Vr.prototype,"gdbVersion",void 0),d([m({type:Number,json:{write:!0}})],Vr.prototype,"geometryPrecision",void 0),d([m({type:Date})],Vr.prototype,"historicMoment",void 0),d([qe("historicMoment")],Vr.prototype,"_writeHistoricMoment",null),d([m({type:Number,json:{write:!0}})],Vr.prototype,"maxAllowableOffset",void 0),d([m({json:{write:!0}})],Vr.prototype,"objectIds",void 0),d([m({type:[String],json:{write:!0}})],Vr.prototype,"orderByFields",void 0),d([m({type:[String],json:{write:!0}})],Vr.prototype,"outFields",void 0),d([m({type:at,json:{read:{source:"outSR"},write:{target:"outSR"}}})],Vr.prototype,"outSpatialReference",void 0),d([m({json:{write:!0}})],Vr.prototype,"relationshipId",void 0),d([m({type:Number,json:{read:{source:"resultOffset"}}})],Vr.prototype,"start",void 0),d([qe("start"),qe("num")],Vr.prototype,"writeStart",null),d([m({type:Number,json:{read:{source:"resultRecordCount"}}})],Vr.prototype,"num",void 0),d([m({json:{write:!0}})],Vr.prototype,"returnGeometry",void 0),d([m({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Vr.prototype,"returnM",void 0),d([m({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Vr.prototype,"returnZ",void 0),d([m({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],Vr.prototype,"where",void 0),Vr=UG=d([U("esri.rest.support.RelationshipQuery")],Vr),Vr.from=dn(Vr);const z3t=Object.freeze(Object.defineProperty({__proto__:null,get default(){return Vr}},Symbol.toStringTag,{value:"Module"})),HG=new Gt({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"});async function GQe(t,e,i,r){const n=await Hv(t);if(await MX(t,e,r),!n.addAttachment)throw new ee(r,"Layer source does not support addAttachment capability");return n.addAttachment(e,i)}function MX(t,e,i){const{attributes:r}=e,{objectIdField:n}=t;return t.capabilities?.data?.supportsAttachment?e?r?n&&r[n]?Promise.resolve():Promise.reject(new ee(i,`feature is missing the identifying attribute ${n}`)):Promise.reject(new ee(i,"'attributes' are required on a feature to query attachments")):Promise.reject(new ee(i,"A feature is required to add/delete/update attachments")):Promise.reject(new ee(i,"this layer doesn't support attachments"))}async function qQe(t,e,i,r,n){const s=await Hv(t);if(await MX(t,e,n),!s.updateAttachment)throw new ee(n,"Layer source does not support updateAttachment capability");return s.updateAttachment(e,i,r)}async function WQe(t,e,i){const{applyEdits:r}=await fe(()=>import("./editingSupport-DSRTaXuR.js"),[]),n=await t.load();let s=i;return n.type==="feature"&&n.infoFor3D&&e.deleteFeatures!=null&&n.globalIdField!=null&&(s={...s,globalIdToObjectId:await get(n,e.deleteFeatures,n.globalIdField)}),r(n,n.source,e,i)}async function YQe(t,e,i){const{uploadAssets:r}=await fe(()=>import("./editingSupport-DSRTaXuR.js"),[]),n=await t.load();return r(n,n.source,e,i)}async function ZQe(t,e,i,r){const n=await Hv(t);if(await MX(t,e,r),!n.deleteAttachments)throw new ee(r,"Layer source does not support deleteAttachments capability");return n.deleteAttachments(e,i)}async function XQe(t,e,i){const r=(await t.load({signal:e?.signal})).source;if(!r.fetchRecomputedExtents)throw new ee(i,"Layer source does not support fetchUpdates capability");return r.fetchRecomputedExtents(e)}async function JQe(t,e,i,r){e=Ts.from(e),await t.load();const n=t.source,s=t.capabilities;if(!s?.data?.supportsAttachment)throw new ee(r,"this layer doesn't support attachments");const{attachmentTypes:a,objectIds:o,globalIds:l,num:c,size:h,start:f,where:g}=e;if(!s?.operations?.supportsQueryAttachments&&(a?.length>0||l?.length>0||h?.length>0||c||f||g))throw new ee(r,"when 'capabilities.operations.supportsQueryAttachments' is false, only objectIds is supported",e);if(!(o?.length||l?.length||g))throw new ee(r,"'objectIds', 'globalIds', or 'where' are required to perform attachment query",e);if(!n.queryAttachments)throw new ee(r,"Layer source does not support queryAttachments capability",e);return!s?.attachment?.supportsOrderByFields&&e.orderByFields?.length&&((e=e.clone()).orderByFields=null),n.queryAttachments(e)}async function KQe(t,e,i,r){const n=await Hv(t);if(!n.queryObjectIds)throw new ee(r,"Layer source does not support queryObjectIds capability");return n.queryObjectIds(_t.from(e)??t.createQuery(),i)}async function QQe(t,e,i,r){const n=await Hv(t);if(!n.queryFeatureCount)throw new ee(r,"Layer source does not support queryFeatureCount capability");return n.queryFeatureCount(_t.from(e)??t.createQuery(),i)}async function eet(t,e,i,r){const n=await Hv(t);if(!n.queryExtent)throw new ee(r,"Layer source does not support queryExtent capability");return n.queryExtent(_t.from(e)??t.createQuery(),i)}async function tet(t,e,i,r){const n=await Hv(t);if(!n.queryRelatedFeatures)throw new ee(r,"Layer source does not support queryRelatedFeatures capability");return n.queryRelatedFeatures(Vr.from(e),i)}async function iet(t,e,i,r){const n=await Hv(t);if(!n.queryRelatedFeaturesCount)throw new ee(r,"Layer source does not support queryRelatedFeaturesCount capability");return n.queryRelatedFeaturesCount(Vr.from(e),i)}async function ret(t){const e=t.source;if(e?.refresh)try{const{dataChanged:i,updates:r}=await e.refresh();if(r!=null&&(t.sourceJSON={...t.sourceJSON,...r},t.read(r,{origin:"service",url:t.parsedUrl})),i)return!0}catch{}if(t.definitionExpression)try{return(await RZ(t.definitionExpression,t.fieldsIndex)).hasDateFunctions}catch{}return!1}function net(t){const e=new _t;e.historicMoment=t.historicMoment,e.gdbVersion=t.gdbVersion,e.returnGeometry=!0,e.outFields=["*"],e.multipatchOption=t.geometryType==="multipatch"?"xyFootprint":null;const i=t.capabilities?.query;i&&(e.compactGeometryEnabled=i.supportsCompactGeometry,e.defaultSpatialReferenceEnabled=i.supportsDefaultSpatialReference);const r=t.capabilities?.data;r?.supportsZ&&t.returnZ!=null&&(e.returnZ=t.returnZ),r?.supportsM&&t.returnM!=null&&(e.returnM=t.returnM);const{timeOffset:n,timeExtent:s}=t;return e.timeExtent=n!=null&&s!=null?s.offset(-n.value,n.unit):s||null,e}function Pxe(t){const{globalIdField:e,fields:i}=t;if(e)return e;if(i){for(const r of i)if(r.type==="esriFieldTypeGlobalID")return r.name}}function Oxe(t){const{objectIdField:e,fields:i}=t;if(e)return e;if(i){for(const r of i)if(r.type==="esriFieldTypeOID")return r.name}}function set(t){return t.currentVersion?t.currentVersion:t.hasOwnProperty("capabilities")||t.hasOwnProperty("drawingInfo")||t.hasOwnProperty("hasAttachments")||t.hasOwnProperty("htmlPopupType")||t.hasOwnProperty("relationships")||t.hasOwnProperty("timeInfo")||t.hasOwnProperty("typeIdField")||t.hasOwnProperty("types")?10:9.3}function aet(t,e,i,r){const n=i?.feature,s=!!t.subtypes?.length;if(s&&!i?.excludeImpliedDomains){const l=cet(t,e);if(l)return l}const a=s&&oet(t,n);if(a){const l=a?.domains?.[e];return l?.type==="inherited"?r:l}const o=Rxe(t.types,t.typeIdField,n);if(o){const l=o.domains&&o.domains[e];if(l&&l?.type!=="inherited")return l}if(r)return r;if(!i?.excludeImpliedDomains){const l=uet(t,e);if(l)return l}return null}function oet(t,e){const{subtypes:i,subtypeField:r}=t;if(!e?.attributes||!i?.length||!r)return null;const n=e.attributes[r];return n==null?null:i.find(s=>s.code===n)}function cet(t,e){const{fieldsIndex:i,subtypeField:r}=t,{name:n,type:s}=i.get(e)??{};if(!n)return null;if((r&&i.get(r)?.name)===n&&t.subtypes?.length){const a=t.subtypes.map(o=>new B0({code:Lxe(o.code,s),name:o.name}));if(a?.length)return new rv({codedValues:a})}return null}function uet(t,e){const{fieldsIndex:i}=t,{name:r,type:n}=i.get(e)??{};if(!r)return null;if(("typeIdField"in t?i.get(t.typeIdField)?.name:null)===r&&"types"in t&&t.types?.length){const s=t.types.map(a=>new B0({code:Lxe(a.id,n),name:a.name}));return new rv({codedValues:s})}return null}function Lxe(t,e){return e?O0e({type:e})&&typeof t=="number"?`${t}`:r9e({type:e})&&typeof t=="string"?Number.parseInt(t,10):t:t}async function Hv(t){return(await t.load()).source}async function F3t(t,e){if(!oi)return;const i=oi.findCredential(t);if(i)return i.userId;let r;try{const n=await AZ(t,e);n&&(r=await oi.checkSignInStatus(`${n}/sharing`))}catch{}return r?r.userId:null}async function Dxe(t,e){if(!oi||oi.findCredential(t))return;let i;try{const r=await AZ(t,e);r&&(i=await oi.checkSignInStatus(`${r}/sharing`))}catch{}if(i)try{const r=e!=null?e.signal:null;await oi.getCredential(t,{signal:r})}catch{}}async function det(t,e,i){const r=t.parsedUrl?.path;r&&t.authenticationTriggerEvent===e&&await Dxe(r,i)}async function N3t(t){const e=t.parsedUrl?.path;e&&het(t)&&await Dxe(e)}function het(t){return pet(t)&&("serviceDefinitionExpression"in t&&xz(t.serviceDefinitionExpression)||"definitionExpression"in t&&xz(t.definitionExpression))}function pet(t){return!(!Pbe(t)||!t.capabilities?.query.supportsCurrentUser)}function xz(t){return!!t?.toLowerCase().includes("current_user")}function fet(t){return!_D(t)&&(t.userHasUpdateItemPrivileges||t.editingEnabled)}const MB=ET({types:Awe});function AX(t,e){if(t.defaultSymbol)return t.types?.length?new Ni({defaultSymbol:MB(t.defaultSymbol,t,e),field:t.typeIdField,uniqueValueInfos:t.types.map(i=>({id:i.id,symbol:MB(i.symbol,i,e)}))}):new Ca({symbol:MB(t.defaultSymbol,t,e)})}function met(t){let e=t.sourceJSON?.cacheMaxAge;if(!e)return!1;const i=t.editingInfo?.lastEditDate?.getTime();return i==null||(e*=1e3,Date.now()-i<e)}async function get(t,e,i){if(e==null)return null;const r=[],{objectIdField:n}=t;if(e.forEach(c=>{let h=null;if("attributes"in c){const{attributes:f}=c;h={globalId:f[i],objectId:f[n]!=null&&f[n]!==-1?f[n]:null}}else h={globalId:c.globalId,objectId:c.objectId!=null&&c.objectId!==-1?c.objectId:null};h.globalId!=null&&(h.objectId!=null&&h.objectId!==-1||r.push(h.globalId))}),r.length===0)return null;const s=t.createQuery();s.where=r.map(c=>`${i}='${c}'`).join(" OR "),s.returnGeometry=!1,s.outFields=[n,i],s.cacheHint=!1;const a=await O6e(pxe(t,s));if(!a.ok)return null;const o=new Map,l=a.value.features;for(const c of l){const h=c.attributes[i],f=c.attributes[n];h!=null&&f!=null&&f!==-1&&o.set(tDe(h),f)}return o}function Rxe(t,e,i){if(!e||!i||!t)return null;const r=i.getAttribute(e);return r==null?null:t.find(n=>{const{id:s}=n;return s!=null&&s.toString()===r.toString()})??null}function _D(t){return t.sourceJSON?.isMultiServicesView||yet(t)}function yet(t){return!!t.sourceJSON?.capabilities?.toLowerCase().split(",").map(e=>e.trim()).includes("map")}function vet(t,e,i){const r=e?.queryAttributeBins;if(!e?.operations?.supportsQueryBins||!r)throw new ee(i,"Layer source does not support binning");switch(t.binParameters.type){case"auto-interval":if(!r.supportsAutoInterval)throw new ee(i,"Layer source does not support auto-interval binning");if(t.binParameters.normalizationType&&(!r.supportsNormalization||!Koe(t.binParameters.normalizationType,r.supportedNormalizationTypes)))throw new ee(i,"Layer source does not support normalization binning");break;case"date":if(!r.supportsDate)throw new ee(i,"Layer source does not support date binning");if(t.binParameters.snapToData&&!r.supportsSnapToData)throw new ee(i,"Layer source does not support snapToData binning");if(t.binParameters.returnFullIntervalBin&&!r.supportsReturnFullIntervalBin)throw new ee(i,"Layer source does not support returnFullIntervalBin binning");break;case"fixed-boundaries":if(!r.supportsFixedBoundaries)throw new ee(i,"Layer source does not support fixed-boundaries binning");break;case"fixed-interval":if(!r.supportsFixedInterval)throw new ee(i,"Layer source does not support fixed-interval binning");if(t.binParameters.normalizationType&&(!r.supportsNormalization||!Koe(t.binParameters.normalizationType,r.supportedNormalizationTypes)))throw new ee(i,"Layer source does not support normalization binning")}if(t.binParameters.stackBy&&!r.supportsStackBy)throw new ee(i,"Layer source does not support stackBy binning");if(t.binParameters.splitBy&&!r.supportsSplitBy)throw new ee(i,"Layer source does not support splitBy binning");if(t.binParameters.firstDayOfWeek&&!r.supportsFirstDayOfWeek)throw new ee(i,"Layer source does not support firstDayOfWeek binning");const n=r?.supportedStatistics;if(t.outStatistics&&n){const s=new Map([["count","count"],["sum","sum"],["min","min"],["max","max"],["avg","avg"],["stddev","stddev"],["var","var"],["percentile-continuous","percentileContinuous"],["percentile-discrete","percentileDiscrete"],["centroid-aggregate","centroid"],["convex-hull-aggregate","convexHull"],["envelope-aggregate","envelope"]]);for(const{statisticType:a}of t.outStatistics){const o=s.get(a);if(o&&!n[o])throw new ee(i,`Layer source does not support ${a} statistic type`)}}}function Koe(t,e){return t!=null&&!!e?.[Axe.toJSON(t)]}let Zx=class extends $t(_e){constructor(e){super(e),this.shapeAreaField=null,this.shapeLengthField=null,this.units=null}};d([m({type:String,json:{read:{source:"shapeAreaFieldName"}}})],Zx.prototype,"shapeAreaField",void 0),d([m({type:String,json:{read:{source:"shapeLengthFieldName"}}})],Zx.prototype,"shapeLengthField",void 0),d([m({type:String,json:{read:t=>Y5e.read(t)||Z5e.read(t)}})],Zx.prototype,"units",void 0),Zx=d([U("esri.layers.support.GeometryFieldsInfo")],Zx);var GG;let Xx=GG=class extends _e{constructor(t){super(t),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new We}clone(){return new GG({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};d([m({type:String,json:{write:{isRequired:!0}}})],Xx.prototype,"floorField",void 0),d([m({json:{read:!1,write:!1}})],Xx.prototype,"viewAllMode",void 0),d([m({json:{read:!1,write:!1}})],Xx.prototype,"viewAllLevelIds",void 0),Xx=GG=d([U("esri.layers.support.LayerFloorInfo")],Xx);function bet(t){const{nonStandardUrlAllowed:e=!1,separator:i}=t??{},r=de(PKe),n=r.json?.write;return typeof n=="object"&&n&&(n.writer=function(s,a,o,l){JPe(this,s,i,a,l)}),{...r,set:function(s){if(s==null)return void this._set("url",s);const a=XPe({layer:this,url:s,nonStandardUrlAllowed:e,logger:$e.getLogger(this)});this._set("url",a.url),a.layerId!=null&&this._set("layerId",a.layerId)}}}function wet(t,e){const{separator:i}=e??{},r=rn(t.url);return r!=null&&(t.dynamicDataSource!=null?r.path=Bw(r.path,"dynamicLayer"):t.layerId!=null&&(r.path=Bw(r.path,i??"",t.layerId.toString()))),r}const Qoe=new Gt({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),ele=new Gt({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"});let ec=class extends $t(_e){constructor(e){super(e),this.cardinality=null,this.catalogId=null,this.composite=null,this.id=null,this.keyField=null,this.keyFieldInRelationshipTable=null,this.name=null,this.relatedTableId=null,this.relationshipTableId=null,this.role=null}};d([m({json:{read:Qoe.read,write:Qoe.write}})],ec.prototype,"cardinality",void 0),d([m({json:{name:"catalogID"}})],ec.prototype,"catalogId",void 0),d([m({json:{read:!0,write:!0}})],ec.prototype,"composite",void 0),d([m({json:{read:!0,write:!0}})],ec.prototype,"id",void 0),d([m({json:{read:!0,write:!0}})],ec.prototype,"keyField",void 0),d([m({json:{read:!0,write:!0}})],ec.prototype,"keyFieldInRelationshipTable",void 0),d([m({json:{read:!0,write:!0}})],ec.prototype,"name",void 0),d([m({json:{read:!0,write:!0}})],ec.prototype,"relatedTableId",void 0),d([m({json:{read:!0,write:!0}})],ec.prototype,"relationshipTableId",void 0),d([m({json:{read:ele.read,write:ele.write}})],ec.prototype,"role",void 0),ec=d([U("esri.layers.support.Relationship")],ec);const _et=[["binary","application/octet-stream","bin",""]];function B3t(t,e){return jxe(e.name,t?.supportedFormats??[])!=null}function U3t(t,e){if(!t)return!1;const i=xet(e,t.supportedFormats??[]);return i!=null&&t.editFormats.includes(i)}function zxe(t,e){return OX(Eet(t,e))}function Fxe(t,e){return OX(jxe(t,e))}function H3t(t,e){return Vxe(ket(t,e))}function xet(t,e){return Fxe(t.name,e)??zxe(t.type,e)}function HN(t,e,i){return zxe(t,i)??Fxe(e,i)}function Nxe({supportedFormats:t}){return HN("model/gltf-binary","glb",t)}function G3t(t){const e=Nxe(t);return e!=null&&t.editFormats.includes(e)}function $et({supportedFormats:t}){return HN("model/gltf+json","gltf",t)}function Tet(t){if(!t)return null;const e=Nxe(t),i=$et(t);let r=null;for(const n of t.queryFormats){if(n===e)return n;n===i&&(r=n)}return r}function q3t({supportedFormats:t}){return HN("application/esri3do-SR_world","wld",t)}function W3t({supportedFormats:t}){return HN("application/esri3do-SR_prj","prj",t)}function PX(t){return[..._et,...t]}function ket(t,e){return PX(e).find(i=>OX(i)===t)}function Eet(t,e){const i=t.toLowerCase();return PX(e).find(r=>Vxe(r)===i)}function jxe(t,e){const i=t.toLowerCase();return PX(e).find(r=>Cet(r).some(n=>i.endsWith(n)))}function OX(t){return t?.[0]}function Vxe(t){return t?.[1].toLowerCase()}function Cet(t){return t?.[2].split(",").map(e=>e.toLowerCase())??[]}function Y3t(t){return t.tables?.find(e=>e.role==="assetMaps")}function ct(t,e,i){return!!Bxe(t,e,i)}function Jx(t,e,i){return Bxe(t,e,i)}function Bxe(t,e,i){return t&&t.hasOwnProperty(e)?t[e]:i}const Iet={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"};function Met(t){const e=t?.supportedSpatialAggregationStatistics?.map(i=>i.toLowerCase());return{envelope:!!e?.includes("envelopeaggregate"),centroid:!!e?.includes("centroidaggregate"),convexHull:!!e?.includes("convexhullaggregate")}}function hA(t,e){return!!t?.supportedOperationsWithCacheHint?.map(r=>r.toLowerCase())?.includes(e.toLowerCase())}function Aet(t){const e=t?.supportedStatisticTypes?.map(i=>i.toLowerCase());return{count:!!e?.includes("count"),sum:!!e?.includes("sum"),min:!!e?.includes("min"),max:!!e?.includes("max"),avg:!!e?.includes("avg"),var:!!e?.includes("var"),stddev:!!e?.includes("stddev"),percentileContinuous:!!e?.includes("percentile_cont"),percentileDiscrete:!!e?.includes("percentile_disc"),envelope:!!e?.includes("envelopeaggregate"),centroid:!!e?.includes("centroidaggregate"),convexHull:!!e?.includes("convexhullaggregate")}}function Pet(t){const e=t?.supportedNormalizationTypes?.map(i=>i.toLowerCase());return{field:!!e?.includes("field"),log:!!e?.includes("log"),naturalLog:!!e?.includes("naturallog"),percentOfTotal:!!e?.includes("percentoftotal"),squareRoot:!!e?.includes("squareroot")}}function Uxe(t,e){return{analytics:Oet(t),attachment:Let(t),data:Det(t),metadata:Ret(t),operations:zet(t.capabilities,t,e),query:Fet(t,e),queryAttributeBins:Vet(t),queryRelated:Net(t),queryTopFeatures:jet(t),editing:Bet(t)}}function Oet(t){return{supportsCacheHint:hA(t.advancedQueryCapabilities,"queryAnalytics")}}function Let(t){const e=t.attachmentProperties,i={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1,supportsCacheHint:hA(t.advancedQueryCapabilities,"queryAttachments"),supportsOrderByFields:ct(t.advancedQueryCapabilities,"supportsQueryAttachmentOrderByFields",!1),supportsResize:ct(t,"supportsAttachmentsResizing",!1),supportsTypeWildcard:ct(t.advancedQueryCapabilities,"supportsQueryAttachmentWithTypeWildcard",!1)};return e&&Array.isArray(e)&&e.forEach(r=>{const n=Iet[r.name];n&&(i[n]=!!r.isEnabled)}),i}function Det(t){return{isVersioned:ct(t,"isDataVersioned",!1),isBranchVersioned:ct(t,"isDataBranchVersioned",!1),supportsAttachment:ct(t,"hasAttachments",!1),supportsM:ct(t,"hasM",!1),supportsZ:ct(t,"hasZ",!1)}}function Ret(t){return{supportsAdvancedFieldProperties:ct(t,"supportsFieldDescriptionProperty",!1)}}function zet(t,e,i){const r=t?.toLowerCase().split(",").map(g=>g.trim())??[],n=i?wu(i):null,s=r.includes(n?.serverType==="MapServer"?"data":"query"),a=r.includes("editing")&&!e.datesInUnknownTimezone&&e.uniqueIdInfo?.OIDFieldContainsHashValue!==!0;let o=a&&r.includes("create"),l=a&&r.includes("delete"),c=a&&r.includes("update");const h=r.includes("changetracking"),f=e.advancedQueryCapabilities;return a&&!(o||l||c)&&(o=l=c=!0),{supportsCalculate:ct(e,"supportsCalculate",!1),supportsTruncate:ct(e,"supportsTruncate",!1),supportsValidateSql:ct(e,"supportsValidateSql",!1),supportsAdd:o,supportsDelete:l,supportsEditing:a,supportsChangeTracking:h,supportsQuery:s,supportsQueryAnalytics:ct(f,"supportsQueryAnalytic",!1),supportsQueryAttachments:ct(f,"supportsQueryAttachments",!1),supportsQueryBins:ct(f,"supportsQueryBins",!1)||!!e.queryBinsCapabilities,supportsQueryPivot:ct(f,"supportsQueryPivot",!1),supportsQueryTopFeatures:ct(f,"supportsTopFeaturesQuery",!1),supportsResizeAttachments:ct(e,"supportsAttachmentsResizing",!1),supportsSync:r.includes("sync"),supportsUpdate:c,supportsExceedsLimitStatistics:ct(e,"supportsExceedsLimitStatistics",!1),supportsAsyncConvert3D:ct(e,"supportsAsyncConvert3D",!1)}}function Fet(t,e){const i=t.advancedQueryCapabilities,r=t.ownershipBasedAccessControlForFeatures,n=t.archivingInfo,s=t.currentVersion,a=e?.includes("MapServer"),o=!a||s>=ve("mapserver-pbf-version-support"),l=_R(e),c=new Set((t.supportedQueryFormats??"").split(",").map(h=>h.toLowerCase().trim()));return{maxRecordCount:Jx(t,"maxRecordCount",void 0),maxRecordCountFactor:Jx(t,"maxRecordCountFactor",void 0),maxUniqueIDCount:Jx(t,"maxUniqueIDCount",void 0),standardMaxRecordCount:Jx(t,"standardMaxRecordCount",void 0),supportedSpatialAggregationStatistics:Met(i),supportsCacheHint:ct(i,"supportsQueryWithCacheHint",!1)||hA(i,"query"),supportsCentroid:ct(i,"supportsReturningGeometryCentroid",!1),supportsCentroidOnDegeneratedQuantizedGeometry:l||e==null,supportsCompactGeometry:l,supportsCurrentUser:ct(i,"supportsCurrentUserQueries",!1),supportsDefaultSpatialReference:ct(i,"supportsDefaultSR",!1),supportsDegeneratedQuantizedGeometry:ct(i,"supportsDegeneratedQuantizedGeometry",!1),supportsDisjointSpatialRelationship:ct(i,"supportsDisjointSpatialRel",!1),supportsDistance:ct(i,"supportsQueryWithDistance",!1),supportsDistinct:ct(i,"supportsDistinct",t.supportsAdvancedQueries),supportsExtent:ct(i,"supportsReturningQueryExtent",!1),supportsFormatPBF:o&&c.has("pbf"),supportsFullTextSearch:ct(i,"supportsFullTextSearch",!1),supportsGeometryProperties:ct(i,"supportsReturningGeometryProperties",!1),supportsHavingClause:ct(i,"supportsHavingClause",!1),supportsHistoricMoment:ct(n,"supportsQueryWithHistoricMoment",!1),supportsMaxRecordCountFactor:ct(i,"supportsMaxRecordCountFactor",!1),supportsOrderBy:ct(i,"supportsOrderBy",t.supportsAdvancedQueries),supportsPagination:ct(i,"supportsPagination",!1),supportsPaginationOnAggregatedQueries:ct(i,"supportsPaginationOnAggregatedQueries",!1),supportsPercentileStatistics:ct(i,"supportsPercentileStatistics",!1),supportsQuantization:ct(t,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:ct(t,"supportsQuantizationEditMode",!1),supportsQueryByAnonymous:ct(r,"allowAnonymousToQuery",!0),supportsQueryByOthers:ct(r,"allowOthersToQuery",!0),supportsQueryGeometry:ct(t,"supportsReturningQueryGeometry",!1),supportsResultType:ct(i,"supportsQueryWithResultType",!1),supportsReturnMesh:!!Tet(t.infoFor3D),supportsSpatialAggregationStatistics:ct(i,"supportsSpatialAggregationStatistics",!1),supportsSqlExpression:ct(i,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:ct(t,"useStandardizedQueries",!1),supportsStatistics:ct(i,"supportsStatistics",t.supportsStatistics),supportsTopFeaturesQuery:ct(i,"supportsTopFeaturesQuery",!1),supportsTrueCurve:ct(i,"supportsTrueCurve",!1),tileMaxRecordCount:Jx(t,"tileMaxRecordCount",void 0)}}function Net(t){const e=t.advancedQueryCapabilities,i=ct(e,"supportsAdvancedQueryRelated",!1);return{supportsPagination:ct(e,"supportsQueryRelatedPagination",!1),supportsCount:i,supportsOrderBy:i,supportsCacheHint:hA(e,"queryRelated")}}function jet(t){return{supportsCacheHint:hA(t.advancedQueryCapabilities,"queryTopFilter")}}function Vet(t){const e=t?t.queryBinsCapabilities:void 0;return{supportsDate:ct(e,"supportsDateBin",!1),supportsFixedInterval:ct(e,"supportsFixedIntervalBin",!1),supportsAutoInterval:ct(e,"supportsAutoIntervalBin",!1),supportsFixedBoundaries:ct(e,"supportsFixedBoundariesBin",!1),supportsStackBy:ct(e,"supportsStackBy",!1),supportsSplitBy:ct(e,"supportsSplitBy",!1),supportsSnapToData:ct(e,"supportsSnapToData",!1),supportsReturnFullIntervalBin:ct(e,"supportsReturnFullIntervalBin",!1),supportsFirstDayOfWeek:ct(e,"supportsFirstDayOfWeek",!1),supportsNormalization:ct(e,"supportsNormalization",!1),supportedStatistics:Aet(e),supportedNormalizationTypes:Pet(e)}}function Bet(t){const e=t.ownershipBasedAccessControlForFeatures,i=t?t.advancedEditingCapabilities:void 0;return{supportsGeometryUpdate:ct(t,"allowGeometryUpdates",!0),supportsGlobalId:ct(t,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:ct(t,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:ct(t,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:ct(t,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:ct(t,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:ct(e,"allowAnonymousToDelete",!0),supportsDeleteByOthers:ct(e,"allowOthersToDelete",!0),supportsUpdateByAnonymous:ct(e,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:ct(e,"allowOthersToUpdate",!0),supportsAsyncApplyEdits:ct(i,"supportsAsyncApplyEdits",!1),zDefault:Jx(t,"zDefault",void 0)}}function Z3t(t){return{operations:{supportsAppend:ct(t,"supportsAppend",!1),supportsCoverageQuery:t?.playbackInfo?.klv["0601"]??!1,supportsExportClip:ct(t,"supportsExportClip",!1),supportsExportFrameset:ct(t,"supportsExportFrameset",!1),supportsMensuration:ct(t,"supportsMensuration",!1),supportsPreviews:ct(t,"supportsPreviews",!1),supportsUpdate:ct(t,"supportsUpdate",!1)}}}let em=class extends $t(_e){constructor(e){super(e),this.code=null,this.defaultValues={},this.domains=null,this.name=null}readDomains(e){if(!e)return null;const i={};for(const r of Object.keys(e))i[r]=EN(e[r]);return i}writeDomains(e,i){if(!e)return;const r={};for(const n of Object.keys(e))e[n]&&(r[n]=e[n]?.toJSON());i.domains=r}};d([m({type:Number,json:{write:!0}})],em.prototype,"code",void 0),d([m({type:Object,json:{write:!0}})],em.prototype,"defaultValues",void 0),d([m({json:{write:!0}})],em.prototype,"domains",void 0),d([Ve("domains")],em.prototype,"readDomains",null),d([qe("domains")],em.prototype,"writeDomains",null),d([m({type:String,json:{write:!0}})],em.prototype,"name",void 0),em=d([U("esri.layers.support.Subtype")],em);const Uet=t=>{const e=t;let i=class extends e{constructor(){super(...arguments),this.copyright=null,this.capabilities=null,this.dateFieldsTimeZone=null,this.datesInUnknownTimezone=!1,this.definitionExpression=null,this.displayField=null,this.editFieldsInfo=null,this.editingInfo=null,this.elevationInfo=null,this.fieldsIndex=null,this.floorInfo=null,this.fullExtent=null,this.gdbVersion=null,this.geometryFieldsInfo=null,this.geometryType=null,this.globalIdField=null,this.hasM=void 0,this.hasZ=void 0,this.heightModelInfo=null,this.historicMoment=null,this.indexes=new(We.ofType(Dh)),this.isTable=!1,this.layerId=void 0,this.maxScale=0,this.minScale=0,this.objectIdField=null,this.preferredTimeZone=null,this.relationships=null,this.returnM=void 0,this.returnZ=void 0,this.serviceDefinitionExpression=null,this.serviceItemId=null,this.sourceJSON=null,this.spatialReference=at.WGS84,this.subtypeField=null,this.subtypes=null,this.trackIdField=null,this.uniqueIdFields=null,this.url=null,this.version=void 0,this._isUrlHostModified=!1,this._isUrlHostModificationEnabled=!1}getFieldDomain(r,n){throw new Error("Not implemented")}getField(r){return this.fieldsIndex.get(r)}get authenticationTriggerEvent(){if(!this.url)return null;const{capabilities:r}=this;if(r){const{query:s,operations:a,editing:o}=r;if(!s.supportsQueryByOthers||!s.supportsQueryByAnonymous||a.supportsEditing&&!(o.supportsUpdateByOthers&&o.supportsUpdateByAnonymous&&o.supportsDeleteByOthers&&o.supportsDeleteByAnonymous))return"load"}if(xz(this.serviceDefinitionExpression)||xz(this.definitionExpression))return"load";if(this.userHasUpdateItemPrivileges){if(met(this))return"load";if(this.hasUpdateItemRestrictions)return r.operations.supportsQuery?"editing":"load"}if(this.userHasFullEditingPrivileges&&this.hasFullEditingRestrictions)return"editing";const n=this.editFieldsInfo;return(n?.creatorField||n?.editorField)&&r?.operations.supportsEditing?"editing":null}readCapabilitiesFromService(r,n){return Uxe(n,this.url)}readEditingInfo(r,n){const{editingInfo:s}=n;return s?{lastEditDate:s.lastEditDate!=null?new Date(s.lastEditDate):null}:null}get effectiveCapabilities(){const r=this.capabilities;if(!r)return null;const n=de(r),{operations:s,editing:a}=n;return _D(this)?(this.userHasUpdateItemPrivileges&&(s.supportsQuery=!0),n):this.userHasUpdateItemPrivileges?(s.supportsAdd=s.supportsDelete=s.supportsEditing=s.supportsQuery=s.supportsUpdate=a.supportsDeleteByOthers=a.supportsGeometryUpdate=a.supportsUpdateByOthers=!0,n):(this.userHasFullEditingPrivileges&&s.supportsEditing&&(s.supportsAdd=s.supportsDelete=s.supportsUpdate=a.supportsGeometryUpdate=!0),n)}get effectiveEditingEnabled(){return!1}readGlobalIdFieldFromService(r,n){return Pxe(n)}get hasFullEditingRestrictions(){const r=this.capabilities;if(!r||_D(this))return!1;const{operations:n,editing:s}=r;return n.supportsEditing&&!(n.supportsAdd&&n.supportsDelete&&n.supportsUpdate&&s.supportsGeometryUpdate)}get hasUpdateItemRestrictions(){const r=this.capabilities;if(!r)return!1;const{operations:n,editing:s}=r;return _D(this)?!n.supportsQuery:!(n.supportsAdd&&n.supportsDelete&&n.supportsEditing&&n.supportsQuery&&n.supportsUpdate&&s.supportsDeleteByOthers&&s.supportsGeometryUpdate&&s.supportsUpdateByOthers)}readIsTableFromService(r,n){return n.type==="Table"}readMaxScale(r,n){return n.effectiveMaxScale||r||0}readMinScale(r,n){return n.effectiveMinScale||r||0}readObjectIdFieldFromService(r,n){return Oxe(n)}get parsedUrl(){return wet(this)}readServiceDefinitionExpression(r,n){return n.definitionQuery||n.definitionExpression}readUniqueIdFields(r,n){return n.uniqueIdInfo?.OIDFieldContainsHashValue?n.uniqueIdInfo.fields:null}readVersion(r,n){return set(n)}get isUrlHostModified(){const{loaded:r,url:n,_isUrlHostModified:s}=this;if(s)return!0;if(!r||!n||this.originIdOf("url")<7)return!1;const a=this.sourceJSON?.preferredHost;if(!a||!Js(n,`https://${a}`,!0))return!1;for(let o=6;o>=3;o--){const l=this.getAtOrigin("url",uI(o));if(l)return!Js(n,l,!0)}return!1}applyPreferredHost(r){const{url:n,portalItem:s}=this;!n||N9(s)}applyHostFromPortalItem(){const{url:r,portalItem:n}=this;if(!r||this.originIdOf("url")===7||!n?.url||!N9(n)||!KS(n,mX.HOSTED_SERVICE)||Js(r,n.url,!0)||!this._isUrlHostModificationEnabled)return;const s=zPe(n.url);this._set("url",efe(r,s)),this._isUrlHostModified=!0}};return d([m({readOnly:!0})],i.prototype,"authenticationTriggerEvent",null),d([m({type:String,json:{origins:{service:{read:{source:"copyrightText"}}}}})],i.prototype,"copyright",void 0),d([m({readOnly:!0,json:{read:!1,origins:{service:{read:{source:["advancedQueryCapabilities","allowGeometryUpdates","allowUpdateWithoutMValues","archivingInfo","capabilities","datesInUnknownTimezone","hasAttachments","hasM","hasZ","isDataBranchVersioned","isDataVersioned","maxRecordCount","maxRecordCountFactor","maxUniqueIDCount","ownershipBasedAccessControlForFeatures","standardMaxRecordCount","supportedQueryFormats","supportsAdvancedQueries","supportsApplyEditsWithGlobalIds","supportsAttachmentsByUploadId","supportsAttachmentsResizing","supportsCalculate","supportsCoordinatesQuantization","supportsExceedsLimitStatistics","supportsFieldDescriptionProperty","supportsQuantizationEditMode","supportsRollbackOnFailureParameter","supportsStatistics","supportsTruncate","supportsValidateSql","tileMaxRecordCount","useStandardizedQueries"]}}}}})],i.prototype,"capabilities",void 0),d([Ve("service","capabilities")],i.prototype,"readCapabilitiesFromService",null),d([m(CR("dateFieldsTimeReference"))],i.prototype,"dateFieldsTimeZone",void 0),d([m({type:Boolean})],i.prototype,"datesInUnknownTimezone",void 0),d([m({type:String,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],i.prototype,"definitionExpression",void 0),d([m({type:String,json:{origins:{service:{read:{source:"displayField"}}}}})],i.prototype,"displayField",void 0),d([m({readOnly:!0,type:Qf})],i.prototype,"editFieldsInfo",void 0),d([m({readOnly:!0})],i.prototype,"editingInfo",void 0),d([Ve("editingInfo")],i.prototype,"readEditingInfo",null),d([m({readOnly:!0})],i.prototype,"effectiveCapabilities",null),d([m()],i.prototype,"effectiveEditingEnabled",null),d([m((()=>{const r=de(LKe),n=r.json.origins;return n["web-map"]={read:!1,write:!1},n["portal-item"]={read:!1,write:!1},r})())],i.prototype,"elevationInfo",void 0),d([m()],i.prototype,"fieldsIndex",void 0),d([m({type:Xx,json:{name:"layerDefinition.floorInfo",write:{layerContainerTypes:Mr}}})],i.prototype,"floorInfo",void 0),d([m({type:Wt,json:{origins:{service:{read:{source:"extent"}}}}})],i.prototype,"fullExtent",void 0),d([m()],i.prototype,"gdbVersion",void 0),d([m({readOnly:!0,type:Zx,json:{read:{source:"geometryProperties"}}})],i.prototype,"geometryFieldsInfo",void 0),d([m({type:["point","polygon","polyline","multipoint","multipatch","mesh"],json:{origins:{service:{read:HG.read}}}})],i.prototype,"geometryType",void 0),d([m({type:String})],i.prototype,"globalIdField",void 0),d([Ve("service","globalIdField",["globalIdField","fields"])],i.prototype,"readGlobalIdFieldFromService",null),d([m({readOnly:!0})],i.prototype,"hasFullEditingRestrictions",null),d([m({type:Boolean,json:{origins:{service:{read:!0}}}})],i.prototype,"hasM",void 0),d([m({readOnly:!0})],i.prototype,"hasUpdateItemRestrictions",null),d([m({type:Boolean,json:{origins:{service:{read:!0}}}})],i.prototype,"hasZ",void 0),d([m({readOnly:!0,type:Eo})],i.prototype,"heightModelInfo",void 0),d([m({type:Date})],i.prototype,"historicMoment",void 0),d([m({type:We.ofType(Dh),readOnly:!0})],i.prototype,"indexes",void 0),d([m({readOnly:!0})],i.prototype,"isTable",void 0),d([Ve("service","isTable",["type"])],i.prototype,"readIsTableFromService",null),d([m({type:Number,json:{origins:{service:{read:{source:"id"}},"portal-item":{read:!1,write:{target:"id"}}},read:!1}})],i.prototype,"layerId",void 0),d([m(FKe)],i.prototype,"maxScale",void 0),d([Ve("service","maxScale",["maxScale","effectiveMaxScale"])],i.prototype,"readMaxScale",null),d([m(zKe)],i.prototype,"minScale",void 0),d([Ve("service","minScale",["minScale","effectiveMinScale"])],i.prototype,"readMinScale",null),d([m({type:String})],i.prototype,"objectIdField",void 0),d([Ve("service","objectIdField",["objectIdField","fields"])],i.prototype,"readObjectIdFieldFromService",null),d([m({readOnly:!0})],i.prototype,"parsedUrl",null),d([m(CR("preferredTimeReference"))],i.prototype,"preferredTimeZone",void 0),d([m({type:[ec],readOnly:!0})],i.prototype,"relationships",void 0),d([m({type:Boolean})],i.prototype,"returnM",void 0),d([m({type:Boolean})],i.prototype,"returnZ",void 0),d([m({readOnly:!0,json:{write:!1}})],i.prototype,"serverGens",void 0),d([m({readOnly:!0})],i.prototype,"serviceDefinitionExpression",void 0),d([Ve("service","serviceDefinitionExpression",["definitionQuery","definitionExpression"])],i.prototype,"readServiceDefinitionExpression",null),d([m({type:String,readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],i.prototype,"serviceItemId",void 0),d([m()],i.prototype,"sourceJSON",void 0),d([m({type:at,json:{origins:{service:{read:{source:"extent.spatialReference"}}}}})],i.prototype,"spatialReference",void 0),d([m({type:String,readOnly:!0,json:{origins:{service:{read:!0}}}})],i.prototype,"subtypeField",void 0),d([m({type:[em],readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],i.prototype,"subtypes",void 0),d([m({type:String,json:{read:{source:"timeInfo.trackIdField"}}})],i.prototype,"trackIdField",void 0),d([m({type:[String],readOnly:!0})],i.prototype,"uniqueIdFields",void 0),d([Ve("service","uniqueIdFields",["uniqueIdInfo.OIDFieldContainsHashValue","uniqueIdInfo.fields"])],i.prototype,"readUniqueIdFields",null),d([m(bet({nonStandardUrlAllowed:!0}))],i.prototype,"url",void 0),d([m({json:{origins:{service:{read:!0}},read:!1}})],i.prototype,"version",void 0),d([Ve("service","version",["currentVersion","capabilities","drawingInfo","hasAttachments","htmlPopupType","relationships","timeInfo","typeIdField","types"])],i.prototype,"readVersion",null),d([m({readOnly:!0})],i.prototype,"isUrlHostModified",null),i=d([U("esri.layers.mixins.FeatureLayerBase")],i),i};let Het=class extends NI{constructor(e){super(),this.type="aggregate",this.featureReductionProvider=e}get id(){return this.featureReductionProvider.id}get[eA](){const e=this.featureReductionProvider.featureReduction;return e&&"popupTemplate"in e?e:null}},Gy=class extends $t(_e){constructor(e){super(e),this.expression=null,this.title=null,this.returnType=null}};d([m({type:String,json:{write:!0}})],Gy.prototype,"expression",void 0),d([m({type:String,json:{write:!0}})],Gy.prototype,"title",void 0),d([m({type:String,json:{write:!0}})],Gy.prototype,"returnType",void 0),Gy=d([U("esri.layers.support.ExpressionInfo")],Gy);var qG,M$;let ro=(M$=class extends _e{constructor(e){super(e),this.isAutoGenerated=!1,this.name=null,this.alias=null,this.onStatisticField=null,this.onStatisticExpression=null,this.statisticType=null}clone(){return new qG({name:this.name,alias:this.alias,isAutoGenerated:this.isAutoGenerated,onStatisticExpression:de(this.onStatisticExpression),onStatisticField:this.onStatisticField,statisticType:this.statisticType})}},qG=M$,M$);d([m({type:Boolean,json:{write:!0}})],ro.prototype,"isAutoGenerated",void 0),d([m({type:String,json:{write:!0}})],ro.prototype,"name",void 0),d([m({type:String,json:{write:!0}})],ro.prototype,"alias",void 0),d([m({type:String,json:{write:!0}})],ro.prototype,"onStatisticField",void 0),d([m({type:Gy,json:{write:!0}})],ro.prototype,"onStatisticExpression",void 0),d([m({type:String,json:{write:!0}})],ro.prototype,"statisticType",void 0),ro=qG=d([U("esri.layers.support.AggregateField")],ro);let mv=class extends _e{constructor(){super(...arguments),this.type=null}};d([m({type:["selection","cluster","binning"],readOnly:!0,json:{read:!1,write:!0}})],mv.prototype,"type",void 0),mv=d([U("esri.layers.support.FeatureReduction")],mv);const LX="__begin__",DX="__end__",Get=new RegExp(LX,"ig"),qet=new RegExp(DX,"ig"),tle=new RegExp("^"+LX,"i"),ile=new RegExp(DX+"$","i"),Sz='"',Wet=Sz+" + ",Yet=" + "+Sz;function Zet(t){return t.replaceAll(new RegExp("\\[","g"),"{").replaceAll(new RegExp("\\]","g"),"}")}function Xet(t){return t.replaceAll(new RegExp("\\{","g"),"[").replaceAll(new RegExp("\\}","g"),"]")}function RX(t){const e={expression:"",type:"none"};return t.labelExpressionInfo?t.labelExpressionInfo.value?(e.expression=t.labelExpressionInfo.value,e.type="conventional"):t.labelExpressionInfo.expression&&(e.expression=t.labelExpressionInfo.expression,e.type="arcade"):t.labelExpression!=null&&(e.expression=Zet(t.labelExpression),e.type="conventional"),e}function Jet(t){const e=RX(t);if(!e)return null;switch(e.type){case"conventional":return WG(e.expression);case"arcade":return e.expression}return null}function Ket(t){const e=RX(t);if(!e)return null;switch(e.type){case"conventional":return ett(e.expression);case"arcade":return Hxe(e.expression)}return null}function WG(t){let e;return t?(e=Dv(t,i=>LX+'$feature["'+i+'"]'+DX),e=tle.test(e)?e.replace(tle,""):Sz+e,e=ile.test(e)?e.replace(ile,""):e+Sz,e=e.replaceAll(Get,Wet).replaceAll(qet,Yet)):e='""',e}const Qet=/^\s*\{([^}]+)\}\s*$/i;function ett(t){return t?.match(Qet)?.[1].trim()||null}const ttt=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*$/i,itt=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,rtt=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(.+)(\1)\s*\));?\s*$/i;function Hxe(t){if(!t)return null;let e=ttt.exec(t)||itt.exec(t);return e?e[1]||e[3]:(e=rtt.exec(t),e?e[2]:null)}var YG,A$;let fm=(A$=class extends _e{constructor(){super(...arguments),this.expression=null,this.title=null,this.value=null}readExpression(e,i){return i.value?WG(i.value):e}writeExpression(e,i,r){this.value!=null&&(e=WG(this.value)),e!=null&&(i[r]=e)}clone(){return new YG({expression:this.expression,title:this.title,value:this.value})}},YG=A$,A$);d([m({type:String,json:{write:{writerEnsuresNonNull:!0}}})],fm.prototype,"expression",void 0),d([Ve("expression",["expression","value"])],fm.prototype,"readExpression",null),d([qe("expression")],fm.prototype,"writeExpression",null),d([m({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],fm.prototype,"title",void 0),d([m({json:{read:!1,write:!1}})],fm.prototype,"value",void 0),fm=YG=d([U("esri.layers.support.LabelExpressionInfo")],fm);var ZG;const GO=new Gt({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0});function qO(t,e,i){return{enabled:!F9(i?.layer)}}function Gxe(t){return!t||t.origin!=="service"&&t.layer?.type!=="map-image"}function ntt(t){return t?.type==="map-image"}function qxe(t){return!!ntt(t)&&!!t.capabilities?.exportMap?.supportsArcadeExpressionForLabeling}function stt(t){return Gxe(t)||qxe(t?.layer)}var P$;let vr=(P$=class extends _e{static evaluateWhere(e,i){const r=(n,s,a)=>{switch(s){case"=":return n==a;case"<>":return n!=a;case">":return n>a;case">=":return n>=a;case"<":return n<a;case"<=":return n<=a}return!1};try{if(e==null)return!0;const n=e.split(" ");if(n.length===3)return r(i[n[0]],n[1],n[2]);if(n.length===7){const s=r(i[n[0]],n[1],n[2]),a=n[3],o=r(i[n[4]],n[5],n[6]);switch(a){case"AND":return s&&o;case"OR":return s||o}}return!1}catch{}}constructor(e){super(e),this.type="label",this.name=null,this.allowOverrun=!1,this.deconflictionStrategy="static",this.labelExpression=null,this.labelExpressionInfo=null,this.labelPlacement=null,this.labelPosition="curved",this.maxScale=0,this.minScale=0,this.repeatLabel=!0,this.repeatLabelDistance=null,this.symbol=TQe,this.useCodedValues=void 0,this.where=null}readLabelExpression(e,i){const r=i.labelExpressionInfo;if(!r||!r.value&&!r.expression)return e}writeLabelExpression(e,i,r){if(this.labelExpressionInfo){if(this.labelExpressionInfo.value!=null)e=Xet(this.labelExpressionInfo.value);else if(this.labelExpressionInfo.expression!=null){const n=Hxe(this.labelExpressionInfo.expression);n&&(e="["+n+"]")}}e!=null&&(i[r]=e)}writeLabelExpressionInfo(e,i,r,n){if(e==null&&this.labelExpression!=null&&Gxe(n))e=new fm({expression:this.getLabelExpressionArcade()});else if(!e)return;const s=e.toJSON(n);s.expression&&(i[r]=s)}writeMaxScale(e,i){(e||this.minScale)&&(i.maxScale=e)}writeMinScale(e,i){(e||this.maxScale)&&(i.minScale=e)}getLabelExpression(){return RX(this)}getLabelExpressionArcade(){return Jet(this)}getLabelExpressionSingleField(){return Ket(this)}hash(){return JSON.stringify(this)}clone(){return new ZG({allowOverrun:this.allowOverrun,deconflictionStrategy:this.deconflictionStrategy,labelExpression:this.labelExpression,labelExpressionInfo:de(this.labelExpressionInfo),labelPosition:this.labelPosition,labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,repeatLabel:this.repeatLabel,repeatLabelDistance:this.repeatLabelDistance,symbol:de(this.symbol),where:this.where,useCodedValues:this.useCodedValues})}},ZG=P$,P$);d([m({type:String,json:{write:!0}})],vr.prototype,"name",void 0),d([m({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1},"portal-item":{default:!1,write:{overridePolicy:qO}}}}})],vr.prototype,"allowOverrun",void 0),d([m({type:String,json:{write:!0,default:"static",origins:{"web-scene":{write:!1},"portal-item":{default:"static",write:{overridePolicy:qO}}}}})],vr.prototype,"deconflictionStrategy",void 0),d([m({type:String,json:{write:{overridePolicy(t,e,i){return this.labelExpressionInfo&&i?.origin==="service"&&qxe(i.layer)?{enabled:!1}:{allowNull:!0}}}}})],vr.prototype,"labelExpression",void 0),d([Ve("labelExpression")],vr.prototype,"readLabelExpression",null),d([qe("labelExpression")],vr.prototype,"writeLabelExpression",null),d([m({type:fm,json:{write:{overridePolicy:(t,e,i)=>stt(i)?{allowNull:!0}:{enabled:!1}}}})],vr.prototype,"labelExpressionInfo",void 0),d([qe("labelExpressionInfo")],vr.prototype,"writeLabelExpressionInfo",null),d([m({type:GO.apiValues,json:{type:GO.jsonValues,read:GO.read,write:GO.write}})],vr.prototype,"labelPlacement",void 0),d([m({type:["curved","parallel"],json:{write:!0,origins:{"web-map":{write:!1},"web-scene":{write:!1},"portal-item":{write:!1}}}})],vr.prototype,"labelPosition",void 0),d([m({type:Number})],vr.prototype,"maxScale",void 0),d([qe("maxScale")],vr.prototype,"writeMaxScale",null),d([m({type:Number})],vr.prototype,"minScale",void 0),d([qe("minScale")],vr.prototype,"writeMinScale",null),d([m({type:Boolean,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:qO}}}}})],vr.prototype,"repeatLabel",void 0),d([m({type:Number,cast:xi,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:qO}}}}})],vr.prototype,"repeatLabelDistance",void 0),d([m({types:k7e,json:{origins:{"web-scene":{types:E7e,write:Boe,default:null}},write:Boe,default:null}})],vr.prototype,"symbol",void 0),d([m({type:Boolean,json:{write:!0}})],vr.prototype,"useCodedValues",void 0),d([m({type:String,json:{write:!0}})],vr.prototype,"where",void 0),vr=ZG=d([U("esri.layers.support.LabelClass")],vr);var XG;let xd=XG=class extends _e{constructor(t){super(t),this.description=null,this.label=null,this.minValue=null,this.maxValue=0,this.symbol=null}clone(){return new XG({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:this.symbol?.clone()??null})}getMeshHash(){const t=JSON.stringify(this.symbol);return`${this.minValue}.${this.maxValue}.${t}`}};d([m({type:String,json:{write:!0}})],xd.prototype,"description",void 0),d([m({type:String,json:{write:!0}})],xd.prototype,"label",void 0),d([m({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],xd.prototype,"minValue",void 0),d([m({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],xd.prototype,"maxValue",void 0),d([m(kX)],xd.prototype,"symbol",void 0),xd=XG=d([U("esri.renderers.support.ClassBreakInfo")],xd);var JG;const Wxe="log",xD="percent-of-total",SD="field",WO=new Gt({esriNormalizeByLog:Wxe,esriNormalizeByPercentOfTotal:xD,esriNormalizeByField:SD}),att=dn(xd);let Kn=JG=class extends YT(wc){constructor(t){super(t),this._compiledValueExpression={valueExpression:null,compiledFunction:null},this.backgroundFillSymbol=null,this.classBreakInfos=null,this.defaultLabel=null,this.defaultSymbol=null,this.field=null,this.isMaxInclusive=!0,this.legendOptions=null,this.normalizationField=null,this.normalizationTotal=null,this.type="class-breaks",this.valueExpression=null,this.valueExpressionTitle=null,this._set("classBreakInfos",[])}readClassBreakInfos(t,e,i){if(!Array.isArray(t))return;let r=e.minValue;return t.map(n=>{const s=new xd;return s.read(n,i),s.minValue==null&&(s.minValue=r),s.maxValue==null&&(s.maxValue=s.minValue),r=s.maxValue,s})}writeClassBreakInfos(t,e,i,r){const n=t.map(s=>s.write({},r));this._areClassBreaksConsecutive()&&n.forEach(s=>delete s.classMinValue),e[i]=n}castField(t){return t==null?t:typeof t=="function"?($e.getLogger(this).error(".field: field must be a string value"),null):DM(t)}get minValue(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}get normalizationType(){let t=this._get("normalizationType");const e=!!this.normalizationField,i=this.normalizationTotal!=null;return e||i?(t=e&&SD||i&&xD||null,e&&i&&$e.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):t!==SD&&t!==xD||(t=null),t}set normalizationType(t){this._set("normalizationType",t)}addClassBreakInfo(t,e,i){let r=null;r=typeof t=="number"?new xd({minValue:t,maxValue:e,symbol:Pwe(i)}):att(de(t)),this.classBreakInfos.push(r),this.classBreakInfos.length===1&&this.notifyChange("minValue")}removeClassBreakInfo(t,e){const i=this.classBreakInfos.length;for(let r=0;r<i;r++){const n=[this.classBreakInfos[r].minValue,this.classBreakInfos[r].maxValue];if(n[0]===t&&n[1]===e){this.classBreakInfos.splice(r,1);break}}}getBreakIndex(t,e){return this.valueExpression&&e?.arcade==null&&$e.getLogger(this).warn(""),this.valueExpression?this._getBreakIndexForExpression(t,e):this._getBreakIndexForField(t)}async getClassBreakInfo(t,e){let i=e;this.valueExpression&&e?.arcade==null&&(i={...i,arcade:await Xm()});const r=this.getBreakIndex(t,i);return r!==-1?this.classBreakInfos[r]:null}getSymbol(t,e){if(this.valueExpression&&e?.arcade==null)return void $e.getLogger(this).error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const i=this.getBreakIndex(t,e);return i>-1?this.classBreakInfos[i].symbol:this.defaultSymbol}async getSymbolAsync(t,e){let i=e;if(this.valueExpression&&e?.arcade==null){const n=await Xm(),{arcadeUtils:s}=n;s.hasGeometryOperations(this.valueExpression)&&await s.enableGeometryOperations(),i={...i,arcade:n}}const r=this.getBreakIndex(t,i);return r>-1?this.classBreakInfos[r].symbol:this.defaultSymbol}get symbols(){const t=[];return this.classBreakInfos.forEach(e=>{e.symbol&&t.push(e.symbol)}),this.defaultSymbol&&t.push(this.defaultSymbol),t}getAttributeHash(){return this.visualVariables?.reduce((t,e)=>t+e.getAttributeHash(),"")??""}getMeshHash(){const t=JSON.stringify(this.backgroundFillSymbol),e=JSON.stringify(this.defaultSymbol),i=`${this.normalizationField}.${this.normalizationType}.${this.normalizationTotal}`;return`${t}.${e}.${this.classBreakInfos.reduce((r,n)=>r+n.getMeshHash(),"")}.${i}.${this.field}.${this.valueExpression}`}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}clone(){return new JG({field:this.field,backgroundFillSymbol:this.backgroundFillSymbol?.clone(),defaultLabel:this.defaultLabel,defaultSymbol:this.defaultSymbol?.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:de(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:de(this.visualVariables),legendOptions:de(this.legendOptions),authoringInfo:de(this.authoringInfo)})}async collectRequiredFields(t,e){const i=[this.collectVVRequiredFields(t,e),this.collectSymbolFields(t,e)];await Promise.all(i)}async collectSymbolFields(t,e){const i=[...this.symbols.map(r=>r.collectRequiredFields(t,e)),La(t,e,null,this.valueExpression)];fo(t,e,this.field),fo(t,e,this.normalizationField),await Promise.all(i)}_getBreakIndexForExpression(t,e){const{viewingMode:i,scale:r,spatialReference:n,arcade:s,timeZone:a}=e??{},{valueExpression:o}=this;let l=this._compiledValueExpression.valueExpression===o?this._compiledValueExpression.compiledFunction:null;const c=s.arcadeUtils;if(!l){const f=c.createSyntaxTree(o);l=c.createFunction(f),this._compiledValueExpression.compiledFunction=l}this._compiledValueExpression.valueExpression=o;const h=c.executeFunction(l,c.createExecContext(t,c.getViewInfo({viewingMode:i,scale:r,spatialReference:n}),a));return this._getBreakIndexfromInfos(h)}_getBreakIndexForField(t){const e=this.field,i=t.attributes,r=this.normalizationType;let n=parseFloat(i[e]);if(r){const s=this.normalizationTotal,a=parseFloat(this.normalizationField?i[this.normalizationField]:void 0);if(r===Wxe)n=Math.log(n)*Math.LOG10E;else if(r!==xD||s==null||isNaN(s)){if(r===SD&&!isNaN(a)){if(isNaN(n)||isNaN(a))return-1;n/=a}}else n=n/s*100}return this._getBreakIndexfromInfos(n)}_getBreakIndexfromInfos(t){const e=this.isMaxInclusive;if(t!=null&&typeof t=="number"&&!isNaN(t))for(let i=0;i<this.classBreakInfos.length;i++){const r=[this.classBreakInfos[i].minValue,this.classBreakInfos[i].maxValue];if(r[0]<=t&&(e?t<=r[1]:t<r[1]))return i}return-1}_areClassBreaksConsecutive(){const t=this.classBreakInfos,e=t.length;for(let i=1;i<e;i++)if(t[i-1].maxValue!==t[i].minValue)return!1;return!0}};d([m(EX)],Kn.prototype,"backgroundFillSymbol",void 0),d([m({type:[xd],json:{write:{isRequired:!0}}})],Kn.prototype,"classBreakInfos",void 0),d([Ve("classBreakInfos")],Kn.prototype,"readClassBreakInfos",null),d([qe("classBreakInfos")],Kn.prototype,"writeClassBreakInfos",null),d([m({type:String,json:{write:!0}})],Kn.prototype,"defaultLabel",void 0),d([m(UN)],Kn.prototype,"defaultSymbol",void 0),d([m({type:String,json:{write:!0}})],Kn.prototype,"field",void 0),d([Ii("field")],Kn.prototype,"castField",null),d([m({type:Boolean})],Kn.prototype,"isMaxInclusive",void 0),d([m({type:CX,json:{write:!0}})],Kn.prototype,"legendOptions",void 0),d([m({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy(){return this.classBreakInfos.length!==0&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],Kn.prototype,"minValue",null),d([m({type:String,json:{write:!0}})],Kn.prototype,"normalizationField",void 0),d([m({type:Number,json:{write:!0}})],Kn.prototype,"normalizationTotal",void 0),d([m({type:WO.apiValues,value:null,json:{type:WO.jsonValues,read:WO.read,write:WO.write}})],Kn.prototype,"normalizationType",null),d([pt({classBreaks:"class-breaks"})],Kn.prototype,"type",void 0),d([m({type:String,json:{write:!0}})],Kn.prototype,"valueExpression",void 0),d([m({type:String,json:{write:!0}})],Kn.prototype,"valueExpressionTitle",void 0),Kn=JG=d([U("esri.renderers.ClassBreaksRenderer")],Kn);const KG=-3,ott=KG-1,ltt=!!ve("esri-tests-disable-gpu-memory-measurements");let ctt=class{get size(){return this._size}constructor(e=10485760){this._maxSize=e,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._users=new Map,this._sizeLimits=new Map}destroy(){this.clearAll(),this._sizeLimits.clear(),this._users.clear(),this._db=null}register(e){this._users.set(e.id.slice(0,-1),e)}deregister(e){this.clear(e),this._sizeLimits.delete(e),this._users.delete(e.id.slice(0,-1))}get maxSize(){return this._maxSize}set maxSize(e){this._maxSize=Math.max(e,-1),this._checkSize()}getSize(e,i){return this._db.get(e.id+i)?.size??0}put(e,i,r,n,s){i=e.id+i;const a=this._db.get(i);if(a&&(this._size-=a.size,e.size-=a.size,this._db.delete(i),a.entry!==r&&this._notifyRemove(i,a.entry,a.size,0)),n>this._maxSize)return void this._notifyRemove(i,r,n,0);if(r===void 0)return void console.warn("Refusing to cache undefined entry ");if(!n||n<0)return ltt||console.warn(`Refusing to cache entry with size ${n} for key ${i}`),void this._notifyRemove(i,r,0,0);const o=1+Math.max(s,ott)-KG;this._db.set(i,new utt(r,n,o)),this._size+=n,e.size+=n,this._checkSize()}updateSize(e,i){i=e.id+i;const r=this._db.get(i);if(!r)return;this._size-=r.size,e.size-=r.size;let n=r.entry.usedMemory;for(;n>this._maxSize;){const s=this._notifyRemove(i,r.entry,n,1);if(!(s!=null&&s>0))return void this._db.delete(i);n=s}r.size=n,this._size+=n,e.size+=n,this._checkSize()}pop(e,i){i=e.id+i;const r=this._db.get(i);if(r)return this._size-=r.size,e.size-=r.size,this._db.delete(i),++this._hit,r.entry;++this._miss}get(e,i){i=e.id+i;const r=this._db.get(i);if(r!==void 0)return this._db.delete(i),r.lives=r.lifetime,this._db.set(i,r),++this._hit,r.entry;++this._miss}peek(e,i){const r=this._db.get(e.id+i);return r?++this._hit:++this._miss,r?.entry}get performanceInfo(){const e={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},i={},r=new Array;this._db.forEach((a,o)=>{const l=a.lifetime;r[l]=(r[l]||0)+a.size,this._users.forEach(c=>{const{id:h,name:f}=c;if(o.startsWith(h)){const g=i[f]||0;i[f]=g+a.size}})});const n={};this._users.forEach(a=>{const o=a.name;if("hitRate"in a&&typeof a.hitRate=="number"&&!isNaN(a.hitRate)&&a.hitRate>0){const l=i[o]||0;i[o]=l,n[o]=Math.round(100*a.hitRate)+"%"}else n[o]="0%"});const s=Object.keys(i);s.sort((a,o)=>i[o]-i[a]),s.forEach(a=>e[a]=Math.round(i[a]/2**20)+"MB / "+n[a]);for(let a=r.length-1;a>=0;--a){const o=r[a];o&&(e["Priority "+(a+KG-1)]=Math.round(o/this._size*100)+"%")}return e}resetStats(){this._hit=this._miss=0,this._users.forEach(e=>e.resetHitRate())}clear(e){const i=e.id;this._db.forEach((r,n)=>{n.startsWith(i)&&(this._size-=r.size,this._db.delete(n),this._notifyRemove(n,r.entry,r.size,0))}),e.size=0}clearAll(){this._db.forEach((e,i)=>this._notifyRemove(i,e.entry,e.size,0)),this._users.forEach(e=>e.size=0),this._size=0,this._db.clear()}*values(e){for(const[i,r]of this._db)i.startsWith(e.id)&&(yield r.entry)}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(e,i,r,n){const s=this._users.get(e.split(AB)[0])?.removeFunc,a=s?.(i,n,r);return typeof a=="number"?a:null}_checkSize(){this._sizeLimits.forEach((e,i)=>this._checkSizeLimits(e,i)),this._checkSizeLimits(this.maxSize)}setMaxSize(e,i){i==null||i<=0?this._sizeLimits.delete(e):this._sizeLimits.set(e,i)}_checkSizeLimits(e,i){const r=i??this;if(r.size<=e)return;const n=i?.id;let s=!0;for(;s;){s=!1;for(const[a,o]of this._db)if(o.lifetime===0&&(!n||a.startsWith(n))){const l=i??this._users.get(a.split(AB)[0]);if(this._purgeItem(a,o,l),r.size<=.9*e)return;s||=this._db.has(a)}}for(const[a,o]of this._db)if(!n||a.startsWith(n)){const l=i??this._users.get(a.split(AB)[0]);if(this._purgeItem(a,o,l),r.size<=.9*e)return}}_purgeItem(e,i,r){if(this._db.delete(e),i.lives<=1){this._size-=i.size,r&&(r.size-=i.size);const n=this._notifyRemove(e,i.entry,i.size,1);n!=null&&n>0&&(this._size+=n,r&&(r.size+=n),i.lives=i.lifetime,i.size=n,this._db.set(e,i))}else--i.lives,this._db.set(e,i)}},utt=class{constructor(e,i,r){this.entry=e,this.size=i,this.lifetime=r,this.lives=r}};const AB=":";let Yxe=class{constructor(e,i){this.removeFunc=i,this._storage=new ctt,this.id="",this.name="",this.size=0,this._storage.maxSize=e,this._storage.register(this)}destroy(){this._storage.deregister(this),this._storage.destroy(),this._storage=null}put(e,i,r=1){this._storage.put(this,e,i,r,1)}pop(e){return this._storage.pop(this,e)}get(e){return this._storage.get(this,e)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(e){this._storage.maxSize=e}resetHitRate(){}},rle=class Zxe{static parse(e,i,r){const n=[],s=[],a=e.split(";");for(let o=0;o<a.length;o++){const l=a[o];if(l){if(l.includes("po:")){const c=l.slice(3).split("|");if(c.length===3){const[h,f,g]=c,y=htt(h,f,g);y&&s.push(y)}continue}if(l.includes("|")){for(const c of l.split("|"))if(i.has(c)){n.push(c);break}}else if(i.has(l))n.push(l);else if(o===0){n.length=0,n.push(ptt(r));break}}}return new Zxe(n,s)}constructor(e,i){this.partNames=e,this.overrides=i}};function dtt(t,e){if(t==="DashTemplate")return e.split(" ").map(i=>Number(i));if(t==="Color"){const i=new Ye(e).toRgba();return[i[0],i[1],i[2],255*i[3]]}return Number(e)}function htt(t,e,i){return{primitiveName:t,propertyName:e,value:dtt(e,i),defaultValue:null}}function ptt(t){switch(t){case"esriGeometryPolyline":return"Invalid_L";case"esriGeometryPolygon":return"Invalid_A";default:return"Invalid_P"}}var O$;let Hh=(O$=class{},O$.instance=new $l("Etc/UTC"),O$);function ftt(t){return t instanceof p_?t===Hh.instance:t?.toString().toLowerCase()==="unknown"}function rDt(t){return ftt(t)?Hh.instance:t}function mtt(t){return"timeZone"in t}function gtt(t){return"timeZone"in t}function ytt(t){return"dateFieldsTimeZone"in t}const vtt=new Map;let UI=class $D{static fromJSON(e){return new $D(e.fields,e.timeZoneByFieldName)}static fromLayer(e){return new $D(e.fields??[],sle(e))}static fromLayerJSON(e){return new $D(e.fields??[],sle(e))}constructor(e=[],i){this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this._requiredFields=null,this.dateFields=[],this.numericFields=[],this.fields=e||[],this._timeZoneByFieldName=i?new Map(i):null;const r=[];for(const n of this.fields){const s=n?.name,a=nle(s);if(s&&a){const o=I0(s);this._fieldsMap.set(s,n),this._fieldsMap.set(o,n),this._normalizedFieldsMap.set(a,n),r.push(`${o}:${n.type}:${this._timeZoneByFieldName?.get(s)}`),wN(n)?(this.dateFields.push(n),this._dateFieldsSet.add(n)):FZ(n)&&(this._numericFieldsSet.add(n),this.numericFields.push(n)),gse(n)||yse(n)||(n.editable=n.editable==null||!!n.editable,n.nullable=n.nullable==null||!!n.nullable)}}r.sort(),this.uid=r.join()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const e of this.fields)gse(e)||yse(e)||e.nullable||W8e(e)!==void 0||this._requiredFields.push(e)}return this._requiredFields}equals(e){return this.uid===e?.uid}has(e){return this.get(e)!=null}get(e){if(!e)return;let i=this._fieldsMap.get(e);return i||(i=this._fieldsMap.get(I0(e))??this._normalizedFieldsMap.get(nle(e)),i&&this._fieldsMap.set(e,i),i)}getTimeZone(e){const i=this.get(e&&typeof e!="string"?e.name:e);return i?this._timeZoneByFieldName?this._timeZoneByFieldName.get(i.name):i.type==="date"||i.type==="esriFieldTypeDate"?($e.getLogger("esri.layers.support.FieldsIndex").errorOnce(new ee("getTimeZone:no-timezone-information",`no time zone information for field '${i.name}'`)),zp):Xxe.has(i.type)?xv:null:null}getLuxonTimeZone(e){const i=this.getTimeZone(e);return i?i===xv?Hh.instance:i===zp?_s.utcInstance:d_(vtt,i,()=>$l.create(i)):null}isDateField(e){return this._dateFieldsSet.has(this.get(e))}isTimeOnlyField(e){return R0e(this.get(e))}isNumericField(e){return this._numericFieldsSet.has(this.get(e))}normalizeFieldName(e){return this.get(e)?.name??void 0}toJSON(){return{fields:this.fields.map(e=>pI(e)?e.toJSON():e),timeZoneByFieldName:this._timeZoneByFieldName?Array.from(this._timeZoneByFieldName.entries()):null}}};function I0(t){return t.trim().toLowerCase()}function nle(t){return O8e(t)?.toLowerCase()??""}const Xxe=new Set(["time-only","date-only","timestamp-offset","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]);function sle(t){const e=new Map;if(!t.fields)return e;const i=t.datesInUnknownTimezone===!0,{timeInfo:r,editFieldsInfo:n}=t,s=(r?"startField"in r?r.startField:r.startTimeField:"")??"",a=(r?"endField"in r?r.endField:r.endTimeField:"")??"",o=ytt(t)?t.dateFieldsTimeZone??null:t.dateFieldsTimeReference?d3(t.dateFieldsTimeReference):null,l=n?mtt(n)?n.timeZone??o:n.dateFieldsTimeReference?d3(n.dateFieldsTimeReference):o??zp:null,c=r?gtt(r)?r.timeZone??o:r.timeReference?d3(r.timeReference):o:null,h=new Map([[I0(n?.creationDateField??""),l],[I0(n?.editDateField??""),l],[I0(s),c],[I0(a),c]]);for(const{name:f,type:g}of t.fields)if(Xxe.has(g))e.set(f,xv);else if(g!=="date"&&g!=="esriFieldTypeDate")e.set(f,null);else if(i)e.set(f,xv);else{const y=h.get(I0(f??""))??o;e.set(f,y)}return e}const Jxe={TypeNotAllowedInFeature:"Feature attributes only support dates, numbers, strings, guids.",LogicError:"Logic error - {reason}",CannotCompareDateAndTime:"Cannot compare date or dateonly with timeonly types",NeverReach:"Encountered unreachable logic",AsyncNotEnabled:"Async Arcade must be enabled for this script",ModuleAccessorMustBeString:"Module accessor must be a string",ModuleExportNotFound:"Module has no export with provided identifier",ModulesNotSupported:"Current profile does not support modules",ArrayAccessMustBeNumber:"Array accessor must be a number",FunctionNotFound:"Function not found",FieldNotFound:"Key not found - {key}",CircularModules:"Circular module dependencies are not allowed",Cancelled:"Execution cancelled",UnsupportedHashType:"Type not supported in hash function",IllegalResult:"Value is not a supported return type",PortalRequired:"Portal is required",InvalidParameter:"Invalid parameter",WrongNumberOfParameters:"Call with wrong number of parameters",Unrecognized:"Unrecognized code structure",UnrecognizedType:"Unrecognized type",WrongSpatialReference:"Cannot work with geometry in this spatial reference. It is different to the execution spatial reference",BooleanConditionRequired:"Conditions must use booleans",NoFunctionInDictionary:"Dictionaries cannot contain functions.",NoFunctionInArray:"Arrays cannot contain functions.",NoFunctionInTemplateLiteral:"Template Literals do not expect functions by value.",KeyAccessorMustBeString:"Accessor must be a string",KeyMustBeString:"Object keys must be a string",Immutable:"Object is immutable",UnexpectedToken:"Unexpected token",MemberOfNull:"Cannot access property of null object",MaximumCallDepth:"Exceeded maximum function depth",OutOfBounds:"Out of bounds",InvalidIdentifier:"Identifier not recognized",CallNonFunction:"Expression is not a function",InvalidMemberAccessKey:"Cannot access value using a key of this type",AssignModuleFunction:"Cannot assign function to module variable",UnsupportUnaryOperator:"Unsupported unary operator",UnsupportedOperator:"Unsupported operator",LogicalExpressionOnlyBoolean:"Logical expressions must be boolean",LogicExpressionOrAnd:"Logical expression can only be combined with || or &&",CannotChangeTimeZoneTime:"Cannot change the timezone of a Time",CannotChangeTimeZoneDateOnly:"Cannot change the timezone of a DateOnly",FeatureSetDoesNotHaveSubtypes:"FeatureSet does not have subtypes"};let btt=class extends Error{constructor(...e){super(...e)}},ale=class Kxe extends btt{constructor(e,i){super(zX(i)+e.message,{cause:e}),this.loc=null,Error.captureStackTrace&&Error.captureStackTrace(this,Kxe),i?.loc&&(this.loc=i.loc)}},wtt=class Qxe extends Error{constructor(e,i,r,n){super("Execution error - "+zX(r)+Dv(Jxe[i],n)),this.loc=null,this.declaredRootClass="esri.arcade.arcadeexecutionerror",Error.captureStackTrace&&Error.captureStackTrace(this,Qxe),r?.loc&&(this.loc=r.loc)}};function zX(t){return t&&t.loc?`Line : ${t.loc.start?.line}, ${t.loc.start?.column}: `:""}let sDt=class eSe extends Error{constructor(e,i,r,n){super("Compilation error - "+zX(r)+Dv(Jxe[i],n)),this.loc=null,this.declaredRootClass="esri.arcade.arcadecompilationerror",Error.captureStackTrace&&Error.captureStackTrace(this,eSe),r?.loc&&(this.loc=r.loc)}},aDt=class tSe extends Error{constructor(){super("Uncompilable code structures"),this.declaredRootClass="esri.arcade.arcadeuncompilableerror",Error.captureStackTrace&&Error.captureStackTrace(this,tSe)}};function oDt(t,e,i){return i.declaredRootClass==="esri.arcade.arcadeexecutionerror"||i.declaredRootClass==="esri.arcade.arcadecompilationerror"?i.loc===null&&e?.loc?new ale(i,{cause:i}):i:(i.declaredRootClass==="esri.arcade.featureset.support.featureseterror"||i.declaredRootClass==="esri.arcade.featureset.support.sqlerror"||i.declaredRootClass,e?.loc?new ale(i,{cause:i}):i)}const _tt={UnrecognizedUri:"Unrecognized uri - {uri}",UnsupportedUriProtocol:"Unrecognized uri protocol"};let lDt=class iSe extends Error{constructor(e,i){super(Dv(_tt[e],i)),this.declaredRootClass="esri.arcade.arcademoduleerror",Error.captureStackTrace&&Error.captureStackTrace(this,iSe)}};function TD(t){return t.toLowerCase().replaceAll(/[\s-]+/g,"")}let cDt=class{constructor(e,i){const r=new Map;for(const n of e){const s=TD(n);if(r.has(s))throw new Error(`${n} already added as ${r.get(s)}`);r.set(s,n)}if(i!=null)for(const[n,s]of i){const a=TD(n);if(r.has(a))throw new Error(`${n} already associated with ${r.get(a)}`);r.set(a,s)}this._enumMap=r}lookup(e){return this._enumMap.get(TD(e))}get(e){const i=this.lookup(e);if(i==null)throw new wtt(null,"InvalidParameter",null);return i}};const xtt={TimeZoneNotRecognized:"Timezone identifier has not been recognized."};let Stt=class rSe extends Error{constructor(e,i){super(Dv(xtt[e],i)),this.declaredRootClass="esri.arcade.arcadedate.dateerror",Error.captureStackTrace&&Error.captureStackTrace(this,rSe)}};function D1(t,e,i){return t<e?t-e:t>i?t-i:0}function R1(t,e,i){return t<e?e:t>i?i:t}let Om=class Xn{constructor(e){this._date=e,this.declaredRootClass="esri.arcade.arcadedate"}static fromParts(e=0,i=1,r=1,n=0,s=0,a=0,o=0,l){if(isNaN(e)||isNaN(i)||isNaN(r)||isNaN(n)||isNaN(s)||isNaN(a)||isNaN(o))return null;const c=mt.local(e,i).daysInMonth;let h=mt.fromObject({day:R1(r,1,c),year:e,month:R1(i,1,12),hour:R1(n,0,23),minute:R1(s,0,59),second:R1(a,0,59),millisecond:R1(o,0,999)},{zone:Fh(l)});return h=h.plus({months:D1(i,1,12),days:D1(r,1,c),hours:D1(n,0,23),minutes:D1(s,0,59),seconds:D1(a,0,59),milliseconds:D1(o,0,999)}),new Xn(h)}static get systemTimeZoneCanonicalName(){return Intl.DateTimeFormat().resolvedOptions().timeZone??"system"}static arcadeDateAndZoneToArcadeDate(e,i){const r=Fh(i);return e.isUnknownTimeZone||r===Hh.instance?Xn.fromParts(e.year,e.monthJS+1,e.day,e.hour,e.minute,e.second,e.millisecond,r):new Xn(e._date.setZone(r))}static dateJSToArcadeDate(e){return new Xn(mt.fromJSDate(e,{zone:"system"}))}static dateJSAndZoneToArcadeDate(e,i="system"){const r=Fh(i);return new Xn(mt.fromJSDate(e,{zone:r}))}static unknownEpochToArcadeDate(e){return new Xn(mt.fromMillis(e,{zone:Hh.instance}))}static unknownDateJSToArcadeDate(e){return new Xn(mt.fromMillis(e.getTime(),{zone:Hh.instance}))}static epochToArcadeDate(e,i="system"){const r=Fh(i);return new Xn(mt.fromMillis(e,{zone:r}))}static dateTimeToArcadeDate(e){return new Xn(e)}clone(){return new Xn(this._date)}changeTimeZone(e){const i=Fh(e);return Xn.dateTimeToArcadeDate(this._date.setZone(i))}static dateTimeAndZoneToArcadeDate(e,i){const r=Fh(i);return e.zone===Hh.instance||r===Hh.instance?Xn.fromParts(e.year,e.month,e.day,e.hour,e.minute,e.second,e.millisecond,r):new Xn(e.setZone(r))}static nowToArcadeDate(e){const i=Fh(e);return new Xn(mt.fromJSDate(new Date,{zone:i}))}static nowUTCToArcadeDate(){return new Xn(mt.utc())}get isSystem(){return this.timeZone==="system"||this.timeZone===Xn.systemTimeZoneCanonicalName}equals(e){return this.isSystem&&e.isSystem?this.toNumber()===e.toNumber():this.isUnknownTimeZone===e.isUnknownTimeZone&&this._date.equals(e._date)}get isUnknownTimeZone(){return this._date.zone===Hh.instance}get isValid(){return this._date.isValid}get hour(){return this._date.hour}get second(){return this._date.second}get day(){return this._date.day}get dayOfWeekISO(){return this._date.weekday}get dayOfWeekJS(){let e=this._date.weekday;return e>6&&(e=0),e}get millisecond(){return this._date.millisecond}get monthISO(){return this._date.month}get weekISO(){return this._date.weekNumber}get yearISO(){return this._date.weekYear}get monthJS(){return this._date.month-1}get year(){return this._date.year}get minute(){return this._date.minute}get zone(){return this._date.zone}get timeZoneOffset(){return this.isUnknownTimeZone?0:this._date.offset}get timeZone(){if(this.isUnknownTimeZone)return"unknown";if(this._date.zone.type==="system")return"system";const e=this.zone;return e.type==="fixed"?e.fixed===0?"UTC":e.formatOffset(0,"short"):e.name}stringify(){return JSON.stringify(this.toJSDate())}plus(e){return new Xn(this._date.plus(e))}diff(e,i){return this._date.diff(e._date,i)[i]}toISODate(){return this._date.toISODate()}toISOString(e){return e?this._date.toISO({suppressMilliseconds:!0,includeOffset:!this.isUnknownTimeZone}):this._date.toISO({includeOffset:!this.isUnknownTimeZone})}toISOTime(e,i){return this._date.toISOTime({suppressMilliseconds:e,includeOffset:i&&!this.isUnknownTimeZone})}toFormat(e,i){return this.isUnknownTimeZone&&(e=e.replaceAll("Z","")),this._date.toFormat(e,i)}toJSDate(){return this._date.toJSDate()}toSQLValue(){return this._date.toFormat("yyyy-LL-dd HH:mm:ss")}toSQLWithKeyword(){return`timestamp '${this.toSQLValue()}'`}toDateTime(){return this._date}toNumber(){return this._date.toMillis()}getTime(){return this._date.toMillis()}toUTC(){return new Xn(this._date.toUTC())}toLocal(){return new Xn(this._date.toLocal())}toString(){return this.toISOString(!0)}static fromReaderAsTimeStampOffset(e){if(!e)return null;const i=mt.fromISO(e,{setZone:!0});return new Xn(i)}};function Fh(t,e=!0){if(t instanceof p_)return t;switch(TD(t)){case"system":return"system";case"utc":return"UTC";case"unknown":return Hh.instance}if(/^[+-]?[0-9]{1,2}(:[0-9]{2})?$/.test(t)){const r=_s.parseSpecifier("UTC"+(t.startsWith("+")||t.startsWith("-")?"":"+")+t);if(r)return r}const i=$l.create(t);if(!i.isValid){if(e)throw new Stt("TimeZoneNotRecognized");return null}return i}function ole(t){t=t.replaceAll(/LTS|LT|L{1,4}|l{1,4}/g,"[$&]");let e="";const i=/(\[[^[]*\])|(\\)?([Hh]mm(ss)?|Mo|M{1,4}|Do|DDDo|D{1,4}|d{2,4}|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;for(const r of t.match(i)||[])switch(r){case"D":e+="d";break;case"DD":e+="dd";break;case"DDD":e+="o";break;case"d":e+="c";break;case"ddd":e+="ccc";break;case"dddd":e+="cccc";break;case"M":e+="L";break;case"MM":e+="LL";break;case"MMM":e+="LLL";break;case"MMMM":e+="LLLL";break;case"YY":e+="yy";break;case"Y":case"YYYY":e+="yyyy";break;case"Q":e+="q";break;case"X":case"x":e+=r;break;default:r.length>=2&&r.startsWith("[")&&r.endsWith("]")?e+=`'${r.slice(1,-1)}'`:e+=`'${r}'`}return e}const lle="esri.core.sql.dateonly";let $tt=class tc{constructor(e,i,r){this._year=e,this._month=i,this._day=r,this.declaredRootClass=lle}static isDateOnly(e){return typeof e=="object"&&e!=null&&"declaredRootClass"in e&&e.declaredRootClass===lle}get month(){return this._month}get monthJS(){return this._month-1}get year(){return this._year}get day(){return this._day}get isValid(){return this.toDateTime("unknown").isValid}equals(e){return tc.isDateOnly(e)&&e.day===this.day&&e.month===this.month&&e.year===this.year}clone(){return new tc(this._year,this._month,this._day)}toDateTime(e){return mt.fromObject({day:this.day,month:this.month,year:this.year},{zone:Fh(e)})}toDateTimeLuxon(e){return mt.fromObject({day:this.day,month:this.month,year:this.year},{zone:Fh(e)})}toString(){return`${this.year.toString().padStart(4,"0")}-${this.month.toString().padStart(2,"0")}-${this.day.toString().padStart(2,"0")}`}toFormat(e=null,i=!0){if(e===null||e==="")return this.toString();if(i&&(e=ole(e)),!e)return"";const r=this.toDateTime("unknown");return Om.dateTimeToArcadeDate(r).toFormat(e,{locale:xl(),numberingSystem:"latn"})}toArcadeDate(){const e=this.toDateTime("unknown");return Om.dateTimeToArcadeDate(e)}toNumber(){return this.toDateTime("unknown").toMillis()}toJSDate(){return this.toDateTime("unknown").toJSDate()}toStorageFormat(){return this.toFormat("yyyy-LL-dd",!1)}toSQLValue(){return this.toFormat("yyyy-LL-dd",!1)}toSQLWithKeyword(){return"date '"+this.toFormat("yyyy-LL-dd",!1)+"'"}plus(e,i){return tc.fromDateTime(this.toUTCDateTime().plus({[e]:i}))}toUTCDateTime(){return mt.utc(this.year,this.month,this.day,0,0,0,0)}difference(e,i){switch(i.toLowerCase()){case"days":case"day":case"d":return this.toUTCDateTime().diff(e.toUTCDateTime(),"days").days;case"months":case"month":return this.toUTCDateTime().diff(e.toUTCDateTime(),"months").months;case"minutes":case"minute":case"m":return i==="M"?this.toUTCDateTime().diff(e.toUTCDateTime(),"months").months:this.toUTCDateTime().diff(e.toUTCDateTime(),"minutes").minutes;case"seconds":case"second":case"s":return this.toUTCDateTime().diff(e.toUTCDateTime(),"seconds").seconds;case"milliseconds":case"millisecond":case"ms":default:return this.toUTCDateTime().diff(e.toUTCDateTime(),"milliseconds").milliseconds;case"hours":case"hour":case"h":return this.toUTCDateTime().diff(e.toUTCDateTime(),"hours").hours;case"years":case"year":case"y":return this.toUTCDateTime().diff(e.toUTCDateTime(),"years").years}}static fromMilliseconds(e){const i=mt.fromMillis(e,{zone:_s.utcInstance});return i.isValid?tc.fromParts(i.year,i.month,i.day):null}static fromSeconds(e){const i=mt.fromSeconds(e,{zone:_s.utcInstance});return i.isValid?tc.fromParts(i.year,i.month,i.day):null}static fromReader(e){if(!e)return null;const i=e.split("-");return i.length!==3?null:new tc(parseInt(i[0],10),parseInt(i[1],10),parseInt(i[2],10))}static fromParts(e,i,r){const n=new tc(e,i,r);return n.isValid===!1?null:n}static fromDateJS(e){return tc.fromParts(e.getFullYear(),e.getMonth()+1,e.getDay())}static fromDateTime(e){return tc.fromParts(e.year,e.month,e.day)}static fromSqlTimeStampOffset(e){return this.fromDateTime(e.toDateTime())}static fromString(e,i=null){if(e===""||e===null)return null;const r=[];if(i)(i=ole(i))&&r.push(i);else if(i===null||i===""){const n=mt.fromISO(e,{setZone:!0});return n.isValid?tc.fromParts(n.year,n.month,n.day):null}for(const n of r){const s=mt.fromFormat(e,i??n);if(s.isValid)return new tc(s.year,s.month,s.day)}return null}static fromNow(e="system"){const i=mt.fromJSDate(new Date).setZone(Fh(e));return new tc(i.year,i.month,i.day)}};function dDt(t){if(t==null)return null;switch(t.type){case"polygon":case"multipoint":case"polyline":return t.extent;case"point":return new Wt({xmin:t.x,ymin:t.y,xmax:t.x,ymax:t.y,spatialReference:t.spatialReference});case"extent":return t}return null}function hDt(t){if(t==null)return null;const e=t.clone();return t.cache._geVersion!==void 0&&(e.cache._geVersion=t.cache._geVersion),e}function YO(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t}function cle(t){if(!t)return"";const e=/(a|A|hh?|HH?|mm?|ss?|SSS|S|.)/g;let i="";for(const r of t.match(e)||[])switch(r){case"SSS":case"m":case"mm":case"h":case"hh":case"H":case"HH":case"s":case"ss":i+=r;break;case"A":case"a":i+="a";break;default:i+=`'${r}'`}return i}const ule="esri.core.sql.timeonly";let Ttt=class Ch{constructor(e,i,r,n){this._hour=e,this._minute=i,this._second=r,this._millisecond=n,this.declaredRootClass=ule}static isTimeOnly(e){return typeof e=="object"&&e!=null&&"declaredRootClass"in e&&e.declaredRootClass===ule}get hour(){return this._hour}get minute(){return this._minute}get second(){return this._second}get millisecond(){return this._millisecond}equals(e){return Ch.isTimeOnly(e)&&e.hour===this.hour&&e.minute===this.minute&&e.second===this.second&&e.millisecond===this.millisecond}clone(){return new Ch(this.hour,this.minute,this.second,this.millisecond)}isValid(){return YO(this.hour)&&YO(this.minute)&&YO(this.second)&&YO(this.millisecond)&&this.hour>=0&&this.hour<24&&this.minute>=0&&this.minute<60&&this.second>=0&&this.second<60&&this.millisecond>=0&&this.millisecond<1e3}toString(){return`${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,"0")}`+(this.millisecond>0?"."+this.millisecond.toString().padStart(3,"0"):"")}toSQLValue(){return this.toString()}toSQLWithKeyword(){return`time '${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,"0")}${this.millisecond>0?"."+this.millisecond.toString().padStart(3,"0"):""}'`}toStorageString(){return`${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,"0")}`}toFormat(e=null){return e===null||e===""?this.toString():(e=cle(e))?mt.local(1970,1,1,this._hour,this._minute,this._second,this._millisecond).toFormat(e,{locale:xl(),numberingSystem:"latn"}):""}toNumber(){return this.millisecond+1e3*this.second+1e3*this.minute*60+60*this.hour*60*1e3}static fromParts(e,i,r,n){const s=new Ch(e,i,r,n);return s.isValid()?s:null}static fromReader(e){if(!e)return null;const i=e.split(":");return i.length!==3?null:new Ch(parseInt(i[0],10),parseInt(i[1],10),parseInt(i[2],10),0)}static fromMilliseconds(e){if(e>864e5||e<0)return null;const i=Math.floor(e/1e3%60),r=Math.floor(e/6e4%60),n=Math.floor(e/36e5%24),s=Math.floor(e%1e3);return new Ch(n,r,i,s)}static fromDateJS(e){return new Ch(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}static fromDateTime(e){return new Ch(e.hour,e.minute,e.second,e.millisecond)}static fromSqlTimeStampOffset(e){return this.fromDateTime(e.toDateTime())}static fromString(e,i=null){if(e===""||e===null)return null;const r=[];i?(i=cle(i))&&r.push(i):i!==null&&i!==""||(r.push("HH:mm:ss"),r.push("HH:mm:ss.SSS"),r.push("hh:mm:ss a"),r.push("hh:mm:ss.SSS a"),r.push("HH:mm"),r.push("hh:mm a"),r.push("H:mm"),r.push("h:mm a"),r.push("H:mm:ss"),r.push("h:mm:ss a"),r.push("H:mm:ss.SSS"),r.push("h:mm:ss.SSS a"));for(const n of r){const s=mt.fromFormat(e,n);if(s.isValid)return new Ch(s.hour,s.minute,s.second,s.millisecond)}return null}plus(e,i){switch(e){case"days":case"years":case"months":return this.clone();case"hours":case"minutes":case"seconds":case"milliseconds":return Ch.fromDateTime(this.toUTCDateTime().plus({[e]:i}))}return null}toUTCDateTime(){return mt.utc(1970,1,1,this.hour,this.minute,this.second,this.millisecond)}difference(e,i){switch(i.toLowerCase()){case"days":case"day":case"d":return this.toUTCDateTime().diff(e.toUTCDateTime(),"days").days;case"months":case"month":return this.toUTCDateTime().diff(e.toUTCDateTime(),"months").months;case"minutes":case"minute":case"m":return i==="M"?this.toUTCDateTime().diff(e.toUTCDateTime(),"months").months:this.toUTCDateTime().diff(e.toUTCDateTime(),"minutes").minutes;case"seconds":case"second":case"s":return this.toUTCDateTime().diff(e.toUTCDateTime(),"seconds").seconds;case"milliseconds":case"millisecond":case"ms":default:return this.toUTCDateTime().diff(e.toUTCDateTime(),"milliseconds").milliseconds;case"hours":case"hour":case"h":return this.toUTCDateTime().diff(e.toUTCDateTime(),"hours").hours;case"years":case"year":case"y":return this.toUTCDateTime().diff(e.toUTCDateTime(),"years").years}}};const ktt=["geometry","scale","timeProperties"];function pDt(t,e){if(e!=null)for(const i of ktt)e.hasArcadeDependency(i)&&t.add(i);return t}function Ett(t,e){return nSe.create(t,e,null,["$feature","$view"])}function Ctt(t,e,i){return nSe.create(t,e,i,["$feature","$view","$config"])}let nSe=class sSe{static async create(e,i,r,n){const{arcade:s,Dictionary:a}=await Xm();let o;try{o=s.parseScript(e)}catch(y){throw new ee("arcade-bad-expression","Failed to parse arcade script",{script:e,error:y})}const l=s.scriptUsesGeometryEngine(o);l&&await s.enableGeometrySupport(),await s.loadDependentModules(new Set,o,null,!1,l);const c={vars:n.reduce((y,b)=>({...y,[b]:null}),{}),spatialReference:i,useAsync:!1},h=s.compileScript(o,c);let f=null;r!=null&&(f=new a(r),f.immutable=!0);const g=new a;return g.immutable=!1,g.setField("scale",0),new sSe(e,s,o,h,i,g,f,a)}constructor(e,i,r,n,s,a,o,l){this.script=e,this._arcade=i,this._syntaxTree=r,this._compiled=n,this._spatialReference=s,this._viewDict=a,this._configDict=o,this._dictionaryCtor=l,this._dependencies=new Map,this._featureReader=new aSe,this._dependencies.set("geometry",i.scriptTouchesGeometry(this._syntaxTree)),this._dependencies.set("scale",this._arcade.referencesMember(this._syntaxTree,"scale")),this._dependencies.set("timeProperties",this._arcade.scriptUsesViewProperties(this._syntaxTree,["timeProperties"]))}evaluate(e,i){const r=i.$view?.timeZone;if(i.$view){let n;if(this._viewDict.setField("scale",i.$view.scale),i.$view.timeProperties!=null){const{currentStart:s,currentEnd:a}=i.$view.timeProperties;n=new this._dictionaryCtor({currentStart:s!=null?r!=null?Om.epochToArcadeDate(s,r):Om.unknownEpochToArcadeDate(s):void 0,currentEnd:a!=null?r!=null?Om.epochToArcadeDate(a,r):Om.unknownEpochToArcadeDate(a):void 0,startIncluded:!0,endIncluded:!0})}this._viewDict.setField("timeProperties",n)}return this._compiled({vars:{$view:this._viewDict,$config:this._configDict,$feature:e},spatialReference:this._spatialReference,timeZone:r})}repurposeFeature(e,i){return this._featureReader.bind(e,i,this._spatialReference),this._featureReader}references(e){return this._dependencies.get(e)??!1}},aSe=class{constructor(){this._boundTarget=null,this._boundSchema={fields:null,fieldsIndex:null,spatialReference:null,get geometryType(){return null},get objectIdField(){return null}},this.arcadeDeclaredClass="esri.arcade.Feature",this._contextTimeZone=null}bind(e,i,r){const n=i??new UI(oSe(e.attributes));this._boundTarget=e,this._boundSchema.fields=n.fields,this._boundSchema.fieldsIndex=n,this._boundSchema.spatialReference=r}_getField(e){return this._boundSchema.fieldsIndex.get(e)}get contextTimeZone(){return this._contextTimeZone}set contextTimeZone(e){this._contextTimeZone=e}readArcadeFeature(){return this}hasField(e){return this._boundSchema.fieldsIndex.has(e)}geometry(){if("fromJSON"in this._boundTarget)return this._boundTarget.geometry;const e=Vp(this._boundTarget.geometry);if(e){if(!this._boundSchema.spatialReference)throw new Error("InternalError: Expected spatial reference to be defined");e.spatialReference=this._boundSchema.spatialReference}return e}_hasGeometry(){return this._boundTarget.geometry!=null}isUnknownDateTimeField(e){return this._boundSchema.fieldsIndex.getTimeZone(e)===xv}field(e,i=!0){const r=this._getField(e);if(r){const n=this._boundTarget.attributes[r.name];if(n==null)return null;switch(r.type){case"date-only":case"esriFieldTypeDateOnly":return $tt.fromReader(n);case"time-only":case"esriFieldTypeTimeOnly":return Ttt.fromReader(n);case"esriFieldTypeTimestampOffset":case"timestamp-offset":return Om.fromReaderAsTimeStampOffset(n);case"date":case"esriFieldTypeDate":return this.isUnknownDateTimeField(e)?Om.unknownEpochToArcadeDate(n):Om.epochToArcadeDate(n,this.contextTimeZone??_u);default:return n}}if(i)throw new Error(`Field ${e} does not exist`);return null}setField(e,i){throw new Error("Unable to update feature attribute values, feature is readonly")}keys(){return this._boundSchema.fieldsIndex.fields.map(e=>e.name)}isEmpty(){return this._boundSchema.fields.length<=0&&!this._hasGeometry()}castToText(e=!1){return JSON.stringify(this._boundTarget)}gdbVersion(){return null}fullSchema(){return this._boundSchema}castAsJson(e=null){return{attributes:this._boundTarget.attributes,geometry:e?.keepGeometryType===!0?this.geometry():this.geometry()?.toJSON()??null}}castAsJsonAsync(e=null,i=null){return Promise.resolve(this.castAsJson(i))}};function oSe(t){const e=[];for(const i in t)e.push({name:i,alias:i,type:typeof t[i]=="string"?"esriFieldTypeString":"esriFieldTypeDouble"});return e}let Itt=class lSe{static async from(e,i,r){const n=e.dictionary_version?E1e.parse(e.dictionary_version):null,s=new Set(e.itemsNames),a={};if(i)for(const f in i)a[f]=i[f];if(e.authoringInfo.configuration)for(const f of e.authoringInfo.configuration)a.hasOwnProperty(f.name)||(a[f.name]=f.value);const o=new Set(e.authoringInfo.symbol);for(const f of Object.keys(r))o.delete(f);o.size&&$e.getLogger("esri.renderers.support.DictionaryScriptEvaluator").warnOnce("missing-fields: fieldMap entries for the following symbol fields are missing",{symbolFields:o});const l=await Ctt(e.expression,null,a);if(!l)throw new ee("dictionary-renderer:expression-error","Unable to create dictionary renderer expression");const c=!n||!n.greaterEqual(4,0);c&&$e.getLogger("esri.renderers.support.DictionaryScriptEvaluator").warnOnce("Dictionary script does not support native field types. Applying fallback",{version:n});const h=new Mtt(r,c);return new lSe(c,s,l,h)}constructor(e,i,r,n){this._requiresFieldCoercionToString=e,this._itemNames=i,this._compiled=r,this._reader=n}get itemNames(){return this._itemNames}evaluate(e,i,r,n){try{return this._reader.bind(e,r,n),this._compiled.evaluate(this._reader,{$view:{scale:i}})}catch(s){$e.getLogger("esri.renderers.support.DictionaryScriptEvaluator").warnOnce("arcade: dictionary script evaluation failed",{error:s})}return null}createDictionaryFieldsIndex(e){if(!this._requiresFieldCoercionToString)return new UI(e);const i=e.map(r=>({...r,type:"esriFieldTypeString"}));return new UI(i)}},Mtt=class extends aSe{constructor(e,i){super(),this._fieldMap=e,this._requiresFieldCoercionToString=i}_getField(e){const i=this._fieldMap[e]??e;return this._boundSchema.fieldsIndex.get(i)}field(e){if(!this._requiresFieldCoercionToString)return super.field(e,!1);const i=this._getField(e);return i==null||this._boundTarget.attributes[i.name]==null?"":""+this._boundTarget.attributes[i.name]}};const dle={Relative:0,Absolute:1},Att={color:[128,128,128,1],outlinecolor:[0,0,0,1],backgroundcolor:[128,128,128,1],borderlinecolor:[0,0,0,1],tintcolor:[255,255,255,1]},Un={CIMVectorMarker:{scalesymbolsproportionally:!1,respectframe:!0,anchorpointunits:"Relative",offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMPictureMarker:{scalex:1,texturefilter:"Draft",anchorpointunits:"Relative",offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMTextSymbol:{angle:0,anglex:0,angley:0,halosize:1,height:10,horizontalalignment:"Left",kerning:!0,letterspacing:0,letterwidth:100,ligatures:!0,linegap:0,offsetx:0,offsety:0,strikethrough:!1,textcase:"Normal",textstring:"",underline:!1,verticalalignment:"Bottom",enable:!0,colorlocked:!1},CIMSolidStroke:{capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMPictureStroke:{texturefilter:"Draft",capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMGradientStroke:{capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1,gradientMethod:"AcrossLine",gradientSize:75,gradientSizeUnits:dle.Relative,gradientType:"Discrete",interval:5},CIMSolidFill:{enable:!0,colorlocked:!1},CIMPictureFill:{offsetx:0,offsety:0,rotation:0,scalex:1,height:10,texturefilter:"Draft",enable:!0,colorlocked:!1},CIMHatchFill:{offsetx:0,offsety:0,rotation:0,separation:4,enable:!0,colorlocked:!1},CIMGradientFill:{enable:!0,angle:90,gradientMethod:"Linear",gradientSize:75,gradientSizeUnits:dle.Relative,gradientType:"Discrete",interval:5},CIMGeometricEffectAddControlPoints:{angletolerance:120},CIMGeometricEffectArrow:{arrowtype:"OpenEnded",width:5},CIMGeometricEffectBuffer:{size:1},CIMGeometricEffectCut:{begincut:1,endcut:1,middlecut:0,invert:!1},CIMGeometricEffectDashes:{customendingoffset:0,linedashending:"NoConstraint",offsetalongline:0},CIMGeometricEffectDonut:{method:"Mitered",option:"Accurate",width:2},CIMGeometricEffectJog:{angle:225,length:20,position:50},CIMGeometricEffectControlMeasureLine:{rule:"FullGeometry"},CIMGeometricEffectMove:{offsetx:1,offsety:-1},CIMGeometricEffectOffset:{method:"Square",offset:1,option:"Fast"},CIMGeometricEffectRadial:{angle:0,length:5},CIMGeometricEffectRotate:{angle:15},CIMGeometricEffectScale:{xscalefactor:1.15,yscalefactor:1.15},CIMGeometricEffectWave:{amplitude:2,period:3,seed:1,waveform:"Sinus"},CIMMarkerPlacementAlongLine:{customendingoffset:0,endings:"WithHalfGap",offsetalongline:0,placeperpart:!0,angletoline:!0,offset:0},CIMMarkerPlacementAtExtremities:{extremityplacement:"Both",offsetalongline:0,angletoline:!0,offset:0},CIMMarkerPlacementAtRatioPositions:{beginposition:0,endposition:0,flipfirst:!0,angletoline:!0,offset:0},CIMMarkerPlacementInsidePolygon:{gridangle:0,gridtype:"Fixed",offsetx:0,offsety:0,randomness:100,seed:0,shiftoddrows:!1,stepx:16,stepy:16,clipping:"ClipAtBoundary"},CIMMarkerPlacementOnLine:{relativeto:"LineMiddle",startpointoffset:0,angletoline:!0,offset:0},CIMMarkerPlacementOnVertices:{placeperpart:!0,placeoncontrolpoints:!0,placeonendpoints:!0,placeonregularvertices:!0,angletoline:!0,offset:0},CIMMarkerPlacementPolygonCenter:{method:"OnPolygon",offsetx:0,offsety:0,clipatboundary:!1},CIMAnimatedSymbolProperties:{playanimation:!1,reverseanimation:!1,randomizestarttime:!1,randomizestartseed:0,starttimeoffset:0,duration:3,endingduration:3,useendingduration:!1,repeattype:"Loop",repeatdelay:0,easing:"Linear"},CIMSymbolAnimationSize:{tosize:10},CIMSymbolAnimationScale:{scalefactor:1},CIMSymbolAnimationColor:{tocolor:[255,255,255,1]},CIMSymbolAnimationTransparency:{totransparency:0},CIMSymbolAnimationRotation:{torotation:0,rotateclockwise:!1},CIMSymbolAnimationOffset:{offsetx:0,offsety:0},CIMSymbolAnimationMoveAlongLine:{speed:30,distanceAlong:100}};function Ptt(t){return typeof t=="function"}function gDt(t,e,i,r){return Ptt(t)?t(e,i,r):t}function yDt(t){return[t.r,t.g,t.b,t.a]}const Ott=` /-,
`;function hle(t){let e=t.length;for(;e--;)if(!Ott.includes(t.charAt(e)))return!1;return!0}function Ltt(t,e){const i=[];let r=0,n=-1;do if(n=t.indexOf("[",r),n>=r){if(n>r){const s=t.slice(r,n);i.push([s,null,hle(s)])}if(r=n+1,n=t.indexOf("]",r),n>=r){if(n>r){const s=e[t.slice(r,n)];s&&i.push([null,s,!1])}r=n+1}}while(n!==-1);if(r<t.length){const s=t.slice(r);i.push([s,null,hle(s)])}return i}function vDt(t,e,i){let r="",n=null;for(const s of e){const[a,o,l]=s;if(a!=null&&a!=="")l?n=a:(n!=null&&(r+=n,n=null),r+=a);else{const c=t.readAttribute(o);c!=null&&c!==""&&(n!==null&&(r+=n,n=null),r+=c)}}return cSe(r,i)}function Dtt(t,e,i,r){let n="",s=null;for(const a of e){const[o,l,c]=a;if(o!=null&&o!=="")c?s=o:(s!=null&&(n+=s,s=null),n+=o);else{let h=l;i!=null&&(h=Ytt(l,i));const f=t.attributes[h];f!=null&&f!==""&&(s!=null&&(n+=s,s=null),n+=f)}}return cSe(n,r)}function cSe(t,e){switch(typeof t!="string"&&(t=String(t)),e){case"LowerCase":return t.toLowerCase();case"Allcaps":return t.toUpperCase();default:return t}}function bDt(t,e,i,r,n,s,a=!0){const o=e/n,l=i/s,c=Math.ceil(o/2),h=Math.ceil(l/2);for(let f=0;f<s;f++)for(let g=0;g<n;g++){const y=4*(g+(a?s-f-1:f)*n);let b=0,_=0,S=0,$=0,C=0,I=0,P=0;const O=(f+.5)*l;for(let N=Math.floor(f*l);N<(f+1)*l;N++){const R=Math.abs(O-(N+.5))/h,G=(g+.5)*o,Y=R*R;for(let Q=Math.floor(g*o);Q<(g+1)*o;Q++){let ae=Math.abs(G-(Q+.5))/c;const ce=Math.sqrt(Y+ae*ae);ce>=-1&&ce<=1&&(b=2*ce*ce*ce-3*ce*ce+1,b>0&&(ae=4*(Q+N*e),P+=b*t[ae+3],S+=b,t[ae+3]<255&&(b=b*t[ae+3]/250),$+=b*t[ae],C+=b*t[ae+1],I+=b*t[ae+2],_+=b))}}r[y]=$/_,r[y+1]=C/_,r[y+2]=I/_,r[y+3]=P/S}}function uSe(t){return t?[t[0],t[1],t[2],t[3]/255]:[0,0,0,0]}function FX(t){return t.data?.symbol??null}function NX(t){return t.type==="CIMVectorMarker"||t.type==="CIMPictureMarker"||t.type==="CIMBarChartMarker"||t.type==="CIMCharacterMarker"||t.type==="CIMPieChartMarker"||t.type==="CIMStackedBarChartMarker"}function dSe(t){return t.type==="CIMGradientStroke"||t.type==="CIMPictureStroke"||t.type==="CIMSolidStroke"}function Rtt(t){return t!=null&&(t.type==="CIMGradientFill"||t.type==="CIMHatchFill"||t.type==="CIMPictureFill"||t.type==="CIMSolidFill"||t.type==="CIMWaterFill")}function GN(t){return t!=null&&(t.type==="CIMMarkerPlacementAlongLineRandomSize"||t.type==="CIMMarkerPlacementAlongLineSameSize"||t.type==="CIMMarkerPlacementAlongLineVariableSize"||t.type==="CIMMarkerPlacementAtExtremities"||t.type==="CIMMarkerPlacementAtMeasuredUnits"||t.type==="CIMMarkerPlacementAtRatioPositions"||t.type==="CIMMarkerPlacementOnLine"||t.type==="CIMMarkerPlacementOnVertices")}const Ht=(t,e=0)=>t==null||isNaN(t)?e:t,wDt=(t,e)=>t??e,_Dt=(t,e)=>t??e,xDt=t=>t.tintColor?uSe(t.tintColor):[255,255,255,1];let ztt=class{constructor(e){this._import=e}getImportPromise(){return this._promise==null&&(this._promise=this._import().then(e=>this.module=e)),this._promise}};function T_(t){return new ztt(t)}function Ftt(t){if(!t)return"normal";switch(t.toLowerCase()){case"italic":return"italic";case"oblique":return"oblique";default:return"normal"}}function Ntt(t){if(!t)return"normal";switch(t.toLowerCase()){case"bold":return"bold";case"bolder":return"bolder";case"lighter":return"lighter";default:return"normal"}}function hSe(t){let e="normal",i="normal";if(t){const r=t.toLowerCase();r.includes("italic")?e="italic":r.includes("oblique")&&(e="oblique"),r.includes("bold")?i="bold":r.includes("light")&&(i="lighter")}return{style:e,weight:i}}function pSe(t){return t.underline?"underline":t.strikethrough?"line-through":"none"}function BC(t){if(!t)return null;switch(t.type){case"CIMPolygonSymbol":if(t.symbolLayers)for(const e of t.symbolLayers){const i=BC(e);if(i!=null)return i}break;case"CIMTextSymbol":return BC(t.symbol);case"CIMSolidFill":return t.color}return null}function $z(t){if(t)switch(t.type){case"CIMPolygonSymbol":case"CIMLineSymbol":{const e=t.symbolLayers;if(e)for(const i of e){const r=$z(i);if(r!=null)return r}break}case"CIMTextSymbol":return $z(t.symbol);case"CIMSolidStroke":return t.color}}function $Dt(t){for(const e of t)if(e.enable)switch(e.type){case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return!0}return!1}function Tz(t){if(t)switch(t.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(t.symbolLayers)for(const e of t.symbolLayers){const i=Tz(e);if(i!==void 0)return i}break;case"CIMTextSymbol":return Tz(t.symbol);case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return t.width}}function jtt(t){switch(t){case"Left":default:return"left";case"Right":return"right";case"Center":case"Justify":return"center"}}function Vtt(t){switch(t){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function Btt(t){return(t?Object.keys(t):[]).map(e=>({name:e,alias:e,type:typeof t[e]=="string"?"esriFieldTypeString":"esriFieldTypeDouble"}))}const z1=t=>t.includes("data:image/svg+xml");function kz(t){if(!t)return null;switch(t.type){case"CIMPointSymbol":case"CIMTextSymbol":return"esriGeometryPoint";case"CIMLineSymbol":return"esriGeometryPolyline";case"CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}}function pA(t){return t&&t.charAt(0).toLowerCase()+t.slice(1)}function TDt(t,e,i,r,n,s,a=!0){const{infos:o}=s;let l=1,c=0,h=0,f=0,g=1;for(const{absoluteAnchorPoint:_,offsetX:S,offsetY:$,rotation:C,size:I,frameHeight:P,rotateClockWise:O,scaleSymbolsProportionally:N}of o)g=_?1:l,h=mle(S,$,c,g,h),f=fle(S,$,c,g,f),P&&(N||a)&&(l*=I/P),c=gle(C,O,c);const y=mle(r,n,c,g,h),b=fle(r,n,c,g,f);return{size:t*l,rotation:gle(e,i,c),offsetX:y,offsetY:b}}function Utt(t){if(t==null)return!1;if(Array.isArray(t))return t.every(e=>Utt(e));switch(typeof t){case"string":return!!t;case"number":return!isNaN(t)}}function Htt(t,e){if(e==="color"||e==="outlinecolor"||e==="backgroundcolor"||e==="borderlinecolor"||e==="tintcolor")return[...Att[e]];const i=Un[t];if(!i)throw new Error(`InternalError: default value for type ${t}.`);return i[e]}function Gtt(t){return t.split(" ").map(e=>Number(e))}function qtt(t){return typeof t=="string"?Gtt(t):t}function fSe(t){return t?.dashTemplate&&(t.dashTemplate=qtt(t.dashTemplate)),t}function QG(t){if(t==null)return"Normal";switch(t.type){case"CIMTextSymbol":return t.textCase??"Normal";case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":{const e=t.symbolLayers;if(!e)return"Normal";for(const i of e)if(i.type==="CIMVectorMarker")return QG(i)}break;case"CIMVectorMarker":{const e=t.markerGraphics;if(!e)return"Normal";for(const i of e)if(i.symbol)return QG(i.symbol)}}return"Normal"}function Wtt(t){if(t)switch(t.type){case"CIMTextSymbol":return t.height;case"CIMPointSymbol":{let e=0;if(t.symbolLayers){for(const i of t.symbolLayers)if(i)switch(i.type){case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":{const r=i.size??Un.CIMVectorMarker.size;r>e&&(e=r);break}}}return e}case"CIMLineSymbol":case"CIMPolygonSymbol":{let e=0;if(t.symbolLayers){for(const i of t.symbolLayers)if(i)switch(i.type){case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":{const r=i.width;r!=null&&r>e&&(e=r);break}case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":if(i.markerPlacement&&GN(i.markerPlacement)){const r=i.size??Un.CIMVectorMarker.size;r>e&&(e=r)}break;case"CIMPictureFill":{const r=i.height;r!=null&&r>e&&(e=r)}}}return e}}}function Ytt(t,e){if(e!==null){const i=e.get(t);return i?i.name:t}return t}function Ztt(t){return t.map(e=>({...e,propertyName:pA(e.propertyName)}))}function ple(t){const e={};for(const i in t){const r=t[i];e[pA(i)]=r}return e}function fle(t,e,i,r,n){const s=i*Math.PI/180;if(s){const a=Math.cos(s);return(Math.sin(s)*t+a*e)*r+n}return e*r+n}function mle(t,e,i,r,n){const s=i*Math.PI/180;return s?(Math.cos(s)*t-Math.sin(s)*e)*r+n:t*r+n}function gle(t,e,i){return e?i-t:i+t}function kDt(t,e,i){const r=i==="Color"||i==="TintColor"||i==="ToColor",n=i==="Rotation"||i==="Angle"||i==="ToRotation";let s=e[pA(i)];if(s!=null&&(r?s=[s[0]/255,s[1]/255,s[2]/255,s[3]/255]:n&&(s*=Math.PI/180)),s==null&&(s=Htt(e.type,i.toLowerCase()),s!=null&&(r?s=[s[0]/255,s[1]/255,s[2]/255,s[3]]:n&&(s*=Math.PI/180))),e.primitiveName!=null){const a=t[e.primitiveName];if(a!=null){const o=a[i];o==null||(typeof o=="string"||typeof o=="number"||Array.isArray(o)?(s=o,s!=null&&(r?s=[s[0]/255,s[1]/255,s[2]/255,s[3]/255]:n&&(s*=Math.PI/180))):(s={valueExpressionInfo:o,defaultValue:s},s!=null&&(r?s={type:"Process",op:"ArcadeColor",value:s}:n&&(s={type:"Process",op:"Divide",left:s,right:180/Math.PI}))))}}if(s==null)throw new Error(`Failed to derive a value or an expression for "${i}".`);return s}function EDt(t,e,i){if(e[pA(i)]!=null)return!0;if(e.primitiveName!=null){const r=t[e.primitiveName];if(r!=null&&r[i]!=null)return!0}return!1}function k2(t,e){return Math.max(Math.min((t??e)/100,1),0)}const Xtt={type:"CIMSimpleLineCallout",lineSymbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:.5,color:[0,0,0,255]}]}};let mSe=class{constructor(e,i,r,n){this.url=e,this.fieldMap=r,this.dictionaryInfo=n,this._symbolPartCache=new Yxe(100);const s=async()=>Itt.from(await n,i,r);this._evaluator=s()}async getSymbolAsync(e,i,r=!0){const n=await this._evaluator,s=i?.fields??oSe(e.attributes),a=n.createDictionaryFieldsIndex(s),o=n.evaluate(e,i?.scale??0,a,i?.spatialReference);if(o==null)return null;const l=VT(e.geometry),c=rle.parse(o,n.itemNames,l),h=l==="esriGeometryPoint"&&!e.geometry?.hasZ;return await this._cimPartsToCIMSymbol(e,c.partNames,c.overrides,h,i,r,a)}async getSymbolForControlString(e,i,r){const n=await this._evaluator,s=rle.parse(e,n.itemNames,i),a=i==="esriGeometryPoint"&&!r,o=yle(await Promise.all(s.partNames.map(l=>this._getSymbolPart(l))),s.overrides,a);return new no({data:o})}async _cimPartsToCIMSymbol(e,i,r,n,s,a,o){const l=i.map(f=>this._getSymbolPart(f,s));let c=await Promise.all(l);if(a&&this.fieldMap&&c.length>0){const{OverrideHelper:f}=await fe(()=>Promise.resolve().then(()=>Zht),void 0);c=de(c);for(const g of c)f.applyDictionaryTextOverrides(g,e,this.fieldMap,o,QG(g))}const h=yle(c,r,n);return new no({data:h})}async _fetchSymbolPart(e,i){const r=await this.dictionaryInfo,n=(this.url+"/"+r.cimRefTemplateUrl).replaceAll(/\{itemName\}/gi,e),{data:s}=await Nt(n,{responseType:"json",query:{f:"json"},...i});return s}async _getSymbolPart(e,i){let r=this._symbolPartCache.get(e);return r||(r=this._fetchSymbolPart(e,i),this._symbolPartCache.put(e,r)),r}};function yle(t,e,i){if(!t||t.length===0)return null;const r={...t[0]};if(t.length>1){r.effects=null,r.symbolLayers=[];for(const n of t){const s=n;if(s.effects!=null)for(const a of s.symbolLayers)a.effects==null?a.effects=s.effects:a.effects.unshift(...s.effects);r.symbolLayers.unshift(...s.symbolLayers)}}return i&&(r.callout=Xtt),{type:"CIMSymbolReference",symbol:r,primitiveOverrides:e}}var eq;let cd=eq=class extends YT(wc){constructor(t){super(t),this.config=null,this.fieldMap=null,this.scaleExpression=null,this.scaleExpressionTitle=null,this.url=null,this.type="dictionary"}get _loader(){const t=this.getDictionaryInfo();return new mSe(this.url,this.config,this.fieldMap??{},t)}writeData(t,e){t&&(e.scalingExpressionInfo={expression:t,returnType:"number"})}writeVisualVariables(t,e,i,r){r?.origin||super.writeVisualVariables(t,e,i,r)}clone(){return new eq({config:de(this.config),scaleExpression:this.scaleExpression,scaleExpressionTitle:this.scaleExpressionTitle,fieldMap:de(this.fieldMap),url:de(this.url),visualVariables:de(this.visualVariables)})}async getSymbolAsync(t,e,i=!0){return this._loader.getSymbolAsync(t,e,i)}async getSymbolForControlString(t,e,i){return this._loader.getSymbolForControlString(t,e,i)}getDictionaryInfo(){return this._dictionaryInfoPromise||(this._dictionaryInfoPromise=this._fetchDictionaryInfo()),this._dictionaryInfoPromise}async collectRequiredFields(t,e){await this.collectVVRequiredFields(t,e),this.scaleExpression&&await La(t,e,null,this.scaleExpression);for(const i in this.fieldMap){const r=this.fieldMap[i];e.has(r)&&t.add(r)}}get arcadeRequired(){return!0}getSymbol(){return null}get symbols(){return[]}getAttributeHash(){return this.visualVariables?.reduce((t,e)=>t+e.getAttributeHash(),"")??""}getMeshHash(){return`${this.url}-${JSON.stringify(this.fieldMap)}`}async _fetchDictionaryInfo(){const{data:t}=await Nt(this.url+"/resources/styles/dictionary-info.json",{responseType:"json",query:{f:"json"}});return t}};d([m({type:mSe})],cd.prototype,"_loader",null),d([m({type:Object,json:{read:{source:"configuration"},write:{target:"configuration"}}})],cd.prototype,"config",void 0),d([m({type:Object,json:{write:!0}})],cd.prototype,"fieldMap",void 0),d([m({type:String,json:{read:{source:"scalingExpressionInfo.expression"},write:!0}})],cd.prototype,"scaleExpression",void 0),d([qe("scaleExpression")],cd.prototype,"writeData",null),d([m({type:String,json:{read:{source:"scalingExpressionInfo.title"},write:{target:"scalingExpressionInfo.title",overridePolicy(t){return{enabled:!!t&&!!this.scaleExpression}}}}})],cd.prototype,"scaleExpressionTitle",void 0),d([m({type:String,json:{write:!0}})],cd.prototype,"url",void 0),d([qe("visualVariables")],cd.prototype,"writeVisualVariables",null),cd=eq=d([U("esri.renderers.DictionaryRenderer")],cd);var tq;let tm=tq=class extends _e{constructor(t){super(t),this.color=null,this.field=null,this.label=null,this.valueExpression=null,this.valueExpressionTitle=null}castField(t){return t==null?t:typeof t=="function"?($e.getLogger(this).error(".field: field must be a string value"),null):DM(t)}getAttributeHash(){return`${this.field}-${this.valueExpression}`}clone(){return new tq({color:this.color?.clone(),field:this.field,label:this.label,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};d([m({type:Ye,json:{type:[Number],write:!0}})],tm.prototype,"color",void 0),d([m({type:String,json:{write:!0}})],tm.prototype,"field",void 0),d([Ii("field")],tm.prototype,"castField",null),d([m({type:String,json:{write:!0}})],tm.prototype,"label",void 0),d([m({type:String,json:{write:!0}})],tm.prototype,"valueExpression",void 0),d([m({type:String,json:{write:!0}})],tm.prototype,"valueExpressionTitle",void 0),tm=tq=d([U("esri.renderers.support.AttributeColorInfo")],tm);const gSe=tm;var iq;let kD=iq=class extends _e{constructor(){super(...arguments),this.unit=null}clone(){return new iq({unit:this.unit})}};d([m({type:String,json:{write:!0}})],kD.prototype,"unit",void 0),kD=iq=d([U("esri.renderers.support.DotDensityLegendOptions")],kD);const Jtt=kD;var rq;let tl=rq=class extends YT(wc){constructor(t){super(t),this.attributes=null,this.backgroundColor=new Ye([0,0,0,0]),this.dotBlendingEnabled=!0,this.dotShape="square",this.dotSize=1,this.legendOptions=null,this.outline=new en,this.dotValue=null,this.referenceScale=null,this.seed=1,this.type="dot-density"}set visualVariables(t){super.visualVariables=t}calculateDotValue(t){if(this.referenceScale==null)return this.dotValue;const e=t/this.referenceScale*this.dotValue;return e<1?1:e}getSymbol(){return new Zi({outline:this.outline})}async getSymbolAsync(){return this.getSymbol()}get symbols(){return[this.getSymbol()]}getAttributeHash(){return this.attributes?.reduce((t,e)=>t+e.getAttributeHash(),"")??""}getMeshHash(){return JSON.stringify(this.outline)}clone(){return new rq({attributes:de(this.attributes),backgroundColor:de(this.backgroundColor),dotBlendingEnabled:de(this.dotBlendingEnabled),dotShape:de(this.dotShape),dotSize:de(this.dotSize),dotValue:de(this.dotValue),legendOptions:de(this.legendOptions),outline:de(this.outline),referenceScale:de(this.referenceScale),seed:de(this.seed),visualVariables:de(this.visualVariables),authoringInfo:de(this.authoringInfo)})}getControllerHash(){return`${this.attributes?.map(e=>e.field||e.valueExpression||"")}-${this.outline&&JSON.stringify(this.outline.toJSON())||""}`}async collectRequiredFields(t,e){await this.collectVVRequiredFields(t,e);for(const i of this.attributes??[])i.valueExpression&&await La(t,e,null,i.valueExpression),i.field&&t.add(i.field)}};d([m({type:[gSe],json:{write:!0}})],tl.prototype,"attributes",void 0),d([m({type:Ye,json:{write:!0}})],tl.prototype,"backgroundColor",void 0),d([m({type:Boolean,json:{write:!0}})],tl.prototype,"dotBlendingEnabled",void 0),d([m({type:String,json:{write:!1}})],tl.prototype,"dotShape",void 0),d([m({type:Number,json:{write:!0}})],tl.prototype,"dotSize",void 0),d([m({type:Jtt,json:{write:!0}})],tl.prototype,"legendOptions",void 0),d([m({type:en,json:{default:null,write:!0}})],tl.prototype,"outline",void 0),d([m({type:Number,json:{write:!0}})],tl.prototype,"dotValue",void 0),d([m({type:Number,json:{write:!0}})],tl.prototype,"referenceScale",void 0),d([m({type:Number,json:{write:!0}})],tl.prototype,"seed",void 0),d([pt({dotDensity:"dot-density"})],tl.prototype,"type",void 0),tl=rq=d([U("esri.renderers.DotDensityRenderer")],tl);var nq;let Lm=nq=class extends _e{constructor(t){super(t),this.color=null,this.ratio=null}clone(){return new nq({color:this.color&&this.color.clone(),ratio:this.ratio})}};d([m({type:Ye,json:{type:[li],default:null,write:{isRequired:!0}}})],Lm.prototype,"color",void 0),d([m({type:Number,json:{write:{isRequired:!0}}})],Lm.prototype,"ratio",void 0),Lm=nq=d([U("esri.renderers.support.HeatmapColorStop")],Lm);let Kx=class extends $t(_e){constructor(){super(...arguments),this.minLabel=null,this.maxLabel=null,this.title=null}};d([m({type:String,json:{write:!0}})],Kx.prototype,"minLabel",void 0),d([m({type:String,json:{write:!0}})],Kx.prototype,"maxLabel",void 0),d([m({type:String,json:{write:!0}})],Kx.prototype,"title",void 0),Kx=d([U("esri.renderers.support.HeatmapLegendOptions")],Kx);function Ktt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function Qtt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function eit(t,e,i,r,n){return t[0]=e,t[1]=i,t[2]=r,t[3]=n,t}function tit(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t}function ySe(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t}function vSe(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t[3]=e[3]*i[3],t}function bSe(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t[2]=e[2]/i[2],t[3]=e[3]/i[3],t}function iit(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function rit(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function nit(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t[2]=Math.min(e[2],i[2]),t[3]=Math.min(e[3],i[3]),t}function sit(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t[2]=Math.max(e[2],i[2]),t[3]=Math.max(e[3],i[3]),t}function ait(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function oit(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t}function lit(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t[3]=e[3]+i[3]*r,t}function wSe(t,e){const i=e[0]-t[0],r=e[1]-t[1],n=e[2]-t[2],s=e[3]-t[3];return Math.sqrt(i*i+r*r+n*n+s*s)}function _Se(t,e){const i=e[0]-t[0],r=e[1]-t[1],n=e[2]-t[2],s=e[3]-t[3];return i*i+r*r+n*n+s*s}function xSe(t){const e=t[0],i=t[1],r=t[2],n=t[3];return Math.sqrt(e*e+i*i+r*r+n*n)}function SSe(t){const e=t[0],i=t[1],r=t[2],n=t[3];return e*e+i*i+r*r+n*n}function cit(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function uit(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function dit(t,e){const i=e[0],r=e[1],n=e[2],s=e[3];let a=i*i+r*r+n*n+s*s;return a>0&&(a=1/Math.sqrt(a),t[0]=i*a,t[1]=r*a,t[2]=n*a,t[3]=s*a),t}function hit(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function $Se(t,e,i,r){const n=e[0],s=e[1],a=e[2],o=e[3];return t[0]=n+r*(i[0]-n),t[1]=s+r*(i[1]-s),t[2]=a+r*(i[2]-a),t[3]=o+r*(i[3]-o),t}function pit(t,e=1){const i=aN;let r,n,s,a,o,l;do r=2*i()-1,n=2*i()-1,o=r*r+n*n;while(o>=1);do s=2*i()-1,a=2*i()-1,l=s*s+a*a;while(l>=1);const c=Math.sqrt((1-o)/l);return t[0]=e*r,t[1]=e*n,t[2]=e*s*c,t[3]=e*a*c,t}function fit(t,e,i){const r=e[0],n=e[1],s=e[2],a=e[3];return t[0]=i[0]*r+i[4]*n+i[8]*s+i[12]*a,t[1]=i[1]*r+i[5]*n+i[9]*s+i[13]*a,t[2]=i[2]*r+i[6]*n+i[10]*s+i[14]*a,t[3]=i[3]*r+i[7]*n+i[11]*s+i[15]*a,t}function mit(t,e,i){const r=e[0],n=e[1],s=e[2],a=i[0],o=i[1],l=i[2],c=i[3],h=c*r+o*s-l*n,f=c*n+l*r-a*s,g=c*s+a*n-o*r,y=-a*r-o*n-l*s;return t[0]=h*c+y*-a+f*-l-g*-o,t[1]=f*c+y*-o+g*-a-h*-l,t[2]=g*c+y*-l+h*-o-f*-a,t[3]=e[3],t}function git(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function yit(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function vit(t,e){const i=t[0],r=t[1],n=t[2],s=t[3],a=e[0],o=e[1],l=e[2],c=e[3],h=Vo();return Math.abs(i-a)<=h*Math.max(1,Math.abs(i),Math.abs(a))&&Math.abs(r-o)<=h*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(n-l)<=h*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(s-c)<=h*Math.max(1,Math.abs(s),Math.abs(c))}const bit=ySe,wit=vSe,_it=bSe,xit=wSe,Sit=_Se,$it=xSe,Tit=SSe;Object.freeze(Object.defineProperty({__proto__:null,add:tit,ceil:iit,copy:Ktt,copyVec3:Qtt,dist:xit,distance:wSe,div:_it,divide:bSe,dot:hit,equals:vit,exactEquals:yit,floor:rit,inverse:uit,len:$it,length:xSe,lerp:$Se,max:sit,min:nit,mul:wit,multiply:vSe,negate:cit,normalize:dit,random:pit,round:ait,scale:oit,scaleAndAdd:lit,set:eit,sqrDist:Sit,sqrLen:Tit,squaredDistance:_Se,squaredLength:SSe,str:git,sub:bit,subtract:ySe,transformMat4:fit,transformQuat:mit},Symbol.toStringTag,{value:"Module"}));function qN(){return[0,0,0,0]}function kit(t){return[t[0],t[1],t[2],t[3]]}function k_(t,e,i,r){return[t,e,i,r]}function Eit(t,e,i,r){return[t,e,i,r]}function Cit(t,e=qN()){const i=Math.min(4,t.length);for(let r=0;r<i;++r)e[r]=t[r];return e}function TSe(){return qN()}function kSe(){return k_(1,1,1,1)}function ESe(){return k_(1,0,0,0)}function CSe(){return k_(0,1,0,0)}function ISe(){return k_(0,0,1,0)}function MSe(){return k_(0,0,0,1)}const Iit=TSe(),Mit=kSe(),Ait=ESe(),Pit=CSe(),Oit=ISe(),Lit=MSe();Object.freeze(Object.defineProperty({__proto__:null,ONES:Mit,UNIT_W:Lit,UNIT_X:Ait,UNIT_Y:Pit,UNIT_Z:Oit,ZEROS:Iit,clone:kit,create:qN,freeze:Eit,fromArray:Cit,fromValues:k_,ones:kSe,unitW:MSe,unitX:ESe,unitY:CSe,unitZ:ISe,zeros:TSe},Symbol.toStringTag,{value:"Module"}));const jX=2.4;function Dit(t){return Xi(t*jX)}function Rit(t){return Fi(t)/jX}function zit(t,e,i,r){let{color:n,ratio:s}=e,{color:a,ratio:o}=i;o===s&&(o===1?s-=1e-6:o+=1e-6);const l=go((r-s)/(o-s),0,1);$Se(t,n.toArray(),a.toArray(),l)}function MDt(t){const i=new Uint8ClampedArray(2048);if(t=t.filter(({ratio:o})=>o>=0&&o<=1).sort((o,l)=>o.ratio-l.ratio).map(({color:o,ratio:l})=>({color:o,ratio:Math.max(l,.001)})),t.length<1)return i;let r=t[0],n=t[0],s=1;const a=qN();for(let o=0;o<512;o++){const l=(o+.5)/512;for(;l>n.ratio&&s<t.length;)r=n,n=t[s++];zit(a,r,n,l),i.set(a,4*o)}return i}function ADt(t,e,i){const r=Math.sqrt(t**2+e**2)/i;return r>1?0:3/(Math.PI*i**2)*(1-r**2)**2}function PDt(t){return typeof t=="function"?t:t?e=>+e[t]:()=>1}var sq;function vle(t){if(t!=null){const{maxDensity:e,minDensity:i,radius:r}=t;if(e!=null||i!=null||r!=null){const{blurRadius:n,maxPixelIntensity:s,minPixelIntensity:a,...o}=t;return o}}return t}let Es=sq=class extends wc{constructor(t){super(t),this.authoringInfo=null,this.colorStops=[new Lm({ratio:0,color:new Ye("rgba(255, 140, 0, 0)")}),new Lm({ratio:.75,color:new Ye("rgba(255, 140, 0, 1)")}),new Lm({ratio:.9,color:new Ye("rgba(255, 0,   0, 1)")})],this.field=null,this.legendOptions=null,this.maxDensity=.04,this.minDensity=0,this.radius=18,this.referenceScale=0,this.type="heatmap",this.valueExpression=null,this.valueExpressionTitle=null}normalizeCtorArgs(t){return vle(t)}get blurRadius(){return Rit(this.radius)}set blurRadius(t){const e=this.maxPixelIntensity,i=this.minPixelIntensity;this._set("radius",Dit(t)),this._set("maxDensity",e*this._pixelIntensityToDensity),this._set("minDensity",i*this._pixelIntensityToDensity)}get maxPixelIntensity(){return this.maxDensity/this._pixelIntensityToDensity}set maxPixelIntensity(t){this._set("maxDensity",t*this._pixelIntensityToDensity)}get minPixelIntensity(){return this.minDensity/this._pixelIntensityToDensity}set minPixelIntensity(t){this._set("minDensity",t*this._pixelIntensityToDensity)}get _pixelIntensityToDensity(){return 24/(jX**2*this.blurRadius**4)}read(t,e){t=vle(t),super.read(t,e)}getSymbol(){return new Gr}async getSymbolAsync(){return this.getSymbol()}get symbols(){return[this.getSymbol()]}async collectRequiredFields(t,e){const i=this.field,r=this.valueExpression;i&&typeof i=="string"&&fo(t,e,i),r&&typeof r=="string"&&await La(t,e,null,r)}getAttributeHash(){return""}getMeshHash(){return`${JSON.stringify(this.colorStops)}.${this.blurRadius}.${this.field}`}clone(){return new sq({authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),colorStops:de(this.colorStops),field:this.field,legendOptions:de(this.legendOptions),maxDensity:this.maxDensity,minDensity:this.minDensity,radius:this.radius,referenceScale:this.referenceScale,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};d([m({type:Jr,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Es.prototype,"authoringInfo",void 0),d([m({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],Es.prototype,"blurRadius",null),d([m({type:[Lm],json:{write:{isRequired:!0}}})],Es.prototype,"colorStops",void 0),d([m({type:String,json:{write:!0}})],Es.prototype,"field",void 0),d([m({type:Kx,json:{write:!0}})],Es.prototype,"legendOptions",void 0),d([m({type:Number,json:{write:!0}})],Es.prototype,"maxDensity",void 0),d([m({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],Es.prototype,"maxPixelIntensity",null),d([m({type:Number,json:{write:!0}})],Es.prototype,"minDensity",void 0),d([m({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],Es.prototype,"minPixelIntensity",null),d([m({type:Number,cast:xi,json:{write:!0}})],Es.prototype,"radius",void 0),d([m({type:Number,range:{min:0},json:{default:0,write:!0}})],Es.prototype,"referenceScale",void 0),d([pt({heatmap:"heatmap"})],Es.prototype,"type",void 0),d([m({type:String,json:{write:!0,origins:{"web-document":{write:!1},"portal-item":{write:!1}}}})],Es.prototype,"valueExpression",void 0),d([m({type:String})],Es.prototype,"valueExpressionTitle",void 0),d([m({readOnly:!0})],Es.prototype,"_pixelIntensityToDensity",null),Es=sq=d([U("esri.renderers.HeatmapRenderer")],Es);let M0=class extends $t(_e){constructor(){super(...arguments),this.color=new Ye([0,0,0,0]),this.label=null,this.threshold=0}};d([m({type:Ye,json:{write:!0}})],M0.prototype,"color",void 0),d([m({type:String,json:{write:!0}})],M0.prototype,"label",void 0),d([m({type:Number,range:{min:0,max:1},json:{write:!0}})],M0.prototype,"threshold",void 0),M0=d([U("esri.renderers.support.OthersCategory")],M0);const Fit={base:eo,key:"type",typeMap:{size:Ei,opacity:$m}};let il=class extends YT($t(wc)){constructor(e){super(e),this.attributes=null,this.backgroundFillSymbol=null,this.defaultColor=new Ye([0,0,0,0]),this.defaultLabel=null,this.holePercentage=0,this.othersCategory=new M0,this.legendOptions=null,this.outline=null,this.size=12,this.type="pie-chart",this.visualVariables=null}getSymbol(){return new Gr({size:this.size?this.size/2+(this.outline?.width||0):0})}async getSymbolAsync(){return this.getSymbol()}get symbols(){return[this.getSymbol(),this.backgroundFillSymbol].filter(un)}getAttributeHash(){return this.visualVariables?.reduce((e,i)=>e+i.getAttributeHash(),"")??""}getMeshHash(){return this.symbols.reduce((e,i)=>e+JSON.stringify(i),"")}async collectRequiredFields(e,i){await this.collectVVRequiredFields(e,i);for(const r of this.attributes)r.valueExpression&&await La(e,i,null,r.valueExpression),r.field&&e.add(r.field)}};d([m({type:[gSe],json:{write:!0}})],il.prototype,"attributes",void 0),d([m(EX)],il.prototype,"backgroundFillSymbol",void 0),d([m({type:Ye,json:{write:!0}})],il.prototype,"defaultColor",void 0),d([m({type:String,json:{write:!0}})],il.prototype,"defaultLabel",void 0),d([m({type:Number,range:{min:0,max:1},json:{write:!0}})],il.prototype,"holePercentage",void 0),d([m({type:M0,json:{write:!0}})],il.prototype,"othersCategory",void 0),d([m({type:CX,json:{write:!0}})],il.prototype,"legendOptions",void 0),d([m({type:en,json:{default:null,write:!0}})],il.prototype,"outline",void 0),d([m({type:Number,cast:xi,json:{write:!0}})],il.prototype,"size",void 0),d([pt({pieChart:"pie-chart"})],il.prototype,"type",void 0),d([m({types:[Fit]})],il.prototype,"visualVariables",void 0),il=d([U("esri.renderers.PieChartRenderer")],il);const fA={key:"type",base:wc,typeMap:{heatmap:Es,simple:Ca,"unique-value":Ni,"class-breaks":Kn,"dot-density":tl,dictionary:cd,"pie-chart":il},errorContext:"renderer"},Nit={key:"type",base:wc,typeMap:{simple:Ca,"unique-value":Ni,"class-breaks":Kn,heatmap:Es},errorContext:"renderer",validate:jit};function jit(t){switch(t.type){case"simple":return Vit(t);case"unique-value":return Bit(t);case"class-breaks":return Uit(t);case"heatmap":return t}}function Vit(t){if(t.symbol)return t;$e.getLogger("esri.renderers.support.types").error("Removed invalid 'simple' renderer without a symbol from web scene.")}function Bit(t){const e=t.uniqueValueInfos,i=e?.filter(({symbol:r,label:n},s)=>(r||$e.getLogger("esri.renderers.support.types").error(`Removed invalid unique value info ([${s}] ${n}) without a symbol from web scene.`),!!r));return i?.length!==e?.length&&(t.uniqueValueInfos=i),t}function Uit(t){const e=t.classBreakInfos,i=e?.filter(({symbol:r,label:n},s)=>(r||$e.getLogger("esri.renderers.support.types").error(`Removed invalid class break info ([${s}] ${n}) without a symbol from web scene.`),!!r));return i?.length!==e?.length&&(t.classBreakInfos=i),t}function Hit(t,e){return HI(t,null,e)}const Git=ET({types:fA});function HI(t,e,i){return t?t&&(t.styleName||t.styleUrl)&&t.type!=="uniqueValue"?(i?.messages&&i.messages.push(new kc("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+t.type+"'",{definition:t,context:i})),null):Git(t,e,i):null}var aq;let wa=aq=class extends mv{constructor(t){super(t),this.type="binning",this.binType="geohash",this.fixedBinLevel=null,this.labelingInfo=null,this.labelsVisible=!0,this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.size=xi("12px"),this.fields=[],this.renderer=null}writeFields(t,e,i){const r=t.filter(n=>n.statisticType!=="avg_angle").map(n=>n.toJSON());Bn(i,r,e)}readRenderer(t,e,i){const r=e.drawingInfo?.renderer;return r?HI(r,e,i)??void 0:AX(e,i)}clone(){return new aq({fields:de(this.fields),fixedBinLevel:this.fixedBinLevel,labelingInfo:de(this.labelingInfo),labelsVisible:this.labelsVisible,maxScale:this.maxScale,popupEnabled:this.popupEnabled,popupTemplate:de(this.popupTemplate),renderer:de(this.renderer),binType:de(this.binType),size:this.size})}};d([pt({binning:"binning"})],wa.prototype,"type",void 0),d([pt({geohash:"geohash",square:"square"}),m({type:["geohash","square"]})],wa.prototype,"binType",void 0),d([m({type:Number,json:{write:!0}})],wa.prototype,"fixedBinLevel",void 0),d([m({type:[vr],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],wa.prototype,"labelingInfo",void 0),d([m(FN)],wa.prototype,"labelsVisible",void 0),d([m({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],wa.prototype,"maxScale",void 0),d([m(zN)],wa.prototype,"popupEnabled",void 0),d([m({type:Bp,json:{name:"popupInfo",write:!0}})],wa.prototype,"popupTemplate",void 0),d([m({cast:t=>t==="auto"?t:Po(xi(t))})],wa.prototype,"size",void 0),d([m({type:[ro],json:{write:!0}})],wa.prototype,"fields",void 0),d([qe("fields")],wa.prototype,"writeFields",null),d([m({types:fA,json:{write:{target:"drawingInfo.renderer"}}})],wa.prototype,"renderer",void 0),d([Ve("renderer",["drawingInfo.renderer"])],wa.prototype,"readRenderer",null),wa=aq=d([U("esri.layers.support.FeatureReductionBinning")],wa);var oq;function ble(t){return t.type==="simple"&&!t.visualVariables?.length}let Qn=oq=class extends _e{constructor(t){super(t),this.type="cluster",this.clusterRadius=xi("80px"),this.clusterMinSize=xi("12px"),this.clusterMaxSize=xi("50px"),this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.renderer=null,this.symbol=null,this.labelingInfo=null,this.labelsVisible=!0,this.fields=[]}readRenderer(t,e,i){const r=e.drawingInfo?.renderer;return r?.authoringInfo?.isAutoGenerated?null:r?ble(r)?null:HI(r,e,i)??void 0:AX(e,i)}readSymbol(t,e,i){const r=e.drawingInfo?.renderer;return r?.authoringInfo?.isAutoGenerated?null:r&&ble(r)?HI(r,e,i)?.symbol:null}writeSymbol(t,e,i,r){const n=this.renderer?.authoringInfo?.isAutoGenerated;if(!this.renderer||n){const s=new Ca({symbol:t});e.drawingInfo={renderer:s.write({},r)}}}writeFields(t,e,i){const r=t.filter(n=>n.statisticType!=="avg_angle").map(n=>n.toJSON());Bn(i,r,e)}readFields(t,e,i){return t.filter(r=>!r.isAutoGenerated).map(r=>ro.fromJSON(r))}clone(){return new oq({clusterRadius:this.clusterRadius,clusterMinSize:this.clusterMinSize,clusterMaxSize:this.clusterMaxSize,labelingInfo:de(this.labelingInfo),labelsVisible:this.labelsVisible,fields:de(this.fields),maxScale:this.maxScale,renderer:de(this.renderer),symbol:de(this.symbol),popupEnabled:this.popupEnabled,popupTemplate:de(this.popupTemplate)})}};d([m({type:["cluster"],readOnly:!0,json:{write:!0}})],Qn.prototype,"type",void 0),d([m({cast:t=>t==="auto"?t:Po(xi(t)),json:{write:!0}})],Qn.prototype,"clusterRadius",void 0),d([m({type:Number,cast:xi,json:{write:!0}})],Qn.prototype,"clusterMinSize",void 0),d([m({type:Number,cast:xi,json:{write:!0}})],Qn.prototype,"clusterMaxSize",void 0),d([m({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],Qn.prototype,"maxScale",void 0),d([m(zN)],Qn.prototype,"popupEnabled",void 0),d([m({type:Bp,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],Qn.prototype,"popupTemplate",void 0),d([m({types:fA,json:{write:{target:"drawingInfo.renderer"}}})],Qn.prototype,"renderer",void 0),d([Ve("renderer",["drawingInfo.renderer"])],Qn.prototype,"readRenderer",null),d([m({types:$7e})],Qn.prototype,"symbol",void 0),d([Ve("symbol",["drawingInfo.renderer"])],Qn.prototype,"readSymbol",null),d([qe("symbol")],Qn.prototype,"writeSymbol",null),d([m({type:[vr],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],Qn.prototype,"labelingInfo",void 0),d([m(FN)],Qn.prototype,"labelsVisible",void 0),d([m({type:[ro],json:{write:!0}})],Qn.prototype,"fields",void 0),d([qe("fields")],Qn.prototype,"writeFields",null),d([Ve("fields")],Qn.prototype,"readFields",null),Qn=oq=d([U("esri.layers.support.FeatureReductionCluster")],Qn);var lq;let UC=lq=class extends mv{constructor(t){super(t),this.type="selection"}clone(){return new lq}};d([m({type:["selection"]})],UC.prototype,"type",void 0),UC=lq=d([U("esri.layers.support.FeatureReductionSelection")],UC);const wle={key:"type",base:mv,typeMap:{cluster:Qn,binning:wa}},qit={types:{key:"type",base:mv,typeMap:{selection:UC,cluster:Qn,binning:wa}},json:{name:"layerDefinition.featureReduction",write:{allowNull:!0},origins:{"web-map":{types:wle},"portal-item":{types:wle},"web-scene":{types:{key:"type",base:mv,typeMap:{selection:UC}},name:"layerDefinition.featureReduction",write:{allowNull:!0,layerContainerTypes:Mr}}}}},Wit=()=>$e.getLogger("esri.views.2d.layers.support.clusterUtils");ve.add("esri-cluster-arcade-enabled",!0);const Yit=ve("esri-cluster-arcade-enabled"),Zit=new Set(["simple-line","simple-fill","picture-fill"]);function _le(t,e){let i=e.clone();if(!Xit(i))return i;if(e.symbols.some(r=>Zit.has(r.type))&&(i=new Ca({symbol:new Gr})),i.authoringInfo||(i.authoringInfo=new Jr),i.authoringInfo.isAutoGenerated=!0,"visualVariables"in i){const r=(i.visualVariables||[]).filter(n=>n.valueExpression!=="$view.scale");r.forEach(n=>{n.type==="rotation"?n.field?n.field=Pb(t,n.field,"avg_angle","number"):n.valueExpression&&(n.field=E2(t,n.valueExpression,"avg_angle","number"),n.valueExpression=null):n.normalizationField?(n.field=Pb(t,n.field,"avg_norm","number",n.normalizationField),n.normalizationField=null):n.field?n.field=Pb(t,n.field,"avg","number"):n.valueExpression&&(n.field=E2(t,n.valueExpression,"avg","number"),n.valueExpression=null)}),i.visualVariables=r}switch(i.type){case"simple":break;case"pie-chart":for(const r of i.attributes)r.field?r.field=Pb(t,r.field,"sum","number"):r.valueExpression&&(r.field=E2(t,r.valueExpression,"sum","number"),r.valueExpression=null);break;case"unique-value":i.field?i.field=Pb(t,i.field,"mode","string"):i.valueExpression&&(i.field=E2(t,i.valueExpression,"mode","string"),i.valueExpression=null);break;case"class-breaks":i.normalizationField?(i.field=Pb(t,i.field,"avg_norm","number",i.normalizationField),i.normalizationField=null):i.field?i.field=Pb(t,i.field,"avg","number"):i.valueExpression&&(i.field=E2(t,i.valueExpression,"avg","number"),i.valueExpression=null)}return i}const Xit=t=>{const e=i=>Wit().error(new ee("Unsupported-renderer",i,{renderer:t}));if(!t)return!1;switch(t.type){case"unique-value":if(t.field2||t.field3)return e("FeatureReductionCluster does not support multi-field UniqueValueRenderers"),!1;break;case"class-breaks":if(t.normalizationField){const i=t.normalizationType;if(i!=="field")return e(`FeatureReductionCluster does not support a normalizationType of ${i}`),!1}break;case"simple":case"pie-chart":break;default:return e(`FeatureReductionCluster does not support renderers of type ${t.type}`),!1}if(!Yit){if("valueExpression"in t&&t.valueExpression)return e("FeatureReductionCluster does not currently support renderer.valueExpression. Support will be added in a future release"),!1;if(("visualVariables"in t&&t.visualVariables||[]).some(i=>!(!("valueExpression"in i)||!i.valueExpression)))return e("FeatureReductionCluster does not currently support visualVariables with a valueExpression. Support will be added in a future release"),!1}return!0};function Jit(t,e,i){switch(t){case"sum":return`cluster_sum_${e}`;case"avg":case"avg_angle":return`cluster_avg_${e}`;case"mode":return`cluster_type_${e}`;case"avg_norm":{const r=i,n="field",s=e.toLowerCase()+",norm:"+n+","+r.toLowerCase();return"cluster_avg_"+LZ(s)}}}function E2(t,e,i,r){const n=LZ(e),s=i==="mode"?`cluster_type_${n}`:i==="sum"?`cluster_sum_${n}`:`cluster_avg_${n}`;return t.some(a=>a.name===s)||t.push(new ro({name:s,isAutoGenerated:!0,onStatisticExpression:new Gy({expression:e,returnType:r}),statisticType:i})),s}function Pb(t,e,i,r,n){if(e==="cluster_count"||t.some(a=>a.name===e))return e;const s=Jit(i,e,n);return t.some(a=>a.name===s)||(i==="avg_norm"?t.push(new ro({name:s,isAutoGenerated:!0,onStatisticExpression:new Gy({expression:`$feature.${e} / $feature.${n}`,returnType:r}),statisticType:"avg"})):t.push(new ro({name:s,isAutoGenerated:!0,onStatisticField:e,statisticType:i}))),s}const Kit=t=>{const e=t;let i=class extends e{constructor(...r){super(...r),this.aggregateGraphicOrigin=new Het(this),this.addHandles(ze(()=>this.renderer,()=>{if(this.featureReduction){const n=this._normalizeFeatureReduction(this.featureReduction);this._set("featureReduction",n)}},xu))}set featureReduction(r){const n=this._normalizeFeatureReduction(r);this._set("featureReduction",n)}set renderer(r){}_withClusterVariable(r,n,s){const a=r.clone();return"visualVariables"in a&&(a.visualVariables||(a.visualVariables=[]),a.visualVariables.some(o=>o.type==="size")||a.visualVariables.push(new Ei({field:"cluster_count",stops:[new _d({value:1}),new _d({useMinValue:!0,size:n}),new _d({useMaxValue:!0,size:s})]}))),a}_normalizeFeatureReduction(r){if(r?.type!=="cluster")return r;const n=r.clone(),s=[new ro({name:"cluster_count",alias:"cluster_count",isAutoGenerated:!0,statisticType:"count"})],a=(n.fields??[]).filter(g=>!g.isAutoGenerated),o=r.renderer&&!r.renderer.authoringInfo?.isAutoGenerated,{clusterMinSize:l,clusterMaxSize:c}=n;if(o){n.fields=[...s,...a];const g=this._withClusterVariable(n.renderer,l,c);return n.effectiveFeatureRenderer=g,n.effectiveClusterRenderer=g,n}if(r.symbol){if(n.fields=[...s,...a],n.renderer=null,!this.renderer)return n.effectiveFeatureRenderer=null,n.effectiveClusterRenderer=null,n;const g=_le(s,this.renderer),y=this._withClusterVariable(g,l,c),b="visualVariables"in y&&y.visualVariables?y.visualVariables:[],_=new Ca({symbol:r.symbol,visualVariables:b});return n.fields=[...s,...a],n.effectiveFeatureRenderer=y,n.effectiveClusterRenderer=_,n}if(!this.renderer)return r;const h=_le(s,this.renderer);n.fields=[...s,...a],n.renderer=h;const f=this._withClusterVariable(h,l,c);return n.effectiveFeatureRenderer=f,n.effectiveClusterRenderer=f,n}};return d([m({readOnly:!0,clonable:!1})],i.prototype,"aggregateGraphicOrigin",void 0),d([m(qit)],i.prototype,"featureReduction",null),i=d([U("esri.layers.mixins.FeatureReductionLayer")],i),i},xle={ArcGISAnnotationLayer:!0,ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,ArcGISVideoLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GeoRSS:!0,GroupLayer:!0,KML:!0,KnowledgeGraphLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,ParquetLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WCS:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},Sle={ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,OpenStreetMap:!0,VectorTileLayer:!0,WCS:!0,WMS:!0,WebTiledLayer:!0},$le={ArcGISFeatureLayer:!0,SubtypeGroupTable:!0},Qit={"web-scene/operational-layers":{ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,CatalogLayer:!0,CSV:!0,GaussianSplatLayer:!0,GeoJSON:!0,GroupLayer:!0,IntegratedMesh3DTilesLayer:!0,Object3DTilesLayer:!0,IntegratedMeshLayer:!0,KML:!0,LineOfSightLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,RasterDataLayer:!0,VectorTileLayer:!0,ViewshedLayer:!0,Voxel:!0,WCS:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/basemap-base-layers":{ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WCS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/basemap-ground-layers":{IntegratedMesh3DTilesLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-scene/tables":{ArcGISFeatureLayer:!0},"web-map/operational-layers":xle,"web-map/basemap-base-layers":Sle,"web-map/tables":$le,"link-chart/operational-layers":{...xle,LinkChartLayer:!0},"link-chart/basemap-base-layers":Sle,"link-chart/tables":$le,"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,BuildingSceneLayer:!0,IntegratedMesh3DTilesLayer:!0,IntegratedMeshLayer:!0,MediaLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,SubtypeGroupLayer:!0,WCS:!0},"portal-item/tables":{ArcGISFeatureLayer:!0,SubtypeGroupTable:!0}},ASe=t=>{const e=t;let i=class extends e{constructor(){super(...arguments),this.persistenceEnabled=!0,this.title=null}readId(r,n,s){return s?.portalItem?.type==="Group Layer"?void 0:r}writeListMode(r,n,s,a){(a&&a.layerContainerType==="ground"||r&&cPe(this,s,{},a))&&(n[s]=r)}writeOperationalLayerType(r,n,s){r&&(n[s]=r)}writeTitle(r,n){n.title=r??"Layer"}readVisibilityTimeExtent(r){return r?nr.fromArray(r):null}writeVisibilityTimeExtent(r,n,s,a){r&&a.layerContainerType!=="tables"&&(r.isEmpty?a?.messages&&a.messages.push(new ee("layer:invalid-visibilityTimeExtent","visibilityTimeExtent cannot be empty")):n[s]=r.toArray())}read(r,n){n&&(n.layer=this),Vpe(this,r,s=>super.read(r,s),n)}write(r,n){if(!this.persistenceEnabled&&!n?.ignorePersistenceEnabled)return null;if(n?.origin){const o=`${n.origin}/${n.layerContainerType||"operational-layers"}`;let c=!!Qit[o]?.[this.operationalLayerType];if(this.operationalLayerType==="ArcGISTiledElevationServiceLayer"&&o==="web-scene/operational-layers"&&(c=!1),this.operationalLayerType==="ArcGISDimensionLayer"&&o==="web-map/operational-layers"&&(c=!1),!c)return n.messages?.push(new ee("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${o}'`,{layer:this})),null}const s=super.write(r,{...n,layer:this}),a=!!n&&!!n.messages&&!!n.messages.filter(o=>o instanceof ee&&o.name==="web-document-write:property-required").length;return IT(s?.url)?(n?.messages?.push(new ee("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&a?null:s}beforeSave(){}};return d([m({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],i.prototype,"id",void 0),d([Ve("id",["id"])],i.prototype,"readId",null),d([m(hxe)],i.prototype,"listMode",void 0),d([qe("listMode")],i.prototype,"writeListMode",null),d([m({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1},"web-scene":{name:"layerType",read:!1,write:{enabled:!0,ignoreOrigin:!0,layerContainerTypes:Mr,isRequired:!0}}}}})],i.prototype,"operationalLayerType",void 0),d([qe("operationalLayerType")],i.prototype,"writeOperationalLayerType",null),d([m(xG)],i.prototype,"opacity",void 0),d([m({type:Boolean,readOnly:!1})],i.prototype,"persistenceEnabled",void 0),d([m({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],i.prototype,"title",void 0),d([qe("title"),qe(["web-scene"],"title")],i.prototype,"writeTitle",null),d([m({type:nr,json:{origins:{"web-scene":{write:{layerContainerTypes:Mr}}}}})],i.prototype,"visibilityTimeExtent",void 0),d([Ve("visibilityTimeExtent")],i.prototype,"readVisibilityTimeExtent",null),d([qe(["portal-item","web-map","web-scene"],"visibilityTimeExtent",{visibilityTimeExtent:{type:[[li,kT]]}})],i.prototype,"writeVisibilityTimeExtent",null),d([m({type:Boolean,json:{name:"visibility",write:{layerContainerTypes:Mr}}})],i.prototype,"visible",void 0),i=d([U("esri.layers.mixins.OperationalLayer")],i),i};var cq;const ZO=new Gt({asc:"ascending",desc:"descending"});var L$;let A0=(L$=class extends _e{constructor(e){super(e),this.field=null,this.valueExpression=null,this.order="ascending"}clone(){return new cq({field:this.field,valueExpression:this.valueExpression,order:this.order})}},cq=L$,L$);d([m({type:String,json:{write:!0}})],A0.prototype,"field",void 0),d([m({type:String,json:{write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],A0.prototype,"valueExpression",void 0),d([m({type:ZO.apiValues,json:{type:ZO.jsonValues,read:ZO.read,write:ZO.write}})],A0.prototype,"order",void 0),A0=cq=d([U("esri.layers.support.OrderByInfo")],A0);function ert(t,e,i){if(!t)return null;const r=t.find(s=>!!s.field);if(!r)return null;const n=new A0;return n.read(r,i),[n]}function trt(t,e,i,r){const n=t.find(s=>!!s.field);n&&Bn(i,[n.toJSON()],e)}const irt={type:[A0],json:{origins:{"web-scene":{write:!1,read:!1}},name:"layerDefinition.orderBy",read:{reader:ert},write:{writer:trt}}},rrt=t=>{const e=t;let i=class extends e{constructor(){super(...arguments),this.orderBy=null}};return d([m(irt)],i.prototype,"orderBy",void 0),i=d([U("esri.layers.mixins.OrderedLayer")],i),i},PSe=t=>{const e=t;let i=class extends e{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0,this.userHasFullEditingPrivileges=!1,this.userHasUpdateItemPrivileges=!1}destroy(){this.portalItem=Ir(this.portalItem),this.resourceReferences.portalItem=null,this.resourceReferences.paths.length=0}set portalItem(r){r!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",r))}readPortalItem(r,n,s){if(n.itemId)return new Mt({id:n.itemId,portal:s?.portal})}writePortalItem(r,n){r?.id&&(n.itemId=r.id)}async loadFromPortal(r,n){if(this.portalItem?.id)try{const{load:s}=await fe(()=>import("./layersLoader-B4HzadMq.js"),[]);return sr(n),await s({instance:this,supportedTypes:r.supportedTypes,validateItem:r.validateItem,supportsData:r.supportsData,layerModuleTypeMap:r.layerModuleTypeMap,populateGroupLayer:r.populateGroupLayer},n)}catch(s){throw ss(s)||$e.getLogger(this).warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})
  ${s}`),s}}async finishLoadEditablePortalLayer(r){this._set("userHasEditingPrivileges",await this._fetchUserHasEditingPrivileges(r).catch(n=>(fl(n),!0)))}async setUserPrivileges(r,n){if(!yi.userPrivilegesApplied)return this.finishLoadEditablePortalLayer(n);if(this.url)try{const{features:{edit:s,fullEdit:a},content:{updateItem:o}}=await this._fetchUserPrivileges(r,n);this._set("userHasEditingPrivileges",s),this._set("userHasFullEditingPrivileges",a),this._set("userHasUpdateItemPrivileges",o)}catch(s){fl(s)}}async _fetchUserPrivileges(r,n){let s=this.portalItem;if(!r||!s||!s.loaded||s.sourceUrl)return this._fetchFallbackUserPrivileges(n);const a=!oi?.findCredential(this.url),o=r===s.id;if(o&&s.portal.user)return this._getUserPrivileges(s,a);let l,c;if(o)l=s.portal.url;else try{l=await AZ(this.url,n)}catch(y){fl(y)}if(!l||!$Pe(l,s.portal.url))return this._fetchFallbackUserPrivileges(n);try{const y=n!=null?n.signal:null;c=await oi?.getCredential(`${l}/sharing`,{prompt:!1,signal:y})}catch(y){fl(y)}const h=!0,f=!1,g=!1;if(!c)return{features:{edit:h,fullEdit:f},content:{updateItem:g}};try{if(o?await s.reload():(s=new Mt({id:r,portal:{url:l}}),await s.load(n)),s.portal.user)return this._getUserPrivileges(s,a)}catch(y){fl(y)}return{features:{edit:h,fullEdit:f},content:{updateItem:g}}}_getUserPrivileges(r,n){const s=yXe(r);return n&&(s.features.edit=!0),s}async _fetchFallbackUserPrivileges(r){let n=!0;try{n=await this._fetchUserHasEditingPrivileges(r)}catch(s){fl(s)}return{features:{edit:n,fullEdit:!1},content:{updateItem:!1}}}async _fetchUserHasEditingPrivileges(r){const n=this.url?oi?.findCredential(this.url):null;if(!n)return!0;const s=XO.credential===n?XO.user:await this._fetchEditingUser(r);return XO.credential=n,XO.user=s,s?.privileges==null||s.privileges.includes("features:user:edit")}async _fetchEditingUser(r){const n=this.portalItem?.portal?.user;if(n)return n;const s=oi?.findServerInfo(this.url??"");if(!s?.owningSystemUrl)return null;const a=`${s.owningSystemUrl}/sharing/rest`,o=Ue.getDefault();if(o&&o.loaded&&_c(o.restUrl)===_c(a))return o.user;const l=`${a}/community/self`,c=r!=null?r.signal:null,h=await hN(Nt(l,{authMode:"no-prompt",query:{f:"json"},signal:c}));return h.ok?ur.fromJSON(h.value.data):null}read(r,n){n&&(n.layer=this),super.read(r,n)}write(r,n){const s=n?.portal,a=this.portalItem?.id&&(this.portalItem.portal||Ue.getDefault());return s&&a&&!Xpe(a.restUrl,s.restUrl)?(n.messages&&n.messages.push(new ee("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(r,{...n,layer:this})}};return d([m({type:Mt})],i.prototype,"portalItem",null),d([Ve("web-document","portalItem",["itemId"])],i.prototype,"readPortalItem",null),d([qe("web-document","portalItem",{itemId:{type:String}})],i.prototype,"writePortalItem",null),d([m({clonable:!1})],i.prototype,"resourceReferences",void 0),d([m({type:Boolean,readOnly:!0})],i.prototype,"userHasEditingPrivileges",void 0),d([m({type:Boolean,readOnly:!0})],i.prototype,"userHasFullEditingPrivileges",void 0),d([m({type:Boolean,readOnly:!0})],i.prototype,"userHasUpdateItemPrivileges",void 0),i=d([U("esri.layers.mixins.PortalLayer")],i),i},XO={credential:null,user:null};let zE=class extends lt{constructor(){super(...arguments),this.updating=!1,this.status="unknown"}};d([m()],zE.prototype,"updating",void 0),d([m()],zE.prototype,"status",void 0),zE=d([U("esri.layers.support.PublishingInfo")],zE);const nrt=Symbol(),srt=t=>{var n;var e;const i=t;let r=(n=class extends i{constructor(){super(...arguments),this[e]=!0}get publishingInfo(){if(this.destroyed)return null;const s=this._get("publishingInfo");if(s)return s;const a=new zE;return this._checkPublishingStatus(a),a}_checkPublishingStatus(s){let l=0;const c=async f=>{let g;s.updating=!0;try{g=await this.fetchPublishingStatus()}catch{g="unavailable"}g!=="published"&&g!=="unavailable"||(s.status==="publishing"&&this.refresh(),h.remove()),s.status=g,s.updating=!1,h.removed||(l=setTimeout(c,f,f+125))},h={removed:!1,remove(){this.removed=!0,clearTimeout(l)}};this.when().catch(()=>h.remove()),c(250),this.addHandles(h)}},e=nrt,n);return d([m({readOnly:!0,clonable:!1})],r.prototype,"publishingInfo",null),r=d([U("esri.layers.mixins.PublishableLayer")],r),r},nv=new We,HC=new WeakMap;function art(t){lrt(t)&&nv.push(new WeakRef(t))}function ort(t){const e=nv.find(i=>i.deref()===t);e&&nv.remove(e)}function lrt(t){return t!=null&&typeof t=="object"&&"refreshInterval"in t&&"refresh"in t}function OSe(t,e){return Number.isFinite(t)&&Number.isFinite(e)?e<=0?t:OSe(e,t%e):0}let PB=0,JO=0;function crt(){const t=Date.now();let e=!1;for(const i of nv){const r=i.deref();r?r.refreshInterval&&t-(HC.get(r)??0)+5>=6e4*r.refreshInterval&&(HC.set(r,t),r.refresh(t)):e=!0}if(e)for(let i=nv.length-1;i>=0;i--)nv.at(i).deref()||nv.removeAt(i)}wpe(()=>{const t=Date.now();let e=0;for(const i of nv){const r=i.deref();r&&(e=OSe(Math.round(6e4*r.refreshInterval),e),r.refreshInterval?HC.get(r)||HC.set(r,t):HC.delete(r))}if(e!==JO){if(JO=e,clearInterval(PB),JO===0)return void(PB=0);PB=setInterval(crt,JO)}},xu);const Tle=.1,urt=t=>{const e=t;let i=class extends e{constructor(...r){super(...r),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=ST(()=>this.hasDataChanged()),this.when().then(()=>{this.destroyed||art(this)},()=>{})}destroy(){ort(this)}castRefreshInterval(r){return r>=Tle?r:r<=0?0:Tle}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(r=Date.now()){_v(this._debounceHasDataChanged()).then(n=>{n&&this._set("refreshTimestamp",r),this.emit("refresh",{dataChanged:n})},n=>{$e.getLogger(this).error(n),this.emit("refresh",{dataChanged:!1,error:n})})}async hasDataChanged(){return!0}get test(){}};return d([m({type:Number,json:{write:!0,origins:{"web-scene":{write:{enabled:!0,layerContainerTypes:Mr}}}}})],i.prototype,"refreshInterval",void 0),d([Ii("refreshInterval")],i.prototype,"castRefreshInterval",null),d([m({readOnly:!0})],i.prototype,"refreshTimestamp",void 0),d([m({readOnly:!0})],i.prototype,"refreshParameters",null),i=d([U("esri.layers.mixins.RefreshableLayer")],i),i},LSe=t=>{const e=t;let i=class extends e{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const r={minScale:this.minScale,maxScale:this.maxScale},n=this.parent;n?.effectiveScaleRange!==void 0&&drt(r,n.effectiveScaleRange);const s=this._get("effectiveScaleRange");return s&&s.minScale===r.minScale&&s.maxScale===r.maxScale?s:r}};return d([m({type:Number,nonNullable:!0,json:{write:!0}})],i.prototype,"minScale",void 0),d([m({type:Number,nonNullable:!0,json:{write:!0}})],i.prototype,"maxScale",void 0),d([m({readOnly:!0})],i.prototype,"effectiveScaleRange",null),i=d([U("esri.layers.mixins.ScaleRangeLayer")],i),i};function drt(t,e){return t.minScale=t.minScale>0?e.minScale>0?Math.min(t.minScale,e.minScale):t.minScale:e.minScale,t.maxScale=t.maxScale>0?e.maxScale>0?Math.max(t.maxScale,e.maxScale):t.maxScale:e.maxScale,t}function kle(t,e){return Od.fromJSON({value:t,unit:e})}let Gs=class extends $t(_e){constructor(e){super(e),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeZone=null,this.trackIdField=null,this.useTime=!0,this.stops=null}readFullTimeExtent(e,i){return i.timeExtent&&Array.isArray(i.timeExtent)&&i.timeExtent.length===2?nr.fromArray(i.timeExtent):null}writeFullTimeExtent(e,i){e?.start!=null&&e.end!=null?i.timeExtent=e.toArray():i.timeExtent=null}readInterval(e,i){return i.timeInterval&&i.timeIntervalUnits?kle(i.timeInterval,i.timeIntervalUnits):i.defaultTimeInterval&&i.defaultTimeIntervalUnits?kle(i.defaultTimeInterval,i.defaultTimeIntervalUnits):null}writeInterval(e,i){i.timeInterval=e?.toJSON().value??null,i.timeIntervalUnits=e?.toJSON().unit??null}};d([m({type:Boolean,json:{name:"exportOptions.timeDataCumulative",write:!0}})],Gs.prototype,"cumulative",void 0),d([m({type:String,json:{name:"endTimeField",write:{enabled:!0,allowNull:!0}}})],Gs.prototype,"endField",void 0),d([m({type:nr,json:{write:{enabled:!0,allowNull:!0}}})],Gs.prototype,"fullTimeExtent",void 0),d([Ve("fullTimeExtent",["timeExtent"])],Gs.prototype,"readFullTimeExtent",null),d([qe("fullTimeExtent")],Gs.prototype,"writeFullTimeExtent",null),d([m({type:Boolean,json:{write:!0}})],Gs.prototype,"hasLiveData",void 0),d([m({type:Od,json:{write:{enabled:!0,allowNull:!0}}})],Gs.prototype,"interval",void 0),d([Ve("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],Gs.prototype,"readInterval",null),d([qe("interval")],Gs.prototype,"writeInterval",null),d([m({type:String,json:{name:"startTimeField",write:{enabled:!0,allowNull:!0}}})],Gs.prototype,"startField",void 0),d([m(CR("timeReference",!0))],Gs.prototype,"timeZone",void 0),d([m({type:String,json:{write:{enabled:!0,allowNull:!0}}})],Gs.prototype,"trackIdField",void 0),d([m({type:Boolean,json:{name:"exportOptions.useTime",write:!0}})],Gs.prototype,"useTime",void 0),d([m({type:[Date],json:{read:!1}})],Gs.prototype,"stops",void 0),Gs=d([U("esri.layers.support.TimeInfo")],Gs);const hrt={type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation",layerContainerTypes:Mr}}},prt=t=>{const e=t;let i=class extends e{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(r,n){const s=n.timeInfo.exportOptions;if(!s)return null;const a=s.timeOffset,o=yX.fromJSON(s.timeOffsetUnits);return a&&o?new Od({value:a,unit:o}):null}set timeInfo(r){$0e(r,this.fieldsIndex),this._set("timeInfo",r)}};return d([m({type:nr,json:{write:!1}})],i.prototype,"timeExtent",void 0),d([m({type:Od})],i.prototype,"timeOffset",void 0),d([Ve("service","timeOffset",["timeInfo.exportOptions"])],i.prototype,"readOffset",null),d([m({value:null,type:Gs,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],i.prototype,"timeInfo",null),d([m(hrt)],i.prototype,"useViewTime",void 0),i=d([U("esri.layers.mixins.TemporalLayer")],i),i};let frt=class extends NI{constructor(e){super(),this.type="track",this.trackInfoProvider=e}get id(){return this.trackInfoProvider.id}get[eA](){return this.trackInfoProvider.trackInfo}},uu=class extends $t(_e){constructor(e){super(e),this.labelingInfo=null,this.labelsVisible=!0,this.renderer=null,this.visible=!0}};d([m({type:[vr],json:{write:!0}})],uu.prototype,"labelingInfo",void 0),d([m(FN)],uu.prototype,"labelsVisible",void 0),d([m({types:fA,json:{write:!0}})],uu.prototype,"renderer",void 0),d([m({type:Boolean,json:{write:!0}})],uu.prototype,"visible",void 0),uu=d([U("esri.layers.support.TrackPartInfo")],uu);let rl=class extends $t(_e){constructor(e){super(e),this.enabled=!0,this.fields=[],this.latestObservations=new uu({renderer:new Ca({symbol:wz.clone()})}),this.maxDisplayDuration=null,this.maxDisplayObservationsPerTrack=0,this.popupEnabled=!0,this.popupTemplate=null,this.previousObservations=new uu({renderer:new Ca({symbol:wz.clone()})}),this.trackLines=new uu({renderer:new Ca({symbol:BN.clone()})}),this.timeField="startTimeField"}writeFields(e,i,r){const n=e.filter(s=>s.statisticType!=="avg_angle").map(s=>s.toJSON());Bn(r,n,i)}};d([m({type:Boolean,json:{write:!0}})],rl.prototype,"enabled",void 0),d([m({type:[ro],json:{write:!0}})],rl.prototype,"fields",void 0),d([qe("fields")],rl.prototype,"writeFields",null),d([m({type:uu,json:{write:!0}})],rl.prototype,"latestObservations",void 0),d([m({type:Od,json:{write:!0}})],rl.prototype,"maxDisplayDuration",void 0),d([m({type:Number,json:{write:!0}})],rl.prototype,"maxDisplayObservationsPerTrack",void 0),d([m(zN)],rl.prototype,"popupEnabled",void 0),d([m({type:Bp,json:{name:"popupInfo",write:!0}})],rl.prototype,"popupTemplate",void 0),d([m({type:uu,json:{write:!0}})],rl.prototype,"previousObservations",void 0),d([m({type:uu,json:{write:!0}})],rl.prototype,"trackLines",void 0),d([m({type:["timeReceived","startTimeField","endTimeField"],json:{read:!0,write:!0}})],rl.prototype,"timeField",void 0),rl=d([U("esri.layers.support.TrackInfo")],rl);const mrt=t=>{const e=t;let i=class extends e{constructor(){super(...arguments),this.trackGraphicOrigin=new frt(this),this.trackInfo=null}};return d([m({readOnly:!0,clonable:!1})],i.prototype,"trackGraphicOrigin",void 0),d([m({type:rl})],i.prototype,"trackInfo",void 0),i=d([U("esri.layers.mixins.TrackableLayer")],i),i},Ele=new Gt({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});let Nh=class extends $t(_e){constructor(e){super(e),this.name=null,this.description=null,this.drawingTool=null,this.prototype=null,this.thumbnail=null}};d([m({json:{write:!0}})],Nh.prototype,"name",void 0),d([m({json:{write:!0}})],Nh.prototype,"description",void 0),d([m({json:{read:Ele.read,write:Ele.write}})],Nh.prototype,"drawingTool",void 0),d([m({json:{write:!0}})],Nh.prototype,"prototype",void 0),d([m({json:{write:!0}})],Nh.prototype,"thumbnail",void 0),Nh=d([U("esri.layers.support.FeatureTemplate")],Nh);let Rh=class extends $t(_e){constructor(e){super(e),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(e){const i={};for(const r of Object.keys(e))i[r]=EN(e[r]);return i}writeDomains(e,i){const r={};for(const n of Object.keys(e))e[n]&&(r[n]=e[n]?.toJSON());i.domains=r}};d([m({json:{write:!0}})],Rh.prototype,"id",void 0),d([m({json:{write:!0}})],Rh.prototype,"name",void 0),d([m({json:{write:!0}})],Rh.prototype,"domains",void 0),d([Ve("domains")],Rh.prototype,"readDomains",null),d([qe("domains")],Rh.prototype,"writeDomains",null),d([m({type:[Nh],json:{write:!0}})],Rh.prototype,"templates",void 0),Rh=d([U("esri.layers.support.FeatureType")],Rh);let qy=class extends $t(_e){constructor(e){super(e),this.alias=null,this.name=void 0,this.fieldFormat=null}};d([m({type:String,json:{write:!0}})],qy.prototype,"alias",void 0),d([m({type:String,nonNullable:!0,json:{write:{isRequired:!0}}})],qy.prototype,"name",void 0),d([m({types:U0e,json:{write:!0}})],qy.prototype,"fieldFormat",void 0),qy=d([U("esri.layers.support.FieldConfiguration")],qy);function grt(t){const{popupTemplate:e,fieldsIndex:i}=t,r=e?.fieldInfos;if(!r?.length||!i)return;const n=[];for(const s of r){const{fieldName:a,label:o}=s,l=i.get(a);if(!l)continue;const c=o&&o!==l.alias?o:null,h=y9e(s,l);(c||h)&&n.push(new qy({name:l.name,alias:c,fieldFormat:h}))}return n.length?n:null}function yrt(t){const{fields:e}=t;if(!e?.length)return;const i=[];for(const r of e){const n=S_(r)?CC(r):null;n&&i.push(new qy({name:r.name,fieldFormat:n}))}return i.length?i:null}function vrt(t,e){const{popupTemplate:i,fieldsIndex:r}=t;if(!i||!r)return;const n=brt(t,e,i.fieldInfos);if(!n)return;const s=i.clone();return s.fieldInfos=n,s}function brt(t,e,i){e??=[],i=de(i)??[];let r=!1;const n=new Map;for(const s of e){const a=t.fieldsIndex.get(s.name);a&&n.set(a.name,s)}for(const s of i){const a=t.fieldsIndex.get(s.fieldName);if(!a)continue;const o=n.get(a.name);s.label=o?.alias||a.alias,s.format=S_(a)&&o?.fieldFormat?VZ(o.fieldFormat,a):null,r=!0,n.delete(a.name)}for(const s of n.values()){const a=wrt(t,s);a&&(i.push(a),r=!0)}return r?i:null}function wrt(t,e){const{name:i,alias:r,fieldFormat:n}=e,s=t.fieldsIndex.get(i);if(!s||!r&&!n)return;const a=r||s.alias,o=S_(s)&&n?VZ(n,s):null;return new xN({fieldName:s.name,label:a,format:o,visible:!1,isEditable:C0e(s,t)})}function _rt(){return{fields:{type:[Ws],value:null,set:function(t){if(t&&ve("big-integer-warning-enabled")){const e=t.filter(i=>i.type==="big-integer"||i.type==="oid"&&(i.length||0)>=8);if(e.length){const i=e.map(r=>`'${r.name}'`).join(", ");$e.getLogger(this).warn("#fields",`Layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}') references big-integer field(s): ${i}, support for which is experimental. Only integers less than ${Number.MAX_SAFE_INTEGER} (Number.MAX_SAFE_INTEGER) are supported.`)}}this._set("fields",t)}},fieldsIndex:{readOnly:!0,get(){return UI.fromLayer(this)}},outFields:{type:[String],json:{read:!1},set:function(t){this._userOutFields=t,this.notifyChange("outFields")},get:function(){const t=this._userOutFields;if(!t?.length)return null;if(t.includes("*"))return["*"];if(!this.fields)return t;for(const e of t)this.fieldsIndex?.has(e)||$e.getLogger("esri.layers.support.fieldProperties").error("field-attributes-layer:invalid-field",`Invalid field ${e} found in outFields`,{layer:this,outFields:t});return bN(this.fieldsIndex,t)}}}}const OB=()=>$e.getLogger("esri.layers.support.labelingInfo"),xrt=/\[([^[\]]+)\]/gi;function Cle(t,e,i){return t?t.map(r=>{const n=new vr;if(n.read(r,i),n.labelExpression){const s=e.fields||e.layerDefinition?.fields||this.fields;n.labelExpression=n.labelExpression.replaceAll(xrt,(a,o)=>`[${Srt(o,s)}]`)}return n}):null}function Srt(t,e){if(!e)return t;const i=t.toLowerCase();for(let r=0;r<e.length;r++){const n=e[r].name;if(n.toLowerCase()===i)return n}return t}const Ile=["above-right","above-center","above-left","center-center","center-left","center-right","below-center","below-left","below-right"],$rt={esriGeometryPoint:Ile,esriGeometryMultiPatch:["always-horizontal"],esriGeometryPolygon:["always-horizontal"],esriGeometryPolyline:["center-along","above-along","below-along"],esriGeometryMultipoint:Ile,esriGeometryEnvelope:null};function UDt(t,e){const i=[];for(const r of t){const n=r.labelPlacement,s=$rt[e];if(!r.symbol)return OB().warn("No ILabelClass symbol specified."),[];if(!s)return OB().error(new ee("labeling:unsupported-geometry-type",`Unable to create labels for layer, geometry type '${e}' is not supported`)),[];if(s.includes(n))i.push(r);else{const a=s[0];n&&OB().warn(`Found invalid label placement type ${n} for ${e}. Defaulting to ${a}`);const o=r.clone();o.labelPlacement=a,i.push(o)}}return i}const Trt="relationships/",krt="expression/",Ert=/<br\s*\/*>/gi;let So=class extends lt{constructor(e){super(e),this._featureUtils=null,this.effectivePopupTemplate=null}get _arcadeTask(){return this.expressionsUsedInTitle.length>0?this._get("_arcadeTask")||JM(()=>Xm()):null}get featureUtilsPromise(){return this._get("featureUtilsPromise")??fe(()=>import("./featureUtils-BAoA3H4b.js"),[]).then(e=>this._featureUtils=e)}get calculatedExpressions(){const e=new We;if(!this.expressionsUsedInTitle.length)return e;if(!this._arcadeTask?.value){for(const i of this.expressionsUsedInTitle??[])e.push({name:i.name,invalid:!0});return e}for(const i of this.expressionsUsedInTitle)try{const r=this._arcadeTask.value.arcade.parseScript(i.expression,["$layer","$map","$datastore"]);if(r.isAsync){e.push({name:i.name,invalid:!0});break}e.push({name:i.name,syntax:r,invalid:!1,func:this._arcadeTask.value.arcade.compileScript(r,{vars:{$feature:"any"}})})}catch{e.push({name:i.name,invalid:!0});break}return e}get expressionsUsedInTitle(){let e=this.effectivePopupTemplate?.title??"";return typeof e!="string"?[]:(e=e.toLowerCase(),this.effectivePopupTemplate?.expressionInfos?.filter(i=>e.includes(`{expression/${i.name.toLowerCase()}}`))??[])}get fieldInfoMap(){return this._featureUtils?this._createFieldInfoMap(this._featureUtils.getAllFieldInfos(this.effectivePopupTemplate)):null}get hasBadExpressions(){return this.calculatedExpressions.some(e=>e.invalid===!0)}get requiredFields(){const e=new Set;if(this._arcadeTask?.value&&!this.hasBadExpressions)for(const r of this.calculatedExpressions?.toArray()??[])try{const n=this._arcadeTask.value.arcade.extractFieldLiterals(r.syntax);for(const s of n){const a=s.split("."),o=this.fieldsIndex.get(a.at(-1)??"");o&&e.add(o.name)}}catch{}const i=this._extractFieldNames(this.workingTitle);for(const r of i){const n=this.fieldsIndex.get(r);n&&e.add(n.name)}return this.objectIdField!=null&&e.add(this.objectIdField),e}get titleFromDisplayField(){let e="";return this.displayField&&(e=this.fieldsIndex.get(this.displayField)?.name??""),e||(e=this.fieldsIndex.get(this.objectIdField)?.name??""),e?`{${e}}`:""}get workingTitle(){const e=this.effectivePopupTemplate?this.effectivePopupTemplate.title:"";return e===""||e==null||this.hasBadExpressions||typeof e!="string"?this.titleFromDisplayField:e}async getTitle(e,i,r){const n=i.getObjectId()??i.attributes[e.objectIdField];return(await this.getTitles(e,[i],r)).get(n)??""}async getTitles(e,i,r){const n=new Map,s=r?.timeZone??"system";try{const[{substituteFieldsInLinksAndAttributes:a}]=await Promise.all([this.featureUtilsPromise,this._arcadeTask?.promise]);r?.fetchMissingFields&&(i=await this._checkAndReQueryGraphics(e,i));const{fieldInfoMap:o,workingTitle:l}=this,c=l&&o;i.forEach(h=>{const f=h.getObjectId()??h.attributes[e.objectIdField];let g=c?a({attributes:h.attributes,expressionAttributes:null,fieldInfoMap:o,globalAttributes:this._createFormattedAttributes(e,h,s).global,layer:e,text:l}):"";r?.removeHTML&&(g=eRe.sanitize(g).replaceAll(Ert," ")),n.set(f,g)})}catch{}return n}async _checkAndReQueryGraphics(e,i){const r=i.map(n=>n.getObjectId()??n.attributes[e.objectIdField]).filter(un);if(r.length!==i.length)return i;if(i.some(n=>!d9e(n,this.requiredFields))){const n=e.createQuery();n.where="1=1",n.outFields=[...this.requiredFields],n.objectIds=r;const s=await e.queryFeatures(n);if(s?.features.length===i.length)return s.features}return i}_createFieldInfoMap(e){const i=new Map;if(!e)return i;for(const r of e){if(!r.fieldName)continue;const n=this.fieldsIndex.get(r.fieldName),s=n?.name??r.fieldName;r.fieldName=s,i.set(s.toLowerCase(),r)}return i}_createFormattedAttributes(e,i,r="system"){const n=this.effectivePopupTemplate?.fieldInfos??[],s={};if(!this._featureUtils)return{};if(!this.hasBadExpressions&&this.calculatedExpressions.length>0&&this._arcadeTask?.value){const o=this._arcadeTask.value.Feature.createFromGraphicLikeObject(i.geometry,i.attributes,e,null);for(const l of this.calculatedExpressions)try{s[`expression/${l.name}`]=l.func({vars:{$feature:o}})}catch{}}const a={...i.attributes,...s};return{global:this._featureUtils.formatAttributes({fieldInfos:n,attributes:a,graphic:i,timeZone:r,layer:e,fieldInfoMap:this.fieldInfoMap}),content:[]}}_extractFieldNames(e){return NZ(e).filter(i=>!(i.startsWith(Trt)||i.startsWith(krt)))}};d([m({readOnly:!0})],So.prototype,"_arcadeTask",null),d([m()],So.prototype,"_featureUtils",void 0),d([m({readOnly:!0})],So.prototype,"featureUtilsPromise",null),d([m({readOnly:!0})],So.prototype,"calculatedExpressions",null),d([m()],So.prototype,"displayField",void 0),d([m()],So.prototype,"effectivePopupTemplate",void 0),d([m()],So.prototype,"expressionsUsedInTitle",null),d([m()],So.prototype,"fieldsIndex",void 0),d([m()],So.prototype,"fieldInfoMap",null),d([m()],So.prototype,"fields",void 0),d([m()],So.prototype,"objectIdField",void 0),d([m()],So.prototype,"requiredFields",null),So=d([U("esri.layers.support.TitleCreator")],So);const Qx=[];function Crt(t,e){if(_R(t.url??""))return!0;const{wkid:i}=e;for(const r of Qx){if((t.version??0)>=r[0])return!0;if(typeof r[1]=="function"&&(r[1]=r[1]()),r[1].has(i))return!1}return!0}Qx.push([10.91,()=>{const t=new Set([9709,9716,9741,9761,9766]);for(let e=9712;e<=9713;e++)t.add(e);for(let e=9748;e<=9749;e++)t.add(e);for(let e=20904;e<=20932;e++)t.add(e);for(let e=21004;e<=21032;e++)t.add(e);for(let e=21207;e<=21264;e++)t.add(e);for(let e=21307;e<=21364;e++)t.add(e);for(let e=23301;e<=23333;e++)t.add(e);for(let e=102759;e<=102760;e++)t.add(e);for(let e=102934;e<=102955;e++)t.add(e);return t}]),Qx.push([10.9,()=>{const t=new Set([9300,9354,9364,9367,9373,9377,9387,9456,9473,9498,9678,9680,29874,103599,103872,104028]);for(let e=9356;e<=9360;e++)t.add(e);for(let e=9404;e<=9407;e++)t.add(e);for(let e=9476;e<=9482;e++)t.add(e);for(let e=9487;e<=9494;e++)t.add(e);for(let e=9697;e<=9699;e++)t.add(e);return t}]),Qx.push([10.81,()=>{const t=new Set([9265,9333,103598,103699]);for(let e=9248;e<=9254;e++)t.add(e);for(let e=9271;e<=9273;e++)t.add(e);for(let e=9284;e<=9285;e++)t.add(e);for(let e=21453;e<=21463;e++)t.add(e);return t}]),Qx.push([10.8,()=>{const t=new Set([8088,8395,8428,8433,8531,8687,8692,8694,8699,8900,9003,9006,9009,9012,9017,9191]);for(let e=8035;e<=8036;e++)t.add(e);for(let e=8455;e<=8456;e++)t.add(e);for(let e=8518;e<=8529;e++)t.add(e);for(let e=8533;e<=8536;e++)t.add(e);for(let e=8538;e<=8540;e++)t.add(e);for(let e=8677;e<=8679;e++)t.add(e);for(let e=8902;e<=8903;e++)t.add(e);for(let e=8907;e<=8910;e++)t.add(e);for(let e=8949;e<=8951;e++)t.add(e);for(let e=8972;e<=8987;e++)t.add(e);for(let e=9039;e<=9040;e++)t.add(e);for(let e=9068;e<=9069;e++)t.add(e);for(let e=9140;e<=9141;e++)t.add(e);for(let e=9148;e<=9150;e++)t.add(e);for(let e=9153;e<=9159;e++)t.add(e);for(let e=9205;e<=9218;e++)t.add(e);for(let e=9221;e<=9222;e++)t.add(e);for(let e=54098;e<=54101;e++)t.add(e);return t}]),Qx.push([10.71,()=>{const t=new Set([6316]);for(let e=8351;e<=8353;e++)t.add(e);for(let e=9294;e<=9297;e++)t.add(e);for(let e=22619;e<=22621;e++)t.add(e);for(let e=103586;e<=103594;e++)t.add(e);return t}]);async function DSe(t,e,i){const r=t&&t.getAtOrigin&&t.getAtOrigin("renderer",e.origin);if(r&&r.type==="unique-value"&&r.styleOrigin){const n=await hN(r.populateFromStyle());if(sr(i),n.ok===!1){const s=n.error;e?.messages&&e.messages.push(new kc("renderer:style-reference",`Failed to create unique value renderer from style reference: ${s.message}`,{error:s,context:e})),t.clear("renderer",e?.origin)}}}function Irt({displayField:t,editFieldsInfo:e,fields:i,objectIdField:r,title:n},s){if(!i)return null;const a=Ort({editFieldsInfo:e,fields:i,objectIdField:r},s);if(!a.length)return null;const o=Rrt({titleBase:n,fields:i,displayField:t}),l=Drt();return new Bp({title:o,content:l,fieldInfos:a})}const Mrt=(t,e)=>e.visibleFieldNames?e.visibleFieldNames.has(t.name):q8e(t,e);function Art({fields:t,ignoreFieldTypes:e,sortDisabled:i}){const r=t;return e&&(t=t.filter(n=>!e.includes(n.type))),t===r&&(t=t.slice()),i!==!0&&t.sort(Prt),t}function Prt(t,e){return t.type==="oid"?-1:e.type==="oid"?1:Mle(t)?-1:Mle(e)?1:(t.alias||t.name).toLocaleLowerCase().localeCompare((e.alias||e.name).toLocaleLowerCase())}function Ort(t,e){const i=e?.visibleFieldNames;return Art({fields:t.fields??[],ignoreFieldTypes:e?.ignoreFieldTypes||zrt,sortDisabled:e?.sortDisabled}).map(r=>new xN({fieldName:r.name,isEditable:C0e(r,t),label:r.alias,format:Lrt(r),visible:Mrt(r,{...t,visibleFieldNames:i})}))}function Lrt(t){switch(t.type){case"small-integer":case"integer":return new kp({digitSeparator:!0,places:0});case"single":case"double":return new kp({digitSeparator:!0,places:2});case"string":return p9e(t.name)?new kp({digitSeparator:!0,places:0}):void 0;default:return}}function Drt(){return[new tT,new eT]}function Rrt(t){const e=R8e(t),{titleBase:i}=t;return e?`${i}: {${e.trim()}}`:i??""}function Mle(t){return(t.name&&t.name.toLowerCase())==="name"?!0:t.alias?.toLowerCase()==="name"}const zrt=["geometry","blob","raster","guid","xml"],Us="FeatureLayer";function KO(t,e){return new ee("layer:unsupported",`Layer (${t.title}, ${t.id}) of type '${t.declaredClass}' ${e}`,{layer:t})}function Ale(t){return t&&t instanceof We}const LB=_rt();function DB(t,e,i){const r=!!i?.writeLayerSchema;return{enabled:r,ignoreOrigin:r}}let nt=class extends Uet(Kit(SKe(srt(_Ke(vKe(K1e(rrt(prt(mrt(LSe(urt(DJe(ASe(PSe(uA(aKe(LJe($t(Br))))))))))))))))))){constructor(...e){super(...e),this.attributeTableTemplate=null,this.charts=null,this.copyright=null,this.displayField=null,this.dynamicDataSource=null,this.fields=null,this.fieldsIndex=null,this.formTemplate=null,this.fullExtent=null,this.geometryType=null,this.graphicOrigin=new IJe(this),this.hasM=void 0,this.hasZ=void 0,this.infoFor3D=null,this.isTable=!1,this.labelsVisible=!0,this.labelingInfo=null,this.legendEnabled=!0,this.objectIdField=null,this.operationalLayerType="ArcGISFeatureLayer",this.outFields=null,this.path=null,this.popupEnabled=!0,this.popupTemplate=null,this.resourceInfo=null,this.screenSizePerspectiveEnabled=!0,this.spatialReference=at.WGS84,this.subtypeCode=null,this.supportedSourceTypes=new Set(["Feature Layer","Oriented Imagery Layer","Table","Catalog Layer"]),this.templates=null,this.timeInfo=null,this.title=null,this.sublayerTitleMode="item-title",this.type="feature",this.typeIdField=null,this.types=null,this.visible=!0,this._debouncedSaveOperations=ST(async(i,r,n)=>{const{save:s,saveAs:a}=await fe(()=>import("./featureLayerUtils-D7RFIz9i.js"),__vite__mapDeps([274,271,275]));switch(i){case 0:return s(this,r);case 1:return a(this,n,r)}})}destroy(){this.source?.destroy()}normalizeCtorArgs(e,i){return typeof e=="string"?{url:e,...i}:e}load(e){const i=e!=null?e.signal:null;if(this.portalItem?.loaded&&this.source)return this.addResolvingPromise(this.createGraphicsSource(i).then(n=>this.initLayerProperties(n))),Promise.resolve(this);const r=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection","Scene Service"]},e).catch(fl).then(async()=>{if(this.url&&this.layerId==null&&/FeatureServer|MapServer\/*$/i.test(this.url)){const n=await this._fetchFirstValidLayerId(i);n!=null&&(this.layerId=n)}if(!this.url&&!this._hasMemorySource())throw new ee("feature-layer:missing-url-or-source","Feature layer must be created with either a url or a source");return this.initLayerProperties(await this.createGraphicsSource(i))}).then(()=>det(this,"load",e));return this.addResolvingPromise(r),Promise.resolve(this)}get _titleCreator(){const e=this._get("_titleCreator");return Ir(e),new So({fieldsIndex:this.fieldsIndex,objectIdField:this.objectIdField,fields:this.fields,displayField:this.displayField,effectivePopupTemplate:this.popupTemplate??this.defaultPopupTemplate})}readCapabilities(e,i){return i=i.layerDefinition||i,Uxe(i,this.url)}get createQueryVersion(){return this.commitProperty("definitionExpression"),this.commitProperty("dynamicDataSource"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("gdbVersion"),this.commitProperty("historicMoment"),this.commitProperty("returnZ"),this.commitProperty("capabilities"),this.commitProperty("returnM"),(this._get("createQueryVersion")??0)+1}get editingEnabled(){return!(this.loaded&&!this.capabilities?.operations.supportsEditing)&&(this._isOverridden("editingEnabled")?this._get("editingEnabled"):this._hasMemorySource()||this.userHasEditingPrivileges)}set editingEnabled(e){this._overrideIfSome("editingEnabled",e)}readEditingEnabled(e,i){return this._readEditingEnabled(i,!1)}readEditingEnabledFromWebMap(e,i,r){return this._readEditingEnabled(i,!0,r)}writeEditingEnabled(e,i){this._writeEditingEnabled(e,i,!1)}writeEditingEnabledToWebMap(e,i,r,n){this._writeEditingEnabled(e,i,!0,n)}get effectiveEditingEnabled(){return fet(this)}get featureTitleFields(){return[...this._titleCreator.requiredFields]}set fieldConfigurations(e){if(this._hasMemorySource()||(this._override("fieldConfigurations",e),!this.loaded))return;const i=vrt(this,e);i&&this._set("popupTemplate",i)}get fieldConfigurations(){if(!this._hasMemorySource())return this._isOverridden("fieldConfigurations")?this._get("fieldConfigurations"):grt(this)||null}readIsTable(e,i){return(i=i?.layerDefinition??i).type==="Table"||!i.geometryType}writeIsTable(e,i,r,n){n?.writeLayerSchema&&Bn(r,e?"Table":"Feature Layer",i)}readGlobalIdField(e,i){return Pxe(i.layerDefinition||i)}readObjectIdField(e,i){return Oxe(i.layerDefinition||i)}writePopupTemplate(e,i,r,n){e&&(i[r]=e.toJSON({...n,writeFieldFormat:!n?.writeLayerSchema}))}get defaultPopupTemplate(){return this.createPopupTemplate()}set renderer(e){fse(e,this.fieldsIndex),this._set("renderer",e)}readRenderer(e,i,r){i=i.layerDefinition||i;const n=i.drawingInfo?.renderer;if(n){const s=HI(n,i,r)??void 0;return s||$e.getLogger(this).error("Failed to create renderer",{rendererDefinition:i.drawingInfo.renderer,layer:this,context:r}),s}return AX(i,r)}set source(e){const i=this._get("source");i!==e&&(Ale(i)&&this._resetMemorySource(i),Ale(e)&&this._initMemorySource(e),this._set("source",e))}castSource(e){return e?Array.isArray(e)||e instanceof We?new um({layer:this,items:e}):e:null}readSource(e,i){const r=ks.fromJSON(i.featureSet);return new um({layer:this,items:r?.features??[]})}readTemplates(e,i){const r=i.editFieldsInfo,n=r?.creatorField,s=r?.editorField;return e=e?.map(a=>Nh.fromJSON(a)),this._fixTemplates(e,n),this._fixTemplates(e,s),e}readTitle(e,i){const r=i.layerDefinition?.name??i.name,n=i.title||i.layerDefinition?.title;if(r){const s=this.portalItem?.title;if(this.sublayerTitleMode==="item-title")return this.url?YPe(this.url,r):r;let a=r;if(!a&&this.url){const o=wu(this.url);o!=null&&(a=o.title)}return a?(this.sublayerTitleMode==="item-title-and-service-name"&&s&&s!==a&&(a=s+" - "+a),dY(a)):void 0}if(this.sublayerTitleMode==="item-title"&&n)return n}readTitleFromWebMap(e,i){return i.title||i.layerDefinition?.name}readTypeIdField(e,i){let r=(i=i.layerDefinition||i).typeIdField;if(r&&i.fields){r=r.toLowerCase();const n=i.fields.find(s=>s.name.toLowerCase()===r);n&&(r=n.name)}return r}readTypes(e,i){e=(i=i.layerDefinition||i).types;const r=i.editFieldsInfo,n=r?.creatorField,s=r?.editorField;return e?.map(a=>(a=Rh.fromJSON(a),this._fixTemplates(a.templates,n),this._fixTemplates(a.templates,s),a))}readVisible(e,i){return i.layerDefinition?.defaultVisibility!=null?!!i.layerDefinition.defaultVisibility:i.visibility!=null?!!i.visibility:void 0}async addAttachment(e,i){const r=await GQe(this,e,i,Us);return this.lastEditsEventDate=new Date,r}async updateAttachment(e,i,r){const n=await qQe(this,e,i,r,Us);return this.lastEditsEventDate=new Date,n}async applyEdits(e,i){return WQe(this,e,i)}async uploadAssets(e,i){return YQe(this,e,i)}createFieldConfigurations(){return yrt(this)}createPopupTemplate(e){return Irt(this,e)}async createGraphicsSource(e){if(this._hasMemorySource()&&this.source)return this.source.load({signal:e});const{default:i}=await ppe(fe(()=>import("./FeatureLayerSource-BZFEdvGj.js"),__vite__mapDeps([276,45,50,277,278,279,89,90,280,281,32,27,282,283,57,55,56,15,18,154,17])),e);return new i({layer:this,supportedSourceTypes:this.supportedSourceTypes}).load({signal:e})}createQuery(){const e=net(this);e.dynamicDataSource=this.dynamicDataSource;const i=this.subtypeCode!=null?`${this.subtypeField} = ${this.subtypeCode}`:null,r=EC(this.definitionExpression,i);return e.where=r||"1=1",e}async deleteAttachments(e,i){const r=await ZQe(this,e,i,Us);return this.lastEditsEventDate=new Date,r}async fetchRecomputedExtents(e){return XQe(this,e,Us)}async getFeatureTitle(e,i){return this._titleCreator.getTitle(this,e,i)}async getFeatureTitles(e,i){return this._titleCreator.getTitles(this,e,i)}getFeatureType(e){return Rxe(this.types,this.typeIdField,e)}getFieldAlias(e){const i=this.getField(e);if(i)return this.getFieldConfiguration(i.name)?.alias||i.alias}getFieldConfiguration(e){return e=e.toLowerCase(),this.fieldConfigurations?.find(i=>i.name.toLowerCase()===e)}getFieldDomain(e,i){return aet(this,e,i,this.getField(e)?.domain??null)}async queryAttachments(e,i){return JQe(this,e,i,Us)}async queryFeatures(e,i){const r=await this.load(),n=await r.source.queryFeatures(_t.from(e)??r.createQuery(),i),s=this.graphicOrigin;if(n?.features)for(const a of n.features)a.layer=a.sourceLayer=r,a.origin=s;return n}async queryObjectIds(e,i){return await KQe(this,e,i,Us)}async queryFeatureCount(e,i){return QQe(this,e,i,Us)}async queryExtent(e,i){return eet(this,e,i,Us)}async queryRelatedFeatures(e,i){return tet(this,e,i,Us)}async queryRelatedFeaturesCount(e,i){return iet(this,e,i,Us)}async queryPivot(e,i){const{source:r,capabilities:n}=await this.load();if(!r.queryPivot||!n?.operations?.supportsQueryPivot)throw new ee(Us,"Layer source does not support queryPivot capability");const s=await fe(()=>import("./PivotQuery-CxEUJ1I6.js").then(o=>o.P),[]),a=await r.queryPivot(s.default.from(e),i);if(a?.features)for(const o of a.features)o.layer=o.sourceLayer=this;return a}async queryTopFeatures(e,i){const{source:r,capabilities:n}=await this.load();if(!r.queryTopFeatures||!n?.query?.supportsTopFeaturesQuery)throw new ee(Us,"Layer source does not support queryTopFeatures capability");const s=await fe(()=>import("./TopFeaturesQuery-yB6kIWgv.js"),[]),a=await r.queryTopFeatures(s.default.from(e),i);if(a?.features)for(const o of a.features)o.layer=o.sourceLayer=this;return a}async queryAttributeBins(e,i){const{source:r,capabilities:n}=await this.load();if(!r.queryAttributeBins)throw new ee(Us,"Layer source does not support queryAttributeBins capability");vet(e,n,Us);const s=await fe(()=>import("./AttributeBinsQuery-DJEW8CxQ.js"),__vite__mapDeps([211,22,29])),a=await r.queryAttributeBins(s.default.from(e),i);if(a.features)for(const o of a.features)o.layer=o.sourceLayer=this;return a}async queryTopObjectIds(e,i){const{source:r,capabilities:n}=await this.load();if(!r.queryTopObjectIds||!n?.query.supportsTopFeaturesQuery)throw new ee(Us,"Layer source does not support queryTopObjectIds capability");const s=await fe(()=>import("./TopFeaturesQuery-yB6kIWgv.js"),[]);return(await r.queryTopObjectIds(s.default.from(e),i)).filter(y8e)}async queryTopFeaturesExtent(e,i){const{source:r,capabilities:n}=await this.load();if(!r.queryTopExtents||!n?.query?.supportsTopFeaturesQuery)throw new ee(Us,"Layer source does not support queryTopExtents capability");const s=await fe(()=>import("./TopFeaturesQuery-yB6kIWgv.js"),[]);return r.queryTopExtents(s.default.from(e),i)}async queryTopFeatureCount(e,i){const{source:r,capabilities:n}=await this.load();if(!r.queryTopCount||!n?.query?.supportsTopFeaturesQuery)throw new ee(Us,"Layer source does not support queryFeatureCount capability");const s=await fe(()=>import("./TopFeaturesQuery-yB6kIWgv.js"),[]);return r.queryTopCount(s.default.from(e),i)}read(e,i){const r=e.featureCollection;if((r||e.type==="Feature Collection")&&(this.resourceInfo=e),r){const{layers:n,showLegend:s}=r;n?.length===1&&(super.read(n[0],i),s!=null&&super.read({showLegend:s},i))}super.read(e,i),i&&i.origin==="service"&&(this.revert(["objectIdField","fields","timeInfo","dateFieldsTimeZone"],"service"),this.spatialReference||this.revert(["spatialReference"],"service"))}write(e,i){i={...i,origin:i?.origin??void 0,writeLayerSchema:i?.writeLayerSchema??this._hasMemorySource()};const{origin:r,layerContainerType:n,messages:s}=i;if(this.dynamicDataSource)return s?.push(KO(this,"using a dynamic data source cannot be written to web scenes, web maps and feature service items")),null;if(this.isTable){if((r==="web-map"||r==="web-scene")&&n!=="tables")return s?.push(KO(this,`a table source can only be written to tables, not ${n}`)),null;if(this._hasMemorySource())return s?.push(KO(this,"using an in-memory table source cannot be written to web scenes and web maps")),null}else if(this.loaded&&(r==="web-map"||r==="web-scene")&&n==="tables")return s?.push(KO(this,"using a non-table source cannot be written to tables in web maps or web scenes")),null;return super.write(e,i)}clone(){if(this._hasMemorySource())throw new ee(Us,`FeatureLayer (title: ${this.title}, id: ${this.id}) created using in-memory source cannot be cloned`);return super.clone()}serviceSupportsSpatialReference(e){return!!this.loaded&&(this.source?.type==="memory"||Crt(this,e))}async save(e){return this._debouncedSaveOperations(0,e)}async saveAs(e,i){return this._debouncedSaveOperations(1,i,e)}_readEditingEnabled(e,i,r){let n=e.layerDefinition?.capabilities;return n?this._hasEditingCapability(n):(n=e.capabilities,i&&r?.origin==="web-map"&&!this._hasMemorySource()&&n?this._hasEditingCapability(n):void 0)}_hasEditingCapability(e){return e.toLowerCase().split(",").map(i=>i.trim()).includes("editing")}_writeEditingEnabled(e,i,r,n){if(!e){const s=this.capabilities?.operations?.supportsSync?"Query,Sync":"Query";Bn("layerDefinition.capabilities",s,i),r&&!n?.writeLayerSchema&&(i.capabilities=s)}}_fetchFirstValidLayerId(e){return Nt(this.url??"",{query:{f:"json",...this.customParameters,token:this.apiKey},responseType:"json",signal:e}).then(i=>{const r=i.data;if(r)return this.applyPreferredHost(r),this.findFirstValidLayerId(r)})}async initLayerProperties(e){return this._set("source",e),e.sourceJSON&&(this.sourceJSON=e.sourceJSON,this.read(e.sourceJSON,{origin:"service",portalItem:this.portalItem,portal:this.portalItem?.portal,url:this.parsedUrl})),this._verifySource(),this._verifyFields(),fse(this.renderer,this.fieldsIndex),$0e(this.timeInfo,this.fieldsIndex),this._hasMemorySource()&&this.geometryType==="mesh"&&(this.capabilities.query.supportsReturnMesh=!0),DSe(this,{origin:"service"})}async hasDataChanged(){return ret(this)}async fetchPublishingStatus(){const e=this.source;return e?.fetchPublishingStatus?e.fetchPublishingStatus():"unavailable"}_verifyFields(){const e=this.parsedUrl?.path??"undefined";this.objectIdField||console.log("FeatureLayer: 'objectIdField' property is not defined (url: "+e+")"),this.isTable||this._hasMemorySource()||e.search(/\/FeatureServer\//i)!==-1||this.fields?.some(i=>i.type==="geometry")||console.log("FeatureLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+e+")")}_fixTemplates(e,i){e&&e.forEach(r=>{const n=r.prototype?.attributes;n&&i&&delete n[i]})}_verifySource(){if(this._hasMemorySource()){if(this.url)throw new ee("feature-layer:mixed-source-and-url","FeatureLayer cannot be created with both an in-memory source and a url")}else if(!this.url)throw new ee("feature-layer:source-or-url-required","FeatureLayer requires either a url, a valid portal item or a source")}_initMemorySource(e){e.forEach(i=>{i.layer=this,i.sourceLayer=this}),this.addHandles([e.on("after-add",i=>{i.item.layer=this,i.item.sourceLayer=this}),e.on("after-remove",i=>{i.item.layer=null,i.item.sourceLayer=null})],"fl-source")}_resetMemorySource(e){e.forEach(i=>{i.layer=null,i.sourceLayer=null}),this.removeHandles("fl-source")}_hasMemorySource(){return!(this.url||!this.source)}findFirstValidLayerId(e){return Array.isArray(e.layers)&&e.layers.length>0?e.layers[0].id:Array.isArray(e.tables)&&e.tables.length>0?e.tables[0].id:void 0}};d([m({clonable:!1,readOnly:!0})],nt.prototype,"_titleCreator",null),d([m(NKe)],nt.prototype,"attributeTableTemplate",void 0),d([Ve("service","capabilities")],nt.prototype,"readCapabilities",null),d([m({json:{origins:{"web-scene":{write:!1}},write:!0}})],nt.prototype,"charts",void 0),d([m({readOnly:!0})],nt.prototype,"createQueryVersion",null),d([m({json:{read:{source:"layerDefinition.copyrightText"}}})],nt.prototype,"copyright",void 0),d([m({json:{read:{source:"layerDefinition.displayField"}}})],nt.prototype,"displayField",void 0),d([m({types:tv,readOnly:!0})],nt.prototype,"defaultSymbol",void 0),d([m({type:bd})],nt.prototype,"dynamicDataSource",void 0),d([m({type:Boolean})],nt.prototype,"editingEnabled",null),d([Ve(["portal-item","web-scene"],"editingEnabled",["layerDefinition.capabilities"])],nt.prototype,"readEditingEnabled",null),d([Ve("web-map","editingEnabled",["capabilities","layerDefinition.capabilities"])],nt.prototype,"readEditingEnabledFromWebMap",null),d([qe(["portal-item","web-scene"],"editingEnabled",{"layerDefinition.capabilities":{type:String}})],nt.prototype,"writeEditingEnabled",null),d([qe("web-map","editingEnabled",{capabilities:{type:String},"layerDefinition.capabilities":{type:String}})],nt.prototype,"writeEditingEnabledToWebMap",null),d([m({readOnly:!0})],nt.prototype,"effectiveEditingEnabled",null),d([m({clonable:!1,readOnly:!0})],nt.prototype,"featureTitleFields",null),d([m({type:[qy],json:{name:"layerDefinition.fieldConfigurations",write:{overridePolicy(t,e,i){return{enabled:!i?.writeLayerSchema,ignoreOrigin:this.originIdOf(e)===1}}}}})],nt.prototype,"fieldConfigurations",null),d([m({...LB.fields,json:{read:{source:"layerDefinition.fields"},origins:{service:{name:"fields"},"web-map":{write:{target:"layerDefinition.fields",overridePolicy:DB}}}}})],nt.prototype,"fields",void 0),d([m(LB.fieldsIndex)],nt.prototype,"fieldsIndex",void 0),d([m({type:ld,json:{name:"formInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],nt.prototype,"formTemplate",void 0),d([m({json:{read:{source:"layerDefinition.extent"}}})],nt.prototype,"fullExtent",void 0),d([m({json:{origins:{"web-map":{write:{target:"layerDefinition.geometryType",overridePolicy:DB,writer(t,e,i){const r=t?HG.toJSON(t):null;r&&Bn(i,r,e)}}}},read:{source:"layerDefinition.geometryType",reader:HG.read}}})],nt.prototype,"geometryType",void 0),d([m({readOnly:!0,clonable:!1})],nt.prototype,"graphicOrigin",void 0),d([m({json:{read:{source:"layerDefinition.hasM"}}})],nt.prototype,"hasM",void 0),d([m({json:{read:{source:"layerDefinition.hasZ"}}})],nt.prototype,"hasZ",void 0),d([m(RKe)],nt.prototype,"id",void 0),d([m({readOnly:!0,json:{origins:{service:{read:!0}},read:!1}})],nt.prototype,"infoFor3D",void 0),d([m({json:{origins:{"web-map":{write:{target:"layerDefinition.type"}}}}})],nt.prototype,"isTable",void 0),d([Ve("service","isTable",["type","geometryType"]),Ve("isTable",["layerDefinition.type","layerDefinition.geometryType"])],nt.prototype,"readIsTable",null),d([qe("web-map","isTable")],nt.prototype,"writeIsTable",null),d([m(FN)],nt.prototype,"labelsVisible",void 0),d([m({type:[vr],json:{origins:{service:{name:"drawingInfo.labelingInfo",read:Cle,write:!1}},name:"layerDefinition.drawingInfo.labelingInfo",read:Cle,write:{layerContainerTypes:Mr}}})],nt.prototype,"labelingInfo",void 0),d([m((()=>{const t=de(DKe);return t.json.origins["portal-item"]={write:{target:"layerDefinition.drawingInfo.transparency",writer(e,i,r){Bn(r,mN(e),i)}}},t})())],nt.prototype,"opacity",void 0),d([m(OKe)],nt.prototype,"legendEnabled",void 0),d([m({type:["show","hide"],json:(()=>{const t=de(hxe.json);return t.origins["portal-item"]={read:!1,write:!1},t})()})],nt.prototype,"listMode",void 0),d([Ve("globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"])],nt.prototype,"readGlobalIdField",null),d([m({json:{origins:{"web-map":{write:{target:"layerDefinition.objectIdField",overridePolicy:DB}}}}})],nt.prototype,"objectIdField",void 0),d([Ve("objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"])],nt.prototype,"readObjectIdField",null),d([m({type:["ArcGISFeatureLayer"],json:{write:{target:"layerType",ignoreOrigin:!0,layerContainerTypes:Mr}}})],nt.prototype,"operationalLayerType",void 0),d([m(LB.outFields)],nt.prototype,"outFields",void 0),d([m({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],nt.prototype,"path",void 0),d([m(zN)],nt.prototype,"popupEnabled",void 0),d([m({type:Bp,json:{name:"popupInfo",write:!0}})],nt.prototype,"popupTemplate",void 0),d([qe("popupTemplate")],nt.prototype,"writePopupTemplate",null),d([m({readOnly:!0})],nt.prototype,"defaultPopupTemplate",null),d([m({types:fA,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}},"web-scene":{types:Nit,name:"layerDefinition.drawingInfo.renderer",write:{layerContainerTypes:Mr,overridePolicy:(t,e,i)=>({ignoreOrigin:i?.writeLayerSchema,layerContainerTypes:Mr})}}},write:{target:"layerDefinition.drawingInfo.renderer",overridePolicy:(t,e,i)=>({ignoreOrigin:i?.writeLayerSchema,layerContainerTypes:Mr})}}})],nt.prototype,"renderer",null),d([Ve("service","renderer",["drawingInfo.renderer","defaultSymbol"]),Ve("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],nt.prototype,"readRenderer",null),d([m()],nt.prototype,"resourceInfo",void 0),d([m((()=>{const t=de(AKe);return t.json.origins["portal-item"]={read:!1,write:!1},t})())],nt.prototype,"screenSizePerspectiveEnabled",void 0),d([m({clonable:!1})],nt.prototype,"source",null),d([Ii("source")],nt.prototype,"castSource",null),d([Ve("portal-item","source",["featureSet"]),Ve("web-map","source",["featureSet"])],nt.prototype,"readSource",null),d([m({json:{read:{source:"layerDefinition.extent.spatialReference"}}})],nt.prototype,"spatialReference",void 0),d([m({type:Number})],nt.prototype,"subtypeCode",void 0),d([m({type:[Nh]})],nt.prototype,"templates",void 0),d([Ve("templates",["editFieldsInfo","creatorField","editorField","templates"])],nt.prototype,"readTemplates",null),d([m({type:Gs})],nt.prototype,"timeInfo",void 0),d([m()],nt.prototype,"title",void 0),d([Ve("service","title",["name"]),Ve("portal-item","title",["layerDefinition.title","layerDefinition.name","title"])],nt.prototype,"readTitle",null),d([Ve("web-map","title",["layerDefinition.name","title"])],nt.prototype,"readTitleFromWebMap",null),d([m({type:String})],nt.prototype,"sublayerTitleMode",void 0),d([m({json:{read:!1}})],nt.prototype,"type",void 0),d([m({type:String})],nt.prototype,"typeIdField",void 0),d([Ve("service","typeIdField"),Ve("typeIdField",["layerDefinition.typeIdField"])],nt.prototype,"readTypeIdField",null),d([m({type:[Rh]})],nt.prototype,"types",void 0),d([Ve("service","types",["types"]),Ve("types",["layerDefinition.types"])],nt.prototype,"readTypes",null),d([m({type:Boolean,json:{origins:{"portal-item":{write:{target:"layerDefinition.defaultVisibility",layerContainerTypes:Mr}}}}})],nt.prototype,"visible",void 0),d([Ve("portal-item","visible",["visibility","layerDefinition.defaultVisibility"])],nt.prototype,"readVisible",null),nt=d([U("esri.layers.FeatureLayer")],nt);const Frt=Object.freeze(Object.defineProperty({__proto__:null,get default(){return nt}},Symbol.toStringTag,{value:"Module"}));let im=class extends _e{constructor(e){super(e),this.moment=null,this.fullUpdate=!1,this.validateErrorsCreated=!1,this.exceededTransferLimit=null,this.serviceEdits=null,this.discoveredSubnetworks=null}};d([m({type:Date,json:{type:Number,write:{writer:(t,e)=>{e.moment=t?t.getTime():null}}}})],im.prototype,"moment",void 0),d([m({type:Boolean,json:{write:!0}})],im.prototype,"fullUpdate",void 0),d([m({type:Boolean,json:{write:!0}})],im.prototype,"validateErrorsCreated",void 0),d([m({type:Boolean,json:{write:!0}})],im.prototype,"exceededTransferLimit",void 0),d([m({type:[Object],json:{write:!0}})],im.prototype,"serviceEdits",void 0),d([m({type:[Object],json:{write:!0}})],im.prototype,"discoveredSubnetworks",void 0),im=d([U("esri.rest.networks.support.ValidateNetworkTopologyResult")],im);const Nrt=im,jrt=Gn()({Pending:"job-waiting",InProgress:"job-executing",Completed:"job-succeeded"});let $y=class extends Nrt{constructor(e){super(e),this.statusUrl=null,this.status=null,this.submissionTime=null,this.lastUpdatedTime=null,this._timer=void 0}destroy(){clearInterval(this._timer)}async checkJobStatus(e){const i={...e,query:{f:"json"}},{data:r}=await Nt(this.statusUrl,i);return this.read(r),this.editsResolver&&this.editsResolver.resolve({edits:null,addedFeatures:[],updatedFeatures:[],deletedFeatures:[],addedAttachments:[],updatedAttachments:[],deletedAttachments:[],exceededTransferLimit:!0,historicMoment:null}),this}async waitForJobCompletion(e={}){const{interval:i=1e3,statusCallback:r}=e;return new Promise((n,s)=>{this._clearTimer();const a=setInterval(()=>{this._timer||s(Hi()),this.checkJobStatus().then(o=>{const{status:l}=o;switch(this.status=l,l){case"job-succeeded":this._clearTimer(),n(this);break;case"job-waiting":case"job-executing":r&&r(this)}},o=>{this._clearTimer(),s(o)})},i);this._timer=a})}_clearTimer(){clearInterval(this._timer),this._timer=void 0}};d([m()],$y.prototype,"editsResolver",void 0),d([m({type:String,json:{write:!0}})],$y.prototype,"statusUrl",void 0),d([pt(jrt)],$y.prototype,"status",void 0),d([m({type:Date,json:{type:Number,write:{writer:(t,e)=>{e.submissionTime=t?t.getTime():null}}}})],$y.prototype,"submissionTime",void 0),d([m({type:Date,json:{type:Number,write:{writer:(t,e)=>{e.lastUpdatedTime=t?t.getTime():null}}}})],$y.prototype,"lastUpdatedTime",void 0),$y=d([U("esri.networks.support.TopologyValidationJobInfo")],$y);const Vrt=$y;function Brt(t,e,i="from"){const{fromRuleElement:r,viaRuleElement:n,toRuleElement:s}=RSe(t),a=[];switch(t.ruleType){case 2:case 3:i==="from"&&Sd(e,r,!1)?a.push(s):i==="to"&&Sd(e,s,!1)&&a.push(r);break;case 4:case 1:Sd(e,r,!0)?a.push(s):Sd(e,s,!0)&&a.push(r);break;case 5:n&&(Sd(e,n,!0)?(a.push(r),a.push(s)):(Sd(e,r,!0)||Sd(e,s,!0))&&a.push(n));break;default:return[]}return a}function FE(t,e,i){const{fromRuleElement:r,viaRuleElement:n,toRuleElement:s}=RSe(t);switch(t.ruleType){case 2:case 3:return QO(e,i,r,s,!1,!1);case 4:case 1:return QO(e,i,r,s,!0,!0);case 5:return QO(e,i,r,n,!0,!0)||QO(e,i,s,n,!0,!0);default:return!1}}function QO(t,e,i,r,n,s){if(!i||!r)return!1;const a=Sd(t,i,s),o=Sd(e,r,s);if(n){const l=Sd(t,r,s),c=Sd(e,i,s);return a&&o||l&&c}return a&&o}function Urt(t,e){const i=t.terminal?.terminalId,r=e.terminalId;return i==null&&r==null||(i===1?r==null||r===1:i===r)}function Sd(t,e,i){const{assetGroupCode:r,assetTypeCode:n}=t;return("layerId"in t?t.layerId===e.networkSource?.layerId:t.networkSourceId===e.networkSource?.sourceId)&&(r==null||r===e.assetGroup?.assetGroupCode)&&(n==null||n===e.assetType?.assetTypeCode)&&(!i||!("terminalId"in t)||Urt(e,t))}function RSe(t){return{fromRuleElement:{networkSource:t.fromNetworkSource,assetGroup:t.fromAssetGroup,assetType:t.fromAssetType,terminal:t.fromTerminal},viaRuleElement:t.viaNetworkSource?{networkSource:t.viaNetworkSource,assetGroup:t.viaAssetGroup,assetType:t.viaAssetType,terminal:t.viaTerminal}:void 0,toRuleElement:{networkSource:t.toNetworkSource,assetGroup:t.toAssetGroup,assetType:t.toAssetType,terminal:t.toTerminal}}}function F1(t){let e=null,i=null,r=null;if(b0e(t))e=uq(t),[i,r]=Hrt(t);else if(Uy(t)){e=t.parent?.layerId??null;const[n]=Ez(t);n===t.subtypeField&&(i=t.subtypeCode)}else e=t.layerId??null;return{layerId:e,assetGroupCode:i,assetTypeCode:r}}function uq(t){const{sourceLayer:e}=t;let i;return IZ(e)?i=e.layerId:Uy(e)&&(i=e.parent?.layerId),i??null}function Hrt(t){const[e,i]=Ez(t.sourceLayer);return[e?t.attributes[e]:null,i?t.attributes[i]:null]}function Ez(t){return!t||!("fieldsIndex"in t)?[null,null]:[t.fieldsIndex.normalizeFieldName("assetGroup")??null,t.fieldsIndex.normalizeFieldName("assetType")??null]}async function Ple(t,e){if(t==="Utility Network Layer"){const{default:i}=await fe(()=>Promise.resolve().then(()=>snt),void 0);return new i({layerUrl:e})}return null}async function Grt(t){let e="portalItem"in t?t:{portalItem:t};!e.portalItem||e.portalItem instanceof Mt||(e={...e,portalItem:new Mt(e.portalItem)});const i=e.portalItem;if(await i.load(),i.type!=="Feature Service")throw new ee("portal:unknown-item-type","Unknown item type '${type}'",{type:i.type});const r=i.url,n=await Nt(r,{responseType:"json",query:{f:"json"}}),s="Network Layer";if(n.data.type?.includes(s))return Ple(n.data.type,r);if(n.data.layers){const a=n.data.layers.find(o=>o.type.includes(s));if(a){const o=`${r}/${a.id}`;return Ple(a.type,o)}}return null}let bn=class extends uA(Fv){static fromPortalItem(e){return Grt(e)}constructor(e){super(e),this.id=null,this.title=null,this.layerUrl=null,this.dataElement=null,this.fullExtent=null,this.spatialReference=null,this.type=null,this.sourceJSON=null,this._historicMoment=null,this._gdbVersion=null,this._sourceIdByLayerId=new Map,this._layerIdBySourceId=new Map,this._applyEditsHandler=i=>{const{serviceUrl:r,gdbVersion:n,result:s}=i,a=r===this.featureServiceUrl,o=jC(r,n,this.gdbVersion);a&&o&&s.then(l=>{mD(r,n)&&(this.historicMoment=l.historicMoment)})},this._updateMomentHandler=i=>{const{serviceUrl:r,gdbVersion:n,moment:s}=i,a=r===this.featureServiceUrl,o=jC(r,n,this.gdbVersion);a&&o&&(this.historicMoment=s)},this.when().then(()=>{this.addHandles([nxe(this._applyEditsHandler),sxe(this._updateMomentHandler)])},()=>{})}initialize(){this.when().catch(e=>{ss(e)||$e.getLogger(this).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:e})})}get loaded(){return super.loaded}get datasetName(){return this.dataElement?.name??null}get owner(){return this.dataElement?.userIdentity??null}get schemaGeneration(){return this.dataElement?.schemaGeneration??null}get parsedUrl(){return rn(this.layerUrl)}get featureServiceUrl(){return wu(this.parsedUrl.path).url.path}get networkServiceUrl(){return this.featureServiceUrl.replace(/\/FeatureServer/i,"/UtilityNetworkServer")}get layerId(){return wu(this.parsedUrl.path).sublayer}get networkSystemLayers(){return null}get gdbVersion(){return this._gdbVersion}set gdbVersion(e){this._gdbVersion=e}get historicMoment(){return this._historicMoment}set historicMoment(e){this._historicMoment=e}async load(e){return this.addResolvingPromise(this._load(e)),this}async _load(e){await Promise.all([this._fetchDataElement(this.featureServiceUrl,this.layerId.toString(),e),this._fetchLayerMetaData(this.layerUrl,e)])}getLayerIdBySourceId(e){if(!this.dataElement)return null;const i=this._layerIdBySourceId.get(e);if(i!=null)return i;const r=this.dataElement.domainNetworks,n=this._traverseNetworkSources(r,this._layerIdBySourceId,"sourceId","layerId",e);return n>=0?n:null}getSourceIdByLayerId(e){if(!this.dataElement)return null;const i=this._sourceIdByLayerId.get(e);if(i!=null)return i;const r=this.dataElement.domainNetworks,n=this._traverseNetworkSources(r,this._sourceIdByLayerId,"layerId","sourceId",e);return n>=0?n:null}getObjectIdsFromElements(e){const i=[],r=new Map;for(const s of e){const a=this.getLayerIdBySourceId(s.networkSourceId);if(a==null)continue;let o=r.get(a);o===void 0&&(o=[]),o.push(s.objectId),r.set(a,o)}const n=this.featureServiceUrl;return r.forEach((s,a)=>i.push({layerUrl:`${n}/${a}`,objectIds:s})),i}async queryNamedTraceConfigurations(e,i){const[{queryNamedTraceConfigurations:r},{default:n}]=await Promise.all([fe(()=>import("./queryNamedTraceConfigurations-DoFyn-Gu.js"),[]),fe(()=>import("./QueryNamedTraceConfigurationsParameters-PRmhD9m9.js"),[])]),s=this.networkServiceUrl,a=n.from(e);return(await r(s,a,{...i}))?.namedTraceConfigurations}async validateTopology(e,i){if(!e.validateArea)throw new ee("network:undefined-validateArea","the network must have validateArea defined in the validate network topology parameters.");const[{validateNetworkTopology:r},{default:n}]=await Promise.all([fe(()=>import("./validateNetworkTopology-0BOsd87W.js"),[]),fe(()=>import("./ValidateNetworkTopologyParameters-27uJYvDs.js"),[])]),s=n.from(e);mD(this.featureServiceUrl,this.gdbVersion||null)?(s.sessionID=yG,await Toe(this.featureServiceUrl,this.gdbVersion,!0)):s.sessionID=null,s.gdbVersion=this.gdbVersion;const a=this.networkServiceUrl,o=this.featureServiceUrl,l=koe(o,null,this.gdbVersion,!0),c=await r(a,s,{...i});if(c?.serviceEdits){const h=[];for(const f of c.serviceEdits){const{editedFeatures:g}=f,y=g?.spatialReference?new at(g.spatialReference):null;h.push({layerId:f.layerId,editedFeatures:{adds:g?.adds?.map(b=>eL(b,y))||[],updates:g?.updates?.map(b=>({original:eL(b[0],y),current:eL(b[1],y)}))||[],deletes:g?.deletes?.map(b=>eL(b,y))||[],spatialReference:y}})}l.resolve({edits:null,addedFeatures:[],updatedFeatures:[],deletedFeatures:[],addedAttachments:[],updatedAttachments:[],deletedAttachments:[],editedFeatures:h,exceededTransferLimit:!1,historicMoment:c.moment})}return c}async submitTopologyValidationJob(e,i){let r=null;if(!e.validateArea)throw new ee("network:undefined-validateArea","the network must have validateArea defined in the validate network topology parameters.");if(!this.gdbVersion){const h=this.layerUrl.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,"");r=(await Nt(h,{responseType:"json",query:{f:"json"}})).data.defaultVersionName}const[{submitValidateNetworkTopologyJob:n},{default:s}]=await Promise.all([fe(()=>import("./validateNetworkTopology-0BOsd87W.js"),[]),fe(()=>import("./ValidateNetworkTopologyParameters-27uJYvDs.js"),[])]),a=s.from(e);mD(this.featureServiceUrl,this.gdbVersion||null)?(a.sessionID=yG,await Toe(this.featureServiceUrl,this.gdbVersion,!0)):a.sessionID=null,a.gdbVersion=this.gdbVersion||r;const o=this.networkServiceUrl,l=this.featureServiceUrl?koe(this.featureServiceUrl,null,this.gdbVersion,!0):void 0,c=await n(o,a,{...i});return new Vrt({statusUrl:c,editsResolver:l})}getSourceTypeById(e){if(!this.dataElement)return null;for(const i of this.dataElement.domainNetworks)for(const r of[i.edgeSources??[],i.junctionSources??[]])for(const n of r)if(n.sourceId===e)return r===i.edgeSources?"edge":"junction";return null}_traverseNetworkSources(e,i,r,n,s){for(const a of e)for(const o of[a.edgeSources??[],a.junctionSources??[]])for(const l of o)if(l[r]===s)return i.set(s,l[n]),l[n];return-1}async _fetchLayerMetaData(e,i){const r=await Nt(e,{responseType:"json",query:{f:"json"},...i});this.sourceJSON=r.data,this.read(r.data,{origin:"service"})}async _fetchDataElement(e,i,r){if(this.dataElement)return;const n=await Nt(`${e}/queryDataElements`,{responseType:"json",query:{layers:JSON.stringify([i]),f:"json"},...r}).then(s=>s.data.layerDataElements?.[0]);n&&this.read(n,{origin:"service"})}};function eL(t,e){return new Hr({attributes:t.attributes,geometry:Vp({...t.geometry,spatialReference:e})})}d([m({type:String,nonNullable:!0,json:{origins:{"web-map":{read:!0,write:{isRequired:!0}},service:{read:!0}},read:!1}})],bn.prototype,"id",void 0),d([m({type:String,nonNullable:!0,json:{origins:{"web-map":{read:!0,write:{isRequired:!0}},service:{read:{source:"name"}}},read:!1}})],bn.prototype,"title",void 0),d([m({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"url"},write:{target:"url",isRequired:!0}}},read:!1}})],bn.prototype,"layerUrl",void 0),d([m({type:Object,json:{origins:{service:{read:!0}},read:!1}})],bn.prototype,"dataElement",void 0),d([m({type:Wt,json:{origins:{service:{read:{source:"extent"}}},read:!1}})],bn.prototype,"fullExtent",void 0),d([m({type:at,json:{origins:{service:{read:{source:"extent.spatialReference"}}},read:!1}})],bn.prototype,"spatialReference",void 0),d([m({type:["utility","trace"],readOnly:!0,json:{read:!1,write:!1}})],bn.prototype,"type",void 0),d([m({readOnly:!0})],bn.prototype,"datasetName",null),d([m({readOnly:!0})],bn.prototype,"owner",null),d([m({readOnly:!0})],bn.prototype,"schemaGeneration",null),d([m({readOnly:!0})],bn.prototype,"parsedUrl",null),d([m({readOnly:!0})],bn.prototype,"featureServiceUrl",null),d([m({readOnly:!0})],bn.prototype,"networkServiceUrl",null),d([m({readOnly:!0})],bn.prototype,"layerId",null),d([m()],bn.prototype,"sourceJSON",void 0),d([m({readOnly:!0})],bn.prototype,"networkSystemLayers",null),d([m({type:String})],bn.prototype,"gdbVersion",null),d([m({type:Date})],bn.prototype,"historicMoment",null),d([m()],bn.prototype,"_historicMoment",void 0),d([m()],bn.prototype,"_gdbVersion",void 0),bn=d([U("esri.networks.Network")],bn);const qrt=bn;let Ty=class extends rg(Fv){constructor(e){super(e),this.rulesCategorized={attachment:[],containment:[],connectivity:[]},this.request=Nt}initialize(){}async load(e){const i=this.rulesLayer.load(e).then(()=>this._initializeRulesTable());return this.addResolvingPromise(i),this}getFeaturesCanAssociateWithClause(e,i,r){const n=new Map,[s,a]=Ez(e.sourceLayer);if(!s||!a)return"";const o=F1(e),l=F1(i);r.forEach(h=>{const{type:f,direction:g}=h;this._getRulesForAssociationType(f).forEach(y=>{Brt(y,o,g).filter(b=>b.networkSource?.layerId===l.layerId).forEach(b=>{const _=b.assetGroup?.assetGroupCode,S=b.assetType?.assetTypeCode;if(_!=null&&S!=null){const $=n.get(_)??new Set;$.add(S),n.set(_,$)}})})});let c=[];return this._mergeAssetCodes(n).forEach((h,f)=>{const g=`${s} IN (${f})`,y=f8e(a,[...h]);g&&y&&c.push(EC(g,y))}),c.length>1&&(c=c.map(h=>`(${h})`)),c.join(" OR ")}getFeaturesCanAssociateWith(e,i,r){return uq(e)==null?[]:i.filter(n=>this.canAssociateFeatures(e,n,r))}canAssociateFeatures(e,i,r){if(!this._canSupportAssociations([e,i]))return!1;const n=F1(e),s=F1(i);return r.some(a=>{const{type:o,direction:l}=a;return this._getRulesForAssociationType(o).some(c=>l==="to"?FE(c,s,n):FE(c,n,s))})}getLayersCanAssociateWith(e,i,r){return uq(e)==null?[]:i.filter(n=>this.canAssociateFeatureToLayer(e,n,r))}canAssociateFeatureToLayer(e,i,r){if(!this._canSupportAssociations([e,i]))return!1;const n=F1(e),s=F1(i);return r.some(a=>{const{type:o,direction:l}=a;return this._getRulesForAssociationType(o).some(c=>l==="to"?FE(c,s,n):FE(c,n,s))})}getFeatureSQL(e,i){const r=e.layerId.toString(),n=e.fieldsIndex?.normalizeFieldName("assetGroup"),s=e.fieldsIndex?.normalizeFieldName("assetType"),a=n?i.attributes[n]:null,o=s?i.attributes[s]:null,l=this.rulesHash[r];if(l){const c=l.assetGroupHash[a];if(c)return c.assetTypeHash[o]||null}return null}_initializeRulesTable(){const e={},i=[{networkSourceId:"fromNetworkSource",assetGroupId:"fromAssetGroup",assetTypeId:"fromAssetType"},{networkSourceId:"toNetworkSource",assetGroupId:"toAssetGroup",assetTypeId:"toAssetType"},{networkSourceId:"viaNetworkSource",assetGroupId:"viaAssetGroup",assetTypeId:"viaAssetType"}];this.rulesCategorized={attachment:[],containment:[],connectivity:[]};for(const r of this.rules){if(r.ruleType===3){this.rulesCategorized.attachment.push(r);continue}if(r.ruleType===2){this.rulesCategorized.containment.push(r);continue}if(r.ruleType===1){this.rulesCategorized.connectivity.push(r);continue}this.rulesCategorized.connectivity.push(r);let n=[[0,1],[1,0]];r.ruleType===5&&(n=[[0,2],[2,0],[1,2],[2,1]]);for(const s of n){const a=s.shift(),o=s.shift();let l=!1;switch(r.ruleType){case 5:l=a===0||a===1;break;case 4:l=a===1}const c=i[a],h=r[c.networkSourceId]?.layerId.toString()??"",f=r[c.assetGroupId]?.assetGroupCode?.toString(),g=r[c.assetTypeId],y=g?.assetTypeCode?.toString(),b=i[o],_=r[b.networkSourceId]?.layerId.toString()??"",S=r[b.assetGroupId]?.assetGroupCode?.toString(),$=r[b.assetTypeId],C=$?.assetTypeCode?.toString(),I=e[h]??{assetGroupHash:{}};if(!(f&&y&&S&&C))continue;const P=I.assetGroupHash[f]??{assetTypeHash:{}},O=P.assetTypeHash[y]??{};if(O[_]=O[_]??{},l){O[h]=O[h]??{};const R=EC(`assetgroup = ${f}`,`assettype = ${y}`);$?.connectivityPolicy==="esriNECPEndVertex"?O[h].endVertex=O[h]?.endVertex?`${O[h].endVertex}`:`(${R})`:O[h].anyVertex=O[h].anyVertex?`${O[h].anyVertex}`:`(${R})`}const N=EC(`assetgroup = ${S}`,`assettype = ${C}`);$?.connectivityPolicy==="esriNECPEndVertex"?O[_].endVertex=O[_]?.endVertex?Z9(O[_].endVertex,N):`(${N})`:O[_].anyVertex=O[_]?.anyVertex?Z9(O[_].anyVertex,N):`(${N})`,P.assetTypeHash[y]=O,I.assetGroupHash[f]=P,e[h]=I}}this._set("rulesHash",e)}_getRulesForAssociationType(e){const{rulesCategorized:i}=this;switch(e){case"attachment":return i.attachment;case"containment":return i.containment;case"connectivity":case"junction-junction-connectivity":return i.connectivity.filter(r=>r.ruleType===1);case"junction-edge-from-connectivity":case"junction-edge-midspan-connectivity":case"junction-edge-to-connectivity":return i.connectivity.filter(r=>r.ruleType===4||r.ruleType===5);default:return[]}}_areSetsEqual(e,i){if(e.size!==i.size)return!1;for(const r of e)if(!i.has(r))return!1;return!0}_mergeAssetCodes(e){const i=new Map,r=new Set;for(const[n,s]of e){const a=new Set([n]);for(const[l,c]of e)n!==l&&!r.has(l)&&this._areSetsEqual(s,c)&&(a.add(l),r.add(l));const o=Array.from(a).sort().join(",");i.set(o,s)}return i}_canSupportAssociations(e){return e.every(i=>{const r=b0e(i)?i.sourceLayer:i,[n,s]=Ez(r);return n!=null&&s!=null})}};d([m({constructOnly:!0})],Ty.prototype,"rulesLayer",void 0),d([m({constructOnly:!0})],Ty.prototype,"rules",void 0),d([m({readOnly:!0})],Ty.prototype,"rulesHash",void 0),d([m()],Ty.prototype,"rulesCategorized",void 0),d([m({constructOnly:!0})],Ty.prototype,"request",void 0),Ty=d([U("esri.networks.RulesTable")],Ty);let Jc=class extends _e{constructor(e){super(e),this.conditionBarriers=[],this.outputConditions=[],this.functions=[],this.functionBarriers=[],this.traversabilityScope=null,this.shortestPathNetworkAttributeName=null,this.includeBarriers=null,this.validateConsistency=null,this.ignoreBarriersAtStartingPoints=null}};d([m({type:[Object],json:{write:!0}})],Jc.prototype,"conditionBarriers",void 0),d([m({type:[Object],json:{write:!0}})],Jc.prototype,"outputConditions",void 0),d([m({type:[Object],json:{write:!0}})],Jc.prototype,"functions",void 0),d([m({type:[Object],json:{write:!0}})],Jc.prototype,"functionBarriers",void 0),d([m({type:["junctions","edges","junctionsAndEdges"],json:{write:!0}})],Jc.prototype,"traversabilityScope",void 0),d([m({type:String,json:{write:!0}})],Jc.prototype,"shortestPathNetworkAttributeName",void 0),d([m({type:Boolean,json:{write:!0}})],Jc.prototype,"includeBarriers",void 0),d([m({type:Boolean,json:{write:!0}})],Jc.prototype,"validateConsistency",void 0),d([m({type:Boolean,json:{write:!0}})],Jc.prototype,"ignoreBarriersAtStartingPoints",void 0),Jc=d([U("esri.networks.support.TraceConfiguration")],Jc);const VX=Jc,RB=new Gt({Clean:"clean",Dirty:"dirty"}),sv=new Gt({Physical:"physical",Virtual:"virtual"}),zB=new Gt({"Start and end":"start-and-end",Start:"start",Midspan:"midspan",End:"end"}),tL=new Gt({startingPoint:"starting-point",barrier:"barrier",stoppingPoint:"stopping-point"}),iL=new Gt({connected:"connected",upstream:"upstream",downstream:"downstream",shortestPath:"shortest-path",subnetwork:"subnetwork",subnetworkController:"subnetwork-controller",loops:"loops",isolation:"isolation",path:"path",circuit:"circuit"}),Wrt="{00000000-0000-0000-0000-000000000000}",Yrt=new Gt({junctionJunctionConnectivity:"junction-junction-connectivity",connectivity:"connectivity",attachment:"attachment",containment:"containment",junctionEdgeFromConnectivity:"junction-edge-from-connectivity",junctionEdgeMidspanConnectivity:"junction-edge-midspan-connectivity",junctionEdgeToConnectivity:"junction-edge-to-connectivity"}),Zrt={connectivity:1,"junction-junction-connectivity":1,containment:2,attachment:3,"junction-edge-from-connectivity":4,"junction-edge-midspan-connectivity":5,"junction-edge-to-connectivity":6},JDt=new Gt({normal:"normal",rebuild:"rebuild",forceRebuild:"force-rebuild"});let Cr=class extends VX{constructor(e){super(e),this.filterBarriers=[],this.arcadeExpressionBarrier=null,this.circuitName=null,this.domainNetworkName=null,this.filterBitsetNetworkAttributeName=null,this.filterFunctionBarriers=[],this.filterScope=null,this.includeContainers=null,this.includeContent=null,this.includeIsolated=null,this.includeStructures=null,this.allowIndeterminateFlow=null,this.includeUpToFirstSpatialContainer=null,this.inferConnectivity=null,this.maxHops=null,this.nearestNeighbor=null,this.numPaths=null,this.outputFilterCategories=[],this.outputFilters=[],this.propagators=[],this.subnetworkName=null,this.targetTierName=null,this.diagramTemplateName=null,this.tierName=null,this.validateLocatability=null}};d([m({type:[Object],json:{write:!0}})],Cr.prototype,"filterBarriers",void 0),d([m({type:String,json:{write:!0}})],Cr.prototype,"arcadeExpressionBarrier",void 0),d([m({type:String,json:{write:!0}})],Cr.prototype,"circuitName",void 0),d([m({type:String,json:{write:!0}})],Cr.prototype,"domainNetworkName",void 0),d([m({type:String,json:{write:!0}})],Cr.prototype,"filterBitsetNetworkAttributeName",void 0),d([m({type:[Object],json:{write:!0}})],Cr.prototype,"filterFunctionBarriers",void 0),d([m({type:["junctions","edges","junctionsAndEdges"],json:{write:!0}})],Cr.prototype,"filterScope",void 0),d([m({type:Boolean,json:{write:!0}})],Cr.prototype,"includeContainers",void 0),d([m({type:Boolean,json:{write:!0}})],Cr.prototype,"includeContent",void 0),d([m({type:Boolean,json:{write:!0}})],Cr.prototype,"includeIsolated",void 0),d([m({type:Boolean,json:{write:!0}})],Cr.prototype,"includeStructures",void 0),d([m({type:Boolean,json:{write:!0}})],Cr.prototype,"allowIndeterminateFlow",void 0),d([m({type:Boolean,json:{write:!0}})],Cr.prototype,"includeUpToFirstSpatialContainer",void 0),d([m({type:Boolean,json:{write:!0}})],Cr.prototype,"inferConnectivity",void 0),d([m({type:Number,json:{write:!0}})],Cr.prototype,"maxHops",void 0),d([m({type:Object,json:{write:!0}})],Cr.prototype,"nearestNeighbor",void 0),d([m({type:Number,json:{write:!0}})],Cr.prototype,"numPaths",void 0),d([m({type:[Object],json:{write:!0}})],Cr.prototype,"outputFilterCategories",void 0),d([m({type:[Object],json:{write:!0}})],Cr.prototype,"outputFilters",void 0),d([m({type:[Object],json:{write:!0}})],Cr.prototype,"propagators",void 0),d([m({type:String,json:{write:!0}})],Cr.prototype,"subnetworkName",void 0),d([m({type:String,json:{write:!0}})],Cr.prototype,"targetTierName",void 0),d([m({type:String,json:{write:!0}})],Cr.prototype,"diagramTemplateName",void 0),d([m({type:String,json:{write:!0}})],Cr.prototype,"tierName",void 0),d([m({type:Boolean,json:{write:!0}})],Cr.prototype,"validateLocatability",void 0),Cr=d([U("esri.networks.support.UNTraceConfiguration")],Cr);const Xrt=Cr;let nl=class extends pXe{constructor(e){super(e),this.globalId=null,this.title=null,this.traceConfiguration=null,this.creationDate=null,this.creator=null,this.description=null,this.minStartingPoints=null,this.resultTypes=[],this.tags=[],this.traceType=null}readTraceConfiguration(e,i){return e.tierName!==void 0?Xrt.fromJSON(e):VX.fromJSON(e)}};d([m({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"id"},write:{target:"id",isRequired:!0}},service:{read:{source:"globalId"},write:{target:"globalId",isRequired:!0}}},read:!1}})],nl.prototype,"globalId",void 0),d([m({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"title"},write:{target:"title",isRequired:!0}},service:{read:{source:"name"},write:{target:"name",isRequired:!0}}},read:!1}})],nl.prototype,"title",void 0),d([m({type:VX,json:{origins:{service:{read:!0,write:!0}},read:!1}})],nl.prototype,"traceConfiguration",void 0),d([Ve("service","traceConfiguration")],nl.prototype,"readTraceConfiguration",null),d([m({type:Date,json:{origins:{service:{read:!0,write:!0}},read:!1}})],nl.prototype,"creationDate",void 0),d([m({type:String,json:{origins:{service:{read:!0,write:!0}},read:!1}})],nl.prototype,"creator",void 0),d([m({type:String,json:{origins:{service:{read:!0,write:!0}},read:!1}})],nl.prototype,"description",void 0),d([m({type:["none","one","many"],json:{origins:{service:{read:{source:"minNumStartingPoints"},write:{target:"minNumStartingPoints"}}},read:!1}})],nl.prototype,"minStartingPoints",void 0),d([m({json:{origins:{service:{read:!0,write:!0}},read:!1}})],nl.prototype,"resultTypes",void 0),d([m({type:[String],json:{origins:{service:{read:!0,write:!0}},read:!1}})],nl.prototype,"tags",void 0),d([m({type:iL.apiValues,json:{type:iL.jsonValues,origins:{service:{read:iL.read,write:iL.write}},read:!1}})],nl.prototype,"traceType",void 0),nl=d([U("esri.networks.support.NamedTraceConfiguration")],nl);const Jrt=nl;function Krt(t){const e=t?.fieldsIndex,i="fromnetworksourceid",r="fromglobalid",n="fromterminalid",s="fromfirstunit",a="fromnumunits",o="tonetworksourceid",l="toglobalid",c="toterminalid",h="tofirstunit",f="tonumunits",g="status",y="associationtype",b="iscontentvisible",_="percentalong",S="globalid";return{fromNetworkSourceId:e?.get(i)?.name??i,fromGlobalId:e?.get(r)?.name??r,fromTerminalId:e?.get(n)?.name??n,fromFirstUnit:e?.get(s)?.name??s,fromNumUnits:e?.get(a)?.name??a,toNetworkSourceId:e?.get(o)?.name??o,toGlobalId:e?.get(l)?.name??l,toTerminalId:e?.get(c)?.name??c,toFirstUnit:e?.get(h)?.name??h,toNumUnits:e?.get(f)?.name??f,status:e?.get(g)?.name??g,associationType:e?.get(y)?.name??y,isContentVisible:e?.get(b)?.name??b,percentAlong:e?.get(_)?.name??_,globalId:e?.get(t?.globalIdField??S)?.name??S}}function eRt(t,e){if(e.type!=="feature"&&e.type!=="subtype-group")return[];if(!e.url)return[];const i="utilityNetworks"in t.map?t.map.utilityNetworks??[]:[];for(const r of i)if(r.isUtilityLayer(e)){const n=e.fieldsIndex.get("assetgroup"),s=e.fieldsIndex.get("assettype");return[n?.name,s?.name].filter(a=>a!=null)}return[]}let ic=class extends lt{constructor(e){super(e),this.rulesTableId=null,this.rulesTableUrl=null,this.subnetworksTable=null,this.subnetworksTableId=null,this.subnetworksTableUrl=null,this.dirtyAreasLayerId=null,this.dirtyAreasLayerUrl=null,this.associationsTable=null,this.associationsTableId=null,this.associationsTableUrl=null}destroy(){this.associationsTable?.destroy()}async loadAssociationsTable(e){if(!this.associationsTable){const{associationsTableUrl:i}=this;if(!i)throw new ee("utility-network-system-layers:missing-associations-table-url","Unable to load the associations table, as the `associationsTableUrl` is not set.");this.associationsTable=new nt({url:i})}return await this.associationsTable.load(e),this.associationsTable}async loadSubnetworksTable(e){if(!this.subnetworksTable){const{subnetworksTableUrl:i}=this;if(!i)throw new ee("utility-network-system-layers:missing-subnetworks-table-url","Unable to load the subnetworks table, as the `subnetworksTableUrl` is not set.");this.subnetworksTable=new nt({url:i})}return await this.subnetworksTable.load(e),this.subnetworksTable}};d([m({constructOnly:!0})],ic.prototype,"rulesTableId",void 0),d([m({constructOnly:!0})],ic.prototype,"rulesTableUrl",void 0),d([m()],ic.prototype,"subnetworksTable",void 0),d([m({constructOnly:!0})],ic.prototype,"subnetworksTableId",void 0),d([m({constructOnly:!0})],ic.prototype,"subnetworksTableUrl",void 0),d([m({constructOnly:!0})],ic.prototype,"dirtyAreasLayerId",void 0),d([m({constructOnly:!0})],ic.prototype,"dirtyAreasLayerUrl",void 0),d([m()],ic.prototype,"associationsTable",void 0),d([m({constructOnly:!0})],ic.prototype,"associationsTableId",void 0),d([m({constructOnly:!0})],ic.prototype,"associationsTableUrl",void 0),ic=d([U("esri.networks.support.NetworkSystemLayers")],ic);let eS=class extends _e{constructor(e){super(e),this.id=null,this.name=null}};d([m({type:Number,json:{read:{source:"terminalId"},write:{target:"terminalId"}}})],eS.prototype,"id",void 0),d([m({type:String,json:{read:{source:"terminalName"},write:{target:"terminalName"}}})],eS.prototype,"name",void 0),d([m({type:Boolean,json:{write:!0}})],eS.prototype,"isUpstreamTerminal",void 0),eS=d([U("esri.networks.support.Terminal")],eS);const Qrt=eS,rL=new Gt({esriUNTMBidirectional:"bidirectional",esriUNTMDirectional:"directional"});let mm=class extends _e{constructor(e){super(e),this.defaultConfiguration=null,this.id=null,this.name=null,this.terminals=[],this.traversabilityModel=null}};d([m({type:String,json:{write:!0}})],mm.prototype,"defaultConfiguration",void 0),d([m({type:Number,json:{read:{source:"terminalConfigurationId"},write:{target:"terminalConfigurationId"}}})],mm.prototype,"id",void 0),d([m({type:String,json:{read:{source:"terminalConfigurationName"},write:{target:"terminalConfigurationName"}}})],mm.prototype,"name",void 0),d([m({type:[Qrt],json:{write:!0}})],mm.prototype,"terminals",void 0),d([m({type:rL.apiValues,json:{type:rL.jsonValues,read:rL.read,write:rL.write}})],mm.prototype,"traversabilityModel",void 0),mm=d([U("esri.networks.support.TerminalConfiguration")],mm);let ll=class extends _e{constructor(e){super(e),this.type="networkElement",this.assetGroupCode=null,this.assetTypeCode=null,this.globalId=null,this.networkSourceId=null,this.objectId=null,this.positionFrom=null,this.positionTo=null,this.terminalId=null}};d([m({json:{write:!1}})],ll.prototype,"type",void 0),d([m({type:Number,json:{write:!0}})],ll.prototype,"assetGroupCode",void 0),d([m({type:Number,json:{write:!0}})],ll.prototype,"assetTypeCode",void 0),d([m({type:String,json:{write:!0}})],ll.prototype,"globalId",void 0),d([m({type:Number,json:{write:!0}})],ll.prototype,"networkSourceId",void 0),d([m({type:Number,json:{write:!0}})],ll.prototype,"objectId",void 0),d([m({type:Number,json:{write:!0}})],ll.prototype,"positionFrom",void 0),d([m({type:Number,json:{write:!0}})],ll.prototype,"positionTo",void 0),d([m({type:Number,json:{write:!0}})],ll.prototype,"terminalId",void 0),ll=d([U("esri.rest.networks.support.NetworkElement")],ll);let pu=class extends ll{constructor(e){super(e),this.type="telecomNetworkElement",this.firstUnit=null,this.numUnits=null}};d([m({json:{write:!1}})],pu.prototype,"type",void 0),d([m({json:{write:!0}})],pu.prototype,"firstUnit",void 0),d([m({json:{write:!0}})],pu.prototype,"numUnits",void 0),pu=d([U("esri.rest.networks.support.TelecomNetworkElement")],pu);let rm=class extends _e{constructor(e){super(e),this.edgeElement=null,this.junctionElement=null}readEdgeElement(e,i){return new pu({networkSourceId:i.edgeNetworkSourceId,globalId:i.edgeGlobalId,objectId:i.edgeObjectId,positionFrom:i.edgePositionFrom,positionTo:i.edgePositionTo,firstUnit:i.edgeFirstUnit,numUnits:i.edgeNumUnits})}writeEdgeElement(e,i){i.edgeNetworkSourceId=e.networkSourceId,i.edgeGlobalId=e.globalId,i.edgeObjectId=e.objectId,i.edgePositionFrom=e.positionFrom,i.edgePositionTo=e.positionTo,i.edgeFirstUnit=e.firstUnit,i.edgeNumUnits=e.numUnits}readJunctionElement(e,i){return new pu({networkSourceId:i.junctionNetworkSourceId,globalId:i.junctionGlobalId,objectId:i.junctionObjectId,terminalId:i.junctionTerminalId,firstUnit:i.junctionFirstUnit,numUnits:i.junctionNumUnits})}writeJunctionElement(e,i){i.junctionNetworkSourceId=e.networkSourceId,i.junctionGlobalId=e.globalId,i.junctionObjectId=e.objectId,i.junctionTerminalId=e.terminalId,i.junctionFirstUnit=e.firstUnit,i.junctionNumUnits=e.numUnits}};d([m({type:pu,json:{read:{source:["edgeNetworkSourceId","edgeGlobalId","edgeObjectId","edgePositionFrom","edgePositionTo","edgeFirstUnit","edgeNumUnits"]},write:!0}})],rm.prototype,"edgeElement",void 0),d([Ve("edgeElement")],rm.prototype,"readEdgeElement",null),d([qe("edgeElement")],rm.prototype,"writeEdgeElement",null),d([m({type:pu,json:{read:{source:["junctionNetworkSourceId","junctionGlobalId","junctionObjectId","junctionTerminalId","junctionFirstUnit","junctionNumUnits"]},write:!0}})],rm.prototype,"junctionElement",void 0),d([Ve("junctionElement")],rm.prototype,"readJunctionElement",null),d([qe("junctionElement")],rm.prototype,"writeJunctionElement",null),rm=d([U("esri.networks.support.CircuitPathConnectivityElement")],rm);const ent=rm;let ud=class extends _e{constructor(e){super(e),this.globalId=null,this.isFilterBarrier=!1,this.percentAlong=null,this.terminalId=null,this.type=null,this.firstUnit=null,this.numUnits=null,this.networkSourceId=null}};d([m({type:String,json:{write:!0}})],ud.prototype,"globalId",void 0),d([m({type:Boolean,json:{write:!0}})],ud.prototype,"isFilterBarrier",void 0),d([m({type:Number,json:{write:!0}})],ud.prototype,"percentAlong",void 0),d([m({type:Number,json:{write:!0}})],ud.prototype,"terminalId",void 0),d([m({type:tL.apiValues,json:{type:tL.jsonValues,read:{reader:tL.read,source:"traceLocationType"},write:{writer:tL.write,target:"traceLocationType"}}})],ud.prototype,"type",void 0),d([m({type:Number,json:{write:!0}})],ud.prototype,"firstUnit",void 0),d([m({type:Number,json:{write:!0}})],ud.prototype,"numUnits",void 0),d([m({type:Number})],ud.prototype,"networkSourceId",void 0),ud=d([U("esri.rest.networks.support.TraceLocation")],ud);const Ole=ud;let nm=class extends _e{constructor(e){super(e),this.pathId=null,this.order=null,this.startingPoint=null,this.stoppingPoint=null,this.pathConnectivity=[],this.geometry=null}};d([m({type:Number,json:{write:!0}})],nm.prototype,"pathId",void 0),d([m({type:Number,json:{write:!0}})],nm.prototype,"order",void 0),d([m({type:Ole,json:{write:!0}})],nm.prototype,"startingPoint",void 0),d([m({type:Ole,json:{write:!0}})],nm.prototype,"stoppingPoint",void 0),d([m({type:[ent],json:{write:!0}})],nm.prototype,"pathConnectivity",void 0),d([m({type:xn,json:{write:!0}})],nm.prototype,"geometry",void 0),nm=d([U("esri.networks.support.CircuitPath")],nm);const BX=nm;let ky=class extends _e{constructor(e){super(e),this.sourceId=null,this.globalId=null,this.terminalId=1,this.firstUnit=1,this.numUnits=1}};d([m({type:Number,json:{write:!0}})],ky.prototype,"sourceId",void 0),d([m({type:String,json:{write:!0}})],ky.prototype,"globalId",void 0),d([m({type:Number,json:{write:!0}})],ky.prototype,"terminalId",void 0),d([m({type:Number,json:{write:!0}})],ky.prototype,"firstUnit",void 0),d([m({type:Number,json:{write:!0}})],ky.prototype,"numUnits",void 0),ky=d([U("esri.networks.support.CircuitLocation")],ky);const Cz=ky;let sm=class extends _e{constructor(e){super(e),this.name=null,this.globalId=null,this.providerId=null,this.consumerId=null,this.isReserved=!1,this.attributes=null}getAttribute(e){return this.attributes?.[e]}setAttribute(e,i){this.attributes?this.attributes[e]=i:this.attributes={[e]:i}}};d([m({type:String,json:{write:!0}})],sm.prototype,"name",void 0),d([m({type:String,json:{write:!0}})],sm.prototype,"globalId",void 0),d([m({type:String})],sm.prototype,"providerId",void 0),d([m({type:String})],sm.prototype,"consumerId",void 0),d([m({type:Boolean,json:{write:!0}})],sm.prototype,"isReserved",void 0),d([m({json:{write:{allowNull:!0,writer:(t,e)=>e.attributes=t??{}}}})],sm.prototype,"attributes",void 0),sm=d([U("esri.networks.support.Subcircuit")],sm);const zSe=sm;let Ih=class extends _e{constructor(e){super(e),this.sectionId=null,this.role="start-and-end",this.sectionType="physical",this.startLocation=null,this.stopLocation=null,this.subcircuit=null,this.path=null}normalizeCtorArgs(e){if(e===void 0)return e;const{sectionId:i,startLocation:r,stopLocation:n,subcircuit:s}=e;return(r||n)&&s?(delete e.startLocation,delete e.stopLocation,$e.getLogger(this).warn("Cannot instantiate CircuitSection with both start/stop locations and subcircuit.",`CircuitSection with ID '${i}' was defaulted to having a subcircuit only.`)):(r&&!n||!r&&n)&&!s&&$e.getLogger(this).warn(`CircuitSection with ID '${i}' must have both start and stop locations.`,"Create/alter operations involving this section will fail unless both are populated."),e}setStartStopLocations(e,i){this.startLocation=e,this.stopLocation=i,this.subcircuit=null}setSubcircuit(e){this.subcircuit=e,this.startLocation=null,this.stopLocation=null}};d([m({type:Number,json:{write:!0}})],Ih.prototype,"sectionId",void 0),d([m({type:zB.apiValues,json:{type:zB.jsonValues,read:zB.read},readOnly:!0})],Ih.prototype,"role",void 0),d([m({type:sv.apiValues,json:{type:sv.jsonValues,read:sv.read,write:sv.write}})],Ih.prototype,"sectionType",void 0),d([m({type:Cz,json:{write:!0}})],Ih.prototype,"startLocation",void 0),d([m({type:Cz,json:{write:!0}})],Ih.prototype,"stopLocation",void 0),d([m({type:zSe,json:{write:!0}})],Ih.prototype,"subcircuit",void 0),d([m({type:BX,readOnly:!0})],Ih.prototype,"path",void 0),Ih=d([U("esri.networks.support.CircuitSection")],Ih);let fs=class extends _e{constructor(e){super(e),this._sectionIdLookup=new Map,this.attributes=null,this.circuitManager=null,this.circuitType="physical",this.globalId=null,this.isDeleted=!1,this.lastExportedTime=null,this.lastVerifiedTime=null,this.name=null,this.sections=null,this.startLocation=null,this.status="dirty",this.stopLocation=null,this.subcircuits=[]}initialize(){this.addHandles([ze(()=>this.sections,e=>{this._sectionIdLookup.clear(),e!=null&&Array.from(e.keys()).forEach(i=>this._sectionIdLookup.set(i.sectionId,i))},Di)])}normalizeCtorArgs(e){if(e===void 0)return e;const{name:i,startLocation:r,stopLocation:n,sections:s}=e;return(r||n)&&s?(delete e.startLocation,delete e.stopLocation,$e.getLogger(this).warn("Cannot instantiate Circuit with both start/stop locations and sections.",`Circuit '${i}' was defaulted to having sections only.`)):(r&&!n||!r&&n)&&!s&&$e.getLogger(this).warn(`Non-sectioned circuit '${i}' must have both start and stop locations.`,"Create/alter operations involving this circuit will fail unless both are populated."),e}get isSectioned(){return this.startLocation==null&&this.stopLocation==null&&this.sections!=null}readSections(e,i){const{sectionOrder:r,sections:n}=i,s=new Map;if(n==null)return null;if(this._sectionIdLookup.clear(),n.forEach(a=>this._sectionIdLookup.set(a.sectionId,Ih.fromJSON(a))),r==null)return Array.from(this._sectionIdLookup.values()).forEach(a=>s.set(a,[])),s;for(const[a,o]of Object.entries(r)){const l=Number(a),c=this._sectionIdLookup.get(l);if(c==null)continue;const h=o.map(f=>this._sectionIdLookup.get(f)).filter(un);s.set(c,h)}return s}writeSections(e,i){const r={},n=[];e?.forEach((s,a)=>{const o=a.sectionId.toString(),l=s.map(c=>c.sectionId);r[o]=l,n.push(a.toJSON())}),i.sectionOrder=r,i.sections=n}getSectionById(e){return this._sectionIdLookup.get(e)??null}setStartStopLocations(e,i){this.startLocation=e,this.stopLocation=i,this.sections=null}setSections(e){this.sections=e,this.startLocation=null,this.stopLocation=null}getAttribute(e){return this.attributes?.[e]}setAttribute(e,i){this.attributes?this.attributes[e]=i:this.attributes={[e]:i}}};d([m({json:{write:{allowNull:!0,writer:(t,e)=>e.attributes=t??{}}}})],fs.prototype,"attributes",void 0),d([m()],fs.prototype,"circuitManager",void 0),d([m({type:sv.apiValues,json:{type:sv.jsonValues,read:sv.read,write:sv.write}})],fs.prototype,"circuitType",void 0),d([m({type:String,json:{write:!0}})],fs.prototype,"globalId",void 0),d([m({type:Boolean,readOnly:!0})],fs.prototype,"isDeleted",void 0),d([m({type:Boolean,json:{write:!0},readOnly:!0})],fs.prototype,"isSectioned",null),d([m({type:Date,json:{read:{reader:t=>typeof t=="number"?new Date(t):null}},readOnly:!0})],fs.prototype,"lastExportedTime",void 0),d([m({type:Date,json:{read:{reader:t=>typeof t=="number"?new Date(t):null}},readOnly:!0})],fs.prototype,"lastVerifiedTime",void 0),d([m({type:String,json:{write:!0}})],fs.prototype,"name",void 0),d([m({json:{read:{source:["sectionOrder","sections"]},write:!0}})],fs.prototype,"sections",void 0),d([Ve("sections")],fs.prototype,"readSections",null),d([qe("sections")],fs.prototype,"writeSections",null),d([m({type:Cz,json:{write:!0}})],fs.prototype,"startLocation",void 0),d([m({type:RB.apiValues,json:{type:RB.jsonValues,read:RB.read}})],fs.prototype,"status",void 0),d([m({type:Cz,json:{write:!0}})],fs.prototype,"stopLocation",void 0),d([m({type:[zSe],json:{write:!0}})],fs.prototype,"subcircuits",void 0),fs=d([U("esri.networks.support.Circuit")],fs);let h0=class extends _e{constructor(e){super(e),this.circuit=null,this.geometry=null,this.path=null}readCircuit(e,i){return fs.fromJSON(i)}};d([m({type:fs,json:{write:!0,read:{source:["name","globalId","isSectioned","sectionOrder","startLocation","stopLocation","sections","subcircuits","lastVerifiedTime","lastExportedTime","circuitType","status"]}}})],h0.prototype,"circuit",void 0),d([Ve("circuit")],h0.prototype,"readCircuit",null),d([m({type:xn,json:{write:!0}})],h0.prototype,"geometry",void 0),d([m({type:BX,json:{write:!0}})],h0.prototype,"path",void 0),h0=d([U("esri.rest.networks.circuits.support.CircuitTraceResult")],h0);const tnt=h0;let tS=class extends _e{constructor(e){super(e),this.line=null,this.multipoint=null,this.polygon=null}};d([m({type:xn,json:{write:!0},readOnly:!0})],tS.prototype,"line",void 0),d([m({type:ou,json:{read:{source:"point"},write:{target:"point"}},readOnly:!0})],tS.prototype,"multipoint",void 0),d([m({type:br,json:{write:!0},readOnly:!0})],tS.prototype,"polygon",void 0),tS=d([U("esri.rest.networks.support.AggregatedGeometry")],tS);const int=tS;let iS=class extends _e{constructor(e){super(e),this.functionType=null,this.networkAttributeName=null,this.result=null}};d([m({type:["add","subtract","average","count","min","max"],json:{write:!0},readOnly:!0})],iS.prototype,"functionType",void 0),d([m({type:String,json:{write:!0},readOnly:!0})],iS.prototype,"networkAttributeName",void 0),d([m({type:Number,json:{write:!0},readOnly:!0})],iS.prototype,"result",void 0),iS=d([U("esri.rest.networks.support.FunctionResult")],iS);const rnt=iS;let rc=class extends _e{constructor(e){super(e),this.aggregatedGeometry=null,this.circuits=null,this.elements=null,this.globalFunctionResults=null,this.kFeaturesForKNNFound=!1,this.paths=null,this.startingPointsIgnored=!1,this.warnings=null}readNetworkElements(e,i){return i.elements!=null&&Array.isArray(i.elements)?i.elements.map(r=>"firstUnit"in r&&"numUnits"in r?new pu({...r}):new ll({...r})):[]}writeNetworkElements(e,i){i.elements=e.map(r=>r.toJSON())}};d([m({type:int,json:{write:!0},readOnly:!0})],rc.prototype,"aggregatedGeometry",void 0),d([m({type:[tnt],json:{write:!0},readOnly:!0})],rc.prototype,"circuits",void 0),d([m({type:[ll],json:{write:!0},readOnly:!0})],rc.prototype,"elements",void 0),d([Ve("elements")],rc.prototype,"readNetworkElements",null),d([qe("elements")],rc.prototype,"writeNetworkElements",null),d([m({type:[rnt],json:{write:!0},readOnly:!0})],rc.prototype,"globalFunctionResults",void 0),d([m({type:Boolean,json:{write:!0},readOnly:!0})],rc.prototype,"kFeaturesForKNNFound",void 0),d([m({type:[BX],json:{write:!0},readOnly:!0})],rc.prototype,"paths",void 0),d([m({type:Boolean,json:{write:!0},readOnly:!0})],rc.prototype,"startingPointsIgnored",void 0),d([m({type:[String],json:{write:!0},readOnly:!0})],rc.prototype,"warnings",void 0),rc=d([U("esri.rest.networks.support.TraceResult")],rc);const nnt=Gn()({Pending:"job-waiting",InProgress:"job-executing",Completed:"job-succeeded"});let p0=class extends rc{constructor(e){super(e),this.statusUrl=null,this.status=null,this.submissionTime=null,this.lastUpdatedTime=null,this._timer=void 0}destroy(){clearInterval(this._timer)}async checkJobStatus(e){const i={...e,query:{f:"json"}},{data:r}=await Nt(this.statusUrl,i),n=r.traceResults?{...r.traceResults,...r}:r;return this.read(n),this}async waitForJobCompletion(e={}){const{interval:i=1e3,statusCallback:r}=e;return new Promise((n,s)=>{this._clearTimer();const a=setInterval(()=>{this._timer||s(Hi()),this.checkJobStatus().then(o=>{const{status:l}=o;switch(this.status=l,l){case"job-succeeded":this._clearTimer(),n(this);break;case"job-waiting":case"job-executing":r&&r(this)}},o=>{this._clearTimer(),s(o)})},i);this._timer=a})}_clearTimer(){clearInterval(this._timer),this._timer=void 0}};d([m({type:String,json:{write:!0}})],p0.prototype,"statusUrl",void 0),d([pt(nnt)],p0.prototype,"status",void 0),d([m({type:Date,json:{type:Number,write:{writer:(t,e)=>{e.submissionTime=t?t.getTime():null}}}})],p0.prototype,"submissionTime",void 0),d([m({type:Date,json:{type:Number,write:{writer:(t,e)=>{e.lastUpdatedTime=t?t.getTime():null}}}})],p0.prototype,"lastUpdatedTime",void 0),p0=d([U("esri.networks.support.TraceJobInfo")],p0);let Kc=class extends qrt{constructor(e){super(e),this.sharedNamedTraceConfigurations=[],this.type="utility",this._circuitManagerMap=new Map,this._terminalById=new Map,this._unitIdentifierManager=null}initialize(){this.addHandles(ze(()=>[this.gdbVersion,this.historicMoment],()=>{this.networkSystemLayers.associationsTable&&(this.networkSystemLayers.associationsTable.gdbVersion!==this.gdbVersion&&(this.networkSystemLayers.associationsTable.gdbVersion=this.gdbVersion),this.networkSystemLayers.associationsTable.historicMoment!==this.historicMoment&&(this.networkSystemLayers.associationsTable.historicMoment=this.historicMoment))}))}get _rulesLayer(){const{gdbVersion:e,historicMoment:i}=this,r=this.networkSystemLayers.rulesTableUrl;return new nt({url:r,gdbVersion:e,historicMoment:i})}get _utilityLayerList(){const e=new Set;return this.dataElement?.domainNetworks?.map(i=>{i?.edgeSources?.map(({layerId:r,sourceId:n})=>{this._layerIdBySourceId.set(n,r),this._sourceIdByLayerId.set(r,n),e.add(r)}),i?.junctionSources?.map(({layerId:r,sourceId:n})=>{this._layerIdBySourceId.set(n,r),this._sourceIdByLayerId.set(r,n),e.add(r)})}),e}get serviceTerritoryFeatureLayerId(){return this.dataElement?.serviceTerritoryFeatureLayerId??null}get networkSystemLayers(){return new ic({rulesTableId:this.sourceJSON?.systemLayers.rulesTableId,rulesTableUrl:this.sourceJSON?`${this.featureServiceUrl}/${this.sourceJSON?.systemLayers.rulesTableId}`:null,subnetworksTableId:this.sourceJSON?.systemLayers.subnetworksTableId,subnetworksTableUrl:this.sourceJSON?`${this.featureServiceUrl}/${this.sourceJSON?.systemLayers.subnetworksTableId}`:null,dirtyAreasLayerId:this.sourceJSON?.systemLayers.dirtyAreasLayerId,dirtyAreasLayerUrl:this.sourceJSON?`${this.featureServiceUrl}/${this.sourceJSON?.systemLayers.dirtyAreasLayerId}`:null,associationsTableId:this.sourceJSON?.systemLayers.associationsTableId,associationsTableUrl:this.sourceJSON?`${this.featureServiceUrl}/${this.sourceJSON?.systemLayers.associationsTableId}`:null})}get terminalConfigurations(){return this.dataElement?.terminalConfigurations.map(e=>mm.fromJSON(e))||[]}get domainNetworkNames(){return this.dataElement?.domainNetworks.map(e=>e.domainNetworkName)||[]}get hasTelecomNetwork(){return this.dataElement?.domainNetworks.some(e=>e.isTelecomNetwork)??!1}get associationsTable(){return this.networkSystemLayers.associationsTable}async load(e){return this.addResolvingPromise(this._load(e)),this}async _load(e){await super._load(e),await Promise.all([this._loadNamedTraceConfigurationsFromNetwork(e),this.networkSystemLayers.loadAssociationsTable(e)])}getTerminalConfiguration(e){let i=null,r=null;const n=e.sourceLayer;let s=null;if(n?.type==="feature"){if(s=n.layerId,s===null)return null}else if(n?.type!=="subtype-sublayer"||(s=n?.parent?.layerId??null,s===null))return null;const a=e.attributes;if(a==null)return null;for(const c of Object.keys(a))c.toUpperCase()==="ASSETGROUP"&&(i=e.getAttribute(c)),c.toUpperCase()==="ASSETTYPE"&&(r=e.getAttribute(c));if(!this.dataElement)return null;let o=null;const l=this.dataElement.domainNetworks;for(const c of l){const h=c.junctionSources?.find(f=>f.layerId===s);if(h){const f=h.assetGroups?.find(g=>g.assetGroupCode===i);if(f){const g=f.assetTypes?.find(y=>y.assetTypeCode===r);if(g?.isTerminalConfigurationSupported){o=g.terminalConfigurationId;break}}}}if(o!=null){const c=this.dataElement.terminalConfigurations,h=c?.find(f=>f.terminalConfigurationId===o);return h?mm.fromJSON(h):null}return null}getTierNames(e){return this.dataElement?.domainNetworks.find(r=>r.domainNetworkName===e)?.tiers?.map(r=>r.name)||[]}async getRulesTable(){const e=this._rulesLayer;e.loaded||await e.load();const i=this.dataElement?.domainNetworks;if(!i)return null;const r=i.flatMap(s=>[...s.edgeSources||[],...s.junctionSources||[]]),n=(await this._queryRulesTable(e)).map(s=>this._hydrateRuleInfo(e,r,s));return new Ty({rulesLayer:e,rules:n})}async getCircuitManager(e){if(!this.hasTelecomNetwork)return null;const i=this.dataElement?.domainNetworks.find(n=>n.domainNetworkName===e&&n.isTelecomNetwork);if(!i)return null;const{default:r}=await fe(()=>import("./CircuitManager-DBnRKpw7.js"),[]);return d_(this._circuitManagerMap,e,()=>new r({utilityNetwork:this,telecomDomainNetwork:i}))}async getUnitIdentifierManager(){if(!this.hasTelecomNetwork)return null;if(this._unitIdentifierManager)return this._unitIdentifierManager;const{default:e}=await fe(()=>import("./UnitIdentifierManager-Cedub5aC.js"),[]);return this._unitIdentifierManager=new e({utilityNetwork:this}),this._unitIdentifierManager}getTerminalById(e){if(!this.dataElement||e==null)return null;const i=this._terminalById.get(e);return i??(this.terminalConfigurations.forEach(r=>{r.terminals.forEach(n=>{this._terminalById.set(n.id,n)})}),this._terminalById.get(e))}isUtilityLayer(e){return"layerId"in e?e.layerId!=null&&this._utilityLayerList.has(e.layerId)&&(e.url?.startsWith(this.featureServiceUrl)??!1):!(e.type!=="subtype-sublayer"||!e.parent)&&this._utilityLayerList.has(e.parent.layerId)&&(e.parent.url?.startsWith(this.featureServiceUrl)??!1)}async queryAssociations(e,i){const[{queryAssociations:r},{default:n}]=await Promise.all([fe(()=>import("./queryAssociations-bHBkuljY.js"),__vite__mapDeps([284,285])),fe(()=>import("./QueryAssociationsParameters-BX1rCXi1.js"),[])]),s=n.from(e);return s.gdbVersion=this.gdbVersion,s.moment=this.historicMoment,(await r(this.networkServiceUrl,s,i)).associations}async synthesizeAssociationGeometries(e){const[{synthesizeAssociationGeometries:i},{default:r}]=await Promise.all([fe(()=>import("./synthesizeAssociationGeometries-CRuxcHWY.js"),__vite__mapDeps([286,285])),fe(()=>import("./SynthesizeAssociationGeometriesParameters-CZ3uRnVv.js"),[])]),n=r.from(e);return n.gdbVersion=this.gdbVersion,n.moment=this.historicMoment,i(this.networkServiceUrl,n)}async trace(e){const[{trace:i},{default:r}]=await Promise.all([fe(()=>import("./trace-C19ueu4Q.js"),[]),fe(()=>import("./TraceParameters-alI6dntk.js"),[])]),n=r.from(e);return n.gdbVersion=this.gdbVersion,n.moment=this.historicMoment,i(this.networkServiceUrl,n)}async submitTraceJob(e){const[{submitTraceJob:i},{default:r}]=await Promise.all([fe(()=>import("./trace-C19ueu4Q.js"),[]),fe(()=>import("./TraceParameters-alI6dntk.js"),[])]),n=r.from(e);n.gdbVersion=this.gdbVersion,n.moment=this.historicMoment;const s=await i(this.networkServiceUrl,n);return new p0({statusUrl:s})}async canAddAssociation(e){const i=await this.getRulesTable();if(!i)return!1;const{fromNetworkElement:r,toNetworkElement:n}=e;if(!r||!n)return!1;await i.load();let s=null;switch(e.associationType){case"containment":s=i.rulesCategorized.containment;break;case"attachment":s=i.rulesCategorized.attachment;break;default:s=i.rulesCategorized.connectivity}return s.some(a=>FE(a,r,n))}generateAddAssociations(e){const{associationsTable:i}=this.networkSystemLayers,{fromNetworkSourceId:r,fromGlobalId:n,fromTerminalId:s,fromFirstUnit:a,fromNumUnits:o,toNetworkSourceId:l,toGlobalId:c,toTerminalId:h,toFirstUnit:f,toNumUnits:g,associationType:y,isContentVisible:b,percentAlong:_,globalId:S}=Krt(i);return{addFeatures:e.map($=>{const C=new Hr({attributes:{[r]:$.fromNetworkElement?.networkSourceId,[n]:$.fromNetworkElement?.globalId,[s]:$.fromNetworkElement?.terminalId,[l]:$.toNetworkElement?.networkSourceId,[c]:$.toNetworkElement?.globalId,[h]:$.toNetworkElement?.terminalId,[y]:Zrt[$.associationType],[b]:$.isContentVisible==null?void 0:$.isContentVisible?1:0,[_]:$.percentAlong,[S]:$.globalId}});return $.fromNetworkElement instanceof pu&&(C.attributes[a]=$.fromNetworkElement?.firstUnit,C.attributes[o]=$.fromNetworkElement?.numUnits),$.toNetworkElement instanceof pu&&(C.attributes[f]=$.toNetworkElement?.firstUnit,C.attributes[g]=$.toNetworkElement?.numUnits),C}),id:this.networkSystemLayers.associationsTableId,identifierFields:{globalIdField:i?.globalIdField??"globalid",objectIdField:i?.objectIdField??"objectid"}}}generateDeleteAssociations(e){const{associationsTable:i,associationsTableId:r}=this.networkSystemLayers,n={id:r,identifierFields:{globalIdField:i?.globalIdField??"globalid",objectIdField:i?.objectIdField??"objectid"}};if(this.dataElement?.schemaGeneration===-8){const a=this._generateDeleteTelecomAssociationPayload(e);return{...n,deleteAssociations:a}}const s=e.map(a=>({globalId:a.globalId}));return{...n,deleteFeatures:s}}generateCombineNetworkElements(e){return{id:this._ensureSingleSourceIdAsValidLayerId(e),combineGroupedObjects:[{globalIds:e.map(i=>i.globalId)}]}}generateDivideNetworkElements(e,i){return{id:this._ensureSingleSourceIdAsValidLayerId([e]),divideGroupedObjects:[{globalId:e.globalId,numUnits:i}]}}async loadAssociationsTable(){return this.networkSystemLayers.loadAssociationsTable()}async loadSubnetworksTable(){return this.networkSystemLayers.loadSubnetworksTable()}async _loadNamedTraceConfigurationsFromNetwork(e){if(this.sharedNamedTraceConfigurations?.length===0)return;const i=this.sharedNamedTraceConfigurations.map(n=>n.globalId),r=await this.queryNamedTraceConfigurations({globalIds:i},e);for(const n of this.sharedNamedTraceConfigurations){const s=r?.find(a=>a.globalId===n.globalId);if(s){const a=s.write({},{origin:"service"});n.read(a,{origin:"service"})}}}_hydrateRuleInfo(e,i,r){const n=e.fieldsIndex,s=n.get("RULETYPE"),a=n.get("CREATIONDATE"),o=n.get("FROMNETWORKSOURCEID"),l=n.get("FROMASSETGROUP"),c=n.get("FROMASSETTYPE"),h=n.get("FROMTERMINALID"),f=n.get("TONETWORKSOURCEID"),g=n.get("TOASSETGROUP"),y=n.get("TOASSETTYPE"),b=n.get("TOTERMINALID"),_=n.get("VIANETWORKSOURCEID"),S=n.get("VIAASSETGROUP"),$=n.get("VIAASSETTYPE"),C=n.get("VIATERMINALID"),I=r.attributes[s.name],P=new Date(r.attributes[a.name]),O=[{networkSourceId:r.attributes[o.name],assetGroupId:r.attributes[l.name],assetTypeId:r.attributes[c.name],terminalId:r.attributes[h.name]},{networkSourceId:r.attributes[f.name],assetGroupId:r.attributes[g.name],assetTypeId:r.attributes[y.name],terminalId:r.attributes[b.name]},{networkSourceId:r.attributes[_.name],assetGroupId:r.attributes[S.name],assetTypeId:r.attributes[$.name],terminalId:r.attributes[C.name]}],N={ruleType:I,creationDate:P};for(const R of[0,1,2]){if(I!==5&&R===2)continue;const G=O[R],Y=i.find(K=>K.sourceId===G.networkSourceId),Q=Y?.assetGroups.find(K=>K.assetGroupCode===G.assetGroupId),ae=Q?.assetTypes.find(K=>K.assetTypeCode===G.assetTypeId),ce=this._getTerminal(ae,G);let ne="";switch(R){case 0:ne="from";break;case 1:ne="to";break;case 2:ne="via"}N[`${ne}NetworkSource`]=Y,N[`${ne}AssetGroup`]=Q,N[`${ne}AssetType`]=ae,N[`${ne}Terminal`]=ce?.toJSON()}return N}_getTerminal(e,i){const r=e?.terminalConfigurationId;return this.terminalConfigurations?.find(s=>s.id===r)?.terminals?.find(s=>s.id===i.terminalId)??null}async _queryRulesTable(e){const{gdbVersion:i,historicMoment:r}=this,n=new _t({where:"1=1",outFields:["*"],gdbVersion:i,historicMoment:r});return(await pxe(e,n)).features}_generateDeleteTelecomAssociationPayload(e){return e.map(i=>({globalId:i.globalId??Wrt,associationType:Yrt.toJSON(i.associationType),fromSourceId:i.fromNetworkElement.networkSourceId,fromGlobalId:i.fromNetworkElement.globalId,fromTerminalId:i.fromNetworkElement.terminalId,toSourceId:i.toNetworkElement.networkSourceId,toGlobalId:i.toNetworkElement.globalId,toTerminalId:i.toNetworkElement.terminalId}))}_ensureSingleSourceIdAsValidLayerId(e){const i=QIe(e.map(s=>s.networkSourceId));if(i.length>1)throw new ee("utility-network:invalid-source-id","'networkSourceId' is not valid. Ensure that all network elements have the same 'networkSourceId' and that it corresponds to a valid layer in the utility network.");const r=i[0],n=this.getLayerIdBySourceId(r);if(n==null)throw new ee("utility-network:invalid-source-id","'networkSourceId' is not valid. Ensure that all network elements have the same 'networkSourceId' and that it corresponds to a valid layer in the utility network.");return n}};d([m({readOnly:!0})],Kc.prototype,"_rulesLayer",null),d([m({type:[Jrt],json:{origins:{"web-map":{read:{source:"traceConfigurations"},write:{target:"traceConfigurations"}},service:{read:{source:"traceConfigurations"}}},read:!1}})],Kc.prototype,"sharedNamedTraceConfigurations",void 0),d([m({type:["utility"],readOnly:!0,json:{read:!1,write:!1}})],Kc.prototype,"type",void 0),d([m({readOnly:!0})],Kc.prototype,"serviceTerritoryFeatureLayerId",null),d([m({readOnly:!0})],Kc.prototype,"networkSystemLayers",null),d([m({readOnly:!0})],Kc.prototype,"terminalConfigurations",null),d([m({readOnly:!0})],Kc.prototype,"domainNetworkNames",null),d([m({readOnly:!0})],Kc.prototype,"hasTelecomNetwork",null),d([m({readOnly:!0,json:{read:!1}})],Kc.prototype,"associationsTable",null),Kc=d([U("esri.networks.UtilityNetwork")],Kc);const FSe=Kc,snt=Object.freeze(Object.defineProperty({__proto__:null,default:FSe},Symbol.toStringTag,{value:"Module"}));let rS=class extends $t(_e){constructor(e){super(e),this.expression=null,this.returnType="string",this.title=null}};d([m({type:String,json:{write:{isRequired:!0}}})],rS.prototype,"expression",void 0),d([m({type:["number","string"],json:{write:!0}})],rS.prototype,"returnType",void 0),d([m({type:String,json:{write:!0}})],rS.prototype,"title",void 0),rS=d([U("esri.webdoc.geotriggersInfo.ExpressionInfo")],rS);const NSe=rS,nL=new Gt({deviceLocation:"device-location"});let NE=class extends $t(_e){constructor(e){super(e),this.filterExpression=null,this.type="device-location"}};d([m({type:NSe,json:{write:!0}})],NE.prototype,"filterExpression",void 0),d([m({type:nL.apiValues,readOnly:!0,json:{type:nL.jsonValues,read:nL.read,write:nL.write}})],NE.prototype,"type",void 0),NE=d([U("esri.webdoc.geotriggersInfo.DeviceLocationFeed")],NE);const ant=NE;let jE=class extends $t(_e){constructor(e){super(e),this.geometry=null,this.where=null}};d([m({types:BT,json:{read:Vp,write:!0}})],jE.prototype,"geometry",void 0),d([m({type:String,json:{write:!0}})],jE.prototype,"where",void 0),jE=d([U("esri.webdoc.geotriggersInfo.FeatureFilter")],jE);const ont=jE;let nS=class extends $t(_e){constructor(e){super(e),this.layerId=null,this.layerUrl=null,this.type="feature-layer"}};d([m({type:String,json:{write:{overridePolicy(){return{isRequired:this.layerUrl===null}}}}})],nS.prototype,"layerId",void 0),d([m({type:String,json:{write:{overridePolicy(){return{isRequired:this.layerId===null}}}}})],nS.prototype,"layerUrl",void 0),d([pt({featureLayer:"feature-layer"},{readOnly:!0})],nS.prototype,"type",void 0),nS=d([U("esri.webdoc.geotriggersInfo.FeatureLayerSource")],nS);const lnt=nS;let f0=class extends $t(_e){constructor(e){super(e),this.fenceSource=null,this.filter=null,this.bufferDistance=null,this.type="features"}};d([m({type:lnt,json:{write:{isRequired:!0}}})],f0.prototype,"fenceSource",void 0),d([m({type:ont,json:{write:!0}})],f0.prototype,"filter",void 0),d([m({type:Number,json:{write:!0}})],f0.prototype,"bufferDistance",void 0),d([pt({features:"features"},{readOnly:!0})],f0.prototype,"type",void 0),f0=d([U("esri.webdoc.geotriggersInfo.FeatureFenceParameters")],f0);const cnt=f0;let ED=class extends $t(_e){constructor(e){super(e),this.type="fence"}};d([pt({fence:"fence"},{readOnly:!0})],ED.prototype,"type",void 0),ED=d([U("esri.webdoc.geotriggersInfo.Geotrigger")],ED);const jSe=ED;let VE=class extends $t(_e){constructor(e){super(e),this.expressionInfo=null,this.requestedActions=null}};d([m({type:NSe,json:{write:!0}})],VE.prototype,"expressionInfo",void 0),d([m({type:[String],json:{write:!0}})],VE.prototype,"requestedActions",void 0),VE=d([U("esri.webdoc.geotriggersInfo.GeotriggerNotificationOptions")],VE);const unt=VE,dnt=new Gt({enterContainsAndExitDoesNotContain:"enter-contains-and-exit-does-not-contain",enterContainsAndExitDoesNotIntersect:"enter-contains-and-exit-does-not-intersect",enterIntersectsAndExitDoesNotIntersect:"enter-intersects-and-exit-does-not-intersect"}),hnt=new Gt({useGeometry:"use-geometry",useGeometryWithAccuracy:"use-geometry-with-accuracy"}),sL=new Gt({enter:"enter",enterOrExit:"enter-or-exit",exit:"exit"});let dd=class extends jSe{constructor(e){super(e),this.enterExitRule="enter-contains-and-exit-does-not-intersect",this.feed=null,this.feedAccuracyMode="use-geometry",this.fenceNotificationRule=null,this.fenceParameters=null,this.name=null,this.notificationOptions=null,this.type="fence"}};d([pt(dnt)],dd.prototype,"enterExitRule",void 0),d([m({type:ant,json:{write:{isRequired:!0}}})],dd.prototype,"feed",void 0),d([pt(hnt)],dd.prototype,"feedAccuracyMode",void 0),d([m({type:sL.apiValues,json:{type:sL.jsonValues,read:sL.read,write:{writer:sL.write,isRequired:!0}}})],dd.prototype,"fenceNotificationRule",void 0),d([m({type:cnt,json:{write:{isRequired:!0}}})],dd.prototype,"fenceParameters",void 0),d([m({type:String,json:{write:!0}})],dd.prototype,"name",void 0),d([m({type:unt,json:{write:!0}})],dd.prototype,"notificationOptions",void 0),d([pt({fence:"fence"},{readOnly:!0})],dd.prototype,"type",void 0),dd=d([U("esri.webdoc.geotriggersInfo.FenceGeotrigger")],dd);const pnt=dd,fnt={base:jSe,key:"type",typeMap:{fence:pnt}};let CD=class extends $t(_e){constructor(e){super(e),this.geotriggers=null}};d([m({types:[fnt],json:{write:{isRequired:!0}}})],CD.prototype,"geotriggers",void 0),CD=d([U("esri.webdoc.GeotriggersInfo")],CD);const mnt=CD;let ID=class extends $t(_e){constructor(e){super(e),this.enabled=!0}};d([m({type:Boolean,nonNullable:!0,json:{write:!0}})],ID.prototype,"enabled",void 0),ID=d([U("esri.webdoc.ips.AppleIPSProperties")],ID);const gnt=ID;let MD=class extends $t(_e){constructor(e){super(e),this.enabled=!0}};d([m({type:Boolean,nonNullable:!0,json:{write:!0}})],MD.prototype,"enabled",void 0),MD=d([U("esri.webdoc.ips.GNSSProperties")],MD);const ynt=MD;let sS=class extends $t(_e){constructor(e){super(e),this.enabled=!0,this.distance=5,this.units="meter"}};d([m({type:Boolean,nonNullable:!0,json:{write:!0}})],sS.prototype,"enabled",void 0),d([m({type:Number,nonNullable:!0,json:{write:!0}})],sS.prototype,"distance",void 0),d([m({type:["feet","meter"],nonNullable:!0,json:{write:!0}})],sS.prototype,"units",void 0),sS=d([U("esri.webdoc.ips.PathSnappingProperties")],sS);const vnt=sS;let AD=class extends $t(_e){constructor(e){super(e),this.enabled=!0}};d([m({type:Boolean,nonNullable:!0,json:{write:!0}})],AD.prototype,"enabled",void 0),AD=d([U("esri.webdoc.ips.SmoothingProperties")],AD);const bnt=AD;let m0=class extends $t(_e){constructor(e){super(e),this.appleIPS=null,this.gnss=null,this.smoothing=null,this.pathSnapping=null}};d([m({type:gnt,json:{name:"AppleIPS",write:!0}})],m0.prototype,"appleIPS",void 0),d([m({type:ynt,json:{name:"GNSS",write:!0}})],m0.prototype,"gnss",void 0),d([m({type:bnt,json:{write:!0}})],m0.prototype,"smoothing",void 0),d([m({type:vnt,json:{write:!0}})],m0.prototype,"pathSnapping",void 0),m0=d([U("esri.webdoc.ips.Configuration")],m0);const wnt=m0;let aS=class extends $t(_e){constructor(e){super(e),this.portalItem=null}readPortalItem(e,i,r){const{itemId:n}=i;if(n)return new Mt({id:n,portal:r?.portal})}writePortalItem(e,i){e?.id&&(i.itemId=e.id)}};d([m({type:Mt,json:{write:{isRequired:!0}}})],aS.prototype,"portalItem",void 0),d([Ve("portalItem",["itemId"])],aS.prototype,"readPortalItem",null),d([qe("portalItem",{itemId:{type:String}})],aS.prototype,"writePortalItem",null),aS=d([U("esri.webdoc.ips.PositioningService")],aS);const _nt=aS;let BE=class extends $t(_e){constructor(e){super(e),this.positioningService=null,this.configuration=null}};d([m({type:_nt,json:{write:{isRequired:!0}}})],BE.prototype,"positioningService",void 0),d([m({type:wnt,json:{write:!0}})],BE.prototype,"configuration",void 0),BE=d([U("esri.webdoc.IPSInfo")],BE);const xnt=BE,Snt={currentVersion:C1e,createInitialViewProperties:()=>new vz,parseVersion:JS.parse,itemType:"Web Map",name:"webmap",origin:"web-map"},$nt=We.ofType(FSe);var D$;let g0=(D$=class extends YXe{constructor(e){super(e),this.geotriggersInfo=null,this.ipsInfo=null,this.presentation=null,this.utilityNetworks=null}destroy(){if(this.utilityNetworks){const e=this.utilityNetworks.removeAll();for(const i of e)i.destroy();this.utilityNetworks.destroy()}}get context(){return Snt}loadAll(){return KM(this,e=>{e(this.ground,this.basemap,this.layers,this.tables,this.ipsInfo?.positioningService?.portalItem)})}static fromJSON(e){if(e)return new this({resourceInfo:e});throw new ee("webmap:empty-resource","Expected a JSON resource but got nothing")}},D$.VERSION=C1e,D$);d([m({type:mnt,json:{write:!0}})],g0.prototype,"geotriggersInfo",void 0),d([m({type:xnt,json:{write:!0,name:"mapIPSInfo"}})],g0.prototype,"ipsInfo",void 0),d([m({json:{write:!0}})],g0.prototype,"presentation",void 0),d([m({type:$nt,json:{read:!0,write:!0}})],g0.prototype,"utilityNetworks",void 0),g0=d([U("esri.WebMap")],g0);const Tnt=g0,Or=(t,e)=>{const r=DT().manager;r.onLoaded(()=>r.onLifecycle(()=>Oa(t,e,n.emit)));const n=WY();return n},VSe=(t,e)=>i=>knt(i,t);class UX extends UF{constructor(e,i){super(e),this.Y=new Map,this.A=void 0,this.#t=Wye();const r=this;r.#i=i,r.Z(),r.setProvisionalExports(BSe(e,new WeakRef(r),e.M.length-1,r.instance,r.Y),!1),GY(e,n=>{if(n){const s=ze(()=>e[n],a=>{if(a===r.instance)return;const o=r.instance;r.exports=a,r.instance=a,r.Y.forEach((l,c)=>e.requestUpdate(l,o[c])),r.#e&&o.destroy(),r.#e=!1},{sync:!0});r.onDestroy(s.remove)}},r.exports)}#e;#t;#i;get exports(){return Yye(this.#t),super.exports}set exports(e){super.exports=e,this.#t.notify()}Z(){const e=this;e.instance="prototype"in e.#i&&"declaredClass"in e.#i.prototype?new e.#i:e.#i(),e.#e=!0}hostConnected(){this.exports=this.instance}hostDestroy(){this.#e&&this.instance.destroy?.()}}const knt=HM(UX),BSe=(t,e,i,r,n)=>new Proxy(r,{get:(s,a)=>{const o=s[a];if(typeof a=="symbol"||n.has(a))return o;const l=t.M[i];return l.A=a,qY(t,c=>{if(l.A=void 0,c!==void 0){const h=c.key;n.set(a,h);const f=t.constructor.getPropertyOptions(h),g=a!==h&&h.toLowerCase().includes("disable");Ent(e,f,a,h,g),f.i===void 0&&Cnt(f,i,a,g)}},o)}}),Ent=(t,e,i,r,n,s)=>s=ze(()=>{const a=t.deref();return a===void 0||a.component.manager.destroyed?s=s.remove():a.exports[i]},(a,o)=>{if(!s)return;t.deref().component?.requestUpdate(r,n?!o:o),e.c=!1},{sync:!0}),Cnt=(t,e,i,r)=>{t.d.get=function(){const n=this.M[e]?.exports[i];return r?!n:n},t.d.set=function(n){const s=this.M[e];s.A!==i&&(s.exports[i]=r?!n:n)}},Int=t=>t.Y,Mnt=(t,e)=>{const i=e.manager.useRefSync(t);i?.hostDestroy(),i?.Z(),i?.hostConnected()};const Ant=St`@charset "UTF-8";@keyframes esri-basemap-slide{0%{opacity:0;margin-top:0;margin-left:0}75%{opacity:0;margin-top:0;margin-left:0}to{opacity:1;margin-top:5px;margin-left:5px}}@keyframes esri-docking-animation{0%{opacity:0}25%{opacity:0}to{opacity:1}}@keyframes popup-intro-animation-down{0%{opacity:0;transform:translateY(-5px)}to{opacity:1;transform:translate(0)}}@keyframes popup-intro-animation-up{0%{opacity:0;transform:translateY(5px)}to{opacity:1;transform:translate(0)}}@supports (-ms-ime-align: auto){.esri-slider__anchor:focus{outline:1px dotted #000}}@keyframes esri-spinner--start-animation{0%{opacity:0;transform:scale(0)}to{opacity:1;transform:scale(1)}}@keyframes esri-spinner--finish-animation{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(0)}}@keyframes esri-spinner--rotate-animation{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (prefers-reduced-motion){.esri-utility-network-trace__reset-prompt{animation:none!important}}@media (prefers-reduced-motion){.esri-popup--aligned-top-center,.esri-popup--aligned-top-left,.esri-popup--aligned-top-right,.esri-popup--aligned-bottom-center,.esri-popup--aligned-bottom-left,.esri-popup--aligned-bottom-right,.esri-popup--is-docked{animation:none!important}}@keyframes esri-fade-in-down{0%{opacity:0;transform:translateY(-5px)}25%{opacity:0;transform:translateY(-5px)}to{opacity:1;transform:translate(0)}}@keyframes esri-fade-in-up{0%{opacity:0;transform:translateY(5px)}25%{opacity:0;transform:translateY(5px)}to{opacity:1;transform:translate(0)}}@keyframes esri-fade-in{0%{opacity:0}25%{opacity:0}to{opacity:1}}@keyframes esri-fade-in-scale{0%{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}@keyframes looping-progresss-bar-ani{0%{width:0;left:0}20%{width:20%;left:0}80%{width:20%;left:80%}to{width:0;left:100%}}@keyframes esri-rotate{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes panel-advance{0%{opacity:0;transform:translate(50px) scale(.99)}to{opacity:1;transform:translate(0) scale(1)}}@keyframes panel-retreat{0%{opacity:0;transform:translate(-50px) scale(.99)}to{opacity:1;transform:translate(0) scale(1)}}@keyframes panel-advance--rtl{0%{opacity:0;transform:translate(-50px) scale(.99)}to{opacity:1;transform:translate(0) scale(1)}}@keyframes panel-retreat--rtl{0%{opacity:0;transform:translate(50px) scale(.99)}to{opacity:1;transform:translate(0) scale(1)}}.esri-view{--esri-view-outline-color: var(--calcite-color-brand);--esri-view-outline: 2px solid var(--esri-view-outline-color);--esri-view-outline-offset: -2px;margin:0;padding:0;display:flex;height:100%;width:100%}.esri-view .esri-view-user-storage{overflow:hidden}.esri-view .esri-view-root{-webkit-tap-highlight-color:var(--calcite-color-foreground-1);-webkit-tap-highlight-color:transparent;border:none;flex:100%;margin:0;padding:0;position:relative}.esri-view .esri-view-surface{-webkit-user-select:none;user-select:none;direction:ltr;border:none;outline:0;width:100%;height:100%;margin:0;padding:0;position:absolute;top:0;left:0;overflow:clip}.esri-view .esri-view-surface--touch-none{touch-action:none}.esri-view .esri-view-surface--touch-pan{touch-action:pan-x pan-y}.esri-view .esri-view-surface:focus:after{box-sizing:border-box;z-index:999;outline:var(--esri-view-outline);outline-offset:var(--esri-view-outline-offset);content:"";pointer-events:none;width:100%;height:100%;position:absolute;top:0;left:0;overflow:hidden}.esri-view .esri-view-surface[data-navigating=true]{cursor:grabbing}.esri-view .esri-view-surface[data-cursor=copy]{cursor:copy}.esri-view .esri-view-surface[data-cursor=crosshair]{cursor:crosshair}.esri-view .esri-view-surface[data-cursor=help]{cursor:help}.esri-view .esri-view-surface[data-cursor=move]{cursor:move}.esri-view .esri-view-surface[data-cursor=pointer]{cursor:pointer}.esri-view .esri-view-surface[data-cursor=progress]{cursor:progress}.esri-view .esri-view-surface[data-cursor=grab]{cursor:grab}.esri-view .esri-view-surface[data-cursor=grabbing]{cursor:grabbing}.esri-view .esri-view-surface[data-cursor=n-resize]{cursor:n-resize}.esri-view .esri-view-surface[data-cursor=e-resize]{cursor:e-resize}.esri-view .esri-view-surface[data-cursor=s-resize]{cursor:s-resize}.esri-view .esri-view-surface[data-cursor=w-resize]{cursor:w-resize}.esri-view .esri-view-surface[data-cursor=ne-resize]{cursor:ne-resize}.esri-view .esri-view-surface[data-cursor=nw-resize]{cursor:nw-resize}.esri-view .esri-view-surface[data-cursor=se-resize]{cursor:se-resize}.esri-view .esri-view-surface[data-cursor=sw-resize]{cursor:sw-resize}.esri-view .esri-view-surface[data-cursor=ew-resize]{cursor:ew-resize}.esri-view .esri-view-surface[data-cursor=ns-resize]{cursor:ns-resize}.esri-view .esri-view-surface[data-cursor=nesw-resize]{cursor:nesw-resize}.esri-view .esri-view-surface[data-cursor=nwse-resize]{cursor:nwse-resize}.esri-view .esri-view-surface[data-cursor=none]{cursor:none}.esri-view .esri-display-object,.esri-view .esri-bitmap{-webkit-user-drag:none;-webkit-user-select:none;user-select:none;border:none;margin:0;padding:0;position:absolute}.esri-view .esri-bitmap{transform-origin:0 0;max-width:none}:root{view-transition-name:none}::view-transition{pointer-events:none}.esri-ui{box-sizing:border-box;z-index:0;pointer-events:none;contain:layout;font-size:var(--calcite-font-size);position:absolute;inset:0;overflow:hidden;container:esri-view-canvas/size}.esri-ui calcite-flow,.esri-ui calcite-panel{z-index:1;position:relative}.esri-ui .esri-component{pointer-events:auto}.esri-ui .esri-fov-overlay-outer{pointer-events:none;place-content:center;width:100%;height:100%;display:grid}.esri-ui .esri-fov-overlay{text-shadow:0 0 1px var(--calcite-color-foreground-1),0 0 2px var(--calcite-color-foreground-1),0 0 3px var(--calcite-color-foreground-1);color:var(--calcite-color-text-1);font-size:var(--calcite-font-size-3);-webkit-user-select:none;user-select:none;pointer-events:none;flex-direction:row;align-items:center;gap:7px;animation:1s forwards fadeInAnimation;display:flex}.esri-ui .esri-fov-overlay-reset{cursor:pointer;pointer-events:auto}.esri-ui .esri-fov-overlay-text{pointer-events:none}@keyframes fadeInAnimation{0%{opacity:0}to{opacity:1}}@media (prefers-reduced-motion: reduce){.esri-fov-overlay{animation:none!important}}.esri-ui-corner{display:flex;position:absolute}.esri-ui-inner-container{position:absolute;inset:0}.esri-ui-manual-container>.esri-component{position:absolute}.esri-ui-manual-container .esri-swipe{z-index:-1}.esri-ui-top-left,.esri-ui-top-right{flex-flow:column}.esri-ui-top-left{align-items:flex-start;top:0;left:0}.esri-ui-top-right{align-items:flex-end;top:0;right:0}.esri-ui-bottom-left,.esri-ui-bottom-right{flex-flow:row;align-items:flex-end}.esri-ui-bottom-right{flex-flow:row-reverse;bottom:0;right:0}.esri-ui-bottom-right .esri-component{margin-left:10px}.esri-ui-top-right .esri-component,.esri-ui-top-left .esri-component{margin-bottom:10px}.esri-ui-bottom-left{bottom:0;left:0}.esri-ui-bottom-left .esri-component{margin-right:10px}:dir(rtl) .esri-ui-top-left{align-items:flex-end}:dir(rtl) .esri-ui-top-right{align-items:flex-start}:dir(rtl) .esri-ui-bottom-left{flex-direction:row-reverse}:dir(rtl) .esri-ui-bottom-right{flex-direction:row}.esri-zoom-box__container{width:100%;height:100%;position:relative}.esri-zoom-box__overlay{cursor:crosshair;width:100%;height:100%;position:absolute;top:0;left:0}.esri-zoom-box__overlay-background{fill:#0000001a}.esri-zoom-box__outline{fill:var(--calcite-color-transparent);stroke:var(--calcite-color-brand);stroke-dasharray:1 1;stroke-width:var(--calcite-spacing-base)}.esri-overlay-surface{z-index:0;pointer-events:none;-webkit-user-select:none;user-select:none;border:none;width:100%;height:100%;margin:0;padding:0;position:absolute;top:0;left:0;overflow:clip}.esri-text-overlay-item{white-space:nowrap;font-size:var(--calcite-font-size);line-height:var(--calcite-font-line-height-relative-tight);display:block;position:absolute;overflow:hidden}.esri-text-overlay-item-anchor-bottom{transform:translate(-50%,-100%)}.esri-text-overlay-item-anchor-bottom-right{transform:translate(-100%,-100%)}.esri-text-overlay-item-anchor-bottom-left{transform:translateY(-100%)}.esri-text-overlay-item-anchor-top{transform:translate(-50%)}.esri-text-overlay-item-anchor-top-right{transform:translate(-100%)}.esri-text-overlay-item-anchor-top-left{transform:translate(0)}.esri-text-overlay-item-anchor-center{transform:translate(-50%,-50%)}.esri-text-overlay-item-anchor-right{transform:translate(-100%,-50%)}.esri-text-overlay-item-anchor-left{transform:translateY(-50%)}.esri-line-overlay-item,.esri-outline-overlay-item,.esri-box-overlay-item{white-space:nowrap;display:block;position:absolute;overflow:hidden}.esri-shadow-cast__tooltip{color:var(--calcite-color-text-2);font-size:var(--calcite-font-size-sm)}.esri-shadow-cast__tooltip__content{margin-top:-8px-var(--calcite-spacing-xxs);padding:var(--calcite-spacing-xs) var(--calcite-spacing-sm);background:var(--calcite-color-foreground-1);width:max-content;position:absolute;transform:translate(-50%,-100%)}.esri-shadow-cast__tooltip__content:after{content:"";border:8px solid var(--calcite-color-transparent);border-top-color:var(--calcite-color-foreground-1);box-sizing:inherit;width:0;height:0;display:block;position:absolute;bottom:1px;left:50%;transform:translate(-50%,100%)}.esri-attribution{position:absolute;bottom:0;left:0;right:0;background-color:var(--calcite-color-transparent-tint)!important;flex-flow:row;justify-content:space-between;align-items:center;font-size:var(--calcite-font-size-sm)!important;line-height:var(--calcite-font-line-height-fixed-base)!important;display:flex}.esri-attribution__link{color:var(--calcite-color-text-1)}.esri-attribution__link:hover,.esri-attribution__link:active,.esri-attribution__link:visited,.esri-attribution__link:focus{color:var(--calcite-color-text-1)}.esri-attribution__sources{text-overflow:ellipsis;white-space:nowrap;flex:1 0;align-self:flex-start;padding:0 5px;font-weight:var(--calcite-font-weight-light);overflow:hidden}.esri-attribution__sources[role=button]{font-size:1em}.esri-attribution__powered-by{color:var(--calcite-color-text-2);text-align:right;white-space:nowrap;align-self:flex-end;padding:0 5px;font-weight:var(--calcite-font-weight-normal)}.esri-attribution--open{z-index:2}.esri-attribution__sources--open{white-space:normal}.esri-button{box-sizing:border-box;cursor:pointer;white-space:normal;word-break:normal;color:var(--calcite-color-text-1);background-color:var(--calcite-color-status-info);border:var(--calcite-spacing-px) solid var(--calcite-color-status-info);justify-content:center;align-items:center;width:100%;min-height:var(--calcite-spacing-xxxl);padding:6px 7px;font-family:inherit;font-size:var(--calcite-font-size);transition:background-color .125s ease-in-out,border .125s ease-in-out;display:flex;overflow:hidden;&:hover{color:var(--calcite-color-text-1);background-color:var(--calcite-color-status-info-hover);border:var(--calcite-spacing-px) solid var(--calcite-color-status-info-hover)}}.esri-button:hover{color:var(--calcite-color-text-1);background-color:var(--calcite-color-text-2);border:1px solid var(--calcite-color-text-2)}.esri-button.esri-button--small{min-height:var(--calcite-spacing-xl);font-size:var(--calcite-font-size-sm)}.esri-button.esri-button--half{width:50%;display:inline-block}.esri-button.esri-button--third{width:33%;display:inline-block}.esri-button--secondary{color:var(--calcite-color-text-1);background-color:var(--calcite-color-foreground-1)}.esri-button--tertiary{color:var(--calcite-color-brand);background-color:var(--calcite-color-transparent);border-color:var(--calcite-color-transparent)}.esri-button--tertiary:hover{color:var(--calcite-color-brand-hover);background-color:var(--calcite-color-foreground-2);border-color:var(--calcite-color-transparent)}.esri-button--disabled{opacity:.4;pointer-events:none}.esri-button--drill-in{outline-offset:-4px;cursor:pointer;text-align:unset;background-color:var(--calcite-color-foreground-1);border:none;border-radius:2px;justify-content:space-between;align-items:center;margin:var(--calcite-spacing-md) 7px;padding:var(--calcite-spacing-md) 7px;text-decoration:none;transition:background-color .125s ease-in-out;display:flex;box-shadow:0 0 0 1px #adadad4d}.esri-button--drill-in:hover,.esri-button--drill-in:focus{background-color:var(--calcite-color-foreground-2)}.esri-button--drill-in__title{font-size:var(--calcite-font-size)}.esri-button--drill-in [class^=esri-icon-],.esri-button--drill-in [class*=" esri-icon-"]{padding:0 7px}.esri-widget--button{cursor:pointer;text-align:center;color:var(--calcite-color-text-2);background-color:var(--calcite-color-foreground-1);flex-flow:row;justify-content:center;align-items:center;width:var(--calcite-spacing-xxxl);height:var(--calcite-spacing-xxxl);margin:0;padding:0;font-size:var(--calcite-font-size);transition:background-color .125s ease-in-out;display:flex;overflow:hidden}.esri-widget--button:is(calcite-button):not(:hover){--calcite-icon-color: var(--calcite-color-text-3)}.esri-widget--button:not([appearance]),.esri-widget--button[appearance=solid]{--calcite-color-foreground-3: var(--calcite-color-foreground-1)}.esri-widget--button:is(calcite-button){--calcite-offset-invert-focus: 1}.esri-widget--button calcite-loader[inline]{margin:auto}.esri-button--secondary{color:var(--calcite-color-brand);background-color:var(--calcite-color-foreground-1);&:hover{color:var(--calcite-color-text-inverse);background-color:var(--calcite-color-status-info);border:1px solid var(--calcite-color-status-info)}}.esri-widget__heading{color:var(--calcite-color-text-2);margin:0 0 .5rem;font-weight:var(--calcite-font-weight-semibold)}h1.esri-widget__heading{font-size:var(--calcite-font-size-xl)}h2.esri-widget__heading{font-size:var(--calcite-font-size-md)}h3.esri-widget__heading,h4.esri-widget__heading,h5.esri-widget__heading,h6.esri-widget__heading{font-size:var(--calcite-font-size)}.esri-widget{--esri-widget-padding-x: 15px;--esri-widget-padding-y: var(--calcite-spacing-md);--esri-widget-padding: var(--esri-widget-padding-y) var(--esri-widget-padding-x);box-sizing:border-box;color:var(--calcite-color-text-2);background-color:var(--calcite-color-foreground-1);font-size:var(--calcite-font-size);line-height:var(--calcite-font-line-height-relative-tight)}.esri-widget *,.esri-widget :before,.esri-widget :after{box-sizing:inherit}.esri-widget.esri-widget--disabled>*{opacity:.4;pointer-events:none}.esri-widget.esri-widget--compact{--esri-widget-padding-y: 0;--esri-widget-padding-x: 0}.esri-widget__anchor{color:var(--calcite-color-text-2)}.esri-widget__anchor:hover{color:var(--calcite-color-text-3)}.esri-widget__anchor:hover,.esri-widget__anchor:focus{text-decoration:underline}.esri-widget__anchor--disabled{opacity:.4;pointer-events:none}.esri-widget__header{background-color:var(--calcite-color-foreground-1);flex:1 0 100%;justify-content:space-between;align-items:center;width:100%;min-height:48px;padding:12px 0 12px 15px;display:flex}.esri-widget__header .esri-widget__heading{width:calc(100% - 48px);text-align:initial;color:var(--calcite-color-text-1);align-items:center;margin:0;padding:0;display:flex}.esri-widget__header-button{appearance:none;cursor:pointer;color:var(--calcite-color-text-2);background-color:var(--calcite-color-foreground-1);border:none;flex:0 0 48px;justify-content:center;align-self:stretch;align-items:center;width:48px;padding:0;display:flex}.esri-widget__footer{background-color:var(--calcite-color-foreground-1);justify-content:center;align-items:center;width:100%;min-height:48px;display:flex}.esri-widget__footer-pagination{color:var(--calcite-color-text-2);justify-content:space-between;align-items:center;display:flex}.esri-widget__footer-pagination-previous-button,.esri-widget__footer-pagination-next-button{cursor:pointer;background-color:var(--calcite-color-foreground-1);border:0;margin:0 7px;padding:12px 15px;transition:background-color .125s ease-in-out}.esri-widget__footer-pagination-previous-button:hover,.esri-widget__footer-pagination-previous-button:focus,.esri-widget__footer-pagination-next-button:hover,.esri-widget__footer-pagination-next-button:focus{color:var(--calcite-color-text-1);background-color:var(--calcite-color-foreground-1)}.esri-menu{visibility:hidden;z-index:1;background-clip:padding;background-color:var(--calcite-color-foreground-1);background-clip:padding-box;width:100%;max-height:0;margin:2px 0 0;padding:0;font-size:var(--calcite-font-size);line-height:var(--calcite-spacing-xl);position:absolute;top:100%;left:0;overflow:hidden;box-shadow:0 1px 2px #0000004d}.esri-menu .esri-menu__header{color:var(--calcite-color-text-inverse);background-color:var(--calcite-color-inverse);padding:6px 12px}.esri-menu__list{margin:0;padding:0;list-style:none}.esri-menu__list-item{cursor:pointer;border-top:1px solid #adadad4d;border-left:3px solid #0000;padding:.8em 1em}.esri-menu__list-item [class^=esri-icon-],.esri-menu__list-item [class*=" esri-icon-"]{padding-right:2.8px}.esri-menu__list-item:first-child{border-top:none}.esri-menu__list-item--focus,.esri-menu__list-item:hover,.esri-menu__list-item:focus{background-color:var(--calcite-color-foreground-1)}.esri-menu__list-item:active{background-color:var(--calcite-color-foreground-current)}.esri-menu__list-item--active,.esri-menu__list-item--active:hover,.esri-menu__list-item--active:focus{background-color:var(--calcite-color-foreground-1);border-left-color:var(--calcite-color-brand)}.esri-widget__table{border-collapse:collapse;color:var(--calcite-color-text-1);border:none;width:100%;line-height:var(--calcite-font-line-height-relative-tight)}.esri-widget__table tr:nth-child(odd){background-color:var(--calcite-color-transparent)}.esri-widget__table tr:nth-child(2n){background-color:var(--calcite-color-transparent-press)}.esri-widget__table tr a{color:var(--calcite-color-text-2)}.esri-widget__table tr a:hover,.esri-widget__table tr a:focus{color:var(--calcite-color-text-1)}.esri-widget__table tr td,.esri-widget__table tr th{vertical-align:top;word-break:break-word;padding:.5em .7em;font-size:var(--calcite-font-size-sm);font-weight:var(--calcite-font-weight-regular)}.esri-widget__table tr th{text-align:left;border-right:3px solid #0000000d;width:50%}.esri-widget__table tr td{width:50%}.esri-input{color:var(--calcite-color-text-1);background-color:var(--calcite-color-foreground-1);border:1px solid #959595;font-size:var(--calcite-font-size)}.esri-input::-ms-clear{display:none}.esri-input::placeholder{opacity:1;color:var(--calcite-color-text-2)}.esri-input:placeholder-shown{text-overflow:ellipsis}.esri-input[type=text],.esri-input[type=password],.esri-input[type=number]{height:32px;padding:0 .5em}calcite-combobox.esri-input{border:none}.esri-widget__content--empty{text-align:center;color:var(--calcite-color-border-input);flex-flow:column wrap;align-items:center;padding:18px 22px;display:flex}.esri-widget__content--empty h1.esri-widget__heading,.esri-widget__content--empty h2.esri-widget__heading,.esri-widget__content--empty h3.esri-widget__heading,.esri-widget__content--empty h4.esri-widget__heading,.esri-widget__content--empty h5.esri-widget__heading{font-weight:var(--calcite-font-weight-regular)}.esri-widget__content-illustration--empty{width:128px;padding:1rem 0}.esri-widget__content-icon--empty{width:32px;padding:.5rem 0}.esri-select{appearance:none;cursor:pointer;color:var(--calcite-color-text-2);background:var(--calcite-color-foreground-1) url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='-8 -8 32 32' width='32' height='32'%3E%3Cpath d='M8 11.207l-4-4V5.793l4 4 4-4v1.414z' fill='%23adadad' fillrule='nonzero'/%3E%3C/svg%3E") 100% no-repeat;border:1px solid #959595;border-radius:0;width:100%;height:32px;margin:0;padding:0 .5em;font-family:inherit;font-size:.85em;display:block}.esri-select[disabled]{cursor:auto}.esri-select::-ms-expand{display:none}.esri-disabled a,.esri-disabled [role=menu],.esri-disabled [role=checkbox],.esri-disabled [class^=esri-icon-],.esri-disabled [class*=" esri-icon-"]{color:var(--calcite-color-text-3)}.keynav-mode .esri-widget:focus,.keynav-mode .esri-widget :focus{z-index:1;outline-offset:2px;outline:2px solid #adadad}.esri-widget__loader-animation{border:.15em solid #adadad4d;border-top-color:var(--calcite-color-border-input);border-radius:100%;width:1em;height:1em;font-size:var(--calcite-font-size-md);animation:1.25s linear infinite esri-rotate;display:block;transform:translateZ(0)}:dir(rtl) .esri-widget__table th{text-align:right;border-left:3px solid #0000000d;border-right:none}:dir(rtl) .esri-select{background-position:0}:dir(rtl) .esri-menu__list-item{border-left:none;border-right:3px solid #0000}:dir(rtl) .esri-menu__list-item [class^=esri-icon-],:dir(rtl) .esri-menu__list-item [class*=" esri-icon-"]{padding-left:2px;padding-right:0}:dir(rtl) .esri-menu__list-item--active{border-right-color:var(--calcite-color-brand)}.esri-icon-font-fallback-text{clip:rect(0 0 0 0);width:1px;height:1px;position:absolute;overflow:hidden}.esri-rotating{animation:1.25s linear infinite esri-rotate;transform:translateZ(0)}.esri-clearfix:before,.esri-clearfix:after{content:" ";display:table}.esri-clearfix:after{clear:both}.esri-interactive{cursor:pointer}.esri-invisible{visibility:hidden!important}.esri-offscreen{position:absolute;top:-999em;left:-999em}.esri-match-height{flex-direction:column;flex:auto;display:flex;overflow:hidden}.esri-hidden{display:none!important}[class^=esri-icon-],[class*=" esri-icon-"]{speak:none;font-variant:normal;text-transform:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-style:normal;font-weight:var(--calcite-font-weight-normal);line-height:1;font-family:CalciteWebCoreIcons!important}.esri-icon-close:before{content:"";color:inherit}.esri-icon-drag-horizontal:before{content:"";color:inherit}.esri-icon-drag-vertical:before{content:"";color:inherit}.esri-icon-handle-horizontal:before{content:"";color:inherit}.esri-icon-handle-vertical:before{content:"";color:inherit}.esri-icon-check-mark:before{content:"";color:inherit}.esri-icon-left-triangle-arrow:before{content:"";color:inherit}.esri-icon-right-triangle-arrow:before{content:"";color:inherit}.esri-icon-down-arrow:before{content:"";color:inherit}.esri-icon-up-arrow:before{content:"";color:inherit}.esri-icon-overview-arrow-bottom-left:before{content:"";color:inherit}.esri-icon-overview-arrow-bottom-right:before{content:"";color:inherit}.esri-icon-overview-arrow-top-left:before{content:"";color:inherit}.esri-icon-overview-arrow-top-right:before{content:"";color:inherit}.esri-icon-maximize:before{content:"";color:inherit}.esri-icon-minimize:before{content:"";color:inherit}.esri-icon-checkbox-unchecked:before{content:"";color:inherit}.esri-icon-checkbox-checked:before{content:"";color:inherit}.esri-icon-radio-unchecked:before{content:"";color:inherit}.esri-icon-radio-checked:before{content:"";color:inherit}.esri-icon-up-arrow-circled:before{content:"";color:inherit}.esri-icon-down-arrow-circled:before{content:"";color:inherit}.esri-icon-left-arrow-circled:before{content:"";color:inherit}.esri-icon-right-arrow-circled:before{content:"";color:inherit}.esri-icon-zoom-out-fixed:before{content:"";color:inherit}.esri-icon-zoom-in-fixed:before{content:"";color:inherit}.esri-icon-refresh:before{content:"";color:inherit}.esri-icon-edit:before{content:"";color:inherit}.esri-icon-authorize:before{content:"";color:inherit}.esri-icon-map-pin:before{content:"";color:inherit}.esri-icon-blank-map-pin:before{content:"";color:inherit}.esri-icon-table:before{content:"";color:inherit}.esri-icon-plus:before{content:"+";color:inherit}.esri-icon-minus:before{content:"";color:inherit}.esri-icon-beginning:before{content:"";color:inherit}.esri-icon-reverse:before{content:"";color:inherit}.esri-icon-pause:before{content:"";color:inherit}.esri-icon-play:before{content:"";color:inherit}.esri-icon-forward:before{content:"";color:inherit}.esri-icon-end:before{content:"";color:inherit}.esri-icon-erase:before{content:"";color:inherit}.esri-icon-up-down-arrows:before{content:"";color:inherit}.esri-icon-left:before{content:"";color:inherit}.esri-icon-right:before{content:"";color:inherit}.esri-icon-announcement:before{content:"";color:inherit}.esri-icon-notice-round:before{content:"";color:inherit}.esri-icon-notice-triangle:before{content:"";color:inherit}.esri-icon-home:before{content:"";color:inherit}.esri-icon-locate:before{content:"";color:inherit}.esri-icon-expand:before{content:"";color:inherit}.esri-icon-collapse:before{content:"";color:inherit}.esri-icon-layer-list:before{content:"";color:inherit}.esri-icon-basemap:before{content:"";color:inherit}.esri-icon-globe:before{content:"";color:inherit}.esri-icon-applications:before{content:"";color:inherit}.esri-icon-arrow-up-circled:before{content:"";color:inherit}.esri-icon-arrow-down-circled:before{content:"";color:inherit}.esri-icon-arrow-left-circled:before{content:"";color:inherit}.esri-icon-arrow-right-circled:before{content:"";color:inherit}.esri-icon-minus-circled:before{content:"";color:inherit}.esri-icon-plus-circled:before{content:"";color:inherit}.esri-icon-add-attachment:before{content:"";color:inherit}.esri-icon-attachment:before{content:"";color:inherit}.esri-icon-calendar:before{content:"";color:inherit}.esri-icon-close-circled:before{content:"";color:inherit}.esri-icon-browser:before{content:"";color:inherit}.esri-icon-collection:before{content:"";color:inherit}.esri-icon-comment:before{content:"";color:inherit}.esri-icon-configure-popup:before{content:"";color:inherit}.esri-icon-contact:before{content:"";color:inherit}.esri-icon-dashboard:before{content:"";color:inherit}.esri-icon-deny:before{content:"";color:inherit}.esri-icon-description:before{content:"";color:inherit}.esri-icon-directions:before{content:"";color:inherit}.esri-icon-directions2:before{content:"";color:inherit}.esri-icon-documentation:before{content:"";color:inherit}.esri-icon-duplicate:before{content:"";color:inherit}.esri-icon-review:before{content:"";color:inherit}.esri-icon-environment-settings:before{content:"";color:inherit}.esri-icon-error:before{content:"";color:inherit}.esri-icon-error2:before{content:"";color:inherit}.esri-icon-experimental:before{content:"";color:inherit}.esri-icon-feature-layer:before{content:"";color:inherit}.esri-icon-filter:before{content:"";color:inherit}.esri-icon-grant:before{content:"";color:inherit}.esri-icon-group:before{content:"";color:inherit}.esri-icon-key:before{content:"";color:inherit}.esri-icon-labels:before{content:"";color:inherit}.esri-icon-tag:before{content:"";color:inherit}.esri-icon-layers:before{content:"";color:inherit}.esri-icon-left-arrow:before{content:"";color:inherit}.esri-icon-right-arrow:before{content:"";color:inherit}.esri-icon-link-external:before{content:"";color:inherit}.esri-icon-link:before{content:"";color:inherit}.esri-icon-loading-indicator:before{content:"";color:inherit}.esri-icon-maps:before{content:"";color:inherit}.esri-icon-marketplace:before{content:"";color:inherit}.esri-icon-media:before{content:"";color:inherit}.esri-icon-media2:before{content:"";color:inherit}.esri-icon-menu:before{content:"";color:inherit}.esri-icon-mobile:before{content:"";color:inherit}.esri-icon-phone:before{content:"";color:inherit}.esri-icon-navigation:before{content:"";color:inherit}.esri-icon-pan:before{content:"";color:inherit}.esri-icon-printer:before{content:"";color:inherit}.esri-icon-pie-chart:before{content:"";color:inherit}.esri-icon-chart:before{content:"";color:inherit}.esri-icon-line-chart:before{content:"";color:inherit}.esri-icon-question:before{content:"";color:inherit}.esri-icon-resend-invitation:before{content:"";color:inherit}.esri-icon-rotate:before{content:"";color:inherit}.esri-icon-save:before{content:"";color:inherit}.esri-icon-settings:before{content:"";color:inherit}.esri-icon-settings2:before{content:"";color:inherit}.esri-icon-share:before{content:"";color:inherit}.esri-icon-sign-out:before{content:"";color:inherit}.esri-icon-support:before{content:"";color:inherit}.esri-icon-user:before{content:"";color:inherit}.esri-icon-time-clock:before{content:"";color:inherit}.esri-icon-trash:before{content:"";color:inherit}.esri-icon-upload:before{content:"";color:inherit}.esri-icon-download:before{content:"";color:inherit}.esri-icon-zoom-in-magnifying-glass:before{content:"";color:inherit}.esri-icon-search:before{content:"";color:inherit}.esri-icon-zoom-out-magnifying-glass:before{content:"";color:inherit}.esri-icon-locked:before{content:"";color:inherit}.esri-icon-unlocked:before{content:"";color:inherit}.esri-icon-favorites:before{content:"";color:inherit}.esri-icon-compass:before{content:"";color:inherit}.esri-icon-down:before{content:"";color:inherit}.esri-icon-up:before{content:"";color:inherit}.esri-icon-chat:before{content:"";color:inherit}.esri-icon-dock-bottom:before{content:"";color:inherit}.esri-icon-dock-left:before{content:"";color:inherit}.esri-icon-dock-right:before{content:"";color:inherit}.esri-icon-organization:before{content:"";color:inherit}.esri-icon-north-navigation:before{content:"";color:inherit}.esri-icon-locate-circled:before{content:"";color:inherit}.esri-icon-dial:before{content:"";color:inherit}.esri-icon-polygon:before{content:"";color:inherit}.esri-icon-polyline:before{content:"";color:inherit}.esri-icon-visible:before{content:"";color:inherit}.esri-icon-non-visible:before{content:"";color:inherit}.esri-icon-link-vertical:before{content:"";color:inherit}.esri-icon-unlocked-link-vertical:before{content:"";color:inherit}.esri-icon-link-horizontal:before{content:"";color:inherit}.esri-icon-unlocked-link-horizontal:before{content:"";color:inherit}.esri-icon-swap:before{content:"";color:inherit}.esri-icon-cta-link-external:before{content:"";color:inherit}.esri-icon-reply:before{content:"";color:inherit}.esri-icon-public:before{content:"";color:inherit}.esri-icon-share2:before{content:"";color:inherit}.esri-icon-launch-link-external:before{content:"";color:inherit}.esri-icon-rotate-back:before{content:"";color:inherit}.esri-icon-pan2:before{content:"";color:inherit}.esri-icon-tracking:before{content:"";color:inherit}.esri-icon-expand2:before{content:"";color:inherit}.esri-icon-arrow-down:before{content:"";color:inherit}.esri-icon-arrow-up:before{content:"";color:inherit}.esri-icon-hollow-eye:before{content:"";color:inherit}.esri-icon-play-circled:before{content:"";color:inherit}.esri-icon-volume-off:before{content:"";color:inherit}.esri-icon-volume-on:before{content:"";color:inherit}.esri-icon-bookmark:before{content:"";color:inherit}.esri-icon-lightbulb:before{content:"";color:inherit}.esri-icon-sketch-rectangle:before{content:"";color:inherit}.esri-icon-north-navigation-filled:before{content:"";color:inherit}.esri-icon-default-action:before{content:"";color:inherit}.esri-icon-undo:before{content:"";color:inherit}.esri-icon-redo:before{content:"";color:inherit}.esri-icon-cursor:before{content:"";color:inherit}.esri-icon-cursor-filled:before{content:"";color:inherit}.esri-icon-measure:before{content:"";color:inherit}.esri-icon-measure-line:before{content:"";color:inherit}.esri-icon-measure-area:before{content:"";color:inherit}.esri-icon-legend:before{content:"";color:inherit}.esri-icon-sliders:before{content:"";color:inherit}.esri-icon-sliders-horizontal:before{content:"";color:inherit}.esri-icon-cursor-marquee:before{content:"";color:inherit}.esri-icon-lasso:before{content:"";color:inherit}.esri-icon-elevation-profile:before{content:"";color:inherit}.esri-icon-slice:before{content:"";color:inherit}.esri-icon-line-of-sight:before{content:"";color:inherit}.esri-icon-zoom-to-object:before{content:"";color:inherit}.esri-icon-urban-model:before{content:"";color:inherit}.esri-icon-measure-building-height-shadow:before{content:"";color:inherit}.esri-icon-partly-cloudy:before{content:"";color:inherit}.esri-attachments__progress-bar:before,.esri-attachments__progress-bar:after{opacity:var(--calcite-opacity-100);content:"";height:1px;transition:opacity .5s ease-in-out;position:absolute;top:0}.esri-attachments__progress-bar:before{z-index:0;background-color:var(--calcite-color-foreground-2);width:100%}.esri-attachments__progress-bar:after{z-index:0;background-color:var(--calcite-color-text-2);width:20%;animation:1.5s linear infinite looping-progresss-bar-ani}.esri-attachments{background-color:var(--calcite-color-background)!important;width:100%}.esri-attachments__loader-container{justify-content:center;align-items:center;height:150px;padding:0;display:flex}.esri-attachments__loader{background:url(data:image/gif;base64,R0lGODlhIQAnALMKAAB6wrze86TR7Y3F53W44V6s2kaf1C+TzheGyNPq+f///wAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/wtYTVAgRGF0YVhNUDw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDE0IDc5LjE1Njc5NywgMjAxNC8wOC8yMC0wOTo1MzowMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1MkRGQzEzOEQ3MUIxMUU0QjJCRTkxRjI3NjA5MTc2MyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo2RDdDRTgwM0Q3MjAxMUU0QjJCRTkxRjI3NjA5MTc2MyIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo2RDdDRTgwMkQ3MjAxMUU0QjJCRTkxRjI3NjA5MTc2MyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxNCAoTWFjaW50b3NoKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOmQyYThhNjgzLWIwNjctNDhhZi05Nzc0LTZiOTZkM2RhMjI2OCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo1MkRGQzEzOEQ3MUIxMUU0QjJCRTkxRjI3NjA5MTc2MyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PgH//v38+/r5+Pf29fTz8vHw7+7t7Ovq6ejn5uXk4+Lh4N/e3dzb2tnY19bV1NPS0dDPzs3My8rJyMfGxcTDwsHAv769vLu6ubi3trW0s7KxsK+urayrqqmop6alpKOioaCfnp2cm5qZmJeWlZSTkpGQj46NjIuKiYiHhoWEg4KBgH9+fXx7enl4d3Z1dHNycXBvbm1sa2ppaGdmZWRjYmFgX15dXFtaWVhXVlVUU1JRUE9OTUxLSklIR0ZFRENCQUA/Pj08Ozo5ODc2NTQzMjEwLy4tLCsqKSgnJiUkIyIhIB8eHRwbGhkYFxYVFBMSERAPDg0MCwoJCAcGBQQDAgEAACH5BAkEAAoALAAAAAAhACcAAASOUMlJq70W6L2xv1z4jVPIkaTZoZ+qsa0Ley4wY7WU7Dyv9z1JTgEMEos7oeyI/DUVQ2SSWVSqnFUq0GrCbrXGqNQbXkoTZB/UPAarxc8zV+SeytfXOlo/P/H/cFl3gV+DbHFthEaGeXeMXX+PdI6Jh4KVjW2SfpRPQzcVn6AlS6OkeaZ9K6l4kKyirLEXEQAh+QQJBAAKACwAAAAAIQAnAAAEqFDJSau9OOutkP8fx4GkuJGgqaGhirGe+8JSYN+3CCM1jkuJoFAo2fV8NuBwWKQpkDnFktlxQpPSabDJOiKVWi7K6wNPxaXn1bxEp9RQNtUI/2bD1W69fD/nx3s/fW1/aVcBckSFb4eJW4stjYNzVmuTinSSWo+ZlpsJbpGem6ExgVGfpTynWKmQppqkr6uxeJ1xl5yVuCdOMhV0vxTBwqrFw77HysvFEQAh+QQFBAAKACwAAAAAIQAnAAAEqFDJSau9OOvNez5gGHqaaJKfOaKXugpwHHcuKMk4Xd/4rCTAYFBSO/B6AolwSdwpkDDlcqgoHnvSaaLpuuZ+2m3VCU2CtVyVV5adpk9PaJs57saRc+FbtPaFxVZ3WGdudWqCX397L3KEdIFleVSQjYqGcJGOepd8iGyak2SVYYs2nn6knIx4oEClRqdRrYCirJaUtqm4gxu7X71OLBWBwhTExcjJysseEQAh+QQJBAAKACwBAAMAFAAhAAAEU9DIOZW9WNGd+6Zd9lXKYJ7nKFloqxpsm6qxPLy1jJf2TfO2Xc83yrl+Q2FPGUQunc0iUAelSpPV4/W5jX6MKKb1O9WSsd0xpxzOtqUhyy6u+dEjACH5BAkEAAoALAAAAAAhACcAAASAUMlJq7046827/10hjiOIkahErCwboqXSzi9cqLPL2SKeEzWYLxdMyX7AHW9IU9qYrSIJqtvwbsefNIZMWpdZolMYbn6f5ejY2N320lXNlbpyY9vrKbye5yLtdF5yYHhnZIWDaIgZc3uCjIR/fW+LJ5Fak3eShkYmnp+goaKjHREAIfkECQQACgAsAAAAACEAJwAABKhQyUmrvTjrzbv/IFaMJNkRaJpKZXuqKtuaHBwrM73ZK54XkoRwOJTwULJckEg0HpOzJVPo5EFdimlRcSRcS9Jp1falaancp0+ZPY9h5VGY+b79gG1tvXefN9NWa1F5YoBkglhnCXtIiGCEdIZwjmZuknY/fltdcXiKjF6UcpB/nKKelqZ9pJtqq5+XfJmsaKqzsLZsuK6zO7xsvoGrIRXDxMfIycrLxBEAIfkEBQQACgAsAAAAACEAJwAABKdQyUmrvTjrzbu3RiiKXzaeJXaO3eC+r7SSHGzLs9HasZLrioRwOJTwej8JcWk8DnAz5bKocD59Oek00TxCV9ppl/dFBbfcqrPMOm/HN2zULVZ75WA6007Gm9FpVmw0gHAwgyFhe4J+bYV8cUl6RIZIWZNUjJKPmpeca42EaJUuiECfd5ujkIehiZhCpFeqb6yWc6h9khudcykVu78TwcKuQMXIycrKEQAh+QQJBAAKACwBAAMAFAAhAAAEVVDJSdW5GNed+65dJowkKYVYqZ7ooZYs+ppWO49xeAt5t/eiGzAlrMmKLRfStjzOhpefUdekPqe+avaalHa1QS5T7HxBlWSrGRtef9OezyQpn7fq5wgAIfkECQQACgAsAAAAACEAJwAABIBQyUmrvTjrzZH/H9eBoLiRpZmhoYqxnhjMNC3BiFzXN6zvsx7rBxSiiDsjCclT4Jg2p48DjD6p1YAytclqpUNsddvqZskxcRF8VCfZS3fzah7DuRovOie3TutrdHlnd2WDdoIZeoVpgG+JGIuQF5J/LhWTl5kumyqdJp+XoqMiEQAh+QQJBAAKACwAAAAAIQAnAAAEjlDJSau9OIPNef5VJ4KkInYleHqptgKtu8bYC5NJruuSLe3AH5BnegmHieOwZ1Qgc8pgceZ8RndM6jNZRWZPV+L2O+ouzVIfGrsmqsdt6BQc58Lf1joZpe/jvX5NcHeCeYRahnl/Z4d0g4qFgI1lj4CLUpN8lWeXbCpNNCGgoRNqpKWjp6anc2WsrXyvrBEAIfkECQQACgAsAAAAACEAJwAABKlQyUmrvTjrzZH/H9eBoLiRpZmhoYqxnvvCUmDft5TsPC/BiBoOp+v1fjTFkKgwHhVA4TJQdCaQLOmy6sSitEOu0UsCM607cmpqEz+jSrbbB02yqU20unWfp+tZcVN+V4Bfglt5VnsxiGGKXYZljmd6kmtykGOXfJlohXB9mm92npahpoucjaKfjEGUOaN0qIOzf7WJJ6W2u4EyFXDAFMLDr8bEScjLzBoRACH5BAUEAAoALAAAAAAhACcAAASqUMlJq7046827t0coil82niV2jum1koogz3P3hhKtS0nv+5LbIaerKX7I4I1YFPCQQIWQWXxCE8oXdXe8YqXLWNPZvWZXW5oVekaJm+skWPuultlzdJ3r/U73andyf2NkfW0sgEaHeW6FcT+IMI+CkY2JlIyEY5BRm3CVnmGZXpI4ijKdPaZDqIall5Ocoauxp6Rmtq2UG592vaOzwHQtFH/FE8fIy8zNzBEAIfkECQQACgAsDAADABQAIQAABFPQyDmVvVjRnfumXfZVymCe5yhZaKsabJuqsTy8tYyX9k3ztl3PN8q5fkNhTxlELp3NIlAHpUqT1eP1uY1+jCim9TvVkrHdMacczralIcsurvnRIwAh+QQJBAAKACwAAAAAIQAnAAAEgFDJSau9OOvNu/8gVowkGV5lKhFs23ZpubouHI8zzdp3rvMxHw2oUuhenBvOeCQQZczj0xT9JZXC2rVXHW6DXe1GWcgix9jwWUM2777FphMOlU+Xdjo1j+by2Wl/GW1qb31ggiKBTXdlhXOHcYx6eJORdZaAfpmDaSefoKGio58RACH5BAkEAAoALAAAAAAhACcAAASoUMlJq7046827/2AoFWRZdkSqqqNpouvauiQcpzMtJXzfSzeWgnZS+I7AICHn2h1/CuVySCw4n4lkkPkyYrNRJbf4BUvHNS9We0Nb1U92zH2Nh7dUYh15b+d1cHxnf02BPnIyhF1liEJVb4x9c4pkX404lGmRg497h5KJnYZQnFWepGKZkJagjqajPJdTopuptKylehy5gBu8hb62ryIUosTHyMnKyxIRACH5BAUEAAoALAAAAAAhACcAAASpUMlJq7046827/5IhjiOIkah5oWQ3vDAcsqIbxzMtJXzfSzecglZT+I7A4CvH2h1/CuVySHQ+E0klM2W8YqPSbat7zQbFJfLTfEMXvV/pwG2wrsFaqk6NxJ/1TXw+bEJEdYJQcnR2fYqAXHCEMo9jkX5tlGmWjoaMg5eFVYg8klOdo3FhmW9epXOrh5uqp7J5tK2gk6cbnKK8s74qE7vCi8XDwcfKy8wWEQAh+QQJBAAKACwMAAMAFAAhAAAEVVDJSdW5GNed+65dJowkKYVYqZ7ooZYs+ppWO49xeAt5t/eiGzAlrMmKLRfStjzOhpefUdekPqe+avaalHa1QS5T7HxBlWSrGRtef9OezyQpn7fq5wgAIfkECQQACgAsAAAAACEAJwAABIBQyUmrvTjrzTf6INh5YThqpXliqbhe7dcFdF1LMTLbNh7vPJqvBQwOU0XesZTsKXLN2/PHCUqhVWtgqdpot1Ni1sp1ebVl2dgYRq6VbebbiT2T413NN62bX6l2bHV6aHhmhHeDGXuGaoFwihiMkReTgC8UlC+aK5wnniOgmKOjEQAh+QQJBAAKACwAAAAAIQAnAAAEjlDJSau9OGsFuvdbyH2fuJGlmaGgirGd+8LyBQNSou97zvOSm++nGxKDNAWxp1wmkCzjTwocRZtLKlOIPXanVpS2+K1ync/yNokep89ON1SsJrfDJHn9zY7v53l/gnBZg32Fd4ReiYeLfopgjFd3knSUj42RmJN+lYE1FFygE6KjeCmmpy2ppaOtoK+pFhEAIfkECQQACgAsAAAAACEAJwAABI1QyUmrvTjrzTf6INh5YThqpXliqbhe7ffCsZTcOG7nuRQjO94tKPTVFEIdMpkwtog8aE/xkyqZTeoRax1qn8tkN1sNF83Rb2rMVpfaXLcqHi/Tmc41elrf4vdKdn99YHdici6GZ4KHhHqKaYxnjm+AXpRzg3+SaZguMxRloBOio4gypnmVqaWjramwLxEAIfkEBQQACgAsAAAAACEAJwAABIpQyUmrvTjrzbv/0iGOI4iRqHmhpGqxpUvBopTcOG7neUjvvBsw6IMNeceegnZI6hTBJ9MphEYTRRYVa41mU11iGLn8jZVX7vT8TH9b7Kq7bIxz5+s53qy/vmN9XnRadlt/NYWJeX6KfIx7dYFii4KQhJJklGKWYJhKazKHTaGipKWmoKGppqytrBEAIfkECQQACgAsFwADAAkAIQAABBLQyEmrvTjrzbv/YCiOZGmeZQQAIfkECQQACgAsAAAAACEAJwAABFBQyUmrvTjrzbv/YCgVZFmKlqmilWqylHvCo1zQtYwr9o33O+DPFiQOdUdXEUkTNo1PJsw5hValLGrWusWitF9u2CsCl8Vncsi8Ru/e8PguAgAh+QQJBAAKACwAAAAAIQAnAAAEhlDJSau9OOvNu/9gKIZEaZpjda4ptZ5SIs9zTNPSiyo3zveynI5gAxZ7Qt3xtvQNiT9jFKl4NmtTZnV4DWad3C8W6LWKveRE8tVVn93mdHvNes+3Srs+Tr7zpXJ4bHqBf1SFYYGIeYp9gnWNUoZai4ORVJM+lXUtjzCdnjudZqClpqeoqRsRACH5BAUEAAoALAAAAAAhACcAAASFUMlJq7046827/2AojuQ2nChaTmkrJXAcv7IstSldw/p+46deTWhTAIOK3SypTPyAxGXTaTxGeUzlE3elTreurE88rELJxa+Zi5Y2wbk2Vn0cdO/rsJpulXvfeXF7gHV4fGeDWoEqfniFjZCPiWOSgIdsk2WVipdhK4+ffSujpKWmp6grEQAh+QQJBAAKACwXAAYACQAbAAAEEFDISau9OOvNu/9gKI5kyUUAIfkECQQACgAsAAAAACEAJwAABElQyUmrvTjrzbv/YCiOZGkqQaqqJ7qu7QufMkvXQYzrNS/7L+DMhMvdesdfMrgclopCG3HXlD6pU2RWuWV2nSRoa0wum8/o9CYCACH5BAUEAAoALAAAAAAhACcAAARsUMlJq7046827/2AojmRpckmqqtLqti6rxDKdwjQe6+9s8ytg7efLFXfHni0hvCWDz6Fx2WRGndSrNcsldqfeMHiM/JbFZ7ISvVZDze20PE5/s+1u6Ry/19f9fH9Yd4CFTieIiYqLjI2OjyQRACH5BAUEAAoALAAAAAABAAEAAAQCUEUAIfkEBQQACgAsAAAAAAEAAQAABAJQRQA7) 50% no-repeat;width:100%;height:64px}.esri-attachments__actions{flex-flow:wrap;padding:6px 7px;display:flex}.esri-attachments__item-add-icon{font-size:var(--calcite-font-size-xl);margin:0;padding:0 7px}.esri-attachments__delete-button{color:var(--calcite-color-status-danger);width:auto;margin-right:auto}.esri-attachments .esri-attachments__items{width:100%;margin:0;padding:0;display:flex}.esri-attachments .esri-attachments__item{margin:0;line-height:var(--calcite-font-line-height-relative-tight);list-style-type:none}.esri-attachments__item-button{outline-offset:-4px;cursor:pointer;width:100%;text-align:unset;color:var(--calcite-color-text-2);background-color:var(--calcite-color-foreground-2);border:1px solid var(--calcite-color-foreground-1);border-radius:var(--calcite-border-width-md);align-items:center;margin:0 0 var(--calcite-spacing-xs);padding:var(--calcite-spacing-xs) 7px;text-decoration:none;transition:border-color .125s ease-in-out;display:flex;box-shadow:0 1px var(--calcite-color-foreground-1)}.esri-attachments__item-button:focus,.esri-attachments__item-button:hover{border-color:var(--calcite-color-border-white)}.esri-attachments__item-link{text-decoration:none;display:block;position:relative}.esri-attachments__item-link:hover .esri-attachments__item-link-overlay,.esri-attachments__item-link:focus .esri-attachments__item-link-overlay{opacity:1}.esri-attachments__item-add{background-color:var(--calcite-color-background);padding:6px 0}.esri-attachments__add-attachment-button{align-items:baseline!important;border-radius:var(--calcite-corner-radius-xs);border:none!important;justify-content:flex-start!important;padding:12px 3px!important;font-size:var(--calcite-font-size-sm)!important;transition:background-color .25s ease-in-out}.esri-attachments__add-attachment-button:hover{background-color:var(--calcite-color-foreground-1)!important;text-decoration:none;box-shadow:0 1px 2px #0000004d}.esri-attachments__item-link-overlay{opacity:0;pointer-events:none;-webkit-user-select:none;user-select:none;justify-content:center;align-items:center;transition:opacity .25s ease-in-out;display:flex;position:absolute;inset:0}.esri-attachments__item-link-overlay-icon{color:var(--calcite-color-foreground-2);background-color:var(--calcite-color-foreground-1);border-radius:100%;justify-content:center;align-items:center;padding:18px;display:flex}.esri-attachments__item-link-overlay-icon svg{fill:var(--calcite-color-foreground-1)}.esri-attachments__item-mask{justify-content:center;align-items:center;width:64px;height:64px;display:flex;position:relative;overflow:hidden;box-shadow:0 0 0 1px var(--calcite-color-foreground-1)}.esri-attachments__item-mask--icon{background-color:var(--calcite-color-foreground-2);padding:24px 0}.esri-attachments__item-mask--icon .esri-attachments__image{width:var(--calcite-spacing-xxxl);height:var(--calcite-spacing-xxxl)}.esri-attachments__metadata{justify-content:space-between;margin-top:3px;display:flex}.esri-attachments__metadata .esri-attachments__metadata-fieldset{text-align:center;background-color:var(--calcite-color-foreground-1);border:none;flex:0 calc(50% - 1px);margin:0;padding:6px 7px;font-size:var(--calcite-font-size-sm)}.esri-attachments__file-name{white-space:pre-wrap;word-break:break-word;word-wrap:break-word;margin-bottom:3px;font-size:var(--calcite-font-size-sm);display:inline-block}.esri-attachments__file-fieldset{border:none;margin:0;padding:var(--calcite-spacing-md) 7px}.esri-attachments__file-input{opacity:0;z-index:-1;width:.1px;height:.1px;position:absolute;overflow:hidden}.esri-attachments__container--list .esri-attachments__items{flex-flow:column}.esri-attachments__container--list .esri-attachments__item-mask{flex:none;margin-right:7px;position:relative}.esri-attachments__container--list .esri-attachments__image{max-width:unset;max-height:unset;left:50%}.esri-attachments__container--list .esri-attachments__label{flex:auto;justify-content:space-between;display:flex}.esri-attachments__container--list .esri-attachments__filename{white-space:pre-wrap;word-break:break-word;word-wrap:break-word;cursor:pointer;flex:1 0 0}.esri-attachments__container--list .esri-attachments__item-chevron-icon{cursor:pointer;flex:none;padding:0 15px}.esri-attachments__container--preview .esri-attachments__items{flex-flow:wrap;align-items:center}.esri-attachments__container--preview .esri-attachments__item{width:100%;margin-bottom:var(--calcite-spacing-md)}.esri-attachments__container--preview .esri-attachments__item-mask{width:100%;height:auto}.esri-attachments__container--preview .esri-attachments__item-button{box-shadow:none;flex-flow:column}.esri-attachments__container--preview .esri-attachments__item-button .esri-attachments__label{margin:var(--calcite-spacing-md) 0}.esri-attachments__container--preview .esri-attachments__image{max-width:100%}.esri-attachments__container--preview .esri-attachments__filename{white-space:pre-wrap;word-break:break-word;word-wrap:break-word;text-align:center;text-overflow:ellipsis;width:calc(100% - 15px);margin-top:var(--calcite-spacing-md);overflow:hidden}.esri-attachments__container--preview .esri-attachments__item-mask--icon{background-color:var(--calcite-color-foreground-1)}.esri-attachments__form-node{background-color:var(--calcite-color-foreground-1);padding:6px 7px;box-shadow:var(--calcite-shadow-sm)}.esri-attachments__form-node .esri-attachments__item-mask{box-shadow:none;width:unset;height:unset}.esri-attachments__form-node .esri-attachments__image{max-width:100%}.esri-attachments__error-message{background-color:var(--calcite-color-foreground-1);border-top:3px solid var(--calcite-color-status-danger);margin:6px 7px;padding:var(--calcite-spacing-md) 15px;animation:.25s ease-in-out esri-fade-in-down;box-shadow:0 1px 2px #0000004d}.esri-attachments__progress-bar{width:100%;position:absolute}.esri-attachments__item-mask:dir(rtl){margin-left:7px;margin-right:0}.esri-feature-form{letter-spacing:0em;background:var(--calcite-color-background);padding:var(--esri-widget-padding)}.esri-feature-form__disabled-notice{margin-bottom:var(--calcite-spacing-xl)}.esri-feature-form .esri-feature-utility-network-associations,.esri-feature-form .esri-feature-form-utility-network-association-list{margin-block-end:var(--calcite-spacing-md)}.esri-feature-form .esri-feature-utility-network-associations .esri-feature-element-info__description{color:var(--calcite-color-text-2)}.esri-feature-form .esri-feature-utility-network-associations .esri-feature-element-info h5{font-size:inherit}.esri-feature-form__form{flex-direction:column;display:flex}.esri-feature-form__centered-button{align-self:center}.esri-feature-form__description-text{color:var(--calcite-color-text-2);font-size:var(--calcite-font-size-sm)}.esri-feature-form__list-observer{z-index:2;text-align:center;position:relative;bottom:var(--calcite-spacing-xxl)}.esri-feature-form__related-records_header{margin-bottom:var(--calcite-spacing-xs);display:flex}.esri-feature-form__related-records_header span{flex-grow:1}.esri-feature-form__related-records_label calcite-notice,.esri-feature-form__related-records_label .esri-feature-form__description-text{margin-bottom:var(--calcite-spacing-xs)}.esri-feature-form__related-records_list{min-height:40px;margin-bottom:var(--calcite-spacing-xs)}label.esri-feature-form__label{gap:.5em;margin-bottom:var(--calcite-spacing-md)}.esri-feature-form__label{opacity:1;flex-direction:column;justify-content:space-between;margin-bottom:var(--calcite-spacing-xs);transition:opacity .25s,margin .25s;display:flex;position:relative}.esri-feature-form__label:last-child{margin-bottom:0}.esri-feature-form__label-text-content{white-space:pre-wrap;word-break:break-word;word-wrap:break-word;align-items:center;display:flex}.esri-feature-form__form-header{margin-bottom:var(--calcite-spacing-md)}.esri-feature-form__form-header .esri-feature-form__description-text~.esri-widget__heading{margin-bottom:0}.esri-feature-form__input{width:100%}.esri-feature-form__input:focus{outline:2px solid var(--calcite-color-brand);outline-offset:-2px}textarea.esri-feature-form__input{resize:vertical}.esri-feature-form__input--disabled{background-color:var(--calcite-color-background);font-weight:var(--calcite-font-weight-medium)}.esri-feature-form__field-error-message{padding:7px 0;font-size:var(--calcite-font-size-sm)}.esri-feature-form__date-input-container{flex-direction:column;display:flex}.esri-feature-form__date-input-container .esri-feature-form__input{margin-bottom:3px}.esri-feature-form__date-input-container :last-child{margin-bottom:0}.esri-feature-form__input--radio-group{flex-direction:column;display:flex}.esri-feature-form__input--radio-label{align-items:center;display:flex}.esri-feature-form__input--switch{margin:7px 0}.esri-feature-form__group{margin:0 0 var(--calcite-spacing-md);background-color:inherit;margin-inline:-10px}.esri-feature-form__group--sequential{border-bottom:none;border-inline-start:3px solid #adadad4d}.esri-feature-form__group--active{border-inline-start-color:var(--calcite-color-status-info)}.esri-feature-form__text-element{color:var(--calcite-color-text-3);line-height:var(--calcite-font-line-height-relative-snug);font-size:var(--calcite-font-size--1);font-weight:var(--calcite-font-weight-normal)}.esri-feature-form__text-element a{transition:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start inset-size,opacity,outline-color,transform var(--calcite-animation-timing) ease-in-out 0s,outline 0s,outline-offset 0s;background-color:var(--calcite-color-background);background-image:linear-gradient(currentColor,currentColor),linear-gradient(var(--calcite-color-brand-underline),var(--calcite-color-brand-underline));color:var(--calcite-color-text-link);background-position-x:0%,100%;background-position-y:min(1.5em,100%);background-repeat:no-repeat,no-repeat;background-size:0% 1px,100% 1px;border-style:none;padding:0;text-decoration:none;display:inline;position:relative}.esri-feature-form__text-element a:hover,.esri-feature-form__text-element a:focus{background-size:100% 1px,100% 1px}.esri-feature-form__text-element a:active{background-size:100% 2px,100% 2px}.esri-feature-form__text-element a.calcite--rtl{background-position:100% 100%,100% 100%}.esri-feature-form__text-element code{border:1px solid var(--calcite-color-border-3);background-color:var(--calcite-color-foreground-3);white-space:normal;word-break:break-word;color:var(--calcite-color-text-2);font-family:var(--calcite-code-family);border-radius:var(--calcite-spacing-base);padding:.25em;font-size:85%}.esri-feature-form__text-element h1,.esri-feature-form__text-element h2,.esri-feature-form__text-element h3,.esri-feature-form__text-element h4,.esri-feature-form__text-element h5{color:var(--calcite-color-text-1);line-height:var(--calcite-font-line-height-relative-snug);font-size:var(--calcite-font-size-0);font-weight:var(--calcite-font-weight-bold);margin-bottom:var(--calcite-spacing-xxs)}.esri-feature-form__text-element h5{font-weight:var(--calcite-font-weight-medium)}.esri-feature-form__text-element h6{color:var(--calcite-color-text-2);line-height:var(--calcite-font-line-height-relative-snug);font-size:var(--calcite-font-size--1);font-weight:var(--calcite-font-weight-medium);margin-bottom:var(--calcite-spacing-xxs)}.esri-feature-form__text-element p{color:var(--calcite-color-text-3);line-height:var(--calcite-font-line-height-relative-snug);font-size:var(--calcite-font-size--1);font-weight:var(--calcite-font-weight-normal);margin-bottom:var(--calcite-spacing-xl)}.esri-feature-form__text-element strong{font-weight:var(--calcite-font-weight-bold)}:dir(rtl) .esri-feature-form__date-input-part:first-child .esri-feature-form__input{border-left:none;border-right:1px solid #adadad4d}.esri-feature-form-utility-network-association-layers{background-color:var(--calcite-color-background)}.esri-feature-form-utility-network-association-layers__header>*{margin-block-end:var(--calcite-spacing-md)}.esri-feature-form-utility-network-association-layers__header>:last-child{color:var(--calcite-color-text-3)}.esri-feature-form-utility-network-association-layers__heading-content{align-items:center;display:flex}.esri-feature-form-utility-network-association-layers__heading-content calcite-icon{margin-inline-end:var(--calcite-spacing-md)}.esri-feature-form-utility-network-association-layers__list-container{min-height:var(--calcite-spacing-xxxl);margin-bottom:var(--calcite-spacing-md)}.esri-feature-form-utility-network-association-layers__feature-observer{z-index:2;text-align:center;position:relative;bottom:20px}.esri-feature-form-utility-network-association-layers__filter-container{z-index:1;margin-bottom:var(--calcite-spacing-md);top:var(--calcite-spacing-md)}.esri-feature-form-utility-network-association-layers__filter-options-container{flex-direction:column;display:flex}.esri-feature-form-utility-network-association-layers__filter-options-header{flex-direction:row;align-items:baseline;display:flex}.esri-feature-form-utility-network-association-layers__filter-options-header span{flex-grow:1}.esri-feature-form-utility-network-association-layers__spatial-select-container{flex-direction:column;align-items:flex-end;gap:6px;display:flex}.esri-feature-form-utility-network-association-layers__spatial-select-toolbar{--calcite-action-group-border-color: transparent;border-width:var(--calcite-border-width-sm, 1px);border-radius:var(--calcite-corner-radius-round, 4px);border-style:solid;border-color:var(--calcite-color-border-3, var(--calcite-color-inverse));width:100%;min-height:min-content;overflow:hidden}.esri-feature-form-utility-network-association-layers__sticky-loading-container{z-index:2;pointer-events:none;justify-content:center;align-items:center;height:var(--calcite-spacing-xxxl);margin:0;padding:0;display:flex;position:sticky;bottom:10px}.esri-feature-form-utility-network-association-layers__loading-container{justify-content:center;width:100%;padding:var(--calcite-spacing-md) 0;display:flex}.esri-feature-form-utility-network-association-list{background-color:var(--calcite-color-foreground-1)}.esri-feature-form-utility-network-association-list__header>*{margin-block-end:var(--calcite-spacing-md)}.esri-feature-form-utility-network-association-list__header>:last-child{color:var(--calcite-color-text-3)}.esri-feature-form-utility-network-association-list__header calcite-block{margin-block-start:-18px;margin-inline:-15px}.esri-feature-form-utility-network-association-list__heading-content{align-items:center;display:flex}.esri-feature-form-utility-network-association-list__heading-content calcite-icon{margin-inline-end:var(--calcite-spacing-md)}.esri-feature-form-utility-network-association-list__list-container{flex-direction:column;min-height:var(--calcite-spacing-xxxl);display:flex}.esri-feature-form-utility-network-association-list__list-container calcite-fab{margin-block:var(--calcite-spacing-md);flex-direction:row;align-self:center;display:flex}.esri-feature-form-utility-network-association-settings{--calcite-block-padding: 0;background-color:var(--calcite-color-foreground-1);flex-direction:column;display:flex}.esri-feature-form-utility-network-association-settings calcite-block{border:1px solid var(--calcite-color-border-3);margin-block:0}.esri-feature-form-utility-network-association-settings calcite-block:first-of-type{border-radius:var(--calcite-spacing-sm) var(--calcite-spacing-sm) 0 0}.esri-feature-form-utility-network-association-settings calcite-block:last-of-type{border-top:none;border-radius:0 0 var(--calcite-spacing-sm) var(--calcite-spacing-sm);margin-block-end:var(--calcite-spacing-md)}.esri-feature-form-utility-network-association-settings calcite-block calcite-label{margin-inline:var(--calcite-spacing-md)}.esri-feature-form-utility-network-association-settings__info-container{flex-direction:column;display:flex}.esri-feature-form-utility-network-association-settings__info-container>*{margin-block-end:var(--calcite-spacing-md)}.esri-feature{letter-spacing:0em;isolation:isolate;position:relative;width:100%}.esri-feature__title{word-break:break-word;word-wrap:break-word;font-size:var(--calcite-font-size);display:block}.esri-feature calcite-icon{box-sizing:content-box}.esri-feature__attachments{display:flex}.esri-feature__loading-container{justify-content:center;width:100%;padding:var(--calcite-spacing-md) 0;display:flex}.esri-feature-relationship{position:relative}.esri-feature-relationship__list{min-height:var(--calcite-spacing-xxxl)}.esri-feature-relationship__list-item--hidden{display:none}.esri-feature-utility-network-associations{position:relative}.esri-feature__filter-container{z-index:1;margin-bottom:var(--calcite-spacing-md);position:sticky;top:var(--calcite-spacing-md)}.esri-feature__feature-observer{z-index:2;text-align:center;position:relative;bottom:var(--calcite-spacing-xxl)}.esri-feature__sticky-loading-container{z-index:2;pointer-events:none;justify-content:center;align-items:center;height:var(--calcite-spacing-xxxl);margin:0;padding:0;display:flex;position:sticky;bottom:10px}.esri-icon-loading-indicator{display:inline-block}.esri-feature__content-element{margin-bottom:24px;padding:0 7px}.esri-feature__content-element .esri-widget__heading{line-height:var(--calcite-font-line-height-relative-tight)}.esri-feature__content-element:only-child,.esri-feature__content-node--text{margin-bottom:3px}.esri-feature__content-node{flex-direction:column;display:flex}.esri-feature__text{line-height:var(--calcite-font-line-height-relative-tight)}.esri-feature-attachments{flex-flow:column wrap;align-items:flex-start}.esri-feature__last-edited-info{padding-top:var(--calcite-spacing-xs);font-size:var(--calcite-font-size-sm)}:dir(rtl) .esri-feature__attachments-title{margin:0 0 0 auto}:dir(rtl) .esri-feature__attachments--list .esri-feature__attachment-item-mask{margin-left:7px;margin-right:0}.esri-feature-content__loader-container{justify-content:center;align-items:center;height:150px;padding:0;display:flex}.esri-feature-content__loader{background:url(./assets/attachments/images/loading-throb.gif) 50% no-repeat;width:100%;height:64px}.esri-feature-content{font-size:var(--calcite-font-size)}.esri-feature-content h1,.esri-feature-content h2,.esri-feature-content h3,.esri-feature-content h4,.esri-feature-content h5,.esri-feature-content h6{letter-spacing:0;color:var(--calcite-color-text-2);margin:.5em 0;font-weight:var(--calcite-font-weight-semibold);line-height:normal}.esri-feature-content h1{font-size:1.75em}.esri-feature-content h2{font-size:1.5em}.esri-feature-content h3{font-size:1.25em}.esri-feature-content h4,.esri-feature-content h5,.esri-feature-content h6{font-size:1em}.esri-widget__heading.esri-feature-element-info__title{color:var(--calcite-color-text-2);margin-top:0;margin-bottom:.2em;font-size:var(--calcite-font-size-xl);font-weight:var(--calcite-font-weight-normal)}.esri-feature-element-info__description{margin-bottom:var(--calcite-font-size-xs);font-size:var(--calcite-font-size-sm);font-weight:var(--calcite-font-weight-normal)}.esri-feature-content p{margin:0 0 1.2em;font-size:var(--calcite-font-size)}.esri-feature-content p:last-child{margin-block-end:0}.esri-feature-content img{image-orientation:from-image;max-width:100%;max-height:100%}.esri-feature-content video{max-width:100%;max-height:100%}.esri-feature-content figure{margin:0;padding:0}.esri-feature-content figcaption{margin:.2em 0 0;padding:0;font-size:var(--calcite-font-size-sm);font-style:italic;display:block}.esri-feature-content ul,.esri-feature-content ol{margin-block:1rem}.esri-feature-content ul:first-child,.esri-feature-content ol:first-child{margin-block-start:0}.esri-feature-content a{color:var(--calcite-color-text-3)}.esri-feature-content a:hover,.esri-feature-content a:focus{color:var(--calcite-color-text-2)}.esri-features{--calcite-color-background: $background-color;flex-direction:column;display:flex}.esri-features img{image-orientation:from-image}.esri-features__flow-item--collapsed{--calcite-flow-item-header-border-block-end: none}.esri-features__container{background-color:var(--calcite-color-background)}.esri-features__container:not(:empty){padding:var(--calcite-spacing-md)}.esri-features .esri-feature,.esri-features .esri-feature-relationship,.esri-features .esri-feature-utility-network-associations{background-color:#0000}.esri-features__heading{word-break:break-word;word-wrap:break-word}.esri-features__header,.esri-features__footer{background-color:var(--calcite-color-foreground-1);flex:1;justify-content:flex-end;align-items:center;display:flex}.esri-features__pagination-text{padding-inline:var(--calcite-spacing-sm);color:var(--calcite-color-text-3);font-size:var(--calcite-font-size-sm)}.esri-features__loader{align-self:center;padding-inline:1rem}.esri-features__pagination-action-bar{flex:1}.esri-features__pagination-menu-button{border-inline-start:1px solid var(--calcite-color-border-3)}.esri-features__icon{flex:0 0 var(--calcite-spacing-lg);width:var(--calcite-spacing-lg);height:var(--calcite-spacing-lg);display:inline-block}.esri-features__action-image{background-position:50%;background-repeat:no-repeat;background-size:contain;flex:0 0 var(--calcite-spacing-lg);width:var(--calcite-spacing-lg);height:var(--calcite-spacing-lg)}.esri-features__header{border-block-end:1px solid var(--calcite-color-border-3)}.esri-features__content-feature{--calcite-flow-item-footer-padding: 0}.esri-features__feature-menu-observer{z-index:2;text-align:center;position:relative;bottom:20px}.esri-features__action--exit{transform:scaleX(-1)}.esri-feature-media__container{flex-flow:wrap;align-items:center;width:100%;min-height:150px;margin-top:var(--calcite-spacing-xs);display:flex}.esri-feature-media__container .esri-feature-media__pagination-button{cursor:pointer;color:var(--calcite-color-text-3);background:0 0;border:none;justify-content:center;align-items:center;padding-block:var(--calcite-spacing-xs);padding-inline:var(--calcite-spacing-sm);display:flex}.esri-feature-media__container .esri-feature-media__pagination-button:hover,.esri-feature-media__container .esri-feature-media__pagination-button:focus{color:var(--calcite-color-text-2);fill:var(--calcite-color-text-2);background-color:var(--calcite-color-foreground-2)}.esri-feature-media__item-title{margin:0;font-size:var(--calcite-font-size-md)}.esri-feature-media__item-caption{padding-block-start:3px;font-size:var(--calcite-font-size-sm)}.esri-feature-media__item{justify-content:center;align-items:flex-start;width:100%;height:auto;margin-block:var(--calcite-spacing-xs);display:flex}.esri-feature-media__item-navigation{flex:0 100%;justify-content:space-between;align-items:flex-start;margin-block-end:var(--calcite-spacing-xs);display:flex}.esri-feature-media__item-text{margin-inline-end:var(--calcite-spacing-md)}.esri-feature-media__pagination{flex:none;align-items:center;display:flex;overflow:hidden}.esri-feature-media__pagination:only-child{margin-inline-start:auto}.esri-feature-media__pagination-text{color:var(--calcite-color-text-3);padding-inline:var(--calcite-spacing-base);font-size:var(--calcite-font-size-sm)}.esri-feature-media__item-container{flex:0 auto;width:100%}.esri-feature-media__item-container img{max-width:100%}.esri-feature-media__item-container img[src$=".SVG"],.esri-feature-media__item-container img[src$=".svg"]{width:100%}.esri-feature-media__chart{background-color:var(--calcite-color-foreground-1);width:100%;height:155px}:dir(rtl) .esri-feature-media__image-summary{margin:0 .5em 0 0}:dir(rtl) .esri-feature-media__pagination-icon{transform:rotate(180deg)}.esri-identity-modal__info,.esri-identity-modal__notice{margin:0;margin-bottom:var(--calcite-spacing-md)}.esri-ui .esri-popup{z-index:1;pointer-events:none;flex-flow:column;display:flex;position:absolute}.esri-ui .esri-popup .esri-features{flex:1;width:100%}.esri-ui .esri-popup .esri-widget__heading{margin:0}.esri-ui .esri-popup--hidden{display:none}.esri-popup--shadow{box-shadow:0 1px 4px #000c}.esri-popup--aligned-top-center{transform-origin:50% 100%}.esri-popup--aligned-bottom-center{transform-origin:50% -5%}.esri-popup--aligned-top-left,.esri-popup--aligned-bottom-left{transform-origin:100%}.esri-popup--aligned-top-right,.esri-popup--aligned-bottom-right{transform-origin:-5%}.esri-popup--aligned-top-center,.esri-popup--aligned-top-left,.esri-popup--aligned-top-right{animation:.2s ease-in-out popup-intro-animation-down}.esri-popup--aligned-bottom-center,.esri-popup--aligned-bottom-left,.esri-popup--aligned-bottom-right{animation:.2s ease-in-out popup-intro-animation-up}.esri-popup__main-container{z-index:1;pointer-events:auto;background-color:var(--calcite-color-foreground-1);width:340px;min-height:48px;max-height:340px;display:flex;position:relative;overflow:hidden}.esri-popup__pointer{width:0;height:0;position:absolute}.esri-popup__pointer-direction{content:"";background-color:var(--calcite-color-foreground-1);width:var(--calcite-spacing-md);height:var(--calcite-spacing-md);position:absolute}.esri-popup--aligned-top-center .esri-popup__pointer{margin:0 0 0 -6px;top:100%;left:50%}.esri-popup--aligned-bottom-center .esri-popup__pointer{margin:0 0 0 -6px;bottom:100%;left:50%}.esri-popup--aligned-top-left .esri-popup__pointer{bottom:var(--calcite-spacing-xs);right:var(--calcite-spacing-xs);transform:rotate(-45deg)}.esri-popup--aligned-bottom-left .esri-popup__pointer{top:var(--calcite-spacing-xs);right:var(--calcite-spacing-xs);transform:rotate(45deg)}.esri-popup--aligned-top-right .esri-popup__pointer{bottom:var(--calcite-spacing-xs);left:var(--calcite-spacing-xs);transform:rotate(45deg)}.esri-popup--aligned-bottom-right .esri-popup__pointer{top:var(--calcite-spacing-xs);left:var(--calcite-spacing-xs);transform:rotate(-45deg)}.esri-popup--aligned-top-center .esri-popup__pointer-direction,.esri-popup--aligned-bottom-center .esri-popup__pointer-direction{transform:scale(.75,2) rotate(45deg)}.esri-popup--aligned-top-left .esri-popup__pointer-direction,.esri-popup--aligned-bottom-left .esri-popup__pointer-direction,.esri-popup--aligned-top-right .esri-popup__pointer-direction,.esri-popup--aligned-bottom-right .esri-popup__pointer-direction{top:-6px;left:-6px;transform:scaleY(3.5) rotate(45deg)}.esri-popup--aligned-top-center .esri-popup__pointer-direction{top:-6px;left:0}.esri-popup--aligned-bottom-center .esri-popup__pointer-direction{bottom:-6px;left:0}.esri-view-width-xlarge .esri-popup__main-container{width:460px}.esri-view-width-large .esri-popup__main-container{width:400px}.esri-view-width-medium .esri-popup__main-container{width:340px}.esri-view-width-less-than-medium .esri-popup__main-container{width:280px}.esri-view-width-xsmall .esri-popup--is-docked-bottom-center{margin-bottom:var(--calcite-spacing-xl)}.esri-view-width-xsmall .esri-popup--is-docked-top-center,.esri-view-width-xsmall .esri-popup--is-docked-bottom-center{width:auto;margin:0}.esri-view-width-xsmall .esri-popup--is-docked-top-center .esri-popup__main-container,.esri-view-width-xsmall .esri-popup--is-docked-bottom-center .esri-popup__main-container{width:100%;max-height:75%;position:absolute;left:0;right:0}.esri-view-width-xsmall .esri-popup--is-docked-bottom-center .esri-popup__main-container{bottom:0}.esri-view-width-xsmall .esri-popup--is-docked-top-center .esri-popup__main-container{top:0}.esri-view-height-xlarge .esri-popup__main-container{max-height:460px}.esri-view-height-xlarge.esri-popup--feature-menu-open .esri-popup__feature-menu-viewport{max-height:410px}.esri-view-height-large .esri-popup__main-container{max-height:400px}.esri-view-height-large.esri-popup--feature-menu-open .esri-popup__feature-menu-viewport{max-height:350px}.esri-view-height-less-than-medium .esri-popup__main-container{max-height:300px}.esri-view-height-less-than-medium.esri-popup--feature-menu-open .esri-popup__feature-menu-viewport{max-height:250px}.esri-popup--is-docked{margin:15px 15px 30px;animation:.25s ease-out esri-docking-animation;inset:0}.esri-ui .esri-popup--is-docked{flex-flow:row}.esri-popup--is-docked-top-left,.esri-popup--is-docked-top-center,.esri-popup--is-docked-top-right{align-items:flex-start}.esri-popup--is-docked-bottom-left,.esri-popup--is-docked-bottom-center,.esri-popup--is-docked-bottom-right{align-items:flex-end}.esri-popup--is-docked-top-left,.esri-popup--is-docked-bottom-left{justify-content:flex-start}.esri-popup--is-docked-top-center,.esri-popup--is-docked-bottom-center{justify-content:center}.esri-popup--is-docked-top-right,.esri-popup--is-docked-bottom-right{justify-content:flex-end}.esri-popup--is-docked-top-left .esri-popup__main-container,.esri-popup--is-docked-top-right .esri-popup__main-container,.esri-popup--is-docked-bottom-left .esri-popup__main-container,.esri-popup--is-docked-bottom-right .esri-popup__main-container{max-height:80%}.esri-popup--is-docked-top-center .esri-popup__main-container,.esri-popup--is-docked-bottom-center .esri-popup__main-container{max-height:40%}@media (prefers-reduced-motion){.esri-popup--aligned-top-center,.esri-popup--aligned-top-left,.esri-popup--aligned-top-right,.esri-popup--aligned-bottom-center,.esri-popup--aligned-bottom-left,.esri-popup--aligned-bottom-right,.esri-popup--is-docked{animation:none}}.esri-tooltip{--calcite-input-padding-inline: .5rem;--calcite-input-height: 1.5rem;--field-height: .875rem;--field-height--input: var(--calcite-input-height);--field-row-gap: 1px;--field-column-gap: var(--calcite-app-spacing-2);--field-input-width: 6.5rem;--field-title-extra-margin: var(--calcite-app-spacing-6);--field-title-color: var(--calcite-color-text-2);--field-value-color: var(--calcite-color-text-1);--font-size: var(--calcite-font-size--3);--font-size--input: var(--calcite-font-size--2);--content-padding-inline: var(--calcite-app-spacing-2);--content-padding-block: var(--calcite-app-spacing-2);--help-message-border-spacing: var(--calcite-app-spacing-2);--help-message-min-width: 7rem;--icon-size--feedback: .625rem;z-index:1;will-change:transform;width:fit-content;position:absolute;top:0;left:0;overflow:visible}.esri-tooltip-content{gap:var(--content-padding-block);border:solid 1px var(--calcite-color-border-3);padding-block:var(--content-padding-block);padding-inline:var(--content-padding-inline);color:var(--calcite-color-text-2);width:min-content;line-height:var(--calcite-font-line-height-relative-tight);font-size:var(--font-size);-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);touch-action:none;view-transition-name:tooltip-content;background:var(--calcite-color-foreground-2);border-radius:.25rem;flex-direction:column;display:flex;position:relative;box-shadow:0 6px 20px -4px #0000001a,0 4px 12px -2px #00000014;outline:none!important}.esri-tooltip-content:empty{opacity:0}.esri-tooltip-content__header{margin-block-start:calc(var(--content-padding-block) * -1);margin-inline:calc(var(--content-padding-inline) * -1);border-block-end:solid 1px var(--calcite-color-border-3);justify-content:flex-start;block-size:24px;padding-block-end:0;display:flex}.esri-tooltip-content__header__spacer{flex-grow:1;flex-shrink:1}.esri-tooltip-content__header__actions{flex-grow:0;flex-shrink:0;padding-inline-end:var(--content-padding-inline)}.esri-tooltip-content__header calcite-button{--calcite-offset-invert-focus: 1}.esri-tooltip-content--input{--field-height: var(--field-height--input);background:var(--calcite-color-foreground-1);pointer-events:all;-webkit-backdrop-filter:none;backdrop-filter:none}.esri-tooltip-content--input:not(:focus-within){opacity:.8}.esri-tooltip.calcite-mode-dark .esri-tooltip-content,.esri-tooltip.calcite-mode-dark .esri-tooltip-content--input{background:var(--calcite-color-foreground-1)}.esri-tooltip-table{grid-gap:var(--field-row-gap) var(--field-column-gap);grid-template-columns:max-content 1fr max-content max-content;align-items:flex-start;width:max-content;display:grid}.esri-tooltip-field{display:contents}.esri-tooltip-field__title,.esri-tooltip-field__value{block-size:var(--field-height);white-space:nowrap;color:var(--calcite-color-text-3);justify-content:flex-start;align-items:center;display:flex}.esri-tooltip-field__title{color:var(--field-title-color);margin-inline-end:var(--field-title-extra-margin)}.esri-tooltip-field__value{color:var(--field-value-color);grid-column:span 3}.esri-tooltip-editable-field{display:contents}.esri-tooltip-editable-field__title,.esri-tooltip-editable-field__value{block-size:var(--field-height);white-space:nowrap;justify-content:flex-start;align-items:center}.esri-tooltip-editable-field__title{display:flex}.esri-tooltip-editable-field__value{font-variant-numeric:tabular-nums;display:contents}.esri-tooltip-editable-field__value__content{grid-column:span 3;align-items:center;min-width:max-content;display:flex}.esri-tooltip-editable-field__value__content--read-only{padding-inline:var(--calcite-input-padding-inline);block-size:var(--calcite-input-height);line-height:var(--calcite-input-height);font-size:var(--calcite-font-size--2)}.esri-tooltip-editable-field--feedback.esri-tooltip-editable-field--locked .esri-tooltip-editable-field__value__content{grid-column:span 2}.esri-tooltip-editable-field--feedback .esri-tooltip-editable-field__title{color:var(--field-title-color);margin-inline-end:var(--field-title-extra-margin)}.esri-tooltip-editable-field--feedback .esri-tooltip-editable-field__value__content{color:var(--field-value-color);align-self:center}.esri-tooltip-editable-field--feedback .esri-tooltip-editable-field__lock-icon{width:var(--icon-size--feedback);min-width:var(--icon-size--feedback);height:var(--icon-size--feedback);min-height:var(--icon-size--feedback);align-self:center;margin-top:-2px}.esri-tooltip-editable-field--input{padding:0}.esri-tooltip-editable-field--input .esri-tooltip-editable-field__title{font-size:var(--font-size--input)}.esri-tooltip-editable-field__input-wrapper{inline-size:var(--field-input-width)}.esri-tooltip-editable-field__input-message{text-wrap:auto;width:100%;margin-block-end:var(--calcite-input-message-spacing-value)}.esri-tooltip-editable-field__input-suffix{line-height:var(--field-height--input)}.esri-tooltip-editable-field__button{width:var(--field-height--input)}.esri-tooltip-value-by-value span:nth-child(2){margin-inline:7px}.esri-tooltip-help-message{gap:var(--calcite-app-spacing-2);margin-inline:calc(var(--content-padding-inline) * -1);border-block-start:solid 1px var(--calcite-color-border-3);padding-block-start:var(--content-padding-inline);padding-inline:var(--content-padding-inline);width:auto;min-width:var(--help-message-min-width);text-align:left;text-wrap:balance;white-space:break-spaces;font-size:var(--font-size);border-block-end:1px solid var(--calcite-color-foreground-1);justify-content:center;align-items:center;display:flex}.esri-tooltip-help-message:only-child{border-block:none;padding-block-start:var(--field-row-gap)}.esri-tooltip-help-message__icon{color:var(--calcite-color-status-info)}.esri-tooltip-help-message__text{padding-block-start:2px}.esri-tooltip ::view-transition-old(tooltip-content){animation-duration:.1s}.esri-tooltip ::view-transition-new(tooltip-content){animation-duration:.1s}.esri-tooltip{--offset-start: calc(-100% - var(--offset))}.esri-tooltip--debug:after{--size: 10px;margin-top:calc(var(--size) * -.5);margin-left:calc(var(--size) * -.5);width:var(--size);height:var(--size);content:"";background:var(--calcite-color-status-danger);position:absolute;top:0;left:0}.esri-tooltip--bottom .esri-tooltip-content{transform:translate(-50%,var(--offset))}.esri-tooltip--bottom-left.esri-tooltip--ltr .esri-tooltip-content,.esri-tooltip--bottom-right.esri-tooltip--rtl .esri-tooltip-content,.esri-tooltip--bottom-start.esri-tooltip--ltr .esri-tooltip-content,.esri-tooltip--bottom-end.esri-tooltip--rtl .esri-tooltip-content{transform:translate(var(--offset-start),var(--offset))}.esri-tooltip--bottom-right.esri-tooltip--ltr .esri-tooltip-content,.esri-tooltip--bottom-left.esri-tooltip--rtl .esri-tooltip-content,.esri-tooltip--bottom-start.esri-tooltip--rtl .esri-tooltip-content,.esri-tooltip--bottom-end.esri-tooltip--ltr .esri-tooltip-content{transform:translate(var(--offset),var(--offset))}.esri-tooltip--leading.esri-tooltip--ltr .esri-tooltip-content,.esri-tooltip--trailing.esri-tooltip--rtl .esri-tooltip-content{transform:translate(var(--offset-start),-50%)}.esri-tooltip--leading-start.esri-tooltip--ltr .esri-tooltip-content,.esri-tooltip--trailing-start.esri-tooltip--rtl .esri-tooltip-content{transform:translate(var(--offset-start),var(--offset-start))}.esri-tooltip--leading-end.esri-tooltip--ltr .esri-tooltip-content,.esri-tooltip--trailing-end.esri-tooltip--rtl .esri-tooltip-content{transform:translate(var(--offset-start),var(--offset))}.esri-tooltip--top .esri-tooltip-content{transform:translate(-50%,var(--offset-start))}.esri-tooltip--top-left.esri-tooltip--ltr .esri-tooltip-content,.esri-tooltip--top-right.esri-tooltip--rtl .esri-tooltip-content,.esri-tooltip--top-start.esri-tooltip--ltr .esri-tooltip-content,.esri-tooltip--top-end.esri-tooltip--rtl .esri-tooltip-content{transform:translate(var(--offset-start),var(--offset-start))}.esri-tooltip--top-right.esri-tooltip--ltr .esri-tooltip-content,.esri-tooltip--top-left.esri-tooltip--rtl .esri-tooltip-content,.esri-tooltip--top-start.esri-tooltip--rtl .esri-tooltip-content,.esri-tooltip--top-end.esri-tooltip--ltr .esri-tooltip-content{transform:translate(var(--offset),var(--offset-start))}.esri-tooltip--trailing.esri-tooltip--ltr .esri-tooltip-content,.esri-tooltip--leading.esri-tooltip--rtl .esri-tooltip-content{transform:translate(var(--offset),-50%)}.esri-tooltip--trailing-start.esri-tooltip--ltr .esri-tooltip-content,.esri-tooltip--leading-start.esri-tooltip--rtl .esri-tooltip-content{transform:translate(var(--offset),var(--offset-start))}.esri-tooltip--trailing-end.esri-tooltip--ltr .esri-tooltip-content,.esri-tooltip--leading-end.esri-tooltip--rtl .esri-tooltip-content{transform:translate(var(--offset),var(--offset))}`;const ha="arcgis-map",an={base:ha,containerUI:`${ha}-container-ui`,containerElement:`${ha}-container-ui__element`,containerElementDefaultSlot:`${ha}-container-ui__element-default`,containerElementPopupSlot:`${ha}-container-ui__element-popup`,containerTopLeftColumn:`${ha}-container-ui__top-left-column`,containerTopRightColumn:`${ha}-container-ui__top-right-column`,containerBottomLeftRow:`${ha}-container-ui__bottom-left-row`,containerBottomRightRow:`${ha}-container-ui__bottom-right-row`,containerElementTopLeft:`${ha}-container-ui__element-top-left`,containerElementTopRight:`${ha}-container-ui__element-top-right`,containerElementBottomLeft:`${ha}-container-ui__element-bottom-left`,containerElementBottomRight:`${ha}-container-ui__element-bottom-right`,containerElementTopStart:`${ha}-container-ui__element-top-start`,containerElementTopEnd:`${ha}-container-ui__element-top-end`,containerElementBottomStart:`${ha}-container-ui__element-bottom-start`,containerElementBottomEnd:`${ha}-container-ui__element-bottom-end`},jl={topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",topStart:"top-start",topEnd:"top-end",bottomStart:"bottom-start",bottomEnd:"bottom-end",popup:"popup"};function Pnt(t,e,i){return J`<div class=${q({[an.containerElementPopupSlot]:!0})}><slot name=${jl.popup} @slotchange=${e}></slot></div><div class=${q({[an.containerElementDefaultSlot]:!0})}>${i}<slot></slot></div><div class=${q({[an.containerTopLeftColumn]:!0})}><div class=${q({[an.containerElement]:!0,[an.containerElementTopLeft]:!0})}><slot name=${jl.topLeft}></slot></div><div class=${q({[an.containerElement]:!0,[an.containerElementTopStart]:!0})}><slot name=${t==="ltr"?jl.topStart:jl.topEnd}></slot></div></div><div class=${q({[an.containerTopRightColumn]:!0})}><div class=${q({[an.containerElement]:!0,[an.containerElementTopRight]:!0})}><slot name=${jl.topRight}></slot></div><div class=${q({[an.containerElement]:!0,[an.containerElementTopEnd]:!0})}><slot name=${t==="ltr"?jl.topEnd:jl.topStart}></slot></div></div><div class=${q({[an.containerBottomLeftRow]:!0})}><div class=${q({[an.containerElement]:!0,[an.containerElementBottomLeft]:!0})}><slot name=${jl.bottomLeft}></slot></div><div class=${q({[an.containerElement]:!0,[an.containerElementBottomStart]:!0})}><slot name=${t==="ltr"?jl.bottomStart:jl.bottomEnd}></slot></div></div><div class=${q({[an.containerBottomRightRow]:!0})}><div class=${q({[an.containerElement]:!0,[an.containerElementBottomRight]:!0})}><slot name=${jl.bottomRight}></slot></div><div class=${q({[an.containerElement]:!0,[an.containerElementBottomEnd]:!0})}><slot name=${t==="ltr"?jl.bottomEnd:jl.bottomStart}></slot></div></div>`}const Ont=St`:host{--arcgis-internal-color-black-30: color-mix(in srgb, #000000 30.2%, transparent);--arcgis-internal-box-shadow: var(--calcite-spacing-none) var(--calcite-spacing-px) var(--calcite-spacing-base) var(--arcgis-internal-color-black-30);--arcgis-internal-top-max-width: calc(min(100cqw, 100vw) - var(--calcite-spacing-xxxl));--arcgis-internal-panel-width: 300px;--arcgis-internal-panel-height: 100%;--arcgis-internal-panel-height-sm: 240px;--arcgis-internal-panel-height-md: 420px;--arcgis-internal-panel-height-lg: 540px;--arcgis-internal-panel-height-xl: 680px;--arcgis-internal-basemap-gallery-width-lg: 450px;--arcgis-expand-max-height: var(--calcite-spacing-xxxl);--arcgis-collapse-icon-flip: scaleX(1);--arcgis-row-direction: row;--arcgis-legend-internal-width: 300px;--arcgis-layout-overlay-space-top: 0px;--arcgis-layout-overlay-space-bottom: 0px;--arcgis-layout-overlay-space-left: 0px;--arcgis-layout-overlay-space-right: 0px;--arcgis-internal-sketch-justify-content: flex-start}:host{display:block;position:relative;height:100%;width:100%;padding:var(--calcite-spacing-none);margin:var(--calcite-spacing-none);container:arcgis-map-container/size;contain:layout}::slotted(:is([closed],[closed="true"])){display:none}:dir(rtl) ::slotted(:not(arcgis-swipe)){direction:rtl}::slotted(:is(arcgis-area-measurement-2d,arcgis-area-measurement-3d,arcgis-attachments,arcgis-basemap-gallery,arcgis-basemap-layer-list,arcgis-bookmarks,arcgis-building-explorer,arcgis-catalog-layer-list,arcgis-coordinate-conversion,arcgis-daylight,arcgis-directions,arcgis-direct-line-measurement-3d,arcgis-distance-measurement-2d,arcgis-editor,arcgis-elevation-profile,arcgis-expand,arcgis-feature-form,arcgis-features,arcgis-feature-table,arcgis-fullscreen,arcgis-grid-controls,arcgis-home,arcgis-layer-list,arcgis-legend,arcgis-line-of-sight,arcgis-link-chart-layout-switcher,arcgis-locate,arcgis-measurement,arcgis-navigation-toggle,arcgis-oriented-imagery-viewer,arcgis-print,arcgis-search,arcgis-shadow-cast,arcgis-slice,arcgis-table-list,arcgis-time-slider,arcgis-time-zone-label,arcgis-track,arcgis-utility-network-associations,arcgis-utility-network-trace,arcgis-utility-network-validate-topology,arcgis-version-management,arcgis-video-player,arcgis-weather,arcgis-zoom)){box-shadow:var(--arcgis-internal-box-shadow)}::slotted(:is(arcgis-area-measurement-2d,arcgis-area-measurement-3d,arcgis-basemap-gallery,arcgis-basemap-layer-list,arcgis-bookmarks,arcgis-building-explorer,arcgis-catalog-layer-list,arcgis-directions,arcgis-direct-line-measurement-3d,arcgis-distance-measurement-2d,arcgis-editor,arcgis-feature-form,arcgis-features,arcgis-layer-list,arcgis-line-of-sight,arcgis-print,arcgis-shadow-cast,arcgis-slice,arcgis-table-list,arcgis-utility-network-trace,arcgis-grid-controls)){width:var(--arcgis-internal-panel-width);min-width:var(--calcite-spacing-xxxl);min-height:var(--calcite-spacing-xxxl);transition:max-height .25s ease-in-out;overflow-y:auto}.arcgis-map-container-ui{position:absolute;inset:var(--calcite-spacing-none);padding:var(--calcite-spacing-none);z-index:var(--calcite-z-index);pointer-events:none;background:none}.arcgis-map-container-ui__element{display:flex;flex-direction:column;pointer-events:none;width:max-content;max-width:100%}.arcgis-map-container-ui__element .esri-widget--panel{min-width:var(--arcgis-internal-panel-width)}.arcgis-map-container-ui__element-popup,.arcgis-map-container-ui__element-default{pointer-events:none;max-width:100%;position:absolute;display:block;inset:var(--calcite-spacing-none);width:100%;::slotted(:not(arcgis-swipe)){pointer-events:auto}}.arcgis-map-container-ui__top-left-column{position:absolute;top:var(--calcite-spacing-none);left:var(--calcite-spacing-none);display:flex;flex-direction:column;justify-content:flex-start;align-items:flex-start;margin-top:var(--calcite-spacing-lg);margin-left:var(--calcite-spacing-lg);padding-top:var(--arcgis-layout-overlay-space-top);padding-left:var(--arcgis-layout-overlay-space-left);::slotted(*){max-width:var(--arcgis-internal-top-max-width)}::slotted(arcgis-sketch[layout="vertical"]){--sketch-pad-flex-flow: column wrap}}.arcgis-map-container-ui__top-left-column:dir(rtl){align-items:flex-end;::slotted(arcgis-floor-filter){--arcgis-row-direction: row-reverse}}.arcgis-map-container-ui__top-right-column{position:absolute;top:var(--calcite-spacing-none);right:var(--calcite-spacing-none);display:flex;flex-direction:column;align-items:flex-end;margin-top:var(--calcite-spacing-lg);margin-right:var(--calcite-spacing-lg);padding-top:var(--arcgis-layout-overlay-space-top);padding-right:var(--arcgis-layout-overlay-space-right);::slotted(*){max-width:var(--arcgis-internal-top-max-width)}::slotted(arcgis-expand){--arcgis-internal-sketch-justify-content: flex-end}}.arcgis-map-container-ui__top-right-column:dir(rtl){align-items:flex-start;::slotted(arcgis-floor-filter){--arcgis-row-direction: row}}.arcgis-map-container-ui__element-top-left{top:var(--calcite-spacing-none);left:var(--calcite-spacing-none);display:flex;justify-content:flex-start;align-items:flex-start;::slotted(arcgis-expand){--arcgis-expand-icon-number-left: none;--arcgis-expand-icon-number-right: calc(-1 * var(--calcite-spacing-xs))}::slotted(:is(arcgis-floor-filter,arcgis-expand)){--arcgis-collapse-icon-flip: scaleX(-1)}::slotted(arcgis-sketch){--sketch-pad-flex-flow: wrap}::slotted(*){margin-bottom:var(--calcite-spacing-sm-plus)}}.arcgis-map-container-ui__element-top-left:dir(rtl){align-items:flex-end}.arcgis-map-container-ui__element-top-right{position:relative;justify-content:flex-start;align-items:flex-end;margin-left:auto;::slotted(arcgis-expand){--arcgis-expand-icon-number-left: calc(-1 * var(--calcite-spacing-xs));--arcgis-expand-icon-number-right: none}::slotted(arcgis-floor-filter){--arcgis-row-direction: row-reverse}::slotted(arcgis-sketch){--sketch-pad-flex-flow: row-reverse wrap}::slotted(arcgis-sketch[layout="vertical"]){--sketch-pad-flex-flow: column wrap-reverse}::slotted(*){margin-bottom:var(--calcite-spacing-sm-plus)}}.arcgis-map-container-ui__element-top-right:dir(rtl){align-items:flex-start}.arcgis-map-container-ui__element-top-start{position:relative;justify-content:flex-start;align-items:flex-start;::slotted(arcgis-expand){--arcgis-expand-icon-number-left: none;--arcgis-expand-icon-number-right: calc(-1 * var(--calcite-spacing-xs))}::slotted(arcgis-sketch[layout="vertical"]){--sketch-pad-flex-flow: column wrap}::slotted(:is(arcgis-floor-filter,arcgis-expand)){--arcgis-collapse-icon-flip: scaleX(-1)}::slotted(*){margin-bottom:var(--calcite-spacing-sm-plus)}}.arcgis-map-container-ui__element-top-start:dir(rtl){align-items:flex-end;--arcgis-internal-sketch-justify-content: flex-start;::slotted(arcgis-sketch){--sketch-pad-flex-flow: row-reverse wrap-reverse}}.arcgis-map-container-ui__element-top-end{position:relative;justify-content:flex-start;align-items:flex-end;::slotted(arcgis-expand){--arcgis-expand-icon-number-left: calc(-1 * var(--calcite-spacing-xs));--arcgis-expand-icon-number-right: none}::slotted(arcgis-floor-filter){--arcgis-row-direction: row-reverse}::slotted(arcgis-sketch){--sketch-pad-flex-flow: row-reverse wrap}::slotted(arcgis-sketch[layout="vertical"]){--sketch-pad-flex-flow: column wrap-reverse}::slotted(*){margin-bottom:var(--calcite-spacing-sm-plus)}}.arcgis-map-container-ui__element-top-end:dir(rtl){align-items:flex-start;--arcgis-internal-sketch-justify-content: flex-end}.arcgis-map-container-ui__bottom-left-row{position:absolute;bottom:var(--calcite-spacing-none);left:var(--calcite-spacing-none);display:flex;flex-direction:row;align-items:flex-end;max-width:100%;margin-left:var(--calcite-spacing-lg);margin-bottom:var(--calcite-spacing-xxxl);padding-left:var(--arcgis-layout-overlay-space-left);padding-bottom:var(--arcgis-layout-overlay-space-bottom);::slotted(:last-child){margin-right:var(--calcite-spacing-xxl)}::slotted(arcgis-floor-filter){--arcgis-internal-floor-filter-column-direction: column-reverse;--arcgis-internal-floor-filter-button-border-width: 0 0 1px}::slotted(*){max-width:var(--arcgis-internal-top-max-width)}}.arcgis-map-container-ui__bottom-left-row:dir(rtl){flex-direction:row-reverse;::slotted(arcgis-floor-filter){--arcgis-row-direction: row-reverse}}.arcgis-map-container-ui__bottom-right-row{position:absolute;bottom:var(--calcite-spacing-none);right:var(--calcite-spacing-none);display:flex;flex-direction:row-reverse;align-items:flex-end;max-width:100%;margin-right:var(--calcite-spacing-lg);margin-bottom:var(--calcite-spacing-xxxl);padding-right:var(--arcgis-layout-overlay-space-right);padding-bottom:var(--arcgis-layout-overlay-space-bottom);::slotted(:last-child){margin-left:var(--calcite-spacing-xxl)}::slotted(arcgis-floor-filter){--arcgis-internal-floor-filter-column-direction: column-reverse;--arcgis-internal-floor-filter-button-border-width: 0 0 1px}::slotted(*){max-width:var(--arcgis-internal-top-max-width)}::slotted(arcgis-expand){--arcgis-internal-sketch-justify-content: flex-end}::slotted(arcgis-sketch[layout="vertical"]){--sketch-pad-flex-flow: column-reverse wrap-reverse}}.arcgis-map-container-ui__bottom-right-row:dir(rtl){flex-direction:row;::slotted(arcgis-floor-filter){--arcgis-row-direction: row}}.arcgis-map-container-ui__element-bottom-left{bottom:var(--calcite-spacing-none);left:var(--calcite-spacing-none);display:flex;flex-direction:column;align-items:flex-end;justify-content:flex-end;flex-flow:row;::slotted(arcgis-coordinate-conversion){--arcgis-coordinate-conversion-flex-direction: column-reverse}::slotted(arcgis-expand){--arcgis-expand-icon-number-left: none;--arcgis-expand-icon-number-right: calc(-1 * var(--calcite-spacing-xs))}::slotted(:is(arcgis-floor-filter,arcgis-expand)){--arcgis-collapse-icon-flip: scaleX(-1)}::slotted(arcgis-sketch){--sketch-pad-flex-flow: wrap-reverse}::slotted(arcgis-sketch[layout="vertical"]){--sketch-pad-flex-flow: column-reverse wrap}::slotted(arcgis-floor-filter){--arcgis-floor-filter-align-items: flex-end}::slotted(*){margin-right:var(--calcite-spacing-sm-plus)}}.arcgis-map-container-ui__element-bottom-right{bottom:var(--calcite-spacing-none);right:var(--calcite-spacing-none);align-items:flex-end;justify-content:flex-end;margin-left:auto;flex-flow:row-reverse;::slotted(arcgis-coordinate-conversion){--arcgis-coordinate-conversion-flex-direction: column-reverse}::slotted(arcgis-expand){--arcgis-expand-icon-number-left: calc(-1 * var(--calcite-spacing-xs));--arcgis-expand-icon-number-right: none}::slotted(arcgis-sketch){--sketch-pad-flex-flow: row-reverse wrap-reverse}::slotted(arcgis-sketch[layout="vertical"]){--sketch-pad-flex-flow: column-reverse wrap-reverse}::slotted(arcgis-floor-filter){--arcgis-floor-filter-align-items: flex-end;--arcgis-row-direction: row-reverse}::slotted(*){margin-left:var(--calcite-spacing-sm-plus)}}.arcgis-map-container-ui__element-bottom-start{bottom:var(--calcite-spacing-none);left:var(--calcite-spacing-none);display:flex;flex-direction:column;align-items:flex-end;justify-content:flex-end;flex-flow:row;::slotted(arcgis-coordinate-conversion){--arcgis-coordinate-conversion-flex-direction: column-reverse}::slotted(arcgis-expand){--arcgis-expand-icon-number-left: none;--arcgis-expand-icon-number-right: calc(-1 * var(--calcite-spacing-xs))}::slotted(:is(arcgis-floor-filter,arcgis-expand)){--arcgis-collapse-icon-flip: scaleX(-1)}::slotted(arcgis-sketch){--sketch-pad-flex-flow: wrap-reverse}::slotted(arcgis-sketch[layout="vertical"]){--sketch-pad-flex-flow: column-reverse wrap}::slotted(arcgis-floor-filter){--arcgis-floor-filter-align-items: flex-end}::slotted(*){margin-right:var(--calcite-spacing-sm-plus)}::slotted(:dir(rtl)){margin-right:var(--calcite-spacing-none);--arcgis-internal-sketch-justify-content: flex-start}}.arcgis-map-container-ui__element-bottom-end{bottom:var(--calcite-spacing-none);right:var(--calcite-spacing-none);align-items:flex-end;justify-content:flex-end;margin-left:auto;flex-flow:row-reverse;::slotted(arcgis-coordinate-conversion){--arcgis-coordinate-conversion-flex-direction: column-reverse}::slotted(arcgis-expand){--arcgis-expand-icon-number-left: calc(-1 * var(--calcite-spacing-xs));--arcgis-expand-icon-number-right: none}::slotted(arcgis-sketch){--sketch-pad-flex-flow: row-reverse wrap-reverse}::slotted(arcgis-sketch[layout="vertical"]){--sketch-pad-flex-flow: column-reverse wrap-reverse}::slotted(arcgis-floor-filter){--arcgis-floor-filter-align-items: flex-end;--arcgis-row-direction: row-reverse}::slotted(*){margin-left:var(--calcite-spacing-sm-plus)}::slotted(:dir(rtl)){margin-left:var(--calcite-spacing-none);--arcgis-internal-sketch-justify-content: flex-end}}.arcgis-map-container-ui__element>*{pointer-events:auto}@container arcgis-map-container (height >= 0){::slotted(arcgis-sketch){--responsive-toolbar-vert-width: var(--calcite-spacing-none);--responsive-toolbar-vert-height: min(100vh - 120px, 100cqh - 120px);--responsive-toolbar-horiz-width: min(100vw - 60px, 100cqw - 60px);--responsive-toolbar-horiz-height: var(--calcite-spacing-none)}}@container arcgis-map-container (max-height: 544px) or (max-width: 544px){::slotted(:is(arcgis-floor-filter)){--arcgis-internal-floor-filter-button-display: none;--arcgis-internal-floor-filter-menu-width: 225px}}@container arcgis-map-container (max-height: 499.99px){.arcgis-map-container-ui__element>*{--arcgis-expand-max-height: var(--arcgis-internal-panel-height-sm);--arcgis-internal-panel-height: var(--arcgis-internal-panel-height-sm)}::slotted(:is(arcgis-area-measurement-2d,arcgis-area-measurement-3d,arcgis-basemap-gallery,arcgis-basemap-layer-list,arcgis-bookmarks,arcgis-building-explorer,arcgis-catalog-layer-list,arcgis-directions,arcgis-direct-line-measurement-3d,arcgis-distance-measurement-2d,arcgis-editor,arcgis-feature-form,arcgis-features,arcgis-layer-list,arcgis-legend,arcgis-line-of-sight,arcgis-print,arcgis-shadow-cast,arcgis-slice,arcgis-table-list,arcgis-utility-network-trace,arcgis-grid-controls)){max-height:var(--arcgis-internal-panel-height-sm)}}@container arcgis-map-container (min-height: 500px){.arcgis-map-container-ui__element>*{--arcgis-expand-max-height: var(--arcgis-internal-panel-height-md);--arcgis-internal-panel-height: var(--arcgis-internal-panel-height-md)}::slotted(:is(arcgis-area-measurement-2d,arcgis-area-measurement-3d,arcgis-basemap-gallery,arcgis-basemap-layer-list,arcgis-bookmarks,arcgis-building-explorer,arcgis-catalog-layer-list,arcgis-directions,arcgis-direct-line-measurement-3d,arcgis-distance-measurement-2d,arcgis-editor,arcgis-feature-form,arcgis-features,arcgis-layer-list,arcgis-legend,arcgis-line-of-sight,arcgis-print,arcgis-shadow-cast,arcgis-slice,arcgis-table-list,arcgis-utility-network-trace,arcgis-grid-controls)){max-height:var(--arcgis-internal-panel-height-md)}::slotted(:is(arcgis-floor-filter)){--arcgis-internal-floor-filter-menu-max-height: 320px;--arcgis-internal-floor-filter-levels-max-height: 320px}}@container arcgis-map-container (min-height: 768px){.arcgis-map-container-ui__element>*{--arcgis-expand-max-height: var(--arcgis-internal-panel-height-lg);--arcgis-internal-panel-height: var(--arcgis-internal-panel-height-lg)}::slotted(:is(arcgis-area-measurement-2d,arcgis-area-measurement-3d,arcgis-basemap-gallery,arcgis-basemap-layer-list,arcgis-bookmarks,arcgis-building-explorer,arcgis-catalog-layer-list,arcgis-directions,arcgis-direct-line-measurement-3d,arcgis-distance-measurement-2d,arcgis-editor,arcgis-feature-form,arcgis-features,arcgis-layer-list,arcgis-legend,arcgis-line-of-sight,arcgis-print,arcgis-shadow-cast,arcgis-slice,arcgis-table-list,arcgis-utility-network-trace,arcgis-grid-controls)){max-height:var(--arcgis-internal-panel-height-lg)}::slotted(:is(arcgis-floor-filter)){--arcgis-internal-floor-filter-menu-max-height: 420px;--arcgis-internal-floor-filter-levels-max-height: 420px}}@container arcgis-map-container (min-height: 992px){.arcgis-map-container-ui__element>*{--arcgis-expand-max-height: var(--arcgis-internal-panel-height-lg);--arcgis-internal-panel-height: var(--arcgis-internal-panel-height-lg)}::slotted(:is(arcgis-area-measurement-2d,arcgis-area-measurement-3d,arcgis-basemap-gallery,arcgis-basemap-layer-list,arcgis-bookmarks,arcgis-building-explorer,arcgis-catalog-layer-list,arcgis-directions,arcgis-direct-line-measurement-3d,arcgis-distance-measurement-2d,arcgis-editor,arcgis-feature-form,arcgis-features,arcgis-layer-list,arcgis-legend,arcgis-line-of-sight,arcgis-print,arcgis-shadow-cast,arcgis-slice,arcgis-table-list,arcgis-utility-network-trace,arcgis-grid-controls)){max-height:var(--arcgis-internal-panel-height-lg)}}@container arcgis-map-container (min-height: 1200px){.arcgis-map-container-ui__element>*{--arcgis-expand-max-height: var(--arcgis-internal-panel-height-xl);--arcgis-internal-panel-height: var(--arcgis-internal-panel-height-xl)}::slotted(:is(arcgis-area-measurement-2d,arcgis-area-measurement-3d,arcgis-basemap-gallery,arcgis-basemap-layer-list,arcgis-bookmarks,arcgis-building-explorer,arcgis-catalog-layer-list,arcgis-directions,arcgis-direct-line-measurement-3d,arcgis-distance-measurement-2d,arcgis-editor,arcgis-feature-form,arcgis-features,arcgis-layer-list,arcgis-legend,arcgis-line-of-sight,arcgis-print,arcgis-shadow-cast,arcgis-slice,arcgis-table-list,arcgis-utility-network-trace,arcgis-grid-controls)){max-height:var(--arcgis-internal-panel-height-xl)}}@container arcgis-map-container (min-width: 544px){::slotted(:is(arcgis-area-measurement-2d,arcgis-area-measurement-3d,arcgis-basemap-gallery,arcgis-basemap-layer-list,arcgis-bookmarks,arcgis-building-explorer,arcgis-catalog-layer-list,arcgis-directions,arcgis-direct-line-measurement-3d,arcgis-distance-measurement-2d,arcgis-editor,arcgis-feature-form,arcgis-features,arcgis-layer-list,arcgis-line-of-sight,arcgis-print,arcgis-shadow-cast,arcgis-slice,arcgis-table-list,arcgis-utility-network-trace,arcgis-grid-controls)){width:var(--arcgis-internal-panel-width)}}@container arcgis-map-container (min-width: 768px){::slotted(:is(arcgis-legend[card-style-layout="auto"])){--arcgis-legend-internal-width: auto}::slotted(:is(arcgis-area-measurement-2d,arcgis-area-measurement-3d,arcgis-basemap-gallery,arcgis-basemap-layer-list,arcgis-bookmarks,arcgis-building-explorer,arcgis-catalog-layer-list,arcgis-directions,arcgis-direct-line-measurement-3d,arcgis-distance-measurement-2d,arcgis-editor,arcgis-feature-form,arcgis-features,arcgis-layer-list,arcgis-line-of-sight,arcgis-print,arcgis-shadow-cast,arcgis-slice,arcgis-table-list,arcgis-utility-network-trace,arcgis-grid-controls)){width:var(--arcgis-internal-panel-width)}}@container arcgis-map-container (min-width: 992px){::slotted(:is(arcgis-area-measurement-2d,arcgis-area-measurement-3d,arcgis-basemap-gallery,arcgis-basemap-layer-list,arcgis-bookmarks,arcgis-building-explorer,arcgis-catalog-layer-list,arcgis-directions,arcgis-direct-line-measurement-3d,arcgis-distance-measurement-2d,arcgis-editor,arcgis-feature-form,arcgis-features,arcgis-layer-list,arcgis-line-of-sight,arcgis-print,arcgis-shadow-cast,arcgis-slice,arcgis-table-list,arcgis-utility-network-trace,arcgis-grid-controls)){width:var(--arcgis-internal-panel-width)}}@container arcgis-map-container (min-width: 1200px){::slotted(:is(arcgis-basemap-gallery)){width:var(--arcgis-internal-basemap-gallery-width-lg)}::slotted(:is(arcgis-area-measurement-2d,arcgis-area-measurement-3d,arcgis-basemap-layer-list,arcgis-bookmarks,arcgis-building-explorer,arcgis-catalog-layer-list,arcgis-directions,arcgis-direct-line-measurement-3d,arcgis-distance-measurement-2d,arcgis-editor,arcgis-feature-form,arcgis-features,arcgis-layer-list,arcgis-line-of-sight,arcgis-print,arcgis-shadow-cast,arcgis-slice,arcgis-table-list,arcgis-utility-network-trace,arcgis-grid-controls)){width:var(--arcgis-internal-panel-width)}}`;const Lnt={"top-left":"top-left","top-right":"top-right","bottom-left":"bottom-left","bottom-right":"bottom-right","bottom-leading":"bottom-start","bottom-trailing":"bottom-end","top-leading":"top-start","top-trailing":"top-end"},Dnt=["manual"];function UE(t){t.el.childElem&&(t.el.childElem.ownedBy=t.el),t.position&&Dnt.includes(t.position)?t.el.removeAttribute("slot"):t.position&&(t.el.slot=Lnt[t.position]);const e=Rnt(t);if(!e){const i=Bnt(t);if(!i){HSe(t);return}return Dle(i,t,!0),i}return znt(e,t.el.parent)||(t.el.parent=e,e.localName==="arcgis-expand"?Fnt(e,t):e.localName==="arcgis-placement"?Nnt(e,t):Dle(e,t,!1)),e}function Rnt({el:t}){for(let e=t.parentElement;e;e=e?.parentElement??null){if(Lle.has(e.localName))return e;if("ownedBy"in e&&e.ownedBy instanceof HTMLElement&&Lle.has(e.ownedBy.localName))return e.ownedBy}}const Lle=new Set(["arcgis-map","arcgis-scene","arcgis-link-chart","arcgis-expand","arcgis-placement"]);function znt(t,e){if(t!==e)return!1;const i=t.localName;return i==="arcgis-expand"||i==="arcgis-placement"}function WN(t,e,i="arcgisReady"){const r=t;if(r.view)e(r.view);else{let n=function(s){s.target===t&&(WN(t,e,i),t.removeEventListener(i,n))};t.addEventListener(i,n)}}const Fnt=(t,e)=>WN(t,i=>{const r=HX(e);e.el.shadowRoot?t.content=e.el:e.el.childElem&&t.content!=null&&r.append(e.el.childElem),e.el.view=i}),Nnt=(t,e)=>WN(t,i=>{const r=HX(e);e.el.childElem&&r.append(e.el.childElem),e.el.view=i}),Dle=(t,e,i)=>WN(t,r=>{i&&HSe(e),e.el.view=r,e.referenceElement=t},"arcgisViewReadyChange");function jnt(t,e){return e===void 0||t?.targetGeometry!==e?.targetGeometry||t?.rotation!==e?.rotation||t?.scale!==e?.scale}function Vnt(t,e){return USe(e?.center,t)}function USe(t,e){if(typeof e=="string")return USe(t,e.split(",").map(Number));if(!t)return e;if(Array.isArray(e)){const i=e[0],r=e[1],n=e.length>2?e[2]:void 0;if(i!==t.longitude||r!==t.latitude||n!==t.z)return e}else if(e&&!t?.equals(e))return e}function HSe(t){t.el.childElem&&HX(t).append(t.el.childElem)}function HX(t){return t.el.shadowRoot??t.el}function Bnt(t,e){const i=t.referenceElement;if(typeof i!="string")return i??void 0;const r=i.includes("#")||i.includes(".")||i.includes("["),n=t.el.getRootNode();return(r?void 0:n.querySelector(`#${i}`))??n.querySelector(i)??void 0}const Unt=t=>t.el.childElem;let Hnt=class extends UF{constructor(e){super(e),this.direction=iN(),this.component.listen("arcgisViewClick",i=>{this._handleOpenPopup(i.detail)}),this.component.listenOn(globalThis,"unhandledrejection",i=>{if(i.reason?.name==="webgl:required"){const{name:r}=i.reason;this.webGLError={name:r}}})}hostLifecycle(){return as(()=>this.component.view.popup?.visible,()=>{this.popupRef?.visible&&(this.popupRef.visible=!1)})}openPopup(e){this.popupRef?this.popupRef.open(e):this.component.view.openPopup(e)}closePopup(){this.popupRef?this.popupRef.visible=!1:this.component.view.closePopup()}async _handleOpenPopup(e){if(this.popupRef&&!this.component.popupDisabled){e.stopPropagation();const{location:i,promises:r}=await this.popupRef?.handleViewClick(e);r?.length&&(this.component.view.closePopup(),this.popupRef?.open({location:i,promises:r}))}}_handlePopupSlotChange(e){const i=Hze(e.target,"arcgis-popup");!this.popupRef&&i.length?this.popupRef=i[0]:i.length||(this.popupRef=void 0)}_webGLErrorAlert(){return this.webGLError?J`<calcite-alert icon=x-octagon kind=danger open .label=${this.webGLError.name}><div slot=title>Unable to display map. WebGL2 support is required.</div><div slot=message>Ensure that your browser and hardware meet the minimum requirements.</div><calcite-link slot=link href=https://esriurl.com/webgl-faq>https://esriurl.com/webgl-faq</calcite-link></calcite-alert>`:null}render(){return Pnt(this.direction,e=>this._handlePopupSlotChange(e),this._webGLErrorAlert())}};const Gnt=b_((t,e)=>{const i=Re();return e.onLifecycle(()=>ze(()=>{const{map:r}=t;if(!r||r.destroyed)return[];const n=[];return r.loadError&&n.push(r),r.basemap?.loadError&&n.push(r.basemap),r.ground.loadError&&n.push(r.ground),[...r.allLayers,...r.allTables].forEach(s=>{s.loadError&&n.push(s)}),n},r=>{r.length&&(t.loadErrorSources=r,i.emit())})),i}),qnt=b_((t,e)=>{const i=Re();return e.onLifecycle(()=>ze(()=>t.view?.readyState,r=>{(r==="map-content-error"||r==="rendering-error")&&i.emit()})),i});const Wnt=VSe(Tnt),Ynt=VSe(uXe);var hw;let Znt=(hw=class extends Et{constructor(){super(),this._containerRef=wr(),this._mapRef=wr(),this._uiController=new Hnt(this),this.extraContent=new We,this.arcgisLoadError=Gnt(this),this.arcgisViewReadyError=qnt(this),this._map=Wnt(this),this.view=Ynt(this),this.animationsDisabled=this.view.animationsEnabled,this.allLayerViews=this.view.allLayerViews,this.analyses=this.view.analyses,this.autoDestroyDisabled=!1,this.background=this.view.background,this.basemap=this._map.basemap,this.basemapView=this.view.basemapView,this.constraints=this.view.constraints,this.displayFilterDisabled=this.view.displayFilterEnabled,this.fatalError=this.view.fatalError,this.floors=this.view.floors,this.graphics=this.view.graphics,this.ground=this._map.ground,this.highlights=this.view.highlights,this.highlightOptions=this.view.highlightOptions,this.ipsInfo=this._map.ipsInfo,this.layerViews=this.view.layerViews,this.magnifier=this.view.magnifier,this.map=this.view.map,this.navigation=this.view.navigation,this.padding=this.view.padding,this.popup=this.view.popup,this.popupDisabled=this.view.popupEnabled,this.ready=this.view.ready,this.resizeAlign=this.view.resizeAlign,this.resolution=this.view.resolution,this.rotation=this.view.rotation,this.spatialReference=this.view.spatialReference,this.spatialReferenceLocked=this.view.spatialReferenceLocked,this.suspended=this.view.suspended,this.theme=this.view.theme,this.timeExtent=this.view.timeExtent,this.timeZone=this.view.timeZone,this.updating=this.view.updating,this.visibleArea=this.view.visibleArea,this.arcgisViewAnalysisViewCreate=Or(()=>this.view,"analysis-view-create"),this.arcgisViewAnalysisViewCreateError=Or(()=>this.view,"analysis-view-create-error"),this.arcgisViewAnalysisViewDestroy=Or(()=>this.view,"analysis-view-destroy"),this.arcgisViewChange=Re(),this.arcgisViewClick=Or(()=>this.view,"click"),this.arcgisViewDoubleClick=Or(()=>this.view,"double-click"),this.arcgisViewDrag=Or(()=>this.view,"drag"),this.arcgisViewHold=Or(()=>this.view,"hold"),this.arcgisViewImmediateClick=Or(()=>this.view,"immediate-click"),this.arcgisViewImmediateDoubleClick=Or(()=>this.view,"immediate-double-click"),this.arcgisViewKeyDown=Or(()=>this.view,"key-down"),this.arcgisViewKeyUp=Or(()=>this.view,"key-up"),this.arcgisViewLayerviewCreate=Or(()=>this.view,"layerview-create"),this.arcgisViewLayerviewCreateError=Or(()=>this.view,"layerview-create-error"),this.arcgisViewLayerviewDestroy=Or(()=>this.view,"layerview-destroy"),this.arcgisViewMouseWheel=Or(()=>this.view,"mouse-wheel"),this.arcgisViewPointerDown=Or(()=>this.view,"pointer-down"),this.arcgisViewPointerEnter=Or(()=>this.view,"pointer-enter"),this.arcgisViewPointerLeave=Or(()=>this.view,"pointer-leave"),this.arcgisViewPointerMove=Or(()=>this.view,"pointer-move"),this.arcgisViewPointerUp=Or(()=>this.view,"pointer-up"),this.arcgisViewReadyChange=Re(),this.view.ui={components:["attribution"]}}get aria(){return this.view?.aria}set aria(e){this.view&&(this.view.aria=e)}get center(){return this.view.center}set center(e){const i=Vnt(e,this.view);i&&(this.view.center=i)}get extent(){return this.view.extent}set extent(e){e&&!this.extent?.equals(e)&&(this.view.extent=e)}get focusAreas(){return this.map?this.map.focusAreas:{areas:[],style:"bright"}}set focusAreas(e){this.map&&(this.map.focusAreas=e)}get gamepad(){return this.view.input.gamepad}get interacting(){return this.view.interacting}get itemId(){return this._map.portalItem?.id}set itemId(e){Mnt(this._map,this),this._map.portalItem={id:e},this.view.map=this._map}get navigating(){return this.view.navigating}get scale(){return this.view.scale}set scale(e){this.view.scale=e}get stationary(){return this.view.stationary}get viewpoint(){return this.view.viewpoint}set viewpoint(e){jnt(this.viewpoint,e)&&(this.view.viewpoint=e)}get zoom(){return this.view.zoom}set zoom(e){this.view.zoom=e}async addLayer(e,i){this.map?.add(e,i)}async addLayers(e,i){this.map?.addMany(e,i)}async addTable(e){this.map?.tables.add(e)}async addTables(e,i){this.map?.tables.addMany(e,i)}async closePopup(){this._uiController.closePopup()}async destroy(){await this.manager.destroy()}async goTo(e,i){return await this.view.goTo(e,i)}async hitTest(e,i){return await this.view.hitTest(e,i)}async openPopup(e){this._uiController.openPopup(e)}async takeScreenshot(e){return await this.view.takeScreenshot(e)}toMap(e){return this.view.toMap(e)}toScreen(e,i){return this.view.toScreen(e,i)}async tryFatalErrorRecovery(){this.view.tryFatalErrorRecovery()}async viewOnReady(e,i){return await this.componentOnReady(),await this.view.whenReady().then(()=>e?.()).catch(i)}async whenAnalysisView(e){return await this.view.whenAnalysisView(e)}async whenLayerView(e){return await this.view?.whenLayerView(e)}loaded(){const e=this;e.el.childElem=this._mapRef.value,this.view.container??=e.el.childElem,this.map||=this._map,this.manager.onLifecycle(()=>[ze(()=>this.map,i=>{i&&(this._map=i)},{initial:!0,sync:!0}),ze(()=>this.view.stationary,()=>this.arcgisViewChange.emit(),{initial:!0}),ze(()=>this.view.ready,()=>this.arcgisViewReadyChange.emit(),{initial:this.view.ready})])}renderMain(){return J`<div class=${q(an.base)} ${zt(this._mapRef)}></div>`}render(){return J`<section class=${q(an.containerUI)} ${zt(this._containerRef)}>${this._uiController.render()}${this.extraContent}</section>${this.renderMain()}`}},hw.properties={_map:16,view:32,animationsDisabled:5,aria:0,allLayerViews:0,analyses:0,autoDestroyDisabled:5,background:0,basemap:1,basemapView:0,center:1,constraints:0,displayFilterDisabled:5,extent:0,fatalError:0,floors:0,focusAreas:0,gamepad:32,graphics:0,ground:1,highlights:0,highlightOptions:0,interacting:32,ipsInfo:0,itemId:3,layerViews:0,magnifier:0,map:0,navigating:32,navigation:0,padding:0,popup:0,popupDisabled:5,ready:4,resizeAlign:1,resolution:8,rotation:9,scale:9,spatialReference:0,spatialReferenceLocked:5,stationary:32,suspended:7,theme:0,timeExtent:0,timeZone:1,updating:4,viewpoint:0,visibleArea:0,zoom:9,loadErrorSources:0},hw.styles=[Ant,Ont],hw);nn("arcgis-map",Znt);const N1={percentage:"percentage",progressRing:"ring--progress",ring:"ring",rings:"rings",text:"text",trackRing:"ring--track"},Xnt=St`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{position:relative;margin-inline:auto;display:flex;align-items:center;justify-content:center;opacity:1;flex-direction:column;min-block-size:var(--calcite-loader-size);font-size:var(--calcite-loader-font-size);stroke-width:var(--calcite-internal-stroke-width);fill:none;transform:scale(1);padding-block:var(--calcite-loader-spacing, 4rem)}:host([scale=s]){--calcite-internal-stroke-width: 3;--calcite-internal-text-offset: var(--calcite-spacing-xxs);--calcite-internal-loader-font-size: var(--calcite-font-size--3);--calcite-internal-loader-size: 2rem;--calcite-internal-loader-size-inline: .75rem;--calcite-internal-loader-value-line-height: .625rem}:host([scale=m]){--calcite-internal-stroke-width: 6;--calcite-internal-text-offset: var(--calcite-spacing-sm);--calcite-internal-loader-font-size: var(--calcite-font-size-0);--calcite-internal-loader-size: 4rem;--calcite-internal-loader-size-inline: 1rem;--calcite-internal-loader-value-line-height: 1.375rem}:host([scale=l]){--calcite-internal-stroke-width: 8;--calcite-internal-text-offset: var(--calcite-spacing-md);--calcite-internal-loader-font-size: var(--calcite-font-size-2);--calcite-internal-loader-size: 6rem;--calcite-internal-loader-size-inline: 1.5rem;--calcite-internal-loader-value-line-height: 1.71875rem}.text{display:block;text-align:center;font-size:var(--calcite-font-size--2);line-height:1rem;margin-block-start:var(--calcite-loader-text-spacing, var(--calcite-internal-text-offset));font-weight:var(--calcite-loader-text-weight, var(--calcite-font-weight-normal));color:var(--calcite-loader-text-color, var(--calcite-color-text-1))}.percentage{display:block;text-align:center;font-size:var(--calcite-loader-font-size);inline-size:var(--calcite-loader-size, var(--calcite-internal-loader-size));line-height:var(--calcite-internal-loader-value-line-height);align-self:center;color:var(--calcite-loader-text-color, var(--calcite-color-text-1))}.rings{position:relative;display:flex;overflow:visible;opacity:1;inline-size:var(--calcite-loader-size, var(--calcite-internal-loader-size));block-size:var(--calcite-loader-size, var(--calcite-internal-loader-size))}.ring{position:absolute;inset-block-start:0px;transform-origin:center;overflow:visible;inset-inline-start:0;inline-size:var(--calcite-loader-size, var(--calcite-internal-loader-size));block-size:var(--calcite-loader-size, var(--calcite-internal-loader-size))}.ring--track{stroke:var(--calcite-loader-track-color, var(--calcite-color-transparent-press))}.ring--progress{stroke:var(--calcite-loader-progress-color, var(--calcite-color-brand));transform:rotate(-90deg);transition:all var(--calcite-internal-animation-timing-fast) linear}:host([type=indeterminate]) .ring--progress{animation:loader-clockwise calc(var(--calcite-internal-animation-timing-slow) / var(--calcite-internal-duration-factor) * 2 / var(--calcite-internal-duration-factor)) linear infinite}:host([inline]){--calcite-internal-stroke-width: 2;position:relative;margin:0;stroke:currentColor;stroke-width:2;padding-block:0px;block-size:var(--calcite-loader-size, var(--calcite-loader-size-inline, var(--calcite-internal-loader-size-inline)));min-block-size:var(--calcite-loader-size, var(--calcite-loader-size-inline, var(--calcite-internal-loader-size-inline)));inline-size:var(--calcite-loader-size, var(--calcite-loader-size-inline, var(--calcite-internal-loader-size-inline)));vertical-align:calc(var(--calcite-loader-size, var(--calcite-loader-size-inline, var(--calcite-internal-loader-size-inline))) * -1 * .2)}:host([inline]) .rings{inset-block-start:0px;margin:0;inset-inline-start:0;inline-size:var(--calcite-loader-size, var(--calcite-loader-size-inline, var(--calcite-internal-loader-size-inline)));block-size:var(--calcite-loader-size, var(--calcite-loader-size-inline, var(--calcite-internal-loader-size-inline)))}:host([inline]) .ring{inline-size:var(--calcite-loader-size, var(--calcite-loader-size-inline, var(--calcite-internal-loader-size-inline)));block-size:var(--calcite-loader-size, var(--calcite-loader-size-inline, var(--calcite-internal-loader-size-inline)))}:host([inline]) .ring--progress{stroke:var(--calcite-loader-progress-color-inline, currentColor)}:host([complete]){opacity:0;transform:scale(.75);transform-origin:center;transition:opacity var(--calcite-internal-animation-timing-medium) linear 1s,transform var(--calcite-internal-animation-timing-medium) linear 1s}:host([complete]) .rings{opacity:0;transform:scale(.75);transform-origin:center;transition:opacity calc(.18s * var(--calcite-internal-duration-factor)) linear .8s,transform calc(.18s * var(--calcite-internal-duration-factor)) linear .8s}:host([complete]) .percentage{color:var(--calcite-color-brand);transform:scale(1.05);transform-origin:center;transition:color var(--calcite-internal-animation-timing-medium) linear,transform var(--calcite-internal-animation-timing-medium) linear}@keyframes loader-clockwise{0%{transform:rotate(0)}to{transform:rotate(360deg)}}:host([hidden]){display:none}[hidden]{display:none}`,G5=class G5 extends Et{constructor(){super(...arguments),this.messages=qn({name:null}),this.complete=!1,this.inline=!1,this.scale="m",this.text="",this.type="indeterminate",this.value=0}connectedCallback(){super.connectedCallback(),this.updateFormatter()}load(){requestAnimationFrame(()=>this.valueChangeHandler())}willUpdate(e){e.has("value")&&(this.hasUpdated||this.value!==0)&&this.valueChangeHandler(),(e.has("type")&&(this.hasUpdated||this.type!=="indeterminate")||e.has("messages"))&&this.updateFormatter()}valueChangeHandler(){this.complete=this.type.startsWith("determinate")&&this.value===100}formatValue(){return this.type!=="determinate-value"?`${this.value}`:this.formatter.format(this.value/100)}getSize(e){return{s:32,m:64,l:96}[e]}getInlineSize(e){return{s:12,m:16,l:24}[e]}updateFormatter(){this.type!=="determinate-value"||this.formatter?.resolvedOptions().locale===this.messages._lang||(this.formatter=new Intl.NumberFormat(this.messages._lang,{style:"percent"}))}render(){const{el:e,inline:i,label:r,text:n,type:s,value:a}=this,o=e.id||Vd(),l=s!=="indeterminate",c=Math.floor(a);return this.el.ariaLabel=r,this.el.ariaValueMax=l?"100":void 0,this.el.ariaValueMin=l?"0":void 0,this.el.ariaValueNow=l?c.toString():void 0,FT(this.el,"id",o),this.el.role="progressbar",J`<div class=${q(N1.rings)}>${this.renderRing("track")}${this.renderRing("progress")}${!i&&l&&J`<div class=${q(N1.percentage)}>${this.formatValue()}</div>`||""}</div>${!i&&n&&J`<div class=${q(N1.text)}>${n}</div>`||""}`}renderRing(e){const{inline:i,scale:r,value:n}=this,s=i?this.getInlineSize(r):this.getSize(r),o=s*.45;let l;if(e==="progress"){const c=2*o*Math.PI,h=(this.type.startsWith("determinate")?n:24)/100*c,f=c-h;l={"stroke-dasharray":`${h} ${f}`}}return J`<svg aria-hidden=true class=${q({[N1.ring]:!0,[N1.trackRing]:e==="track",[N1.progressRing]:e==="progress"})} style=${Kt(l)} viewBox=${`0 0 ${s} ${s}`}>${Sn`<circle cx=${s/2} cy=${s/2} r=${o??Xe} />`}</svg>`}};G5.properties={complete:[7,{},{reflect:!0,type:Boolean}],inline:[7,{},{reflect:!0,type:Boolean}],label:1,scale:[3,{},{reflect:!0}],text:1,type:[3,{},{reflect:!0}],value:[9,{},{type:Number}]},G5.styles=Xnt;let Iz=G5;$i("calcite-loader",Iz);const RRt=Object.freeze(Object.defineProperty({__proto__:null,Loader:Iz},Symbol.toStringTag,{value:"Module"}));const Jnt=["calcite-input","calcite-input-number","calcite-input-text","calcite-text-area"];function Knt(t){return`${t.split("-").map((r,n)=>n===0?r:`${r[0].toUpperCase()}${r.slice(1)}`).join("")}${Jnt.includes(t)?"Input":"Change"}`}const dq="hidden-form-input";function GX(t){return"checked"in t}const hq=new WeakMap,qX=new WeakSet;function Qnt(t,e){if(NT(e.parentElement,"[form]"))return!0;const r="calciteInternalFormComponentRegister";let n=!1;return t.addEventListener(r,s=>{n=s.composedPath().some(a=>qX.has(a)),s.stopPropagation()},{once:!0}),e.dispatchEvent(new CustomEvent(r,{bubbles:!0,composed:!0})),n}function est(t,{status:e,message:i,icon:r}){"status"in t&&(t.status=e),"validationIcon"in t&&typeof t.validationIcon!="string"&&(t.validationIcon=r),"validationMessage"in t&&!t.validationMessage&&(t.validationMessage=i)}function GSe(t){return t.nodeName==="CALCITE-RADIO-BUTTON"?NT(t,"calcite-radio-button-group"):t}const tst=new CustomEvent("calciteInvalid",{bubbles:!0,composed:!0});function Rle(t){const e=t?.target,i=e?.validationMessage,r=GSe(e?.parentElement);if(!r)return;const n=r?.nodeName?.toLowerCase(),s=n?.split("-");if(s.length<2||s[0]!=="calcite")return;t?.preventDefault(),"validity"in r&&(r.validity=e?.validity),r.dispatchEvent(tst),est(r,{message:i,icon:!0,status:"invalid"});const a=Knt(n);r.addEventListener(a,()=>{"status"in r&&(r.status="idle"),"validationIcon"in r&&(r.validationIcon===""||r.validationIcon===!0)&&(r.validationIcon=!1),"validationMessage"in r&&r.validationMessage===i&&(r.validationMessage=""),"validity"in r&&(r.validity=e?.validity)},{once:!0})}function YN(t){const{formEl:e}=t;return e?(e.addEventListener("invalid",Rle,!0),e.requestSubmit(),e.removeEventListener("invalid",Rle,!0),requestAnimationFrame(()=>{const i=e.querySelectorAll("[status=invalid]");for(const r of i)if(r?.validationMessage){r?.setFocus();break}}),!0):!1}function qSe(t){t.formEl?.reset()}function WX(t){const{el:e,value:i}=t,r=YX(t);if(!r||Qnt(r,e))return;t.formEl=r,t.defaultValue=i,GX(t)&&(t.defaultChecked=t.checked);const n=ist.bind(t);r.addEventListener("reset",n),hq.set(t.el,n),qX.add(e)}function YX(t){const{el:e,form:i}=t;return i?KF(e,{id:i}):NT(e,"form")}function ist(){if("status"in this&&(this.status="idle"),"validationIcon"in this&&(this.validationIcon=!1),"validationMessage"in this&&(this.validationMessage=""),GX(this)){this.checked=this.defaultChecked;return}this.value=this.defaultValue,this.onFormReset?.()}function ZX(t){const{el:e,formEl:i}=t;if(!i)return;const r=hq.get(e);i.removeEventListener("reset",r),hq.delete(e),t.formEl=null,qX.delete(e)}function rst(t,e){t.defaultValue=e}const pq="calciteInternalHiddenInputInput",WSe=t=>{t.target.dispatchEvent(new CustomEvent(pq,{bubbles:!0}))},zle=t=>t.removeEventListener("input",WSe);function nst(t){const{el:e,formEl:i,name:r,value:n}=t,{ownerDocument:s}=e,a=e.querySelectorAll(`input[slot="${dq}"]`);if(!i||!r){a.forEach(f=>{zle(f),f.remove()});return}const o=Array.isArray(n)?n:[n],l=[],c=new Set;a.forEach(f=>{const g=o.find(y=>y==f.value);g!=null?(c.add(g),Fle(t,f,g)):l.push(f)});let h;o.forEach(f=>{if(c.has(f))return;let g=l.pop();g||(g=s.createElement("input"),g.ariaHidden="true",g.slot=dq),h||(h=s.createDocumentFragment()),h.append(g),g.addEventListener("input",WSe),Fle(t,g,f)}),h&&e.append(h),l.forEach(f=>{zle(f),f.remove()})}function Fle(t,e,i){const{defaultValue:r,disabled:n,form:s,name:a,required:o}=t;e.defaultValue=r,e.disabled=n,e.name=a,e.required=o,e.tabIndex=-1,s?e.setAttribute("form",s):e.removeAttribute("form"),GX(t)?(e.checked=t.checked,e.defaultChecked=t.defaultChecked,e.value=t.checked?i||"on":""):e.value=i||"",t.syncHiddenFormInput?.(e);const l=GSe(t.el);if(l&&"validity"in l)for(const c in{...e?.validity})l.validity[c]=e.validity[c]}const XX=({component:t})=>(nst(t),J`<slot name=${dq}></slot>`);const YSe="calciteInternalLabelClick",ZN="calciteInternalLabelConnected",Mz="calciteInternalLabelDisconnected",Nle="calcite-label",rT=new WeakMap,GC=new WeakMap,GI=new WeakMap,Az=new WeakMap,tw=new Set,sst=t=>{const{id:e}=t,i=e&&KF(t,{selector:`${Nle}[for="${e}"]`});if(i)return i;const r=NT(t,Nle);return!r||ast(r,t)?null:r};function ast(t,e){let i;const r="custom-element-ancestor-check",n=a=>{a.stopImmediatePropagation();const o=a.composedPath();i=o.slice(o.indexOf(e),o.indexOf(t))};return t.addEventListener(r,n,{once:!0}),e.dispatchEvent(new CustomEvent(r,{composed:!0,bubbles:!0})),t.removeEventListener(r,n),i.filter(a=>a!==e&&a!==t).filter(a=>a.tagName?.includes("-")).length>0}function ZT(t){if(!t)return;const e=sst(t.el);if(GC.has(e)&&e===t.labelEl||!e&&tw.has(t))return;const i=lst.bind(t);if(e){t.labelEl=e;const r=rT.get(e)||[];r.push(t),rT.set(e,r.sort(ZSe)),GC.has(t.labelEl)||(GC.set(t.labelEl,jle),t.labelEl.addEventListener(YSe,jle)),tw.delete(t),document.removeEventListener(ZN,GI.get(t)),Az.set(t,i),document.addEventListener(Mz,i)}else tw.has(t)||(i(),document.removeEventListener(Mz,Az.get(t)))}function XN(t){if(!t||(tw.delete(t),document.removeEventListener(ZN,GI.get(t)),document.removeEventListener(Mz,Az.get(t)),GI.delete(t),Az.delete(t),!t.labelEl))return;const e=rT.get(t.labelEl);e.length===1&&(t.labelEl.removeEventListener(YSe,GC.get(t.labelEl)),GC.delete(t.labelEl)),rT.set(t.labelEl,e.filter(i=>i!==t).sort(ZSe)),t.labelEl=null}function ZSe(t,e){return ZFe(t.el,e.el)?-1:1}function qI(t){return t.label||t.labelEl?.textContent?.trim()||""}function jle(t){const e=t.detail.sourceEvent.target,i=rT.get(this),r=i.find(a=>a.el===e);if(i.includes(r))return;const s=i[0];s.disabled||s.onLabelClick(t)}function ost(){tw.has(this)&&ZT(this)}function lst(){tw.add(this);const t=GI.get(this)||ost.bind(this);GI.set(this,t),document.addEventListener(ZN,t)}async function cst(t){if(await t.componentOnReady(),rT.has(t))return;const i=t.ownerDocument?.getElementById(t.for);i&&requestAnimationFrame(()=>{for(const r of tw)if(r.el===i){ZT(r);break}})}const Vl={buttonLoader:"calcite-button--loader",content:"content",contentSlotted:"content--slotted",icon:"icon",iconStart:"icon--start",iconEnd:"icon--end",loadingIn:"loading-in",loadingOut:"loading-out",iconStartEmpty:"icon-start-empty",iconEndEmpty:"icon-end-empty",buttonPadding:"button-padding",buttonPaddingShrunk:"button-padding--shrunk"},ust=St`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:inline-block;inline-size:auto;vertical-align:middle;border-radius:var(--calcite-button-corner-radius, var(--calcite-internal-button-corner-radius, 0))}:host a,:host button{--calcite-internal-button-content-margin: .5rem;--calcite-internal-button-padding-x: 7px;--calcite-internal-button-padding-y: 3px;position:relative;box-sizing:border-box;display:flex;block-size:100%;inline-size:100%;cursor:pointer;-webkit-user-select:none;user-select:none;appearance:none;align-items:center;justify-content:center;border-style:none;text-align:center;font-family:inherit;font-weight:var(--calcite-font-weight-normal);text-decoration-line:none;outline-color:transparent;box-shadow:var(--calcite-button-shadow, var(--calcite-shadow-none));background-color:var(--calcite-button-background-color, var(--calcite-internal-button-background-color, var(--calcite-color-transparent)));border-block-start-color:var(--calcite-button-border-color, var(--calcite-internal-button-border-block-start-color, var(--calcite-internal-button-border-color, var(--calcite-color-transparent))));border-block-end-color:var(--calcite-button-border-color, var(--calcite-internal-button-border-block-end-color, var(--calcite-internal-button-border-color, var(--calcite-color-transparent))));border-inline-start-color:var(--calcite-button-border-color, var(--calcite-internal-button-border-inline-start-color, var(--calcite-internal-button-border-color, var(--calcite-color-transparent))));border-inline-end-color:var(--calcite-button-border-color, var(--calcite-internal-button-border-inline-end-color, var(--calcite-internal-button-border-color, var(--calcite-color-transparent))));border-style:solid;border-width:var(--calcite-border-width-sm);border-radius:var(--calcite-button-corner-radius, var(--calcite-internal-button-corner-radius, 0));color:var(--calcite-button-text-color, var(--calcite-internal-button-text-color, currentColor));padding-block:var(--calcite-internal-button-padding-y);padding-inline:var(--calcite-internal-button-padding-x);transition:color var(--calcite-animation-timing) ease-in-out,background-color var(--calcite-animation-timing) ease-in-out,box-shadow var(--calcite-animation-timing) ease-in-out,outline-color var(--calcite-internal-animation-timing-fast) ease-in-out}:host a:hover,:host button:hover{text-decoration-line:none}:host a:focus,:host button:focus{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(var(--calcite-spacing-base) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}:host a span,:host button span{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}:host a calcite-loader,:host button calcite-loader{color:var(--calcite-button-loader-color, var(--calcite-internal-button-loader-color, var(--calcite-button-text-color, var(--calcite-internal-button-text-color))))}:host([round]){--calcite-internal-button-corner-radius: 50px}.content{margin-inline:var(--calcite-internal-button-content-margin)}.icon-start-empty .content{margin-inline-start:unset}.icon-end-empty .content{margin-inline-end:unset}:host([scale=m]) button,:host([scale=m]) a{--calcite-internal-button-content-margin: .75rem}:host([scale=l]) button,:host([scale=l]) a{--calcite-internal-button-content-margin: 1rem}:host([width=auto]){inline-size:auto}:host([width=half]){inline-size:50%}:host([width=full]){inline-size:100%}:host([alignment=center]:not([width=auto])) a,:host([alignment=center]:not([width=auto])) button{justify-content:center}:host([alignment=start]:not([width=auto])) a,:host([alignment=start]:not([width=auto])) button{justify-content:flex-start}:host([alignment=end]:not([width=auto])) a,:host([alignment=end]:not([width=auto])) button{justify-content:flex-end}:host([alignment*=space-between]:not([width=auto])) a,:host([alignment*=space-between]:not([width=auto])) button{justify-content:space-between}:host([alignment=icon-start-space-between]:not([width=auto])) .icon--start{margin-inline-end:auto}:host([alignment=icon-start-space-between]:not([width=auto])) a,:host([alignment=icon-start-space-between]:not([width=auto])) button{text-align:unset}:host([alignment=icon-end-space-between]:not([width=auto])) .icon--end{margin-inline-start:auto}:host([alignment=icon-end-space-between]:not([width=auto])) a,:host([alignment=icon-end-space-between]:not([width=auto])) button{text-align:unset}:host([alignment=center]) a:not(.content--slotted) .icon--start+.icon--end,:host([alignment=center]) button:not(.content--slotted) .icon--start+.icon--end{margin-inline-start:var(--calcite-internal-button-content-margin)}.icon--start,.icon--end{color:var(--calcite-button-icon-color, var(--calcite-icon-color, var(--calcite-ui-icon-color)))}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}@keyframes loader-in{0%{inline-size:0;opacity:0;transform:scale(.5)}to{inline-size:1em;opacity:1;transform:scale(1)}}@keyframes loader-out{0%{inline-size:1em;opacity:1;transform:scale(1)}to{inline-size:0;opacity:0;transform:scale(.5)}}.calcite-button--loader{display:flex}.calcite-button--loader calcite-loader{margin:0}:host([loading]) button.content--slotted .calcite-button--loader calcite-loader,:host([loading]) a.content--slotted .calcite-button--loader calcite-loader{margin-inline-end:var(--calcite-internal-button-content-margin)}:host([loading]) button:not(.content--slotted) .icon--start,:host([loading]) button:not(.content--slotted) .icon--end,:host([loading]) a:not(.content--slotted) .icon--start,:host([loading]) a:not(.content--slotted) .icon--end{display:none}:host([appearance]) button,:host([appearance]) a{--calcite-internal-button-border-color: var(--calcite-color-transparent);border-style:solid;border-width:var(--calcite-button-border-size, 1px)}:host([kind=brand]) button,:host([kind=brand]) a{--calcite-internal-button-text-color: var(--calcite-color-text-inverse);--calcite-internal-button-background-color: var(--calcite-color-brand);--calcite-internal-button-loader-color: var(--calcite-color-text-inverse)}:host([kind=brand]) button:hover,:host([kind=brand]) a:hover{--calcite-internal-button-background-color: var(--calcite-color-brand-hover)}:host([kind=brand]) button:active,:host([kind=brand]) a:active{--calcite-internal-button-background-color: var(--calcite-color-brand-press)}:host([kind=danger]) button,:host([kind=danger]) a{--calcite-internal-button-text-color: var(--calcite-color-text-inverse);--calcite-internal-button-background-color: var(--calcite-color-status-danger);--calcite-internal-button-loader-color: var(--calcite-color-text-inverse)}:host([kind=danger]) button:hover,:host([kind=danger]) a:hover{--calcite-internal-button-background-color: var(--calcite-color-status-danger-hover)}:host([kind=danger]) button:active,:host([kind=danger]) a:active{--calcite-internal-button-background-color: var(--calcite-color-status-danger-press)}:host([kind=neutral]) button,:host([kind=neutral]) a{--calcite-internal-button-text-color: var(--calcite-color-text-1);--calcite-internal-button-background-color: var(--calcite-color-foreground-3);--calcite-internal-button-loader-color: var(--calcite-color-text-1)}:host([kind=neutral]) button:hover,:host([kind=neutral]) a:hover{--calcite-internal-button-background-color: var(--calcite-color-foreground-2)}:host([kind=neutral]) button:active,:host([kind=neutral]) a:active{--calcite-internal-button-background-color: var(--calcite-color-foreground-1)}:host([kind=inverse]) button,:host([kind=inverse]) a{--calcite-internal-button-text-color: var(--calcite-color-text-inverse);--calcite-internal-button-background-color: var(--calcite-color-inverse);--calcite-internal-button-loader-color: var(--calcite-color-text-inverse)}:host([kind=inverse]) button:hover,:host([kind=inverse]) a:hover{--calcite-internal-button-background-color: var(--calcite-color-inverse-hover)}:host([kind=inverse]) button:active,:host([kind=inverse]) a:active{--calcite-internal-button-background-color: var(--calcite-color-inverse-press)}:host([appearance=outline-fill]) button,:host([appearance=outline-fill]) a{--calcite-internal-button-background-color: var(--calcite-color-foreground-1);border-style:solid;border-width:var(--calcite-button-border-size, 1px)}:host([appearance=outline-fill]) button:hover,:host([appearance=outline-fill]) a:hover{--calcite-internal-button-background-color: var(--calcite-color-foreground-2)}:host([appearance=outline-fill]) button:active,:host([appearance=outline-fill]) a:active{--calcite-internal-button-background-color: var(--calcite-color-foreground-3)}:host([appearance=outline-fill][kind=brand]) button,:host([appearance=outline-fill][kind=brand]) a{--calcite-internal-button-border-color: var(--calcite-color-brand);--calcite-internal-button-text-color: var(--calcite-color-brand);--calcite-internal-button-loader-color: var(--calcite-color-brand)}:host([appearance=outline-fill][kind=brand]) button:hover,:host([appearance=outline-fill][kind=brand]) a:hover{--calcite-internal-button-border-color: var(--calcite-color-brand-hover);--calcite-internal-button-text-color: var(--calcite-color-brand-hover)}:host([appearance=outline-fill][kind=brand]) button:focus,:host([appearance=outline-fill][kind=brand]) a:focus{--calcite-internal-button-border-color: var(--calcite-color-brand);--calcite-internal-button-text-color: var(--calcite-color-brand)}:host([appearance=outline-fill][kind=brand]) button:active,:host([appearance=outline-fill][kind=brand]) a:active{--calcite-internal-button-border-color: var(--calcite-color-brand-press);--calcite-internal-button-text-color: var(--calcite-color-brand-press)}:host([appearance=outline-fill][kind=brand]) button calcite-loader,:host([appearance=outline-fill][kind=brand]) a calcite-loader{--calcite-internal-button-loader-color: var(--calcite-color-brand)}:host([appearance=outline-fill][kind=danger]) button,:host([appearance=outline-fill][kind=danger]) a{--calcite-internal-button-border-color: var(--calcite-color-status-danger);--calcite-internal-button-text-color: var(--calcite-color-status-danger);--calcite-internal-button-loader-color: var(--calcite-color-status-danger)}:host([appearance=outline-fill][kind=danger]) button:hover,:host([appearance=outline-fill][kind=danger]) a:hover{--calcite-internal-button-border-color: var(--calcite-color-status-danger-hover);--calcite-internal-button-text-color: var(--calcite-color-status-danger-hover)}:host([appearance=outline-fill][kind=danger]) button:focus,:host([appearance=outline-fill][kind=danger]) a:focus{--calcite-internal-button-border-color: var(--calcite-color-status-danger);--calcite-internal-button-text-color: var(--calcite-color-status-danger)}:host([appearance=outline-fill][kind=danger]) button:active,:host([appearance=outline-fill][kind=danger]) a:active{--calcite-internal-button-border-color: var(--calcite-color-status-danger-press);--calcite-internal-button-text-color: var(--calcite-color-status-danger-press)}:host([appearance=outline-fill][kind=danger]) button calcite-loader,:host([appearance=outline-fill][kind=danger]) a calcite-loader{--calcite-internal-button-loader-color: var(--calcite-color-status-danger)}:host([appearance=outline-fill][kind=neutral]) button,:host([appearance=outline-fill][kind=neutral]) a{--calcite-internal-button-border-color: var(--calcite-color-border-1);--calcite-internal-button-text-color: var(--calcite-color-text-1);--calcite-internal-button-loader-color: var(--calcite-color-text-1)}:host([appearance=outline-fill][kind=neutral]) button:hover,:host([appearance=outline-fill][kind=neutral]) a:hover{--calcite-internal-button-border-color: var(--calcite-color-border-input)}:host([appearance=outline-fill][kind=neutral]) button:focus,:host([appearance=outline-fill][kind=neutral]) a:focus{--calcite-internal-button-border-color: var(--calcite-color-foreground-3)}:host([appearance=outline-fill][kind=neutral]) button:active,:host([appearance=outline-fill][kind=neutral]) a:active{--calcite-internal-button-border-color: var(--calcite-color-text-3)}:host([appearance=solid][kind=neutral]) button:hover,:host([appearance=solid][kind=neutral]) a:hover{--calcite-internal-button-background-color: var(--calcite-color-border-3)}:host([appearance=solid][kind=neutral]) button:active,:host([appearance=solid][kind=neutral]) a:active{--calcite-internal-button-background-color: var(--calcite-color-border-2)}:host([appearance=outline-fill][kind=inverse]) button,:host([appearance=outline-fill][kind=inverse]) a{--calcite-internal-button-text-color: var(--calcite-color-text-1);--calcite-internal-button-border-color: var(--calcite-color-inverse);--calcite-internal-button-loader-color: var(--calcite-color-text-1)}:host([appearance=outline-fill][kind=inverse]) button:hover,:host([appearance=outline-fill][kind=inverse]) a:hover{--calcite-internal-button-border-color: var(--calcite-color-inverse-hover)}:host([appearance=outline-fill][kind=inverse]) button:focus,:host([appearance=outline-fill][kind=inverse]) a:focus{--calcite-internal-button-border-color: var(--calcite-color-inverse)}:host([appearance=outline-fill][kind=inverse]) button:active,:host([appearance=outline-fill][kind=inverse]) a:active{--calcite-internal-button-border-color: var(--calcite-color-inverse-press)}:host([appearance=outline]) button,:host([appearance=outline]) a{--calcite-internal-button-background-color: var(--calcite-color-transparent);border-style:solid;border-width:var(--calcite-button-border-size, 1px)}:host([appearance=outline]) button:hover,:host([appearance=outline]) a:hover{--calcite-internal-button-background-color: var(--calcite-color-transparent-hover)}:host([appearance=outline]) button:active,:host([appearance=outline]) a:active{--calcite-internal-button-background-color: var(--calcite-color-transparent-press)}:host([appearance=outline][kind=brand]) button,:host([appearance=outline][kind=brand]) a{--calcite-internal-button-border-color: var(--calcite-color-brand);--calcite-internal-button-text-color: var(--calcite-color-brand);--calcite-internal-button-loader-color: var(--calcite-color-brand)}:host([appearance=outline][kind=brand]) button:hover,:host([appearance=outline][kind=brand]) a:hover{--calcite-internal-button-border-color: var(--calcite-color-brand-hover);--calcite-internal-button-text-color: var(--calcite-color-brand-hover)}:host([appearance=outline][kind=brand]) button:focus,:host([appearance=outline][kind=brand]) a:focus{--calcite-internal-button-border-color: var(--calcite-color-brand);--calcite-internal-button-text-color: var(--calcite-color-brand)}:host([appearance=outline][kind=brand]) button:active,:host([appearance=outline][kind=brand]) a:active{--calcite-internal-button-border-color: var(--calcite-color-brand-press);--calcite-internal-button-text-color: var(--calcite-color-brand-press)}:host([appearance=outline][kind=brand]) button calcite-loader,:host([appearance=outline][kind=brand]) a calcite-loader{--calcite-internal-button-loader-color: var(--calcite-color-brand)}:host([appearance=outline][kind=danger]) button,:host([appearance=outline][kind=danger]) a{--calcite-internal-button-border-color: var(--calcite-color-status-danger);--calcite-internal-button-text-color: var(--calcite-color-status-danger);--calcite-internal-button-loader-color: var(--calcite-color-status-danger)}:host([appearance=outline][kind=danger]) button:hover,:host([appearance=outline][kind=danger]) a:hover{--calcite-internal-button-border-color: var(--calcite-color-status-danger-hover);--calcite-internal-button-text-color: var(--calcite-color-status-danger-hover)}:host([appearance=outline][kind=danger]) button:focus,:host([appearance=outline][kind=danger]) a:focus{--calcite-internal-button-border-color: var(--calcite-color-status-danger);--calcite-internal-button-text-color: var(--calcite-color-status-danger)}:host([appearance=outline][kind=danger]) button:active,:host([appearance=outline][kind=danger]) a:active{--calcite-internal-button-border-color: var(--calcite-color-status-danger-press);--calcite-internal-button-text-color: var(--calcite-color-status-danger-press)}:host([appearance=outline][kind=danger]) button calcite-loader,:host([appearance=outline][kind=danger]) a calcite-loader{--calcite-internal-button-loader-color: var(--calcite-color-status-danger)}:host([appearance=outline][kind=neutral]) button,:host([appearance=outline][kind=neutral]) a{--calcite-internal-button-text-color: var(--calcite-color-text-1);--calcite-internal-button-border-color: var(--calcite-color-border-1);--calcite-internal-button-loader-color: var(--calcite-color-text-1)}:host([appearance=outline][kind=neutral]) button:hover,:host([appearance=outline][kind=neutral]) a:hover{--calcite-internal-button-border-color: var(--calcite-color-border-input)}:host([appearance=outline][kind=neutral]) button:focus,:host([appearance=outline][kind=neutral]) a:focus{--calcite-internal-button-border-color: var(--calcite-color-foreground-3)}:host([appearance=outline][kind=neutral]) button:active,:host([appearance=outline][kind=neutral]) a:active{--calcite-internal-button-border-color: var(--calcite-color-text-3)}:host([appearance=outline][kind=inverse]) button,:host([appearance=outline][kind=inverse]) a{--calcite-internal-button-text-color: var(--calcite-color-text-1);--calcite-internal-button-border-color: var(--calcite-color-inverse);--calcite-internal-button-loader-color: var(--calcite-color-text-1)}:host([appearance=outline][kind=inverse]) button:hover,:host([appearance=outline][kind=inverse]) a:hover{--calcite-internal-button-border-color: var(--calcite-color-inverse-hover)}:host([appearance=outline][kind=inverse]) button:focus,:host([appearance=outline][kind=inverse]) a:focus{--calcite-internal-button-border-color: var(--calcite-color-inverse)}:host([appearance=outline][kind=inverse]) button:active,:host([appearance=outline][kind=inverse]) a:active{--calcite-internal-button-border-color: var(--calcite-color-inverse-press)}:host([appearance=outline-fill][split-child=primary]) button,:host([appearance=outline][split-child=primary]) button,:host([appearance=outline-fill][split-child=primary]) a,:host([appearance=outline][split-child=primary]) a{border-inline-end-width:0;border-inline-start-width:1px}:host([appearance=outline-fill][split-child=secondary]) button,:host([appearance=outline][split-child=secondary]) button,:host([appearance=outline-fill][split-child=secondary]) a,:host([appearance=outline][split-child=secondary]) a{border-inline-start-width:0;border-inline-end-width:1px}:host([appearance=transparent]) button,:host([appearance=transparent]) a{--calcite-internal-button-background-color: var(--calcite-color-transparent)}:host([appearance=transparent]) button:hover,:host([appearance=transparent]) button:focus,:host([appearance=transparent]) a:hover,:host([appearance=transparent]) a:focus{--calcite-internal-button-background-color: var(--calcite-color-transparent-hover)}:host([appearance=transparent]) button:active,:host([appearance=transparent]) a:active{--calcite-internal-button-background-color: var(--calcite-color-transparent-press)}:host([appearance=transparent]:not(.enable-editing-button)) button,:host([appearance=transparent]:not(.enable-editing-button)) a{background-color:var(--calcite-color-transparent)}:host([appearance=transparent]:not(.enable-editing-button)) button:hover,:host([appearance=transparent]:not(.enable-editing-button)) a:hover{background-color:var(--calcite-color-transparent-hover)}:host([appearance=transparent]:not(.enable-editing-button)) button:active,:host([appearance=transparent]:not(.enable-editing-button)) a:active{background-color:var(--calcite-color-transparent-press)}:host([appearance=transparent][kind=brand]) button,:host([appearance=transparent][kind=brand]) a{--calcite-internal-button-text-color: var(--calcite-color-brand);--calcite-internal-button-loader-color: var(--calcite-color-brand)}:host([appearance=transparent][kind=brand]) button:hover,:host([appearance=transparent][kind=brand]) a:hover{--calcite-internal-button-text-color: var(--calcite-color-brand-hover)}:host([appearance=transparent][kind=brand]) button:focus,:host([appearance=transparent][kind=brand]) a:focus{--calcite-internal-button-text-color: var(--calcite-color-brand)}:host([appearance=transparent][kind=brand]) button:active,:host([appearance=transparent][kind=brand]) a:active{--calcite-internal-button-text-color: var(--calcite-color-brand-press)}:host([appearance=transparent][kind=brand]) button calcite-loader,:host([appearance=transparent][kind=brand]) a calcite-loader{--calcite-internal-button-loader-color: var(--calcite-color-brand)}:host([appearance=transparent][kind=danger]) button,:host([appearance=transparent][kind=danger]) a{--calcite-internal-button-text-color: var(--calcite-color-status-danger);--calcite-internal-button-loader-color: var(--calcite-color-status-danger)}:host([appearance=transparent][kind=danger]) button:hover,:host([appearance=transparent][kind=danger]) a:hover{--calcite-internal-button-text-color: var(--calcite-color-status-danger-hover)}:host([appearance=transparent][kind=danger]) button:focus,:host([appearance=transparent][kind=danger]) a:focus{--calcite-internal-button-text-color: var(--calcite-color-status-danger)}:host([appearance=transparent][kind=danger]) button:active,:host([appearance=transparent][kind=danger]) a:active{--calcite-internal-button-text-color: var(--calcite-color-status-danger-press)}:host([appearance=transparent][kind=danger]) button calcite-loader,:host([appearance=transparent][kind=danger]) a calcite-loader{--calcite-internal-button-loader-color: var(--calcite-color-status-danger)}:host([appearance=transparent][kind=neutral]:not(.cancel-editing-button)) button,:host([appearance=transparent][kind=neutral]:not(.cancel-editing-button)) a,:host([appearance=transparent][kind=neutral]:not(.cancel-editing-button)) calcite-loader{--calcite-internal-button-text-color: var(--calcite-color-text-1)}:host([appearance=transparent][kind=neutral].cancel-editing-button) button{--calcite-internal-button-text-color: var(--calcite-color-text-3)}:host([appearance=transparent][kind=neutral].cancel-editing-button) button:hover{--calcite-internal-button-text-color: var(--calcite-color-text-1);--calcite-internal-button-padding-y: 0}:host(.confirm-changes-button) button:focus,:host(.cancel-editing-button) button:focus,:host(.enable-editing-button) button:focus{outline-offset:-2px}:host([appearance=transparent][kind=inverse]) button:hover,:host([appearance=transparent][kind=inverse]) a:hover{background-color:var(--calcite-color-transparent-inverse-hover)}:host([appearance=transparent][kind=inverse]) button:active,:host([appearance=transparent][kind=inverse]) a:active{background-color:var(--calcite-color-transparent-inverse-press)}:host([appearance=transparent][kind=inverse]) button calcite-loader,:host([appearance=transparent][kind=inverse]) a calcite-loader{--calcite-internal-button-text-color: var(--calcite-color-text-inverse)}:host([scale=s]) button.content--slotted,:host([scale=s]) a.content--slotted{font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=s][appearance=transparent]) button.content--slotted,:host([scale=s][appearance=transparent]) a.content--slotted{--calcite-internal-button-padding-x: .5rem}:host([scale=s]) button,:host([scale=s]) a{--calcite-internal-button-padding-y: 3px}:host([scale=m]) button.content--slotted,:host([scale=m]) a.content--slotted{--calcite-internal-button-padding-x: 11px;font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale=m]) button,:host([scale=m]) a{--calcite-internal-button-padding-y: 7px}:host([scale=m][appearance=transparent]) button.content--slotted,:host([scale=m][appearance=transparent]) a.content--slotted{--calcite-internal-button-padding-x: .75rem}:host([scale=l]) button.content--slotted,:host([scale=l]) a.content--slotted{--calcite-internal-button-padding-x: 15px;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=l]) .button-padding{--calcite-internal-button-padding-x: 1rem;--calcite-internal-button-padding-y: 11px}:host([scale=l]) .button-padding--shrunk{--calcite-internal-button-padding-y: 9px}:host([scale=s]) button:not(.content--slotted),:host([scale=s]) a:not(.content--slotted){--calcite-internal-button-padding-x: .125rem;--calcite-internal-button-padding-y: 3px;inline-size:1.5rem;font-size:var(--calcite-font-size-0);line-height:1.25rem;min-block-size:1.5rem}:host([scale=m]) button:not(.content--slotted),:host([scale=m]) a:not(.content--slotted){--calcite-internal-button-padding-x: .125rem;--calcite-internal-button-padding-y: 7px;inline-size:2rem;font-size:var(--calcite-font-size-0);line-height:1.25rem;min-block-size:2rem}:host([scale=l]) button:not(.content--slotted),:host([scale=l]) a:not(.content--slotted){--calcite-internal-button-padding-x: .125rem;--calcite-internal-button-padding-y: 9px;inline-size:2.75rem;font-size:var(--calcite-font-size-0);line-height:1.25rem;min-block-size:2.75rem}:host(:is([scale=s],[scale=m],[scale=l])[width=full]) a:not(.content--slotted),:host(:is([scale=s],[scale=m],[scale=l])[width=full]) button:not(.content--slotted){inline-size:var(--calcite-container-size-content-fluid)}:host([scale=l][appearance=transparent]) button:not(.content--slotted),:host([scale=l][appearance=transparent]) a:not(.content--slotted){--calcite-internal-button-padding-y: .625rem}:host([scale=s][icon-start][icon-end]) button:not(.content--slotted),:host([scale=s][icon-start][icon-end]) a:not(.content--slotted){--calcite-internal-button-padding-x: 23px;block-size:1.5rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=s][icon-start][icon-end][appearance=transparent]) button:not(.content--slotted),:host([scale=s][icon-start][icon-end][appearance=transparent]) a:not(.content--slotted){--calcite-internal-button-padding-x: 1.5rem}:host([scale=m][icon-start][icon-end]) button:not(.content--slotted),:host([scale=m][icon-start][icon-end]) a:not(.content--slotted){--calcite-internal-button-padding-x: 2rem;block-size:2rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=m][icon-start][icon-end][appearance=transparent]) button:not(.content--slotted),:host([scale=m][icon-start][icon-end][appearance=transparent]) a:not(.content--slotted){--calcite-internal-button-padding-x: 33px}:host([scale=l][icon-start][icon-end]) button:not(.content--slotted),:host([scale=l][icon-start][icon-end]) a:not(.content--slotted){--calcite-internal-button-padding-x: 43px;block-size:2.75rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=l][icon-start][icon-end]) button:not(.content--slotted) .icon--start+.icon--end,:host([scale=l][icon-start][icon-end]) a:not(.content--slotted) .icon--start+.icon--end{margin-inline-start:1rem}:host([scale=l][icon-start][icon-end][appearance=transparent]) button:not(.content--slotted),:host([scale=l][icon-start][icon-end][appearance=transparent]) a:not(.content--slotted){--calcite-internal-button-padding-x: 2.75rem}:host([hidden]){display:none}[hidden]{display:none}`,q5=class q5 extends Et{constructor(){super(...arguments),this.attributeWatch=oZ(["aria-expanded"],this.handleGlobalAttributesChanged),this.contentRef=wr(),this.mutationObserver=ea("mutation",()=>this.updateHasContent()),this.resizeObserver=ea("resize",()=>this.setTooltipText()),this.focusSetter=pn()(this),this.messages=qn(),this.hasContent=!1,this.alignment="center",this.appearance="solid",this.disabled=!1,this.download=!1,this.kind="brand",this.loading=!1,this.round=!1,this.scale="m",this.splitChild=!1,this.type="button",this.width="auto"}async setFocus(e){return this.focusSetter(()=>this.childEl,e)}connectedCallback(){super.connectedCallback(),this.setupTextContentObserver(),ZT(this),this.formEl=YX(this)}async load(){this.updateHasContent()}updated(){ta(this)}loaded(){this.setTooltipText()}disconnectedCallback(){super.disconnectedCallback(),this.mutationObserver?.disconnect(),XN(this),this.resizeObserver?.disconnect(),this.formEl=null}handleGlobalAttributesChanged(){this.requestUpdate()}updateHasContent(){this.hasContent=HFe(this.el)}setupTextContentObserver(){this.mutationObserver?.observe(this.el,{childList:!0,subtree:!0})}onLabelClick(){this.handleClick(),this.setFocus()}handleClick(){const{type:e}=this;this.href||(e==="submit"?YN(this):e==="reset"&&qSe(this))}setTooltipText(){const{contentRef:{value:e}}=this;e&&(this.tooltipText=e.offsetWidth<e.scrollWidth&&this.el.innerText||null)}setChildEl(e){_I(this.resizeObserver,this.childEl,e),this.childEl=e}render(){const e=this.href?"a":"button",i=this.href?Qw`a`:Qw`button`,r=this.loading?J`<div class=${q(Vl.buttonLoader)}><calcite-loader class=${q(this.loading?Vl.loadingIn:Vl.loadingOut)} inline .label=${this.messages.loading} .scale=${this.scale==="l"?"m":"s"}></calcite-loader></div>`:null,n=!this.iconStart&&!this.iconEnd,s=J`<calcite-icon class=${q({[Vl.icon]:!0,[Vl.iconStart]:!0})} .flipRtl=${this.iconFlipRtl==="start"||this.iconFlipRtl==="both"} .icon=${this.iconStart} .scale=${Dr(this.scale)}></calcite-icon>`,a=J`<calcite-icon class=${q({[Vl.icon]:!0,[Vl.iconEnd]:!0})} .flipRtl=${this.iconFlipRtl==="end"||this.iconFlipRtl==="both"} .icon=${this.iconEnd} .scale=${Dr(this.scale)}></calcite-icon>`,o=J`<span class=${q(Vl.content)} ${zt(this.contentRef)}><slot></slot></span>`;return ia({disabled:this.disabled,children:GM`<${i} .ariaBusy=${this.loading} .ariaExpanded=${this.el.ariaExpanded?this.el.ariaExpanded:null} .ariaLabel=${this.loading?this.messages.loading:qI(this)} aria-live=polite class=${q({[Vl.buttonPadding]:n,[Vl.buttonPaddingShrunk]:!n,[Vl.contentSlotted]:this.hasContent,[Vl.iconStartEmpty]:!this.iconStart,[Vl.iconEndEmpty]:!this.iconEnd})} .disabled=${e==="button"?this.disabled:null} download=${(e==="a"?this.download===!0||this.download===""?"":this.download||null:null)??Xe} href=${(e==="a"&&this.href)??Xe} name=${(e==="button"&&this.name)??Xe} @click=${this.handleClick} rel=${(e==="a"&&this.rel)??Xe} tabindex=${(this.disabled?-1:null)??Xe} target=${(e==="a"&&this.target)??Xe} title=${this.tooltipText??Xe} type=${(e==="button"?this.type:null)??Xe} ${zt(this.setChildEl)}>${r}${this.iconStart?s:null}${this.hasContent?o:null}${this.iconEnd?a:null}</${i}>`})}};q5.properties={hasContent:[16,{},{state:!0}],tooltipText:[16,{},{state:!0}],alignment:[3,{},{reflect:!0}],appearance:[3,{},{reflect:!0}],disabled:[7,{},{reflect:!0,type:Boolean}],download:[3,{converter:Np},{reflect:!0}],form:[3,{},{reflect:!0}],href:[3,{},{reflect:!0}],iconEnd:[3,{},{reflect:!0}],iconFlipRtl:[3,{},{reflect:!0}],iconStart:[3,{},{reflect:!0}],kind:[3,{},{reflect:!0}],label:1,loading:[7,{},{reflect:!0,type:Boolean}],messageOverrides:[0,{},{attribute:!1}],name:[3,{},{reflect:!0}],rel:[3,{},{reflect:!0}],round:[7,{},{reflect:!0,type:Boolean}],scale:[3,{},{reflect:!0}],splitChild:[3,{},{reflect:!0}],target:[3,{},{reflect:!0}],type:[3,{},{reflect:!0}],width:[3,{},{reflect:!0}]},q5.styles=ust;let Pz=q5;$i("calcite-button",Pz);const mA=Object.freeze(Object.defineProperty({__proto__:null,Button:Pz},Symbol.toStringTag,{value:"Module"}));const XT=jye(Zye);const XSe=t=>dst(t);let JX=class extends UF{#e;constructor(e){super(e),this.setProvisionalExports(void 0)}hostConnected(){this.component.manager.loadedCalled&&UE(this.component)}hostLoad(){this.component.manager.destroyed}hostLoaded(){const{el:e}=this.component,i=e.shadowRoot?.firstElementChild??e.firstElementChild??void 0;e.childElem??=i,this.#e=as(()=>this.component.view!=null,()=>{this.component.arcgisReady.emit()},{once:!0,initial:!0,sync:!0}),e.isConnected&&UE(this.component)}hostDisconnected(){typeof this.component.el.childElem=="object"&&this.component.view?.ui?.remove(this.component.el.childElem),this.#e?.remove()}hostUpdate(e){e.has("position")&&this.component.el.childElem!=null&&typeof this.component.position=="string"&&UE(this.component),e.has("referenceElement")&&UE(this.component)}};const dst=HM(JX);const C2={base:"arcgis-zoom",button:"arcgis-button",horizontalLayout:"arcgis-zoom--horizontal",zoomIn:"arcgis-zoom__zoom-in",zoomOut:"arcgis-zoom__zoom-out"};function Vle(t){if(!t)return!1;if(t.type==="3d")return t.ready;if(!t?.ready)return!1;const e=JSe(t),i=t.constraints?.effectiveMaxScale;return i===0||e>i}function Ble(t){if(!t)return!1;if(t.type==="3d")return t.ready;if(!t?.ready)return!1;const e=JSe(t),i=t.constraints?.effectiveMinScale;return i===0||e<i}function JSe(t){const e=t?.animation?.target;return(e&&"then"in e?void 0:e?.scale)??t?.scale??0}const hst=St`.arcgis-button{--calcite-icon-color: var(--calcite-color-text-3);--calcite-button-background-color: var(--calcite-color-foreground-1);color:var(--calcite-color-text-3);line-height:var(--calcite-font-line-height-relative-tight);display:flex;flex-flow:column;cursor:pointer;background-color:var(--calcite-color-foreground-1);font-size:var(--calcite-font-size);:hover{--calcite-icon-color: var(--calcite-color-text-1);--calcite-button-background-color: var(--calcite-color-transparent-hover)}calcite-button{width:var(--calcite-spacing-xxxl);height:var(--calcite-spacing-xxxl)}}:host{display:flex;max-width:fit-content}.arcgis-zoom__zoom-out{border-block-start:solid 1px var(--calcite-color-border-1)}.arcgis-zoom--horizontal{flex-flow:row-reverse nowrap}.arcgis-zoom--horizontal .arcgis-zoom__zoom-out{border-block-start:none;border-inline-end:solid 1px var(--calcite-color-border-1)}`;var pw;let pst=(pw=class extends Et{constructor(){super(...arguments),this.messages=XT({}),this.view=XSe(this),this.autoDestroyDisabled=!1,this.icon="magnifying-glass-plus",this.layout="vertical",this.state="disabled",this.arcgisPropertyChange=w_()("state"),this.arcgisReady=Re()}async destroy(){await this.manager.destroy()}async zoomIn(){const{view:e}=this;!Vle(e)||!e||(e.type==="2d"?e.mapViewNavigation.zoomIn():_v(e.goTo({zoomFactor:2})))}async zoomOut(){const{view:e}=this;!Ble(e)||!e||(e.type==="2d"?e.mapViewNavigation.zoomOut():_v(e.goTo({zoomFactor:.5})))}loaded(){this.manager.onLifecycle(()=>[as(()=>this.view?.ready?"ready":"disabled",e=>{this.state=e},{sync:!0,initial:!0})])}render(){const e={[C2.horizontalLayout]:this.layout==="horizontal"},i=Vle(this.view),r=Ble(this.view),{zoomIn:n,zoomOut:s}=this.messages;return J`<div class=${q(Ui(C2.base,C2.button,e))}><calcite-button class=${q(Ui(C2.zoomIn))} .disabled=${!i} icon-start=plus kind=neutral .label=${n} @click=${this.zoomIn} title=${n??De}></calcite-button><calcite-button class=${q(Ui(C2.zoomOut))} .disabled=${!r} icon-start=minus kind=neutral .label=${s} @click=${this.zoomOut} title=${s??De}></calcite-button></div>`}},pw.properties={view:0,autoDestroyDisabled:5,icon:1,label:1,layout:3,messageOverrides:0,position:1,referenceElement:1,state:3},pw.styles=hst,pw);nn("arcgis-zoom",pst);const fst=St`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{position:relative;display:block;inline-size:100%}.track,.bar{position:absolute;inset-block-start:0px;block-size:2px}.track{z-index:var(--calcite-z-index);inline-size:100%;overflow:hidden;background-color:var(--calcite-progress-background-color, var(--calcite-color-border-3))}.bar{z-index:var(--calcite-z-index);background-color:var(--calcite-progress-fill-color, var(--calcite-color-brand))}@media (forced-colors: active){.track{background-color:highlightText}.bar{background-color:linkText}}.indeterminate{inline-size:20%;animation:looping-progress-bar-ani calc(var(--calcite-internal-animation-timing-medium) / var(--calcite-internal-duration-factor) * 11 / var(--calcite-internal-duration-factor)) linear infinite}.indeterminate.calcite--rtl{animation-name:looping-progress-bar-ani-rtl}.reversed{animation-direction:reverse}.text{padding-inline:0px;padding-block:1rem 0px;text-align:center;font-size:var(--calcite-font-size--2);line-height:1rem;font-weight:var(--calcite-font-weight-medium);color:var(--calcite-progress-text-color, var(--calcite-color-text-2))}@keyframes looping-progress-bar-ani{0%{transform:translate3d(-100%,0,0)}50%{inline-size:40%}to{transform:translate3d(600%,0,0)}}@keyframes looping-progress-bar-ani-rtl{0%{transform:translate3d(100%,0,0)}50%{inline-size:40%}to{transform:translate3d(-600%,0,0)}}:host([hidden]){display:none}[hidden]{display:none}`,FB={track:"track",bar:"bar",text:"text"},W5=class W5 extends Et{constructor(){super(...arguments),this.reversed=!1,this.type="determinate",this.value=0}render(){const e=this.type==="determinate",i=e?{width:`${this.value}%`}:{},r=jo(this.el);return J`<div .ariaLabel=${this.label||this.text} .ariaValueMax=${e?"100":void 0} .ariaValueMin=${e?"0":void 0} .ariaValueNow=${e?this.value:void 0} role=progressbar><div class=${q(FB.track)}><div class=${q({[FB.bar]:!0,indeterminate:this.type==="indeterminate",[Uh.rtl]:r==="rtl",reversed:this.reversed})} style=${Kt(i)}></div></div>${this.text?J`<div class=${q(FB.text)}>${this.text}</div>`:null}</div>`}};W5.properties={label:1,reversed:[7,{},{reflect:!0,type:Boolean}],text:1,type:[3,{},{reflect:!0}],value:[9,{},{type:Number}]},W5.styles=fst;let fq=W5;$i("calcite-progress",fq);const Ule=(t,e,i)=>{const r=new Map;for(let n=e;n<=i;n++)r.set(t[n],n);return r},KSe=RT(class extends zT{constructor(t){if(super(t),t.type!==Bh.CHILD)throw Error("repeat() can only be used in text expressions")}dt(t,e,i){let r;i===void 0?i=e:e!==void 0&&(r=e);const n=[],s=[];let a=0;for(const o of t)n[a]=r?r(o,a):a,s[a]=i(o,a),a++;return{values:s,keys:n}}render(t,e,i){return this.dt(t,e,i).values}update(t,[e,i,r]){const n=hze(t),{values:s,keys:a}=this.dt(e,i,r);if(!Array.isArray(n))return this.ut=a,s;const o=this.ut??=[],l=[];let c,h,f=0,g=n.length-1,y=0,b=s.length-1;for(;f<=g&&y<=b;)if(n[f]===null)f++;else if(n[g]===null)g--;else if(o[f]===a[y])l[y]=$b(n[f],s[y]),f++,y++;else if(o[g]===a[b])l[b]=$b(n[g],s[b]),g--,b--;else if(o[f]===a[b])l[b]=$b(n[f],s[b]),u2(t,l[b+1],n[f]),f++,b--;else if(o[g]===a[y])l[y]=$b(n[g],s[y]),u2(t,n[f],n[g]),g--,y++;else if(c===void 0&&(c=Ule(a,y,b),h=Ule(o,f,g)),c.has(o[f]))if(c.has(o[g])){const _=h.get(a[y]),S=_!==void 0?n[_]:null;if(S===null){const $=u2(t,n[f]);$b($,s[y]),l[y]=$}else l[y]=$b(S,s[y]),u2(t,n[f],S),n[_]=null;y++}else r6(n[g]),g--;else r6(n[f]),f++;for(;y<=b;){const _=u2(t,l[b+1]);$b(_,s[y]),l[y++]=_}for(;f<=g;){const _=n[f++];_!==null&&r6(_)}return this.ut=a,ZY(t,l),vc}});const mst={max:"320px"},gst={max:"476px"},yst={max:"768px"};const NB={width:{small:jB(yst.max),xsmall:jB(gst.max),xxsmall:jB(mst.max)}};function jB(t){return parseInt(t)}function nT(t,e){return(t+e)%e}const vst=6e3,In={container:"container",containerOverlaid:"container--overlaid",containerEdged:"container--edged",itemContainer:"item-container",itemContainerForward:"item-container--forward",itemContainerBackward:"item-container--backward",pagination:"pagination",paginationItems:"pagination-items",paginationItem:"pagination-item",paginationItemIndividual:"pagination-item--individual",paginationItemVisible:"pagination-item--visible",paginationItemOutOfRange:"pagination-item--out-of-range",paginationItemSelected:"pagination-item--selected",paginationItemRangeEdge:"pagination-item--range-edge",pageNext:"page-next",pagePrevious:"page-previous",autoplayControl:"autoplay-control",autoplayProgress:"autoplay-progress"},j1={chevronLeft:"chevron-left",chevronRight:"chevron-right",inactive:"bullet-point",active:"bullet-point-large",pause:"pause-f",play:"play-f"},I2={medium:7,small:5,xsmall:3,xxsmall:1},bst="calcite-carousel-container",wst={host:t=>`${bst}-${t}`},_st=St`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:flex;inline-size:100%;--calcite-internal-carousel-pagination-space: 1.5rem;--calcite-internal-carousel-pagination-space-wide: 3.5rem;--calcite-internal-carousel-pagination-background-color: var( --calcite-carousel-pagination-background-color, transparent );--calcite-internal-carousel-pagination-background-color-hover: var( --calcite-carousel-pagination-background-color-hover, transparent );--calcite-internal-carousel-pagination-background-color-press: var( --calcite-carousel-pagination-background-color-press, transparent );--calcite-internal-carousel-pagination-background-color-selected: var( --calcite-carousel-pagination-background-color-selected, transparent );--calcite-internal-carousel-pagination-overlay-background-color: var( --calcite-carousel-pagination-background-color, var(--calcite-color-foreground-1) );--calcite-internal-carousel-pagination-overlay-background-color-hover: var( --calcite-carousel-pagination-background-color-hover, var(--calcite-color-foreground-2) );--calcite-internal-carousel-pagination-overlay-background-color-active: var( --calcite-carousel-pagination-background-color-press, var(--calcite-color-foreground-2) );--calcite-internal-carousel-pagination-overlay-background-color-selected: var( --calcite-carousel-pagination-background-color-selected, var(--calcite-color-foreground-1) );--calcite-internal-carousel-pagination-icon-color-hover: var( --calcite-carousel-pagination-icon-color-hover, var(--calcite-color-text-1) );--calcite-internal-carousel-pagination-icon-color: var( --calcite-carousel-pagination-icon-color, var(--calcite-color-border-1) );--calcite-internal-carousel-pagination-icon-color-selected: var( --calcite-carousel-pagination-icon-color-selected, var(--calcite-color-brand) );--calcite-internal-carousel-control-icon-color-hover: var( --calcite-carousel-control-icon-color-hover, var(--calcite-internal-carousel-pagination-icon-color-hover) );--calcite-internal-carousel-control-icon-color: var( --calcite-carousel-control-icon-color, var(--calcite-carousel-pagination-icon-color, var(--calcite-color-text-3)) );--calcite-internal-carousel-autoplay-progress-background-color: var( --calcite-carousel-autoplay-progress-background-color, var(--calcite-color-border-3) );--calcite-internal-carousel-autoplay-progress-fill-color: var( --calcite-carousel-autoplay-progress-fill-color, var(--calcite-color-brand) );--calcite-internal-carousel-autoplay-control-color: var( --calcite-carousel-pagination-icon-color, var(--calcite-color-text-3) )}.container{position:relative;display:flex;inline-size:100%;flex-direction:column;overflow:hidden;font-size:var(--calcite-font-size--1);line-height:1rem;color:var(--calcite-color-text-2);outline-color:transparent}.container:focus{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(calc(-1 * var(--calcite-spacing-base)) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}.container--edged:not(.container--overlaid){padding-inline:var(--calcite-internal-carousel-pagination-space-wide);inline-size:calc(100% - var(--calcite-internal-carousel-pagination-space-wide) * 2)}.item-container{display:flex;flex:1 1 auto;align-items:flex-start;justify-content:center;overflow:auto;padding:.25rem;animation-name:none;animation-duration:var(--calcite-animation-timing)}.container--overlaid .item-container{padding:0}.item-container--forward{animation-name:item-forward}.item-container--backward{animation-name:item-backward}calcite-carousel-item:not([selected]){opacity:0}.pagination{margin:.75rem;display:flex;flex-direction:row;align-items:center;justify-content:center;inline-size:auto}.pagination-items{display:flex;flex-direction:row;align-items:center}.container--overlaid .pagination{position:absolute}.pagination-item.page-next,.pagination-item.page-previous{color:var(--calcite-internal-carousel-control-icon-color);--calcite-icon-color: var(--calcite-internal-carousel-control-icon-color)}.pagination-item.page-next:hover,.pagination-item.page-previous:hover{color:var(--calcite-internal-carousel-control-icon-color-hover);--calcite-icon-color: var(--calcite-internal-carousel-control-icon-color-hover)}.container--edged .page-next,.container--edged .page-previous{block-size:3rem;inline-size:3rem;position:absolute;inset-block-start:50%;transform:translateY(-50%)}.container--edged .page-next{inset-inline-end:0}.container--edged .page-previous{inset-inline-start:0}.container--overlaid .pagination{inset-block-start:unset;inset-block-end:0;inset-inline:0}.pagination-item.autoplay-control{position:relative;color:var(--calcite-internal-carousel-autoplay-control-color);--calcite-progress-fill-color: var(--calcite-internal-carousel-autoplay-progress-fill-color);--calcite-progress-background-color: var(--calcite-internal-carousel-autoplay-progress-background-color)}.autoplay-control:focus .autoplay-progress{inset-block-end:4px;inset-inline:2px;inline-size:calc(100% - 4px)}.autoplay-progress{position:absolute;inset-block-end:2px;inset-inline:0;inline-size:100%}.pagination-item{margin:0;block-size:2rem;inline-size:2rem;cursor:pointer;align-items:center;border-style:none;background-color:transparent;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;outline-color:transparent;-webkit-appearance:none;display:flex;align-content:center;justify-content:center;background-color:var(--calcite-internal-carousel-pagination-background-color);color:var(--calcite-internal-carousel-pagination-icon-color)}.pagination-item:hover{background-color:var(--calcite-internal-carousel-pagination-background-color-hover);color:var(--calcite-internal-carousel-pagination-icon-color-hover)}.pagination-item:focus{background-color:var(--calcite-internal-carousel-pagination-background-color-press);outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(calc(-1 * var(--calcite-spacing-base)) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}.pagination-item:active{background-color:var(--calcite-internal-carousel-pagination-background-color-press);color:var(--calcite-internal-carousel-pagination-icon-color-hover)}.pagination-item calcite-icon{color:inherit;pointer-events:none}.pagination-item.pagination-item--selected{background-color:var(--calcite-internal-carousel-pagination-background-color-selected);color:var(--calcite-internal-carousel-pagination-icon-color-selected)}.pagination-item--individual{pointer-events:none;inline-size:0px;padding:0;opacity:0;visibility:hidden;transition:var(--calcite-animation-timing) ease-in-out inline-size,var(--calcite-animation-timing) ease-in-out padding,var(--calcite-animation-timing) ease-in-out opacity}.pagination-item--individual.pagination-item--visible{pointer-events:auto;inline-size:2rem;opacity:1;visibility:visible}.pagination-item--range-edge calcite-icon{scale:.75;transition:var(--calcite-animation-timing) ease-in-out scale}.container--overlaid .pagination-item{background-color:var(--calcite-internal-carousel-pagination-overlay-background-color)}.container--overlaid .pagination-item:hover{background-color:var(--calcite-internal-carousel-pagination-overlay-background-color-hover)}.container--overlaid .pagination-item:focus{background-color:var(--calcite-internal-carousel-pagination-overlay-background-color-active)}.container--overlaid .pagination-item:active{background-color:var(--calcite-internal-carousel-pagination-overlay-background-color-active)}.container--overlaid .pagination-item.pagination-item--selected{background-color:var(--calcite-internal-carousel-pagination-overlay-background-color-selected);color:var(--calcite-internal-carousel-pagination-icon-color-selected)}@keyframes item-forward{0%{transform:translate3d(100px,0,0)}to{transform:translateZ(0)}}@keyframes item-backward{0%{transform:translate3d(-100px,0,0)}to{transform:translateZ(0)}}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}:host([hidden]){display:none}[hidden]{display:none}`,Y5=class Y5 extends Et{constructor(){super(...arguments),this.autoplayHandler=()=>{this.clearIntervals(),this.slideDurationInterval=setInterval(this.timer,this.autoplayDuration/100)},this.containerRef=wr(),this.containerId=wst.host(Vd()),this.itemContainerRef=wr(),this.resizeHandler=({contentRect:{width:e}})=>{this.setMaxItemsToBreakpoint(e)},this.resizeObserver=ea("resize",e=>e.forEach(this.resizeHandler)),this.slideDurationInterval=null,this.slideInterval=null,this.tabListRef=wr(),this.timer=()=>{let e=this.slideDurationRemaining;(!this.suspendedDueToFocus&&!this.suspendedDueToHover||this.userPreventsSuspend)&&(e<=.01?(e=1,this.direction="forward",this.nextItem(!1)):e=e-.01),e>0&&(this.slideDurationRemaining=e)},this.messages=qn(),this.focusSetter=pn()(this),this.direction="standby",this.items=[],this.maxItems=I2.xxsmall,this.playing=!1,this.slideDurationRemaining=1,this.suspendedDueToFocus=!1,this.suspendedDueToHover=!1,this.suspendedSlideDurationRemaining=1,this.userPreventsSuspend=!1,this.arrowType="inline",this.autoplay=!1,this.autoplayDuration=vst,this.controlOverlay=!1,this.disabled=!1,this.calciteCarouselChange=Re({cancelable:!1}),this.calciteCarouselPause=Re({cancelable:!1}),this.calciteCarouselPlay=Re({cancelable:!1}),this.calciteCarouselResume=Re({cancelable:!1}),this.calciteCarouselStop=Re({cancelable:!1})}async play(){this.playing||this.autoplay!==""&&!this.autoplay&&this.autoplay!=="paused"||this.handlePlay(!0)}async setFocus(e){return this.focusSetter(()=>this.containerRef.value,e)}async stop(){this.playing&&this.handlePause(!0)}connectedCallback(){super.connectedCallback(),this.resizeObserver?.observe(this.el)}async load(){(this.autoplay===""||this.autoplay)&&this.autoplay!=="paused"?this.handlePlay(!1):this.autoplay==="paused"&&(this.paused=!0)}willUpdate(e){e.has("autoplay")&&this.hasUpdated&&this.autoplayWatcher(this.autoplay),e.has("direction")&&(this.hasUpdated||this.direction!=="standby")&&this.directionWatcher(this.direction),e.has("playing")&&(this.hasUpdated||this.playing!==!1)&&(this.paused=!this.playing),(e.has("suspendedDueToFocus")&&(this.hasUpdated||this.suspendedDueToFocus!==!1)||e.has("suspendedDueToHover")&&(this.hasUpdated||this.suspendedDueToHover!==!1))&&this.suspendWatcher()}updated(){ta(this)}disconnectedCallback(){super.disconnectedCallback(),this.clearIntervals(),this.resizeObserver?.disconnect()}autoplayWatcher(e){e||this.handlePause(!1)}async directionWatcher(e){e==="standby"||!this.itemContainerRef.value||(await XFe(this.itemContainerRef.value,e==="forward"?"item-forward":"item-backward"),this.direction="standby")}suspendWatcher(){!this.suspendedDueToFocus&&!this.suspendedDueToHover?this.suspendEnd():this.suspendStart()}setMaxItemsToBreakpoint(e){if(e){if(e>=NB.width.small){this.maxItems=I2.medium;return}if(e>=NB.width.xsmall){this.maxItems=I2.small;return}if(e>=NB.width.xxsmall){this.maxItems=I2.xsmall;return}this.maxItems=I2.xxsmall}}clearIntervals(){clearInterval(this.slideDurationInterval),clearInterval(this.slideInterval)}nextItem(e){this.playing&&e&&(this.playing=!1);const i=nT(this.selectedIndex+1,this.items.length);this.setSelectedItem(i,e)}previousItem(){this.playing=!1;const e=nT(Math.max(this.selectedIndex-1,-1),this.items.length);this.setSelectedItem(e,!0)}handlePlay(e){this.playing=!0,this.autoplayHandler(),this.slideInterval=setInterval(this.autoplayHandler,this.autoplayDuration),e&&this.calciteCarouselPlay.emit()}handlePause(e){this.playing=!1,this.clearIntervals(),this.slideDurationRemaining=1,this.suspendedSlideDurationRemaining=1,e&&this.calciteCarouselStop.emit()}suspendStart(){this.suspendedSlideDurationRemaining=this.slideDurationRemaining}suspendEnd(){this.slideDurationRemaining=this.suspendedSlideDurationRemaining}handleSlotChange(e){const i=Md(e);if(i.length<1)return;const r=i.findIndex(s=>s.selected),n=r>-1?r:0;this.items=i,this.setSelectedItem(n,!1)}setSelectedItem(e,i){const r=this.selectedIndex;this.items.forEach((n,s)=>{const a=e===s;n.selected=a,a&&(this.selectedItem=n,this.selectedIndex=s)}),i&&(this.playing=!1,r!==this.selectedIndex&&this.calciteCarouselChange.emit())}handleArrowClick(e){const i=e.target.dataset.direction;this.playing&&this.handlePause(!0),i==="next"?(this.direction="forward",this.nextItem(!0)):i==="previous"&&(this.direction="backward",this.previousItem())}handleItemSelection(e){const i=e.target,r=parseInt(i.dataset.index);r!==this.selectedIndex&&(this.playing&&this.handlePause(!0),this.direction=r>this.selectedIndex?"forward":"backward",this.setSelectedItem(r,!0))}toggleRotation(){this.userPreventsSuspend=!0,this.playing?this.handlePause(!0):this.handlePlay(!0)}handleFocusIn(){const e=this.playing;e&&(this.suspendedDueToFocus=!0),(!this.suspendedDueToFocus||!this.suspendedDueToHover)&&e&&this.calciteCarouselPause.emit()}handleMouseIn(){const e=this.playing;e&&(this.suspendedDueToHover=!0),(!this.suspendedDueToFocus||!this.suspendedDueToHover)&&e&&this.calciteCarouselPause.emit()}handleMouseOut(e){const i=!this.el.contains(e.relatedTarget),r=this.playing;i&&r&&(this.suspendedDueToHover=!1),i&&r&&!this.suspendedDueToFocus&&(this.userPreventsSuspend=!1,this.calciteCarouselResume.emit())}handleFocusOut(e){const i=!e.composedPath().includes(e.relatedTarget),r=this.playing;i&&r&&(this.suspendedDueToFocus=!1),i&&r&&!this.suspendedDueToHover&&(this.userPreventsSuspend=!1,this.calciteCarouselResume.emit())}containerKeyDownHandler(e){if(e.target!==this.containerRef.value)return;const i=this.items.length-1;switch(e.key){case" ":case"Enter":e.preventDefault(),(this.autoplay===""||this.autoplay||this.autoplay==="paused")&&this.toggleRotation();break;case"ArrowRight":e.preventDefault(),this.direction="forward",this.nextItem(!0);break;case"ArrowLeft":e.preventDefault(),this.direction="backward",this.previousItem();break;case"Home":if(e.preventDefault(),this.selectedIndex===0)return;this.direction="backward",this.setSelectedItem(0,!0);break;case"End":if(e.preventDefault(),this.selectedIndex===i)return;this.direction="forward",this.setSelectedItem(i,!0);break}}tabListKeyDownHandler(e){const i=Array(...this.tabListRef.value.querySelectorAll(`button:not(.${In.paginationItemOutOfRange})`)),r=e.target;switch(e.key){case"ArrowRight":Jy(i,r,"next");break;case"ArrowLeft":Jy(i,r,"previous");break;case"Home":e.preventDefault(),Jy(i,r,"first");break;case"End":e.preventDefault(),Jy(i,r,"last");break}}renderRotationControl(){const e=this.playing?this.messages.pause:this.messages.play,i=this.slideDurationRemaining*100;return J`<button .ariaLabel=${e} class=${q({[In.paginationItem]:!0,[In.autoplayControl]:!0})} @click=${this.toggleRotation} title=${e??Xe}><calcite-icon .icon=${this.playing?j1.pause:j1.play} scale=s></calcite-icon>${this.playing&&J`<calcite-progress class=${q(In.autoplayProgress)} .label=${this.messages.carouselItemProgress} .value=${i}></calcite-progress>`||""}</button>`}renderPaginationArea(){return J`<div class=${q({[In.pagination]:!0,[In.containerOverlaid]:this.controlOverlay})} @keydown=${this.tabListKeyDownHandler} ${zt(this.tabListRef)}>${(this.playing||this.autoplay===""||this.autoplay||this.autoplay==="paused")&&this.renderRotationControl()||""}${this.arrowType==="inline"&&this.renderArrow("previous")||""}${this.renderPaginationItems()}${this.arrowType==="inline"&&this.renderArrow("next")||""}</div>`}renderPaginationItems(){const{selectedIndex:e,maxItems:i,items:r,label:n,handleItemSelection:s}=this;return J`<div .ariaLabel=${n} class=${q(In.paginationItems)} role=tablist>${KSe(r,a=>a.id,(a,o)=>{const l=r.length,c=o===e,h=o===0,f=o===l-1,g=l-i-1,y=e<i,b=e>=g,_=y?0:e-Math.floor(i/2),S=b?l:_+i,$=y?0:b?g:_,C=y?i+1:S,I=!h&&!f&&!c&&(o===$-1||o===C),P=c||o<=C&&o>=$-1,O=l-1<=i,N=c?j1.active:j1.inactive;return J`<button aria-controls=${(c?void 0:a.id)??Xe} .ariaSelected=${c} class=${q({[In.paginationItem]:!0,[In.paginationItemIndividual]:!0,[In.paginationItemSelected]:c,[In.paginationItemRangeEdge]:l-1>i&&I,[In.paginationItemOutOfRange]:!(O||P),[In.paginationItemVisible]:O||P})} data-index=${o??Xe} @click=${s} role=tab title=${a.label??Xe}><calcite-icon .icon=${N} scale=l></calcite-icon></button>`})}</div>`}renderArrow(e){const i=e==="previous",r=jo(this.el),n=this.arrowType==="edge"?"m":"s",s=i?In.pagePrevious:In.pageNext,a=i?this.messages.previous:this.messages.next,o=i?j1.chevronLeft:j1.chevronRight;return J`<button aria-controls=${this.containerId??Xe} class=${q({[In.paginationItem]:!0,[s]:!0})} data-direction=${e??Xe} @click=${this.handleArrowClick} title=${a??Xe}><calcite-icon .flipRtl=${r==="rtl"} .icon=${o} .scale=${n}></calcite-icon></button>`}render(){const{direction:e}=this;return ia({disabled:this.disabled,children:J`<div .ariaLabel=${this.label} .ariaLive=${this.playing?"off":"polite"} .ariaRoleDescription=${this.messages.carousel} class=${q({[In.container]:!0,[In.containerOverlaid]:this.controlOverlay,[In.containerEdged]:this.arrowType==="edge"})} @focusin=${this.handleFocusIn} @focusout=${this.handleFocusOut} @keydown=${this.containerKeyDownHandler} @mouseenter=${this.handleMouseIn} @mouseleave=${this.handleMouseOut} role=group tabindex=0 ${zt(this.containerRef)}><section class=${q({[In.itemContainer]:!0,[In.itemContainerForward]:e==="forward",[In.itemContainerBackward]:e==="backward"})} id=${this.containerId??Xe} ${zt(this.itemContainerRef)}><slot @slotchange=${this.handleSlotChange}></slot></section>${this.items.length>1&&this.renderPaginationArea()||""}${this.arrowType==="edge"&&this.renderArrow("previous")||""}${this.arrowType==="edge"&&this.renderArrow("next")||""}</div>`})}};Y5.properties={direction:[16,{},{state:!0}],items:[16,{},{state:!0}],maxItems:[16,{},{state:!0}],playing:[16,{},{state:!0}],selectedIndex:[16,{},{state:!0}],slideDurationRemaining:[16,{},{state:!0}],suspendedDueToFocus:[16,{},{state:!0}],suspendedDueToHover:[16,{},{state:!0}],suspendedSlideDurationRemaining:[16,{},{state:!0}],userPreventsSuspend:[16,{},{state:!0}],arrowType:[3,{},{reflect:!0}],autoplay:[3,{},{reflect:!0}],autoplayDuration:[11,{},{type:Number,reflect:!0}],controlOverlay:[7,{},{reflect:!0,type:Boolean}],disabled:[7,{},{reflect:!0,type:Boolean}],label:1,messageOverrides:[0,{},{attribute:!1}],paused:[5,{},{type:Boolean}],selectedItem:[0,{},{attribute:!1}]},Y5.styles=_st;let Oz=Y5;$i("calcite-carousel",Oz);const FRt=Object.freeze(Object.defineProperty({__proto__:null,Carousel:Oz},Symbol.toStringTag,{value:"Module"}));const Hle={container:"container",selected:"selected"},xst="calcite-carousel-item",Sst={host:t=>`${xst}-${t}`},$st=St`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{display:flex}.container{display:none;inline-size:var(--calcite-container-size-content-fluid)}:host([selected]) .container{display:block}:host([hidden]){display:none}[hidden]{display:none}`,Z5=class Z5 extends Et{constructor(){super(...arguments),this.guid=Sst.host(Vd()),this.selected=!1}render(){const e=this.el.id||this.guid;return FT(this.el,"id",e),J`<div .ariaLabel=${this.label} class=${q({[Hle.container]:!0,[Hle.selected]:this.selected})} role=tabpanel><slot></slot></div>`}};Z5.properties={label:1,selected:[7,{},{reflect:!0,type:Boolean}]},Z5.styles=$st;let Lz=Z5;$i("calcite-carousel-item",Lz);const NRt=Object.freeze(Object.defineProperty({__proto__:null,CarouselItem:Lz},Symbol.toStringTag,{value:"Module"}));function Tst(t){return lMe(t)}function kst(t,e){return e}function Um(t,e,i){if(!e)return;if(typeof e=="number")return e;if(typeof e=="string")return Tst(e);if("value"in e||"unit"in e)return Fp(t.dotValue??"",e);if("colorName"in e&&"bandName"in e){const n=t[e.colorName],s=t[e.bandName]||e.bandName;return`${n}: ${s}`}if("showCount"in e)return e.showCount?t.clusterCountTitle:void 0;let r=null;return kst(e,i)?r=e.ratioPercentTotal?"showRatioPercentTotal":e.ratioPercent?"showRatioPercent":e.ratio?"showRatio":e.normField?"showNormField":e.field?"showField":null:QSe(e,i)&&(r=e.normField?"showNormField":e.normByPct?"showNormPct":e.field?"showField":null),r?Fp(r==="showField"?"{field}":t[r]??"",{field:e.field,normField:e.normField}):void 0}function QSe(t,e){return!e}function e$e(t,e){if(!t.title||typeof t.title=="string")return t.title;const i=t.type==="color-ramp"||t.type==="opacity-ramp",r=t.title,n=Um(e,r,i);return QSe(r,i)&&r.title?`${r.title} (${n})`:n}const Est=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/iu;function t$e(t,e,i){switch(e){case"heatmap-ramp":return(i[t.label]||t.label)??null;case"stretch-ramp":const r="value"in t?t.value:void 0,n=t.label?i[t.label]:"";return n?`${n}: ${typeof r=="string"?r:Sv(r??0,{style:"decimal",notation:r?.toString().toLowerCase().includes("e")?"scientific":"standard"})}`:"";default:return t.label??null}}function i$e(t,e){return!!(e&&e==="Stretched"&&"version"in t&&typeof t.version=="number"&&t.version>=10.3&&t.declaredClass==="esri.layers.ImageryLayer")}function Dd(t){return t?t/72*96:0}function Cst(t){return t?t*72/96:0}function Ist(t){if(typeof t=="string"){const e=t.match(Est);if(e){const i=Number(e[1]),r=e[3]?.toLowerCase(),n=t.startsWith("-"),s=r==="px"?Cst(i):i;return n?-s:s}return null}return t}function Jm(t,e){const i=Um(t,e,!1),r=i?t.previewTemplateAriaLabel:t.previewAriaLabel;return Fp(r??"",{label:i})}function Hp(t,e){!e||!t||(t.querySelector("svg")??t.querySelector("canvas")??t).setAttribute("aria-label",e)}const Mst=St`.arcgis-spike-ramp__container{display:flex;flex-direction:row;gap:var(--calcite-spacing-sm-plus);margin-left:var(--calcite-spacing-sm)}.arcgis-spike-ramp__preview-container{display:flex;position:relative;gap:var(--calcite-spacing-sm-plus);border-bottom:var(--calcite-border-width-sm) solid var(--calcite-color-border-2);padding:0 var(--calcite-spacing-xl)}.arcgis-spike-ramp__preview{display:flex;gap:var(--calcite-spacing-sm-plus);align-items:end}.arcgis-spike-ramp__symbol-preview{display:flex}.arcgis-spike-ramp__lines{display:flex;position:absolute;bottom:0}.arcgis-spike-ramp__labels-container{display:flex;position:relative;top:-5px;flex:1;min-width:120px}.arcgis-spike-ramp__label{position:relative;padding:0 var(--calcite-spacing-sm);line-height:1em;word-break:break-all;font-size:var(--calcite-font-size-sm)}.arcgis-spike-ramp__label:before{display:block;position:absolute;top:.25em;right:100%;border-width:3px 4px 3px 0;border-style:solid;border-color:transparent var(--calcite-color-text-1) transparent transparent;width:0;height:0;content:""}`,If={spikeRampContainer:"arcgis-spike-ramp__container",spikeRampPreviewContainer:"arcgis-spike-ramp__preview-container",spikeRampPreview:"arcgis-spike-ramp__preview",spikeRampSymbolPreview:"arcgis-spike-ramp__symbol-preview",spikeRampLines:"arcgis-spike-ramp__lines",spikeRampLabelsContainer:"arcgis-spike-ramp__labels-container",spikeRampLabel:"arcgis-spike-ramp__label"},Ast="#ddd",pa=window.devicePixelRatio;function VB(t){return t.infos.filter((e,i)=>i%2===0)}function Gle(t){return!!(t&&typeof t=="object")}var fw;let Pst=(fw=class extends Et{constructor(){super(...arguments),this.legendElement=null}render(){return this.legendElement.infos.length!==5?null:J`<div class=${q(If.spikeRampContainer)}><div class=${q(If.spikeRampPreviewContainer)}>${this._renderSpikeRampLines()}${this._renderSpikeRampPreview()}</div>${this._renderSpikeRampLabels()}</div>`}_renderSpikeRampPreview(){const e=this.legendElement,[i,r,n]=VB(e).map(({preview:s,label:a})=>{if(!s)return null;const o=s.cloneNode(!0);return o.classList.add(If.spikeRampSymbolPreview),Hp(o,Jm(this.messages,a)),o});return!i||!r||!n?null:J`<div class=${q(If.spikeRampPreview)}><div>${n}</div><div>${r}</div><div>${i}</div></div>`}_renderSpikeRampLines(){const e=this.legendElement,[{width:i,height:r},{width:n},{width:s,height:a}]=VB(e).map(({size:Y})=>Gle(Y)?{width:Dd(Y.width),height:Dd(Y.height)}:{width:0,height:0}),o=10,l=8,c=i+n+s+o*3,h=r,f=document.createElement("canvas");f.width=(c+o)*pa,f.height=h*pa,f.style.width=`${f.width/pa}px`,f.style.height=`${f.height/pa}px`;const g=f.getContext("2d");g.beginPath();const y=c-(i/2+o),b=0,_=c+l;g.moveTo(y*pa,b*pa),g.lineTo(_*pa,0*pa);const $=(c-l)/2,C=(r-a)/2,I=c+l,P=(r-a)/2;g.moveTo($*pa,C*pa),g.lineTo(I*pa,P*pa);const O=s/2,N=h-a,R=c+l,G=h-a;return g.moveTo(O*pa,N*pa),g.lineTo(R*pa,G*pa),g.strokeStyle=Ast,g.lineWidth=.5*pa,g.stroke(),J`<div class=${q(If.spikeRampLines)}>${f}</div>`}_renderSpikeRampLabels(){const e=this.legendElement,[{label:i,height:r},{label:n},{label:s,height:a}]=VB(e).map(({label:f,size:g})=>({label:f,height:Gle(g)?Dd(g.height):0})),o=r-a,l={position:"absolute",top:"0"},c={position:"absolute",top:`${o/2}px`},h={position:"absolute",top:`${o}px`};return J`<div class=${q(If.spikeRampLabelsContainer)}><div class=${q(If.spikeRampLabel)} style=${Kt(l)}>${i}</div><div class=${q(If.spikeRampLabel)} style=${Kt(c)}>${n}</div><div class=${q(If.spikeRampLabel)} style=${Kt(h)}>${s}</div></div>`}},fw.properties={legendElement:0,messages:0},fw.styles=Mst,fw);nn("arcgis-legend-spike-ramp",Pst);const Ost=St`.arcgis-legend--card__size-ramp--container{display:flex;align-items:center;justify-content:center}.arcgis-legend--card__size-ramp--vertical-container{display:flex;flex-direction:column;align-items:center;justify-content:center}.arcgis-legend--card__size-ramp--label{margin:0 .5em;white-space:nowrap}.arcgis-legend--card__size-ramp--vertical-ramp{display:flex;flex-direction:column;align-items:center}.arcgis-legend--card__size-ramp--ramp{display:flex;flex-direction:row-reverse;align-items:center}.arcgis-legend--card__size-ramp--preview{display:flex}`,ty={container:"arcgis-legend--card__size-ramp--container",verticalContainer:"arcgis-legend--card__size-ramp--vertical-container",label:"arcgis-legend--card__size-ramp--label",ramp:"arcgis-legend--card__size-ramp--ramp",verticalRamp:"arcgis-legend--card__size-ramp--vertical-ramp",preview:"arcgis-legend--card__size-ramp--preview"},Lst="#ddd";function Dst(t){if(!t)return;if(t.type.includes("3d")){if(!("symbolLayers"in t)||!t.symbolLayers?.length)return;const i=t.symbolLayers.at(-1),r=i&&"resource"in i?i.resource?.primitive:void 0;return r==="circle"||r==="cross"||r==="kite"||r==="sphere"||r==="cube"||r==="diamond"}const e="style"in t?t.style:void 0;return e==="circle"||e==="diamond"||e==="cross"}function Rst(t){if(t){if(t.type.includes("3d")){if(!("symbolLayers"in t)||!t.symbolLayers?.length)return;const e=t.symbolLayers.at(-1),i=e&&"resource"in e?e.resource?.primitive:void 0;return i==="triangle"||i==="cone"||i==="tetrahedron"}return"style"in t&&t.style==="triangle"}}var mw;let zst=(mw=class extends Et{constructor(){super(...arguments),this.hasIndicators=!1,this.legendElement=null,this.opacity=1}render(){if(this.legendElement.theme==="spike")return J`<div style=${Kt({display:"flex",flex:"1",justifyContent:"center"})}><arcgis-legend-spike-ramp .legendElement=${this.legendElement} .messages=${this.messages}></arcgis-legend-spike-ramp></div>`;const{legendElement:e,hasIndicators:i,opacity:r}=this,n=e.infos,s=n.at(0),a=n.at(-1);if(!s||!a)return null;const{label:o,...l}=s,{label:c,...h}=a;let f=l.preview,g=h.preview;if(!f||!g)return null;f=f.cloneNode(!0),f.style.display="flex",Hp(f,Jm(this.messages,o)),g=g.cloneNode(!0),g.style.display="flex",Hp(g,Jm(this.messages,c));const y={opacity:`${r??""}`};return J`<div class=${q(i?ty.verticalContainer:ty.container)}><div class=${q(ty.label)}>${i?o:c}</div><div class=${q(i?ty.verticalRamp:ty.ramp)}><div class=${q(ty.preview)} style=${Kt(y)}>${f}</div>${this._renderSizeRampLines(e)}<div class=${q(ty.preview)} style=${Kt(y)}>${g}</div></div><div class=${q(ty.label)}>${i?c:o}</div></div>`}_renderSizeRampLines(e){const i=e.infos,r=i.at(0),n=i.at(-1);if(!r||!n)return null;const s=r.symbol,a=this.hasIndicators,o=r.size&&typeof r.size=="number"?r.size:0,l=n.size&&typeof n.size=="number"?n.size:0,c=r.outlineSize||0,h=n.outlineSize||0,f=Dd(o+c),g=Dd(l+h),y=a?f:f+50,b=a?f/2+50:f,_=Rst(s),S=Dst(s),$=document.createElement("canvas");$.width=y,$.height=b,$.style.width=`${$.width}px`,$.style.height=`${$.height}px`;const C=$.getContext("2d");if(a){C.beginPath();const I=0,P=0,O=y/2-g/2,N=b;C.moveTo(I,P),C.lineTo(O,N);const R=y,G=0,Y=y/2+g/2,Q=b;C.moveTo(R,G),C.lineTo(Y,Q)}else{C.beginPath();const I=0,P=b/2-g/2,O=y;C.moveTo(I,P),C.lineTo(O,0);const R=0,G=b/2+g/2,Y=y,Q=b;C.moveTo(R,G),C.lineTo(Y,Q)}return C.strokeStyle=Lst,C.stroke(),J`<div style=${Kt(a?{display:"flex",marginTop:`-${_?0:S?f/2:0}px`,marginBottom:`-${_?g:S?g/2:0}px`}:{display:"flex",marginRight:`-${_?0:S?f/2:0}px`,marginLeft:`-${_?0:S?g/2:0}px`})}>${$}</div>`}},mw.properties={hasIndicators:5,legendElement:0,opacity:9,messages:0},mw.styles=Ost,mw);nn("arcgis-legend-card-size-ramp",zst);function r$e(t,e,i,r){if(t)if(t.type!=="CIMTextSymbol"){if(t.effects)for(const n of t.effects)qle(n,e);if(t.symbolLayers)for(const n of t.symbolLayers){switch(n.type){case"CIMPictureMarker":case"CIMVectorMarker":Fst(n,e,r);break;case"CIMPictureStroke":case"CIMSolidStroke":case"CIMGradientStroke":!r?.preserveOutlineWidth&&n.width&&(n.width*=e);break;case"CIMPictureFill":n.height&&(n.height*=e),n.offsetX&&(n.offsetX*=e),n.offsetY&&(n.offsetY*=e);break;case"CIMHatchFill":r$e(n.lineSymbol,e,!0,{...r,preserveOutlineWidth:!1}),n.offsetX&&(n.offsetX*=e),n.offsetY&&(n.offsetY*=e),n.separation&&(n.separation*=e)}if(n.effects)for(const s of n.effects)qle(s,e)}}else t.height!=null&&(t.height*=e)}function Fst(t,e,i){if(t&&(t.markerPlacement&&Nst(t.markerPlacement,e),t.offsetX&&(t.offsetX*=e),t.offsetY&&(t.offsetY*=e),t.anchorPoint&&t.anchorPointUnits==="Absolute"&&(t.anchorPoint={x:t.anchorPoint.x*e,y:t.anchorPoint.y*e}),t.size=t.size!=null?t.size*e:0,t.type==="CIMVectorMarker"&&t.markerGraphics))for(const r of t.markerGraphics)t.scaleSymbolsProportionally||r$e(r.symbol,e,!0,i)}function Nst(t,e){switch(GN(t)&&t.offset&&(t.offset*=e),t.type){case"CIMMarkerPlacementAlongLineRandomSize":case"CIMMarkerPlacementAlongLineSameSize":if(t.customEndingOffset&&(t.customEndingOffset*=e),t.offsetAlongLine&&(t.offsetAlongLine*=e),t.placementTemplate&&t.placementTemplate.length){const i=t.placementTemplate.map(r=>r*e);t.placementTemplate=i}break;case"CIMMarkerPlacementAlongLineVariableSize":if(t.maxRandomOffset&&(t.maxRandomOffset*=e),t.placementTemplate&&t.placementTemplate.length){const i=t.placementTemplate.map(r=>r*e);t.placementTemplate=i}break;case"CIMMarkerPlacementOnLine":t.startPointOffset&&(t.startPointOffset*=e);break;case"CIMMarkerPlacementAtExtremities":t.offsetAlongLine&&(t.offsetAlongLine*=e);break;case"CIMMarkerPlacementAtMeasuredUnits":case"CIMMarkerPlacementOnVertices":break;case"CIMMarkerPlacementAtRatioPositions":t.beginPosition&&(t.beginPosition*=e),t.endPosition&&(t.endPosition*=e);break;case"CIMMarkerPlacementPolygonCenter":t.offsetX&&(t.offsetX*=e),t.offsetY&&(t.offsetY*=e);break;case"CIMMarkerPlacementInsidePolygon":t.offsetX&&(t.offsetX*=e),t.offsetY&&(t.offsetY*=e),t.stepX&&(t.stepX*=e),t.stepY&&(t.stepY*=e)}}function qle(t,e){switch(t.type){case"CIMGeometricEffectArrow":case"CIMGeometricEffectDonut":t.width&&(t.width*=e);break;case"CIMGeometricEffectBuffer":t.size&&(t.size*=e);break;case"CIMGeometricEffectCut":t.beginCut&&(t.beginCut*=e),t.endCut&&(t.endCut*=e),t.middleCut&&(t.middleCut*=e);break;case"CIMGeometricEffectDashes":if(t.customEndingOffset&&(t.customEndingOffset*=e),t.offsetAlongLine&&(t.offsetAlongLine*=e),t.dashTemplate&&t.dashTemplate.length){const i=t.dashTemplate.map(r=>r*e);t.dashTemplate=i}break;case"CIMGeometricEffectExtension":case"CIMGeometricEffectJog":case"CIMGeometricEffectRadial":t.length&&(t.length*=e);break;case"CIMGeometricEffectMove":t.offsetX&&(t.offsetX*=e),t.offsetY&&(t.offsetY*=e);break;case"CIMGeometricEffectOffset":case"CIMGeometricEffectOffsetTangent":t.offset&&(t.offset*=e);break;case"CIMGeometricEffectRegularPolygon":t.radius&&(t.radius*=e);break;case"CIMGeometricEffectTaperedPolygon":t.fromWidth&&(t.fromWidth*=e),t.length&&(t.length*=e),t.toWidth&&(t.toWidth*=e);break;case"CIMGeometricEffectWave":t.amplitude&&(t.amplitude*=e),t.period&&(t.period*=e)}}function n$e(t){const e=[];return mq(FX(t),e),e.length?new Ye(uSe(e[0])):null}function mq(t,e){if(!t)return;let i;i=t.type==="CIMTextSymbol"?t.symbol:t;const r=t.type==="CIMPolygonSymbol";if(i?.symbolLayers){for(const n of i.symbolLayers)if(!(n.colorLocked||r&&(dSe(n)||NX(n)&&n.markerPlacement&&GN(n.markerPlacement))))switch(n.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":n.tintColor&&Dz(e,n.tintColor);break;case"CIMVectorMarker":n.markerGraphics?.forEach(s=>{mq(s.symbol,e)});break;case"CIMSolidStroke":case"CIMSolidFill":Dz(e,n.color);break;case"CIMGradientFill":jst(e,n);break;case"CIMHatchFill":mq(n.lineSymbol,e)}}}function Dz(t,e){for(const i of t)if(i.join(".")===e.join("."))return;t.push(e)}function jst(t,e){switch(e.colorRamp?.type){case"CIMMultipartColorRamp":e.colorRamp.colorRamps?.forEach(r=>{r.type==="CIMLinearContinuousColorRamp"&&Wle(t,r)});break;case"CIMLinearContinuousColorRamp":case"CIMPolarContinuousColorRamp":Wle(t,e.colorRamp)}}function Wle(t,e){e&&(e.fromColor&&Dz(t,e.fromColor),e.toColor&&Dz(t,e.toColor))}function s$e(t,e,i){e instanceof Ye||(e=new Ye(e));const r=FX(t);r&&gq(r,e)}function gq(t,e,i){if(!t)return;let r;r=t.type==="CIMTextSymbol"?t.symbol:t;const n=r?.type==="CIMPolygonSymbol";if(r?.symbolLayers)for(const s of r.symbolLayers){if(s.colorLocked||n&&(dSe(s)||NX(s)&&s.markerPlacement&&GN(s.markerPlacement)))continue;const a=e.toArray();switch(s.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":s.tintColor=a;break;case"CIMVectorMarker":s.markerGraphics?.forEach(o=>{gq(o.symbol,e)});break;case"CIMSolidStroke":case"CIMSolidFill":s.color=a;break;case"CIMGradientFill":Vst(s,e);break;case"CIMHatchFill":gq(s.lineSymbol,e)}}}function Vst(t,e){switch(t.colorRamp?.type){case"CIMMultipartColorRamp":t.colorRamp.colorRamps?.forEach(r=>{r.type==="CIMLinearContinuousColorRamp"&&Yle(r,e)});break;case"CIMLinearContinuousColorRamp":case"CIMPolarContinuousColorRamp":Yle(t.colorRamp,e)}}function Yle(t,e){if(t&&(t.fromColor&&(t.fromColor=e.toArray()),t.toColor)){const i=e.clone();i.a=0,t.toColor=i.toArray()}}function Bst(t,e,i=!1){const r=FX(t);if(i&&(e=360-e),r?.type!=="CIMTextSymbol"){if(r?.type==="CIMPointSymbol"&&r.symbolLayers){const n=e-(r.angle||0);for(const s of r.symbolLayers)if(NX(s)){let a=s.rotation||0;s.rotateClockwise?a-=n:a+=n,s.rotation=a}r.angle=e}}else r.angle=e}const a$e="picture-fill",o$e="simple-fill",Ust="simple-line",l$e="simple-marker",Hst="text",Gst="cim",Zle=new Map([["dash",[4,3]],["dashdot",[4,3,1,3]],["dot",[1,3]],["longdash",[8,3]],["longdashdot",[8,3,1,3]],["longdashdotdot",[8,3,1,3,1,3]],["shortdash",[4,1]],["shortdashdot",[4,1,1,1]],["shortdashdotdot",[4,1,1,1,1,1]],["shortdot",[1,1]],["solid",[]]]),Xle=new Yxe(1e3);function qst(t){const e=t.style;let i=null;if(t)switch(t.type){case l$e:e!=="cross"&&e!=="x"&&(i=t.color);break;case o$e:e&&e!=="solid"?e!=="none"&&(i={type:"pattern",x:0,y:0,src:Ur(`esri/symbols/patterns/${e}.png`),width:5,height:5}):i=t.color;break;case a$e:i={type:"pattern",src:t.url,width:Fi(t.width)*t.xscale,height:Fi(t.height)*t.yscale,x:Fi(t.xoffset),y:Fi(t.yoffset)};break;case Hst:i=t.color;break;case Gst:i=n$e(t)}return i}function Wst(t,e){const i=t+"-"+e,r=Xle.get(i);return r!=null?Promise.resolve(r):Nt(t,{responseType:"image"}).then(n=>{const s=n.data,a=s.naturalWidth,o=s.naturalHeight,l=document.createElement("canvas");l.width=a,l.height=o;const c=l.getContext("2d");c.fillStyle=e,c.fillRect(0,0,a,o),c.globalCompositeOperation="destination-in",c.drawImage(s,0,0);const h=l.toDataURL();return Xle.put(i,h),h})}function WI(t){if(!t)return null;let e=null;switch(t.type){case o$e:case a$e:case l$e:e=WI(t.outline);break;case Ust:{const i=Fi(t.width);t.style!=null&&t.style!=="none"&&i!==0&&(e={color:t.color,style:KX(t.style),width:i,cap:t.cap,join:t.join==="miter"?Fi(t.miterLimit):t.join},e.dashArray=c$e(e).join(",")||"none");break}default:e=null}return e}function c$e(t){if(!t?.style)return[];const{dashArray:e,style:i,width:r}=t;if(typeof e=="string"&&e!=="none")return e.split(",").map(a=>Number(a));const n=r??0,s=Zle.has(i)?Zle.get(i).map(a=>a*n):[];if(t.cap!=="butt")for(const[a,o]of s.entries())s[a]=a%2==1?o+n:Math.max(o-n,1);return s}const KX=(()=>{const t={};return e=>{if(t[e])return t[e];const i=e.replaceAll("-","");return t[e]=i,i}})(),Yst=new Ye([128,128,128]);let Zst=0;function Xst(){return Zst++}let Jst=0;function Kst(){return Jst++}let Qst=0;function eat(){return Qst++}const tat="http://www.w3.org/2000/svg",Jle=ve("android"),iat=ve("chrome")||Jle&&Jle>=4?"auto":"optimizeLegibility",rat={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},nat=/([A-DF-Za-df-z])|([-+]?\d*\.?\d+(?:[eE][-+]?\d+)?)/g;let cn={},Wi={};const sat=Math.PI;function av(t,e){const i=t*(sat/180);return Math.abs(e*Math.sin(i))+Math.abs(e*Math.cos(i))}function u$e(t){return t.map(e=>`${e.command} ${e.values.join(" ")}`).join(" ").trim()}function d$e(t,e,i,r,n){if(t){if(t.type==="circle")return Ke("circle",{cx:t.cx,cy:t.cy,fill:e,"fill-rule":"evenodd",r:t.r,stroke:i.color,"stroke-dasharray":i.dashArray,"stroke-dashoffset":i.dashOffset,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-miterlimit":"4","stroke-width":i.width});if(t.type==="ellipse")return Ke("ellipse",{cx:t.cx,cy:t.cy,fill:e,"fill-rule":"evenodd",rx:t.rx,ry:t.ry,stroke:i.color,"stroke-dasharray":i.dashArray,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-miterlimit":"4","stroke-width":i.width});if(t.type==="rect")return Ke("rect",{fill:e,"fill-rule":"evenodd",height:t.height,stroke:i.color,"stroke-dasharray":i.dashArray,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-miterlimit":"4","stroke-width":i.width,width:t.width,x:t.x,y:t.y});if(t.type==="image")return Ke("image",{alt:n||"image",height:t.height,href:t.src,preserveAspectRatio:"none",width:t.width,x:t.x,y:t.y});if(t.type==="path"){const s=typeof t.path!="string"?u$e(t.path):t.path;return Ke("path",{d:s,fill:e,"fill-rule":"evenodd",stroke:i.color,"stroke-dasharray":i.dashArray,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-miterlimit":"4","stroke-width":i.width})}if(t.type==="text")return MM(r),Ke("text",{"dominant-baseline":r.dominantBaseline,fill:e,"fill-rule":"evenodd","font-family":r.font.family,"font-size":r.font.size,"font-style":r.font.style,"font-variant":r.font.variant,"font-weight":r.font.weight,kerning:r.kerning,rotate:r.rotate,stroke:i.color,"stroke-dasharray":i.dashArray,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-miterlimit":"4","stroke-width":i.width,"text-anchor":r.align,"text-decoration":r.decoration,"text-rendering":iat,x:t.x,y:t.y},t.text)}return null}function h$e(t){if(!t)return{fill:"none",pattern:null,linearGradient:null};if(!("type"in t))return{fill:new Ye(t).toString(),pattern:null,linearGradient:null};if(t.type==="pattern"){const i=`patternId-${Xst()}`;return{fill:`url(#${i})`,pattern:{id:i,x:t.x,y:t.y,width:t.width,height:t.height,image:{x:0,y:0,width:t.width,height:t.height,href:t.src}},linearGradient:null}}const e=`linearGradientId-${Kst()}`;return{fill:`url(#${e})`,pattern:null,linearGradient:{id:e,x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,stops:t.colors.map(i=>({offset:i.offset,color:i.color&&new Ye(i.color).toString()}))}}}function p$e(t){const e={color:"none",width:1,cap:"butt",join:"4",dashArray:"none",dashOffset:"0"};return t&&(t.width!=null&&(e.width=t.width),t.cap&&(e.cap=t.cap),t.join&&(e.join=t.join.toString()),t.color&&(e.color=new Ye(t.color).toString()),t.dashArray&&(e.dashArray=t.dashArray),t.dashoffset&&(e.dashOffset=t.dashoffset),t.style&&!t.dashArray&&(e.dashArray=c$e(t).join(",")||"none")),e}function f$e(t,e){const i={align:null,decoration:null,kerning:null,rotate:null,font:{style:null,variant:null,weight:null,size:null,family:null}};if(t){const r=t.alignBaseline,n=r==="baseline"?"auto":r==="top"?"text-top":r==="bottom"?"hanging":r;i.align=t.align,i.dominantBaseline=n,i.decoration=t.decoration,i.kerning=t.kerning?"auto":"0",i.rotate=t.rotated?"90":"0",MM(e),i.font.style=e.style||"normal",i.font.variant=e.variant||"normal",i.font.weight=e.weight||"normal",i.font.size=e.size&&e.size.toString()||"10pt",i.font.family=e.family||"serif"}return i}function aat(t){const{pattern:e,linearGradient:i}=t;if(e)return Ke("pattern",{height:e.height,id:e.id,patternUnits:"userSpaceOnUse",width:e.width,x:e.x,y:e.y},Ke("image",{height:e.image.height,href:e.image.href,width:e.image.width,x:e.image.x,y:e.image.y}));if(i){const r=i.stops.map((n,s)=>Ke("stop",{key:`${s}-stop`,offset:n.offset,"stop-color":n.color}));return Ke("linearGradient",{gradientUnits:"userSpaceOnUse",id:i.id,x1:i.x1,x2:i.x2,y1:i.y1,y2:i.y2},r)}return null}function oat(t,e){if(!t||t.length===0)return null;const i=[];for(const r of t){const{shape:n,fill:s,stroke:a,font:o}=r,l=h$e(s),c=p$e(a),h=n.type==="text"?f$e(n,o):null,f=d$e(n,l.fill,c,h);f&&i.push(f)}return Ke("mask",{id:e,maskUnits:"userSpaceOnUse"},Ke("g",null,i))}function Kle(t,e,i){return Ep(t,oA(t),[e,i])}function Qle(t,e,i,r,n){return lA(t,oA(t),[e,i]),t[4]=t[4]*e-r*e+r,t[5]=t[5]*i-n*i+n,t}function lat(t,e,i,r){const n=e%360*Math.PI/180;Mv(t,oA(t),n);const s=Math.cos(n),a=Math.sin(n),o=t[4],l=t[5];return t[4]=o*s-l*a+r*a-i*s+i,t[5]=l*s+o*a-i*a-r*s+r,t}function wo(t,e){cn&&"left"in cn?(cn.left!=null&&cn.left>t&&(cn.left=t),(cn.right==null||cn.right<t)&&(cn.right=t),(cn.top==null||cn.top>e)&&(cn.top=e),(cn.bottom==null||cn.bottom<e)&&(cn.bottom=e)):cn={left:t,bottom:e,right:t,top:e}}function ece(t){const e=t.args,i=e.length;let r;switch(t.action){case"M":case"L":case"C":case"S":case"Q":case"T":for(r=0;r<i;r+=2)wo(e[r],e[r+1]);Wi.x=e[i-2],Wi.y=e[i-1];break;case"H":for(r=0;r<i;++r)wo(e[r],Wi.y);Wi.x=e[i-1];break;case"V":for(r=0;r<i;++r)wo(Wi.x,e[r]);Wi.y=e[i-1];break;case"m":{let n=0;for(("x"in Wi)||(wo(Wi.x=e[0],Wi.y=e[1]),n=2),r=n;r<i;r+=2)wo(Wi.x+=e[r],Wi.y+=e[r+1]);break}case"l":case"t":for(r=0;r<i;r+=2)wo(Wi.x+=e[r],Wi.y+=e[r+1]);break;case"h":for(r=0;r<i;++r)wo(Wi.x+=e[r],Wi.y);break;case"v":for(r=0;r<i;++r)wo(Wi.x,Wi.y+=e[r]);break;case"c":for(r=0;r<i;r+=6)wo(Wi.x+e[r],Wi.y+e[r+1]),wo(Wi.x+e[r+2],Wi.y+e[r+3]),wo(Wi.x+=e[r+4],Wi.y+=e[r+5]);break;case"s":case"q":for(r=0;r<i;r+=4)wo(Wi.x+e[r],Wi.y+e[r+1]),wo(Wi.x+=e[r+2],Wi.y+=e[r+3]);break;case"A":for(r=0;r<i;r+=7)wo(e[r+5],e[r+6]);Wi.x=e[i-2],Wi.y=e[i-1];break;case"a":for(r=0;r<i;r+=7)wo(Wi.x+=e[r+5],Wi.y+=e[r+6])}}function tce(t,e,i){const r=rat[t.toLowerCase()];let n;typeof r=="number"&&(r?e.length>=r&&(n={action:t,args:e.slice(0,e.length-e.length%r)},i.push(n),ece(n)):(n={action:t,args:[]},i.push(n),ece(n)))}function cat(t){const e=(typeof t.path!="string"?u$e(t.path):t.path).match(nat),i=[];if(cn={},Wi={},!e)return null;let r="",n=[];const s=e.length;for(let o=0;o<s;++o){const l=e[o],c=parseFloat(l);isNaN(c)?(r&&tce(r,n,i),n=[],r=l):n.push(c)}tce(r,n,i);const a={x:0,y:0,width:0,height:0};return cn&&"left"in cn&&(a.x=cn.left,a.y=cn.top,a.width=cn.right-cn.left,a.height=cn.bottom-cn.top),a}function m$e(t){const e={x:0,y:0,width:0,height:0};if(t.type==="circle")e.x=t.cx-t.r,e.y=t.cy-t.r,e.width=2*t.r,e.height=2*t.r;else if(t.type==="ellipse")e.x=t.cx-t.rx,e.y=t.cy-t.ry,e.width=2*t.rx,e.height=2*t.ry;else if(t.type==="image"||t.type==="rect")e.x=t.x,e.y=t.y,e.width=t.width,e.height=t.height;else if(t.type==="path"){const i=cat(t);e.x=i.x,e.y=i.y,e.width=i.width,e.height=i.height}return e}function g$e(t){const e={x:0,y:0,width:0,height:0};let i=null,r=Number.NEGATIVE_INFINITY,n=Number.NEGATIVE_INFINITY;for(const s of t)i?(i.x=Math.min(i.x,s.x),i.y=Math.min(i.y,s.y),r=Math.max(r,s.x+s.width),n=Math.max(n,s.y+s.height)):(i=e,i.x=s.x,i.y=s.y,r=s.x+s.width,n=s.y+s.height);return i&&(i.width=r-i.x,i.height=n-i.y),i}function y$e(t,e,i,r,n,s,a,o,l){let c=(a&&s?av(s,e):e)/2,h=(a&&s?av(s,i):i)/2;if(l){const C=l[0],I=l[1];c=(a&&s?av(s,C):C)/2,h=(a&&s?av(s,I):I)/2}const f=t.width+r,g=t.height+r,y=Bm(),b=Bm();let _=!1;if(n&&f!==0&&g!==0){const C=e!==i?e/i:f/g,I=e>i?e:i;let P=1,O=1;isNaN(I)||(C>1?(P=I/f,O=I/C/g):(O=I/g,P=I*C/f)),Wh(b,b,Qle(y,P,O,c,h)),_=!0}const S=t.x+(f-r)/2,$=t.y+(g-r)/2;if(Wh(b,b,Kle(y,c-S,h-$)),!_&&(f>e||g>i)){const C=f/e>g/i,I=(C?e:i)/(C?f:g);Wh(b,b,Qle(y,I,I,S,$))}return o&&Wh(b,b,Kle(y,o[0],o[1])),s&&Wh(b,b,lat(y,s,S,$)),`matrix(${b[0]},${b[1]},${b[2]},${b[3]},${b[4]},${b[5]})`}function v$e(t){const e=t?.match(/bloom\(\s*([^\s]+)\s+([^\s]+)\s+([^\s]+)\s*\)/i);if(!e)return null;const[,i,r,n]=e;return{strength:Number(i),radius:Fi(xi(r)),threshold:Number(n)}}function uat(t,e,i){const r=v$e(t);if(!r)return null;const{strength:n,radius:s}=r,a=n>0?s:0,o=(n+a)*e,l=4*n+1;return Ke("filter",{filterUnits:"userSpaceOnUse",height:"300%",id:`bloom${i}`,width:"300%",x:"-100%",y:"-100%"},Ke("feMorphology",{in:"SourceGraphic",operator:"dilate",radius:(n+.5*a)*(5**(e/100)*(.4+e/100)),result:"dilate"}),Ke("feGaussianBlur",{in:"dilate",result:"blur",stdDeviation:o/25}),Ke("feGaussianBlur",{in:"blur",result:"intensityBlur",stdDeviation:o/50}),Ke("feComponentTransfer",{in:"SourceGraphic",result:"intensityBrightness"},Ke("feFuncR",{slope:l,type:"linear"}),Ke("feFuncG",{slope:l,type:"linear"}),Ke("feFuncB",{slope:l,type:"linear"})),Ke("feMerge",null,Ke("feMergeNode",{in:"intensityBlur"}),Ke("feMergeNode",{in:"intensityBrightness"}),Ke("feGaussianBlur",{stdDeviation:n/10})))}function dat(t,e,i,r={}){const n=[],s=[],a=eat(),o=uat(r.cssEffectFilter,e,a);let l=null;if(o){const g=v$e(r.cssEffectFilter),y=r.clipBloomEffect||!g?.strength?0:(g.strength+g.radius/2)/3,b=e+e*y,_=i+i*y;l=[Math.max(b,10),Math.max(_,10)]}let c=e,h=i;if(r.useRotationSize)for(let g=0;g<t.length;g++){const y=r.rotations?.[g]??0;c=Math.max(av(y,e),c),h=Math.max(av(y,i),h)}for(let g=0;g<t.length;g++){const y=t[g],b=[],_=[];let S=0,$=0,C=0;for(const N of y){const{shape:R,fill:G,stroke:Y,font:Q,offset:ae}=N;r.ignoreStrokeWidth||R.type==="text"||(S+=Y?.width||0);const ce=h$e(G),ne=p$e(Y),K=R.type==="text"?f$e(R,Q):null;n.push(aat(ce)),b.push(d$e(R,ce.fill,ne,K,r.ariaLabel)),_.push(m$e(R)),ae&&($+=ae[0],C+=ae[1])}const I=r.rotations?.[g]??0;r.useRotationSize&&($+=(c-av(I,e))/2,C+=(h-av(I,i))/2);const P=y$e(g$e(_),e,i,S,r.scale??!1,I,r.useRotationSize??!1,[$,C],l);let O=null;if(r.masking){const N=`mask-${g}`,R=r.masking[g];n.push(oat(R,N)),O=`url(#${N})`}s.push(O?Ke("g",{mask:O},Ke("g",{transform:P},b)):Ke("g",{transform:P},b))}return o&&(MM(l),c=l[0],h=l[1]),Ke("svg",{"aria-label":r.ariaLabel,focusable:!1,height:h,role:"img",style:"display: block;",width:c,xmlns:tat},o,Ke("defs",null,n),o?Ke("g",{filter:`url(#bloom${a})`},s):s)}function b$e(t){return m$e(t)}function w$e(t){return g$e(t)}function yq(t,e,i,r,n,s,a,o,l){return y$e(t,e,i,r,n,s,a,o,l)}let hat=0;function pat(){return hat++}let fat=0;function mat(){return fat++}let gat=0;function yat(){return gat++}const ice=new Map([["dash",[4,3]],["dashdot",[4,3,1,3]],["dot",[1,3]],["longdash",[8,3]],["longdashdot",[8,3,1,3]],["longdashdotdot",[8,3,1,3,1,3]],["shortdash",[4,1]],["shortdashdot",[4,1,1,1]],["shortdashdotdot",[4,1,1,1,1,1]],["shortdot",[1,1]],["solid",[]]]),vat="http://www.w3.org/2000/svg",bat=Math.PI;function _$e(t){const{pattern:e,linearGradient:i}=t;if(e)return Sn`<pattern height=${e.height??De} id=${e.id??De} patternUnits=userSpaceOnUse width=${e.width??De} x=${e.x??0??De} y=${e.y??0??De}><image height=${e.image.height??De} href=${e.image.href??De} width=${e.image.width??De} x=${e.image.x??De} y=${e.image.y??De} /></pattern>`;if(i){const r=i.stops.map(n=>Sn`<stop offset=${n.offset??De} stop-color=${n.color??De} />`);return Sn`<linearGradient gradientUnits=userSpaceOnUse id=${i.id??De} x1=${i.x1??De} x2=${i.x2??De} y1=${i.y1??De} y2=${i.y2??De}>${r}</linearGradient>`}return null}function QX(t){if(!t)return{fill:"none",pattern:null,linearGradient:null};if(!("type"in t))return{fill:new Ye(t).toString(),pattern:null,linearGradient:null};if(t.type==="pattern"){const i=`patternId-${pat()}`;return{fill:`url(#${i})`,pattern:{id:i,x:t.x,y:t.y,width:t.width,height:t.height,image:{x:0,y:0,width:t.width,height:t.height,href:t.src}},linearGradient:null}}const e=`linearGradientId-${mat()}`;return{fill:`url(#${e})`,pattern:null,linearGradient:{id:e,x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,stops:t.colors.map(i=>({offset:i.offset,color:i.color&&new Ye(i.color).toString()}))}}}function eJ(t){const e={color:"none",width:1,cap:"butt",join:"4",dashArray:"none",dashOffset:"0"};return t&&(t.width!=null&&(e.width=t.width),t.cap&&(e.cap=t.cap),t.join&&(e.join=t.join.toString()),t.color&&(e.color=new Ye(t.color).toString()),t.dashArray&&(e.dashArray=t.dashArray),t.dashoffset&&(e.dashOffset=t.dashoffset),t.style&&!t.dashArray&&(e.dashArray=wat(t).join(",")||"none")),e}function wat(t){if(!t?.style)return[];const{dashArray:e,style:i,width:r}=t;if(typeof e=="string"&&e!=="none")return e.split(",").map(a=>Number(a));const n=r??0,s=ice.has(i)?ice.get(i).map(a=>a*n):[];if(t.cap!=="butt")for(const[a,o]of s.entries())s[a]=a%2===1?o+n:Math.max(o-n,1);return s}function _at(t){return t.map(e=>`${e.command} ${e.values.join(" ")}`).join(" ").trim()}function tJ(t,e){if(t==null)throw new Error("value is None")}function iJ(t,e,i,r,n){if(t){if(t.type==="circle")return Sn`<circle cx=${t.cx??De} cy=${t.cy??De} fill=${e??De} fill-rule=evenodd r=${t.r??De} stroke=${i.color??De} stroke-dasharray=${i.dashArray??void 0??De} stroke-dashoffset=${i.dashOffset??void 0??De} stroke-linecap=${i.cap??De} stroke-linejoin=${i.join??De} stroke-miterlimit=4 stroke-width=${i.width??De} />`;if(t.type==="ellipse")return Sn`<ellipse cx=${t.cx??De} cy=${t.cy??De} fill=${e??De} fill-rule=evenodd rx=${t.rx??De} ry=${t.ry??De} stroke=${i.color??De} stroke-dasharray=${i.dashArray??void 0??De} stroke-linecap=${i.cap??De} stroke-linejoin=${i.join??De} stroke-miterlimit=4 stroke-width=${i.width??De} />`;if(t.type==="rect")return Sn`<rect fill=${e??De} fill-rule=evenodd height=${t.height??De} stroke=${i.color??De} stroke-dasharray=${i.dashArray??void 0??De} stroke-linecap=${i.cap??De} stroke-linejoin=${i.join??De} stroke-miterlimit=4 stroke-width=${i.width??De} width=${t.width??De} x=${t.x??De} y=${t.y??De} />`;if(t.type==="image")return Sn`<image aria-label=${n??""??De} height=${t.height??De} href=${t.src??De} preserveAspectRatio=none width=${t.width??De} x=${t.x??De} y=${t.y??De} />`;if(t.type==="path"){const s=typeof t.path!="string"?_at(t.path):t.path;return Sn`<path d=${s??De} fill=${e??De} fill-rule=evenodd stroke=${i.color??De} stroke-dasharray=${i.dashArray??void 0??De} stroke-linecap=${i.cap??De} stroke-linejoin=${i.join??De} stroke-miterlimit=4 stroke-width=${i.width??De} />`}if(t.type==="text")return tJ(r),Sn`<text dominant-baseline=${(r.dominantBaseline==="inherit"||r.dominantBaseline==="alphabetic"||r.dominantBaseline==="auto"||r.dominantBaseline==="central"||r.dominantBaseline==="hanging"||r.dominantBaseline==="ideographic"||r.dominantBaseline==="mathematical"||r.dominantBaseline==="middle"||r.dominantBaseline==="text-bottom"||r.dominantBaseline==="text-top"?r.dominantBaseline:void 0)??De} fill=${e??De} fill-rule=evenodd font-family=${r.font.family??De} font-size=${r.font.size??De} font-style=${r.font.style??De} font-variant=${r.font.variant??De} font-weight=${r.font.weight??De} kerning=${r.kerning??De} rotate=${r.rotate??De} stroke=${i.color??De} stroke-dasharray=${i.dashArray??void 0??De} stroke-linecap=${i.cap??De} stroke-linejoin=${i.join??De} stroke-miterlimit=4 stroke-width=${i.width??De} text-anchor=${(r.align==="inherit"||r.align==="middle"||r.align==="end"||r.align==="start"?r.align:void 0)??De} text-decoration=${(r.decoration==="inherit"||r.decoration==="none"||r.decoration==="blink"||r.decoration==="line-through"||r.decoration==="overline"||r.decoration==="underline"?r.decoration:void 0)??De} text-rendering=auto x=${t.x??De} y=${t.y??De}>${t.text}</text>`}return null}function xat(t,e,i){const r=S$e(t);if(!r)return null;const{strength:n,radius:s}=r,a=n>0?s:0,o=5**(e/100)*(.4+e/100),l=(n+a*.5)*o,c=(n+a)*e,h=n*4+1;return Sn`<filter filterUnits=userSpaceOnUse height=300% .id=${`bloom${i}`} width=300% x=-100% y=-100%><feMorphology in=SourceGraphic operator=dilate radius=${l??De} result=dilate /><feGaussianBlur in=dilate result=blur stdDeviation=${c/25} /><feGaussianBlur in=blur result=intensityBlur stdDeviation=${c/50} /><feComponentTransfer in=SourceGraphic result=intensityBrightness><feFuncR slope=${h??De} type=linear /><feFuncG slope=${h??De} type=linear /><feFuncB slope=${h??De} type=linear /></feComponentTransfer><feMerge><feMergeNode in=intensityBlur /><feMergeNode in=intensityBrightness /><feGaussianBlur stdDeviation=${n/10} /></feMerge></filter>`}function aL(t,e){const i=t*(bat/180);return Math.abs(e*Math.sin(i))+Math.abs(e*Math.cos(i))}function x$e(t,e){const i={align:null,decoration:null,kerning:null,rotate:null,font:{style:null,variant:null,weight:null,size:null,family:null}};if(t){const r=t.alignBaseline,n=r==="baseline"?"auto":r==="top"?"text-top":r==="bottom"?"hanging":r;i.align=t.align,i.dominantBaseline=n,i.decoration=t.decoration,i.kerning=t.kerning?"auto":"0",i.rotate=t.rotated?"90":"0",tJ(e),i.font.style=e.style||"normal",i.font.variant=e.variant||"normal",i.font.weight=e.weight||"normal",i.font.size=e.size?.toString()||"10pt",i.font.family=e.family||"serif"}return i}function Sat(t,e){if(!t||t.length===0)return null;const i=[];for(const r of t){const{shape:n,fill:s,stroke:a,font:o}=r,l=QX(s),c=eJ(a),h=n.type==="text"?x$e(n,o):null,f=iJ(n,l.fill,c,h);f&&i.push(f)}return Sn`<mask id=${e??De} maskUnits=userSpaceOnUse><g>${i}</g></mask>`}function S$e(t){const e=t?.match(/bloom\(\s*([^\s]+)\s+([^\s]+)\s+([^\s]+)\s*\)/iu);if(!e)return null;const[,i,r,n]=e;return{strength:Number(i),radius:Dd(Ist(r)),threshold:Number(n)}}function $at(t,e,i,r={}){const n=[],s=[],a=yat(),o=xat(r.cssEffectFilter,e,a);let l=null;if(o){const f=S$e(r.cssEffectFilter),g=r.clipBloomEffect||!f?.strength?0:(f.strength+f.radius/2)/3,y=e+e*g,b=i+i*g;l=[Math.max(y,10),Math.max(b,10)]}let c=e,h=i;if(r.useRotationSize)for(let f=0;f<t.length;f++){const g=r.rotations?.[f]??0;c=Math.max(aL(g,e),c),h=Math.max(aL(g,i),h)}for(let f=0;f<t.length;f++){const g=t[f],y=[],b=[];let _=0,S=0,$=0;for(const N of g){const{shape:R,fill:G,stroke:Y,font:Q,offset:ae}=N;!r.ignoreStrokeWidth&&R.type!=="text"&&(_+=Y?.width||0);const ce=QX(G),ne=eJ(Y),K=R.type==="text"?x$e(R,Q):null;n.push(_$e(ce)),y.push(iJ(R,ce.fill,ne,K,r.ariaLabel)),b.push(b$e(R)),ae&&(S+=ae[0],$+=ae[1])}const C=r.rotations?.[f]??0;r.useRotationSize&&(S+=(c-aL(C,e))/2,$+=(h-aL(C,i))/2);const I=w$e(b),P=yq(I,e,i,_,r.scale??!1,C,r.useRotationSize??!1,[S,$],l);let O=null;if(r.masking){const N=`mask-${f}`,R=r.masking[f];n.push(Sat(R,N)),O=`url(#${N})`}s.push(O?Sn`<g mask=${O??De}><g transform=${P??De}>${y}</g></g>`:Sn`<g transform=${P??De}>${y}</g>`)}return o&&(tJ(l),c=l[0],h=l[1]),J`<svg aria-label=${r.ariaLabel??De} height=${h??De} role=img style=${Kt("display: block;")} width=${c??De} xmlns=${vat}>${Sn`${o}<defs>${n}</defs>${o?Sn`<g filter=${`url(#bloom${a})`}>${s}</g>`:s}`}</svg>`}const Tat=St`:host{display:flex}.arcgis-legend--card__layer-row{display:flex;flex:1}.arcgis-legend--card__color-ramp-container{justify-content:center}.arcgis-legend--card__symbol-container{display:flex;flex-direction:column}.arcgis-legend--card__interval-separators-container{text-align:center}.arcgis-legend--card__interval-separator{font-size:.5em}.arcgis-legend--card__ramp-label{margin:0 .5em;white-space:nowrap;height:25px;line-height:var(--calcite-font-line-height-fixed-xl)}`,V1={layerRow:"arcgis-legend--card__layer-row",colorRampContainer:"arcgis-legend--card__color-ramp-container",symbolContainer:"arcgis-legend--card__symbol-container",intervalSeparatorsContainer:"arcgis-legend--card__interval-separators-container",intervalSeparator:"arcgis-legend--card__interval-separator",rampLabel:"arcgis-legend--card__ramp-label"},kat=25,Eat=25,Cat=100;var gw;let Iat=(gw=class extends Et{constructor(){super(...arguments),this.legendElement=null,this.opacity=1}render(){const e=this.legendElement.infos.slice().reverse();return J`<div class=${q(Ui(V1.layerRow,V1.colorRampContainer))}>${this._renderRampLabel(e[0])}<div class=${q(V1.symbolContainer)}>${this._renderPreview(e)}${this._renderMiddleStopRampLabel(e)}</div>${this._renderRampLabel(e.at(-1))}</div>`}_renderPreview(e){const{opacity:i}=this,r=this.legendElement.type==="heatmap-ramp",n=e.length-1,s=Eat,a=n>2&&!r?kat*n:Cat,o=a+20,l=10,c=[[{shape:{type:"path",path:`M0 ${s/2} L${l} 0 L${l} ${s} Z`},fill:e[0].color,stroke:{width:0}},{shape:{type:"rect",x:l,y:0,width:a,height:s},fill:{type:"linear",x1:l,y1:0,x2:a+l,y2:0,colors:e.map((y,b)=>({color:y.color,offset:r&&"ratio"in y?y.ratio:b/n}))},stroke:{width:0}},{shape:{type:"path",path:`M${a+l} 0 L${o} ${s/2} L${a+l} ${s} Z`},fill:e[e.length-1].color,stroke:{width:0}}]],h=this.legendElement.type==="opacity-ramp"?this.messages.previewOpacityRampAriaLabel:this.messages.previewColorRampAriaLabel,f=$at(c,o,s,{ariaLabel:h}),g={filter:this.cssEffectFilter,opacity:i==null?void 0:`${i}`};return J`<div style=${Kt(g)}>${f}</div>`}_renderMiddleStopRampLabel(e){const i=e.length%2!==0?e[e.length/2|0]:null;return i?J`<div class=${q(V1.intervalSeparatorsContainer)}><div class=${q(V1.intervalSeparator)}>|</div>${this._renderRampLabel(i)}</div>`:null}_renderRampLabel(e){return J`<div class=${q(V1.rampLabel)}>${t$e(e,this.legendElement.type,this.messages)}</div>`}},gw.properties={cssEffectFilter:1,legendElement:0,opacity:9,messages:0},gw.styles=Tat,gw);nn("arcgis-legend-card-color-ramp",Iat);const Mat=St`.arcgis-relationship-ramp--diamond__container{display:flex;font-size:var(--calcite-font-size-sm)}.arcgis-relationship-ramp--diamond__left-column{align-self:center;padding-right:5px;max-width:85px;text-align:right}.arcgis-relationship-ramp--diamond__right-column{align-self:center;padding-left:5px;max-width:85px;text-align:left}.arcgis-relationship-ramp--diamond__middle-column{display:flex;flex-direction:column;text-align:center}.arcgis-relationship-ramp--diamond__middle-column--label{align-self:center;max-width:85px}.arcgis-relationship-ramp--diamond__middle-column--ramp{width:85px;height:85px}.arcgis-relationship-ramp--square__table{display:table;font-size:var(--calcite-font-size-sm)}.arcgis-relationship-ramp--square__table-row{display:table-row}.arcgis-relationship-ramp--square__table-cell{display:table-cell}.arcgis-relationship-ramp--square__table-label{max-width:95px}.arcgis-relationship-ramp--square__table-label--left-bottom{vertical-align:bottom;text-align:left}.arcgis-relationship-ramp--square__table-label--right-bottom{vertical-align:bottom;text-align:right}.arcgis-relationship-ramp--square__table-label--left-top{vertical-align:top;text-align:left}.arcgis-relationship-ramp--square__table-label--right-top{vertical-align:top;text-align:right}`,Aat="http://www.w3.org/2000/svg",kr={diamondContainer:"arcgis-relationship-ramp--diamond__container",diamondLeftCol:"arcgis-relationship-ramp--diamond__left-column",diamondRightCol:"arcgis-relationship-ramp--diamond__right-column",diamondMidCol:"arcgis-relationship-ramp--diamond__middle-column",diamondMidColLabel:"arcgis-relationship-ramp--diamond__middle-column--label",diamondMidColRamp:"arcgis-relationship-ramp--diamond__middle-column--ramp",squareTable:"arcgis-relationship-ramp--square__table",squareTableRow:"arcgis-relationship-ramp--square__table-row",squareTableCell:"arcgis-relationship-ramp--square__table-cell",squareTableLabel:"arcgis-relationship-ramp--square__table-label",squareTableLabelLeftBottom:"arcgis-relationship-ramp--square__table-label--left-bottom",squareTableLabelRightBottom:"arcgis-relationship-ramp--square__table-label--right-bottom",squareTableLabelLeftTop:"arcgis-relationship-ramp--square__table-label--left-top",squareTableLabelRightTop:"arcgis-relationship-ramp--square__table-label--right-top"};var yw;let Pat=(yw=class extends Et{constructor(){super(...arguments),this._direction=iN(),this.legendElement=null}_getLineMarkers(e,i){const r="arrowStart",n="arrowEnd",s=e==="left",a={markerStart:null,markerEnd:null};switch(i){case"HL":s?a.markerStart=`url(#${n})`:a.markerEnd=`url(#${r})`;break;case"LL":a.markerStart=`url(#${n})`;break;case"LH":s?a.markerEnd=`url(#${r})`:a.markerStart=`url(#${n})`;break;default:a.markerEnd=`url(#${r})`;break}return a}render(){const e=this.legendElement,{focus:i,labels:r}=e,n=!!i,s=this._renderRamp(e),a={justifyContent:"center"},o=this._direction==="rtl";return n?J`<div class=${q(kr.diamondContainer)} style=${Kt(a)}><div class=${q(kr.diamondLeftCol)}>${o?r.right:r.left}</div><div class=${q(kr.diamondMidCol)}><div class=${q(kr.diamondMidColLabel)}>${r.top}</div>${s}<div class=${q(kr.diamondMidColLabel)}>${r.bottom}</div></div><div class=${q(kr.diamondRightCol)}>${o?r.left:r.right}</div></div>`:J`<div class=${q(kr.squareTable)}><div class=${q(kr.squareTableRow)}><div class=${q(Ui(kr.squareTableCell,kr.squareTableLabel,kr.squareTableLabelRightBottom))}>${o?r.top:r.left}</div><div class=${q(kr.squareTableCell)}></div><div class=${q(Ui(kr.squareTableCell,kr.squareTableLabel,kr.squareTableLabelLeftBottom))}>${o?r.left:r.top}</div></div><div class=${q(kr.squareTableRow)}><div class=${q(kr.squareTableCell)}></div>${s}<div class=${q(kr.squareTableCell)}></div></div><div class=${q(kr.squareTableRow)}><div class=${q(Ui(kr.squareTableCell,kr.squareTableLabel,kr.squareTableLabelRightTop))}>${o?r.right:r.bottom}</div><div class=${q(kr.squareTableCell)}></div><div class=${q(Ui(kr.squareTableCell,kr.squareTableLabel,kr.squareTableLabelLeftTop))}>${o?r.bottom:r.right}</div></div></div>`}_renderRamp(e){const{focus:i,numClasses:r,colors:n,rotation:s}=e,a=this.opacity,o=this.messages.previewRelationshipRampAriaLabel,l=60,c=!!i,h=Math.sqrt(l**2+l**2)+(c?0:5),f=[],g=[],y=[],b=l/r;for(let Y=0;Y<r;Y++){const Q=Y*b;for(let ae=0;ae<r;ae++){const ce=ae*b,ne=QX(n[Y][ae]),K=eJ(null),le={type:"rect",x:ce,y:Q,width:b,height:b},re=_$e(ne);re&&f.push(re);const he=iJ(le,ne.fill,K,null);he&&g.push(he),y.push(b$e(le))}}const _=15,S=15,$=10;let C;c||(C="margin: -15px -15px -18px -15px");const I=this._getLineMarkers("left",i),P=this._getLineMarkers("right",i),O=w$e(y),N=yq(O,h,h,0,!1,s,!1),R=yq(O,h,h,0,!1,c?-45:null,!1),G={filter:this.cssEffectFilter,opacity:a==null?"":`${a}`};return J`<div class=${q(c?kr.diamondMidColRamp:kr.squareTableCell)} style=${Kt(G)}><svg .ariaLabel=${o} height=${h??De} role=img style=${Kt(C)} width=${h??De} xmlns=${Aat}>${Sn`<defs><marker .id=${"arrowStart"} markerHeight=10 markerUnits=strokeWidth markerWidth=10 orient=auto refX=5 refY=5><polyline fill=none points="0,0 5,5 0,10" stroke=#555555 stroke-width=1 /></marker><marker .id=${"arrowEnd"} markerHeight=10 markerUnits=strokeWidth markerWidth=10 orient=auto refX=0 refY=5><polyline fill=none points="5,0 0,5 5,10" stroke=#555555 stroke-width=1 /></marker>${f}</defs><g transform=${N??De}>${g}</g><g transform=${R??De}><line fill=none marker-end=${I.markerEnd??void 0??De} marker-start=${I.markerStart??void 0??De} stroke=#555555 stroke-width=1 x1=${-10} x2=${-10} y1=${l-_} y2=${_} /><line fill=none marker-end=${P.markerEnd??void 0??De} marker-start=${P.markerStart??void 0??De} stroke=#555555 stroke-width=1 x1=${S} x2=${l-S} y1=${l+$} y2=${l+$} /></g>`}</svg></div>`}},yw.properties={cssEffectFilter:1,legendElement:0,opacity:9,messages:0},yw.styles=Mat,yw);nn("arcgis-legend-relationship-ramp",Pat);function $$e(t){return"r"in t&&"g"in t&&"b"in t}function T$e(t){return"h"in t&&"s"in t&&"v"in t}function k$e(t){return"l"in t&&"a"in t&&"b"in t}function E$e(t){return"l"in t&&"c"in t&&"h"in t}function Oat(t){return"x"in t&&"y"in t&&"z"in t}const Lat=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],Dat=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];function C$e(t,e){const i=[];let r,n;if(t[0].length!==e.length)throw new Error("dimensions do not match");const s=t.length,a=t[0].length;let o=0;for(r=0;r<s;r++){for(o=0,n=0;n<a;n++)o+=t[r][n]*e[n];i.push(o)}return i}function I$e(t){const e=[t.r/255,t.g/255,t.b/255].map(r=>r<=.04045?r/12.92:((r+.055)/1.055)**2.4),i=C$e(Lat,e);return{x:100*i[0],y:100*i[1],z:100*i[2]}}function rJ(t){const e=C$e(Dat,[t.x/100,t.y/100,t.z/100]).map(i=>{const r=i<=.0031308?12.92*i:1.055*i**.4166666666666667-.055;return Math.min(1,Math.max(r,0))});return{r:Math.round(255*e[0]),g:Math.round(255*e[1]),b:Math.round(255*e[2])}}function M$e(t){const e=[t.x/95.047,t.y/100,t.z/108.883].map(i=>i>.008856451679035631?i**.3333333333333333:7.787037037037035*i+.13793103448275862);return{l:116*e[1]-16,a:500*(e[0]-e[1]),b:200*(e[1]-e[2])}}function A$e(t){const e=t.l,i=[(e+16)/116+t.a/500,(e+16)/116,(e+16)/116-t.b/200].map(r=>r>6/29?r**3:3*(6/29)**2*(r-4/29));return{x:95.047*i[0],y:100*i[1],z:108.883*i[2]}}function Rat(t){const e=t.l,i=t.a,r=t.b,n=Math.sqrt(i*i+r*r);let s=Math.atan2(r,i);return s=s>0?s:s+2*Math.PI,{l:e,c:n,h:s}}function zat(t){const e=t.l,i=t.c,r=t.h;return{l:e,a:i*Math.cos(r),b:i*Math.sin(r)}}function Fat(t){return M$e(I$e(t))}function Nat(t){return rJ(A$e(t))}function jat(t){return Rat(M$e(I$e(t)))}function Vat(t){return rJ(A$e(zat(t)))}function Bat(t){const e=t.r,i=t.g,r=t.b,n=Math.max(e,i,r),s=n-Math.min(e,i,r);let a=n,o=s===0?0:n===e?(i-r)/s%6:n===i?(r-e)/s+2:(e-i)/s+4,l=s===0?0:s/a;return o<0&&(o+=6),o*=60,l*=100,a*=100/255,{h:o,s:l,v:a}}function Uat(t){const e=(t.h+360)%360/60,i=t.s/100,r=t.v/100*255,n=r*i,s=n*(1-Math.abs(e%2-1));let a;switch(Math.floor(e)){case 0:a={r:n,g:s,b:0};break;case 1:a={r:s,g:n,b:0};break;case 2:a={r:0,g:n,b:s};break;case 3:a={r:0,g:s,b:n};break;case 4:a={r:s,g:0,b:n};break;case 5:case 6:a={r:n,g:0,b:s};break;default:a={r:0,g:0,b:0}}return a.r=Math.round(a.r+r-n),a.g=Math.round(a.g+r-n),a.b=Math.round(a.b+r-n),a}function E_(t){return $$e(t)?t:E$e(t)?Vat(t):k$e(t)?Nat(t):Oat(t)?rJ(t):T$e(t)?Uat(t):t}function JN(t){return T$e(t)?t:Bat(E_(t))}function Hat(t){return k$e(t)?t:Fat(E_(t))}function jRt(t){return E$e(t)?t:jat(E_(t))}function Gat(t){let{r:e,g:i,b:r,a:n}=t;return n<1&&(e=Math.round(n*e+255*(1-n)),i=Math.round(n*i+255*(1-n)),r=Math.round(n*r+255*(1-n))),new Ye({r:e,g:i,b:r})}function P$e(t,e){const{r:i,g:r,b:n}=e?.ignoreAlpha?t:Gat(t);return .2126*i+.7152*r+.0722*n}function VRt(t,e=225){return P$e(t,{ignoreAlpha:!0})>e?new Ye([0,0,0,t.a]):new Ye([255,255,255,t.a])}function BRt(t,e){const i=Hat(t);i.l*=1-e;const r=E_(i),n=t.clone();return n.setColor(r),n.a=t.a,n}function URt(t,e){const i=t.clone();return i.a*=e,i}function HRt(t,e){const i=JN(t);i.s*=e;const r=E_(i),n=t.clone();return n.setColor(r),n.a=t.a,n}function GRt(t){return Ye.toUnitRGBA(t)}function qRt(t){return k_(t[0],t[1],t[2],t.length>3?t[3]:1)}function WRt(t,e){const i=Ye.toUnitRGBA(t);return i[3]*=e,i}function YRt(t,e,i={}){if(t.length===0||e<=0)return[];if((t=t.map(r=>typeof r=="string"?new Ye(r):r)).length===1||e===1){const r=[],n=t[0];for(let s=0;s<e;s++)r.push(n.clone());return r}if(i.shuffle&&(t=Lhe(de(t),i.seed)),t.length>=e){const r=[],n=(t.length-1)/(e-1);for(let s=0;s<e;s++){const a=Math.round(s*n);r.push(t[a].clone())}return r}return qat(t,e,i)}function qat(t,e,i={}){const r=[],n=t.length-1,s=Math.ceil((e-t.length)/n);e:for(let a=0;a<n;a++){const o=t[a],l=t[a+1];for(let c=1;c<=s;c++){const h=c/(s+1);if(r.push(Wat(o,l,h,i)),r.length+t.length===e)break e}}return[...t.map(a=>a.clone()),...Lhe(r,i.seed??1)]}const BB=(t,e)=>{const i=Math.floor(10*e())-5;return Math.min(255,Math.max(0,t+i))};function Wat(t,e,i,r={}){const n=t.r,s=t.g,a=t.b,o=e.r,l=e.g,c=e.b,h=Math.round(n+(o-n)*i),f=Math.round(s+(l-s)*i),g=Math.round(a+(c-a)*i);if(!r.offset)return new Ye([h,f,g]);const y=DW(r.seed);return new Ye([BB(h,y),BB(f,y),BB(g,y)])}const rce=Y8();function Yat(t,e){rce.append(t,e),rce.detach(e)}function JT(t,e,i){const r=Math.ceil(e[0]),n=Math.ceil(e[1]);if(!t.some(a=>!!a.length))return null;const s=i?.node||document.createElement("div");return i.opacity!=null&&(s.style.opacity=i.opacity.toString()),i.cssEffectFilter!=null&&(s.style.filter=i.cssEffectFilter),Yat(s,()=>dat(t,r,n,i)),s}function Zat(t,e){t=Math.ceil(t),e=Math.ceil(e);const i=document.createElement("canvas");i.width=t,i.height=e,i.style.width=t+"px",i.style.height=e+"px";const r=i.getContext("2d");return r.clearRect(0,0,t,e),r}function Xat(t,e,i){return t?Nt(t,{responseType:"image"}).then(r=>{const n=r.data,s=n.width,a=n.height,o=s/a;let l=e;if(i){const c=Math.max(s,a);l=Math.min(l,c)}return{image:n,width:o<=1?Math.ceil(l*o):l,height:o<=1?l:Math.ceil(l/o)}}):Promise.reject(new ee("renderUtils: imageDataSize","href not provided."))}function Jat(t,e){return!(!t||e==="ignore")&&(e!=="multiply"||t.r!==255||t.g!==255||t.b!==255||t.a!==1)}function Kat(t,e,i,r,n){if(n==="multiply")t[e]*=i[0],t[e+1]*=i[1],t[e+2]*=i[2],t[e+3]*=i[3];else{const s=JN({r:t[e],g:t[e+1],b:t[e+2]});s.h=r.h,s.s=r.s,s.v=s.v/100*r.v;const a=E_(s);t[e]=a.r,t[e+1]=a.g,t[e+2]=a.b,t[e+3]*=i[3]}}function Qat(t,e,i,r,n){return Xat(t,e,n).then(s=>{const a=s.width??e,o=s.height??e;if(s.image&&Jat(i,r)){let l=s.image.width,c=s.image.height;ve("edge")&&/\.svg$/i.test(t)&&(l-=1,c-=1);const h=Zat(a,o);h.drawImage(s.image,0,0,l,c,0,0,a,o);const f=h.getImageData(0,0,a,o),g=[i.r/255,i.g/255,i.b/255,i.a],y=JN(i);for(let b=0;b<f.data.length;b+=4)Kat(f.data,b,g,y,r);h.putImageData(f,0,0),t=h.canvas.toDataURL("image/png")}else{const l=oi?.findCredential(t);if(l?.token){const c=t.includes("?")?"&":"?";t=`${t}${c}token=${l.token}`}}return{url:t,width:a,height:o}}).catch(()=>({url:t,width:e,height:e}))}function eot(t){const e=t.symbolLayers?.at(-1);if(e&&"outline"in e)return e?.outline?.size}function tot(t){if(!t)return 0;if(Bd(t)){const e=eot(t);return e??0}return Xi(WI(t)?.width)}function KN(t){if(t==null||!("symbolLayers"in t)||t.symbolLayers==null)return!1;switch(t.type){case"point-3d":return t.symbolLayers.some(e=>e.type==="object");case"line-3d":return t.symbolLayers.some(e=>e.type==="path");case"polygon-3d":return t.symbolLayers.some(e=>e.type==="object"||e.type==="extrude");default:return!1}}function iot(t){return t.resource?.href??""}function ZRt(t,e){if(!t)return null;let i=null;return Bd(t)?i=rot(t):kN(t)&&(i=t.type==="cim"?n$e(t):t.color?new Ye(t.color):null),i?e$(i,e):null}function rot(t){const e=t.symbolLayers;if(!e)return null;let i=null;return e.forEach(r=>{r.type==="object"&&r.resource?.href||(i=r.type==="water"?r.color:r.material?r.material.color:null)}),i?new Ye(i):null}function e$(t,e){if(e==null||t==null)return t;const i=t.toRgba();return i[3]=i[3]*e,new Ye(i)}function not(t,e,i){const r=t.symbolLayers;if(!r)return;const n=(s,a=!1)=>{let o=e??s??null;return i?.override!=null&&(!o&&a&&(o=new Ye([255,255,255])),o&&(o.a=i.override)),e$(o,i?.add)};r.forEach(s=>{if(s.type==="water")return void(s.color=e$(s.color,i?.add));const a=s.material!=null?s.material.color:null,o=n(a,s.type==="icon"&&s.resource?.href!=null);s.material==null?s.material=new bl({color:o}):s.material.color=o,"outline"in s&&s.outline?.color&&i?.add!=null&&(s.outline.color=e$(s.outline.color,i.add)),"marker"in s&&s.marker!=null&&(s.marker.color=n(s.marker.color))})}function sot(t,e,i){e=e??t.color,i?.override!=null&&e&&(e.a=i.override),e&&(t.color=e$(e,i?.add)),"outline"in t&&t.outline?.color&&(t.outline.color=e$(t.outline.color,i?.add))}function UB(t,e,i){t&&(e||i!=null)&&(e&&(e=new Ye(e)),Bd(t)?not(t,e,i):kN(t)&&sot(t,e,i))}async function aot(t,e){const i=t.symbolLayers;i&&await I6e(i,async r=>oot(r,e))}async function oot(t,e){switch(t.type){case"extrude":cot(t,e);break;case"icon":case"line":case"text":lot(t,e);break;case"path":dot(t,e);break;case"object":await uot(t,e)}}function lot(t,e){const i=O$e(e);i!=null&&(t.size=i)}function O$e(t){for(const e of t)if(typeof e=="number")return e;return null}function cot(t,e){const i=e[2];typeof i=="number"&&(t.size=i)}async function uot(t,e){const{resourceSize:i,symbolSize:r}=await hot(t),n=L$e(e,i,r);n!=null&&(t.width=qC(e[0],r[0],i[0],n),t.depth=qC(e[1],r[1],i[1],n),t.height=qC(e[2],r[2],i[2],n))}function dot(t,e){const i=L$e(e,abe,[t.width,void 0,t.height]);i!=null&&(t.width=qC(e[0],t.width,1,i),t.height=qC(e[2],t.height,1,i))}function L$e(t,e,i){for(let r=0;r<3;r++){const n=t[r];switch(n){case"symbol-value":{const s=i[r];return s!=null?s/e[r]:1}case"proportional":break;default:if(n&&e[r])return n/e[r]}}return null}async function hot(t){const{computeObjectLayerResourceSize:e}=await fe(()=>import("./symbolLayerUtils-B37DUIZ4.js"),[]),i=await e(t,10),{width:r,height:n,depth:s}=t,a=[r,s,n];let o=1;for(let l=0;l<3;l++){const c=a[l];if(c!=null){o=c/i[l];break}}for(let l=0;l<3;l++)a[l]==null&&(a[l]=i[l]*o);return{resourceSize:i,symbolSize:a}}function qC(t,e,i,r){switch(t){case"proportional":return i*r;case"symbol-value":return e??i;default:return t}}function pot(t,e){const i=O$e(e);if(i!=null)switch(t.type){case"simple-marker":t.size=i;break;case"picture-marker":{const r=t.width/t.height;r>1?(t.width=i,t.height=i*r):(t.width=i*r,t.height=i);break}case"simple-line":t.width=i;break;case"text":t.font.size=i}}async function fot(t,e){if(t&&e)return Bd(t)?aot(t,e):void(kN(t)&&pot(t,e))}function mot(t,e,i){if(t&&e!=null){if(Bd(t)){const r=t.symbolLayers;r&&r.forEach(n=>{if(n.type==="object")switch(i){case"tilt":n.tilt=(n.tilt??0)+e;break;case"roll":n.roll=(n.roll??0)+e;break;default:n.heading=(n.heading??0)+e}n.type==="icon"&&(n.angle+=e)})}else if(kN(t))switch(t.type){case"simple-marker":case"picture-marker":case"text":t.angle+=e;break;case"cim":Bst(t,e,!0)}}}function got(t,e){if(!t)return null;const i=t.effects.map(r=>r.toJSON());return gG(i)}function XRt(t){return t!=null&&t.type==="polygon-3d"&&t.symbolLayers.some(e=>e.type==="extrude")}const WC={fill:[{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"}],meshSymbol3DFill:[{type:"path",path:"M -10,-8 L 6,0 L 6,6 L -10,6 L -10,-8 Z"},{type:"path",path:"M -10,-8 L -7,-10 L 9,-2 L 6,0 L -10,-8 Z"},{type:"path",path:"M 6,0 L 9,-2 L 9,4 L 6,6 L 6,0 Z"}],pathSymbol3DLayer:[{type:"path",path:"M 3,12 L 12,0 L 11,-2 L -4,5 L -1,5 L 1,7 L 3,10 L 3,12 Z"},{type:"circle",cx:-2,cy:10,r:5}]};function yot(t,e,i){let n=22,s=22;t<1?n*=.75:t>1&&(s*=1.25);const a=0,o=0;let l=22,c=22;return e&&i&&(n=s=l=c=0),[{type:"path",path:[{command:"M",values:[l,a]},{command:"L",values:[i?l:.875*l,a]},{command:"L",values:[i?n-.5*l:o,s-.5*c]},{command:"L",values:[n-.5*l,s-.5*c]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[l,a]},{command:"L",values:[l,e?a:.125*c]},{command:"L",values:[n-.5*l,e?s-.5*c:c]},{command:"L",values:[n-.5*l,s-.5*c]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[n-.5*l,s-.5*c]},{command:"L",values:[i?n-.5*l:o,s-.5*c]},{command:"L",values:[i?n-.5*l:o,e?s-.5*c:c]},{command:"L",values:[n-.5*l,e?s-.5*c:c]},{command:"Z",values:[]}]}]}function vot(t){const i=.5*t,r=0,n=0;return[{type:"path",path:[{command:"M",values:[n,.7*22*.5]},{command:"L",values:[.3*22,.7*22]},{command:"L",values:[.3*22,.7*22+i]},{command:"L",values:[n,.7*22+i-.7*22*.5]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*22,.7*22]},{command:"L",values:[.3*22,.7*22+i]},{command:"L",values:[22,i]},{command:"L",values:[22,r]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*22,r]},{command:"L",values:[22,r]},{command:"L",values:[.3*22,.7*22]},{command:"L",values:[n,.7*22*.5]},{command:"Z",values:[]}]}]}function bot(){return[{type:"path",path:"M80,80.2v-27c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4C8.3,59.3,5.7,58,3.9,56c-1.1-1.2-2.4-2.1-3.9-2.8v27"},{type:"path",path:"M11,59.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8v-24c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-1.1-1.2-2.4-2.1-3.9-2.8v24c1.5,0.7,2.8,1.6,3.9,2.8C5.7,58,8.3,59.3,11,59.4z"},{type:"path",path:"M11,35.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8V3.6c-1.5,0.7-2.8,1.6-3.9,2.8c-2.2,2.1-4.6,3.4-7.1,3.4s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6S42.5,9.9,40,9.9s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.5,0-5-1.3-7.1-3.4C2.8,5.3,1.4,4.3,0,3.6v25.6c1.5,0.7,2.8,1.6,3.9,2.8C5.7,34.1,8.3,35.3,11,35.4z"}]}function wot(t,e){let i=e?20:t;const r=e?4:6;i-=i<=22?.5*r:r;const n=0,s=0,a=e?.35*i:.5*i;return[{type:"path",path:[{command:"M",values:[.5*i,n]},{command:"L",values:[i,.5*a]},{command:"L",values:[.5*i,a]},{command:"L",values:[s,.5*a]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[n,.5*a]},{command:"L",values:[.5*i,a]},{command:"L",values:[.5*i,t]},{command:"L",values:[s,t-.5*a]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.5*i,a]},{command:"L",values:[.5*i,t]},{command:"L",values:[i,t-.5*a]},{command:"L",values:[i,.5*a]},{command:"Z",values:[]}]}]}function _ot(t,e){let i=e?20:t;const r=e?4:6;i-=i<=22?.5*r:r;const n=.5*i,s=.15*i,a=0,o=t-s;return[{type:"ellipse",cx:.5*i,cy:o,rx:n,ry:s},{type:"path",path:[{command:"M",values:[a,s]},{command:"L",values:[a,o]},{command:"L",values:[i,o]},{command:"L",values:[i,s]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*i,cy:s,rx:n,ry:s}]}function xot(t,e){let i=e?20:t;const r=e?4:6;i-=i<=22?.5*r:r;const n=.15*i,s=t-n;return[{type:"ellipse",cx:.5*i,cy:s,rx:.5*i,ry:n},{type:"path",path:[{command:"M",values:[.5*i,0]},{command:"L",values:[i,s]},{command:"L",values:[0,s]},{command:"Z",values:[]}]}]}function Sot(t){let e=t;const i=6;e-=e<22?.5*i:i;const r=.15*e,n=0;return[{type:"path",path:[{command:"M",values:[0,n]},{command:"L",values:[e,n]},{command:"L",values:[.5*e,t-r]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*e,cy:n,rx:.5*e,ry:r}]}function $ot(t){let e=t;const i=t,r=4;e-=e<22?.5*r:r;const n=0,s=0,a=e,o=i,l=Math.floor(t/10)-1||1;return[{type:"path",path:[{command:"M",values:[.45*a,n]},{command:"L",values:[a,.5*o-l]},{command:"L",values:[.45*a-l,.5*o+l]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*a,n]},{command:"L",values:[.45*a-l,.5*o+l]},{command:"L",values:[s,.5*o-l]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[s,.5*o-l]},{command:"L",values:[.45*a-l,.5*o+l]},{command:"L",values:[.45*a,i]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*a,i]},{command:"L",values:[a,.5*o-l]},{command:"L",values:[.45*a-l,.5*o+l]},{command:"Z",values:[]}]}]}function Tot(t){let i=t;i-=i<22?.5*2:2;const r=0,n=0;return[{type:"path",path:[{command:"M",values:[.45*t,r]},{command:"L",values:[t,i]},{command:"L",values:[.45*t,.6*i]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*t,r]},{command:"L",values:[.45*t,.6*i]},{command:"L",values:[n,i]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[n,i]},{command:"L",values:[.45*t,.6*i]},{command:"L",values:[t,i]},{command:"Z",values:[]}]}]}function gv(t,e){return Math.round(Math.min(Math.max(t+255*e*.75,0),255))}function JRt(t,e){if(t==null)return new Ye;if("type"in t&&(t.type==="linear"||t.type==="pattern"))return t;const i=new Ye(t);return new Ye([gv(i.r,e),gv(i.g,e),gv(i.b,e),i.a])}function kot(t){return t=t||globalThis.location.hostname,Eot.some(e=>t?.match(e)!=null)}function nce(t,e){return t?(e=e||globalThis.location.hostname)?e.match(D$e)!=null||e.match(z$e)!=null?t.replace("static.arcgis.com","staticdev.arcgis.com"):e.match(R$e)!=null||e.match(F$e)!=null?t.replace("static.arcgis.com","staticqa.arcgis.com"):t:t:null}const D$e=/^devext\.arcgis\.com$/,R$e=/^qaext\.arcgis\.com$/,z$e=/^[\w-]*\.mapsdevext\.arcgis\.com$/,F$e=/^[\w-]*\.mapsqa\.arcgis\.com$/,Eot=[/^([\w-]*\.)?[\w-]*\.zrh-dev-local\.esri\.com$/,D$e,R$e,/^jsapps\.esri\.com$/,z$e,F$e],Cot=["web-gltf","web","cim"];function N$e(t,e,i){const r=t.name;return r==null?Promise.reject(new ee("symbolstyleutils:style-symbol-reference-name-missing","Missing name in style symbol reference")):t.styleName==="Esri2DPointSymbolsStyle"?Iot(r,e,i):Ixe(t,e,i).then(n=>V$e(n,r,e,jQe,i))}function j$e(t,e){return e.items.find(i=>i.name===t)}async function V$e(t,e,i,r,n){const s=i?.portal!=null?i.portal:Ue.getDefault(),a={portal:s,url:rn(t.baseUrl)},o=j$e(e,t.data);if(!o)throw new ee("symbolstyleutils:symbol-name-not-found",`The symbol name '${e}' could not be found`,{symbolName:e});const l=n?.acceptedFormats??Cot,c=r(o,l);if(!c)throw new ee("symbolstyleutils:symbol-reference-no-accepted-format",`The symbol name '${e}' does not have an accepted format (one of ${l})`,{symbolName:e});const{url:h,format:f}=c;let g=Wm(h,a),y=o.thumbnail?.href??null;const b=o.thumbnail?.imageData;kot()&&(g=nce(g)??"",y=nce(y));const _={portal:s,url:rn(lY(g)),origin:"portal-item"};return IX(g,n).then(S=>{const $=f==="cim"?Mxe(S.data):S.data,C=Exe($,_);if(C&&Bd(C)){if(y){const I=Wm(y,a);C.thumbnail=new Q0({url:I})}else b&&(C.thumbnail=new Q0({url:`data:image/png;base64,${b}`}));t.styleUrl?C.styleOrigin=new Td({portal:i.portal,styleUrl:t.styleUrl,name:e}):t.styleName&&(C.styleOrigin=new Td({portal:i.portal,styleName:t.styleName,name:e}))}return C})}function Iot(t,e,i){const r=VQe.replaceAll(/\{SymbolName\}/gi,t),n=e.portal!=null?e.portal:Ue.getDefault();return IX(r,i).then(s=>{const a=Mxe(s.data);return Exe(a,{portal:n,url:rn(lY(r)),origin:"portal-item"})})}const Mot=Object.freeze(Object.defineProperty({__proto__:null,fetchSymbolFromStyle:V$e,getStyleItemFromStyle:j$e,resolveWebStyleSymbol:N$e},Symbol.toStringTag,{value:"Module"})),P0=22,PD=120,QN=80,sce=50,vq=20;function ES(t){const e=t.outline,i=t.material!=null?t.material.color:null,r=i!=null?i.toHex():null;if(e==null||"pattern"in e&&e.pattern!=null&&e.pattern.type==="style"&&e.pattern.style==="none")return t.type==="fill"&&r==="#ffffff"?{color:"#bdc3c7",width:.75}:null;const n=Fi(e.size)||0;return{color:"rgba("+(e.color!=null?e.color.toRgba():"255,255,255,1")+")",width:Math.min(n,QN),style:"pattern"in e&&e.pattern!=null&&e.pattern.type==="style"?KX(e.pattern.style):null,join:"butt",cap:"patternCap"in e?e.patternCap:"butt"}}async function Aot(t,e){if(t.thumbnail?.url)return t.thumbnail.url;if(e.type==="icon"&&e?.resource?.href)return iot(e);const i=Ur("esri/images/Legend/legend3dsymboldefault.png");if(t.styleOrigin&&(t.styleOrigin.styleName||t.styleOrigin.styleUrl)){const r=await N$e(t.styleOrigin,{portal:t.styleOrigin.portal}).catch(()=>null);if(r&&"thumbnail"in r&&r.thumbnail?.url)return r.thumbnail.url}return i}function HB(t,e=1){const i=t.a,r=JN(t),n=r.h,s=r.s/e,a=100-(100-r.v)/e,{r:o,g:l,b:c}=E_({h:n,s,v:a});return[o,l,c,i]}function Rz(t){return t.type==="water"?t.color==null?null:t.color:t.material?.color==null?null:t.material.color}function Vi(t,e=0){const i=Rz(t);if(!i){if(t.type==="fill")return null;const n=Yst.r,s=gv(n,e);return[s,s,s,100]}const r=i.toRgba();for(let n=0;n<3;n++)r[n]=gv(r[n],e);return r}async function B$e(t,e){const i=t.style;return i==="none"?null:{type:"pattern",x:0,y:0,src:await Wst(Ur(`esri/symbols/patterns/${i}.png`),e.toCss(!0)),width:5,height:5}}function ace(t){return t.outline?ES(t):{color:"rgba(0, 0, 0, 1)",width:1.5}}function nJ(t,e){const i=Rz(t);if(!i)return null;let r="rgba(";return r+=gv(i.r,e)+",",r+=gv(i.g,e)+",",r+=gv(i.b,e)+",",r+i.a+");"}function oce(t,e){const i=t.edges;return!i||!i.color||!i.size?null:{color:i.color.toCss(!0),width:Math.min(Fi(i.size),e,QN),join:"round"}}function bq(t,e){const i=nJ(t,e);if(!i||"pattern"in t&&t.pattern!=null&&t.pattern.type==="style"&&t.pattern.style==="none")return null;const r={color:i,width:Math.min(t.size?Fi(t.size):.75,QN)};return"pattern"in t&&t.pattern?.type==="style"&&(r.style=KX(t.pattern.style)),"cap"in t&&t.cap&&(r.cap=t.cap),"join"in t&&t.join&&(r.join=t.join==="miter"?Fi(2):t.join),r}function oL(t,e,i){const r=i!=null?.75*i:0;return{type:"linear",x1:r?.25*r:0,y1:r?.5*r:0,x2:r||4,y2:r?.5*r:4,colors:[{color:t,offset:0},{color:e,offset:1}]}}function Pot(t){const e=t.depth,i=t.height,r=t.width;return r!==0&&e!==0&&i!==0&&r===e&&r!=null&&i!=null&&r<i}function Oot(t,e,i){const r=[];if(!t)return r;switch(t.type){case"icon":{const a=e,o=e;switch(t.resource?.primitive??n7e){case"circle":r.push({shape:{type:"circle",cx:0,cy:0,r:.5*e},fill:Vi(t,0),stroke:ES(t)});break;case"square":r.push({shape:{type:"path",path:[{command:"M",values:[0,o]},{command:"L",values:[0,0]},{command:"L",values:[a,0]},{command:"L",values:[a,o]},{command:"Z",values:[]}]},fill:Vi(t,0),stroke:ES(t)});break;case"triangle":r.push({shape:{type:"path",path:[{command:"M",values:[0,o]},{command:"L",values:[.5*a,0]},{command:"L",values:[a,o]},{command:"Z",values:[]}]},fill:Vi(t,0),stroke:ES(t)});break;case"cross":r.push({shape:{type:"path",path:[{command:"M",values:[.5*a,0]},{command:"L",values:[.5*a,o]},{command:"M",values:[0,.5*o]},{command:"L",values:[a,.5*o]}]},stroke:ace(t)});break;case"x":r.push({shape:{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[a,o]},{command:"M",values:[a,0]},{command:"L",values:[0,o]}]},stroke:ace(t)});break;case"kite":r.push({shape:{type:"path",path:[{command:"M",values:[0,.5*o]},{command:"L",values:[.5*a,0]},{command:"L",values:[a,.5*o]},{command:"L",values:[.5*a,o]},{command:"Z",values:[]}]},fill:Vi(t,0),stroke:ES(t)})}break}case"object":switch(t.resource?.primitive??c7e){case"cone":{const n=oL(Vi(t,0),Vi(t,-.6),i?vq:e),s=xot(e,i);r.push({shape:s[0],fill:n},{shape:s[1],fill:n});break}case"inverted-cone":{const n=Vi(t,0),s=oL(n,Vi(t,-.6),e),a=Sot(e);r.push({shape:a[0],fill:s},{shape:a[1],fill:n});break}case"cube":{const n=wot(e,i);r.push({shape:n[0],fill:Vi(t,0)},{shape:n[1],fill:Vi(t,-.3)},{shape:n[2],fill:Vi(t,-.5)});break}case"cylinder":{const n=oL(Vi(t,0),Vi(t,-.6),i?vq:e),s=_ot(e,i);r.push({shape:s[0],fill:n},{shape:s[1],fill:n},{shape:s[2],fill:Vi(t,0)});break}case"diamond":{const n=$ot(e);r.push({shape:n[0],fill:Vi(t,-.3)},{shape:n[1],fill:Vi(t,0)},{shape:n[2],fill:Vi(t,-.3)},{shape:n[3],fill:Vi(t,-.7)});break}case"sphere":{const n=oL(Vi(t,0),Vi(t,-.6));n.x1=0,n.y1=0,n.x2=.25*e,n.y2=.25*e,r.push({shape:{type:"circle",cx:0,cy:0,r:.5*e},fill:n});break}case"tetrahedron":{const n=Tot(e);r.push({shape:n[0],fill:Vi(t,-.3)},{shape:n[1],fill:Vi(t,0)},{shape:n[2],fill:Vi(t,-.6)});break}}break}return r}function ej(t){const e=typeof t?.size=="number"?t?.size:null;return e?Fi(e):null}function Lot(t){return t.type==="icon"?"multiply":"tint"}async function Dot(t,e){const i=ej(e),r=e?.maxSize?Fi(e.maxSize):null,n=e?.disableUpsampling??!1,s=t.symbolLayers,a=[],o=[];let l=!1,c=0,h=0,f=0;s.forEach(b=>{if(b.type!=="icon"&&b.type!=="object")return;b&&b.type==="icon"&&(f=Math.max(b.size&&Fi(b.size),f));const _=b.type==="icon"?b.size&&Fi(b.size):0,S=i||_?Math.ceil(Math.min(i||_,r||PD)):P0;let $=b.type==="icon"?b.angle:null;if(e?.rotation!=null&&($=($??0)+e.rotation),o.push($),b?.resource?.href){const C=Aot(t,b).then(I=>{const P=b?.material?.color,O=Lot(b);return Qat(I,S,P,O,n)}).then(I=>{const P=I.width,O=I.height;return c=Math.max(c,P),h=Math.max(h,O),$&&(l=!0),[{shape:{type:"image",x:0,y:0,width:P,height:O,src:I.url},fill:null,stroke:null}]});a.push(C)}else{let C=S;b.type==="icon"&&i&&(C=S*(_/f));const I=e?.symbolConfig==="tall"||e?.symbolConfig?.isTall||b.type==="object"&&Pot(b);c=Math.max(c,I?vq:C),h=Math.max(h,C),$&&b.resource?.primitive&&["square","triangle","x"].includes(b.resource?.primitive)&&(l=!0),a.push(Promise.resolve(Oot(b,C,I)))}});const g=await Promise.allSettled(a),y=[];return g.forEach(b=>{b.status==="fulfilled"?y.push(b.value):b.reason&&$e.getLogger("esri.symbols.support.previewSymbol3D").warn("error while building swatchInfo!",b.reason)}),JT(y,[c,h],{node:e?.node,scale:!1,opacity:e?.opacity,ariaLabel:e?.ariaLabel,rotations:o,useRotationSize:l})}function Rot(t,e){const i=t.symbolLayers,r=[],n=KN(t),s=ej(e),a=(e?.maxSize?Fi(e.maxSize):null)||QN;let o,l=0,c=0;return i.forEach((h,f)=>{if(!h||h.type!=="line"&&h.type!=="path")return;const g=[];switch(h.type){case"line":{const y=bq(h,0);if(y==null)break;const b=y?.width||0;f===0&&(o=b);const _=Math.min(s||b,a),S=f===0?_:s?_*(b/o):_,$=S>sce/2?2*S:sce;c=Math.max(c,S),l=Math.max(l,$),y.width=S,g.push({shape:{type:"path",path:[{command:"M",values:[0,.5*c]},{command:"L",values:[l,.5*c]}]},stroke:y});break}case"path":{const y=Math.min(s||P0,a),b=Vi(h,0),_=Vi(h,-.2),S=nJ(h,-.4),$=S?{color:S,width:1}:{};if(h.profile==="quad"){const C=h.width,I=h.height,P=yot(C&&I?C/I:1,I===0,C===0),O={...$,join:"bevel"};g.push({shape:P[0],fill:_,stroke:O},{shape:P[1],fill:_,stroke:O},{shape:P[2],fill:b,stroke:O})}else g.push({shape:WC.pathSymbol3DLayer[0],fill:_,stroke:$},{shape:WC.pathSymbol3DLayer[1],fill:b,stroke:$});c=Math.max(c,y),l=c}}r.push(g)}),Promise.resolve(JT(r,[l,c],{node:e?.node,scale:n,opacity:e?.opacity,ariaLabel:e?.ariaLabel}))}async function zot(t,e){const i=t.type==="mesh-3d",r=t.symbolLayers,n=ej(e),s=e?.maxSize?Fi(e.maxSize):null,a=n||P0,o=[];let l=0,c=0,h=!1;for(let f=0;f<r.length;f++){const g=r.at(f),y=[];if(!i||g.type==="fill"){switch(g.type){case"fill":{const b=Math.min(a,s||PD);if(l=Math.max(l,b),c=Math.max(c,b),h=!0,i){const _=WC.meshSymbol3DFill,S=nJ(g,-.4),$=oce(g,.05*b)??(S?{join:"round",color:S,width:1}:null);y.push({shape:_[0],fill:Vi(g,0),stroke:$},{shape:_[1],fill:Vi(g,-.2),stroke:$},{shape:_[2],fill:Vi(g,-.6),stroke:$})}else{let _=Vi(g,0);const S="pattern"in g?g.pattern:null,$=ES(g),C=Rz(g);S!=null&&S.type==="style"&&S.style!=="solid"&&C&&(_=await B$e(S,C)),y.push({shape:WC.fill[0],fill:_,stroke:$})}break}case"line":{const b=bq(g,0);if(b==null)break;const _={stroke:b,shape:WC.fill[0]};l=Math.max(l,P0),c=Math.max(c,P0),y.push(_);break}case"extrude":{const b=Vi(g,0),_=Vi(g,-.2),S=Math.min(a,s||PD),$=vot(S),C=P0,I=.7*P0+.5*S,P=oce(g,.1*Math.min(C,I))??{join:"round",...bq(g,-.4),width:1};y.push({shape:$[0],fill:_,stroke:P},{shape:$[1],fill:_,stroke:P},{shape:$[2],fill:b,stroke:P}),l=Math.max(l,C),c=Math.max(c,I);break}case"water":{const b=Rz(g),_=HB(b),S=HB(b,2),$=HB(b,3),C=bot();h=!0,y.push({shape:C[0],fill:_},{shape:C[1],fill:S},{shape:C[2],fill:$});const I=Math.min(a,s||PD);l=Math.max(l,I),c=Math.max(c,I);break}}o.push(y)}}return JT(o,[l,c],{node:e?.node,scale:h,opacity:e?.opacity,ariaLabel:e?.ariaLabel})}function Fot(t,e){if(t.symbolLayers.length===0)return Promise.reject(new ee("symbolPreview: renderPreviewHTML3D","No symbolLayers in the symbol."));switch(t.type){case"point-3d":return Dot(t,e);case"line-3d":return Rot(t,e);case"polygon-3d":case"mesh-3d":return zot(t,e)}return Promise.reject(new ee("symbolPreview: swatchInfo3D","symbol not supported."))}const Not=Object.freeze(Object.defineProperty({__proto__:null,getPatternDescriptor:B$e,getSizeFromOptions:ej,getSymbolLayerFill:Vi,previewSymbol3D:Fot},Symbol.toStringTag,{value:"Module"})),lce={HH:315,HL:45,LL:135,LH:225},jot={2:[["HL","HH"],["LL","LH"]],3:[["HL","HM","HH"],["ML","MM","MH"],["LL","LM","LH"]],4:[["HL","HM1","HM2","HH"],["M2L","M2M1","M2M2","M2H"],["M1L","M1M1","M1M2","M1H"],["LL","LM1","LM2","LH"]]};function Vot(t){if(!t)return;const{type:e}=t;if(e.includes("3d"))return Vi(t.symbolLayers.at(0));if(e==="simple-line"){const i=WI(t);return i&&i.color}if(t.type==="simple-marker"&&(t.style==="x"||t.style==="cross")){const i=WI(t);return i&&i.color}return qst(t)}function Bot(t,e){const i=e.HH.label,r=e.LL.label,n=e.HL.label,s=e.LH.label;switch(t){case"HH":default:return{top:i,bottom:r,left:n,right:s};case"HL":return{top:n,bottom:s,left:r,right:i};case"LL":return{top:r,bottom:i,left:s,right:n};case"LH":return{top:s,bottom:n,left:i,right:r}}}function Uot(t){const{focus:e,infos:i,numClasses:r}=t,n=jot[r],s={};i.forEach(o=>{s[o.value]={label:o.label,fill:Vot(o.symbol)}});const a=[];for(let o=0;o<r;o++){const l=[];for(let c=0;c<r;c++){const h=s[n[o][c]];l.push(h.fill)}a.push(l)}return{type:"relationship-ramp",numClasses:r,focus:e,colors:a,labels:Bot(e,s),rotation:U$e(e)}}function U$e(t){let e=lce[t];return t&&e==null&&(e=lce.HH),e||0}let B1=null;const cce=[255,255,255];function uce(t,e){return Math.floor(Math.random()*(e-t+1)+t)}function Hot(t,e,i){const{backgroundColor:r,outline:n,dotSize:s}=t,a=22,o=.8,l=Math.round(a*a/Math.max(s,.5)**2*o),c=window.devicePixelRatio,h=document.createElement("canvas"),f=a*c;h.width=f,h.height=f,h.style.width=h.width/c+"px",h.style.height=h.height/c+"px";const g=h.getContext("2d");if(r&&(g.fillStyle=r.toCss(!0),g.fillRect(0,0,f,f),g.fill()),g.fillStyle=e?.toCss(!0)??"",B1&&B1.length/2===l)for(let b=0;b<2*l;b+=2){const _=B1[b],S=B1[b+1];g.fillRect(_,S,s*c,s*c),g.fill()}else{B1=[];for(let b=0;b<2*l;b+=2){const _=uce(0,f),S=uce(0,f);B1.push(_,S),g.fillRect(_,S,s*c,s*c),g.fill()}}n&&(n.color&&(g.strokeStyle=n.color.toCss(!0)),g.lineWidth=n.width,g.strokeRect(0,0,f,f));const y=new Image(a,a);return y.src=h.toDataURL(),y.ariaLabel=null,y.alt="",y}function Got(t,e={}){const i=e.radius||40,r=2*Math.PI*i,n=t.length,s=r/n,a=[],o=WI(e.outline);o?.width!=null&&(o.width*=2),(o||e.backgroundColor)&&a.push({shape:{type:"circle",cx:i,cy:i,r:i},fill:e.backgroundColor,stroke:o,offset:[0,0]});const l=e.values,c=l&&l.length===n&&l.reduce((b,_)=>b+_,0)===100,h=[0];for(let b=0;b<n;b++){let _=null;c&&(_=l[b]*r/100,h.push(_+h[b])),a.push({shape:{type:"circle",cx:i,cy:i,r:i/2},fill:[0,0,0,0],stroke:{width:i,dashArray:`${(_??s)/2} ${r}`,dashoffset:"-"+(c?h[b]/2:b*(s/2)),color:t[b]},offset:[0,0]})}let f=null;const g=2*i+(o?.width||0),y=e.holePercentage;if(y){o&&a.push({shape:{type:"circle",cx:i,cy:i,r:i*y},fill:null,stroke:o,offset:[0,0]});const b=g/2;f=[[{shape:{type:"circle",cx:b,cy:b,r:b},fill:cce,stroke:o?{...o,color:cce}:null,offset:[0,0]},{shape:{type:"circle",cx:b,cy:b,r:i*y},fill:[0,0,0],stroke:null,offset:[0,0]}]]}return JT([a],[g,g],{cssEffectFilter:e.cssEffectFilter,ignoreStrokeWidth:!0,masking:f,rotations:[-90],ariaLabel:e.ariaLabel})}function y0(t,e={}){const n=e.align==="horizontal",s=n?75:24,a=n?24:75,o=e.width??s,l=e.height??a,c=e.gradient??!0,h=window.devicePixelRatio,f=o*h,g=l*h,y=document.createElement("canvas");y.width=f,y.height=g,y.ariaLabel=e.ariaLabel??null,y.style.width=`${o}px`,y.style.height=`${l}px`;const b=y.getContext("2d"),_=n?f:0,S=n?0:g;if(c){const C=b.createLinearGradient(0,0,_,S),I=t.length,P=I===1?0:1/(I-1);t.forEach((O,N)=>C.addColorStop(N*P,O.toString())),b.fillStyle=C,b.fillRect(0,0,f,g)}else{const C=n?f/t.length:f,I=n?g:g/t.length;let P=0,O=0;for(const N of t)b.fillStyle=N.toString(),b.fillRect(P,O,C,I),P=n?P+C:0,O=n?0:O+I}const $=document.createElement("div");return $.style.width=`${o}px`,$.style.height=`${l}px`,Wot($,e?.cssEffectFilter),$.appendChild(y),$}function qot(t){const e=t.match(/drop-shadow\(\s*([^\s]+)\s+[^\s]+\s+[^\s]+\s+.+?\)/);return e?e[1]:null}function Wot(t,e){if(!e)return;t.style.filter=e;const i=qot(e);if(i){const r=Fi(xi(i));r<0?t.style.marginLeft=`${Math.abs(r)}px`:t.style.marginRight=`${r}px`}}async function H$e(t,e){switch(t.type){case"web-style":{const{previewWebStyleSymbol:i}=await fe(()=>import("./previewWebStyleSymbol-Dc7EH_dc.js"),[]);return i(t,H$e,e)}case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":{const{previewSymbol3D:i}=await fe(()=>Promise.resolve().then(()=>Not),void 0);return i(t,e)}case"simple-marker":case"simple-line":case"simple-fill":case"picture-marker":case"picture-fill":case"text":{const{previewSymbol2D:i}=await fe(()=>import("./previewSymbol2D-CUeyGXIk.js"),__vite__mapDeps([287,189]));return i(t,e)}case"cim":{const{previewCIMSymbol:i}=await fe(()=>Promise.resolve().then(()=>tpt),void 0);return i(t,e)}default:return}}function G$e(t){return t&&t.opacity!==void 0?t.opacity*("parent"in t?G$e(t.parent):1):1}async function KRt(t,e){if(!t)return;const i=t.sourceLayer,r=(e!=null&&e.useSourceLayer?i:t.layer)??i,n=e?.ignoreOpacity?1:G$e(r);if(t.symbol!=null&&(e==null||e.ignoreGraphicSymbol!==!0)){const P=t.symbol.type==="web-style"?await t.symbol.fetchSymbol({...e,acceptedFormats:e?.webStyleAcceptedFormats,cache:e?.webStyleCache}):t.symbol.clone();return UB(P,null,{add:n}),P}const s=e?.renderer??Zot(r);let a=s&&"getSymbolAsync"in s?await s.getSymbolAsync(t,e):null;if(!a)return;if(a=a.type==="web-style"?await a.fetchSymbol({...e,acceptedFormats:e?.webStyleAcceptedFormats,cache:e?.webStyleCache}):a.clone(),!(s&&"visualVariables"in s&&s.visualVariables?.length&&Yot(a)))return UB(a,null,{add:n}),a;if("arcadeRequiredForVisualVariables"in s&&s.arcadeRequiredForVisualVariables&&e?.arcade==null){const P={...e};P.arcade=await Xm(),e=P}const{getColor:o,getOpacity:l,getAllSizes:c,getRotationAngle:h}=await fe(()=>Promise.resolve().then(()=>$_),void 0),f=[],g=[],y=[],b=[];for(const P of s.visualVariables)switch(P.type){case"color":f.push(P);break;case"opacity":g.push(P);break;case"rotation":b.push(P);break;case"size":P.target||y.push(P)}const _=!!f.length&&f[f.length-1],S=_?o(_,t,e):null,$=!!e?.ignoreOpacity,C=!!g.length&&g[g.length-1],I=C?l(C,t,e):null;if(UB(a,S,$?void 0:{override:I,add:n}),y.length&&e?.ignoreSizeVariables!==!0){const P=c(y,t,e);await fot(a,P)}if(e?.ignoreRotationVariables!==!0)for(const P of b)mot(a,h(P,t,e),P.axis);return a}function Yot(t){return!Bd(t)||t.symbolLayers.at(0)?.type!=="water"}function Zot(t){if(t)return"renderer"in t?t.renderer:void 0}const q$e=10,sJ=20,tj=10,aJ=20,oJ={univariateAboveAndBelowSymbol:"arcgis-univariate-above-and-below-ramp__symbol",colorRamp:"arcgis-legend__color-ramp"};function sT(t){return typeof t=="number"}function Xot(t="vertical"){const e="stroke:rgb(200, 200, 200);stroke-width:1";return t==="vertical"?J`<svg height=4 width=10>${Sn`<line style=${Kt(e)} x1=0 x2=10 y1=2 y2=2 />`}</svg>`:J`<svg height=10 width=10>${Sn`<line style=${Kt(e)} x1=5 x2=5 y1=0 y2=10 />`}</svg>`}function Jot(t,e="vertical"){const i={height:`${sJ}px`,opacity:t?.toString()};return J`<div class=${q(oJ.univariateAboveAndBelowSymbol)} style=${Kt(i)}>${Xot(e)}</div>`}function W$e(t,e,i,r="vertical",n){t.infos.forEach((s,a)=>{if(n&&a===2){s.preview=Sge(Jot(i,r));return}else{const o=(sT(s.size)?Dd(s.size):0)+(r==="horizontal"?aJ:tj),l=s.preview,c=l?.tagName.toLowerCase()==="div",h=c?l:document.createElement("div");h.className=oJ.univariateAboveAndBelowSymbol,r==="horizontal"?h.style.width=`${o}px`:h.style.height=`${o}px`,!c&&l&&h.appendChild(l),Hp(h,Jm(e,s.label)),s.preview=h}})}function ij(t,e="classic"){const i=t.infos,r=i.at(0),n=i.at(-1),s=sT(r.size)?Dd(r.size):0,a=sT(n.size)?Dd(n.size):0;return e==="classic"?(s+tj)/2:(s-a)/2}function aT(t,e){if(!t)return null;const i=t.infos.map(n=>n.color),r=y0(e.type==="full"?i:e.type==="above"?i.slice(0,3):i.slice(2,5),{width:e.width??void 0,height:e.height??void 0,align:e.rampAlignment,cssEffectFilter:e.cssEffectFilter,ariaLabel:e.ariaLabel??void 0});return r.className=oJ.colorRamp,e.opacity!=null&&(r.style.opacity=e.opacity.toString()),r}function lJ(t,e,i,r="vertical"){let n=0;const s=t.infos,a=Math.floor(s.length/2),o=e==="full"||e==="above"?0:a,l=e==="full"||e==="below"?s.length-1:a;for(let c=o;c<=l;c++)if(i&&c===a)n+=r==="horizontal"?q$e:sJ;else{const h=s[c].size,f=(sT(h)?Dd(h):0)+(r==="horizontal"?aJ:tj);n+=f}return Math.round(n)}function oT(t,e,i,r="vertical"){const n=lJ(t,e,i,r),s=t.infos,a=Math.floor(s.length/2),o=e==="full"||e==="above"?0:a,l=e==="full"||e==="below"?s.length-1:a,c=sT(s[o].size)?s[o].size:0,h=sT(s[l].size)?s[l].size:0,f=e==="full"?c+h:e==="above"?c:h,g=i?r==="vertical"?sJ:q$e:0,y=r==="vertical"?tj*(e==="full"?2:1):aJ*(e==="full"?2:1);return Math.round(n-(Dd(f)/2+g/2+y/2))}function Y$e(t,e,i,r="vertical"){const n=t.infos;let s=n.find(({type:o})=>o==="size-ramp"),a=n.find(({type:o})=>o==="color-ramp");return s&&(s={...s},s.infos=[...s.infos],W$e(s,e,i,r,!0)),a&&(a={...a},a.infos=[...a.infos]),r==="horizontal"&&(s?.infos.reverse(),a?.infos.reverse()),{sizeRampElement:s,colorRampElement:a}}function Z$e(t,e,i="vertical"){const r=t.infos;let n=r.find(({type:a})=>a==="size-ramp"),s=r.find(({type:a})=>a==="color-ramp");return n&&(n={...n},n.infos=[...n.infos],W$e(n,e,null,i,!1)),s&&(s={...s},s.infos=[...s.infos]),i==="horizontal"&&(n?.infos.reverse(),s?.infos.reverse()),{sizeRampElement:n,colorRampElement:s}}const wq={marginLeft:"3px"},CS={display:"table-cell",verticalAlign:"middle"},X$e={display:"flex",alignItems:"flex-start"};const Kot=St`.arcgis-legend--card__layer-row{display:flex;align-items:center}.arcgis-legend--card__symbol{display:block;margin:auto}.arcgis-legend--card__symbol-container{position:relative}.arcgis-legend__ramp-labels{display:flex;flex-flow:column nowrap;justify-content:space-between}.arcgis-legend__layer-cell{padding:var(--calcite-spacing-xxs) 0;min-width:100px;vertical-align:middle;word-break:break-word}.arcgis-legend__layer-cell--info{padding-right:var(--calcite-spacing-sm);padding-left:var(--calcite-spacing-sm);max-width:250px;word-break:normal;word-wrap:normal;font-size:var(--calcite-font-size-sm)}.arcgis-univariate-above-and-below-ramp__color--card{position:relative}.arcgis-univariate-above-and-below-ramp__color--card:before{content:"";border-left:var(--calcite-border-width-sm) solid var(--calcite-color-background);border-right:var(--calcite-border-width-sm) solid var(--calcite-color-background);width:100%;height:15px;display:block;position:absolute;top:var(--calcite-border-width-sm)}.arcgis-univariate-above-and-below-ramp__symbol{display:flex;align-items:center;justify-content:center}`,U1={layerRow:"arcgis-legend--card__layer-row",symbol:"arcgis-legend--card__symbol",symbolContainer:"arcgis-legend--card__symbol-container",rampLabelsContainer:"arcgis-legend__ramp-labels",layerInfo:"arcgis-legend__layer-cell arcgis-legend__layer-cell--info",univariateAboveAndBelowColorRamp:"arcgis-univariate-above-and-below-ramp__color--card"};var vw;let Qot=(vw=class extends Et{constructor(){super(...arguments),this._direction=iN(),this.legendElement=null,this.opacity=1}render(){const{legendElement:e,opacity:i}=this,{sizeRampElement:r,colorRampElement:n}=Y$e(e,this.messages,i,"horizontal");if(!r)return null;const s=lJ(r,"full",!0,"horizontal"),a=oT(r,"above",!0,"horizontal"),o=oT(r,"below",!0,"horizontal"),l=12,c=this.messages?.previewColorRampAriaLabel,h=aT(n,{width:a,height:l,rampAlignment:"horizontal",opacity:i,type:"above",cssEffectFilter:this.cssEffectFilter,ariaLabel:c}),f=aT(n,{width:o,height:l,rampAlignment:"horizontal",opacity:i,type:"below",cssEffectFilter:this.cssEffectFilter,ariaLabel:c}),g=ij(r,"card"),y=r.infos.map(P=>P.label),b=y.length-1,_=y.map((P,O)=>O===0||O===b?J`<div>${P}</div>`:null),S={display:"flex",flexDirection:"column"},$={display:"flex",flexDirection:"row"},C={marginTop:"3px",display:"flex"};this._direction==="rtl"?C.marginRight=`${g}px`:C.marginLeft=`${g}px`;const I={width:`${s}px`,display:"flex",flexDirection:"row",justifyContent:"space-between"};return J`<div class=${q(U1.layerRow)} style=${Kt(S)}><div class=${q(U1.symbolContainer)} style=${Kt($)}>${r.infos.map(P=>J`<div class=${q(U1.symbol)}>${P.preview}</div>`)}</div>${h?J`<div class=${q(U1.univariateAboveAndBelowColorRamp)} style=${Kt(C)}><div>${h}</div><div>${f}</div></div>`:null}<div class=${q(U1.layerInfo)}><div class=${q(U1.rampLabelsContainer)} style=${Kt(I)}>${_}</div></div></div>`}},vw.properties={cssEffectFilter:1,legendElement:0,opacity:9,messages:0},vw.styles=Kot,vw);nn("arcgis-legend-card-univariate-above-and-below-ramp",Qot);const elt=St`.arcgis-legend--card__layer-row,.arcgis-legend--card__symbol{display:flex;align-items:center}.arcgis-legend--card__symbol-container{position:relative}.arcgis-legend__ramp-labels{display:flex;flex-flow:column nowrap;justify-content:space-between}.arcgis-legend__layer-cell{padding:var(--calcite-spacing-xxs) 0;min-width:100px;vertical-align:middle;word-break:break-word}.arcgis-legend__layer-cell--info{padding-right:var(--calcite-spacing-sm);padding-left:var(--calcite-spacing-sm);max-width:250px;word-break:normal;word-wrap:normal;font-size:var(--calcite-font-size-sm)}.arcgis-univariate-above-and-below-ramp__color--card{position:relative}.arcgis-univariate-above-and-below-ramp__color--card:before{content:"";border-left:var(--calcite-border-width-sm) solid var(--calcite-color-background);border-right:var(--calcite-border-width-sm) solid var(--calcite-color-background);width:100%;height:15px;display:block;position:absolute;top:var(--calcite-border-width-sm)}.arcgis-univariate-above-and-below-ramp__symbol{display:flex;align-items:center;justify-content:center}`,H1={layerRow:"arcgis-legend--card__layer-row",symbol:"arcgis-legend--card__symbol",symbolContainer:"arcgis-legend--card__symbol-container",rampLabelsContainer:"arcgis-legend__ramp-labels",layerInfo:"arcgis-legend__layer-cell arcgis-legend__layer-cell--info",univariateAboveAndBelowColorRamp:"arcgis-univariate-above-and-below-ramp__color--card"};var bw;let tlt=(bw=class extends Et{constructor(){super(...arguments),this._direction=iN(),this.legendElement=null,this.opacity=1}render(){const{legendElement:e,opacity:i}=this,{sizeRampElement:r,colorRampElement:n}=Z$e(e,this.messages,"horizontal");if(!r)return null;const s=lJ(r,"full",!1,"horizontal"),a=oT(r,"full",!1,"horizontal"),o=aT(n,{width:a,height:12,rampAlignment:"horizontal",opacity:i,type:"full",cssEffectFilter:this.cssEffectFilter,ariaLabel:this.messages?.previewColorRampAriaLabel}),l=ij(r,"card"),c=r.infos.length-1,h=r.infos.map((_,S)=>S===0||S===c?J`<div>${_.label}</div>`:null),f={display:"flex",flexDirection:"column"},g={display:"flex",flexDirection:"row"},y={marginTop:"3px",display:"flex"};this._direction==="rtl"?y.marginRight=`${l}px`:y.marginLeft=`${l}px`;const b={width:`${s}px`,display:"flex",flexDirection:"row",justifyContent:"space-between"};return J`<div class=${q(H1.layerRow)} style=${Kt(f)}><div class=${q(H1.symbolContainer)} style=${Kt(g)}>${r.infos.map(_=>J`<div class=${q(H1.symbol)}>${_.preview}</div>`)}</div><div class=${q(H1.univariateAboveAndBelowColorRamp)} style=${Kt(y)}><div>${o}</div></div><div class=${q(H1.layerInfo)}><div class=${q(H1.rampLabelsContainer)} style=${Kt(b)}>${h}</div></div></div>`}},bw.properties={cssEffectFilter:1,legendElement:0,opacity:9,messages:0},bw.styles=elt,bw);nn("arcgis-legend-card-univariate-color-size-ramp",tlt);const zo={disabled:"esri-disabled",empty:"esri-widget__content--empty",heading:"esri-widget__heading",loaderAnimation:"esri-widget__loader-animation",panel:"esri-widget--panel",widget:"esri-widget",widgetButton:"esri-widget--button"};function YI({level:t,class:e,id:i,children:r,excludeGlobalCss:n}){const s=rlt(t),a=`h${s}`,o=qye(a);return GM`<${o} .ariaLevel=${String(s)} class=${q(Ui(n?e:zo.heading,e))} id=${i??De} role=heading>${r}</${o}>`}function ilt(t,e,i){return Math.min(Math.max(t,e),i)}function rlt(t){return ilt(Math.ceil(t),1,6)}const nlt=St`.esri-widget__heading{color:var(--calcite-color-text-2);margin:0 0 .5rem;font-weight:var(--calcite-font-weight-semibold)}h1.esri-widget__heading{font-size:var(--calcite-font-size-xl)}h2.esri-widget__heading{font-size:var(--calcite-font-size-md)}h3.esri-widget__heading,h4.esri-widget__heading,h5.esri-widget__heading,h6.esri-widget__heading{font-size:var(--calcite-font-size)}.arcgis-legend--card__section{word-break:break-word;word-wrap:break-word;padding:var(--calcite-spacing-sm) var(--calcite-spacing-md);min-width:250px;max-width:500px;height:100%;height:-moz-available;height:-webkit-fill-available;height:fill-available;overflow:auto;font-size:var(--calcite-font-size-sm)}.arcgis-legend--card__carousel-title-container{margin-bottom:var(--calcite-spacing-sm)}.arcgis-legend--card__carousel-title{margin:0}.arcgis-legend--card__section-title{font-weight:var(--calcite-font-weight-normal)}.arcgis-legend--card__layer-caption{padding:var(--calcite-spacing-xs) 0;margin:0;font-weight:var(--calcite-font-weight-normal)}.arcgis-legend--card__imagery-layer-image--stretched{display:block;margin-bottom:-2px}.arcgis-legend--card__image-label{padding-right:var(--calcite-spacing-xs);padding-left:var(--calcite-spacing-xs)}.arcgis-legend--card__label-element{margin:.1em;padding:.5em 1em;min-width:2em;min-height:1em;text-align:center;display:flex;align-items:center;justify-content:center;flex:1}.arcgis-legend--card__layer-row{display:flex;align-items:center}.arcgis-legend--card__symbol{display:block;margin:auto}.arcgis-legend--card__pie-chart-ramp-preview{display:flex;justify-content:center}.arcgis-legend--card__relationship-container{display:flex;flex-direction:column}.arcgis-legend--card__relationship-container .arcgis-legend--card__layer-row{padding-bottom:.5em}.arcgis-legend--card__relationship-container .arcgis-legend--card__layer-row:last-child{padding-bottom:0}.arcgis-legend--card__container{display:flex;gap:var(--calcite-spacing-sm);flex-wrap:wrap}.arcgis-legend--card__background-styles-container{display:flex;flex-wrap:wrap}:host([stacked]) .arcgis-legend--card__container{display:table}:host([stacked]) .arcgis-legend--card__symbol-row{display:table-row;width:100%}:host([stacked]) .arcgis-legend--card__label-cell{display:table-cell;vertical-align:middle;padding:var(--calcite-spacing-xxs)}:host([stacked]) .arcgis-legend--card__symbol-cell{display:table-cell;vertical-align:middle;text-align:center;padding:var(--calcite-spacing-xxs)}:host([stacked]) .arcgis-legend--card__symbol-cell div{display:flex;align-items:center;justify-content:center}`,yn={carouselTitleContainer:"arcgis-legend--card__carousel-title-container",carouselTitle:"arcgis-legend--card__carousel-title",sectionTitle:"arcgis-legend--card__section-title",imageryLayerStretchedImage:"arcgis-legend--card__imagery-layer-image--stretched",imageLabel:"arcgis-legend--card__image-label",layerCaption:"arcgis-legend--card__layer-caption",labelElement:"arcgis-legend--card__label-element",layerRow:"arcgis-legend--card__layer-row",labelCell:"arcgis-legend--card__label-cell",section:"arcgis-legend--card__section",symbol:"arcgis-legend--card__symbol",symbolRow:"arcgis-legend--card__symbol-row",symbolCell:"arcgis-legend--card__symbol-cell",pieChartRampPreview:"arcgis-legend--card__pie-chart-ramp-preview",relationshipContainer:"arcgis-legend--card__relationship-container",backgroundStylesContainer:"arcgis-legend--card__background-styles-container",container:"arcgis-legend--card__container"};function slt(t){return t?t.r*.299+t.g*.587+t.b*.114>=127:void 0}var ww;let alt=(ww=class extends Et{constructor(){super(...arguments),this.stacked=!1,this.headingLevel=3}_getBackgroundStyles(e){const i=e.symbol,r=i.color,n=!!r?.a,s="outline"in i?i.outline:null,a=!!s?.color?.a,o=n&&r?new Ye([r.r,r.g,r.b,r.a*this.layer.opacity]):new Ye([255,255,255,0]),l=a&&s.color?new Ye([s.color.r,s.color.g,s.color.b,s.color.a*this.layer.opacity]):new Ye([255,255,255,0]),c=slt(e.symbol.color)??!0,h=c?"black":"white",f=c?"rgba(255, 255, 255, .6)":"rgba(0, 0, 0, .6)";return{background:n?o.toCss(!0):"none",color:h,textShadow:`-1px -1px 0 ${f},
                  1px -1px 0 ${f},
                  -1px 1px 0 ${f},
                  1px 1px 0 ${f}`,border:a?`1px solid ${l.toCss(!0)}`:"none",filter:this.cssEffectFilter??""}}render(){const e=this._renderLegendElement(),i=e$e(this.legendElement,this.messages),r=this.stacked?J`<div class=${q(yn.carouselTitleContainer)}>${YI({class:Ui(yn.carouselTitle,zo.heading),level:this.headingLevel,children:this.activeLayerInfo.title})}${i?J`<p class=${q(yn.layerCaption)}>${i}</p>`:null}</div>`:i?YI({class:Ui(yn.sectionTitle,zo.heading),level:this.headingLevel,children:i}):null;return J`<section class=${q(yn.section)} role=tabpanel tabindex=0>${r}${e}</section>`}_renderLegendElement(){switch(this.legendElement.type){case"symbol-table":return this._renderSymbolTable(this.legendElement);case"size-ramp":return J`<arcgis-legend-card-size-ramp .hasIndicators=${this.stacked} .legendElement=${this.legendElement} .messages=${this.messages} .opacity=${this.layer.opacity}></arcgis-legend-card-size-ramp>`;case"color-ramp":case"opacity-ramp":case"heatmap-ramp":case"stretch-ramp":return J`<arcgis-legend-card-color-ramp .cssEffectFilter=${this.cssEffectFilter} .legendElement=${this.legendElement} .messages=${this.messages} .opacity=${this.layer.opacity}></arcgis-legend-card-color-ramp>`;case"relationship-ramp":return J`<arcgis-legend-relationship-ramp .cssEffectFilter=${this.cssEffectFilter} .legendElement=${this.legendElement} .opacity=${this.layer.opacity} .messages=${this.messages}></arcgis-legend-relationship-ramp>`;case"pie-chart-ramp":{const{preview:e}=this.legendElement;return Hp(e,this.messages.previewPieChartAriaLabel),J`<div class=${q(yn.pieChartRampPreview)}>${e}</div>`}case"univariate-above-and-below-ramp":return J`<arcgis-legend-card-univariate-above-and-below-ramp .cssEffectFilter=${this.cssEffectFilter} .legendElement=${this.legendElement} .messages=${this.messages} .opacity=${this.layer.opacity}></arcgis-legend-card-univariate-above-and-below-ramp>`;case"univariate-color-size-ramp":return J`<arcgis-legend-card-univariate-color-size-ramp .cssEffectFilter=${this.cssEffectFilter} .legendElement=${this.legendElement} .messages=${this.messages} .opacity=${this.layer.opacity}></arcgis-legend-card-univariate-color-size-ramp>`;default:return null}}_renderSymbolTable(e){const i=e.infos.map(s=>this._renderElementInfo(s,e.legendType)).filter(Boolean);if(!i.length)return null;const r=e.infos.some(s=>"symbol"in s&&s.symbol?.type.includes("simple-fill")),n=this.activeLayerInfo.legendElements.some(({type:s})=>s==="relationship-ramp")?yn.relationshipContainer:r?yn.backgroundStylesContainer:yn.container;return J`<div class=${q(n)}>${i}</div>`}_renderElementInfo(e,i){const{layer:r}=this,n="label"in e?e.label:null;if("type"in e&&e.type)return J`<arcgis-legend-card-element .activeLayerInfo=${this.activeLayerInfo} .cssEffectFilter=${this.cssEffectFilter} .stacked=${this.stacked} .headingLevel=${this.headingLevel} .layer=${r} .legendElement=${e} .messages=${this.messages}></arcgis-legend-card-element>`;if(!("preview"in e&&e.preview)&&!("src"in e&&e.src))return null;const s=i$e(r,i),a=Um(this.messages,n,!1)||"";if("src"in e&&e.src){const o={[yn.symbolCell]:this.stacked};return J`<div class=${q(Ui(yn.layerRow,{[yn.symbolRow]:this.stacked}))}><div class=${q(Ui(o))}>${this._renderImage(e,r,s)}</div><div class=${q(Ui(yn.imageLabel,{[yn.labelCell]:this.stacked}))}>${a}</div></div>`}if("symbol"in e&&e.preview){if(!e.symbol?.type.includes("simple-fill")){if(!e.label)return J`<div>${e.preview}</div>`;const o={[yn.symbolCell]:this.stacked},{preview:l}=e,c="previewAriaLabel"in e?e.previewAriaLabel:null,h="label"in e?Um(this.messages,e.label,!1):null;return Hp(l,Jm(this.messages,c||h)),J`<div class=${q(Ui(yn.layerRow,{[yn.symbolRow]:this.stacked}))}><div class=${q(Ui(o))}>${l}</div><div class=${q(Ui(yn.imageLabel,{[yn.labelCell]:this.stacked}))}>${a}</div></div>`}return J`<div class=${q(yn.layerRow)}><div class=${q(yn.labelElement)} style=${Kt(this._getBackgroundStyles(e))}>${a}</div></div>`}return null}_renderImage(e,i,r){const{previewAriaLabel:n,src:s,opacity:a}=e,o=Um(this.messages,e.label,!1),l={[yn.imageryLayerStretchedImage]:r,[yn.symbol]:!r},c={opacity:`${a??i.opacity}`},h=Jm(this.messages,n||o);return J`<img alt=${h??De} .ariaLabel=${h} class=${q(Ui(l))} height=${e.height??void 0??De} src=${s??De} style=${Kt(c)} width=${e.width??void 0??De}>`}},ww.properties={cssEffectFilter:1,stacked:7,activeLayerInfo:0,headingLevel:9,layer:0,legendElement:0,messages:0},ww.styles=nlt,ww);nn("arcgis-legend-card-element",alt);const olt=St`.esri-widget__heading{color:var(--calcite-color-text-2);margin:0 0 .5rem;font-weight:var(--calcite-font-weight-semibold)}h1.esri-widget__heading{font-size:var(--calcite-font-size-xl)}h2.esri-widget__heading{font-size:var(--calcite-font-size-md)}h3.esri-widget__heading,h4.esri-widget__heading,h5.esri-widget__heading,h6.esri-widget__heading{font-size:var(--calcite-font-size)}:host{display:flex;flex-direction:row;position:relative;transition:max-width .25s ease-in-out;overflow-x:auto}calcite-carousel-item[selected]{flex:1;overflow:auto}.arcgis-legend--card__message{padding:.5em 1em}.arcgis-legend--card__service-caption-text{margin:0}.arcgis-legend--card__service-content{display:flex;flex:1}.arcgis-legend--card__service-content>arcgis-legend-card-element:not(:first-child){border-left:1px solid var(--calcite-color-border-2)}.arcgis-legend--card__service{border-left:var(--calcite-border-width-sm) solid var(--calcite-color-border-2);min-width:fit-content;display:flex;flex-direction:column;flex:1}.arcgis-legend--card__service-caption-container{border-bottom:1px solid var(--calcite-color-border-2);padding:var(--calcite-spacing-md)}`,Ob={message:"arcgis-legend--card__message",serviceCaptionText:"arcgis-legend--card__service-caption-text",serviceContent:"arcgis-legend--card__service-content",service:"arcgis-legend--card__service",serviceCaptionContainer:"arcgis-legend--card__service-caption-container"},llt=768;var _w;let clt=(_w=class extends Et{constructor(){super(...arguments),this.stacked=!1,this.headingLevel=3,this.layout="auto",this.type="card"}loaded(){this.manager.onLifecycle(()=>[ze(()=>[this.layout,this.view.width],()=>{this.stacked=this.layout==="stack"||(!this.layout||this.layout==="auto")&&this.view.width<=llt},{initial:!0})])}render(){return(this.stacked?this._renderCarousel():this._renderLayers())||J`<div class=${q(Ob.message)}>${this.messages.noLegend}</div>`}_renderTitle(e){return J`<div class=${q(Ob.serviceCaptionContainer)}>${YI({class:Ui(Ob.serviceCaptionText,zo.heading),level:this.headingLevel,children:e})}</div>`}_renderCarousel(){const e=[],i=this.activeLayerInfos;if(i)for(const r of i)this._renderSections(r,e);return e?.length?J`<calcite-carousel .label=${this.messages.carousel??""}>${e.map((r,n)=>J`<calcite-carousel-item .label=${Fp(this.messages?.pagination?.pageText??"",{index:n+1,total:e.length})}>${r}</calcite-carousel-item>`)}</calcite-carousel>`:null}_renderLayers(){const e=this.activeLayerInfos?.toArray()?.map(i=>this._renderLegendForLayer(i)).filter(Boolean);return e?.length?e:null}_renderLegendForLayer(e){if(!e.ready)return null;if(e.children.length){const i=e.children.toArray().map(this._renderLegendForLayer,this);return J`<section class=${q(Ob.service)}>${this._renderTitle(e.title)}<div class=${q(Ob.serviceContent)}>${i}</div></section>`}return this._renderLegendElementsForLayer(e)}_renderLegendElementsForLayer(e){const i=e.legendElements?.filter(Boolean);if(!i?.length)return null;const r=i.map(n=>J`<arcgis-legend-card-element .activeLayerInfo=${e} .cssEffectFilter=${e.cssEffectFilter??void 0} .stacked=${this.stacked} .headingLevel=${this.headingLevel} .layer=${e.layer} .legendElement=${n} .messages=${this.messages}></arcgis-legend-card-element>`);return J`<section class=${q(Ob.service)}>${this._renderTitle(e.title)}<div class=${q(Ob.serviceContent)}>${r}</div></section>`}_renderSections(e,i){if(!e.ready)return;if(e.children.length)for(const n of e.children)this._renderSections(n,i);const r=e.legendElements;if(r?.length)for(const n of r){const s=J`<arcgis-legend-card-element .activeLayerInfo=${e} .cssEffectFilter=${e.cssEffectFilter??void 0} .stacked=${this.stacked} .headingLevel=${this.headingLevel} .layer=${e.layer} .legendElement=${n} .messages=${this.messages}></arcgis-legend-card-element>`;s&&i.push(s)}}},_w.properties={stacked:16,activeLayerInfos:0,headingLevel:9,messages:0,view:0,layout:1,type:32},_w.styles=olt,_w);nn("arcgis-legend-card-view",clt);const ult=St`.arcgis-legend__size-ramp--container{margin-left:var(--calcite-spacing-sm);display:table}:dir(rtl) .arcgis-legend__size-ramp--container{margin-right:var(--calcite-spacing-sm);margin-left:0;overflow:auto}.arcgis-legend__size-ramp--row{display:table-row}.arcgis-legend__size-ramp--cell{padding:var(--calcite-spacing-xxs) 0;min-width:100px;vertical-align:middle;word-break:break-word;display:table-cell}.arcgis-legend__size-ramp--label{padding-right:var(--calcite-spacing-sm);padding-left:var(--calcite-spacing-sm);max-width:250px;word-break:normal;word-wrap:normal;font-size:var(--calcite-font-size-sm)}.arcgis-legend__size-ramp--symbol-container{min-width:10px;text-align:center}.arcgis-legend__size-ramp--symbol{display:flex;justify-content:center}`,Lb={container:"arcgis-legend__size-ramp--container",row:"arcgis-legend__size-ramp--row",cell:"arcgis-legend__size-ramp--cell",label:"arcgis-legend__size-ramp--label",symbol:"arcgis-legend__size-ramp--symbol",symbolContainer:"arcgis-legend__size-ramp--symbol-container"};var xw;let dlt=(xw=class extends Et{constructor(){super(...arguments),this.legendElement=null}render(){const e=this.legendElement.infos.map(i=>this._renderRow(i)).filter(Boolean);return e.length?this.legendElement.theme==="spike"?J`<arcgis-legend-spike-ramp .legendElement=${this.legendElement} .messages=${this.messages}></arcgis-legend-spike-ramp>`:J`<div class=${q(Lb.container)}>${e}</div>`:null}_renderRow(e){const{preview:i}=e;if(!i)return null;const r=Um(this.messages,e.label,!1);return Hp(i,Jm(this.messages,r)),J`<div class=${q(Lb.row)}><div class=${q(Ui(Lb.cell,Lb.symbolContainer))}><div class=${q(Lb.symbol)}>${i}</div></div><div class=${q(Ui(Lb.cell,Lb.label))}>${r}</div></div>`}},xw.properties={legendElement:0,messages:0},xw.styles=ult,xw);nn("arcgis-legend-classic-size-ramp",dlt);const hlt=St`.arcgis-legend__layer-row{display:flex}.arcgis-legend__layer-cell{padding:var(--calcite-spacing-xxs) 0;min-width:100px;vertical-align:middle;word-break:break-word}.arcgis-legend__layer-cell--symbols{min-width:10px;text-align:center}.arcgis-legend__layer-cell--info{padding-right:var(--calcite-spacing-sm);padding-left:var(--calcite-spacing-sm);max-width:250px;word-break:normal;word-wrap:normal;font-size:var(--calcite-font-size-sm)}.arcgis-legend__ramps{margin-left:var(--calcite-spacing-sm)}:dir(rtl) .arcgis-legend__ramps{margin-right:var(--calcite-spacing-sm);margin-left:auto}.arcgis-legend__color-ramp{width:24px}.arcgis-legend__opacity-ramp{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAIAAABLbSncAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2hpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYxIDY0LjE0MDk0OSwgMjAxMC8xMi8wNy0xMDo1NzowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDowMTgwMTE3NDA3MjA2ODExODcxRkM3N0RBQzA4QkVDRSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpEOTY4RkNFNjM1MzYxMUU0ODlDMUFFQ0M2REU5QzFCNCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpEOTY4RkNFNTM1MzYxMUU0ODlDMUFFQ0M2REU5QzFCNCIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1LjEgTWFjaW50b3NoIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MDE4MDExNzQwNzIwNjgxMTg3MUZDNzdEQUMwOEJFQ0UiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MDE4MDExNzQwNzIwNjgxMTg3MUZDNzdEQUMwOEJFQ0UiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6SLS5VAAAAKElEQVR42mI8c+YMAwwYGxvD2UwMOADpEoz///+Hc86ePUsLOwACDABC1ghwV8TLOQAAAABJRU5ErkJggg==)}.arcgis-legend__ramp-labels{display:flex;flex-flow:column nowrap;justify-content:space-between}.arcgis-legend__ramp-label{position:relative;padding:0 var(--calcite-spacing-sm);line-height:var(--calcite-font-size-sm);white-space:nowrap;font-size:var(--calcite-font-size-sm)}.arcgis-legend__ramp-label:before{display:block;position:absolute;top:.25em;right:100%;border-width:3px 4px 3px 0;border-style:solid;border-color:transparent var(--calcite-color-text-1) transparent transparent;width:0;height:0;content:""}.arcgis-legend__ramp-label:first-child{margin-top:calc(var(--calcite-font-size-sm) / 3 * -1)}.arcgis-legend__ramp-label:last-child{bottom:calc(var(--calcite-font-size-sm) * .25 * -1)}.arcgis-legend-layer-caption{display:table-caption;padding:var(--calcite-spacing-sm) 0}:dir(rtl) .arcgis-legend__ramp-label:before{right:auto;left:100%;border-width:3px 0 3px 4px;border-color:transparent transparent transparent var(--calcite-color-text-1)}`,iy={layerRow:"arcgis-legend__layer-row",layerInfo:"arcgis-legend__layer-cell arcgis-legend__layer-cell--info",symbolContainer:"arcgis-legend__layer-cell arcgis-legend__layer-cell--symbols",rampContainer:"arcgis-legend__ramps",colorRamp:"arcgis-legend__color-ramp",opacityRamp:"arcgis-legend__opacity-ramp",rampLabelsContainer:"arcgis-legend__ramp-labels",rampLabel:"arcgis-legend__ramp-label"};var Sw;let plt=(Sw=class extends Et{constructor(){super(...arguments),this.legendElement=null,this.opacity=1}get _preview(){const e=this.legendElement.preview;if(!e)return null;const i=this.legendElement.type==="opacity-ramp",r=i?iy.opacityRamp:"";e.className=`${iy.colorRamp} ${r}`,this.opacity!=null&&(e.style.opacity=this.opacity.toString());const n=i?this.messages.previewOpacityRampAriaLabel:this.messages.previewColorRampAriaLabel;return Hp(e,n),e}render(){const{legendElement:e,_preview:i}=this;if(!i)return null;const r={height:i.style.height};return J`<div class=${q(iy.layerRow)}><div class=${q(iy.symbolContainer)}><div class=${q(iy.rampContainer)}>${i}</div></div><div class=${q(iy.layerInfo)}><div class=${q(iy.rampLabelsContainer)} style=${Kt(r)}>${e.infos.map(n=>this._renderRampLabel(n,e.type))}</div></div></div>`}_renderRampLabel(e,i){return J`<div class=${q(e.label?iy.rampLabel:void 0)}>${t$e(e,i,this.messages)}</div>`}},Sw.properties={_preview:16,legendElement:0,opacity:9,messages:0},Sw.styles=hlt,Sw);nn("arcgis-legend-classic-color-ramp",plt);const flt=St`.arcgis-legend__layer-body{margin-left:var(--calcite-spacing-sm);display:table}:dir(rtl) .arcgis-legend__layer-body{margin-right:var(--calcite-spacing-sm);margin-left:0;overflow:auto}.arcgis-legend__layer-row{display:table-row}.arcgis-legend__layer-cell{display:table-cell;padding:var(--calcite-spacing-xxs) 0;min-width:100px;vertical-align:middle;word-break:break-word}.arcgis-legend__layer-cell--info{padding-right:var(--calcite-spacing-sm);padding-left:var(--calcite-spacing-sm);max-width:250px;word-break:normal;word-wrap:normal;font-size:var(--calcite-font-size-sm)}.arcgis-legend__symbol{display:flex;justify-content:center}.arcgis-legend__ramps{margin-left:var(--calcite-spacing-md)}:dir(rtl) .arcgis-legend__ramps{margin-right:var(--calcite-spacing-md);margin-left:auto}.arcgis-legend__ramp-labels{display:flex;flex-flow:column nowrap;justify-content:space-between}.arcgis-legend__ramp-label{position:relative;padding:0 var(--calcite-spacing-sm);line-height:1em;white-space:nowrap;font-size:var(--calcite-font-size-sm)}.arcgis-legend__ramp-label:before{display:block;position:absolute;top:.25em;right:100%;border-width:3px 4px 3px 0;border-style:solid;border-color:transparent var(--calcite-color-text-1) transparent transparent;width:0;height:0;content:""}.arcgis-legend__ramp-label:first-child{margin-top:calc(var(--calcite-font-size-sm) / 3 * -1)}.arcgis-legend__ramp-label:last-child{bottom:calc(var(--calcite-font-size-sm) * .25 * -1)}:dir(rtl) .arcgis-legend__ramp-label:before{right:auto;left:100%;border-width:3px 0 3px 4px;border-color:transparent transparent transparent var(--calcite-color-text-1)}.arcgis-univariate-above-and-below-ramp__label{position:relative;margin-left:7px;line-height:1em;white-space:nowrap;font-size:var(--calcite-font-size-sm)}.arcgis-univariate-above-and-below-ramp__label:before{display:block;position:absolute;top:.45em;left:-19px;border-width:1px 0 0;border-style:solid;width:14px;height:0;content:""}.arcgis-univariate-above-and-below-ramp__label:first-child{top:calc(var(--calcite-font-size-sm) / 2.2 * -1)}.arcgis-univariate-above-and-below-ramp__label:last-child{bottom:calc(var(--calcite-font-size-sm) / 2.2 * -1)}:dir(rtl) .arcgis-univariate-above-and-below-ramp__label{margin-right:var(--calcite-spacing-sm);margin-left:auto}:dir(rtl) .arcgis-univariate-above-and-below-ramp__label:before{right:-19px;left:auto}.arcgis-univariate-above-and-below-ramp__symbol{display:flex;align-items:center;justify-content:center}`,Uc={layerBody:"arcgis-legend__layer-body",layerRow:"arcgis-legend__layer-row",layerInfo:"arcgis-legend__layer-cell arcgis-legend__layer-cell--info",symbol:"arcgis-legend__symbol",rampContainer:"arcgis-legend__ramps",rampLabelsContainer:"arcgis-legend__ramp-labels",rampLabel:"arcgis-legend__ramp-label",univariateAboveAndBelowLabel:"arcgis-univariate-above-and-below-ramp__label"};var $w;let mlt=($w=class extends Et{constructor(){super(...arguments),this.legendElement=null,this.opacity=1}render(){const{legendElement:e,opacity:i}=this,{sizeRampElement:r,colorRampElement:n}=Y$e(e,this.messages,i);if(!r)return null;const s=this.messages.previewColorRampAriaLabel,a=oT(r,"above",!0),o=oT(r,"below",!0),l=12,c=aT(n,{width:l,height:a,rampAlignment:"vertical",opacity:i,type:"above",cssEffectFilter:this.cssEffectFilter,ariaLabel:s}),h=aT(n,{width:l,height:o,rampAlignment:"vertical",opacity:i,type:"below",cssEffectFilter:this.cssEffectFilter,ariaLabel:s}),f=ij(r),g=r.infos.map(O=>O.label),y=g.map((O,N)=>N===0?J`<div class=${q(O?c?Uc.univariateAboveAndBelowLabel:Uc.rampLabel:void 0)}>${O}</div>`:N===2?J`<div></div>`:null),b=g.length-1,_=Math.floor(g.length/2),S=g.map((O,N)=>N===_||N===b?J`<div class=${q(O?c?Uc.univariateAboveAndBelowLabel:Uc.rampLabel:void 0)}>${O}</div>`:null),$={display:"table-cell",verticalAlign:"middle"},C={marginTop:`${f}px`},I={height:`${a}px`},P={height:`${o}px`};return J`<div style=${Kt(X$e)}><div class=${q(Uc.layerBody)}>${r.infos.map((O,N)=>J`<div class=${q(Uc.layerRow)}><div class=${q(Uc.symbol)} style=${Kt($)}>${O.preview}</div>${!c&&N%2===0?J`<div class=${q(Uc.layerInfo)}>${g[N]}</div>`:null}</div>`)}</div>${c?J`<div style=${Kt(C)}><div style=${Kt(wq)}><div style=${Kt(CS)}><div class=${q(Uc.rampContainer)}>${c}</div></div><div style=${Kt(CS)}><div class=${q(Uc.rampLabelsContainer)} style=${Kt(I)}>${y}</div></div></div><div style=${Kt(wq)}><div style=${Kt(CS)}><div class=${q(Uc.rampContainer)}>${h}</div></div><div style=${Kt(CS)}><div class=${q(Uc.rampLabelsContainer)} style=${Kt(P)}>${S}</div></div></div></div>`:null}</div>`}},$w.properties={cssEffectFilter:1,legendElement:0,opacity:9,messages:0},$w.styles=flt,$w);nn("arcgis-legend-classic-univariate-above-and-below-ramp",mlt);const glt=St`.arcgis-legend__layer-body{margin-left:var(--calcite-spacing-sm)}:dir(rtl) .arcgis-legend__layer-body{margin-right:var(--calcite-spacing-sm);margin-left:0;overflow:auto}.arcgis-legend__layer-row,.arcgis-legend__symbol{display:flex;justify-content:center}.arcgis-legend__ramps{margin-left:var(--calcite-spacing-md)}:dir(rtl) .arcgis-legend__ramps{margin-right:var(--calcite-spacing-md);margin-left:auto}.arcgis-legend__size-ramp~.arcgis-legend__layer-cell--info{width:80%;max-width:80%}.arcgis-legend__ramp-labels{display:flex;flex-flow:column nowrap;justify-content:space-between}.arcgis-legend__ramp-label{position:relative;padding:0 var(--calcite-spacing-sm);line-height:1em;white-space:nowrap;font-size:var(--calcite-font-size-sm)}.arcgis-legend__ramp-label:before{display:block;position:absolute;top:.25em;right:100%;border-width:3px 4px 3px 0;border-style:solid;border-color:transparent var(--calcite-color-text-1) transparent transparent;width:0;height:0;content:""}.arcgis-legend__ramp-label:first-child{margin-top:calc(var(--calcite-font-size-sm) / 3 * -1)}.arcgis-legend__ramp-label:last-child{bottom:calc(var(--calcite-font-size-sm) * .25 * -1)}:dir(rtl) .arcgis-legend__ramp-label:before{right:auto;left:100%;border-width:3px 0 3px 4px;border-color:transparent transparent transparent var(--calcite-color-text-1)}.arcgis-legend__univariate-label{position:relative;margin-left:7px;line-height:1em;white-space:nowrap;font-size:var(--calcite-font-size-sm)}.arcgis-legend__univariate-label:before{display:block;position:absolute;top:.45em;left:-19px;border-width:1px 0 0;border-style:solid;width:14px;height:0;content:""}.arcgis-legend__univariate-label:first-child{top:calc(var(--calcite-font-size-sm) / 2.2 * -1)}.arcgis-legend__univariate-label:last-child{bottom:calc(var(--calcite-font-size-sm) / 2.2 * -1)}:dir(rtl) .arcgis-legend__univariate-label{margin-right:var(--calcite-spacing-sm);margin-left:auto}:dir(rtl) .arcgis-legend__univariate-label:before{right:-19px;left:auto}.arcgis-univariate-above-and-below-ramp__symbol{display:flex;align-items:center;justify-content:center}`,ry={layerBody:"arcgis-legend__layer-body",layerRow:"arcgis-legend__layer-row",symbol:"arcgis-legend__symbol",rampContainer:"arcgis-legend__ramps",sizeRamp:"arcgis-legend__size-ramp",rampLabelsContainer:"arcgis-legend__ramp-labels",rampLabel:"arcgis-legend__ramp-label",univariateLabel:"arcgis-legend__univariate-label"};var Tw;let ylt=(Tw=class extends Et{constructor(){super(...arguments),this.legendElement=null,this.opacity=1}render(){const{legendElement:e,opacity:i}=this,{sizeRampElement:r,colorRampElement:n}=Z$e(e,this.messages);if(!r)return null;const s=ij(r),a=12,o=oT(r,"full",!1),l=aT(n,{width:a,height:o,rampAlignment:"vertical",opacity:i,type:"full",cssEffectFilter:this.cssEffectFilter,ariaLabel:this.messages.previewColorRampAriaLabel}),c=r.infos.length-1,h=r.infos.map((b,_)=>_===0||_===c?J`<div class=${q(b.label?n?ry.univariateLabel:ry.rampLabel:void 0)}>${b.label}</div>`:null),f={display:"table-cell",verticalAlign:"middle"},g={marginTop:`${s}px`},y={height:`${o}px`};return J`<div style=${Kt(X$e)}><div class=${q(ry.layerBody)}>${r.infos.map(b=>J`<div class=${q(Ui(ry.layerRow,ry.sizeRamp))}><div class=${q(ry.symbol)} style=${Kt(f)}>${b.preview}</div></div>`)}</div><div style=${Kt(g)}><div style=${Kt(wq)}><div style=${Kt(CS)}><div class=${q(ry.rampContainer)}>${l}</div></div><div style=${Kt(CS)}><div class=${q(ry.rampLabelsContainer)} style=${Kt(y)}>${h}</div></div></div></div></div>`}},Tw.properties={cssEffectFilter:1,legendElement:0,opacity:9,messages:0},Tw.styles=glt,Tw);nn("arcgis-legend-classic-univariate-color-size-ramp",ylt);const vlt=St`.arcgis-legend__layer-table{display:flex;flex-flow:column;margin-bottom:var(--calcite-spacing-md);width:100%}.arcgis-legend__layer-table--size-ramp{display:table}.arcgis-legend__layer-table--size-ramp .arcgis-legend__layer-cell{display:table-cell}.arcgis-legend__layer-caption{display:table-caption;padding:var(--calcite-spacing-sm) 0;word-break:break-word}.arcgis-legend__layer-body{margin-left:var(--calcite-spacing-sm)}:dir(rtl) .arcgis-legend__layer-body{margin-right:var(--calcite-spacing-sm);margin-left:0;overflow:auto}.arcgis-legend__layer-row{display:flex}.arcgis-legend__layer-table--size-ramp .arcgis-legend__layer-row{display:table-row}.arcgis-legend__layer-cell{padding:var(--calcite-spacing-xxs) 0;min-width:100px;vertical-align:middle;word-break:break-word;display:flex;align-items:center}.arcgis-legend__layer-cell--info{padding-right:var(--calcite-spacing-sm);padding-left:var(--calcite-spacing-sm);max-width:250px;word-break:normal;word-wrap:normal;font-size:var(--calcite-font-size-sm)}.arcgis-legend__imagery-layer-image--stretched{display:block;margin-bottom:-2px}.arcgis-legend__imagery-layer-info--stretched{padding:0 2px;vertical-align:top}.arcgis-legend__layer-cell--symbols{min-width:10px;text-align:center}.arcgis-legend__symbol{display:flex;justify-content:center}`,Hc={layerTable:"arcgis-legend__layer-table",layerTableSizeRamp:"arcgis-legend__layer-table--size-ramp",layerCaption:"arcgis-legend__layer-caption",layerBody:"arcgis-legend__layer-body",layerRow:"arcgis-legend__layer-row",layerInfo:"arcgis-legend__layer-cell arcgis-legend__layer-cell--info",imageryLayerStretchedImage:"arcgis-legend__imagery-layer-image--stretched",imageryLayerInfoStretched:"arcgis-legend__imagery-layer-info--stretched",symbolContainer:"arcgis-legend__layer-cell arcgis-legend__layer-cell--symbols",symbol:"arcgis-legend__symbol"};var kw;let blt=(kw=class extends Et{render(){const e=this._renderLegendElement(),i=e$e(this.legendElement,this.messages),r=i?J`<div class=${q(Hc.layerCaption)}>${i}</div>`:null,n={[Hc.layerTableSizeRamp]:this.legendElement.type==="size-ramp"};return J`<section class=${q(Ui(Hc.layerTable,n))}>${r}${e}</section>`}_renderLegendElement(){switch(this.legendElement.type){case"symbol-table":return this._renderSymbolTable(this.legendElement);case"size-ramp":return J`<arcgis-legend-classic-size-ramp .legendElement=${this.legendElement} .messages=${this.messages}></arcgis-legend-classic-size-ramp>`;case"color-ramp":case"opacity-ramp":case"heatmap-ramp":case"stretch-ramp":return J`<arcgis-legend-classic-color-ramp .legendElement=${this.legendElement} .messages=${this.messages} .opacity=${this.layer.opacity}></arcgis-legend-classic-color-ramp>`;case"relationship-ramp":return J`<arcgis-legend-relationship-ramp .cssEffectFilter=${this.cssEffectFilter} .legendElement=${this.legendElement} .opacity=${this.layer.opacity} .messages=${this.messages}></arcgis-legend-relationship-ramp>`;case"pie-chart-ramp":{const{preview:e}=this.legendElement;return Hp(e,this.messages.previewPieChartAriaLabel),J`<div>${e}</div>`}case"univariate-above-and-below-ramp":return J`<arcgis-legend-classic-univariate-above-and-below-ramp .cssEffectFilter=${this.cssEffectFilter} .legendElement=${this.legendElement} .messages=${this.messages} .opacity=${this.layer.opacity}></arcgis-legend-classic-univariate-above-and-below-ramp>`;case"univariate-color-size-ramp":return J`<arcgis-legend-classic-univariate-color-size-ramp .cssEffectFilter=${this.cssEffectFilter} .legendElement=${this.legendElement} .messages=${this.messages} .opacity=${this.layer.opacity}></arcgis-legend-classic-univariate-color-size-ramp>`;default:return null}}_renderSymbolTable(e){const i=e.infos.map(r=>this._renderElementInfo(r,e.legendType)).filter(Boolean);return i.length?J`<div class=${q(Hc.layerBody)}>${i}</div>`:null}_renderElementInfo(e,i){const{layer:r}=this,n="label"in e?e.label:null;if("type"in e&&e.type)return e?J`<arcgis-legend-classic-element .cssEffectFilter=${this.cssEffectFilter} .layer=${r} .legendElement=${e} .messages=${this.messages}></arcgis-legend-classic-element>`:null;if(!("preview"in e&&e.preview)&&!("src"in e&&e.src))return null;const s=i$e(r,i),a={[Hc.imageryLayerInfoStretched]:s},o={[Hc.imageryLayerInfoStretched]:s};return J`<div class=${q(Hc.layerRow)}><div class=${q(Ui(Hc.symbolContainer,o))}>${this._renderPreview(e,s)}</div><div class=${q(Ui(Hc.layerInfo,a))}>${Um(this.messages,n,!1)||""}</div></div>`}_renderPreview(e,i){const{layer:r}=this;if("preview"in e&&e.preview){const{preview:n}=e,s="previewAriaLabel"in e?e.previewAriaLabel:null,a="label"in e?Um(this.messages,e.label,!1):null;return Hp(n,Jm(this.messages,s||a)),J`<div class=${q(Hc.symbol)}>${n}</div>`}return"src"in e&&e.src?this._renderImage(e,r,i):null}_renderImage(e,i,r){const{previewAriaLabel:n,src:s,opacity:a}=e,o=Um(this.messages,e.label,!1),l={[Hc.imageryLayerStretchedImage]:r,[Hc.symbol]:!r},c={opacity:`${a??i.opacity}`},h=Jm(this.messages,n||o);return J`<img alt=${h??De} .ariaLabel=${h} class=${q(Ui(l))} height=${e.height??void 0??De} src=${s??De} style=${Kt(c)} width=${e.width??void 0??De}>`}},kw.properties={cssEffectFilter:1,layer:0,legendElement:0,messages:0},kw.styles=vlt,kw);nn("arcgis-legend-classic-element",blt);const wlt=St`.esri-widget__heading{color:var(--calcite-color-text-2);margin:0 0 .5rem;font-weight:var(--calcite-font-weight-semibold)}h1.esri-widget__heading{font-size:var(--calcite-font-size-xl)}h2.esri-widget__heading{font-size:var(--calcite-font-size-md)}h3.esri-widget__heading,h4.esri-widget__heading,h5.esri-widget__heading,h6.esri-widget__heading{font-size:var(--calcite-font-size)}:host{display:block}.arcgis-legend__no-legend{padding:var(--calcite-spacing-sm) var(--calcite-spacing-md)}.arcgis-legend__layer{border-bottom:1px solid var(--calcite-color-border-2);padding:var(--calcite-spacing-sm);word-wrap:break-word}.arcgis-legend__layer:last-child{border-bottom:none}.arcgis-legend__layer--elements{margin-left:var(--calcite-spacing-sm);overflow:auto}.arcgis-legend__layer-child{margin-left:var(--calcite-spacing-sm);padding-right:0;padding-left:0}:dir(rtl) .arcgis-legend__layer--elements,:dir(rtl) .arcgis-legend__layer-child{margin-right:var(--calcite-spacing-sm);margin-left:0;overflow:auto}`,M2={layer:"arcgis-legend__layer",layerElements:"arcgis-legend__layer--elements",layerChild:"arcgis-legend__layer-child",noLegend:"arcgis-legend__no-legend"};var Ew;let _lt=(Ew=class extends Et{constructor(){super(...arguments),this.headingLevel=3,this.type="classic"}render(){const e=this.activeLayerInfos?.toArray().map(i=>this._renderLegendForLayer(i)).filter(Boolean);return e?.length?J`<section>${e}</section>`:J`<div class=${q(M2.noLegend)}>${this.messages.noLegend}</div>`}_renderLegendForLayer(e){if(!e.ready)return null;const i=e.title?YI({level:this.headingLevel,children:e.title}):null;if(e.children.length){const r=e.children.toArray().map(n=>this._renderLegendForLayer(n));return J`<section class=${q(M2.layer)}>${i}${r}</section>`}return this._renderLegendElementsForLayer(e,i)}_renderLegendElementsForLayer(e,i){const r=e.legendElements?.filter(Boolean);if(!r?.length)return null;const n=r.map(a=>J`<arcgis-legend-classic-element .cssEffectFilter=${e.cssEffectFilter??void 0} .layer=${e.layer} .legendElement=${a} .messages=${this.messages}></arcgis-legend-classic-element>`),s={[M2.layerChild]:!!e.parent};return J`<section class=${q(Ui(M2.layer,s))}>${i}<div class=${q(M2.layerElements)}>${n}</div></section>`}},Ew.properties={activeLayerInfos:0,headingLevel:9,type:32,messages:0},Ew.styles=wlt,Ew);nn("arcgis-legend-classic-view",_lt);function dce(t,e){const i=t.featureReduction;return i&&i.type!=="selection"&&(!("maxScale"in i)||!i.maxScale||i.maxScale<e.scale)?i:null}const ZI=-1;let hd=class extends lt{constructor(e){super(e),this._from=null,this._to=null,this._final=null,this._current=[],this._time=0,this.duration=ve("mapview-transitions-duration"),this.effects=[]}set effect(e){if(this._get("effect")!==(e=e||"")){this._set("effect",e);try{this._transitionTo(hce(e))}catch(i){this._transitionTo([]),$e.getLogger(this).warn("Invalid Effect",{effect:e,error:i})}}}get final(){return this._final}get hasEffects(){return this.transitioning||!!this.effects.length}set scale(e){this._updateForScale(e)}get transitioning(){return this._to!==null}canTransitionTo(e){try{return this.scale>0&&pce(this._current,hce(e),this.scale)}catch{return!1}}transitionStep(e,i){this._applyTimeTransition(e),this._updateForScale(i)}endTransition(){this._applyTimeTransition(this.duration)}_transitionTo(e){this.scale>0&&pce(this._current,e,this.scale)?(this._final=e,this._to=de(e),xlt(this._current,this._to,this.scale),this._from=de(this._current),this._time=0):(this._from=this._to=this._final=null,this._current=e),this._set("effects",this._current[0]?de(this._current[0].effects):[])}_applyTimeTransition(e){if(!(this._to&&this._from&&this._current&&this._final))return;this._time+=e;const i=Math.min(1,this._time/this.duration);for(let r=0;r<this._current.length;r++){const n=this._current[r],s=this._from[r],a=this._to[r];n.scale=Slt(s.scale,a.scale,i);for(let o=0;o<n.effects.length;o++){const l=n.effects[o],c=s.effects[o],h=a.effects[o];l.interpolate(c,h,i)}}i===1&&(this._current=this._final,this._set("effects",this._current[0]?de(this._current[0].effects):[]),this._from=this._to=this._final=null)}_updateForScale(e){if(this._set("scale",e),this._current.length===0)return;const i=this._current,r=this._current.length-1;let n,s,a=1;if(i.length===1||e>=i[0].scale)s=n=i[0].effects;else if(e<=i[r].scale)s=n=i[r].effects;else for(let o=0;o<r;o++){const l=i[o],c=i[o+1];if(l.scale>=e&&c.scale<=e){a=(e-l.scale)/(c.scale-l.scale),n=l.effects,s=c.effects;break}}for(let o=0;o<this.effects.length;o++)this.effects[o].interpolate(n[o],s[o],a)}};function hce(t){const e=bX(t)||[];return $lt(e)?[{scale:ZI,effects:e}]:e}function pce(t,e,i){return!t[0]?.effects||!e[0]?.effects?!0:!((t[0]?.scale===ZI||e[0]?.scale===ZI)&&(t.length>1||e.length>1)&&i<=0)&&u0e(t[0].effects,e[0].effects)}function xlt(t,e,i){const r=t.length>e.length?t:e,n=t.length>e.length?e:t,s=n[n.length-1],a=s?.scale??i,o=s?.effects??[];for(let l=n.length;l<r.length;l++)n.push({scale:a,effects:[...o]});for(let l=0;l<r.length;l++)n[l].scale=n[l].scale===ZI?i:n[l].scale,r[l].scale=r[l].scale===ZI?i:r[l].scale,d0e(n[l].effects,r[l].effects)}function Slt(t,e,i){return t+(e-t)*i}function $lt(t){const e=t[0];return!!e&&"type"in e}d([m()],hd.prototype,"_to",void 0),d([m()],hd.prototype,"duration",void 0),d([m({value:""})],hd.prototype,"effect",null),d([m({readOnly:!0})],hd.prototype,"effects",void 0),d([m({readOnly:!0})],hd.prototype,"final",null),d([m({readOnly:!0})],hd.prototype,"hasEffects",null),d([m({value:0})],hd.prototype,"scale",null),d([m({readOnly:!0})],hd.prototype,"transitioning",null),hd=d([U("esri.layers.effects.EffectView")],hd);function ezt(t){const e=t.layer;return"floorInfo"in e&&e.floorInfo?.floorField&&"floors"in t.view?J$e(t.view.floors,e.floorInfo.floorField):null}function fce(t,e){return"floorInfo"in e&&e.floorInfo?.floorField?J$e(t,e.floorInfo.floorField):null}function J$e(t,e){if(!t?.length)return null;const i=t.filter(r=>r!=="").map(r=>`'${r}'`);return i.push("''"),`${e} IN (${i.join(",")}) OR ${e} IS NULL`}function tzt(t,e,i){return e.flatten(({sublayers:n})=>n).length!==t.length?!0:!!t.some(n=>n.originIdOf("minScale")>i||n.originIdOf("maxScale")>i||n.originIdOf("renderer")>i||n.originIdOf("labelingInfo")>i||n.originIdOf("opacity")>i||n.originIdOf("labelsVisible")>i||n.originIdOf("source")>i)||!K$e(t,e)}function Tlt(t,e,i){return!!t.some(r=>{const n=r.source,s=!n||n.type==="map-layer"&&n.mapLayerId===r.id&&(n.gdbVersion==null||n.gdbVersion===i);r.commitProperty("renderer"),r.commitProperty("labelingInfo"),r.commitProperty("opacity"),r.commitProperty("labelsVisible"),r.commitProperty("orderBy");const a=r.layer?.capabilities?.exportMap?.supportsSublayerOrderBy??!1;return!s||r.originIdOf("renderer")>2||r.originIdOf("labelingInfo")>2||r.originIdOf("opacity")>2||r.originIdOf("labelsVisible")>2||a&&r.originIdOf("orderBy")>2})||!K$e(t,e)}function K$e(t,e){if(!t?.length||e==null)return!0;const i=e.slice().reverse().flatten(({sublayers:s})=>s&&s.toArray().reverse()).map(s=>s.id).toArray();if(t.length>i.length)return!1;let r=0;const n=i.length;for(const{id:s}of t){for(;r<n&&i[r]!==s;)r++;if(r>=n)return!1}return!0}function izt(t){return!!t&&t.some(e=>e.minScale!=null||e.layerDefinition?.minScale!=null)}const klt={visible:"visibleSublayers",definitionExpression:"layerDefs",labelingInfo:"hasDynamicLayers",labelsVisible:"hasDynamicLayers",opacity:"hasDynamicLayers",minScale:"visibleSublayers",maxScale:"visibleSublayers",renderer:"hasDynamicLayers",source:"hasDynamicLayers"};let Qc=class extends lt{constructor(e){super(e),this.floors=null,this.scale=0}destroy(){this.layer=null}get dynamicLayers(){if(!this.hasDynamicLayers)return null;const e=this.visibleSublayers.map(i=>{const r=fce(this.floors,i);return i.toExportImageJSON(r)});return e.length?JSON.stringify(e):null}get hasDynamicLayers(){return this.layer&&Tlt(this.visibleSublayers,this.layer.serviceSublayers,this.layer.gdbVersion)}set layer(e){this._get("layer")!==e&&(this._set("layer",e),this.removeHandles("layer"),e&&this.addHandles([e.allSublayers.on("change",()=>this.notifyChange("visibleSublayers")),e.on("sublayer-update",i=>this.notifyChange(klt[i.propertyName]))],"layer"))}get layers(){const e=this.visibleSublayers;return e?e.length?"show:"+e.map(i=>i.id).join(","):"show:-1":null}get layerDefs(){const e=!!this.floors?.length,i=this.visibleSublayers.filter(r=>r.definitionExpression!=null||e&&r.floorInfo!=null);return i.length?JSON.stringify(i.reduce((r,n)=>{const s=fce(this.floors,n),a=EC(s,n.definitionExpression);return a!=null&&(r[n.id]=a),r},{})):null}get version(){this.commitProperty("layers"),this.commitProperty("layerDefs"),this.commitProperty("dynamicLayers");const e=this.layer;return e&&(e.commitProperty("dpi"),e.commitProperty("imageFormat"),e.commitProperty("imageTransparency"),e.commitProperty("gdbVersion")),(this._get("version")||0)+1}get visibleSublayers(){const e=[];if(!this.layer)return e;const i=this.layer.sublayers,r=this.scale,n=a=>{a.visible&&(r===0||cKe(r,a.minScale,a.maxScale))&&(a.sublayers?a.sublayers.forEach(n):e.unshift(a))};i?.forEach(n);const s=this._get("visibleSublayers");return!s||s.length!==e.length||s.some((a,o)=>e[o]!==a)?e:s}toJSON(){const e=this.layer;let i={dpi:e.dpi,format:e.imageFormat,transparent:e.imageTransparency,gdbVersion:e.gdbVersion||null};return this.hasDynamicLayers&&this.dynamicLayers?i.dynamicLayers=this.dynamicLayers:i={...i,layers:this.layers,layerDefs:this.layerDefs},i}};d([m({readOnly:!0})],Qc.prototype,"dynamicLayers",null),d([m()],Qc.prototype,"floors",void 0),d([m({readOnly:!0})],Qc.prototype,"hasDynamicLayers",null),d([m()],Qc.prototype,"layer",null),d([m({readOnly:!0})],Qc.prototype,"layers",null),d([m({readOnly:!0})],Qc.prototype,"layerDefs",null),d([m({type:Number})],Qc.prototype,"scale",void 0),d([m({readOnly:!0})],Qc.prototype,"version",null),d([m({readOnly:!0})],Qc.prototype,"visibleSublayers",null),Qc=d([U("esri.layers.support.ExportImageParameters")],Qc);const Elt=9999999e31,Clt=2e-7,Ilt={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],s8:[-128,127],u16:[0,65535],s16:[-32768,32767],u32:[0,4294967295],s32:[-2147483648,2147483647],f32:[-34028234663852886e22,34028234663852886e22],f64:[-Number.MAX_VALUE,Number.MAX_VALUE],unknown:void 0,c64:void 0,c128:void 0};function zz(t){return Ilt[t]??[-34028234663852886e22,34028234663852886e22]}const Mlt={u1:1,u2:1,u4:1,u8:1,s8:1,u16:2,s16:2,u32:4,s32:4,f32:4,f64:8,unknown:4,c64:16,c128:32};function Alt(t){return Mlt[t]}function nzt(t){return Alt(t.pixelType)*t.bandCount}function szt(t,e){return t==null||e==null?"s32":t<0?t>=-128&&e<128?"s8":t>=-32768&&e<32768?"s16":"s32":e<256?"u8":e<65536?"u16":"u32"}function Plt(t){return(t?.startsWith("s")||t?.startsWith("u"))??!1}function azt(t,e,i,r){let[n,s]=zz(i);const a=Plt(i);return a&&(n-=1e-5,s+=1e-5),a?i.startsWith("u")?Olt(t,e,r,[n,s]):Llt(t,e,r,[n,s]):Dlt(t,e,r,[n,s])}function ozt(t,e){for(let i=0;i<e.length;i++)e[i]&&isNaN(t[i])&&(e[i]=0,t[i]=0)}function Olt(t,e,i,r){const[n,s]=r;for(let a=0;a<e.length;a++)if(e[a]){const o=t[a];o<n||o>s?e[a]=0:i[a]=o+.5|0}}function Llt(t,e,i,r){const[n,s]=r;for(let a=0;a<e.length;a++)if(e[a]){const o=t[a];o<n||o>s?e[a]=0:i[a]=o+(o>0?.5:-.5)|0}}function Dlt(t,e,i,r){const[n,s]=r;for(let a=0;a<e.length;a++)if(e[a]){const o=t[a];o<n||o>s?e[a]=0:i[a]=o}}function lzt(t,e,i){if(t.depthCount&&t.depthCount>1)return;const{pixels:r,statistics:n,pixelType:s}=t,a=r[0].length,o=t.bandMasks??[],l=t.mask??new Uint8Array(a).fill(255),c=s==="f32"||s==="f64",h=zz(s);let f=!1;for(let y=0;y<r.length;y++){const b=typeof e=="number"?e:e[y];if(b==null)continue;const _=n?.[y]?.minValue??h[0],S=n?.[y]?.maxValue??h[1];if(_>b+Number.EPSILON||S<b-Number.EPSILON)continue;const $=o[y]||l.slice(),C=r[y],I=i?.customFloatTolerance;if(c&&I!==0){let P=I;P||(P=Math.abs(b)>=Elt?Clt*Math.abs(b):s==="f32"?2**-23:Number.EPSILON);for(let O=0;O<C.length;O++)$[O]&&Math.abs(C[O]-b)<P&&(C[O]=0,$[O]=0,l[O]=0,f=!0)}else for(let P=0;P<C.length;P++)$[P]&&C[P]===b&&(C[P]=0,$[P]=0,l[P]=0,f=!0);o[y]=$}if(f){const y=t.bandMasks||t.pixels.length>1?o:null;i?.matchAllNoData?t.mask=y&&y.length>1?g(y):l:(t.bandMasks=y,t.mask=l)}function g(y){if(y.length<2)return y[0];const b=y[0].length,_=new Uint8Array(b).fill(0);for(let S=0;S<y.length;S++){const $=y[S];for(let C=0;C<b;C++)$[C]&&(_[C]=255)}return _}f&&"updateStatistics"in t&&t.updateStatistics()}function Q$e(t){return t==null||t.type==="simple"||t.type==="unique-value"||t.type==="class-breaks"||t.type==="dictionary"||t.type==="heatmap"}function czt(t,e){if(t==null)return null;if(!Q$e(t))return new ee("renderer-conversion-3d:unsupported-renderer",`Unsupported renderer of type '${t.type}'`,{renderer:t});switch(t.type){case"simple":return Rlt(t,e);case"unique-value":return zlt(t,e);case"class-breaks":return Flt(t,e);case"dictionary":case"heatmap":return null}return null}function cJ(t,e){if(!e)return null;if(Array.isArray(e)||(e=[e]),e.length>0){const i=e.map(n=>n.details.symbol.type||n.details.symbol.declaredClass).filter(n=>!!n);i.sort();const r=new Array;return i.forEach((n,s)=>{s!==0&&n===i[s-1]||r.push(n)}),new ee("renderer-conversion-3d:unsupported-symbols",`Renderer contains symbols (${r.join(", ")}) which are not supported in 3D`,{renderer:t,symbolErrors:e})}return null}function Rlt(t,e){const i={...Tm,...e,cimFallbackEnabled:!0};return cJ(t,iT(t.symbol,i).error)}function zlt(t,e){const i={...Tm,...e,cimFallbackEnabled:!0},r=t.uniqueValueInfos?.map(s=>iT(s.symbol,i).error).filter(un),n=iT(t.defaultSymbol,i);return n.error&&r?.unshift(n.error),cJ(t,r)}function Flt(t,e){const i={...Tm,...e,cimFallbackEnabled:!0},r=t.classBreakInfos.map(s=>iT(s.symbol,i).error).filter(un),n=iT(t.defaultSymbol,i);return n.error&&r.unshift(n.error),cJ(t,r)}function Nlt(t){switch(t){case"circle":return{rings:[[[8.5,.2],[7.06,.33],[5.66,.7],[4.35,1.31],[3.16,2.14],[2.14,3.16],[1.31,4.35],[.7,5.66],[.33,7.06],[.2,8.5],[.33,9.94],[.7,11.34],[1.31,12.65],[2.14,13.84],[3.16,14.86],[4.35,15.69],[5.66,16.3],[7.06,16.67],[8.5,16.8],[9.94,16.67],[11.34,16.3],[12.65,15.69],[13.84,14.86],[14.86,13.84],[15.69,12.65],[16.3,11.34],[16.67,9.94],[16.8,8.5],[16.67,7.06],[16.3,5.66],[15.69,4.35],[14.86,3.16],[13.84,2.14],[12.65,1.31],[11.34,.7],[9.94,.33],[8.5,.2]]]};case"square":return{rings:[[[.5,.5],[.5,16.5],[16.5,16.5],[16.5,.5],[.5,.5]]]};case"diamond":return{rings:[[[8.5,.5],[.2,8.5],[8.5,16.5],[16.5,8.5],[8.5,.5]]]};case"hexagon-pointy":return{rings:[[[15.86,12.75],[15.86,4.25],[8.5,0],[1.14,4.25],[1.14,12.75],[8.5,17],[15.86,12.75]]]};case"hexagon-flat":return{rings:[[[12.75,15.86],[17,8.5],[12.75,1.14],[4.25,1.14],[0,8.5],[4.25,15.86],[12.75,15.86]]]}}}function uJ(t){return t?.type==="CIMVectorMarker"?t.markerGraphics?.[0]:void 0}function eTe(t){return t?.symbol?.type==="CIMPolygonSymbol"?t.symbol.symbolLayers?.[0]:void 0}function jlt(t,e){t?.type==="CIMVectorMarker"&&e!=null&&(t.size=e)}function Vlt(t,e){const i=uJ(t);i&&e!=null&&(i.geometry=Nlt(e))}function Blt(t,e){const i=eTe(uJ(t));i&&e!=null&&(i.color=e.toArray())}function Ult(t,e,i){const r=eTe(uJ(t));r&&e!=null&&i&&(r.colorLocked=e)}function dJ(t,e){const{outerRingSize:i,innerDotSize:r,type:n,color:s,colorLocked:a,primitiveOverrides:o}=e,l=t.data.symbol?.type==="CIMPolygonSymbol"?t.data.symbol.symbolLayers:null;if(l?.length===2)for(const c of l){const h=c.primitiveName==="reference-size-outer-ring";jlt(c,h?i:r),Vlt(c,n),Blt(c,s),Ult(c,a,h)}return i!=null&&r!=null&&(t.data.primitiveOverrides=null),o!==void 0&&(t.data.primitiveOverrides=de(o)),t}function Hlt(t,e,i){const r=t.effectiveClusterRenderer;if(!r||!("visualVariables"in r)||!r.visualVariables)return null;const n=r.visualVariables.find(h=>h.type==="size");if(!("stops"in n)||!n.stops)return null;const s=n.stops.find(h=>h.useMinValue),a=n.stops.find(h=>h.useMaxValue);if(s==null||a==null)return null;const o=i.featuresTilingScheme.getClosestInfoForScale(i.scale).level,l=n.field,c=e.getDisplayStatistics(o,l);return c?new Ei({field:n.field,minSize:t.clusterMinSize,minDataValue:c.minValue,maxSize:t.clusterMaxSize,maxDataValue:c.maxValue}):null}const Glt=/^-?(\d+)(\.(\d+))?$/i;function qlt(t,e){return t-e}function Wlt(t,e){let i,r;return i=Number(t.toFixed(e)),i<t?r=i+1/10**e:(r=i,i-=1/10**e),i=Number(i.toFixed(e)),r=Number(r.toFixed(e)),[i,r]}function Ylt(t,e,i,r,n){const s=OD(t,e,i,r),a=s.previous==null||s.previous<=n,o=s.next==null||s.next<=n;return a&&o||s.previous+s.next<=2*n}function Fz(t){const e=String(t),i=e.match(Glt);if(i?.[1])return{integer:i[1].split("").length,fractional:i[3]?i[3].split("").length:0};if(e.toLowerCase().includes("e")){const r=e.split("e"),n=r[0],s=r[1];if(n&&s){const a=Number(n);let o=Number(s);const l=o>0;l||(o=Math.abs(o));const c=Fz(a);return l?(c.integer+=o,o>c.fractional?c.fractional=0:c.fractional-=o):(c.fractional+=o,o>c.integer?c.integer=1:c.integer-=o),c}}return{integer:0,fractional:0}}function OD(t,e,i,r){const n={previous:null,next:null};if(i!=null){const s=t-i,a=e-i-s;n.previous=Math.floor(Math.abs(100*a/s))}if(r!=null){const s=r-t,a=r-e-s;n.next=Math.floor(Math.abs(100*a/s))}return n}function Nz(t,e={}){const i=t.slice(),{tolerance:r=2,strictBounds:n=!1,indexes:s=i.map((a,o)=>o)}=e;s.sort(qlt);for(let a=0;a<s.length;a++){const o=s[a],l=i[o],c=o===0?null:i[o-1],h=o===i.length-1?null:i[o+1],f=Fz(l).fractional;if(f){let g,y=0,b=!1;for(;y<=f&&!b;){const _=Wlt(l,y);g=n&&a===0?_[1]:_[0],b=Ylt(l,g,c,h,r),y++}b&&(i[o]=g)}}return i}const Zlt={maximumFractionDigits:20};function Xlt(t){return Sv(t,Zlt)}const uzt=",",Jlt={years:365,months:30,days:1,hours:1/24,minutes:1/1440,seconds:1/86400,milliseconds:1/864e5},Klt=new Set(["integer","small-integer"]);let GB=null;function dzt(t){return wN(t)||L0e(t)||D0e(t)}async function hzt(t){const{field:e,field2:i,field3:r,normalizationField:n,valueExpression:s,fields:a}=t;let o=[];if(s){if(!GB){const{arcadeUtils:l}=await Xm();GB=l}o=GB.extractFieldNames(s)}return e&&o.push(e),i&&o.push(i),r&&o.push(r),n&&o.push(n),a&&o.push(...a),o}function A2(t){return String(t).padStart(2,"0")}function mce(t,e,i){let r;return e==="date"||e==="number"?(e==="number"&&(t=new Date(t)),r=`TIMESTAMP'${i?t.getFullYear():t.getUTCFullYear()}-${A2((i?t.getMonth():t.getUTCMonth())+1)}-${A2(i?t.getDate():t.getUTCDate())} ${A2(i?t.getHours():t.getUTCHours())}:${A2(i?t.getMinutes():t.getUTCMinutes())}:${A2(i?t.getSeconds():t.getUTCSeconds())}'`):r=t,r}function pzt(t,e,i,r){const{hasQueryEngine:n}=t,s=`(${mce(i,gce(t,i),n)} - ${mce(e,gce(t,e),n)})`;let a=Jlt[r],o="/";return a<1&&(a=1/a,o="*"),{sqlExpression:a===1?s:`(${s} ${o} ${a})`,sqlWhere:null}}function gce(t,e){if(e instanceof Date)return"date";if(typeof e=="number")return"number";if(typeof e=="string"){const i=t.getField(e);if(e.toLowerCase()==="<now>")return;if(wN(i))return"field"}}function fzt(t,e){const i=e&&t.getField(e);return!!i&&Klt.has(i.type)}function mzt(t){return`cast(${t} as float)`}function Qlt(t,e){const{format:i,fieldFormat:r,timeZoneOptions:n,fieldType:s}=e??{},a=r?O3e(r):null;let o,l;if(n&&({timeZone:o,timeZoneName:l}=T3e(n.layerTimeZone,n.datesInUnknownTimezone,n.viewTimeZone,a||o2(i||"short-date-short-time"),s)),typeof t=="string"&&isNaN(Date.parse(s==="time-only"?`1970-01-01T${t}Z`:t)))return t;switch(s){case"date-only":{const c=a||o2(i||"short-date");return typeof t=="string"?L3e(t,{...c}):vu(t,{...c,timeZone:zp})}case"time-only":{const c=a||o2(i||"short-time");return typeof t=="string"?D3e(t,c):vu(t,{...c,timeZone:zp})}case"timestamp-offset":{if(!o&&typeof t=="string"&&new Date(t).toISOString()!==t)return t;const c=i||a||n?a||o2(i||"short-date-short-time"):void 0,h=c?{...c,timeZone:o,timeZoneName:l}:void 0;return typeof t=="string"?R3e(t,h):vu(t,h)}default:{const c=i||a||n?a||o2(i||"short-date-short-time"):void 0;return vu(typeof t=="string"?new Date(t):t,c?{...c,timeZone:o,timeZoneName:l}:void 0)}}}const tTe="<",iTe=">";function rTe(t,e,i,r){let n="";e===0?n=`${tTe} `:e===i&&(n=`${iTe} `);const s=LD(t,r);return s==null?"":n+s}function ect(t){const{format:e,fieldFormat:i}=t||{};return i?.type==="number"||!!e&&e.dateFormat==null&&(e.places!=null||e.digitSeparator!=null)}function LD(t,e){if(t==null)return t;const{fieldType:i,format:r,fieldFormat:n,timeZoneOptions:s}=e||{};if(hJ(i))return Qlt(t,{fieldType:i,format:r?.dateFormat,fieldFormat:n?.type==="date-time"?n:void 0,timeZoneOptions:s});if(typeof t=="string"&&ect(e)){const o=Number(t);isNaN(o)||(t=o)}if(typeof t=="string")return t;const a=n?.type==="number"?N3e(n):r?F3e(r):void 0;return a?Sv(t,a):Xlt(t)}const tct=["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwcdIkqhiWn5fHwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6JrzFUAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwaeIkqhiWl5/HwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6sKxboAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwadJEqhiWl5fPwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu75+IUcAAAAASUVORK5CYII="];async function _q(t){if(!("visualVariables"in t)||!t.visualVariables)return null;const e=t.visualVariables.find(a=>a.type==="color");if(!e)return null;let i=null,r=null;if(e.stops){if(e.stops.length===1)return e.stops[0].color;i=e.stops[0].value,r=e.stops[e.stops.length-1].value}const n=i!=null&&r!=null?i+(r-i)/2:0,{getColor:s}=await fe(async()=>{const{getColor:a}=await Promise.resolve().then(()=>$_);return{getColor:a}},void 0);return s(e,n)??null}async function nTe(t,e){const i=t.trailCap,r=t.trailWidth||1,n=e||await _q(t)||t.color;return new en({cap:i,color:n,width:r})}function ict(t,e){if(!e)return null;if("featureReduction"in t)switch(t.featureReduction?.type){case"cluster":case"binning":{const i=t.featureReduction.fields.find(({name:r})=>r.toLowerCase()===e.toLowerCase());return i&&"getField"in t?t.getField(i.onStatisticField):null}}return"getField"in t?t.getField?.(e):null}function rct(t,e){const i="popupTemplate"in t?t.popupTemplate?.fieldInfos:null;if(i?.length&&e)return i.find(r=>r.fieldName?.toLowerCase()===e.toLowerCase())}function yce(t){let e=0,i=0;return t.stops?(e=t.stops?.at(0)?.value??e,i=t.stops?.at(-1)?.value??i):"minDataValue"in t&&"maxDataValue"in t&&(e=t.minDataValue??e,i=t.maxDataValue??i),i-e>2*z9.days?"short-date":"short-date-short-time"}function hJ(t){return["date","date-only","time-only","timestamp-offset"].includes(t||"")}function sTe(t){return MZ(t)&&!("featureReduction"in t&&t.featureReduction)}function nct(t,e,i){const r=DD(t,e.field,i);return r?(hJ(r.fieldType)&&(sTe(t)?r.fieldFormat??=new hv({dateStyle:"short",timeStyle:yce(e)==="short-date-short-time"?"short":null}):r.format??=new kp({dateFormat:yce(e)})),r):null}function DD(t,e,i){const r=ict(t,e),n=r?.name;if(!n)return null;const s=r?.type,a=sTe(t);return{fieldType:s,format:a?null:rct(t,n)?.format,fieldFormat:a?t.getFieldConfiguration(n)?.fieldFormat:null,timeZoneOptions:hJ(s)?{layerTimeZone:"preferredTimeZone"in t?t.preferredTimeZone:null,viewTimeZone:i,datesInUnknownTimezone:"datesInUnknownTimezone"in t&&t.datesInUnknownTimezone}:null}}function xp(t,e){if("authoringInfo"in t)return t.authoringInfo?.visualVariables?.find(({theme:i})=>i===e)}function sct(t,e){let i=t??"";return e!=null&&e&&(i=i?"("+i+") AND ("+e+")":e),i}const act=new Ye([64,64,64]);function aTe(t,e){const i=[],r=t.length-1;return t.length===5?i.push(0,2,4):i.push(0,r),t.map((n,s)=>i.includes(s)?rTe(n,s,r,e):null)}async function vce(t,e,i){let r=!1,n=[],s=[];if(t.stops){const c=t.stops;n=c.map(h=>h.value),r=c.some(h=>!!h.label),r&&(s=c.map(h=>h.label))}const a=n[0],o=n[n.length-1];if(a==null&&o==null)return null;const l=r?null:aTe(n,i);return(await Promise.all(n.map(async(c,h)=>{const f=t.type==="opacity"?await oct(c,t,e):(await fe(async()=>{const{getColor:y}=await Promise.resolve().then(()=>$_);return{getColor:y}},void 0)).getColor(t,c),g=r?s[h]:l?.[h]??"";return f==null?null:{value:c,color:f,label:g}}))).filter(un).reverse()}async function oct(t,e,i){const r=new Ye(i??act),n=(await fe(async()=>{const{getOpacity:s}=await Promise.resolve().then(()=>$_);return{getOpacity:s}},void 0)).getOpacity(e,t);return n!=null&&(r.a=n),r}function lct(t){let e=!1,i=[],r=[];i=t.map(o=>o.value),e=t.some(o=>!!o.label),e&&(r=t.map(o=>o.label??""));const n=i[0],s=i[i.length-1];if(n==null&&s==null)return null;const a=e?null:aTe(i);return i.map((o,l)=>({value:o,color:oTe(o,t),label:e?r[l]:a?.[l]??""})).reverse()}function oTe(t,e){const{startIndex:i,endIndex:r,weight:n}=cct(t,e);if(i===r)return e[i].color;const s=Ye.blendColors(e[i].color,e[r].color,n);return new Ye(s)}function cct(t,e){let i=0,r=e.length-1;return e.some((n,s)=>t<n.value?(r=s,!0):(i=s,!1)),{startIndex:i,endIndex:r,weight:(t-e[i].value)/(e[r].value-e[i].value)}}function uct(t,e){let i=[];if(t&&t.type==="multipart")t.colorRamps.reverse().forEach((r,n)=>{n===0?i.push({value:e.max,color:new Ye(r.toColor),label:"high"}):i.push({value:null,color:new Ye(r.toColor),label:""}),n===t.colorRamps.length-1?i.push({value:e.min,color:new Ye(r.fromColor),label:"low"}):i.push({value:null,color:new Ye(r.fromColor),label:""})});else{let r,n;t&&t.type==="algorithmic"?(r=t.fromColor,n=t.toColor):(r=[0,0,0,1],n=[255,255,255,1]),i=[{value:e.max,color:new Ye(n),label:"high"},{value:e.min,color:new Ye(r),label:"low"}]}return i}function dct(t){if(!t.colorStops)return[];const e=[...t.colorStops].filter(r=>r.color?.a>0);let i=e.length-1;if(e&&e[0]){const r=e[i];r&&r.ratio!==1&&(e.push(new Lm({ratio:1,color:r.color})),i++)}return e.map((r,n)=>{let s="";return n===0?s=t.legendOptions?.minLabel||"low":n===i&&(s=t.legendOptions?.maxLabel||"high"),{color:r.color,label:s,ratio:r.ratio}}).reverse()}const hct="spike-height-override";function pct(t){const{strokeColor:e,strokeWidth:i,symbolStyle:r}=t,n=r?.includes("solid-fill")||r?.includes("gradient-fill");let s=e?.toArray(),a=!1;return r?.includes("outline")&&n?a=!0:s=t.color?.toArray(),{type:"CIMSolidStroke",effects:fct(r),enable:!0,colorLocked:a,capStyle:"Round",joinStyle:"Round",lineStyle3D:"Strip",miterLimit:4,width:i??Xi(1),color:s}}function fct(t){if(!t?.includes("closed"))return[{type:"CIMGeometricEffectAddControlPoints",angleTolerance:90,primitiveName:"spike-control-points"},{type:"CIMGeometricEffectSuppress",suppress:!0,invert:!0,primitiveName:"spike-stroke-suppress"}]}function bce(t){const{color:e,symbolStyle:i}=t,r=i?.includes("solid-fill"),n=i?.includes("gradient-fill");if(!r&&!n||!e)return;if(r)return{type:"CIMSolidFill",enable:!0,colorLocked:!1,color:e?.toArray()};const s=e.clone();return s.a=0,{type:"CIMGradientFill",enable:!0,angle:90,colorRamp:{type:"CIMMultipartColorRamp",colorRamps:[{type:"CIMLinearContinuousColorRamp",fromColor:e.toArray(),toColor:s.toArray()}],weights:[1]},gradientMethod:"Linear",gradientSize:70,gradientSizeUnits:"Relative",gradientType:"Continuous"}}function lTe(t,e){const{defaultHeight:i,baseWidth:r,color:n,strokeColor:s,primitiveOverrides:a,symbolStyle:o,strokeWidth:l}=e,c=t.data.symbol?.type==="CIMPointSymbol"?t.data.symbol:null,h=c?.symbolLayers;if(!h)return t;const f=c.effects,g=f?.find(C=>C.type==="CIMGeometricEffectTaperedPolygon"),y=f?.find(C=>C.type==="CIMGeometricEffectRadial"&&C.primitiveName===hct);r!=null&&g&&(g.fromWidth=r),i!=null&&y&&(y.length=i);const b=h?.find(C=>C.type==="CIMSolidStroke"),_=h?.find(C=>C.type==="CIMSolidFill"),S=h?.find(C=>C.type==="CIMGradientFill"),$=S?.colorRamp?.type==="CIMMultipartColorRamp"&&S.colorRamp.colorRamps[0]?.type==="CIMLinearContinuousColorRamp"?S.colorRamp.colorRamps[0]:null;if(o){const C=_?.color??$?.fromColor??b?.color,I=n??(C?new Ye(C):void 0),P=b?.color??C,O=s??(P?new Ye(P):void 0),N=o.includes("solid-fill"),R=o.includes("gradient-fill");if(N||R||qB(h,_??S),I){if(N)qB(h,S),_?_.color=I?.toArray():h.push(bce({...e,color:I}));else if(R)if(qB(h,_),S){if($&&n){const G=I.clone();G.a=0,$.fromColor=I.toArray(),$.toColor=G.toArray()}}else h.push(bce({...e,color:I}))}if(b){const G=pct({...e,strokeColor:O,color:I});b.effects=G.effects,b.color=G.color,b.width=G.width,b.colorLocked=G.colorLocked}}else if(b&&(s&&(b.color=s.toArray()),l!=null&&(b.width=l)),_&&n&&(_.color=n.toArray()),$&&n){const C=n.clone();C.a=0,$.fromColor=n.toArray(),$.toColor=C.toArray()}return a!==void 0&&(t.data.primitiveOverrides=de(a)),t}function qB(t,e){if(!e)return;const i=t.indexOf(e);i!==-1&&t.splice(i,1)}const lL=[["(",")"],[")","("],["<",">"],[">","<"],["[","]"],["]","["],["{","}"],["}","{"],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""]],lT=["","","",""],mct=["","","",""],gct=["","","",""],jz=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],yct=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],vct=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],bct=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],wct=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],wce=["","","","","","","","","","","","",""],_ct=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],_ce=["",""],xct=["",""],Sct=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],$ct=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],V=0,Oe=1,Dt=2,Ln=3,D=4,jh=5,RD=6,z=7,Ya=8,_o=9,Xu=10,Ut=11,me=12,Tct=13,kct=14,Ect=15,Cct=16,Ict=17,vt=18,Mct=["UBAT_L","UBAT_R","UBAT_EN","UBAT_AN","UBAT_ON","UBAT_B","UBAT_S","UBAT_AL","UBAT_WS","UBAT_CS","UBAT_ES","UBAT_ET","UBAT_NSM","UBAT_LRE","UBAT_RLE","UBAT_PDF","UBAT_LRO","UBAT_RLO","UBAT_BN"],zh=100,Act=[zh+0,V,V,V,V,zh+1,zh+2,zh+3,Oe,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,zh+4,D,D,D,V,D,V,D,V,D,D,D,V,V,D,D,V,V,V,V,V,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,V,V,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,V,V,V,V,V,V,V,V,V,V,V,V,V,V,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,V,V,D,D,V,V,D,D,V,V,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,V,V,V,zh+5,z,z,zh+6,zh+7],Pct=[[vt,vt,vt,vt,vt,vt,vt,vt,vt,RD,jh,RD,Ya,jh,vt,vt,vt,vt,vt,vt,vt,vt,vt,vt,vt,vt,vt,vt,jh,jh,jh,RD,Ya,D,D,Ut,Ut,Ut,D,D,D,D,D,Xu,_o,Xu,_o,_o,Dt,Dt,Dt,Dt,Dt,Dt,Dt,Dt,Dt,Dt,_o,D,D,D,D,D,D,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,D,D,D,D,D,D,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,D,D,D,D,vt,vt,vt,vt,vt,vt,jh,vt,vt,vt,vt,vt,vt,vt,vt,vt,vt,vt,vt,vt,vt,vt,vt,vt,vt,vt,vt,vt,vt,vt,vt,vt,vt,_o,D,Ut,Ut,Ut,Ut,D,D,D,D,V,D,D,vt,D,D,Ut,Ut,Dt,Dt,D,V,D,D,D,Dt,V,D,D,D,D,D,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,D,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,D,V,V,V,V,V,V,V,V],[V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,D,D,D,D,D,D,D,D,D,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,D,D,V,V,V,V,V,V,V,D,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,D,V,D,D,D,D,D,D,D,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,Oe,me,Oe,me,me,Oe,me,me,Oe,me,D,D,D,D,D,D,D,D,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,D,D,D,D,D,Oe,Oe,Oe,Oe,Oe,D,D,D,D,D,D,D,D,D,D,D],[Ln,Ln,Ln,Ln,D,D,D,D,z,Ut,Ut,z,_o,z,D,D,me,me,me,me,me,me,me,me,me,me,me,z,D,D,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,Ln,Ln,Ln,Ln,Ln,Ln,Ln,Ln,Ln,Ln,Ut,Ln,Ln,z,z,z,me,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,me,me,me,me,me,me,me,Ln,D,me,me,me,me,me,me,z,z,me,me,D,me,me,me,me,z,z,Dt,Dt,Dt,Dt,Dt,Dt,Dt,Dt,Dt,Dt,z,z,z,z,z,z],[z,z,z,z,z,z,z,z,z,z,z,z,z,z,D,z,z,me,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,D,D,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,me,me,me,me,me,me,me,me,me,me,me,z,D,D,D,D,D,D,D,D,D,D,D,D,D,D,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,me,me,me,me,me,me,me,me,me,Oe,Oe,D,D,D,D,Oe,D,D,D,D,D],[Ya,Ya,Ya,Ya,Ya,Ya,Ya,Ya,Ya,Ya,Ya,vt,vt,vt,V,Oe,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,Ya,jh,Tct,kct,Ect,Cct,Ict,_o,Ut,Ut,Ut,Ut,Ut,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,_o,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,Ya,vt,vt,vt,vt,vt,D,D,D,D,D,vt,vt,vt,vt,vt,vt,Dt,V,D,D,Dt,Dt,Dt,Dt,Dt,Dt,Xu,Xu,D,D,D,V,Dt,Dt,Dt,Dt,Dt,Dt,Dt,Dt,Dt,Dt,Xu,Xu,D,D,D,D,V,V,V,V,V,V,V,V,V,V,V,V,V,D,D,D,Ut,Ut,Ut,Ut,Ut,Ut,Ut,Ut,Ut,Ut,Ut,Ut,Ut,Ut,Ut,Ut,Ut,Ut,Ut,Ut,Ut,Ut,Ut,Ut,Ut,Ut,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D],[V,V,V,V,V,V,V,D,D,D,D,D,D,D,D,D,D,D,D,V,V,V,V,V,D,D,D,D,D,Oe,me,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Xu,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,D,Oe,Oe,Oe,Oe,Oe,D,Oe,D,Oe,Oe,D,Oe,Oe,D,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z],[me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,me,me,me,me,me,me,me,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,_o,D,_o,D,D,_o,D,D,D,D,D,D,D,D,D,Ut,D,D,Xu,Xu,D,D,D,D,D,Ut,Ut,D,D,D,D,D,z,z,z,z,z,D,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,D,D,vt],[D,D,D,Ut,Ut,Ut,D,D,D,D,D,Xu,_o,Xu,_o,_o,Dt,Dt,Dt,Dt,Dt,Dt,Dt,Dt,Dt,Dt,_o,D,D,D,D,D,D,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,D,D,D,D,D,D,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,D,D,D,D,D,D,D,D,D,D,D,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,D,D,D,V,V,V,V,V,V,D,D,V,V,V,V,V,V,D,D,V,V,V,V,V,V,D,D,V,V,V,D,D,D,Ut,Ut,D,D,D,Ut,Ut,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D]];let Oct=class{constructor(){this.inputFormat="ILYNN",this.outputFormat="VLNNN",this.sourceToTarget=[],this.targetToSource=[],this.levels=[]}bidiTransform(e,i,r){if(this.sourceToTarget=[],this.targetToSource=[],!e)return"";if(Xct(this.sourceToTarget,this.targetToSource,e.length),!this.checkParameters(i,r))return e;i=this.inputFormat,r=this.outputFormat;let n=e;const s=Kct,a=$ce(i.charAt(1)),o=$ce(r.charAt(1)),l=(i.startsWith("I")?"L":i.charAt(0))+a,c=(r.startsWith("I")?"L":r.charAt(0))+o,h=i.charAt(2)+r.charAt(2);s.defInFormat=l,s.defOutFormat=c,s.defSwap=h;const f=HE(e,l,c,h,s);let g=!1;return r.charAt(1)==="R"?g=!0:r.charAt(1)!=="C"&&r.charAt(1)!=="D"||(g=this.checkContextual(f)==="rtl"),this.sourceToTarget=gc,this.targetToSource=Jct(this.sourceToTarget),Bz=this.targetToSource,n=i.charAt(3)===r.charAt(3)?f:r.charAt(3)==="S"?Dct(g,f):Fct(f,g,!0),this.sourceToTarget=gc,this.targetToSource=Bz,this.levels=rj,n}_inputFormatSetter(e){if(!Tce.test(e))throw new Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.inputFormat=e}_outputFormatSetter(e){if(!Tce.test(e))throw new Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.outputFormat=e}checkParameters(e,i){return e?this._inputFormatSetter(e):e=this.inputFormat,i?this._outputFormatSetter(i):i=this.outputFormat,e!==i}checkContextual(e){let i=Vz(e);if(i!=="ltr"&&i!=="rtl"){try{i=document.dir.toLowerCase()}catch{}i!=="ltr"&&i!=="rtl"&&(i="ltr")}return i}hasBidiChar(e){return tut.test(e)}};function HE(t,e,i,r,n){const s=Lct(t,{inFormat:e,outFormat:i,swap:r},n);if(s.inFormat===s.outFormat)return t;e=s.inFormat,i=s.outFormat,r=s.swap;const a=e.slice(0,1),o=e.slice(1,4),l=i.slice(0,1),c=i.slice(1,4);if(n.inFormat=e,n.outFormat=i,n.swap=r,a==="L"&&i==="VLTR"){if(o==="LTR")return n.dir=G1,ny(t,n);if(o==="RTL")return n.dir=GE,ny(t,n)}if(a==="V"&&l==="V")return n.dir=o==="RTL"?GE:G1,WB(t,n);if(a==="L"&&i==="VRTL")return o==="LTR"?(n.dir=G1,t=ny(t,n)):(n.dir=GE,t=ny(t,n)),WB(t);if(e==="VLTR"&&i==="LLTR")return n.dir=G1,ny(t,n);if(a==="V"&&l==="L"&&o!==c)return t=WB(t),o==="RTL"?HE(t,"LLTR","VLTR",r,n):HE(t,"LRTL","VRTL",r,n);if(e==="VRTL"&&i==="LRTL")return HE(t,"LRTL","VRTL",r,n);if(a==="L"&&l==="L"){const h=n.swap;return n.swap=h.slice(0,1)+"N",o==="RTL"?(n.dir=GE,t=ny(t,n),n.swap="N"+h.slice(1,3),n.dir=G1,t=ny(t,n)):(n.dir=G1,t=ny(t,n),n.swap="N"+h.slice(1,3),t=HE(t,"VLTR","LRTL",n.swap,n)),t}return t}function Lct(t,e,i){if(e.inFormat===void 0&&(e.inFormat=i.defInFormat),e.outFormat===void 0&&(e.outFormat=i.defOutFormat),e.swap===void 0&&(e.swap=i.defSwap),e.inFormat===e.outFormat)return e;const r=e.inFormat.slice(0,1),n=e.outFormat.slice(0,1);let s,a=e.inFormat.slice(1,4),o=e.outFormat.slice(1,4);return a.startsWith("C")&&(s=Vz(t),a=s==="ltr"||s==="rtl"?s.toUpperCase():e.inFormat.charAt(2)==="L"?"LTR":"RTL",e.inFormat=r+a),o.startsWith("C")&&(s=Vz(t),s==="rtl"?o="RTL":s==="ltr"?(s=zct(t),o=s.toUpperCase()):o=e.outFormat.charAt(2)==="L"?"LTR":"RTL",e.outFormat=n+o),e}function Dct(t,e,i){if(e.length===0)return"";t===void 0&&(t=!0);const r=(e=String(e)).split("");let n=0,s=1,a=r.length;t||(n=r.length-1,s=-1,a=1);const o=Rct(r,n,s,a);let l="";for(let c=0;c<r.length;c++)Bct(o,o.length,c)>-1?(dTe(Bz,c,!t,-1),gc.splice(c,1)):l+=r[c];return l}function Rct(t,e,i,r,n){let s=0;const a=[];let o=0;for(let l=e;l*i<r;l+=i)if(uTe(t[l])||XI(t[l])){if(t[l]===""&&Uct(t,l+i,i,r)){t[l]=Zct(t[l+i],s===0?mct:gct),l+=i,Yct(t,l,i,r),a[o]=l,o++,s=0;continue}const c=t[l];s===1?t[l]=xce(t,l+i,i,r)?Wct(t[l]):YB(t[l],vct):xce(t,l+i,i,r)===!0?t[l]=YB(t[l],wct):t[l]=YB(t[l],yct),XI(c)||(s=1),qct(c)===!0&&(s=0)}else s=0;return a}function Vz(t){const e=/[A-Za-z\u05d0-\u065f\u066a-\u06ef\u06fa-\u07ff\ufb1d-\ufdff\ufe70-\ufefc]/.exec(t);return e?e[0]<="z"?"ltr":"rtl":""}function zct(t){const e=t.split("");return e.reverse(),Vz(e.join(""))}function Fct(t,e,i){if(t.length===0)return"";e===void 0&&(e=!0);let r="";const n=(t=String(t)).split("");for(let s=0;s<t.length;s++){let a=!1;if(n[s]>=""&&n[s]<"\uFEFF"){const o=t.charCodeAt(s);n[s]>=""&&n[s]<=""?(e?(s>0&&i&&n[s-1]===" "?r=r.slice(0,-1)+"":(r+="",a=!0),r+=lT[(o-65269)/2]):(r+=lT[(o-65269)/2],r+="",s+1<t.length&&i&&n[s+1]===" "?s++:a=!0),a&&(dTe(Bz,s,!0,1),gc.splice(s,0,gc[s]))):r+=_ct[o-65136]}else r+=n[s]}return r}function ny(t,e){const i=t.split(""),r=[];return cTe(i,r,e),jct(i,r,e),Sce(2,i,r,e),Sce(1,i,r,e),rj=r,i.join("")}function cTe(t,e,i){const r=t.length,n=i.dir?$ct:Sct;let s=0,a=-1;const o=[],l=[];i.hiLevel=i.dir,i.lastArabic=!1,i.hasUbatAl=!1,i.hasUbatB=!1,i.hasUbatS=!1;for(let c=0;c<r;c++)o[c]=Vct(t[c]);for(let c=0;c<r;c++){const h=s,f=Hct(t,o,l,c,i);l[c]=f,s=n[h][f];const g=240&s;s&=15;const y=n[s][Qct];if(e[c]=y,g>0)if(g===16){for(let b=a;b<c;b++)e[b]=1;a=-1}else a=-1;if(n[s][eut])a===-1&&(a=c);else if(a>-1){for(let b=a;b<c;b++)e[b]=y;a=-1}o[c]===jh&&(e[c]=0),i.hiLevel|=y}i.hasUbatS&&Nct(o,e,r,i)}function Nct(t,e,i,r){for(let n=0;n<i;n++)if(t[n]===RD){e[n]=r.dir;for(let s=n-1;s>=0&&t[s]===Ya;s--)e[s]=r.dir}}function jct(t,e,i){if(i.hiLevel!==0&&i.swap[0]!==i.swap[1])for(let r=0;r<t.length;r++)e[r]===1&&(t[r]=Gct(t[r]))}function Vct(t){const e=t.charCodeAt(0),i=Act[e>>8];return i<zh?i:Pct[i-zh][255&e]}function WB(t,e){const i=t.split("");if(e){const r=[];cTe(i,r,e),rj=r}return i.reverse(),gc.reverse(),i.join("")}function Bct(t,e,i){for(let r=0;r<e;r++)if(t[r]===i)return r;return-1}function uTe(t){for(let e=0;e<_ce.length;e++)if(t>=_ce[e]&&t<=xct[e])return!0;return!1}function xce(t,e,i,r){for(;e*i<r&&XI(t[e]);)e+=i;return!!(e*i<r&&uTe(t[e]))}function Uct(t,e,i,r){for(;e*i<r&&XI(t[e]);)e+=i;let n=" ";if(!(e*i<r))return!1;n=t[e];for(let s=0;s<lT.length;s++)if(lT[s]===n)return!0;return!1}function Sce(t,e,i,r){if(r.hiLevel<t)return;if(t===1&&r.dir===GE&&!r.hasUbatB)return e.reverse(),void gc.reverse();const n=e.length;let s,a,o,l,c,h=0;for(;h<n;){if(i[h]>=t){for(s=h+1;s<n&&i[s]>=t;)s++;for(a=h,o=s-1;a<o;a++,o--)l=e[a],e[a]=e[o],e[o]=l,c=gc[a],gc[a]=gc[o],gc[o]=c;h=s}h++}}function Hct(t,e,i,r,n){const s=e[r];return{UBAT_L:()=>(n.lastArabic=!1,V),UBAT_R:()=>(n.lastArabic=!1,Oe),UBAT_ON:()=>D,UBAT_AN:()=>Ln,UBAT_EN:()=>n.lastArabic?Ln:Dt,UBAT_AL:()=>(n.lastArabic=!0,n.hasUbatAl=!0,Oe),UBAT_WS:()=>D,UBAT_CS:()=>{let a,o;return r<1||r+1>=e.length||(a=i[r-1])!==Dt&&a!==Ln||(o=e[r+1])!==Dt&&o!==Ln?D:(n.lastArabic&&(o=Ln),o===a?o:D)},UBAT_ES:()=>(r>0?i[r-1]:jh)===Dt&&r+1<e.length&&e[r+1]===Dt?Dt:D,UBAT_ET:()=>{if(r>0&&i[r-1]===Dt)return Dt;if(n.lastArabic)return D;let a=r+1;const o=e.length;for(;a<o&&e[a]===Ut;)a++;return a<o&&e[a]===Dt?Dt:D},UBAT_NSM:()=>{if(n.inFormat==="VLTR"){const a=e.length;let o=r+1;for(;o<a&&e[o]===me;)o++;if(o<a){const l=t[r].charCodeAt(0),c=l>=1425&&l<=2303||l===64286,h=e[o];if(c&&(h===Oe||h===z))return Oe}}return r<1||e[r-1]===jh?D:i[r-1]},UBAT_B:()=>(n.lastArabic=!0,n.hasUbatB=!0,n.dir),UBAT_S:()=>(n.hasUbatS=!0,D),UBAT_LRE:()=>(n.lastArabic=!1,D),UBAT_RLE:()=>(n.lastArabic=!1,D),UBAT_LRO:()=>(n.lastArabic=!1,D),UBAT_RLO:()=>(n.lastArabic=!1,D),UBAT_PDF:()=>(n.lastArabic=!1,D),UBAT_BN:()=>D}[Mct[s]]()}function Gct(t){let e,i=0,r=lL.length-1;for(;i<=r;)if(e=Math.floor((i+r)/2),t<lL[e][0])r=e-1;else{if(!(t>lL[e][0]))return lL[e][1];i=e+1}return t}function qct(t){for(let e=0;e<wce.length;e++)if(wce[e]===t)return!0;return!1}function Wct(t){for(let e=0;e<jz.length;e++)if(t===jz[e])return bct[e];return t}function YB(t,e){for(let i=0;i<jz.length;i++)if(t===jz[i])return e[i];return t}function XI(t){return t>=""&&t<=""}function $ce(t){return t==="L"?"LTR":t==="R"?"RTL":t==="C"?"CLR":t==="D"?"CRL":""}function Yct(t,e,i,r){for(;e*i<r&&XI(t[e]);)e+=i;return e*i<r&&(t[e]=" ",!0)}function Zct(t,e){for(let i=0;i<lT.length;i++)if(t===lT[i])return e[i];return t}function Xct(t,e,i){gc=[],rj=[];for(let r=0;r<i;r++)t[r]=r,e[r]=r,gc[r]=r}function Jct(t){const e=new Array(t.length);for(let i=0;i<t.length;i++)e[t[i]]=i;return e}function dTe(t,e,i,r){for(let n=0;n<t.length;n++)(t[n]>e||!i&&t[n]===e)&&(t[n]+=r)}let gc=[],Bz=[],rj=[];const Kct={dir:0,defInFormat:"LLTR",defSwap:"YN",inFormat:"LLTR",outFormat:"VLTR",swap:"YN",hiLevel:0,lastArabic:!1,hasUbatAl:!1,defOutFormat:""},Qct=5,eut=6,G1=0,GE=1,Tce=/^[(I|V)][(L|RCD)][(Y|N)][(S|N)]N$/,tut=/[\u0591-\u06ff\ufb1d-\ufefc]/,ZB=new Oct;function iut(t){if(t==null)return["",!1];if(!ZB.hasBidiChar(t))return[t,!1];let e;return e=ZB.checkContextual(t)==="rtl"?"IDNNN":"ICNNN",[ZB.bidiTransform(t,e,"VLYSN"),!0]}function rut(t){return 32+t.length}const hTe=16;function yzt(t){if(!t)return 0;let e=fJ;for(const i in t)t.hasOwnProperty(i)&&(e+=pJ(t[i],!1));return e}function nut(t){if(!t)return 0;if(typeof t[0]=="number")return pTe(t);if(Array.isArray(t))return sut(t);let e=fJ;for(const i in t)t.hasOwnProperty(i)&&(e+=pJ(t[i]));return e}function sut(t){const e=t.length;if(e===0||typeof t[0]=="number")return fTe(t,8);let i=mTe;for(let r=0;r<e;r++)i+=pJ(t[r]);return i}function pJ(t,e=!0){switch(typeof t){case"object":return e?nut(t):fJ;case"string":return rut(t);case"number":return hTe;case"boolean":return 4;default:return 8}}function pTe(...t){return t.reduce((e,i)=>e+(i?Nhe(i)?i.byteLength+aut:Array.isArray(i)?fTe(i,hTe):0:0),0)}function fTe(t,e){return mTe+t.length*e}const fJ=32,mTe=16,aut=145,Db=2;let Uz=class oS{constructor(e=[],i=[]){this.lengths=e??[],this.coords=i??[]}static fromJSON(e){return new oS(e.lengths,e.coords)}static fromRect(e){const[i,r,n,s]=e,a=n-i,o=s-r;return new oS([5],[i,r,a,0,0,o,-a,0,0,-o])}get isPoint(){return this.lengths.length===0&&this.coords.length>=2}get maxLength(){return Math.max(...this.lengths)}get size(){return this.lengths.reduce((e,i)=>e+i)}get usedMemory(){return 64+pTe(this.lengths,this.coords)}area(){let e=0,i=0;if(!this.lengths.length)return 0;for(let r=0;r<this.lengths.length;r++){const n=this.lengths[r];if(n<3)continue;let s=this.coords[Db*i],a=this.coords[Db*i+1];for(let o=1;o<n;o+=1){const l=this.coords[Db*(o+i)],c=this.coords[Db*(o+i)+1];e+=-.5*(l-s)*(c+a),s=l,a=c}i+=n}return e}forEachVertex(e){let i=0;this.lengths.length||e(this.coords[0],this.coords[1]);for(let r=0;r<this.lengths.length;r++){const n=this.lengths[r];for(let s=0;s<n;s++)e(this.coords[Db*(s+i)],this.coords[Db*(s+i)+1]);i+=n}}deltaDecode(){const e=this.clone(),{coords:i,lengths:r}=e;let n=0;for(const s of r){for(let a=1;a<s;a++)i[2*(n+a)]+=i[2*(n+a)-2],i[2*(n+a)+1]+=i[2*(n+a)-1];n+=s}return e}clone(e){if(this.lengths.length===0)return new oS([],[this.coords[0],this.coords[1]]);const i=(this.lengths.length===0?1:this.lengths.reduce((n,s)=>n+s))*Db,r=this.coords.slice(0,i);return e?(e.set(r),new oS(this.lengths,e)):new oS(Array.from(this.lengths),Array.from(r))}},Ji=class{static fromOptimized(e,i,r=!1,n=!1,s=1){return new xq().initialize(e,i,r,n,s)}static fromJSON(e,i=!1,r=!1){const[n,s]=kce(e);return new $q().initialize(n,s,i,r,1)}static fromOptimizedCIM(e,i,r=!1,n=!1,s=1){return new Ece().initialize(e,i,r,n,s)}static fromJSONCIM(e,i=!1,r=!1,n=1){const[s,a]=kce(e);return new Cce().initialize(s,a,i,r,n)}static fromFeatureSetReader(e){const i=e.readGeometryForDisplay(),r=e.geometryType;return i&&r?this.fromOptimized(i,r):null}static fromFeatureSetReaderCIM(e){const i=e.readGeometryForDisplay(),r=e.geometryType;return i&&r?this.fromOptimizedCIM(i,r):null}static createEmptyOptimized(e,i=!1,r=!1,n=1){return new xq().initialize(new Uz,e,i,r,n)}static createEmptyJSON(e,i=!1,r=!1){return new $q().initialize([],e,i,r,1)}static createEmptyOptimizedCIM(e,i=!1,r=!1,n=1){return new Ece().initialize(new Uz,e,i,r,n)}static createEmptyJSONCIM(e,i=!1,r=!1,n=1){return new Cce().initialize([],e,i,r,n)}asJSON(){const e=uN(this);return this.geometryType==="esriGeometryEnvelope"?{xmin:e[0][0][0],ymin:e[0][0][1],xmax:e[0][2][0],ymax:e[0][2][1]}:this.geometryType==="esriGeometryMultipoint"?{points:e.flat()}:this.geometryType==="esriGeometryPoint"?{x:e[0][0][0],y:e[0][0][1]}:this.geometryType==="esriGeometryPolygon"?{rings:e}:{paths:e}}getCurrentRingArea(){if(this.pathSize<3)return 0;let e,i,r=0;if(this.seekPathStart(),!this.nextPoint())return 0;e=this.x,i=this.y;const n=e,s=i;for(;this.nextPoint();)r+=(e-this.x)*(i+this.y),e=this.x,i=this.y;return r+=(e-n)*(i+s),-.5*r}invertY(){this.yFactor*=-1}},xq=class Sq extends Ji{constructor(){super(...arguments),this._end=-1}initialize(e,i,r,n,s){return this.hasZ=r,this.hasM=n,this.geometryType=i,this._stride=2+Number(r)+Number(n),this._geometry=e,this._pathIndex=-1,this._pathOffset=0,this._pointOffset=-this._stride,this._end=-1,this.yFactor=s,this}reset(){this.initialize(this._geometry,this.geometryType,this.hasZ,this.hasM,this.yFactor)}seekPath(e){if(e>=0&&e<this.totalSize){if(this._pathIndex<e)for(;this._pathIndex<e&&this.nextPath(););else if(this._pathIndex>e)for(;this._pathIndex>e&&this.prevPath(););return!0}return!1}seekPathStart(){this._pointOffset=this._pathOffset-this._stride}seekPathEnd(){this._pointOffset=this._end}seekInPath(e){const i=this._pathOffset+e*this._stride;return i>=0&&i<this._end&&(this._pointOffset=i,!0)}nextPoint(){return(this._pointOffset+=this._stride)<this._end}prevPoint(){return(this._pointOffset-=this._stride)>=this._pathOffset}nextPath(){return!(this.pathIndex>=this.totalSize-1)&&(this._pathIndex>=0&&(this._pathOffset+=this._stride*this.pathSize),this._pathIndex++,this._pointOffset=this._pathOffset-this._stride,this._end=this._pointOffset+this._stride+this._stride*this.pathSize,!0)}prevPath(){return!(this.pathIndex<=0)&&(this._pathIndex--,this._end=this._pathOffset,this._pathOffset-=this._stride*this.pathSize,this._pointOffset=this._pathOffset-this._stride,!0)}getCurrentPath(){const e=this._end,i=this._geometry.coords,r=this._pathOffset;return new Sq().initialize(new Uz([this.pathSize],i.slice(r,e)),this.geometryType,this.hasZ,this.hasM,this.yFactor)}pathLength(){const e=this._end,i=this._stride,r=this._geometry.coords;let n=0;for(let s=this._pathOffset+i;s<e;s+=i){const a=r[s-i],o=r[s-i+1],l=r[s]-a,c=r[s+1]-o;n+=Math.sqrt(l*l+c*c)}return n}startPath(){this._geometry.lengths.push(0)}pushPath(e){this.startPath(),this.pushPoints(e)}pushPoint(e){for(let i=0;i<this._stride;++i)this._geometry.coords.push(e[i]);this._geometry.lengths[this.totalSize-1]++}pushXY(e,i){this._geometry.coords.push(e,i),this._geometry.lengths[this.totalSize-1]++}pushPoints(e){for(const i of e)for(let r=0;r<this._stride;++r)this._geometry.coords.push(i[r]);this._geometry.lengths[this.totalSize-1]+=e.length}pushCursor(e){const i=e.asOptimized();this._geometry.coords.push(...i.coords),this._geometry.lengths.push(...i.lengths)}asOptimized(){const e=this._geometry.clone();if(this.yFactor!==1)for(let i=1;i<e.coords.length;i+=this._stride)e.coords[i]*=this.yFactor;return this.geometryType==="esriGeometryPoint"&&(e.lengths.length=0),e}isClosed(){const e=this._geometry.coords,i=this._pathOffset,r=this._end-this._stride;for(let n=0;n<this._stride;n++)if(e[i+n]!==e[r+n])return!1;return!0}clone(){return new Sq().initialize(this._geometry.clone(),this.geometryType,this.hasZ,this.hasM,this.yFactor)}get totalPoints(){return this._geometry.isPoint?1:this._geometry.lengths.reduce((e,i)=>e+i)}get pathSize(){const{lengths:e}=this._geometry;return this._geometry.isPoint?1:this._pathIndex<0||this._pathIndex>e.length-1?0:e[this._pathIndex]}get totalSize(){return this._geometry.isPoint?1:this._geometry.lengths.length}get x(){return this._geometry.coords[this._pointOffset]}set x(e){this._geometry.coords[this._pointOffset]=e}get y(){return this.yFactor*this._geometry.coords[this._pointOffset+1]}set y(e){this._geometry.coords[this._pointOffset+1]=this.yFactor*e}get z(){return this._geometry.coords[this._pointOffset+2]}set z(e){this._geometry.coords[this._pointOffset+2]=e}get m(){const e=this.hasZ?3:2;return this._geometry.coords[this._pointOffset+e]}set m(e){this._geometry.coords[this._pointOffset+3]=e}get pathIndex(){return this._pathIndex}get _coordIndex(){return this._pointOffset/this._stride}};function out(t){const e=[t.x,t.y];return t.z&&e.push(t.z),t.m&&e.push(t.m),e}function kce(t){return jn(t)?[t.rings,"esriGeometryPolygon"]:ka(t)?[t.paths,"esriGeometryPolyline"]:BS(t)?[[t.points],"esriGeometryMultipoint"]:Mo(t)?[[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]],"esriGeometryEnvelope"]:EI(t)?[[[out(t)]],"esriGeometryPoint"]:[[],"esriGeometryPolyline"]}let $q=class Tq extends Ji{initialize(e,i,r,n,s){return this._paths=e,this.geometryType=i,this.hasZ=r,this.hasM=n,this._pathIndex=this._pointIndex=-1,this.yFactor=s,this._mIndex=this.hasZ?3:2,this}reset(){this._pathIndex=this._pointIndex=-1}seekPath(e){return this._pathIndex=e,this._pointIndex=-1,e>=0&&e<this.totalSize&&(this._currentPath=this._paths[e],!0)}seekPathStart(){this._pointIndex=-1}seekPathEnd(){this._pointIndex=this._currentPath.length}seekInPath(e){return e>=0&&e<this._currentPath.length&&(this._pointIndex=e,this._currentPoint=this._currentPath[this._pointIndex],!0)}nextPoint(){return this._currentPoint=this._currentPath[++this._pointIndex],this._pointIndex<this._currentPath.length}prevPoint(){return this._currentPoint=this._currentPath[--this._pointIndex],this._pointIndex>=0}nextPath(){return this._pointIndex=-1,this._currentPath=this._paths[++this._pathIndex],this._pathIndex<this.totalSize}prevPath(){return this.pathIndex>0&&(this._pointIndex=-1,this._pathIndex--,this._currentPath=this._paths[this._pathIndex],!0)}pathLength(){const e=this._currentPath.length,i=this._currentPath;let r=0;for(let n=1;n<e;n++){const s=i[n-1],a=i[n],o=s[0],l=s[1],c=a[0]-o,h=a[1]-l;r+=Math.sqrt(c*c+h*h)}return r}startPath(){this._paths.push([])}getCurrentPath(){return new Tq().initialize([this._currentPath],this.geometryType,this.hasZ,this.hasM,this.yFactor)}pushPath(e){this._paths.push(e)}pushPoint(e){this._paths[this.totalSize-1].push(e)}pushXY(e,i){this._paths[this.totalSize-1].push([e,i])}pushPoints(e){this._paths[this.totalSize-1].push(...e)}pushCursor(e){const i=uN(e);for(const r of i)this.pushPath(r)}asOptimized(){const e=new Uz;if(this.geometryType==="esriGeometryPoint")e.coords.push(...this._paths[0][0]),e.lengths.length=0;else for(const i of this._paths){for(const r of i)e.coords.push(r[0]),e.coords.push(r[1]*this.yFactor),this.hasZ&&e.coords.push(r[2]),this.hasM&&e.coords.push(r[this._mIndex]);e.lengths.push(i.length)}return e}isClosed(){const e=this._currentPath[0],i=this._currentPath[this._currentPath.length-1];for(let r=0;r<e.length;r++)if(e[r]!==i[r])return!1;return!0}clone(){return new Tq().initialize(de(this._paths),this.geometryType,this.hasZ,this.hasM,this.yFactor)}get totalPoints(){return this._paths.map(e=>e.length).reduce((e,i)=>e+i)}get pathSize(){return this._pathIndex<0||this._pathIndex>this.totalSize-1?-1:this._paths[this._pathIndex].length}get totalSize(){return this._paths.length}get x(){return this._currentPoint[0]}set x(e){this._currentPoint[0]=e}get y(){return this.yFactor*this._currentPoint[1]}set y(e){this._currentPoint[1]=this.yFactor*e}get z(){return this._currentPoint[2]}set z(e){this._currentPoint[2]=e}get m(){return this._currentPoint[this._mIndex]}set m(e){this._currentPoint[this._mIndex]=e}get pathIndex(){return this._pathIndex}};const cL=4,uL=1;let Ece=class gTe extends xq{initialize(e,i,r,n,s){return super.initialize(e,i,r,n,s),this._controlPoints||(this._controlPoints=this._controlPoints=new Array(this.totalSize).fill(void 0).map(a=>new Set)),this}startPath(){super.startPath(),this._controlPoints.push(new Set)}clone(){const e=new gTe().initialize(this._geometry.clone(),this.geometryType,this.hasZ,this.hasM,this.yFactor);return e._controlPoints=this._controlPoints,e}setControlPoint(){this._controlPoints[this.pathIndex].add(this._coordIndex)}getControlPoint(){return this._controlPoints[this.pathIndex].has(this._coordIndex)}setControlPointAt(e){this._controlPoints[this.pathIndex].add(e)}getControlPointAt(e){return this._controlPoints[this.pathIndex].has(e)}},Cce=class yTe extends $q{initialize(e,i,r,n,s){return super.initialize(e,i,r,n,s)}clone(){return new yTe().initialize(de(this._paths),this.geometryType,this.hasZ,this.hasM,this.yFactor)}setControlPoint(){this._paths[this.pathIndex][this._pointIndex][cL]=uL}getControlPoint(){return this._paths[this.pathIndex][this._pointIndex][cL]===uL}setControlPointAt(e){this._paths[this.pathIndex][e][cL]=uL}getControlPointAt(e){return this._paths[this.pathIndex][e][cL]===uL}};const lut=512;let Ci=class qE{constructor(e,i){this.x=e,this.y=i}static fromArray(e){return new qE(e[0],e[1])}clone(){return new qE(this.x,this.y)}equals(e,i){return e===this.x&&i===this.y}isEqual(e){return e.x===this.x&&e.y===this.y}setCoords(e,i){return this.x=e,this.y=i,this}normalize(){const e=this.x,i=this.y,r=Math.sqrt(e*e+i*i);return this.x/=r,this.y/=r,this}rightPerpendicular(){const e=this.x;return this.x=this.y,this.y=-e,this}leftPerpendicular(){const e=this.x;return this.x=-this.y,this.y=e,this}move(e,i){return this.x+=e,this.y+=i,this}assign(e){return this.x=e.x,this.y=e.y,this}assignAdd(e,i){return this.x=e.x+i.x,this.y=e.y+i.y,this}assignSub(e,i){return this.x=e.x-i.x,this.y=e.y-i.y,this}rotate(e,i){const r=this.x,n=this.y;return this.x=r*e-n*i,this.y=r*i+n*e,this}rotateReverse(e,i){const r=this.x,n=this.y;return this.x=r*e+n*i,this.y=-r*i+n*e,this}scale(e){return this.x*=e,this.y*=e,this}length(){const e=this.x,i=this.y;return Math.sqrt(e*e+i*i)}sub(e){return this.x-=e.x,this.y-=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}static distance(e,i){const r=i.x-e.x,n=i.y-e.y;return Math.sqrt(r*r+n*n)}static add(e,i){return new qE(e.x+i.x,e.y+i.y)}static sub(e,i){return new qE(e.x-i.x,e.y-i.y)}},dL=class{constructor(e,i,r){this.ratio=e,this.x=i,this.y=r}},cut=class{constructor(e,i,r,n=8,s=8){this._lines=[],this._starts=[],this.validateTessellation=!0,this._pixelRatio=n,this._pixelMargin=s,this._tileSize=lut*n,this._dz=e,this._yPos=i,this._xPos=r}setPixelMargin(e){e!==this._pixelMargin&&(this._pixelMargin=e,this.setExtent(this._extent))}setExtent(e){this._extent=e,this._finalRatio=this._tileSize/e*(1<<this._dz);let i=this._pixelRatio*this._pixelMargin;i/=this._finalRatio;const r=e>>this._dz;i>r&&(i=r),this._margin=i,this._xmin=r*this._xPos-i,this._ymin=r*this._yPos-i,this._xmax=this._xmin+r+2*i,this._ymax=this._ymin+r+2*i}reset(e){this._type=e,this._lines=[],this._starts=[],this._line=null,this._start=0}moveTo(e,i){this._pushLine(),this._prevIsIn=this._isIn(e,i),this._moveTo(e,i,this._prevIsIn),this._prevPt=new Ci(e,i),this._firstPt=new Ci(e,i),this._dist=0}lineTo(e,i){const r=this._isIn(e,i),n=new Ci(e,i),s=Ci.distance(this._prevPt,n);let a,o,l,c,h,f,g,y;if(r)this._prevIsIn?this._lineTo(e,i,!0):(a=this._prevPt,o=n,l=this._intersect(o,a),this._start=this._dist+s*(1-this._r),this._lineTo(l.x,l.y,!0),this._lineTo(o.x,o.y,!0));else if(this._prevIsIn)o=this._prevPt,a=n,l=this._intersect(o,a),this._lineTo(l.x,l.y,!0),this._lineTo(a.x,a.y,!1);else{const b=this._prevPt,_=n;if(b.x<=this._xmin&&_.x<=this._xmin||b.x>=this._xmax&&_.x>=this._xmax||b.y<=this._ymin&&_.y<=this._ymin||b.y>=this._ymax&&_.y>=this._ymax)this._lineTo(_.x,_.y,!1);else{const S=[];if((b.x<this._xmin&&_.x>this._xmin||b.x>this._xmin&&_.x<this._xmin)&&(c=(this._xmin-b.x)/(_.x-b.x),y=b.y+c*(_.y-b.y),y<=this._ymin?f=!1:y>=this._ymax?f=!0:S.push(new dL(c,this._xmin,y))),(b.x<this._xmax&&_.x>this._xmax||b.x>this._xmax&&_.x<this._xmax)&&(c=(this._xmax-b.x)/(_.x-b.x),y=b.y+c*(_.y-b.y),y<=this._ymin?f=!1:y>=this._ymax?f=!0:S.push(new dL(c,this._xmax,y))),(b.y<this._ymin&&_.y>this._ymin||b.y>this._ymin&&_.y<this._ymin)&&(c=(this._ymin-b.y)/(_.y-b.y),g=b.x+c*(_.x-b.x),g<=this._xmin?h=!1:g>=this._xmax?h=!0:S.push(new dL(c,g,this._ymin))),(b.y<this._ymax&&_.y>this._ymax||b.y>this._ymax&&_.y<this._ymax)&&(c=(this._ymax-b.y)/(_.y-b.y),g=b.x+c*(_.x-b.x),g<=this._xmin?h=!1:g>=this._xmax?h=!0:S.push(new dL(c,g,this._ymax))),S.length===0)h?f?this._lineTo(this._xmax,this._ymax,!0):this._lineTo(this._xmax,this._ymin,!0):f?this._lineTo(this._xmin,this._ymax,!0):this._lineTo(this._xmin,this._ymin,!0);else if(S.length>1&&S[0].ratio>S[1].ratio)this._start=this._dist+s*S[1].ratio,this._lineTo(S[1].x,S[1].y,!0),this._lineTo(S[0].x,S[0].y,!0);else{this._start=this._dist+s*S[0].ratio;for(let $=0;$<S.length;$++)this._lineTo(S[$].x,S[$].y,!0)}this._lineTo(_.x,_.y,!1)}}this._dist+=s,this._prevIsIn=r,this._prevPt=n}close(){if(this._line.length>2){const e=this._firstPt,i=this._prevPt;e.x===i.x&&e.y===i.y||this.lineTo(e.x,e.y);const r=this._line;let n=r.length;for(;n>=4&&(r[0].x===r[1].x&&r[0].x===r[n-2].x||r[0].y===r[1].y&&r[0].y===r[n-2].y);)r.pop(),r[0].x=r[n-2].x,r[0].y=r[n-2].y,--n}}result(e=!0){return this._pushLine(),this._lines.length===0?null:(this._type===3&&e&&uut.simplify(this._tileSize,this._margin*this._finalRatio,this._lines),this._lines)}resultWithStarts(){if(this._type!==2)throw new Error("Only valid for lines");this._pushLine();const e=this._lines,i=e.length;if(i===0)return null;const r=[];for(let n=0;n<i;n++)r.push({line:e[n],start:this._starts[n]||0});return r}_isIn(e,i){return e>=this._xmin&&e<=this._xmax&&i>=this._ymin&&i<=this._ymax}_intersect(e,i){let r,n,s;if(i.x>=this._xmin&&i.x<=this._xmax)n=i.y<=this._ymin?this._ymin:this._ymax,s=(n-e.y)/(i.y-e.y),r=e.x+s*(i.x-e.x);else if(i.y>=this._ymin&&i.y<=this._ymax)r=i.x<=this._xmin?this._xmin:this._xmax,s=(r-e.x)/(i.x-e.x),n=e.y+s*(i.y-e.y);else{n=i.y<=this._ymin?this._ymin:this._ymax,r=i.x<=this._xmin?this._xmin:this._xmax;const a=(r-e.x)/(i.x-e.x),o=(n-e.y)/(i.y-e.y);a<o?(s=a,n=e.y+a*(i.y-e.y)):(s=o,r=e.x+o*(i.x-e.x))}return this._r=s,new Ci(r,n)}_pushLine(){this._line&&(this._type===1?this._line.length>0&&(this._lines.push(this._line),this._starts.push(this._start)):this._type===2?this._line.length>1&&(this._lines.push(this._line),this._starts.push(this._start)):this._type===3&&this._line.length>3&&(this._lines.push(this._line),this._starts.push(this._start))),this._line=[],this._start=0}_moveTo(e,i,r){this._type!==3?r&&(e=Math.round((e-(this._xmin+this._margin))*this._finalRatio),i=Math.round((i-(this._ymin+this._margin))*this._finalRatio),this._line.push(new Ci(e,i))):(r||(e<this._xmin&&(e=this._xmin),e>this._xmax&&(e=this._xmax),i<this._ymin&&(i=this._ymin),i>this._ymax&&(i=this._ymax)),e=Math.round((e-(this._xmin+this._margin))*this._finalRatio),i=Math.round((i-(this._ymin+this._margin))*this._finalRatio),this._line.push(new Ci(e,i)),this._isH=!1,this._isV=!1)}_lineTo(e,i,r){let n,s;if(this._type!==3)if(r){if(e=Math.round((e-(this._xmin+this._margin))*this._finalRatio),i=Math.round((i-(this._ymin+this._margin))*this._finalRatio),this._line.length>0&&(n=this._line[this._line.length-1],n.equals(e,i)))return;this._line.push(new Ci(e,i))}else this._line&&this._line.length>0&&this._pushLine();else if(r||(e<this._xmin&&(e=this._xmin),e>this._xmax&&(e=this._xmax),i<this._ymin&&(i=this._ymin),i>this._ymax&&(i=this._ymax)),e=Math.round((e-(this._xmin+this._margin))*this._finalRatio),i=Math.round((i-(this._ymin+this._margin))*this._finalRatio),this._line&&this._line.length>0){n=this._line[this._line.length-1];const a=n.x===e,o=n.y===i;if(a&&o)return;this._isH&&a||this._isV&&o?(n.x=e,n.y=i,s=this._line[this._line.length-2],s.x===e&&s.y===i?(this._line.pop(),this._line.length<=1?(this._isH=!1,this._isV=!1):(s=this._line[this._line.length-2],this._isH=s.x===e,this._isV=s.y===i)):(this._isH=s.x===e,this._isV=s.y===i)):(this._line.push(new Ci(e,i)),this._isH=a,this._isV=o)}else this._line.push(new Ci(e,i))}},_zt=class{setExtent(e){this._ratio=e===4096?1:4096/e}get validateTessellation(){return this._ratio<1}reset(e){this._lines=[],this._line=null}moveTo(e,i){this._line&&this._lines.push(this._line),this._line=[];const r=this._ratio;this._line.push(new Ci(e*r,i*r))}lineTo(e,i){const r=this._ratio;this._line.push(new Ci(e*r,i*r))}close(){const e=this._line;e&&!e[0].isEqual(e[e.length-1])&&e.push(e[0])}result(){return this._line&&this._lines.push(this._line),this._lines.length===0?null:this._lines}},uut=class Ey{static simplify(e,i,r){if(!r)return;const n=-i,s=e+i,a=-i,o=e+i,l=[],c=[],h=r.length;for(let g=0;g<h;++g){const y=r[g];if(!y||y.length<2)continue;let b,_=y[0];const S=y.length;for(let $=1;$<S;++$)b=y[$],_.x===b.x&&(_.x<=n&&(_.y>b.y?(l.push(g),l.push($),l.push(0),l.push(-1)):(c.push(g),c.push($),c.push(0),c.push(-1))),_.x>=s&&(_.y<b.y?(l.push(g),l.push($),l.push(1),l.push(-1)):(c.push(g),c.push($),c.push(1),c.push(-1)))),_.y===b.y&&(_.y<=a&&(_.x<b.x?(l.push(g),l.push($),l.push(2),l.push(-1)):(c.push(g),c.push($),c.push(2),c.push(-1))),_.y>=o&&(_.x>b.x?(l.push(g),l.push($),l.push(3),l.push(-1)):(c.push(g),c.push($),c.push(3),c.push(-1)))),_=b}if(l.length===0||c.length===0)return;Ey.fillParent(r,c,l),Ey.fillParent(r,l,c);const f=[];Ey.calcDeltas(f,c,l),Ey.calcDeltas(f,l,c),Ey.addDeltas(f,r)}static fillParent(e,i,r){const n=r.length,s=i.length;for(let a=0;a<s;a+=4){const o=i[a],l=i[a+1],c=i[a+2],h=e[o][l-1],f=e[o][l];let g=8092,y=-1;for(let b=0;b<n;b+=4){if(r[b+2]!==c)continue;const _=r[b],S=r[b+1],$=e[_][S-1],C=e[_][S];switch(c){case 0:case 1:if(hL(h.y,$.y,C.y)&&hL(f.y,$.y,C.y)){const I=Math.abs(C.y-$.y);I<g&&(g=I,y=b)}break;case 2:case 3:if(hL(h.x,$.x,C.x)&&hL(f.x,$.x,C.x)){const I=Math.abs(C.x-$.x);I<g&&(g=I,y=b)}}}i[a+3]=y}}static calcDeltas(e,i,r){const n=i.length;for(let s=0;s<n;s+=4){const a=[],o=Ey.calcDelta(s,i,r,a);e.push(i[s]),e.push(i[s+1]),e.push(i[s+2]),e.push(o)}}static calcDelta(e,i,r,n){const s=i[e+3];if(s===-1)return 0;const a=n.length;return a>1&&n[a-2]===s?0:(n.push(s),Ey.calcDelta(s,r,i,n)+1)}static addDeltas(e,i){const r=e.length;let n=0;for(let s=0;s<r;s+=4){const a=e[s+3];a>n&&(n=a)}for(let s=0;s<r;s+=4){const a=i[e[s]],o=e[s+1],l=n-e[s+3];switch(e[s+2]){case 0:a[o-1].x-=l,a[o].x-=l,o===1&&(a[a.length-1].x-=l),o===a.length-1&&(a[0].x-=l);break;case 1:a[o-1].x+=l,a[o].x+=l,o===1&&(a[a.length-1].x+=l),o===a.length-1&&(a[0].x+=l);break;case 2:a[o-1].y-=l,a[o].y-=l,o===1&&(a[a.length-1].y-=l),o===a.length-1&&(a[0].y-=l);break;case 3:a[o-1].y+=l,a[o].y+=l,o===1&&(a[a.length-1].y+=l),o===a.length-1&&(a[0].y+=l)}}}};const hL=(t,e,i)=>t>=e&&t<=i||t>=i&&t<=e,mJ=T_(()=>fe(()=>import("./bufferOperator-CMLUJXNN.js"),__vite__mapDeps([288,289,81,253,255,256,257,258,290,291,292,293,260]))),vTe=T_(()=>fe(()=>import("./convexHullOperator-BLGFTogx.js"),__vite__mapDeps([294,295,81,253,255,256,257,258,260]))),bTe=T_(()=>fe(()=>import("./lengthOperator-D94TtGql.js"),__vite__mapDeps([296,260,253,255,256,257,81,258]))),wTe=T_(()=>fe(()=>import("./generalizeOperator-DN6Y7Aou.js"),__vite__mapDeps([297,298,81,293,253,255,256,257,258,260]))),_Te=T_(()=>fe(()=>import("./graphicBufferOperator-C3G7Zt7e.js"),__vite__mapDeps([299,81,253,255,256,257,258,290,291,292,293,260]))),xTe=T_(()=>fe(()=>import("./offsetOperator-CbvQ8S5L.js"),__vite__mapDeps([300,301,81,255,256,253,257,258,260]))),STe=T_(()=>fe(()=>import("./simplifyOperator-CVkIL3Wn.js"),__vite__mapDeps([302,262,81,253,255,256,257,258,260]))),dut=512;let Mf;function Ice(t){switch(t.type){case"CIMGeometricEffectDonut":case"CIMGeometricEffectBuffer":return mJ.getImportPromise();case"CIMGeometricEffectEnclosingPolygon":return vTe.getImportPromise();case"CIMGeometricEffectOffset":return Promise.all([xTe.getImportPromise(),_Te.getImportPromise()]);case"CIMGeometricEffectTaperedPolygon":return Promise.all([STe.getImportPromise(),bTe.getImportPromise(),wTe.getImportPromise()]);default:return Promise.resolve()}}let hut=class{constructor(e){this._geometry=e}next(){const e=this._geometry;return this._geometry=null,e}};function gJ(t,e,i){if(!t)return null;Mf||(Mf=new cut(0,0,0,1));const r=i?-1:1,n=t.geometryType==="esriGeometryPolygon",s=n?3:2,a=n?3:2;let o,l;for(Mf.reset(s),Mf.setPixelMargin(e+1),Mf.setExtent(dut);t.nextPath();)if(!(t.pathSize<a)){for(t.nextPoint(),o=t.x,l=r*t.y,Mf.moveTo(o,l);t.nextPoint();)o=t.x,l=r*t.y,Mf.lineTo(o,l);n&&Mf.close()}const c=Mf.result(!1);if(c){const h=Ji.createEmptyOptimizedCIM(t.geometryType);for(const f of c){h.startPath();for(const g of f)h.pushXY(g.x,r*g.y)}return h.reset(),h}return null}let KT=class{constructor(){this.setIdentity()}getAngle(){return(this.rz==null||this.rz===0&&this.rzCos!==1&&this.rzSin!==0)&&(this.rz=Math.atan2(this.rzSin,this.rzCos)),this.rz}setIdentity(){this.tx=0,this.ty=0,this.tz=0,this.s=1,this.rx=0,this.ry=0,this.rz=0,this.rzCos=1,this.rzSin=0}setTranslate(e,i){this.tx=e,this.ty=i}setTranslateZ(e){this.tz=e}setRotateCS(e,i){this.rz=void 0,this.rzCos=e,this.rzSin=i}setRotate(e){this.rz=e,this.rzCos=void 0,this.rzSin=void 0}setRotateY(e){this.ry=e}setScale(e){this.s=e}setMeasure(e){this.m=e}};const yJ="arial-unicode-ms",Mce="woff2",Ace=new Map,$Te=new Set;let put=class{constructor(e,i){this.fontFace=e,this.promise=i}};async function fut(t){const e=yut(t),i=gut(t),r=Ace.get(e);if(r)return r.promise;const n=new FontFace(t.family,`url('${yi.fontsUrl}/woff2/${i}.${Mce}') format('${Mce}')`,{style:t.style,weight:t.weight}),s=document.fonts;if(s.has(n)&&n.status==="loading")return n.loaded;const a=n.load().then(()=>(s.add(n),n));return Ace.set(e,new put(n,a)),$Te.add(n),a}function kzt(t){return $Te.has(t)}function mut(t){if(!t)return yJ;const e=t.toLowerCase().split(" ").join("-");switch(e){case"serif":return"noto-serif";case"sans-serif":return"arial-unicode-ms";case"monospace":return"ubuntu-mono";case"fantasy":return"cabin-sketch";case"cursive":return"redressed";default:return e}}function gut(t){const e=TTe(t)+kTe(t);return mut(t.family)+(e.length>0?e:"-regular")}function yut(t){const e=TTe(t)+kTe(t);return(t.family||yJ)+(e.length>0?e:"-regular")}function TTe(t){if(!t.weight)return"";switch(t.weight.toLowerCase()){case"bold":case"bolder":return"-bold"}return""}function kTe(t){if(!t.style)return"";switch(t.style.toLowerCase()){case"italic":case"oblique":return"-italic"}return""}let vut=class{applyColorSubstitution(e,i){if(!i)return e;this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement("canvas"));const{width:r,height:n}=e,s=this._rasterizationCanvas,a=s.getContext("2d",{willReadFrequently:!0});e!==s&&(s.width=r,s.height=n,a.drawImage(e,0,0,r,n));const o=a.getImageData(0,0,r,n).data;if(i){for(const c of i)if(c&&c.oldColor&&c.oldColor.length===4&&c.newColor&&c.newColor.length===4){const[h,f,g,y]=c.oldColor,[b,_,S,$]=c.newColor;if(h===b&&f===_&&g===S&&y===$)continue;for(let C=0;C<o.length;C+=4)h===o[C]&&f===o[C+1]&&g===o[C+2]&&y===o[C+3]&&(o[C]=b,o[C+1]=_,o[C+2]=S,o[C+3]=$)}}const l=new ImageData(o,r,n);return a.putImageData(l,0,0),s}tintImageData(e,i){if(!i||i.length<4)return e;this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement("canvas"));const{width:r,height:n}=e,s=this._rasterizationCanvas,a=s.getContext("2d",{willReadFrequently:!0});e!==s&&(s.width=r,s.height=n,a.drawImage(e,0,0,r,n));const o=a.getImageData(0,0,r,n),l=new Uint8Array(o.data),c=[i[0]/255,i[1]/255,i[2]/255,i[3]/255];for(let f=0;f<l.length;f+=4)l[f]*=c[0],l[f+1]*=c[1],l[f+2]*=c[2],l[f+3]*=c[3];const h=new ImageData(new Uint8ClampedArray(l.buffer),r,n);return a.putImageData(h,0,0),s}};var Xh;let but=(Xh=class{static local(){return Xh.instance===null&&(Xh.instance=new Xh),Xh.instance}execute(e,i){return new wut(e,i)}},Xh.instance=null,Xh),wut=class{constructor(e,i){this._inputGeometries=e,this._angleTolerance=i.angleTolerance!==void 0?i.angleTolerance:120,this._maxCosAngle=Math.cos((1-Math.abs(this._angleTolerance)/180)*Math.PI)}next(){let e=this._inputGeometries.next();if(!e)return null;for(;e;){if(e.geometryType==="esriGeometryPolygon")this._isClosed=!0;else if(e.geometryType==="esriGeometryPolyline")this._isClosed=!1;else{if(e.geometryType!=="esriGeometryEnvelope"){e=this._inputGeometries.next();continue}if(this._maxCosAngle)return e;this._isClosed=!0}for(;e.nextPath();)this._processPath(e);return e.reset(),e}return null}_processPath(e){if(e.nextPoint()){const i=e.x,r=e.y;let n=i,s=r,a=e.pathSize,o=0,l=0,c=0,h=0,f=0,g=0;this._isClosed&&++a;for(let y=1;e.nextPoint()||y<a;++y){let b,_;this._isClosed&&y===a-1?(b=i,_=r):(b=e.x,_=e.y);const S=b-n,$=_-s,C=Math.sqrt(S*S+$*$);y>1&&C>0&&c>0&&(o*S+l*$)/C/c<=this._maxCosAngle&&e.setControlPointAt(y-1),y===1&&(h=S,f=$,g=C),C>0&&(n=b,s=_,o=S,l=$,c=C)}this._isClosed&&c>0&&g>0&&(o*h+l*f)/g/c<=this._maxCosAngle&&e.setControlPointAt(0)}}};function P2(t,e){t[4]=e}let gA=class{constructor(e,i=!0,r=!0,n=0){this.isClosed=!1,this.geometryCursor=null,this.geometryCursor=!i&&e.geometryType==="esriGeometryPolygon"||!r&&e.geometryType==="esriGeometryPolyline"?null:e,this.geomUnitsPerPoint=n,this.iterateMultiPath=!1,this.iteratePath=!1,this.internalPlacement=new KT}next(){if(!this.geometryCursor)return null;const e=this.processMultiPath(this.geometryCursor);return this.iterateMultiPath&&e||(this.geometryCursor=null),e}processMultiPath(e){for(;this.iteratePath||e.pathIndex<e.totalSize-1;){this.iteratePath||e.nextPath(),this.iterateMultiPath=!0;const i=this.processPath(e);if(i)return i}return this.iterateMultiPath=!1,null}},QT=class{constructor(e,i,r,n=0){this.isClosed=!1,this.inputGeometries=e,this.acceptPolygon=i,this.acceptPolyline=r,this.geomUnitsPerPoint=n,this.iteratePath=!1,this.multiPathCursor=null}next(){for(;;){if(!this.multiPathCursor){let e=this.inputGeometries.next();for(;e&&(this.isClosed=this.acceptPolygon&&e.geometryType==="esriGeometryPolygon"||e.geometryType==="esriGeometryEnvelope",this.multiPathCursor=e,!this.multiPathCursor);)e=this.inputGeometries.next();if(!this.multiPathCursor)return null}for(;this.iteratePath||this.multiPathCursor.nextPath();){this.multiPathCursor.seekPathStart();const e=this.processPath(this.multiPathCursor);if(e)return e}this.multiPathCursor=null}}};const JI=.03;let lg=class{constructor(e=0,i=!1){}isEmpty(e){if(!e.nextPoint())return!0;let i,r,n,s;for(i=e.x,r=e.y;e.nextPoint();i=r,r=s)if(n=e.x,s=e.y,n!==i||s!==r)return e.seekPathStart(),!1;return e.seekPathStart(),!0}normalize(e){const i=Math.sqrt(e[0]*e[0]+e[1]*e[1]);i!==0&&(e[0]/=i,e[1]/=i)}getLength(e,i,r,n){const s=r-e,a=n-i;return Math.sqrt(s*s+a*a)}getSegLength(e){const[[i,r],[n,s]]=e;return this.getLength(i,r,n,s)}getCoord2D(e,i,r,n,s){return[e+(r-e)*s,i+(n-i)*s]}getSegCoord2D(e,i){const[[r,n],[s,a]]=e;return this.getCoord2D(r,n,s,a,i)}getAngle(e,i,r,n,s){const a=r-e,o=n-i;return Math.atan2(o,a)}getAngleCS(e,i,r,n,s,a){e==null&&(e=[0,0]);const o=n-i,l=s-r,c=Math.sqrt(o*o+l*l);return c!==0?(e[0]=o/c,e[1]=l/c,e):(e[0]=1,e[1]=0,e)}getSegAngleCS(e,i,r){const[[n,s],[a,o]]=i;return this.getAngleCS(e,n,s,a,o,r)}cut(e,i,r,n,s,a){return[s<=0?[e,i]:this.getCoord2D(e,i,r,n,s),a>=1?[r,n]:this.getCoord2D(e,i,r,n,a)]}getSubCurve(e,i,r){const n=Ji.createEmptyOptimizedCIM("esriGeometryPolyline");return this.appendSubCurve(n,e,i,r)?n:null}appendSubCurve(e,i,r,n){e.startPath(),i.seekPathStart();let s=0,a=!0;if(!i.nextPoint())return!1;let o=i.x,l=i.y;for(;i.nextPoint();){const c=this.getLength(o,l,i.x,i.y);if(c!==0){if(a){if(s+c>r){const h=(r-s)/c;let f=1,g=!1;s+c>=n&&(f=(n-s)/c,g=!0);const y=this.cut(o,l,i.x,i.y,h,f);if(y&&e.pushPoints(y),g)break;a=!1}}else{if(s+c>n){const h=this.cut(o,l,i.x,i.y,0,(n-s)/c);h&&e.pushPoint(h[1]);break}e.pushXY(i.x,i.y)}s+=c,o=i.x,l=i.y}else o=i.x,l=i.y}return!0}getCIMPointAlong(e,i){if(!e.nextPoint())return null;let r,n,s,a,o=0;for(r=e.x,n=e.y;e.nextPoint();r=s,n=a){s=e.x,a=e.y;const l=this.getLength(r,n,s,a);if(l!==0){if(o+l>i){const c=(i-o)/l;return this.getCoord2D(r,n,s,a,c)}o+=l}}return null}offset(e,i,r,n,s){if(!e||e.length<2)return null;let a=0,o=e[a++],l=a;for(;a<e.length;){const g=e[a];g[0]===o[0]&&g[1]===o[1]||(a!==l&&(e[l]=e[a]),o=e[l++]),a++}const c=e[0][0]===e[l-1][0]&&e[0][1]===e[l-1][1];if(c&&--l,l<(c?3:2))return null;const h=[];o=c?e[l-1]:null;let f=e[0];for(let g=0;g<l;g++){const y=g===l-1?c?e[0]:null:e[g+1];if(o)if(y){const b=[y[0]-f[0],y[1]-f[1]];this.normalize(b);const _=[f[0]-o[0],f[1]-o[1]];this.normalize(_);const S=_[0]*b[1]-_[1]*b[0],$=_[0]*b[0]+_[1]*b[1];if(S===0&&$===1){f=y;continue}if(S>=0==i<=0){if($<1){const C=[b[0]-_[0],b[1]-_[1]];this.normalize(C);const I=Math.sqrt((1+$)/2);if(I>1/n){const P=-Math.abs(i)/I;h.push([f[0]-C[0]*P,f[1]-C[1]*P])}}}else switch(r){case"Mitered":{const C=Math.sqrt((1+$)/2);if(C>0&&1/C<n){const I=[b[0]-_[0],b[1]-_[1]];this.normalize(I);const P=Math.abs(i)/C;h.push([f[0]-I[0]*P,f[1]-I[1]*P]);break}}case"Bevelled":h.push([f[0]+_[1]*i,f[1]-_[0]*i]),h.push([f[0]+b[1]*i,f[1]-b[0]*i]);break;case"Rounded":if($<1){h.push([f[0]+_[1]*i,f[1]-_[0]*i]);const C=Math.floor(2.5*(1-$));if(C>0){const I=1/C;let P=I;for(let O=1;O<C;O++,P+=I){const N=[_[1]*(1-P)+b[1]*P,-_[0]*(1-P)-b[0]*P];this.normalize(N),h.push([f[0]+N[0]*i,f[1]+N[1]*i])}}h.push([f[0]+b[1]*i,f[1]-b[0]*i])}break;default:if(S<0)h.push([f[0]+(_[1]+_[0])*i,f[1]+(_[1]-_[0])*i]),h.push([f[0]+(b[1]-b[0])*i,f[1]-(b[0]+b[1])*i]);else{const C=Math.sqrt((1+Math.abs($))/2),I=[b[0]-_[0],b[1]-_[1]];this.normalize(I);const P=i/C;h.push([f[0]-I[0]*P,f[1]-I[1]*P])}}}else{const b=[f[0]-o[0],f[1]-o[1]];this.normalize(b),h.push([f[0]+b[1]*i,f[1]-b[0]*i])}else{const b=[y[0]-f[0],y[1]-f[1]];this.normalize(b),h.push([f[0]+b[1]*i,f[1]-b[0]*i])}o=f,f=y}return h.length<(c?3:2)?null:(c&&h.push([h[0][0],h[0][1]]),h)}};const XB=1.7320508075688772,_ut=5,xut="OpenEnded";var Jh;let Sut=(Jh=class{static local(){return Jh.instance===null&&(Jh.instance=new Jh),Jh.instance}execute(e,i,r){return new $ut(e,i,r)}},Jh.instance=null,Jh),$ut=class extends QT{constructor(e,i,r){super(e,!1,!0),this._curveHelper=new lg,this._width=(i.width!==void 0?i.width:_ut)*r,this._arrowType=i.geometricEffectArrowType!==void 0?i.geometricEffectArrowType:i.arrowType!==void 0?i.arrowType:xut,this._offsetFlattenError=JI*r}processPath(e){const i=Ji.createEmptyOptimizedCIM(e.geometryType);switch(this._arrowType){case"OpenEnded":default:this._constructSimpleArrow(i,e,!0);break;case"Block":this._constructSimpleArrow(i,e,!1);break;case"Crossed":this._constructCrossedArrow(i,e)}return i}_constructSimpleArrow(e,i,r){const n=i.pathLength();let s=this._width;n<2*s&&(s=n/2);const a=this._curveHelper.getSubCurve(i,0,n-s);if(!a||!a.nextPath())return;a.seekPathStart();const o=s/2;if(this._curveHelper.isEmpty(a))return;const l=uv(a),c=this._constructOffset(l,-o);if(!c)return;const h=this._constructOffset(l,o);if(!h)return;const f=this._constructArrowBasePoint(c,-o/2);if(!f)return;const g=this._constructArrowBasePoint(h,o/2);if(!g)return;i.seekInPath(i.pathSize-1);const y=[i.x,i.y];e.pushPath(h),e.nextPath(),e.nextPoint(),e.setControlPoint(),e.pushPoint(g),e.nextPoint(),e.setControlPoint(),e.pushPoint(y),e.nextPoint(),e.setControlPoint(),e.pushPoint(f),e.nextPoint(),e.setControlPoint(),e.pushPoints(c.reverse()),e.setControlPoint(),r||(e.setControlPointAt(0),e.setControlPointAt(e.pathSize-1),e.pushPoint(h[0])),e.reset()}_constructCrossedArrow(e,i){const r=i.pathLength();let n=this._width;r<n*(1+XB+1)&&(n=r/(1+XB+1)),i.seekPathStart();const s=this._curveHelper.getSubCurve(i,0,r-n*(1+XB));if(!s)return;s.nextPath();const a=n/2;if(this._curveHelper.isEmpty(s))return;const o=uv(s),l=this._constructOffset(o,a);if(!l)return;const c=this._constructOffset(o,-a);if(!c)return;const h=this._curveHelper.getSubCurve(i,0,r-n);if(!h||(h.nextPath(),this._curveHelper.isEmpty(h)))return;const f=uv(h),g=this._constructOffset(f,a);if(!g)return;const y=this._constructOffset(f,-a);if(!y)return;const b=g[g.length-1],_=this._constructArrowBasePoint(g,a/2);if(!_)return;const S=y[y.length-1],$=this._constructArrowBasePoint(y,-a/2);if(!$)return;i.seekInPath(i.pathSize-1);const C=[i.x,i.y];e.pushPath(l),e.nextPath(),e.nextPoint(),e.setControlPoint(),e.pushPoint(S),e.nextPoint(),e.setControlPoint(),e.pushPoint($),e.nextPoint(),e.setControlPoint(),e.pushPoint(C),e.nextPoint(),e.setControlPoint(),e.pushPoint(_),e.nextPoint(),e.setControlPoint(),e.pushPoint(b),e.nextPoint(),e.setControlPoint(),e.pushPoints(c.reverse()),e.nextPoint(),e.setControlPoint(),e.reset()}_constructOffset(e,i){return this._curveHelper.offset(e,i,"Rounded",4,this._offsetFlattenError)}_constructArrowBasePoint(e,i){if(!e||e.length<2)return null;const r=e[e.length-2],n=e[e.length-1],s=[n[0]-r[0],n[1]-r[1]];return this._curveHelper.normalize(s),[n[0]+s[1]*i,n[1]-s[0]*i]}};var Kh;let Tut=(Kh=class{static local(){return Kh.instance===null&&(Kh.instance=new Kh),Kh.instance}execute(e,i,r,n,s,a){return new kut(e,i,r,n,s,a)}},Kh.instance=null,Kh),kut=class{constructor(e,i,r,n,s,a){this._preventClipping=a,this._inputGeometries=e,this._tileKey=n,this._curveHelper=new lg,this._size=(i.size!==void 0?i.size:1)*r,this._maxInflateSize=s*r,this._offsetFlattenError=JI*r}next(){let e;for(;e=this._inputGeometries.next();){if(this._size===0)return e;if(e.geometryType==="esriGeometryEnvelope"){if(this._size>0){const a=Ji.createEmptyOptimizedCIM(e.geometryType),o=uN(e)[0],l=this._curveHelper.offset(o,this._size,"Rounded",4,this._offsetFlattenError);if(l)return a.pushPath(l),a}else if(this._size<0){const a=e.asJSON();if(Math.min(a.xmax-a.xmin,a.ymax-a.ymin)+2*this._size>0)return Ji.fromJSONCIM({xmin:a.xmin-this._size,xmax:a.xmax+this._size,ymin:a.ymin-this._size,ymax:a.ymax+this._size})}}const i=!this._preventClipping&&this._tileKey?gJ(e,this._maxInflateSize,!0):e;if(!i)continue;const r=mJ.module,n={...i.asJSON(),spatialReference:{wkid:at.WebMercator.wkid}},s=r.execute(n,this._size);return s?Ji.fromJSONCIM(s):null}return null}};var Qh;let Eut=(Qh=class{static local(){return Qh.instance===null&&(Qh.instance=new Qh),Qh.instance}execute(e,i,r){return new Cut(e,i,r)}},Qh.instance=null,Qh),Cut=class{constructor(e,i,r){this._defaultPointSize=20,this._inputGeometries=e,this._geomUnitsPerPoint=r,this._rule=i.rule??"FullGeometry",this._defaultSize=this._defaultPointSize*r}next(){let e;for(;e=this._inputGeometries.next();){const i=this._processGeom(uN(e));if(i?.length)return Ji.fromJSONCIM({paths:i})}return null}_clone(e){return[e[0],e[1]]}_mid(e,i){return[(e[0]+i[0])/2,(e[1]+i[1])/2]}_mix(e,i,r,n){return[e[0]*i+r[0]*n,e[1]*i+r[1]*n]}_add(e,i){return[e[0]+i[0],e[1]+i[1]]}_add2(e,i,r){return[e[0]+i,e[1]+r]}_sub(e,i){return[e[0]-i[0],e[1]-i[1]]}_dist(e,i){return Math.sqrt((e[0]-i[0])*(e[0]-i[0])+(e[1]-i[1])*(e[1]-i[1]))}_norm(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}_normalize(e,i=1){const r=i/this._norm(e);e[0]*=r,e[1]*=r}_leftPerpendicular(e){const i=-e[1],r=e[0];e[0]=i,e[1]=r}_leftPerp(e){return[-e[1],e[0]]}_rightPerpendicular(e){const i=e[1],r=-e[0];e[0]=i,e[1]=r}_rightPerp(e){return[e[1],-e[0]]}_dotProduct(e,i){return e[0]*i[0]+e[1]*i[1]}_crossProduct(e,i){return e[0]*i[1]-e[1]*i[0]}_rotateDirect(e,i,r){const n=e[0]*i-e[1]*r,s=e[0]*r+e[1]*i;e[0]=n,e[1]=s}_makeCtrlPt(e){const i=[e[0],e[1]];return P2(i,1),i}_addAngledTicks(e,i,r,n){const s=this._sub(r,i);this._normalize(s);const a=this._crossProduct(s,this._sub(n,i));let o;o=a>0?this._rightPerp(s):this._leftPerp(s);const l=Math.abs(a)/2,c=[];c.push([i[0]+(o[0]-s[0])*l,i[1]+(o[1]-s[1])*l]),c.push(i),c.push(r),c.push([r[0]+(o[0]+s[0])*l,r[1]+(o[1]+s[1])*l]),e.push(c)}_addBezier2(e,i,r,n,s){if(s--===0)return void e.push(n);const a=this._mid(i,r),o=this._mid(r,n),l=this._mid(a,o);this._addBezier2(e,i,a,l,s),this._addBezier2(e,l,o,n,s)}_addBezier3(e,i,r,n,s,a){if(a--===0)return void e.push(s);const o=this._mid(i,r),l=this._mid(r,n),c=this._mid(n,s),h=this._mid(o,l),f=this._mid(l,c),g=this._mid(h,f);this._addBezier3(e,i,o,h,g,a),this._addBezier3(e,g,f,c,s,a)}_add90DegArc(e,i,r,n,s){const a=s??this._crossProduct(this._sub(r,i),this._sub(n,i))>0,o=this._mid(i,r),l=this._sub(o,i);a?this._leftPerpendicular(l):this._rightPerpendicular(l),o[0]+=l[0],o[1]+=l[1],this._addBezier3(e,i,this._mix(i,.33333,o,.66667),this._mix(r,.33333,o,.66667),r,4)}_addArrow(e,i,r){const n=i[0],s=i[1],a=i[i.length-1],o=this._sub(n,s),l=this._norm(o);this._normalize(o);const c=Math.abs(this._crossProduct(o,this._sub(a,s)));let h=this._dotProduct(o,this._sub(a,s));h<.05*l?h=.05*l:h>.95*l&&(h=.95*l);const f=.5*c,g=this._leftPerp(o),y=[s[0]+o[0]*h,s[1]+o[1]*h],b=i.length-1,_=[];_.push(r?[-g[0],-g[1]]:g);let S=[-o[0],-o[1]];for(let $=1;$<b-1;$++){const C=this._sub(i[$+1],i[$]);this._normalize(C);const I=this._dotProduct(C,S),P=this._crossProduct(C,S),O=Math.sqrt((1+I)/2),N=this._sub(C,S);this._normalize(N),N[0]/=O,N[1]/=O,_.push(P<0?[-N[0],-N[1]]:N),S=C}_.push(this._rightPerp(S));for(let $=_.length-1;$>0;$--)e.push([i[$][0]+_[$][0]*f,i[$][1]+_[$][1]*f]);e.push([y[0]+_[0][0]*f,y[1]+_[0][1]*f]),e.push([y[0]+_[0][0]*c,y[1]+_[0][1]*c]),e.push(n),e.push([y[0]-_[0][0]*c,y[1]-_[0][1]*c]),e.push([y[0]-_[0][0]*f,y[1]-_[0][1]*f]);for(let $=1;$<_.length;$++)e.push([i[$][0]-_[$][0]*f,i[$][1]-_[$][1]*f])}_addDash(e,i,r){const n=this._norm(r)/7;this._normalize(r);let s=[];for(let a=0;a<=7;a++)s.push([i[0]+r[0]*a*n,i[1]+r[1]*a*n]),1&a&&(e.push(s),s=[])}_cp2(e,i,r){return e.length>=2?e[1]:this._add2(e[0],i*this._defaultSize,r*this._defaultSize)}_cp3(e,i,r,n){if(e.length>=3)return e[2];const s=this._mix(e[0],1-r,i,r),a=this._sub(i,e[0]);return this._normalize(a),this._rightPerpendicular(a),[s[0]+a[0]*n*this._defaultSize,s[1]+a[1]*n*this._defaultSize]}_arrowPath(e){if(e.length>2)return e;const i=e[0],r=this._cp2(e,-4,0),n=this._sub(i,r);this._normalize(n);const s=this._rightPerp(n);return[i,r,[i[0]+(s[0]-n[0])*this._defaultSize,i[1]+(s[1]-n[1])*this._defaultSize]]}_arrowLastSeg(e){const i=e[0],r=this._cp2(e,-4,0);let n;if(e.length>=3)n=e[e.length-1];else{const s=this._sub(i,r);this._normalize(s);const a=this._rightPerp(s);n=[i[0]+(a[0]-s[0])*this._defaultSize,i[1]+(a[1]-s[1])*this._defaultSize]}return[r,n]}_processGeom(e){if(!e)return null;const i=[];for(const r of e){const n=r.length>1&&j4e(r)<this._defaultSize;if(!r||r.length===0||n)continue;const s=r.length;let a=r[0];switch(this._rule){case"PerpendicularFromFirstSegment":{const o=this._cp2(r,0,-1),l=this._cp3(r,o,.5,4),c=[];c.push(l),c.push(this._mid(a,o)),i.push(c);break}case"ReversedFirstSegment":{const o=this._cp2(r,0,-1);i.push([o,a]);break}case"PerpendicularToSecondSegment":{if(r.length<3)return[];const o=this._cp2(r,-4,1),l=this._cp3(r,o,.882353,-1.94),c=[];c.push(this._mid(o,l)),c.push(a),i.push(c);break}case"SecondSegmentWithTicks":{if(r.length<3)return[];const o=this._cp2(r,-4,1),l=this._cp3(r,o,.882353,-1.94),c=this._sub(l,o);let h;h=this._crossProduct(c,this._sub(a,o))>0?this._rightPerp(c):this._leftPerp(c);const f=[];f.push([o[0]+(h[0]-c[0])/3,o[1]+(h[1]-c[1])/3]),f.push(o),f.push(l),f.push([l[0]+(h[0]+c[0])/3,l[1]+(h[1]+c[1])/3]),i.push(f);break}case"DoublePerpendicular":{const o=this._cp2(r,0,-1),l=this._cp3(r,o,.5,3),c=this._mid(a,o),h=this._sub(c,l);this._normalize(h);const f=this._crossProduct(h,this._sub(a,l));this._leftPerpendicular(h);const g=[];g.push(a),g.push([l[0]+h[0]*f,l[1]+h[1]*f]),i.push(g);const y=[];y.push([l[0]-h[0]*f,l[1]-h[1]*f]),y.push(o),i.push(y);break}case"OppositeToFirstSegment":{const o=this._cp2(r,0,-1),l=this._cp3(r,o,.5,3),c=this._mid(a,o),h=this._sub(c,l);this._normalize(h);const f=this._crossProduct(h,this._sub(a,l));this._leftPerpendicular(h);const g=[];g.push([l[0]+h[0]*f,l[1]+h[1]*f]),g.push([l[0]-h[0]*f,l[1]-h[1]*f]),i.push(g);break}case"TriplePerpendicular":{const o=this._cp2(r,0,-1),l=this._cp3(r,o,.5,4),c=this._mid(a,o),h=this._sub(c,l);this._normalize(h);const f=this._crossProduct(h,this._sub(a,l));this._leftPerpendicular(h);const g=[];g.push([l[0]+h[0]*f*.8,l[1]+h[1]*f*.8]),g.push([c[0]+.8*(a[0]-c[0]),c[1]+.8*(a[1]-c[1])]),i.push(g),i.push([l,c]);const y=[];y.push([l[0]-h[0]*f*.8,l[1]-h[1]*f*.8]),y.push([c[0]+.8*(o[0]-c[0]),c[1]+.8*(o[1]-c[1])]),i.push(y);break}case"HalfCircleFirstSegment":{const o=this._cp2(r,0,-1),l=this._cp3(r,o,.5,4),c=this._mid(a,o);let h=this._sub(o,a);const f=Math.cos(Math.PI/18),g=Math.sin(Math.PI/18),y=Math.sqrt((1+f)/2),b=Math.sqrt((1-f)/2),_=[];let S;this._crossProduct(h,this._sub(l,a))>0?(_.push(a),h=this._sub(a,c),S=o):(_.push(o),h=this._sub(o,c),S=a),this._rotateDirect(h,y,b),h[0]/=y,h[1]/=y;for(let $=1;$<=18;$++)_.push(this._add(c,h)),this._rotateDirect(h,f,g);_.push(S),i.push(_);break}case"HalfCircleSecondSegment":{const o=this._cp2(r,0,-1),l=this._cp3(r,o,1,-1);let c=this._sub(a,o);this._normalize(c);const h=this._crossProduct(c,this._sub(l,o))/2;this._leftPerpendicular(c);const f=[o[0]+c[0]*h,o[1]+c[1]*h];c=this._sub(o,f);const g=Math.cos(Math.PI/18);let y=Math.sin(Math.PI/18);h>0&&(y=-y);const b=[o];for(let _=1;_<=18;_++)this._rotateDirect(c,g,y),b.push(this._add(f,c));i.push(b);break}case"HalfCircleExtended":{const o=this._cp2(r,0,-2),l=this._cp3(r,o,1,-1);let c;if(s>=4)c=r[3];else{const _=this._sub(a,o);c=this._add(l,_)}const h=this._dist(o,l)/2/.75,f=this._sub(o,a);this._normalize(f,h);const g=this._sub(l,c);this._normalize(g,h);const y=[c,l];i.push(y);const b=[this._clone(l)];this._addBezier3(b,l,this._add(l,g),this._add(o,f),o,4),b.push(a),i.push(b);break}case"OpenCircle":{const o=this._cp2(r,-2,0),l=this._sub(o,a),c=Math.cos(Math.PI/18),h=-Math.sin(Math.PI/18),f=[o];for(let g=1;g<=33;g++)this._rotateDirect(l,c,h),f.push(this._add(a,l));i.push(f);break}case"CoverageEdgesWithTicks":{const o=this._cp2(r,0,-1);let l,c;if(s>=3)l=r[2];else{const y=this._sub(o,a),b=this._leftPerp(y);l=[a[0]+b[0]-.25*y[0],a[1]+b[1]-.25*y[1]]}if(s>=4)c=r[3];else{const y=this._mid(a,o),b=this._sub(a,o);this._normalize(b),this._leftPerpendicular(b);const _=this._crossProduct(b,this._sub(l,y));this._rightPerpendicular(b),c=[l[0]+b[0]*_*2,l[1]+b[1]*_*2]}const h=this._sub(o,a);let f,g;f=this._crossProduct(h,this._sub(l,a))>0?this._rightPerp(h):this._leftPerp(h),g=[],g.push(l),g.push(a),g.push([a[0]+(f[0]-h[0])/3,a[1]+(f[1]-h[1])/3]),i.push(g),f=this._crossProduct(h,this._sub(c,o))>0?this._rightPerp(h):this._leftPerp(h),g=[],g.push([o[0]+(f[0]+h[0])/3,o[1]+(f[1]+h[1])/3]),g.push(o),g.push(c),i.push(g);break}case"GapExtentWithDoubleTicks":{const o=this._cp2(r,0,2),l=this._cp3(r,o,0,1);let c;if(s>=4)c=r[3];else{const h=this._sub(o,a);c=this._add(l,h)}this._addAngledTicks(i,a,o,this._mid(l,c)),this._addAngledTicks(i,l,c,this._mid(a,o));break}case"GapExtentMidline":{const o=this._cp2(r,2,0),l=this._cp3(r,o,0,1);let c;if(s>=4)c=r[3];else{const f=this._sub(o,a);c=this._add(l,f)}const h=[];h.push(this._mid(a,l)),h.push(this._mid(o,c)),i.push(h);break}case"Chevron":{const o=this._cp2(r,-1,-1);let l;if(s>=3)l=r[2];else{const c=this._sub(o,a);this._leftPerpendicular(c),l=this._add(a,c)}i.push([o,this._makeCtrlPt(a),l]);break}case"PerpendicularWithArc":{const o=this._cp2(r,0,-2),l=this._cp3(r,o,.5,-1),c=this._sub(o,a),h=this._norm(c);c[0]/=h,c[1]/=h;const f=this._crossProduct(c,this._sub(l,a));let g=this._dotProduct(c,this._sub(l,a));g<.05*h?g=.05*h:g>.95*h&&(g=.95*h);const y=[a[0]+c[0]*g,a[1]+c[1]*g];let b=this._leftPerp(c),_=[];if(_.push([y[0]-b[0]*f,y[1]-b[1]*f]),_.push([y[0]+b[0]*f,y[1]+b[1]*f]),i.push(_),s>=4){const I=r[3];let P=this._dotProduct(c,this._sub(I,a));P<.1*h?P=.1*h:P>.9*h&&(P=.9*h);const O=[a[0]+c[0]*P,a[1]+c[1]*P],N=this._crossProduct(c,this._sub(I,a)),R=[];R.push([O[0]-b[0]*N,O[1]-b[1]*N]),R.push([O[0]+b[0]*N,O[1]+b[1]*N]),i.push(R)}const S=[o[0]+b[0]*f,o[1]+b[1]*f];b=this._sub(o,S);const $=Math.cos(Math.PI/18);let C=Math.sin(Math.PI/18);f<0&&(C=-C),_=[a,o];for(let I=1;I<=9;I++)this._rotateDirect(b,$,C),_.push(this._add(S,b));i.push(_);break}case"ClosedHalfCircle":{const o=this._cp2(r,2,0),l=this._mid(a,o),c=this._sub(o,l),h=Math.cos(Math.PI/18),f=Math.sin(Math.PI/18),g=[a,o];for(let y=1;y<=18;y++)this._rotateDirect(c,h,f),g.push(this._add(l,c));i.push(g);break}case"TripleParallelExtended":{const o=this._cp2(r,0,-2),l=this._cp3(r,o,1,-2),c=this._mid(a,o),h=this._sub(l,o);this._normalize(h);const f=Math.abs(this._crossProduct(h,this._sub(c,o)))/2,g=this._dist(o,l),y=[o,a];y.push([a[0]+h[0]*g*.5,a[1]+h[1]*g*.5]),i.push(y);const b=[];b.push([c[0]-h[0]*f,c[1]-h[1]*f]),b.push([c[0]+h[0]*g*.375,c[1]+h[1]*g*.375]),P2(b[b.length-1],1),b.push([c[0]+h[0]*g*.75,c[1]+h[1]*g*.75]),i.push(b);const _=[o,l];i.push(_);break}case"ParallelWithTicks":{const o=this._cp2(r,3,0),l=this._cp3(r,o,.5,-1),c=this._sub(l,o);this._normalize(c);const h=this._crossProduct(c,this._sub(l,a));this._leftPerpendicular(c),this._addAngledTicks(i,a,o,l),this._addAngledTicks(i,this._mix(a,1,c,h),this._mix(o,1,c,h),this._mid(a,o));break}case"Parallel":{const o=this._cp2(r,3,0),l=this._cp3(r,o,.5,-1),c=this._sub(o,a);this._normalize(c);const h=this._leftPerp(c),f=this._crossProduct(c,this._sub(l,a));let g=[a,o];i.push(g),g=[],g.push([a[0]+h[0]*f,a[1]+h[1]*f]),g.push([o[0]+h[0]*f,o[1]+h[1]*f]),i.push(g);break}case"PerpendicularToFirstSegment":{const o=this._cp2(r,3,0),l=this._cp3(r,o,.5,-1),c=this._mid(a,o),h=this._sub(o,a);this._normalize(h);const f=this._crossProduct(h,this._sub(l,a));this._leftPerpendicular(h);const g=[];g.push([c[0]-h[0]*f*.25,c[1]-h[1]*f*.25]),g.push([c[0]+h[0]*f*1.25,c[1]+h[1]*f*1.25]),i.push(g);break}case"ParallelOffset":{const o=this._cp2(r,3,0),l=this._cp3(r,o,.5,-1),c=this._sub(o,a);this._normalize(c);const h=this._crossProduct(c,this._sub(l,a));this._leftPerpendicular(c);const f=[];f.push([a[0]-c[0]*h,a[1]-c[1]*h]),f.push([o[0]-c[0]*h,o[1]-c[1]*h]),i.push(f);const g=[];g.push([a[0]+c[0]*h,a[1]+c[1]*h]),g.push([o[0]+c[0]*h,o[1]+c[1]*h]),i.push(g);break}case"OffsetOpposite":{const o=this._cp2(r,3,0),l=this._cp3(r,o,.5,-1),c=this._sub(o,a);this._normalize(c);const h=this._crossProduct(c,this._sub(l,a));this._leftPerpendicular(c);const f=[];f.push([a[0]-c[0]*h,a[1]-c[1]*h]),f.push([o[0]-c[0]*h,o[1]-c[1]*h]),i.push(f);break}case"OffsetSame":{const o=this._cp2(r,3,0),l=this._cp3(r,o,.5,-1),c=this._sub(o,a);this._normalize(c);const h=this._crossProduct(c,this._sub(l,a));this._leftPerpendicular(c);const f=[];f.push([a[0]+c[0]*h,a[1]+c[1]*h]),f.push([o[0]+c[0]*h,o[1]+c[1]*h]),i.push(f);break}case"CircleWithArc":{let o=this._cp2(r,3,0);const l=this._cp3(r,o,.5,-1);let c,h;if(s>=4)c=r[3],h=this._crossProduct(this._sub(c,o),this._sub(l,o))>0;else{c=o,h=this._crossProduct(this._sub(c,a),this._sub(l,a))>0;const _=24*this._geomUnitsPerPoint,S=this._sub(c,a);this._normalize(S,_);const $=Math.sqrt(2)/2;this._rotateDirect(S,$,h?$:-$),o=this._add(a,S)}const f=this._sub(o,a),g=Math.cos(Math.PI/18),y=Math.sin(Math.PI/18),b=[o];for(let _=1;_<=36;_++)this._rotateDirect(f,g,y),b.push(this._add(a,f));this._add90DegArc(b,o,c,l,h),P2(b[b.length-8],1),i.push(b);break}case"DoubleJog":{let o,l=this._cp2(r,-3,1),c=this._cp3(r,l,-1,-.5);if(s>=4)o=r[3];else{const C=a;a=l,o=c;const I=this._dist(a,C),P=this._dist(o,C);let O=30*this._geomUnitsPerPoint;.5*I<O&&(O=.5*I),.5*P<O&&(O=.5*P),l=this._mix(a,O/I,C,(I-O)/I),c=this._mix(o,O/P,C,(P-O)/P)}const h=this._mid(a,l),f=this._mid(o,c),g=this._dist(a,l),y=this._dist(c,o);let b=Math.min(g,y)/8;b=Math.min(b,24*this._geomUnitsPerPoint);const _=Math.cos(Math.PI/4);let S=this._sub(a,l);this._normalize(S,b),this._crossProduct(S,this._sub(o,l))>0?this._rotateDirect(S,_,-_):this._rotateDirect(S,_,_);let $=[];$.push(l),$.push(this._add(h,S)),$.push(this._sub(h,S)),$.push(a),i.push($),S=this._sub(o,c),this._normalize(S,b),this._crossProduct(S,this._sub(a,c))<0?this._rotateDirect(S,_,_):this._rotateDirect(S,_,-_),$=[],$.push(c),$.push(this._add(f,S)),$.push(this._sub(f,S)),$.push(o),i.push($);break}case"PerpendicularOffset":{const o=this._cp2(r,-4,1),l=this._cp3(r,o,.882353,-1.94),c=this._sub(l,o);this._crossProduct(c,this._sub(a,o))>0?this._rightPerpendicular(c):this._leftPerpendicular(c);const h=[c[0]/8,c[1]/8],f=this._sub(this._mid(o,l),h);i.push([f,a]);break}case"LineExcludingLastSegment":{const o=this._arrowPath(r),l=[];let c=o.length-2;for(;c--;)l.push(o[c]);i.push(l);break}case"MultivertexArrow":{const o=this._arrowPath(r),l=[];this._addArrow(l,o,!1),i.push(l);break}case"CrossedArrow":{const o=this._arrowPath(r),l=[];this._addArrow(l,o,!0),i.push(l);break}case"ChevronArrow":{const[o,l]=this._arrowLastSeg(r),c=10*this._geomUnitsPerPoint,h=this._sub(a,o),f=this._norm(h);this._normalize(h);const g=this._crossProduct(h,this._sub(l,o));let y=this._dotProduct(h,this._sub(l,o));y<.05*f?y=.05*f:y>.95*f-c&&(y=.95*f-c);const b=[o[0]+h[0]*y,o[1]+h[1]*y],_=this._leftPerp(h),S=[];S.push([b[0]+_[0]*g+h[0]*c,b[1]+_[1]*g+h[1]*c]),S.push(a),S.push([b[0]-_[0]*g+h[0]*c,b[1]-_[1]*g+h[1]*c]),i.push(S);break}case"ChevronArrowOffset":{const[o,l]=this._arrowLastSeg(r),c=this._sub(a,o),h=this._norm(c);this._normalize(c);const f=this._crossProduct(c,this._sub(l,o));let g=this._dotProduct(c,this._sub(l,o));g<.05*h?g=.05*h:g>.95*h&&(g=.95*h);const y=[o[0]+c[0]*g,o[1]+c[1]*g];this._leftPerpendicular(c);const b=[];b.push([y[0]+c[0]*f*.5,y[1]+c[1]*f*.5]),b.push(this._mid(y,a)),b.push([y[0]-c[0]*f*.5,y[1]-c[1]*f*.5]),i.push(b);break}case"PartialFirstSegment":{const[o,l]=this._arrowLastSeg(r),c=this._sub(a,o),h=this._norm(c);this._normalize(c);let f=this._dotProduct(c,this._sub(l,o));f<.05*h?f=.05*h:f>.95*h&&(f=.95*h);const g=[o[0]+c[0]*f,o[1]+c[1]*f];i.push([o,g]);break}case"Arch":{const o=this._cp2(r,0,-1),l=this._cp3(r,o,.5,1),c=this._sub(a,o),h=this._mix(l,1,c,.55),f=this._mix(l,1,c,-.55),g=[a];this._addBezier2(g,a,h,l,4),this._addBezier2(g,l,f,o,4),i.push(g);break}case"CurvedParallelTicks":{const o=this._cp2(r,-4,1),l=this._cp3(r,o,.882353,-1.94),c=this._sub(l,o);this._crossProduct(c,this._sub(a,o))>0?this._rightPerpendicular(c):this._leftPerpendicular(c);const h=[c[0]/8,c[1]/8],f=this._sub(this._mid(o,l),h),g=this._sub(this._mix(o,.75,l,.25),h),y=this._sub(this._mix(o,.25,l,.75),h),b=[o];this._addBezier2(b,o,g,f,3),this._addBezier2(b,f,y,l,3),i.push(b);for(let _=0;_<8;_++){const S=b[2*_+1],$=[this._clone(S)];$.push(this._add(S,[c[0]/4,c[1]/4])),i.push($)}break}case"Arc90Degrees":{const o=this._cp2(r,0,-1),l=this._cp3(r,o,.5,1),c=[o];this._add90DegArc(c,o,a,l),i.push(c);break}case"TipWithPerpendicularAndTicks":{const[o,l]=this._arrowLastSeg(r),c=10*this._geomUnitsPerPoint,h=this._sub(a,o),f=this._norm(h);this._normalize(h);let g=this._crossProduct(h,this._sub(l,o)),y=this._dotProduct(h,this._sub(l,o));y<.05*f?y=.05*f:y>.95*f-c&&(y=.95*f-c);const b=this._leftPerp(h),_=[a[0]-h[0]*c,a[1]-h[1]*c],S=.5*Math.max(f-y-c,c);g=Math.abs(g);const $=[];$.push([_[0]+b[0]*(g+S)-h[0]*S,_[1]+b[1]*(g+S)-h[1]*S]),$.push([_[0]+b[0]*g,_[1]+b[1]*g]),$.push([_[0]-b[0]*g,_[1]-b[1]*g]),$.push([_[0]-b[0]*(g+S)-h[0]*S,_[1]-b[1]*(g+S)-h[1]*S]),i.push($),i.push([_,a]);break}case"ConcentricCircles":{const o=this._cp2(r,1,0),l=this._cp3(r,o,2,0),c=Math.cos(Math.PI/18),h=Math.sin(Math.PI/18);let f=this._dist(o,a),g=[f,0],y=[];for(let b=0;b<=36;b++)y.push(this._add(a,g)),this._rotateDirect(g,c,h);if(i.push(y),s>=4){y=[];const b=r[3];f=this._dist(b,a),g=[f,0];for(let _=0;_<=36;_++)y.push(this._add(a,g)),_===0&&(y.push(this._add(a,g)),P2(y[1],1)),this._rotateDirect(g,c,h);i.push(y)}y=[],f=this._dist(l,a),g=[f,0];for(let b=0;b<=36;b++)y.push(this._add(a,g)),this._rotateDirect(g,c,h);i.push(y);break}case"DoubleJogArrow":{a=this._arrowPath(r)[0];const[o,l]=this._arrowLastSeg(r),c=this._sub(a,o),h=this._norm(c);this._normalize(c);const f=Math.abs(this._crossProduct(c,this._sub(l,a)));let g=Math.abs(this._dotProduct(c,this._sub(l,a)));g<.05*h?g=.05*h:g>.95*h&&(g=.95*h);const y=Math.max(f,g),b=this._leftPerp(c);let _=[];const S=[a[0]-c[0]*g*.5+b[0]*f*.5,a[1]-c[1]*g*.5+b[1]*f*.5];_.push([S[0],S[1]]),S[0]+=c[0]*y*.5+b[0]*y*.4,S[1]+=c[1]*y*.5+b[1]*y*.4,_.push([S[0],S[1]]),S[0]-=b[0]*y*.25,S[1]-=b[1]*y*.25,_.push([S[0],S[1]]),S[0]+=c[0]*y*.5+b[0]*y*.4,S[1]+=c[1]*y*.5+b[1]*y*.4,_.push([S[0],S[1]]),i.push(_),_=[],S[0]=a[0]-c[0]*g*.5-b[0]*f*.5,S[1]=a[1]-c[1]*g*.5-b[1]*f*.5,_.push([S[0],S[1]]),S[0]+=c[0]*y*.5-b[0]*y*.4,S[1]+=c[1]*y*.5-b[1]*y*.4,_.push([S[0],S[1]]),S[0]+=b[0]*y*.25,S[1]+=b[1]*y*.25,_.push([S[0],S[1]]),S[0]+=c[0]*y*.5-b[0]*y*.4,S[1]+=c[1]*y*.5-b[1]*y*.4,_.push([S[0],S[1]]),i.push(_);break}case"LinkedChevrons":{const o=this._cp2(r,-5,0),l=this._cp3(r,o,-.2,1),c=this._sub(a,o);this._normalize(c);const h=this._leftPerp(c),f=Math.abs(this._crossProduct(c,this._sub(l,o)));i.push([o,a]);const g=[];g.push([a[0]-c[0]*f+h[0]*f,a[1]-c[1]*f+h[1]*f]),g.push(a),g.push([a[0]-c[0]*f-h[0]*f,a[1]-c[1]*f-h[1]*f]),i.push(g),this._addDash(i,o,[-c[0]*f+h[0]*f,-c[1]*f+h[1]*f]),this._addDash(i,o,[-c[0]*f-h[0]*f,-c[1]*f-h[1]*f]);break}case"SegmentThenHalfCircle":{const o=this._cp2(r,2,0),l=this._cp3(r,o,1.5,0);let c;c=s>=4?r[3]:this._cp3(r,o,1.25,-.5);const h=this._sub(o,a);this._normalize(h);const f=.5*this._dist(o,l),g=this._crossProduct(h,this._sub(c,a))>0,y=Math.cos(Math.PI/18);let b=Math.sin(Math.PI/18);g&&(b=-b);const _=[a,o];h[0]*=f,h[1]*=f;const S=this._add(o,h);h[0]=-h[0],h[1]=-h[1];for(let $=1;$<=18;$++)this._rotateDirect(h,y,b),_.push(this._add(S,h));i.push(_);break}case"LineWithStraightTicks":{const o=this._cp2(r,-2,1),l=this._cp3(r,o,-1,-.5),c=this._sub(l,o);this._normalize(c);const h=this._dotProduct(c,this._sub(o,a)),f=this._dotProduct(c,this._sub(l,a));let g=[a];g.push([a[0]+c[0]*h,a[1]+c[1]*h]),g.push(o),i.push(g),g=[a],g.push([a[0]+c[0]*f,a[1]+c[1]*f]),g.push(l),i.push(g);break}case"DoubleCurve":{const o=this._cp2(r,-5,-1),l=this._cp3(r,o,2,0),c=Math.atan2(1,5),h=Math.cos(c),f=Math.sin(c),g=this._sub(o,a),y=this._dist(a,o);this._normalize(g),this._rotateDirect(g,h,-f);const b=[a];b.push([a[0]+g[0]*y*.5,a[1]+g[1]*y*.5]),P2(b[1],1),b.push([a[0]+g[0]*y*.8,a[1]+g[1]*y*.8]),this._addBezier2(b,b[2],[a[0]+g[0]*y,a[1]+g[1]*y],o,3);const _=this._sub(l,o),S=this._dist(o,l);this._normalize(_),this._rotateDirect(_,h,-f),this._addBezier2(b,o,[l[0]-_[0]*S,l[1]-_[1]*S],[l[0]-_[0]*S*.8,l[1]-_[1]*S*.8],3),b.push(l),i.push(b);break}case"ParallelWithTicksByWidth":{const o=this._cp2(r,0,-1),l=this._cp3(r,o,.5,3),c=this._sub(o,a);this._normalize(c);const h=this._crossProduct(c,this._sub(l,a));this._leftPerpendicular(c),h>0?(this._addAngledTicks(i,a,[a[0]+c[0]*h,a[1]+c[1]*h],o),this._addAngledTicks(i,o,[o[0]+c[0]*h,o[1]+c[1]*h],a)):(this._addAngledTicks(i,[a[0]+c[0]*h,a[1]+c[1]*h],a,o),this._addAngledTicks(i,[o[0]+c[0]*h,o[1]+c[1]*h],a,o));break}case"EnclosingRoundedRectangle":{const o=this._cp2(r,3,-2),l=[Math.min(a[0],o[0]),Math.max(a[1],o[1])],c=[Math.max(a[0],o[0]),Math.min(a[1],o[1])],h=c[0]-l[0],f=l[1]-c[1],g=Math.min(h,f)/10,y=[];y.push([l[0]+g+.75*(h-2*g),l[1]]),y.push([c[0]-g,l[1]]),this._add90DegArc(y,[c[0]-g,l[1]],[c[0],l[1]-g],[c[0],l[1]]),y.push([c[0],c[1]+g]),this._add90DegArc(y,[c[0],c[1]+g],[c[0]-g,c[1]],c),y.push([l[0]+g,c[1]]),this._add90DegArc(y,[l[0]+g,c[1]],[l[0],c[1]+g],[l[0],c[1]]),y.push([l[0],l[1]-g]),this._add90DegArc(y,[l[0],l[1]-g],[l[0]+g,l[1]],l),y.push([l[0]+g+.75*(h-2*g),l[1]]);break}default:i.push(r)}}return i}};var ep;let Iut=(ep=class{static local(){return ep.instance===null&&(ep.instance=new ep),ep.instance}execute(e,i,r){return new Mut(e,i,r)}},ep.instance=null,ep),Mut=class extends QT{constructor(e,i,r){super(e,!0,!0),this._curveHelper=new lg,this._beginCut=(i.beginCut!==void 0?i.beginCut:1)*r,this._endCut=(i.endCut!==void 0?i.endCut:1)*r,this._middleCut=(i.middleCut!==void 0?i.middleCut:0)*r,this._invert=i.invert!==void 0&&i.invert,this._beginCut<0&&(this._beginCut=0),this._endCut<0&&(this._endCut=0),this._middleCut<0&&(this._middleCut=0)}processPath(e){const{_beginCut:i,_endCut:r,_middleCut:n}=this,s=e.pathLength(),a=Ji.createEmptyOptimizedCIM("esriGeometryPolyline");if(this._invert){if(i!==0||r!==0||n!==0)if(i+r+n>=s)for(a.startPath();e.nextPoint();)a.pushXY(e.x,e.y);else this._curveHelper.appendSubCurve(a,e,0,i),this._curveHelper.appendSubCurve(a,e,.5*(s-n),.5*(s+n)),this._curveHelper.appendSubCurve(a,e,s-r,r)}else if(i===0&&r===0&&n===0)for(a.startPath();e.nextPoint();)a.pushXY(e.x,e.y);else i+r+n<s&&(n===0?this._curveHelper.appendSubCurve(a,e,i,s-r):(this._curveHelper.appendSubCurve(a,e,i,.5*(s-n)),this._curveHelper.appendSubCurve(a,e,.5*(s+n),s-r)));return a.totalSize===0?null:a}};const Pce=1e-7;let nj=class{constructor(){this._values=[],this.extPtGap=0,this.ctrlPtGap=0,this._length=0,this._currentValue=0}isEmpty(){return this._values.length===0}size(){return this._values.length}init(e,i,r=!0){if(this._setEmpty(),!e||e.length===0)return!1;for(let n=0;n<e.length;n++){let s=Math.abs(e[n]);r&&s<Pce&&(s=Pce),this._values.push(s),this._length+=s}return i&&1&e.length&&(this._length*=2),this._length!==0&&(this.ctrlPtGap=this.extPtGap=0,this._currentValue=-1,!0)}scale(e){const i=this._values?this._values.length:0;for(let r=0;r<i;++r)this._values[r]*=e;this._length*=e,this.extPtGap*=e,this.ctrlPtGap*=e}addValue(e){this._length+=e,this._values.push(e)}firstValue(){return this._values[0]}lastValue(){return this._values[this._values.length-1]}nextValue(){return this._currentValue++,this._currentValue===this._values.length&&(this._currentValue=0),this._values[this._currentValue]}reset(){this._currentValue=-1}length(){return this._length}_setEmpty(){this.extPtGap=this.ctrlPtGap=this._length=0,this._currentValue=-1,this._values.length=0}},gm=class{constructor(){this.pt=null,this.ca=0,this.sa=0}},pL=class{constructor(){this.reset()}reset(){this.segment=null,this.segmentLength=0,this.abscissa=0,this.isPathEnd=!1,this.isPartEnd=!1}isValid(){return this.segment!==null}copyTo(e){e.segment=this.segment,e.segmentLength=this.segmentLength,e.abscissa=this.abscissa,e.isPathEnd=this.isPathEnd,e.isPartEnd=this.isPartEnd}},sj=class extends lg{constructor(e=0,i=!1){super(e,i),this._tempPos=new pL,this._tempPt=[0,0],this._tolerance=JI,this._currentPosition=new pL}updateTolerance(e){this._tolerance=JI*e}init(e,i,r=!0){return r?(this._patternLength=i.length(),this._partExtPtGap=i.extPtGap,this._partCtrlPtGap=i.ctrlPtGap):(this._patternLength=0,this._partExtPtGap=0,this._partCtrlPtGap=0),this._currentPosition.reset(),this._partSegCount=0,this._pathCursor=e,this._seg=-1,this._setPosAtNextPart()}curPositionIsValid(){return this._currentPosition.isValid()}nextPosition(e,i=0){const r=new pL;return!!this._nextPosition(e,r,null,i)&&(r.copyTo(this._currentPosition),!0)}curPointAndAngle(e){e.pt=this._getPoint(this._currentPosition);const[i,r]=this._getAngleCS(this._tempPt,this._currentPosition);e.ca=i,e.sa=r}nextPointAndAngle(e,i,r=0){const n=this._tempPos;if(!this._nextPosition(e,n,null,r))return!1;n.copyTo(this._currentPosition),i.pt=this._getPoint(n);const[s,a]=this._getAngleCS(this._tempPt,n);return i.ca=s,i.sa=a,!0}nextCurve(e){if(e===0)return null;const i=Ji.createEmptyOptimizedCIM("esriGeometryPolyline");i.startPath(),i.nextPath();const r=new pL;return this._nextPosition(e,r,i,1)?(r.copyTo(this._currentPosition),i):null}isPathEnd(){return this._currentPosition.isPathEnd}getPathEnd(){return this._currentPosition.segment[1]}getPt(e){return this._pathCursor.seekInPath(e),[this._pathCursor.x,this._pathCursor.y]}getSeg(e){return[this.getPt(e),this.getPt(e+1)]}_nextPosition(e,i,r,n){if(this._currentPosition.isPathEnd)return!1;let s=this._currentPosition.abscissa;for(this._currentPosition.segmentLength>0&&(s/=this._currentPosition.segmentLength),this._currentPosition.copyTo(i);i.abscissa+e*this._partLengthRatio>i.segmentLength+this._tolerance;){if(r){if(r.pathSize===0)if(s===0){const o=i.segment[0];r.pushXY(o[0],o[1])}else r.pushPoint(this.getSegCoord2D(i.segment,s));const a=i.segment[1];r.pushXY(a[0],a[1])}if(s=0,e-=(i.segmentLength-i.abscissa)/this._partLengthRatio,this._partSegCount)i.segment=this._nextSegment(),i.segmentLength=this.getSegLength(i.segment),i.abscissa=0,this._partSegCount--;else{if(!this._setPosAtNextPart())return n!==0&&(i.segmentLength=this.getSegLength(i.segment),i.isPartEnd=!0,n===1?(i.abscissa=i.segmentLength,i.isPathEnd=!0):i.abscissa=i.segmentLength+e,!0);this._currentPosition.copyTo(i)}}if(i.abscissa+=e*this._partLengthRatio,r){r.pathSize===0&&(s===0?r.pushPoint(i.segment[0]):r.pushPoint(this.getSegCoord2D(i.segment,s)));const a=i.abscissa/i.segmentLength;a===1?r.pushPoint(i.segment[1]):r.pushPoint(this.getSegCoord2D(i.segment,a))}return this._partSegCount||Math.abs(i.abscissa-i.segmentLength)<this._tolerance&&(i.isPathEnd=this._partIsLast,i.isPartEnd=!0),!0}_getPoint(e){const i=e.segmentLength<=0?0:e.abscissa/e.segmentLength;return this.getSegCoord2D(this._currentPosition.segment,i)}_getAngleCS(e,i){const r=i.segmentLength<=0?0:i.abscissa/i.segmentLength;return this.getSegAngleCS(e,this._currentPosition.segment,r)}_setPosAtNextPart(){for(;this._partSegCount;)this._hasNextSegment()&&this._nextSegment(),this._partSegCount--;if(!this._hasNextSegment())return!1;for(this._partLength=0,this._partIsLast=!0,this._partSegCount=0;this._hasNextSegment();)if(this._partLength+=this.getSegLength(this._nextSegment()),this._partSegCount++,this._pathCursor.getControlPointAt(this._getEndPointIndex())){this._partIsLast=!this._hasNextSegment();break}let e=this._partSegCount;for(;e;)this._previousSegment(),--e;this._currentPosition.segment=this._nextSegment(),this._currentPosition.segmentLength=this.getSegLength(this._currentPosition.segment),this._currentPosition.abscissa=0,this._currentPosition.isPathEnd=this._currentPosition.isPartEnd=!1,--this._partSegCount;const i=this._getStartPointIndex();this._ctrlPtBegin=this._pathCursor.getControlPointAt(i);let r=i+this._partSegCount+1;if(r>=this._pathCursor.pathSize&&(r=0),this._ctrlPtEnd=this._pathCursor.getControlPointAt(r),this._patternLength>0){const n=this._ctrlPtBegin?this._partCtrlPtGap:this._partExtPtGap,s=this._ctrlPtEnd?this._partCtrlPtGap:this._partExtPtGap;let a=Math.round((this._partLength-(n+s))/this._patternLength);a<=0&&(a=n+s>0?0:1),this._partLengthRatio=this._partLength/(n+s+a*this._patternLength),this._partLengthRatio<.01&&(this._partLengthRatio=1)}else this._partLengthRatio=1;return!0}_hasNextSegment(){return this._seg<this._pathCursor.pathSize-2}_previousSegment(){return this.getSeg(--this._seg)}_nextSegment(){return this.getSeg(++this._seg)}_getStartPointIndex(){return this._seg}_getEndPointIndex(){return this._seg+1}};var tp;let Aut=(tp=class{static local(){return tp.instance===null&&(tp.instance=new tp),tp.instance}execute(e,i,r){return new Put(e,i,r)}},tp.instance=null,tp),Put=class extends QT{constructor(e,i,r){super(e,!0,!0),this._firstCurve=null,this._walker=new sj,this._walker.updateTolerance(r),this._endings=i.lineDashEnding,this._customDashPos=-(i.offsetAlongLine??0)*r,this._offsetAtEnd=(i.customEndingOffset??0)*r;let n=fSe(i).dashTemplate;n==null&&(n=[]),n.length%2&&(n=[...n,...n]),this._pattern=new nj,this._pattern.init(n,!0),this._pattern.scale(r)}processPath(e){if(this._pattern.length()===0){this.iteratePath=!1;const n=uv(e);return Ji.fromJSONCIM({paths:[n]})}if(!this.iteratePath){let n=!0;switch(this._endings){case"HalfPattern":case"HalfGap":default:this._pattern.extPtGap=0;break;case"FullPattern":this.isClosed||(this._pattern.extPtGap=.5*this._pattern.firstValue());break;case"FullGap":this.isClosed||(this._pattern.extPtGap=.5*this._pattern.lastValue());break;case"NoConstraint":this.isClosed||(n=!1);break;case"Custom":this.isClosed||(this._pattern.extPtGap=.5*this._offsetAtEnd)}const s=e.pathLength();if(this._pattern.isEmpty()||s<.1*this._pattern.length()){const a=uv(e);return Ji.fromJSONCIM({paths:[a]})}if(!this._walker.init(e,this._pattern,n)){const a=uv(e);return Ji.fromJSONCIM({paths:[a]})}}let i;if(this.iteratePath)i=this._pattern.nextValue();else{let n;switch(this._endings){case"HalfPattern":default:n=.5*this._pattern.firstValue();break;case"HalfGap":n=.5*-this._pattern.lastValue();break;case"FullGap":n=-this._pattern.lastValue();break;case"FullPattern":n=0;break;case"NoConstraint":case"Custom":n=-this._customDashPos}let s=n/this._pattern.length();s-=Math.floor(s),n=s*this._pattern.length(),this._pattern.reset(),i=this._pattern.nextValue();let a=!1;for(;n>=i;)n-=i,i=this._pattern.nextValue(),a=!a;i-=n,a?(this._walker.nextPosition(i),i=this._pattern.nextValue()):this.isClosed&&(this._firstCurve=this._walker.nextCurve(i),i=this._pattern.nextValue(),this._walker.nextPosition(i),i=this._pattern.nextValue())}let r=this._walker.nextCurve(i);if(r)if(this._walker.isPathEnd()){if(this.iteratePath=!1,this._firstCurve){for(this._firstCurve.nextPath();this._firstCurve.nextPoint();)r.pushXY(this._firstCurve.x,this._firstCurve.y);this._firstCurve=null}}else i=this._pattern.nextValue(),!this._walker.nextPosition(i)||this._walker.isPathEnd()?(this.iteratePath=!1,this._firstCurve&&(r.pushCursor(this._firstCurve),this._firstCurve=null)):this.iteratePath=!0;else this.iteratePath=!1,r=this._firstCurve,this._firstCurve=null;return r?.reset(),r}};var ip;let Out=(ip=class{static local(){return ip.instance===null&&(ip.instance=new ip),ip.instance}execute(e,i,r,n,s,a){return new Lut(e,i,r,n,s,a)}},ip.instance=null,ip),Lut=class{constructor(e,i,r,n,s,a){this._preventClipping=a,this._inputGeometries=e,this._tileKey=n,this._maxInflateSize=s*r,this._width=(i.width!==void 0?i.width:2)*r,i.method,this._option=i.option}next(){let e;for(;e=this._inputGeometries.next();){if(e.geometryType==="esriGeometryEnvelope"&&this._width>0){const i=e.asJSON();return Math.min(i.xmax-i.xmin,i.ymax-i.ymin)-2*this._width<0?e:Ji.fromJSONCIM({paths:[[[i.xmin+this._width,i.ymin+this._width],[i.xmax-this._width,i.ymin+this._width],[i.xmax-this._width,i.ymax-this._width],[i.xmin+this._width,i.ymax-this._width],[i.xmin+this._width,i.ymin+this._width]],[[i.xmin,i.ymin],[i.xmin,i.ymax],[i.xmax,i.ymax],[i.xmax,i.ymin],[i.xmin,i.ymin]]]})}if(e.geometryType==="esriGeometryPolygon"){if(this._width===0)return e.clone();const i=mJ.module,r=!this._preventClipping&&this._tileKey?gJ(e,this._maxInflateSize,!0):e.clone();if(!r)continue;const n={...r.asJSON(),spatialReference:{wkid:at.WebMercator.wkid}},s=i.execute(n,-this._width);if(s){for(const a of s.rings)if(a){r.startPath();for(const o of a.reverse())r.pushXY(o[0],r.yFactor*o[1])}}return r}}return null}};var rp;let Dut=(rp=class{static local(){return rp.instance===null&&(rp.instance=new rp),rp.instance}execute(e,i){return new Rut(e,i)}},rp.instance=null,rp),Rut=class{constructor(e,i){this._inputGeometries=e,this._medhod=i.method}next(){let e=this._inputGeometries.next();const i=this._medhod;for(;e!=null;){if(e.totalSize>0)switch(i){case"RectangularBox":return zut(e);case"ConvexHull":return this._constructConvexHull(e);default:return Fut(e)}e=this._inputGeometries.next()}return null}_constructConvexHull(e){switch(e.geometryType){case"esriGeometryPolyline":case"esriGeometryPolygon":{const i=vTe.module,r={...e.asJSON(),spatialReference:{wkid:at.WebMercator.wkid}},n=i.execute(r);return n?Ji.fromJSONCIM(n):null}case"esriGeometryEnvelope":return e;default:return null}}};function zut(t){const e=ZM(t),i={xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3]};return Ji.fromJSONCIM(i)}function Fut(t){switch(t.geometryType){case"esriGeometryPolyline":{const e=[];for(;t.nextPath();)Nut(t,e);return Ji.fromJSONCIM({rings:e})}case"esriGeometryPolygon":case"esriGeometryEnvelope":return t;default:return null}}function Nut(t,e){if(t.seekPathStart(),!t.nextPoint())return;const i=t.x,r=t.y,n=[[i,r]];for(e.push(n);t.nextPoint();)n.push([t.x,t.y]);n.push([i,r])}var np;let jut=(np=class{static local(){return np.instance===null&&(np.instance=new np),np.instance}execute(e,i,r){return new Vut(e,i,r)}},np.instance=null,np),Vut=class extends QT{constructor(e,i,r){super(e,!1,!0),this._curveHelper=new lg,this._length=(i.length!==void 0?i.length:20)*r,this._angle=i.angle!==void 0?i.angle:225,this._position=i.position!==void 0?i.position:50,this._length<0&&(this._length=-this._length),this._position<20&&(this._position=20),this._position>80&&(this._position=80),this._mirror=!1}processPath(e){const i=Ji.createEmptyOptimizedCIM("esriGeometryPolyline");if(this._curveHelper.isEmpty(e))return null;e.seekInPath(0);const r=e.x,n=e.y;e.seekInPath(e.pathSize-1);const s=e.x,a=e.y,o=[s-r,a-n];this._curveHelper.normalize(o);const l=r+(s-r)*this._position/100,c=n+(a-n)*this._position/100,h=Math.cos((90-this._angle)/180*Math.PI);let f=Math.sin((90-this._angle)/180*Math.PI);this._mirror&&(f=-f),this._mirror=!this._mirror;const g=[l-this._length/2*h,c-this._length/2*f],y=[l+this._length/2*h,c+this._length/2*f];return i.pushPath([[r,n],g,y,[s,a]]),i}};var sp;let But=(sp=class{static local(){return sp.instance===null&&(sp.instance=new sp),sp.instance}execute(e,i,r){return new Uut(e,i,r)}},sp.instance=null,sp),Uut=class{constructor(e,i,r){this._inputGeometries=e,this._offsetX=i.offsetX!==void 0?i.offsetX*r:0,this._offsetY=i.offsetY!==void 0?i.offsetY*r:0}next(){let e=this._inputGeometries.next();for(;e;){if(e.totalSize>0)return this._move(e.clone(),this._offsetX,this._offsetY);e=this._inputGeometries.next()}return null}_move(e,i,r){for(;e.nextPath();)for(;e.nextPoint();)e.x=e.x+i,e.y=e.y+r;return e.reset(),e}};const Hut=10;var ap;let Gut=(ap=class{static local(){return ap.instance===null&&(ap.instance=new ap),ap.instance}execute(e,i,r,n,s,a){return new qut(e,i,r,n,s,a)}},ap.instance=null,ap),qut=class{constructor(e,i,r,n,s,a){this._preventClipping=a,this._inputGeometries=e,this._tileKey=n,this._curveHelper=new lg,this._offset=(i.offset??1)*r,this._method=i.method,this._maxInflateSize=Math.max(Math.abs(s*r),Hut),this._option=i.option,this._offsetFlattenError=JI*r}next(){let e;for(;e=this._inputGeometries.next();){if(this._offset===0)return e.clone();if(e.geometryType==="esriGeometryEnvelope"){if(this._method==="Rounded"&&this._offset>0){const c=uv(e),h=this._curveHelper.offset(c,-this._offset,this._method,4,this._offsetFlattenError);if(h){const f=Ji.createEmptyOptimizedCIM(e.geometryType);return f.pushPath(h),f}return null}const l=e.asJSON();if(Mo(l)&&Math.min(l.xmax-l.xmin,l.ymax-l.ymin)+2*this._offset>0)return Ji.fromJSONCIM({xmin:l.xmin-this._offset,xmax:l.xmax+this._offset,ymin:l.ymin-this._offset,ymax:l.ymax+this._offset})}const i=!this._preventClipping&&this._tileKey?gJ(e,this._maxInflateSize,!0):e.clone();if(!i)continue;const r=xTe.module,n=_Te.module,s={...i.asJSON(),spatialReference:{wkid:at.WebMercator.wkid}};let a,o=Wut(this._method);return e.geometryType==="esriGeometryPolygon"&&this._offset>0?(o==="square"&&(o="bevel"),a=n.executeMany([s],[this._offset],o,"round")[0]):a=r.execute(s,-this._offset,{joins:o,flattenError:this._offsetFlattenError,miterLimit:4}),a?Ji.fromJSONCIM(a):null}return null}};function Wut(t){switch(t){case"Rounded":return"round";case"Bevelled":return"bevel";case"Mitered":return"miter";case"Square":return"square"}}var op;let Yut=(op=class{static local(){return op.instance===null&&(op.instance=new op),op.instance}execute(e,i,r){return new Zut(e,i,r)}},op.instance=null,op),Zut=class{constructor(e,i,r){this._inputGeometries=e,this._length=(i.length!==void 0?i.length:Un.CIMGeometricEffectRadial.length)*r,this._angle=i.angle!==void 0?i.angle*Math.PI/180:Un.CIMGeometricEffectRadial.angle,this._lx=Math.cos(this._angle)*this._length,this._ly=Math.sin(this._angle)*this._length}next(){let e=this._inputGeometries.next();for(;e;){if(e.geometryType==="esriGeometryPoint"||e.geometryType==="esriGeometryMultipoint"){const i=Ji.createEmptyOptimizedCIM("esriGeometryPolyline");return e.nextPath()&&e.nextPoint()&&i.pushPath([[e.x,e.y],[e.x+this._lx,e.y+this._ly]]),i}if(e.geometryType==="esriGeometryPolygon"){const i=Gve(e);if(!i)return null;const r=Ji.createEmptyOptimizedCIM("esriGeometryPolyline");return r.pushPath([[i[0],i[1]],[i[0]+this._lx,i[1]+this._ly]]),r}e=this._inputGeometries.next()}return null}};var lp;let Xut=(lp=class{static local(){return lp.instance===null&&(lp.instance=new lp),lp.instance}execute(e,i,r){return new Jut(e,i,r)}},lp.instance=null,lp),Jut=class{constructor(e,i,r){this._inputGeometries=e,this._reverse=i.reverse===void 0||i.reverse}next(){let e=this._inputGeometries.next();for(;e;){if(!this._reverse)return e;if(e.geometryType==="esriGeometryPolyline")return Kut(e.clone());e=this._inputGeometries.next()}return null}};function Kut(t){for(;t.nextPath();)for(let e=0;e<t.pathSize/2;e++){t.seekInPath(e);const i=t.x,r=t.y;t.seekInPath(t.pathSize-e-1);const n=t.x,s=t.y;t.x=i,t.y=r,t.seekInPath(e),t.x=n,t.y=s}return t.reset(),t}var cp;let Qut=(cp=class{static local(){return cp.instance===null&&(cp.instance=new cp),cp.instance}execute(e,i,r){return new edt(e,i,r)}},cp.instance=null,cp),edt=class{constructor(e,i,r){this._inputGeometries=e,this._rotateAngle=i.angle!==void 0?i.angle*Math.PI/180:0}next(){let e=this._inputGeometries.next();for(;e;){if(this._rotateAngle===0||e.geometryType==="esriGeometryPoint")return e;if(e.totalSize>0){const i=ZM(e),r=(i[2]+i[0])/2,n=(i[3]+i[1])/2;return e.reset(),this._rotate(e.clone(),r,n)}e=this._inputGeometries.next()}return null}_rotate(e,i,r){const n=Math.cos(this._rotateAngle),s=Math.sin(this._rotateAngle);for(;e.nextPath();)for(;e.nextPoint();){const a=e.x-i,o=e.y-r;e.x=i+a*n-o*s,e.y=r+a*s+o*n}return e.reset(),e}};var up;let tdt=(up=class{static local(){return up.instance===null&&(up.instance=new up),up.instance}execute(e,i,r){return new idt(e,i,r)}},up.instance=null,up),idt=class{constructor(e,i,r){this._inputGeometries=e,this._xFactor=i.xScaleFactor!==void 0?i.xScaleFactor:1.15,this._yFactor=i.yScaleFactor!==void 0?i.yScaleFactor:1.15}next(){const e=this._inputGeometries.next();if(e){if(this._xFactor===1&&this._yFactor===1||e.geometryType==="esriGeometryPoint")return e;if(e.totalSize>0){const i=ZM(e),r=(i[2]+i[0])/2,n=(i[3]+i[1])/2;return e.reset(),this._scaleCursor(e.clone(),r,n)}}return null}_scaleCursor(e,i,r){for(;e.nextPath();)for(;e.nextPoint();)e.x=i+(e.x-i)*this._xFactor,e.y=r+(e.y-r)*this._yFactor;return e.reset(),e}},kq=class{constructor(){this._polyline=[]}beginPath(e){this._polyline.push([e])}lineTo(e){if(this._polyline.length===0)throw new Error("No path started. Call beginPath first.");this._polyline[this._polyline.length-1].push(e)}getPointCount(){return this._polyline.reduce((e,i)=>e+i.length,0)}addSegment(e,i,r){r&&this.beginPath(e),this.lineTo(i)}getXY(e){let i=0;for(const r of this._polyline){if(e<i+r.length)return r[e-i];i+=r.length}return null}getGeometry(){return this._polyline}};var dp;let rdt=(dp=class{static local(){return dp.instance===null&&(dp.instance=new dp),dp.instance}execute(e,i,r){return new ndt(e,i,r)}},dp.instance=null,dp),ndt=class extends QT{constructor(e,i,r){super(e,!1,!0),this._suppress=i.suppress!==void 0&&i.suppress,this._invert=i.invert!==void 0&&i.invert}processPath(e){if(e.totalSize<=0)return null;if(!this._suppress){const y=Ji.createEmptyOptimizedCIM("esriGeometryPolygon",!1,!1,e.yFactor);for(e.seekPathEnd();e.nextPoint();)y.pushXY(e.x,e.y);return y}const i=[],r=new Array(e.pathSize);let n=0;for(e.seekPathStart();e.nextPoint();)r[n++]=e.getControlPoint(),i.push([e.x,e.y]);let s=!0,a=!0,o=!1,l=!this._invert;n=0;const c=new kq;let h=i[0];for(;n<i.length;){const y=i[n+1],b=r[n],_=r[n+1];n++,a&&(l=b||_?this._invert:!this._invert,a=!1),l?(c.addSegment(h,y,s),s=!1):o=!0,h=y,_&&(l?(l=!1,s=!0):l=!0)}const f=c.getGeometry();if(f.length===0)return null;if(!o&&i[0][0]===i[i.length-1][0]&&i[0][1]===i[i.length-1][1]){const y=f[f.length-1];return y[0][0]===y[y.length-1][0]&&y[0][1]===y[y.length-1][1]||y.push([y[0][0],y[0][1]]),Ji.fromJSONCIM({paths:f})}const g=f[f.length-1];return c.getPointCount()>1&&e.geometryType==="esriGeometryPolygon"&&g[0][0]===g[g.length-1][0]&&g[0][1]===g[g.length-1][1]&&f.length>1&&(f[f.length-1].push(...f[0]),f.splice(0,1)),Ji.fromJSONCIM({paths:f})}};const O2=()=>$e.getLogger("esri.symbols.cim.effects.EffectTaperedPolygon");var hp;let sdt=(hp=class{static local(){return hp.instance===null&&(hp.instance=new hp),hp.instance}execute(e,i,r){return new adt(e,i,r)}},hp.instance=null,hp),adt=class extends QT{constructor(e,i,r){super(e,!1,!0),this._slopeS=0,this._slopeC=1,this._lastTangent1=new Ci(NaN,NaN),this._lastWidth=0,this._geomUnitsPerPoint=r,this._halfFromWidth=Math.abs(i.fromWidth!==void 0?i.fromWidth:0)*r*.5,this._halfToWidth=Math.abs(i.toWidth!==void 0?i.toWidth:1)*r*.5,this._originalLength=(i.length!==void 0?i.length:0)*r,this._length=0}processPath(e){if(e.totalSize<=0)return null;if(this._halfFromWidth<=0&&this._halfToWidth<=0){const c=Ji.createEmptyOptimizedCIM("esriGeometryPolygon",!1,!1,e.yFactor);for(e.seekPathEnd();e.prevPoint();)c.pushXY(e.x,e.y);for(e.seekPathStart();e.nextPoint();)c.pushXY(e.x,e.y);return c}const i=e.getCurrentPath().asJSON(),r=wTe.module.execute(i,.25*this._geomUnitsPerPoint,{removeDegenerateParts:!0}),n=r==null?null:jn(r)?r.rings:ka(r)?r.paths:null;if(!n)return O2().error(new ee("mapview-bad-resource","Unable to process geometry")),null;const s=bTe.module.execute(r);if((this._originalLength===0||this._originalLength>s)&&s>0){this._length=s;const c=(this._halfToWidth-this._halfFromWidth)/this._length;if(Math.abs(c)<1){const h=c*c;this._slopeC=Math.sqrt(1/(1+h)),this._slopeS=Math.sqrt(h/(1+h)),c<0&&(this._slopeS=-this._slopeS)}else this._slopeC=this._slopeS=.7071}else this._length=this._originalLength,this._slopeC=1,this._slopeS=0;const a=[];for(const c of n){const h=new kq,f=new kq;let g=0;this._setFromOffset(c.slice(0,2),h,f);for(let _=0,S=3;S<=c.length;++_,++S)g=this._setOffset(c.slice(_,S),g,h,f);this._setToOffset(c.slice(-2),g,h,f);const[y]=h.getGeometry(),[b]=f.getGeometry();a.push([...y,...b.reverse()])}const o={rings:a,spatialReference:{wkid:at.WebMercator.wkid}},l=STe.module.execute(o);return Ji.fromJSONCIM(l)}_setFromOffset([[e,i],[r,n]],s,a){const o=this._halfFromWidth,l=new Ci(r-e,n-i).normalize().scale(o);s.beginPath([e-l.y,i+l.x]),a.beginPath([e+l.y,i-l.x])}_setToOffset([[e,i],[r,n]],s,a,o){let l;l=(s+=Math.sqrt((r-e)**2+(n-i)**2))>=this._length?this._halfToWidth:this._halfFromWidth+(this._halfToWidth-this._halfFromWidth)*s/this._length;const c=new Ci(r-e,n-i).normalize().scale(l);a.lineTo([r-c.y,n+c.x]),o.lineTo([r+c.y,n-c.x])}_setOffset([[e,i],[r,n],[s,a]],o,l,c){const h=Math.sqrt((r-e)**2+(n-i)**2);let f;f=o+h>=this._length?this._halfToWidth:this._halfFromWidth+(this._halfToWidth-this._halfFromWidth)*(o+h)/this._length,o+=h;const g=new Ci(r,n),y=new Ci(r-e,n-i).normalize(),b=new Ci(s-r,a-n).normalize(),_=Ci.sub(b,y),S=l.getPointCount(),$=c.getPointCount();y.leftPerpendicular(),b.leftPerpendicular();const C=y.x*b.x+y.y*b.y;if(C>.99){const I=Ci.add(y,b).scale(f/2),P=I.clone().rotate(this._slopeC,this._slopeS);l.lineTo([g.x+P.x,g.y+P.y]);const O=I.rotateReverse(this._slopeC,this._slopeS);c.lineTo([g.x-O.x,g.y-O.y])}else{const I=y.x*b.y-y.y*b.x;if(_.scale(1/I),I<0){_.scale(-f).rotateReverse(this._slopeC,this._slopeS);const Y=c.getXY($-1);Y||O2().error(new ee("mapview-bad-resource","Unable to process geometry, index out of scope"));const Q=Ci.add(g,_).sub(Ci.fromArray(Y));if(y.x*Q.y-y.y*Q.x>0){const ae=y.clone().scale(-f).rotateReverse(this._slopeC,this._slopeS),ce=b.clone().scale(-f).rotateReverse(this._slopeC,this._slopeS);c.lineTo([g.x+ae.x,g.y+ae.y]),c.lineTo([g.x,g.y]),c.lineTo([g.x+ce.x,g.y+ce.y])}else c.lineTo([g.x+_.x,g.y+_.y])}else{_.scale(f).rotate(this._slopeC,this._slopeS);const Y=l.getXY(S-1);Y||O2().error(new ee("mapview-bad-resource","Unable to process geometry, index out of scope"));const Q=Ci.add(g,_).sub(Ci.fromArray(Y));if(y.x*Q.y-y.y*Q.x>0){const ae=y.clone().scale(f).rotate(this._slopeC,this._slopeS),ce=b.clone().scale(f).rotate(this._slopeC,this._slopeS);l.lineTo([g.x+ae.x,g.y+ae.y]),l.lineTo([g.x,g.y]),l.lineTo([g.x+ce.x,g.y+ce.y])}else l.lineTo([g.x+_.x,g.y+_.y])}const P=Math.acos(C);let O=1;if(f>.25){const Y=2*Math.acos(1-.25/f);Y<P&&(O=Math.round(P/Y))}const N=Math.cos(P/O),R=Math.sin(P/O),G=y.clone();if(I<0){G.rotate(this._slopeC,this._slopeS);const Y=l.getXY(S-1);Y||O2().error(new ee("mapview-bad-resource","Unable to process geometry, index out of scope"));const Q=Ci.add(g,G.clone().scale(this._lastWidth)),ae=Ci.sub(Q,Ci.fromArray(Y)),ce=y.x*ae.y-y.y*ae.x;if(!isNaN(this._lastTangent1.x)&&!isNaN(this._lastTangent1.y)&&ce>0){const ne=new Ci(e,i),K=this._lastTangent1.clone().scale(this._lastWidth);K.rotate(this._slopeC,this._slopeS);const le=y.clone().scale(this._lastWidth);le.rotate(this._slopeC,this._slopeS),l.lineTo([ne.x+K.x,ne.y+K.y]),l.lineTo([ne.x,ne.y]),l.lineTo([ne.x+le.x,ne.y+le.y])}}else{G.scale(-1).rotateReverse(this._slopeC,this._slopeS);const Y=c.getXY($-1);Y||O2().error(new ee("mapview-bad-resource","Unable to process geometry, index out of scope"));const Q=Ci.add(g,G.clone().scale(this._lastWidth)),ae=Ci.sub(Q,Ci.fromArray(Y)),ce=y.x*ae.y-y.y*ae.x;if(!isNaN(this._lastTangent1.x)&&!isNaN(this._lastTangent1.y)&&ce>0){const ne=new Ci(e,i),K=this._lastTangent1.clone().scale(-this._lastWidth);K.rotateReverse(this._slopeC,this._slopeS);const le=y.clone().scale(-this._lastWidth);le.rotateReverse(this._slopeC,this._slopeS),c.lineTo([ne.x+K.x,ne.y+K.y]),c.lineTo([ne.x,ne.y]),c.lineTo([ne.x+le.x,ne.y+le.y])}}G.scale(f);for(let Y=0;Y<=O;Y++)I<0?(l.lineTo([g.x+G.x,g.y+G.y]),G.rotateReverse(N,R)):(c.lineTo([g.x+G.x,g.y+G.y]),G.rotate(N,R))}return this._lastTangent1.setCoords(y.x,y.y),this._lastWidth=f,o}};var pp;let odt=(pp=class{static local(){return pp.instance===null&&(pp.instance=new pp),pp.instance}execute(e,i,r){return new ldt(e,i,r)}},pp.instance=null,pp),ldt=class{constructor(e,i,r){this._inputGeometries=e,this._height=(i.amplitude!==void 0?i.amplitude:2)*r,this._period=(i.period!==void 0?i.period:3)*r,this._style=i.waveform,this._height<=0&&(this._height=Math.abs(this._height)),this._period<=0&&(this._period=Math.abs(this._period)),this._pattern=new nj,this._pattern.addValue(this._period),this._pattern.addValue(this._period),this._walker=new sj,this._walker.updateTolerance(r)}next(){let e=this._inputGeometries.next();for(;e;){if(this._height===0||this._period===0)return e;const i=this._processGeom(e);if(i)return i;e=this._inputGeometries.next()}return null}_processGeom(e){const i=Ji.createEmptyOptimizedCIM(e.geometryType);for(;e.nextPath();){i.startPath();const r=e.pathLength();if(this._walker.init(e,this._pattern))switch(this._style){case"Sinus":default:this._constructCurve(i,r,!1);break;case"Square":this._constructSquare(i,r);break;case"Triangle":this._constructTriangle(i,r);break;case"Random":this._constructCurve(i,r,!0)}else for(;e.nextPoint();)i.pushXY(e.x,e.y)}return i}_constructCurve(e,i,r){let n=Math.round(i/this._period);n===0&&(n=1);const s=n*16+1,a=i/n,o=this._period/16,l=1/s,c=2*Math.PI*i/a,h=2*Math.PI*Math.random(),f=2*Math.PI*Math.random(),g=2*Math.PI*Math.random(),y=.75-Math.random()/2,b=.75-Math.random()/2,_=new gm;this._walker.curPointAndAngle(_),e.pushPoint(_.pt);let S=0;for(;;){if(!this._walker.nextPointAndAngle(o,_)){e.pushPoint(this._walker.getPathEnd());break}{const $=S;let C;if(S+=l,r){const I=this._height/2*(1+.3*Math.sin(y*c*$+h));C=I*Math.sin(c*$+f),C+=I*Math.sin(b*c*$+g),C/=2}else C=.5*this._height*Math.sin(.5*c*$);e.pushXY(_.pt[0]-C*_.sa,_.pt[1]+C*_.ca)}}}_constructSquare(e,i){Math.round(i/this._period);let r=!0;for(;;){let n=!1;if(this._walker.curPositionIsValid()){const s=new gm;this._walker.curPointAndAngle(s);const a=new gm;if(this._walker.nextPointAndAngle(this._period,a)){const o=new gm;this._walker.nextPointAndAngle(this._period,o)&&(r?(e.pushPoint(s.pt),r=!1):e.pushPoint(s.pt),e.pushXY(s.pt[0]-this._height/2*s.sa,s.pt[1]+this._height/2*s.ca),e.pushXY(a.pt[0]-this._height/2*a.sa,a.pt[1]+this._height/2*a.ca),e.pushXY(a.pt[0]+this._height/2*a.sa,a.pt[1]-this._height/2*a.ca),e.pushXY(o.pt[0]+this._height/2*o.sa,o.pt[1]-this._height/2*o.ca),n=!0)}}if(!n){e.pushPoint(this._walker.getPathEnd());break}}}_constructTriangle(e,i){Math.round(i/this._period);let r=!0;for(;;){let n=!1;if(this._walker.curPositionIsValid()){const s=new gm;this._walker.curPointAndAngle(s);const a=new gm;if(this._walker.nextPointAndAngle(this._period/2,a)){const o=new gm;this._walker.nextPointAndAngle(this._period,o)&&(this._walker.nextPosition(this._period/2)&&(r?(e.pushPoint(s.pt),r=!1):e.pushPoint(s.pt),e.pushXY(a.pt[0]-this._height/2*a.sa,a.pt[1]+this._height/2*a.ca),e.pushXY(o.pt[0]+this._height/2*o.sa,o.pt[1]-this._height/2*o.ca)),n=!0)}}if(!n){e.pushPoint(this._walker.getPathEnd());break}}}};var fp;let cdt=(fp=class{static local(){return fp.instance===null&&(fp.instance=new fp),fp.instance}execute(e,i,r){return new udt(e,i,r)}},fp.instance=null,fp),udt=class extends gA{constructor(e,i,r){super(e),this._geometryWalker=new sj,this._geometryWalker.updateTolerance(r),this._angleToLine=i.angleToLine??!0,this._offset=(i.offset?i.offset:0)*r,this._originalEndings=i.endings,this._offsetAtEnd=(i.customEndingOffset?i.customEndingOffset:0)*r,this._position=-(i.offsetAlongLine?i.offsetAlongLine:0)*r,this._pattern=new nj,this._pattern.init(i.placementTemplate,!1),this._pattern.scale(r),this._endings=this._originalEndings}processPath(e){if(this._pattern.isEmpty())return null;let i;if(this.iteratePath)i=this._pattern.nextValue();else{this._originalEndings==="WithFullGap"&&this.isClosed?this._endings="WithMarkers":this._endings=this._originalEndings,this._pattern.extPtGap=0;let n,s=!0;switch(this._endings){case"NoConstraint":n=-this._position,n=this._adjustPosition(n),s=!1;break;case"WithHalfGap":default:n=-this._pattern.lastValue()/2;break;case"WithFullGap":n=-this._pattern.lastValue(),this._pattern.extPtGap=this._pattern.lastValue();break;case"WithMarkers":n=0;break;case"Custom":n=-this._position,n=this._adjustPosition(n),this._pattern.extPtGap=.5*this._offsetAtEnd}if(!this._geometryWalker.init(e,this._pattern,s))return null;this._pattern.reset();let a=0;for(;n>a;)n-=a,a=this._pattern.nextValue();a-=n,i=a,this.iteratePath=!0}const r=new gm;return this._geometryWalker.nextPointAndAngle(i,r)?this._endings==="WithFullGap"&&this._geometryWalker.isPathEnd()?(this.iteratePath=!1,null):this._endings==="WithMarkers"&&this._geometryWalker.isPathEnd()&&(this.iteratePath=!1,this.isClosed)?null:(this.internalPlacement.setTranslate(r.pt[0]-this._offset*r.sa,r.pt[1]+this._offset*r.ca),this._angleToLine&&this.internalPlacement.setRotateCS(r.ca,r.sa),this.internalPlacement):(this.iteratePath=!1,null)}_adjustPosition(e){let i=e/this._pattern.length();return i-=Math.floor(i),i*this._pattern.length()}};var mp;let ddt=(mp=class{static local(){return mp.instance===null&&(mp.instance=new mp),mp.instance}execute(e,i,r){return new hdt(e,i,r)}},mp.instance=null,mp),hdt=class extends gA{constructor(e,i,r){super(e,!1,!0),this._curveHelper=new lg,this._placePerPart=i.placePerPart??!1,this._angleToLine=i.angleToLine===void 0||i.angleToLine,this._offset=i.offset!==void 0?i.offset*r:0,this._type=i.extremityPlacement,this._position=i.offsetAlongLine!==void 0?i.offsetAlongLine*r:0,this._beginProcessed=!1}processMultiPath(e){return this._placePerPart?super.processMultiPath(e):this.processPath(e)}processPath(e){let i;switch(this._type){case"Both":default:this._beginProcessed?(i=this._atExtremities(e,this._position,!1),this._beginProcessed=!1,this.iterateMultiPath=!1,this.iteratePath=!1):(i=this._atExtremities(e,this._position,!0),this._beginProcessed=!0,this.iterateMultiPath=!0,this.iteratePath=!0);break;case"JustBegin":i=this._atExtremities(e,this._position,!0);break;case"JustEnd":i=this._atExtremities(e,this._position,!1);case"None":}return i}_atExtremities(e,i,r){if(this._placePerPart||(r?e.seekPath(0):e.seekPath(e.totalSize-1)),r||e.seekPathEnd(),r?e.nextPoint():e.prevPoint()){let n=0,[s,a]=[0,0],[o,l]=[e.x,e.y];const c=[0,0];for(;r?e.nextPoint():e.prevPoint();){s=o,a=l,o=e.x,l=e.y;const h=this._curveHelper.getLength(s,a,o,l);if(n+h>i){const f=(i-n)/h,[g,y]=this._curveHelper.getAngleCS(c,s,a,o,l,f),b=this._curveHelper.getCoord2D(s,a,o,l,f);return this.internalPlacement.setTranslate(b[0]-this._offset*y,b[1]+this._offset*g),this._angleToLine&&this.internalPlacement.setRotateCS(-g,-y),this.internalPlacement}n+=h}}return null}};var gp;let pdt=(gp=class{static local(){return gp.instance===null&&(gp.instance=new gp),gp.instance}execute(e,i,r){return new fdt(e,i,r)}},gp.instance=null,gp),fdt=class extends gA{constructor(e,i,r){super(e),this._walker=new sj,this._walker.updateTolerance(r),this._angleToLine=i.angleToLine===void 0||i.angleToLine,this._offset=i.offset!==void 0?i.offset*r:0,this._beginGap=i.beginPosition!==void 0?i.beginPosition*r:0,this._endGap=i.endPosition!==void 0?i.endPosition*r:0,this._flipFirst=i.flipFirst===void 0||i.flipFirst,this._pattern=new nj,this._pattern.init(i.positionArray,!1,!1),this._subPathLen=0,this._posCount=this._pattern.size(),this._isFirst=!0,this._prevPos=0}processPath(e){if(this._pattern.isEmpty())return null;let i;if(this.iteratePath){const o=this._pattern.nextValue()*this._subPathLen,l=this._beginGap+o;i=l-this._prevPos,this._prevPos=l}else{if(this._posCount=this._pattern.size(),this._isFirst=!0,this._prevPos=0,this._subPathLen=e.pathLength()-this._beginGap-this._endGap,this._subPathLen<0)return this.iteratePath=!1,null;if(!this._walker.init(e,this._pattern,!1))return null;this._pattern.reset();const o=this._pattern.nextValue()*this._subPathLen,l=this._beginGap+o;i=l-this._prevPos,this._prevPos=l,this.iteratePath=!0}const r=new gm;if(!this._walker.nextPointAndAngle(i,r,1))return this.iteratePath=!1,null;this.internalPlacement.setTranslate(r.pt[0]-this._offset*r.sa,r.pt[1]+this._offset*r.ca);const n=this._isFirst&&this._flipFirst;let s,a;return this._angleToLine?(s=r.ca,a=r.sa):(s=1,a=0),n&&(s=-s,a=-a),this.internalPlacement.setRotateCS(s,a),this._isFirst=!1,this._posCount--,this._posCount===0&&(this.iteratePath=!1),this.internalPlacement}};const sy=512,mdt=10,lh=24,Hz=1e-6;var yp;let gdt=(yp=class{static local(){return yp.instance===null&&(yp.instance=new yp),yp.instance}execute(e,i,r,n){return new ydt(e,i,r,n)}},yp.instance=null,yp),ydt=class v0{constructor(e,i,r,n){if(this._xMin=0,this._xMax=0,this._yMin=0,this._yMax=0,this._currentX=0,this._currentY=0,this._accelerationMap=null,this._testInsidePolygon=!1,this._verticalSubdivision=!0,this._stepX=Math.abs(i.stepX??16)*r,this._stepY=Math.abs(i.stepY??16)*r,this._stepX=Math.round(128*this._stepX)/128,this._stepY=Math.round(128*this._stepY)/128,this._stepX!==0&&this._stepY!==0){if(this._gridType=i.gridType??"Fixed",this._gridType==="Random"){const s=i.seed??13,a=1;this._randomLCG=new LW(s*a),this._randomness=(i.randomness??100)/100,this._gridAngle=0,this._shiftOddRows=!1,this._cosAngle=1,this._sinAngle=0,this._offsetX=0,this._offsetY=0,this._buildRandomValues()}else{if(this._randomness=0,this._gridAngle=i.gridAngle??0,this._shiftOddRows=i.shiftOddRows??!1,this._offsetX=(i.offsetX??0)*r,this._offsetY=(i.offsetY??0)*r,this._cosAngle=Math.cos(this._gridAngle/180*Math.PI),this._sinAngle=-Math.sin(this._gridAngle/180*Math.PI),this._stepX)if(this._offsetX<0)for(;this._offsetX<-.5*this._stepX;)this._offsetX+=this._stepX;else for(;this._offsetX>=.5*this._stepX;)this._offsetX-=this._stepX;if(this._stepY)if(this._offsetY<0)for(;this._offsetY<-.5*this._stepY;)this._offsetY+=this._stepY;else for(;this._offsetY>=.5*this._stepY;)this._offsetY-=this._stepY}if(this._graphicOriginX=0,this._graphicOriginY=0,n!=null){const[s,a,o,l]=n.split("/"),c=parseFloat(s),h=parseFloat(a),f=parseFloat(o),g=parseFloat(l);this._graphicOriginX=-(g*2**c+f)*sy,this._graphicOriginY=h*sy,this._testInsidePolygon=!0}this._internalPlacement=new KT,this._calculateMinMax(e),this._geometryCursor=e}}next(){return this._geometryCursor?this._nextInside():null}_buildRandomValues(){if(!v0._randValues){v0._randValues=[];for(let e=0;e<lh;e++)for(let i=0;i<lh;i++)v0._randValues.push(this._randomLCG.getFloat()),v0._randValues.push(this._randomLCG.getFloat())}}_calculateMinMax(e){let i,r,n,s,a,o,l,c,h,f,g,y,b,_;this._xMin=0,this._xMax=0,this._yMin=0,this._yMax=0,l=c=b=g=Number.MAX_VALUE,h=f=_=y=-Number.MAX_VALUE;const S=this._cosAngle!==1;for(e.reset();e.nextPath();)for(;e.nextPoint();)o=e.x,a=e.y,i=o-this._graphicOriginX-this._offsetX,r=a-this._graphicOriginY-this._offsetY,S?(n=this._cosAngle*i-this._sinAngle*r,s=this._sinAngle*i+this._cosAngle*r):(n=i,s=r),l=Math.min(l,n),h=Math.max(h,n),c=Math.min(c,s),f=Math.max(f,s),g=Math.min(g,a),y=Math.max(y,a),b=Math.min(b,o),_=Math.max(_,o);g=g!==Number.MAX_VALUE?g:-sy-this._stepY,y=y!==-Number.MAX_VALUE?y:this._stepY,b=b!==Number.MAX_VALUE?b:-this._stepX,_=_!==-Number.MAX_VALUE?_:sy+this._stepX;const $=y-g,C=_-b;if(this._verticalSubdivision=$>=C,this._polygonMin=this._verticalSubdivision?g:b,this._testInsidePolygon){let I=0-this._graphicOriginX-this._offsetX-this._stepX,P=sy-this._graphicOriginX-this._offsetX+this._stepX,O=-sy-this._graphicOriginY-this._offsetY-this._stepY,N=0-this._graphicOriginY-this._offsetY+this._stepY;if(S){const R=[[I,O],[I,N],[P,O],[P,N]];I=O=Number.MAX_VALUE,P=N=-Number.MAX_VALUE;for(const G of R){const Y=this._cosAngle*G[0]-this._sinAngle*G[1],Q=this._sinAngle*G[0]+this._cosAngle*G[1];I=Math.min(I,Y),P=Math.max(P,Y),O=Math.min(O,Q),N=Math.max(N,Q)}}l=l!==Number.MAX_VALUE?Math.max(l,I):I,c=c!==Number.MAX_VALUE?Math.max(c,O):O,h=h!==-Number.MAX_VALUE?Math.min(h,P):P,f=f!==-Number.MAX_VALUE?Math.min(f,N):N}this._xMin=Math.round(l/this._stepX),this._xMax=Math.round(h/this._stepX),this._yMin=Math.round(c/this._stepY),this._yMax=Math.round(f/this._stepY),this._currentX=this._xMax+1,this._currentY=this._yMin-1,this._buildAccelerationMap(e,b,_,g,y)}_buildAccelerationMap(e,i,r,n,s){e.reset();const a=new Map,o=this._verticalSubdivision,l=o?s-n:r-i;let c=Math.ceil(l/mdt);if(c<=1)return;const h=Math.floor(l/c);let f,g,y,b,_,S,$,C,I,P,O;for(c++,this._delta=h,o?(I=-sy-2*this._stepY,P=2*this._stepY,O=n):(I=-2*this._stepX,P=sy+2*this._stepX,O=i);e.nextPath();)if(!(e.pathSize<2)&&e.nextPoint())for(f=e.x,g=e.y;e.nextPoint();f=y,g=b){if(y=e.x,b=e.y,o){if(g===b||g<I&&b<I||g>P&&b>P)continue;_=Math.min(g,b),S=Math.max(g,b)}else{if(f===y||f<I&&y<I||f>P&&y>P)continue;_=Math.min(f,y),S=Math.max(f,y)}for(;_<S;)$=Math.floor((_-O)/h),Oce($,f,g,y,b,a),_+=h;C=Math.floor((S-O)/h),C>$&&Oce(C,f,g,y,b,a)}this._accelerationMap=a}_nextInside(){for(;;){if(this._currentX>this._xMax){if(this._currentY++,this._currentY>this._yMax)return null;this._currentX=this._xMin,this._shiftOddRows&&this._currentY%2&&this._currentX--}let e=this._currentX*this._stepX+this._offsetX;this._shiftOddRows&&this._currentY%2&&(e+=.5*this._stepX);const i=this._currentY*this._stepY+this._offsetY;let r,n;if(this._currentX++,this._gridType==="Random"){const s=(this._currentX%lh+lh)%lh,a=(this._currentY%lh+lh)%lh;r=this._graphicOriginX+e+this._stepX*this._randomness*(.5-v0._randValues[a*lh+s])*2/3,n=this._graphicOriginY+i+this._stepY*this._randomness*(.5-v0._randValues[a*lh+s+1])*2/3}else r=this._graphicOriginX+this._cosAngle*e+this._sinAngle*i,n=this._graphicOriginY-this._sinAngle*e+this._cosAngle*i;if(!this._testInsidePolygon||this._isInsidePolygon(r,n,this._geometryCursor))return this._internalPlacement.setTranslate(r,n),this._internalPlacement}}_isInsidePolygon(e,i,r){if(this._accelerationMap==null)return vdt(e,i,r);e+=Hz,i+=Hz;const n=this._verticalSubdivision,s=n?i:e,a=Math.floor((s-this._polygonMin)/this._delta),o=this._accelerationMap.get(a);if(!o)return!1;let l,c,h,f=0;for(const g of o){if(l=g[0],c=g[1],n){if(l[1]>i==c[1]>i)continue;h=(c[0]-l[0])*(i-l[1])-(c[1]-l[1])*(e-l[0])}else{if(l[0]>e==c[0]>e)continue;h=(c[1]-l[1])*(e-l[0])-(c[0]-l[0])*(i-l[1])}h>0?f++:f--}return f!==0}};function vdt(t,e,i){let r,n,s,a,o=0;for(t+=Hz,e+=Hz,i.reset();i.nextPath();)if(i.nextPoint())for(r=i.x,n=i.y;i.nextPoint();r=s,n=a)s=i.x,a=i.y,n>e!=a>e&&((s-r)*(e-n)-(a-n)*(t-r)>0?o++:o--);return o!==0}function Oce(t,e,i,r,n,s){let a=s.get(t);a||(a=[],s.set(t,a)),a.push([[e,i],[r,n]])}const bdt=.001;var vp;let wdt=(vp=class{static local(){return vp.instance===null&&(vp.instance=new vp),vp.instance}execute(e,i,r){return new _dt(e,i,r)}},vp.instance=null,vp),_dt=class extends gA{constructor(e,i,r){super(e),this._curveHelper=new lg,this._angleToLine=i.angleToLine===void 0||i.angleToLine,this._offset=i.offset!==void 0?i.offset*r:0,this._relativeTo=i.relativeTo,this._position=i.startPointOffset!==void 0?i.startPointOffset*r:0,this._epsilon=bdt*r}processPath(e){const i=this._position;if(this._relativeTo==="SegmentMidpoint"){if(this.iteratePath||(this.iteratePath=!0),e.nextPoint()){let[n,s]=[e.x,e.y],[a,o]=[0,0];const l=[0,0];for(;e.nextPoint();){a=e.x,o=e.y;const c=this._curveHelper.getLength(n,s,a,o);if(c<this._epsilon){n=a,s=o;continue}const h=.5+this._position/c,[f,g]=this._curveHelper.getAngleCS(l,n,s,a,o,h),y=this._curveHelper.getCoord2D(n,s,a,o,h);return this.internalPlacement.setTranslate(y[0]-this._offset*g,y[1]+this._offset*f),this._angleToLine&&this.internalPlacement.setRotateCS(f,g),this.internalPlacement}}return this.iteratePath=!1,null}const r=this._relativeTo==="LineEnd";return this.onLine(e,i,r)}onLine(e,i,r){let n,s=!1;switch(this._relativeTo){case"LineMiddle":default:e.seekPathStart(),n=e.pathLength()/2+i;break;case"LineBeginning":n=i;break;case"LineEnd":n=i,s=!0}r?e.seekPathEnd():e.seekPathStart();let a=0;if(r?e.prevPoint():e.nextPoint()){let[o,l]=[e.x,e.y],[c,h]=[0,0];const f=[0,0];for(;r?e.prevPoint():e.nextPoint();){c=e.x,h=e.y;const g=this._curveHelper.getLength(o,l,c,h);if(a+g>n){const y=(n-a)/g,[b,_]=this._curveHelper.getAngleCS(f,o,l,c,h,y),S=this._curveHelper.getCoord2D(o,l,c,h,y),$=s?-this._offset:this._offset;return this.internalPlacement.setTranslate(S[0]-$*_,S[1]+$*b),this._angleToLine&&(s?this.internalPlacement.setRotateCS(-b,-_):this.internalPlacement.setRotateCS(b,_)),this.internalPlacement}o=c,l=h,a+=g}}return null}};const xdt=1e-15;var bp;let Sdt=(bp=class{static local(){return bp.instance===null&&(bp.instance=new bp),bp.instance}execute(e,i,r){return new $dt(e,i,r)}},bp.instance=null,bp),$dt=class extends gA{constructor(e,i,r){super(e),this._curveHelper=new lg,this._angleToLine=i.angleToLine===void 0||i.angleToLine,this._offset=i.offset!==void 0?i.offset*r:0,this._endPoints=i.placeOnEndPoints===void 0||i.placeOnEndPoints,this._controlPoints=i.placeOnControlPoints===void 0||i.placeOnControlPoints,this._regularVertices=i.placeOnRegularVertices===void 0||i.placeOnRegularVertices,this._tags=[],this._tagIterator=0}processPath(e){if(this.iteratePath||(this._preparePath(e),this.iteratePath=!0),this._tagIterator>=this._tags.length)return this._tags.length=0,this._tagIterator=0,this.iteratePath=!1,null;const i=this._tags[this._tagIterator];this._angleToLine&&this.internalPlacement.setRotate(i[2]);let r=i[0],n=i[1];if(this._offset!==0){const s=Math.cos(i[2]),a=Math.sin(i[2]);r-=this._offset*a,n+=this._offset*s}return this.internalPlacement.setTranslate(r,n),this._tagIterator++,this.internalPlacement}_preparePath(e){this._tags.length=0,this._tagIterator=0,e.seekPathStart();const i=e.isClosed();let r=0,n=!1,s=0,a=0;if(e.seekPathStart(),e.nextPoint()){let o=e.x,l=e.y,c=e.getControlPoint(),h=!0,f=e.nextPoint();for(;f;){const g=e.x,y=e.y,b=e.getControlPoint();(this._angleToLine||this._offset!==0)&&(s=this._curveHelper.getAngle(o,l,g,y,0)),h?(h=!1,i?(r=s,n=c):(this._endPoints||this._controlPoints&&c)&&this._tags.push([o,l,s])):c?this._controlPoints&&this._tags.push([o,l,fL(a,s)]):this._regularVertices&&this._tags.push([o,l,fL(a,s)]),(this._angleToLine||this._offset!==0)&&(a=this._curveHelper.getAngle(o,l,g,y,1)),f=e.nextPoint(),f||(i?b||n?this._controlPoints&&this._tags.push([g,y,fL(a,r)]):this._regularVertices&&this._tags.push([g,y,fL(a,r)]):(this._endPoints||this._controlPoints&&b)&&this._tags.push([g,y,a])),o=g,l=y,c=b}}this._tagIterator=0}};function fL(t,e){const i=Math.PI;for(;Math.abs(e-t)>i+2*xdt;)e-t>i?e-=2*i:e+=2*i;return(t+e)/2}const Tdt=100*222045e-21;function kdt(t){if(t.totalSize===0)return null;const e=ZM(t);if(!e)return null;const i=4*(Math.abs(e[0])+Math.abs(e[2])+Math.abs(e[1])+Math.abs(e[3])+1)*Tdt;let r=0,n=0;t.reset();for(let Y=0;t.nextPath();Y++){const Q=t.getCurrentRingArea();Q>n&&(n=Q,r=Y)}if(t.seekPath(r),t.pathSize===0)return null;t.seekPathStart();const s=Cve(t);if(Math.abs(n)<=2*i*i)return[(s[0]+s[2])/2,(s[1]+s[3])/2];t.seekPathStart();const a=q4e(t,tn());if(a===null)return null;if(t.totalPoints<4)return a;const o=[[NaN,NaN],[NaN,NaN],[NaN,NaN],[NaN,NaN]],l=[NaN,NaN,NaN,NaN],c=[NaN,NaN,NaN,NaN];let h=!1,f=L2(a,t,!0);f.distance===0&&(h=!0,o[0][0]=a[0],o[0][1]=a[1],f=L2(a,t,!1)),l[0]=f.distance,c[0]=0;const g=[NaN,NaN];let y=!1,b=.25,_=-1,S=NaN;do if(S=NaN,o[1]=JB(t,KB(s[0],s[2],b),i,e),isNaN(o[1][0])||isNaN(o[1][1])||(f=L2(o[1],t,!1),S=f.distance),!isNaN(S)&&S>i&&zD(o[1],t))y=!0,l[1]=S,c[1]=b0(o[1],a);else if(!isNaN(S)&&S>_&&(_=S,g[0]=o[1][0],g[1]=o[1][1]),b-=.01,b<.1){if(!(_>=0))break;y=!0,l[1]=_,o[1][0]=g[0],o[1][1]=g[1],c[1]=b0(o[1],a)}while(!y);y=!1,b=.5,_=-1;let $=.01,C=1;do if(S=NaN,o[2]=JB(t,KB(s[0],s[2],b),i,e),isNaN(o[2][0])||isNaN(o[2][1])||(f=L2(o[2],t,!1),S=f.distance),!isNaN(S)&&S>i&&zD(o[2],t))y=!0,l[2]=S,c[2]=b0(o[2],a);else if(!isNaN(S)&&S>_)_=S,g[0]=o[2][0],g[1]=o[2][1];else if(S>_&&(_=S,g[0]=o[2][0],g[1]=o[2][1]),b=.5+$*C,$+=.01,C*=-1,b<.3||b>.7){if(!(_>=0))break;y=!0,l[2]=_,o[2][0]=g[0],o[2][1]=g[1],c[2]=b0(o[2],a)}while(!y);y=!1,b=.75,_=-1;do if(S=NaN,o[3]=JB(t,KB(s[0],s[2],b),i,e),isNaN(o[3][0])||isNaN(o[3][1])||(f=L2(o[3],t,!1),S=f.distance),!isNaN(S)&&S>i&&zD(o[3],t))y=!0,l[3]=S,c[3]=b0(o[3],a);else if(S>_&&(_=S,g[0]=o[3][0],g[1]=o[3][1]),b+=.01,b>.9){if(!(_>=0))break;y=!0,l[3]=_,o[3][0]=g[0],o[3][1]=g[1],c[3]=b0(o[3],a)}while(!y);const I=[0,1,2,3],P=h?0:1;let O;for(let Y=P;Y<4;Y++)for(let Q=P;Q<3;Q++){const ae=c[Q],ce=c[Q+1];Idt(ae,ce)>0&&(O=I[Q],I[Q]=I[Q+1],I[Q+1]=O,c[Q]=ce,c[Q+1]=ae)}let N=P,R=0,G=0;for(let Y=P;Y<4;Y++){switch(Y){case 0:G=2*l[I[Y]];break;case 1:G=1.66666666*l[I[Y]];break;case 2:G=1.33333333*l[I[Y]];break;case 3:G=l[I[Y]]}G>R&&(R=G,N=I[Y])}return o[N]}function zD(t,e){let i,r,n,s,a=0;for(e.reset();e.nextPath()&&e.nextPoint();)for(i=e.x,r=e.y;e.nextPoint();i=n,r=s)n=e.x,s=e.y,r>t[1]!=s>t[1]&&((n-i)*(t[1]-r)-(s-r)*(t[0]-i)>0?a++:a--);return a!==0}function L2(t,e,i){if(i&&zD(t,e))return{coord:t,distance:0};let r=1/0,n=0,s=0,a=[0,0],o=[0,0];const l=[0,0];for(e.reset();e.nextPath()&&e.nextPoint();)if(!(e.pathSize<2))for(a[0]=e.x,a[1]=e.y;e.nextPoint();a=o){o=[e.x,e.y],Fve(l,t,a,o);const c=b0(t,l);c<r&&(r=c,n=l[0],s=l[1])}return{coord:[n,s],distance:Math.sqrt(r)}}function JB(t,e,i,r){const n=[e,0];let s=1/0,a=1/0,o=!1,l=!1;const c=[[e,r[1]-1],[e,r[3]+1]],h=[0,0],f=[0,0],g=[0,0],y=[[0,0],[0,0]],b=tn();for(t.reset();t.nextPath()&&t.nextPoint();)if(!(t.pathSize<2))for(y[0][0]=t.x,y[0][1]=t.y;t.nextPoint();y[0][0]=y[1][0],y[0][1]=y[1][1]){if(y[1][0]=t.x,y[1][1]=t.y,Edt(b,y)===null||(f[0]=c[0][0],f[1]=c[0][1],g[0]=c[1][0],g[1]=c[1][1],Cdt(b,f,g)===0)||!VR(c[0],c[1],y[0],y[1],h))continue;const _=h[1];s>a?_<s&&(s=_,o=!0):_<a&&(a=_,l=!0)}return o&&l?n[1]=(s+a)/2:n[0]=n[1]=NaN,n}function Edt(t,e){if(e.length<2)return null;t||(t=tn());const[i,r]=e[0],[n,s]=e[1];return t[0]=Math.min(i,n),t[1]=Math.min(r,s),t[2]=Math.max(i,n),t[3]=Math.max(r,s),t}const mL=1,gL=4,Lce=3,Dce=12;function Cdt(t,e,i){let r=ch(e,t),n=ch(i,t);const s=t[0],a=t[1],o=t[2],l=t[3];if(r&n)return 0;if(!(r|n))return 4;const c=(r?1:0)|(n?2:0);do{const h=i[0]-e[0],f=i[1]-e[1];if(h>f)r&Lce?(r&mL?(e[1]+=f*(s-e[0])/h,e[0]=s):(e[1]+=f*(o-e[0])/h,e[0]=o),r=ch(e,t)):n&Lce?(n&mL?(i[1]+=f*(s-i[0])/h,i[0]=s):(i[1]+=f*(o-i[0])/h,i[0]=o),n=ch(i,t)):r?(r&gL?(e[0]+=h*(a-e[1])/f,e[1]=a):(e[0]+=h*(l-e[1])/f,e[1]=l),r=ch(e,t)):(n&gL?(i[0]+=h*(a-i[1])/f,i[1]=a):(i[0]+=h*(l-i[1])/f,i[1]=l),n=ch(i,t));else if(r&Dce?(r&gL?(e[0]+=h*(a-e[1])/f,e[1]=a):(e[0]+=h*(l-e[1])/f,e[1]=l),r=ch(e,t)):n&Dce?(n&gL?(i[0]+=h*(a-i[1])/f,i[1]=a):(i[0]+=h*(l-i[1])/f,i[1]=l),n=ch(i,t)):r?(r&mL?(e[1]+=f*(s-e[0])/h,e[0]=s):(e[1]+=f*(o-e[0])/h,e[0]=o),r=ch(e,t)):(n&mL?(i[1]+=f*(s-i[0])/h,i[0]=s):(i[1]+=f*(o-i[0])/h,i[0]=o),n=ch(i,t)),r&n)return 0}while(r|n);return c}function ch(t,e){return(t[0]<e[0]?1:0)|(t[0]>e[2]?1:0)<<1|(t[1]<e[1]?1:0)<<2|(t[1]>e[3]?1:0)<<3}function KB(t,e,i){return t+(e-t)*i}function b0(t,e){return(t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])}function Idt(t,e){if(t<e)return-1;if(t>e)return 1;if(t===e)return 0;const i=isNaN(t),r=isNaN(e);return i<r?-1:i>r?1:0}var wp;let Mdt=(wp=class{static local(){return wp.instance===null&&(wp.instance=new wp),wp.instance}execute(e,i,r){return new Adt(e,i,r)}},wp.instance=null,wp),Adt=class{constructor(e,i,r){this._geometryCursor=e,this._offsetX=i.offsetX!==void 0?i.offsetX*r:0,this._offsetY=i.offsetY!==void 0?i.offsetY*r:0,this._method=i.method!==void 0?i.method:"OnPolygon",this._placementPerPart=i.placePerPart!==void 0&&i.placePerPart,this._internalPlacement=new KT}next(){const e=this._geometryCursor;if(!e)return null;if(!this._placementPerPart)return this._geometryCursor=null,this._polygonCenter(e);for(;e.nextPath();)if(!(e.getCurrentRingArea()<0))return this._polygonCenter(e.getCurrentPath());return this._geometryCursor=null,null}_polygonCenter(e){let i=!1;switch(this._method){case"CenterOfMass":{const r=X4e(e);r&&(this._internalPlacement.setTranslate(r[0]+this._offsetX,r[1]+this._offsetY),i=!0)}break;case"BoundingBoxCenter":{const r=ZM(e);r&&(this._internalPlacement.setTranslate((r[2]+r[0])/2+this._offsetX,(r[3]+r[1])/2+this._offsetY),i=!0)}break;default:{const r=kdt(e);r!==null&&(this._internalPlacement.setTranslate(r[0]+this._offsetX,r[1]+this._offsetY),i=!0)}}return i?this._internalPlacement:null}};function Pdt(t){if(!t)return null;switch(t.type){case"CIMGeometricEffectAddControlPoints":return but.local();case"CIMGeometricEffectArrow":return Sut.local();case"CIMGeometricEffectBuffer":return Tut.local();case"CIMGeometricEffectControlMeasureLine":return Eut.local();case"CIMGeometricEffectCut":return Iut.local();case"CIMGeometricEffectDashes":return Aut.local();case"CIMGeometricEffectDonut":return Out.local();case"CIMGeometricEffectJog":return jut.local();case"CIMGeometricEffectMove":return But.local();case"CIMGeometricEffectOffset":return Gut.local();case"CIMGeometricEffectRadial":return Yut.local();case"CIMGeometricEffectReverse":return Xut.local();case"CIMGeometricEffectRotate":return Qut.local();case"CIMGeometricEffectScale":return tdt.local();case"CIMGeometricEffectSuppress":return rdt.local();case"CIMGeometricEffectTaperedPolygon":return sdt.local();case"CIMGeometricEffectWave":return odt.local();case"CIMGeometricEffectEnclosingPolygon":return Dut.local()}return null}function Odt(t){if(!t)return null;switch(t.type){case"CIMMarkerPlacementAlongLineSameSize":return cdt.local();case"CIMMarkerPlacementAtExtremities":return ddt.local();case"CIMMarkerPlacementAtRatioPositions":return pdt.local();case"CIMMarkerPlacementInsidePolygon":return gdt.local();case"CIMMarkerPlacementOnLine":return wdt.local();case"CIMMarkerPlacementOnVertices":return Sdt.local();case"CIMMarkerPlacementPolygonCenter":return Mdt.local()}return null}function QB(t){const e=t.getFrame(0);if(e instanceof HTMLImageElement||e instanceof HTMLCanvasElement)return e;const i=document.createElement("canvas");i.width=t.width,i.height=t.height;const r=i.getContext("2d");return e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0),i}function Af(t,e=0){if(e===0)return t;const i=Math.cos(e),r=Math.sin(e),[n,s]=t;return[n*i+s*-r,n*r+s*i]}function ETe(t,e,i=0){const r=go(t,0,Rdt);for(let n=0;n<4;n++)e[i+n]=Math.floor(256*zdt(r*Ldt[n]))}function CTe(t,e=0){let i=0;for(let r=0;r<4;r++)i+=t[e+r]*Ddt[r];return i}const Ldt=[1,256,65536,16777216],Ddt=[1/256,1/65536,1/16777216,1/4294967296],Rdt=CTe(new Uint8ClampedArray([255,255,255,255]));CTe(new Uint8ClampedArray([255,255,255,0]));function zdt(t){return t-Math.floor(t)}const Fdt=15.5,eU=4,Ndt=64,a5t=1024,o5t={outlineWidth:.75,referenceWidth:.75,cap:Un.CIMSolidStroke.capstyle,join:Un.CIMSolidStroke.joinstyle,miterLimit:Un.CIMSolidStroke.miterlimit},Rce=()=>$e.getLogger("esri.symbols.cim.rasterizingUtils"),jdt=32,Vdt=t=>t==="vertical"||t==="horizontal"||t==="cross"||t==="esriSFSCross"||t==="esriSFSVertical"||t==="esriSFSHorizontal";function l5t(t,e,i){const r=e.style,n=ije(Math.ceil(i)),s=Vdt(r)?8*n:16*n,a=2*n;t.width=s,t.height=s;const o=t.getContext("2d");o.strokeStyle="#ffffff",o.lineWidth=n,o.beginPath(),r!=="vertical"&&r!=="cross"&&r!=="esriSFSCross"&&r!=="esriSFSVertical"||(o.moveTo(s/2,-a),o.lineTo(s/2,s+a)),r!=="horizontal"&&r!=="cross"&&r!=="esriSFSCross"&&r!=="esriSFSHorizontal"||(o.moveTo(-a,s/2),o.lineTo(s+a,s/2)),r!=="backward-diagonal"&&r!=="diagonal-cross"&&r!=="esriSFSDiagonalCross"&&r!=="esriSFSBackwardDiagonal"||(o.moveTo(-a,-a),o.lineTo(s+a,s+a),o.moveTo(s-a,-a),o.lineTo(s+a,a),o.moveTo(-a,s-a),o.lineTo(a,s+a)),r!=="forward-diagonal"&&r!=="diagonal-cross"&&r!=="esriSFSForwardDiagonal"&&r!=="esriSFSDiagonalCross"||(o.moveTo(s+a,-a),o.lineTo(-a,s+a),o.moveTo(a,-a),o.lineTo(-a,a),o.moveTo(s+a,s-a),o.lineTo(s-a,s+a)),o.stroke();const l=o.getImageData(0,0,t.width,t.height),c=new Uint8Array(l.data);let h;for(let f=0;f<c.length;f+=4)h=c[f+3]/255,c[f]=c[f]*h,c[f+1]=c[f+1]*h,c[f+2]=c[f+2]*h;return[c,t.width,t.height,n]}function c5t(t){t.length%2==1&&(t=[...t,...t]);const e=t.reduce((f,g)=>f+g,0),i=Math.round(e*eU),r=1,n=new Float32Array(i*r);let s=0,a=0,o=.5,l=!0;for(const f of t){for(s=a,a+=f*eU;o<=a;){const g=o-.5,y=Math.min(Math.abs(o-s),Math.abs(o-a));n[g]=l?-y:y,o++}l=!l}const c=n.length,h=new Uint8Array(4*c);for(let f=0;f<c;++f){const g=n[f]/eU;ETe(g/Ndt*.5+.5,h,4*f)}return[h,i,r]}function u5t(t,e){t==null&&(t=[]);const i=e==="Butt",r=e==="Square",n=!i&&!r;t.length%2==1&&(t=[...t,...t]);const s=Fdt,a=2*s;let o=0;for(const $ of t)o+=$;const l=Math.round(o*s),c=new Float32Array(l*a),h=.5*s;let f=0,g=0,y=.5,b=!0;for(const $ of t){for(f=g,g+=$*s;y<=g;){let C=.5;for(;C<a;){const I=(C-.5)*l+y-.5,P=n?(C-s)*(C-s):Math.abs(C-s);c[I]=b?i?Math.max(Math.max(f+h-y,P),Math.max(y-g+h,P)):P:n?Math.min((y-f)*(y-f)+P,(y-g)*(y-g)+P):r?Math.min(Math.max(y-f,P),Math.max(g-y,P)):Math.min(Math.max(y-f+h,P),Math.max(g+h-y,P)),C++}y++}b=!b}const _=c.length,S=new Uint8Array(4*_);for(let $=0;$<_;++$){const C=(n?Math.sqrt(c[$]):c[$])/s;ETe(C,S,4*$)}return[S,l,a]}function d5t(t,e){const{colorRamp:i,gradientType:r}=e,n=i.type==="CIMFixedColorRamp",s=e.interval||Un.CIMGradientFill.interval;let a=vJ(i);return n&&(a=ITe(a,s)),r==="Discrete"||n?Udt(t,a,s):Bdt(t,a)}let tU;function yL(t,e){const{colorRamp:i,gradientType:r}=e,n=vJ(i),s=i.type==="CIMFixedColorRamp";if(r==="Continuous"&&!s)return FD(t,n);const a=e.interval??Un.CIMGradientFill.interval;if(s)return FD(t,ITe(n,a));const o=[];tU??=document.createElement("canvas"),bJ(tU,n,a,1,0);const l=tU.getContext("2d").getImageData(0,0,a,1).data;for(let c=0,h=0;c<a;c++,h=4*c){const f=[l[h+0],l[h+1],l[h+2],l[h+3]];o.push({offset:c/a,color:f}),o.push({offset:(c+1)/a,color:f})}return FD(t,o)}function vJ(t){const e=[];switch(t.type){case"CIMPolarContinuousColorRamp":case"CIMLinearContinuousColorRamp":{t.type==="CIMPolarContinuousColorRamp"&&Rce().warnOnce("CIMPolarContinuousColorRamp is currently unsupported. Falling back to CIMLinearContinuousColorRamp.");const i=t;e.push({offset:0,color:[i.fromColor[0],i.fromColor[1],i.fromColor[2],i.fromColor[3]/255]}),e.push({offset:1,color:[i.toColor[0],i.toColor[1],i.toColor[2],i.toColor[3]/255]});break}case"CIMFixedColorRamp":{const i=t,r=1/(i.colors.length-1);let n=0;for(const s of i.colors)e.push({offset:n,color:[s[0],s[1],s[2],s[3]/255]}),n+=r;break}case"CIMMultipartColorRamp":{const i=t,r=i.weights.reduce((s,a)=>s+a,0);let n=0;for(let s=0;s<i.colorRamps.length;s++){const a=i.colorRamps[s],o=i.weights[s],l=vJ(a);for(const c of l)e.push({offset:(n+c.offset*o)/r,color:c.color});n+=o}break}default:Rce().error(`Color ramp "${t.type}" currently unsupported.`)}return e}function ITe(t,e){const i=[],r=(t.length-1)/(e-1);for(let n=0;n<e;n++){const s=t[Math.round(n*r)].color;i.push({offset:n/e,color:s}),i.push({offset:(n+1)/e,color:s})}return i}function Bdt(t,e){return bJ(t,e,jdt,1,X_e),MTe(t)}function Udt(t,e,i){return bJ(t,e,i,1,X_e),MTe(t)}function FD(t,e,i=0){for(const{offset:r,color:n}of e)t.addColorStop(Math.min(Math.max(r,i),1-i),`rgba(${n[0]}, ${n[1]}, ${n[2]}, ${n[3]})`)}function bJ(t,e,i,r,n){const s=i+2*n;t.width=s,t.height=r;const a=(n+1)/s,o=t.getContext("2d",{willReadFrequently:!0});if(e.length>0){const l=o.createLinearGradient(0,0,s,r);FD(l,e,a),o.fillStyle=l}else o.fillStyle="rgba(128, 128, 128, 1)";o.fillRect(0,0,s,r)}function MTe(t){const{width:e,height:i}=t,r=t.getContext("2d").getImageData(0,0,e,i),n=new Uint8Array(r.data);for(let s=0;s<n.length;s+=4){const a=n[s+3]/255;n[s]*=a,n[s+1]*=a,n[s+2]*=a}return[n,e,i]}function Hdt(t){const e=t[0]?.[0]?.[0]??0,i=t[0]?.[0]?.[1]??0,r={ymin:i,xmin:e,ymax:i,xmax:e,width:0,height:0};for(let n=0;n<t.length;n++){const s=t[n];for(let a=0;a<s.length;a++){const o=s[a][0],l=s[a][1];o<r.xmin&&(r.xmin=o),o>r.xmax&&(r.xmax=o),l<r.ymin&&(r.ymin=l),l>r.ymax&&(r.ymax=l)}}return r.width=Math.abs(r.xmax-r.xmin),r.height=Math.abs(r.ymax-r.ymin),r}function Gz(t,e){const i=Hdt(t),r=i.width===0?1:i.width,n=i.height===0?1:i.height,s=[];for(let a=0;a<t.length;a++){const o=t[a],l=[];for(let c=0;c<o.length;c++){let h=Math.round(o[c][0]-i.xmin),f=Math.round(o[c][1]-i.ymin);if(h=e.xmin+h*e.width/r,f=e.ymin+f*e.height/n,isNaN(h)||isNaN(f))throw new Error("Scaled shape has NaN values");l.push([h,f])}s.push(l)}return s}function zce(t,e,i){const r=[];for(let n=0;n<t.length;n++){const s=t[n],a=[];for(let o=0;o<s.length;o++){const l=s[o][0]+e,c=s[o][1]+i;if(isNaN(l)||isNaN(c))throw new Error("Scaled shape has NaN values");a.push([l,c])}r.push(a)}return r}let Gdt=class ATe{constructor(e=0,i=0,r=0,n=0){this.x=e,this.y=i,this.width=r,this.height=n}static fromExtent(e){return new ATe(e.xmin,-e.ymax,e.xmax-e.xmin,e.ymax-e.ymin)}get isEmpty(){return this.width<=0||this.height<=0}union(e){this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.width=Math.max(this.width,e.width),this.height=Math.max(this.height,e.height)}};function qdt(t){return`rgb(${t.slice(0,3).toString()})`}function vL(t){return`rgba(${t.slice(0,3).toString()},${t[3]})`}let PTe=class{constructor(e){e&&(this._textRasterizationCanvas=e)}rasterizeText(e,i){this._textRasterizationCanvas||(this._textRasterizationCanvas=document.createElement("canvas"));const r=this._textRasterizationCanvas,n=r.getContext("2d",{willReadFrequently:!0});D2(n,i),this._parameters=i,this._textLines=e.split(/\r?\n/),this._lineHeight=this._computeLineHeight();const{decoration:s,weight:a}=i.font;this._lineThroughWidthOffset=s&&s==="line-through"?.1*this._lineHeight:0;const o=i.backgroundColor!=null||i.borderLine!=null,l=o?m7e:0,c=this._computeTextWidth(n,i)+2*l,h=this._lineHeight*this._textLines.length+2*l;if(r.width=c+2*this._lineThroughWidthOffset,r.height=h,r.width===0||r.height===0)return r.width=r.height=1,{size:[0,0],image:new Uint32Array(0),sdf:!1,simplePattern:!1,anchorX:0,anchorY:0,canvas:r};this._renderedLineHeight=Math.round(this._lineHeight),this._renderedOutlineSize=(i.outline.size||0)*i.pixelRatio,this._renderedHaloSize=(i.halo.size||0)*i.pixelRatio,this._renderedWidth=c,this._renderedHeight=h,this._lineThroughWidthOffset*=i.pixelRatio;const f=(i.outline&&i.outline.color)??[0,0,0,0],g=i.color??[0,0,0,0],y=i.halo&&i.halo.color?i.halo.color:[0,0,0,0];this._fillStyle=vL(g),this._outlineStyle=vL(f),this._haloStyle=qdt(y);const b=this._renderedLineHeight,_=this._renderedOutlineSize,S=this._renderedHaloSize;n.save(),n.clearRect(0,0,r.width,r.height),D2(n,i);const $=l*i.pixelRatio,C=Wdt(n.textAlign,this._renderedWidth-2*$,this._renderedHaloSize+this._renderedOutlineSize)+$,I=S+_+$,P=S>0;let O=this._lineThroughWidthOffset,N=0;if(o){n.save();const ne=i.backgroundColor??[0,0,0,0],K=i.borderLine?.color??[0,0,0,0],le=2*(i.borderLine?.size??0);n.fillStyle=vL(ne),n.strokeStyle=vL(K),n.lineWidth=le,n.fillRect(0,0,r.width,r.height),n.strokeRect(0,0,r.width,r.height),n.restore()}P&&this._renderHalo(n,C,I,O,N,i),_>0&&this._renderOutline(n,C,I,O,N,i),N+=I,O+=C;for(const ne of this._textLines)P?(n.globalCompositeOperation="destination-out",n.fillStyle="rgb(0, 0, 0)",n.fillText(ne,O,N),n.globalCompositeOperation="source-over",n.fillStyle=this._fillStyle,n.fillText(ne,O,N)):(n.fillStyle=this._fillStyle,n.fillText(ne,O,N)),s&&s!=="none"&&this._renderDecoration(n,O,N,s,a),N+=b;n.restore();const R=this._renderedWidth+2*this._lineThroughWidthOffset,G=this._renderedHeight,Y=n.getImageData(0,0,R,G),Q=new Uint8Array(Y.data);if(i.premultiplyColors){let ne;for(let K=0;K<Q.length;K+=4)ne=Q[K+3]/255,Q[K]=Q[K]*ne,Q[K+1]=Q[K+1]*ne,Q[K+2]=Q[K+2]*ne}let ae,ce;switch(i.horizontalAlignment){case"left":ae=-.5;break;case"right":ae=.5;break;default:ae=0}switch(i.verticalAlignment){case"bottom":ce=-.5;break;case"top":ce=.5;break;case"baseline":ce=-1/6;break;default:ce=0}return{size:[R,G],image:new Uint32Array(Q.buffer),sdf:!1,simplePattern:!1,anchorX:ae,anchorY:ce,canvas:r}}_renderHalo(e,i,r,n,s,a){const o=this._renderedWidth,l=this._renderedHeight;this._outlineRasterizationCanvas||(this._outlineRasterizationCanvas=document.createElement("canvas")),this._outlineRasterizationCanvas.width=o,this._outlineRasterizationCanvas.height=l;const c=this._outlineRasterizationCanvas,h=c.getContext("2d");h.clearRect(0,0,o,l),D2(h,a);const{decoration:f,weight:g}=a.font;h.fillStyle=this._haloStyle,h.strokeStyle=this._haloStyle,h.lineJoin="round",this._renderOutlineNative(h,i,r,f,g,this._renderedHaloSize+this._renderedOutlineSize),e.globalAlpha=this._parameters.halo.color[3],e.drawImage(c,0,0,o,l,n,s,o,l),e.globalAlpha=1}_renderOutline(e,i,r,n,s,a){const o=this._renderedWidth,l=this._renderedHeight;this._outlineRasterizationCanvas||(this._outlineRasterizationCanvas=document.createElement("canvas")),this._outlineRasterizationCanvas.width=o,this._outlineRasterizationCanvas.height=l;const c=this._outlineRasterizationCanvas,h=c.getContext("2d");h.clearRect(0,0,o,l),D2(h,a);const{decoration:f,weight:g}=a.font;h.fillStyle=this._outlineStyle,h.strokeStyle=this._outlineStyle,h.lineJoin="round",this._renderOutlineNative(h,i,r,f,g,this._renderedOutlineSize),e.globalAlpha=this._parameters.outline.color[3],e.drawImage(c,0,0,o,l,n,s,o,l),e.globalAlpha=1}_renderOutlineNative(e,i,r,n,s,a){const o=this._renderedLineHeight;for(const l of this._textLines){const c=2*a,h=5,f=.1;for(let g=0;g<h;g++){const y=(1-(h-1)*f+g*f)*c;e.lineWidth=y,e.strokeText(l,i,r),n&&n!=="none"&&this._renderDecoration(e,i,r,n,s,y)}r+=o}}computeTextSize(e,i){this._textRasterizationCanvas||(this._textRasterizationCanvas=document.createElement("canvas"));const r=this._textRasterizationCanvas,n=r.getContext("2d");D2(n,i),this._parameters=i,this._textLines=e.split(/\r?\n/),this._lineHeight=this._computeLineHeight();const s=this._computeTextWidth(n,i),a=this._lineHeight*this._textLines.length;return r.width=s,r.height=a,[s*i.pixelRatio,a*i.pixelRatio]}_computeTextWidth(e,i){let r=0;for(const s of this._textLines)r=Math.max(r,e.measureText(s).width);const n=i.font;return(n.style==="italic"||n.style==="oblique"||typeof n.weight=="string"&&(n.weight==="bold"||n.weight==="bolder")||typeof n.weight=="number"&&n.weight>600)&&(r+=.3*e.measureText("w").width),r+=2*Fi(this._parameters.halo.size),Math.round(r)}_computeLineHeightBase(){return 1.275*this._parameters.size}_computeLineHeight(){let e=this._computeLineHeightBase();const i=this._parameters.font.decoration;return i&&i==="underline"&&(e*=1.3),Math.round(e+2*Fi(this._parameters.halo.size))}_renderDecoration(e,i,r,n,s,a){let o=.9*this._lineHeight;const l=s==="bold"?.06:s==="bolder"?.09:.04;switch(e.textAlign){case"center":i-=this._renderedWidth/2;break;case"right":i-=this._renderedWidth}const c=e.textBaseline;if(n==="underline")switch(o=.9*this._computeLineHeightBase(),c){case"top":r+=o;break;case"middle":r+=o/2}else if(n==="line-through")switch(c){case"top":r+=o/1.5;break;case"middle":r+=o/3}const h=a?1.5*a:Math.ceil(o*l);e.save(),e.beginPath(),e.strokeStyle=e.fillStyle,e.lineWidth=h,e.moveTo(i-this._lineThroughWidthOffset,r),e.lineTo(i+this._renderedWidth+2*this._lineThroughWidthOffset,r),e.stroke(),e.restore()}};function D2(t,e){const i=Math.max(e.size,.5),r=e.font,n=`${r.style} ${r.weight} ${Fi(i).toFixed(1)}px ${r.family}, sans-serif`;let s;switch(t.font=n,t.textBaseline="top",e.horizontalAlignment){case"left":default:s="left";break;case"right":s="right";break;case"center":s="center"}t.textAlign=s}function Wdt(t,e,i){return t==="center"?.5*e:t==="right"?e-i:i}function OTe(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function Ydt(){const t=OTe("svg");return t.setAttribute("style","position: absolute;"),t.setAttribute("width","0"),t.setAttribute("height","0"),t.setAttribute("aria-hidden","true"),t.setAttribute("role","presentation"),document.body.appendChild(t),t}function Zdt(t){return t!=null&&document.body.removeChild(t),null}const Xdt=()=>$e.getLogger("esri.views.2d.engine.webgl.alignmentUtils");function Jdt(t){if(!t)return 0;switch(t){case"Left":case"left":return-1;case"Right":case"right":return 1;case"Justify":return Xdt().warnOnce("Horizontal alignment 'justify' is not implemented. Falling back to 'center'."),0;case"Center":case"center":return 0}}function Kdt(t){if(!t)return 0;switch(t){case"Top":case"top":return 1;case"Center":case"middle":return 0;case"Baseline":case"baseline":return 2;case"Bottom":case"bottom":return-1}}function p5t(t){switch(t){case"above-left":case"esriServerPointLabelPlacementAboveLeft":return["right","bottom"];case"above-center":case"above-along":case"esriServerPointLabelPlacementAboveCenter":case"esriServerLinePlacementAboveAlong":return["center","bottom"];case"above-right":case"esriServerPointLabelPlacementAboveRight":return["left","bottom"];case"center-left":case"esriServerPointLabelPlacementCenterLeft":return["right","middle"];case"center-center":case"center-along":case"esriServerPointLabelPlacementCenterCenter":case"esriServerLinePlacementCenterAlong":case"always-horizontal":case"esriServerPolygonPlacementAlwaysHorizontal":return["center","middle"];case"center-right":case"esriServerPointLabelPlacementCenterRight":return["left","middle"];case"below-left":case"esriServerPointLabelPlacementBelowLeft":return["right","top"];case"below-center":case"below-along":case"esriServerPointLabelPlacementBelowCenter":case"esriServerLinePlacementBelowAlong":return["center","top"];case"below-right":case"esriServerPointLabelPlacementBelowRight":return["left","top"];default:return console.debug(`Found invalid placement type ${t}`),["center","middle"]}}function f5t(t){switch(t){case 1:case"right":return-1;case 0:case"center":return 0;case-1:case"left":return 1;default:return console.debug(`Found invalid horizontal alignment ${t}`),0}}function m5t(t){switch(t){case 1:case"top":return 1;case 0:case"middle":return 0;case-1:case 2:case"baseline":case"bottom":return-1;default:return console.debug(`Found invalid vertical alignment ${t}`),0}}let Qdt=class{constructor(e=0,i=0,r=0,n=0){this.x=e,this.y=i,this.width=r,this.height=n}get isEmpty(){return this.width<=0||this.height<=0}union(e){this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.width=Math.max(this.width,e.width),this.height=Math.max(this.height,e.height)}},WE=class Eq{constructor(e,i,r,n){this.transformedX=0,this.transformedY=0,this.center=e_(e,i),this.centerT=zI(),this.halfWidth=r/2,this.halfHeight=n/2,this.width=r,this.height=n}get x(){return this.center[0]}get y(){return this.center[1]}get blX(){return this.center[0]+this.halfWidth}get blY(){return this.center[1]+this.halfHeight}get trX(){return this.center[0]-this.halfWidth}get trY(){return this.center[1]-this.halfHeight}get xmin(){return this.x-this.halfWidth}get xmax(){return this.x+this.halfWidth}get ymin(){return this.y-this.halfHeight}get ymax(){return this.y+this.halfHeight}set x(e){this.center[0]=e}set y(e){this.center[1]=e}clone(){return new Eq(this.x,this.y,this.width,this.height)}serialize(e){return e.writeF32(this.center[0]),e.writeF32(this.center[1]),e.push(this.width),e.push(this.height),e}findCollisionDelta(e,i=4){const r=Math.abs(e.centerT[0]-this.centerT[0]),n=Math.abs(e.centerT[1]-this.centerT[1]),s=(e.halfWidth+this.halfWidth+i)/r,a=(e.halfHeight+this.halfHeight+i)/n,o=Math.min(s,a);return Math.log2(o)}extend(e){const i=Math.min(this.xmin,e.xmin),r=Math.min(this.ymin,e.ymin),n=Math.max(this.xmax,e.xmax)-i,s=Math.max(this.ymax,e.ymax)-r,a=i+n/2,o=r+s/2;this.width=n,this.height=s,this.halfWidth=n/2,this.halfHeight=s/2,this.x=a,this.y=o}static deserialize(e){const i=e.readF32(),r=e.readF32(),n=e.readInt32(),s=e.readInt32();return new Eq(i,r,n,s)}};const wJ=22,LTe=4,eht=wJ+LTe,tht=wJ-6,Fce=3,iht=Math.PI/180,ay=8,rht=1.5;let DTe=class{constructor(e,i,r,n){this._rotationT=Bm(),this._xBounds=0,this._yBounds=0,this.minZoom=0,this.maxZoom=255,this._bounds=null;const s=r.rect,a=new Float32Array(8);e*=n,i*=n;const o=r.code?s.width*n:r.metrics.width,l=r.code?s.height*n:r.metrics.height;this.width=o,this.height=l,a[0]=e,a[1]=i,a[2]=e+o,a[3]=i,a[4]=e,a[5]=i+l,a[6]=e+o,a[7]=i+l,this._data=a,this._setTextureCoords(s),this._scale=n,this._mosaic=r,this.x=e,this.y=i,this.maxOffset=Math.max(e+o,i+l)}get mosaic(){return this._mosaic}set angle(e){this._angle=e,IN(this._rotationT,-e),this._setOffsets()}get angle(){return this._angle}get xTopLeft(){return this._data[0]}get yTopLeft(){return this._data[1]}get xBottomRight(){return this._data[6]}get yBottomRight(){return this._data[7]}get texcoords(){return this._texcoords}get textureBinding(){return this._mosaic.textureBinding}get offsets(){return this._offsets||this._setOffsets(),this._offsets}get char(){return String.fromCharCode(this._mosaic.code)}get code(){return this._mosaic.code}get bounds(){if(!this._bounds){const{height:e,width:i}=this._mosaic.metrics,r=i*this._scale,n=Math.abs(e)*this._scale,s=new Float32Array(8);s[0]=this.x,s[1]=this.y,s[2]=this.x+r,s[3]=this.y,s[4]=this.x,s[5]=this.y+n,s[6]=this.x+r,s[7]=this.y+n;const a=Wh(Bm(),this._rotationT,this._transform);v_e(s,s,a);let o=1/0,l=1/0,c=-1/0,h=-1/0;for(let _=0;_<4;_++){const S=s[2*_],$=s[2*_+1];o=Math.min(o,S),l=Math.min(l,$),c=Math.max(c,S),h=Math.max(h,$)}const f=c-o,g=h-l,y=o+f/2,b=l+g/2;this._bounds=new WE(y,b,f,g)}return this._bounds}setTransform(e){this._transform=e,this._offsets=null}_setOffsets(){this._offsets||(this._offsets={topLeft:[0,0],topRight:[0,0],bottomLeft:[0,0],bottomRight:[0,0]});const e=Wh(Bm(),this._rotationT,this._transform);this._offsets.topLeft[0]=this._data[0],this._offsets.topLeft[1]=this._data[1],this._offsets.topRight[0]=this._data[2],this._offsets.topRight[1]=this._data[3],this._offsets.bottomLeft[0]=this._data[4],this._offsets.bottomLeft[1]=this._data[5],this._offsets.bottomRight[0]=this._data[6],this._offsets.bottomRight[1]=this._data[7],so(this._offsets.topLeft,this._offsets.topLeft,e),so(this._offsets.topRight,this._offsets.topRight,e),so(this._offsets.bottomLeft,this._offsets.bottomLeft,e),so(this._offsets.bottomRight,this._offsets.bottomRight,e)}_setTextureCoords({x:e,y:i,width:r,height:n}){this._texcoords={topLeft:[e,i],topRight:[e+r,i],bottomLeft:[e,i+n],bottomRight:[e+r,i+n]}}};const nht=(t,e)=>({code:0,page:0,sdf:!0,rect:new Qdt(0,0,11,8),textureBinding:e,metrics:{advance:0,height:4,width:t,left:0,top:0}});function R2(t,e){return t.forEach(i=>so(i,i,e)),{topLeft:t[0],topRight:t[1],bottomLeft:t[2],bottomRight:t[3]}}let sht=class{constructor(e,i,r){this._rotation=0,this._decorate(e,i,r),this.glyphs=e,this.bounds=this._createBounds(e),this.isMultiline=i.length>1,this._hasRotation=r.angle!==0,this._transform=this._createGlyphTransform(this.bounds,r),this._borderLineSizePx=r.borderLineSizePx,(r.borderLineSizePx||r.hasBackground)&&([this.bounds,this.textBox]=this.shapeBackground(this._transform));for(const n of e)n.setTransform(this._transform)}setRotation(e){if(e===0&&this._rotation===0)return;this._rotation=e;const i=this._transform,r=IN(Bm(),e);Wh(i,r,i);for(const n of this.glyphs)n.setTransform(this._transform)}_decorate(e,i,r){if(!r.decoration||r.decoration==="none"||!e.length)return;const n=r.scale,s=r.decoration==="underline"?eht:tht,a=e[0].textureBinding;for(const o of i){const l=o.startX*n,c=o.startY*n,h=(o.width+o.glyphWidthEnd)*n;e.push(new DTe(l,c+s*n,nht(h,a),1))}}shapeBackground(e){const i=this._borderLineSizePx||0,r=(rht+i)/2,n=this._borderLineSizePx?r:0,{xmin:s,ymin:a,xmax:o,ymax:l,x:c,y:h,width:f,height:g}=this.bounds,y=[s-ay,a-ay],b=[o+ay,a-ay],_=[s-ay,l+ay],S=[o+ay,l+ay],$=R2([[y[0]-r,y[1]-r],[b[0]+r,b[1]-r],[y[0]+n,y[1]+n],[b[0]-n,b[1]+n]],e),C=R2([[_[0]+n,_[1]-n],[S[0]-n,S[1]-n],[_[0]-r,_[1]+r],[S[0]+r,S[1]+r]],e),I=R2([[y[0]-r,y[1]-r],[y[0]+n,y[1]+n],[_[0]-r,_[1]+r],[_[0]+n,_[1]-n]],e),P=R2([[b[0]-n,b[1]+n],[b[0]+r,b[1]-r],[S[0]-n,S[1]-n],[S[0]+r,S[1]+r]],e),O={main:R2([y,b,_,S],e),top:$,bot:C,left:I,right:P};return[new WE(c,h,f+2*r,g+2*r),O]}get boundsT(){const e=this.bounds,i=Fn(zI(),e.x,e.y);if(so(i,i,this._transform),this._hasRotation){const r=Math.max(e.width,e.height);return new WE(i[0],i[1],r,r)}return new WE(i[0],i[1],e.width,e.height)}_createBounds(e){let i=1/0,r=1/0,n=0,s=0;for(const l of e)i=Math.min(i,l.xTopLeft),r=Math.min(r,l.yTopLeft),n=Math.max(n,l.xBottomRight),s=Math.max(s,l.yBottomRight);const a=n-i,o=s-r;return new WE(i+a/2,r+o/2,a,o)}_createGlyphTransform(e,i){const r=iht*i.angle,n=Bm(),s=zI();return Ep(n,n,Fn(s,i.xOffset,-i.yOffset)),i.useCIMAngleBehavior?Mv(n,n,r):(Ep(n,n,Fn(s,e.x,e.y)),Mv(n,n,r),Ep(n,n,Fn(s,-e.x,-e.y))),n}},bL=class{constructor(e,i,r,n,s,a){this.glyphWidthEnd=0,this.startX=0,this.startY=0,this.start=Math.max(0,Math.min(i,r)),this.end=Math.max(0,Math.max(i,r)),this.end<e.length&&(this.glyphWidthEnd=e[this.end].metrics.width),this.width=n,this.yMin=s,this.yMax=a}};const Cq=t=>t===10,Nce=t=>t===32;function aht(t,e,i){const r=new Array,n=1/i.scale,s=i.maxLineWidth*n,a=e?t.length-1:0,o=e?-1:t.length,l=e?-1:1;let c=a,h=0,f=0,g=c,y=g,b=0,_=1/0,S=0;for(;c!==o;){const{code:C,metrics:I}=t[c],P=Math.abs(I.top);if(Cq(C)||Nce(C)||(_=Math.min(_,P),S=Math.max(S,P+I.height)),Cq(C))c!==a&&(r.push(new bL(t,g,c-l,h,_===1/0?0:_,S)),_=1/0,S=0),h=0,g=c+l,y=c+l,f=0;else if(Nce(C))y=c+l,f=0,b=I.advance,h+=I.advance;else if(h>s){if(y!==g){const O=y-2*l;h-=b,r.push(new bL(t,g,O,h-f,_,S)),_=1/0,S=0,g=y,h=f}else r.push(new bL(t,g,c-l,h,_,S)),_=1/0,S=0,g=c,y=c,h=0;h+=I.advance,f+=I.advance}else h+=I.advance,f+=I.advance;c+=l}const $=new bL(t,g,c-l,h,_,S);return $.start>=0&&$.end<t.length&&r.push($),r}function oht(t,e){let i=0;for(let s=0;s<t.length;s++){const{width:a}=t[s];i=Math.max(a,i)}const r=e.decoration==="underline"?LTe:0,n=t[0].yMin;return{x:0,y:n,height:t[t.length-1].yMax+e.lineHeight*(t.length-1)+r-n,width:i}}function RTe(t,e){const i=e.scale,r=new Array,{glyphs:n,isRightToLeft:s}=t,a=aht(n,s,e),o=a.length?oht(a,e):{y:0,height:0},l=Jdt(e.horizontalAlignment),c=Kdt(e.verticalAlignment),h=c===2?1:0,f=h?0:c-1,g=(1-h)*-o.y+f*(o.height/2)+(h?1:0)*-wJ;for(let y=0;y<a.length;y++){const{start:b,end:_,width:S}=a[y];let $=-1*(l+1)*(S/2)-Fce;const C=(t.isRightToLeft?a.length-1-y:y)*e.lineHeight+g-Fce;a[y].startX=$,a[y].startY=C;for(let I=b;I<=_;I++){const P=n[I];if(Cq(P.code))continue;const O=new DTe($+P.metrics.left,C-P.metrics.top,P,i);$+=P.metrics.advance,r.push(O)}}return new sht(r,a,e)}const w5t=50;function _5t(t){if(!t)return null;const{xmin:e,ymin:i,xmax:r,ymax:n,spatialReference:s}=t;return new br({rings:[[[e,i],[e,n],[r,n],[r,i],[e,i]]],spatialReference:s})}function zTe(t){return Xi(Math.round(Fi(t)))}function FTe(t){const e=Xi(RYe),i=Xi(zYe);return Math.max(e,Math.min(t||i,i))}const O0=Math.PI/180,NTe=.5,YE=()=>$e.getLogger("esri.symbols.cim.CIMSymbolDrawHelper");class Zs{constructor(e){this._t=e}static createIdentity(){return new Zs([1,0,0,0,1,0])}clone(){const e=this._t;return new Zs(e.slice())}transform(e){const i=this._t;return[i[0]*e[0]+i[1]*e[1]+i[2],i[3]*e[0]+i[4]*e[1]+i[5]]}static createScale(e,i){return new Zs([e,0,0,0,i,0])}scale(e,i){const r=this._t;return r[0]*=e,r[1]*=e,r[2]*=e,r[3]*=i,r[4]*=i,r[5]*=i,this}scaleRatio(){return Math.sqrt(this._t[0]*this._t[0]+this._t[1]*this._t[1])}static createTranslate(e,i){return new Zs([0,0,e,0,0,i])}translate(e,i){const r=this._t;return r[2]+=e,r[5]+=i,this}static createRotate(e){const i=Math.cos(e),r=Math.sin(e);return new Zs([i,-r,0,r,i,0])}rotate(e){return Zs.multiply(this,Zs.createRotate(e),this)}angle(){const e=this._t[0],i=this._t[3],r=Math.sqrt(e*e+i*i);return[e/r,i/r]}static multiply(e,i,r){const n=e._t,s=i._t,a=n[0]*s[0]+n[3]*s[1],o=n[1]*s[0]+n[4]*s[1],l=n[2]*s[0]+n[5]*s[1]+s[2],c=n[0]*s[3]+n[3]*s[4],h=n[1]*s[3]+n[4]*s[4],f=n[2]*s[3]+n[5]*s[4]+s[5],g=r._t;return g[0]=a,g[1]=o,g[2]=l,g[3]=c,g[4]=h,g[5]=f,r}invert(){const e=this._t;let i=e[0]*e[4]-e[1]*e[3];if(i===0)return new Zs([0,0,0,0,0,0]);i=1/i;const r=(e[1]*e[5]-e[2]*e[4])*i,n=(e[2]*e[3]-e[0]*e[5])*i,s=e[4]*i,a=-e[1]*i,o=-e[3]*i,l=e[0]*i;return new Zs([s,a,r,o,l,n])}}class _J{constructor(e,i){this._resourceManager=e,this._transfos=[],this._sizeTransfos=[],this._geomUnitsPerPoint=1,this._placementPool=new u_(()=>new KT,void 0,void 0,100),this._earlyReturn=!1,this._mapRotation=0,this._transfos.push(i||Zs.createIdentity()),this._sizeTransfos.push(i?i.scaleRatio():1)}setTransform(e,i){this._transfos=[e||Zs.createIdentity()],this._sizeTransfos=[i||(e?e.scaleRatio():1)]}setGeomUnitsPerPoint(e){this._geomUnitsPerPoint=e}transformPt(e){return this._transfos[this._transfos.length-1].transform(e)}transformSize(e){return e*this._sizeTransfos[this._sizeTransfos.length-1]}reverseTransformPt(e){return this._transfos[this._transfos.length-1].invert().transform(e)}reverseTransformSize(e){return e/this._sizeTransfos[this._sizeTransfos.length-1]}reverseTransformScalar(e){return e/this._transfos[this._transfos.length-1].scaleRatio()}getTransformAngle(){return this._transfos[this._transfos.length-1].angle()}geomUnitsPerPoint(){return this.isEmbedded()?1:this._geomUnitsPerPoint}prevGeomUnitsPerPoint(){return this._transfos.length>2?1:this._geomUnitsPerPoint}isEmbedded(){return this._transfos.length>1}back(){return this._transfos[this._transfos.length-1]}push(e,i){const r=i?e.scaleRatio():1;Zs.multiply(e,this.back(),e),this._transfos.push(e),this._sizeTransfos.push(this._sizeTransfos[this._sizeTransfos.length-1]*r)}pop(){this._transfos.splice(-1,1),this._sizeTransfos.splice(-1,1)}drawSymbol(e,i,r){if(e)switch(e.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":this.drawMultiLayerSymbol(e,i);break;case"CIMTextSymbol":this.drawTextSymbol(e,i,r)}}drawMultiLayerSymbol(e,i){if(!e||!i)return;const r=e.symbolLayers;if(!r)return;const n=e.effects;if(n&&n.length>0){const s=this.executeEffects(n,i);if(s){let a=s.next();for(;a;)this.drawSymbolLayers(r,a.asJSON()),a=s.next()}}else this.drawSymbolLayers(r,i)}executeEffects(e,i){let r=new hut(Ji.fromJSONCIM(i));for(const n of e){const s=Pdt(n);s&&(r=s.execute(r,n,this.geomUnitsPerPoint(),null))}return r}drawSymbolLayers(e,i){let r=e.length;for(;r--;){const n=e[r];if(!n||n.enable===!1)continue;const s=n.effects;if(s&&s.length>0){const a=this.executeEffects(s,i);if(a){let o=null;for(;(o=a.next())&&(this.drawSymbolLayer(n,o.asJSON()),!this._earlyReturn););}}else this.drawSymbolLayer(n,i);if(this._earlyReturn)return}}drawSymbolLayer(e,i){switch(e.type){case"CIMSolidFill":this.drawSolidFill(i,e.color,e.path);break;case"CIMHatchFill":this.drawHatchFill(i,e);break;case"CIMPictureFill":this.drawPictureFill(i,e);break;case"CIMGradientFill":this.drawGradientFill(i,e);break;case"CIMSolidStroke":this.drawSolidStroke(i,e.color,e.width,e.capStyle,e.joinStyle,e.miterLimit,e.path);break;case"CIMPictureStroke":this.drawPictureStroke(i,e);break;case"CIMGradientStroke":this.drawGradientStroke(i,e);break;case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":this.drawMarkerLayer(e,i)}}drawHatchFill(e,i){const r=cht(i,e,this.geomUnitsPerPoint());r&&(this.pushClipPath(e),this.drawMultiLayerSymbol(i.lineSymbol,r),this.popClipPath())}drawPictureFill(e,i){}drawGradientFill(e,i){}drawPictureStroke(e,i){}drawGradientStroke(e,i){}drawMarkerLayer(e,i){const r=e.markerPlacement;if(r){const n=Odt(r);if(n){const s=r.type==="CIMMarkerPlacementInsidePolygon"||r.type==="CIMMarkerPlacementPolygonCenter"&&r.clipAtBoundary;s&&this.pushClipPath(i);const a=n.execute(Ji.fromJSONCIM(i),r,this.geomUnitsPerPoint(),null);if(a){let o=null;for(;(o=a.next())&&(this.drawMarker(e,o),!this._earlyReturn););}s&&this.popClipPath()}}else{const n=this._placementPool.acquire();if(EI(i))n.tx=i.x,n.ty=i.y,this.drawMarker(e,n);else if(jn(i)){const s=Bve(i);s&&([n.tx,n.ty]=s,this.drawMarker(e,n))}else if(ka(i)){for(const s of i.paths)for(const a of s)if(n.tx=a[0],n.ty=a[1],this.drawMarker(e,n),this._earlyReturn)break}else for(const s of i.points)if(n.tx=s[0],n.ty=s[1],this.drawMarker(e,n),this._earlyReturn)break;this._placementPool.release(n)}}drawMarker(e,i){switch(e.type){case"CIMCharacterMarker":case"CIMPictureMarker":this.drawPictureMarker(e,i);break;case"CIMVectorMarker":this.drawVectorMarker(e,i)}}drawPictureMarker(e,i){if(!e)return;const r=this._resourceManager.getResource(e.url),n=Ht(e.size,Un.CIMPictureMarker.size);if(r==null||n<=0)return;const s=r.width,a=r.height;if(!s||!a)return;const o=s/a,l=Ht(e.scaleX,1),c=Zs.createIdentity(),h=e.anchorPoint;if(h){let S=h.x,$=h.y;e.anchorPointUnits!=="Absolute"&&(S*=n*o*l,$*=n),c.translate(-S,-$)}let f=Ht(e.rotation);e.rotateClockwise&&(f=-f),this._mapRotation&&(f+=this._mapRotation),f&&c.rotate(f*O0);let g=Ht(e.offsetX),y=Ht(e.offsetY);if(g||y){if(this._mapRotation){const S=O0*this._mapRotation,$=Math.cos(S),C=Math.sin(S),I=g*C+y*$;g=g*$-y*C,y=I}c.translate(g,y)}const b=this.geomUnitsPerPoint();b!==1&&c.scale(b,b);const _=i.getAngle();_&&c.rotate(_),c.translate(i.tx,i.ty),this.push(c,!1),this.drawImage(e,n),this.pop()}drawVectorMarker(e,i){if(!e)return;const r=e.markerGraphics;if(!r)return;const n=Ht(e.size,Un.CIMVectorMarker.size),s=e.frame,a=s?s.ymax-s.ymin:0,o=n&&a?n/a:1,l=Zs.createIdentity();s&&l.translate(.5*-(s.xmax+s.xmin),.5*-(s.ymax+s.ymin));const c=e.anchorPoint;if(c){let _=c.x,S=c.y;e.anchorPointUnits!=="Absolute"?s&&(_*=s.xmax-s.xmin,S*=s.ymax-s.ymin):(_/=o,S/=o),l.translate(-_,-S)}o!==1&&l.scale(o,o);let h=Ht(e.rotation);e.rotateClockwise&&(h=-h),this._mapRotation&&(h+=this._mapRotation),h&&l.rotate(h*O0);let f=Ht(e.offsetX),g=Ht(e.offsetY);if(f||g){if(this._mapRotation){const _=O0*this._mapRotation,S=Math.cos(_),$=Math.sin(_),C=f*$+g*S;f=f*S-g*$,g=C}l.translate(f,g)}const y=this.geomUnitsPerPoint();y!==1&&l.scale(y,y);const b=i.getAngle();b&&l.rotate(b),l.translate(i.tx,i.ty),this.push(l,e.scaleSymbolsProportionally);for(const _ of r){_?.symbol&&_.geometry||YE().error("Invalid marker graphic",_);let S=_.textString;if(typeof S=="number"&&(S=S.toString()),this.drawSymbol(_.symbol,_.geometry,S),this._earlyReturn)break}this.pop()}drawTextSymbol(e,i,r){if(!e||!EI(i)||Ht(e.height,Un.CIMTextSymbol.height)<=0)return;const n=Zs.createIdentity();let s=Ht(e.angle);s=-s,s&&n.rotate(s*O0);const a=Ht(e.offsetX),o=Ht(e.offsetY);(a||o)&&n.translate(a,o);const l=this.geomUnitsPerPoint();l!==1&&n.scale(l,l),n.translate(i.x,i.y),this.push(n,!1),this.drawText(e,r),this.pop()}}class lht extends _J{constructor(e,i){super(e,i),this.reset()}reset(){this._xmin=this._ymin=1/0,this._xmax=this._ymax=-1/0,this._clipCount=0}envelope(){return new Gdt(this._xmin,this._ymin,this._xmax-this._xmin,this._ymax-this._ymin)}bounds(){return ive(this._xmin,this._ymin,this._xmax,this._ymax)}drawSolidFill(e){if(e&&!(this._clipCount>0))if(jn(e))this._processPath(e.rings,0);else if(ka(e))this._processPath(e.paths,0);else if(Mo(e)){const i=ym(e);i&&this._processPath(i.rings,0)}else console.error("drawSolidFill Unexpected geometry type!")}drawSolidStroke(e,i,r){if(!e||this._clipCount>0||r==null||r<=0)return;const n=Math.max(.5*this.transformSize(Ht(r,Un.CIMSolidStroke.width)),.5*NTe);if(jn(e))this._processPath(e.rings,n);else if(ka(e))this._processPath(e.paths,n);else if(Mo(e)){const s=ym(e);s&&this._processPath(s.rings,n)}else console.error("drawSolidStroke unexpected geometry type!")}drawMarkerLayer(e,i){jn(i)&&e.markerPlacement&&(e.markerPlacement.type==="CIMMarkerPlacementInsidePolygon"||e.markerPlacement.type==="CIMMarkerPlacementPolygonCenter"&&e.markerPlacement.clipAtBoundary)?this._processPath(i.rings,0):super.drawMarkerLayer(e,i)}drawHatchFill(e,i){this.drawSolidFill(e)}drawPictureFill(e,i){this.drawSolidFill(e)}drawGradientFill(e,i){this.drawSolidFill(e)}drawPictureStroke(e,i){this.drawSolidStroke(e,null,i.width)}drawGradientStroke(e,i){this.drawSolidStroke(e,null,i.width)}pushClipPath(e){this.drawSolidFill(e),this._clipCount++}popClipPath(){this._clipCount--}drawImage(e,i){const{url:r}=e,n=Ht(e.scaleX,1);let s=n*i,a=i;const o=this._resourceManager.getResource(r);if(o!=null){const l=o.height/o.width;s=n*(i?l>1?i:i/l:o.width),a=i?l>1?i*l:i:o.height}this._merge(this.transformPt([-s/2,-a/2]),0),this._merge(this.transformPt([-s/2,a/2]),0),this._merge(this.transformPt([s/2,-a/2]),0),this._merge(this.transformPt([s/2,a/2]),0)}drawText(e,i){if(!i||i.length===0)return;this._textRasterizer||(this._textRasterizer=new PTe);const r=BTe(e);let[n,s]=this._textRasterizer.computeTextSize(i,r);n=Xi(n),s=Xi(s);const a=this.transformSize(1)*this.reverseTransformScalar(1);n*=a,s*=a;let o=0;switch(e.horizontalAlignment){case"Left":o=n/2;break;case"Right":o=-n/2}let l=0;switch(e.verticalAlignment){case"Bottom":l=s/2;break;case"Top":l=-s/2;break;case"Baseline":l=s/6}this._merge(this.transformPt([-n/2+o,-s/2+l]),0),this._merge(this.transformPt([-n/2+o,s/2+l]),0),this._merge(this.transformPt([n/2+o,-s/2+l]),0),this._merge(this.transformPt([n/2+o,s/2+l]),0)}_processPath(e,i){if(e)for(const r of e){const n=r?r.length:0;if(n>1){this._merge(this.transformPt(r[0]),i);for(let s=1;s<n;s++)this._merge(this.transformPt(r[s]),i)}}}_merge(e,i){e[0]-i<this._xmin&&(this._xmin=e[0]-i),e[0]+i>this._xmax&&(this._xmax=e[0]+i),e[1]-i<this._ymin&&(this._ymin=e[1]-i),e[1]+i>this._ymax&&(this._ymax=e[1]+i)}}class x5t extends _J{constructor(){super(...arguments),this._searchPoint=[0,0],this._searchDistPoint=0,this._textInfo=null,this._svg=null,this._path=null,this._canvas=null}destroy(){this._svg=Zdt(this._svg),this._path=null,this._canvas=null}hitTest(e,i,r,n,s,a){const o=a*Fi(1);this.setTransform(),this.setGeomUnitsPerPoint(o),this._searchPoint=[(e[0]+e[2])/2,(e[1]+e[3])/2],this._searchDistPoint=(e[2]-e[0])/2/o,this._textInfo=n;const l=i&&(i.type==="CIMPointSymbol"&&i.angleAlignment!=="Map"||i.type==="CIMTextSymbol");if(this._mapRotation=l?s:0,!ve("esri-mobile")){const c=Xi(AYe*window.devicePixelRatio),h=Xi(PYe);!((i?.type==="CIMLineSymbol"||i?.type==="CIMPolygonSymbol")&&i.symbolLayers?.some(Rtt))&&i?.type!=="CIMMeshSymbol"&&(Wtt(i)??0)<h&&(this._searchDistPoint=c)}return this._earlyReturn=!1,this.drawSymbol(i,r),this._earlyReturn}executeEffects(e,i){return e.at(-1)?.type==="CIMGeometricEffectDashes"&&(e=e.slice(0,-1)),super.executeEffects(e,i)}drawSolidFill(e,i,r){r!=null?this._hittestSvgPath(e,r,!0):this._hitTestFill(e)}drawHatchFill(e,i){this._hitTestFill(e)}drawPictureFill(e,i){this._hitTestFill(e)}drawGradientFill(e,i){this._hitTestFill(e)}drawSolidStroke(e,i,r,n,s,a,o){o!=null?this._hittestSvgPath(e,o,!1,r):this._hitTestStroke(e,r)}drawPictureStroke(e,i){this._hitTestStroke(e,i.width)}drawGradientStroke(e,i){this._hitTestStroke(e,i.width)}drawMarkerLayer(e,i){e.markerPlacement&&(e.markerPlacement.type==="CIMMarkerPlacementInsidePolygon"||e.markerPlacement.type==="CIMMarkerPlacementPolygonCenter"&&e.markerPlacement.clipAtBoundary)?this._hitTestFill(i):super.drawMarkerLayer(e,i)}pushClipPath(e){}popClipPath(){}drawImage(e,i){const{url:r}=e,n=Ht(e.scaleX,1),s=this._resourceManager.getResource(r);if(s==null||s.height===0||i===0)return;const a=i*this.geomUnitsPerPoint(),o=a*n*(s.width/s.height),l=this.reverseTransformPt(this._searchPoint),c=this._searchDistPoint;Math.abs(l[0])<o/2+c&&Math.abs(l[1])<a/2+c&&(this._earlyReturn=!0)}drawText(e,i){const r=this._textInfo;if(!r)return;const n=r.get(e);if(!n||!n.glyphMosaicItems.glyphs.length)return;const s=zTe(Ht(e.height,Un.CIMTextSymbol.height)),{lineGapType:a,lineGap:o}=e,l=a?VTe(a,Ht(o),s):0,c=e.callout?.type==="CIMBackgroundCallout",h=RTe(n.glyphMosaicItems,{scale:s/Y_e,angle:0,xOffset:0,yOffset:0,horizontalAlignment:e.horizontalAlignment,verticalAlignment:e.verticalAlignment,maxLineWidth:FTe(e.lineWidth),lineHeight:W_e*Math.max(.25,Math.min(l||1,4)),decoration:e.font.decoration||"none",useCIMAngleBehavior:!0,hasBackground:c}),f=this.reverseTransformPt(this._searchPoint),g=f[0],y=f[1];for(const b of h.glyphs)if(g>b.xTopLeft&&g<b.xBottomRight&&y>-b.yBottomRight&&y<-b.yTopLeft){this._earlyReturn=!0;break}}_hitTestFill(e){let i=null;if(Mo(e)){const n=e;i=[[[n.xmin,n.ymin],[n.xmin,n.ymax],[n.xmax,n.ymax],[n.xmax,n.ymin],[n.xmin,n.ymin]]]}else if(jn(e))i=e.rings;else{if(!ka(e))return;i=e.paths}const r=this.reverseTransformPt(this._searchPoint);uht(r,i)&&(this._earlyReturn=!0),!this._earlyReturn&&jce(r,i,this.reverseTransformScalar(this._searchDistPoint)*this.prevGeomUnitsPerPoint())&&(this._earlyReturn=!0)}_getSvgPath(){return this._svg!=null&&this._path!=null||(this._svg??=Ydt(),this._path??=OTe("path"),this._svg.appendChild(this._path)),this._path}_getCanvasContext(e,i){return this._canvas??=document.createElement("canvas"),this._canvas.width=e,this._canvas.height=i,this._canvas.getContext("2d",{willReadFrequently:!0})}_hittestSvgPath(e,i,r,n=0){const s=this.reverseTransformScalar(this._searchDistPoint)*this.prevGeomUnitsPerPoint(),a=this.reverseTransformPt(this._searchPoint),o=tn();yZ(o,e);const l={x:o[0],y:o[1],width:o[2]-o[0],height:o[3]-o[1]},c=this._getSvgPath();c.setAttribute("d",i);const h=c.getBBox();let f=Math.max(h.width/l.width,h.height/l.height),g=1;const y=2*s*f;y<1&&(g=2/y,f*=g,h.x*=g,h.y*=g,h.width*=g,h.height*=g);const b=1+n*f/2,_=this._getCanvasContext(h.width+2*b,h.height+2*b);_.setTransform(g,0,0,g,-h.x+b,-h.y+b);const S=new Path2D(i);r?_.fill(S):(_.lineWidth=n*(f/g),_.stroke(S));const $=(l.width*f-h.width)/2,C=(l.height*f-h.height)/2,I=Math.floor((a[0]-l.x-s)*f-$+b),P=Math.floor((l.height-(a[1]-l.y)-s)*f+C+b),O=Math.ceil(2*s*f),N=Math.ceil(2*s*f),R=_.getImageData(I,P,O,N).data;for(let G=3;G<R.length;G+=4)if(R[G]>127.5)return void(this._earlyReturn=!0)}_hitTestStroke(e,i){let r=null;if(Mo(e)){const n=e;r=[[[n.xmin,n.ymin],[n.xmin,n.ymax],[n.xmax,n.ymax],[n.xmax,n.ymin],[n.xmin,n.ymin]]]}else if(jn(e))r=e.rings;else{if(!ka(e))return;r=e.paths}jce(this.reverseTransformPt(this._searchPoint),r,Ht(i,Un.CIMSolidStroke.width)*this.geomUnitsPerPoint()/2+this.reverseTransformScalar(this._searchDistPoint)*this.prevGeomUnitsPerPoint())&&(this._earlyReturn=!0)}}class jTe extends _J{constructor(e,i,r,n){super(i,r),this._applyAdditionalRenderProps=n,this._colorSubstitutionHelper=new vut,this._ctx=e}drawSolidFill(e,i){if(!e)return;if(jn(e))this._buildPath(e.rings,!0);else if(ka(e))this._buildPath(e.paths,!0);else if(Mo(e))this._buildPath(ym(e).rings,!0);else{if(!BS(e))return;console.log("CanvasDrawHelper.drawSolidFill - No implementation!")}const r=this._ctx;r.fillStyle=typeof i=="string"?i:"rgba("+Math.round(i[0])+","+Math.round(i[1])+","+Math.round(i[2])+","+(i[3]??255)/255+")",r.fill("evenodd")}drawSolidStroke(e,i,r,n,s,a){if(!e||!i||r===0)return;if(jn(e))this._buildPath(e.rings,!0);else if(ka(e))this._buildPath(e.paths,!1);else{if(!Mo(e))return void console.log("CanvasDrawHelper.drawSolidStroke isn't implemented!");this._buildPath(ym(e).rings,!0)}const o=this._ctx;o.strokeStyle=typeof i=="string"?i:"rgba("+Math.round(i[0])+","+Math.round(i[1])+","+Math.round(i[2])+","+(i[3]??255)/255+")",o.lineWidth=Math.max(this.transformSize(r),NTe),this._setCapStyle(n),this._setJoinStyle(s),o.miterLimit=a,o.stroke()}pushClipPath(e){if(this._ctx.save(),jn(e))this._buildPath(e.rings,!0);else if(ka(e))this._buildPath(e.paths,!0);else{if(!Mo(e))return;this._buildPath(ym(e).rings,!0)}this._ctx.clip("evenodd")}popClipPath(){this._ctx.restore()}drawImage(e,i){const{colorSubstitutions:r,url:n,tintColor:s}=e,a=Ht(e.scaleX,1),o=this._resourceManager.getResource(n);if(o==null)return;let l=i*(o.width/o.height),c=i;i||(l=o.width,c=o.height);const h=z1(n)||"src"in o&&z1(o.src);let f="getFrame"in o?QB(o):o;r&&(f=this._colorSubstitutionHelper.applyColorSubstitution(f,r)),this._applyAdditionalRenderProps&&!h&&s&&(f=this._colorSubstitutionHelper.tintImageData(f,s));const g=this.transformPt([0,0]),[y,b]=this.getTransformAngle(),_=this.transformSize(1),S=this._ctx;S.save(),S.setTransform({m11:a*_*y,m12:a*_*b,m21:-_*b,m22:_*y,m41:g[0],m42:g[1]}),S.drawImage(f,-l/2,-c/2,l,c),S.restore()}drawText(e,i){if(!i||i.length===0)return;this._textRasterizer||(this._textRasterizer=new PTe);const r=BTe(e,this.transformSize(Xi(1))),n=this._textRasterizer.rasterizeText(i,r);if(!n)return;const{size:s,anchorX:a,anchorY:o,canvas:l}=n,c=s[0]*(a+.5),h=s[1]*(o-.5),f=this._ctx,g=this.transformPt([0,0]),[y,b]=this.getTransformAngle(),_=1;f.save(),f.setTransform({m11:_*y,m12:_*b,m21:-_*b,m22:_*y,m41:g[0]-_*c,m42:g[1]+_*h}),f.drawImage(l,0,0),f.restore()}drawPictureFill(e,i){if(!e)return;let{colorSubstitutions:r,height:n,offsetX:s,offsetY:a,rotation:o,scaleX:l,tintColor:c,url:h}=i;const f=this._resourceManager.getResource(h);if(f==null)return;if(jn(e))this._buildPath(e.rings,!0);else if(ka(e))this._buildPath(e.paths,!0);else if(Mo(e))this._buildPath(ym(e).rings,!0);else{if(!BS(e))return;console.log("CanvasDrawHelper.drawPictureFill - No implementation!")}const g=this._ctx,y=z1(h)||"src"in f&&z1(f.src);let b,_="getFrame"in f?QB(f):f;if(r&&(_=this._colorSubstitutionHelper.applyColorSubstitution(_,r)),this._applyAdditionalRenderProps){y||c&&(_=this._colorSubstitutionHelper.tintImageData(_,c)),b=g.createPattern(_,"repeat");const S=this.transformSize(1);o||(o=0),s?s*=S:s=0,a?a*=S:a=0,n&&(n*=S);const $=n?n/f.height:1,C=l&&n?l*n/f.width:1;if(o!==0||$!==1||C!==1||s!==0||a!==0){const I=new DOMMatrix;I.rotateSelf(0,0,-o).translateSelf(s,a).scaleSelf(C,$,1),b.setTransform(I)}}else b=g.createPattern(_,"repeat");g.save(),g.fillStyle=b,g.fill("evenodd"),g.restore()}drawPictureStroke(e,i){if(!e)return;let{colorSubstitutions:r,capStyle:n,joinStyle:s,miterLimit:a,tintColor:o,url:l,width:c}=i;const h=this._resourceManager.getResource(l);if(h==null)return;let f;if(jn(e))f=e.rings;else if(ka(e))f=e.paths;else{if(!Mo(e))return BS(e)?void console.log("CanvasDrawHelper.drawPictureStroke - No implementation!"):void 0;f=ym(e).rings}c||(c=h.width);const g=z1(l)||"src"in h&&z1(h.src);let y="getFrame"in h?QB(h):h;r&&(y=this._colorSubstitutionHelper.applyColorSubstitution(y,r)),this._applyAdditionalRenderProps&&(g||o&&(y=this._colorSubstitutionHelper.tintImageData(y,o)));const b=Math.max(this.transformSize(Fi(c)),.5),_=b/y.width,S=this._ctx,$=S.createPattern(y,"repeat-y");let C,I;S.save(),this._setCapStyle(n),this._setJoinStyle(s),a!==void 0&&(S.miterLimit=a),S.lineWidth=b;for(let P of f)if(P=de(P),Vce(P),P&&!(P.length<=1)){C=this.transformPt(P[0]);for(let O=1;O<P.length;O++){I=this.transformPt(P[O]);const N=dht(C,I),R=new DOMMatrix;R.translateSelf(0,C[1]-b/2).scaleSelf(_,_,1).rotateSelf(0,0,90-N),$.setTransform(R),S.strokeStyle=$,S.beginPath(),S.moveTo(C[0],C[1]),S.lineTo(I[0],I[1]),S.stroke(),C=I}}S.restore()}drawGradientFill(e,i){if(!e)return;let r;if(jn(e))r=e.rings;else if(ka(e))r=e.paths;else{if(!Mo(e))return void YE().error("Unable to draw gradient fill");r=ym(e).rings}this._buildPath(r,!0);const{angle:n,gradientMethod:s,gradientSize:a,gradientSizeUnits:o}=i,l=Un.CIMGradientFill,c=i.gradientType??l.gradientType,h=-_p(n??0),f=gje();for(const $ of r){const C=$?$.length:0;if(C>1)for(let I=0;I<C;I++){let P=this.transformPt($[I]);s!=="Linear"&&s!=="Rectangular"||(P=Af(P,-h)),Aa(f,P)}}const[g,y,b,_]=f,S=this._ctx;switch(S.save(),s){case"Buffered":YE().error(`Gradient method "${s}" currently unsupported.`);break;case"Linear":{const $=(y+_)/2,C=o==="Absolute"?this.transformSize(Fi(a)):k2(a,l.gradientSize)*(b-g),[I,P]=c==="Discrete"?[b,b-C]:[g+C,g],O=Af([I,$],h),N=Af([P,$],h),R=S.createLinearGradient(O[0],O[1],N[0],N[1]);yL(R,i),S.fillStyle=R,S.fill("evenodd");break}case"Circular":{const $=fne(f),C=fje(f)/2,I=o==="Absolute"?this.transformSize(Fi(a)):k2(a,l.gradientSize)*C,[P,O]=c==="Discrete"?[C,C-I]:[I,0],N=S.createRadialGradient($[0],$[1],P,$[0],$[1],O);yL(N,i),S.fillStyle=N,S.fill("evenodd");break}case"Rectangular":{const $=fne(f),C=$[0],I=$[1],P=Af($,h),O=(ae,ce,ne,K,le,re,he,xe)=>{S.save(),this.pushClipPath(e);const Pe=Af([le,re],h),He=Af([he,xe],h);S.beginPath(),S.moveTo(P[0],P[1]),S.lineTo(Pe[0],Pe[1]),S.lineTo(He[0],He[1]),S.lineTo(P[0],P[1]),S.clip();const oe=Af([ae,ce],h),be=Af([ne,K],h),Le=S.createLinearGradient(oe[0],oe[1],be[0],be[1]);yL(Le,i),S.fillStyle=Le,S.fill("evenodd"),S.restore()};let N=o==="Absolute"?this.transformSize(Fi(a)):k2(a,l.gradientSize)*(nN(f)/2),[R,G]=c==="Discrete"?[b,b-N]:[C+N,C];O(R,I,G,I,b,y,b,_),[R,G]=c==="Discrete"?[g,g+N]:[C-N,C],O(R,I,G,I,g,_,g,y),N=o==="Absolute"?this.transformSize(Fi(a)):k2(a,l.gradientSize)*(sN(f)/2);let[Y,Q]=c==="Discrete"?[_,_-N]:[I+N,I];O(C,Y,C,Q,b,_,g,_),[Y,Q]=c==="Discrete"?[y,y+N]:[I-N,I],O(C,Y,C,Q,g,y,b,y);break}}S.restore()}drawGradientStroke(e,i){const{capStyle:r,gradientMethod:n,gradientSize:s,gradientSizeUnits:a,joinStyle:o,miterLimit:l,width:c}=i;if(!e||c===0)return;let h;if(jn(e))h=e.rings;else if(ka(e))h=e.paths;else{if(!Mo(e))return void YE().error("Unable to draw gradient stroke");h=ym(e).rings}const f=i.gradientType??Un.CIMGradientStroke.gradientType,g=Math.max(this.transformSize(Fi(c)),.5),y=this._ctx;let b,_;y.save(),this._setCapStyle(r),this._setJoinStyle(o),l!==void 0&&(y.miterLimit=l),y.lineWidth=g;for(let S of h){if(S=de(S),Vce(S),!S||S.length<=1)continue;let $=0;b=this.transformPt(S[0]);for(let P=1;P<S.length;P++){_=this.transformPt(S[P]);const O=_[0]-b[0],N=_[1]-b[1];$+=Math.sqrt(O*O+N*N),b=_}const C=a==="Absolute"?this.transformSize(Fi(s)):k2(s,Un.CIMGradientStroke.gradientSize)*(n==="AcrossLine"?g:$);let I=0;b=this.transformPt(S[0]);for(let P=1;P<S.length;P++){_=this.transformPt(S[P]);const O=_[0]-b[0],N=_[1]-b[1],R=Math.sqrt(O*O+N*N);let G,Y,Q,ae;switch(n){case"AcrossLine":{const[ne,K]=Af([O/R,N/R],-Math.PI/2),le=g/2,re=f==="Discrete"?le:C-le;G=(b[0]+_[0])/2+ne*re,Y=(b[1]+_[1])/2+K*re,Q=G-ne*C,ae=Y-K*C;break}case"AlongLine":{const ne=O/R,K=N/R;f==="Discrete"?(G=b[0]-ne*I,Y=b[1]-K*I,Q=G+ne*C,ae=Y+K*C):(Q=b[0]+ne*($-I),ae=b[1]+K*($-I),G=Q-ne*C,Y=ae-K*C);break}default:return YE().error("Unrecognized gradient method:",n),void y.restore()}const ce=y.createLinearGradient(G,Y,Q,ae);yL(ce,i),y.strokeStyle=ce,y.beginPath(),y.moveTo(b[0],b[1]),y.lineTo(_[0],_[1]),y.stroke(),I+=R,b=_}}y.restore()}_buildPath(e,i){const r=this._ctx;if(r.beginPath(),e)for(const n of e){const s=n?n.length:0;if(s>1){let a=this.transformPt(n[0]);r.moveTo(a[0],a[1]);for(let o=1;o<s;o++)a=this.transformPt(n[o]),r.lineTo(a[0],a[1]);i&&r.closePath()}}}_setCapStyle(e){switch(e){case"Butt":this._ctx.lineCap="butt";break;case"Round":this._ctx.lineCap="round";break;case"Square":this._ctx.lineCap="square"}}_setJoinStyle(e){switch(e){case"Bevel":this._ctx.lineJoin="bevel";break;case"Round":this._ctx.lineJoin="round";break;case"Miter":this._ctx.lineJoin="miter"}}}function cht(t,e,i){let r=Ht(t.separation,Un.CIMHatchFill.separation)*i,n=Ht(t.rotation);if(r===0)return null;r<0&&(r=-r);let s=0;const a=.5*r;for(;s>a;)s-=r;for(;s<-a;)s+=r;const o=tn();yZ(o,e),o[0]-=a,o[1]-=a,o[2]+=a,o[3]+=a;const l=[[o[0],o[1]],[o[0],o[3]],[o[2],o[3]],[o[2],o[1]]];for(;n>180;)n-=180;for(;n<0;)n+=180;const c=Math.cos(n*O0),h=Math.sin(n*O0),f=-r*h,g=r*c;let y,b,_,S;s=Ht(t.offsetX)*i*h-Ht(t.offsetY)*i*c,y=_=Number.MAX_VALUE,b=S=-Number.MAX_VALUE;for(const R of l){const G=R[0],Y=R[1],Q=c*G+h*Y,ae=-h*G+c*Y;y=Math.min(y,Q),_=Math.min(_,ae),b=Math.max(b,Q),S=Math.max(S,ae)}_=Math.floor(_/r)*r;let $=c*y-h*_-f*s/r,C=h*y+c*_-g*s/r,I=c*b-h*_-f*s/r,P=h*b+c*_-g*s/r;const O=1+Math.round((S-_)/r),N=[];for(let R=0;R<O;R++)$+=f,C+=g,I+=f,P+=g,N.push([[$,C],[I,P]]);return{paths:N}}function uht(t,e){let i=0;for(const r of e){const n=r.length;for(let s=1;s<n;s++){const a=r[s-1],o=r[s];a[1]>t[1]!=o[1]>t[1]&&((o[0]-a[0])*(t[1]-a[1])-(o[1]-a[1])*(t[0]-a[0])>0?i++:i--)}}return i!==0}function jce(t,e,i){for(const r of e){const n=r.length;for(let s=1;s<n;s++){const a=r[s-1],o=r[s];let l=(o[0]-a[0])*(o[0]-a[0])+(o[1]-a[1])*(o[1]-a[1]);if(l===0)continue;l=Math.sqrt(l);const c=((o[0]-a[0])*(t[1]-a[1])-(o[1]-a[1])*(t[0]-a[0]))/l;if(Math.abs(c)<i){const h=((o[0]-a[0])*(t[0]-a[0])+(o[1]-a[1])*(t[1]-a[1]))/l;if(h>-i&&h<l+i)return!0}}}return!1}function dht(t,e){const i=e[0]-t[0],r=e[1]-t[1];return 180/Math.PI*Math.atan2(r,i)}const ym=t=>t?{spatialReference:t.spatialReference,rings:[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]]}:null,VTe=(t,e,i)=>{switch(t){case"ExtraLeading":return 1+e/i;case"Multiple":return e;case"Exact":return e/i}};function BTe(t,e=1){const i=pSe(t),r=hSe(t.fontStyleName),n=t.fontFamilyName??yJ,{weight:s,style:a}=r,o=e*(t.height||5),l=jtt(t.horizontalAlignment),c=Vtt(t.verticalAlignment),h=BC(t),f=BC(t.haloSymbol),g=f!=null?e*(t.haloSize??0):0,y=$z(t.symbol),b=e*(Tz(t.symbol)||0),_=t.callout?.type==="CIMBackgroundCallout"?t.callout.backgroundSymbol:null,S=BC(_),$=Tz(_),C=$z(_);return{color:h,size:o,horizontalAlignment:l,verticalAlignment:c,font:{family:n,style:Ftt(a),weight:Ntt(s),decoration:i},outline:{size:b||0,color:y},halo:{size:g||0,color:f,style:a},backgroundColor:S,borderLine:$!=null&&C!=null?{size:$,color:C}:null,pixelRatio:1,premultiplyColors:!0}}const hht=1e-4;function Vce(t){let e,i,r,n,s,a=t[0],o=1;for(;o<t.length;)e=t[o][0]-a[0],i=t[o][1]-a[1],n=e!==0?i/e:Math.PI/2,r!==void 0&&Math.abs(n-r)<=hht?(t.splice(o-1,1),a=s):(s=a,a=t[o],o++),r=n}const wL=Number.POSITIVE_INFINITY,xJ=Math.PI,S5t=2*xJ,pht=128/xJ,fht=256/360,$5t=xJ/180,mht=1/Math.LN2;function UTe(t,e){return(t%=e)>=0?t:t+e}function T5t(t){return UTe(t*pht,256)}function k5t(t){return UTe(t*fht,256)}function E5t(t){return Math.log(t)*mht}function C5t(t,e,i){return t*(1-i)+e*i}const ght=8,yht=14,vht=16;function I5t(t){return ght+Math.max((t-yht)*vht,0)}function M5t(t,e,i){let r,n,s,a=0;for(const o of i){r=o.length;for(let l=1;l<r;++l)n=o[l-1],s=o[l],n.y>e!=s.y>e&&((s.x-n.x)*(e-n.y)-(s.y-n.y)*(t-n.x)>0?a++:a--)}return a!==0}function A5t(t,e,i,r){let n,s,a,o;const l=r*r;for(const c of i){const h=c.length;if(!(h<2)){n=c[0].x,s=c[0].y;for(let f=1;f<h;++f){if(a=c[f].x,o=c[f].y,N4e(t,e,n,s,a,o)<l)return!0;n=a,s=o}}}return!1}function P5t(t,e,i,r,n,s,a){const o=Math.max(r,Math.min(e,s))-e,l=Math.max(n,Math.min(i,a))-i;return o*o+l*l<=t*t}function O5t(t,e){if(e===0||Number.isNaN(e))return t;const i=[],r=new Ci(0,0),n=new Ci(0,0),s=new Ci(0,0);for(let a=0;a<t.length;a++){const o=t[a],l=[];for(let c=0;c<o.length;c++){const h=o[c-1],f=o[c],g=o[c+1];c===0?r.setCoords(0,0):r.assignSub(f,h).normalize().rightPerpendicular(),c===o.length-1?n.setCoords(0,0):n.assignSub(g,f).normalize().rightPerpendicular(),s.assignAdd(r,n).normalize();const y=s.x*n.x+s.y*n.y;y!==0&&s.scale(1/y),l.push(Ci.add(f,s.scale(e)))}i.push(l)}return i}function L5t(t,e,i,r){const n=new Ci(t[0],t[1]);if(n.scale(r),e==="viewport"){const s=-i*(Math.PI/180),a=Math.cos(s),o=Math.sin(s);n.rotate(a,o)}return n}const HTe=Math.PI,bht=HTe/2,Bce=Math.PI/180,iU=96/72,wht=1.4142135623730951,Uce=2,Hce=4,qz=()=>$e.getLogger("esri.symbols.cim.CIMSymbolHelper");function D5t(t){let e;switch(t.type){case"cim":return t.data;case"web-style":return t;case"simple-marker":{const i=du.fromSimpleMarker(t);if(!i)throw new Error("InternalError: Cannot convert symbol to CIM");e=i;break}case"picture-marker":e=du.fromPictureMarker(t);break;case"simple-line":e=du.fromSimpleLineSymbol(t);break;case"simple-fill":e=du.fromSimpleFillSymbol(t);break;case"picture-fill":e=du.fromPictureFillSymbol(t);break;case"text":e=du.fromTextSymbol(t)}return{type:"CIMSymbolReference",symbol:e}}function ND(t,e,i){switch(e.type){case"CIMSymbolReference":return ND(t,e.symbol,i);case"CIMPointSymbol":i==null&&(i={x:0,y:0}),t.drawSymbol(e,i);break;case"CIMLineSymbol":i==null&&(i={paths:[[[0,0],[10,0]]]}),t.drawSymbol(e,i);break;case"CIMPolygonSymbol":i==null&&(i={rings:[[[0,0],[0,10],[10,10],[10,0],[0,0]]]}),t.drawSymbol(e,i);break;case"CIMTextSymbol":{const r={x:0,y:0};t.drawSymbol(e,r);break}case"CIMVectorMarker":{const r=new KT;t.drawMarker(e,r);break}}return t.envelope()}function _ht(t){if(!t)return 0;switch(t.type){case"CIMMarkerPlacementAlongLineSameSize":case"CIMMarkerPlacementAlongLineRandomSize":case"CIMMarkerPlacementAtExtremities":case"CIMMarkerPlacementAtMeasuredUnits":case"CIMMarkerPlacementAtRatioPositions":case"CIMMarkerPlacementOnLine":case"CIMMarkerPlacementOnVertices":return Math.abs(t.offset);default:return 0}}function xht(t){if(!t)return 0;switch(t.type){case"CIMGeometricEffectArrow":return Math.abs(.5*t.width);case"CIMGeometricEffectBuffer":return Math.abs(t.size);case"CIMGeometricEffectControlMeasureLine":return 500;case"CIMGeometricEffectExtension":case"CIMGeometricEffectRadial":return Math.abs(t.length);case"CIMGeometricEffectJog":return Math.abs(.5*t.length);case"CIMGeometricEffectMove":return Math.max(Math.abs(Ht(t.offsetX)),Math.abs(Ht(t.offsetY)));case"CIMGeometricEffectOffset":case"CIMGeometricEffectOffsetTangent":return Math.abs(t.offset);case"CIMGeometricEffectRegularPolygon":return Math.abs(t.radius);case"CIMGeometricEffectRotate":case"CIMGeometricEffectScale":default:return 0;case"CIMGeometricEffectTaperedPolygon":return .5*Math.max(Math.abs(t.fromWidth),Math.abs(t.toWidth));case"CIMGeometricEffectWave":return Math.abs(t.amplitude);case"CIMGeometricEffectDonut":return Math.abs(t.width)}}function Gce(t){if(!t)return 0;let e=0;for(const i of t)e+=xht(i);return e}let R5t=class{static getSymbolInflateSize(e,i,r,n,s){return e||(e=[0,0,0,0]),i?this._getInflateSize(e,i,r,n,s):e}static safeSize(e){const i=Math.max(Math.abs(e[0]),Math.abs(e[2])),r=Math.max(Math.abs(e[1]),Math.abs(e[3]));return Math.sqrt(i*i+r*r)}static _vectorMarkerBounds(e,i,r,n){let s=!0;const a=tn();if(i?.markerGraphics)for(const o of i.markerGraphics){const l=[0,0,0,0];o.geometry&&(yZ(a,o.geometry),l[0]=0,l[1]=0,l[2]=0,l[3]=0,this.getSymbolInflateSize(l,o.symbol,r,0,n),a[0]+=l[0],a[1]+=l[1],a[2]+=l[2],a[3]+=l[3],s?(e[0]=a[0],e[1]=a[1],e[2]=a[2],e[3]=a[3],s=!1):(e[0]=Math.min(e[0],a[0]),e[1]=Math.min(e[1],a[1]),e[2]=Math.max(e[2],a[2]),e[3]=Math.max(e[3],a[3])))}return e}static _getInflateSize(e,i,r,n,s){if(Cht(i)){const a=this._getLayersInflateSize(e,i.symbolLayers,r,n,s),o=Gce(i.effects);return o>0&&(a[0]-=o,a[1]-=o,a[2]+=o,a[3]+=o),a}return this._getTextInflatedSize(e,i,s)}static _getLayersInflateSize(e,i,r,n,s){let a=!0;if(!i)return e;for(const o of i){if(!o)continue;let l=[0,0,0,0];switch(o.type){case"CIMSolidFill":case"CIMPictureFill":case"CIMHatchFill":case"CIMGradientFill":break;case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":{const h=o;let f=h.width;f!=null&&(h.capStyle==="Square"||h.joinStyle==="Miter"?f/=wht:f/=2,l[0]=-f,l[1]=-f,l[2]=f,l[3]=f);break}case"CIMCharacterMarker":case"CIMVectorMarker":case"CIMPictureMarker":{const h=o;if(o.type==="CIMVectorMarker"){const _=o;if(l=this._vectorMarkerBounds(l,_,r,s),_.frame){const S=(_.frame.xmin+_.frame.xmax)/2,$=(_.frame.ymin+_.frame.ymax)/2;if(l[0]-=S,l[1]-=$,l[2]-=S,l[3]-=$,_.size!=null){const C=_.size/(_.frame.ymax-_.frame.ymin);l[0]*=C,l[1]*=C,l[2]*=C,l[3]*=C}}}else if(o.type==="CIMPictureMarker"){const _=o,S=r.getResource(_.url);let $=1;if(S!=null&&S.height&&($=S.width/S.height),h.size!=null){const C=h.size/2,I=h.size*$*_.scaleX/2;l=[-I,-C,I,C]}}else if(h.size!=null){const _=h.size/2;l=[-_,-_,_,_]}if(h.anchorPoint){let _,S;h.anchorPointUnits==="Absolute"?(_=h.anchorPoint.x,S=h.anchorPoint.y):(_=h.anchorPoint.x*(l[2]-l[0]),S=h.anchorPoint.y*(l[3]-l[1]));const $=1.25*Math.sqrt(_*_+S*S);l[0]-=$,l[1]-=$,l[2]+=$,l[3]+=$}let f=Ht(h.rotation);if(h.rotateClockwise&&(f=-f),n&&(f-=n),f){const _=Bce*f,S=Math.cos(_),$=Math.sin(_),C=tn([wL,wL,-wL,-wL]);Aa(C,[l[0]*S-l[1]*$,l[0]*$+l[1]*S]),Aa(C,[l[0]*S-l[3]*$,l[0]*$+l[3]*S]),Aa(C,[l[2]*S-l[1]*$,l[2]*$+l[1]*S]),Aa(C,[l[2]*S-l[3]*$,l[2]*$+l[3]*S]),l=C}let g=Ht(h.offsetX),y=Ht(h.offsetY);if(n){const _=Bce*n,S=Math.cos(_),$=Math.sin(_),C=g*$+y*S;g=g*S-y*$,y=C}l[0]+=g,l[1]+=y,l[2]+=g,l[3]+=y;const b=_ht(h.markerPlacement);b>0&&(l[0]-=b,l[1]-=b,l[2]+=b,l[3]+=b);break}}const c=Gce(o.effects);c>0&&(l[0]-=c,l[1]-=c,l[2]+=c,l[3]+=c),a?(e[0]=l[0],e[1]=l[1],e[2]=l[2],e[3]=l[3],a=!1):(e[0]=Math.min(e[0],l[0]),e[1]=Math.min(e[1],l[1]),e[2]=Math.max(e[2],l[2]),e[3]=Math.max(e[3],l[3]))}return e}static _getTextInflatedSize(e,i,r){const n=zTe(i.height??Un.CIMTextSymbol.height);if(e[0]=-n/2,e[1]=-n/2,e[2]=n/2,e[3]=n/2,!r)return e;const s=r.get(i);if(!s||!s.glyphMosaicItems.glyphs.length)return e;const{lineGapType:a,lineGap:o}=i,l=a?VTe(a,o??0,n):0,c=i.callout?.type==="CIMBackgroundCallout",h=RTe(s.glyphMosaicItems,{scale:n/Y_e,angle:Ht(i.angle),xOffset:Ht(i.offsetX),yOffset:Ht(i.offsetY),horizontalAlignment:i.horizontalAlignment,verticalAlignment:i.verticalAlignment,maxLineWidth:FTe(i.lineWidth),lineHeight:W_e*Math.max(.25,Math.min(l||1,4)),decoration:i.font.decoration||"none",useCIMAngleBehavior:!0,hasBackground:c}).boundsT,f=Math.sqrt(h.width*h.width+h.height*h.height);return e[0]-=h.x+f,e[1]-=h.y-f,e[2]+=h.x+f,e[3]+=-h.y+f,e}},du=class jD{static getEnvelope(e,i,r){if(!e)return null;const n=new lht(r);if(Array.isArray(e)){let s;for(const a of e)s?s.union(ND(n,a,i)):s=ND(n,a,i);return s}return ND(n,e,i)}static getTextureInfo(e,i,r,n,s){const a=n??this.getEnvelope(e,null,i);if(!a)return[0,0,0,0,1];const o=Math.max(a.width,a.height)*iU;let l=s!=null?Math.max(s/o,1):1;l*=iU,a.x*=l,a.y*=l,a.width*=l,a.height*=l,a.width=Math.max(Math.ceil(a.x+a.width)-Math.floor(a.x),1)-1,a.height=Math.max(Math.ceil(a.y+a.height)-Math.floor(a.y),1)-1;let c=a.x+.5*a.width,h=a.y+.5*a.height;return c+=a.x-Math.floor(a.x),h+=a.y-Math.floor(a.y),n||(a.width+=r,a.height+=r,c+=r/2,h+=r/2),[a.width,a.height,c,h,l]}static getTextureAnchor(e,i,r){const[n,s,a,o,l]=this.getTextureInfo(e,i,Uce,null,r);return[-a/n,-o/s,s/l*iU]}static rasterize(e,i,r,n,s=!0,a){const[o,l,c,h,f]=this.getTextureInfo(i,n,Uce,r,a);e.width=o,e.height=l;const g=e.getContext("2d",{willReadFrequently:!0}),y=Zs.createScale(f,-f);y.translate(.5*o-c,.5*l+h);const b=new jTe(g,n,y);switch(i.type){case"CIMPointSymbol":{const $={type:"point",x:0,y:0};b.drawSymbol(i,$);break}case"CIMVectorMarker":{const $=new KT;b.drawMarker(i,$);break}}const _=g.getImageData(0,0,e.width,e.height),S=new Uint8Array(_.data);if(s){let $;for(let C=0;C<S.length;C+=4)$=S[C+3]/255,S[C]=S[C]*$,S[C+1]=S[C+1]*$,S[C+2]=S[C+2]*$}return[S,e.width,e.height,-c/o,-h/l]}static fromTextSymbol(e){const{text:i}=e;return{type:"CIMPointSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,anchorPointUnits:"Relative",dominantSizeAxis3D:"Y",size:10,billboardMode3D:"FaceNearPlane",frame:{xmin:-5,ymin:-5,xmax:5,ymax:5},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{x:0,y:0},symbol:jD.createCIMTextSymbolfromTextSymbol(e),textString:i}],scaleSymbolsProportionally:!0,respectFrame:!0}],scaleX:1,angleAlignment:"Display"}}static fromPictureFillSymbol(e){const{height:i,outline:r,width:n,xoffset:s,xscale:a,yoffset:o,yscale:l}=e,c=[],h={type:"CIMPolygonSymbol",symbolLayers:c};if(r){const _=qce(r);_&&c.push(_)}let f=e.url;e.type==="esriPFS"&&e.imageData&&(f=e.imageData);const g="angle"in e?e.angle??0:0,y=(n??0)*(a||1),b=(i??0)*(l||1);return c.push({type:"CIMPictureFill",invertBackfaceTexture:!1,scaleX:1,textureFilter:"Picture",tintColor:null,url:f,height:b,width:y,offsetX:Ht(s),offsetY:Ht(o),rotation:Ht(-g),colorSubstitutions:null}),h}static fromSimpleFillSymbol(e){const{color:i,style:r,outline:n}=e,s=[],a={type:"CIMPolygonSymbol",symbolLayers:s};if(n){const o=qce(n);o&&s.push(o)}if(r&&r!=="solid"&&r!=="none"&&r!=="esriSFSSolid"&&r!=="esriSFSNull"){const o={type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",color:nc(i),capStyle:"Butt",joinStyle:"Miter",width:.75}]};let l=0;const c=Xi(Iht(r)?8:10);switch(r){case"vertical":case"esriSFSVertical":l=90;break;case"forward-diagonal":case"esriSFSForwardDiagonal":case"diagonal-cross":case"esriSFSDiagonalCross":l=-45;break;case"backward-diagonal":case"esriSFSBackwardDiagonal":l=45;break;case"cross":case"esriSFSCross":l=0}s.push({type:"CIMHatchFill",lineSymbol:o,offsetX:0,offsetY:0,rotation:l,separation:c}),r==="cross"||r==="esriSFSCross"?s.push({type:"CIMHatchFill",lineSymbol:de(o),offsetX:0,offsetY:0,rotation:90,separation:c}):r!=="diagonal-cross"&&r!=="esriSFSDiagonalCross"||s.push({type:"CIMHatchFill",lineSymbol:de(o),offsetX:0,offsetY:0,rotation:45,separation:c})}else!r||r!=="solid"&&r!=="esriSFSSolid"||s.push({type:"CIMSolidFill",enable:!0,color:nc(i)});return a}static fromSimpleLineSymbol(e){const{cap:i,color:r,join:n,marker:s,miterLimit:a,style:o,width:l}=e;let c=null;o!=="solid"&&o!=="none"&&o!=="esriSLSSolid"&&o!=="esriSLSNull"&&(c=[{type:"CIMGeometricEffectDashes",dashTemplate:Iq(o,i),lineDashEnding:"NoConstraint",scaleDash:!0,offsetAlongLine:null}]);const h=[];if(s){let f;switch(s.placement){case"begin-end":f="Both";break;case"begin":f="JustBegin";break;case"end":f="JustEnd";break;default:f="None"}const g=jD.fromSimpleMarker(s,l,r).symbolLayers[0];g.markerPlacement={type:"CIMMarkerPlacementAtExtremities",placePerPart:!1,angleToLine:!0,offset:0,extremityPlacement:f,offsetAlongLine:0},h.push(g)}return h.push({type:"CIMSolidStroke",color:o!=="none"&&o!=="esriSLSNull"?nc(r):[0,0,0,0],capStyle:qTe(i),joinStyle:WTe(n),miterLimit:a,width:l,effects:c}),{type:"CIMLineSymbol",symbolLayers:h}}static fromPictureMarker(e){const{angle:i,height:r,width:n,xoffset:s,yoffset:a}=e;let o=e.url;return e.type==="esriPMS"&&e.imageData&&(o=e.imageData),{type:"CIMPointSymbol",symbolLayers:[{type:"CIMPictureMarker",invertBackfaceTexture:!1,scaleX:1,textureFilter:"Picture",tintColor:null,url:o,size:r,width:n,offsetX:Ht(s),offsetY:Ht(a),rotation:Ht(-i)}]}}static createCIMTextSymbolfromTextSymbol(e){const{angle:i,color:r,font:n,haloColor:s,haloSize:a,horizontalAlignment:o,kerning:l,lineWidth:c,text:h,verticalAlignment:f,xoffset:g,yoffset:y,backgroundColor:b,borderLineColor:_,borderLineSize:S}=e;let $,C,I,P,O,N;n&&($=n.family,C=n.style,I=n.weight,P=n.size,O=n.decoration);let R=!1;return h&&(R=iut(h)[1]),(b||S)&&(N={type:"CIMBackgroundCallout",margin:null,backgroundSymbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",color:nc(b)},{type:"CIMSolidStroke",color:nc(_),width:S}]},accentBarSymbol:null,gap:null,leaderLineSymbol:null,lineStyle:null}),{type:"CIMTextSymbol",angle:i,blockProgression:2,depth3D:1,extrapolateBaselines:!0,fontEffects:0,fontEncoding:1,fontFamilyName:$||"Arial",fontStyleName:Tht(C,I),fontType:0,haloSize:a,height:P,hinting:1,horizontalAlignment:Sht(o??"center"),kerning:l,letterWidth:100,ligatures:!0,lineGapType:"Multiple",lineWidth:c,offsetX:Ht(g),offsetY:Ht(y),strikethrough:O==="line-through",underline:O==="underline",symbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",enable:!0,color:nc(r)}]},haloSymbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",enable:!0,color:nc(s)}]},shadowColor:[0,0,0,255],shadowOffsetX:1,shadowOffsetY:1,textCase:"Normal",textDirection:R?1:0,verticalAlignment:$ht(f??"baseline"),verticalGlyphOrientation:0,wordSpacing:100,billboardMode3D:2,callout:N}}static createPictureMarkerRasterizationParam(e){const{angle:i,height:r,width:n,xoffset:s,yoffset:a}=e,o=e.url??e.source?.url??e.source?.imageData;return o?{type:"sprite-rasterization-param",overrides:[],resource:{type:"CIMPictureMarker",invertBackfaceTexture:!1,scaleX:1,textureFilter:"Picture",tintColor:null,url:o,size:r,width:n,offsetX:Ht(s),offsetY:Ht(a),rotation:Ht(-i)}}:null}static createPictureFillRasterizationParam(e){const{width:i,height:r,xoffset:n,yoffset:s,url:a}=e;return a?{type:"sprite-rasterization-param",overrides:[],resource:{type:"CIMPictureFill",scaleX:1,textureFilter:"Picture",tintColor:null,url:a,width:i,height:r,offsetX:Ht(n),offsetY:Ht(s),rotation:0}}:null}static fromSimpleMarker(e,i,r){const{style:n}=e,s=e.color??r;if(n==="path"||n==="esriSMSPath"){const f=[];if("outline"in e&&e.outline){const b=e.outline;f.push({type:"CIMSolidStroke",enable:!0,width:b.width,color:nc(b.color),path:e.path})}f.push({type:"CIMSolidFill",enable:!0,color:nc(s),path:e.path});const[g,y]=z2("square");return{type:"CIMPointSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,rotation:-Ht(e.angle),size:Ht(e.size||6),offsetX:Ht(e.xoffset),offsetY:Ht(e.yoffset),scaleSymbolsProportionally:!1,frame:g,markerGraphics:[{type:"CIMMarkerGraphic",geometry:y,symbol:{type:"CIMPolygonSymbol",symbolLayers:f}}]}]}}const a=[];let o,l,c=e.size;if("outline"in e&&e.outline&&e.outline.style!=="none"&&e.outline.style!=="esriSLSNull"){const f=e.outline,g=f.style!=="solid"&&f.style!=="esriSLSSolid";[o,l]=g?z2(n,e.size):z2(n);const y=f.width??BN.width;if(g){const S=y/e.size,$=(o.xmax-o.xmin)*S/2,C=(o.ymax-o.ymin)*S/2;o.xmin-=$,o.xmax+=$,o.ymin-=C,o.ymax+=C,c&&(c+=y)}const b=e.style!=="cross"&&e.style!=="x"||e?.outline.style==="dot"||e?.outline.style==="short-dot"?"HalfGap":"FullPattern",_=g?[{type:"CIMGeometricEffectAddControlPoints"},{type:"CIMGeometricEffectDashes",dashTemplate:Iq(f.style,null).map(S=>f.width&&f.width>0?S*f.width:S),lineDashEnding:b,controlPointEnding:"FullPattern"}]:void 0;a.push({type:"CIMSolidStroke",capStyle:g?"Round":"Butt",enable:!0,width:y,color:nc(f.color),effects:_})}else!i||e.type!=="line-marker"||e.style!=="cross"&&e.style!=="x"?[o,l]=z2(n):([o,l]=z2(n),a.push({type:"CIMSolidStroke",enable:!0,width:i,color:nc(s)}));a.push({type:"CIMSolidFill",enable:!0,color:nc(s)});const h={type:"CIMPolygonSymbol",symbolLayers:a};return{type:"CIMPointSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,rotation:Ht(-e.angle),size:Ht(c||6*i),offsetX:Ht(e.xoffset),offsetY:Ht(e.yoffset),scaleSymbolsProportionally:!1,frame:o,markerGraphics:[{type:"CIMMarkerGraphic",geometry:l,symbol:h}]}]}}static fromCIMHatchFill(e,i){const r=i*(e.separation??Un.CIMHatchFill.separation),n=r/2,s=de(e.lineSymbol);s.symbolLayers?.forEach(l=>{switch(l.type){case"CIMSolidStroke":l.width!=null&&(l.width*=i),l.effects?.forEach(c=>{if(c.type==="CIMGeometricEffectDashes"){const h=c.dashTemplate;c.dashTemplate=h?.map(f=>f*i)}});break;case"CIMVectorMarker":{l.size!=null&&(l.size*=i);const c=l.markerPlacement;c!=null&&"placementTemplate"in c&&(c.placementTemplate=c.placementTemplate.map(h=>h*i));break}}});let a=this._getLineSymbolPeriod(s)||Hce;for(;a<Hce;)a*=2;const o=a/2;return{type:"CIMVectorMarker",frame:{xmin:-o,xmax:o,ymin:-n,ymax:n},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{paths:[[[-o,0],[o,0]]]},symbol:s}],size:r}}static fetchResources(e,i,r,n=null){if(!e||!i)return r;switch(e.type){case"CIMMeshSymbol":case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":for(const s of e.effects||[])r.push(Ice(s))}return GTe(e,s=>{for(const a of s.effects||[])r.push(Ice(a));"url"in s&&s.url&&r.push(i.fetchResource(s.url,{signal:n}))}),r}static fetchFonts(e,i,r){if(e&&i){if("symbolLayers"in e&&e.symbolLayers){for(const n of e.symbolLayers)if(n.type==="CIMVectorMarker"&&n.markerGraphics)for(const s of n.markerGraphics)s?.symbol&&jD.fetchFonts(s.symbol,i,r)}else if(e.type==="CIMTextSymbol"){const{fontFamilyName:n,fontStyleName:s}=e;if(!n||n.toLowerCase()==="calcitewebcoreicons")return;const{style:a,weight:o}=hSe(s),l=pSe(e),c=new dc({family:n,style:a,weight:o,decoration:l});r.push(i.loadFont(c).catch(()=>{qz().error(`Unsupported font ${n} in CIM symbol`)}))}}}static _getLineSymbolPeriod(e){if(e){const i=this._getEffectsRepeat(e.effects);if(i)return i;if(e.symbolLayers){for(const r of e.symbolLayers)if(r){const n=this._getEffectsRepeat(r.effects);if(n)return n;switch(r.type){case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":{const s=this._getPlacementRepeat(r.markerPlacement);if(s)return s}}}}}return 0}static _getEffectsRepeat(e){if(e){for(const i of e)if(i)switch(i.type){case"CIMGeometricEffectDashes":{const r=i.dashTemplate;if(r&&r.length){let n=0;for(const s of r)n+=s;return 1&r.length&&(n*=2),n}break}case"CIMGeometricEffectWave":return i.period;default:qz().error(`unsupported geometric effect type ${i.type}`)}}return 0}static _getPlacementRepeat(e){if(e)switch(e.type){case"CIMMarkerPlacementAlongLineSameSize":case"CIMMarkerPlacementAlongLineRandomSize":case"CIMMarkerPlacementAlongLineVariableSize":{const i=e.placementTemplate;if(i&&i.length){let r=0;for(const n of i)r+=+n;return 1&i.length&&(r*=2),r}break}}return 0}static fromCIMInsidePolygon(e){const i=e.markerPlacement,r={...e};r.markerPlacement=null,r.anchorPoint=null;const n=Math.abs(i.stepX),s=Math.abs(i.stepY),a=(i.randomness??100)/100;let o,l,c,h;if(i.gridType==="Random"){const f=Xi(DYe),g=Math.max(Math.floor(f/n),1),y=Math.max(Math.floor(f/s),1);o=g*n/2,l=y*s/2,c=2*l;const b=new LW(i.seed),_=a*n/1.5,S=a*s/1.5;h=[];for(let $=0;$<g;$++)for(let C=0;C<y;C++){const I=$*n-o+_*(.5-b.getFloat()),P=C*s-l+S*(.5-b.getFloat());h.push({x:I,y:P}),$===0&&h.push({x:I+2*o,y:P}),C===0&&h.push({x:I,y:P+2*l})}}else i.shiftOddRows===!0?(o=n/2,l=s,c=2*s,h=[{x:-o,y:0},{x:o,y:0},{x:0,y:l},{x:0,y:-l}]):(o=n/2,l=s/2,c=s,h=[{x:-n,y:0},{x:0,y:-s},{x:-n,y:-s},{x:0,y:0},{x:n,y:0},{x:0,y:s},{x:n,y:s},{x:-n,y:s},{x:n,y:-s}]);return{type:"CIMVectorMarker",frame:{xmin:-o,xmax:o,ymin:-l,ymax:l},markerGraphics:h.map(f=>({type:"CIMMarkerGraphic",geometry:f,symbol:{type:"CIMPointSymbol",symbolLayers:[r]}})),size:c}}};function GTe(t,e){if(t)switch(t.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":{const i=t.symbolLayers;if(!i)return;for(const r of i)if(e(r),r.type==="CIMVectorMarker"){const n=r.markerGraphics;if(!n)continue;for(const s of n)if(s){const a=s.symbol;a&&GTe(a,e)}}break}}}const qTe=t=>{if(!t)return"Butt";switch(t){case"butt":return"Butt";case"square":return"Square";case"round":return"Round"}},WTe=t=>{if(!t)return"Miter";switch(t){case"miter":return"Miter";case"round":return"Round";case"bevel":return"Bevel"}},Sht=t=>{if(t==null)return"Center";switch(t){case"left":return"Left";case"right":return"Right";case"center":return"Center"}},$ht=t=>{if(t==null)return"Center";switch(t){case"baseline":return"Baseline";case"top":return"Top";case"middle":return"Center";case"bottom":return"Bottom"}},nc=t=>{if(!t)return[0,0,0,0];const{r:e,g:i,b:r,a:n}=t;return[e,i,r,255*n]},Tht=(t,e)=>{const i=kht(e),r=Eht(t);return i&&r?`${i}-${r}`:`${i}${r}`},kht=t=>{if(!t)return"";switch(t.toLowerCase()){case"bold":case"bolder":return"bold"}return""},Eht=t=>{if(!t)return"";switch(t.toLowerCase()){case"italic":case"oblique":return"italic"}return""},Iq=(t,e)=>{const i=ve("safari")?.001:0,r=e==="butt";switch(t){case"dash":case"esriSLSDash":return r?[4,3]:[3,4];case"dash-dot":case"esriSLSDashDot":return r?[4,3,1,3]:[3,4,i,4];case"dot":case"esriSLSDot":return r?[1,3]:[i,4];case"long-dash":case"esriSLSLongDash":return r?[8,3]:[7,4];case"long-dash-dot":case"esriSLSLongDashDot":return r?[8,3,1,3]:[7,4,i,4];case"long-dash-dot-dot":case"esriSLSDashDotDot":return r?[8,3,1,3,1,3]:[7,4,i,4,i,4];case"short-dash":case"esriSLSShortDash":return r?[4,1]:[3,2];case"short-dash-dot":case"esriSLSShortDashDot":return r?[4,1,1,1]:[3,2,i,2];case"short-dash-dot-dot":case"esriSLSShortDashDotDot":return r?[4,1,1,1,1,1]:[3,2,i,2,i,2];case"short-dot":case"esriSLSShortDot":return r?[1,1]:[i,2];case"solid":case"esriSLSSolid":case"none":return qz().error("Unexpected: style does not require rasterization"),[0,0];default:return qz().error(`Tried to rasterize SLS, but found an unexpected style: ${t}!`),[0,0]}};function Cht(t){return t.symbolLayers!==void 0}const z2=(t,e=100)=>{const i=e/2;let r,n;const s=t;if(s==="circle"||s==="esriSMSCircle"){let o=Math.acos(1-.25/i),l=Math.ceil(HTe/o/4);l===0&&(l=1),o=bht/l,l*=4;const c=[];c.push([i,0]);for(let h=1;h<l;h++)c.push([i*Math.cos(h*o),-i*Math.sin(h*o)]);c.push([i,0]),r={rings:[c]},n={xmin:-i,ymin:-i,xmax:i,ymax:i}}else if(s==="cross"||s==="esriSMSCross")r={paths:[[[0,i],[0,-i]],[[i,0],[-i,0]]]},n={xmin:-i,ymin:-i,xmax:i,ymax:i};else if(s==="diamond"||s==="esriSMSDiamond")r={rings:[[[-i,0],[0,i],[i,0],[0,-i],[-i,0]]]},n={xmin:-i,ymin:-i,xmax:i,ymax:i};else if(s==="square"||s==="esriSMSSquare")r={rings:[[[-i,-i],[-i,i],[i,i],[i,-i],[-i,-i]]]},n={xmin:-i,ymin:-i,xmax:i,ymax:i};else if(s==="x"||s==="esriSMSX")r={paths:[[[i,i],[-i,-i]],[[i,-i],[-i,i]]]},n={xmin:-i,ymin:-i,xmax:i,ymax:i};else if(s==="triangle"||s==="esriSMSTriangle"){const a=e*.5773502691896257,o=-a,l=2/3*e,c=l-e;r={rings:[[[o,c],[0,l],[a,c],[o,c]]]},n={xmin:o,ymin:c,xmax:a,ymax:l}}else s==="arrow"&&(r={rings:[[[-50,50],[50,0],[-50,-50],[-33,-20],[-33,20],[-50,50]]]},n={xmin:-i,ymin:-i,xmax:i,ymax:i});return[n,r]},Iht=t=>t==="vertical"||t==="horizontal"||t==="cross"||t==="esriSFSCross"||t==="esriSFSVertical"||t==="esriSFSHorizontal";function qce(t){if(!t)return null;let e=null;const{cap:i,color:r,join:n,miterLimit:s,style:a,width:o}=t;return a!=="solid"&&a!=="none"&&a!=="esriSLSSolid"&&a!=="esriSLSNull"&&(e=[{type:"CIMGeometricEffectDashes",dashTemplate:Iq(a,i),lineDashEnding:"NoConstraint",scaleDash:!0,offsetAlongLine:null}]),{type:"CIMSolidStroke",color:a!=="esriSLSNull"&&a!=="none"?nc(r):[0,0,0,0],capStyle:qTe(i),joinStyle:WTe(n),miterLimit:s,width:o,effects:e}}let Mht=class{constructor(){this._resourceMap=new Map,this._inFlightResourceMap=new Map}destroy(){this._inFlightResourceMap.clear(),this._resourceMap.clear()}getResource(e){return this._resourceMap.get(e)??null}async fetchResource(e,i){const r=this._resourceMap.get(e);if(r)return{width:r.width,height:r.height};let n=this._inFlightResourceMap.get(e);return n?n.then(s=>({width:s.width,height:s.height})):(n=mZe(e,i),this._inFlightResourceMap.set(e,n),n.then(s=>(this._inFlightResourceMap.delete(e),this._resourceMap.set(e,s),{width:s.width,height:s.height}),()=>({width:0,height:0})))}deleteResource(e){this._inFlightResourceMap.delete(e),this._resourceMap.delete(e)}loadFont(e){return fut(e)}};function N5t(t){return t?{originPosition:t.originPosition==="upper-left"?"upperLeft":t.originPosition==="lower-left"?"lowerLeft":t.originPosition,scale:t.tolerance?[t.tolerance,t.tolerance,1,1]:[1,1,1,1],translate:t.extent!=null?[t.extent.xmin,t.extent.ymax,t.extent.zmin??0,t.extent.mmin??0]:[0,0,0,0]}:null}function Aht(t){return t.originPosition==="lowerLeft"&&t.scale.length===4&&t.translate.length===4}function C_(t){if(Aht(t))return t;const{originPosition:e,scale:i,translate:r}=t,n=i[0]??1,s=i[1]??1;return{originPosition:"lowerLeft",scale:[n,e==="lowerLeft"?s:-s,i[2]??1,i[3]??1],translate:[r[0]??0,r[1]??0,r[2]??0,r[3]??0]}}function Km({scale:t,translate:e},i){return Math.round((i-e[0])/t[0])}function Qm({scale:t,translate:e},i){return Math.round((i-e[1])/t[1])}function KI({scale:t,translate:e},i){return Math.round(((i??0)-e[2])/t[2])}function QI({scale:t,translate:e},i){return i?Math.round((i-e[3])/t[3]):0}function YTe(t,e){return t&&e?Dht:t&&!e?Oht:!t&&e?Lht:Pht}const Pht=(t,e)=>{const i=[];if(!e.length)return null;const r=e[0];let n=Km(t,r[0]),s=Qm(t,r[1]);i.push([n,s]);for(let a=1;a<e.length;a++){const[o,l]=e[a],c=Km(t,o),h=Qm(t,l);c===n&&h===s||i.push([c-n,h-s]),n=c,s=h}return i},Oht=(t,e)=>{const i=[];if(!e.length)return null;const r=e[0];let n=Km(t,r[0]),s=Qm(t,r[1]),a=KI(t,r[2]);i.push([n,s,a]);for(let o=1;o<e.length;o++){const[l,c,h]=e[o],f=Km(t,l),g=Qm(t,c),y=KI(t,h);f===n&&g===s&&y===a||i.push([f-n,g-s,y]),n=f,s=g,a=y}return i},Lht=(t,e)=>{const i=[];if(!e.length)return null;const r=e[0];let n=Km(t,r[0]),s=Qm(t,r[1]),a=QI(t,r[2]);i.push([n,s,a]);for(let o=1;o<e.length;o++){const[l,c,h]=e[o],f=Km(t,l),g=Qm(t,c),y=QI(t,h);f===n&&g===s&&y===a||i.push([f-n,g-s,y]),n=f,s=g,a=y}return i},Dht=(t,e)=>{const i=[];if(!e.length)return null;const r=e[0];let n=Km(t,r[0]),s=Qm(t,r[1]),a=KI(t,r[2]),o=QI(t,r[3]);i.push([n,s,a,o]);for(let l=1;l<e.length;l++){const[c,h,f,g]=e[l],y=Km(t,c),b=Qm(t,h),_=KI(t,f),S=QI(t,g);y===n&&b===s&&_===a&&S===o||i.push([y-n,b-s,_,S]),n=y,s=b,a=_,o=S}return i};function Rht(t,e,i,r){const n=[],s=YTe(i,r);for(let a=0;a<e.length;a++){const o=s(t,e[a]);o&&o.length>=3&&n.push(o)}return n.length?n:null}function zht(t,e,i,r){const n=[],s=YTe(i,r);for(let a=0;a<e.length;a++){const o=s(t,e[a]);o&&o.length>=2&&n.push(o)}return n.length?n:null}function yA({scale:t,translate:e},i){return i*t[0]+e[0]}function vA({scale:t,translate:e},i){return i*t[1]+e[1]}function eM({scale:t,translate:e},i){return(i??0)*t[2]+e[2]}function tM({scale:t,translate:e},i){return i?i*t[3]+e[3]:0}function SJ(t,e){return t&&e?Vht:t&&!e?Nht:!t&&e?jht:Fht}const Fht=(t,e)=>{const i=new Array(e.length);if(!e.length)return i;const r=e[0];let n=yA(t,r[0]),s=vA(t,r[1]);i[0]=[n,s];const{scale:a,originPosition:o}=t,l=a[0],c=o==="lowerLeft"?a[1]:-a[1];for(let h=1;h<e.length;h++){const[f,g]=e[h];n+=l*f,s+=c*g,i[h]=[n,s]}return i},Nht=(t,e)=>{const i=new Array(e.length);if(!e.length)return i;const r=e[0];let n=yA(t,r[0]),s=vA(t,r[1]);i[0]=[n,s,eM(t,r[2])];const{scale:a,originPosition:o}=t,l=a[0],c=o==="lowerLeft"?a[1]:-a[1];for(let h=1;h<e.length;h++){const[f,g,y]=e[h];n+=l*f,s+=c*g,i[h]=[n,s,eM(t,y)]}return i},jht=(t,e)=>{const i=new Array(e.length);if(!e.length)return i;const r=e[0];let n=yA(t,r[0]),s=vA(t,r[1]);i[0]=[n,s,tM(t,r[2])];const{scale:a,originPosition:o}=t,l=a[0],c=o==="lowerLeft"?a[1]:-a[1];for(let h=1;h<e.length;h++){const[f,g,y]=e[h];n+=l*f,s+=c*g,i[h]=[n,s,tM(t,y)]}return i},Vht=(t,e)=>{const i=new Array(e.length);if(!e.length)return i;const r=e[0];let n=yA(t,r[0]),s=vA(t,r[1]);i[0]=[n,s,eM(t,r[2]),tM(t,r[3])];const{scale:a,originPosition:o}=t,l=a[0],c=o==="lowerLeft"?a[1]:-a[1];for(let h=1;h<e.length;h++){const[f,g,y,b]=e[h];n+=l*f,s+=c*g,i[h]=[n,s,eM(t,y),tM(t,b)]}return i};function ZTe(t,e,i){const r=new Array(i.length);for(let n=0;n<i.length;n++)r[n]=e(t,i[n]);return r}function j5t(t,e,i){const r=C_(t);return e.x=Km(r,i.x),e.y=Qm(r,i.y),i.z!=null&&(e.z=KI(r,i.z)),i.m!=null&&(e.m=QI(r,i.m)),e}function V5t(t,e,i){const r=Rht(C_(t),i.rings,i.hasZ,i.hasM);return r?(e.rings=r,e.hasZ=i.hasZ??!1,e.hasM=i.hasM??!1,e):null}function B5t(t,e,i){const r=zht(C_(t),i.paths,i.hasZ,i.hasM);return r?(e.paths=r,e.hasZ=i.hasZ??!1,e.hasM=i.hasM??!1,e):null}function Bht(t,e,i,r=i?.hasZ??!1,n=i?.hasM??!1){if(i!=null){const s=C_(t);e.points=SJ(r,n)(s,i.points),e.hasZ=r,e.hasM=n}return e}function Uht(t,e,i,r=i?.z!=null,n=i?.m!=null){if(i==null)return e;const s=C_(t);return e.x=yA(s,i.x),e.y=vA(s,i.y),r&&(e.z=eM(s,i.z)),n&&(e.m=tM(s,i.m)),e}function Hht(t,e,i,r=i?.hasZ??!1,n=i?.hasM??!1){if(i!=null){const s=C_(t);e.rings=ZTe(s,SJ(r,n),i.rings),e.hasZ=r,e.hasM=n}return e}function Ght(t,e,i,r=i?.hasZ??!1,n=i?.hasM??!1){if(i!=null){const s=C_(t);e.paths=ZTe(s,SJ(r,n),i.paths),e.hasZ=r,e.hasM=n}return e}function XTe(t,e,i,r,n,s){if(t==null)return null;const a=t.references("geometry")&&s?qht(e,r,s):e,o=t.repurposeFeature(a,n);try{return t.evaluate(o,i)}catch(l){return $e.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",l),null}}const rU=new Map;function qht(t,e,i){const{transform:r,hasZ:n,hasM:s}=i;rU.has(e)||rU.set(e,Wht(e));const a=rU.get(e)(t.geometry,r,n,s);return{...t,geometry:a}}function Wht(t){const e={};switch(t){case"esriGeometryPoint":return(i,r,n,s)=>Uht(r,e,i,n,s);case"esriGeometryPolygon":return(i,r,n,s)=>Hht(r,e,i,n,s);case"esriGeometryPolyline":return(i,r,n,s)=>Ght(r,e,i,n,s);case"esriGeometryMultipoint":return(i,r,n,s)=>Bht(r,e,i,n,s);default:return $e.getLogger("esri.views.2d.support.arcadeOnDemand").error(new ee("mapview-arcade",`Unable to handle geometryType: ${t}`)),i=>i}}const U5t=Object.freeze(Object.defineProperty({__proto__:null,default:XTe},Symbol.toStringTag,{value:"Module"})),Yht=t=>{if(!t)return[0,0,0,0];const{r:e,g:i,b:r,a:n}=t;return[e,i,r,255*n]};var yr;let $J=(yr=class{static findApplicableOverrides(e,i,r){if(e&&i){if(e.primitiveName){let n=!1;for(const s of r)if(s.primitiveName===e.primitiveName){n=!0;break}if(!n)for(const s of i)s.primitiveName===e.primitiveName&&r.push(s)}switch(e.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":if(e.effects)for(const n of e.effects)yr.findApplicableOverrides(n,i,r);if(e.symbolLayers)for(const n of e.symbolLayers)yr.findApplicableOverrides(n,i,r);break;case"CIMTextSymbol":break;case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":case"CIMSolidFill":case"CIMPictureFill":case"CIMHatchFill":case"CIMGradientFill":case"CIMVectorMarker":case"CIMCharacterMarker":case"CIMPictureMarker":if(e.effects)for(const n of e.effects)yr.findApplicableOverrides(n,i,r);if(e.markerPlacement&&yr.findApplicableOverrides(e.markerPlacement,i,r),e.type==="CIMVectorMarker"){if(e.markerGraphics)for(const n of e.markerGraphics)yr.findApplicableOverrides(n,i,r),yr.findApplicableOverrides(n.symbol,i,r)}else e.type==="CIMCharacterMarker"?yr.findApplicableOverrides(e.symbol,i,r):e.type==="CIMHatchFill"?yr.findApplicableOverrides(e.lineSymbol,i,r):e.type==="CIMPictureMarker"&&yr.findApplicableOverrides(e.animatedSymbolProperties,i,r)}}}static findEffectOverrides(e,i){if(!e)return null;if(e.type==="CIMGeometricEffectDashes"&&fSe(e),!i||!e.primitiveName)return{type:"cim-effect-param",effect:e,overrides:[]};const r=ple(e),n=e.primitiveName,s=[];for(const a of i)a.primitiveName===n&&s.push(ple(a));return{type:"cim-effect-param",effect:r,overrides:Ztt(s)}}static async resolveSymbolOverrides(e,i,r,n,s,a,o){if(!e?.symbol)return null;let{symbol:l,primitiveOverrides:c}=e;const h=!!c;if(!h&&!n)return l;l=de(l),c=de(c);let f=!0;if(i||(i={attributes:{}},f=!1),h){if(f||(c=c.filter(g=>!g.valueExpressionInfo?.expression.includes("$feature"))),o||(c=c.filter(g=>!g.valueExpressionInfo?.expression.includes("$view"))),c.length>0){const g=Btt(i.attributes),y={spatialReference:r,fields:g,geometryType:s};await yr.createRenderExpressions(c,y),yr.evaluateOverrides(c,i,s??"esriGeometryPoint",a,o,new UI(g))}yr.applyOverrides(l,c)}return n&&yr.applyDictionaryTextOverrides(l,i,n,null),l}static async createRenderExpressions(e,i){const r=[];for(const n of e){const s=n.valueExpressionInfo;if(!s||yr._expressionToRenderExpression.has(s.expression))continue;const a=Ett(s.expression,i.spatialReference);r.push(a),a.then(o=>yr._expressionToRenderExpression.set(s.expression,o))}r.length>0&&await Promise.all(r)}static evaluateOverrides(e,i,r,n,s,a){const o={$view:{scale:s?.scale}};for(const l of e){l.value&&typeof l.value=="object"&&$$e(l.value)&&(l.propertyName==="Color"||l.propertyName==="StrokeColor")&&(l.value=Yht(l.value));const c=l.valueExpressionInfo;if(!c)continue;const h=yr._expressionToRenderExpression.get(c.expression);h&&(l.value=XTe(h,i,o,r,a,n))}}static applyDictionaryTextOverrides(e,i,r,n,s="Normal"){if(e?.type)switch(e.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":case"CIMTextSymbol":{const a=e.symbolLayers;if(!a)return;for(const o of a)o&&o.type==="CIMVectorMarker"&&yr.applyDictionaryTextOverrides(o,i,r,n,e.type==="CIMTextSymbol"?e.textCase:s)}break;case"CIMVectorMarker":{const a=e.markerGraphics;if(!a)return;for(const o of a)o&&yr.applyDictionaryTextOverrides(o,i,r,n)}break;case"CIMMarkerGraphic":{const a=e.textString;if(a&&a.includes("[")){const o=Ltt(a,r);e.textString=Dtt(i,o,n,s)}}}}static applyOverrides(e,i,r,n){if(e.primitiveName){for(const s of i)if(s.primitiveName===e.primitiveName){const a=pA(s.propertyName);if(n&&n.push({cim:e,nocapPropertyName:a,value:e[a]}),r){let o=!1;for(const l of r)l.primitiveName===e.primitiveName&&(o=!0);o||r.push(s)}s.value!=null&&(e[a]=s.value)}}switch(e.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":if(e.effects)for(const s of e.effects)yr.applyOverrides(s,i,r,n);if(e.symbolLayers)for(const s of e.symbolLayers)yr.applyOverrides(s,i,r,n);break;case"CIMTextSymbol":break;case"CIMSolidStroke":case"CIMSolidFill":case"CIMVectorMarker":if(e.effects)for(const s of e.effects)yr.applyOverrides(s,i,r,n);if(e.type==="CIMVectorMarker"&&e.markerGraphics)for(const s of e.markerGraphics)yr.applyOverrides(s,i,r,n),yr.applyOverrides(s.symbol,i,r,n)}}static restoreOverrides(e){for(const i of e)i.cim[i.nocapPropertyName]=i.value}static buildOverrideKey(e){let i="";for(const r of e)r.value!==void 0&&(i+=`${r.primitiveName}${r.propertyName}${JSON.stringify(r.value)}`);return i}static toValue(e,i){if(e==="DashTemplate")return i.split(" ").map(r=>Number(r));if(e==="Color"){const r=new Ye(i).toRgba();return r[3]*=255,r}return i}},yr._expressionToRenderExpression=new Map,yr);const Zht=Object.freeze(Object.defineProperty({__proto__:null,OverrideHelper:$J},Symbol.toStringTag,{value:"Module"})),Xht=96/72;let JTe=class{constructor(e){this._spatialReference=e,this._imageDataCanvas=null,this._cimResourceManager=new Mht}get _canvas(){return this._imageDataCanvas||(this._imageDataCanvas=document.createElement("canvas")),this._imageDataCanvas}get resourceManager(){return this._cimResourceManager}async rasterizeCIMSymbolAsync(e,i,r,n,s,a,o,l,c,h){if(!e)return null;const{data:f}=e;if(!f||f.type!=="CIMSymbolReference"||!f.symbol)return null;const{symbol:g}=f;a||(a=kz(g));const y=await $J.resolveSymbolOverrides(f,i,this._spatialReference,s,a,o,l),b=this._cimResourceManager,_=[];du.fetchResources(y,b,_),du.fetchFonts(y,b,_),_.length>0&&await Promise.all(_);const{width:S,height:$}=r;let C=Wce(a,S,$,n,h);const I=du.getEnvelope(y,C,b);if(!I)return null;I.x===1/0&&(I.x=S+2),I.y===1/0&&(I.y=-$/2),I.width===-1/0&&(I.width=S),I.height===-1/0&&(I.height=$);let P=1,O=0,N=0;switch(g.type){case"CIMPointSymbol":case"CIMTextSymbol":{let G=1;I.width>S&&(G=S/I.width);let Y=1;I.height>$&&(Y=$/I.height),n==="preview"&&(I.width<S&&(G=S/I.width),I.height<$&&(Y=$/I.height)),P=Math.min(G,Y),O=I.x+I.width/2,N=I.y+I.height/2}break;case"CIMLineSymbol":if(h){N=I.y+I.height/2,O=I.x+I.width/2;const G=I.width-S,Y=I.height-$;C={paths:Gz(C.paths,{xmin:-1*I.width/2+G,xmax:I.width/2-G,ymin:-1*I.height/2+Y,ymax:I.height/2-Y,width:I.width-2*G,height:I.height-2*Y})}}else{(c||I.height>$)&&(P=$/I.height),N=I.y+I.height/2;const G=I.x*P+S/2,Y=(I.x+I.width)*P+S/2,Q=ka(C)?C.paths:jn(C)?C.rings:null;if(Q===null)throw new Error("Bad geometry, can't rasterise symbol!");Q[0][0][0]-=G/P,Q[0][2][0]-=(Y-S)/P}break;case"CIMPolygonSymbol":if(h){N=I.y+I.height/2,O=I.x+I.width/2;const G=I.width-S,Y=I.height-$;C={paths:Gz(C.rings,{xmin:-1*I.width/2+G,xmax:I.width/2-G,ymin:-1*I.height/2+Y,ymax:I.height/2-Y,width:I.width-2*G,height:I.height-2*Y})}}else{O=I.x+I.width/2,N=I.y+I.height/2;const G=I.x*P+S/2,Y=(I.x+I.width)*P+S/2,Q=I.y*P+$/2,ae=(I.y+I.height)*P+$/2,{rings:ce}=C;G<0&&(ce[0][0][0]-=G,ce[0][3][0]-=G,ce[0][4][0]-=G),Q<0&&(ce[0][0][1]+=Q,ce[0][1][1]+=Q,ce[0][4][1]+=Q),Y>S&&(ce[0][1][0]-=Y-S,ce[0][2][0]-=Y-S),ae>$&&(ce[0][2][1]+=ae-$,ce[0][3][1]+=ae-$)}}const R={type:"cim",data:{type:"CIMSymbolReference",symbol:y}};return this.rasterize(R,S,$,O,N,P,a,1,C)}rasterize(e,i,r,n,s,a,o,l=0,c=null,h=window.devicePixelRatio||1){const{data:f}=e;if(!f||f.type!=="CIMSymbolReference"||!f.symbol)return null;const{symbol:g}=f,y=this._canvas,b=h*Xht;y.width=i*b,y.height=r*b,o||(o=kz(g)),c||(c=Wce(o,i,r,"legend")),y.width+=2*l,y.height+=2*l;const _=y.getContext("2d",{willReadFrequently:!0}),S=Zs.createIdentity();return S.translate(-n,-s),S.scale(a*b,-a*b),S.translate(i*b/2+l,r*b/2+l),_.clearRect(0,0,y.width,y.height),new jTe(_,this._cimResourceManager,S,!0).drawSymbol(g,c),_.getImageData(0,0,y.width,y.height)}};function Jht(t,e,i,r){return e==="esriGeometryPolygon"?{rings:zce(Gz(t.rings,{xmin:0,ymin:0,width:i,height:r}),-1*i/2,-1*r/2)}:e==="esriGeometryPolyline"?{paths:zce(Gz(t.paths,{xmin:0,ymin:0,width:i,height:r}),-1*i/2,-1*r/2)}:null}function Wce(t,e,i,r,n){const a=-e/2+1,o=e/2-1,l=i/2-1,c=-i/2+1;if(n&&(t==="esriGeometryPolygon"||t==="esriGeometryPolyline")){const h=Jht(n,t,e,i);if(h)return h}switch(t){case"esriGeometryPoint":return{x:0,y:0};case"esriGeometryPolyline":return{paths:[[[a,0],[0,0],[o,0]]]};default:return r==="legend"?{rings:[[[a,l],[o,0],[o,c],[a,c],[a,l]]]}:{rings:[[[a,l],[o,l],[o,c],[a,c],[a,l]]]}}}const G5t=Object.freeze(Object.defineProperty({__proto__:null,CIMSymbolRasterizer:JTe},Symbol.toStringTag,{value:"Module"})),VD=new JTe(null),_L=Xi(22),Yce=Xi(120),nU=Xi(50),Kht=1;async function Qht(t,e,i){const r=e?.size;let n=r!=null&&typeof r=="object"&&"width"in r?r.width:r,s=r!=null&&typeof r=="object"&&"height"in r?r.height:r;if(!n||!s)if(i==="esriGeometryPolygon")n=s=e.maxSize?Math.min(e.maxSize,_L):_L;else{const a=await TJ(t,e,i);a&&(n=a.width,s=a.height),i==="esriGeometryPolyline"&&(n=e.maxSize?Math.min(e.maxSize,nU):nU),n=n!=null&&isFinite(n)?Math.min(n,Yce):_L,s=s!=null&&isFinite(s)?Math.max(Math.min(s,Yce),Kht):_L}return e.style==="legend"&&i==="esriGeometryPolyline"&&(n=nU),{width:n,height:s}}async function TJ(t,e={},i){const r=e.cimOptions||e;i??=r.geometryType||kz(t?.data?.symbol);const{feature:n,fieldMap:s,viewParams:a}=r,o=await $J.resolveSymbolOverrides(t.data,n,null,s,i,null,a);if(!o)return null;(t=t.clone()).data={type:"CIMSymbolReference",symbol:o},t.data.primitiveOverrides=void 0;const l=[];return du.fetchResources(o,VD.resourceManager,l),du.fetchFonts(o,VD.resourceManager,l),l.length>0&&await Promise.all(l),du.getEnvelope(o,null,VD.resourceManager)}async function ept(t,e={}){const{node:i,opacity:r,symbolConfig:n}=e,s=n!=null&&typeof n=="object"&&"isSquareFill"in n&&n.isSquareFill,a=e.cimOptions||e,o=a.geometryType||kz(t?.data?.symbol),l=await Qht(t,e,o),{feature:c,fieldMap:h}=a,f=e?.geometry||s||o!=="esriGeometryPolygon"?"preview":"legend";let g=l;const y=l;if(e?.geometry&&(o==="esriGeometryPolygon"||o==="esriGeometryPolyline")&&(Fi(l.width)<200||Fi(l.height)<200)){const R=l.width>l.height?Xi(200)*l.height/l.width:Xi(200);g={width:l.width>l.height?Xi(200):Xi(200)*l.width/l.height,height:R}}const b=await VD.rasterizeCIMSymbolAsync(t,c,g,f,h,o,null,a.viewParams,a.allowScalingUp,e?.geometry?.toJSON());if(!b)return null;const{width:_,height:S}=b,$=document.createElement("canvas");$.width=_,$.height=S,$.getContext("2d").putImageData(b,0,0);const C=Fi(y.width),I=Fi(y.height),P=new Image(C,I);P.src=$.toDataURL(),P.ariaLabel=e.ariaLabel??null,P.alt=e.ariaLabel??"",r!=null&&(P.style.opacity=`${r}`);let O=P;if(e.cssEffectFilter){const N={shape:{type:"image",x:0,y:0,width:C,height:I,src:P.src},fill:null,stroke:null,offset:[0,0]};O=JT([[N]],[C,I],e)}return i&&O&&i.appendChild(O),O}const tpt=Object.freeze(Object.defineProperty({__proto__:null,getCIMSymbolPreviewSize:TJ,previewCIMSymbol:ept},Symbol.toStringTag,{value:"Module"})),Mq=30,Aq=12,Pq=24,KTe=[255,255,255],Wz=[200,200,200],G0=[128,128,128],ipt=20,rpt=5;function npt(t){return t.declaredClass==="esri.symbols.SimpleMarkerSymbol"}function spt(t){return t.declaredClass==="esri.symbols.PictureMarkerSymbol"}function apt(t){return t.declaredClass==="esri.symbols.SimpleLineSymbol"}function opt(t){return t.declaredClass==="esri.symbols.TextSymbol"}function lpt(t,e){const i=t.length-1;return t.map((r,n)=>rTe(r,n,i,e))}async function cpt(t,e,i,r,n,s,a){const o=e.legendOptions,l=o?.customValues,c=a||await hpt(t,i),h=e.stops,f=!!c,g=!!l,y=e.minSize!=null&&e.maxSize!=null,b=h&&h.length>1,_=!!e.target;if(!f||!g&&!(y||b&&!_))return;const S=KN(c);let $=!1,C=null,I=null;C=S&&!b?Nz([e.minDataValue,e.maxDataValue]):l??await fpt(e,c,r,n?.type);const P=t?.authoringInfo,O=P?.type==="univariate-color-size",N=O&&P?.univariateTheme==="above-and-below",R=!!xp(t,"reference-size"),G=!!xp(t,"spike");if(!C&&b&&(C=h.map(ne=>ne.value),$=h.some(ne=>!!ne.label),t.type==="flow"&&(C=Nz(C)),$&&(I=h.map(ne=>ne.label))),S&&C!=null&&C?.length>2&&!N&&(C=[C[0],C[C.length-1]]),!C)return null;O&&C?.length!==5&&(C=tke({minSize:C[0],maxSize:C[C.length-1]}));const Y=S?upt(t,C):null,Q=tot(c),ae=$?null:lpt(C,s);return(await Promise.all(C.map(async(ne,K)=>{let le=S?Y[K]:await lS(e,c,ne,r,n?.type),re=le;R&&(le*=Pq/e.maxSize||1,re=Pq);const he=ypt(c,le,t,K);return G&&he.type==="cim"&&(re=await TJ(he)),{value:ne,symbol:he,label:$?I[K]:ae[K],size:re,outlineSize:Q}}))).reverse()}function upt(t,e){const i=t?.authoringInfo,r=i?.type==="univariate-color-size";let n=[Aq,Mq];if(r){const s=e[0],a=e[e.length-1],o=Aq,l=Mq;n=e.map(c=>o+(c-s)/(a-s)*(l-o))}return r&&i?.univariateTheme==="below"&&n.reverse(),n}function dpt(t,e){const i=t.classBreakInfos,r=i.length,n=r<2||!(e>=2)?i[0].symbol.clone():i[r-1].symbol.clone();return t.visualVariables?.some(a=>a.type==="color")&&(n.type.includes("3d")?QTe(n):eke(n)),n}async function hpt(t,e){if(t.type==="flow")return nTe(t,e);if(t.type==="pie-chart")return new Gr({color:null,outline:t.outline?.width?t.outline:new en});let i=null,r=null;if(t.type==="simple")i=t.symbol;else if(t.type==="class-breaks"){const n=t.classBreakInfos;i=n&&n[0]&&n[0].symbol,r=n.length>1}else if(t.type==="unique-value"){const n=t.uniqueValueInfos;i=n?.[0]?.symbol,r=n!=null&&n.length>1}if(!i||ppt(i))return null;if(i=i.clone(),e||r)if(i.type.includes("3d"))QTe(i);else if(xp(t,"reference-size")&&i.type==="cim")dJ(i,{color:e??(t.type!=="class-breaks"?new Ye(Wz):null)});else if(xp(t,"spike")&&i.type==="cim"){const n=new Ye(Wz),s=new Ye(G0),a=i.data.symbol?.type==="CIMPointSymbol"?i.data.symbol:null,o=!!a?.symbolLayers?.find(({type:h})=>h==="CIMSolidStroke")?.colorLocked;let l,c=e??void 0;if(c){const h=P$e(c),f=Vge();(!f&&h>225||f&&h<25)&&(c=n,l=o?s:n)}else c=n,l=o?s:n;lTe(i,{color:c,strokeColor:l})}else eke(i);return i}function ppt(t){return Bd(t)?t.symbolLayers?.some(e=>e?.type==="fill")??!1:t?.type.includes("fill")??!1}function QTe(t){t.type==="line-3d"?t.symbolLayers.forEach(e=>{e.material={color:G0}}):t.symbolLayers.forEach(e=>{e.type!=="icon"||e.resource?.href?e.material={color:Wz}:(e.material={color:KTe},e.outline={color:G0,size:1.5})})}function eke(t){const e=Vge();t.type==="cim"?s$e(t,new Ye(Wz)):t.type.includes("line")?t.color=G0:(t.color=e?G0:KTe,t.type==="simple-marker"&&(t.outline?t.outline?.color?.toHex()==="#ffffff"&&(t.outline.color=G0):t.outline={color:G0,width:1.5}))}async function fpt(t,e,i,r){const n=(await fe(async()=>{const{getSizeRangeAtScale:o}=await Promise.resolve().then(()=>$_);return{getSizeRangeAtScale:o}},void 0)).getSizeRangeAtScale(t,i,r),s=n&&tke(n);if(!n||!s)return;let a=s.map(o=>mpt(o,t,n));a=Nz(a);for(let o=1;o<a.length-1;o++){const l=await gpt(t,e,a[o],a[o-1],i,r);l&&(a[o]=l[0],s[o]=l[1])}return a}function tke(t){const e=t.minSize,i=t.maxSize,r=rpt,n=(i-e)/(r-1),s=[];for(let a=0;a<r;a++)s.push(e+n*a);return s}function mpt(t,e,i){const r=i.minSize,n=i.maxSize,s=e.minDataValue,a=e.maxDataValue;let o;return t<=r?o=s:t>=n?o=a:o=(t-r)/(n-r)*(a-s)+s,o}async function gpt(t,e,i,r,n,s){const a=await lS(t,e,i,n,s),o=await lS(t,e,r,n,s),l=Fz(i),c=l.fractional,h=ipt;let f=l.integer,g=null,y=null;i>0&&i<1&&(g=10**c,f=Fz(i*=g).integer);for(let b=f-1;b>=0;b--){const _=10**b;let S=Math.floor(i/_)*_,$=Math.ceil(i/_)*_;g!=null&&(S/=g,$/=g);let C=(S+$)/2;[,C]=Nz([S,C,$],{indexes:[1]});const I=await lS(t,e,S,n,s),P=await lS(t,e,$,n,s),O=await lS(t,e,C,n,s),N=OD(a,I,o,null),R=OD(a,P,o,null),G=OD(a,O,o,null);let Y=N.previous<=h,Q=R.previous<=h;if(Y&&Q&&(N.previous<=R.previous?(Y=!0,Q=!1):(Q=!0,Y=!1)),Y?y=[S,I]:Q?y=[$,P]:G.previous<=h&&(y=[C,O]),y)break}return y}async function lS(t,e,i,r,n){const{getSize:s}=await fe(()=>Promise.resolve().then(()=>$_),void 0);return s(t,i,{scale:r,view:n,shape:e.type==="simple-marker"?e.style:null})}function ypt(t,e,i,r){i?.authoringInfo?.type==="univariate-color-size"&&i?.authoringInfo?.univariateTheme==="above-and-below"&&i.type==="class-breaks"&&(t=dpt(i,r));const n=t.clone();if(Bd(n))KN(n)||n.symbolLayers.forEach(s=>{s.type!=="fill"&&(s.size=e)});else if(npt(n))n.size=e;else if(spt(n)){const s=n.width,a=n.height;n.height=e,n.width=e*(s/a)}else apt(n)?n.width=e:opt(n)?n.font&&(n.font.size=e):n.type==="cim"&&xp(i,"reference-size")?dJ(n,{innerDotSize:e,outerRingSize:Pq}):n.type==="cim"&&xp(i,"spike")&&lTe(n,{defaultHeight:e,primitiveOverrides:null});return n}function vpt(t){const i=Math.floor(Math.log10(Math.abs(t)))+1,r=i<4||i>6?4:i,n=1e6,s=Math.abs(t)>=n?"compact":"standard";return Sv(t,{notation:s,minimumSignificantDigits:2,maximumSignificantDigits:r})}const Zce=16,bpt="https://utility.arcgis.com/sharing/tools/legend",wpt="esri.layers.ImageryLayer",_pt="esri.layers.ImageryTileLayer",xpt="esri.layers.WCSLayer",xL=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i,Spt=new Gt({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"}),SL=new Gr({size:6,outline:{color:[128,128,128,.5],width:.5}}),$pt=new Zi({style:"solid"});function Oq(t){return t.type==="flow"}function ike(t){return t.type==="vector-field"}function rke(t){return t.type==="raster-colormap"}function nke(t){return t.type==="raster-stretch"}function ske(t){return t.type==="raster-shaded-relief"}function cS(t){return t.declaredClass==="esri.renderers.SimpleRenderer"}function w0(t){return t.declaredClass==="esri.renderers.ClassBreaksRenderer"}function _0(t){return t.declaredClass==="esri.renderers.UniqueValueRenderer"}function ake(t){return t.declaredClass==="esri.renderers.HeatmapRenderer"}function Tpt(t){return kJ(t)||EJ(t)||CJ(t)||kpt(t)}function kpt(t){return t.declaredClass==="esri.renderers.PointCloudRGBRenderer"}function kJ(t){return t.declaredClass==="esri.renderers.PointCloudClassBreaksRenderer"}function EJ(t){return t.declaredClass==="esri.renderers.PointCloudStretchRenderer"}function CJ(t){return t.declaredClass==="esri.renderers.PointCloudUniqueValueRenderer"}function oke(t){return t.declaredClass==="esri.renderers.DotDensityRenderer"}function lke(t){return t.declaredClass==="esri.renderers.PieChartRenderer"}function Ept(t,e){return cS(t)||w0(t)||_0(t)||ake(t)||oke(t)||lke(t)?e.type==="2d"||Q$e(t):nke(t)||rke(t)||ske(t)||kJ(t)||EJ(t)||CJ(t)||ike(t)||Oq(t)}function Cpt(t){return t.declaredClass==="esri.layers.BuildingSceneLayer"}function sU(t){return t.declaredClass==="esri.layers.SubtypeGroupLayer"}function Ipt(t){return t.declaredClass==="esri.layers.VoxelLayer"}function Mpt(t){return t.declaredClass==="esri.layers.WMSLayer"}function Apt(t){return t.declaredClass==="esri.layers.WMTSLayer"}function aU(t){return t.declaredClass==="esri.layers.MapImageLayer"}function Xce(t){return t.declaredClass==="esri.layers.TileLayer"}function q1(t){return t.declaredClass===wpt}function $L(t){return t.declaredClass===_pt}function Ppt(t){return t.declaredClass===xpt}function Opt(t){return t.type==="stretch-ramp"}function Lpt(t){return("authoringInfo"in t?t?.authoringInfo:null)?.type==="univariate-color-size"}function Dpt(t){const e="authoringInfo"in t?t?.authoringInfo:null;return e?.type==="univariate-color-size"&&e?.univariateTheme==="above-and-below"}function Jce(t){return"sublayers"in t}function Kce(t){return t&&"symbol"in t}function Rpt(t,e){const{field:i,field2:r,field3:n,fieldDelimiter:s,valueExpression:a}=t;if(!i)return null;const o=!i&&!a||!r&&!n?[e]:e?.toString().split(s||""),l=i?{[i]:o?.[0]}:null;return l&&(r&&(l[r]=o?.[1]),n&&(l[n]=o?.[2])),l}const zpt=new Gr({style:"path",path:"M10,5 L5,0 0,5 M5,0 L5,15",size:15,outline:{width:1,color:[85,85,85,1]}});let W1={};const oU=new WeakMap;let on=class extends lt{constructor(t){super(t),this._hasColorRamp=!1,this._hasOpacityRamp=!1,this._hasSizeRamp=!1,this._loading=!1,this._webStyleSymbolCache=new Map,this._dotDensityUrlCache=new Map,this._scaleDrivenSizeVariable=null,this._clusterSizeVariable=null,this._layerDefinitionExpression=null,this._layerDefinitionExpressionClause=null,this._layerDisplayFilter=null,this._layerDisplayFilterClause=null,this.children=new We,this.layerView=null,this.layer=null,this.legendElements=[],this.parent=null,this.hideLayersNotInCurrentView=!1,this.keepCacheOnDestroy=!1,this.respectLayerDefinitionExpression=!1,this.respectLayerVisibility=!0,this.sublayerIds=[],this.title=null,this.view=null}initialize(){const t=()=>this.notifyChange("ready");this.addHandles([Oa(()=>this.children,"change",e=>{const{added:i,removed:r}=e;i.forEach(n=>{const s=`activeLayerInfo-ready-watcher-${n.layer.uid}`;this.addHandles(ze(()=>n.ready,t,Di),s)}),r.forEach(n=>this.removeHandles(n.layer.uid)),t()})]),this.keepCacheOnDestroy||(W1={})}destroy(){this._webStyleSymbolCache=null,this._dotDensityUrlCache=null,this._scaleDrivenSizeVariable=null,this.keepCacheOnDestroy||(W1=null),this._layerDefinitionExpressionClause=null}get cssEffectFilter(){const{layer:t,scale:e}=this,i="effect"in t?t.effect:null;if(!i)return null;const r=new hd({effect:i});return r.endTransition(),r.scale=e,got(r)}get loading(){return this.children.length>0?this.children.some(t=>t.loading):this._loading}get opacity(){const t=this.layer.opacity,e=this.parent?.opacity,i=this.layer.parent,r=i&&"uid"in i?this._getParentLayerOpacity(i):null;return e!=null?e*t:r!=null?r*t:t}get ready(){return this.layer===null||(this.children.length>0?this._isGroupActive():this.legendElements.length>0)}get scale(){return this.view?.scale??0}get isScaleDriven(){const t=this.layer;if(t===null)return!1;if("effect"in t&&t.effect&&Array.isArray(t.effect))return!0;if("featureReduction"in t&&t.featureReduction){if(t.featureReduction.type==="cluster")return!0;if(t.featureReduction.type==="binning"&&"renderer"in t.featureReduction&&t.featureReduction.renderer)return this._isRendererScaleDriven(t.featureReduction.renderer)}return"renderer"in t&&t.renderer?!!("displayFilterInfo"in t&&t.displayFilterInfo&&_0(t.renderer))||this._isRendererScaleDriven(t.renderer):this._isLayerScaleDriven(this.layer)}get version(){return this._get("version")+1}async buildLegendElementsForFeatureCollections(t){if(this._loading=!0,!(!this.hideLayersNotInCurrentView||await this._isLayerInCurrentView()))return this.legendElements=[],this._loading=!1,void this.notifyChange("ready");const e=Array.from(t,i=>{if(IZ(i))return this._getRendererLegendElements(i.renderer,{title:i.title});if(i.featureSet?.features.length){const r=i.layerDefinition,n=r?.drawingInfo,s=n&&Hit(n.renderer),a=Spt.read(r.geometryType);return s?this._getRendererLegendElements(s,{title:i.name,geometryType:a}):($e.getLogger(this).warn("drawingInfo not available!"),null)}return null});try{const i=[],r=await Promise.allSettled(e);for(const n of r)if(n.status==="fulfilled")for(const s of n.value??[])i.push(s);this.legendElements=i}catch(i){$e.getLogger(this).warn("error while building legend for layer!",i)}finally{this._loading=!1,this.notifyChange("ready")}}async buildLegendElementsForRenderer(t){try{this._loading=!0;const e=!this.hideLayersNotInCurrentView||await this._isLayerInCurrentView();this.legendElements=e?await this._getRendererLegendElements(t):[]}catch(e){$e.getLogger(this).warn("error while building legend for layer!",e)}finally{this._loading=!1,this.notifyChange("ready")}}async buildLegendElementsForFeatureReduction(t){try{this._loading=!0,await this._waitForLayerViewUpdate(this.layerView);const e=!this.hideLayersNotInCurrentView||await this._isLayerInCurrentView();this.legendElements=e?await this._getLegendElementsForFeatureReduction(t):[]}catch(e){$e.getLogger(this).warn("error while building legend for layer!",e)}finally{this._loading=!1,this.notifyChange("ready")}}async buildLegendElementsForTools(){this._loading=!0;const t=this.layer;if(Ipt(t))await this._constructLegendElementsForVoxelLayer();else if(Apt(t))this._constructLegendElementsForWMTSlayer();else if(Mpt(t))await this._constructLegendElementsForWMSSublayers();else if(Cpt(t))await this._constructLegendElementsForBuildingSceneLayer();else if(aU(t)||Xce(t)||sU(t))await this._constructLegendElementsForSublayers();else{this.removeHandles("imageryLayers-watcher");let e="default";if(q1(t)&&(e=(t?.rasterFunction?.functionName||"default")+"_"+(t.bandIds?.length?t.bandIds.join(""):"###")),$L(t)||t.type==="link-chart")return;await this._getLegendLayers(`${t.uid}-${e}`).then(async i=>{this.legendElements=[];const r=i.map(async n=>{if(q1(t)){const a=ze(()=>[t.rasterFunction,t.bandIds],()=>ST(async()=>{W1.default=null,t.renderer?await this.buildLegendElementsForRenderer(t.renderer):await this.buildLegendElementsForTools()})());this.addHandles(a,"imageryLayers-watcher")}const s=this._generateSymbolTableElementForLegendLayer(n);s?.infos.length&&(q1(t)&&(s.title=t.title),this.legendElements.push(s))});await Promise.allSettled(r)}).catch(i=>{$e.getLogger(this).warn("Request to server for legend has failed!",i)})}this._loading=!1,this.notifyChange("ready")}async _isLayerInCurrentView(t){return this._checkFeatureCountForExpression(t,this.view.extent)}_getParentLayerOpacity(t){let e=1;const i=t.parent;return i&&"uid"in i&&(e=this._getParentLayerOpacity(i)),t.opacity*e}_isGroupActive(){return this.children.some(t=>t.ready)}_isRendererScaleDriven(t){if(t.type==="dot-density")return!0;const e="valueExpression"in t?t.valueExpression:null;return xL.test(e)?!0:!!("visualVariables"in t?t.visualVariables:null)?.some(r=>this._isScaleDrivenSizeVariable(r))||this._hasScaleDrivenSymbols(t)}_hasScaleDrivenSymbols(t){switch(t.type){case"simple":return this._isScaleDrivenSymbol(t.symbol);case"class-breaks":return this._isScaleDrivenSymbol(t.defaultSymbol)||t.classBreakInfos.some(e=>this._isScaleDrivenSymbol(e.symbol));case"unique-value":return this._isScaleDrivenSymbol(t.defaultSymbol)||!!t.uniqueValueInfos?.some(e=>this._isScaleDrivenSymbol(e.symbol))}return!1}_isScaleDrivenSymbol(t){if(t?.type==="cim"){const{primitiveOverrides:e,minScale:i,maxScale:r}=t.data,n=e?.some(s=>(s.valueExpressionInfo?.expression||"").includes("$view.scale"))??!1;return i!=null||r!=null||n}return!1}_isScaleDrivenSizeVariable(t){if(t&&t.type!=="size")return!1;const e=t,i=e.minSize,r=e.maxSize;return!(typeof i!="object"||!i||!this._isScaleDrivenSizeVariable(i))||!(typeof r!="object"||!r||!this._isScaleDrivenSizeVariable(r))||xL.test(e.valueExpression)}_isLayerScaleDriven(t){if("minScale"in t&&t.minScale>0||"maxScale"in t&&t.maxScale>0)return!0;if("sublayers"in t&&t.sublayers)return t.sublayers.some(i=>this._isLayerScaleDriven(i));const e=t.parent;if(t.loaded===!1&&e&&aU(e)&&"source"in t&&t.source&&t.source.type==="map-layer"){for(const i of e.sourceJSON.layers??[])if(i.id===t.source.mapLayerId&&(i.minScale>0||i.maxScale>0))return!0}return!1}async _constructLegendElementsForVoxelLayer(){this._loading=!0,this.legendElements=[],this.removeHandles("voxel-style-watcher"),this.removeHandles("voxel-current-variable");const t=this.layer;this.addHandles(ze(()=>t.currentVariableId,()=>this._constructLegendElementsForVoxelLayer()),"voxel-current-variable"),this.addHandles(ze(()=>t.getVariableStyles(),()=>this._constructLegendElementsForVoxelLayer()),"voxel-style-watcher");const e=t.getVariableStyle(null),i=[];if(e){if(e.uniqueValues?.length){const r=[];e.uniqueValues.forEach(n=>{n.enabled&&r.push({label:n.label||`${n.value}`,value:n.value,symbol:new Zi({color:n.color,outline:null})})}),r.length&&i.push({type:"symbol-table",title:e.label,infos:r})}else if(e.transferFunction){const{colorStops:r,stretchRange:n}=e.transferFunction,s=r.toArray().reverse(),a=n.map((l,c)=>`${c===0?tTe:iTe} ${vpt(l)}`).reverse(),o=s.map(l=>({color:l.color,value:null,label:null}));o[0].label=a[0],o[o.length-1].label=a[1],i.push({type:"color-ramp",title:e.label,infos:o,preview:y0(s.map(l=>l.color))})}}await this._generatePreviewsForLegendElements(i,{opacity:t.opacity}),this.legendElements=i,this._loading=!1,this.notifyChange("ready")}_constructLegendElementsForWMTSlayer(){this._loading=!0,this.legendElements=[],this.removeHandles("wmts-activeLayer-watcher");const t=this.layer.activeLayer;this.addHandles(ze(()=>{const{layer:i}=this;return i&&"activeLayer"in i&&i.activeLayer},()=>this._constructLegendElementsForWMTSlayer()),"wmts-activeLayer-watcher");const e=t.styleId?t.styles?.find(({id:i})=>i===t.styleId)?.legendUrl:void 0;e&&(this.legendElements=[{type:"symbol-table",title:t.title,infos:[{src:e,opacity:this.opacity}]}]),this._loading=!1,this.notifyChange("ready")}async _constructLegendElementsForWMSSublayers(){this._loading=!0,this.legendElements=[],this.removeHandles("wms-sublayers-watcher");const t=this.layer;let e=null;(t.customParameters||t.customLayerParameters)&&(e={...t.customParameters,...t.customLayerParameters}),this.addHandles(ze(()=>{const{layer:i}=this;return i&&"sublayers"in i&&i.sublayers},()=>this._constructLegendElementsForWMSSublayers()),"wms-sublayers-watcher"),this.legendElements=await this._generateLegendElementsForWMSSublayers(t.sublayers,e),this._loading=!1,this.notifyChange("ready")}async _generateLegendElementsForWMSSublayers(t,e){const i=this.layer,r=[];this.addHandles(t.on("change",()=>this._constructLegendElementsForWMSSublayers()),"wms-sublayers-watcher");const n=this.sublayerIds?.map(a=>i.findSublayerById(a))?.filter(un)??[],s=n.length?n:t.toArray();for(const a of s){const o=ze(()=>[a.title,a.visible,a.legendEnabled],()=>this._constructLegendElementsForWMSSublayers());if(this.addHandles(o,"wms-sublayers-watcher"),!this.respectLayerVisibility||a.visible&&a.legendEnabled){const l=await this._generateSymbolTableElementForWMSSublayer(a,e);l?.infos.length&&r.unshift(l)}}return r}async _generateSymbolTableElementForWMSSublayer(t,e){if(!t.legendUrl&&t.sublayers){const i=(await this._generateLegendElementsForWMSSublayers(t.sublayers,e)).filter(r=>r);return{type:"symbol-table",title:t.title,infos:i}}return this._generateSymbolTableElementForLegendUrl(t,e)}async _generateSymbolTableElementForLegendUrl(t,e){let i=t.legendUrl;if(!i)return;const r={type:"symbol-table",title:t.title||t.name||String(t.id??""),infos:[]};e&&(i=uC(i,e));let n=null;const s=t.layer?.opacity;try{n=(await Nt(i,{responseType:"image"})).data,n&&(n.style.opacity=s)}catch{}return r.infos.push({src:i,preview:n,opacity:s}),r}_getLegendLayers(t,e){const i=W1&&W1[t];return i?Promise.resolve(i):this._legendRequest(e).then(r=>{const n=r.layers;return W1[t]=n,n})}_legendRequest(t){const e=this.layer;let i={f:"json",dynamicLayers:t};if(q1(e)){const n=e.exportImageServiceParameters.rasterFunction;if(n&&(i.renderingRule=JSON.stringify(n.functionDefinition?.toJSON()||n.toJSON())),e.bandIds&&(i.bandIds=e.bandIds.join()),e.raster||e.viewId||e.customParameters){const{raster:s,viewId:a,customParameters:o}=e;i={raster:s,viewId:a,...i,...o}}}let r=e.url.replace(/(\/)+$/,"");if("version"in e&&+e.version>=10.01){const n=r.indexOf("?");n>-1?r=r.slice(0,n)+"/legend"+r.slice(n):r+="/legend"}else{const n=r.toLowerCase().indexOf("/rest/"),s=n===-1?r:r.slice(0,n)+r.slice(n+5);r=bpt+"?soapUrl="+encodeURI(s)+"&returnbytes=true"}return Nt(r,{query:i}).then(n=>n.data)}async _constructLegendElementsForBuildingSceneLayer(){this._loading=!0,this.legendElements=[],this.removeHandles("sublayers-watcher");const t=this.layer;this.addHandles(ze(()=>t.sublayers,()=>this._constructLegendElementsForBuildingSceneLayer()),"sublayers-watcher");try{this.legendElements=await this._generateLegendElementsForBuildingSublayers(t.sublayers,this.opacity)}catch(e){$e.getLogger(this).warn("Request to server for legend has failed!",e)}finally{this._loading=!1,this.notifyChange("ready")}}async _generateLegendElementsForBuildingSublayers(t,e){let i=[];this.addHandles(t.on("change",()=>this._constructLegendElementsForBuildingSceneLayer()),"sublayers-watcher");const r=t.toArray();for(const n of r){const s=ze(()=>["renderer"in n&&n.renderer,n.opacity,n.title,n.visible],()=>this._constructLegendElementsForBuildingSceneLayer());if(this.addHandles(s,"sublayers-watcher"),!this.respectLayerVisibility||n.visible){const a=n?.opacity!=null?n.opacity:null,o=a!=null?a*e:e;if(n.type==="building-group"){const l={type:"symbol-table",title:n.title,infos:[]},c=await this._generateLegendElementsForBuildingSublayers(n.sublayers,o);l.infos.push(...c),i=[l,...i]}else n.renderer&&(i=[...await this._getRendererLegendElements(n.renderer,{title:n.title,opacity:o,sublayer:n}),...i])}}return i.filter(n=>!!n&&(!("infos"in n)||!n.infos||n.infos.length>0))}async _constructLegendElementsForSublayers(){this._loading=!0,this.removeHandles("sublayers-watcher");const t=this.layer;if(!(aU(t)||Xce(t)||sU(t))||this.hideLayersNotInCurrentView&&!await this._isLayerInCurrentView())return this.legendElements=[],this._loading=!1,void this.notifyChange("ready");this.addHandles(ze(()=>t.sublayers,()=>this._constructLegendElementsForSublayers),"sublayers-watcher");try{this.legendElements=await this._generateLegendElementsForSublayers(t.sublayers,this.opacity)}catch(e){$e.getLogger(this).warn("Request to server for legend has failed!",e)}finally{this._loading=!1,this.notifyChange("ready")}}async _generateLegendElementsForSublayers(t,e,i){const r=this.layer;let n=[];this.addHandles(t.on("change",()=>this._constructLegendElementsForSublayers()),"sublayers-watcher");let s=t.toArray();!i&&this.sublayerIds&&this.sublayerIds.length&&(s=sU(r)?this.sublayerIds.map(a=>r.findSublayerForSubtypeCode(a)).filter(un):this.sublayerIds.map(a=>r.findSublayerById(a)).filter(un));for(const a of s){const o=ze(()=>[a.renderer,a.opacity,a.title,a.visible,a.legendEnabled],()=>this._constructLegendElementsForSublayers());this.addHandles(o,"sublayers-watcher");const l=a.createQuery().where,c=!this.hideLayersNotInCurrentView||await this._isLayerInCurrentView(l),h=!this.respectLayerVisibility||a.visible&&a.legendEnabled&&this._isSublayerInScale(a);if(c&&h){const f=a?.opacity!=null?a.opacity:null,g=f!=null?f*e:e,y=!Jce(a)||a.originIdOf("renderer")>2&&!a.sublayers;if(a.renderer&&y)await a.load(),n=[...await this._getRendererLegendElements(a.renderer,{title:a.title,opacity:g,sublayer:a}),...n];else if(Jce(a)){const b=await this._generateSymbolTableElementForSublayer(a,g,i);b&&n.unshift(b)}}}return n.filter(a=>!!a&&(!("infos"in a)||!a.infos||a.infos.length>0))}async _generateSymbolTableElementForSublayer(t,e,i){if(!i){i=new Map;const n=this.layer,s=t.source;let a=null;if(!(!s||s.type==="map-layer"&&s.mapLayerId===t.id&&(!s.gdbVersion||s.gdbVersion===("gdbVersion"in n&&n.gdbVersion)))||t.originIdOf("renderer")>2||t.originIdOf("labelingInfo")>2||t.originIdOf("labelsVisible")>2){const l=new Qc({layer:this.layer});a=l.hasDynamicLayers?l.dynamicLayers:null,l.destroy()}const o=a||`${n.uid}-default`;(await this._getLegendLayers(o,a)).forEach(l=>i.set(l.layerId,l))}const r=i.get(t.id);if((!r||r?.subLayerIds&&r.defaultVisibility)&&t.sublayers){const n=await this._generateLegendElementsForSublayers(t.sublayers,e,i);return{type:"symbol-table",title:t.title,infos:n}}return this._generateSymbolTableElementForLegendLayer(r,t,e)}_generateSymbolTableElementForLegendLayer(t,e,i){if(!t?.legend||this.respectLayerVisibility&&!this._isLegendLayerInScale(t,e))return null;const r=e?.renderer;let n=e?.title||t.layerName;if(r&&(!e||e?.originIdOf("renderer")>2)){const o=e?.title||this._getRendererTitle(r,e);o&&(n&&typeof o!="string"&&"title"in o&&(o.title=n),n=o)}const s={type:"symbol-table",title:n,legendType:t.legendType||null,infos:[]},a=e?this._sanitizeLegendForSublayer(t.legend.slice(),e):t.legend;return t.legendGroups&&t.legendGroups.length>0?t.legendGroups.forEach(o=>{const l={type:"symbol-table",title:o.heading,legendType:t.legendType||null,infos:this._generateSymbolTableElementInfosForLegendLayer(a.filter(c=>c.groupId===o.id),t.layerId,o.heading||s.title||e?.title,i)};l.infos?.length>0&&s.infos.push(l)}):s.infos=this._generateSymbolTableElementInfosForLegendLayer(a,t.layerId,s.title||e?.title,i),s.infos.length>0?s:null}_generateSymbolTableElementInfosForLegendLayer(t,e,i,r){return t.map(n=>{let s=n.url;if(n.imageData&&n.imageData.length>0)s=`data:image/png;base64,${n.imageData}`;else{if(s.startsWith("http"))return null;s=jPe(`${this.layer.url}/${e}/images/${s}`)}let a=n.label;return a==="<all other values>"&&(a="others"),{previewAriaLabel:a||i,label:a,src:s,opacity:r??this.opacity,width:n.width,height:n.height}}).filter(un)}_isSublayerInScale(t){const e=t.minScale||0,i=t.maxScale||0;return!(e>0&&e<this.scale||i>this.scale)}_isLegendLayerInScale(t,e){const i=e||this.layer;let r=null,n=null,s=!0;return!i.minScale&&i.minScale!==0||!i.maxScale&&i.maxScale!==0?(t.minScale===0&&i.tileInfo&&(r=i.tileInfo.lods[0].scale),t.maxScale===0&&i.tileInfo&&(n=i.tileInfo.lods[i.tileInfo.lods.length-1].scale)):(r=Math.min(i.minScale,t.minScale)||i.minScale||t.minScale,n=Math.max(i.maxScale,t.maxScale)),(r>0&&r<this.scale||n>this.scale)&&(s=!1),s}_sanitizeLegendForSublayer(t,e){if("version"in this.layer&&+this.layer.version<10.1||t.length===0)return t;const i=e.renderer,r=t.some(a=>a.values);let n=0,s=null;return r&&t.some((a,o)=>(a.values||(n=o,s=a,s.label||(s.label="others")),s!=null)),i?i.type==="unique-value"?s&&(t.splice(n,1),t.push(s)):i.type==="class-breaks"&&(s&&t.splice(n,1),i.legendOptions?.order||t.reverse(),s&&t.push(s)):s&&(t.splice(n,1),t.push(s)),t}async _getRendererLegendElements(t,e={}){if(!Ept(t,this.view))return $e.getLogger(this).warn(`Renderer of type '${t.type}' not supported!`),[];if(Tpt(t))return this._constructPointCloudRendererLegendElements(t,e);if(oke(t))return this._constructDotDensityRendererLegendElements(t);const i=await this._loadRenderer(t);return lke(i)?this._constructPieChartRendererLegendElements(i):this._constructRendererLegendElements(i,e)}async _getLegendElementsForFeatureReduction(t){let e=null;return t.type==="binning"?e=t.renderer:t.type==="cluster"&&(e=this._getClusterRenderer(t)),e?this._getRendererLegendElements(e,{isFeatureReductionRenderer:!0}):[]}_getPointCloudRendererTitle(t){return(t.legendOptions?.title||t.field)??""}async _constructPointCloudRendererLegendElements(t,e={}){const i=e.title,r=[];let n=null,s=null;if(kJ(t))n={type:"symbol-table",title:i||this._getPointCloudRendererTitle(t),infos:[]},t.colorClassBreakInfos.forEach(a=>{n.infos.unshift({label:a.label||a.minValue+" - "+a.maxValue,value:[a.minValue,a.maxValue],symbol:this._getAppliedCloneSymbol(SL,a.color)})});else if(EJ(t)){const a=t.stops;let o=null;if(a?.length&&(a.length===1&&(o=a[0].color),!o)){const c=a[0].value,h=a[a.length-1].value;c!=null&&h!=null&&(o=oTe(c+(h-c)/2,a))}n={type:"symbol-table",title:null,infos:[{label:null,value:null,symbol:this._getAppliedCloneSymbol(SL,o||SL.color)}]};const l=lct(t.stops??[])??[];s={type:"color-ramp",title:i||this._getPointCloudRendererTitle(t),infos:l,preview:y0(l.map(c=>c.color))}}else CJ(t)&&(n={type:"symbol-table",title:i||this._getPointCloudRendererTitle(t),infos:[]},t.colorUniqueValueInfos?.forEach(a=>{n.infos.push({label:a.label||a.values.join(", "),value:a.values.join(", "),symbol:this._getAppliedCloneSymbol(SL,a.color)})}));return n?.infos.length&&r.push(n),s?.infos.length&&r.push(s),await this._generatePreviewsForLegendElements(r,{opacity:this.opacity,symbolConfig:{applyColorModulation:!!t.colorModulation}}),r}async _getElementInfoForDotDensity(t,e){const{color:i,label:r,valueExpressionTitle:n}=e,{backgroundColor:s,outline:a,dotSize:o}=t,l=this.cssEffectFilter,c=o+"-"+i+"-"+s+"-"+(a&&JSON.stringify(a.toJSON()))+"-"+l,h=this._dotDensityUrlCache,f=h.has(c)?h.get(c):Hot(t,i);h.set(c,f);const g={shape:{type:"image",x:0,y:0,width:f.width,height:f.height,src:f.src},fill:null,stroke:null,offset:[0,0]},y=JT([[g]],[f.width,f.height],{cssEffectFilter:this.cssEffectFilter});return{opacity:1,src:f.src,preview:y,width:f.width,height:f.height,previewAriaLabel:r||n}}async _constructDotDensityRendererLegendElements(t){const e=t.calculateDotValue(this.view.scale),i=t.legendOptions?.unit,r={type:"symbol-table",title:{value:e&&Math.round(e),unit:i||""},infos:[]};for(const n of t.attributes){const s=await this._getElementInfoForDotDensity(t,n);s.label=n.label||n.valueExpressionTitle||n.field,r.infos.push(s)}return[r]}async _constructPieChartRendererLegendElements(t){const e=[];let i=null;const r=t.outline;t.attributes.forEach(a=>{const o=new Gr({color:a.color,outline:r}),l=a.label||a.valueExpressionTitle||a.field;e.push({label:l,symbol:o})});const n=e.length?[...e]:[];if(t.othersCategory?.color&&t.othersCategory?.threshold!==0){const a=new Gr({color:t.othersCategory.color,outline:r});i=t.othersCategory.label||"Other",e.push({label:i,symbol:a})}if(t.defaultColor?.a){const a=new Gr({color:t.defaultColor,outline:r});e.push({label:t.defaultLabel,symbol:a})}const s=await this._getVisualVariableLegendElements(t,this.layer)||[];if(e.length){s.unshift({type:"symbol-table",title:null,infos:e});const a=n.filter(l=>l.label!==i).map(l=>l.symbol.color).filter(Boolean),o=Got(a,{holePercentage:t.holePercentage,backgroundColor:t.backgroundFillSymbol?.color,cssEffectFilter:this.cssEffectFilter,outline:r});s.unshift({type:"pie-chart-ramp",title:this._getRendererTitle(t,this.layer),infos:e,preview:o})}return await this._generatePreviewsForLegendElements(s,{opacity:this.layer.opacity,cssEffectFilter:this.cssEffectFilter}),s}async _getWhereClause(t,e,i){const r=await RZ(t,i),n=new Set,{field:s,field2:a,field3:o}=e;Iv(n,i,[s,a,o]),await La(n,i,null,e.valueExpression);const l=new Set(Array.from(n,h=>h.toLowerCase()));return r?.fieldNames.map(h=>h.toLowerCase())?.some(h=>!l.has(h))?null:r}async _processDefinitionExpression(t,e){if(!("definitionExpression"in t))return;const i=t.definitionExpression;i&&this.respectLayerDefinitionExpression?this._layerDefinitionExpression!==i&&(this._layerDefinitionExpressionClause=await this._getWhereClause(i,e,t.fieldsIndex)):this._layerDefinitionExpressionClause=null,this._layerDefinitionExpression=i}async _processDisplayFilter(t,e){if(!("displayFilterInfo"in t))return;const i=t.displayFilterInfo?fKe(t.displayFilterInfo,this.view):null;return i?.where?this._layerDisplayFilter?.id!==i?.id&&(this._layerDisplayFilterClause=await this._getWhereClause(i.where,e,t.fieldsIndex)):this._layerDisplayFilterClause=null,this._layerDisplayFilter=i,i}async _constructRendererLegendElements(t,e={}){const{title:i,sublayer:r,isFeatureReductionRenderer:n}=e,s=r||this.layer,a=xp(t,"reference-size"),o=xp(t,"spike"),l=n&&"renderer"in s&&s.renderer?s.renderer:t;let c=null;_0(l)&&(await this._processDefinitionExpression(s,l),c=await this._processDisplayFilter(s,l)),this._hasColorRamp=!1,this._hasOpacityRamp=!1,this._hasSizeRamp=!1,this._scaleDrivenSizeVariable=null;const h=await this._getVisualVariableLegendElements(t,s)||[],f={type:"symbol-table",title:i||this._getRendererTitle(t,s),infos:[]};let g=null,y=!1;const b=new Set;if(Oq(t)&&!this._hasSizeRamp){const I=await nTe(t);f.infos.push({label:null,symbol:I})}else if(Lpt(t)){let I=i;const P=Dpt(t)?"univariate-above-and-below-ramp":"univariate-color-size-ramp",O=h.findIndex(Q=>Q.type==="color-ramp"),N=O!==-1?h.splice(O,1)[0]:null,R=h.findIndex(Q=>Q.type==="size-ramp"),G=R!==-1?h.splice(R,1)[0]:null,Y=[];N&&(I=N.title,Y.push(N)),G&&(I=G.title,Y.push(G)),Y.length>0&&h.push({type:P,title:I,infos:Y})}else if(ake(t)){const I=dct(t);h.push({type:"heatmap-ramp",title:i||this._getRendererTitle(t,s),infos:I,preview:y0(I.map(P=>P.color),{cssEffectFilter:this.cssEffectFilter})})}else if(_0(t)){const I=t.authoringInfo;if(I&&I.type==="relationship"){const{numClasses:P,field1:O,field2:N}=I,R=I.focus;if(P&&O&&N){const G=[O,N];let Y=U$e(R)||0;for(const ae of G){const{field:ce,normalizationField:ne,label:K}=ae,le=K||{field:this._getFieldAlias(ce,s),normField:ne&&this._getFieldAlias(ne,s)},re=zpt.clone();re.angle=Y,f.infos.push({label:le,symbol:re}),b.add(re),Y+=90}const Q=Uot({focus:R,numClasses:P,infos:t.uniqueValueInfos??[]});h.unshift(Q)}}else if(q1(this.layer)||$L(this.layer)){const{uniqueValueInfos:P}=t;if(P)for(const O of P)O.symbol&&await this._checkClausesForUVR(l,O.value)&&f.infos.push({label:O.label||O.value,value:O.value,symbol:O.symbol})}else{const{field:P,field2:O,field3:N,fieldDelimiter:R,valueExpression:G,defaultSymbol:Y}=t,Q=!(!P&&!G||!O&&!N),ae=c?c.title:null,ce=[],{uniqueValueGroups:ne}=t;if(ne)for(const K of ne){const le={type:"symbol-table",title:ae||K.heading,infos:[]},{classes:re}=K;if(re)for(const he of re){const{symbol:xe,values:Pe}=he;if(xe){const He=[],oe=[];for(const ut of Pe??[]){const{value:Pt,value2:pi,value3:it}=ut,Wn=[],fn=[];(P||G)&&(Wn.push(Pt),fn.push(this._getDomainName(P,Pt,s)??LD(Pt,DD(s,P,this.view.timeZone)))),O&&(Wn.push(pi),fn.push(this._getDomainName(O,pi,s)??LD(pi,DD(s,O,this.view.timeZone)))),N&&(Wn.push(it),fn.push(this._getDomainName(N,it,s)??LD(it,DD(s,N,this.view.timeZone)))),He.push(Q?Wn.join(R||""):Wn[0]),oe.push(fn.join(" - "))}const be=He.join(", ");let Le=he.label;if(!Le){const ut=oe.filter(Boolean);Le=ut.length?ut.join(", "):be}let Je=xe;Je.type==="cim"&&a&&(Je=Je.clone(),dJ(Je,{innerDotSize:.5*Zce,outerRingSize:Zce}));let st=!1;for(const ut of He)if(st=await this._checkClausesForUVR(l,ut),st)break;st&&le.infos.push({label:Le,value:be,symbol:Je})}}le.infos.length&&ce.push(le)}if(ce.length){const K=ce[0];if(ce.length===1&&"title"in K&&!K.title){const le=K.infos?.filter(Kce)??[];f.infos.push(...le)}else Y&&(ce.push({type:"symbol-table",infos:[{label:t.defaultLabel||"others",symbol:Y}]}),y=!0),f.infos.push(...ce);i||t.legendOptions?.title||t.valueExpressionTitle||(f.title=null)}}t.defaultSymbol&&!y&&(f.infos.push({label:t.defaultLabel||"others",symbol:t.defaultSymbol}),y=!0)}else if(w0(t)){if(!a&&!o){if(g=this._isUnclassedRenderer(t),!g||!this._hasSizeRamp){const I=t.classBreakInfos.filter(({symbol:O})=>O),P=t.legendOptions?.order==="ascending-values";for(const{label:O,minValue:N,maxValue:R,symbol:G}of I){const Y=O||(g?null:`${N} - ${R}`),Q={previewAriaLabel:Y||f.title||s.title,label:Y,value:[N,R],symbol:G};P?f.infos.push(Q):f.infos.unshift(Q)}g&&(f.title=null),this._updateInfosForClassedSizeRenderer(t,f.infos)}t.defaultSymbol&&!g&&(f.infos.push({label:t.defaultLabel||"others",symbol:t.defaultSymbol}),y=!0)}}else if(nke(t))if($L(this.layer)||Ppt(this.layer)){const I=await this._constructTileImageryStretchRendererElements(t);Opt(I)?h.push(I):f.infos=I}else{const I=this.layer;let P,O;t.customStatistics?.length&&({min:P,max:O}=t.customStatistics[0]);let N=[],R=I.serviceRasterInfo;if(I.rasterFunction)try{R=await I.generateRasterInfo(I.rasterFunction)}catch{}const G=zz(R.pixelType);if(R.bandCount===1){const Y=I.bandIds?.[0]||0;P=P??(R.statistics?R.statistics[Y].min:G[0]),O=O??(R.statistics?R.statistics[Y].max:G[1]),P||O?h.push(await this._getStretchLegendElements(t,{min:P,max:O})):this._getServerSideLegend()}else if(I.bandIds&&I.bandIds.length===1)P=P??(R.statistics?R.statistics[I.bandIds[0]].min:G[0]),O=O??(R.statistics?R.statistics[I.bandIds[0]].max:G[1]),P||O?h.push(await this._getStretchLegendElements(t,{min:P,max:O})):this._getServerSideLegend();else if(R.bandCount>=3){const{bandInfos:Y}=R,{bandIds:Q}=I;Y.length>=R.bandCount?Q?.length===3?(N=Q.map(ae=>Y[ae].name),f.infos=this._createSymbolTableElementMultiBand(N)):I.format==="lerc"?(N=[0,1,2].map(ae=>Y[ae].name),f.infos=this._createSymbolTableElementMultiBand(N)):this._getServerSideLegend():I.format==="lerc"?(N=["band1","band2","band3"],f.infos=this._createSymbolTableElementMultiBand(N)):this._getServerSideLegend()}else this._getServerSideLegend()}else if(rke(t))t.colormapInfos.forEach(I=>{f.infos.push({label:I.label,value:I.value,symbol:this._getAppliedCloneSymbol($pt,I.color)})});else if(cS(t)){let I=t.symbol;switch(e.geometryType){case"point":I="pointSymbol"in s?s.pointSymbol:null;break;case"polyline":I="lineSymbol"in s?s.lineSymbol:null;break;case"polygon":I="polygonSymbol"in s?s.polygonSymbol:null}const P=this._clusterSizeVariable&&this._getClusterSymbol()||!this._hasSizeRamp;t.symbol&&P&&f.infos.push({previewAriaLabel:t.label||f.title||s.title,label:t.label,symbol:I})}else if(ike(t)){t.outputUnit&&(this.title="("+t.toJSON().outputUnit+")"),f.title=t.attributeField;const I=t.getClassBreakInfos();I?.length?I.forEach(P=>{f.infos.push({label:P.minValue+" - "+P.maxValue,symbol:P.symbol})}):f.infos.push({label:t.attributeField,symbol:t.getDefaultSymbol()})}else ske(t)&&h.push(await this._getStretchLegendElements(t,{min:0,max:255}));const _=t.defaultSymbol;!_||y||cS(t)||g&&!this._hasColorRamp&&!this._hasSizeRamp&&!this._hasOpacityRamp||h.push({type:"symbol-table",infos:[{label:t.defaultLabel||"others",symbol:_}]}),f.infos.length&&h.unshift(f);const S=e.opacity==null?this.opacity:e.opacity,$=this._isTallSymbol("visualVariables"in t?t.visualVariables:null),C=q1(this.layer)||$L(this.layer);return await this._generatePreviewsForLegendElements(h,{opacity:S,symbolConfig:{isTall:$,isSquareFill:C},cssEffectFilter:this.cssEffectFilter},{arrowMarkerSymbols:b}),t=null,h}async _waitForLayerViewUpdate(t){await f_(()=>!t.updating)}async _checkFeatureCountForExpression(t,e){const i=this.layerView;if(!(i&&"createQuery"in i&&"queryFeatureCount"in i))return!0;try{await this._waitForLayerViewUpdate(i);const r=i.createQuery();return t&&(r.where=sct(r.where,t)),e&&(r.geometry=e),await i.queryFeatureCount(r)>0}catch{return!0}}async _checkClausesForUVR(t,e){const i=Rpt(t,e);return i?(!(!this._layerDefinitionExpressionClause&&this._layerDefinitionExpression&&this.respectLayerDefinitionExpression||!this._layerDisplayFilterClause&&this._layerDisplayFilter?.where)||await this._checkFeatureCountForExpression(`${t.field} = ${e}`))&&(!this._layerDefinitionExpressionClause||this._layerDefinitionExpressionClause.testFeature(i))&&(!this._layerDisplayFilterClause||this._layerDisplayFilterClause.testFeature(i)):!0}_getServerSideLegend(){setTimeout(()=>this.buildLegendElementsForTools(),0)}_getAllInfos(t){const e=t?.infos;return e?e.reduce((i,r)=>i.concat(this._getAllInfos(r)),[]):[t]}async _constructTileImageryStretchRendererElements(t){const e=this.layer,i=e.symbolizer.rasterInfo??e.raster.rasterInfo;let r,n;const s=t?.customStatistics?.length?t.customStatistics:i?.statistics;if(s)({min:r,max:n}=s[0]);else{const o=zz(i.pixelType);r=o[0],n=o[1]}if(e.hasStandardTime()&&(r=e.getStandardTimeValue(r),n=e.getStandardTimeValue(n)),i.bandCount===1||e.bandIds?.length===1)return this._getStretchLegendElements(t,{min:r,max:n});const a=(e?.bandIds?.length?e.bandIds:Array.from(Array(Math.min(i.bandCount,3)).keys())).map(o=>i.bandInfos[o].name);return a.length<3?a.push(a[1]):a.length>3&&a.splice(3),this._createSymbolTableElementMultiBand(a)}async _getStretchLegendElements(t,e){const i=t.colorRamp?.toJSON(),r=uct(i,e);return{type:"stretch-ramp",title:"",infos:r,preview:y0(r.map(n=>n.color))}}_getClusterSymbol(){const t=this.layer,e="featureReduction"in t&&t.featureReduction,i=e&&"symbol"in e&&e.renderer;return i&&i?.authoringInfo?.isAutoGenerated!==!0?null:e&&"symbol"in e?e.symbol:null}async _getSizeLegendElement(t,e,i,r){return{type:"size-ramp",title:this._clusterSizeVariable?this._getClusterTitle(e):t,infos:await cpt(i,e,await _q(i),this.scale,this.view,r,this._clusterSizeVariable?this._getClusterSymbol():null)}}_createSymbolTableElementMultiBand(t){const e=[],i=["red","green","blue"];return t.forEach((r,n)=>{e.push({label:{colorName:i[n],bandName:r},src:tct[n],opacity:this.opacity??1})}),e}_updateInfosForClassedSizeRenderer(t,e){const i=t.authoringInfo&&t.authoringInfo.type==="class-breaks-size",r=t.classBreakInfos.some(n=>KN(n.symbol));if(i&&r){const n=Mq,s=Aq,a=t.classBreakInfos.length,o=(n-s)/(a>1?a-1:a);e.forEach((l,c)=>{l.size=n-o*c})}}_isTallSymbol(t){let e=!1,i=!1;if(t)for(let r=0;r<t.length&&(!e||!i);r++){const n=t[r];n.type==="size"&&(n.axis==="height"&&(e=!0),n.axis==="width-and-depth"&&(i=!0))}return e&&i}async _generatePreviewsForLegendElements(t,e,i){const r=[];for(const n of t)for(const s of n.infos??[])if("infos"in s&&s.infos&&r.push(this._generatePreviewsForLegendElements([s],e,i)),Kce(s)&&s.symbol&&!s.preview){let a=!0;if(s.symbol.type==="cim"){const{minScale:o,maxScale:l}=s.symbol.data;(o&&o<this.scale||l&&l>this.scale)&&(a=!1)}a&&r.push(this._generateSymbolPreviewForInfo(s,{...e,clipBloomEffect:"theme"in n&&n.theme==="spike",cssEffectFilter:i?.arrowMarkerSymbols?.has(s.symbol)?null:e.cssEffectFilter},i?{applyScaleDrivenSize:!i.arrowMarkerSymbols?.has(s.symbol)}:void 0))}await Promise.all(r)}async _getSize(t,e){let i=t.size==null&&this._hasSizeRamp?Xi(22):t.size;if(this._scaleDrivenSizeVariable&&e?.applyScaleDrivenSize){const{getSize:r}=await fe(()=>Promise.resolve().then(()=>$_),void 0);i=r(this._scaleDrivenSizeVariable,null,{view:this.view.type,scale:this.scale,shape:t.symbol.type==="simple-marker"?t.symbol.style:null})}return i}_getPreviewCIMOptions(t){return{style:"legend",cimOptions:{allowScalingUp:this._hasSizeRamp||!(!this._scaleDrivenSizeVariable||!t?.applyScaleDrivenSize),viewParams:this.isScaleDriven?{viewingMode:this.view?.type==="2d"?"map":this.view?.viewingMode,scale:this.view?.scale}:null}}}async _generateSymbolPreviewForInfo(t,e={},i){const{symbol:r}=t;try{if(e.size=await this._getSize(t,i),e.scale=!1,r.type==="cim"){const n=this._getPreviewCIMOptions(i);e={...e,...n}}t.preview=await H$e(r,e)}catch{t.preview=null,$e.getLogger(this).warn(`Generating symbol preview failed for symbol type: ${r?.type}`)}}_getClusterRenderer(t){this._clusterSizeVariable=null;const e="renderer"in this.layer?this.layer.renderer:null,i=t.renderer?.clone()||e?.clone(),r=Hlt(t,this.layerView,this.view);if(r&&i!=null&&"visualVariables"in i&&!i.visualVariables?.some(s=>s.type==="size"&&s.target!=="outline"&&!xL.test(s.valueExpression))){if("clusterMinSize"in t&&"clusterMaxSize"in t){const{clusterMinSize:a,clusterMaxSize:o}=t;r.legendOptions=new gxe({showLegend:a!==o})}const s=i.visualVariables||[];i.visualVariables=s.concat([r]),this._clusterSizeVariable=r}return i}async _loadRenderer(t){if(oU.has(t))return oU.get(t);const e=[],i=t.clone(),r=await _q(i);if(w0(i)||_0(i)){const n=(i.classBreakInfos||i.uniqueValueInfos).map(s=>this._fetchSymbol(s.symbol,r).then(a=>{s.symbol=a}).catch(()=>{s.symbol=null}));Array.prototype.push.apply(e,n)}return e.push(this._fetchSymbol(i.symbol||i.defaultSymbol,i.defaultSymbol?null:r).then(n=>{this._applySymbolToRenderer(i,n,cS(i))}).catch(()=>{this._applySymbolToRenderer(i,null,cS(i))})),await Promise.allSettled(e),oU.set(t,i),i}_applySymbolToRenderer(t,e,i){i?t.symbol=e:t.defaultSymbol=e}async _fetchSymbol(t,e){if(!t)throw new Error;if(t.type==="web-style"){const i=this._webStyleSymbolCache;try{const r=await t.fetchSymbol({cache:i});return this._getAppliedCloneSymbol(r,e)}catch{throw $e.getLogger(this).warn("Fetching web-style failed!"),new Error}}return this._getAppliedCloneSymbol(t,e)}_getAppliedCloneSymbol(t,e){if(!t||!e)return t;const i=t.clone(),r=e&&e.toRgba();return i.type.includes("3d")?this._applyColorTo3dSymbol(i,r):i.type==="cim"?s$e(i,e):i.color&&(i.color=new Ye(r||i.color)),i}_applyColorTo3dSymbol(t,e){e&&t.symbolLayers.forEach(i=>{i&&(i.material||(i.material={}),i.material.color=new Ye(e))})}async _getVisualVariableLegendElements(t,e){if(!("visualVariables"in t)||t.type==="vector-field")return null;const i=t.visualVariables??[],r=[],n=[],s=[],a=xp(t,"reference-size")??xp(t,"spike");let o;const l=this._clusterSizeVariable;if(a?.sizeStops?.length===2&&(w0(t)||_0(t))){const[y,b]=a.sizeStops,_=l?l.minDataValue:y.value,S=l?l.maxDataValue:b.value;o=new Ei({field:a.field??void 0,normalizationField:a.normalizationField,minSize:go(y.size,10,100),maxSize:go(b.size,50,150),minDataValue:_,maxDataValue:S}),n.push(o)}for(const y of i)if(y.type==="color")r.push(y);else if(y.type==="size"){if(y.field==="cluster_count"&&o)continue;n.push(y)}else y.type==="opacity"&&s.push(y);const c=[...r,...n,...s];let h,f;if(r.length===0&&w0(t)&&t.classBreakInfos&&t.classBreakInfos.length===1){const y=t.classBreakInfos[0];h=y&&y.symbol}if(r.length===0&&cS(t)&&(h=t.symbol),h)if(h.type.includes("3d")){const y=h.symbolLayers.at(0);y.type==="water"?y.color!=null&&(f=y.color):y.material?.color!=null&&(f=y.material.color)}else h.url||(f=h.color);const g=this.cssEffectFilter;return(await Promise.all(c.map(async y=>{if(!y.legendOptions||y.legendOptions.showLegend!==!1){const b=Oq(t)?y.field:this._getRampTitle(y,e);let _=null;const S=nct(e,y,this.view.timeZone);if(y.type==="color"){const $=await vce(y,null,S)??[];_={type:"color-ramp",title:b,infos:$,preview:y0($.map(C=>C.color),{cssEffectFilter:g})},this._hasColorRamp||(this._hasColorRamp=$.length>0)}else if(y.type==="size"&&y.target!=="outline")xL.test(y.valueExpression)?this._clusterSizeVariable||(this._scaleDrivenSizeVariable=y):(_=await this._getSizeLegendElement(b,y,t,S),o===y&&a?.theme==="spike"&&(_.theme=a.theme),this._hasSizeRamp||(this._hasSizeRamp=!(_.infos==null||!_.infos.length)));else if(y.type==="opacity"){const $=await vce(y,f,S)??[];_={type:"opacity-ramp",title:b,infos:$,preview:y0($.map(C=>C.color),{cssEffectFilter:g})},this._hasOpacityRamp||(this._hasOpacityRamp=$.length>0)}return _?.infos?_:null}}))).filter(un)}_getDomainName(t,e,i){if(t&&typeof t!="function"){const r="getField"in i&&i.getField?.(t),n=r&&"getFieldDomain"in i&&i.getFieldDomain?i.getFieldDomain(r.name,{excludeImpliedDomains:ve("esri-widget-legacy-field-domain-calculation")}):null;return n?.type==="coded-value"?n.getName(e):null}return null}_getClusterTitle(t){const e=this.layer,i=t.field;if("featureReduction"in e&&e.featureReduction&&e.featureReduction.type==="cluster"){const r=e.featureReduction,n="popupTemplate"in r&&r.popupTemplate,s=n&&n.fieldInfos;if(s){for(const a of s)if(a.fieldName===i)return i==="cluster_count"?a.label||{showCount:!0}:a.label}}return{showCount:!0}}_getRampTitle(t,e){let i=t.field,r=t.normalizationField,n=!1,s=!1,a=!1,o=null;i=typeof i=="function"?null:i,r=typeof r=="function"?null:r;const l=t.legendOptions?.title;if(l!=null)o=l;else if(t.valueExpressionTitle)o=t.valueExpressionTitle;else{if("renderer"in e&&e.renderer&&"authoringInfo"in e.renderer&&e.renderer.authoringInfo?.visualVariables){const c=e.renderer.authoringInfo.visualVariables;for(let h=0;h<c.length;h++){const f=c[h];if(f.type==="color"){if(f.style==="ratio"){n=!0;break}if(f.style==="percent"){s=!0;break}if(f.style==="percent-of-total"){a=!0;break}}}}o={field:i&&this._getFieldAlias(i,e),normField:r&&this._getFieldAlias(r,e),ratio:n,ratioPercent:s,ratioPercentTotal:a}}return o}_getRendererTitle(t,e){const i=t;if(i.legendOptions?.title)return i.legendOptions.title;if(i.valueExpressionTitle)return i.valueExpressionTitle;let r=i.field,n=null,s=null;if(w0(i)&&(n=i.normalizationField,s=i.normalizationType==="percent-of-total"),r=typeof r=="function"?null:r,n=typeof n=="function"?null:n,_0(i)){const{field2:o,field3:l,fieldDelimiter:c}=i;let h=r&&this._getFieldAlias(r,e);return o&&(h=`<${h}>${c}<${this._getFieldAlias(o,e)}>`,l&&(h=`${h}${c}<${this._getFieldAlias(l,e)}>`)),h}let a=null;return(r||n)&&(a={field:r&&this._getFieldAlias(r,e),normField:n&&this._getFieldAlias(n,e),normByPct:s}),a}_getFieldAlias(t,e){const i="featureReduction"in e&&e.featureReduction;if(MZ(e)&&!i)return e.getFieldAlias(t)||t;let s=("popupTemplate"in e?e.popupTemplate:null)?.fieldInfos?.find(h=>t===h.fieldName),a=null;"getField"in e&&e.getField?a=e.getField(t):"fieldsIndex"in e&&e.fieldsIndex&&(a=e.fieldsIndex.get(t));let o=null;i&&(s??="popupTemplate"in i?i.popupTemplate?.fieldInfos?.find(h=>t?.toLowerCase()===h.fieldName?.toLowerCase()):void 0,"fields"in i&&i.fields&&(o=i.fields.find(h=>h.name?.toLowerCase()===t?.toLowerCase())));const l=s||a||o;let c=null;return l&&(c=s?.label||a?.alias||o?.alias||"name"in l&&l.name||"fieldName"in l&&l.fieldName||null),c}_isUnclassedRenderer(t){const e=t.visualVariables;let i=!1;return w0(t)&&t.classBreakInfos&&t.classBreakInfos.length===1&&e&&(i=t.field?e.some(r=>!(!r||t.field!==r.field||(t.normalizationField||r.normalizationField)&&t.normalizationField!==r.normalizationField)):!!e.length),i}};d([m()],on.prototype,"_loading",void 0),d([m()],on.prototype,"children",void 0),d([m({readOnly:!0})],on.prototype,"cssEffectFilter",null),d([m()],on.prototype,"layerView",void 0),d([m()],on.prototype,"layer",void 0),d([m()],on.prototype,"legendElements",void 0),d([m({readOnly:!0})],on.prototype,"loading",null),d([m({readOnly:!0})],on.prototype,"opacity",null),d([m()],on.prototype,"parent",void 0),d([m({readOnly:!0,dependsOn:[]})],on.prototype,"ready",null),d([m()],on.prototype,"hideLayersNotInCurrentView",void 0),d([m()],on.prototype,"keepCacheOnDestroy",void 0),d([m()],on.prototype,"respectLayerDefinitionExpression",void 0),d([m()],on.prototype,"respectLayerVisibility",void 0),d([m({readOnly:!0})],on.prototype,"scale",null),d([m()],on.prototype,"sublayerIds",void 0),d([m({readOnly:!0})],on.prototype,"isScaleDriven",null),d([m()],on.prototype,"title",void 0),d([m({readOnly:!0,dependsOn:["ready"],value:0})],on.prototype,"version",null),d([m()],on.prototype,"view",void 0),on=d([U("esri.widgets.Legend.support.ActiveLayerInfo")],on);const Rb={state:"state",view:"view",allLayerViews:"all-layer-views",legendProperties:"legend-properties"},cke=We.ofType(on),Fpt=new Set(["esri.layers.BuildingSceneLayer","esri.layers.CatalogLayer","esri.layers.CSVLayer","esri.layers.FeatureLayer","esri.layers.GeoJSONLayer","esri.layers.GeoRSSLayer","esri.layers.GroupLayer","esri.layers.HeatmapLayer","esri.layers.ImageryLayer","esri.layers.ImageryTileLayer","esri.layers.MapImageLayer","esri.layers.OGCFeatureLayer","esri.layers.OrientedImageryLayer","esri.layers.ParquetLayer","esri.layers.PointCloudLayer","esri.layers.StreamLayer","esri.layers.SceneLayer","esri.layers.SubtypeGroupLayer","esri.layers.TileLayer","esri.layers.VoxelLayer","esri.layers.WFSLayer","esri.layers.WMSLayer","esri.layers.WMTSLayer","esri.layers.WCSLayer","esri.layers.LinkChartLayer","esri.layers.catalog.CatalogFootprintLayer","esri.layers.catalog.CatalogDynamicGroupLayer","esri.layers.knowledgeGraph.KnowledgeGraphSublayer","esri.layers.KnowledgeGraphLayer"]),uke="view.basemapView.baseLayerViews",dke="view.groundView.layerViews",hke="view.basemapView.referenceLayerViews",Npt=[uke,dke,"view.layerViews",hke];let sl=class extends lt{constructor(e){super(e),this._layerViewByLayerId={},this._layerInfosByLayerViewId={},this._activeLayerInfosByLayerViewId={},this._activeLayerInfosWithNoParent=new We,this._activeLayerInfosPromises=new WeakMap,this.activeLayerInfos=new cke,this.basemapLegendVisible=!1,this.groundLegendVisible=!1,this.hideLayersNotInCurrentView=!1,this.keepCacheOnDestroy=!1,this.respectLayerDefinitionExpression=!1,this.respectLayerVisibility=!0,this.layerInfos=[],this.view=null}initialize(){this.addHandles(ze(()=>this.view,()=>this._viewHandles(),Di),Rb.view),this.addHandles(gY(()=>this._refresh()))}destroy(){this._destroyViewActiveLayerInfos(),this.view=null}get loading(){return this.activeLayerInfos.some(e=>e.loading)}get state(){return this.view?.ready?"ready":"disabled"}_viewHandles(){this.removeHandles(Rb.state),this.view&&this.addHandles(ze(()=>this.state,()=>this._stateHandles(),Di),Rb.state)}_stateHandles(){this._resetAll(),this.state==="ready"&&this._watchPropertiesAndAllLayerViews()}_resetAll(){this.removeHandles([Rb.allLayerViews,Rb.legendProperties]),this._destroyViewActiveLayerInfos(),this.activeLayerInfos.removeAll()}_destroyViewActiveLayerInfos(){Object.keys(this._activeLayerInfosByLayerViewId).forEach(this._destroyViewActiveLayerInfo,this)}_destroyViewActiveLayerInfo(e){this.removeHandles(e);const i=this._activeLayerInfosByLayerViewId[e];i&&this._activeLayerInfosPromises.delete(i),delete this._activeLayerInfosByLayerViewId[e],i?.parent?.children.remove(i)}_watchPropertiesAndAllLayerViews(){const{view:e}=this;if(!e)return;const{allLayerViews:i}=e;i.length&&this._refresh(),this.addHandles(i.on("change",r=>this._allLayerViewsChangeHandle(r)),Rb.allLayerViews),this.addHandles(ze(()=>[this.basemapLegendVisible,this.groundLegendVisible,this.hideLayersNotInCurrentView,this.keepCacheOnDestroy,this.layerInfos,this.respectLayerDefinitionExpression,this.respectLayerVisibility],()=>this._refresh()),Rb.legendProperties)}_allLayerViewsChangeHandle(e){if(e.added.length&&this._generateActiveLayerInfosForLayerViews(e.added),e.moved.length)return this._destroyViewActiveLayerInfos(),void this._refresh();if(e.removed.length){for(const{uid:i}of e.removed)this._destroyViewActiveLayerInfo(i);this._refresh()}}_refresh(){this._layerInfosByLayerViewId={},this.activeLayerInfos.drain(e=>this._activeLayerInfosPromises.delete(e)),this._generateActiveLayerInfosForLayerViews(this._generateLayerViews())}_generateActiveLayerInfosForLayerViews(e){e.filter(this._filterBasemapLayerViews,this).filter(this._filterLayerViewsByLayerInfos,this).filter(this._isLayerViewSupported,this).forEach(this._generateActiveLayerInfo,this)}_filterBasemapLayerViews(e){if(!this.view?.basemapView)return!0;const{baseLayerViews:i,groundLayerViews:r,referenceLayerViews:n}=this.view.basemapView,s=!this.basemapLegendVisible&&(i?.includes(e)||n?.includes(e)),a=!this.groundLegendVisible&&r?.includes(e);return!s&&!a}_sortActiveLayerInfos(e){const i=this.view;if(e.length<2||!i)return;const r=[];e.forEach(s=>{if(!s.parent){const a=s.layer.parent,o=a&&"uid"in a&&this._layerViewByLayerId[a.uid],l=o&&this._activeLayerInfosByLayerViewId[o.uid];l&&e.includes(l)&&(r.push(s),s.parent=l,l.children.add(s),this._sortActiveLayerInfos(l.children))}}),e.removeMany(r);const n={};i.allLayerViews.forEach((s,a)=>n[s.layer.uid]=a),e.sort((s,a)=>{const o=n[s.layer.uid]||0;return(n[a.layer.uid]||0)-o})}_generateLayerViews(){const e=[];return Npt.filter(this._filterLayerViews,this).map(i=>co(this,i)).filter(i=>i!=null).forEach(this._collectLayerViews("layerViews",e)),e}_filterLayerViews(e){const i=!this.basemapLegendVisible&&(e===uke||e===hke),r=!this.groundLegendVisible&&e===dke;return!i&&!r}_collectLayerViews(e,i){const r=n=>(n&&n.forEach(s=>{i.push(s),r(s[e])}),i);return r}_filterLayerViewsByLayerInfos(e){const i=this.layerInfos;return!i||!i.length||i.some(r=>this._hasLayerInfo(r,e))}_hasLayerInfo(e,i){const r=this._isLayerUIDMatching(e.layer,i.layer.uid);return r&&(this._layerInfosByLayerViewId[i.uid]=e),r}_isLayerUIDMatching(e,i){return e&&(e.uid===i||this._hasLayerUID(e.layers,i))}_hasLayerUID(e,i){return e&&e.some(r=>this._isLayerUIDMatching(r,i))}_isLayerViewSupported(e){return!!Fpt.has(e.layer.declaredClass)&&(this._layerViewByLayerId[e.layer.uid]=e,!0)}_generateActiveLayerInfo(e){this._isLayerActive(e)?this._buildActiveLayerInfo(e):(this.removeHandles(e.uid),this.addHandles(ze(()=>[e.legendEnabled,e.layer?.legendEnabled],()=>this._layerActiveHandle(e)),e.uid))}_layerActiveHandle(e){this._isLayerActive(e)&&(this.removeHandles(e.uid),this._buildActiveLayerInfo(e))}_isLayerActive(e){return!this.respectLayerVisibility||e.legendEnabled&&e.layer?.legendEnabled}async _buildActiveLayerInfo(e){const i=e.layer,r=e.uid,n=this._layerInfosByLayerViewId[r];let s=this._activeLayerInfosByLayerViewId[r];s||(s=new on({layer:i,layerView:e,view:this.view??void 0}),this._activeLayerInfosByLayerViewId[r]=s);const a=n?.title!==void 0&&n.layer.uid===i.uid;s.title=a?n.title:i.title,s.respectLayerDefinitionExpression=this.respectLayerDefinitionExpression,s.respectLayerVisibility=this.respectLayerVisibility,s.hideLayersNotInCurrentView=this.hideLayersNotInCurrentView,s.keepCacheOnDestroy=this.keepCacheOnDestroy,s.sublayerIds=n?.sublayerIds||[];const o=i.parent&&"uid"in i.parent?this._layerViewByLayerId[i.parent?.uid]:null;s.parent=this._activeLayerInfosByLayerViewId[o?.uid],this._addActiveLayerInfo(s),this._constructLegendElements(s),this._attachHandlesToActiveLayerInfo(s)}_attachHandlesToActiveLayerInfo(e){const{layer:i,layerView:r}=e,n=r.uid;this.removeHandles(n),this.addHandles([ze(()=>i.title,s=>this._titleHandle(s,e)),ze(()=>[i.opacity,"renderer"in i&&i.renderer,"pointSymbol"in i&&i.pointSymbol,"lineSymbol"in i&&i.lineSymbol,"polygonSymbol"in i&&i.polygonSymbol,"effect"in i&&i.effect,"featureReduction"in i&&dce(i,r.view),this.view?.timeZone],()=>this._constructLegendElements(e)),ze(()=>"filter"in r&&r.filter,()=>{dce(r.layer,r.view)!=null&&this._constructLegendElements(e)}),as(()=>!!this.view?.stationary,()=>this._scaleHandle(e)),ze(()=>e.loading,()=>this.notifyChange("loading"),Di)],n),this.respectLayerVisibility&&this.addHandles([ze(()=>i.legendEnabled,s=>this._legendEnabledHandle(s,e)),ze(()=>r.legendEnabled,s=>{this.view?.suspended||this._legendEnabledHandle(s,e)})],n),this.respectLayerDefinitionExpression&&"definitionExpression"in i&&this.addHandles(ze(()=>i.definitionExpression,()=>this._constructLegendElements(e)),n)}_titleHandle(e,i){i.title=e,this._constructLegendElements(i)}_legendEnabledHandle(e,i){e?this._addActiveLayerInfo(i):this._removeActiveLayerInfo(i)}_scaleHandle(e){(e.isScaleDriven||e.hideLayersNotInCurrentView)&&this._constructLegendElements(e)}_addActiveLayerInfo(e){const{layerView:i,layer:r}=e;if(this._isLayerActive(i)&&!this.activeLayerInfos.includes(e)){const n=e.parent;if(n)n.children.includes(e)||n.children.push(e),this._sortActiveLayerInfos(n.children);else{const s=this.layerInfos?.some(o=>o.layer.uid===r.uid),a=r.parent;a&&"uid"in a&&this._layerViewByLayerId[a.uid]&&!s?this._activeLayerInfosWithNoParent.add(e):(this.activeLayerInfos.add(e),this._sortActiveLayerInfos(this.activeLayerInfos))}if(this._activeLayerInfosWithNoParent.length){const s=[];this._activeLayerInfosWithNoParent.forEach(a=>{const o=a.layer.parent,l=o&&"uid"in o?this._layerViewByLayerId[o?.uid]:null,c=this._activeLayerInfosByLayerViewId[l?.uid];c&&(s.push(a),a.parent=c)}),s.length&&(this._activeLayerInfosWithNoParent.removeMany(s),s.forEach(a=>this._addActiveLayerInfo(a)))}}}_removeActiveLayerInfo(e){const i=e.parent;i?i.children.remove(e):this.activeLayerInfos.remove(e)}async _getBuildLegendPromise(e){const{layer:i}=e;if("featureCollections"in i&&i.featureCollections)return e.buildLegendElementsForFeatureCollections(i.featureCollections);if("featureReduction"in i&&i.featureReduction&&"renderer"in i.featureReduction&&(i.featureReduction.type==="binning"||i.featureReduction.type==="cluster")&&(!this.view||i.featureReduction.maxScale<=this.view.scale))return e.buildLegendElementsForFeatureReduction(i.featureReduction);if("renderer"in i&&i.renderer&&!("sublayers"in i))return e.buildLegendElementsForRenderer(i.renderer);if("url"in i&&i.url&&i.type!=="catalog"&&i.type!=="knowledge-graph")return e.buildLegendElementsForTools();const r=e.children.map(n=>this._constructLegendElements(n));return Promise.all(r).then(()=>{})}async _constructLegendElements(e){const i=this._activeLayerInfosPromises.get(e);i&&await i.catch(()=>{});const r=this._getBuildLegendPromise(e);this._activeLayerInfosPromises.set(e,r),r.finally(()=>{this._activeLayerInfosPromises.delete(e)})}};d([m({type:cke})],sl.prototype,"activeLayerInfos",void 0),d([m()],sl.prototype,"basemapLegendVisible",void 0),d([m()],sl.prototype,"groundLegendVisible",void 0),d([m()],sl.prototype,"hideLayersNotInCurrentView",void 0),d([m()],sl.prototype,"keepCacheOnDestroy",void 0),d([m({readOnly:!0})],sl.prototype,"loading",null),d([m()],sl.prototype,"respectLayerDefinitionExpression",void 0),d([m()],sl.prototype,"respectLayerVisibility",void 0),d([m()],sl.prototype,"layerInfos",void 0),d([m({readOnly:!0})],sl.prototype,"state",null),d([m()],sl.prototype,"view",void 0),sl=d([U("esri.widgets.Legend.LegendViewModel")],sl);let jpt=class Lq{constructor(){this._groups=new Map}destroy(){this.removeAll()}add(e,i){if(Array.isArray(e)){const r=this._getOrCreateGroup(i);for(const n of e)this._isHandle(n)&&r.push(n)}else this._isHandle(e)&&this._getOrCreateGroup(i).push(e);return this}forEach(e,i){if(typeof e=="function")this._groups.forEach(r=>r.forEach(e));else{const r=this._getGroup(e);r&&i&&r.forEach(i)}}has(e){return this._groups.has(this._ensureGroupKey(e))}remove(e){if(typeof e!="string"&&Array.isArray(e)){for(const i of e)this.remove(i);return this}return this.has(e)?(this._removeAllFromGroup(this._getGroup(e)),this._groups.delete(this._ensureGroupKey(e)),this):this}removeAll(){return this._groups.forEach(e=>this._removeAllFromGroup(e)),this._groups.clear(),this}_isHandle(e){return e&&(!!e.remove||e instanceof Lq)}_getOrCreateGroup(e){if(this.has(e))return this._getGroup(e);const i=[];return this._groups.set(this._ensureGroupKey(e),i),i}_getGroup(e){return this._groups.get(this._ensureGroupKey(e))}_ensureGroupKey(e){return e||"_default_"}_removeAllFromGroup(e){for(const i of e)i instanceof Lq?i.removeAll():i.remove()}},Vpt=class extends BF{constructor(e){super(),this.destroyed=!1,e==="disconnect"?this.onDisconnected(()=>this.removeAllHandles()):this.onDestroy(()=>this.destroy())}addHandles(e,i){if(this.destroyed){const r=Array.isArray(e)?e:[e];for(const n of r)n.remove();return}this._handles??=new jpt,this._handles.add(e,i)}removeHandles(e){this._handles?.remove(e)}removeAllHandles(){this._handles?.removeAll()}destroy(){this.destroyed=!0,this.removeAllHandles()}hasHandles(e){return this._handles?.has(e)??!1}};const Bpt=_Ne(Vpt);const bA=(t,e)=>i=>Hpt(i,t);let Upt=class extends UX{#e=void 0;constructor(e,i){super(e,i),new JX(this.component)}hostLoad(){this.#e=ze(()=>this.component.el.view,e=>{this.instance.view=e,this.instance.map=e?.map},{sync:!0,initial:!0})}hostDestroy(){this.#e?.remove(),super.hostDestroy()}};const Hpt=HM(Upt);const Gpt=St`.esri-widget__heading{color:var(--calcite-color-text-2);margin:0 0 .5rem;font-weight:var(--calcite-font-weight-semibold)}h1.esri-widget__heading{font-size:var(--calcite-font-size-xl)}h2.esri-widget__heading{font-size:var(--calcite-font-size-md)}h3.esri-widget__heading,h4.esri-widget__heading,h5.esri-widget__heading,h6.esri-widget__heading{font-size:var(--calcite-font-size)}.esri-widget{--esri-widget-padding-x: 15px;--esri-widget-padding-y: var(--calcite-spacing-md);--esri-widget-padding: var(--esri-widget-padding-y) var(--esri-widget-padding-x);box-sizing:border-box;color:var(--calcite-color-text-2);background-color:var(--calcite-color-foreground-1);font-size:var(--calcite-font-size);line-height:var(--calcite-font-line-height-relative-tight)}.esri-widget *,.esri-widget :before,.esri-widget :after{box-sizing:inherit}.esri-widget.esri-widget--disabled>*{opacity:.4;pointer-events:none}.esri-widget.esri-widget--compact{--esri-widget-padding-y: 0;--esri-widget-padding-x: 0}.esri-widget__anchor{color:var(--calcite-color-text-2)}.esri-widget__anchor:hover{color:var(--calcite-color-text-3)}.esri-widget__anchor:hover,.esri-widget__anchor:focus{text-decoration:underline}.esri-widget__anchor--disabled{opacity:.4;pointer-events:none}.esri-widget__header{background-color:var(--calcite-color-foreground-1);flex:1 0 100%;justify-content:space-between;align-items:center;width:100%;min-height:48px;padding:12px 0 12px 15px;display:flex}.esri-widget__header .esri-widget__heading{width:calc(100% - 48px);text-align:initial;color:var(--calcite-color-text-1);align-items:center;margin:0;padding:0;display:flex}.esri-widget__header-button{appearance:none;cursor:pointer;color:var(--calcite-color-text-2);background-color:var(--calcite-color-foreground-1);border:none;flex:0 0 48px;justify-content:center;align-self:stretch;align-items:center;width:48px;padding:0;display:flex}.esri-widget__footer{background-color:var(--calcite-color-foreground-1);justify-content:center;align-items:center;width:100%;min-height:48px;display:flex}.esri-widget__footer-pagination{color:var(--calcite-color-text-2);justify-content:space-between;align-items:center;display:flex}.esri-widget__footer-pagination-previous-button,.esri-widget__footer-pagination-next-button{cursor:pointer;background-color:var(--calcite-color-foreground-1);border:0;margin:0 7px;padding:12px 15px;transition:background-color .125s ease-in-out}.esri-widget__footer-pagination-previous-button:hover,.esri-widget__footer-pagination-previous-button:focus,.esri-widget__footer-pagination-next-button:hover,.esri-widget__footer-pagination-next-button:focus{color:var(--calcite-color-text-1);background-color:var(--calcite-color-foreground-1)}.esri-menu{visibility:hidden;z-index:1;background-clip:padding;background-color:var(--calcite-color-foreground-1);background-clip:padding-box;width:100%;max-height:0;margin:2px 0 0;padding:0;font-size:var(--calcite-font-size);line-height:var(--calcite-spacing-xl);position:absolute;top:100%;left:0;overflow:hidden;box-shadow:0 1px 2px #0000004d}.esri-menu .esri-menu__header{color:var(--calcite-color-text-inverse);background-color:var(--calcite-color-inverse);padding:6px 12px}.esri-menu__list{margin:0;padding:0;list-style:none}.esri-menu__list-item{cursor:pointer;border-top:1px solid #adadad4d;border-left:3px solid #0000;padding:.8em 1em}.esri-menu__list-item [class^=esri-icon-],.esri-menu__list-item [class*=" esri-icon-"]{padding-right:2.8px}.esri-menu__list-item:first-child{border-top:none}.esri-menu__list-item--focus,.esri-menu__list-item:hover,.esri-menu__list-item:focus{background-color:var(--calcite-color-foreground-1)}.esri-menu__list-item:active{background-color:var(--calcite-color-foreground-current)}.esri-menu__list-item--active,.esri-menu__list-item--active:hover,.esri-menu__list-item--active:focus{background-color:var(--calcite-color-foreground-1);border-left-color:var(--calcite-color-brand)}.esri-widget__table{border-collapse:collapse;color:var(--calcite-color-text-1);border:none;width:100%;line-height:var(--calcite-font-line-height-relative-tight)}.esri-widget__table tr:nth-child(odd){background-color:var(--calcite-color-transparent)}.esri-widget__table tr:nth-child(2n){background-color:var(--calcite-color-transparent-press)}.esri-widget__table tr a{color:var(--calcite-color-text-2)}.esri-widget__table tr a:hover,.esri-widget__table tr a:focus{color:var(--calcite-color-text-1)}.esri-widget__table tr td,.esri-widget__table tr th{vertical-align:top;word-break:break-word;padding:.5em .7em;font-size:var(--calcite-font-size-sm);font-weight:var(--calcite-font-weight-regular)}.esri-widget__table tr th{text-align:left;border-right:3px solid #0000000d;width:50%}.esri-widget__table tr td{width:50%}.esri-input{color:var(--calcite-color-text-1);background-color:var(--calcite-color-foreground-1);border:1px solid #959595;font-size:var(--calcite-font-size)}.esri-input::-ms-clear{display:none}.esri-input::placeholder{opacity:1;color:var(--calcite-color-text-2)}.esri-input:placeholder-shown{text-overflow:ellipsis}.esri-input[type=text],.esri-input[type=password],.esri-input[type=number]{height:32px;padding:0 .5em}calcite-combobox.esri-input{border:none}.esri-widget__content--empty{text-align:center;color:var(--calcite-color-border-input);flex-flow:column wrap;align-items:center;padding:18px 22px;display:flex}.esri-widget__content--empty h1.esri-widget__heading,.esri-widget__content--empty h2.esri-widget__heading,.esri-widget__content--empty h3.esri-widget__heading,.esri-widget__content--empty h4.esri-widget__heading,.esri-widget__content--empty h5.esri-widget__heading{font-weight:var(--calcite-font-weight-regular)}.esri-widget__content-illustration--empty{width:128px;padding:1rem 0}.esri-widget__content-icon--empty{width:32px;padding:.5rem 0}.esri-select{appearance:none;cursor:pointer;color:var(--calcite-color-text-2);background:var(--calcite-color-foreground-1) url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='-8 -8 32 32' width='32' height='32'%3E%3Cpath d='M8 11.207l-4-4V5.793l4 4 4-4v1.414z' fill='%23adadad' fillrule='nonzero'/%3E%3C/svg%3E") 100% no-repeat;border:1px solid #959595;border-radius:0;width:100%;height:32px;margin:0;padding:0 .5em;font-family:inherit;font-size:.85em;display:block}.esri-select[disabled]{cursor:auto}.esri-select::-ms-expand{display:none}.esri-disabled a,.esri-disabled [role=menu],.esri-disabled [role=checkbox],.esri-disabled [class^=esri-icon-],.esri-disabled [class*=" esri-icon-"]{color:var(--calcite-color-text-3)}.keynav-mode .esri-widget:focus,.keynav-mode .esri-widget :focus{z-index:1;outline-offset:2px;outline:2px solid #adadad}.esri-widget__loader-animation{border:.15em solid #adadad4d;border-top-color:var(--calcite-color-border-input);border-radius:100%;width:1em;height:1em;font-size:var(--calcite-font-size-md);animation:1.25s linear infinite esri-rotate;display:block;transform:translateZ(0)}:dir(rtl) .esri-widget__table th{text-align:right;border-left:3px solid #0000000d;border-right:none}:dir(rtl) .esri-select{background-position:0}:dir(rtl) .esri-menu__list-item{border-left:none;border-right:3px solid #0000}:dir(rtl) .esri-menu__list-item [class^=esri-icon-],:dir(rtl) .esri-menu__list-item [class*=" esri-icon-"]{padding-left:2px;padding-right:0}:dir(rtl) .esri-menu__list-item--active{border-right-color:var(--calcite-color-brand)}.esri-icon-font-fallback-text{clip:rect(0 0 0 0);width:1px;height:1px;position:absolute;overflow:hidden}.esri-rotating{animation:1.25s linear infinite esri-rotate;transform:translateZ(0)}.esri-clearfix:before,.esri-clearfix:after{content:" ";display:table}.esri-clearfix:after{clear:both}.esri-interactive{cursor:pointer}.esri-hidden{display:none!important}.esri-invisible{visibility:hidden!important}.esri-offscreen{position:absolute;top:-999em;left:-999em}.esri-match-height{flex-direction:column;flex:auto;display:flex;overflow:hidden}:host{overflow:auto;width:var(--arcgis-legend-internal-width, 300px)}:host([card-style-layout="side-by-side"]){--arcgis-legend-internal-width: auto}`,qpt=bA(sl);var Cw;let Wpt=(Cw=class extends Et{constructor(){super(...arguments),this.messages=XT({}),this.final=Bpt("destroy"),this.viewModel=qpt(this),this._isCardStyle=!1,this.view=this.viewModel.view,this.icon="legend",this.activeLayerInfos=this.viewModel.activeLayerInfos,this.basemapLegendVisible=this.viewModel.basemapLegendVisible,this.headingLevel=3,this.hideLayersNotInCurrentView=this.viewModel.hideLayersNotInCurrentView,this.respectLayerDefinitionExpression=this.viewModel.respectLayerDefinitionExpression,this.layerInfos=this.viewModel.layerInfos,this.loading=this.viewModel.loading,this.legendStyle="classic",this.autoDestroyDisabled=!1,this.label=this.messages?.componentLabel,this.state=this.viewModel.state,this.arcgisPropertyChange=w_()("state"),this.arcgisReady=Re()}get ignoreLayerVisibility(){return!this.viewModel.respectLayerVisibility}set ignoreLayerVisibility(e){this.viewModel.respectLayerVisibility=!e}get respectLayerVisibilityDisabled(){return!this.viewModel.respectLayerVisibility}set respectLayerVisibilityDisabled(e){this.viewModel.respectLayerVisibility=!e}async destroy(){await this.manager.destroy()}loaded(){this.manager.onLifecycle(()=>[Oa(()=>this.el.view,"resize",()=>this.requestUpdate()),Oa(()=>this.activeLayerInfos,"change",()=>this._refreshActiveLayerInfos(this.activeLayerInfos)),ze(()=>[this.cardStyleLayout,this.legendStyle,typeof this.legendStyle=="object"?this.legendStyle.type:void 0,typeof this.legendStyle=="object"?this.legendStyle.layout:void 0],()=>{const e=this.legendStyle,i=typeof e=="object"?e:{type:e};this._isCardStyle=i.type==="card",this._isCardStyle?(this.cardStyleLayout=this.cardStyleLayout||i.layout||"auto",this.cardStyleLayout==="auto"&&this.el.closest("arcgis-expand")&&(this.cardStyleLayout="stack"),this.setAttribute("card-style-layout",this.cardStyleLayout)):this.removeAttribute("card-style-layout")},{initial:!0})])}_refreshActiveLayerInfos(e){e.forEach(i=>{this.final.removeHandles(`version_${i.layer.uid}`),this._renderOnActiveLayerInfoChange(i)}),this.requestUpdate()}render(){return J`<div class=${q(Ui(zo.widget,{[zo.panel]:!this._isCardStyle}))}>${this._isCardStyle&&this.view?J`<arcgis-legend-card-view .activeLayerInfos=${this.activeLayerInfos} .headingLevel=${this.headingLevel} .messages=${this.messages} .layout=${this.cardStyleLayout} .view=${this.view}></arcgis-legend-card-view>`:J`<arcgis-legend-classic-view .activeLayerInfos=${this.activeLayerInfos} .headingLevel=${this.headingLevel} .messages=${this.messages}></arcgis-legend-classic-view>`}</div>`}_renderOnActiveLayerInfoChange(e){const i=ze(()=>e.version,()=>this.requestUpdate());this.final.addHandles(i,`version_${e.layer.uid}`);const r=Oa(()=>e.children,"change",()=>e.children.forEach(n=>this._renderOnActiveLayerInfoChange(n)));this.final.addHandles(r,`version_${e.layer.uid}`),e.children.forEach(n=>this._renderOnActiveLayerInfoChange(n))}},Cw.properties={_isCardStyle:16,view:0,referenceElement:1,position:1,icon:1,activeLayerInfos:0,basemapLegendVisible:5,headingLevel:9,hideLayersNotInCurrentView:5,respectLayerDefinitionExpression:5,ignoreLayerVisibility:5,respectLayerVisibilityDisabled:5,layerInfos:0,loading:39,cardStyleLayout:1,legendStyle:1,autoDestroyDisabled:5,messageOverrides:0,label:1,state:3},Cw.styles=Gpt,Cw);nn("arcgis-legend",Wpt);const Ypt=St`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{box-sizing:border-box;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:host{position:absolute;inset:0;display:flex;block-size:100%;inline-size:100%;flex-direction:column;overflow:hidden}.main{position:relative;display:flex;block-size:100%;inline-size:100%;flex:1 1 auto;flex-direction:row;justify-content:space-between;overflow:hidden}.content{display:flex;block-size:100%;inline-size:100%;flex-direction:column;flex-wrap:nowrap;overflow:auto;justify-content:space-between}.content ::slotted(calcite-shell-center-row),.content ::slotted(calcite-panel),.content ::slotted(calcite-flow){flex:1 1 auto;align-self:stretch;max-block-size:unset}.content--behind{position:absolute;inset:0;border-width:0px;z-index:calc(var(--calcite-z-index) - 1);display:initial}.content--non-interactive{pointer-events:none;display:flex;block-size:100%;inline-size:100%;flex-direction:column;flex-wrap:nowrap}::slotted(calcite-shell-center-row){inline-size:unset}::slotted(.header .heading){font-size:var(--calcite-font-size--2);line-height:1.375;font-weight:var(--calcite-font-weight-normal)}slot[name=panel-start]::slotted(calcite-shell-panel),slot[name=panel-end]::slotted(calcite-shell-panel){position:relative;z-index:calc(var(--calcite-z-index) + 1)}slot[name=panel-end]::slotted(calcite-shell-panel){margin-inline-start:auto}::slotted(calcite-panel),::slotted(calcite-flow){border-width:var(--calcite-border-width-sm);border-color:var(--calcite-shell-border-color, var(--calcite-color-border-3));border-inline-start-width:var(--calcite-border-width-none);border-inline-end-width:var(--calcite-border-width-none);border-style:solid}slot[name=center-row]::slotted(calcite-shell-center-row:not([detached])),slot[name=panel-top]::slotted(calcite-shell-center-row:not([detached])),slot[name=panel-bottom]::slotted(calcite-shell-center-row:not([detached])){border-color:var(--calcite-shell-border-color, var(--calcite-color-border-3));border-inline-start-width:var(--calcite-border-width-sm);border-inline-end-width:var(--calcite-border-width-sm)}.center-content{display:flex;flex-direction:column;justify-content:space-between;block-size:100%;inline-size:100%;min-inline-size:0}.content-bottom{justify-content:flex-end}::slotted(calcite-shell-center-row){flex:none;align-self:stretch}::slotted(calcite-tip-manager){position:absolute;z-index:var(--calcite-z-index-toast);box-sizing:border-box}@keyframes in-up{0%{opacity:0;transform:translate3D(0,5px,0)}to{opacity:1;transform:translateZ(0)}}::slotted(calcite-tip-manager){animation:in-up var(--calcite-internal-animation-timing-slow) ease-in-out;border-radius:.25rem;--tw-shadow: 0 6px 20px -4px rgba(0, 0, 0, .1), 0 4px 12px -2px rgba(0, 0, 0, .08);--tw-shadow-colored: 0 6px 20px -4px var(--tw-shadow-color), 0 4px 12px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow);inset-block-end:.5rem;inset-inline:var(--calcite-shell-tip-spacing, 26vw)}slot[name=center-row]::slotted(calcite-shell-center-row),slot[name=panel-bottom]::slotted(calcite-shell-center-row){margin-block-start:auto}slot[name=panel-top]::slotted(calcite-shell-center-row){margin-block-end:auto}.position-wrapper{position:absolute;pointer-events:none;inset:0}slot[name=modals]::slotted(calcite-modal){position:absolute}:host([hidden]){display:none}[hidden]{display:none}`,uh={main:"main",content:"content",contentBehind:"content--behind",contentBottom:"content-bottom",contentNonInteractive:"content--non-interactive",footer:"footer",positionedSlotWrapper:"positioned-slot-wrapper",contentBehindCenterContent:"center-content"},Ju={centerRow:"center-row",panelStart:"panel-start",panelEnd:"panel-end",panelTop:"panel-top",panelBottom:"panel-bottom",header:"header",footer:"footer",alerts:"alerts",sheets:"sheets",modals:"modals",dialogs:"dialogs"},X5=class X5 extends Et{constructor(){super(),this.hasAlerts=!1,this.hasDialogs=!1,this.hasFooter=!1,this.hasHeader=!1,this.hasModals=!1,this.hasOnlyPanelBottom=!1,this.hasPanelBottom=!1,this.hasPanelTop=!1,this.hasSheets=!1,this.panelIsResizing=!1,this.contentBehind=!1,this.listen("calciteInternalShellPanelResizeStart",this.handleCalciteInternalShellPanelResizeStart),this.listen("calciteInternalShellPanelResizeEnd",this.handleCalciteInternalShellPanelResizeEnd)}willUpdate(e){(e.has("hasPanelTop")&&(this.hasUpdated||this.hasPanelTop!==!1)||e.has("hasPanelBottom")&&(this.hasUpdated||this.hasPanelBottom!==!1))&&(this.hasOnlyPanelBottom=!this.hasPanelTop&&this.hasPanelBottom)}handleCalciteInternalShellPanelResizeStart(e){this.panelIsResizing=!0,e.stopPropagation()}handleCalciteInternalShellPanelResizeEnd(e){this.panelIsResizing=!1,e.stopPropagation()}handleHeaderSlotChange(e){this.hasHeader=!!ni(e)}handleFooterSlotChange(e){this.hasFooter=!!ni(e)}handleAlertsSlotChange(e){this.hasAlerts=!!ni(e),Md(e)?.map(i=>{i.tagName==="CALCITE-ALERT"&&(i.embedded=!0)})}handleSheetsSlotChange(e){this.hasSheets=!!ni(e),Md(e)?.map(i=>{i.tagName==="CALCITE-SHEET"&&(i.embedded=!0)})}handleModalsSlotChange(e){this.hasModals=!!ni(e),Md(e)?.map(i=>{i.tagName==="CALCITE-MODAL"&&(i.embedded=!0)})}handlePanelTopChange(e){this.hasPanelTop=ni(e)}handlePanelBottomChange(e){this.hasPanelBottom=ni(e)}handleDialogsSlotChange(e){this.hasDialogs=!!ni(e),Md(e)?.map(i=>{i.tagName==="CALCITE-DIALOG"&&(i.embedded=!0)})}renderHeader(){return J`<div .hidden=${!this.hasHeader}>${xt("header",J`<slot name=${Ju.header} @slotchange=${this.handleHeaderSlotChange}></slot>`)}</div>`}renderFooter(){return xt("footer",J`<div class=${q(uh.footer)} .hidden=${!this.hasFooter}><slot name=${Ju.footer} @slotchange=${this.handleFooterSlotChange}></slot></div>`)}renderAlerts(){return J`<div .hidden=${!this.hasAlerts}>${xt("alerts",J`<slot name=${Ju.alerts} @slotchange=${this.handleAlertsSlotChange}></slot>`)}</div>`}renderSheets(){return J`<div .hidden=${!this.hasSheets}>${xt("sheets",J`<slot name=${Ju.sheets} @slotchange=${this.handleSheetsSlotChange}></slot>`)}</div>`}renderModals(){return J`<div .hidden=${!this.hasModals}>${xt("modals",J`<slot name=${Ju.modals} @slotchange=${this.handleModalsSlotChange}></slot>`)}</div>`}renderDialogs(){return J`<div .hidden=${!this.hasDialogs}>${xt("dialogs",J`<slot name=${Ju.dialogs} @slotchange=${this.handleDialogsSlotChange}></slot>`)}</div>`}renderContent(){const{panelIsResizing:e}=this,i=xt("default-slot",J`<slot></slot>`),r=e?J`<div class=${q(uh.contentNonInteractive)}>${i}</div>`:i,n=xt("center-row-slot",J`<slot name=${Ju.centerRow}></slot>`),s=xt("panel-bottom-slot",J`<slot name=${Ju.panelBottom} @slotchange=${this.handlePanelBottomChange}></slot>`),a=xt("panel-top-slot",J`<slot name=${Ju.panelTop} @slotchange=${this.handlePanelTopChange}></slot>`),o="content-container";return this.contentBehind?[xt(o,J`<div class=${q({[uh.content]:!0,[uh.contentBehind]:!0})}>${r}</div>`),J`<div class=${q({[uh.contentBehindCenterContent]:!0,[uh.contentBottom]:this.hasOnlyPanelBottom})}>${a}${s}${n}</div>`]:[xt(o,J`<div class=${q({[uh.content]:!0,[uh.contentBottom]:this.hasOnlyPanelBottom})}>${a}${r}${s}${n}</div>`)]}renderMain(){return J`<div class=${q(uh.main)}><slot name=${Ju.panelStart}></slot>${this.renderContent()}<slot name=${Ju.panelEnd}></slot></div>`}renderPositionedSlots(){return J`<div class=${q(uh.positionedSlotWrapper)}>${this.renderAlerts()}${this.renderModals()}${this.renderDialogs()}${this.renderSheets()}</div>`}render(){return J`${this.renderHeader()}${this.renderMain()}${this.renderFooter()}${this.renderPositionedSlots()}`}};X5.properties={hasAlerts:[16,{},{state:!0}],hasDialogs:[16,{},{state:!0}],hasFooter:[16,{},{state:!0}],hasHeader:[16,{},{state:!0}],hasModals:[16,{},{state:!0}],hasOnlyPanelBottom:[16,{},{state:!0}],hasPanelBottom:[16,{},{state:!0}],hasPanelTop:[16,{},{state:!0}],hasSheets:[16,{},{state:!0}],panelIsResizing:[16,{},{state:!0}],contentBehind:[7,{},{reflect:!0,type:Boolean}]},X5.styles=Ypt;let Dq=X5;$i("calcite-shell",Dq);const Zpt=new Set(["children","localName","ref","style","className"]),Qce=new WeakMap,eue=(t,e,i,r,n)=>{const s=n?.[e];s===void 0?(t[e]=i,i==null&&e in HTMLElement.prototype&&t.removeAttribute(e)):i!==r&&((a,o,l)=>{let c=Qce.get(a);c===void 0&&Qce.set(a,c=new Map);let h=c.get(o);l!==void 0?h===void 0?(c.set(o,h={handleEvent:l}),a.addEventListener(o,h)):h.handleEvent=l:h!==void 0&&(c.delete(o),a.removeEventListener(o,h))})(t,s,i)},Xpt=({react:t,tagName:e,elementClass:i,events:r,displayName:n})=>{const s=new Set(Object.keys(r??{})),a=t.forwardRef(((o,l)=>{const c=t.useRef(new Map),h=t.useRef(null),f={},g={};for(const[y,b]of Object.entries(o))Zpt.has(y)?f[y==="className"?"class":y]=b:s.has(y)||y in i.prototype?g[y]=b:f[y]=b;return t.useLayoutEffect((()=>{if(h.current===null)return;const y=new Map;for(const b in g)eue(h.current,b,o[b],c.current.get(b),r),c.current.delete(b),y.set(b,o[b]);for(const[b,_]of c.current)eue(h.current,b,void 0,_,r);c.current=y})),t.useLayoutEffect((()=>{h.current?.removeAttribute("defer-hydration")}),[]),f.suppressHydrationWarning=!0,t.createElement(e,{...f,ref:t.useCallback((y=>{h.current=y,typeof l=="function"?l(y):l!==null&&(l.current=y)}),[l])})}));return a.displayName=n??i.name,a},wA=_ze(Che,Xpt),lU=wA(VM("calcite-action",{})),Jpt=wA(VM("calcite-action-bar",{onCalciteActionBarCollapse:"calciteActionBarCollapse",onCalciteActionBarExpand:"calciteActionBarExpand",onCalciteActionBarToggle:"calciteActionBarToggle"})),TL=wA(VM("calcite-panel",{onCalcitePanelClose:"calcitePanelClose",onCalcitePanelCollapse:"calcitePanelCollapse",onCalcitePanelExpand:"calcitePanelExpand",onCalcitePanelScroll:"calcitePanelScroll",onCalcitePanelToggle:"calcitePanelToggle"})),Kpt=wA(VM("calcite-shell",{})),Qpt=wA(VM("calcite-shell-panel",{onCalciteShellPanelCollapse:"calciteShellPanelCollapse",onCalciteShellPanelExpand:"calciteShellPanelExpand"}));const tue={scrim:"scrim",content:"content"},iue={s:72,l:480},eft=St`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{position:absolute;inset:0;z-index:var(--calcite-z-index-overlay);display:flex;block-size:100%;inline-size:100%;flex-direction:column;align-items:stretch}@keyframes calcite-scrim-fade-in{0%{--tw-bg-opacity: 0}to{--tw-text-opacity: 1}}.scrim{position:absolute;inset:0;display:flex;flex-direction:column;align-content:center;align-items:center;justify-content:center;overflow:hidden;animation:calcite-scrim-fade-in var(--calcite-internal-animation-timing-medium) ease-in-out;background-color:var(--calcite-scrim-background, var(--calcite-color-transparent-scrim))}.content{padding:1rem}:host([hidden]){display:none}[hidden]{display:none}`,J5=class J5 extends Et{constructor(){super(...arguments),this.loaderRef=wr(),this.resizeObserver=ea("resize",()=>this.handleResize()),this.messages=qn(),this.hasContent=!1,this.loading=!1}connectedCallback(){super.connectedCallback(),this.resizeObserver?.observe(this.el)}disconnectedCallback(){super.disconnectedCallback(),this.resizeObserver?.disconnect()}handleDefaultSlotChange(e){this.hasContent=BFe(e)}getScale(e){return e<iue.s?"s":e>=iue.l?"l":"m"}handleResize(){const{el:e}=this;this.loaderScale=this.getScale(Math.min(e.clientHeight,e.clientWidth)??0)}render(){const{hasContent:e,loading:i,loaderScale:r,messages:n}=this;return J`<div class=${q(tue.scrim)}>${i&&r?J`<calcite-loader .label=${n.loading} .scale=${r} ${zt(this.loaderRef)}></calcite-loader>`:null}<div class=${q(tue.content)} .hidden=${!e}><slot @slotchange=${this.handleDefaultSlotChange}></slot></div></div>`}};J5.properties={hasContent:[16,{},{state:!0}],loaderScale:[16,{},{state:!0}],loading:[7,{},{reflect:!0,type:Boolean}],messageOverrides:[0,{},{attribute:!1}]},J5.styles=eft;let Rq=J5;$i("calcite-scrim",Rq);const Bl="basemap-gallery",mc={base:Bl,sourceLoading:`${Bl}--source-loading`,layoutGrid:`${Bl}--grid`,narrowItems:`${Bl}--narrow-items`,loader:`${Bl}__loader`,item:`${Bl}__item`,itemContainer:`${Bl}__item-container`,itemContent:`${Bl}__item-content`,itemTitle:`${Bl}__item-title`,itemTagsContainer:`${Bl}__item-tags-container`,itemThumbnail:`${Bl}__item-thumbnail`,selectedItem:`${Bl}__item--selected`,itemError:`${Bl}__item--error`};function tft(t){return t.portalItem?.type==="Web Scene"||t.referenceLayers.some(e=>e.type==="scene")}function ift(t){return!!t?.portalItem?.tags?.some(e=>e.toLowerCase()==="beta")}const rft=St`@keyframes esri-basemap-slide{0%{opacity:0;margin-top:0;margin-left:0}75%{opacity:0;margin-top:0;margin-left:0}to{opacity:1;margin-top:5px;margin-left:5px}}@keyframes esri-docking-animation{0%{opacity:0}25%{opacity:0}to{opacity:1}}@keyframes popup-intro-animation-down{0%{opacity:0;transform:translateY(-5px)}to{opacity:1;transform:translate(0)}}@keyframes popup-intro-animation-up{0%{opacity:0;transform:translateY(5px)}to{opacity:1;transform:translate(0)}}@supports (-ms-ime-align: auto){.esri-slider__anchor:focus{outline:1px dotted #000}}@keyframes esri-spinner--start-animation{0%{opacity:0;transform:scale(0)}to{opacity:1;transform:scale(1)}}@keyframes esri-spinner--finish-animation{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(0)}}@keyframes esri-spinner--rotate-animation{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (prefers-reduced-motion){.esri-utility-network-trace__reset-prompt{animation:none!important}}@media (prefers-reduced-motion){.esri-popup--aligned-top-center,.esri-popup--aligned-top-left,.esri-popup--aligned-top-right,.esri-popup--aligned-bottom-center,.esri-popup--aligned-bottom-left,.esri-popup--aligned-bottom-right,.esri-popup--is-docked{animation:none!important}}@media (prefers-reduced-motion: reduce){.esri-fov-overlay{animation:none!important}}@keyframes esri-fade-in-down{0%{opacity:0;transform:translateY(-5px)}25%{opacity:0;transform:translateY(-5px)}to{opacity:1;transform:translate(0)}}@keyframes esri-fade-in-up{0%{opacity:0;transform:translateY(5px)}25%{opacity:0;transform:translateY(5px)}to{opacity:1;transform:translate(0)}}@keyframes esri-fade-in{0%{opacity:0}25%{opacity:0}to{opacity:1}}@keyframes esri-fade-in-scale{0%{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}@keyframes looping-progresss-bar-ani{0%{width:0;left:0}20%{width:20%;left:0}80%{width:20%;left:80%}to{width:0;left:100%}}@keyframes esri-rotate{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes panel-advance{0%{opacity:0;transform:translate(50px) scale(.99)}to{opacity:1;transform:translate(0) scale(1)}}@keyframes panel-retreat{0%{opacity:0;transform:translate(-50px) scale(.99)}to{opacity:1;transform:translate(0) scale(1)}}@keyframes panel-advance--rtl{0%{opacity:0;transform:translate(-50px) scale(.99)}to{opacity:1;transform:translate(0) scale(1)}}@keyframes panel-retreat--rtl{0%{opacity:0;transform:translate(50px) scale(.99)}to{opacity:1;transform:translate(0) scale(1)}}:host{container-type:inline-size}.basemap-gallery__empty-message{padding:12px 15px;animation:.5s ease-in-out esri-fade-in}.basemap-gallery__item{box-sizing:border-box;cursor:pointer;border:1px solid var(--calcite-color-background);flex-direction:row;width:100%;transition:background-color .25s ease-in-out,border-color .25s ease-in-out;animation:.5s ease-in-out esri-fade-in;display:flex;position:relative}.basemap-gallery__item:hover{background-color:var(--calcite-color-foreground-3);border-color:var(--calcite-color-background-inverse)}.basemap-gallery__item:hover .basemap-gallery__item-title{color:var(--calcite-color-text-1)}.basemap-gallery__item:focus{outline:none}.basemap-gallery__item--error{opacity:var(--calcite-opacity-light);background-color:var(--calcite-color-transparent)!important;border-color:var(--calcite-color-transparent)!important;cursor:auto}.basemap-gallery__item-thumbnail{aspect-ratio:1.5;border-inline-end:1px solid var(--calcite-color-border-1);flex-shrink:0;width:120px;min-width:120px;transition:background-color .25s ease-in-out,border-color .25s ease-in-out}.basemap-gallery__item-title{color:var(--calcite-color-text-3);justify-content:flex-start;align-items:center;width:100%;height:100%;font-size:var(--calcite-font-size-sm);transition:color .25s ease-in-out,font-weight .25s ease-in-out;display:flex}.basemap-gallery__item-title span{text-align:start;text-overflow:ellipsis;word-wrap:break-word;word-break:break-word;hyphens:auto;-webkit-line-clamp:2;line-clamp:2;-webkit-box-orient:vertical;width:100%;display:-webkit-box;overflow:hidden}.basemap-gallery__item--selected,.basemap-gallery__item--selected:hover,.basemap-gallery__item--selected:focus{cursor:auto;background-color:color-mix(in srgb,var(--calcite-color-brand-underline),70% transparent);border-color:var(--calcite-color-status-info)!important}.basemap-gallery__item--selected .basemap-gallery__item-title,.basemap-gallery__item.basemap-gallery__item--selected:hover .basemap-gallery__item-title,.basemap-gallery__item.basemap-gallery__item--selected:focus .basemap-gallery__item-title{color:var(--calcite-color-text-1);font-weight:var(--calcite-font-weight-medium)}.basemap-gallery__item-content{flex-direction:column;gap:var(--calcite-spacing-md);min-width:0;padding-block:var(--calcite-spacing-base);padding-inline:var(--calcite-spacing-md);display:flex}.basemap-gallery__item-tags-container{flex-direction:row;gap:var(--calcite-spacing-base);display:flex}.basemap-gallery__item-tags-container calcite-chip{--calcite-font-size--2: var(--calcite-font-size--3);cursor:inherit}@supports (object-fit: cover){.basemap-gallery__item-thumbnail{object-fit:cover}}@container (width>=200px) and (width <= 300px){.basemap-gallery__item{align-items:center}.basemap-gallery__item:not(.basemap-gallery__item--selected,:hover){border-color:var(--calcite-color-transparent)}}@container (width>=200px) and (width <= 278px){.basemap-gallery__item-thumbnail{aspect-ratio:1;width:80px;min-width:80px}}@container (width<200px) or (width>=350px){.basemap-gallery__item{text-align:center;flex-flow:column wrap}.basemap-gallery__item:not(.basemap-gallery .basemap-gallery__item--selected,:hover){border-color:var(--calcite-color-border-1)}.basemap-gallery__item-thumbnail{border-block-end:1px solid var(--calcite-color-border-1);border-inline-end:none;width:100%;min-width:0;height:auto}.basemap-gallery__item-content{height:32px;padding-block:var(--calcite-spacing-xxs);padding-inline:var(--calcite-spacing-xs);position:relative}.basemap-gallery__item-tags-container{position:absolute;inset-block-end:45px;inset-inline-end:5px}}`,K5=class K5 extends Et{constructor(){super(...arguments),this._itemState="loading",this._isActive=!1}loaded(){this.manager.onLifecycle(()=>[ze(()=>this.item.state,e=>{this._itemState=e},{sync:!0}),ze(()=>this.viewModel.activeBasemap,e=>{this._isActive=this.item.basemap.id===e?.id,this._isActive&&(Unt(this)?.focus(),this.el.scrollIntoView({block:"nearest"}))},{initial:!0,sync:!0})])}render(){const{item:e,itemIndex:i,viewModel:r,messages:n}=this;if(!e.basemap)return null;const s=e.basemap.thumbnailUrl||Zye("./assets/basemap-gallery/images/basemap-toggle-64.svg"),a=e.basemap.title,o=e.basemap.portalItem?.snippet,l=e.error?.message||o||a,{state:c,activeBasemapIndex:h}=this.viewModel,f=this.disabled||c==="disabled",g=h===i,y=g||h===-1&&i===0?0:-1,b={[mc.selectedItem]:g,[mc.itemError]:e.state==="error"},_=`basemapgallery-item-${e.uid}`;return J`<div .ariaChecked=${g} .ariaDisabled=${f} aria-labelledby=${_??De} class=${q(Ui(mc.item,b))} role=radio tabindex=${y??De} title=${l??De} @click=${()=>{e.state==="ready"&&(r.activeBasemap=e.basemap)}}><img alt class=${q(mc.itemThumbnail)} src=${s??De}><div class=${q(mc.itemContent)}><div class=${q(mc.itemTitle)}><span id=${_??De}>${a}</span></div>${tft(e.basemap)?nft(e.basemap,n):null}</div>${e.state!=="loading"?null:J`<calcite-scrim><span aria-hidden=true class=${q(zo.loaderAnimation)} role=presentation></span></calcite-scrim>`}</div>`}};K5.properties={_itemState:16,_isActive:16,disabled:5,item:0,itemIndex:9,viewModel:0,messages:0},K5.styles=rft;let zq=K5;function nft(t,e){return J`<div class=${q(mc.itemTagsContainer)}>${sft(e)}${ift(t)?aft(e):null}</div>`}function sft(t){return J`<calcite-chip scale=s .label=${t.tag3D}>${t.tag3D}</calcite-chip>`}function aft(t){return J`<calcite-chip appearance=outline-fill scale=s .label=${t.tagBeta}>${t.tagBeta}</calcite-chip>`}nn("arcgis-basemap-gallery-item",zq);function Fq(t){return t!=null&&typeof t=="object"&&t.type==="2d"&&t.view2dType==="linkchart"}function rue(t){return t===1?"global":"local"}function oft(t){return pke(t)||KY(t)||QY(t)}function pke(t){return Ev(t)||n9(t)}const lft=12;var is;let cT=(is=class{constructor(e){const i=is.checkUnsupported(e);if(i!=null)throw i;const r=e;this.spatialReference=r.spatialReference,this._isWebMercator=this.spatialReference.isWebMercator,this._isGCS=y_(this.spatialReference),this.origin=[r.origin.x,r.origin.y],this.pixelSize=r.size[0],this.dpi=r.dpi;const n=r.lods.reduce((c,h)=>(h.level<c.minLod.level&&(c.minLod=h),c.max=Math.max(c.max,h.level),c),{minLod:r.lods[0],max:-1/0}),s=n.minLod,a=2**s.level;let o=s.resolution*a,l=s.scale*a;this.levels=new Array(n.max+1);for(let c=0;c<this.levels.length;c++)this.levels[c]={resolution:o,scale:l,tileSize:[o*r.size[0],o*r.size[1]]},o/=2,l/=2}clone(){return new is(this.toTileInfo())}toTileInfo(){return new Cs({dpi:this.dpi,origin:new gt({x:this.origin[0],y:this.origin[1],spatialReference:this.spatialReference}),size:[this.pixelSize,this.pixelSize],spatialReference:this.spatialReference,lods:this.levels.map((e,i)=>new rs({level:i,scale:e.scale,resolution:e.resolution}))})}getExtent(e,i,r,n){const s=this.levels[e],a=s.tileSize[0],o=s.tileSize[1];n[0]=this.origin[0]+r*a,n[2]=this.origin[0]+(r+1)*a,n[3]=this.origin[1]-i*o,n[1]=this.origin[1]-(i+1)*o}convertExtentToRadians(e,i){this._isWebMercator?(i[0]=Xre(e[0]),i[1]=Jre(e[1]),i[2]=Xre(e[2]),i[3]=Jre(e[3])):this._isGCS&&(i[0]=_p(e[0]),i[1]=_p(e[1]),i[2]=_p(e[2]),i[3]=_p(e[3]))}getExtentGeometry(e,i,r,n=new Wt){return this.getExtent(e,i,r,dh),n.spatialReference=this.spatialReference,n.xmin=dh[0],n.ymin=dh[1],n.xmax=dh[2],n.ymax=dh[3],n.zmin=void 0,n.zmax=void 0,n}ensureMaxLod(e){if(e==null)return!1;let i=!1;for(;this.levels.length<=e;){const{resolution:r,scale:n}=this.levels[this.levels.length-1],s=r/2*this.pixelSize;this.levels.push({resolution:r/2,scale:n/2,tileSize:[s,s]}),i=!0}return i}capMaxLod(e){this.levels.length>e+1&&(this.levels.length=e+1)}getMaxLod(){return this.levels.length-1}scaleAtLevel(e){return this.levels[0].scale/2**e}levelAtScale(e){const i=this.levels[0].scale;return e>=i?0:Math.log(i/e)*Math.LOG2E}resolutionAtLevel(e){return this.levels[0].resolution/2**e}compatibleWith(e,i=1/0){if(is.checkUnsupported(e))return!1;const r=new is(e);if(!r.spatialReference.equals(this.spatialReference)||r.pixelSize!==this.pixelSize)return!1;const n=Math.min(this.levels.length-1,r.levels.length-1,i),s=this.levels[n].resolution;let a=.5*s;return!po(r.origin[0],this.origin[0],a)||!po(r.origin[1],this.origin[1],a)?!1:(a=.5*s/2**n/this.pixelSize*lft,po(s,r.levels[n].resolution,a))}rootTilesInExtent(e,i=null,r=1/0){const n=new Array,s=this.levels[0].tileSize;if(e==null||s[0]===0||s[1]===0)return n;is.computeRowColExtent(e,s,this.origin,dh);let a=dh[1],o=dh[3],l=dh[0],c=dh[2];const h=c-l,f=o-a;if(h*f>r){const g=Math.floor(Math.sqrt(r));f>g&&(a=a+Math.floor(.5*f)-Math.floor(.5*g),o=a+g),h>g&&(l=l+Math.floor(.5*h)-Math.floor(.5*g),c=l+g)}for(let g=a;g<o;g++)for(let y=l;y<c;y++)n.push([0,g,y]);return i!=null&&(i[0]=this.origin[0]+l*s[0],i[1]=this.origin[1]-o*s[1],i[2]=this.origin[0]+c*s[0],i[3]=this.origin[1]-a*s[1]),n}static computeRowColExtent(e,i,r,n){const s=.001*(e[2]-e[0]+(e[3]-e[1]));n[0]=Math.max(0,Math.floor((e[0]+s-r[0])/i[0])),n[2]=Math.max(0,Math.ceil((e[2]-s-r[0])/i[0])),n[1]=Math.max(0,Math.floor((r[1]-e[3]+s)/i[1])),n[3]=Math.max(0,Math.ceil((r[1]-e[1]-s)/i[1]))}static isPowerOfTwo(e){const i=e.lods,r=i[0].resolution*2**i[0].level;return!i.some(n=>!uZ(n.resolution,r/2**n.level))}static hasGapInLevels(e){const i=e.lods.map(r=>r.level);i.sort((r,n)=>r-n);for(let r=1;r<i.length;r++)if(i[r]!==i[0]+r)return!0;return!1}static tileSizeSupported(e){const i=e.size[1];return i===e.size[0]&&!(i&i-1)&&i>=128&&i<=512}static hasOriginPerLODs(e){const i=e.origin;return e.lods.some(r=>r.origin!=null&&(r.origin[0]!==i.x||r.origin[1]!==i.y))}static getMissingTileInfoError(){return new ee("tilingscheme:tile-info-missing","Tiling scheme must have tiling information")}static checkUnsupported(e){return e==null?IJ():e.lods.length<1?new ee("tilingscheme:generic","Tiling scheme must have at least one level"):is.isPowerOfTwo(e)?is.hasGapInLevels(e)?new ee("tilingscheme:gaps","Tiling scheme levels must not have gaps between min and max level"):is.tileSizeSupported(e)?is.hasOriginPerLODs(e)?new ee("tilingscheme:multiple-origin","Tiling scheme levels must not have their own origin"):null:new ee("tilingscheme:tile-size","Tiles must be square and size must be one of [128, 256, 512]"):new ee("tilingscheme:power-of-two","Tiling scheme must be power of two")}static fromExtent(e,i){const r=e[2]-e[0],n=e[3]-e[1],s=kl(i),a=1.2*Math.max(r,n),o=256,l=a/o,c=l*s*(96/.0254),h=new is(new Cs({size:[o,o],origin:new gt({x:e[0]-.5*(a-r),y:e[3]+.5*(a-n)}),lods:[new rs({level:0,resolution:l,scale:c})],spatialReference:i}));return h.ensureMaxLod(20),h}static makeWebMercatorAuxiliarySphere(e){const i=new is(is.WebMercatorAuxiliarySphereTileInfo);return i.ensureMaxLod(e),i}static makeGCSWithTileSize(e,i=256,r=16){const n=256/i,s=new is(new Cs({size:[i,i],origin:new gt({x:-180,y:90,spatialReference:e}),spatialReference:e,lods:[new rs({level:0,resolution:.703125*n,scale:295497598570834e-6*n})]}));return s.ensureMaxLod(r),s}get test(){}},is.WebMercatorAuxiliarySphereTileInfo=new Cs({size:[256,256],origin:new gt({x:-20037508342787e-6,y:20037508342787e-6,spatialReference:at.WebMercator}),spatialReference:at.WebMercator,lods:[new rs({level:0,resolution:156543.03392800014,scale:591657527591555e-6})]}),is.WebMercatorAuxiliarySphere=is.makeWebMercatorAuxiliarySphere(19),is);function IJ(){return new ee("tilingscheme:tile-info-missing","Tiling scheme must have tiling information")}const dh=tn(),nue=64;oje(v9/10);const cft=tn();cT.WebMercatorAuxiliarySphere.getExtent(0,0,0,cft);tn([-180,-90,180,90]);function uft(t,e,i,r){if(t==null)return IJ();const n=t.spatialReference;if(n.isGeographic&&!pke(n))return new ee("tilingscheme:local-unsupported-spatial-reference","The tiling scheme spatial reference is not supported in local scenes");const s=cT.checkUnsupported(t);return s??(i==null?new ee("tilingscheme:extent-not-exist","The layer does not provide a layer extent."):dft(t,i)||(e==null||n.equals(e)||e.isWGS84&&n.isWebMercator?null:new ee("tilingscheme:spatial-reference-mismatch","The tiling scheme does not match the spatial reference of the local scene")))}function dft(t,e){const i=t.lods,r=i[0].resolution*2**i[0].level,n=[r*t.size[0],r*t.size[1]],s=[t.origin.x,t.origin.y],a=uje(e),o=tn();cT.computeRowColExtent(a,n,s,o);const l=(o[2]-o[0])*(o[3]-o[1]);if(l>nue){const c=i[0].scale*2**i[0].level;let h=Math.max((a[3]-a[1])/t.size[1],(a[2]-a[0])/t.size[0])*c/r;const f=Math.floor(Math.log(h)/Math.log(10));return h=Math.ceil(h/10**f)*10**f,new ee("tilingscheme:too-many-root-tiles","Scale of level 0 of the tiling scheme (1:"+Math.floor(c).toLocaleString()+") is too large for the layer's extent. Suggested scale: 1:"+h.toLocaleString()+".",{level0Scale:c,suggestedLevel0Scale:h,requiredNumRootTiles:l,allowedNumRootTiles:nue})}return null}const hft=Object.freeze(Object.defineProperty({__proto__:null,checkIfTileInfoSupportedForViewSR:uft},Symbol.toStringTag,{value:"Module"}));function pft(t,e,i,r){if(t==null)return IJ();const n=t?.lods.length-1,s=t.spatialReference;if(s.isWebMercator){if(!cT.makeWebMercatorAuxiliarySphere(n).compatibleWith(t,r))return new ee("tilingscheme:incompatible-global-web-mercator","The tiling scheme is not compatible with the ArcGIS Online Web Mercator tiling scheme")}else{if(!oft(s))return new ee("tilingscheme:global-unsupported-spatial-reference","The tiling scheme spatial reference is not supported in global scenes");if(!cT.makeGCSWithTileSize(t.spatialReference,t.size[0],n).compatibleWith(t,r))return t.spatialReference.isWGS84?new ee("tilingscheme:incompatible-global-wgs84","The tiling scheme is not compatible with the ArcGIS Online WGS84 tiling scheme"):new ee("tilingscheme:incompatible-global","The tiling scheme is not compatible with the ArcGIS Online tiling scheme")}return e==null||t.spatialReference.equals(e)?null:new ee("tilingscheme:spatial-reference-mismatch","The tiling scheme does not match the spatial reference of the global scene")}const fft=Object.freeze(Object.defineProperty({__proto__:null,checkIfTileInfoSupportedForViewSR:pft},Symbol.toStringTag,{value:"Module"})),mft={1:fft,2:hft};function Nq(t,e,i,r,n){return mft[r].checkIfTileInfoSupportedForViewSR(t,i,e,n)}function gft(t,e,i){const r=fBe(t);if(r!=null){if(!We.isCollection(r))return{tileInfo:r.tileInfo,fullExtent:r.fullExtent};{const n=r.find(s=>Nq(s.tileInfo,s.fullExtent,e,i)==null);if(n)return{tileInfo:n.tileInfo,fullExtent:n.fullExtent}}}return{tileInfo:null,fullExtent:null}}function yft(t,e){return t!=null&&(e==null||(e===2?!t.isGeographic||t.isWGS84||t.wkid===4490:t.isWebMercator||t.isWGS84||t.wkid===4490||t.wkid===104971||t.wkid===104905||t.wkid===104903))}async function vft(t,e={}){const{basemap:i,view:r}=t;await i.load(e),wft(i),await _ft(i,r,e),sr(e)}async function bft(t,e={}){const{basemap:i,view:r}=t;sr(e);const n=i.baseLayers.find(o=>o.type==="unknown")?.loadError;if(n!=null)throw n;if(!r||"spatialReferenceLocked"in r&&!r.spatialReferenceLocked||(await i.load(e),sr(e),i.baseLayers.length===0))return;const s=i.baseLayers.at(0);if(!dBe(s))return;if(i.spatialReference){if(r.spatialReference.equals(i.spatialReference))return;sue()}await s.load(e),sr(e);const a=(("supportedSpatialReferences"in s?s.supportedSpatialReferences:null)||["tileInfo"in s?s.tileInfo?.spatialReference:null]).filter(un);a.length!==0&&a.every(o=>!r.spatialReference.equals(o))&&sue()}function sue(){throw new ee("basemap-compatibility:incompatible-spatial-reference","Basemap spatial reference is not compatible with the view")}function wft(t){if(t.baseLayers.length===0&&t.groundLayers.length===0&&t.referenceLayers.length===0)return;const e=t.baseLayers.concat(t.referenceLayers).toArray().filter(i=>!oBe(i)).map(i=>aue(i));if(e.length||t.groundLayers&&t.groundLayers.filter(i=>!hBe(i)).map(i=>aue(i)).length)throw e[0]}function aue(t){return new ee("basemap-compatibility:unsupported-basemap-layer-type","Unsupported basemap layer type ${operationalLayerType}",{layer:t,operationalLayerType:t.operationalLayerType||"unknown"})}async function _ft(t,e,i){let r=t.baseLayers.at(0);if(t.groundLayers?.length>0)r=t.groundLayers.at(0);else{if(!(t.baseLayers.length>0))return;r=t.baseLayers.at(0)}if(Abe(r)){try{await r.load(i)}catch(n){const s="basemap-compatibility:unknown-error",a="Unknown basemap compatibility error",{name:o=s,message:l=a,details:c}=n;throw new ee(o,l,c)}xft(r,e)}}function xft(t,e){const i=e.state.viewingMode;if(!i)return;let r,n;if(t?.type==="wmts"){const o=gft(t,e.spatialReference,i);if(o.tileInfo==null)throw new ee("basemapgalleryitem:tiling-scheme-incompatible","Basemap tiling scheme is incompatible with the view");r=o.tileInfo,n=o.fullExtent}else r=t.tileInfo,n=t.fullExtent;if(r==null)return;if(!yft(r.spatialReference,i))throw new ee(`basemapgalleryitem:spatial-reference-unsupported-${rue(i)}`,`Basemap spatial reference is unsupported in ${rue(i)} mode`);const s=t?.type==="vector-tile"?r.getCompatibleForVTL(256):null;if(i===1){let o=Nq(r,n,null,i);if(o&&t?.type==="vector-tile"&&n!=null&&s&&!Nq(s,n,null,i)&&(o=null),o){const l=r.spatialReference.isWebMercator?"web-mercator":"wgs84";throw new ee(`basemapgalleryitem:tiling-scheme-unsupported-${l}-global`,"Basemap tiling scheme is unsupported in global mode",{error:o})}}else if(cT.checkUnsupported(r))throw new ee("basemapgalleryitem:tiling-scheme-unsupported-local","Basemap tiling scheme is unsupported in local mode");const a=e.basemapTerrain?.tilingScheme;if(a&&!a.compatibleWith(r)&&(t?.type!=="vector-tile"||!s||!a.compatibleWith(s)))throw new ee("basemapgalleryitem:tiling-scheme-incompatible","Basemap tiling scheme is incompatible with the view")}let Mh=class extends sg(lt){constructor(e){super(e),this.compatibilityFunction=null,this.error=null,this.state="loading",this.view=null}initialize(){const e=()=>this.refresh();this.addHandles([ze(()=>this.basemap?.loadStatus,e),ze(()=>this.compatibilityFunction,e),ze(()=>this.view&&"basemapTerrain"in this.view&&this.view.basemapTerrain?.tilingScheme,e),ze(()=>this.view?.ready,e),ze(()=>this.view?.spatialReference,e)]),this.refresh()}destroy(){this._cancelRefresh(),this.basemap=null,this.compatibilityFunction=null,this.view=null}get _spatialReferenceTask(){return t8e(this.view,this.basemap)}set basemap(e){e&&e.load().catch(()=>{}),this._set("basemap",e)}get spatialReference(){return this._spatialReferenceTask.spatialReference}refresh(){this._cancelRefresh(),this._set("state","loading");const e=this.basemap?.loadStatus;if(e!=="loaded"&&e!=="failed")return;if(!this.compatibilityFunction)return void(e==="loaded"?(this._set("state","ready"),this._set("error",null)):(this._set("state","error"),this._set("error",this.basemap.loadError)));const i=new AbortController,{signal:r}=i;this.compatibilityFunction(this,{signal:r}).then(()=>f_(()=>!this._spatialReferenceTask.updating,r)).then(()=>{this._set("state","ready"),this._set("error",null)}).catch(n=>{ss(n)||(this._set("state","error"),this._set("error",n))}),this._refreshController=i}_cancelRefresh(){this._refreshController&&(this._refreshController.abort(),this._refreshController=null)}};d([m({readOnly:!0})],Mh.prototype,"_spatialReferenceTask",null),d([m()],Mh.prototype,"basemap",null),d([m()],Mh.prototype,"compatibilityFunction",void 0),d([m({readOnly:!0})],Mh.prototype,"error",void 0),d([m({readOnly:!0})],Mh.prototype,"spatialReference",null),d([m({readOnly:!0})],Mh.prototype,"state",void 0),d([m()],Mh.prototype,"view",void 0),Mh=d([U("esri.widgets.BasemapGallery.support.BasemapGalleryItem")],Mh);const fke=Mh,mke=We.ofType(dv);let ZE=class extends lt{constructor(e){super(e),this.basemaps=new mke}destroy(){this.basemaps.forEach(e=>e.destroy())}get state(){return"ready"}refresh(){}};d([m({type:mke})],ZE.prototype,"basemaps",void 0),d([m({readOnly:!0})],ZE.prototype,"state",null),ZE=d([U("esri.widgets.BasemapGallery.support.LocalBasemapsSource")],ZE);const gke=ZE,yke=We.ofType(dv);let Ah=class extends qF(jM(gke)){constructor(e){super(e),this._lastPortalBasemapFetchController=null,this.basemaps=new yke,this.filterFunction=null,this.portal=Ue.getDefault(),this.query=null,this.updateBasemapsCallback=null,this.viewType=null}initialize(){this.addHandles(ze(()=>[this.filterFunction,this.loadStatus,this.portal?.basemapGalleryGroupQuery,this.portal?.basemapGalleryGroupQuery3D,this.portal?.user,this.query,this.updateBasemapsCallback],()=>_v(this.refresh()),Di))}destroy(){this.filterFunction=null,this.portal=null,this.basemaps.forEach(e=>e.destroy())}get state(){return this.loadStatus==="not-loaded"?"not-loaded":this.loadStatus==="loading"||this._lastPortalBasemapFetchController?"loading":"ready"}load(e){return this.addResolvingPromise(this.portal.load(e)),Promise.resolve(this)}async refresh(){if(this.loadStatus!=="loaded")return;this._lastPortalBasemapFetchController&&(this._lastPortalBasemapFetchController.abort(),this._lastPortalBasemapFetchController=null);const e=this.portal,i=new AbortController;this._lastPortalBasemapFetchController=i,this.notifyChange("state");try{const r=await e.fetchBasemaps(this._toQueryString(this.query),{signal:i.signal,include3d:this.viewType==="3d"||void 0});await this._updateBasemaps(r)}catch(r){if(ss(r))throw r;$e.getLogger(this).warn(new ee("basemap-source:fetch-basemaps-error","Could not fetch basemaps from portal.",{error:r})),await this._updateBasemaps()}this._lastPortalBasemapFetchController=null,this.notifyChange("state")}_toQueryString(e){return e&&typeof e!="string"?Object.keys(e).map(i=>`${i}:${e[i]}`).join(" AND "):e}async _updateBasemaps(e=[]){let i=await this._filterBasemaps(e);i=this.updateBasemapsCallback?await this.updateBasemapsCallback(i):i,this.basemaps.removeAll(),this.basemaps.addMany(i)}async _filterBasemaps(e){if(!this.filterFunction)return e;const i=e.map(this.filterFunction),r=await Promise.all(i);return e.filter((n,s)=>r[s])}};d([m({readOnly:!0,type:yke})],Ah.prototype,"basemaps",void 0),d([m()],Ah.prototype,"filterFunction",void 0),d([m({type:Ue})],Ah.prototype,"portal",void 0),d([m()],Ah.prototype,"query",void 0),d([m({readOnly:!0})],Ah.prototype,"state",null),d([m()],Ah.prototype,"updateBasemapsCallback",void 0),d([m()],Ah.prototype,"viewType",void 0),Ah=d([U("esri.widgets.BasemapGallery.support.PortalBasemapsSource")],Ah);const XE=Ah,vke=We.ofType(fke);function Sft(t){return t&&t.declaredClass==="esri.portal.Portal"}function $ft(t){return t&&!(t instanceof XE)&&(!!t.portal||!!t.query)}function Tft(t){return t&&"basemaps"in t&&"state"in t&&"refresh"in t}let sc=class extends Fv{constructor(e){super(e),this._loadingProjectionEngine=!1,this.items=new vke,this.source=new XE,this.view=null}initialize(){const e=()=>this._recreateItems();this.addHandles([ze(()=>this.state==="ready"?this.compatibilityFunction:null,()=>this._updateItems()),Oa(()=>this.source?.basemaps,"change",e,{onListenerAdd:e}),as(()=>this.view,()=>{this.source instanceof XE&&(this.source.viewType=this.view?.type)},{once:!0})])}destroy(){const e=this.source.basemaps.find(i=>i===this.activeBasemap);e&&this.source.basemaps.remove(e),this.source?.destroy()}get activeBasemap(){return this.view?.map?.basemap??null}set activeBasemap(e){const i=this.view;if(!i?.map)return;if(!e||!i.ready)return i.map.basemap=e,void this._clearOverride("activeBasemap");const r=e.spatialReference||this.items?.find(n=>this.basemapEquals(e,n.basemap))?.spatialReference;if(r&&"spatialReferenceLocked"in i&&!i.spatialReferenceLocked){const n=i.spatialReference;if(r!=null&&!os(n,r)&&!Su(i.spatialReference,r)&&!Wp())return this._override("activeBasemap",e),this._loadingProjectionEngine=!0,void Ym().then(()=>{this._get("activeBasemap")===e&&(i.map.basemap=e,i.spatialReference=r,this._clearOverride("activeBasemap"))},()=>{}).then(()=>{this._loadingProjectionEngine=!1});i.map.basemap=e,this._clearOverride("activeBasemap"),r==null||os(i.spatialReference,r)||(i.spatialReference=r)}else i.map.basemap=e,this._clearOverride("activeBasemap")}castActiveBasemap(e){return p0e(e)}get activeBasemapIndex(){const{state:e,activeBasemap:i}=this;return e!=="ready"?-1:this._findBasemapIndex(i)}get compatibilityFunction(){return this.view?.type==="3d"?vft:bft}set compatibilityFunction(e){this._overrideIfSome("compatibilityFunction",e)}castSource(e){return Array.isArray(e)||We.isCollection(e)?new gke({basemaps:Array.isArray(e)?new We(e):e}):Sft(e)?new XE({portal:e}):$ft(e)?new XE(e):Tft(e)?e:null}get state(){return this.view?.ready&&this.source?Fq(this.view)&&!this.view.inGeographicLayout?"unsupported":this._loadingProjectionEngine?"loading":"ready":"disabled"}basemapEquals(e,i){return QUe(e,i)}refresh(){this._recreateItems()}load(){return this.loadSource()}loadSource(e){return this.addResolvingPromise(RR(this.source)?this.source.load(e):null),Promise.resolve(this)}_findBasemapIndex(e){const{items:i}=this,r=i.findIndex(n=>n.basemap===e);return r===-1?i.findIndex(n=>this.basemapEquals(n.basemap,e)):r}_recreateItems(){const e=this.source?.basemaps??[],{view:i,compatibilityFunction:r}=this,n=new Map(this.items.map(a=>[a.basemap,a])),s=e.map(a=>{const o=n.get(a);return o?(n.delete(a),o):new fke({basemap:a,compatibilityFunction:r,view:i})});this.items.removeAll(),this.items.addMany(s),n.forEach(a=>a.destroy())}_updateItems(){for(const e of this.items)e.compatibilityFunction=this.compatibilityFunction,e.view=this.view}};d([m()],sc.prototype,"_loadingProjectionEngine",void 0),d([m({type:dv})],sc.prototype,"activeBasemap",null),d([Ii("activeBasemap")],sc.prototype,"castActiveBasemap",null),d([m({readOnly:!0})],sc.prototype,"activeBasemapIndex",null),d([m()],sc.prototype,"compatibilityFunction",null),d([m({readOnly:!0,type:vke})],sc.prototype,"items",void 0),d([m()],sc.prototype,"source",void 0),d([Ii("source")],sc.prototype,"castSource",null),d([m({readOnly:!0})],sc.prototype,"state",null),d([m()],sc.prototype,"view",void 0),sc=d([U("esri.widgets.BasemapGallery.BasemapGalleryViewModel")],sc);const kft=sc;const Eft=St`@keyframes esri-basemap-slide{0%{opacity:0;margin-top:0;margin-left:0}75%{opacity:0;margin-top:0;margin-left:0}to{opacity:1;margin-top:5px;margin-left:5px}}@keyframes esri-docking-animation{0%{opacity:0}25%{opacity:0}to{opacity:1}}@keyframes popup-intro-animation-down{0%{opacity:0;transform:translateY(-5px)}to{opacity:1;transform:translate(0)}}@keyframes popup-intro-animation-up{0%{opacity:0;transform:translateY(5px)}to{opacity:1;transform:translate(0)}}@supports (-ms-ime-align: auto){.esri-slider__anchor:focus{outline:1px dotted #000}}@keyframes esri-spinner--start-animation{0%{opacity:0;transform:scale(0)}to{opacity:1;transform:scale(1)}}@keyframes esri-spinner--finish-animation{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(0)}}@keyframes esri-spinner--rotate-animation{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (prefers-reduced-motion){.esri-utility-network-trace__reset-prompt{animation:none!important}}@media (prefers-reduced-motion){.esri-popup--aligned-top-center,.esri-popup--aligned-top-left,.esri-popup--aligned-top-right,.esri-popup--aligned-bottom-center,.esri-popup--aligned-bottom-left,.esri-popup--aligned-bottom-right,.esri-popup--is-docked{animation:none!important}}@media (prefers-reduced-motion: reduce){.esri-fov-overlay{animation:none!important}}@keyframes esri-fade-in-down{0%{opacity:0;transform:translateY(-5px)}25%{opacity:0;transform:translateY(-5px)}to{opacity:1;transform:translate(0)}}@keyframes esri-fade-in-up{0%{opacity:0;transform:translateY(5px)}25%{opacity:0;transform:translateY(5px)}to{opacity:1;transform:translate(0)}}@keyframes esri-fade-in{0%{opacity:0}25%{opacity:0}to{opacity:1}}@keyframes esri-fade-in-scale{0%{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}@keyframes looping-progresss-bar-ani{0%{width:0;left:0}20%{width:20%;left:0}80%{width:20%;left:80%}to{width:0;left:100%}}@keyframes esri-rotate{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes panel-advance{0%{opacity:0;transform:translate(50px) scale(.99)}to{opacity:1;transform:translate(0) scale(1)}}@keyframes panel-retreat{0%{opacity:0;transform:translate(-50px) scale(.99)}to{opacity:1;transform:translate(0) scale(1)}}@keyframes panel-advance--rtl{0%{opacity:0;transform:translate(-50px) scale(.99)}to{opacity:1;transform:translate(0) scale(1)}}@keyframes panel-retreat--rtl{0%{opacity:0;transform:translate(50px) scale(.99)}to{opacity:1;transform:translate(0) scale(1)}}.esri-widget__heading{color:var(--calcite-color-text-2);margin:0 0 .5rem;font-weight:var(--calcite-font-weight-semibold)}h1.esri-widget__heading{font-size:var(--calcite-font-size-xl)}h2.esri-widget__heading{font-size:var(--calcite-font-size-md)}h3.esri-widget__heading,h4.esri-widget__heading,h5.esri-widget__heading,h6.esri-widget__heading{font-size:var(--calcite-font-size)}.esri-widget{--esri-widget-padding-x: 15px;--esri-widget-padding-y: var(--calcite-spacing-md);--esri-widget-padding: var(--esri-widget-padding-y) var(--esri-widget-padding-x);box-sizing:border-box;color:var(--calcite-color-text-2);background-color:var(--calcite-color-foreground-1);font-size:var(--calcite-font-size);line-height:var(--calcite-font-line-height-relative-tight)}.esri-widget *,.esri-widget :before,.esri-widget :after{box-sizing:inherit}.esri-widget.esri-widget--disabled>*{opacity:.4;pointer-events:none}.esri-widget.esri-widget--compact{--esri-widget-padding-y: 0;--esri-widget-padding-x: 0}.esri-widget__anchor{color:var(--calcite-color-text-2)}.esri-widget__anchor:hover{color:var(--calcite-color-text-3)}.esri-widget__anchor:hover,.esri-widget__anchor:focus{text-decoration:underline}.esri-widget__anchor--disabled{opacity:.4;pointer-events:none}.esri-widget__header{background-color:var(--calcite-color-foreground-1);flex:1 0 100%;justify-content:space-between;align-items:center;width:100%;min-height:48px;padding:12px 0 12px 15px;display:flex}.esri-widget__header .esri-widget__heading{width:calc(100% - 48px);text-align:initial;color:var(--calcite-color-text-1);align-items:center;margin:0;padding:0;display:flex}.esri-widget__header-button{appearance:none;cursor:pointer;color:var(--calcite-color-text-2);background-color:var(--calcite-color-foreground-1);border:none;flex:0 0 48px;justify-content:center;align-self:stretch;align-items:center;width:48px;padding:0;display:flex}.esri-widget__footer{background-color:var(--calcite-color-foreground-1);justify-content:center;align-items:center;width:100%;min-height:48px;display:flex}.esri-widget__footer-pagination{color:var(--calcite-color-text-2);justify-content:space-between;align-items:center;display:flex}.esri-widget__footer-pagination-previous-button,.esri-widget__footer-pagination-next-button{cursor:pointer;background-color:var(--calcite-color-foreground-1);border:0;margin:0 7px;padding:12px 15px;transition:background-color .125s ease-in-out}.esri-widget__footer-pagination-previous-button:hover,.esri-widget__footer-pagination-previous-button:focus,.esri-widget__footer-pagination-next-button:hover,.esri-widget__footer-pagination-next-button:focus{color:var(--calcite-color-text-1);background-color:var(--calcite-color-foreground-1)}.esri-menu{visibility:hidden;z-index:1;background-clip:padding;background-color:var(--calcite-color-foreground-1);background-clip:padding-box;width:100%;max-height:0;margin:2px 0 0;padding:0;font-size:var(--calcite-font-size);line-height:var(--calcite-spacing-xl);position:absolute;top:100%;left:0;overflow:hidden;box-shadow:0 1px 2px #0000004d}.esri-menu .esri-menu__header{color:var(--calcite-color-text-inverse);background-color:var(--calcite-color-inverse);padding:6px 12px}.esri-menu__list{margin:0;padding:0;list-style:none}.esri-menu__list-item{cursor:pointer;border-top:1px solid #adadad4d;border-left:3px solid #0000;padding:.8em 1em}.esri-menu__list-item [class^=esri-icon-],.esri-menu__list-item [class*=" esri-icon-"]{padding-right:2.8px}.esri-menu__list-item:first-child{border-top:none}.esri-menu__list-item--focus,.esri-menu__list-item:hover,.esri-menu__list-item:focus{background-color:var(--calcite-color-foreground-1)}.esri-menu__list-item:active{background-color:var(--calcite-color-foreground-current)}.esri-menu__list-item--active,.esri-menu__list-item--active:hover,.esri-menu__list-item--active:focus{background-color:var(--calcite-color-foreground-1);border-left-color:var(--calcite-color-brand)}.esri-widget__table{border-collapse:collapse;color:var(--calcite-color-text-1);border:none;width:100%;line-height:var(--calcite-font-line-height-relative-tight)}.esri-widget__table tr:nth-child(odd){background-color:var(--calcite-color-transparent)}.esri-widget__table tr:nth-child(2n){background-color:var(--calcite-color-transparent-press)}.esri-widget__table tr a{color:var(--calcite-color-text-2)}.esri-widget__table tr a:hover,.esri-widget__table tr a:focus{color:var(--calcite-color-text-1)}.esri-widget__table tr td,.esri-widget__table tr th{vertical-align:top;word-break:break-word;padding:.5em .7em;font-size:var(--calcite-font-size-sm);font-weight:var(--calcite-font-weight-regular)}.esri-widget__table tr th{text-align:left;border-right:3px solid #0000000d;width:50%}.esri-widget__table tr td{width:50%}.esri-input{color:var(--calcite-color-text-1);background-color:var(--calcite-color-foreground-1);border:1px solid #959595;font-size:var(--calcite-font-size)}.esri-input::-ms-clear{display:none}.esri-input::placeholder{opacity:1;color:var(--calcite-color-text-2)}.esri-input:placeholder-shown{text-overflow:ellipsis}.esri-input[type=text],.esri-input[type=password],.esri-input[type=number]{height:32px;padding:0 .5em}calcite-combobox.esri-input{border:none}.esri-widget__content--empty{text-align:center;color:var(--calcite-color-border-input);flex-flow:column wrap;align-items:center;padding:18px 22px;display:flex}.esri-widget__content--empty h1.esri-widget__heading,.esri-widget__content--empty h2.esri-widget__heading,.esri-widget__content--empty h3.esri-widget__heading,.esri-widget__content--empty h4.esri-widget__heading,.esri-widget__content--empty h5.esri-widget__heading{font-weight:var(--calcite-font-weight-regular)}.esri-widget__content-illustration--empty{width:128px;padding:1rem 0}.esri-widget__content-icon--empty{width:32px;padding:.5rem 0}.esri-select{appearance:none;cursor:pointer;color:var(--calcite-color-text-2);background:var(--calcite-color-foreground-1) url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='-8 -8 32 32' width='32' height='32'%3E%3Cpath d='M8 11.207l-4-4V5.793l4 4 4-4v1.414z' fill='%23adadad' fillrule='nonzero'/%3E%3C/svg%3E") 100% no-repeat;border:1px solid #959595;border-radius:0;width:100%;height:32px;margin:0;padding:0 .5em;font-family:inherit;font-size:.85em;display:block}.esri-select[disabled]{cursor:auto}.esri-select::-ms-expand{display:none}.esri-disabled a,.esri-disabled [role=menu],.esri-disabled [role=checkbox],.esri-disabled [class^=esri-icon-],.esri-disabled [class*=" esri-icon-"]{color:var(--calcite-color-text-3)}.keynav-mode .esri-widget:focus,.keynav-mode .esri-widget :focus{z-index:1;outline-offset:2px;outline:2px solid #adadad}.esri-widget__loader-animation{border:.15em solid #adadad4d;border-top-color:var(--calcite-color-border-input);border-radius:100%;width:1em;height:1em;font-size:var(--calcite-font-size-md);animation:1.25s linear infinite esri-rotate;display:block;transform:translateZ(0)}:dir(rtl) .esri-widget__table th{text-align:right;border-left:3px solid #0000000d;border-right:none}:dir(rtl) .esri-select{background-position:0}:dir(rtl) .esri-menu__list-item{border-left:none;border-right:3px solid #0000}:dir(rtl) .esri-menu__list-item [class^=esri-icon-],:dir(rtl) .esri-menu__list-item [class*=" esri-icon-"]{padding-left:2px;padding-right:0}:dir(rtl) .esri-menu__list-item--active{border-right-color:var(--calcite-color-brand)}.esri-icon-font-fallback-text{clip:rect(0 0 0 0);width:1px;height:1px;position:absolute;overflow:hidden}.esri-rotating{animation:1.25s linear infinite esri-rotate;transform:translateZ(0)}.esri-clearfix:before,.esri-clearfix:after{content:" ";display:table}.esri-clearfix:after{clear:both}.esri-interactive{cursor:pointer}.esri-hidden{display:none!important}.esri-invisible{visibility:hidden!important}.esri-offscreen{position:absolute;top:-999em;left:-999em}.esri-match-height{flex-direction:column;flex:auto;display:flex;overflow:hidden}:host{display:flex;width:var(--arcgis-internal-panel-width, 300px)}:host(:focus-within){z-index:1;outline-offset:var(--calcite-spacing-base);outline:var(--calcite-spacing-base) solid var(--calcite-color-brand)}.basemap-gallery{position:relative;overflow-y:auto;container-type:inline-size;width:100%;min-height:32px;transition:max-height .25s ease-in-out}.basemap-gallery .basemap-gallery__loader:before,.basemap-gallery .basemap-gallery__loader:after{opacity:1;content:"";height:var(--calcite-spacing-px);transition:opacity .5s ease-in-out;position:absolute;top:0}.basemap-gallery .basemap-gallery__loader:before{z-index:0;background-color:var(--calcite-color-foreground-1);width:100%}.basemap-gallery .basemap-gallery__loader:after{z-index:0;background-color:var(--calcite-color-foreground-3);width:20%;animation:1.5s linear infinite looping-progresss-bar-ani}.esri-disabled arcgis-basemap-gallery-item{opacity:var(--calcite-opacity-light);pointer-events:none;animation:none}.basemap-gallery__empty-message{padding:12px 15px;animation:.5s ease-in-out esri-fade-in}.basemap-gallery__loader{width:100%;height:var(--calcite-spacing-base);animation:.5s ease-in-out esri-fade-in;position:absolute;top:0;left:0;right:0}.basemap-gallery__item-container{flex-flow:column;gap:3px;margin:0;padding-block:3px;padding-inline:3px;list-style:none;transition:opacity .25s ease-in-out;display:flex;position:relative}calcite-popover>.basemap-gallery{width:280px;max-height:80vh}.ui-corner calcite-panel>.basemap-gallery.widget.widget--panel{width:unset}.view-width-greater-than-large calcite-popover>.basemap-gallery,.view-width-greater-than-large .ui-corner>.basemap-gallery{width:450px}@container (width<=200px) or (width>=350px){.basemap-gallery .basemap-gallery__item-container{grid-template-columns:repeat(auto-fill,minmax(120px,1fr));gap:var(--calcite-spacing-md) var(--calcite-spacing-lg);padding-block:var(--calcite-spacing-md);padding-inline:var(--calcite-spacing-lg);display:grid}}`,Cft=bA(kft),kL={small:200,default:280,wide:435};var Iw;let Ift=(Iw=class extends Et{constructor(){super(...arguments),this.messages=XT({}),this.viewModel=Cft(this),this._width=0,this.view=this.viewModel.view,this.activeBasemap=this.viewModel.activeBasemap,this.autoDestroyDisabled=!1,this.disabled=!1,this.headingLevel=2,this.icon="basemap",this.label="",this.source=this.viewModel.source,this.state=this.viewModel.state,this.arcgisPropertyChange=w_()("activeBasemap","state"),this.arcgisReady=Re()}async destroy(){await this.manager.destroy()}loaded(){this.manager.onLifecycle(()=>[as(()=>this.source,()=>{this.viewModel.loadSource()},{sync:!0,initial:!0}),(()=>{const e=new ResizeObserver(r=>{for(const n of r)this._width=n.contentRect.width}),i=this.el;return i&&e.observe(i),{remove(){e?.disconnect()}}})()])}_getRoundRobinIndex(e,i){return(e+i)%i}_handleKeyDown(e){const{key:i}=e;if(!["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(i))return;e.preventDefault();const{items:r,activeBasemapIndex:n}=this.viewModel,s=i==="ArrowUp"||i==="ArrowLeft"?this._getRoundRobinIndex(Math.max(n-1,-1),r.length):this._getRoundRobinIndex(n+1,r.length),a=r.at(s);a?.state==="ready"&&(this.viewModel.activeBasemap=a.basemap)}render(){const e=this.source.state==="loading",i=this.disabled||this.state==="disabled",r=this.viewModel.items,n={[mc.sourceLoading]:e,[zo.disabled]:i},s=this._width;n[mc.layoutGrid]=s>=kL.wide||s<=kL.small,n[mc.narrowItems]=s<kL.default;const a=e?J`<div class=${q(mc.loader)}></div>`:null,o=e?null:r.length>0?J`<div aria-disabled=${this.disabled??De} aria-label=${this.label??De} class=${q(mc.itemContainer)} @keydown=${this._handleKeyDown} role=radiogroup>${r.map((l,c)=>J`<arcgis-basemap-gallery-item .disabled=${i} .item=${l} .itemIndex=${c} .viewModel=${this.viewModel} .messages=${this.messages}></arcgis-basemap-gallery-item>`)}</div>`:J`<div class=${q(zo.empty)}>${YI({level:this.headingLevel,children:this.messages.noBasemaps})}</div>`;return J`<div class=${q(Ui(mc.base,zo.widget,zo.panel,n))} style=${Kt({"--esri-basemap-gallery-small":`${kL.small}px`})}>${[a,o]}</div>`}},Iw.properties={_width:16,view:0,activeBasemap:1,autoDestroyDisabled:5,disabled:7,headingLevel:9,icon:1,label:1,messageOverrides:0,position:1,referenceElement:1,source:0,state:3},Iw.styles=Eft,Iw);nn("arcgis-basemap-gallery",Ift);const eu="esri-layer-list",Pf=`${eu}__item`,F2={base:eu,actionMenu:`${eu}__action-menu`,actionGroup:`${eu}__action-group`,filterNoResults:`${eu}__filter-no-results`,item:Pf,itemActive:`${Pf}--active`,itemContentBottom:`${Pf}-content-bottom`,itemMessage:`${Pf}-message`,itemActionIcon:`${Pf}-action-icon`,itemActionImage:`${Pf}-action-image`,itemTemporaryIcon:`${Pf}-temporary-icon`,itemTableIcon:`${Pf}-table-icon`,itemCatalogIcon:`${Pf}-catalog-icon`,statusIndicator:`${eu}__status-indicator`,publishing:`${eu}__publishing`,updating:`${eu}__updating`,connectionStatus:`${eu}__connection-status`,connectionStatusConnected:`${eu}__connection-status--connected`,visibleToggle:`${eu}__visible-toggle`,visibleIcon:`${eu}__visible-icon`},Q5t=()=>g_({action:()=>fe(()=>Promise.resolve().then(()=>zke),void 0)});function eFt(t,e,i){const{title:r,textEnabled:n}=e,{type:s,active:a,uid:o,disabled:l,indicator:c}=t;return t.visible?Ke("calcite-action",{...e,active:s==="toggle"&&t.value,appearance:"solid","data-action-id":t.id,"data-action-uid":o,disabled:l,icon:jq(t),indicator:c,loading:a,scale:"s",text:r??"",title:n?void 0:r},i):null}function jq(t){return t.icon?t.icon:"image"in t&&t.image||t.className?void 0:"question"}function Mft(t){return t?{backgroundImage:`url(${t})`}:{}}function tFt({action:t,feature:e}){const i=e?.attributes,r="image"in t?t.image:void 0;return r&&i?Fp(r,i):r??""}const bke={hide:"hide",hideChildren:"hide-children"},Aft=10,Pft=2;function Oft({exclusive:t,visible:e,visibilityAppearance:i}){const r=i==="checkbox";return e?t?"circle-f":r?"check-square-f":"view-visible":t?"circle":r?"square":"view-hide"}function Lft({connectionStatus:t,publishing:e}){return t?t==="connected"?"beacon":"offline":e?"square":"bullet-point"}function Dft(t){return t?.listMode===bke.hideChildren}function Yz(t){return t?.listMode??void 0}function Rft(t){return t!=null&&"minScale"in t&&t.minScale!=null?t.minScale:void 0}function zft(t){return t!=null&&"maxScale"in t&&t.maxScale!=null?t.maxScale:void 0}function Fft(t){if(!t)return"inherited";const e=Gft(MJ(t)?t.layer:t);return e!=null?e?"independent":"inherited":"visibilityMode"in t&&t.visibilityMode!=null?t.visibilityMode:"independent"}function Nft(t){t?.removeMany(t.filter(e=>e?.destroyed))}function wke(t){if(t&&(!("type"in t)||t.type!=="wmts"))return"sublayers"in t?"sublayers":"layers"in t?"layers":void 0}function jft(t,e){t&&(t.filterPredicate=e?i=>e(md(i)):void 0)}function Vft(t){const e=(t?.layer&&MJ(t.layer)?t.layer.layer:void 0)??t?.layer;return!!e&&e.type!=="catalog"&&(qft(e)??!0)}function Bft(t){return Yz(t)!==bke.hide}function Uft(t,e){if(!t||e==null||isNaN(e))return!1;const i=Rft(t),r=zft(t),n=i!=null&&!isNaN(i)&&i>0&&e>i,s=r!=null&&!isNaN(r)&&r>0&&e<r;return n||s}function _ke(t,e){t?.sort((i,r)=>{const n="uid"in i?e.indexOf(i.uid):-1,s="uid"in r?e.indexOf(r.uid):-1;return n>s?-1:n<s?1:0})}function Hft(t,e){const i=t?.layer;if(!i)return;const r=wke(i);if(!r)return;let n;r==="layers"&&"layers"in i?n=i.layers:r==="sublayers"&&"sublayers"in i&&(n=i.sublayers),_ke(n,e)}function oue(t){const e=t?.layer;return e&&"layers"in e?e.layers:null}function MJ(t){return t!=null&&"layer"in t&&t.layer!=null}function Gft(t){const e=xke(t);return e!=null&&"supportsSublayerVisibility"in e?e.supportsSublayerVisibility:void 0}function qft(t){const e=xke(t);return e!=null&&"supportsDynamicLayers"in e?e.supportsDynamicLayers:void 0}function xke(t){return t&&"capabilities"in t&&t.capabilities!=null&&"exportMap"in t.capabilities?t.capabilities.exportMap:void 0}function md(t){return t?.["data-item"]}function lue(t){return t?.getAttribute("data-layer-type")}function Wft(t){const{children:e,error:i}=t,r="incompatible"in t&&t.incompatible;return!!e?.filter(n=>!n.hidden).length&&!i&&!r}function Yft(t){for(const e of t)for(const i of e)if(i.type==="button"||i.type==="toggle")return i}var Vq,Mw;let ti=(Mw=class extends zv{constructor(e){super(e),this.dragEnabled=!1,this.listModeDisabled=!1,this.parent=null,this.parentTitles=null,this.viewModel=null,this._onActionMenuOpen=i=>{this.item.actionsOpen=i.currentTarget.open},this._setTooltipReference=i=>{this.onTooltipReferenceChange?.(this.item.layer?.uid,i)},this._removeTooltipReference=()=>{this.onTooltipReferenceChange?.(this.item.layer?.uid,null)}}loadDependencies(){return g_({"action-group":()=>fe(()=>Promise.resolve().then(()=>GTt),void 0),"action-menu":()=>fe(()=>Promise.resolve().then(()=>hyt),void 0),action:()=>fe(()=>Promise.resolve().then(()=>zke),void 0),icon:()=>fe(()=>Promise.resolve().then(()=>Aye),void 0),"list-item":()=>fe(()=>Promise.resolve().then(()=>kvt),void 0),list:()=>fe(()=>Promise.resolve().then(()=>S2e),void 0),notice:()=>fe(()=>Promise.resolve().then(()=>HJ),void 0)})}render(){const e=this.parentTitles??[],{_title:i,item:r,activeItem:n,selectionMode:s,selectedItems:a,messages:o,parent:l,css:c,dragDisabled:h}=this,f="visibleAtCurrentTimeExtent"in r&&"layerInvisibleAtTime"in o&&!r.visibleAtCurrentTimeExtent?`${i} (${o.layerInvisibleAtTime})`:"visibleAtCurrentScale"in r&&"layerInvisibleAtScale"in o&&!r.visibleAtCurrentScale?`${i} (${o.layerInvisibleAtScale})`:i,g="parent"in r&&r.parent?.layer?.type==="catalog",{layer:y}=r,b="visibleAtCurrentScale"in r&&!r.visibleAtCurrentScale||"visibleAtCurrentTimeExtent"in r&&!r.visibleAtCurrentTimeExtent;return Ke("calcite-list-item",{afterCreate:_=>this._focusSelectedDragEl(_,r),afterUpdate:_=>this._focusSelectedDragEl(_,r),class:this.classes(c.item,"itemActive"in c&&{[c.itemActive]:n===r}),"data-item":r,"data-layer-id":y?.id,dragDisabled:!r.sortable||g||h,expanded:"open"in r&&r.open,id:y?.uid,key:`list-item-${y?.uid}`,label:i,metadata:{parentTitles:e,_title:i},selected:s!=="none"&&a.includes(r),title:f,unavailable:b,value:y?.uid,onCalciteListItemSelect:_=>"visible"in r&&this._handleCalciteListItemSelect(_,r,l),onCalciteListItemToggle:_=>"open"in r&&this._handleCalciteListItemToggle(_,r)},this._renderedCatalogFootprintIcon,this._renderedCatalogDynamicIcon,this._renderedItemStatus,this._renderedItemToggle,this._renderedCatalogSelectNode,this._renderedItemTemporaryIcon,this._renderedChildList,this._renderedItemMessage,this._renderedPanel,this._renderedPanelAction,this._renderedActions)}get _title(){const{messages:e}=this;return this.item.title||("untitledTable"in e?e.untitledTable:e.untitledLayer)}get _renderedItemStatus(){const{item:e,parent:i,visibleElements:r,css:n}=this;if(!r.statusIndicators)return null;const{publishing:s}=e,a="updating"in e&&e.updating&&!i,o="connectionStatus"in e?e.connectionStatus:void 0,l=!!o;return Ke("calcite-icon",{class:this.classes(n.statusIndicator,{[n.publishing]:s},"updating"in n&&{[n.updating]:a},"connectionStatus"in n&&{[n.connectionStatus]:l},"connectionStatusConnected"in n&&{[n.connectionStatusConnected]:l&&o==="connected"}),icon:Lft({connectionStatus:o,publishing:s}),key:"layer-item-status",scale:"s",slot:"content-end"})}get _renderedItemTemporaryIcon(){const{item:e,visibleElements:i,css:r}=this,{layer:n}=e,s="temporaryLayerIndicators"in i&&i.temporaryLayerIndicators,a="temporaryTableIndicators"in i&&i.temporaryTableIndicators,o=n&&"persistenceEnabled"in n&&(pN(n)||!n.persistenceEnabled);return(s||a)&&o?Ke("calcite-icon",{class:r.itemTemporaryIcon,icon:"temporary",key:"temporary-icon",scale:"s",slot:"content-start",title:this.messages.temporary}):null}get _renderedItemToggle(){const{_title:e,item:i,parent:r,messages:n,visibilityAppearance:s,css:a}=this;if(!("visible"in i&&"layerVisibility"in n&&"showLayer"in n&&"hideLayer"in n&&"visibleToggle"in a&&s))return null;const{visible:o}=i,l=this._getParentVisibilityMode(r);if(l==="inherited")return null;const c=Oft({visible:o,exclusive:l==="exclusive",visibilityAppearance:s}),h=s==="checkbox",f=n.layerVisibility,g=Fp(o?n.hideLayer:n.showLayer,{layerName:e});return Ke("calcite-action",{appearance:"transparent",class:a.visibleToggle,icon:h?c:void 0,key:"visibility-toggle",label:g,onclick:()=>this._toggleVisibility(i,r),scale:"s",slot:h?"actions-start":"actions-end",text:f,title:g},h?null:Ke("calcite-icon",{class:this.classes({[a.visibleIcon]:l!=="exclusive"&&o}),icon:c,scale:"s"}))}get _renderedPanel(){const{panel:e}=this.item;return!e?.open||e.disabled||e.flowEnabled?null:Ke("div",{class:this.css.itemContentBottom,key:`content-panel-${e.uid}`,slot:"content-bottom"},e.render())}get _renderedPanelAction(){const{panel:e}=this.item;if(!e?.visible)return null;const{open:i,title:r,disabled:n}=e;return Ke("calcite-action",{active:i,appearance:"transparent",disabled:n,icon:jq(e),key:`action-${e.uid}`,onclick:()=>this._togglePanel(e),scale:"s",slot:"actions-end",text:r??"",title:r??void 0},this._renderFallbackIcon(e))}get _renderedActions(){switch(this._actionsCount){case 0:return null;case 1:return this._singleAction;default:return this._renderedActionMenu}}get _renderedActionMenu(){const{item:e,messagesCommon:i}=this,r=i.options;return Ke("calcite-action-menu",{appearance:"transparent",key:"item-action-menu",label:i.menu,open:e.actionsOpen,overlayPositioning:"fixed",placement:"bottom-end",scale:"s",slot:"actions-end",onCalciteActionMenuOpen:this._onActionMenuOpen},Ke("calcite-action",{appearance:"transparent",icon:"ellipsis",scale:"s",slot:"trigger",text:r,title:r}),this._renderedActionMenuContent)}get _renderedActionMenuContent(){return this._filteredSections.toArray().map(e=>Ke("calcite-action-group",{key:`action-section-${e.uid}`},e.toArray().map(i=>this._renderAction({action:i,textEnabled:!0}))))}get _renderedCatalogFootprintIcon(){const{css:e}=this,i=this.item.layer,r=i?.type==="catalog-footprint",n=i?.type==="sublayer"&&Jne(i,"footprints");return"itemCatalogIcon"in e&&(r||n)?Ke("calcite-icon",{class:e.itemCatalogIcon,icon:"footprint",key:"footprint",scale:"s",slot:"content-start"}):null}get _renderedCatalogDynamicIcon(){const{css:e}=this,i=this.item.layer,r=i?.type==="catalog-dynamic-group",n=i?.type==="sublayer"&&Jne(i,"layers-in-view");return"itemCatalogIcon"in e&&(r||n)?Ke("calcite-icon",{class:e.itemCatalogIcon,icon:"catalog-dataset",key:"catalog-dataset",scale:"s",slot:"content-start"}):null}get _renderedCatalogSelectNode(){const{_title:e,item:i,visibleElements:r}=this;if(!("visible"in i))return;const{layer:n}=i,s=n?.type==="catalog-dynamic-group";return"catalogLayerList"in r&&r.catalogLayerList&&s?Ke("calcite-action",{appearance:"transparent",disabled:!n.visible,icon:"chevron-right",iconFlipRtl:!0,onclick:()=>this._triggerOnCatalogOpen(i),scale:"s",slot:"actions-end",text:e}):null}get _renderedChildList(){const{dragEnabled:e,item:i,rootGroupUid:r,listModeDisabled:n,selectionMode:s,displayMode:a}=this;if(!("children"in i))return;const o=[...this.parentTitles??[],i.title],{children:l,layer:c}=i,h=c?.type!=="catalog-dynamic-group"&&Wft(i),f=!n&&Dft(c),g=c?.type==="group",y=!f&&!h&&e&&g,b=!!e&&"childrenSortable"in i&&i.childrenSortable&&Vft(i);return h||y?Ke("calcite-list",{canPull:_=>!!this.canMove&&this.canMove(_,"pull"),canPut:_=>!!this.canMove&&this.canMove(_,"put"),"data-item":i,"data-layer-type":r,displayMode:a,dragEnabled:b,group:g?r:`${r}-${c?.uid}`,key:`child-list-${c?.uid}`,label:i.title,selectionAppearance:"border",selectionMode:s},l?.filter(_=>!_.hidden&&(this.visibleElements.errors||!_.error)).toArray().map(_=>this._renderItem(_,i,o)),this._renderedTablesItem):null}get _hasTables(){const{layerTablesEnabled:e}=this,i=this.item.layer;if(!e||!i)return!1;switch(i.type){case"knowledge-graph":return e.includes(i.type)&&"tables"in i&&!!i.tables?.length;case"map-image":case"tile":return e.includes(i.type)&&"subtables"in i&&!!i.subtables?.length;default:return!1}}get _renderedTablesItem(){const{item:e,messages:i,css:r}=this,{layer:n}=e;return"itemTableIcon"in r&&"visible"in e&&"tables"in i&&this._hasTables?Ke("calcite-list-item",{class:r.item,"data-layer-id":n?.id,dragDisabled:!0,key:`list-item-table-list-tables-${n?.uid}`,label:i.tables,title:i.tables,onCalciteListItemSelect:()=>this._triggerOnTablesOpen(e)},Ke("calcite-icon",{class:r.itemTableIcon,icon:"table",scale:"s",slot:"content-start"}),Ke("calcite-icon",{flipRtl:!0,icon:"chevron-right",scale:"s",slot:"content-end"})):null}get _renderedItemMessage(){const{item:e,messages:i,css:r}=this;return e.error?Ke("div",{class:r.itemMessage,key:"esri-layer-list__error",slot:"content-bottom"},Ke("calcite-notice",{icon:"exclamation-mark-triangle",kind:"warning",open:!0,scale:"s",width:"full"},Ke("div",{slot:"message"},"tableError"in i?i.tableError:i.layerError))):"incompatible"in e&&e.incompatible&&"layerIncompatible"in i?Ke("div",{class:r.itemMessage,key:"esri-layer-list__incompatible",slot:"content-bottom"},Ke("calcite-notice",{afterCreate:this._setTooltipReference,afterRemoved:this._removeTooltipReference,bind:this,icon:"exclamation-mark-triangle",kind:"warning",open:!0,scale:"s",tabIndex:0,width:"full"},Ke("div",{slot:"message"},i.layerIncompatible))):null}get _singleAction(){return this._renderAction({action:Yft(this._filteredSections),textEnabled:!1})}get _filteredSections(){return this.item.actionsSections.map(e=>e.filter(i=>i.visible))}get _actionsCount(){return this.item.actionsSections.reduce((e,i)=>e+i.length,0)}_renderAction(e){const{item:i}=this,{action:r,textEnabled:n}=e;if(!r)return null;const{active:s,disabled:a,title:o,type:l,indicator:c}=r;return Ke("calcite-action",{active:l==="toggle"&&r.value,appearance:"transparent","data-action-id":r.id,disabled:a,icon:jq(r),indicator:c,key:`action-${r.uid}`,loading:s,onclick:()=>this._triggerAction(i,r),scale:"s",slot:n?void 0:"actions-end",text:o??"",textEnabled:n,title:o??void 0},this._renderFallbackIcon(r))}_renderFallbackIcon(e){const{css:i}=this,{icon:r}=e,n="className"in e?e.className:void 0;if(r)return null;const s="image"in e?e.image:void 0,a={[i.itemActionIcon]:!!n,[i.itemActionImage]:!!s};return n&&(a[n]=!0),s||n?Ke("span",{"aria-hidden":"true",class:this.classes(i.itemActionIcon,a),key:"icon",styles:Mft(s)}):null}_renderItem(e,i,r=[]){return Ke(Vq,{activeItem:this.activeItem,canMove:this.canMove,css:this.css,displayMode:this.displayMode,dragEnabled:this.dragEnabled,item:e,key:`layerListItem-${e.layer?.uid}`,layerTablesEnabled:this.layerTablesEnabled,listModeDisabled:this.listModeDisabled,messages:this.messages,messagesCommon:this.messagesCommon,parent:i,parentTitles:r,rootGroupUid:this.rootGroupUid,selectedDragItemLayerUid:this.selectedDragItemLayerUid,selectedItems:this.selectedItems,selectionMode:this.selectionMode,visibilityAppearance:this.visibilityAppearance,visibleElements:this.visibleElements,onAction:this.onAction,onCatalogOpen:this.onCatalogOpen,onPanelOpen:this.onPanelOpen,onSelectedDragItemLayerUidChange:this.onSelectedDragItemLayerUidChange,onTablesOpen:this.onTablesOpen,onTooltipReferenceChange:this.onTooltipReferenceChange})}_triggerAction(e,i){i&&e&&(i.type==="toggle"&&(i.value=!i.value),this.onAction(i,e))}_triggerOnTablesOpen(e){e&&this.onTablesOpen&&this.onTablesOpen(e)}_triggerOnCatalogOpen(e){e&&this.onCatalogOpen?.(e)}_focusSelectedDragEl(e,i){this.selectedDragItemLayerUid===i.layer?.uid&&(NS(e),this.onSelectedDragItemLayerUidChange?.(null))}_handleCalciteListItemToggle(e,i){e.stopPropagation(),i.open=e.target.expanded}_getParentVisibilityMode(e){return e&&"visibilityMode"in e?e.visibilityMode:null}_handleCalciteListItemSelect(e,i,r){if(md(e.target)!==i)return;const n=this._getParentVisibilityMode(r);this.selectionMode==="none"&&n!=="inherited"&&this._toggleVisibility(i,r)}_togglePanel(e){e.open=!e.open,e.open&&this.onPanelOpen()}_toggleVisibility(e,i){!e||!("visible"in e)||this._getParentVisibilityMode(i)==="exclusive"&&e.visible||(e.visible=!e.visible)}},Vq=Mw,Mw.vnodeSelector="calcite-list-item",Mw);d([m()],ti.prototype,"activeItem",void 0),d([m()],ti.prototype,"canMove",void 0),d([m()],ti.prototype,"css",void 0),d([m()],ti.prototype,"displayMode",void 0),d([m()],ti.prototype,"dragEnabled",void 0),d([m()],ti.prototype,"dragDisabled",void 0),d([m()],ti.prototype,"item",void 0),d([m()],ti.prototype,"layerTablesEnabled",void 0),d([m()],ti.prototype,"listModeDisabled",void 0),d([m()],ti.prototype,"messages",void 0),d([m()],ti.prototype,"messagesCommon",void 0),d([m()],ti.prototype,"onAction",void 0),d([m()],ti.prototype,"onPanelOpen",void 0),d([m()],ti.prototype,"onCatalogOpen",void 0),d([m()],ti.prototype,"onTablesOpen",void 0),d([m()],ti.prototype,"onSelectedDragItemLayerUidChange",void 0),d([m()],ti.prototype,"onTooltipReferenceChange",void 0),d([m()],ti.prototype,"parent",void 0),d([m()],ti.prototype,"parentTitles",void 0),d([m()],ti.prototype,"rootGroupUid",void 0),d([m()],ti.prototype,"selectionMode",void 0),d([m()],ti.prototype,"selectedItems",void 0),d([m()],ti.prototype,"selectedDragItemLayerUid",void 0),d([m()],ti.prototype,"visibleElements",void 0),d([m()],ti.prototype,"visibilityAppearance",void 0),d([m()],ti.prototype,"_title",null),d([m()],ti.prototype,"_renderedItemStatus",null),d([m()],ti.prototype,"_renderedItemTemporaryIcon",null),d([m()],ti.prototype,"_renderedItemToggle",null),d([m()],ti.prototype,"_renderedPanel",null),d([m()],ti.prototype,"_renderedPanelAction",null),d([m()],ti.prototype,"_renderedActions",null),d([m()],ti.prototype,"_renderedActionMenu",null),d([m()],ti.prototype,"_renderedActionMenuContent",null),d([m()],ti.prototype,"_renderedCatalogFootprintIcon",null),d([m()],ti.prototype,"_renderedCatalogDynamicIcon",null),d([m()],ti.prototype,"_renderedCatalogSelectNode",null),d([m()],ti.prototype,"_renderedChildList",null),d([m()],ti.prototype,"_hasTables",null),d([m()],ti.prototype,"_renderedTablesItem",null),d([m()],ti.prototype,"_renderedItemMessage",null),d([m()],ti.prototype,"_singleAction",null),d([m()],ti.prototype,"_filteredSections",null),d([m()],ti.prototype,"_actionsCount",null),ti=Vq=d([U("esri.widgets.LayerList.LayerListItem")],ti);const Zft=ti;function Xft(t){return e=>{e.hasOwnProperty("_delegatedEventNames")||(e._delegatedEventNames=e._delegatedEventNames?e._delegatedEventNames.slice():[]);const i=e._delegatedEventNames;t=Array.isArray(t)?t:Jft(t),i.push(...t)}}function Jft(t){return t.split(",").map(e=>e.trim())}function cue(t){return t&&typeof t.render=="function"}function iFt(t){return t&&typeof t.postMixInProperties=="function"&&typeof t.buildRendering=="function"&&typeof t.postCreate=="function"&&typeof t.startup=="function"}let Za=class extends sg(zv){constructor(e,i){super(e,i),this._legend=null,this.content=null,this.flowEnabled=!1,this.image=null,this.listItem=null,this.open=!1,this.visible=!0}initialize(){this.addHandles([ze(()=>this._canCreateLegend,()=>this._createLegend(),Di),ze(()=>[this._legend,this._legendOptions],()=>this._updateLegend(),Di)])}destroy(){this._legend=Ir(this._legend)}get _canCreateLegend(){const{content:e,listItem:i}=this;if(!i)return!1;const r="legend";return e===r||e!=null&&!!Array.isArray(e)&&e.includes(r)}get _legendOptions(){const{listItem:e,_legendLayerInfo:i}=this,r=e?.view;return i&&r?{view:r,layerInfos:[i]}:{}}get _legendLayerInfo(){const e=this.listItem?.layer;if(!e||e.type==="subtype-sublayer")return null;const i=MJ(e)?e:null,r=e?.parent,n=r!=null&&"type"in r&&r.type==="map-image"?i?.source:null,s="";return n&&r?{layer:r,title:s,sublayerIds:[n.mapLayerId]}:{layer:e,title:s}}get disabled(){const{listItem:e,_legend:i,content:r}=this;return!e||!(Array.isArray(r)&&r.length>1)&&!!i&&(!i.activeLayerInfos?.length||!e.visibleAtCurrentScale||!e.visible)}set disabled(e){this._overrideIfSome("disabled",e)}get icon(){const{image:e}=this,i=this._getFirstWidget();return this._get("icon")??(!e&&i?i.icon:null)}set icon(e){this._overrideIfSome("icon",e)}get title(){return this._get("title")||(this._getFirstWidget()?.label??"")}set title(e){this._override("title",e)}render(){return Ke("div",{class:"esri-list-item-panel"},this._renderContents())}_renderContent(e){const{_legend:i,disabled:r,open:n}=this;return e&&!r&&n?e==="legend"&&i?Ke("div",{key:"legend-widget"},i.render()):typeof e=="string"?Ke("div",{innerHTML:e,key:e}):cue(e)?Ke("div",{key:"content-widget"},e.render()):e instanceof HTMLElement?Ke("div",{afterCreate:this._attachToNode,bind:e,key:"content-element"}):null:null}_renderContents(){const{content:e,open:i}=this;return i?Array.isArray(e)?e.map(r=>this._renderContent(r)):this._renderContent(e):null}async _createLegend(){if(Ir(this._legend),this._legend=null,!this._canCreateLegend)return;const{default:e}=await fe(()=>import("./Legend-DxJFybgO.js"),__vite__mapDeps([303,153])),i=new e(this._legendOptions);this._legend=i}_attachToNode(e){e.appendChild(this)}_updateLegend(){const e=this._legend;e&&e.set(this._legendOptions)}_getWidget(e){return e==="legend"?this._legend:cue(e)?e:null}_getFirstWidget(){const{content:e}=this;return Array.isArray(e)?e.map(i=>this._getWidget(i)).find(i=>i):this._getWidget(e)}};d([m()],Za.prototype,"_legend",void 0),d([m()],Za.prototype,"_canCreateLegend",null),d([m()],Za.prototype,"_legendOptions",null),d([m()],Za.prototype,"_legendLayerInfo",null),d([m()],Za.prototype,"content",void 0),d([m()],Za.prototype,"disabled",null),d([m()],Za.prototype,"flowEnabled",void 0),d([m()],Za.prototype,"icon",null),d([m()],Za.prototype,"image",void 0),d([m()],Za.prototype,"listItem",void 0),d([m()],Za.prototype,"open",void 0),d([m()],Za.prototype,"title",null),d([m()],Za.prototype,"visible",void 0),Za=d([U("esri.widgets.LayerList.ListItemPanel")],Za);const Ske=Za;var JE;const Kft=We.ofType({key:"type",defaultKeyValue:"button",base:TN,typeMap:{button:owe,toggle:lwe}}),$ke=We.ofType(Kft),cU="layer",EL="child-list-mode",Qft="hide";let cr=JE=class extends sg(lt){constructor(t){super(t),this.actionsSections=new $ke,this.actionsOpen=!1,this.checkPublishStatusEnabled=!1,this.children=new(We.ofType(JE)),this.childrenSortable=!0,this.hidden=!1,this.layer=null,this.listItemCreatedFunction=null,this.listModeDisabled=!1,this.open=!1,this.parent=null,this.view=null}initialize(){if(this.addHandles([ze(()=>[this.layer,this.layer?.listMode,this.listModeDisabled],()=>this._watchLayerProperties(this.layer),Di),ze(()=>this.checkPublishStatusEnabled,t=>this._updateChildrenPublishing(t),Di),ze(()=>this.view,t=>this._updateChildrenView(t),Di),ze(()=>this.panel,t=>this._setListItemOnPanel(t),Di)]),typeof this.listItemCreatedFunction=="function"){const t={item:this};this.listItemCreatedFunction.call(null,t)}}destroy(){this.panel?.destroy(),this.children.destroyAll(),this.view=null}get connectionStatus(){const{layerView:t,publishing:e}=this;if(!e&&t&&"connectionStatus"in t)return t.connectionStatus}get error(){return this.layer?.loadError}get incompatible(){const{layerView:t}=this;return!(!t||!("spatialReferenceSupported"in t))&&!t.spatialReferenceSupported}get layerView(){const{layer:t,view:e}=this;if(!t||!e||t.type==="sublayer")return null;const i=t.type==="subtype-sublayer"?t.parent:t;return e.allLayerViews.find(r=>r.layer===i)??null}set panel(t){const e=this._get("panel");t!==e&&t&&e?.destroy(),this._set("panel",t)}castPanel(t){return this.panel?.open&&!t.hasOwnProperty("open")&&(t.open=!0),t?new Ske(t):null}get sortable(){return this.layer?.type!=="knowledge-graph-sublayer"&&this._get("sortable")}set sortable(t){this._set("sortable",t)}get title(){const t=co(this,"layer.layer");return(!t||t&&co(this,"layer.layer.loaded"))&&co(this,"layer.title")||co(this,"layer.attributes.title")||""}set title(t){this._override("title",t)}get publishing(){const{layer:t,checkPublishStatusEnabled:e}=this;return!!(e&&t&&"publishingInfo"in t&&t.publishingInfo?.status==="publishing")}get updating(){const{layerView:t,connectionStatus:e,layer:i,publishing:r}=this;return!r&&!e&&(t?t.updating:i?.loadStatus==="loading"||!1)}get visible(){return!!this.layer?.visible}set visible(t){const e=this.layer;e&&(e.visible=t)}get visibleAtCurrentScale(){return this.layerView?.visibleAtCurrentScale??!Uft(this.layer,this.view?.scale)}get visibleAtCurrentTimeExtent(){return this.layerView?.visibleAtCurrentTimeExtent??!0}get visibilityMode(){return Fft(this.layer)}clone(){return new JE({actionsSections:this.actionsSections.clone(),actionsOpen:this.actionsOpen,checkPublishStatusEnabled:this.checkPublishStatusEnabled,children:this.children.clone(),childrenSortable:this.childrenSortable,hidden:this.hidden,layer:this.layer,listItemCreatedFunction:this.listItemCreatedFunction,listModeDisabled:this.listModeDisabled,open:this.open,panel:this.panel,parent:this.parent,sortable:this.sortable,title:this.title,view:this.view,visible:this.visible})}_setListItemOnPanel(t){t&&(t.listItem=this)}_updateChildrenPublishing(t){this.children?.forEach(e=>e.checkPublishStatusEnabled=t)}_updateChildrenView(t){const e=this.children;e&&e.forEach(i=>i.view=t)}_createChildren(t){const{listModeDisabled:e,children:i}=this,r=t.filter(n=>!i.some(s=>s.layer===n));i.addMany(this._createChildItems(r,e))}_destroyChildren(t){const{children:e}=this,i=e.filter(r=>!!r.layer&&!t.includes(r.layer));e.destroyMany(i)}_sortChildren(t){this.children.sort((e,i)=>t.indexOf(i.layer)-t.indexOf(e.layer))}_destroyAllChildren(){this.removeHandles(EL),this.children.destroyAll()}_watchChildLayerListMode(t){this.removeHandles(EL),this.listModeDisabled||this.addHandles(t.toArray().map(e=>ze(()=>e.listMode,()=>this._compileChildren(t))),EL)}_compileChildren(t){const e=this.listModeDisabled?t:t?.filter(i=>Yz(i)!==Qft);t?.length?(this._createChildren(e),this._destroyChildren(e),this._sortChildren(e),this._watchChildLayerListMode(t)):this._destroyAllChildren()}_watchSublayerChanges(t){t&&this.addHandles(t.on("change",()=>this._compileChildren(t)),cU)}_initializeChildLayers(t){this._compileChildren(t),this._watchSublayerChanges(t)}_createChildItems(t,e){return t.reverse().map(i=>e||Bft(i)?new JE({layer:i,checkPublishStatusEnabled:this.checkPublishStatusEnabled,listItemCreatedFunction:this.listItemCreatedFunction,listModeDisabled:this.listModeDisabled,parent:this,view:this.view}):null).filter(un)}_watchLayerProperties(t){if(this.removeHandles(cU),this.removeHandles(EL),!t)return;if((!this.listModeDisabled&&Yz(t))==="hide-children")return void this.children.destroyAll();const e=wke(t);e&&this.addHandles(ze(()=>t[e],i=>{t.hasOwnProperty(e)&&this._initializeChildLayers(i)},Di),cU)}};d([m({type:$ke})],cr.prototype,"actionsSections",void 0),d([m()],cr.prototype,"actionsOpen",void 0),d([m()],cr.prototype,"checkPublishStatusEnabled",void 0),d([m({type:We.ofType(cr)})],cr.prototype,"children",void 0),d([m()],cr.prototype,"childrenSortable",void 0),d([m({readOnly:!0})],cr.prototype,"connectionStatus",null),d([m({readOnly:!0})],cr.prototype,"error",null),d([m()],cr.prototype,"hidden",void 0),d([m({readOnly:!0})],cr.prototype,"incompatible",null),d([m()],cr.prototype,"layer",void 0),d([m({readOnly:!0})],cr.prototype,"layerView",null),d([m()],cr.prototype,"listItemCreatedFunction",void 0),d([m({nonNullable:!0})],cr.prototype,"listModeDisabled",void 0),d([m()],cr.prototype,"open",void 0),d([m({type:Ske})],cr.prototype,"panel",null),d([Ii("panel")],cr.prototype,"castPanel",null),d([m()],cr.prototype,"parent",void 0),d([m({value:!0})],cr.prototype,"sortable",null),d([m()],cr.prototype,"title",null),d([m({readOnly:!0})],cr.prototype,"publishing",null),d([m({readOnly:!0})],cr.prototype,"updating",null),d([m()],cr.prototype,"view",void 0),d([m()],cr.prototype,"visible",null),d([m({readOnly:!0})],cr.prototype,"visibleAtCurrentScale",null),d([m({readOnly:!0})],cr.prototype,"visibleAtCurrentTimeExtent",null),d([m({readOnly:!0})],cr.prototype,"visibilityMode",null),cr=JE=d([U("esri.widgets.LayerList.ListItem")],cr);const AJ=cr,Ku={view:"view",viewLayers:"view-layers",mapLayers:"map-layers",layerViews:"layer-views",layerListMode:"layer-list-mode"},emt="hide",Tke=We.ofType(AJ);let Ph=class extends Rv{constructor(e){super(e),this.checkPublishStatusEnabled=!1,this.listItemCreatedFunction=null,this.listModeDisabled=!1,this.operationalItems=new Tke,this.view=null}initialize(){this.addHandles([ze(()=>this.view?.ready===!0,()=>this._viewHandles(),Di),ze(()=>[this.listItemCreatedFunction,this.checkPublishStatusEnabled,this.listModeDisabled],()=>this._recompileList()),ze(()=>Fq(this.view)?this.view.inGeographicLayout:null,()=>this._compileList())],Ku.view)}destroy(){this._removeAllItems(),this.view=null}get state(){const{view:e}=this;return e?.ready?"ready":e?"loading":"disabled"}get totalItems(){return this.operationalItems.flatten(e=>e.children).length}triggerAction(e,i){e&&!e.disabled&&this.emit("trigger-action",{action:e,item:i})}moveListItem(e,i,r,n){const s=e?.layer;if(!s||s.type==="subtype-sublayer"||s.type==="sublayer")return;const a=this.view?.map?.layers,o=i?oue(i):a,l=r?oue(r):a;if(!o||!l)return;const{operationalItems:c}=this,h=i?.children||c,f=r?.children||c,g=l.length-n;e.parent=r||null,h.remove(e),o.remove(s),f.includes(e)||f.add(e,g),l.includes(s)||l.add(s,g),this._compileList()}_createLayerViewHandles(e){this.removeHandles(Ku.layerViews),this._compileList(),e&&this.addHandles(e.on("change",()=>this._compileList()),Ku.layerViews)}_createMapLayerHandles(e){this.removeHandles(Ku.mapLayers),this._compileList(),e&&this.addHandles(e.on("change",()=>this._compileList()),Ku.mapLayers)}_createListItem(e){const{view:i,listItemCreatedFunction:r,checkPublishStatusEnabled:n,listModeDisabled:s}=this;return new AJ({checkPublishStatusEnabled:n,listModeDisabled:s,layer:e,listItemCreatedFunction:r,view:i})}_removeAllItems(){this.operationalItems.destroyAll()}_getViewableLayers(e){return e?this.listModeDisabled?e:e.filter(i=>Yz(i)!==emt):void 0}_watchLayersListMode(e){this.removeHandles(Ku.layerListMode),e&&!this.listModeDisabled&&this.addHandles(ze(()=>e.filter(i=>"listMode"in i).map(i=>i.listMode).toArray(),()=>this._compileList()),Ku.layerListMode)}_compileList(){const e=this.view?.map?.layers,i=Fq(this.view)&&!this.view.inGeographicLayout?e?.filter(({type:n})=>n==="link-chart"):e;this._watchLayersListMode(i);const r=this._getViewableLayers(i);r?.length?(this._createNewItems(r),this._removeItems(r),this._sortItems(r)):this._removeAllItems()}_createNewItems(e){const{operationalItems:i}=this;e.forEach(r=>{i.some(n=>n.layer===r)||i.add(this._createListItem(r))})}_removeItems(e){const{operationalItems:i}=this,r=[];i.forEach(n=>{n&&e&&e.includes(n.layer)||r.push(n)}),i.destroyMany(r)}_sortItems(e){const{operationalItems:i}=this;i.sort((r,n)=>{const s=e.indexOf(r.layer),a=e.indexOf(n.layer);return s>a?-1:s<a?1:0})}_recompileList(){this._removeAllItems(),this._compileList()}_viewHandles(){const{view:e}=this;this.removeHandles([Ku.mapLayers,Ku.layerViews,Ku.viewLayers]),e?.ready?this.addHandles([ze(()=>this.view?.map?.allLayers,i=>this._createMapLayerHandles(i),Di),ze(()=>this.view?.allLayerViews,i=>this._createLayerViewHandles(i),Di)],Ku.viewLayers):this._removeAllItems()}};d([m()],Ph.prototype,"checkPublishStatusEnabled",void 0),d([m()],Ph.prototype,"listItemCreatedFunction",void 0),d([m({nonNullable:!0})],Ph.prototype,"listModeDisabled",void 0),d([m({type:Tke})],Ph.prototype,"operationalItems",void 0),d([m({readOnly:!0})],Ph.prototype,"state",null),d([m()],Ph.prototype,"totalItems",null),d([m()],Ph.prototype,"view",void 0),Ph=d([U("esri.widgets.LayerList.LayerListViewModel")],Ph);const kke=Ph;let tu=class extends lt{constructor(){super(...arguments),this.catalogLayerList=!0,this.closeButton=!1,this.collapseButton=!1,this.errors=!1,this.filter=!1,this.flow=!0,this.heading=!1,this.statusIndicators=!0,this.temporaryLayerIndicators=!1}};d([m({type:Boolean,nonNullable:!0})],tu.prototype,"catalogLayerList",void 0),d([m({type:Boolean,nonNullable:!0})],tu.prototype,"closeButton",void 0),d([m({type:Boolean,nonNullable:!0})],tu.prototype,"collapseButton",void 0),d([m({type:Boolean,nonNullable:!0})],tu.prototype,"errors",void 0),d([m({type:Boolean,nonNullable:!0})],tu.prototype,"filter",void 0),d([m({type:Boolean,nonNullable:!0})],tu.prototype,"flow",void 0),d([m({type:Boolean,nonNullable:!0})],tu.prototype,"heading",void 0),d([m({type:Boolean,nonNullable:!0})],tu.prototype,"statusIndicators",void 0),d([m({type:Boolean,nonNullable:!0})],tu.prototype,"temporaryLayerIndicators",void 0),tu=d([U("esri.widgets.LayerList.LayerListVisibleElements")],tu);const Eke=tu,tmt=["label","description","metadata"],imt=We.ofType(AJ),uue="nested";let ii=class extends sg(zv){constructor(e,i){super(e,i),this._rootListEl=null,this._activeItem=null,this._tooltipReferenceMap=new pv,this._focusRootFlowItem=!1,this._focusPanelFlowItem=!1,this._focusLayerFlowItem=null,this._layerListMap=new pv,this._lastDragDetail=null,this._selectedDragItemLayerUid=null,this._rootGroupUid=`operational-${this.uid}`,this._openedLayersController=null,this.catalogLayerList=null,this.catalogOptions=null,this.collapsed=!1,this.dragEnabled=!1,this.filterPlaceholder="",this.filterPredicate=null,this.filterText="",this.headingLevel=2,this.knowledgeGraphOptions=null,this.layerTablesEnabled=new We(["knowledge-graph"]),this.listItemCanGiveFunction=null,this.listItemCanReceiveFunction=null,this.mapImageOptions=null,this.messages=null,this.messagesCommon=null,this.minDragEnabledItems=Pft,this.minFilterItems=Aft,this.openedLayers=new We,this.openedLayerLists=new We,this.selectedItems=new imt,this.selectionMode="none",this.tableList=null,this.tileOptions=null,this.viewModel=new kke,this.visibilityAppearance="default",this.visibleElements=new Eke,this._canMove=({dragEl:r,fromEl:n,toEl:s},a)=>{const o=a==="pull"?this.listItemCanGiveFunction:this.listItemCanReceiveFunction,l=md(r);if(!l?.sortable)return!1;const c=md(n),h=lue(n),f=md(s),g=lue(s),y=!!h&&!!g&&h===g,b={selected:l,from:c,to:f},_=n.group,S=s.group,$=c?.layer?.type??"",C=f?.layer?.type??"",I=new Set(["map-image","catalog","knowledge-graph"]);return _&&S&&typeof o=="function"?o.call(null,b):y&&!I.has($)&&!I.has(C)&&l?.layer?.type!=="sublayer"},this._onCatalogOpen=r=>{this.openedLayers.push(r.layer?.parent),this._focusLayerFlowItem=r.layer?.uid},this._onTablesOpen=r=>{this.openedLayers.push(r.layer),this._focusLayerFlowItem=r.layer?.uid},this._onPanelOpen=()=>{this._focusPanelFlowItem=!0},this._onTooltipReferenceChange=(r,n)=>{n?this._tooltipReferenceMap.set(r,n):this._tooltipReferenceMap.delete(r)},this._onSelectedDragItemLayerUidChange=r=>{this._selectedDragItemLayerUid=r},this._onTriggerAction=(r,n)=>{this.triggerAction(r,n)},this._clearActiveItem=()=>{this._activeItem=null},this._setActiveItem=r=>{if(this.visibilityAppearance!=="default")return;const n=Array.from(r.composedPath()).find(s=>s.classList?.contains(F2.item));this._activeItem=md(n)},this._onCalciteListOrderChange=r=>{const{_lastDragDetail:n}=this,{toEl:s,fromEl:a,dragEl:o,newIndex:l}=r;if(a&&s&&!(n?.newIndex===l&&n?.dragEl===o&&n?.toEl===s&&n?.fromEl===a)){if(this._lastDragDetail=r,this._selectedDragItemLayerUid=o.value,a===s){const c=Array.from(a.children).filter(h=>h?.matches("calcite-list-item")).map(h=>h.value);return void this._sortLayers(a,c)}this._moveLayerFromChildList({toEl:s,fromEl:a,dragEl:o,newIndex:l})}}}initialize(){this.addHandles([Oa(()=>this.openedLayers,"change",()=>this._handleOpenedLayersChange(),Di),Oa(()=>this.viewModel.operationalItems,"change",()=>Nft(this.selectedItems),Di),ze(()=>[this.filterPredicate,this._rootListEl],()=>jft(this._rootListEl,this.filterPredicate))])}loadDependencies(){return g_({button:()=>fe(()=>Promise.resolve().then(()=>mA),void 0),flow:()=>fe(()=>import("./index-cpoBJgZK.js"),[]),"flow-item":()=>fe(()=>import("./index-dF4hY2p8.js"),[]),list:()=>fe(()=>Promise.resolve().then(()=>S2e),void 0),notice:()=>fe(()=>Promise.resolve().then(()=>HJ),void 0),tooltip:()=>fe(()=>import("./index-0arFYqX3.js"),[])})}destroy(){this._destroyOpenedLayerLists(),this._tooltipReferenceMap.clear()}get _totalItems(){return this.viewModel.operationalItems.flatten(e=>e.children.filter(i=>i.layer?.type!=="catalog-dynamic-group")).length}get _visibleItems(){return this.operationalItems?.filter(e=>!e.hidden&&(this.visibleElements.errors||!e.error))}get _openedPanelItems(){return this._visibleItems.flatten(e=>e.children).filter(({hidden:e,panel:i})=>!e&&i?.open&&!i.disabled&&i.flowEnabled)}get _dragEnabled(){return this._totalItems>=this.minDragEnabledItems&&this.dragEnabled}get _filterEnabled(){return this._totalItems>=this.minFilterItems&&this.visibleElements.filter}get _renderedOpenLayerFlowItems(){const{openedLayers:e}=this;return e.toArray().map((i,r)=>this._renderLayerFlowItem(i,r===e.length-1))}get icon(){return"layers"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get listItemCreatedFunction(){return this.viewModel.listItemCreatedFunction}set listItemCreatedFunction(e){this.viewModel.listItemCreatedFunction=e}get operationalItems(){return this.viewModel.operationalItems}set operationalItems(e){this.viewModel.operationalItems=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}triggerAction(e,i){return this.viewModel.triggerAction(e,i)}render(){const e=this.viewModel?.state,i={[wl.hidden]:e==="loading",[wl.disabled]:e==="disabled"};return Ke("div",{class:this.classes(F2.base,wl.widget,wl.panel,i)},this._renderItemTooltips(),this._renderItems())}async _createFlowList(e,i){const{_layerListMap:r}=this,n=r.get(e);if(n)return n;const s=e.type==="catalog"?await this._createCatalogLayerList(e):await this._createTableList(e);return i.aborted||r.set(e,s),s}async _handleOpenedLayersChange(){const{_layerListMap:e,openedLayers:i,openedLayerLists:r}=this;this._openedLayersController?.abort();const n=new AbortController,{signal:s}=n;this._openedLayersController=n,e.forEach((l,c)=>{i.includes(c)||(l.destroy(),e.delete(c))});const a=await Promise.all(i.map(l=>this._createFlowList(l,s)));if(s.aborted)return;r.removeAll(),r.addMany(a);const o=r.at(-1);o?"catalogLayer"in o?(this._set("catalogLayerList",o),this._set("tableList",null)):(this._set("catalogLayerList",null),this._set("tableList",o)):(this._set("catalogLayerList",null),this._set("tableList",null))}_destroyOpenedLayerLists(){this.openedLayerLists.destroyAll(),this.openedLayers.removeAll(),this._layerListMap.clear()}_renderItemTooltip(e){const{_tooltipReferenceMap:i,messages:r}=this;return e?Ke("calcite-tooltip",{key:`tooltip-${e.layer?.uid}`,overlayPositioning:"fixed",referenceElement:i.get(e.layer?.uid)},r.layerIncompatibleTooltip):null}_renderItemTooltipNodes(e){return e.incompatible?this._renderItemTooltip(e):e.children?.filter(i=>!i.hidden).toArray().map(i=>this._renderItemTooltipNodes(i))}_renderItemTooltips(){return this._visibleItems?.toArray().map(e=>this._renderItemTooltipNodes(e))}_renderNoItemsMessage(){return Ke("div",{slot:"message"},this.messages.noItemsToDisplay)}_renderNoItems(){return Ke("div",{class:F2.itemMessage,key:"esri-layer-list__no-items"},Ke("calcite-notice",{icon:"information",kind:"info",open:!0,width:"full"},this._renderNoItemsMessage()))}async _createCatalogLayerList(e){const{default:i}=await fe(()=>import("./CatalogLayerList-CHPQQz3r.js"),[]),{headingLevel:r,catalogOptions:n,view:s,filterPlaceholder:a,listItemCreatedFunction:o,minFilterItems:l,selectionMode:c,visibilityAppearance:h,_onCatalogOpen:f,_onTablesOpen:g,layerTablesEnabled:y}=this;return new i({headingLevel:r,view:s,filterPlaceholder:a,listItemCreatedFunction:o,minFilterItems:l,selectionMode:c,visibilityAppearance:h,...n,catalogLayer:e,layerTablesEnabled:y,onCatalogOpen:f,onTablesOpen:g})}_getTableListParams(e){switch(e.type){case"knowledge-graph":return{...this.knowledgeGraphOptions,tables:e.tables};case"map-image":return{...this.mapImageOptions,tables:e.subtables};case"tile":return{...this.tileOptions,tables:e.subtables};default:return null}}async _createTableList(e){const{default:i}=await fe(()=>import("./TableList-CJXhuzCc.js"),[]),{headingLevel:r,selectionMode:n,dragEnabled:s}=this;return new i({headingLevel:r,selectionMode:n,dragEnabled:s,...this._getTableListParams(e)})}_renderLayerFlowItem(e,i){const{messages:r,openedLayers:n}=this,s=e.title||this.messages.untitledLayer;return Ke("calcite-flow-item",{afterCreate:this._focusLayerFlowItemNode,afterUpdate:this._focusLayerFlowItemNode,bind:this,"data-layer-uid":e.uid,description:s,heading:r[e.type==="catalog"?"catalogLayers":"tables"],headingLevel:this.headingLevel,key:`flow-layer-list-${e.uid}`,selected:i,onCalciteFlowItemBack:a=>{a.preventDefault(),n.pop();const o=n.at(-1);o?this._focusLayerFlowItem=o.uid:this._focusRootFlowItem=!0}},this._layerListMap.get(e)?.render())}_renderPanelFlowItems(){const{_openedPanelItems:e,openedLayers:i}=this;return e.toArray().map(({title:r,panel:n},s)=>{const a=()=>this._handlePanelFlowItemBack(n);return Ke("calcite-flow-item",{afterCreate:this._focusPanelFlowItemNode,afterUpdate:this._focusPanelFlowItemNode,bind:this,description:r,heading:n.title,headingLevel:this.headingLevel,key:`flow-panel-${n.uid}`,selected:!i.length&&s===e.length-1,onCalciteFlowItemBack:o=>{o.preventDefault(),a()}},n.render(),Ke("calcite-button",{appearance:"transparent",onclick:a,slot:"footer-actions",width:"full"},this.messagesCommon.back))})}_handlePanelFlowItemBack(e){e.open=!1,this._focusRootFlowItem=!0}_focusRootFlowItemNode(e){this._focusRootFlowItem&&(this._focusRootFlowItem=!1,NS(e))}_focusLayerFlowItemNode(e){this._focusLayerFlowItem===e.dataset.layerUid&&(this._focusLayerFlowItem=null,NS(e))}_focusPanelFlowItemNode(e){this._focusPanelFlowItem&&(this._focusPanelFlowItem=!1,NS(e))}_renderItems(){const{visible:e,collapsed:i,_visibleItems:r,_openedPanelItems:n,_filterEnabled:s,_rootGroupUid:a,visibleElements:{closeButton:o,collapseButton:l,heading:c,flow:h},_dragEnabled:f,selectionMode:g,filterText:y,openedLayers:b,filterPlaceholder:_,messages:S}=this,$=[Ke("calcite-flow-item",{afterCreate:this._focusRootFlowItemNode,afterUpdate:this._focusRootFlowItemNode,bind:this,closable:o,closed:!e,collapsed:i,collapsible:l,heading:c?S.widgetLabel:void 0,headingLevel:this.headingLevel,key:"root-flow-item",selected:!b.length&&!n.length,onCalciteFlowItemClose:()=>this.visible=!1},r?.length?null:this._renderNoItems(),Ke("calcite-list",{afterCreate:C=>{this._rootListEl=C,C.addEventListener("focusin",this._setActiveItem),C.addEventListener("focusout",this._clearActiveItem)},afterRemoved:C=>{this._rootListEl=null,C.removeEventListener("focusin",this._setActiveItem),C.removeEventListener("focusout",this._clearActiveItem)},canPull:C=>this._canMove(C,"pull"),canPut:C=>this._canMove(C,"put"),"data-layer-type":a,displayMode:uue,dragEnabled:f,filterEnabled:s,filterPlaceholder:_,filterProps:tmt,filterText:s?y:"",group:a,key:"root-list",label:S.widgetLabel,onmouseleave:this._clearActiveItem,onmouseover:this._setActiveItem,selectionAppearance:"border",selectionMode:g,onCalciteListChange:C=>this._handleCalciteListChange(C),onCalciteListDragEnd:C=>this._handleCalciteListDragEnd(C.detail),onCalciteListFilter:C=>this.filterText=C.currentTarget?.filterText??"",onCalciteListOrderChange:C=>this._onCalciteListOrderChange(C.detail)},r.toArray().map(C=>this._renderItem(C)),s?Ke("div",{class:F2.filterNoResults,slot:"filter-no-results"},Ke("calcite-notice",{kind:"info",open:!0,width:"full"},this._renderNoItemsMessage())):null)),this._renderPanelFlowItems(),this._renderedOpenLayerFlowItems];return e?h?Ke("calcite-flow",{key:"root-flow"},$):$:null}_renderItem(e,i,r){return Ke(Zft,{activeItem:this._activeItem,canMove:this._canMove,css:F2,displayMode:uue,dragEnabled:this.dragEnabled,item:e,key:`layerListItem-${e.layer?.uid}`,layerTablesEnabled:this.layerTablesEnabled,listModeDisabled:this.viewModel.listModeDisabled,messages:this.messages,messagesCommon:this.messagesCommon,parent:i,parentTitles:r,rootGroupUid:this._rootGroupUid,selectedDragItemLayerUid:this._selectedDragItemLayerUid,selectedItems:this.selectedItems,selectionMode:this.selectionMode,visibilityAppearance:this.visibilityAppearance,visibleElements:this.visibleElements,onAction:this._onTriggerAction,onCatalogOpen:this._onCatalogOpen,onPanelOpen:this._onPanelOpen,onSelectedDragItemLayerUidChange:this._onSelectedDragItemLayerUidChange,onTablesOpen:this._onTablesOpen,onTooltipReferenceChange:this._onTooltipReferenceChange})}_moveLayerFromChildList({toEl:e,fromEl:i,dragEl:r,newIndex:n}){const s=md(r),a=md(e),o=md(i);this.viewModel.moveListItem(s,o,a,n)}_handleCalciteListDragEnd(e){const{fromEl:i,dragEl:r,oldIndex:n}=e;i.insertBefore(r,i.children[n])}_sortLayers(e,i){if(e)if(e===this._rootListEl)_ke(this.view?.map?.layers,i);else{const r=md(e);if(!r)return;Hft(r,i)}}_handleCalciteListChange(e){const{selectionMode:i,selectedItems:r}=this;if(i==="none")return;const n=e.target.selectedItems.map(s=>md(s)).filter(Boolean);r.removeAll(),r.addMany(n)}};d([m()],ii.prototype,"_rootListEl",void 0),d([m()],ii.prototype,"_activeItem",void 0),d([m()],ii.prototype,"_tooltipReferenceMap",void 0),d([m()],ii.prototype,"_focusRootFlowItem",void 0),d([m()],ii.prototype,"_focusPanelFlowItem",void 0),d([m()],ii.prototype,"_focusLayerFlowItem",void 0),d([m()],ii.prototype,"_layerListMap",void 0),d([m()],ii.prototype,"_totalItems",null),d([m()],ii.prototype,"_visibleItems",null),d([m()],ii.prototype,"_openedPanelItems",null),d([m()],ii.prototype,"_dragEnabled",null),d([m()],ii.prototype,"_filterEnabled",null),d([m()],ii.prototype,"_renderedOpenLayerFlowItems",null),d([m({readOnly:!0})],ii.prototype,"catalogLayerList",void 0),d([m()],ii.prototype,"catalogOptions",void 0),d([m()],ii.prototype,"collapsed",void 0),d([m()],ii.prototype,"dragEnabled",void 0),d([m()],ii.prototype,"filterPlaceholder",void 0),d([m()],ii.prototype,"filterPredicate",void 0),d([m()],ii.prototype,"filterText",void 0),d([m()],ii.prototype,"headingLevel",void 0),d([m()],ii.prototype,"icon",null),d([m()],ii.prototype,"knowledgeGraphOptions",void 0),d([m()],ii.prototype,"label",null),d([m()],ii.prototype,"layerTablesEnabled",void 0),d([m()],ii.prototype,"listItemCanGiveFunction",void 0),d([m()],ii.prototype,"listItemCanReceiveFunction",void 0),d([m()],ii.prototype,"listItemCreatedFunction",null),d([m()],ii.prototype,"mapImageOptions",void 0),d([m(),$v("esri/widgets/LayerList/t9n/LayerList")],ii.prototype,"messages",void 0),d([m(),$v("esri/t9n/common")],ii.prototype,"messagesCommon",void 0),d([m()],ii.prototype,"minDragEnabledItems",void 0),d([m()],ii.prototype,"minFilterItems",void 0),d([m({readOnly:!0})],ii.prototype,"openedLayers",void 0),d([m({readOnly:!0})],ii.prototype,"openedLayerLists",void 0),d([m()],ii.prototype,"operationalItems",null),d([m()],ii.prototype,"selectedItems",void 0),d([m()],ii.prototype,"selectionMode",void 0),d([m({readOnly:!0})],ii.prototype,"tableList",void 0),d([m()],ii.prototype,"tileOptions",void 0),d([m()],ii.prototype,"view",null),d([Xft("trigger-action"),m({type:kke})],ii.prototype,"viewModel",void 0),d([m()],ii.prototype,"visibilityAppearance",void 0),d([m({type:Eke,nonNullable:!0})],ii.prototype,"visibleElements",void 0),ii=d([U("esri.widgets.LayerList")],ii);const rmt=ii;const nmt=(t,e)=>i=>amt(i,t);let smt=class extends UX{#e=new Map;#t;#i;constructor(e,i){super(e,i),new JX(e);const r=this,n=r.instance;let s=n.viewModel,a=n.visibleElements;const o=new Proxy(this.exports,{get(l,c,h){return c==="viewModel"?s:c==="visibleElements"?a:Reflect.get(l,c,h)}});if(r.#i=n,r.instance=o,r.exports=o,s){const l={component:e,get exports(){return r.instance.viewModel}};Int(r).set("viewModel","viewModel"),e.addController(l),s=BSe(e,new WeakRef(l),bRe(e)-1,s,r.#e)}r.instance.visibleElements&&(a=r.#a(n))}hostConnected(){this.instance=this.#i,super.hostConnected()}hostLoad(){this.#t=ze(()=>this.component.el.view,e=>{const i=this.instance;!("view"in i)&&typeof i.viewModel=="object"?i.viewModel.view=e:i.view=e,!("map"in i)&&typeof i.viewModel=="object"?i.viewModel.map=e?.map:i.map=e?.map},{sync:!0,initial:!0})}hostUpdate(e){e.has("closed")&&(this.instance.visible=!this.component.closed)}hostLoaded(){const{el:e}=this.component;e.childElem??=document.createElement("div"),this.instance.container=e.childElem,(this.component.el.shadowRoot??this.component.el).appendChild(this.instance.container),this.component.closed!==void 0&&this.onLifecycle(()=>ze(()=>this.instance.visible,i=>this.component.closed=!i,{initial:!0}))}#a(e){return new Proxy(e.visibleElements,{get:(i,r)=>{if(typeof r=="symbol"||r in Promise.prototype)return i[r];const n=[r],s=this.#o(n);return GY(this.component,a=>{const o=a;this.component[o]=!1;let l=e.visibleElements??{},c;for(const f of n.slice(0,-1))if(typeof l[f]=="object"&&l[f]!==null)l=l[f];else{c=!!l[f];break}c===void 0&&(c=!!(l[n.slice(-1)[0]]??!0));const h=o.startsWith("hide")||o.startsWith("show")?o.startsWith("hide"):c;this.onUpdate(f=>{if(f.has(o)){const g=this.component[o];this.#l(n,g,h)}})},s)}})}#o(e){const i=new Proxy({},{get:(r,n)=>{const s=Reflect.get(r,n);return typeof n=="symbol"||n in Promise.prototype?s:(e.push(n),i)}});return i}#l(e,i,r){let n=this.instance.visibleElements??{};for(const a of e.slice(0,-1))(typeof n[a]!="object"||n[a]===null)&&(n[a]={}),n=n[a];const s=!!(r?!i:i);n[e.at(-1)]=s}hostDestroy(){this.#t?.remove(),super.hostDestroy()}};const amt=HM(smt);const omt=St`@keyframes esri-basemap-slide{0%{opacity:0;margin-top:0;margin-left:0}75%{opacity:0;margin-top:0;margin-left:0}to{opacity:1;margin-top:5px;margin-left:5px}}@keyframes esri-docking-animation{0%{opacity:0}25%{opacity:0}to{opacity:1}}@keyframes popup-intro-animation-down{0%{opacity:0;transform:translateY(-5px)}to{opacity:1;transform:translate(0)}}@keyframes popup-intro-animation-up{0%{opacity:0;transform:translateY(5px)}to{opacity:1;transform:translate(0)}}@supports (-ms-ime-align: auto){.esri-slider__anchor:focus{outline:1px dotted #000}}@keyframes esri-spinner--start-animation{0%{opacity:0;transform:scale(0)}to{opacity:1;transform:scale(1)}}@keyframes esri-spinner--finish-animation{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(0)}}@keyframes esri-spinner--rotate-animation{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (prefers-reduced-motion){.esri-utility-network-trace__reset-prompt{animation:none!important}}@media (prefers-reduced-motion){.esri-popup--aligned-top-center,.esri-popup--aligned-top-left,.esri-popup--aligned-top-right,.esri-popup--aligned-bottom-center,.esri-popup--aligned-bottom-left,.esri-popup--aligned-bottom-right,.esri-popup--is-docked{animation:none!important}}@media (prefers-reduced-motion: reduce){.esri-fov-overlay{animation:none!important}}@keyframes esri-fade-in-down{0%{opacity:0;transform:translateY(-5px)}25%{opacity:0;transform:translateY(-5px)}to{opacity:1;transform:translate(0)}}@keyframes esri-fade-in-up{0%{opacity:0;transform:translateY(5px)}25%{opacity:0;transform:translateY(5px)}to{opacity:1;transform:translate(0)}}@keyframes esri-fade-in{0%{opacity:0}25%{opacity:0}to{opacity:1}}@keyframes esri-fade-in-scale{0%{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}@keyframes looping-progresss-bar-ani{0%{width:0;left:0}20%{width:20%;left:0}80%{width:20%;left:80%}to{width:0;left:100%}}@keyframes esri-rotate{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes panel-advance{0%{opacity:0;transform:translate(50px) scale(.99)}to{opacity:1;transform:translate(0) scale(1)}}@keyframes panel-retreat{0%{opacity:0;transform:translate(-50px) scale(.99)}to{opacity:1;transform:translate(0) scale(1)}}@keyframes panel-advance--rtl{0%{opacity:0;transform:translate(-50px) scale(.99)}to{opacity:1;transform:translate(0) scale(1)}}@keyframes panel-retreat--rtl{0%{opacity:0;transform:translate(50px) scale(.99)}to{opacity:1;transform:translate(0) scale(1)}}.esri-widget__heading{color:var(--calcite-color-text-2);margin:0 0 .5rem;font-weight:var(--calcite-font-weight-semibold)}h1.esri-widget__heading{font-size:var(--calcite-font-size-xl)}h2.esri-widget__heading{font-size:var(--calcite-font-size-md)}h3.esri-widget__heading,h4.esri-widget__heading,h5.esri-widget__heading,h6.esri-widget__heading{font-size:var(--calcite-font-size)}.esri-widget{--esri-widget-padding-x: 15px;--esri-widget-padding-y: var(--calcite-spacing-md);--esri-widget-padding: var(--esri-widget-padding-y) var(--esri-widget-padding-x);box-sizing:border-box;color:var(--calcite-color-text-2);background-color:var(--calcite-color-foreground-1);font-size:var(--calcite-font-size);line-height:var(--calcite-font-line-height-relative-tight)}.esri-widget *,.esri-widget :before,.esri-widget :after{box-sizing:inherit}.esri-widget.esri-widget--disabled>*{opacity:.4;pointer-events:none}.esri-widget.esri-widget--compact{--esri-widget-padding-y: 0;--esri-widget-padding-x: 0}.esri-widget__anchor{color:var(--calcite-color-text-2)}.esri-widget__anchor:hover{color:var(--calcite-color-text-3)}.esri-widget__anchor:hover,.esri-widget__anchor:focus{text-decoration:underline}.esri-widget__anchor--disabled{opacity:.4;pointer-events:none}.esri-widget__header{background-color:var(--calcite-color-foreground-1);flex:1 0 100%;justify-content:space-between;align-items:center;width:100%;min-height:48px;padding:12px 0 12px 15px;display:flex}.esri-widget__header .esri-widget__heading{width:calc(100% - 48px);text-align:initial;color:var(--calcite-color-text-1);align-items:center;margin:0;padding:0;display:flex}.esri-widget__header-button{appearance:none;cursor:pointer;color:var(--calcite-color-text-2);background-color:var(--calcite-color-foreground-1);border:none;flex:0 0 48px;justify-content:center;align-self:stretch;align-items:center;width:48px;padding:0;display:flex}.esri-widget__footer{background-color:var(--calcite-color-foreground-1);justify-content:center;align-items:center;width:100%;min-height:48px;display:flex}.esri-widget__footer-pagination{color:var(--calcite-color-text-2);justify-content:space-between;align-items:center;display:flex}.esri-widget__footer-pagination-previous-button,.esri-widget__footer-pagination-next-button{cursor:pointer;background-color:var(--calcite-color-foreground-1);border:0;margin:0 7px;padding:12px 15px;transition:background-color .125s ease-in-out}.esri-widget__footer-pagination-previous-button:hover,.esri-widget__footer-pagination-previous-button:focus,.esri-widget__footer-pagination-next-button:hover,.esri-widget__footer-pagination-next-button:focus{color:var(--calcite-color-text-1);background-color:var(--calcite-color-foreground-1)}.esri-menu{visibility:hidden;z-index:1;background-clip:padding;background-color:var(--calcite-color-foreground-1);background-clip:padding-box;width:100%;max-height:0;margin:2px 0 0;padding:0;font-size:var(--calcite-font-size);line-height:var(--calcite-spacing-xl);position:absolute;top:100%;left:0;overflow:hidden;box-shadow:0 1px 2px #0000004d}.esri-menu .esri-menu__header{color:var(--calcite-color-text-inverse);background-color:var(--calcite-color-inverse);padding:6px 12px}.esri-menu__list{margin:0;padding:0;list-style:none}.esri-menu__list-item{cursor:pointer;border-top:1px solid #adadad4d;border-left:3px solid #0000;padding:.8em 1em}.esri-menu__list-item [class^=esri-icon-],.esri-menu__list-item [class*=" esri-icon-"]{padding-right:2.8px}.esri-menu__list-item:first-child{border-top:none}.esri-menu__list-item--focus,.esri-menu__list-item:hover,.esri-menu__list-item:focus{background-color:var(--calcite-color-foreground-1)}.esri-menu__list-item:active{background-color:var(--calcite-color-foreground-current)}.esri-menu__list-item--active,.esri-menu__list-item--active:hover,.esri-menu__list-item--active:focus{background-color:var(--calcite-color-foreground-1);border-left-color:var(--calcite-color-brand)}.esri-widget__table{border-collapse:collapse;color:var(--calcite-color-text-1);border:none;width:100%;line-height:var(--calcite-font-line-height-relative-tight)}.esri-widget__table tr:nth-child(odd){background-color:var(--calcite-color-transparent)}.esri-widget__table tr:nth-child(2n){background-color:var(--calcite-color-transparent-press)}.esri-widget__table tr a{color:var(--calcite-color-text-2)}.esri-widget__table tr a:hover,.esri-widget__table tr a:focus{color:var(--calcite-color-text-1)}.esri-widget__table tr td,.esri-widget__table tr th{vertical-align:top;word-break:break-word;padding:.5em .7em;font-size:var(--calcite-font-size-sm);font-weight:var(--calcite-font-weight-regular)}.esri-widget__table tr th{text-align:left;border-right:3px solid #0000000d;width:50%}.esri-widget__table tr td{width:50%}.esri-input{color:var(--calcite-color-text-1);background-color:var(--calcite-color-foreground-1);border:1px solid #959595;font-size:var(--calcite-font-size)}.esri-input::-ms-clear{display:none}.esri-input::placeholder{opacity:1;color:var(--calcite-color-text-2)}.esri-input:placeholder-shown{text-overflow:ellipsis}.esri-input[type=text],.esri-input[type=password],.esri-input[type=number]{height:32px;padding:0 .5em}calcite-combobox.esri-input{border:none}.esri-widget__content--empty{text-align:center;color:var(--calcite-color-border-input);flex-flow:column wrap;align-items:center;padding:18px 22px;display:flex}.esri-widget__content--empty h1.esri-widget__heading,.esri-widget__content--empty h2.esri-widget__heading,.esri-widget__content--empty h3.esri-widget__heading,.esri-widget__content--empty h4.esri-widget__heading,.esri-widget__content--empty h5.esri-widget__heading{font-weight:var(--calcite-font-weight-regular)}.esri-widget__content-illustration--empty{width:128px;padding:1rem 0}.esri-widget__content-icon--empty{width:32px;padding:.5rem 0}.esri-select{appearance:none;cursor:pointer;color:var(--calcite-color-text-2);background:var(--calcite-color-foreground-1) url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='-8 -8 32 32' width='32' height='32'%3E%3Cpath d='M8 11.207l-4-4V5.793l4 4 4-4v1.414z' fill='%23adadad' fillrule='nonzero'/%3E%3C/svg%3E") 100% no-repeat;border:1px solid #959595;border-radius:0;width:100%;height:32px;margin:0;padding:0 .5em;font-family:inherit;font-size:.85em;display:block}.esri-select[disabled]{cursor:auto}.esri-select::-ms-expand{display:none}.esri-disabled a,.esri-disabled [role=menu],.esri-disabled [role=checkbox],.esri-disabled [class^=esri-icon-],.esri-disabled [class*=" esri-icon-"]{color:var(--calcite-color-text-3)}.keynav-mode .esri-widget:focus,.keynav-mode .esri-widget :focus{z-index:1;outline-offset:2px;outline:2px solid #adadad}.esri-widget__loader-animation{border:.15em solid #adadad4d;border-top-color:var(--calcite-color-border-input);border-radius:100%;width:1em;height:1em;font-size:var(--calcite-font-size-md);animation:1.25s linear infinite esri-rotate;display:block;transform:translateZ(0)}:dir(rtl) .esri-widget__table th{text-align:right;border-left:3px solid #0000000d;border-right:none}:dir(rtl) .esri-select{background-position:0}:dir(rtl) .esri-menu__list-item{border-left:none;border-right:3px solid #0000}:dir(rtl) .esri-menu__list-item [class^=esri-icon-],:dir(rtl) .esri-menu__list-item [class*=" esri-icon-"]{padding-left:2px;padding-right:0}:dir(rtl) .esri-menu__list-item--active{border-right-color:var(--calcite-color-brand)}.esri-icon-font-fallback-text{clip:rect(0 0 0 0);width:1px;height:1px;position:absolute;overflow:hidden}.esri-rotating{animation:1.25s linear infinite esri-rotate;transform:translateZ(0)}.esri-clearfix:before,.esri-clearfix:after{content:" ";display:table}.esri-clearfix:after{clear:both}.esri-interactive{cursor:pointer}.esri-hidden{display:none!important}.esri-invisible{visibility:hidden!important}.esri-offscreen{position:absolute;top:-999em;left:-999em}.esri-match-height{flex-direction:column;flex:auto;display:flex;overflow:hidden}.esri-legend{overflow:hidden;overflow-y:auto}.esri-legend__message{padding:.5em 1em}.esri-legend__service{border-bottom:1px solid rgba(110,110,110,.3);padding:var(--esri-widget-padding);word-wrap:break-word}.esri-legend__service:last-child{border-bottom:none}.esri-legend__layer{margin-left:7px;overflow:auto}.esri-legend__group-layer-child{margin-left:7px;padding-right:0;padding-left:0}.esri-legend__layer-table{display:flex;flex-flow:column;margin-bottom:12px;width:100%}.esri-legend__layer-child-table{display:table;margin-bottom:12px;width:100%;border-collapse:collapse}.esri-legend__layer-body{margin-left:7px}.esri-legend__layer-row{display:flex}.esri-legend__layer-cell{padding:4px 0;min-width:100px;vertical-align:middle;word-break:break-word}.esri-legend__layer-cell--symbols{min-width:10px;text-align:center}.esri-legend--card__color-ramp-container{justify-content:center}.esri-legend__layer-table--size-ramp{display:table}.esri-legend__layer-table--size-ramp .esri-legend__layer-row{display:table-row}.esri-legend__layer-table--size-ramp .esri-legend__layer-cell{display:table-cell}.esri-legend__size-ramp~.esri-legend__layer-cell--info{width:80%;max-width:80%}.esri-legend__layer-cell--info{padding-right:7px;padding-left:7px;max-width:250px;word-break:normal;word-wrap:normal;font-size:var(--calcite-font-size-sm)}.esri-legend__imagery-layer-image--stretched{display:block;margin-bottom:-2px}.esri-legend__imagery-layer-cell--stretched{padding:0;vertical-align:top;line-height:1}.esri-legend__imagery-layer-info--stretched{padding:0 2px;vertical-align:top}.esri-legend__symbol{display:flex;justify-content:center}.esri-legend__layer-caption{display:table-caption;padding:6px 0;word-break:break-word}.esri-legend__ramp-labels{display:flex;flex-flow:column nowrap;justify-content:space-between}.esri-legend__ramps{margin-left:3px}.esri-legend__color-ramp{width:24px}.esri-legend__opacity-ramp{background-image:url(../base/images/transparent-bg.png)}.esri-legend__ramp-tick{position:absolute;right:1px;left:auto;border-top:1px solid rgba(110,110,110,.3);width:4px;line-height:0}.esri-legend__ramp-label{position:relative;padding:0 7px;line-height:1em;white-space:nowrap;font-size:var(--calcite-font-size-sm)}.esri-legend__ramp-label:before{display:block;position:absolute;top:.25em;right:100%;border-width:3px 4px 3px 0;border-style:solid;border-color:transparent rgba(50,50,50,.8) transparent transparent;width:0;height:0;content:""}.esri-legend__ramp-label:first-child{margin-top:-4px}.esri-legend__ramp-label:last-child{bottom:-3px}.esri-legend-layer-caption{display:table-caption;padding:6px 0}:dir(rtl) .esri-legend__ramp-label:before{right:auto;left:100%;border-width:3px 0 3px 4px;border-color:transparent transparent transparent rgba(50,50,50,.8)}:dir(rtl) .esri-legend__layer,:dir(rtl) .esri-legend__group-layer-child,:dir(rtl) .esri-legend__layer-body{margin-right:7px;margin-left:0;overflow:auto}:dir(rtl) .esri-legend__ramps{margin-right:3px;margin-left:auto}.esri-legend--card{display:flex;position:relative;transition:max-width .25s ease-in-out;background:#fff;overflow-x:auto}.esri-legend--card__section{white-space:pre-wrap;word-break:break-word;word-wrap:break-word;border-left:1px solid rgba(110,110,110,.3);padding:12px 15px;min-width:300px;overflow:auto;font-size:var(--calcite-font-size-sm)}.esri-legend--card__section:first-child{border-left:none}.esri-legend--card__message{padding:.5em 1em}.esri-legend--card__service-caption-container{border-bottom:1px solid rgba(110,110,110,.3);padding:12px 15px;height:45px;font-weight:var(--calcite-font-weight-semibold)}.esri-legend--card__service-caption-text{margin:0;padding-bottom:20px;overflow:auto}.esri-legend--card__layer-caption{margin-bottom:12px;padding:6px 0;font-weight:var(--calcite-font-weight-normal)}.esri-legend--card__service-content{display:flex;height:calc(100% - 45px)}.esri-legend--card__label-container{display:flex;flex-wrap:wrap}.esri-legend--card__relationship-label-container{display:flex;flex-direction:column}.esri-legend--card__relationship-label-container .esri-legend--card__layer-row{padding-bottom:.5em}.esri-legend--card__relationship-label-container .esri-legend--card__layer-row:last-child{padding-bottom:0}.esri-legend--card__relationship-section{border:none}.esri-legend--card__label-element{margin:.1em;padding:.5em 1em;min-width:4em;min-height:2.7em;text-align:center}.esri-legend--card__image-label{padding-right:7px;padding-left:7px}.esri-legend--card__layer-row,.esri-legend--card__size-ramp-container{display:flex;align-items:center}.esri-legend--card__size-ramp-preview{display:flex}.esri-legend--card__ramp-label{margin:0 .5em;white-space:nowrap}.esri-legend--card__pie-chart-ramp-preview{display:flex;justify-content:center}.esri-legend--card__interval-separator{text-align:center;font-size:.5em}.esri-legend--card__imagery-layer-image--stretched{display:block;margin-bottom:-2px}.esri-legend--card__symbol-container{position:relative}.esri-legend--card__interval-separators-container{position:absolute;top:50px;left:50%;transform:translate(-50%,-50%)}.esri-legend--card__carousel-title{margin:0}.esri-legend--card__service{border-left:1px solid rgba(110,110,110,.3);min-width:fit-content}.esri-legend--card__symbol{display:block;margin:auto}.esri-legend--stacked{display:flex;flex-direction:column;min-width:300px}.esri-legend--stacked .esri-legend--card__carousel{width:300px;max-height:420px}.esri-legend--stacked .esri-legend--card__carousel-item{max-height:388px}.esri-legend--stacked calcite-carousel-item[selected]{flex:1}.esri-legend--stacked .esri-legend--card__section{box-sizing:border-box;border:none;width:100%;min-width:unset;height:auto;overflow:auto}.esri-legend--stacked .esri-legend--card__size-ramp-row{flex-direction:column}.esri-legend--stacked .esri-legend--card__symbol-row{display:table-row;margin:5px 0;width:100%}.esri-legend--stacked .esri-legend--card__label-cell{display:table-cell;vertical-align:middle}.esri-legend--stacked .esri-legend--card__symbol-cell{display:table-cell;vertical-align:middle;text-align:center}.esri-legend--stacked .esri-legend--card__carousel-indicator-container{display:flex;justify-content:center;box-shadow:0 -1px #6e6e6e4d;width:300px;height:32px;overflow:auto}.esri-legend--stacked .esri-legend--card__carousel-indicator{display:flex;align-items:center;justify-content:center;cursor:pointer;width:16px;height:auto}.esri-legend--stacked .esri-legend--card__carousel-indicator:before{display:block;transition:background-color 125ms ease-in-out;border-radius:50%;box-shadow:0 0 0 1px #6e6e6e;background-color:transparent;width:10px;height:10px;content:""}.esri-legend--stacked .esri-legend--card__carousel-indicator:hover:before,.esri-legend--stacked .esri-legend--card__carousel-indicator--activated:before,.esri-legend--stacked .esri-legend--card__carousel-indicator--activated:hover:before{background-color:var(--calcite-color-text-3)}.esri-ui-corner{max-width:100%}.esri-ui-corner .esri-legend--card{max-height:420px}:dir(rtl) .esri-view-width-greater-than-small .esri-legend--card__section{border-right:1px solid rgba(110,110,110,.3);border-left:0}:dir(rtl) .esri-view-width-greater-than-small .esri-legend--card__section:first-child{border-right:none}.esri-relationship-ramp--diamond__container{display:flex;font-size:var(--calcite-font-size-sm)}.esri-relationship-ramp--diamond__left-column{align-self:center;padding-right:5px;max-width:85px;text-align:right}.esri-relationship-ramp--diamond__right-column{align-self:center;padding-left:5px;max-width:85px;text-align:left}.esri-relationship-ramp--diamond__middle-column{display:flex;flex-direction:column;text-align:center}.esri-relationship-ramp--diamond__middle-column--label{align-self:center;max-width:85px}.esri-relationship-ramp--diamond__middle-column--ramp{width:85px;height:85px}.esri-relationship-ramp--square__table{display:table;font-size:var(--calcite-font-size-sm)}.esri-relationship-ramp--square__table-row{display:table-row}.esri-relationship-ramp--square__table-cell{display:table-cell}.esri-relationship-ramp--square__table-label{max-width:95px}.esri-relationship-ramp--square__table-label--left-bottom{vertical-align:bottom;text-align:left}.esri-relationship-ramp--square__table-label--right-bottom{vertical-align:bottom;text-align:right}.esri-relationship-ramp--square__table-label--left-top{vertical-align:top;text-align:left}.esri-relationship-ramp--square__table-label--right-top{vertical-align:top;text-align:right}.esri-univariate-above-and-below-ramp__symbol{display:flex;align-items:center;justify-content:center}.esri-univariate-above-and-below-ramp__label{position:relative;margin-left:7px;line-height:1em;white-space:nowrap;font-size:var(--calcite-font-size-sm)}.esri-univariate-above-and-below-ramp__label:before{display:block;position:absolute;top:.45em;left:-19px;border-width:1px 0 0;border-style:solid;width:14px;height:0;content:""}.esri-univariate-above-and-below-ramp__label:first-child{top:-6px}.esri-univariate-above-and-below-ramp__label:last-child{bottom:-6px}.esri-univariate-above-and-below-ramp__color--card{position:relative}.esri-univariate-above-and-below-ramp__color--card:before{display:block;position:absolute;top:1px;border-right:1px solid #000;border-left:1px solid #000;width:100%;height:15px;content:""}:dir(rtl) .esri-univariate-above-and-below-ramp__label{margin-right:7px;margin-left:auto}:dir(rtl) .esri-univariate-above-and-below-ramp__label:before{right:-19px;left:auto}.esri-spike-ramp__container{display:flex;flex-direction:row;gap:var(--calcite-spacing-sm-plus);margin-left:var(--calcite-spacing-sm)}.esri-spike-ramp__preview-container{display:flex;position:relative;gap:var(--calcite-spacing-sm-plus);border-bottom:var(--calcite-border-width-sm) solid var(--calcite-color-border-2);padding:0 var(--calcite-spacing-xl)}.esri-spike-ramp__preview{display:flex;gap:var(--calcite-spacing-sm-plus);align-items:end}.esri-spike-ramp__symbol-preview{display:flex}.esri-spike-ramp__lines{display:flex;position:absolute;bottom:0}.esri-spike-ramp__labels-container{display:flex;position:relative;top:-5px;flex:1;min-width:120px}.esri-spike-ramp__label{position:relative;padding:0 7px;line-height:1em;word-break:break-all;font-size:var(--calcite-font-size-sm)}.esri-spike-ramp__label:before{display:block;position:absolute;top:.25em;right:100%;border-width:3px 4px 3px 0;border-style:solid;border-color:transparent rgba(50,50,50,.8) transparent transparent;width:0;height:0;content:""}.esri-item-list{width:100%}.esri-item-list__filter-container--sticky{z-index:1;position:sticky;top:0}.esri-item-list__group{margin-top:var(--calcite-spacing-md)}.esri-item-list__scroller{overflow-y:auto}.esri-ui .esri-item-list__scroller{z-index:0;position:relative}.esri-ui .esri-item-list__scroller--enabled{max-height:420px}.esri-item-list__group__header{color:var(--calcite-color-text-2);font-weight:var(--calcite-font-weight-medium)}.esri-item-list__list-item{cursor:pointer;min-height:var(--calcite-spacing-xxxl)}.esri-item-list__list-item[class^=esri-icon-],.esri-item-list__list-item[class*=" esri-icon-"]{padding-inline-end:2.8px}.esri-item-list__list-item--disabled{cursor:default}.esri-item-list__list-item-icon{justify-content:center;align-items:center;min-width:var(--calcite-spacing-xxxl);height:var(--calcite-spacing-xxxl);display:flex}.esri-item-list__list-item-icon span{line-height:0}.esri-thumbnail-preview{background-position:50%;width:22px;height:22px}.esri-item-list__no-matches-message{justify-content:center;align-items:center;height:96px;display:flex}.esri-layer-list{display:flex;width:100%}.esri-layer-list__filter-no-results{padding:var(--calcite-spacing-md) 15px}.esri-layer-list__item{--calcite-list-item-icon-center: 8.5px}.esri-layer-list__item-table-icon,.esri-layer-list__item-catalog-icon{margin-inline-end:0}.esri-layer-list__item-action-image{text-align:center;background-position:50%;background-repeat:no-repeat;background-size:contain;flex:0 0 var(--calcite-spacing-xl);width:var(--calcite-spacing-xl);height:var(--calcite-spacing-xl);font-size:var(--calcite-font-size)}.esri-layer-list__action-menu .esri-layer-list__action-group{display:none}.esri-layer-list__action-menu[open] .esri-layer-list__action-group{display:flex}.esri-layer-list__visible-icon{visibility:hidden}.esri-layer-list__item--active:hover>.esri-layer-list__visible-toggle>.esri-layer-list__visible-icon,.esri-layer-list__item--active:focus>.esri-layer-list__visible-toggle>.esri-layer-list__visible-icon,.esri-layer-list__item--active:focus-within>.esri-layer-list__visible-toggle>.esri-layer-list__visible-icon{visibility:visible}.esri-layer-list__status-indicator{visibility:hidden;color:var(--calcite-color-text-1);margin-inline:0}.esri-layer-list__publishing{visibility:visible;color:var(--calcite-color-text-2);transform-origin:var(--calcite-list-item-icon-center) var(--calcite-list-item-icon-center);animation:2s infinite esri-layer-list__publishing-anim}.esri-layer-list__updating{visibility:visible;animation:2s infinite esri-layer-list__updating-anim}.esri-layer-list__connection-status{visibility:visible;color:var(--calcite-color-status-warning);width:var(--calcite-spacing-xl);height:var(--calcite-spacing-xl);margin-inline:7px}.esri-layer-list__connection-status--connected{color:var(--calcite-color-status-success)}.esri-layer-list__item-content-bottom{margin:var(--calcite-spacing-md) 15px}.esri-layer-list__item-content-bottom .esri-legend__service{padding:0 0 var(--calcite-spacing-md)}.esri-layer-list__item-message{margin:var(--calcite-spacing-md) 15px}@keyframes esri-layer-list__updating-anim{0%,40%{color:var(--calcite-color-foreground-1)}50%,80%{color:var(--calcite-color-brand)}to{color:var(--calcite-color-foreground-1)}}@keyframes esri-layer-list__publishing-anim{0%,20%{transform:rotate(45deg)}80%,to{transform:rotate(135deg)}}`;const lmt=b_((t,e)=>(e.onLoaded(()=>{const i=t.el;t.listenOn(i.childElem,"calciteFlowItemClose",()=>{t.arcgisClose.emit(),t.autoDestroyDisabled||t.destroy()})}),Re()));const cmt=nmt(rmt);var Aw;let umt=(Aw=class extends Et{constructor(){super(...arguments),this.widget=cmt(this),this.viewModel=this.widget.viewModel,this.arcgisClose=lmt(this),this.view=this.widget.view,this.autoDestroyDisabled=!1,this.catalogOptions=this.widget.catalogOptions,this.closed=!1,this.collapsed=this.widget.collapsed,this.dragEnabled=this.widget.dragEnabled,this.filterPlaceholder=this.widget.filterPlaceholder,this.filterPredicate=this.widget.filterPredicate,this.filterText=this.widget.filterText,this.headingLevel=this.widget.headingLevel,this.hideCatalogLayerList=this.widget.visibleElements.catalogLayerList,this.hideFlow=this.widget.visibleElements.flow,this.hideStatusIndicators=this.widget.visibleElements.statusIndicators,this.icon=this.widget.icon,this.knowledgeGraphOptions=this.widget.knowledgeGraphOptions,this.label=this.widget.label,this.listItemCreatedFunction=this.widget.listItemCreatedFunction,this.minDragEnabledItems=this.widget.minDragEnabledItems,this.minFilterItems=this.widget.minFilterItems,this.openedLayers=this.widget.openedLayers,this.selectedItems=this.widget.selectedItems,this.selectionMode=this.widget.selectionMode,this.showCloseButton=this.widget.visibleElements.closeButton,this.showCollapseButton=this.widget.visibleElements.collapseButton,this.showErrors=this.widget.visibleElements.errors,this.showFilter=this.widget.visibleElements.filter,this.showHeading=this.widget.visibleElements.heading,this.showTemporaryLayerIndicators=this.widget.visibleElements.temporaryLayerIndicators,this.state=this.viewModel.state,this.visibilityAppearance=this.widget.visibilityAppearance,this.arcgisPropertyChange=w_()("state"),this.arcgisReady=Re(),this.arcgisTriggerAction=Or(()=>this.widget,"trigger-action")}get catalogLayerList(){return this.widget.catalogLayerList}get operationalItems(){return this.widget.operationalItems}get tableList(){return this.widget.tableList}async destroy(){await this.manager.destroy()}async triggerAction(e,i){this.widget?.triggerAction(e,i)}},Aw.properties={view:0,autoDestroyDisabled:5,catalogLayerList:32,catalogOptions:0,closed:5,collapsed:7,dragEnabled:5,filterPlaceholder:1,filterPredicate:0,filterText:1,headingLevel:9,hideCatalogLayerList:5,hideFlow:5,hideStatusIndicators:5,icon:1,knowledgeGraphOptions:0,label:1,listItemCreatedFunction:0,minDragEnabledItems:9,minFilterItems:9,openedLayers:0,operationalItems:32,position:1,referenceElement:1,selectedItems:0,selectionMode:1,showCloseButton:5,showCollapseButton:5,showErrors:5,showFilter:5,showHeading:5,showTemporaryLayerIndicators:5,state:3,tableList:32,visibilityAppearance:1},Aw.styles=omt,Aw);nn("arcgis-layer-list",umt);function dmt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var KE={exports:{}},hmt=KE.exports,due;function pmt(){return due||(due=1,(function(t,e){(function(i,r){t.exports=r()})(hmt,function(){function i(k,T){var A=Object.keys(k);if(Object.getOwnPropertySymbols){var L=Object.getOwnPropertySymbols(k);T&&(L=L.filter(function(F){return Object.getOwnPropertyDescriptor(k,F).enumerable})),A.push.apply(A,L)}return A}function r(k){for(var T=1;T<arguments.length;T++){var A=arguments[T]!=null?arguments[T]:{};T%2?i(Object(A),!0).forEach(function(L){l(k,L,A[L])}):Object.getOwnPropertyDescriptors?Object.defineProperties(k,Object.getOwnPropertyDescriptors(A)):i(Object(A)).forEach(function(L){Object.defineProperty(k,L,Object.getOwnPropertyDescriptor(A,L))})}return k}function n(k){return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(T){return typeof T}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T},n(k)}function s(k,T){if(!(k instanceof T))throw new TypeError("Cannot call a class as a function")}function a(k,T){for(var A=0;A<T.length;A++){var L=T[A];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(k,_(L.key),L)}}function o(k,T,A){return T&&a(k.prototype,T),Object.defineProperty(k,"prototype",{writable:!1}),k}function l(k,T,A){return(T=_(T))in k?Object.defineProperty(k,T,{value:A,enumerable:!0,configurable:!0,writable:!0}):k[T]=A,k}function c(k,T){if(typeof T!="function"&&T!==null)throw new TypeError("Super expression must either be null or a function");k.prototype=Object.create(T&&T.prototype,{constructor:{value:k,writable:!0,configurable:!0}}),Object.defineProperty(k,"prototype",{writable:!1}),T&&f(k,T)}function h(k){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(T){return T.__proto__||Object.getPrototypeOf(T)},h(k)}function f(k,T){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(A,L){return A.__proto__=L,A},f(k,T)}function g(k){if(k===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k}function y(k){var T=(function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}})();return function(){var A,L=h(k);if(T){var F=h(this).constructor;A=Reflect.construct(L,arguments,F)}else A=L.apply(this,arguments);return(function(B,W){if(W&&(typeof W=="object"||typeof W=="function"))return W;if(W!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return g(B)})(this,A)}}function b(){return b=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(k,T,A){var L=(function(B,W){for(;!Object.prototype.hasOwnProperty.call(B,W)&&(B=h(B))!==null;);return B})(k,T);if(L){var F=Object.getOwnPropertyDescriptor(L,T);return F.get?F.get.call(arguments.length<3?k:A):F.value}},b.apply(this,arguments)}function _(k){var T=(function(A,L){if(typeof A!="object"||A===null)return A;var F=A[Symbol.toPrimitive];if(F!==void 0){var B=F.call(A,L);if(typeof B!="object")return B;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(A)})(k,"string");return typeof T=="symbol"?T:T+""}var S=function(k){return!(!k||!k.Window)&&k instanceof k.Window},$=void 0,C=void 0;function I(k){$=k;var T=k.document.createTextNode("");T.ownerDocument!==k.document&&typeof k.wrap=="function"&&k.wrap(T)===T&&(k=k.wrap(k)),C=k}function P(k){return S(k)?k:(k.ownerDocument||k).defaultView||C.window}typeof window<"u"&&window&&I(window);var O=function(k){return!!k&&n(k)==="object"},N=function(k){return typeof k=="function"},R={window:function(k){return k===C||S(k)},docFrag:function(k){return O(k)&&k.nodeType===11},object:O,func:N,number:function(k){return typeof k=="number"},bool:function(k){return typeof k=="boolean"},string:function(k){return typeof k=="string"},element:function(k){if(!k||n(k)!=="object")return!1;var T=P(k)||C;return/object|function/.test(typeof Element>"u"?"undefined":n(Element))?k instanceof Element||k instanceof T.Element:k.nodeType===1&&typeof k.nodeName=="string"},plainObject:function(k){return O(k)&&!!k.constructor&&/function Object\b/.test(k.constructor.toString())},array:function(k){return O(k)&&k.length!==void 0&&N(k.splice)}};function G(k){var T=k.interaction;if(T.prepared.name==="drag"){var A=T.prepared.axis;A==="x"?(T.coords.cur.page.y=T.coords.start.page.y,T.coords.cur.client.y=T.coords.start.client.y,T.coords.velocity.client.y=0,T.coords.velocity.page.y=0):A==="y"&&(T.coords.cur.page.x=T.coords.start.page.x,T.coords.cur.client.x=T.coords.start.client.x,T.coords.velocity.client.x=0,T.coords.velocity.page.x=0)}}function Y(k){var T=k.iEvent,A=k.interaction;if(A.prepared.name==="drag"){var L=A.prepared.axis;if(L==="x"||L==="y"){var F=L==="x"?"y":"x";T.page[F]=A.coords.start.page[F],T.client[F]=A.coords.start.client[F],T.delta[F]=0}}}var Q={id:"actions/drag",install:function(k){var T=k.actions,A=k.Interactable,L=k.defaults;A.prototype.draggable=Q.draggable,T.map.drag=Q,T.methodDict.drag="draggable",L.actions.drag=Q.defaults},listeners:{"interactions:before-action-move":G,"interactions:action-resume":G,"interactions:action-move":Y,"auto-start:check":function(k){var T=k.interaction,A=k.interactable,L=k.buttons,F=A.options.drag;if(F&&F.enabled&&(!T.pointerIsDown||!/mouse|pointer/.test(T.pointerType)||(L&A.options.drag.mouseButtons)!=0))return k.action={name:"drag",axis:F.lockAxis==="start"?F.startAxis:F.lockAxis},!1}},draggable:function(k){return R.object(k)?(this.options.drag.enabled=k.enabled!==!1,this.setPerAction("drag",k),this.setOnEvents("drag",k),/^(xy|x|y|start)$/.test(k.lockAxis)&&(this.options.drag.lockAxis=k.lockAxis),/^(xy|x|y)$/.test(k.startAxis)&&(this.options.drag.startAxis=k.startAxis),this):R.bool(k)?(this.options.drag.enabled=k,this):this.options.drag},beforeMove:G,move:Y,defaults:{startAxis:"xy",lockAxis:"xy"},getCursor:function(){return"move"},filterEventType:function(k){return k.search("drag")===0}},ae=Q,ce={init:function(k){var T=k;ce.document=T.document,ce.DocumentFragment=T.DocumentFragment||ne,ce.SVGElement=T.SVGElement||ne,ce.SVGSVGElement=T.SVGSVGElement||ne,ce.SVGElementInstance=T.SVGElementInstance||ne,ce.Element=T.Element||ne,ce.HTMLElement=T.HTMLElement||ce.Element,ce.Event=T.Event,ce.Touch=T.Touch||ne,ce.PointerEvent=T.PointerEvent||T.MSPointerEvent},document:null,DocumentFragment:null,SVGElement:null,SVGSVGElement:null,SVGElementInstance:null,Element:null,HTMLElement:null,Event:null,Touch:null,PointerEvent:null};function ne(){}var K=ce,le={init:function(k){var T=K.Element,A=k.navigator||{};le.supportsTouch="ontouchstart"in k||R.func(k.DocumentTouch)&&K.document instanceof k.DocumentTouch,le.supportsPointerEvent=A.pointerEnabled!==!1&&!!K.PointerEvent,le.isIOS=/iP(hone|od|ad)/.test(A.platform),le.isIOS7=/iP(hone|od|ad)/.test(A.platform)&&/OS 7[^\d]/.test(A.appVersion),le.isIe9=/MSIE 9/.test(A.userAgent),le.isOperaMobile=A.appName==="Opera"&&le.supportsTouch&&/Presto/.test(A.userAgent),le.prefixedMatchesSelector="matches"in T.prototype?"matches":"webkitMatchesSelector"in T.prototype?"webkitMatchesSelector":"mozMatchesSelector"in T.prototype?"mozMatchesSelector":"oMatchesSelector"in T.prototype?"oMatchesSelector":"msMatchesSelector",le.pEventTypes=le.supportsPointerEvent?K.PointerEvent===k.MSPointerEvent?{up:"MSPointerUp",down:"MSPointerDown",over:"mouseover",out:"mouseout",move:"MSPointerMove",cancel:"MSPointerCancel"}:{up:"pointerup",down:"pointerdown",over:"pointerover",out:"pointerout",move:"pointermove",cancel:"pointercancel"}:null,le.wheelEvent=K.document&&"onmousewheel"in K.document?"mousewheel":"wheel"},supportsTouch:null,supportsPointerEvent:null,isIOS7:null,isIOS:null,isIe9:null,isOperaMobile:null,prefixedMatchesSelector:null,pEventTypes:null,wheelEvent:null},re=le;function he(k,T){if(k.contains)return k.contains(T);for(;T;){if(T===k)return!0;T=T.parentNode}return!1}function xe(k,T){for(;R.element(k);){if(He(k,T))return k;k=Pe(k)}return null}function Pe(k){var T=k.parentNode;if(R.docFrag(T)){for(;(T=T.host)&&R.docFrag(T););return T}return T}function He(k,T){return C!==$&&(T=T.replace(/\/deep\//g," ")),k[re.prefixedMatchesSelector](T)}var oe=function(k){return k.parentNode||k.host};function be(k,T){for(var A,L=[],F=k;(A=oe(F))&&F!==T&&A!==F.ownerDocument;)L.unshift(F),F=A;return L}function Le(k,T,A){for(;R.element(k);){if(He(k,T))return!0;if((k=Pe(k))===A)return He(k,T)}return!1}function Je(k){return k.correspondingUseElement||k}function st(k){var T=k instanceof K.SVGElement?k.getBoundingClientRect():k.getClientRects()[0];return T&&{left:T.left,right:T.right,top:T.top,bottom:T.bottom,width:T.width||T.right-T.left,height:T.height||T.bottom-T.top}}function ut(k){var T,A=st(k);if(!re.isIOS7&&A){var L={x:(T=(T=P(k))||C).scrollX||T.document.documentElement.scrollLeft,y:T.scrollY||T.document.documentElement.scrollTop};A.left+=L.x,A.right+=L.x,A.top+=L.y,A.bottom+=L.y}return A}function Pt(k){for(var T=[];k;)T.push(k),k=Pe(k);return T}function pi(k){return!!R.string(k)&&(K.document.querySelector(k),!0)}function it(k,T){for(var A in T)k[A]=T[A];return k}function Wn(k,T,A){return k==="parent"?Pe(A):k==="self"?T.getRect(A):xe(A,k)}function fn(k,T,A,L){var F=k;return R.string(F)?F=Wn(F,T,A):R.func(F)&&(F=F.apply(void 0,L)),R.element(F)&&(F=ut(F)),F}function El(k){return k&&{x:"x"in k?k.x:k.left,y:"y"in k?k.y:k.top}}function Ud(k){return!k||"x"in k&&"y"in k||((k=it({},k)).x=k.left||0,k.y=k.top||0,k.width=k.width||(k.right||0)-k.x,k.height=k.height||(k.bottom||0)-k.y),k}function ra(k,T,A){k.left&&(T.left+=A.x),k.right&&(T.right+=A.x),k.top&&(T.top+=A.y),k.bottom&&(T.bottom+=A.y),T.width=T.right-T.left,T.height=T.bottom-T.top}function Cl(k,T,A){var L=A&&k.options[A];return El(fn(L&&L.origin||k.options.origin,k,T,[k&&T]))||{x:0,y:0}}function Il(k,T){var A=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(te){return!0},L=arguments.length>3?arguments[3]:void 0;if(L=L||{},R.string(k)&&k.search(" ")!==-1&&(k=A_(k)),R.array(k))return k.forEach(function(te){return Il(te,T,A,L)}),L;if(R.object(k)&&(T=k,k=""),R.func(T)&&A(k))L[k]=L[k]||[],L[k].push(T);else if(R.array(T))for(var F=0,B=T;F<B.length;F++){var W=B[F];Il(k,W,A,L)}else if(R.object(T))for(var X in T)Il(A_(X).map(function(te){return"".concat(k).concat(te)}),T[X],A,L);return L}function A_(k){return k.trim().split(/ +/)}var Hd=function(k,T){return Math.sqrt(k*k+T*T)},dg=["webkit","moz"];function Eu(k,T){k.__set||(k.__set={});var A=function(F){if(dg.some(function(B){return F.indexOf(B)===0}))return 1;typeof k[F]!="function"&&F!=="__set"&&Object.defineProperty(k,F,{get:function(){return F in k.__set?k.__set[F]:k.__set[F]=T[F]},set:function(B){k.__set[F]=B},configurable:!0})};for(var L in T)A(L);return k}function na(k,T){k.page=k.page||{},k.page.x=T.page.x,k.page.y=T.page.y,k.client=k.client||{},k.client.x=T.client.x,k.client.y=T.client.y,k.timeStamp=T.timeStamp}function P_(k){k.page.x=0,k.page.y=0,k.client.x=0,k.client.y=0}function O_(k){return k instanceof K.Event||k instanceof K.Touch}function ls(k,T,A){return k=k||"page",(A=A||{}).x=T[k+"X"],A.y=T[k+"Y"],A}function L_(k,T){return T=T||{x:0,y:0},re.isOperaMobile&&O_(k)?(ls("screen",k,T),T.x+=window.scrollX,T.y+=window.scrollY):ls("page",k,T),T}function Gd(k){return R.number(k.pointerId)?k.pointerId:k.identifier}function D_(k,T,A){var L=T.length>1?rk(T):T[0];L_(L,k.page),(function(F,B){B=B||{},re.isOperaMobile&&O_(F)?ls("screen",F,B):ls("client",F,B)})(L,k.client),k.timeStamp=A}function qd(k){var T=[];return R.array(k)?(T[0]=k[0],T[1]=k[1]):k.type==="touchend"?k.touches.length===1?(T[0]=k.touches[0],T[1]=k.changedTouches[0]):k.touches.length===0&&(T[0]=k.changedTouches[0],T[1]=k.changedTouches[1]):(T[0]=k.touches[0],T[1]=k.touches[1]),T}function rk(k){for(var T={pageX:0,pageY:0,clientX:0,clientY:0,screenX:0,screenY:0},A=0;A<k.length;A++){var L=k[A];for(var F in T)T[F]+=L[F]}for(var B in T)T[B]/=k.length;return T}function hg(k){if(!k.length)return null;var T=qd(k),A=Math.min(T[0].pageX,T[1].pageX),L=Math.min(T[0].pageY,T[1].pageY),F=Math.max(T[0].pageX,T[1].pageX),B=Math.max(T[0].pageY,T[1].pageY);return{x:A,y:L,left:A,top:L,right:F,bottom:B,width:F-A,height:B-L}}function Gv(k,T){var A=T+"X",L=T+"Y",F=qd(k),B=F[0][A]-F[1][A],W=F[0][L]-F[1][L];return Hd(B,W)}function qv(k,T){var A=T+"X",L=T+"Y",F=qd(k),B=F[1][A]-F[0][A],W=F[1][L]-F[0][L];return 180*Math.atan2(W,B)/Math.PI}function Wd(k){return R.string(k.pointerType)?k.pointerType:R.number(k.pointerType)?[void 0,void 0,"touch","pen","mouse"][k.pointerType]:/touch/.test(k.type||"")||k instanceof K.Touch?"touch":"mouse"}function Rs(k){var T=R.func(k.composedPath)?k.composedPath():k.path;return[Je(T?T[0]:k.target),Je(k.currentTarget)]}var vo=(function(){function k(T){s(this,k),this.immediatePropagationStopped=!1,this.propagationStopped=!1,this._interaction=T}return o(k,[{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}]),k})();Object.defineProperty(vo.prototype,"interaction",{get:function(){return this._interaction._proxy},set:function(){}});var zs=function(k,T){for(var A=0;A<T.length;A++){var L=T[A];k.push(L)}return k},R_=function(k){return zs([],k)},Zp=function(k,T){for(var A=0;A<k.length;A++)if(T(k[A],A,k))return A;return-1},Xp=function(k,T){return k[Zp(k,T)]},Ml=(function(k){c(A,k);var T=y(A);function A(L,F,B){var W;s(this,A),(W=T.call(this,F._interaction)).dropzone=void 0,W.dragEvent=void 0,W.relatedTarget=void 0,W.draggable=void 0,W.propagationStopped=!1,W.immediatePropagationStopped=!1;var X=B==="dragleave"?L.prev:L.cur,te=X.element,pe=X.dropzone;return W.type=B,W.target=te,W.currentTarget=te,W.dropzone=pe,W.dragEvent=F,W.relatedTarget=F.target,W.draggable=F.interactable,W.timeStamp=F.timeStamp,W}return o(A,[{key:"reject",value:function(){var L=this,F=this._interaction.dropState;if(this.type==="dropactivate"||this.dropzone&&F.cur.dropzone===this.dropzone&&F.cur.element===this.target)if(F.prev.dropzone=this.dropzone,F.prev.element=this.target,F.rejected=!0,F.events.enter=null,this.stopImmediatePropagation(),this.type==="dropactivate"){var B=F.activeDrops,W=Zp(B,function(te){var pe=te.dropzone,ie=te.element;return pe===L.dropzone&&ie===L.target});F.activeDrops.splice(W,1);var X=new A(F,this.dragEvent,"dropdeactivate");X.dropzone=this.dropzone,X.target=this.target,this.dropzone.fire(X)}else this.dropzone.fire(new A(F,this.dragEvent,"dragleave"))}},{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}]),A})(vo);function Jp(k,T){for(var A=0,L=k.slice();A<L.length;A++){var F=L[A],B=F.dropzone,W=F.element;T.dropzone=B,T.target=W,B.fire(T),T.propagationStopped=T.immediatePropagationStopped=!1}}function Yd(k,T){for(var A=(function(B,W){for(var X=[],te=0,pe=B.interactables.list;te<pe.length;te++){var ie=pe[te];if(ie.options.drop.enabled){var we=ie.options.drop.accept;if(!(R.element(we)&&we!==W||R.string(we)&&!He(W,we)||R.func(we)&&!we({dropzone:ie,draggableElement:W})))for(var Ae=0,et=ie.getAllElements();Ae<et.length;Ae++){var Ze=et[Ae];Ze!==W&&X.push({dropzone:ie,element:Ze,rect:ie.getRect(Ze)})}}}return X})(k,T),L=0;L<A.length;L++){var F=A[L];F.rect=F.dropzone.getRect(F.element)}return A}function Cc(k,T,A){for(var L=k.dropState,F=k.interactable,B=k.element,W=[],X=0,te=L.activeDrops;X<te.length;X++){var pe=te[X],ie=pe.dropzone,we=pe.element,Ae=pe.rect,et=ie.dropCheck(T,A,F,B,we,Ae);W.push(et?we:null)}var Ze=(function(rt){for(var yt,ft,Ct,si=[],fi=0;fi<rt.length;fi++){var qt=rt[fi],ci=rt[yt];if(qt&&fi!==yt)if(ci){var gn=oe(qt),Qi=oe(ci);if(gn!==qt.ownerDocument)if(Qi!==qt.ownerDocument)if(gn!==Qi){si=si.length?si:be(ci);var aa=void 0;if(ci instanceof K.HTMLElement&&qt instanceof K.SVGElement&&!(qt instanceof K.SVGSVGElement)){if(qt===Qi)continue;aa=qt.ownerSVGElement}else aa=qt;for(var Uo=be(aa,ci.ownerDocument),oa=0;Uo[oa]&&Uo[oa]===si[oa];)oa++;var ob=[Uo[oa-1],Uo[oa],si[oa]];if(ob[0])for(var xg=ob[0].lastChild;xg;){if(xg===ob[1]){yt=fi,si=Uo;break}if(xg===ob[2])break;xg=xg.previousSibling}}else Ct=ci,(parseInt(P(ft=qt).getComputedStyle(ft).zIndex,10)||0)>=(parseInt(P(Ct).getComputedStyle(Ct).zIndex,10)||0)&&(yt=fi);else yt=fi}else yt=fi}return yt})(W);return L.activeDrops[Ze]||null}function Zd(k,T,A){var L=k.dropState,F={enter:null,leave:null,activate:null,deactivate:null,move:null,drop:null};return A.type==="dragstart"&&(F.activate=new Ml(L,A,"dropactivate"),F.activate.target=null,F.activate.dropzone=null),A.type==="dragend"&&(F.deactivate=new Ml(L,A,"dropdeactivate"),F.deactivate.target=null,F.deactivate.dropzone=null),L.rejected||(L.cur.element!==L.prev.element&&(L.prev.dropzone&&(F.leave=new Ml(L,A,"dragleave"),A.dragLeave=F.leave.target=L.prev.element,A.prevDropzone=F.leave.dropzone=L.prev.dropzone),L.cur.dropzone&&(F.enter=new Ml(L,A,"dragenter"),A.dragEnter=L.cur.element,A.dropzone=L.cur.dropzone)),A.type==="dragend"&&L.cur.dropzone&&(F.drop=new Ml(L,A,"drop"),A.dropzone=L.cur.dropzone,A.relatedTarget=L.cur.element),A.type==="dragmove"&&L.cur.dropzone&&(F.move=new Ml(L,A,"dropmove"),A.dropzone=L.cur.dropzone)),F}function Cu(k,T){var A=k.dropState,L=A.activeDrops,F=A.cur,B=A.prev;T.leave&&B.dropzone.fire(T.leave),T.enter&&F.dropzone.fire(T.enter),T.move&&F.dropzone.fire(T.move),T.drop&&F.dropzone.fire(T.drop),T.deactivate&&Jp(L,T.deactivate),A.prev.dropzone=F.dropzone,A.prev.element=F.element}function z_(k,T){var A=k.interaction,L=k.iEvent,F=k.event;if(L.type==="dragmove"||L.type==="dragend"){var B=A.dropState;T.dynamicDrop&&(B.activeDrops=Yd(T,A.element));var W=L,X=Cc(A,W,F);B.rejected=B.rejected&&!!X&&X.dropzone===B.cur.dropzone&&X.element===B.cur.element,B.cur.dropzone=X&&X.dropzone,B.cur.element=X&&X.element,B.events=Zd(A,0,W)}}var Ie={id:"actions/drop",install:function(k){var T=k.actions,A=k.interactStatic,L=k.Interactable,F=k.defaults;k.usePlugin(ae),L.prototype.dropzone=function(B){return(function(W,X){if(R.object(X)){if(W.options.drop.enabled=X.enabled!==!1,X.listeners){var te=Il(X.listeners),pe=Object.keys(te).reduce(function(we,Ae){return we[/^(enter|leave)/.test(Ae)?"drag".concat(Ae):/^(activate|deactivate|move)/.test(Ae)?"drop".concat(Ae):Ae]=te[Ae],we},{}),ie=W.options.drop.listeners;ie&&W.off(ie),W.on(pe),W.options.drop.listeners=pe}return R.func(X.ondrop)&&W.on("drop",X.ondrop),R.func(X.ondropactivate)&&W.on("dropactivate",X.ondropactivate),R.func(X.ondropdeactivate)&&W.on("dropdeactivate",X.ondropdeactivate),R.func(X.ondragenter)&&W.on("dragenter",X.ondragenter),R.func(X.ondragleave)&&W.on("dragleave",X.ondragleave),R.func(X.ondropmove)&&W.on("dropmove",X.ondropmove),/^(pointer|center)$/.test(X.overlap)?W.options.drop.overlap=X.overlap:R.number(X.overlap)&&(W.options.drop.overlap=Math.max(Math.min(1,X.overlap),0)),"accept"in X&&(W.options.drop.accept=X.accept),"checker"in X&&(W.options.drop.checker=X.checker),W}return R.bool(X)?(W.options.drop.enabled=X,W):W.options.drop})(this,B)},L.prototype.dropCheck=function(B,W,X,te,pe,ie){return(function(we,Ae,et,Ze,rt,yt,ft){var Ct=!1;if(!(ft=ft||we.getRect(yt)))return!!we.options.drop.checker&&we.options.drop.checker(Ae,et,Ct,we,yt,Ze,rt);var si=we.options.drop.overlap;if(si==="pointer"){var fi=Cl(Ze,rt,"drag"),qt=L_(Ae);qt.x+=fi.x,qt.y+=fi.y;var ci=qt.x>ft.left&&qt.x<ft.right,gn=qt.y>ft.top&&qt.y<ft.bottom;Ct=ci&&gn}var Qi=Ze.getRect(rt);if(Qi&&si==="center"){var aa=Qi.left+Qi.width/2,Uo=Qi.top+Qi.height/2;Ct=aa>=ft.left&&aa<=ft.right&&Uo>=ft.top&&Uo<=ft.bottom}return Qi&&R.number(si)&&(Ct=Math.max(0,Math.min(ft.right,Qi.right)-Math.max(ft.left,Qi.left))*Math.max(0,Math.min(ft.bottom,Qi.bottom)-Math.max(ft.top,Qi.top))/(Qi.width*Qi.height)>=si),we.options.drop.checker&&(Ct=we.options.drop.checker(Ae,et,Ct,we,yt,Ze,rt)),Ct})(this,B,W,X,te,pe,ie)},A.dynamicDrop=function(B){return R.bool(B)?(k.dynamicDrop=B,A):k.dynamicDrop},it(T.phaselessTypes,{dragenter:!0,dragleave:!0,dropactivate:!0,dropdeactivate:!0,dropmove:!0,drop:!0}),T.methodDict.drop="dropzone",k.dynamicDrop=!1,F.actions.drop=Ie.defaults},listeners:{"interactions:before-action-start":function(k){var T=k.interaction;T.prepared.name==="drag"&&(T.dropState={cur:{dropzone:null,element:null},prev:{dropzone:null,element:null},rejected:null,events:null,activeDrops:[]})},"interactions:after-action-start":function(k,T){var A=k.interaction,L=(k.event,k.iEvent);if(A.prepared.name==="drag"){var F=A.dropState;F.activeDrops=[],F.events={},F.activeDrops=Yd(T,A.element),F.events=Zd(A,0,L),F.events.activate&&(Jp(F.activeDrops,F.events.activate),T.fire("actions/drop:start",{interaction:A,dragEvent:L}))}},"interactions:action-move":z_,"interactions:after-action-move":function(k,T){var A=k.interaction,L=k.iEvent;if(A.prepared.name==="drag"){var F=A.dropState;Cu(A,F.events),T.fire("actions/drop:move",{interaction:A,dragEvent:L}),F.events={}}},"interactions:action-end":function(k,T){if(k.interaction.prepared.name==="drag"){var A=k.interaction,L=k.iEvent;z_(k,T),Cu(A,A.dropState.events),T.fire("actions/drop:end",{interaction:A,dragEvent:L})}},"interactions:stop":function(k){var T=k.interaction;if(T.prepared.name==="drag"){var A=T.dropState;A&&(A.activeDrops=null,A.events=null,A.cur.dropzone=null,A.cur.element=null,A.prev.dropzone=null,A.prev.element=null,A.rejected=!1)}}},getActiveDrops:Yd,getDrop:Cc,getDropEvents:Zd,fireDropEvents:Cu,filterEventType:function(k){return k.search("drag")===0||k.search("drop")===0},defaults:{enabled:!1,accept:null,overlap:"pointer"}},ar=Ie;function Da(k){var T=k.interaction,A=k.iEvent,L=k.phase;if(T.prepared.name==="gesture"){var F=T.pointers.map(function(pe){return pe.pointer}),B=L==="start",W=L==="end",X=T.interactable.options.deltaSource;if(A.touches=[F[0],F[1]],B)A.distance=Gv(F,X),A.box=hg(F),A.scale=1,A.ds=0,A.angle=qv(F,X),A.da=0,T.gesture.startDistance=A.distance,T.gesture.startAngle=A.angle;else if(W||T.pointers.length<2){var te=T.prevEvent;A.distance=te.distance,A.box=te.box,A.scale=te.scale,A.ds=0,A.angle=te.angle,A.da=0}else A.distance=Gv(F,X),A.box=hg(F),A.scale=A.distance/T.gesture.startDistance,A.angle=qv(F,X),A.ds=A.scale-T.gesture.scale,A.da=A.angle-T.gesture.angle;T.gesture.distance=A.distance,T.gesture.angle=A.angle,R.number(A.scale)&&A.scale!==1/0&&!isNaN(A.scale)&&(T.gesture.scale=A.scale)}}var Iu={id:"actions/gesture",before:["actions/drag","actions/resize"],install:function(k){var T=k.actions,A=k.Interactable,L=k.defaults;A.prototype.gesturable=function(F){return R.object(F)?(this.options.gesture.enabled=F.enabled!==!1,this.setPerAction("gesture",F),this.setOnEvents("gesture",F),this):R.bool(F)?(this.options.gesture.enabled=F,this):this.options.gesture},T.map.gesture=Iu,T.methodDict.gesture="gesturable",L.actions.gesture=Iu.defaults},listeners:{"interactions:action-start":Da,"interactions:action-move":Da,"interactions:action-end":Da,"interactions:new":function(k){k.interaction.gesture={angle:0,distance:0,scale:1,startAngle:0,startDistance:0}},"auto-start:check":function(k){if(!(k.interaction.pointers.length<2)){var T=k.interactable.options.gesture;if(T&&T.enabled)return k.action={name:"gesture"},!1}}},defaults:{},getCursor:function(){return""},filterEventType:function(k){return k.search("gesture")===0}},Ra=Iu;function Kp(k,T,A,L,F,B,W){if(!T)return!1;if(T===!0){var X=R.number(B.width)?B.width:B.right-B.left,te=R.number(B.height)?B.height:B.bottom-B.top;if(W=Math.min(W,Math.abs((k==="left"||k==="right"?X:te)/2)),X<0&&(k==="left"?k="right":k==="right"&&(k="left")),te<0&&(k==="top"?k="bottom":k==="bottom"&&(k="top")),k==="left"){var pe=X>=0?B.left:B.right;return A.x<pe+W}if(k==="top"){var ie=te>=0?B.top:B.bottom;return A.y<ie+W}if(k==="right")return A.x>(X>=0?B.right:B.left)-W;if(k==="bottom")return A.y>(te>=0?B.bottom:B.top)-W}return!!R.element(L)&&(R.element(T)?T===L:Le(L,T,F))}function bt(k){var T=k.iEvent,A=k.interaction;if(A.prepared.name==="resize"&&A.resizeAxes){var L=T;A.interactable.options.resize.square?(A.resizeAxes==="y"?L.delta.x=L.delta.y:L.delta.y=L.delta.x,L.axes="xy"):(L.axes=A.resizeAxes,A.resizeAxes==="x"?L.delta.y=0:A.resizeAxes==="y"&&(L.delta.x=0))}}var Fs,Al,Ki={id:"actions/resize",before:["actions/drag"],install:function(k){var T=k.actions,A=k.browser,L=k.Interactable,F=k.defaults;Ki.cursors=(function(B){return B.isIe9?{x:"e-resize",y:"s-resize",xy:"se-resize",top:"n-resize",left:"w-resize",bottom:"s-resize",right:"e-resize",topleft:"se-resize",bottomright:"se-resize",topright:"ne-resize",bottomleft:"ne-resize"}:{x:"ew-resize",y:"ns-resize",xy:"nwse-resize",top:"ns-resize",left:"ew-resize",bottom:"ns-resize",right:"ew-resize",topleft:"nwse-resize",bottomright:"nwse-resize",topright:"nesw-resize",bottomleft:"nesw-resize"}})(A),Ki.defaultMargin=A.supportsTouch||A.supportsPointerEvent?20:10,L.prototype.resizable=function(B){return(function(W,X,te){return R.object(X)?(W.options.resize.enabled=X.enabled!==!1,W.setPerAction("resize",X),W.setOnEvents("resize",X),R.string(X.axis)&&/^x$|^y$|^xy$/.test(X.axis)?W.options.resize.axis=X.axis:X.axis===null&&(W.options.resize.axis=te.defaults.actions.resize.axis),R.bool(X.preserveAspectRatio)?W.options.resize.preserveAspectRatio=X.preserveAspectRatio:R.bool(X.square)&&(W.options.resize.square=X.square),W):R.bool(X)?(W.options.resize.enabled=X,W):W.options.resize})(this,B,k)},T.map.resize=Ki,T.methodDict.resize="resizable",F.actions.resize=Ki.defaults},listeners:{"interactions:new":function(k){k.interaction.resizeAxes="xy"},"interactions:action-start":function(k){(function(T){var A=T.iEvent,L=T.interaction;if(L.prepared.name==="resize"&&L.prepared.edges){var F=A,B=L.rect;L._rects={start:it({},B),corrected:it({},B),previous:it({},B),delta:{left:0,right:0,width:0,top:0,bottom:0,height:0}},F.edges=L.prepared.edges,F.rect=L._rects.corrected,F.deltaRect=L._rects.delta}})(k),bt(k)},"interactions:action-move":function(k){(function(T){var A=T.iEvent,L=T.interaction;if(L.prepared.name==="resize"&&L.prepared.edges){var F=A,B=L.interactable.options.resize.invert,W=B==="reposition"||B==="negate",X=L.rect,te=L._rects,pe=te.start,ie=te.corrected,we=te.delta,Ae=te.previous;if(it(Ae,ie),W){if(it(ie,X),B==="reposition"){if(ie.top>ie.bottom){var et=ie.top;ie.top=ie.bottom,ie.bottom=et}if(ie.left>ie.right){var Ze=ie.left;ie.left=ie.right,ie.right=Ze}}}else ie.top=Math.min(X.top,pe.bottom),ie.bottom=Math.max(X.bottom,pe.top),ie.left=Math.min(X.left,pe.right),ie.right=Math.max(X.right,pe.left);for(var rt in ie.width=ie.right-ie.left,ie.height=ie.bottom-ie.top,ie)we[rt]=ie[rt]-Ae[rt];F.edges=L.prepared.edges,F.rect=ie,F.deltaRect=we}})(k),bt(k)},"interactions:action-end":function(k){var T=k.iEvent,A=k.interaction;if(A.prepared.name==="resize"&&A.prepared.edges){var L=T;L.edges=A.prepared.edges,L.rect=A._rects.corrected,L.deltaRect=A._rects.delta}},"auto-start:check":function(k){var T=k.interaction,A=k.interactable,L=k.element,F=k.rect,B=k.buttons;if(F){var W=it({},T.coords.cur.page),X=A.options.resize;if(X&&X.enabled&&(!T.pointerIsDown||!/mouse|pointer/.test(T.pointerType)||(B&X.mouseButtons)!=0)){if(R.object(X.edges)){var te={left:!1,right:!1,top:!1,bottom:!1};for(var pe in te)te[pe]=Kp(pe,X.edges[pe],W,T._latestPointer.eventTarget,L,F,X.margin||Ki.defaultMargin);te.left=te.left&&!te.right,te.top=te.top&&!te.bottom,(te.left||te.right||te.top||te.bottom)&&(k.action={name:"resize",edges:te})}else{var ie=X.axis!=="y"&&W.x>F.right-Ki.defaultMargin,we=X.axis!=="x"&&W.y>F.bottom-Ki.defaultMargin;(ie||we)&&(k.action={name:"resize",axes:(ie?"x":"")+(we?"y":"")})}return!k.action&&void 0}}}},defaults:{square:!1,preserveAspectRatio:!1,axis:"xy",margin:NaN,edges:null,invert:"none"},cursors:null,getCursor:function(k){var T=k.edges,A=k.axis,L=k.name,F=Ki.cursors,B=null;if(A)B=F[L+A];else if(T){for(var W="",X=0,te=["top","bottom","left","right"];X<te.length;X++){var pe=te[X];T[pe]&&(W+=pe)}B=F[W]}return B},filterEventType:function(k){return k.search("resize")===0},defaultMargin:null},Xd=Ki,Ic={id:"actions",install:function(k){k.usePlugin(Ra),k.usePlugin(Xd),k.usePlugin(ae),k.usePlugin(ar)}},hr=0,zr={request:function(k){return Fs(k)},cancel:function(k){return Al(k)},init:function(k){if(Fs=k.requestAnimationFrame,Al=k.cancelAnimationFrame,!Fs)for(var T=["ms","moz","webkit","o"],A=0;A<T.length;A++){var L=T[A];Fs=k["".concat(L,"RequestAnimationFrame")],Al=k["".concat(L,"CancelAnimationFrame")]||k["".concat(L,"CancelRequestAnimationFrame")]}Fs=Fs&&Fs.bind(k),Al=Al&&Al.bind(k),Fs||(Fs=function(F){var B=Date.now(),W=Math.max(0,16-(B-hr)),X=k.setTimeout(function(){F(B+W)},W);return hr=B+W,X},Al=function(F){return clearTimeout(F)})}},Ft={defaults:{enabled:!1,margin:60,container:null,speed:300},now:Date.now,interaction:null,i:0,x:0,y:0,isScrolling:!1,prevTime:0,margin:0,speed:0,start:function(k){Ft.isScrolling=!0,zr.cancel(Ft.i),k.autoScroll=Ft,Ft.interaction=k,Ft.prevTime=Ft.now(),Ft.i=zr.request(Ft.scroll)},stop:function(){Ft.isScrolling=!1,Ft.interaction&&(Ft.interaction.autoScroll=null),zr.cancel(Ft.i)},scroll:function(){var k=Ft.interaction,T=k.interactable,A=k.element,L=k.prepared.name,F=T.options[L].autoScroll,B=Zt(F.container,T,A),W=Ft.now(),X=(W-Ft.prevTime)/1e3,te=F.speed*X;if(te>=1){var pe={x:Ft.x*te,y:Ft.y*te};if(pe.x||pe.y){var ie=F_(B);R.window(B)?B.scrollBy(pe.x,pe.y):B&&(B.scrollLeft+=pe.x,B.scrollTop+=pe.y);var we=F_(B),Ae={x:we.x-ie.x,y:we.y-ie.y};(Ae.x||Ae.y)&&T.fire({type:"autoscroll",target:A,interactable:T,delta:Ae,interaction:k,container:B})}Ft.prevTime=W}Ft.isScrolling&&(zr.cancel(Ft.i),Ft.i=zr.request(Ft.scroll))},check:function(k,T){var A;return(A=k.options[T].autoScroll)==null?void 0:A.enabled},onInteractionMove:function(k){var T=k.interaction,A=k.pointer;if(T.interacting()&&Ft.check(T.interactable,T.prepared.name))if(T.simulation)Ft.x=Ft.y=0;else{var L,F,B,W,X=T.interactable,te=T.element,pe=T.prepared.name,ie=X.options[pe].autoScroll,we=Zt(ie.container,X,te);if(R.window(we))W=A.clientX<Ft.margin,L=A.clientY<Ft.margin,F=A.clientX>we.innerWidth-Ft.margin,B=A.clientY>we.innerHeight-Ft.margin;else{var Ae=st(we);W=A.clientX<Ae.left+Ft.margin,L=A.clientY<Ae.top+Ft.margin,F=A.clientX>Ae.right-Ft.margin,B=A.clientY>Ae.bottom-Ft.margin}Ft.x=F?1:W?-1:0,Ft.y=B?1:L?-1:0,Ft.isScrolling||(Ft.margin=ie.margin,Ft.speed=ie.speed,Ft.start(T))}}};function Zt(k,T,A){return(R.string(k)?Wn(k,T,A):k)||P(A)}function F_(k){return R.window(k)&&(k=window.document.body),{x:k.scrollLeft,y:k.scrollTop}}var N_={id:"auto-scroll",install:function(k){var T=k.defaults,A=k.actions;k.autoScroll=Ft,Ft.now=function(){return k.now()},A.phaselessTypes.autoscroll=!0,T.perAction.autoScroll=Ft.defaults},listeners:{"interactions:new":function(k){k.interaction.autoScroll=null},"interactions:destroy":function(k){k.interaction.autoScroll=null,Ft.stop(),Ft.interaction&&(Ft.interaction=null)},"interactions:stop":Ft.stop,"interactions:action-move":function(k){return Ft.onInteractionMove(k)}}},j_=N_;function Pl(k,T){var A=!1;return function(){return A||(C.console.warn(T),A=!0),k.apply(this,arguments)}}function Mu(k,T){return k.name=T.name,k.axis=T.axis,k.edges=T.edges,k}function Jd(k){return R.bool(k)?(this.options.styleCursor=k,this):k===null?(delete this.options.styleCursor,this):this.options.styleCursor}function Mc(k){return R.func(k)?(this.options.actionChecker=k,this):k===null?(delete this.options.actionChecker,this):this.options.actionChecker}var Fr={id:"auto-start/interactableMethods",install:function(k){var T=k.Interactable;T.prototype.getAction=function(A,L,F,B){var W=(function(X,te,pe,ie,we){var Ae=X.getRect(ie),et=te.buttons||{0:1,1:4,3:8,4:16}[te.button],Ze={action:null,interactable:X,interaction:pe,element:ie,rect:Ae,buttons:et};return we.fire("auto-start:check",Ze),Ze.action})(this,L,F,B,k);return this.options.actionChecker?this.options.actionChecker(A,L,W,this,B,F):W},T.prototype.ignoreFrom=Pl(function(A){return this._backCompatOption("ignoreFrom",A)},"Interactable.ignoreFrom() has been deprecated. Use Interactble.draggable({ignoreFrom: newValue})."),T.prototype.allowFrom=Pl(function(A){return this._backCompatOption("allowFrom",A)},"Interactable.allowFrom() has been deprecated. Use Interactble.draggable({allowFrom: newValue})."),T.prototype.actionChecker=Mc,T.prototype.styleCursor=Jd}};function Au(k,T,A,L,F){return T.testIgnoreAllow(T.options[k.name],A,L)&&T.options[k.name].enabled&&Bo(T,A,k,F)?k:null}function mn(k,T,A,L,F,B,W){for(var X=0,te=L.length;X<te;X++){var pe=L[X],ie=F[X],we=pe.getAction(T,A,k,ie);if(we){var Ae=Au(we,pe,ie,B,W);if(Ae)return{action:Ae,interactable:pe,element:ie}}}return{action:null,interactable:null,element:null}}function Wv(k,T,A,L,F){var B=[],W=[],X=L;function te(ie){B.push(ie),W.push(X)}for(;R.element(X);){B=[],W=[],F.interactables.forEachMatch(X,te);var pe=mn(k,T,A,B,W,L,F);if(pe.action&&!pe.interactable.options[pe.action.name].manualStart)return pe;X=Pe(X)}return{action:null,interactable:null,element:null}}function Yv(k,T,A){var L=T.action,F=T.interactable,B=T.element;L=L||{name:null},k.interactable=F,k.element=B,Mu(k.prepared,L),k.rect=F&&L.name?F.getRect(B):null,Ns(k,A),A.fire("autoStart:prepared",{interaction:k})}function Bo(k,T,A,L){var F=k.options,B=F[A.name].max,W=F[A.name].maxPerElement,X=L.autoStart.maxInteractions,te=0,pe=0,ie=0;if(!(B&&W&&X))return!1;for(var we=0,Ae=L.interactions.list;we<Ae.length;we++){var et=Ae[we],Ze=et.prepared.name;if(et.interacting()&&(++te>=X||et.interactable===k&&((pe+=Ze===A.name?1:0)>=B||et.element===T&&(ie++,Ze===A.name&&ie>=W))))return!1}return X>0}function Pu(k,T){return R.number(k)?(T.autoStart.maxInteractions=k,this):T.autoStart.maxInteractions}function Zv(k,T,A){var L=A.autoStart.cursorElement;L&&L!==k&&(L.style.cursor=""),k.ownerDocument.documentElement.style.cursor=T,k.style.cursor=T,A.autoStart.cursorElement=T?k:null}function Ns(k,T){var A=k.interactable,L=k.element,F=k.prepared;if(k.pointerType==="mouse"&&A&&A.options.styleCursor){var B="";if(F.name){var W=A.options[F.name].cursorChecker;B=R.func(W)?W(F,A,L,k._interacting):T.actions.map[F.name].getCursor(F)}Zv(k.element,B||"",T)}else T.autoStart.cursorElement&&Zv(T.autoStart.cursorElement,"",T)}var V_={id:"auto-start/base",before:["actions"],install:function(k){var T=k.interactStatic,A=k.defaults;k.usePlugin(Fr),A.base.actionChecker=null,A.base.styleCursor=!0,it(A.perAction,{manualStart:!1,max:1/0,maxPerElement:1,allowFrom:null,ignoreFrom:null,mouseButtons:1}),T.maxInteractions=function(L){return Pu(L,k)},k.autoStart={maxInteractions:1/0,withinInteractionLimit:Bo,cursorElement:null}},listeners:{"interactions:down":function(k,T){var A=k.interaction,L=k.pointer,F=k.event,B=k.eventTarget;A.interacting()||Yv(A,Wv(A,L,F,B,T),T)},"interactions:move":function(k,T){(function(A,L){var F=A.interaction,B=A.pointer,W=A.event,X=A.eventTarget;F.pointerType!=="mouse"||F.pointerIsDown||F.interacting()||Yv(F,Wv(F,B,W,X,L),L)})(k,T),(function(A,L){var F=A.interaction;if(F.pointerIsDown&&!F.interacting()&&F.pointerWasMoved&&F.prepared.name){L.fire("autoStart:before-start",A);var B=F.interactable,W=F.prepared.name;W&&B&&(B.options[W].manualStart||!Bo(B,F.element,F.prepared,L)?F.stop():(F.start(F.prepared,B,F.element),Ns(F,L)))}})(k,T)},"interactions:stop":function(k,T){var A=k.interaction,L=A.interactable;L&&L.options.styleCursor&&Zv(A.element,"",T)}},maxInteractions:Pu,withinInteractionLimit:Bo,validateAction:Au},Xv=V_,Kd={id:"auto-start/dragAxis",listeners:{"autoStart:before-start":function(k,T){var A=k.interaction,L=k.eventTarget,F=k.dx,B=k.dy;if(A.prepared.name==="drag"){var W=Math.abs(F),X=Math.abs(B),te=A.interactable.options.drag,pe=te.startAxis,ie=W>X?"x":W<X?"y":"xy";if(A.prepared.axis=te.lockAxis==="start"?ie[0]:te.lockAxis,ie!=="xy"&&pe!=="xy"&&pe!==ie){A.prepared.name=null;for(var we=L,Ae=function(Ze){if(Ze!==A.interactable){var rt=A.interactable.options.drag;if(!rt.manualStart&&Ze.testIgnoreAllow(rt,we,L)){var yt=Ze.getAction(A.downPointer,A.downEvent,A,we);if(yt&&yt.name==="drag"&&(function(ft,Ct){if(!Ct)return!1;var si=Ct.options.drag.startAxis;return ft==="xy"||si==="xy"||si===ft})(ie,Ze)&&Xv.validateAction(yt,Ze,we,L,T))return Ze}}};R.element(we);){var et=T.interactables.forEachMatch(we,Ae);if(et){A.prepared.name="drag",A.interactable=et,A.element=we;break}we=Pe(we)}}}}}};function Ou(k){var T=k.prepared&&k.prepared.name;if(!T)return null;var A=k.interactable.options;return A[T].hold||A[T].delay}var se={id:"auto-start/hold",install:function(k){var T=k.defaults;k.usePlugin(Xv),T.perAction.hold=0,T.perAction.delay=0},listeners:{"interactions:new":function(k){k.interaction.autoStartHoldTimer=null},"autoStart:prepared":function(k){var T=k.interaction,A=Ou(T);A>0&&(T.autoStartHoldTimer=setTimeout(function(){T.start(T.prepared,T.interactable,T.element)},A))},"interactions:move":function(k){var T=k.interaction,A=k.duplicate;T.autoStartHoldTimer&&T.pointerWasMoved&&!A&&(clearTimeout(T.autoStartHoldTimer),T.autoStartHoldTimer=null)},"autoStart:before-start":function(k){var T=k.interaction;Ou(T)>0&&(T.prepared.name=null)}},getHoldDuration:Ou},Te=se,Qe={id:"auto-start",install:function(k){k.usePlugin(Xv),k.usePlugin(Te),k.usePlugin(Kd)}},jt=function(k){return/^(always|never|auto)$/.test(k)?(this.options.preventDefault=k,this):R.bool(k)?(this.options.preventDefault=k?"always":"never",this):this.options.preventDefault};function Mi(k){var T=k.interaction,A=k.event;T.interactable&&T.interactable.checkAndPreventDefault(A)}var xr={id:"core/interactablePreventDefault",install:function(k){var T=k.Interactable;T.prototype.preventDefault=jt,T.prototype.checkAndPreventDefault=function(A){return(function(L,F,B){var W=L.options.preventDefault;if(W!=="never")if(W!=="always"){if(F.events.supportsPassive&&/^touch(start|move)$/.test(B.type)){var X=P(B.target).document,te=F.getDocOptions(X);if(!te||!te.events||te.events.passive!==!1)return}/^(mouse|pointer|touch)*(down|start)/i.test(B.type)||R.element(B.target)&&He(B.target,"input,select,textarea,[contenteditable=true],[contenteditable=true] *")||B.preventDefault()}else B.preventDefault()})(this,k,A)},k.interactions.docEvents.push({type:"dragstart",listener:function(A){for(var L=0,F=k.interactions.list;L<F.length;L++){var B=F[L];if(B.element&&(B.element===A.target||he(B.element,A.target)))return void B.interactable.checkAndPreventDefault(A)}}})},listeners:["down","move","up","cancel"].reduce(function(k,T){return k["interactions:".concat(T)]=Mi,k},{})};function pr(k,T){if(T.phaselessTypes[k])return!0;for(var A in T.map)if(k.indexOf(A)===0&&k.substr(A.length)in T.phases)return!0;return!1}function qr(k){var T={};for(var A in k){var L=k[A];R.plainObject(L)?T[A]=qr(L):R.array(L)?T[A]=R_(L):T[A]=L}return T}var za=(function(){function k(T){s(this,k),this.states=[],this.startOffset={left:0,right:0,top:0,bottom:0},this.startDelta=void 0,this.result=void 0,this.endResult=void 0,this.startEdges=void 0,this.edges=void 0,this.interaction=void 0,this.interaction=T,this.result=pg(),this.edges={left:!1,right:!1,top:!1,bottom:!1}}return o(k,[{key:"start",value:function(T,A){var L,F,B=T.phase,W=this.interaction,X=(function(pe){var ie=pe.interactable.options[pe.prepared.name],we=ie.modifiers;return we&&we.length?we:["snap","snapSize","snapEdges","restrict","restrictEdges","restrictSize"].map(function(Ae){var et=ie[Ae];return et&&et.enabled&&{options:et,methods:et._methods}}).filter(function(Ae){return!!Ae})})(W);this.prepareStates(X),this.startEdges=it({},W.edges),this.edges=it({},this.startEdges),this.startOffset=(L=W.rect,F=A,L?{left:F.x-L.left,top:F.y-L.top,right:L.right-F.x,bottom:L.bottom-F.y}:{left:0,top:0,right:0,bottom:0}),this.startDelta={x:0,y:0};var te=this.fillArg({phase:B,pageCoords:A,preEnd:!1});return this.result=pg(),this.startAll(te),this.result=this.setAll(te)}},{key:"fillArg",value:function(T){var A=this.interaction;return T.interaction=A,T.interactable=A.interactable,T.element=A.element,T.rect||(T.rect=A.rect),T.edges||(T.edges=this.startEdges),T.startOffset=this.startOffset,T}},{key:"startAll",value:function(T){for(var A=0,L=this.states;A<L.length;A++){var F=L[A];F.methods.start&&(T.state=F,F.methods.start(T))}}},{key:"setAll",value:function(T){var A=T.phase,L=T.preEnd,F=T.skipModifiers,B=T.rect,W=T.edges;T.coords=it({},T.pageCoords),T.rect=it({},B),T.edges=it({},W);for(var X=F?this.states.slice(F):this.states,te=pg(T.coords,T.rect),pe=0;pe<X.length;pe++){var ie,we=X[pe],Ae=we.options,et=it({},T.coords),Ze=null;(ie=we.methods)!=null&&ie.set&&this.shouldDo(Ae,L,A)&&(T.state=we,Ze=we.methods.set(T),ra(T.edges,T.rect,{x:T.coords.x-et.x,y:T.coords.y-et.y})),te.eventProps.push(Ze)}it(this.edges,T.edges),te.delta.x=T.coords.x-T.pageCoords.x,te.delta.y=T.coords.y-T.pageCoords.y,te.rectDelta.left=T.rect.left-B.left,te.rectDelta.right=T.rect.right-B.right,te.rectDelta.top=T.rect.top-B.top,te.rectDelta.bottom=T.rect.bottom-B.bottom;var rt=this.result.coords,yt=this.result.rect;if(rt&&yt){var ft=te.rect.left!==yt.left||te.rect.right!==yt.right||te.rect.top!==yt.top||te.rect.bottom!==yt.bottom;te.changed=ft||rt.x!==te.coords.x||rt.y!==te.coords.y}return te}},{key:"applyToInteraction",value:function(T){var A=this.interaction,L=T.phase,F=A.coords.cur,B=A.coords.start,W=this.result,X=this.startDelta,te=W.delta;L==="start"&&it(this.startDelta,W.delta);for(var pe=0,ie=[[B,X],[F,te]];pe<ie.length;pe++){var we=ie[pe],Ae=we[0],et=we[1];Ae.page.x+=et.x,Ae.page.y+=et.y,Ae.client.x+=et.x,Ae.client.y+=et.y}var Ze=this.result.rectDelta,rt=T.rect||A.rect;rt.left+=Ze.left,rt.right+=Ze.right,rt.top+=Ze.top,rt.bottom+=Ze.bottom,rt.width=rt.right-rt.left,rt.height=rt.bottom-rt.top}},{key:"setAndApply",value:function(T){var A=this.interaction,L=T.phase,F=T.preEnd,B=T.skipModifiers,W=this.setAll(this.fillArg({preEnd:F,phase:L,pageCoords:T.modifiedCoords||A.coords.cur.page}));if(this.result=W,!W.changed&&(!B||B<this.states.length)&&A.interacting())return!1;if(T.modifiedCoords){var X=A.coords.cur.page,te={x:T.modifiedCoords.x-X.x,y:T.modifiedCoords.y-X.y};W.coords.x+=te.x,W.coords.y+=te.y,W.delta.x+=te.x,W.delta.y+=te.y}this.applyToInteraction(T)}},{key:"beforeEnd",value:function(T){var A=T.interaction,L=T.event,F=this.states;if(F&&F.length){for(var B=!1,W=0;W<F.length;W++){var X=F[W];T.state=X;var te=X.options,pe=X.methods,ie=pe.beforeEnd&&pe.beforeEnd(T);if(ie)return this.endResult=ie,!1;B=B||!B&&this.shouldDo(te,!0,T.phase,!0)}B&&A.move({event:L,preEnd:!0})}}},{key:"stop",value:function(T){var A=T.interaction;if(this.states&&this.states.length){var L=it({states:this.states,interactable:A.interactable,element:A.element,rect:null},T);this.fillArg(L);for(var F=0,B=this.states;F<B.length;F++){var W=B[F];L.state=W,W.methods.stop&&W.methods.stop(L)}this.states=null,this.endResult=null}}},{key:"prepareStates",value:function(T){this.states=[];for(var A=0;A<T.length;A++){var L=T[A],F=L.options,B=L.methods,W=L.name;this.states.push({options:F,methods:B,index:A,name:W})}return this.states}},{key:"restoreInteractionCoords",value:function(T){var A=T.interaction,L=A.coords,F=A.rect,B=A.modification;if(B.result){for(var W=B.startDelta,X=B.result,te=X.delta,pe=X.rectDelta,ie=0,we=[[L.start,W],[L.cur,te]];ie<we.length;ie++){var Ae=we[ie],et=Ae[0],Ze=Ae[1];et.page.x-=Ze.x,et.page.y-=Ze.y,et.client.x-=Ze.x,et.client.y-=Ze.y}F.left-=pe.left,F.right-=pe.right,F.top-=pe.top,F.bottom-=pe.bottom}}},{key:"shouldDo",value:function(T,A,L,F){return!(!T||T.enabled===!1||F&&!T.endOnly||T.endOnly&&!A||L==="start"&&!T.setStart)}},{key:"copyFrom",value:function(T){this.startOffset=T.startOffset,this.startDelta=T.startDelta,this.startEdges=T.startEdges,this.edges=T.edges,this.states=T.states.map(function(A){return qr(A)}),this.result=pg(it({},T.result.coords),it({},T.result.rect))}},{key:"destroy",value:function(){for(var T in this)this[T]=null}}]),k})();function pg(k,T){return{rect:T,coords:k,delta:{x:0,y:0},rectDelta:{left:0,right:0,top:0,bottom:0},eventProps:[],changed:!0}}function Lu(k,T){var A=k.defaults,L={start:k.start,set:k.set,beforeEnd:k.beforeEnd,stop:k.stop},F=function(B){var W=B||{};for(var X in W.enabled=W.enabled!==!1,A)X in W||(W[X]=A[X]);var te={options:W,methods:L,name:T,enable:function(){return W.enabled=!0,te},disable:function(){return W.enabled=!1,te}};return te};return T&&typeof T=="string"&&(F._defaults=A,F._methods=L),F}function Qp(k){var T=k.iEvent,A=k.interaction.modification.result;A&&(T.modifiers=A.eventProps)}var fg={id:"modifiers/base",before:["actions"],install:function(k){k.defaults.perAction.modifiers=[]},listeners:{"interactions:new":function(k){var T=k.interaction;T.modification=new za(T)},"interactions:before-action-start":function(k){var T=k.interaction,A=k.interaction.modification;A.start(k,T.coords.start.page),T.edges=A.edges,A.applyToInteraction(k)},"interactions:before-action-move":function(k){var T=k.interaction,A=T.modification,L=A.setAndApply(k);return T.edges=A.edges,L},"interactions:before-action-end":function(k){var T=k.interaction,A=T.modification,L=A.beforeEnd(k);return T.edges=A.startEdges,L},"interactions:action-start":Qp,"interactions:action-move":Qp,"interactions:action-end":Qp,"interactions:after-action-start":function(k){return k.interaction.modification.restoreInteractionCoords(k)},"interactions:after-action-move":function(k){return k.interaction.modification.restoreInteractionCoords(k)},"interactions:stop":function(k){return k.interaction.modification.stop(k)}}},nk=fg,sk={base:{preventDefault:"auto",deltaSource:"page"},perAction:{enabled:!1,origin:{x:0,y:0}},actions:{}},Qd=(function(k){c(A,k);var T=y(A);function A(L,F,B,W,X,te,pe){var ie;s(this,A),(ie=T.call(this,L)).relatedTarget=null,ie.screenX=void 0,ie.screenY=void 0,ie.button=void 0,ie.buttons=void 0,ie.ctrlKey=void 0,ie.shiftKey=void 0,ie.altKey=void 0,ie.metaKey=void 0,ie.page=void 0,ie.client=void 0,ie.delta=void 0,ie.rect=void 0,ie.x0=void 0,ie.y0=void 0,ie.t0=void 0,ie.dt=void 0,ie.duration=void 0,ie.clientX0=void 0,ie.clientY0=void 0,ie.velocity=void 0,ie.speed=void 0,ie.swipe=void 0,ie.axes=void 0,ie.preEnd=void 0,X=X||L.element;var we=L.interactable,Ae=(we&&we.options||sk).deltaSource,et=Cl(we,X,B),Ze=W==="start",rt=W==="end",yt=Ze?g(ie):L.prevEvent,ft=Ze?L.coords.start:rt?{page:yt.page,client:yt.client,timeStamp:L.coords.cur.timeStamp}:L.coords.cur;return ie.page=it({},ft.page),ie.client=it({},ft.client),ie.rect=it({},L.rect),ie.timeStamp=ft.timeStamp,rt||(ie.page.x-=et.x,ie.page.y-=et.y,ie.client.x-=et.x,ie.client.y-=et.y),ie.ctrlKey=F.ctrlKey,ie.altKey=F.altKey,ie.shiftKey=F.shiftKey,ie.metaKey=F.metaKey,ie.button=F.button,ie.buttons=F.buttons,ie.target=X,ie.currentTarget=X,ie.preEnd=te,ie.type=pe||B+(W||""),ie.interactable=we,ie.t0=Ze?L.pointers[L.pointers.length-1].downTime:yt.t0,ie.x0=L.coords.start.page.x-et.x,ie.y0=L.coords.start.page.y-et.y,ie.clientX0=L.coords.start.client.x-et.x,ie.clientY0=L.coords.start.client.y-et.y,ie.delta=Ze||rt?{x:0,y:0}:{x:ie[Ae].x-yt[Ae].x,y:ie[Ae].y-yt[Ae].y},ie.dt=L.coords.delta.timeStamp,ie.duration=ie.timeStamp-ie.t0,ie.velocity=it({},L.coords.velocity[Ae]),ie.speed=Hd(ie.velocity.x,ie.velocity.y),ie.swipe=rt||W==="inertiastart"?ie.getSwipe():null,ie}return o(A,[{key:"getSwipe",value:function(){var L=this._interaction;if(L.prevEvent.speed<600||this.timeStamp-L.prevEvent.timeStamp>150)return null;var F=180*Math.atan2(L.prevEvent.velocityY,L.prevEvent.velocityX)/Math.PI;F<0&&(F+=360);var B=112.5<=F&&F<247.5,W=202.5<=F&&F<337.5;return{up:W,down:!W&&22.5<=F&&F<157.5,left:B,right:!B&&(292.5<=F||F<67.5),angle:F,speed:L.prevEvent.speed,velocity:{x:L.prevEvent.velocityX,y:L.prevEvent.velocityY}}}},{key:"preventDefault",value:function(){}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}}]),A})(vo);Object.defineProperties(Qd.prototype,{pageX:{get:function(){return this.page.x},set:function(k){this.page.x=k}},pageY:{get:function(){return this.page.y},set:function(k){this.page.y=k}},clientX:{get:function(){return this.client.x},set:function(k){this.client.x=k}},clientY:{get:function(){return this.client.y},set:function(k){this.client.y=k}},dx:{get:function(){return this.delta.x},set:function(k){this.delta.x=k}},dy:{get:function(){return this.delta.y},set:function(k){this.delta.y=k}},velocityX:{get:function(){return this.velocity.x},set:function(k){this.velocity.x=k}},velocityY:{get:function(){return this.velocity.y},set:function(k){this.velocity.y=k}}});var kj=o(function k(T,A,L,F,B){s(this,k),this.id=void 0,this.pointer=void 0,this.event=void 0,this.downTime=void 0,this.downTarget=void 0,this.id=T,this.pointer=A,this.event=L,this.downTime=F,this.downTarget=B}),EA=(function(k){return k.interactable="",k.element="",k.prepared="",k.pointerIsDown="",k.pointerWasMoved="",k._proxy="",k})({}),ak=(function(k){return k.start="",k.move="",k.end="",k.stop="",k.interacting="",k})({}),ok=0,Ej=(function(){function k(T){var A=this,L=T.pointerType,F=T.scopeFire;s(this,k),this.interactable=null,this.element=null,this.rect=null,this._rects=void 0,this.edges=null,this._scopeFire=void 0,this.prepared={name:null,axis:null,edges:null},this.pointerType=void 0,this.pointers=[],this.downEvent=null,this.downPointer={},this._latestPointer={pointer:null,event:null,eventTarget:null},this.prevEvent=null,this.pointerIsDown=!1,this.pointerWasMoved=!1,this._interacting=!1,this._ending=!1,this._stopped=!0,this._proxy=void 0,this.simulation=null,this.doMove=Pl(function(ie){this.move(ie)},"The interaction.doMove() method has been renamed to interaction.move()"),this.coords={start:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},prev:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},cur:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},delta:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},velocity:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0}},this._id=ok++,this._scopeFire=F,this.pointerType=L;var B=this;this._proxy={};var W=function(ie){Object.defineProperty(A._proxy,ie,{get:function(){return B[ie]}})};for(var X in EA)W(X);var te=function(ie){Object.defineProperty(A._proxy,ie,{value:function(){return B[ie].apply(B,arguments)}})};for(var pe in ak)te(pe);this._scopeFire("interactions:new",{interaction:this})}return o(k,[{key:"pointerMoveTolerance",get:function(){return 1}},{key:"pointerDown",value:function(T,A,L){var F=this.updatePointer(T,A,L,!0),B=this.pointers[F];this._scopeFire("interactions:down",{pointer:T,event:A,eventTarget:L,pointerIndex:F,pointerInfo:B,type:"down",interaction:this})}},{key:"start",value:function(T,A,L){return!(this.interacting()||!this.pointerIsDown||this.pointers.length<(T.name==="gesture"?2:1)||!A.options[T.name].enabled)&&(Mu(this.prepared,T),this.interactable=A,this.element=L,this.rect=A.getRect(L),this.edges=this.prepared.edges?it({},this.prepared.edges):{left:!0,right:!0,top:!0,bottom:!0},this._stopped=!1,this._interacting=this._doPhase({interaction:this,event:this.downEvent,phase:"start"})&&!this._stopped,this._interacting)}},{key:"pointerMove",value:function(T,A,L){this.simulation||this.modification&&this.modification.endResult||this.updatePointer(T,A,L,!1);var F,B,W=this.coords.cur.page.x===this.coords.prev.page.x&&this.coords.cur.page.y===this.coords.prev.page.y&&this.coords.cur.client.x===this.coords.prev.client.x&&this.coords.cur.client.y===this.coords.prev.client.y;this.pointerIsDown&&!this.pointerWasMoved&&(F=this.coords.cur.client.x-this.coords.start.client.x,B=this.coords.cur.client.y-this.coords.start.client.y,this.pointerWasMoved=Hd(F,B)>this.pointerMoveTolerance);var X,te,pe,ie=this.getPointerIndex(T),we={pointer:T,pointerIndex:ie,pointerInfo:this.pointers[ie],event:A,type:"move",eventTarget:L,dx:F,dy:B,duplicate:W,interaction:this};W||(X=this.coords.velocity,te=this.coords.delta,pe=Math.max(te.timeStamp/1e3,.001),X.page.x=te.page.x/pe,X.page.y=te.page.y/pe,X.client.x=te.client.x/pe,X.client.y=te.client.y/pe,X.timeStamp=pe),this._scopeFire("interactions:move",we),W||this.simulation||(this.interacting()&&(we.type=null,this.move(we)),this.pointerWasMoved&&na(this.coords.prev,this.coords.cur))}},{key:"move",value:function(T){T&&T.event||P_(this.coords.delta),(T=it({pointer:this._latestPointer.pointer,event:this._latestPointer.event,eventTarget:this._latestPointer.eventTarget,interaction:this},T||{})).phase="move",this._doPhase(T)}},{key:"pointerUp",value:function(T,A,L,F){var B=this.getPointerIndex(T);B===-1&&(B=this.updatePointer(T,A,L,!1));var W=/cancel$/i.test(A.type)?"cancel":"up";this._scopeFire("interactions:".concat(W),{pointer:T,pointerIndex:B,pointerInfo:this.pointers[B],event:A,eventTarget:L,type:W,curEventTarget:F,interaction:this}),this.simulation||this.end(A),this.removePointer(T,A)}},{key:"documentBlur",value:function(T){this.end(T),this._scopeFire("interactions:blur",{event:T,type:"blur",interaction:this})}},{key:"end",value:function(T){var A;this._ending=!0,T=T||this._latestPointer.event,this.interacting()&&(A=this._doPhase({event:T,interaction:this,phase:"end"})),this._ending=!1,A===!0&&this.stop()}},{key:"currentAction",value:function(){return this._interacting?this.prepared.name:null}},{key:"interacting",value:function(){return this._interacting}},{key:"stop",value:function(){this._scopeFire("interactions:stop",{interaction:this}),this.interactable=this.element=null,this._interacting=!1,this._stopped=!0,this.prepared.name=this.prevEvent=null}},{key:"getPointerIndex",value:function(T){var A=Gd(T);return this.pointerType==="mouse"||this.pointerType==="pen"?this.pointers.length-1:Zp(this.pointers,function(L){return L.id===A})}},{key:"getPointerInfo",value:function(T){return this.pointers[this.getPointerIndex(T)]}},{key:"updatePointer",value:function(T,A,L,F){var B,W,X,te=Gd(T),pe=this.getPointerIndex(T),ie=this.pointers[pe];return F=F!==!1&&(F||/(down|start)$/i.test(A.type)),ie?ie.pointer=T:(ie=new kj(te,T,A,null,null),pe=this.pointers.length,this.pointers.push(ie)),D_(this.coords.cur,this.pointers.map(function(we){return we.pointer}),this._now()),B=this.coords.delta,W=this.coords.prev,X=this.coords.cur,B.page.x=X.page.x-W.page.x,B.page.y=X.page.y-W.page.y,B.client.x=X.client.x-W.client.x,B.client.y=X.client.y-W.client.y,B.timeStamp=X.timeStamp-W.timeStamp,F&&(this.pointerIsDown=!0,ie.downTime=this.coords.cur.timeStamp,ie.downTarget=L,Eu(this.downPointer,T),this.interacting()||(na(this.coords.start,this.coords.cur),na(this.coords.prev,this.coords.cur),this.downEvent=A,this.pointerWasMoved=!1)),this._updateLatestPointer(T,A,L),this._scopeFire("interactions:update-pointer",{pointer:T,event:A,eventTarget:L,down:F,pointerInfo:ie,pointerIndex:pe,interaction:this}),pe}},{key:"removePointer",value:function(T,A){var L=this.getPointerIndex(T);if(L!==-1){var F=this.pointers[L];this._scopeFire("interactions:remove-pointer",{pointer:T,event:A,eventTarget:null,pointerIndex:L,pointerInfo:F,interaction:this}),this.pointers.splice(L,1),this.pointerIsDown=!1}}},{key:"_updateLatestPointer",value:function(T,A,L){this._latestPointer.pointer=T,this._latestPointer.event=A,this._latestPointer.eventTarget=L}},{key:"destroy",value:function(){this._latestPointer.pointer=null,this._latestPointer.event=null,this._latestPointer.eventTarget=null}},{key:"_createPreparedEvent",value:function(T,A,L,F){return new Qd(this,T,this.prepared.name,A,this.element,L,F)}},{key:"_fireEvent",value:function(T){var A;(A=this.interactable)==null||A.fire(T),(!this.prevEvent||T.timeStamp>=this.prevEvent.timeStamp)&&(this.prevEvent=T)}},{key:"_doPhase",value:function(T){var A=T.event,L=T.phase,F=T.preEnd,B=T.type,W=this.rect;if(W&&L==="move"&&(ra(this.edges,W,this.coords.delta[this.interactable.options.deltaSource]),W.width=W.right-W.left,W.height=W.bottom-W.top),this._scopeFire("interactions:before-action-".concat(L),T)===!1)return!1;var X=T.iEvent=this._createPreparedEvent(A,L,F,B);return this._scopeFire("interactions:action-".concat(L),T),L==="start"&&(this.prevEvent=X),this._fireEvent(X),this._scopeFire("interactions:after-action-".concat(L),T),!0}},{key:"_now",value:function(){return Date.now()}}]),k})();function CA(k){Jv(k.interaction)}function Jv(k){if(!(function(A){return!(!A.offset.pending.x&&!A.offset.pending.y)})(k))return!1;var T=k.offset.pending;return Kv(k.coords.cur,T),Kv(k.coords.delta,T),ra(k.edges,k.rect,T),T.x=0,T.y=0,!0}function Du(k){var T=k.x,A=k.y;this.offset.pending.x+=T,this.offset.pending.y+=A,this.offset.total.x+=T,this.offset.total.y+=A}function Kv(k,T){var A=k.page,L=k.client,F=T.x,B=T.y;A.x+=F,A.y+=B,L.x+=F,L.y+=B}ak.offsetBy="";var lk={id:"offset",before:["modifiers","pointer-events","actions","inertia"],install:function(k){k.Interaction.prototype.offsetBy=Du},listeners:{"interactions:new":function(k){k.interaction.offset={total:{x:0,y:0},pending:{x:0,y:0}}},"interactions:update-pointer":function(k){return(function(T){T.pointerIsDown&&(Kv(T.coords.cur,T.offset.total),T.offset.pending.x=0,T.offset.pending.y=0)})(k.interaction)},"interactions:before-action-start":CA,"interactions:before-action-move":CA,"interactions:before-action-end":function(k){var T=k.interaction;if(Jv(T))return T.move({offset:!0}),T.end(),!1},"interactions:stop":function(k){var T=k.interaction;T.offset.total.x=0,T.offset.total.y=0,T.offset.pending.x=0,T.offset.pending.y=0}}},ef=lk,mg=(function(){function k(T){s(this,k),this.active=!1,this.isModified=!1,this.smoothEnd=!1,this.allowResume=!1,this.modification=void 0,this.modifierCount=0,this.modifierArg=void 0,this.startCoords=void 0,this.t0=0,this.v0=0,this.te=0,this.targetOffset=void 0,this.modifiedOffset=void 0,this.currentOffset=void 0,this.lambda_v0=0,this.one_ve_v0=0,this.timeout=void 0,this.interaction=void 0,this.interaction=T}return o(k,[{key:"start",value:function(T){var A=this.interaction,L=Qv(A);if(!L||!L.enabled)return!1;var F=A.coords.velocity.client,B=Hd(F.x,F.y),W=this.modification||(this.modification=new za(A));if(W.copyFrom(A.modification),this.t0=A._now(),this.allowResume=L.allowResume,this.v0=B,this.currentOffset={x:0,y:0},this.startCoords=A.coords.cur.page,this.modifierArg=W.fillArg({pageCoords:this.startCoords,preEnd:!0,phase:"inertiastart"}),this.t0-A.coords.cur.timeStamp<50&&B>L.minSpeed&&B>L.endSpeed)this.startInertia();else{if(W.result=W.setAll(this.modifierArg),!W.result.changed)return!1;this.startSmoothEnd()}return A.modification.result.rect=null,A.offsetBy(this.targetOffset),A._doPhase({interaction:A,event:T,phase:"inertiastart"}),A.offsetBy({x:-this.targetOffset.x,y:-this.targetOffset.y}),A.modification.result.rect=null,this.active=!0,A.simulation=this,!0}},{key:"startInertia",value:function(){var T=this,A=this.interaction.coords.velocity.client,L=Qv(this.interaction),F=L.resistance,B=-Math.log(L.endSpeed/this.v0)/F;this.targetOffset={x:(A.x-B)/F,y:(A.y-B)/F},this.te=B,this.lambda_v0=F/this.v0,this.one_ve_v0=1-L.endSpeed/this.v0;var W=this.modification,X=this.modifierArg;X.pageCoords={x:this.startCoords.x+this.targetOffset.x,y:this.startCoords.y+this.targetOffset.y},W.result=W.setAll(X),W.result.changed&&(this.isModified=!0,this.modifiedOffset={x:this.targetOffset.x+W.result.delta.x,y:this.targetOffset.y+W.result.delta.y}),this.onNextFrame(function(){return T.inertiaTick()})}},{key:"startSmoothEnd",value:function(){var T=this;this.smoothEnd=!0,this.isModified=!0,this.targetOffset={x:this.modification.result.delta.x,y:this.modification.result.delta.y},this.onNextFrame(function(){return T.smoothEndTick()})}},{key:"onNextFrame",value:function(T){var A=this;this.timeout=zr.request(function(){A.active&&T()})}},{key:"inertiaTick",value:function(){var T,A,L,F,B,W,X,te=this,pe=this.interaction,ie=Qv(pe).resistance,we=(pe._now()-this.t0)/1e3;if(we<this.te){var Ae,et=1-(Math.exp(-ie*we)-this.lambda_v0)/this.one_ve_v0;this.isModified?(T=0,A=0,L=this.targetOffset.x,F=this.targetOffset.y,B=this.modifiedOffset.x,W=this.modifiedOffset.y,Ae={x:uk(X=et,T,L,B),y:uk(X,A,F,W)}):Ae={x:this.targetOffset.x*et,y:this.targetOffset.y*et};var Ze={x:Ae.x-this.currentOffset.x,y:Ae.y-this.currentOffset.y};this.currentOffset.x+=Ze.x,this.currentOffset.y+=Ze.y,pe.offsetBy(Ze),pe.move(),this.onNextFrame(function(){return te.inertiaTick()})}else pe.offsetBy({x:this.modifiedOffset.x-this.currentOffset.x,y:this.modifiedOffset.y-this.currentOffset.y}),this.end()}},{key:"smoothEndTick",value:function(){var T=this,A=this.interaction,L=A._now()-this.t0,F=Qv(A).smoothEndDuration;if(L<F){var B={x:gg(L,0,this.targetOffset.x,F),y:gg(L,0,this.targetOffset.y,F)},W={x:B.x-this.currentOffset.x,y:B.y-this.currentOffset.y};this.currentOffset.x+=W.x,this.currentOffset.y+=W.y,A.offsetBy(W),A.move({skipModifiers:this.modifierCount}),this.onNextFrame(function(){return T.smoothEndTick()})}else A.offsetBy({x:this.targetOffset.x-this.currentOffset.x,y:this.targetOffset.y-this.currentOffset.y}),this.end()}},{key:"resume",value:function(T){var A=T.pointer,L=T.event,F=T.eventTarget,B=this.interaction;B.offsetBy({x:-this.currentOffset.x,y:-this.currentOffset.y}),B.updatePointer(A,L,F,!0),B._doPhase({interaction:B,event:L,phase:"resume"}),na(B.coords.prev,B.coords.cur),this.stop()}},{key:"end",value:function(){this.interaction.move(),this.interaction.end(),this.stop()}},{key:"stop",value:function(){this.active=this.smoothEnd=!1,this.interaction.simulation=null,zr.cancel(this.timeout)}}]),k})();function Qv(k){var T=k.interactable,A=k.prepared;return T&&T.options&&A.name&&T.options[A.name].inertia}var ck={id:"inertia",before:["modifiers","actions"],install:function(k){var T=k.defaults;k.usePlugin(ef),k.usePlugin(nk),k.actions.phases.inertiastart=!0,k.actions.phases.resume=!0,T.perAction.inertia={enabled:!1,resistance:10,minSpeed:100,endSpeed:10,allowResume:!0,smoothEndDuration:300}},listeners:{"interactions:new":function(k){var T=k.interaction;T.inertia=new mg(T)},"interactions:before-action-end":function(k){var T=k.interaction,A=k.event;return(!T._interacting||T.simulation||!T.inertia.start(A))&&null},"interactions:down":function(k){var T=k.interaction,A=k.eventTarget,L=T.inertia;if(L.active)for(var F=A;R.element(F);){if(F===T.element){L.resume(k);break}F=Pe(F)}},"interactions:stop":function(k){var T=k.interaction.inertia;T.active&&T.stop()},"interactions:before-action-resume":function(k){var T=k.interaction.modification;T.stop(k),T.start(k,k.interaction.coords.cur.page),T.applyToInteraction(k)},"interactions:before-action-inertiastart":function(k){return k.interaction.modification.setAndApply(k)},"interactions:action-resume":Qp,"interactions:action-inertiastart":Qp,"interactions:after-action-inertiastart":function(k){return k.interaction.modification.restoreInteractionCoords(k)},"interactions:after-action-resume":function(k){return k.interaction.modification.restoreInteractionCoords(k)}}};function uk(k,T,A,L){var F=1-k;return F*F*T+2*F*k*A+k*k*L}function gg(k,T,A,L){return-A*(k/=L)*(k-2)+T}var Ru=ck;function B_(k,T){for(var A=0;A<T.length;A++){var L=T[A];if(k.immediatePropagationStopped)break;L(k)}}var yg=(function(){function k(T){s(this,k),this.options=void 0,this.types={},this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.global=void 0,this.options=it({},T||{})}return o(k,[{key:"fire",value:function(T){var A,L=this.global;(A=this.types[T.type])&&B_(T,A),!T.propagationStopped&&L&&(A=L[T.type])&&B_(T,A)}},{key:"on",value:function(T,A){var L=Il(T,A);for(T in L)this.types[T]=zs(this.types[T]||[],L[T])}},{key:"off",value:function(T,A){var L=Il(T,A);for(T in L){var F=this.types[T];if(F&&F.length)for(var B=0,W=L[T];B<W.length;B++){var X=W[B],te=F.indexOf(X);te!==-1&&F.splice(te,1)}}}},{key:"getRect",value:function(T){return null}}]),k})(),eh=(function(){function k(T){s(this,k),this.currentTarget=void 0,this.originalEvent=void 0,this.type=void 0,this.originalEvent=T,Eu(this,T)}return o(k,[{key:"preventOriginalDefault",value:function(){this.originalEvent.preventDefault()}},{key:"stopPropagation",value:function(){this.originalEvent.stopPropagation()}},{key:"stopImmediatePropagation",value:function(){this.originalEvent.stopImmediatePropagation()}}]),k})();function tf(k){return R.object(k)?{capture:!!k.capture,passive:!!k.passive}:{capture:!!k,passive:!1}}function rf(k,T){return k===T||(typeof k=="boolean"?!!T.capture===k&&!T.passive:!!k.capture==!!T.capture&&!!k.passive==!!T.passive)}var IA={id:"events",install:function(k){var T,A=[],L={},F=[],B={add:W,remove:X,addDelegate:function(ie,we,Ae,et,Ze){var rt=tf(Ze);if(!L[Ae]){L[Ae]=[];for(var yt=0;yt<F.length;yt++){var ft=F[yt];W(ft,Ae,te),W(ft,Ae,pe,!0)}}var Ct=L[Ae],si=Xp(Ct,function(fi){return fi.selector===ie&&fi.context===we});si||(si={selector:ie,context:we,listeners:[]},Ct.push(si)),si.listeners.push({func:et,options:rt})},removeDelegate:function(ie,we,Ae,et,Ze){var rt,yt=tf(Ze),ft=L[Ae],Ct=!1;if(ft)for(rt=ft.length-1;rt>=0;rt--){var si=ft[rt];if(si.selector===ie&&si.context===we){for(var fi=si.listeners,qt=fi.length-1;qt>=0;qt--){var ci=fi[qt];if(ci.func===et&&rf(ci.options,yt)){fi.splice(qt,1),fi.length||(ft.splice(rt,1),X(we,Ae,te),X(we,Ae,pe,!0)),Ct=!0;break}}if(Ct)break}}},delegateListener:te,delegateUseCapture:pe,delegatedEvents:L,documents:F,targets:A,supportsOptions:!1,supportsPassive:!1};function W(ie,we,Ae,et){if(ie.addEventListener){var Ze=tf(et),rt=Xp(A,function(yt){return yt.eventTarget===ie});rt||(rt={eventTarget:ie,events:{}},A.push(rt)),rt.events[we]||(rt.events[we]=[]),Xp(rt.events[we],function(yt){return yt.func===Ae&&rf(yt.options,Ze)})||(ie.addEventListener(we,Ae,B.supportsOptions?Ze:Ze.capture),rt.events[we].push({func:Ae,options:Ze}))}}function X(ie,we,Ae,et){if(ie.addEventListener&&ie.removeEventListener){var Ze=Zp(A,function(gn){return gn.eventTarget===ie}),rt=A[Ze];if(rt&&rt.events)if(we!=="all"){var yt=!1,ft=rt.events[we];if(ft){if(Ae==="all"){for(var Ct=ft.length-1;Ct>=0;Ct--){var si=ft[Ct];X(ie,we,si.func,si.options)}return}for(var fi=tf(et),qt=0;qt<ft.length;qt++){var ci=ft[qt];if(ci.func===Ae&&rf(ci.options,fi)){ie.removeEventListener(we,Ae,B.supportsOptions?fi:fi.capture),ft.splice(qt,1),ft.length===0&&(delete rt.events[we],yt=!0);break}}}yt&&!Object.keys(rt.events).length&&A.splice(Ze,1)}else for(we in rt.events)rt.events.hasOwnProperty(we)&&X(ie,we,"all")}}function te(ie,we){for(var Ae=tf(we),et=new eh(ie),Ze=L[ie.type],rt=Rs(ie)[0],yt=rt;R.element(yt);){for(var ft=0;ft<Ze.length;ft++){var Ct=Ze[ft],si=Ct.selector,fi=Ct.context;if(He(yt,si)&&he(fi,rt)&&he(fi,yt)){var qt=Ct.listeners;et.currentTarget=yt;for(var ci=0;ci<qt.length;ci++){var gn=qt[ci];rf(gn.options,Ae)&&gn.func(et)}}}yt=Pe(yt)}}function pe(ie){return te(ie,!0)}return(T=k.document)==null||T.createElement("div").addEventListener("test",null,{get capture(){return B.supportsOptions=!0},get passive(){return B.supportsPassive=!0}}),k.events=B,B}},vg={methodOrder:["simulationResume","mouseOrPen","hasPointer","idle"],search:function(k){for(var T=0,A=vg.methodOrder;T<A.length;T++){var L=A[T],F=vg[L](k);if(F)return F}return null},simulationResume:function(k){var T=k.pointerType,A=k.eventType,L=k.eventTarget,F=k.scope;if(!/down|start/i.test(A))return null;for(var B=0,W=F.interactions.list;B<W.length;B++){var X=W[B],te=L;if(X.simulation&&X.simulation.allowResume&&X.pointerType===T)for(;te;){if(te===X.element)return X;te=Pe(te)}}return null},mouseOrPen:function(k){var T,A=k.pointerId,L=k.pointerType,F=k.eventType,B=k.scope;if(L!=="mouse"&&L!=="pen")return null;for(var W=0,X=B.interactions.list;W<X.length;W++){var te=X[W];if(te.pointerType===L){if(te.simulation&&!eb(te,A))continue;if(te.interacting())return te;T||(T=te)}}if(T)return T;for(var pe=0,ie=B.interactions.list;pe<ie.length;pe++){var we=ie[pe];if(!(we.pointerType!==L||/down/i.test(F)&&we.simulation))return we}return null},hasPointer:function(k){for(var T=k.pointerId,A=0,L=k.scope.interactions.list;A<L.length;A++){var F=L[A];if(eb(F,T))return F}return null},idle:function(k){for(var T=k.pointerType,A=0,L=k.scope.interactions.list;A<L.length;A++){var F=L[A];if(F.pointers.length===1){var B=F.interactable;if(B&&(!B.options.gesture||!B.options.gesture.enabled))continue}else if(F.pointers.length>=2)continue;if(!F.interacting()&&T===F.pointerType)return F}return null}};function eb(k,T){return k.pointers.some(function(A){return A.id===T})}var MA=vg,js=["pointerDown","pointerMove","pointerUp","updatePointer","removePointer","windowBlur"];function th(k,T){return function(A){var L=T.interactions.list,F=Wd(A),B=Rs(A),W=B[0],X=B[1],te=[];if(/^touch/.test(A.type)){T.prevTouchTime=T.now();for(var pe=0,ie=A.changedTouches;pe<ie.length;pe++){var we=ie[pe],Ae={pointer:we,pointerId:Gd(we),pointerType:F,eventType:A.type,eventTarget:W,curEventTarget:X,scope:T},et=tb(Ae);te.push([Ae.pointer,Ae.eventTarget,Ae.curEventTarget,et])}}else{var Ze=!1;if(!re.supportsPointerEvent&&/mouse/.test(A.type)){for(var rt=0;rt<L.length&&!Ze;rt++)Ze=L[rt].pointerType!=="mouse"&&L[rt].pointerIsDown;Ze=Ze||T.now()-T.prevTouchTime<500||A.timeStamp===0}if(!Ze){var yt={pointer:A,pointerId:Gd(A),pointerType:F,eventType:A.type,curEventTarget:X,eventTarget:W,scope:T},ft=tb(yt);te.push([yt.pointer,yt.eventTarget,yt.curEventTarget,ft])}}for(var Ct=0;Ct<te.length;Ct++){var si=te[Ct],fi=si[0],qt=si[1],ci=si[2];si[3][k](fi,A,qt,ci)}}}function tb(k){var T=k.pointerType,A=k.scope,L={interaction:MA.search(k),searchDetails:k};return A.fire("interactions:find",L),L.interaction||A.interactions.new({pointerType:T})}function nf(k,T){var A=k.doc,L=k.scope,F=k.options,B=L.interactions.docEvents,W=L.events,X=W[T];for(var te in L.browser.isIOS&&!F.events&&(F.events={passive:!1}),W.delegatedEvents)X(A,te,W.delegateListener),X(A,te,W.delegateUseCapture,!0);for(var pe=F&&F.events,ie=0;ie<B.length;ie++){var we=B[ie];X(A,we.type,we.listener,pe)}}var Cj={id:"core/interactions",install:function(k){for(var T={},A=0;A<js.length;A++){var L=js[A];T[L]=th(L,k)}var F,B=re.pEventTypes;function W(){for(var X=0,te=k.interactions.list;X<te.length;X++){var pe=te[X];if(pe.pointerIsDown&&pe.pointerType==="touch"&&!pe._interacting)for(var ie=function(){var et=Ae[we];k.documents.some(function(Ze){return he(Ze.doc,et.downTarget)})||pe.removePointer(et.pointer,et.event)},we=0,Ae=pe.pointers;we<Ae.length;we++)ie()}}(F=K.PointerEvent?[{type:B.down,listener:W},{type:B.down,listener:T.pointerDown},{type:B.move,listener:T.pointerMove},{type:B.up,listener:T.pointerUp},{type:B.cancel,listener:T.pointerUp}]:[{type:"mousedown",listener:T.pointerDown},{type:"mousemove",listener:T.pointerMove},{type:"mouseup",listener:T.pointerUp},{type:"touchstart",listener:W},{type:"touchstart",listener:T.pointerDown},{type:"touchmove",listener:T.pointerMove},{type:"touchend",listener:T.pointerUp},{type:"touchcancel",listener:T.pointerUp}]).push({type:"blur",listener:function(X){for(var te=0,pe=k.interactions.list;te<pe.length;te++)pe[te].documentBlur(X)}}),k.prevTouchTime=0,k.Interaction=(function(X){c(pe,X);var te=y(pe);function pe(){return s(this,pe),te.apply(this,arguments)}return o(pe,[{key:"pointerMoveTolerance",get:function(){return k.interactions.pointerMoveTolerance},set:function(ie){k.interactions.pointerMoveTolerance=ie}},{key:"_now",value:function(){return k.now()}}]),pe})(Ej),k.interactions={list:[],new:function(X){X.scopeFire=function(pe,ie){return k.fire(pe,ie)};var te=new k.Interaction(X);return k.interactions.list.push(te),te},listeners:T,docEvents:F,pointerMoveTolerance:1},k.usePlugin(xr)},listeners:{"scope:add-document":function(k){return nf(k,"add")},"scope:remove-document":function(k){return nf(k,"remove")},"interactable:unset":function(k,T){for(var A=k.interactable,L=T.interactions.list.length-1;L>=0;L--){var F=T.interactions.list[L];F.interactable===A&&(F.stop(),T.fire("interactions:destroy",{interaction:F}),F.destroy(),T.interactions.list.length>2&&T.interactions.list.splice(L,1))}}},onDocSignal:nf,doOnInteractions:th,methodNames:js},dk=Cj,Ac=(function(k){return k[k.On=0]="On",k[k.Off=1]="Off",k})(Ac||{}),ib=(function(){function k(T,A,L,F){s(this,k),this.target=void 0,this.options=void 0,this._actions=void 0,this.events=new yg,this._context=void 0,this._win=void 0,this._doc=void 0,this._scopeEvents=void 0,this._actions=A.actions,this.target=T,this._context=A.context||L,this._win=P(pi(T)?this._context:T),this._doc=this._win.document,this._scopeEvents=F,this.set(A)}return o(k,[{key:"_defaults",get:function(){return{base:{},perAction:{},actions:{}}}},{key:"setOnEvents",value:function(T,A){return R.func(A.onstart)&&this.on("".concat(T,"start"),A.onstart),R.func(A.onmove)&&this.on("".concat(T,"move"),A.onmove),R.func(A.onend)&&this.on("".concat(T,"end"),A.onend),R.func(A.oninertiastart)&&this.on("".concat(T,"inertiastart"),A.oninertiastart),this}},{key:"updatePerActionListeners",value:function(T,A,L){var F,B=this,W=(F=this._actions.map[T])==null?void 0:F.filterEventType,X=function(te){return(W==null||W(te))&&pr(te,B._actions)};(R.array(A)||R.object(A))&&this._onOff(Ac.Off,T,A,void 0,X),(R.array(L)||R.object(L))&&this._onOff(Ac.On,T,L,void 0,X)}},{key:"setPerAction",value:function(T,A){var L=this._defaults;for(var F in A){var B=F,W=this.options[T],X=A[B];B==="listeners"&&this.updatePerActionListeners(T,W.listeners,X),R.array(X)?W[B]=R_(X):R.plainObject(X)?(W[B]=it(W[B]||{},qr(X)),R.object(L.perAction[B])&&"enabled"in L.perAction[B]&&(W[B].enabled=X.enabled!==!1)):R.bool(X)&&R.object(L.perAction[B])?W[B].enabled=X:W[B]=X}}},{key:"getRect",value:function(T){return T=T||(R.element(this.target)?this.target:null),R.string(this.target)&&(T=T||this._context.querySelector(this.target)),ut(T)}},{key:"rectChecker",value:function(T){var A=this;return R.func(T)?(this.getRect=function(L){var F=it({},T.apply(A,L));return"width"in F||(F.width=F.right-F.left,F.height=F.bottom-F.top),F},this):T===null?(delete this.getRect,this):this.getRect}},{key:"_backCompatOption",value:function(T,A){if(pi(A)||R.object(A)){for(var L in this.options[T]=A,this._actions.map)this.options[L][T]=A;return this}return this.options[T]}},{key:"origin",value:function(T){return this._backCompatOption("origin",T)}},{key:"deltaSource",value:function(T){return T==="page"||T==="client"?(this.options.deltaSource=T,this):this.options.deltaSource}},{key:"getAllElements",value:function(){var T=this.target;return R.string(T)?Array.from(this._context.querySelectorAll(T)):R.func(T)&&T.getAllElements?T.getAllElements():R.element(T)?[T]:[]}},{key:"context",value:function(){return this._context}},{key:"inContext",value:function(T){return this._context===T.ownerDocument||he(this._context,T)}},{key:"testIgnoreAllow",value:function(T,A,L){return!this.testIgnore(T.ignoreFrom,A,L)&&this.testAllow(T.allowFrom,A,L)}},{key:"testAllow",value:function(T,A,L){return!T||!!R.element(L)&&(R.string(T)?Le(L,T,A):!!R.element(T)&&he(T,L))}},{key:"testIgnore",value:function(T,A,L){return!(!T||!R.element(L))&&(R.string(T)?Le(L,T,A):!!R.element(T)&&he(T,L))}},{key:"fire",value:function(T){return this.events.fire(T),this}},{key:"_onOff",value:function(T,A,L,F,B){R.object(A)&&!R.array(A)&&(F=L,L=null);var W=Il(A,L,B);for(var X in W){X==="wheel"&&(X=re.wheelEvent);for(var te=0,pe=W[X];te<pe.length;te++){var ie=pe[te];pr(X,this._actions)?this.events[T===Ac.On?"on":"off"](X,ie):R.string(this.target)?this._scopeEvents[T===Ac.On?"addDelegate":"removeDelegate"](this.target,this._context,X,ie,F):this._scopeEvents[T===Ac.On?"add":"remove"](this.target,X,ie,F)}}return this}},{key:"on",value:function(T,A,L){return this._onOff(Ac.On,T,A,L)}},{key:"off",value:function(T,A,L){return this._onOff(Ac.Off,T,A,L)}},{key:"set",value:function(T){var A=this._defaults;for(var L in R.object(T)||(T={}),this.options=qr(A.base),this._actions.methodDict){var F=L,B=this._actions.methodDict[F];this.options[F]={},this.setPerAction(F,it(it({},A.perAction),A.actions[F])),this[B](T[F])}for(var W in T)W!=="getRect"?R.func(this[W])&&this[W](T[W]):this.rectChecker(T.getRect);return this}},{key:"unset",value:function(){if(R.string(this.target))for(var T in this._scopeEvents.delegatedEvents)for(var A=this._scopeEvents.delegatedEvents[T],L=A.length-1;L>=0;L--){var F=A[L],B=F.selector,W=F.context,X=F.listeners;B===this.target&&W===this._context&&A.splice(L,1);for(var te=X.length-1;te>=0;te--)this._scopeEvents.removeDelegate(this.target,this._context,T,X[te][0],X[te][1])}else this._scopeEvents.remove(this.target,"all")}}]),k})(),U_=(function(){function k(T){var A=this;s(this,k),this.list=[],this.selectorMap={},this.scope=void 0,this.scope=T,T.addListeners({"interactable:unset":function(L){var F=L.interactable,B=F.target,W=R.string(B)?A.selectorMap[B]:B[A.scope.id],X=Zp(W,function(te){return te===F});W.splice(X,1)}})}return o(k,[{key:"new",value:function(T,A){A=it(A||{},{actions:this.scope.actions});var L=new this.scope.Interactable(T,A,this.scope.document,this.scope.events);return this.scope.addDocument(L._doc),this.list.push(L),R.string(T)?(this.selectorMap[T]||(this.selectorMap[T]=[]),this.selectorMap[T].push(L)):(L.target[this.scope.id]||Object.defineProperty(T,this.scope.id,{value:[],configurable:!0}),T[this.scope.id].push(L)),this.scope.fire("interactable:new",{target:T,options:A,interactable:L,win:this.scope._win}),L}},{key:"getExisting",value:function(T,A){var L=A&&A.context||this.scope.document,F=R.string(T),B=F?this.selectorMap[T]:T[this.scope.id];if(B)return Xp(B,function(W){return W._context===L&&(F||W.inContext(T))})}},{key:"forEachMatch",value:function(T,A){for(var L=0,F=this.list;L<F.length;L++){var B=F[L],W=void 0;if((R.string(B.target)?R.element(T)&&He(T,B.target):T===B.target)&&B.inContext(T)&&(W=A(B)),W!==void 0)return W}}}]),k})(),AA=(function(){function k(){var T=this;s(this,k),this.id="__interact_scope_".concat(Math.floor(100*Math.random())),this.isInitialized=!1,this.listenerMaps=[],this.browser=re,this.defaults=qr(sk),this.Eventable=yg,this.actions={map:{},phases:{start:!0,move:!0,end:!0},methodDict:{},phaselessTypes:{}},this.interactStatic=(function(L){var F=function B(W,X){var te=L.interactables.getExisting(W,X);return te||((te=L.interactables.new(W,X)).events.global=B.globalEvents),te};return F.getPointerAverage=rk,F.getTouchBBox=hg,F.getTouchDistance=Gv,F.getTouchAngle=qv,F.getElementRect=ut,F.getElementClientRect=st,F.matchesSelector=He,F.closest=xe,F.globalEvents={},F.version="1.10.27",F.scope=L,F.use=function(B,W){return this.scope.usePlugin(B,W),this},F.isSet=function(B,W){return!!this.scope.interactables.get(B,W&&W.context)},F.on=Pl(function(B,W,X){if(R.string(B)&&B.search(" ")!==-1&&(B=B.trim().split(/ +/)),R.array(B)){for(var te=0,pe=B;te<pe.length;te++){var ie=pe[te];this.on(ie,W,X)}return this}if(R.object(B)){for(var we in B)this.on(we,B[we],W);return this}return pr(B,this.scope.actions)?this.globalEvents[B]?this.globalEvents[B].push(W):this.globalEvents[B]=[W]:this.scope.events.add(this.scope.document,B,W,{options:X}),this},"The interact.on() method is being deprecated"),F.off=Pl(function(B,W,X){if(R.string(B)&&B.search(" ")!==-1&&(B=B.trim().split(/ +/)),R.array(B)){for(var te=0,pe=B;te<pe.length;te++){var ie=pe[te];this.off(ie,W,X)}return this}if(R.object(B)){for(var we in B)this.off(we,B[we],W);return this}var Ae;return pr(B,this.scope.actions)?B in this.globalEvents&&(Ae=this.globalEvents[B].indexOf(W))!==-1&&this.globalEvents[B].splice(Ae,1):this.scope.events.remove(this.scope.document,B,W,X),this},"The interact.off() method is being deprecated"),F.debug=function(){return this.scope},F.supportsTouch=function(){return re.supportsTouch},F.supportsPointerEvent=function(){return re.supportsPointerEvent},F.stop=function(){for(var B=0,W=this.scope.interactions.list;B<W.length;B++)W[B].stop();return this},F.pointerMoveTolerance=function(B){return R.number(B)?(this.scope.interactions.pointerMoveTolerance=B,this):this.scope.interactions.pointerMoveTolerance},F.addDocument=function(B,W){this.scope.addDocument(B,W)},F.removeDocument=function(B){this.scope.removeDocument(B)},F})(this),this.InteractEvent=Qd,this.Interactable=void 0,this.interactables=new U_(this),this._win=void 0,this.document=void 0,this.window=void 0,this.documents=[],this._plugins={list:[],map:{}},this.onWindowUnload=function(L){return T.removeDocument(L.target)};var A=this;this.Interactable=(function(L){c(B,L);var F=y(B);function B(){return s(this,B),F.apply(this,arguments)}return o(B,[{key:"_defaults",get:function(){return A.defaults}},{key:"set",value:function(W){return b(h(B.prototype),"set",this).call(this,W),A.fire("interactable:set",{options:W,interactable:this}),this}},{key:"unset",value:function(){b(h(B.prototype),"unset",this).call(this);var W=A.interactables.list.indexOf(this);W<0||(A.interactables.list.splice(W,1),A.fire("interactable:unset",{interactable:this}))}}]),B})(ib)}return o(k,[{key:"addListeners",value:function(T,A){this.listenerMaps.push({id:A,map:T})}},{key:"fire",value:function(T,A){for(var L=0,F=this.listenerMaps;L<F.length;L++){var B=F[L].map[T];if(B&&B(A,this,T)===!1)return!1}}},{key:"init",value:function(T){return this.isInitialized?this:(function(A,L){return A.isInitialized=!0,R.window(L)&&I(L),K.init(L),re.init(L),zr.init(L),A.window=L,A.document=L.document,A.usePlugin(dk),A.usePlugin(IA),A})(this,T)}},{key:"pluginIsInstalled",value:function(T){var A=T.id;return A?!!this._plugins.map[A]:this._plugins.list.indexOf(T)!==-1}},{key:"usePlugin",value:function(T,A){if(!this.isInitialized)return this;if(this.pluginIsInstalled(T))return this;if(T.id&&(this._plugins.map[T.id]=T),this._plugins.list.push(T),T.install&&T.install(this,A),T.listeners&&T.before){for(var L=0,F=this.listenerMaps.length,B=T.before.reduce(function(X,te){return X[te]=!0,X[PA(te)]=!0,X},{});L<F;L++){var W=this.listenerMaps[L].id;if(W&&(B[W]||B[PA(W)]))break}this.listenerMaps.splice(L,0,{id:T.id,map:T.listeners})}else T.listeners&&this.listenerMaps.push({id:T.id,map:T.listeners});return this}},{key:"addDocument",value:function(T,A){if(this.getDocIndex(T)!==-1)return!1;var L=P(T);A=A?it({},A):{},this.documents.push({doc:T,options:A}),this.events.documents.push(T),T!==this.document&&this.events.add(L,"unload",this.onWindowUnload),this.fire("scope:add-document",{doc:T,window:L,scope:this,options:A})}},{key:"removeDocument",value:function(T){var A=this.getDocIndex(T),L=P(T),F=this.documents[A].options;this.events.remove(L,"unload",this.onWindowUnload),this.documents.splice(A,1),this.events.documents.splice(A,1),this.fire("scope:remove-document",{doc:T,window:L,scope:this,options:F})}},{key:"getDocIndex",value:function(T){for(var A=0;A<this.documents.length;A++)if(this.documents[A].doc===T)return A;return-1}},{key:"getDocOptions",value:function(T){var A=this.getDocIndex(T);return A===-1?null:this.documents[A].options}},{key:"now",value:function(){return(this.window.Date||Date).now()}}]),k})();function PA(k){return k&&k.replace(/\/.*$/,"")}var OA=new AA,sa=OA.interactStatic,hk=typeof globalThis<"u"?globalThis:window;OA.init(hk);var Ij=Object.freeze({__proto__:null,edgeTarget:function(){},elements:function(){},grid:function(k){var T=[["x","y"],["left","top"],["right","bottom"],["width","height"]].filter(function(L){var F=L[0],B=L[1];return F in k||B in k}),A=function(L,F){for(var B=k.range,W=k.limits,X=W===void 0?{left:-1/0,right:1/0,top:-1/0,bottom:1/0}:W,te=k.offset,pe=te===void 0?{x:0,y:0}:te,ie={range:B,grid:k,x:null,y:null},we=0;we<T.length;we++){var Ae=T[we],et=Ae[0],Ze=Ae[1],rt=Math.round((L-pe.x)/k[et]),yt=Math.round((F-pe.y)/k[Ze]);ie[et]=Math.max(X.left,Math.min(X.right,rt*k[et]+pe.x)),ie[Ze]=Math.max(X.top,Math.min(X.bottom,yt*k[Ze]+pe.y))}return ie};return A.grid=k,A.coordFields=T,A}}),Mj={id:"snappers",install:function(k){var T=k.interactStatic;T.snappers=it(T.snappers||{},Ij),T.createSnapGrid=T.snappers.grid}},Aj=Mj,Pj={start:function(k){var T=k.state,A=k.rect,L=k.edges,F=k.pageCoords,B=T.options,W=B.ratio,X=B.enabled,te=T.options,pe=te.equalDelta,ie=te.modifiers;W==="preserve"&&(W=A.width/A.height),T.startCoords=it({},F),T.startRect=it({},A),T.ratio=W,T.equalDelta=pe;var we=T.linkedEdges={top:L.top||L.left&&!L.bottom,left:L.left||L.top&&!L.right,bottom:L.bottom||L.right&&!L.top,right:L.right||L.bottom&&!L.left};if(T.xIsPrimaryAxis=!(!L.left&&!L.right),T.equalDelta){var Ae=(we.left?1:-1)*(we.top?1:-1);T.edgeSign={x:Ae,y:Ae}}else T.edgeSign={x:we.left?-1:1,y:we.top?-1:1};if(X!==!1&&it(L,we),ie!=null&&ie.length){var et=new za(k.interaction);et.copyFrom(k.interaction.modification),et.prepareStates(ie),T.subModification=et,et.startAll(r({},k))}},set:function(k){var T=k.state,A=k.rect,L=k.coords,F=T.linkedEdges,B=it({},L),W=T.equalDelta?Oj:LA;if(it(k.edges,F),W(T,T.xIsPrimaryAxis,L,A),!T.subModification)return null;var X=it({},A);ra(F,X,{x:L.x-B.x,y:L.y-B.y});var te=T.subModification.setAll(r(r({},k),{},{rect:X,edges:F,pageCoords:L,prevCoords:L,prevRect:X})),pe=te.delta;return te.changed&&(W(T,Math.abs(pe.x)>Math.abs(pe.y),te.coords,te.rect),it(L,te.coords)),te.eventProps},defaults:{ratio:"preserve",equalDelta:!1,modifiers:[],enabled:!1}};function Oj(k,T,A){var L=k.startCoords,F=k.edgeSign;T?A.y=L.y+(A.x-L.x)*F.y:A.x=L.x+(A.y-L.y)*F.x}function LA(k,T,A,L){var F=k.startRect,B=k.startCoords,W=k.ratio,X=k.edgeSign;if(T){var te=L.width/W;A.y=B.y+(te-F.height)*X.y}else{var pe=L.height*W;A.x=B.x+(pe-F.width)*X.x}}var Lj=Lu(Pj,"aspectRatio"),DA=function(){};DA._defaults={};var H_=DA;function sf(k,T,A){return R.func(k)?fn(k,T.interactable,T.element,[A.x,A.y,T]):fn(k,T.interactable,T.element)}var bg={start:function(k){var T=k.rect,A=k.startOffset,L=k.state,F=k.interaction,B=k.pageCoords,W=L.options,X=W.elementRect,te=it({left:0,top:0,right:0,bottom:0},W.offset||{});if(T&&X){var pe=sf(W.restriction,F,B);if(pe){var ie=pe.right-pe.left-T.width,we=pe.bottom-pe.top-T.height;ie<0&&(te.left+=ie,te.right+=ie),we<0&&(te.top+=we,te.bottom+=we)}te.left+=A.left-T.width*X.left,te.top+=A.top-T.height*X.top,te.right+=A.right-T.width*(1-X.right),te.bottom+=A.bottom-T.height*(1-X.bottom)}L.offset=te},set:function(k){var T=k.coords,A=k.interaction,L=k.state,F=L.options,B=L.offset,W=sf(F.restriction,A,T);if(W){var X=(function(te){return!te||"left"in te&&"top"in te||((te=it({},te)).left=te.x||0,te.top=te.y||0,te.right=te.right||te.left+te.width,te.bottom=te.bottom||te.top+te.height),te})(W);T.x=Math.max(Math.min(X.right-B.right,T.x),X.left+B.left),T.y=Math.max(Math.min(X.bottom-B.bottom,T.y),X.top+B.top)}},defaults:{restriction:null,elementRect:null,offset:null,endOnly:!1,enabled:!1}},Dj=Lu(bg,"restrict"),RA={top:1/0,left:1/0,bottom:-1/0,right:-1/0},zA={top:-1/0,left:-1/0,bottom:1/0,right:1/0};function pk(k,T){for(var A=0,L=["top","left","bottom","right"];A<L.length;A++){var F=L[A];F in k||(k[F]=T[F])}return k}var rb={noInner:RA,noOuter:zA,start:function(k){var T,A=k.interaction,L=k.startOffset,F=k.state,B=F.options;B&&(T=El(sf(B.offset,A,A.coords.start.page))),T=T||{x:0,y:0},F.offset={top:T.y+L.top,left:T.x+L.left,bottom:T.y-L.bottom,right:T.x-L.right}},set:function(k){var T=k.coords,A=k.edges,L=k.interaction,F=k.state,B=F.offset,W=F.options;if(A){var X=it({},T),te=sf(W.inner,L,X)||{},pe=sf(W.outer,L,X)||{};pk(te,RA),pk(pe,zA),A.top?T.y=Math.min(Math.max(pe.top+B.top,X.y),te.top+B.top):A.bottom&&(T.y=Math.max(Math.min(pe.bottom+B.bottom,X.y),te.bottom+B.bottom)),A.left?T.x=Math.min(Math.max(pe.left+B.left,X.x),te.left+B.left):A.right&&(T.x=Math.max(Math.min(pe.right+B.right,X.x),te.right+B.right))}},defaults:{inner:null,outer:null,offset:null,endOnly:!1,enabled:!1}},Rj=Lu(rb,"restrictEdges"),zj=it({get elementRect(){return{top:0,left:0,bottom:1,right:1}},set elementRect(k){}},bg.defaults),Fj=Lu({start:bg.start,set:bg.set,defaults:zj},"restrictRect"),Nj={width:-1/0,height:-1/0},jj={width:1/0,height:1/0},Vj=Lu({start:function(k){return rb.start(k)},set:function(k){var T=k.interaction,A=k.state,L=k.rect,F=k.edges,B=A.options;if(F){var W=Ud(sf(B.min,T,k.coords))||Nj,X=Ud(sf(B.max,T,k.coords))||jj;A.options={endOnly:B.endOnly,inner:it({},rb.noInner),outer:it({},rb.noOuter)},F.top?(A.options.inner.top=L.bottom-W.height,A.options.outer.top=L.bottom-X.height):F.bottom&&(A.options.inner.bottom=L.top+W.height,A.options.outer.bottom=L.top+X.height),F.left?(A.options.inner.left=L.right-W.width,A.options.outer.left=L.right-X.width):F.right&&(A.options.inner.right=L.left+W.width,A.options.outer.right=L.left+X.width),rb.set(k),A.options=B}},defaults:{min:null,max:null,endOnly:!1,enabled:!1}},"restrictSize"),fk={start:function(k){var T,A=k.interaction,L=k.interactable,F=k.element,B=k.rect,W=k.state,X=k.startOffset,te=W.options,pe=te.offsetWithOrigin?(function(Ae){var et=Ae.interaction.element,Ze=El(fn(Ae.state.options.origin,null,null,[et])),rt=Ze||Cl(Ae.interactable,et,Ae.interaction.prepared.name);return rt})(k):{x:0,y:0};if(te.offset==="startCoords")T={x:A.coords.start.page.x,y:A.coords.start.page.y};else{var ie=fn(te.offset,L,F,[A]);(T=El(ie)||{x:0,y:0}).x+=pe.x,T.y+=pe.y}var we=te.relativePoints;W.offsets=B&&we&&we.length?we.map(function(Ae,et){return{index:et,relativePoint:Ae,x:X.left-B.width*Ae.x+T.x,y:X.top-B.height*Ae.y+T.y}}):[{index:0,relativePoint:null,x:T.x,y:T.y}]},set:function(k){var T=k.interaction,A=k.coords,L=k.state,F=L.options,B=L.offsets,W=Cl(T.interactable,T.element,T.prepared.name),X=it({},A),te=[];F.offsetWithOrigin||(X.x-=W.x,X.y-=W.y);for(var pe=0,ie=B;pe<ie.length;pe++)for(var we=ie[pe],Ae=X.x-we.x,et=X.y-we.y,Ze=0,rt=F.targets.length;Ze<rt;Ze++){var yt=F.targets[Ze],ft=void 0;(ft=R.func(yt)?yt(Ae,et,T._proxy,we,Ze):yt)&&te.push({x:(R.number(ft.x)?ft.x:Ae)+we.x,y:(R.number(ft.y)?ft.y:et)+we.y,range:R.number(ft.range)?ft.range:F.range,source:yt,index:Ze,offset:we})}for(var Ct={target:null,inRange:!1,distance:0,range:0,delta:{x:0,y:0}},si=0;si<te.length;si++){var fi=te[si],qt=fi.range,ci=fi.x-X.x,gn=fi.y-X.y,Qi=Hd(ci,gn),aa=Qi<=qt;qt===1/0&&Ct.inRange&&Ct.range!==1/0&&(aa=!1),Ct.target&&!(aa?Ct.inRange&&qt!==1/0?Qi/qt<Ct.distance/Ct.range:qt===1/0&&Ct.range!==1/0||Qi<Ct.distance:!Ct.inRange&&Qi<Ct.distance)||(Ct.target=fi,Ct.distance=Qi,Ct.range=qt,Ct.inRange=aa,Ct.delta.x=ci,Ct.delta.y=gn)}return Ct.inRange&&(A.x=Ct.target.x,A.y=Ct.target.y),L.closest=Ct,Ct},defaults:{range:1/0,targets:null,offset:null,offsetWithOrigin:!0,origin:null,relativePoints:null,endOnly:!1,enabled:!1}},Bj=Lu(fk,"snap"),wg={start:function(k){var T=k.state,A=k.edges,L=T.options;if(!A)return null;k.state={options:{targets:null,relativePoints:[{x:A.left?0:1,y:A.top?0:1}],offset:L.offset||"self",origin:{x:0,y:0},range:L.range}},T.targetFields=T.targetFields||[["width","height"],["x","y"]],fk.start(k),T.offsets=k.state.offsets,k.state=T},set:function(k){var T=k.interaction,A=k.state,L=k.coords,F=A.options,B=A.offsets,W={x:L.x-B[0].x,y:L.y-B[0].y};A.options=it({},F),A.options.targets=[];for(var X=0,te=F.targets||[];X<te.length;X++){var pe=te[X],ie=void 0;if(ie=R.func(pe)?pe(W.x,W.y,T):pe){for(var we=0,Ae=A.targetFields;we<Ae.length;we++){var et=Ae[we],Ze=et[0],rt=et[1];if(Ze in ie||rt in ie){ie.x=ie[Ze],ie.y=ie[rt];break}}A.options.targets.push(ie)}}var yt=fk.set(k);return A.options=F,yt},defaults:{range:1/0,targets:null,offset:null,endOnly:!1,enabled:!1}},nb=Lu(wg,"snapSize"),mk={aspectRatio:Lj,restrictEdges:Rj,restrict:Dj,restrictRect:Fj,restrictSize:Vj,snapEdges:Lu({start:function(k){var T=k.edges;return T?(k.state.targetFields=k.state.targetFields||[[T.left?"left":"right",T.top?"top":"bottom"]],wg.start(k)):null},set:wg.set,defaults:it(qr(wg.defaults),{targets:void 0,range:void 0,offset:{x:0,y:0}})},"snapEdges"),snap:Bj,snapSize:nb,spring:H_,avoid:H_,transform:H_,rubberband:H_},FA={id:"modifiers",install:function(k){var T=k.interactStatic;for(var A in k.usePlugin(nk),k.usePlugin(Aj),T.modifiers=mk,mk){var L=mk[A],F=L._defaults,B=L._methods;F._methods=B,k.defaults.perAction[A]=F}}},NA=FA,gk=(function(k){c(A,k);var T=y(A);function A(L,F,B,W,X,te){var pe;if(s(this,A),Eu(g(pe=T.call(this,X)),B),B!==F&&Eu(g(pe),F),pe.timeStamp=te,pe.originalEvent=B,pe.type=L,pe.pointerId=Gd(F),pe.pointerType=Wd(F),pe.target=W,pe.currentTarget=null,L==="tap"){var ie=X.getPointerIndex(F);pe.dt=pe.timeStamp-X.pointers[ie].downTime;var we=pe.timeStamp-X.tapTime;pe.double=!!X.prevTap&&X.prevTap.type!=="doubletap"&&X.prevTap.target===pe.target&&we<500}else L==="doubletap"&&(pe.dt=F.timeStamp-X.tapTime,pe.double=!0);return pe}return o(A,[{key:"_subtractOrigin",value:function(L){var F=L.x,B=L.y;return this.pageX-=F,this.pageY-=B,this.clientX-=F,this.clientY-=B,this}},{key:"_addOrigin",value:function(L){var F=L.x,B=L.y;return this.pageX+=F,this.pageY+=B,this.clientX+=F,this.clientY+=B,this}},{key:"preventDefault",value:function(){this.originalEvent.preventDefault()}}]),A})(vo),_g={id:"pointer-events/base",before:["inertia","modifiers","auto-start","actions"],install:function(k){k.pointerEvents=_g,k.defaults.actions.pointerEvents=_g.defaults,it(k.actions.phaselessTypes,_g.types)},listeners:{"interactions:new":function(k){var T=k.interaction;T.prevTap=null,T.tapTime=0},"interactions:update-pointer":function(k){var T=k.down,A=k.pointerInfo;!T&&A.hold||(A.hold={duration:1/0,timeout:null})},"interactions:move":function(k,T){var A=k.interaction,L=k.pointer,F=k.event,B=k.eventTarget;k.duplicate||A.pointerIsDown&&!A.pointerWasMoved||(A.pointerIsDown&&yk(k),zu({interaction:A,pointer:L,event:F,eventTarget:B,type:"move"},T))},"interactions:down":function(k,T){(function(A,L){for(var F=A.interaction,B=A.pointer,W=A.event,X=A.eventTarget,te=A.pointerIndex,pe=F.pointers[te].hold,ie=Pt(X),we={interaction:F,pointer:B,event:W,eventTarget:X,type:"hold",targets:[],path:ie,node:null},Ae=0;Ae<ie.length;Ae++){var et=ie[Ae];we.node=et,L.fire("pointerEvents:collect-targets",we)}if(we.targets.length){for(var Ze=1/0,rt=0,yt=we.targets;rt<yt.length;rt++){var ft=yt[rt].eventable.options.holdDuration;ft<Ze&&(Ze=ft)}pe.duration=Ze,pe.timeout=setTimeout(function(){zu({interaction:F,eventTarget:X,pointer:B,event:W,type:"hold"},L)},Ze)}})(k,T),zu(k,T)},"interactions:up":function(k,T){yk(k),zu(k,T),(function(A,L){var F=A.interaction,B=A.pointer,W=A.event,X=A.eventTarget;F.pointerWasMoved||zu({interaction:F,eventTarget:X,pointer:B,event:W,type:"tap"},L)})(k,T)},"interactions:cancel":function(k,T){yk(k),zu(k,T)}},PointerEvent:gk,fire:zu,collectEventTargets:af,defaults:{holdDuration:600,ignoreFrom:null,allowFrom:null,origin:{x:0,y:0}},types:{down:!0,move:!0,up:!0,cancel:!0,tap:!0,doubletap:!0,hold:!0}};function zu(k,T){var A=k.interaction,L=k.pointer,F=k.event,B=k.eventTarget,W=k.type,X=k.targets,te=X===void 0?af(k,T):X,pe=new gk(W,L,F,B,A,T.now());T.fire("pointerEvents:new",{pointerEvent:pe});for(var ie={interaction:A,pointer:L,event:F,eventTarget:B,targets:te,type:W,pointerEvent:pe},we=0;we<te.length;we++){var Ae=te[we];for(var et in Ae.props||{})pe[et]=Ae.props[et];var Ze=Cl(Ae.eventable,Ae.node);if(pe._subtractOrigin(Ze),pe.eventable=Ae.eventable,pe.currentTarget=Ae.node,Ae.eventable.fire(pe),pe._addOrigin(Ze),pe.immediatePropagationStopped||pe.propagationStopped&&we+1<te.length&&te[we+1].node!==pe.currentTarget)break}if(T.fire("pointerEvents:fired",ie),W==="tap"){var rt=pe.double?zu({interaction:A,pointer:L,event:F,eventTarget:B,type:"doubletap"},T):pe;A.prevTap=rt,A.tapTime=rt.timeStamp}return pe}function af(k,T){var A=k.interaction,L=k.pointer,F=k.event,B=k.eventTarget,W=k.type,X=A.getPointerIndex(L),te=A.pointers[X];if(W==="tap"&&(A.pointerWasMoved||!te||te.downTarget!==B))return[];for(var pe=Pt(B),ie={interaction:A,pointer:L,event:F,eventTarget:B,type:W,path:pe,targets:[],node:null},we=0;we<pe.length;we++){var Ae=pe[we];ie.node=Ae,T.fire("pointerEvents:collect-targets",ie)}return W==="hold"&&(ie.targets=ie.targets.filter(function(et){var Ze,rt;return et.eventable.options.holdDuration===((Ze=A.pointers[X])==null||(rt=Ze.hold)==null?void 0:rt.duration)})),ie.targets}function yk(k){var T=k.interaction,A=k.pointerIndex,L=T.pointers[A].hold;L&&L.timeout&&(clearTimeout(L.timeout),L.timeout=null)}var Uj=Object.freeze({__proto__:null,default:_g});function Hj(k){var T=k.interaction;T.holdIntervalHandle&&(clearInterval(T.holdIntervalHandle),T.holdIntervalHandle=null)}var jA={id:"pointer-events/holdRepeat",install:function(k){k.usePlugin(_g);var T=k.pointerEvents;T.defaults.holdRepeatInterval=0,T.types.holdrepeat=k.actions.phaselessTypes.holdrepeat=!0},listeners:["move","up","cancel","endall"].reduce(function(k,T){return k["pointerEvents:".concat(T)]=Hj,k},{"pointerEvents:new":function(k){var T=k.pointerEvent;T.type==="hold"&&(T.count=(T.count||0)+1)},"pointerEvents:fired":function(k,T){var A=k.interaction,L=k.pointerEvent,F=k.eventTarget,B=k.targets;if(L.type==="hold"&&B.length){var W=B[0].eventable.options.holdRepeatInterval;W<=0||(A.holdIntervalHandle=setTimeout(function(){T.pointerEvents.fire({interaction:A,eventTarget:F,type:"hold",pointer:L,event:L},T)},W))}}})},VA=jA,sb={id:"pointer-events/interactableTargets",install:function(k){var T=k.Interactable;T.prototype.pointerEvents=function(L){return it(this.events.options,L),this};var A=T.prototype._backCompatOption;T.prototype._backCompatOption=function(L,F){var B=A.call(this,L,F);return B===this&&(this.events.options[L]=F),B}},listeners:{"pointerEvents:collect-targets":function(k,T){var A=k.targets,L=k.node,F=k.type,B=k.eventTarget;T.interactables.forEachMatch(L,function(W){var X=W.events,te=X.options;X.types[F]&&X.types[F].length&&W.testIgnoreAllow(te,L,B)&&A.push({node:L,eventable:X,props:{interactable:W}})})},"interactable:new":function(k){var T=k.interactable;T.events.getRect=function(A){return T.getRect(A)}},"interactable:set":function(k,T){var A=k.interactable,L=k.options;it(A.events.options,T.pointerEvents.defaults),it(A.events.options,L.pointerEvents||{})}}},ab=sb,Gj={id:"pointer-events",install:function(k){k.usePlugin(Uj),k.usePlugin(VA),k.usePlugin(ab)}},G_=Gj,BA={id:"reflow",install:function(k){var T=k.Interactable;k.actions.phases.reflow=!0,T.prototype.reflow=function(A){return(function(L,F,B){for(var W=L.getAllElements(),X=B.window.Promise,te=X?[]:null,pe=function(){var we=W[ie],Ae=L.getRect(we);if(!Ae)return 1;var et,Ze=Xp(B.interactions.list,function(ft){return ft.interacting()&&ft.interactable===L&&ft.element===we&&ft.prepared.name===F.name});if(Ze)Ze.move(),te&&(et=Ze._reflowPromise||new X(function(ft){Ze._reflowResolve=ft}));else{var rt=Ud(Ae),yt=(function(ft){return{coords:ft,get page(){return this.coords.page},get client(){return this.coords.client},get timeStamp(){return this.coords.timeStamp},get pageX(){return this.coords.page.x},get pageY(){return this.coords.page.y},get clientX(){return this.coords.client.x},get clientY(){return this.coords.client.y},get pointerId(){return this.coords.pointerId},get target(){return this.coords.target},get type(){return this.coords.type},get pointerType(){return this.coords.pointerType},get buttons(){return this.coords.buttons},preventDefault:function(){}}})({page:{x:rt.x,y:rt.y},client:{x:rt.x,y:rt.y},timeStamp:B.now()});et=(function(ft,Ct,si,fi,qt){var ci=ft.interactions.new({pointerType:"reflow"}),gn={interaction:ci,event:qt,pointer:qt,eventTarget:si,phase:"reflow"};ci.interactable=Ct,ci.element=si,ci.prevEvent=qt,ci.updatePointer(qt,qt,si,!0),P_(ci.coords.delta),Mu(ci.prepared,fi),ci._doPhase(gn);var Qi=ft.window,aa=Qi.Promise,Uo=aa?new aa(function(oa){ci._reflowResolve=oa}):void 0;return ci._reflowPromise=Uo,ci.start(fi,Ct,si),ci._interacting?(ci.move(gn),ci.end(qt)):(ci.stop(),ci._reflowResolve()),ci.removePointer(qt,qt),Uo})(B,L,we,F,yt)}te&&te.push(et)},ie=0;ie<W.length&&!pe();ie++);return te&&X.all(te).then(function(){return L})})(this,A,k)}},listeners:{"interactions:stop":function(k,T){var A=k.interaction;A.pointerType==="reflow"&&(A._reflowResolve&&A._reflowResolve(),(function(L,F){L.splice(L.indexOf(F),1)})(T.interactions.list,A))}}},UA=BA;if(sa.use(xr),sa.use(ef),sa.use(G_),sa.use(Ru),sa.use(NA),sa.use(Qe),sa.use(Ic),sa.use(j_),sa.use(UA),sa.default=sa,n(t)==="object"&&t)try{t.exports=sa}catch{}return sa.default=sa,sa})})(KE,KE.exports)),KE.exports}var fmt=pmt();const Zz=dmt(fmt);function iM(t,e,i){return e?`${t}-${e}`:i?`${t}-${i}`:`${t}-m`}const Cke=(t,e,i)=>Math.max(e,Math.min(t,i));let CL=0,hue="";const mmt=()=>{function t(){CL++,CL===1&&(hue=document.documentElement.style.overflow,document.documentElement.style.overflow="hidden")}function e(){CL--,CL===0&&(document.documentElement.style.overflow=hue)}return b_((i,r)=>{r.onConnected(()=>{i.opened&&i.preventDocumentScroll&&t()}),r.onUpdate(n=>{i.hasUpdated&&(n.has("opened")&&i.preventDocumentScroll?i.opened?t():e():n.has("preventDocumentScroll")&&i.opened&&(i.preventDocumentScroll?t():e()))}),r.onDisconnected(()=>{i.opened&&i.preventDocumentScroll&&e()})})};var Ike=["input:not([inert]):not([inert] *)","select:not([inert]):not([inert] *)","textarea:not([inert]):not([inert] *)","a[href]:not([inert]):not([inert] *)","button:not([inert]):not([inert] *)","[tabindex]:not(slot):not([inert]):not([inert] *)","audio[controls]:not([inert]):not([inert] *)","video[controls]:not([inert]):not([inert] *)",'[contenteditable]:not([contenteditable="false"]):not([inert]):not([inert] *)',"details>summary:first-of-type:not([inert]):not([inert] *)","details:not([inert]):not([inert] *)"],Xz=Ike.join(","),Mke=typeof Element>"u",i_=Mke?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Jz=!Mke&&Element.prototype.getRootNode?function(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}:function(t){return t?.ownerDocument},Kz=function(e,i){var r;i===void 0&&(i=!0);var n=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),s=n===""||n==="true",a=s||i&&e&&(typeof e.closest=="function"?e.closest("[inert]"):Kz(e.parentNode));return a},gmt=function(e){var i,r=e==null||(i=e.getAttribute)===null||i===void 0?void 0:i.call(e,"contenteditable");return r===""||r==="true"},Ake=function(e,i,r){if(Kz(e))return[];var n=Array.prototype.slice.apply(e.querySelectorAll(Xz));return i&&i_.call(e,Xz)&&n.unshift(e),n=n.filter(r),n},Qz=function(e,i,r){for(var n=[],s=Array.from(e);s.length;){var a=s.shift();if(!Kz(a,!1))if(a.tagName==="SLOT"){var o=a.assignedElements(),l=o.length?o:a.children,c=Qz(l,!0,r);r.flatten?n.push.apply(n,c):n.push({scopeParent:a,candidates:c})}else{var h=i_.call(a,Xz);h&&r.filter(a)&&(i||!e.includes(a))&&n.push(a);var f=a.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(a),g=!Kz(f,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(a));if(f&&g){var y=Qz(f===!0?a.children:f.children,!0,r);r.flatten?n.push.apply(n,y):n.push({scopeParent:a,candidates:y})}else s.unshift.apply(s,a.children)}}return n},Pke=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},L0=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||gmt(e))&&!Pke(e)?0:e.tabIndex},ymt=function(e,i){var r=L0(e);return r<0&&i&&!Pke(e)?0:r},vmt=function(e,i){return e.tabIndex===i.tabIndex?e.documentOrder-i.documentOrder:e.tabIndex-i.tabIndex},Oke=function(e){return e.tagName==="INPUT"},bmt=function(e){return Oke(e)&&e.type==="hidden"},wmt=function(e){var i=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return i},_mt=function(e,i){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===i)return e[r]},xmt=function(e){if(!e.name)return!0;var i=e.form||Jz(e),r=function(o){return i.querySelectorAll('input[type="radio"][name="'+o+'"]')},n;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")n=r(window.CSS.escape(e.name));else try{n=r(e.name)}catch(a){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",a.message),!1}var s=_mt(n,e.form);return!s||s===e},Smt=function(e){return Oke(e)&&e.type==="radio"},$mt=function(e){return Smt(e)&&!xmt(e)},Tmt=function(e){var i,r=e&&Jz(e),n=(i=r)===null||i===void 0?void 0:i.host,s=!1;if(r&&r!==e){var a,o,l;for(s=!!((a=n)!==null&&a!==void 0&&(o=a.ownerDocument)!==null&&o!==void 0&&o.contains(n)||e!=null&&(l=e.ownerDocument)!==null&&l!==void 0&&l.contains(e));!s&&n;){var c,h,f;r=Jz(n),n=(c=r)===null||c===void 0?void 0:c.host,s=!!((h=n)!==null&&h!==void 0&&(f=h.ownerDocument)!==null&&f!==void 0&&f.contains(n))}}return s},pue=function(e){var i=e.getBoundingClientRect(),r=i.width,n=i.height;return r===0&&n===0},kmt=function(e,i){var r=i.displayCheck,n=i.getShadowRoot;if(r==="full-native"&&"checkVisibility"in e){var s=e.checkVisibility({checkOpacity:!1,opacityProperty:!1,contentVisibilityAuto:!0,visibilityProperty:!0,checkVisibilityCSS:!0});return!s}if(getComputedStyle(e).visibility==="hidden")return!0;var a=i_.call(e,"details>summary:first-of-type"),o=a?e.parentElement:e;if(i_.call(o,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="full-native"||r==="legacy-full"){if(typeof n=="function"){for(var l=e;e;){var c=e.parentElement,h=Jz(e);if(c&&!c.shadowRoot&&n(c)===!0)return pue(e);e.assignedSlot?e=e.assignedSlot:!c&&h!==e.ownerDocument?e=h.host:e=c}e=l}if(Tmt(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return pue(e);return!1},Emt=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var i=e.parentElement;i;){if(i.tagName==="FIELDSET"&&i.disabled){for(var r=0;r<i.children.length;r++){var n=i.children.item(r);if(n.tagName==="LEGEND")return i_.call(i,"fieldset[disabled] *")?!0:!n.contains(e)}return!0}i=i.parentElement}return!1},e5=function(e,i){return!(i.disabled||bmt(i)||kmt(i,e)||wmt(i)||Emt(i))},Bq=function(e,i){return!($mt(i)||L0(i)<0||!e5(e,i))},Cmt=function(e){var i=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(i)||i>=0)},Lke=function(e){var i=[],r=[];return e.forEach(function(n,s){var a=!!n.scopeParent,o=a?n.scopeParent:n,l=ymt(o,a),c=a?Lke(n.candidates):o;l===0?a?i.push.apply(i,c):i.push(o):r.push({documentOrder:s,tabIndex:l,item:n,isScope:a,content:c})}),r.sort(vmt).reduce(function(n,s){return s.isScope?n.push.apply(n,s.content):n.push(s.content),n},[]).concat(i)},Imt=function(e,i){i=i||{};var r;return i.getShadowRoot?r=Qz([e],i.includeContainer,{filter:Bq.bind(null,i),flatten:!1,getShadowRoot:i.getShadowRoot,shadowRootFilter:Cmt}):r=Ake(e,i.includeContainer,Bq.bind(null,i)),Lke(r)},Mmt=function(e,i){i=i||{};var r;return i.getShadowRoot?r=Qz([e],i.includeContainer,{filter:e5.bind(null,i),flatten:!0,getShadowRoot:i.getShadowRoot}):r=Ake(e,i.includeContainer,e5.bind(null,i)),r},Y1=function(e,i){if(i=i||{},!e)throw new Error("No node provided");return i_.call(e,Xz)===!1?!1:Bq(i,e)},Amt=Ike.concat("iframe:not([inert]):not([inert] *)").join(","),uU=function(e,i){if(i=i||{},!e)throw new Error("No node provided");return i_.call(e,Amt)===!1?!1:e5(i,e)};function Uq(t,e){(e==null||e>t.length)&&(e=t.length);for(var i=0,r=Array(e);i<e;i++)r[i]=t[i];return r}function Pmt(t){if(Array.isArray(t))return Uq(t)}function fue(t,e){var i=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=Dke(t))||e){i&&(t=i);var r=0,n=function(){};return{s:n,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(l){throw l},f:n}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s,a=!0,o=!1;return{s:function(){i=i.call(t)},n:function(){var l=i.next();return a=l.done,l},e:function(l){o=!0,s=l},f:function(){try{a||i.return==null||i.return()}finally{if(o)throw s}}}}function Omt(t,e,i){return(e=Fmt(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Lmt(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Dmt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mue(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),i.push.apply(i,r)}return i}function gue(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?mue(Object(i),!0).forEach(function(r){Omt(t,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):mue(Object(i)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(i,r))})}return t}function Rmt(t){return Pmt(t)||Lmt(t)||Dke(t)||Dmt()}function zmt(t,e){if(typeof t!="object"||!t)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Fmt(t){var e=zmt(t,"string");return typeof e=="symbol"?e:e+""}function Dke(t,e){if(t){if(typeof t=="string")return Uq(t,e);var i={}.toString.call(t).slice(8,-1);return i==="Object"&&t.constructor&&(i=t.constructor.name),i==="Map"||i==="Set"?Array.from(t):i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Uq(t,e):void 0}}var Cm={getActiveTrap:function(e){return e?.length>0?e[e.length-1]:null},activateTrap:function(e,i){var r=Cm.getActiveTrap(e);i!==r&&Cm.pauseTrap(e);var n=e.indexOf(i);n===-1||e.splice(n,1),e.push(i)},deactivateTrap:function(e,i){var r=e.indexOf(i);r!==-1&&e.splice(r,1),Cm.unpauseTrap(e)},pauseTrap:function(e){var i=Cm.getActiveTrap(e);i?._setPausedState(!0)},unpauseTrap:function(e){var i=Cm.getActiveTrap(e);i&&!i._isManuallyPaused()&&i._setPausedState(!1)}},Nmt=function(e){return e.tagName&&e.tagName.toLowerCase()==="input"&&typeof e.select=="function"},jmt=function(e){return e?.key==="Escape"||e?.key==="Esc"||e?.keyCode===27},YC=function(e){return e?.key==="Tab"||e?.keyCode===9},Vmt=function(e){return YC(e)&&!e.shiftKey},Bmt=function(e){return YC(e)&&e.shiftKey},yue=function(e){return setTimeout(e,0)},N2=function(e){for(var i=arguments.length,r=new Array(i>1?i-1:0),n=1;n<i;n++)r[n-1]=arguments[n];return typeof e=="function"?e.apply(void 0,r):e},IL=function(e){return e.target.shadowRoot&&typeof e.composedPath=="function"?e.composedPath()[0]:e.target},Umt=[],Hmt=function(e,i){var r=i?.document||document,n=i?.trapStack||Umt,s=gue({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isolateSubtrees:!1,isKeyForward:Vmt,isKeyBackward:Bmt},i),a={containers:[],containerGroups:[],tabbableGroups:[],adjacentElements:new Set,alreadySilent:new Set,nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,manuallyPaused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0},o,l=function(K,le,re){return K&&K[le]!==void 0?K[le]:s[re||le]},c=function(K,le){var re=typeof le?.composedPath=="function"?le.composedPath():void 0;return a.containerGroups.findIndex(function(he){var xe=he.container,Pe=he.tabbableNodes;return xe.contains(K)||re?.includes(xe)||Pe.find(function(He){return He===K})})},h=function(K){var le=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},re=le.hasFallback,he=re===void 0?!1:re,xe=le.params,Pe=xe===void 0?[]:xe,He=s[K];if(typeof He=="function"&&(He=He.apply(void 0,Rmt(Pe))),He===!0&&(He=void 0),!He){if(He===void 0||He===!1)return He;throw new Error("`".concat(K,"` was specified but was not a node, or did not return a node"))}var oe=He;if(typeof He=="string"){try{oe=r.querySelector(He)}catch(be){throw new Error("`".concat(K,'` appears to be an invalid selector; error="').concat(be.message,'"'))}if(!oe&&!he)throw new Error("`".concat(K,"` as selector refers to no known node"))}return oe},f=function(){var K=h("initialFocus",{hasFallback:!0});if(K===!1)return!1;if(K===void 0||K&&!uU(K,s.tabbableOptions))if(c(r.activeElement)>=0)K=r.activeElement;else{var le=a.tabbableGroups[0],re=le&&le.firstTabbableNode;K=re||h("fallbackFocus")}else K===null&&(K=h("fallbackFocus"));if(!K)throw new Error("Your focus-trap needs to have at least one focusable element");return K},g=function(){if(a.containerGroups=a.containers.map(function(K){var le=Imt(K,s.tabbableOptions),re=Mmt(K,s.tabbableOptions),he=le.length>0?le[0]:void 0,xe=le.length>0?le[le.length-1]:void 0,Pe=re.find(function(be){return Y1(be)}),He=re.slice().reverse().find(function(be){return Y1(be)}),oe=!!le.find(function(be){return L0(be)>0});return{container:K,tabbableNodes:le,focusableNodes:re,posTabIndexesFound:oe,firstTabbableNode:he,lastTabbableNode:xe,firstDomTabbableNode:Pe,lastDomTabbableNode:He,nextTabbableNode:function(Le){var Je=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,st=le.indexOf(Le);return st<0?Je?re.slice(re.indexOf(Le)+1).find(function(ut){return Y1(ut)}):re.slice(0,re.indexOf(Le)).reverse().find(function(ut){return Y1(ut)}):le[st+(Je?1:-1)]}}}),a.tabbableGroups=a.containerGroups.filter(function(K){return K.tabbableNodes.length>0}),a.tabbableGroups.length<=0&&!h("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(a.containerGroups.find(function(K){return K.posTabIndexesFound})&&a.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")},y=function(K){var le=K.activeElement;if(le)return le.shadowRoot&&le.shadowRoot.activeElement!==null?y(le.shadowRoot):le},b=function(K){if(K!==!1&&K!==y(document)){if(!K||!K.focus){b(f());return}K.focus({preventScroll:!!s.preventScroll}),a.mostRecentlyFocusedNode=K,Nmt(K)&&K.select()}},_=function(K){var le=h("setReturnFocus",{params:[K]});return le||(le===!1?!1:K)},S=function(K){var le=K.target,re=K.event,he=K.isBackward,xe=he===void 0?!1:he;le=le||IL(re),g();var Pe=null;if(a.tabbableGroups.length>0){var He=c(le,re),oe=He>=0?a.containerGroups[He]:void 0;if(He<0)xe?Pe=a.tabbableGroups[a.tabbableGroups.length-1].lastTabbableNode:Pe=a.tabbableGroups[0].firstTabbableNode;else if(xe){var be=a.tabbableGroups.findIndex(function(pi){var it=pi.firstTabbableNode;return le===it});if(be<0&&(oe.container===le||uU(le,s.tabbableOptions)&&!Y1(le,s.tabbableOptions)&&!oe.nextTabbableNode(le,!1))&&(be=He),be>=0){var Le=be===0?a.tabbableGroups.length-1:be-1,Je=a.tabbableGroups[Le];Pe=L0(le)>=0?Je.lastTabbableNode:Je.lastDomTabbableNode}else YC(re)||(Pe=oe.nextTabbableNode(le,!1))}else{var st=a.tabbableGroups.findIndex(function(pi){var it=pi.lastTabbableNode;return le===it});if(st<0&&(oe.container===le||uU(le,s.tabbableOptions)&&!Y1(le,s.tabbableOptions)&&!oe.nextTabbableNode(le))&&(st=He),st>=0){var ut=st===a.tabbableGroups.length-1?0:st+1,Pt=a.tabbableGroups[ut];Pe=L0(le)>=0?Pt.firstTabbableNode:Pt.firstDomTabbableNode}else YC(re)||(Pe=oe.nextTabbableNode(le))}}else Pe=h("fallbackFocus");return Pe},$=function(K){var le=IL(K);if(!(c(le,K)>=0)){if(N2(s.clickOutsideDeactivates,K)){o.deactivate({returnFocus:s.returnFocusOnDeactivate});return}N2(s.allowOutsideClick,K)||K.preventDefault()}},C=function(K){var le=IL(K),re=c(le,K)>=0;if(re||le instanceof Document)re&&(a.mostRecentlyFocusedNode=le);else{K.stopImmediatePropagation();var he,xe=!0;if(a.mostRecentlyFocusedNode)if(L0(a.mostRecentlyFocusedNode)>0){var Pe=c(a.mostRecentlyFocusedNode),He=a.containerGroups[Pe].tabbableNodes;if(He.length>0){var oe=He.findIndex(function(be){return be===a.mostRecentlyFocusedNode});oe>=0&&(s.isKeyForward(a.recentNavEvent)?oe+1<He.length&&(he=He[oe+1],xe=!1):oe-1>=0&&(he=He[oe-1],xe=!1))}}else a.containerGroups.some(function(be){return be.tabbableNodes.some(function(Le){return L0(Le)>0})})||(xe=!1);else xe=!1;xe&&(he=S({target:a.mostRecentlyFocusedNode,isBackward:s.isKeyBackward(a.recentNavEvent)})),b(he||a.mostRecentlyFocusedNode||f())}a.recentNavEvent=void 0},I=function(K){var le=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;a.recentNavEvent=K;var re=S({event:K,isBackward:le});re&&(YC(K)&&K.preventDefault(),b(re))},P=function(K){(s.isKeyForward(K)||s.isKeyBackward(K))&&I(K,s.isKeyBackward(K))},O=function(K){jmt(K)&&N2(s.escapeDeactivates,K)!==!1&&(K.preventDefault(),o.deactivate())},N=function(K){var le=IL(K);c(le,K)>=0||N2(s.clickOutsideDeactivates,K)||N2(s.allowOutsideClick,K)||(K.preventDefault(),K.stopImmediatePropagation())},R=function(){if(a.active)return Cm.activateTrap(n,o),a.delayInitialFocusTimer=s.delayInitialFocus?yue(function(){b(f())}):b(f()),r.addEventListener("focusin",C,!0),r.addEventListener("mousedown",$,{capture:!0,passive:!1}),r.addEventListener("touchstart",$,{capture:!0,passive:!1}),r.addEventListener("click",N,{capture:!0,passive:!1}),r.addEventListener("keydown",P,{capture:!0,passive:!1}),r.addEventListener("keydown",O),o},G=function(K){a.active&&!a.paused&&o._setSubtreeIsolation(!1),a.adjacentElements.clear(),a.alreadySilent.clear();var le=new Set,re=new Set,he=fue(K),xe;try{for(he.s();!(xe=he.n()).done;){var Pe=xe.value;le.add(Pe);for(var He=typeof ShadowRoot<"u"&&Pe.getRootNode()instanceof ShadowRoot,oe=Pe;oe;){le.add(oe);var be=oe.parentElement,Le=[];be?Le=be.children:!be&&He&&(Le=oe.getRootNode().children,be=oe.getRootNode().host,He=typeof ShadowRoot<"u"&&be.getRootNode()instanceof ShadowRoot);var Je=fue(Le),st;try{for(Je.s();!(st=Je.n()).done;){var ut=st.value;re.add(ut)}}catch(Pt){Je.e(Pt)}finally{Je.f()}oe=be}}}catch(Pt){he.e(Pt)}finally{he.f()}le.forEach(function(Pt){re.delete(Pt)}),a.adjacentElements=re},Y=function(){if(a.active)return r.removeEventListener("focusin",C,!0),r.removeEventListener("mousedown",$,!0),r.removeEventListener("touchstart",$,!0),r.removeEventListener("click",N,!0),r.removeEventListener("keydown",P,!0),r.removeEventListener("keydown",O),o},Q=function(K){var le=K.some(function(re){var he=Array.from(re.removedNodes);return he.some(function(xe){return xe===a.mostRecentlyFocusedNode})});le&&b(f())},ae=typeof window<"u"&&"MutationObserver"in window?new MutationObserver(Q):void 0,ce=function(){ae&&(ae.disconnect(),a.active&&!a.paused&&a.containers.map(function(K){ae.observe(K,{subtree:!0,childList:!0})}))};return o={get active(){return a.active},get paused(){return a.paused},activate:function(K){if(a.active)return this;var le=l(K,"onActivate"),re=l(K,"onPostActivate"),he=l(K,"checkCanFocusTrap"),xe=Cm.getActiveTrap(n),Pe=!1;if(xe&&!xe.paused){var He;(He=xe._setSubtreeIsolation)===null||He===void 0||He.call(xe,!1),Pe=!0}try{he||g(),a.active=!0,a.paused=!1,a.nodeFocusedBeforeActivation=y(r),le?.();var oe=function(){he&&g(),R(),ce(),s.isolateSubtrees&&o._setSubtreeIsolation(!0),re?.()};if(he)return he(a.containers.concat()).then(oe,oe),this;oe()}catch(Le){if(xe===Cm.getActiveTrap(n)&&Pe){var be;(be=xe._setSubtreeIsolation)===null||be===void 0||be.call(xe,!0)}throw Le}return this},deactivate:function(K){if(!a.active)return this;var le=gue({onDeactivate:s.onDeactivate,onPostDeactivate:s.onPostDeactivate,checkCanReturnFocus:s.checkCanReturnFocus},K);clearTimeout(a.delayInitialFocusTimer),a.delayInitialFocusTimer=void 0,a.paused||o._setSubtreeIsolation(!1),a.alreadySilent.clear(),Y(),a.active=!1,a.paused=!1,ce(),Cm.deactivateTrap(n,o);var re=l(le,"onDeactivate"),he=l(le,"onPostDeactivate"),xe=l(le,"checkCanReturnFocus"),Pe=l(le,"returnFocus","returnFocusOnDeactivate");re?.();var He=function(){yue(function(){Pe&&b(_(a.nodeFocusedBeforeActivation)),he?.()})};return Pe&&xe?(xe(_(a.nodeFocusedBeforeActivation)).then(He,He),this):(He(),this)},pause:function(K){return a.active?(a.manuallyPaused=!0,this._setPausedState(!0,K)):this},unpause:function(K){return a.active?(a.manuallyPaused=!1,n[n.length-1]!==this?this:this._setPausedState(!1,K)):this},updateContainerElements:function(K){var le=[].concat(K).filter(Boolean);return a.containers=le.map(function(re){return typeof re=="string"?r.querySelector(re):re}),s.isolateSubtrees&&G(a.containers),a.active&&(g(),s.isolateSubtrees&&!a.paused&&o._setSubtreeIsolation(!0)),ce(),this}},Object.defineProperties(o,{_isManuallyPaused:{value:function(){return a.manuallyPaused}},_setPausedState:{value:function(K,le){if(a.paused===K)return this;if(a.paused=K,K){var re=l(le,"onPause"),he=l(le,"onPostPause");re?.(),Y(),ce(),o._setSubtreeIsolation(!1),he?.()}else{var xe=l(le,"onUnpause"),Pe=l(le,"onPostUnpause");xe?.(),o._setSubtreeIsolation(!0),g(),R(),ce(),Pe?.()}return this}},_setSubtreeIsolation:{value:function(K){s.isolateSubtrees&&a.adjacentElements.forEach(function(le){var re;K?s.isolateSubtrees==="aria-hidden"?((le.ariaHidden==="true"||((re=le.getAttribute("aria-hidden"))===null||re===void 0?void 0:re.toLowerCase())==="true")&&a.alreadySilent.add(le),le.setAttribute("aria-hidden","true")):((le.inert||le.hasAttribute("inert"))&&a.alreadySilent.add(le),le.setAttribute("inert",!0)):a.alreadySilent.has(le)||(s.isolateSubtrees==="aria-hidden"?le.removeAttribute("aria-hidden"):le.removeAttribute("inert"))})}}}),o.updateContainerElements(e),o};const BD=new WeakSet;function Gmt(t,e){return BD.has(t)||H$(e),!1}function qmt(t,e){const i=e?.fallbackFocus||t,r=e?.clickOutsideDeactivates??!0;return{fallbackFocus:i,...e,document:t.ownerDocument,tabbableOptions:aZ,trapStack:$ze,clickOutsideDeactivates:n=>(BD.has(t)||BD.add(t),typeof r=="function"?r(n):r),onPostDeactivate:()=>{BD.delete(t)},setReturnFocus:n=>{const s=typeof e?.setReturnFocus=="function"?e.setReturnFocus(n):e?.setReturnFocus;return s===void 0?Gmt(t,n):s}}}function vue(t,{focusTrapOptions:e},i){return!e?.extraContainers&&!i?t:[t,...bue(e?.extraContainers),...bue(i)]}function bue(t=[]){return Array.isArray(t)?t:[t]}const Rke=t=>b_((e,i)=>{let r,n,s;const a=t.focusTrapOptions;i.onConnected(()=>{e[t.triggerProp]&&r&&o.activate()}),i.onUpdate(l=>{e.hasUpdated&&l.has("focusTrapDisabled")&&(e.focusTrapDisabled?o.deactivate():o.activate())}),i.onDisconnected(()=>o.deactivate());const o={activate:()=>{const l=n||e.el;if(l.isConnected){if(!r){const c={...a,...e.focusTrapOptions};s||=vue(l,e),r=Hmt(s,qmt(l,c))}(typeof e.focusTrapDisabledOverride=="function"?!e.focusTrapDisabledOverride():!e.focusTrapDisabled)&&r.activate()}},deactivate:()=>r?.deactivate(),overrideFocusTrapEl:l=>{if(r)throw new Error("Focus trap already created");n=l},setExtraContainers:l=>{const c=n||e.el;s=vue(c,e,l)},updateContainerElements:()=>r?.updateContainerElements(s)};return o});const oy={scrim:"scrim",container:"container",containerOpen:"container--open",content:"content",contentContainer:"content-container",containerEmbedded:"container--embedded",resizeHandle:"resize-handle",resizeHandleBar:"resize-handle-bar"},Wmt={sheetContent:"sheet-content"},wue={dragVertical:"drag-resize-vertical",dragHorizontal:"drag-resize-horizontal"},Ymt=St`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{position:absolute;inset:0;z-index:var(--calcite-z-index-overlay);display:flex;visibility:hidden!important;--calcite-sheet-scrim-background-internal: rgba(0, 0, 0, .85);--calcite-scrim-shadow-block-start-internal: 0 4px 8px -1px rgba(0, 0, 0, .08), 0 2px 4px -1px rgba(0, 0, 0, .04);--calcite-scrim-shadow-block-end-internal: 0 -4px 8px -1px rgba(0, 0, 0, .08), 0 -2px 4px -1px rgba(0, 0, 0, .04);--calcite-scrim-shadow-inline-start-internal: 4px 0 8px -1px rgba(0, 0, 0, .08), 2px 0 4px -1px rgba(0, 0, 0, .04);--calcite-scrim-shadow-inline-end-internal: -4px 0 8px -1px rgba(0, 0, 0, .08), -2px 0 4px -1px rgba(0, 0, 0, .04)}.calcite--rtl{--calcite-scrim-shadow-inline-start-internal: -4px 0 8px -1px rgba(0, 0, 0, .08), -2px 0 4px -1px rgba(0, 0, 0, .04);--calcite-scrim-shadow-inline-end-internal: 4px 0 8px -1px rgba(0, 0, 0, .08), 2px 0 4px -1px rgba(0, 0, 0, .04)}.assistive-text{position:absolute;inline-size:1px;block-size:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border-width:0}.container{visibility:hidden;position:fixed;z-index:var(--calcite-z-index-overlay);box-sizing:border-box;display:flex;opacity:0;color:var(--calcite-sheet-text-color, var(--calcite-color-text-2));transition:visibility 0ms linear var(--calcite-internal-animation-timing-medium),opacity var(--calcite-internal-animation-timing-medium) cubic-bezier(.215,.44,.42,.88)}:host([position=inline-start]) .container{justify-content:flex-start;inset-block:0;inset-inline:0 auto;--calcite-sheet-hidden-position-internal: translate3d(-1rem, 0, 0)}:host([position=inline-end]) .container{justify-content:flex-end;inset-block:0;inset-inline:auto 0;--calcite-sheet-hidden-position-internal: translate3d(1rem, 0, 0)}:host([position=block-start]) .container{align-items:flex-start;inset-block:0 auto;inset-inline:0;--calcite-sheet-hidden-position-internal: translate3d(0, -1rem, 0)}:host([position=block-end]) .container{align-items:flex-end;inset-block:auto 0;inset-inline:0;--calcite-sheet-hidden-position-internal: translate3d(0, 1rem, 0)}:host([display-mode=float]) .content{--tw-shadow: 0 2px 12px -4px rgba(0, 0, 0, .2), 0 2px 4px -2px rgba(0, 0, 0, .16);--tw-shadow-colored: 0 2px 12px -4px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--calcite-sheet-shadow, var(--tw-ring-offset-shadow, 0 0 rgba(0, 0, 0, 0)), var(--tw-ring-shadow, 0 0 rgba(0, 0, 0, 0)), var(--tw-shadow))}:host([display-mode=overlay][position=inline-start]) .container{box-shadow:var(--calcite-scrim-shadow-inline-start-internal)}:host([display-mode=overlay][position=inline-end]) .container{box-shadow:var(--calcite-scrim-shadow-inline-end-internal)}:host([display-mode=overlay][position=block-start]) .container{box-shadow:var(--calcite-scrim-shadow-block-start-internal)}:host([display-mode=overlay][position=block-end]) .container{box-shadow:var(--calcite-scrim-shadow-block-end-internal)}:host([position^=inline]) .content{inline-size:var(--calcite-sheet-width-internal);max-inline-size:var(--calcite-sheet-max-width-internal);min-inline-size:var(--calcite-sheet-min-width-internal)}:host([position^=block]) .content{block-size:var(--calcite-sheet-height-internal);max-block-size:var(--calcite-sheet-max-height-internal);min-block-size:var(--calcite-sheet-min-height-internal)}:host([position^=inline]) .width-s{--calcite-sheet-width-internal: var(--calcite-sheet-width, 15vw);--calcite-sheet-max-width-internal: var(--calcite-sheet-max-width, 360px);--calcite-sheet-min-width-internal: var(--calcite-sheet-min-width, 260px)}:host([position^=inline]) .width-m{--calcite-sheet-width-internal: var(--calcite-sheet-width, 25vw);--calcite-sheet-max-width-internal: var(--calcite-sheet-max-width, 420px);--calcite-sheet-min-width-internal: var(--calcite-sheet-min-width, 300px)}:host([position^=inline]) .width-l{--calcite-sheet-width-internal: var(--calcite-sheet-width, 45vw);--calcite-sheet-max-width-internal: var(--calcite-sheet-max-width, 680px);--calcite-sheet-min-width-internal: var(--calcite-sheet-min-width, 340px)}:host([position^=block]) .height-s{--calcite-sheet-min-height-internal: var(--calcite-sheet-min-height, 160px);--calcite-sheet-height-internal: var(--calcite-sheet-height, 30vh);--calcite-sheet-max-height-internal: var(--calcite-sheet-max-height, 30vh)}:host([position^=block]) .height-m{--calcite-sheet-min-height-internal: var(--calcite-sheet-min-height, 200px);--calcite-sheet-height-internal: var(--calcite-sheet-height, 45vh);--calcite-sheet-max-height-internal: var(--calcite-sheet-max-height, 50vh)}:host([position^=block]) .height-l{--calcite-sheet-min-height-internal: var(--calcite-sheet-min-height, 240px);--calcite-sheet-height-internal: var(--calcite-sheet-height, 60vh);--calcite-sheet-max-height-internal: var(--calcite-sheet-max-height, 70vh)}.scrim{--calcite-scrim-background: var(--calcite-sheet-scrim-background, var(--calcite-sheet-scrim-background-internal));position:fixed;inset:0;display:flex;overflow:hidden}:host([opened]){visibility:visible!important}.content{position:relative;z-index:var(--calcite-z-index-modal);box-sizing:border-box;display:flex;max-inline-size:100%;padding:0;background-color:var(--calcite-sheet-background-color, var(--calcite-color-foreground-1));max-block-size:100%;visibility:hidden;transition:transform var(--calcite-internal-animation-timing-medium) cubic-bezier(.215,.44,.42,.88),visibility 0ms linear var(--calcite-internal-animation-timing-medium),opacity var(--calcite-internal-animation-timing-medium) cubic-bezier(.215,.44,.42,.88);transform:var(--calcite-sheet-hidden-position-internal)}.content-container{position:relative;display:flex;max-block-size:100%;max-inline-size:100%;flex:1 1 0%;overflow:hidden}.container--open .content{transform:translateZ(0)}:host([display-mode=float]) .content,:host([display-mode=float]) .container,:host([display-mode=float]) .content-container{border-radius:var(--calcite-sheet-corner-radius, var(--calcite-corner-radius-round))}:host([display-mode=float]) .container{padding:var(--calcite-spacing-md)}.container--open{visibility:visible;opacity:1;transition-delay:0ms}.container--open .content{pointer-events:auto;visibility:visible;opacity:1;transition:transform var(--calcite-internal-animation-timing-medium) cubic-bezier(.215,.44,.42,.88),visibility 0ms linear,opacity var(--calcite-internal-animation-timing-medium) cubic-bezier(.215,.44,.42,.88),max-inline-size var(--calcite-internal-animation-timing-medium) cubic-bezier(.215,.44,.42,.88),max-block-size var(--calcite-internal-animation-timing-medium) cubic-bezier(.215,.44,.42,.88);transition-delay:0ms}:host([position=inline-start]) .content,:host([position=inline-end]) .content{block-size:100%}:host([position=inline-start]) .content{flex-direction:row}:host([position=inline-end]) .content{flex-direction:row-reverse}:host([position=block-start]) .content,:host([position=block-end]) .content{inline-size:100%}:host([position=block-start]) .content{flex-direction:column}:host([position=block-end]) .content{flex-direction:column-reverse}:host([resizable][position=inline-start]) .content{padding-inline-end:var(--calcite-size-fixed-sm-plus)}:host([resizable][position=inline-end]) .content{padding-inline-start:var(--calcite-size-fixed-sm-plus)}:host([resizable][position=block-start]) .content{padding-block-end:var(--calcite-size-fixed-sm-plus)}:host([resizable][position=block-end]) .content{padding-block-start:var(--calcite-size-fixed-sm-plus)}.resize-handle{position:absolute;box-sizing:border-box;display:flex;-webkit-user-select:none;user-select:none;align-items:center;justify-content:center;outline:2px solid transparent;outline-offset:2px;--calcite-internal-sheet-resize-handle-offset: calc( (var(--calcite-size-fixed-xxl) - var(--calcite-size-fixed-sm-plus)) / 2 * -1 );z-index:var(--calcite-z-index-header)}.resize-handle:active .resize-handle-bar,.resize-handle:hover .resize-handle-bar{color:var(--calcite-sheet-resize-icon-color, var(--calcite-color-text-1));background-color:var(--calcite-sheet-resize-background-color, var(--calcite-color-foreground-3))}.resize-handle-bar{pointer-events:none;display:flex;align-items:center;justify-content:center;color:var(--calcite-sheet-resize-icon-color, var(--calcite-color-border-input));background-color:var(--calcite-sheet-resize-background-color, var(--calcite-color-background))}.resize-handle:focus .resize-handle-bar{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline-color:transparent;outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus)}:host([position=inline-start]) .resize-handle{inline-size:var(--calcite-size-fixed-xxl);inset-inline-end:var(--calcite-internal-sheet-resize-handle-offset);block-size:100%}:host([position=inline-start]) .resize-handle-bar{block-size:100%;inline-size:var(--calcite-size-fixed-sm-plus);border-inline-start:var(--calcite-border-width-sm) solid var(--calcite-sheet-border-color, var(--calcite-color-border-3))}:host([position=inline-start]):host([display-mode=float]) .resize-handle-bar{border-start-end-radius:var(--calcite-sheet-corner-radius, var(--calcite-corner-radius-round));border-end-end-radius:var(--calcite-sheet-corner-radius, var(--calcite-corner-radius-round))}:host([position=inline-end]) .resize-handle{inline-size:var(--calcite-size-fixed-xxl);inset-inline-start:var(--calcite-internal-sheet-resize-handle-offset);block-size:100%}:host([position=inline-end]) .resize-handle-bar{block-size:100%;inline-size:var(--calcite-size-fixed-sm-plus);border-inline-end:var(--calcite-border-width-sm) solid var(--calcite-sheet-border-color, var(--calcite-color-border-3))}:host([position=inline-end]):host([display-mode=float]) .resize-handle-bar{border-start-start-radius:.25rem;border-end-start-radius:.25rem}:host([position=block-start]) .resize-handle{block-size:var(--calcite-size-fixed-xxl);inline-size:100%;inset-block-end:var(--calcite-internal-sheet-resize-handle-offset)}:host([position=block-start]) .resize-handle-bar{inline-size:100%;block-size:var(--calcite-size-fixed-sm-plus);border-block-start:var(--calcite-border-width-sm) solid var(--calcite-sheet-border-color, var(--calcite-color-border-3))}:host([position=block-start]):host([display-mode=float]) .resize-handle-bar{border-end-end-radius:.25rem;border-end-start-radius:.25rem}:host([position=block-end]) .resize-handle{block-size:var(--calcite-size-fixed-xxl);inline-size:100%;inset-block-start:var(--calcite-internal-sheet-resize-handle-offset)}:host([position=block-end]) .resize-handle-bar{inline-size:100%;block-size:var(--calcite-size-fixed-sm-plus);border-block-end:var(--calcite-border-width-sm) solid var(--calcite-sheet-border-color, var(--calcite-color-border-3))}:host([position=block-end]):host([display-mode=float]) .resize-handle-bar{border-start-start-radius:var(--calcite-sheet-corner-radius, var(--calcite-corner-radius-round));border-start-end-radius:var(--calcite-sheet-corner-radius, var(--calcite-corner-radius-round))}:host([position]) .container--embedded{pointer-events:auto;position:absolute;inline-size:100%;max-inline-size:100%;min-inline-size:100%;block-size:100%;max-block-size:100%;min-block-size:100%}:host([position]) .container--embedded calcite-scrim{position:absolute}:host([hidden]){display:none}[hidden]{display:none}`,Q5=class Q5 extends Et{constructor(){super(),this.focusTrap=Rke({triggerProp:"open",focusTrapOptions:{clickOutsideDeactivates:()=>this.embedded,escapeDeactivates:e=>(!e.defaultPrevented&&!this.escapeDisabled&&(this.open=!1,e.preventDefault()),!1)}})(this),this.usePreventDocumentScroll=mmt()(this),this.messages=qn(),this.mutationObserver=ea("mutation",()=>this.handleMutationObserver()),this._open=!1,this.openProp="opened",this.transitionProp="opacity",this.focusSetter=pn()(this),this.keyDownHandler=e=>{const{defaultPrevented:i,key:r}=e;!i&&!this.escapeDisabled&&this.focusTrapDisabled&&this.open&&r==="Escape"&&(e.preventDefault(),this.open=!1)},this.resizeValues={inlineSize:null,blockSize:null,minInlineSize:null,minBlockSize:null,maxInlineSize:null,maxBlockSize:null},this.displayMode="overlay",this.embedded=!1,this.escapeDisabled=!1,this.focusTrapDisabled=!1,this.heightScale="m",this.opened=!1,this.outsideCloseDisabled=!1,this.position="inline-start",this.resizable=!1,this.widthScale="m",this.calciteSheetBeforeClose=Re({cancelable:!1}),this.calciteSheetBeforeOpen=Re({cancelable:!1}),this.calciteSheetClose=Re({cancelable:!1}),this.calciteSheetOpen=Re({cancelable:!1}),this.listen("keydown",this.keyDownHandler)}get preventDocumentScroll(){return!this.embedded}get open(){return this._open}set open(e){const i=this._open;e!==i&&this.setOpenState(e)}async setFocus(e){return this.focusSetter(()=>this.el,e)}async updateFocusTrapElements(e){this.focusTrap.setExtraContainers(e),this.focusTrap.updateContainerElements()}connectedCallback(){super.connectedCallback(),this.mutationObserver?.observe(this.el,{childList:!0,subtree:!0}),this.setupInteractions()}willUpdate(e){e.has("opened")&&(this.hasUpdated||this.opened!==!1)&&__(this),(e.has("open")&&(this.hasUpdated||this.open!==!1)||e.has("position")&&(this.hasUpdated||this.position!=="inline-start")||e.has("resizable")&&(this.hasUpdated||this.resizable!==!1))&&this.setupInteractions()}disconnectedCallback(){super.disconnectedCallback(),this.mutationObserver?.disconnect(),this.embedded=!1,this.cleanupInteractions()}async setOpenState(e){if(this.beforeClose&&!e)try{await this.beforeClose?.(this.el)}catch{return}this._open=e,e&&await this.componentOnReady(),this.opened=e}getResizeIcon(){const{position:e}=this;return e==="block-start"||e==="block-end"?wue.dragVertical:wue.dragHorizontal}getContentElDOMRect(){return this.contentEl.getBoundingClientRect()}handleKeyDown(e){const{key:i,defaultPrevented:r,shiftKey:n}=e,{position:s,resizable:a,contentEl:o,el:l,resizeValues:{maxBlockSize:c,maxInlineSize:h,minBlockSize:f,minInlineSize:g}}=this,b=[...s==="block-end"||s==="block-start"?["ArrowUp","ArrowDown"]:["ArrowLeft","ArrowRight"],"Home","End"];if(!a||!o||r||!b.includes(i))return;const _=this.getContentElDOMRect(),S=jo(l)==="rtl"?-1:1,$=n?Tge:$ge;switch(i){case"ArrowUp":this.updateSize({size:_.height+(s==="block-end"?$:-$),type:"blockSize"}),e.preventDefault();break;case"ArrowDown":this.updateSize({size:_.height+(s==="block-end"?-$:$),type:"blockSize"}),e.preventDefault();break;case"ArrowLeft":this.updateSize({size:_.width+(s==="inline-end"?$:-$)*S,type:"inlineSize"}),e.preventDefault();break;case"ArrowRight":this.updateSize({size:_.width+(s==="inline-end"?-$:$)*S,type:"inlineSize"}),e.preventDefault();break;case"Home":this.updateSize({size:s==="block-start"||s==="block-end"?f:g,type:s==="block-start"||s==="block-end"?"blockSize":"inlineSize"}),e.preventDefault();break;case"End":this.updateSize({size:s==="block-start"||s==="block-end"?c:h,type:s==="block-start"||s==="block-end"?"blockSize":"inlineSize"}),e.preventDefault();break}}updateSize({type:e,size:i}){const{contentEl:r,resizeValues:n}=this;if(!r)return;const s=e==="blockSize"?"minBlockSize":"minInlineSize",a=e==="blockSize"?"maxBlockSize":"maxInlineSize",o=n[s]&&n[a]?Cke(i,n[s],n[a]):i,l=Math.round(o);this.resizeValues={...n,[e]:l},r.style[e]=i!==null?`${l}px`:null}cleanupInteractions(){this.interaction?.unset(),this.updateSize({size:null,type:"inlineSize"}),this.updateSize({size:null,type:"blockSize"})}async setupInteractions(){this.cleanupInteractions();const{el:e,contentEl:i,resizable:r,position:n,open:s,resizeHandleEl:a}=this;if(!i||!s||!r||!a)return;await this.el.componentOnReady();const{inlineSize:o,minInlineSize:l,blockSize:c,minBlockSize:h,maxInlineSize:f,maxBlockSize:g}=window.getComputedStyle(i),y={inlineSize:cu(o),blockSize:cu(c),minInlineSize:cu(l),minBlockSize:cu(h),maxInlineSize:cu(f)||window.innerWidth,maxBlockSize:cu(g)||window.innerHeight};this.resizeValues=y;const b=jo(e)==="rtl";this.interaction=Zz(i,{context:e.ownerDocument}).resizable({edges:{top:n==="block-end"?a:!1,right:n===(b?"inline-end":"inline-start")?a:!1,bottom:n==="block-start"?a:!1,left:n===(b?"inline-start":"inline-end")?a:!1},modifiers:[Zz.modifiers.restrictSize({min:{width:y.minInlineSize,height:y.minBlockSize},max:{width:y.maxInlineSize,height:y.maxBlockSize}})],listeners:{move:({rect:_})=>{const S=n==="block-start"||n==="block-end";this.updateSize({size:S?_.height:_.width,type:S?"blockSize":"inlineSize"})}}})}onBeforeOpen(){this.calciteSheetBeforeOpen.emit()}onOpen(){this.focusTrapDisabled&&this.setFocus(),this.focusTrap.activate(),this.calciteSheetOpen.emit()}onBeforeClose(){this.calciteSheetBeforeClose.emit()}onClose(){this.calciteSheetClose.emit(),this.focusTrap.deactivate()}setResizeHandleEl(e){this.resizeHandleEl=e,this.setupInteractions()}setContentEl(e){this.contentEl=e,this.contentId=RFe(e)}setTransitionEl(e){e&&(this.transitionEl=e)}handleOutsideClose(){this.outsideCloseDisabled||(this.open=!1)}handleMutationObserver(){this.focusTrap.updateContainerElements()}render(){const{resizable:e,position:i,resizeValues:r}=this,n=jo(this.el),s=i==="block-start"||i==="block-end";return FT(this.el,"aria-describedby",this.contentId),this.el.ariaLabel=this.label,this.el.ariaModal="true",this.el.role="dialog",J`<div class=${q({[oy.container]:!0,[oy.containerOpen]:this.opened,[oy.containerEmbedded]:this.embedded,[Uh.rtl]:n==="rtl",[iM("width",this.width,this.widthScale)]:!!(this.width||this.widthScale),[iM("height",this.height,this.heightScale)]:!!(this.height||this.heightScale)})} ${zt(this.setTransitionEl)}><calcite-scrim class=${q(oy.scrim)} @click=${this.handleOutsideClose}></calcite-scrim><div class=${q(oy.content)} id=${Wmt.sheetContent} ${zt(this.setContentEl)}><div class=${q(oy.contentContainer)}><slot></slot></div>${e?xt("resize-handle",J`<div .ariaLabel=${this.messages.resizeEnabled} .ariaOrientation=${s?"vertical":"horizontal"} .ariaValueMax=${s?r.maxBlockSize:r.maxInlineSize} .ariaValueMin=${s?r.minBlockSize:r.minInlineSize} .ariaValueNow=${s?r.blockSize:r.inlineSize} class=${q(oy.resizeHandle)} @keydown=${this.handleKeyDown} role=separator tabindex=0 touch-action=none ${zt(this.setResizeHandleEl)}><div class=${q(oy.resizeHandleBar)}><calcite-icon .icon=${this.getResizeIcon()} scale=s></calcite-icon></div></div>`):null}</div></div>`}};Q5.properties={resizeValues:[16,{},{state:!0}],beforeClose:[0,{},{attribute:!1}],displayMode:[3,{},{reflect:!0}],embedded:[5,{},{type:Boolean}],escapeDisabled:[7,{},{reflect:!0,type:Boolean}],focusTrapDisabled:[7,{},{reflect:!0,type:Boolean}],focusTrapOptions:[0,{},{attribute:!1}],heightScale:[3,{},{reflect:!0}],height:[3,{},{reflect:!0}],label:1,messageOverrides:[0,{},{attribute:!1}],open:[7,{},{reflect:!0,type:Boolean}],opened:[7,{},{reflect:!0,type:Boolean}],outsideCloseDisabled:[7,{},{reflect:!0,type:Boolean}],position:[3,{},{reflect:!0}],resizable:[7,{},{reflect:!0,type:Boolean}],widthScale:[3,{},{reflect:!0}],width:[3,{},{reflect:!0}]},Q5.styles=Ymt;let Hq=Q5;$i("calcite-sheet",Hq);const Qu={button:"button",buttonTextVisible:"button--text-visible",buttonCompact:"button--compact",indicatorText:"indicator-text",iconContainer:"icon-container",slotContainer:"slot-container",slotContainerHidden:"slot-container--hidden",textContainer:"text-container",textContainerVisible:"text-container--visible",indicatorWithIcon:"indicator-with-icon",indicatorWithoutIcon:"indicator-without-icon"},_ue="calcite-action",Zmt={button:t=>`${_ue}-${t}-button`,indicator:t=>`${_ue}-${t}-indicator`},Xmt={tooltip:"tooltip"},Jmt=St`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{box-sizing:border-box;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:flex;cursor:pointer;background-color:transparent;--calcite-internal-action-text-color: var(--calcite-color-text-3);border-radius:var(--calcite-action-corner-radius, var(--calcite-action-corner-radius-start-start, var(--calcite-corner-radius)) var(--calcite-action-corner-radius-start-end, var(--calcite-corner-radius)) var(--calcite-action-corner-radius-end-end, var(--calcite-corner-radius)) var(--calcite-action-corner-radius-end-start, var(--calcite-corner-radius)))}.interaction-container{border-radius:inherit}:host([width=full]){flex:1 0 auto}:host([width=full]) .button{justify-content:center}:host([width=full]) .button .text-container--visible{flex:none}:host([drag-handle]){cursor:move;--calcite-internal-action-text-color: var(--calcite-color-border-input);--calcite-internal-action-padding-inline: var(--calcite-spacing-xxs)}.button{border-radius:inherit;position:relative;margin:0;display:flex;inline-size:auto;align-items:center;justify-content:flex-start;border-style:none;font-family:var(--calcite-font-family);font-size:var(--calcite-font-size--2);line-height:1rem;font-weight:var(--calcite-font-weight-medium);outline-color:transparent;background-color:var(--calcite-action-background-color, var(--calcite-color-foreground-1));color:var(--calcite-action-text-color, var(--calcite-internal-action-text-color));text-align:unset;flex:1 0 auto;cursor:inherit}.button:hover{background-color:var(--calcite-action-background-color-hover, var(--calcite-color-foreground-2));color:var(--calcite-action-text-color-press, var(--calcite-action-text-color-pressed, var(--calcite-color-text-1)))}.button:focus{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(calc(-1 * var(--calcite-spacing-base)) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}.button:active{background-color:var(--calcite-action-background-color-press, var(--calcite-action-background-color-pressed, var(--calcite-color-foreground-3)))}.icon-container{pointer-events:none;margin:0;display:flex;align-items:center;justify-content:center;min-inline-size:1rem;min-block-size:1.5rem}.text-container{margin:0;inline-size:0px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;line-height:1.5rem;opacity:0;transition-property:opacity;transition-duration:var(--calcite-animation-timing);transition-timing-function:cubic-bezier(.4,0,.2,1);transition-property:inline-size}.text-container--visible{inline-size:auto;flex:1 1 auto;opacity:1}:host([active]) .button{background-color:var(--calcite-action-background-color, var(--calcite-color-foreground-3));color:var(--calcite-action-text-color-press, var(--calcite-action-text-color-pressed, var(--calcite-color-text-1)))}:host([active]) .button:hover{background-color:var(--calcite-action-background-color-hover, var(--calcite-color-foreground-3))}:host([active]) .button:active{background-color:var(--calcite-action-background-color-press, var(--calcite-action-background-color-pressed, var(--calcite-color-foreground-3)))}:host([loading]) .button:hover,:host([loading]) .button:focus{background-color:var(--calcite-action-background-color, var(--calcite-color-foreground-1))}:host([loading]) .text-container{opacity:var(--calcite-opacity-disabled)}:host([loading]) calcite-loader[inline]{margin-inline-end:0px}:host([appearance=transparent]):host([active]) .button{background-color:var(--calcite-color-transparent-press)}:host([appearance=transparent]) .button{background-color:transparent;transition-property:box-shadow;transition-duration:var(--calcite-animation-timing);transition-timing-function:cubic-bezier(.4,0,.2,1)}:host([appearance=transparent]) .button:hover{background-color:var(--calcite-color-transparent-hover)}:host([appearance=transparent]) .button:active{background-color:var(--calcite-color-transparent-press)}:host([active-descendant]) .button{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(calc(-1 * var(--calcite-spacing-base)) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}:host([scale=s]) .button{font-size:var(--calcite-font-size--2);line-height:1rem;font-weight:var(--calcite-font-weight-normal);padding-inline:var(--calcite-internal-action-padding-inline, .5rem);padding-block:var(--calcite-internal-action-padding-block, var(--calcite-spacing-xxs))}:host([scale=s]) .button--text-visible .icon-container{margin-inline-end:.5rem}:host([scale=m]) .button{font-size:var(--calcite-font-size--1);line-height:1rem;font-weight:var(--calcite-font-weight-normal);padding-inline:var(--calcite-internal-action-padding-inline, 1rem);padding-block:var(--calcite-internal-action-padding-block, var(--calcite-spacing-md))}:host([scale=m]) .button--text-visible .icon-container{margin-inline-end:.75rem}:host([scale=l]) .button{font-size:var(--calcite-font-size-0);line-height:1.25rem;font-weight:var(--calcite-font-weight-normal);padding-inline:var(--calcite-internal-action-padding-inline, 1.25rem);padding-block:var(--calcite-internal-action-padding-block, var(--calcite-spacing-xl))}:host([scale=l]) .button--text-visible .icon-container{margin-inline-end:1rem}:host([alignment=center]) .button{justify-content:center}:host([alignment=end]) .button{justify-content:flex-end}:host([alignment=center]) .button .text-container--visible,:host([alignment=end]) .button .text-container--visible{flex:0 1 auto}:host([scale=s][compact]) .button,:host([scale=m][compact]) .button,:host([scale=l][compact]) .button{padding-inline:0px}.slot-container{display:flex}.slot-container--hidden{display:none}.button--text-visible{inline-size:100%}.indicator-with-icon{position:relative}.indicator-with-icon:after{content:"";position:absolute;block-size:.5rem;inline-size:.5rem;border-radius:9999px;inset-block-end:-.275rem;inset-inline-end:-.275rem;background-color:var(--calcite-action-indicator-color, var(--calcite-color-brand))}.indicator-without-icon{margin-inline:.25rem;inline-size:1rem;position:relative}.indicator-without-icon:after{content:"";position:absolute;block-size:.5rem;inline-size:.5rem;border-radius:9999px;inset-block-end:-.275rem;inset-inline-end:-.275rem;background-color:var(--calcite-action-indicator-color, var(--calcite-color-brand))}.indicator-text{position:absolute;inline-size:1px;block-size:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border-width:0}:host([hidden]){display:none}[hidden]{display:none}:host([disabled]) .button,:host([disabled]) .button:hover,:host([disabled]) .button:focus{cursor:default;opacity:var(--calcite-opacity-disabled);background-color:var(--calcite-action-background-color, var(--calcite-action-background-color, var(--calcite-color-foreground-1)))}:host([disabled]):host([active]) .button,:host([disabled]):host([active]) .button:hover,:host([disabled]):host([active]) .button:focus{opacity:var(--calcite-opacity-disabled);background-color:var(--calcite-action-background-color-press, var(--calcite-action-background-color-press, var(--calcite-action-background-color-pressed, var(--calcite-color-foreground-3))))}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}`,eF=class eF extends Et{constructor(){super(...arguments),this.guid=Vd(),this.buttonEl=wr(),this.buttonId=Zmt.button(this.guid),this.mutationObserver=ea("mutation",()=>this.requestUpdate()),this.messages=qn({blocking:!0}),this.focusSetter=pn()(this),this.active=!1,this.activeDescendant=!1,this.appearance="solid",this.compact=!1,this.disabled=!1,this.dragHandle=!1,this.iconFlipRtl=!1,this.indicator=!1,this.loading=!1,this.scale="m",this.width="auto",this.textEnabled=!1,this.type="button"}async setFocus(e){return this.focusSetter(()=>this.buttonEl.value,e)}connectedCallback(){super.connectedCallback(),this.formEl=YX(this),this.mutationObserver?.observe(this.el,{childList:!0,subtree:!0})}updated(){ta(this)}disconnectedCallback(){super.disconnectedCallback(),this.formEl=null,this.mutationObserver?.disconnect()}handleClick(){const{type:e}=this;e==="submit"?YN(this):e==="reset"&&qSe(this)}handleTooltipSlotChange(e){const r=e.target.assignedElements({flatten:!0}).filter(n=>n?.matches("calcite-tooltip"))[0];r&&(r.referenceElement=this.buttonEl.value)}storeIndicatorEl(e){this.indicatorEl=e}renderTextContainer(){const{text:e,textEnabled:i}=this,r={[Qu.textContainer]:!0,[Qu.textContainerVisible]:i};return e?xt("text-container",J`<div class=${q(r)}>${e}</div>`):null}renderIndicatorText(){const{indicator:e,messages:i,buttonId:r}=this;return J`<div aria-labelledby=${r??De} aria-live=polite class=${q(Qu.indicatorText)} role=region ${zt(this.storeIndicatorEl)}>${e?i.indicator:null}</div>`}renderIconContainer(){const{loading:e,icon:i,scale:r,el:n,iconFlipRtl:s,indicator:a}=this,o=r==="l"?"l":"m",l=e?J`<calcite-loader inline .label=${this.messages.loading} .scale=${o}></calcite-loader>`:null,c=i?J`<calcite-icon class=${q({[Qu.indicatorWithIcon]:a})} .flipRtl=${s} .icon=${i} .scale=${Dr(this.scale)}></calcite-icon>`:null,h=l||c,f=h||n.children?.length,g=J`<div class=${q({[Qu.slotContainer]:!0,[Qu.slotContainerHidden]:e})}><slot></slot></div>`;return f?xt("icon-container",J`<div aria-hidden=true class=${q(Qu.iconContainer)}>${h}${g}</div>`):null}renderButton(){const{compact:e,disabled:i,icon:r,loading:n,textEnabled:s,label:a,text:o,indicator:l,indicatorEl:c,buttonId:h,messages:f}=this,g=a||o||"",y=l?f.indicatorLabel.replace("{label}",g):g,b={[Qu.button]:!0,[Qu.buttonTextVisible]:s,[Qu.buttonCompact]:e},_=J`${this.renderIconContainer()}${this.renderTextContainer()}${!r&&l&&xt("indicator-no-icon",J`<div class=${q(Qu.indicatorWithoutIcon)}></div>`)||""}`,S=l&&c?[c]:[],$=[...this.aria?.controlsElements??[],...S];return this.dragHandle?J`<span .ariaBusy=${n} .ariaControlsElements=${$} .ariaDescribedByElements=${this.aria?.describedByElements} .ariaExpanded=${this.aria?.expanded} .ariaHasPopup=${this.aria?.hasPopup} .ariaLabel=${y} .ariaLabelledByElements=${this.aria?.labelledByElements} .ariaOwnsElements=${this.aria?.ownsElements} .ariaPressed=${this.aria?.pressed} class=${q(b)} id=${h??De} role=button tabindex=${this.disabled?null:0} ${zt(this.buttonEl)}>${_}</span>`:J`<button .ariaBusy=${n} .ariaControlsElements=${$} .ariaDescribedByElements=${this.aria?.describedByElements} .ariaExpanded=${this.aria?.expanded} .ariaHasPopup=${this.aria?.hasPopup} .ariaLabel=${y} .ariaLabelledByElements=${this.aria?.labelledByElements} .ariaOwnsElements=${this.aria?.ownsElements} .ariaPressed=${this.aria?.pressed} class=${q(b)} .disabled=${i} id=${h??De} @click=${this.handleClick} ${zt(this.buttonEl)}>${_}</button>`}render(){return ia({disabled:this.disabled,children:J`${this.renderButton()}<slot name=${Xmt.tooltip} @slotchange=${this.handleTooltipSlotChange}></slot>${this.renderIndicatorText()}`})}};eF.properties={aria:[0,{},{attribute:!1}],active:[7,{},{reflect:!0,type:Boolean}],activeDescendant:[7,{},{reflect:!0,type:Boolean}],alignment:[3,{},{reflect:!0}],appearance:[3,{},{reflect:!0}],compact:[7,{},{reflect:!0,type:Boolean}],disabled:[7,{},{reflect:!0,type:Boolean}],dragHandle:[7,{},{reflect:!0,type:Boolean}],form:[3,{},{reflect:!0}],icon:[3,{},{reflect:!0}],iconFlipRtl:[7,{},{reflect:!0,type:Boolean}],indicator:[7,{},{reflect:!0,type:Boolean}],label:1,loading:[7,{},{reflect:!0,type:Boolean}],messageOverrides:[0,{},{attribute:!1}],scale:[3,{},{reflect:!0}],width:[3,{},{reflect:!0}],text:1,textEnabled:[7,{},{reflect:!0,type:Boolean}],type:[3,{},{reflect:!0}]},eF.styles=Jmt;let t5=eF;$i("calcite-action",t5);const zke=Object.freeze(Object.defineProperty({__proto__:null,Action:t5},Symbol.toStringTag,{value:"Module"})),Fke=["top","right","bottom","left"],xue=["start","end"],Sue=Fke.reduce((t,e)=>t.concat(e,e+"-"+xue[0],e+"-"+xue[1]),[]),uT=Math.min,iw=Math.max,i5=Math.round,ML=Math.floor,Ip=t=>({x:t,y:t}),Kmt={left:"right",right:"left",bottom:"top",top:"bottom"},Qmt={start:"end",end:"start"};function Gq(t,e,i){return iw(t,uT(e,i))}function I_(t,e){return typeof t=="function"?t(e):t}function eg(t){return t.split("-")[0]}function Mp(t){return t.split("-")[1]}function Nke(t){return t==="x"?"y":"x"}function PJ(t){return t==="y"?"height":"width"}const egt=new Set(["top","bottom"]);function ov(t){return egt.has(eg(t))?"y":"x"}function OJ(t){return Nke(ov(t))}function jke(t,e,i){i===void 0&&(i=!1);const r=Mp(t),n=OJ(t),s=PJ(n);let a=n==="x"?r===(i?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(a=n5(a)),[a,n5(a)]}function tgt(t){const e=n5(t);return[r5(t),e,r5(e)]}function r5(t){return t.replace(/start|end/g,e=>Qmt[e])}const $ue=["left","right"],Tue=["right","left"],igt=["top","bottom"],rgt=["bottom","top"];function ngt(t,e,i){switch(t){case"top":case"bottom":return i?e?Tue:$ue:e?$ue:Tue;case"left":case"right":return e?igt:rgt;default:return[]}}function sgt(t,e,i,r){const n=Mp(t);let s=ngt(eg(t),i==="start",r);return n&&(s=s.map(a=>a+"-"+n),e&&(s=s.concat(s.map(r5)))),s}function n5(t){return t.replace(/left|right|bottom|top/g,e=>Kmt[e])}function agt(t){return{top:0,right:0,bottom:0,left:0,...t}}function Vke(t){return typeof t!="number"?agt(t):{top:t,right:t,bottom:t,left:t}}function s5(t){const{x:e,y:i,width:r,height:n}=t;return{width:r,height:n,top:i,left:e,right:e+r,bottom:i+n,x:e,y:i}}function kue(t,e,i){let{reference:r,floating:n}=t;const s=ov(e),a=OJ(e),o=PJ(a),l=eg(e),c=s==="y",h=r.x+r.width/2-n.width/2,f=r.y+r.height/2-n.height/2,g=r[o]/2-n[o]/2;let y;switch(l){case"top":y={x:h,y:r.y-n.height};break;case"bottom":y={x:h,y:r.y+r.height};break;case"right":y={x:r.x+r.width,y:f};break;case"left":y={x:r.x-n.width,y:f};break;default:y={x:r.x,y:r.y}}switch(Mp(e)){case"start":y[a]-=g*(i&&c?-1:1);break;case"end":y[a]+=g*(i&&c?-1:1);break}return y}async function ogt(t,e){var i;e===void 0&&(e={});const{x:r,y:n,platform:s,rects:a,elements:o,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:h="viewport",elementContext:f="floating",altBoundary:g=!1,padding:y=0}=I_(e,t),b=Vke(y),S=o[g?f==="floating"?"reference":"floating":f],$=s5(await s.getClippingRect({element:(i=await(s.isElement==null?void 0:s.isElement(S)))==null||i?S:S.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(o.floating)),boundary:c,rootBoundary:h,strategy:l})),C=f==="floating"?{x:r,y:n,width:a.floating.width,height:a.floating.height}:a.reference,I=await(s.getOffsetParent==null?void 0:s.getOffsetParent(o.floating)),P=await(s.isElement==null?void 0:s.isElement(I))?await(s.getScale==null?void 0:s.getScale(I))||{x:1,y:1}:{x:1,y:1},O=s5(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:C,offsetParent:I,strategy:l}):C);return{top:($.top-O.top+b.top)/P.y,bottom:(O.bottom-$.bottom+b.bottom)/P.y,left:($.left-O.left+b.left)/P.x,right:(O.right-$.right+b.right)/P.x}}const lgt=async(t,e,i)=>{const{placement:r="bottom",strategy:n="absolute",middleware:s=[],platform:a}=i,o=s.filter(Boolean),l=await(a.isRTL==null?void 0:a.isRTL(e));let c=await a.getElementRects({reference:t,floating:e,strategy:n}),{x:h,y:f}=kue(c,r,l),g=r,y={},b=0;for(let S=0;S<o.length;S++){var _;const{name:$,fn:C}=o[S],{x:I,y:P,data:O,reset:N}=await C({x:h,y:f,initialPlacement:r,placement:g,strategy:n,middlewareData:y,rects:c,platform:{...a,detectOverflow:(_=a.detectOverflow)!=null?_:ogt},elements:{reference:t,floating:e}});h=I??h,f=P??f,y={...y,[$]:{...y[$],...O}},N&&b<=50&&(b++,typeof N=="object"&&(N.placement&&(g=N.placement),N.rects&&(c=N.rects===!0?await a.getElementRects({reference:t,floating:e,strategy:n}):N.rects),{x:h,y:f}=kue(c,g,l)),S=-1)}return{x:h,y:f,placement:g,strategy:n,middlewareData:y}},cgt=t=>({name:"arrow",options:t,async fn(e){const{x:i,y:r,placement:n,rects:s,platform:a,elements:o,middlewareData:l}=e,{element:c,padding:h=0}=I_(t,e)||{};if(c==null)return{};const f=Vke(h),g={x:i,y:r},y=OJ(n),b=PJ(y),_=await a.getDimensions(c),S=y==="y",$=S?"top":"left",C=S?"bottom":"right",I=S?"clientHeight":"clientWidth",P=s.reference[b]+s.reference[y]-g[y]-s.floating[b],O=g[y]-s.reference[y],N=await(a.getOffsetParent==null?void 0:a.getOffsetParent(c));let R=N?N[I]:0;(!R||!await(a.isElement==null?void 0:a.isElement(N)))&&(R=o.floating[I]||s.floating[b]);const G=P/2-O/2,Y=R/2-_[b]/2-1,Q=uT(f[$],Y),ae=uT(f[C],Y),ce=Q,ne=R-_[b]-ae,K=R/2-_[b]/2+G,le=Gq(ce,K,ne),re=!l.arrow&&Mp(n)!=null&&K!==le&&s.reference[b]/2-(K<ce?Q:ae)-_[b]/2<0,he=re?K<ce?K-ce:K-ne:0;return{[y]:g[y]+he,data:{[y]:le,centerOffset:K-le-he,...re&&{alignmentOffset:he}},reset:re}}});function ugt(t,e,i){return(t?[...i.filter(n=>Mp(n)===t),...i.filter(n=>Mp(n)!==t)]:i.filter(n=>eg(n)===n)).filter(n=>t?Mp(n)===t||(e?r5(n)!==n:!1):!0)}const dgt=function(t){return t===void 0&&(t={}),{name:"autoPlacement",options:t,async fn(e){var i,r,n;const{rects:s,middlewareData:a,placement:o,platform:l,elements:c}=e,{crossAxis:h=!1,alignment:f,allowedPlacements:g=Sue,autoAlignment:y=!0,...b}=I_(t,e),_=f!==void 0||g===Sue?ugt(f||null,y,g):g,S=await l.detectOverflow(e,b),$=((i=a.autoPlacement)==null?void 0:i.index)||0,C=_[$];if(C==null)return{};const I=jke(C,s,await(l.isRTL==null?void 0:l.isRTL(c.floating)));if(o!==C)return{reset:{placement:_[0]}};const P=[S[eg(C)],S[I[0]],S[I[1]]],O=[...((r=a.autoPlacement)==null?void 0:r.overflows)||[],{placement:C,overflows:P}],N=_[$+1];if(N)return{data:{index:$+1,overflows:O},reset:{placement:N}};const R=O.map(Q=>{const ae=Mp(Q.placement);return[Q.placement,ae&&h?Q.overflows.slice(0,2).reduce((ce,ne)=>ce+ne,0):Q.overflows[0],Q.overflows]}).sort((Q,ae)=>Q[1]-ae[1]),Y=((n=R.filter(Q=>Q[2].slice(0,Mp(Q[0])?2:3).every(ae=>ae<=0))[0])==null?void 0:n[0])||R[0][0];return Y!==o?{data:{index:$+1,overflows:O},reset:{placement:Y}}:{}}}},hgt=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var i,r;const{placement:n,middlewareData:s,rects:a,initialPlacement:o,platform:l,elements:c}=e,{mainAxis:h=!0,crossAxis:f=!0,fallbackPlacements:g,fallbackStrategy:y="bestFit",fallbackAxisSideDirection:b="none",flipAlignment:_=!0,...S}=I_(t,e);if((i=s.arrow)!=null&&i.alignmentOffset)return{};const $=eg(n),C=ov(o),I=eg(o)===o,P=await(l.isRTL==null?void 0:l.isRTL(c.floating)),O=g||(I||!_?[n5(o)]:tgt(o)),N=b!=="none";!g&&N&&O.push(...sgt(o,_,b,P));const R=[o,...O],G=await l.detectOverflow(e,S),Y=[];let Q=((r=s.flip)==null?void 0:r.overflows)||[];if(h&&Y.push(G[$]),f){const K=jke(n,a,P);Y.push(G[K[0]],G[K[1]])}if(Q=[...Q,{placement:n,overflows:Y}],!Y.every(K=>K<=0)){var ae,ce;const K=(((ae=s.flip)==null?void 0:ae.index)||0)+1,le=R[K];if(le&&(!(f==="alignment"?C!==ov(le):!1)||Q.every(xe=>ov(xe.placement)===C?xe.overflows[0]>0:!0)))return{data:{index:K,overflows:Q},reset:{placement:le}};let re=(ce=Q.filter(he=>he.overflows[0]<=0).sort((he,xe)=>he.overflows[1]-xe.overflows[1])[0])==null?void 0:ce.placement;if(!re)switch(y){case"bestFit":{var ne;const he=(ne=Q.filter(xe=>{if(N){const Pe=ov(xe.placement);return Pe===C||Pe==="y"}return!0}).map(xe=>[xe.placement,xe.overflows.filter(Pe=>Pe>0).reduce((Pe,He)=>Pe+He,0)]).sort((xe,Pe)=>xe[1]-Pe[1])[0])==null?void 0:ne[0];he&&(re=he);break}case"initialPlacement":re=o;break}if(n!==re)return{reset:{placement:re}}}return{}}}};function Eue(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function Cue(t){return Fke.some(e=>t[e]>=0)}const pgt=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:i,platform:r}=e,{strategy:n="referenceHidden",...s}=I_(t,e);switch(n){case"referenceHidden":{const a=await r.detectOverflow(e,{...s,elementContext:"reference"}),o=Eue(a,i.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:Cue(o)}}}case"escaped":{const a=await r.detectOverflow(e,{...s,altBoundary:!0}),o=Eue(a,i.floating);return{data:{escapedOffsets:o,escaped:Cue(o)}}}default:return{}}}}},fgt=new Set(["left","top"]);async function mgt(t,e){const{placement:i,platform:r,elements:n}=t,s=await(r.isRTL==null?void 0:r.isRTL(n.floating)),a=eg(i),o=Mp(i),l=ov(i)==="y",c=fgt.has(a)?-1:1,h=s&&l?-1:1,f=I_(e,t);let{mainAxis:g,crossAxis:y,alignmentAxis:b}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return o&&typeof b=="number"&&(y=o==="end"?b*-1:b),l?{x:y*h,y:g*c}:{x:g*c,y:y*h}}const ggt=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var i,r;const{x:n,y:s,placement:a,middlewareData:o}=e,l=await mgt(e,t);return a===((i=o.offset)==null?void 0:i.placement)&&(r=o.arrow)!=null&&r.alignmentOffset?{}:{x:n+l.x,y:s+l.y,data:{...l,placement:a}}}}},ygt=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:i,y:r,placement:n,platform:s}=e,{mainAxis:a=!0,crossAxis:o=!1,limiter:l={fn:$=>{let{x:C,y:I}=$;return{x:C,y:I}}},...c}=I_(t,e),h={x:i,y:r},f=await s.detectOverflow(e,c),g=ov(eg(n)),y=Nke(g);let b=h[y],_=h[g];if(a){const $=y==="y"?"top":"left",C=y==="y"?"bottom":"right",I=b+f[$],P=b-f[C];b=Gq(I,b,P)}if(o){const $=g==="y"?"top":"left",C=g==="y"?"bottom":"right",I=_+f[$],P=_-f[C];_=Gq(I,_,P)}const S=l.fn({...e,[y]:b,[g]:_});return{...S,data:{x:S.x-i,y:S.y-r,enabled:{[y]:a,[g]:o}}}}}};function aj(){return typeof window<"u"}function ek(t){return Bke(t)?(t.nodeName||"").toLowerCase():"#document"}function $c(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Yp(t){var e;return(e=(Bke(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function Bke(t){return aj()?t instanceof Node||t instanceof $c(t).Node:!1}function Fd(t){return aj()?t instanceof Element||t instanceof $c(t).Element:!1}function Gp(t){return aj()?t instanceof HTMLElement||t instanceof $c(t).HTMLElement:!1}function Iue(t){return!aj()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof $c(t).ShadowRoot}const vgt=new Set(["inline","contents"]);function _A(t){const{overflow:e,overflowX:i,overflowY:r,display:n}=Nd(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+i)&&!vgt.has(n)}const bgt=new Set(["table","td","th"]);function wgt(t){return bgt.has(ek(t))}const _gt=[":popover-open",":modal"];function oj(t){return _gt.some(e=>{try{return t.matches(e)}catch{return!1}})}const xgt=["transform","translate","scale","rotate","perspective"],Sgt=["transform","translate","scale","rotate","perspective","filter"],$gt=["paint","layout","strict","content"];function lj(t){const e=LJ(),i=Fd(t)?Nd(t):t;return xgt.some(r=>i[r]?i[r]!=="none":!1)||(i.containerType?i.containerType!=="normal":!1)||!e&&(i.backdropFilter?i.backdropFilter!=="none":!1)||!e&&(i.filter?i.filter!=="none":!1)||Sgt.some(r=>(i.willChange||"").includes(r))||$gt.some(r=>(i.contain||"").includes(r))}function Tgt(t){let e=Pv(t);for(;Gp(e)&&!dT(e);){if(lj(e))return e;if(oj(e))return null;e=Pv(e)}return null}function LJ(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const kgt=new Set(["html","body","#document"]);function dT(t){return kgt.has(ek(t))}function Nd(t){return $c(t).getComputedStyle(t)}function cj(t){return Fd(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Pv(t){if(ek(t)==="html")return t;const e=t.assignedSlot||t.parentNode||Iue(t)&&t.host||Yp(t);return Iue(e)?e.host:e}function Uke(t){const e=Pv(t);return dT(e)?t.ownerDocument?t.ownerDocument.body:t.body:Gp(e)&&_A(e)?e:Uke(e)}function rM(t,e,i){var r;e===void 0&&(e=[]),i===void 0&&(i=!0);const n=Uke(t),s=n===((r=t.ownerDocument)==null?void 0:r.body),a=$c(n);if(s){const o=qq(a);return e.concat(a,a.visualViewport||[],_A(n)?n:[],o&&i?rM(o):[])}return e.concat(n,rM(n,[],i))}function qq(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function Hke(t){const e=Nd(t);let i=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const n=Gp(t),s=n?t.offsetWidth:i,a=n?t.offsetHeight:r,o=i5(i)!==s||i5(r)!==a;return o&&(i=s,r=a),{width:i,height:r,$:o}}function DJ(t){return Fd(t)?t:t.contextElement}function t$(t){const e=DJ(t);if(!Gp(e))return Ip(1);const i=e.getBoundingClientRect(),{width:r,height:n,$:s}=Hke(e);let a=(s?i5(i.width):i.width)/r,o=(s?i5(i.height):i.height)/n;return(!a||!Number.isFinite(a))&&(a=1),(!o||!Number.isFinite(o))&&(o=1),{x:a,y:o}}const Egt=Ip(0);function Gke(t){const e=$c(t);return!LJ()||!e.visualViewport?Egt:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Cgt(t,e,i){return e===void 0&&(e=!1),!i||e&&i!==$c(t)?!1:e}function r_(t,e,i,r){e===void 0&&(e=!1),i===void 0&&(i=!1);const n=t.getBoundingClientRect(),s=DJ(t);let a=Ip(1);e&&(r?Fd(r)&&(a=t$(r)):a=t$(t));const o=Cgt(s,i,r)?Gke(s):Ip(0);let l=(n.left+o.x)/a.x,c=(n.top+o.y)/a.y,h=n.width/a.x,f=n.height/a.y;if(s){const g=$c(s),y=r&&Fd(r)?$c(r):r;let b=g,_=qq(b);for(;_&&r&&y!==b;){const S=t$(_),$=_.getBoundingClientRect(),C=Nd(_),I=$.left+(_.clientLeft+parseFloat(C.paddingLeft))*S.x,P=$.top+(_.clientTop+parseFloat(C.paddingTop))*S.y;l*=S.x,c*=S.y,h*=S.x,f*=S.y,l+=I,c+=P,b=$c(_),_=qq(b)}}return s5({width:h,height:f,x:l,y:c})}function uj(t,e){const i=cj(t).scrollLeft;return e?e.left+i:r_(Yp(t)).left+i}function qke(t,e){const i=t.getBoundingClientRect(),r=i.left+e.scrollLeft-uj(t,i),n=i.top+e.scrollTop;return{x:r,y:n}}function Igt(t){let{elements:e,rect:i,offsetParent:r,strategy:n}=t;const s=n==="fixed",a=Yp(r),o=e?oj(e.floating):!1;if(r===a||o&&s)return i;let l={scrollLeft:0,scrollTop:0},c=Ip(1);const h=Ip(0),f=Gp(r);if((f||!f&&!s)&&((ek(r)!=="body"||_A(a))&&(l=cj(r)),Gp(r))){const y=r_(r);c=t$(r),h.x=y.x+r.clientLeft,h.y=y.y+r.clientTop}const g=a&&!f&&!s?qke(a,l):Ip(0);return{width:i.width*c.x,height:i.height*c.y,x:i.x*c.x-l.scrollLeft*c.x+h.x+g.x,y:i.y*c.y-l.scrollTop*c.y+h.y+g.y}}function Mgt(t){return Array.from(t.getClientRects())}function Agt(t){const e=Yp(t),i=cj(t),r=t.ownerDocument.body,n=iw(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=iw(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let a=-i.scrollLeft+uj(t);const o=-i.scrollTop;return Nd(r).direction==="rtl"&&(a+=iw(e.clientWidth,r.clientWidth)-n),{width:n,height:s,x:a,y:o}}const Mue=25;function Pgt(t,e){const i=$c(t),r=Yp(t),n=i.visualViewport;let s=r.clientWidth,a=r.clientHeight,o=0,l=0;if(n){s=n.width,a=n.height;const h=LJ();(!h||h&&e==="fixed")&&(o=n.offsetLeft,l=n.offsetTop)}const c=uj(r);if(c<=0){const h=r.ownerDocument,f=h.body,g=getComputedStyle(f),y=h.compatMode==="CSS1Compat"&&parseFloat(g.marginLeft)+parseFloat(g.marginRight)||0,b=Math.abs(r.clientWidth-f.clientWidth-y);b<=Mue&&(s-=b)}else c<=Mue&&(s+=c);return{width:s,height:a,x:o,y:l}}const Ogt=new Set(["absolute","fixed"]);function Lgt(t,e){const i=r_(t,!0,e==="fixed"),r=i.top+t.clientTop,n=i.left+t.clientLeft,s=Gp(t)?t$(t):Ip(1),a=t.clientWidth*s.x,o=t.clientHeight*s.y,l=n*s.x,c=r*s.y;return{width:a,height:o,x:l,y:c}}function Aue(t,e,i){let r;if(e==="viewport")r=Pgt(t,i);else if(e==="document")r=Agt(Yp(t));else if(Fd(e))r=Lgt(e,i);else{const n=Gke(t);r={x:e.x-n.x,y:e.y-n.y,width:e.width,height:e.height}}return s5(r)}function Wke(t,e){const i=Pv(t);return i===e||!Fd(i)||dT(i)?!1:Nd(i).position==="fixed"||Wke(i,e)}function Dgt(t,e){const i=e.get(t);if(i)return i;let r=rM(t,[],!1).filter(o=>Fd(o)&&ek(o)!=="body"),n=null;const s=Nd(t).position==="fixed";let a=s?Pv(t):t;for(;Fd(a)&&!dT(a);){const o=Nd(a),l=lj(a);!l&&o.position==="fixed"&&(n=null),(s?!l&&!n:!l&&o.position==="static"&&!!n&&Ogt.has(n.position)||_A(a)&&!l&&Wke(t,a))?r=r.filter(h=>h!==a):n=o,a=Pv(a)}return e.set(t,r),r}function Rgt(t){let{element:e,boundary:i,rootBoundary:r,strategy:n}=t;const a=[...i==="clippingAncestors"?oj(e)?[]:Dgt(e,this._c):[].concat(i),r],o=a[0],l=a.reduce((c,h)=>{const f=Aue(e,h,n);return c.top=iw(f.top,c.top),c.right=uT(f.right,c.right),c.bottom=uT(f.bottom,c.bottom),c.left=iw(f.left,c.left),c},Aue(e,o,n));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function zgt(t){const{width:e,height:i}=Hke(t);return{width:e,height:i}}function Fgt(t,e,i){const r=Gp(e),n=Yp(e),s=i==="fixed",a=r_(t,!0,s,e);let o={scrollLeft:0,scrollTop:0};const l=Ip(0);function c(){l.x=uj(n)}if(r||!r&&!s)if((ek(e)!=="body"||_A(n))&&(o=cj(e)),r){const y=r_(e,!0,s,e);l.x=y.x+e.clientLeft,l.y=y.y+e.clientTop}else n&&c();s&&!r&&n&&c();const h=n&&!r&&!s?qke(n,o):Ip(0),f=a.left+o.scrollLeft-l.x-h.x,g=a.top+o.scrollTop-l.y-h.y;return{x:f,y:g,width:a.width,height:a.height}}function dU(t){return Nd(t).position==="static"}function Pue(t,e){if(!Gp(t)||Nd(t).position==="fixed")return null;if(e)return e(t);let i=t.offsetParent;return Yp(t)===i&&(i=i.ownerDocument.body),i}function Yke(t,e){const i=$c(t);if(oj(t))return i;if(!Gp(t)){let n=Pv(t);for(;n&&!dT(n);){if(Fd(n)&&!dU(n))return n;n=Pv(n)}return i}let r=Pue(t,e);for(;r&&wgt(r)&&dU(r);)r=Pue(r,e);return r&&dT(r)&&dU(r)&&!lj(r)?i:r||Tgt(t)||i}const Ngt=async function(t){const e=this.getOffsetParent||Yke,i=this.getDimensions,r=await i(t.floating);return{reference:Fgt(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function jgt(t){return Nd(t).direction==="rtl"}const Wq={convertOffsetParentRelativeRectToViewportRelativeRect:Igt,getDocumentElement:Yp,getClippingRect:Rgt,getOffsetParent:Yke,getElementRects:Ngt,getClientRects:Mgt,getDimensions:zgt,getScale:t$,isElement:Fd,isRTL:jgt};function Zke(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function Vgt(t,e){let i=null,r;const n=Yp(t);function s(){var o;clearTimeout(r),(o=i)==null||o.disconnect(),i=null}function a(o,l){o===void 0&&(o=!1),l===void 0&&(l=1),s();const c=t.getBoundingClientRect(),{left:h,top:f,width:g,height:y}=c;if(o||e(),!g||!y)return;const b=ML(f),_=ML(n.clientWidth-(h+g)),S=ML(n.clientHeight-(f+y)),$=ML(h),I={rootMargin:-b+"px "+-_+"px "+-S+"px "+-$+"px",threshold:iw(0,uT(1,l))||1};let P=!0;function O(N){const R=N[0].intersectionRatio;if(R!==l){if(!P)return a();R?a(!1,R):r=setTimeout(()=>{a(!1,1e-7)},1e3)}R===1&&!Zke(c,t.getBoundingClientRect())&&a(),P=!1}try{i=new IntersectionObserver(O,{...I,root:n.ownerDocument})}catch{i=new IntersectionObserver(O,I)}i.observe(t)}return a(!0),s}function Xke(t,e,i,r){r===void 0&&(r={});const{ancestorScroll:n=!0,ancestorResize:s=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=DJ(t),h=n||s?[...c?rM(c):[],...rM(e)]:[];h.forEach($=>{n&&$.addEventListener("scroll",i,{passive:!0}),s&&$.addEventListener("resize",i)});const f=c&&o?Vgt(c,i):null;let g=-1,y=null;a&&(y=new ResizeObserver($=>{let[C]=$;C&&C.target===c&&y&&(y.unobserve(e),cancelAnimationFrame(g),g=requestAnimationFrame(()=>{var I;(I=y)==null||I.observe(e)})),i()}),c&&!l&&y.observe(c),y.observe(e));let b,_=l?r_(t):null;l&&S();function S(){const $=r_(t);_&&!Zke(_,$)&&i(),_=$,b=requestAnimationFrame(S)}return i(),()=>{var $;h.forEach(C=>{n&&C.removeEventListener("scroll",i),s&&C.removeEventListener("resize",i)}),f?.(),($=y)==null||$.disconnect(),y=null,l&&cancelAnimationFrame(b)}}const Bgt=ggt,Ugt=dgt,Hgt=ygt,Oue=hgt,Ggt=pgt,qgt=cgt,Wgt=(t,e,i)=>{const r=new Map,n={platform:Wq,...i},s={...n.platform,_c:r};return lgt(t,e,{...n,platform:s})};function xA(t,e,{signal:i,edges:r}={}){let n,s=null;const a=r!=null&&r.includes("leading"),o=r==null||r.includes("trailing"),l=()=>{s!==null&&(t.apply(n,s),n=void 0,s=null)},c=()=>{o&&l(),y()};let h=null;const f=()=>{h!=null&&clearTimeout(h),h=setTimeout(()=>{h=null,c()},e)},g=()=>{h!==null&&(clearTimeout(h),h=null)},y=()=>{g(),n=void 0,s=null},b=()=>{l()},_=function(...S){if(i?.aborted)return;n=this,s=S;const $=h==null;f(),a&&$&&l()};return _.schedule=f,_.cancel=y,_.flush=b,i?.addEventListener("abort",y,{once:!0}),_}function Ygt(t){return t}function Zgt(t){return t.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&")}function Xgt(t){return Jgt(t)}function hU(t){return t.assignedSlot?t.assignedSlot:t.parentNode instanceof ShadowRoot?t.parentNode.host:t.parentNode}function Jgt(t){for(let e=t;e;e=hU(e))if(e instanceof Element&&getComputedStyle(e).display==="none")return null;for(let e=hU(t);e;e=hU(e)){if(!(e instanceof Element))continue;const i=getComputedStyle(e);if(i.display!=="contents"&&(i.position!=="static"||lj(i)||e.tagName==="BODY"))return e}return null}(function(){{const e=Wq.getOffsetParent;Wq.getOffsetParent=i=>e(i,Xgt)}})();function Lue(t){const e=window.devicePixelRatio||1;return Math.round(t*e)/e}const Jke=(async(t,{referenceEl:e,floatingEl:i,overlayPositioning:r="absolute",placement:n,flipDisabled:s,flipPlacements:a,offsetDistance:o,offsetSkidding:l,arrowEl:c,type:h})=>{if(!e||!i)return;const f=jo(i)==="rtl",{x:g,y,placement:b,strategy:_,middlewareData:S}=await Wgt(e,i,{strategy:r,placement:n==="auto"||n==="auto-start"||n==="auto-end"?void 0:Due(n,f),middleware:Qgt({placement:n,flipDisabled:s,flipPlacements:a?.map(P=>Due(P,f)),offsetDistance:o,offsetSkidding:l,arrowEl:c,type:h})});if(c&&S.arrow){const{x:P,y:O}=S.arrow,N=b.split("-")[0],R=P!=null?"left":"top",G=iyt[N],Y={left:"",top:"",bottom:"",right:""};"floatingLayout"in t&&(t.floatingLayout=N==="left"||N==="right"?"horizontal":"vertical"),Object.assign(c.style,{...Y,[R]:`${R=="left"?P:O}px`,[N]:"100%",transform:G})}const C=S.hide?.referenceHidden?"hidden":null,I=C?"none":null;i.setAttribute(Kgt,b),Object.assign(i.style,{pointerEvents:I,position:_,transform:`translate(${Lue(g)}px,${Lue(y)}px)`,visibility:C})}),Kgt="data-placement",Kke=["top","bottom","right","left","top-start","top-end","bottom-start","bottom-end","right-start","right-end","left-start","left-end","leading","trailing","leading-start","leading-end","trailing-start","trailing-end"],nM="bottom-start",Qke="bottom-end",hT={animation:"calcite-floating-ui-anim",animationActive:"calcite-floating-ui-anim--active"};function Qgt({placement:t,flipDisabled:e,flipPlacements:i,offsetDistance:r,offsetSkidding:n,arrowEl:s,type:a}){const o=[Hgt(),Ggt()];return a==="menu"&&o.push(Oue({fallbackPlacements:i||["top-start","top","top-end","bottom-start","bottom","bottom-end"]})),o.push(Bgt({mainAxis:typeof r=="number"?r:0,crossAxis:typeof n=="number"?n:0})),t==="auto"||t==="auto-start"||t==="auto-end"?o.push(Ugt({alignment:t==="auto-start"?"start":t==="auto-end"?"end":null})):e||o.push(Oue(i?{fallbackPlacements:i}:{})),s&&o.push(qgt({element:s})),o}function eyt(t){return Kke.includes(t)}function e2e(t,e){const i=t.filter(eyt);return i.length!==t.length&&console.warn(`${e.tagName}: Invalid value found in: flipPlacements. Try any of these: ${Kke.map(r=>`"${r}"`).join(", ").trim()}`,{el:e}),i}function Due(t,e=!1){const i=["left","right"];return e&&i.reverse(),t.replace(/leading/gi,i[0]).replace(/trailing/gi,i[1])}async function RJ(t,e,i=!1){if(!t.open||!e.floatingEl||!e.referenceEl)return;if(Object.assign(e.floatingEl.style,{display:"block",position:e.overlayPositioning??"absolute"}),!sM.get(t))return t2e(t);await(i?tyt(t):Jke)(t,e)}function tyt(t){let e=a5.get(t);return e||(e=xA(Jke,HF.reposition,{edges:["leading","trailing"]}),a5.set(t,e),e)}const iyt={top:"",left:"rotate(-90deg)",bottom:"rotate(180deg)",right:"rotate(90deg)"},sM=new WeakMap,a5=new WeakMap;async function t2e(t){const{referenceEl:e,floatingEl:i}=t;if(!i.isConnected)return;const r=Xke;sM.set(t,{state:"pending"});let n;const s=r(e,i,()=>{const a=t.reposition();n||(n=a)});return sM.set(t,{state:"active",cleanUp:s}),n}function zJ(t){const{floatingEl:e}=t;e&&Object.assign(e.style,{display:"",pointerEvents:"",position:"",transform:"",visibility:""})}async function Dm(t){const{floatingEl:e,referenceEl:i}=t;if(zJ(t),!(!e||!i)&&(dj(t),!!t.open))return t2e(t)}function dj(t){const e=sM.get(t);e?.state==="active"&&e.cleanUp(),sM.delete(t),a5.get(t)?.cancel(),a5.delete(t)}const Rue=4,zue=Math.ceil(Math.hypot(Rue,Rue));const FJ=({children:t,...e})=>{const i=e.level?qye(`h${e.level}`):Qw`div`;return xt(e.key,GM`<${i} class=${q(e.class)}>${t}</${i}>`)};const Fue={arrow:"calcite-floating-ui-arrow",arrowStroke:"calcite-floating-ui-arrow__stroke"},ryt={width:12,height:6,strokeWidth:1},nyt=({floatingLayout:t,key:e,ref:i})=>{const{width:r,height:n,strokeWidth:s}=ryt,a=r/2,o=t==="vertical",l=`M0,0 H${r} L${r-a},${n} Q${a},${n} ${a},${n} Z`;return xt(e,J`<svg aria-hidden=true class=${q(Fue.arrow)} height=${r} viewBox=${`0 0 ${r} ${r+(o?0:s)}`} width=${r+(o?s:0)} ${zt(i)}>${Sn`${Sn`<path class=${q(Fue.arrowStroke)} d=${l??Xe} fill=none stroke-width=${s+1} />`||""}<path d=${l??Xe} stroke=none />`}</svg>`)};const syt=5;function ayt({startX:t,startY:e,endX:i,endY:r}){return Math.hypot(i-t,r-e)>syt}class oyt{constructor(){this.registeredElements=new Map,this.registeredElementCount=0,this.queryPopover=e=>{const{registeredElements:i}=this,r=e.find(n=>i.has(n));return i.get(r)},this.togglePopovers=e=>{const i=e.composedPath(),r=this.queryPopover(i);r&&!r.triggerDisabled&&(r.open=!r.open),Array.from(this.registeredElements.values()).filter(n=>n!==r&&n.autoClose&&n.open&&!i.includes(n)).forEach(n=>n.open=!1)},this.keyDownHandler=e=>{e.defaultPrevented||(e.key==="Escape"?this.closeAllPopovers():eN(e.key)&&this.togglePopovers(e))},this.pointerDownHandler=e=>{if(e.defaultPrevented||!Tye(e))return;const{clientX:i,clientY:r}=e;this.pointerDownPosition={x:i,y:r}},this.clickHandler=e=>{YFe(e)||e.defaultPrevented||this.pointerDownPosition&&ayt({endY:e.clientY,endX:e.clientX,startY:this.pointerDownPosition.y,startX:this.pointerDownPosition.x})||(this.pointerDownPosition=void 0,this.togglePopovers(e))}}registerElement(e,i){this.registeredElementCount++,this.registeredElements.set(e,i),this.registeredElementCount===1&&this.addListeners()}unregisterElement(e){this.registeredElements.delete(e)&&this.registeredElementCount--,this.registeredElementCount===0&&this.removeListeners()}closeAllPopovers(){Array.from(this.registeredElements.values()).forEach(e=>e.open=!1)}addListeners(){window.addEventListener("pointerdown",this.pointerDownHandler),window.addEventListener("click",this.clickHandler),window.addEventListener("keydown",this.keyDownHandler)}removeListeners(){window.removeEventListener("pointerdown",this.pointerDownHandler),window.removeEventListener("click",this.clickHandler),window.removeEventListener("keydown",this.keyDownHandler)}}const ed={positionContainer:"position-container",container:"container",closeButtonContainer:"close-button-container",closeButton:"close-button",content:"content",hasHeader:"has-header",header:"header",headerContainer:"header-container",heading:"heading"},Nue="auto",jue="aria-controls",Vue="aria-expanded",lyt=St`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{display:contents;--calcite-floating-ui-z-index: var(--calcite-popover-z-index, var(--calcite-z-index-popup))}.position-container{inline-size:max-content;display:none;max-inline-size:100vw;max-block-size:100vh;inset-block-start:0;left:0;z-index:var(--calcite-floating-ui-z-index)}@starting-style{.position-container{opacity:0;inset-block-start:0;left:0}}.position-container{max-inline-size:var(--calcite-popover-max-size-x, 100vw)}.position-container .calcite-floating-ui-anim{position:relative;transition-duration:var(--calcite-floating-ui-transition);transition-property:inset-block-start,left,opacity,display;transition-behavior:allow-discrete;opacity:0;box-shadow:0 0 16px #00000029;z-index:var(--calcite-z-index);border-radius:.25rem}.position-container[data-placement^=bottom] .calcite-floating-ui-anim{inset-block-start:-5px}.position-container[data-placement^=top] .calcite-floating-ui-anim{inset-block-start:5px}.position-container[data-placement^=left] .calcite-floating-ui-anim{left:5px}.position-container[data-placement^=right] .calcite-floating-ui-anim{left:-5px}.position-container[data-placement] .calcite-floating-ui-anim--active{opacity:1;inset-block-start:0;left:0}@starting-style{.position-container[data-placement] .calcite-floating-ui-anim--active{opacity:0}}.calcite-floating-ui-arrow{pointer-events:none;position:absolute;z-index:calc(var(--calcite-z-index) * -1);fill:var(--calcite-color-foreground-1)}.calcite-floating-ui-arrow__stroke{stroke:var(--calcite-color-border-3)}:host([scale=s]) .heading{padding:.5rem .75rem;font-size:var(--calcite-font-size--1);line-height:1.375}:host([scale=m]) .heading{padding:.75rem 1rem;font-size:var(--calcite-font-size-0);line-height:1.375}:host([scale=l]) .heading{padding:1rem 1.25rem;font-size:var(--calcite-font-size-1);line-height:1.375}.position-container .calcite-floating-ui-anim{border-width:1px;border-style:solid;background-color:var(--calcite-popover-background-color, var(--calcite-color-foreground-1));border-color:var(--calcite-popover-border-color, var(--calcite-color-border-3));border-radius:var(--calcite-popover-corner-radius, var(--calcite-corner-radius-round))}.calcite-floating-ui-arrow{fill:var(--calcite-popover-background-color, var(--calcite-color-foreground-1))}.calcite-floating-ui-arrow__stroke{stroke:var(--calcite-popover-border-color, var(--calcite-color-border-3))}.header{display:flex;flex:1 1 auto;align-items:stretch;justify-content:flex-start;border-width:0px;border-bottom-width:1px;border-style:solid;border-block-end-color:var(--calcite-popover-border-color, var(--calcite-color-border-3))}.heading{margin:0;display:block;flex:1 1 auto;align-self:center;white-space:normal;font-weight:var(--calcite-font-weight-medium);word-wrap:break-word;word-break:break-word;color:var(--calcite-popover-text-color, var(--calcite-color-text-1))}.header-container{position:relative;display:flex;height:100%;flex-direction:row;flex-wrap:nowrap;border-radius:.25rem;color:var(--calcite-popover-text-color, var(--calcite-color-text-1))}.header-container.has-header{flex-direction:column}.content{display:flex;height:100%;width:100%;flex-direction:column;flex-wrap:nowrap;align-self:center;word-wrap:break-word;word-break:break-word}.close-button-container{display:flex;overflow:hidden;flex:0 0 auto;border-start-end-radius:var(--calcite-popover-corner-radius, var(--calcite-corner-radius-round));border-end-end-radius:var(--calcite-popover-corner-radius, var(--calcite-corner-radius-round));--calcite-action-corner-radius-start-end: var(--calcite-popover-corner-radius, var(--calcite-corner-radius-sharp));--calcite-action-corner-radius-end-end: var(--calcite-popover-corner-radius, var(--calcite-corner-radius-sharp))}::slotted(calcite-panel),::slotted(calcite-flow){height:100%}:host([hidden]){display:none}[hidden]{display:none}`,Bue=new oyt,tF=class tF extends Et{constructor(){super(...arguments),this.focusTrap=Rke({triggerProp:"open",focusTrapOptions:{allowOutsideClick:!0,escapeDeactivates:e=>(e.defaultPrevented||(this.open=!1,e.preventDefault()),!1)}})(this),this.guid=`calcite-popover-${Vd()}`,this.hasLoaded=!1,this.mutationObserver=ea("mutation",()=>this.focusTrap.updateContainerElements()),this.transitionProp="opacity",this.messages=qn(),this.focusSetter=pn()(this),this.floatingLayout="vertical",this.autoClose=!1,this.closable=!1,this.flipDisabled=!1,this.focusTrapDisabled=!1,this.offsetDistance=zue,this.offsetSkidding=0,this.open=!1,this.overlayPositioning="absolute",this.placement=Nue,this.pointerDisabled=!1,this.scale="m",this.triggerDisabled=!1,this.calcitePopoverBeforeClose=Re({cancelable:!1}),this.calcitePopoverBeforeOpen=Re({cancelable:!1}),this.calcitePopoverClose=Re({cancelable:!1}),this.calcitePopoverOpen=Re({cancelable:!1})}async reposition(e=!1){const{referenceEl:i,placement:r,overlayPositioning:n,flipDisabled:s,filteredFlipPlacements:a,offsetDistance:o,offsetSkidding:l,arrowEl:c,floatingEl:h}=this;return RJ(this,{floatingEl:h,referenceEl:i,overlayPositioning:n,placement:r,flipDisabled:s,flipPlacements:a,offsetDistance:o,offsetSkidding:l,arrowEl:c,type:"popover"},e)}async setFocus(e){return this.focusSetter(()=>this.el,e)}async updateFocusTrapElements(){this.focusTrap.updateContainerElements()}connectedCallback(){super.connectedCallback(),this.mutationObserver?.observe(this.el,{childList:!0,subtree:!0}),this.setFilteredPlacements(),requestAnimationFrame(()=>this.setUpReferenceElement(this.hasLoaded))}willUpdate(e){e.has("flipPlacements")&&this.flipPlacementsHandler(),e.has("open")&&(this.hasUpdated||this.open!==!1)&&this.openHandler(),(e.has("offsetDistance")&&(this.hasUpdated||this.offsetDistance!==zue)||e.has("offsetSkidding")&&(this.hasUpdated||this.offsetSkidding!==0)||e.has("overlayPositioning")&&(this.hasUpdated||this.overlayPositioning!=="absolute")||e.has("placement")&&(this.hasUpdated||this.placement!==Nue))&&this.reposition(!0),e.has("referenceElement")&&this.referenceElementHandler()}loaded(){this.referenceElement&&!this.referenceEl&&this.setUpReferenceElement(),this.hasLoaded=!0}disconnectedCallback(){super.disconnectedCallback(),this.mutationObserver?.disconnect(),this.removeReferences(),dj(this)}flipPlacementsHandler(){this.setFilteredPlacements(),this.reposition(!0)}openHandler(){__(this),this.reposition(!0),this.setExpandedAttr()}referenceElementHandler(){this.setUpReferenceElement(),this.reposition(!0)}setFloatingEl(e){this.floatingEl=e,e&&requestAnimationFrame(()=>this.setUpReferenceElement())}setTransitionEl(e){e&&(this.transitionEl=e)}setFilteredPlacements(){const{el:e,flipPlacements:i}=this;this.filteredFlipPlacements=i?e2e(i,e):null}setUpReferenceElement(e=!0){this.removeReferences(),this.referenceEl=this.getReferenceElement(),Dm(this);const{el:i,referenceElement:r,referenceEl:n}=this;e&&r&&!n&&console.warn(`${i.tagName}: reference-element id "${r}" was not found.`,{el:i}),this.addReferences()}getId(){return this.el.id||this.guid}setExpandedAttr(){const{referenceEl:e,open:i}=this;e&&"setAttribute"in e&&e.setAttribute(Vue,QF(i))}addReferences(){const{referenceEl:e}=this;if(!e)return;const i=this.getId();"setAttribute"in e&&e.setAttribute(jue,i),Bue.registerElement(e,this.el),this.setExpandedAttr()}removeReferences(){const{referenceEl:e}=this;e&&("removeAttribute"in e&&(e.removeAttribute(jue),e.removeAttribute(Vue)),Bue.unregisterElement(e))}getReferenceElement(){const{referenceElement:e,el:i}=this;return(typeof e=="string"?KF(i,{id:e}):e)||null}hide(){this.open=!1}onBeforeOpen(){this.calcitePopoverBeforeOpen.emit()}onOpen(){this.calcitePopoverOpen.emit(),this.focusTrap.activate()}onBeforeClose(){this.calcitePopoverBeforeClose.emit()}onClose(){this.calcitePopoverClose.emit(),zJ(this),this.focusTrap.deactivate()}storeArrowEl(e){this.arrowEl=e,this.reposition(!0)}renderCloseButton(){const{messages:e,closable:i}=this;return i?xt(ed.closeButtonContainer,J`<div class=${q(ed.closeButtonContainer)}><calcite-action appearance=transparent class=${q(ed.closeButton)} @click=${this.hide} .scale=${this.scale} .text=${e.close}><calcite-icon icon=x .scale=${Dr(this.scale)}></calcite-icon></calcite-action></div>`):null}renderHeader(){const{heading:e,headingLevel:i}=this,r=e?FJ({class:ed.heading,level:i,children:e}):null;return r?xt(ed.header,J`<div class=${q(ed.header)}>${r}${this.renderCloseButton()}</div>`):null}render(){const{referenceEl:e,heading:i,label:r,open:n,pointerDisabled:s,floatingLayout:a}=this,o=e&&n,l=!o,c=s?null:xt("floating-arrow",nyt({floatingLayout:a,ref:this.storeArrowEl}));return this.el.inert=l,this.el.ariaLabel=r,this.el.ariaLive="polite",FT(this.el,"id",this.getId()),this.el.role="dialog",J`<div class=${q(ed.positionContainer)} ${zt(this.setFloatingEl)}><div class=${q({[ed.container]:!0,[hT.animation]:!0,[hT.animationActive]:o})} ${zt(this.setTransitionEl)}>${c}<div class=${q({[ed.hasHeader]:!!i,[ed.headerContainer]:!0})}>${this.renderHeader()}<div class=${q(ed.content)}><slot></slot></div>${i?null:this.renderCloseButton()}</div></div></div>`}};tF.properties={floatingLayout:[16,{},{state:!0}],referenceEl:[16,{},{state:!0}],autoClose:[7,{},{reflect:!0,type:Boolean}],closable:[7,{},{reflect:!0,type:Boolean}],flipDisabled:[7,{},{reflect:!0,type:Boolean}],flipPlacements:[0,{},{attribute:!1}],focusTrapDisabled:[7,{},{reflect:!0,type:Boolean}],focusTrapOptions:[0,{},{attribute:!1}],heading:1,headingLevel:[11,{},{type:Number,reflect:!0}],label:1,messageOverrides:[0,{},{attribute:!1}],offsetDistance:[11,{},{type:Number,reflect:!0}],offsetSkidding:[11,{},{reflect:!0,type:Number}],open:[7,{},{reflect:!0,type:Boolean}],overlayPositioning:[3,{},{reflect:!0}],placement:[3,{},{reflect:!0}],pointerDisabled:[7,{},{reflect:!0,type:Boolean}],referenceElement:1,scale:[3,{},{reflect:!0}],triggerDisabled:[7,{},{reflect:!0,type:Boolean}]},tF.styles=lyt;let Yq=tF;$i("calcite-popover",Yq);const Uue={menu:"menu",defaultTrigger:"default-trigger"},pU="calcite-action-menu",fU={button:t=>`${pU}-${t}-menu-button`,menu:t=>`${pU}-${t}-menu`,action:(t,e)=>`${pU}-${t}-action-${e}`},pT={tooltip:"tooltip",trigger:"trigger"},cyt={menu:"ellipsis"};const uyt=St`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{box-sizing:border-box;display:flex;flex-direction:column;font-size:var(--calcite-font-size-1)}::slotted(calcite-action-group:not(:last-of-type)){border-block-end-width:var(--calcite-border-width-sm)}.default-trigger{position:relative;block-size:100%;flex:0 1 auto;align-self:stretch}slot[name=trigger]::slotted(calcite-action),calcite-action::slotted([slot=trigger]){position:relative;block-size:100%;flex:0 1 auto;align-self:stretch}.menu{display:flex;max-block-size:45vh;flex-direction:column;flex-wrap:nowrap;overflow-y:auto;overflow-x:hidden;outline:2px solid transparent;outline-offset:2px;gap:var(--calcite-action-menu-items-space, 0)}:host([hidden]){display:none}[hidden]{display:none}`,dyt=["ArrowUp","ArrowDown","End","Home"],iF=class iF extends Et{constructor(){super(...arguments),this.guid=Vd(),this.actionElements=[],this.menuButtonClick=()=>{this.toggleOpen()},this.menuButtonId=fU.button(this.guid),this.menuButtonKeyDown=e=>{const{key:i}=e,{actionElements:r,activeMenuItemIndex:n,open:s}=this;if(r.length){if(eN(i)){if(e.preventDefault(),!s){this.toggleOpen();return}const a=r[n];a?a.click():this.toggleOpen(!1)}if(i==="Tab"){this.open=!1;return}if(i==="Escape"){this.toggleOpen(!1),e.preventDefault();return}this.handleActionNavigation(e,i,r)}},this.menuId=fU.menu(this.guid),this._open=!1,this.updateAction=(e,i)=>{const{guid:r,activeMenuItemIndex:n}=this,s=fU.action(r,i);e.tabIndex=-1,e.setAttribute("role","menuitem"),e.id||(e.id=s),e.activeDescendant=i===n},this.focusSetter=pn()(this),this.activeMenuItemIndex=-1,this.appearance="solid",this.expanded=!1,this.overlayPositioning="absolute",this.placement="auto",this.scale="m",this.calciteActionMenuCollapse=Re({cancelable:!1}),this.calciteActionMenuExpand=Re({cancelable:!1}),this.calciteActionMenuOpen=Re({cancelable:!1})}get open(){return this._open}set open(e){const i=this._open;e!==i&&(this._open=e,this.openHandler(e))}async setFocus(e){return this.focusSetter(()=>this.menuButtonEl,e)}connectedCallback(){super.connectedCallback(),this.connectMenuButtonEl()}willUpdate(e){e.has("expanded")&&(this.hasUpdated||this.expanded!==!1)&&this.expandedHandler(),e.has("activeMenuItemIndex")&&(this.hasUpdated||this.activeMenuItemIndex!==-1)&&this.updateActions(this.actionElements),e.has("expanded")&&this.hasUpdated&&(this.expanded?this.calciteActionMenuExpand.emit():this.calciteActionMenuCollapse.emit())}disconnectedCallback(){super.disconnectedCallback(),this.disconnectMenuButtonEl()}expandedHandler(){this.open=!1,this.setTooltipReferenceElement()}openHandler(e){this.menuButtonEl&&(this.menuButtonEl.active=e,this.menuButtonEl.aria={expanded:e}),this.popoverEl&&(this.popoverEl.open=e),this.activeMenuItemIndex=this.open?0:-1,this.calciteActionMenuOpen.emit(),this.setTooltipReferenceElement()}connectMenuButtonEl(){const{menuButtonId:e,menuId:i,open:r,label:n}=this,s=this.slottedMenuButtonEl||this.defaultMenuButtonEl;this.menuButtonEl!==s&&(this.disconnectMenuButtonEl(),this.menuButtonEl=s,this.setTooltipReferenceElement(),s&&(s.active=r,s.setAttribute("aria-controls",i),s.setAttribute("aria-expanded",QF(r)),s.setAttribute("aria-haspopup","true"),s.id||(s.id=e),s.label||(s.label=n),s.text||(s.text=n),s.addEventListener("click",this.menuButtonClick),s.addEventListener("keydown",this.menuButtonKeyDown)))}disconnectMenuButtonEl(){const{menuButtonEl:e}=this;e&&(e.removeEventListener("click",this.menuButtonClick),e.removeEventListener("keydown",this.menuButtonKeyDown),this.menuButtonEl=null)}setMenuButtonEl(e){const i=e.target.assignedElements({flatten:!0}).filter(r=>r?.matches("calcite-action"));this.slottedMenuButtonEl=i[0],this.connectMenuButtonEl()}setDefaultMenuButtonEl(e){this.defaultMenuButtonEl=e,this.connectMenuButtonEl()}setPopoverEl(e){e&&(this.popoverEl=e,e.open=this.open)}handleCalciteActionClick(){this.open=!1,this.setFocus()}updateTooltip(e){const i=e.target.assignedElements({flatten:!0}).filter(r=>r?.matches("calcite-tooltip"));this.tooltipEl=i[0],this.setTooltipReferenceElement()}setTooltipReferenceElement(){const{tooltipEl:e,expanded:i,menuButtonEl:r,open:n}=this;e&&(e.referenceElement=!i&&!n?r:null)}updateActions(e){e?.forEach(this.updateAction)}async handleDefaultSlotChange(e){const i=e.target.assignedElements({flatten:!0}).reduce((r,n)=>n?.matches("calcite-action")?(r.push(n),r):n?.matches("calcite-action-group")?r.concat(Array.from(n.querySelectorAll("calcite-action"))):r,[]);await this.componentOnReady(),this.actionElements=i.filter(r=>!r.disabled&&!r.hidden)}isValidKey(e,i){return!!i.find(r=>r===e)}handleActionNavigation(e,i,r){if(!this.isValidKey(i,dyt))return;if(e.preventDefault(),!this.open){this.toggleOpen(),(i==="Home"||i==="ArrowDown")&&(this.activeMenuItemIndex=0),(i==="End"||i==="ArrowUp")&&(this.activeMenuItemIndex=r.length-1);return}i==="Home"&&(this.activeMenuItemIndex=0),i==="End"&&(this.activeMenuItemIndex=r.length-1);const n=this.activeMenuItemIndex;i==="ArrowUp"&&(this.activeMenuItemIndex=nT(Math.max(n-1,-1),r.length)),i==="ArrowDown"&&(this.activeMenuItemIndex=nT(n+1,r.length))}toggleOpen(e=!this.open){this.open=e}handlePopoverOpen(e){e.stopPropagation(),this.open=!0,this.setFocus()}handlePopoverClose(e){e.stopPropagation(),this.open=!1}renderMenuButton(){const{appearance:e,label:i,scale:r,expanded:n}=this;return J`<slot name=${pT.trigger} @slotchange=${this.setMenuButtonEl}><calcite-action .appearance=${e} .aria=${{expanded:n}} class=${q(Uue.defaultTrigger)} .icon=${cyt.menu} .scale=${r} .text=${i} .textEnabled=${n} ${zt(this.setDefaultMenuButtonEl)}></calcite-action></slot>`}renderMenuItems(){const{actionElements:e,activeMenuItemIndex:i,menuId:r,menuButtonEl:n,label:s,placement:a,overlayPositioning:o,flipPlacements:l}=this,h=e[i]?.id||null;return J`<calcite-popover auto-close .flipPlacements=${l} focus-trap-disabled .label=${s} offset-distance=0 @calcitePopoverClose=${this.handlePopoverClose} @calcitePopoverOpen=${this.handlePopoverOpen} .overlayPositioning=${o} .placement=${a} pointer-disabled .referenceElement=${n} trigger-disabled ${zt(this.setPopoverEl)}><div aria-activedescendant=${h??Xe} aria-labelledby=${n?.id??Xe} class=${q(Uue.menu)} id=${r??Xe} @click=${this.handleCalciteActionClick} role=menu tabindex=-1><slot @slotchange=${this.handleDefaultSlotChange}></slot></div></calcite-popover>`}render(){return J`${this.renderMenuButton()}${this.renderMenuItems()}<slot name=${pT.tooltip} @slotchange=${this.updateTooltip}></slot>`}};iF.properties={activeMenuItemIndex:[16,{},{state:!0}],menuButtonEl:[16,{},{state:!0}],appearance:[3,{},{reflect:!0}],expanded:[7,{},{reflect:!0,type:Boolean}],flipPlacements:[0,{},{attribute:!1}],label:1,open:[7,{},{reflect:!0,type:Boolean}],overlayPositioning:[3,{},{reflect:!0}],placement:[3,{},{reflect:!0}],scale:[3,{},{reflect:!0}]},iF.styles=uyt;let o5=iF;$i("calcite-action-menu",o5);const hyt=Object.freeze(Object.defineProperty({__proto__:null,ActionMenu:o5},Symbol.toStringTag,{value:"Module"}));const Pr={actionBarContainer:"action-bar-container",container:"container",contentBottom:"content-bottom",contentTop:"content-top",header:"header",headerContainer:"header-container",headerContainerBorderEnd:"header-container--border-end",headingTextContent:"heading-text-content",heading:"heading",description:"description",headerContent:"header-content",headerActions:"header-actions",headerActionsEnd:"header-actions--end",headerActionsStart:"header-actions--start",icon:"icon",contentWrapper:"content-wrapper",fabContainer:"fab-container",footer:"footer",footerContent:"footer-content",footerActions:"footer-actions",footerStart:"footer-start",footerEnd:"footer-end",headerSlottedContent:"header--slotted-content",headerNonSlottedContent:"header--non-slotted-content",menuAction:"menu-action"},Hue={close:"close",collapse:"collapse"},AL={close:"x",menu:"ellipsis",expand:"chevron-down",collapse:"chevron-up"},Ul={actionBar:"action-bar",alerts:"alerts",contentBottom:"content-bottom",contentTop:"content-top",headerActionsStart:"header-actions-start",headerActionsEnd:"header-actions-end",headerMenuActions:"header-menu-actions",headerContent:"header-content",fab:"fab",footer:"footer",footerEnd:"footer-end",footerStart:"footer-start",footerActions:"footer-actions"};const pyt=St`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{position:relative;box-sizing:border-box;display:flex;block-size:100%;inline-size:100%;flex:1 1 auto;overflow:hidden;--calcite-min-header-height: calc(var(--calcite-icon-size) * 3);border-radius:var(--calcite-panel-corner-radius, var(--calcite-corner-radius-sharp))}slot[name=alerts]::slotted(calcite-alert){block-size:0}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}.header{margin:0;display:flex;align-content:space-between;align-items:center;fill:var(--calcite-color-text-2);color:var(--calcite-color-text-2)}.heading{margin:0;padding:0;font-weight:var(--calcite-font-weight-medium)}.header .heading{flex:1 1 auto;padding:.5rem}:host([scale=s]){--calcite-internal-panel-default-space: var(--calcite-spacing-sm);--calcite-internal-panel-header-vertical-padding: var(--calcite-spacing-sm-plus)}:host([scale=s]) .header-content .heading{font-size:var(--calcite-font-size--1)}:host([scale=s]) .header-content .description{font-size:var(--calcite-font-size--2)}:host([scale=s]) .header-content .icon{margin-inline-end:var(--calcite-spacing-sm)}:host([scale=m]){--calcite-internal-panel-default-space: var(--calcite-spacing-md);--calcite-internal-panel-header-vertical-padding: var(--calcite-spacing-md-plus)}:host([scale=m]) .header-content .heading{font-size:var(--calcite-font-size-0)}:host([scale=m]) .header-content .description{font-size:var(--calcite-font-size--1)}:host([scale=m]) .header-content .icon{margin-inline-end:var(--calcite-spacing-md)}:host([scale=l]){--calcite-internal-panel-default-space: var(--calcite-spacing-lg);--calcite-internal-panel-header-vertical-padding: var(--calcite-spacing-xl)}:host([scale=l]) .header-content .heading{font-size:var(--calcite-font-size-1)}:host([scale=l]) .header-content .description{font-size:var(--calcite-font-size-0)}:host([scale=l]) .header-content .icon{margin-inline-end:var(--calcite-spacing-lg)}.content-top,.content-bottom{display:flex;align-items:flex-start;align-self:stretch;padding:var(--calcite-internal-panel-default-space);border-block-start:1px solid var(--calcite-panel-border-color, var(--calcite-color-border-3));background-color:var(--calcite-panel-background-color, var(--calcite-color-foreground-1))}.container{position:relative;margin:0;display:flex;inline-size:100%;flex:1 1 auto;flex-direction:column;align-items:stretch;overflow:hidden;background-color:var(--calcite-color-background);padding:0;color:var(--calcite-color-text-2);transition:max-block-size var(--calcite-animation-timing),inline-size var(--calcite-animation-timing);box-sizing:border-box;font-size:var(--calcite-font-size--1)}.container *{box-sizing:border-box}.header{z-index:var(--calcite-z-index-header);display:flex;flex-direction:column;background-color:var(--calcite-panel-header-background-color, var(--calcite-color-foreground-1));border-block-end:1px solid var(--calcite-panel-border-color, var(--calcite-panel-header-border-block-end, var(--calcite-color-border-3)))}.header-container{display:flex;inline-size:100%;flex-direction:row;align-items:stretch;justify-content:flex-start;flex:0 0 auto}.header-container--border-end{border-block-end:1px solid var(--calcite-panel-border-color, var(--calcite-color-border-3))}.action-bar-container{inline-size:100%}.action-bar-container ::slotted(calcite-action-bar){inline-size:100%}.header-content{display:flex;flex-direction:column;overflow:hidden;padding-inline:.75rem;padding-block:.875rem;margin-inline-end:auto;justify-content:center}.header-content .heading-text-content{flex:1 1 auto;overflow:hidden}.header-content .heading,.header-content .description{display:block;flex:none;overflow-wrap:break-word;padding:0;line-height:var(--calcite-font-line-height-relative-snug)}.header-content .heading{font-weight:var(--calcite-font-weight-medium);color:var(--calcite-panel-heading-text-color, var(--calcite-color-text-1))}.header-content .heading:only-child{margin-block-end:0px}.header-content .description{color:var(--calcite-panel-description-text-color, var(--calcite-color-text-2))}#close,#collapse,.back-button,calcite-action-menu{--calcite-action-background-color: var(--calcite-panel-header-action-background-color);--calcite-action-background-color-hover: var(--calcite-panel-header-action-background-color-hover);--calcite-action-background-color-press: var(--calcite-panel-header-action-background-color-press);--calcite-action-text-color: var(--calcite-panel-header-action-text-color);--calcite-action-text-color-press: var(--calcite-panel-header-action-text-color-press)}.back-button{border-width:0px;border-style:solid;border-inline-end-width:1px;border-color:var(--calcite-panel-border-color, var(--calcite-color-border-3))}.header-actions{display:flex;flex-direction:row;flex-wrap:nowrap;align-items:stretch}.header-actions--end{margin-inline-start:auto}.content-wrapper{position:relative;display:flex;block-size:100%;flex:1 1 auto;flex-direction:column;flex-wrap:nowrap;align-items:stretch;overflow:auto;color:var(--calcite-color-text-2);outline-color:transparent;padding:var(--calcite-panel-space, var(--calcite-panel-content-space, 0));background:var(--calcite-panel-background-color, var(--calcite-color-background))}.content-wrapper:focus-visible{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(calc(-1 * var(--calcite-spacing-base)) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}.header-content{flex:1 1 auto;justify-content:center;padding-block:var(--calcite-internal-panel-header-vertical-padding);padding-inline:var(--calcite-internal-panel-default-space)}.header-content.header--slotted-content{padding:var(--calcite-panel-header-content-space, var(--calcite-internal-panel-header-vertical-padding) var(--calcite-internal-panel-default-space))}.header-content.header--non-slotted-content{align-items:center;flex-direction:row}.footer{margin-block-start:auto;display:flex;flex-direction:row;align-content:space-between;align-items:center;justify-content:center;font-size:var(--calcite-font-size--2);line-height:1.375;border-block-start:1px solid var(--calcite-panel-border-color, var(--calcite-color-border-3));padding:var(--calcite-panel-footer-space, var(--calcite-panel-footer-padding, var(--calcite-internal-panel-default-space)));background-color:var(--calcite-panel-footer-background-color, var(--calcite-color-foreground-1))}.footer-content{display:flex;flex:1 1 0%;flex-direction:row;align-items:center;justify-content:center}.footer-actions{display:flex;flex:1 1 0%;flex-direction:row;align-items:center;justify-content:space-evenly;gap:var(--calcite-internal-panel-default-space)}.footer-start{display:flex;flex:1 1 0%;flex-direction:row;align-items:center;justify-content:flex-start;margin-inline-end:auto;gap:var(--calcite-internal-panel-default-space)}.footer-end{display:flex;flex:1 1 0%;flex-direction:row;align-items:center;justify-content:flex-end;margin-inline-start:auto;gap:var(--calcite-internal-panel-default-space)}.fab-container{position:sticky;inset-block-end:0px;z-index:var(--calcite-z-index-sticky);margin-block:0px;margin-inline:auto;display:block;padding:.5rem;inset-inline:0;inline-size:fit-content}calcite-icon{--calcite-icon-color: var(--calcite-panel-icon-color, var(--calcite-color-text-1))}:host([hidden]){display:none}[hidden]{display:none}`,rF=class rF extends Et{constructor(){super(),this.containerRef=wr(),this.resizeObserver=ea("resize",()=>this.resizeHandler()),this.messages=qn(),this._closed=!1,this.focusSetter=pn()(this),this.hasActionBar=!1,this.hasContentBottom=!1,this.hasContentTop=!1,this.hasEndActions=!1,this.hasFab=!1,this.hasFooterActions=!1,this.hasFooterContent=!1,this.hasFooterEndContent=!1,this.hasFooterStartContent=!1,this.hasHeaderContent=!1,this.hasMenuItems=!1,this.hasStartActions=!1,this.showHeaderContent=!1,this.closable=!1,this.collapseDirection="down",this.collapsed=!1,this.collapsible=!1,this.disabled=!1,this.iconFlipRtl=!1,this.loading=!1,this.menuOpen=!1,this.menuPlacement=Qke,this.overlayPositioning="absolute",this.scale="m",this.calcitePanelClose=Re({cancelable:!0}),this.calcitePanelCollapse=Re({cancelable:!1}),this.calcitePanelExpand=Re({cancelable:!1}),this.calcitePanelScroll=Re({cancelable:!1}),this.calcitePanelToggle=Re({cancelable:!1}),this.listen("keydown",this.panelKeyDownHandler),this.listen("calcitePanelClose",this.panelCloseHandler)}get closed(){return this._closed}set closed(e){const i=this._closed;e!==i&&this.setClosedState(e)}async scrollContentTo(e){this.panelScrollEl?.scrollTo(e)}async setFocus(e){return this.focusSetter(()=>this.containerRef.value,e)}willUpdate(e){e.has("collapsed")&&this.hasUpdated&&(this.collapsed?this.calcitePanelCollapse.emit():this.calcitePanelExpand.emit())}updated(){ta(this)}disconnectedCallback(){super.disconnectedCallback(),this.resizeObserver?.disconnect()}async setClosedState(e){if(this.beforeClose&&e)try{await this.beforeClose?.()}catch{return}this._closed=e}resizeHandler(){const{panelScrollEl:e}=this;if(!e||typeof e.scrollHeight!="number"||typeof e.offsetHeight!="number")return;e.scrollHeight>e.offsetHeight?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}closeClickHandler(){this.emitCloseEvent()}emitCloseEvent(){this.calcitePanelClose.emit()}panelKeyDownHandler(e){this.closable&&e.key==="Escape"&&!e.defaultPrevented&&(this.emitCloseEvent(),e.preventDefault())}panelCloseHandler(e){e.defaultPrevented||e.target!==this.el||(this.closed=!0)}collapse(){this.collapsed=!this.collapsed,this.calcitePanelToggle.emit()}panelScrollHandler(){this.calcitePanelScroll.emit()}handleHeaderActionsStartSlotChange(e){this.hasStartActions=ni(e)}handleHeaderActionsEndSlotChange(e){this.hasEndActions=ni(e)}handleHeaderMenuActionsSlotChange(e){this.hasMenuItems=ni(e)}handleActionBarSlotChange(e){const i=Md(e).filter(r=>r?.matches("calcite-action-bar"));i.forEach(r=>r.layout="horizontal"),this.hasActionBar=!!i.length}handleHeaderContentSlotChange(e){this.hasHeaderContent=ni(e)}handleFabSlotChange(e){this.hasFab=ni(e)}handleFooterActionsSlotChange(e){this.hasFooterActions=ni(e)}handleFooterEndSlotChange(e){this.hasFooterEndContent=ni(e)}handleFooterStartSlotChange(e){this.hasFooterStartContent=ni(e)}handleFooterSlotChange(e){this.hasFooterContent=ni(e)}contentBottomSlotChangeHandler(e){this.hasContentBottom=ni(e)}contentTopSlotChangeHandler(e){this.hasContentTop=ni(e)}setPanelScrollEl(e){_I(this.resizeObserver,this.panelScrollEl,e),this.panelScrollEl=e}handleAlertsSlotChange(e){Md(e)?.map(i=>{i.nodeName==="CALCITE-ALERT"&&(i.embedded=!0)})}renderHeaderContent(){const{heading:e,headingLevel:i,description:r,hasHeaderContent:n,icon:s,scale:a}=this,o=s?J`<calcite-icon class=${q(Pr.icon)} .flipRtl=${this.iconFlipRtl} .icon=${s} .scale=${Dr(a)}></calcite-icon>`:null,l=e?FJ({class:Pr.heading,level:i,children:e}):null,c=r?J`<span class=${q(Pr.description)}>${r}</span>`:null;return!n&&(l||c)?xt("header-content",J`<div class=${q({[Pr.headerContent]:!0,[Pr.headerNonSlottedContent]:!0})}>${o}<div class=${q(Pr.headingTextContent)}>${l}${c}</div></div>`):null}renderActionBar(){return J`<div class=${q(Pr.actionBarContainer)} .hidden=${!this.hasActionBar}><slot name=${Ul.actionBar} @slotchange=${this.handleActionBarSlotChange}></slot></div>`}renderHeaderSlottedContent(){return xt("slotted-header-content",J`<div class=${q({[Pr.headerContent]:!0,[Pr.headerSlottedContent]:!0})} .hidden=${!this.hasHeaderContent}><slot name=${Ul.headerContent} @slotchange=${this.handleHeaderContentSlotChange}></slot></div>`)}renderHeaderStartActions(){const{hasStartActions:e}=this;return xt("header-actions-start",J`<div class=${q({[Pr.headerActionsStart]:!0,[Pr.headerActions]:!0})} .hidden=${!e}><slot name=${Ul.headerActionsStart} @slotchange=${this.handleHeaderActionsStartSlotChange}></slot></div>`)}renderHeaderActionsEnd(){const{hasEndActions:e,messages:i,closable:r,collapsed:n,collapseDirection:s,collapsible:a,hasMenuItems:o}=this,{collapse:l,expand:c,close:h}=i,f=[AL.expand,AL.collapse];s==="up"&&f.reverse();const g=a?J`<calcite-action .aria=${{expanded:!n}} .icon=${n?f[0]:f[1]} id=${Hue.collapse} .label=${l} @click=${this.collapse} .scale=${this.scale} .text=${l} title=${(n?c:l)??Xe}></calcite-action>`:null,y=r?J`<calcite-action .ariaLabel=${h} .icon=${AL.close} id=${Hue.close} @click=${this.closeClickHandler} .scale=${this.scale} .text=${h} title=${h??Xe}></calcite-action>`:null,b=J`<slot name=${Ul.headerActionsEnd} @slotchange=${this.handleHeaderActionsEndSlotChange}></slot>`,_=e||g||y||o;return xt("header-actions-end",J`<div class=${q({[Pr.headerActionsEnd]:!0,[Pr.headerActions]:!0})} .hidden=${!_}>${b}${this.renderMenu()}${g}${y}</div>`)}renderMenu(){const{hasMenuItems:e,messages:i,menuOpen:r,menuFlipPlacements:n,menuPlacement:s}=this;return xt("menu",J`<calcite-action-menu .flipPlacements=${n??["top","bottom"]} .hidden=${!e} .label=${i.options} .open=${r} .overlayPositioning=${this.overlayPositioning} .placement=${s}><calcite-action class=${q(Pr.menuAction)} .icon=${AL.menu} .scale=${this.scale} slot=${pT.trigger} .text=${i.options}></calcite-action><slot name=${Ul.headerMenuActions} @slotchange=${this.handleHeaderMenuActionsSlotChange}></slot></calcite-action-menu>`)}renderHeaderNode(){const{hasHeaderContent:e,hasStartActions:i,hasEndActions:r,closable:n,collapsible:s,hasMenuItems:a,hasActionBar:o,hasContentTop:l}=this,c=this.renderHeaderContent(),h=e||!!c||i||r||s||n||a||o||l;return this.showHeaderContent=h,J`<header class=${q(Pr.header)} .hidden=${!(h||o||l)}><div class=${q({[Pr.headerContainer]:!0,[Pr.headerContainerBorderEnd]:o})} .hidden=${!h}>${this.renderHeaderStartActions()}${this.renderHeaderSlottedContent()}${c}${this.renderHeaderActionsEnd()}</div>${this.renderActionBar()}${this.renderContentTop()}</header>`}renderFooterNode(){const{hasFooterEndContent:e,hasFooterStartContent:i,hasFooterContent:r,hasFooterActions:n}=this,s=i||e||r||n;return J`<footer class=${q(Pr.footer)} .hidden=${!s}><div class=${q(Pr.footerContent)} .hidden=${!r}><slot name=${Ul.footer} @slotchange=${this.handleFooterSlotChange}></slot></div><div class=${q(Pr.footerStart)} .hidden=${r||!i}><slot name=${Ul.footerStart} @slotchange=${this.handleFooterStartSlotChange}></slot></div><div class=${q(Pr.footerEnd)} .hidden=${r||!e}><slot name=${Ul.footerEnd} @slotchange=${this.handleFooterEndSlotChange}></slot></div><div class=${q(Pr.footerActions)} .hidden=${r||!n}>${xt("footer-actions-slot",J`<slot name=${Ul.footerActions} @slotchange=${this.handleFooterActionsSlotChange}></slot>`)}</div></footer>`}renderContent(){return J`<div class=${q(Pr.contentWrapper)} .hidden=${this.collapsible&&this.collapsed} @scroll=${this.panelScrollHandler} ${zt(this.setPanelScrollEl)}><slot></slot>${this.renderFab()}</div>`}renderContentBottom(){return J`<div class=${q(Pr.contentBottom)} .hidden=${!this.hasContentBottom}><slot name=${Ul.contentBottom} @slotchange=${this.contentBottomSlotChangeHandler}></slot></div>`}renderContentTop(){return J`<div class=${q(Pr.contentTop)} .hidden=${!this.hasContentTop}><slot name=${Ul.contentTop} @slotchange=${this.contentTopSlotChangeHandler}></slot></div>`}renderFab(){return J`<div class=${q(Pr.fabContainer)} .hidden=${!this.hasFab}><slot name=${Ul.fab} @slotchange=${this.handleFabSlotChange}></slot></div>`}render(){const{disabled:e,loading:i,closed:r}=this,n=J`<article .ariaBusy=${i} class=${q(Pr.container)} .hidden=${r} ${zt(this.containerRef)}>${this.renderHeaderNode()}${this.renderContent()}${this.renderContentBottom()}${this.renderFooterNode()}${xt("alerts",J`<slot name=${Ul.alerts} @slotchange=${this.handleAlertsSlotChange}></slot>`)}</article>`;return ia({disabled:e,children:J`${i?J`<calcite-scrim .loading=${i}></calcite-scrim>`:null}${n}`})}};rF.properties={hasActionBar:[16,{},{state:!0}],hasContentBottom:[16,{},{state:!0}],hasContentTop:[16,{},{state:!0}],hasEndActions:[16,{},{state:!0}],hasFab:[16,{},{state:!0}],hasFooterActions:[16,{},{state:!0}],hasFooterContent:[16,{},{state:!0}],hasFooterEndContent:[16,{},{state:!0}],hasFooterStartContent:[16,{},{state:!0}],hasHeaderContent:[16,{},{state:!0}],hasMenuItems:[16,{},{state:!0}],hasStartActions:[16,{},{state:!0}],showHeaderContent:[16,{},{state:!0}],beforeClose:[0,{},{attribute:!1}],closable:[7,{},{reflect:!0,type:Boolean}],closed:[7,{},{reflect:!0,type:Boolean}],collapseDirection:1,collapsed:[7,{},{reflect:!0,type:Boolean}],collapsible:[7,{},{reflect:!0,type:Boolean}],description:1,disabled:[7,{},{reflect:!0,type:Boolean}],heading:1,headingLevel:[11,{},{type:Number,reflect:!0}],icon:[3,{},{reflect:!0}],iconFlipRtl:[7,{},{reflect:!0,type:Boolean}],loading:[7,{},{reflect:!0,type:Boolean}],menuFlipPlacements:[0,{},{attribute:!1}],menuOpen:[7,{},{reflect:!0,type:Boolean}],menuPlacement:[3,{},{reflect:!0}],messageOverrides:[0,{},{attribute:!1}],overlayPositioning:[3,{},{reflect:!0}],scale:[3,{},{reflect:!0}]},rF.styles=pyt;let Zq=rF;$i("calcite-panel",Zq);let Cy=class extends lt{constructor(e){super(e),this._viewpointHandle=null,this.group=null}initialize(){this.addHandles(Oa(()=>this.view?.ui,"expand",e=>{const{target:i}=e;i&&i!==this&&i.expanded&&i.group&&i.group===this.group&&this._collapse()}))}destroy(){this._viewpointHandle=null,this.view=null}set autoCollapse(e){this._set("autoCollapse",e),this._watchViewpoint()}set expanded(e){const i=!!e;this._set("expanded",i);const r=this.view?.ui;r&&r.emit("expand",{target:this}),this._viewpointHandleChange(i)}get state(){return this.view?.ready?"ready":"disabled"}set view(e){this._get("view")!==e&&(this._set("view",e),e&&as(()=>e.ready,()=>{this.view===e&&this._watchViewpoint()},{once:!0,initial:!0}))}_viewpointHandleChange(e){this._viewpointHandle&&(e?as(()=>this.view?.stationary,()=>this._viewpointHandle?.resume(),{once:!0,initial:!0}):this._viewpointHandle.pause())}_watchViewpoint(){const e="viewpoint";this.removeHandles(e),this._viewpointHandle=null;const{autoCollapse:i,view:r}=this;if(!r||!i)return;const n=K3e(()=>r.type==="3d"?r.camera:r.viewpoint,()=>this._collapse());this.addHandles(n,e),this._viewpointHandle=n}_collapse(){this.expanded=!1}};d([m({value:!1})],Cy.prototype,"autoCollapse",null),d([m({value:!1})],Cy.prototype,"expanded",null),d([m()],Cy.prototype,"group",void 0),d([m({readOnly:!0})],Cy.prototype,"state",null),d([m({value:null})],Cy.prototype,"view",null),Cy=d([U("esri.widgets.Expand.ExpandViewModel")],Cy);const fyt=Cy;const myt=St`:host{display:flex;pointer-events:auto;--arcgis-expand-icon-number-left: none;--arcgis-expand-icon-number-right: none}arcgis-expand>.arcgis-expand__content--expanded{background-color:var(--calcite-color-background)}.arcgis-expand{--esri-widget-panel-max-height: 95svh;--calcite-sheet-max-height: var(--esri-widget-panel-max-height);--calcite-sheet-height: auto;min-width:32px;min-height:32px}.arcgis-expand__toggle{position:relative}.arcgis-expand__popover-content{flex-direction:column;display:flex;max-height:var(--arcgis-expand-max-height, 95svh);::slotted(*){max-height:var(--arcgis-expand-max-height, 95svh);overflow-y:auto}::slotted(arcgis-sketch){--arcgis-internal-sketch-gap: var(--calcite-spacing-none)}::slotted(:is(arcgis-area-measurement-2d,arcgis-area-measurement-3d,arcgis-basemap-gallery,arcgis-basemap-layer-list,arcgis-bookmarks,arcgis-building-explorer,arcgis-catalog-layer-list,arcgis-directions,arcgis-direct-line-measurement-3d,arcgis-distance-measurement-2d,arcgis-editor,arcgis-feature-form,arcgis-features,arcgis-layer-list,arcgis-legend,arcgis-line-of-sight,arcgis-print,arcgis-shadow-cast,arcgis-slice,arcgis-table-list,arcgis-utility-network-trace,arcgis-grid-controls)){width:var(--arcgis-internal-panel-width);min-width:var(--calcite-spacing-xxxl);min-height:var(--calcite-spacing-xxxl);transition:max-height .25s ease-in-out}}.arcgis-expand__popover-content .esri-widget--panel{width:300px}.arcgis-expand__panel{max-height:var(--esri-widget-panel-max-height)}.arcgis-expand__panel-content{::slotted(*){width:100%}::slotted(:is(arcgis-area-measurement-2d,arcgis-area-measurement-3d,arcgis-basemap-gallery,arcgis-basemap-layer-list,arcgis-bookmarks,arcgis-building-explorer,arcgis-catalog-layer-list,arcgis-directions,arcgis-direct-line-measurement-3d,arcgis-distance-measurement-2d,arcgis-editor,arcgis-feature-form,arcgis-features,arcgis-layer-list,arcgis-legend,arcgis-line-of-sight,arcgis-print,arcgis-shadow-cast,arcgis-slice,arcgis-table-list,arcgis-utility-network-trace,arcgis-grid-controls)){overflow-y:auto}}.arcgis-expand__panel-content .esri-widget{width:auto}.arcgis-expand__panel-content .esri-widget--panel{flex:auto}.arcgis-map-container-ui__element .arcgis-expand__popover-content .esri-widget,.arcgis-map-container-ui__element .arcgis-expand__popover-content .esri-widget.esri-component,.arcgis-map-container-ui__element .arcgis-expand__panel-content .esri-widget,.arcgis-map-container-ui__element .arcgis-expand__panel-content .esri-widget.esri-component,.arcgis-expand__popover-content .esri-widget,.arcgis-expand__popover-content .esri-widget.esri-component,.arcgis-expand__panel-content .esri-widget,.arcgis-expand__panel-content .esri-widget.esri-component{box-sizing:border-box;box-shadow:none;margin-bottom:0}.arcgis-expand__panel-content,.arcgis-expand__content-container{background-color:var(--calcite-color-foreground-1);flex-direction:column;flex:auto;justify-content:stretch;display:flex}.arcgis-expand__sheet .arcgis-expand__panel-content,.arcgis-expand__sheet .arcgis-expand__content-container{overflow:hidden}.arcgis-expand__panel-icon-number{align-self:center}.arcgis-expand__icon{display:flex}calcite-button:not(:hover) .arcgis-expand__icon:not(calcite-icon){color:var(--calcite-color-text-3)}.arcgis-expand__icon-flip{transform:var(--arcgis-collapse-icon-flip)}.arcgis-expand__icon-number{transform-origin:50%;color:var(--calcite-color-text-inverse);pointer-events:none;background-color:var(--calcite-color-text-3);border-radius:var(--calcite-spacing-xl);justify-content:center;align-items:center;height:var(--calcite-spacing-lg);padding:.125em .333em;font-size:var(--calcite-font-size-sm);line-height:1em;display:flex;position:absolute;top:-6px;left:var(--arcgis-expand-icon-number-left);right:var(--arcgis-expand-icon-number-right)}`,hh="arcgis-expand",ph={base:hh,toggle:`${hh}__toggle`,popoverContent:`${hh}__popover-content`,panel:`${hh}__panel`,panelContent:`${hh}__panel-content`,sheet:`${hh}__sheet`,contentContainer:`${hh}__content-container`,icon:`${hh}__icon`,iconFlip:`${hh}__icon-flip`,iconNumber:`${hh}__icon-number`},Gue="chevrons-left",que="chevrons-right",gyt=bA(fyt);var Pw;let yyt=(Pw=class extends Et{constructor(){super(...arguments),this.popoverEl=wr(),this.messages=XT({}),this.viewModel=gyt(this),this.toggleActionEl=wr(),this.view=this.viewModel.view,this.state=this.viewModel.state,this.autoDestroyDisabled=!1,this.autoCollapse=this.viewModel.autoCollapse,this.closeOnEscDisabled=!1,this.content="",this.expandTooltip="",this.collapseTooltip="",this.focusTrapDisabled=!1,this.focusTrapEnabled=this.focusTrapDisabled,this.group=this.viewModel.group,this.iconNumber=0,this.mode="auto",this.arcgisPropertyChange=w_()("expanded"),this.arcgisReady=Re()}get expandTitle(){const{expanded:e,messages:i,collapseTooltip:r,expandTooltip:n}=this;return(e?r||i.collapse:n||i.expand)??""}get _displaySheet(){switch(this.mode){case"drawer":return!0;case"auto":return this.viewModel.view?.widthBreakpoint==="xsmall";default:return!1}}get expanded(){return this.viewModel.expanded}set expanded(e){this.viewModel.expanded=e}get expandIcon(){if(this._expandIcon)return this._expandIcon;let e=null;return this.content instanceof HTMLElement&&("widget"in this.content&&this.content.widget?.icon?e=this.content.widget.icon:"icon"in this.content?e=this.content.icon:e=this.content.getAttribute("icon")),e??Gue}set expandIcon(e){this._expandIcon=e}get collapseIcon(){return this._collapseIcon??que}set collapseIcon(e){this._collapseIcon=e}async collapse(){this.expanded=!1}async destroy(){await this.manager.destroy()}async expand(){this.expanded=!0}loaded(){this.manager.onLifecycle(()=>[ze(()=>this.viewModel?.view?.size,()=>this.popoverEl?.value?.reposition(),{initial:!0})])}toggle(){this.expanded=!this.expanded}getPopoverPlacement(){if(this.placement)return this.placement;switch(this.el.slot){case"bottom-start":case"bottom-left":return"right-end";case"bottom-right":case"bottom-end":return"left-end";case"top-start":case"top-left":return"right-start";case"top-right":case"top-end":return"left-start";default:return"auto"}}_isCloseOnEscapeDisabled(e){const{closeOnEscDisabled:i}=this;return typeof i=="function"?i(e):i}_handlePopoverClose(e){e.target===this.popoverEl.value&&this.collapse()}_handleKeyDown(e){this.expanded&&e.key==="Escape"&&this._isCloseOnEscapeDisabled(e)&&e.preventDefault()}render(){const{_displaySheet:e,toggleActionEl:i,viewModel:{expanded:r},label:n}=this;return J`<div class=${q({[ph.base]:!0,[zo.widget]:!0})}>${this._renderToggle()}${e?J`<calcite-sheet class=${q(ph.sheet)} height=l .label=${n??""} @keydown=${this._handleKeyDown} .open=${r} position=block-end @calciteSheetClose=${this.collapse}><calcite-panel class=${q(ph.panel)} closable .closed=${!r} .heading=${n} @keydown=${this._handleKeyDown} @calcitePanelClose=${this.collapse}><div class=${q(ph.panelContent)}>${this._renderContent()}</div></calcite-panel></calcite-sheet>`:i.value?J`<calcite-popover .focusTrapDisabled=${this.focusTrapDisabled} .label=${n??""} @keydown=${this._handleKeyDown} trigger-disabled .open=${this.expanded} overlay-positioning=fixed .placement=${this.getPopoverPlacement()} .referenceElement=${i.value} @calcitePopoverClose=${this._handlePopoverClose} ${zt(this.popoverEl)}><div class=${q(ph.popoverContent)}>${this._renderContent()}</div></calcite-popover>`:null}</div>`}_renderBadgeNumber(){const{expanded:e,iconNumber:i}=this;return i&&!e?J`<span class=${q(ph.iconNumber)}>${i}</span>`:null}_renderToggleButton(){const{expanded:e,expandTitle:i,expandIcon:r,collapseIcon:n}=this,s=e?n:r,a=s===Gue||s===que;return J`<calcite-action class=${q(zo.widgetButton)} @click=${this.toggle} scale=s .text=${i} title=${i??De} ${zt(this.toggleActionEl)}>${s?J`<calcite-icon class=${q({[ph.icon]:!0,[ph.iconFlip]:a})} .icon=${s} scale=s></calcite-icon>`:null}</calcite-action>`}_renderToggle(){return J`<div class=${q(ph.toggle)}>${this._renderToggleButton()}${this._renderBadgeNumber()}</div>`}_renderContent(){return J`<div class=${q(ph.contentContainer)}><slot></slot></div>`}},Pw.properties={expandTitle:16,_displaySheet:16,view:0,state:3,icon:1,label:1,autoDestroyDisabled:5,position:1,referenceElement:1,autoCollapse:5,closeOnEscDisabled:5,content:1,expanded:7,expandIcon:3,expandTooltip:1,collapseIcon:3,collapseTooltip:1,focusTrapDisabled:5,focusTrapEnabled:5,group:1,iconNumber:9,mode:1,placement:1,messageOverrides:0},Pw.styles=myt,Pw);nn("arcgis-expand",yyt);const vyt=St`:host{pointer-events:auto}`;var Ow;let byt=(Ow=class extends Et{constructor(){super(...arguments),this.view=XSe(this),this.arcgisReady=Re()}loaded(){UE(this)}render(){return J`<slot></slot>`}},Ow.properties={position:1,referenceElement:1,view:0},Ow.styles=vyt,Ow);nn("arcgis-placement",byt);const wyt={trigger:"trigger"},mU={content:"content",wrapper:"wrapper",triggerContainer:"trigger-container"},Wue="calcite-dropdown",PL={menuButton:t=>`${Wue}-${t}-menubutton`,menu:t=>`${Wue}-${t}-menu`},_yt=St`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:inline-block}.wrapper{--calcite-floating-ui-z-index: var(--calcite-z-index-dropdown);inline-size:max-content;display:none;max-inline-size:100vw;max-block-size:100vh;inset-block-start:0;left:0;z-index:var(--calcite-floating-ui-z-index)}@starting-style{.wrapper{opacity:0;inset-block-start:0;left:0}}.wrapper .calcite-floating-ui-anim{position:relative;transition-duration:var(--calcite-floating-ui-transition);transition-property:inset-block-start,left,opacity,display;transition-behavior:allow-discrete;opacity:0;box-shadow:0 0 16px #00000029;z-index:var(--calcite-z-index);border-radius:.25rem}.wrapper[data-placement^=bottom] .calcite-floating-ui-anim{inset-block-start:-5px}.wrapper[data-placement^=top] .calcite-floating-ui-anim{inset-block-start:5px}.wrapper[data-placement^=left] .calcite-floating-ui-anim{left:5px}.wrapper[data-placement^=right] .calcite-floating-ui-anim{left:-5px}.wrapper[data-placement] .calcite-floating-ui-anim--active{opacity:1;inset-block-start:0;left:0}@starting-style{.wrapper[data-placement] .calcite-floating-ui-anim--active{opacity:0}}.content{max-height:45vh;width:auto;overflow-y:auto;overflow-x:hidden;inline-size:var(--calcite-dropdown-width, var(--calcite-internal-dropdown-width));background-color:var(--calcite-dropdown-background-color, var(--calcite-color-foreground-1))}.trigger-container{position:relative;display:flex;height:100%;flex:1 1 auto;word-wrap:break-word;word-break:break-word}.width-s{--calcite-internal-dropdown-width: 12rem}.width-m{--calcite-internal-dropdown-width: 14rem}.width-l{--calcite-internal-dropdown-width: 16rem}@media (forced-colors: active){:host([open]) .wrapper{border:var(--calcite-border-width-sm) solid canvasText}}:host([hidden]){display:none}[hidden]{display:none}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}`,aI=class aI extends Et{constructor(){super(),this.focusLastDropdownItem=!1,this.groups=[],this.guid=Vd(),this.items=[],this.mutationObserver=ea("mutation",()=>this.updateItems()),this.transitionProp="opacity",this.resizeObserver=ea("resize",e=>this.resizeObserverCallback(e)),this.focusSetter=pn()(this),this.closeOnSelectDisabled=!1,this.disabled=!1,this.maxItems=0,this.offsetDistance=0,this.offsetSkidding=0,this.open=!1,this.overlayPositioning="absolute",this.placement=nM,this.scale="m",this.selectedItems=[],this.type="click",this.calciteDropdownBeforeClose=Re({cancelable:!1}),this.calciteDropdownBeforeOpen=Re({cancelable:!1}),this.calciteDropdownClose=Re({cancelable:!1}),this.calciteDropdownOpen=Re({cancelable:!1}),this.calciteDropdownSelect=Re({cancelable:!1}),this.listenOn(window,"click",this.closeCalciteDropdownOnClick),this.listen("calciteInternalDropdownCloseRequest",this.closeCalciteDropdownOnEvent),this.listenOn(window,"calciteDropdownOpen",this.closeCalciteDropdownOnOpenEvent),this.listen("pointerenter",this.pointerEnterHandler),this.listen("pointerleave",this.pointerLeaveHandler),this.listen("calciteInternalDropdownItemKeyEvent",this.calciteInternalDropdownItemKeyEvent),this.listen("calciteInternalDropdownItemSelect",this.handleItemSelect)}async reposition(e=!1){const{filteredFlipPlacements:i,floatingEl:r,offsetDistance:n,offsetSkidding:s,overlayPositioning:a,placement:o,referenceEl:l}=this;return RJ(this,{floatingEl:r,referenceEl:l,offsetDistance:n,offsetSkidding:s,overlayPositioning:a,placement:o,flipPlacements:i,type:"menu"},e)}async setFocus(e){return this.focusSetter(()=>this.referenceEl,e)}connectedCallback(){super.connectedCallback(),this.mutationObserver?.observe(this.el,{childList:!0,subtree:!0}),this.setFilteredPlacements(),this.updateItems(),Dm(this)}willUpdate(e){e.has("open")&&(this.hasUpdated||this.open!==!1)&&this.openHandler(),e.has("disabled")&&(this.hasUpdated||this.disabled!==!1)&&this.handleDisabledChange(this.disabled),e.has("flipPlacements")&&this.flipPlacementsHandler(),e.has("maxItems")&&this.hasUpdated&&this.setMaxScrollerHeight(),this.hasUpdated&&(e.has("offsetDistance")&&this.offsetDistance!==0||e.has("offsetSkidding")&&this.offsetSkidding!==0||e.has("overlayPositioning")&&this.overlayPositioning!=="absolute"||e.has("placement")&&this.placement!==nM)&&this.reposition(!0),e.has("scale")&&(this.hasUpdated||this.scale!=="m")&&this.handlePropsChange()}updated(){ta(this)}loaded(){this.updateSelectedItems(),Dm(this)}disconnectedCallback(){super.disconnectedCallback(),this.mutationObserver?.disconnect(),this.resizeObserver?.disconnect(),dj(this)}openHandler(){__(this),!this.disabled&&this.reposition(!0)}handleDisabledChange(e){e||(this.open=!1)}flipPlacementsHandler(){this.setFilteredPlacements(),this.reposition(!0)}handlePropsChange(){this.updateItems(),this.updateGroupProps()}closeCalciteDropdownOnClick(e){this.disabled||!this.open||e.composedPath().includes(this.el)||this.closeCalciteDropdown(!1)}closeCalciteDropdownOnEvent(e){this.closeCalciteDropdown(),e.stopPropagation()}closeCalciteDropdownOnOpenEvent(e){e.composedPath().includes(this.el)||(this.open=!1)}pointerEnterHandler(){this.disabled||this.type!=="hover"||this.toggleDropdown()}pointerLeaveHandler(){this.disabled||this.type!=="hover"||this.closeCalciteDropdown()}getTraversableItems(){return this.items.filter(e=>!e.disabled&&!e.hidden)}calciteInternalDropdownItemKeyEvent(e){const{keyboardEvent:i}=e.detail,r=i.target,n=this.getTraversableItems();switch(i.key){case"Tab":this.open=!1,this.updateTabIndexOfItems(r);break;case"ArrowDown":Jy(n,r,"next");break;case"ArrowUp":Jy(n,r,"previous");break;case"Home":Jy(n,r,"first");break;case"End":Jy(n,r,"last");break}e.stopPropagation()}handleItemSelect(e){this.updateSelectedItems(),e.stopPropagation(),this.calciteDropdownSelect.emit(),(!this.closeOnSelectDisabled||e.detail.requestedDropdownGroup.selectionMode==="none")&&this.closeCalciteDropdown(),e.stopPropagation()}setFilteredPlacements(){const{el:e,flipPlacements:i}=this;this.filteredFlipPlacements=i?e2e(i,e):null}updateTriggers(e){this.triggers=e.target.assignedElements({flatten:!0}),this.reposition(!0)}updateItems(){this.items=this.groups.map(e=>Array.from(e?.querySelectorAll("calcite-dropdown-item"))).reduce((e,i)=>[...e,...i],[]),this.updateSelectedItems(),this.reposition(!0),this.items.forEach(e=>e.scale=this.scale)}updateGroups(e){const i=e.target.assignedElements({flatten:!0}).filter(r=>r?.matches("calcite-dropdown-group"));this.groups=i,this.updateItems(),this.updateGroupProps()}updateGroupProps(){this.groups.forEach((e,i)=>{e.scale=this.scale,e.position=i})}resizeObserverCallback(e){e.forEach(({target:i})=>{i===this.referenceEl?this.setDropdownWidth():i===this.scrollerEl&&this.setMaxScrollerHeight()})}setDropdownWidth(){const{referenceEl:e,scrollerEl:i}=this;!i||!e||(i.style.minWidth=`${e.clientWidth}px`)}setMaxScrollerHeight(){const{maxItems:e,items:i,scrollerEl:r}=this;if(!r)return;const n=i.length>=e&&e>0?this.getYDistanceFromScroller(i.at(e-1)):0;r.style.maxBlockSize=n>0?`${n}px`:"",this.reposition(!0)}setScrollerAndTransitionEl(e){_I(this.resizeObserver,this.scrollerEl,e),this.scrollerEl=e,this.transitionEl=e}onBeforeOpen(){this.focusOnFirstActiveOrDefaultItem(),this.calciteDropdownBeforeOpen.emit()}onOpen(){this.calciteDropdownOpen.emit()}onBeforeClose(){this.calciteDropdownBeforeClose.emit()}onClose(){this.calciteDropdownClose.emit(),zJ(this)}setReferenceEl(e){_I(this.resizeObserver,this.referenceEl,e),this.referenceEl=e,Dm(this)}setFloatingEl(e){this.floatingEl=e,Dm(this)}keyDownHandler(e){if(!e.composedPath().includes(this.referenceEl))return;const{defaultPrevented:i,key:r}=e;if(!i){if(r==="Escape"){this.closeCalciteDropdown(),e.preventDefault();return}if(this.open&&e.shiftKey&&r==="Tab"){this.closeCalciteDropdown(),e.preventDefault();return}eN(r)?(this.toggleDropdown(),e.preventDefault()):(r==="ArrowDown"||r==="ArrowUp")&&(e.preventDefault(),this.focusLastDropdownItem=r==="ArrowUp",this.open=!0)}}updateSelectedItems(){this.selectedItems=this.items.filter(e=>e.selected)}getYDistanceFromScroller(e){const i=e.getBoundingClientRect();return e.offsetTop+i.height}closeCalciteDropdown(e=!0){this.open=!1,e&&H$(this.triggers[0])}async focusOnFirstActiveOrDefaultItem(){const i=this.getTraversableItems().find(r=>r.selected)||(this.focusLastDropdownItem?this.items.at(-1):this.items[0]);this.focusLastDropdownItem=!1,i&&(await this.updateComplete,await h9(),await h9(),await H$(i),i.scrollIntoView({block:"nearest"}))}toggleDropdown(){this.open=!this.open}updateTabIndexOfItems(e){this.items.forEach(i=>{i.tabIndex=e!==i?-1:0})}render(){const{open:e,guid:i}=this;return ia({disabled:this.disabled,children:J`<div class=${q(mU.triggerContainer)} id=${PL.menuButton(i)??Xe} @click=${this.toggleDropdown} @keydown=${this.keyDownHandler} ${zt(this.setReferenceEl)}><slot aria-controls=${PL.menu(i)??Xe} .ariaExpanded=${e} aria-haspopup=menu name=${wyt.trigger} @slotchange=${this.updateTriggers}></slot></div><div .ariaHidden=${!e} class=${q({[mU.wrapper]:!0,[iM("width",this.width,this.widthScale)]:!!(this.width||this.widthScale)})} ${zt(this.setFloatingEl)}><div aria-labelledby=${PL.menuButton(i)??Xe} class=${q({[mU.content]:!0,[hT.animation]:!0,[hT.animationActive]:e})} id=${PL.menu(i)??Xe} role=menu ${zt(this.setScrollerAndTransitionEl)}><slot @slotchange=${this.updateGroups}></slot></div></div>`})}};aI.properties={closeOnSelectDisabled:[7,{},{reflect:!0,type:Boolean}],disabled:[7,{},{reflect:!0,type:Boolean}],flipPlacements:[0,{},{attribute:!1}],maxItems:[11,{},{reflect:!0,type:Number}],offsetDistance:[11,{},{type:Number,reflect:!0}],offsetSkidding:[11,{},{reflect:!0,type:Number}],open:[7,{},{reflect:!0,type:Boolean}],overlayPositioning:[3,{},{reflect:!0}],placement:[3,{},{reflect:!0}],scale:[3,{},{reflect:!0}],selectedItems:[0,{},{attribute:!1}],type:[3,{},{reflect:!0}],widthScale:[3,{},{reflect:!0}],width:[3,{},{reflect:!0}]},aI.shadowRootOptions={mode:"open",delegatesFocus:!0},aI.styles=_yt;let l5=aI;$i("calcite-dropdown",l5);const cFt=Object.freeze(Object.defineProperty({__proto__:null,Dropdown:l5},Symbol.toStringTag,{value:"Module"}));const Iy={container:"container",containerNone:"container--none-selection",icon:"dropdown-item-icon",iconEnd:"dropdown-item-icon--end",iconStart:"dropdown-item-icon--start",itemContent:"dropdown-item-content",link:"dropdown-link"},Yue={check:"check",bulletPoint:"bullet-point"};const xyt=St`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{position:relative;display:flex;flex-grow:1;align-items:center;outline-color:transparent}.container{position:relative;display:flex;flex-grow:1;cursor:pointer;align-items:center;text-decoration-line:none;color:var(--calcite-dropdown-item-text-color, var(--calcite-color-text-3));text-align:start;outline-color:transparent}.container a{outline:none;position:relative;display:flex;flex-grow:1;cursor:pointer;align-items:center;text-decoration-line:none;color:var(--calcite-dropdown-item-text-color, var(--calcite-color-text-3))}.dropdown-item-content{flex:1 1 auto;padding-block:.125rem}.dropdown-item-icon{position:relative;opacity:0;transition-timing-function:cubic-bezier(.4,0,.2,1);transform:scale(.9)}:host([scale=s]) .container{padding-block:.25rem;padding-inline:.5rem;font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=s]) .dropdown-item-icon,:host([scale=s]) .dropdown-item-icon--start{padding-inline-end:var(--calcite-spacing-sm)}:host([scale=s]) .dropdown-item-icon--end{padding-inline-start:var(--calcite-spacing-sm)}:host([scale=m]) .container{padding-block:.5rem;padding-inline:.75rem;font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale=m]) .dropdown-item-icon,:host([scale=m]) .dropdown-item-icon--start{padding-inline-end:var(--calcite-spacing-md)}:host([scale=m]) .dropdown-item-icon--end{padding-inline-start:var(--calcite-spacing-md)}:host([scale=l]) .container{padding-block:.625rem;padding-inline:1rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=l]) .dropdown-item-icon,:host([scale=l]) .dropdown-item-icon--start{padding-inline-end:var(--calcite-spacing-lg)}:host([scale=l]) .dropdown-item-icon--end{padding-inline-start:var(--calcite-spacing-lg)}:host(:focus) .container{text-decoration-line:none;outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(calc(-1 * var(--calcite-spacing-base)) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}:host(:hover:not([disabled])) .container{background-color:var(--calcite-dropdown-item-background-color-hover, var(--calcite-color-foreground-2))}:host(:active:not([disabled])) .container{background-color:var(--calcite-dropdown-item-background-color-press, var(--calcite-color-foreground-3))}:host(:hover:not([disabled])) .container,:host(:active:not([disabled])) .container{text-decoration-line:none;color:var(--calcite-dropdown-item-text-color-press, var(--calcite-color-text-1))}:host(:hover:not([disabled])) .dropdown-link,:host(:active:not([disabled])) .dropdown-link{color:var(--calcite-dropdown-item-text-color-press, var(--calcite-color-text-1))}:host([selected]) .container:not(.container--none-selection),:host([selected]) .dropdown-link{font-weight:var(--calcite-font-weight-medium);color:var(--calcite-dropdown-item-text-color-press, var(--calcite-color-text-1))}:host([selected]) .container:not(.container--none-selection) calcite-icon,:host([selected]) .dropdown-link calcite-icon{color:var(--calcite-dropdown-item-icon-color-press, var(--calcite-color-brand))}:host(:hover:not([disabled])) .dropdown-item-icon{color:var(--calcite-dropdown-item-icon-color-hover)}:host([selected]) .dropdown-item-icon{opacity:1}:host([hidden]){display:none}[hidden]{display:none}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}`,nF=class nF extends Et{constructor(){super(),this.childLink=wr(),this.focusSetter=pn()(this),this.disabled=!1,this.scale="m",this.selected=!1,this.selectionMode="single",this.calciteDropdownItemSelect=Re({cancelable:!1}),this.calciteInternalDropdownCloseRequest=Re({cancelable:!1}),this.calciteInternalDropdownItemKeyEvent=Re({cancelable:!1}),this.calciteInternalDropdownItemSelect=Re({cancelable:!1}),this.listen("click",this.onClick),this.listen("keydown",this.keyDownHandler),this.listenOn(document.body,"calciteInternalDropdownItemChange",this.updateActiveItemOnChange)}async setFocus(e){return this.focusSetter(()=>this.el,e)}connectedCallback(){super.connectedCallback(),this.initialize()}load(){this.initialize()}updated(){ta(this)}onClick(){this.emitRequestedItem()}keyDownHandler(e){switch(e.key){case" ":case"Enter":this.emitRequestedItem(),this.href&&this.childLink.value.click(),e.preventDefault();break;case"Escape":this.calciteInternalDropdownCloseRequest.emit(),e.preventDefault();break;case"Tab":this.calciteInternalDropdownItemKeyEvent.emit({keyboardEvent:e});break;case"ArrowUp":case"ArrowDown":case"Home":case"End":e.preventDefault(),this.calciteInternalDropdownItemKeyEvent.emit({keyboardEvent:e});break}}updateActiveItemOnChange(e){e.composedPath().includes(this.parentDropdownGroupEl)&&(this.requestedDropdownGroup=e.detail.requestedDropdownGroup,this.requestedDropdownItem=e.detail.requestedDropdownItem,this.determineActiveItem()),e.stopPropagation()}initialize(){this.parentDropdownGroupEl=this.el.closest("calcite-dropdown-group"),this.selectionMode==="none"&&(this.selected=!1)}determineActiveItem(){switch(this.selectionMode){case"multiple":this.el===this.requestedDropdownItem&&(this.selected=!this.selected);break;case"single":this.el===this.requestedDropdownItem?this.selected=!0:this.requestedDropdownGroup===this.parentDropdownGroupEl&&(this.selected=!1);break;case"none":this.selected=!1;break}}emitRequestedItem(){this.calciteDropdownItemSelect.emit(),this.calciteInternalDropdownItemSelect.emit({requestedDropdownItem:this.el,requestedDropdownGroup:this.parentDropdownGroupEl})}render(){const{href:e,selectionMode:i,label:r,iconFlipRtl:n}=this,s=J`<calcite-icon class=${q(Iy.iconStart)} .flipRtl=${n==="start"||n==="both"} .icon=${this.iconStart} .scale=${Dr(this.scale)}></calcite-icon>`,a=J`<span class=${q(Iy.itemContent)}><slot></slot></span>`,o=J`<calcite-icon class=${q(Iy.iconEnd)} .flipRtl=${n==="end"||n==="both"} .icon=${this.iconEnd} .scale=${Dr(this.scale)}></calcite-icon>`,l=this.iconStart&&this.iconEnd?[s,a,o]:this.iconStart?[s,a]:this.iconEnd?[a,o]:a,c=e?J`<a .ariaLabel=${r} class=${q(Iy.link)} href=${e??De} rel=${this.rel??De} tabindex=-1 target=${this.target??De} ${zt(this.childLink)}>${l}</a>`:l,h=e?null:i==="single"?"menuitemradio":i==="multiple"?"menuitemcheckbox":"menuitem",f=i!=="none"?QF(this.selected):null,{disabled:g}=this;return this.el.ariaChecked=f,this.el.ariaLabel=e?"":r,this.el.role=h,FT(this.el,"tabIndex",g?-1:0),ia({disabled:g,children:J`<div class=${q({[Iy.container]:!0,[Iy.containerNone]:i==="none"})}>${i!=="none"?J`<calcite-icon class=${q(Iy.icon)} .icon=${i==="multiple"?Yue.check:Yue.bulletPoint} .scale=${Dr(this.scale)}></calcite-icon>`:null}${c}</div>`})}};nF.properties={disabled:[7,{},{reflect:!0,type:Boolean}],href:[3,{},{reflect:!0}],iconEnd:[3,{},{reflect:!0}],iconFlipRtl:[3,{},{reflect:!0}],iconStart:[3,{},{reflect:!0}],label:1,rel:[3,{},{reflect:!0}],scale:[3,{},{reflect:!0}],selected:[7,{},{reflect:!0,type:Boolean}],selectionMode:1,target:[3,{},{reflect:!0}]},nF.styles=xyt;let c5=nF;$i("calcite-dropdown-item",c5);const uFt=Object.freeze(Object.defineProperty({__proto__:null,DropdownItem:c5},Symbol.toStringTag,{value:"Module"}));const Zue={title:"dropdown-title",separator:"dropdown-separator"},Syt=St`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{display:block}.container{text-align:start}.dropdown-title{margin-block-end:-1px;display:block;cursor:default;overflow-wrap:break-word;border-width:0px;border-block-end-width:1px;border-style:solid;font-weight:var(--calcite-font-weight-bold);border-color:var(--calcite-dropdown-group-border-color, var(--calcite-color-border-3));color:var(--calcite-dropdown-group-title-text-color, var(--calcite-color-text-2))}.dropdown-separator{display:block;block-size:1px;background-color:var(--calcite-dropdown-group-border-color, var(--calcite-color-border-3))}:host([scale=s]){font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=s]) .dropdown-title{padding:.5rem}:host([scale=m]){font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale=m]) .dropdown-title{padding:.75rem}:host([scale=l]){font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=l]) .dropdown-title{padding:1rem}:host([hidden]){display:none}[hidden]{display:none}`,oI=class oI extends Et{constructor(){super(),this.mutationObserver=ea("mutation",()=>this.updateItems()),this.position=-1,this.scale="m",this.selectionMode="single",this.calciteInternalDropdownItemChange=Re({cancelable:!1}),this.listen("calciteInternalDropdownItemSelect",this.updateActiveItemOnChange)}connectedCallback(){super.connectedCallback(),this.updateItems(),this.mutationObserver?.observe(this.el,{childList:!0})}willUpdate(e){e.has("selectionMode")&&(this.hasUpdated||this.selectionMode!=="single")&&this.updateItems()}disconnectedCallback(){super.disconnectedCallback(),this.mutationObserver?.disconnect()}updateActiveItemOnChange(e){this.requestedDropdownGroup=e.detail.requestedDropdownGroup,this.requestedDropdownItem=e.detail.requestedDropdownItem,this.calciteInternalDropdownItemChange.emit({requestedDropdownGroup:this.requestedDropdownGroup,requestedDropdownItem:this.requestedDropdownItem})}updateItems(){Array.from(this.el.querySelectorAll("calcite-dropdown-item")).forEach(e=>e.selectionMode=this.selectionMode)}render(){const e=this.groupTitle?J`<span aria-hidden=true class=${q(Zue.title)}>${this.groupTitle}</span>`:null,i=this.position>0?J`<div class=${q(Zue.separator)} role=separator></div>`:null;return this.el.ariaLabel=this.groupTitle,this.el.role="group",J`<div class=${q({[Iy.container]:!0})}>${i}${e}<slot></slot></div>`}};oI.properties={groupTitle:[3,{},{reflect:!0}],position:[9,{},{type:Number}],scale:[3,{},{reflect:!0}],selectionMode:[3,{},{reflect:!0}]},oI.shadowRootOptions={mode:"open",delegatesFocus:!0},oI.styles=Syt;let u5=oI;$i("calcite-dropdown-group",u5);const dFt=Object.freeze(Object.defineProperty({__proto__:null,DropdownGroup:u5},Symbol.toStringTag,{value:"Module"}));const Xue={handle:"handle",dropdown:"dropdown"},Jue={drag:"drag",blank:"blank"},gU={label:"{label}",position:"{position}",total:"{total}"},Kue=["top","up","down","bottom"],$yt={trigger:"trigger"},yU={add:"add",move:"move",reorder:"reorder"},Tyt=St`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:flex}.dropdown{block-size:100%}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}:host([hidden]){display:none}[hidden]{display:none}`,sF=class sF extends Et{constructor(){super(...arguments),this.focusSetter=pn()(this),this.disabled=!1,this.messages=qn({blocking:!0}),this.addToItems=[],this.moveToItems=[],this.open=!1,this.overlayPositioning="absolute",this.placement=nM,this.scale="m",this.sortDisabled=!1,this.calciteSortHandleBeforeClose=Re({cancelable:!1}),this.calciteSortHandleBeforeOpen=Re({cancelable:!1}),this.calciteSortHandleClose=Re({cancelable:!1}),this.calciteSortHandleMove=Re({cancelable:!0}),this.calciteSortHandleAdd=Re({cancelable:!0}),this.calciteSortHandleOpen=Re({cancelable:!1}),this.calciteSortHandleReorder=Re({cancelable:!0})}get hasSetInfo(){return typeof this.setPosition=="number"&&typeof this.setSize=="number"}get hasValidSetInfo(){return this.hasSetInfo?this.setPosition>0&&this.setSize>1:!0}get hasReorderItems(){return!this.sortDisabled&&this.hasValidSetInfo}get hasNoItems(){return!this.hasReorderItems&&this.moveToItems.length<1&&this.addToItems.length<1}async setFocus(e){return this.focusSetter(()=>this.dropdownEl,e)}willUpdate(e){e.has("open")&&(this.hasUpdated||this.open!==!1)&&this.openHandler()}updated(){ta(this)}openHandler(){if(this.disabled){this.open=!1;return}this.dropdownEl&&(this.dropdownEl.open=this.open)}setDropdownEl(e){e&&(this.dropdownEl=e,this.openHandler())}getLabel(){const{label:e,messages:i,setPosition:r,setSize:n,hasSetInfo:s}=this;if(!s)return e??"";let a=e?i.repositionLabel.replace(gU.label,e):i.reposition;return a=a.replace(gU.position,r?r.toString():""),a.replace(gU.total,n?n.toString():"")}handleBeforeOpen(e){e.stopPropagation(),this.calciteSortHandleBeforeOpen.emit()}handleOpen(e){e.stopPropagation(),this.calciteSortHandleOpen.emit(),this.open=!0}handleBeforeClose(e){e.stopPropagation(),this.calciteSortHandleBeforeClose.emit()}handleClose(e){e.stopPropagation(),this.calciteSortHandleClose.emit(),this.open=!1}handleReorder(e){this.calciteSortHandleReorder.emit({reorder:e.target.dataset.value})}handleMoveTo(e){const i=e.target.dataset.id,r=this.moveToItems.find(n=>n.id===i);this.calciteSortHandleMove.emit({moveTo:r})}handleAddTo(e){const i=e.target.dataset.id,r=this.addToItems.find(n=>n.id===i);this.calciteSortHandleAdd.emit({addTo:r})}render(){const{disabled:e,flipPlacements:i,open:r,overlayPositioning:n,placement:s,scale:a,widthScale:o,hasNoItems:l}=this,c=this.getLabel(),h=e||l;return ia({disabled:e,children:J`<calcite-dropdown class=${q(Xue.dropdown)} .disabled=${h} .flipPlacements=${i} @calciteDropdownBeforeClose=${this.handleBeforeClose} @calciteDropdownBeforeOpen=${this.handleBeforeOpen} @calciteDropdownClose=${this.handleClose} @calciteDropdownOpen=${this.handleOpen} .overlayPositioning=${n} .placement=${s} .scale=${a} .widthScale=${o} ${zt(this.setDropdownEl)}><calcite-action .active=${r} appearance=transparent .aria=${{expanded:r}} class=${q(Xue.handle)} .dragHandle=${!0} .icon=${e?Jue.blank:Jue.drag} .label=${c} .scale=${a} slot=${$yt.trigger} .text=${c} title=${c??Xe}></calcite-action>${this.renderReorderGroup()}${this.renderMoveToGroup()}${this.renderAddToGroup()}</calcite-dropdown>`})}renderAddToItem(e){return xt(e.id,J`<calcite-dropdown-item data-id=${e.id??Xe} .label=${e.label} @calciteDropdownItemSelect=${this.handleAddTo}>${e.label}</calcite-dropdown-item>`)}renderMoveToItem(e){return xt(e.id,J`<calcite-dropdown-item data-id=${e.id??Xe} .label=${e.label} @calciteDropdownItemSelect=${this.handleMoveTo}>${e.label}</calcite-dropdown-item>`)}renderReorderGroup(){return this.hasReorderItems?xt("reorder",J`<calcite-dropdown-group .groupTitle=${this.messages.reorder} id=${yU.reorder} .scale=${this.scale} selection-mode=none>${this.renderTop()}${this.renderUp()}${this.renderDown()}${this.renderBottom()}</calcite-dropdown-group>`):null}renderAddToGroup(){const{messages:e,addToItems:i,scale:r}=this;return i.length?xt("add-to-items",J`<calcite-dropdown-group .groupTitle=${e.addTo} id=${yU.add} .scale=${r} selection-mode=none>${i.map(n=>this.renderAddToItem(n))}</calcite-dropdown-group>`):null}renderMoveToGroup(){const{messages:e,moveToItems:i,scale:r}=this;return i.length?xt("move-to-items",J`<calcite-dropdown-group .groupTitle=${e.moveTo} id=${yU.move} .scale=${r} selection-mode=none>${i.map(n=>this.renderMoveToItem(n))}</calcite-dropdown-group>`):null}renderDropdownItem(e,i){return xt(Kue[e],J`<calcite-dropdown-item data-value=${Kue[e]??Xe} .label=${i} @calciteDropdownItemSelect=${this.handleReorder}>${i}</calcite-dropdown-item>`)}renderTop(){const{setPosition:e}=this;return e!==1&&e!==2?this.renderDropdownItem(0,this.messages.moveToTop):null}renderUp(){return this.setPosition!==1?this.renderDropdownItem(1,this.messages.moveUp):null}renderDown(){return this.setPosition!==this.setSize?this.renderDropdownItem(2,this.messages.moveDown):null}renderBottom(){const{setPosition:e,setSize:i}=this;return e!==i&&e!==i-1?this.renderDropdownItem(3,this.messages.moveToBottom):null}};sF.properties={disabled:[7,{},{reflect:!0,type:Boolean}],flipPlacements:[0,{},{attribute:!1}],label:1,messageOverrides:[0,{},{attribute:!1}],messages:[0,{},{attribute:!1}],addToItems:[0,{},{attribute:!1}],moveToItems:[0,{},{attribute:!1}],open:[7,{},{reflect:!0,type:Boolean}],overlayPositioning:[3,{},{reflect:!0}],placement:[3,{},{reflect:!0}],scale:[3,{},{reflect:!0}],setPosition:[9,{},{type:Number}],setSize:[9,{},{type:Number}],sortDisabled:[7,{},{reflect:!0,type:Boolean}],widthScale:[3,{},{reflect:!0}]},sF.styles=Tyt;let Xq=sF;$i("calcite-sort-handle",Xq);const i2e=St`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host(.calcite-sortable--chosen),:host(.calcite-sortable--drag),:host(.calcite-sortable--fallback),:host(.calcite-sortable--ghost){position:relative;overflow:hidden}:host(.calcite-sortable--ghost):before{content:"";position:absolute;inset-block:0px;inset-inline-start:0px;inset-inline-end:0px;z-index:var(--calcite-z-index);box-sizing:border-box;border-width:1px;border-style:dashed;border-color:var(--calcite-color-brand);background-color:var(--calcite-color-foreground-2)}:host(.calcite-sortable--drag){--tw-shadow: 0 6px 20px -4px rgba(0, 0, 0, .1), 0 4px 12px -2px rgba(0, 0, 0, .08);--tw-shadow-colored: 0 6px 20px -4px var(--tw-shadow-color), 0 4px 12px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}`;const zb={content:"content",toggle:"toggle",header:"header"},vn={actionsEnd:"actions-end",container:"container",content:"content",contentStart:"content-start",controlContainer:"control-container",description:"description",header:"header",headerContainer:"header-container",headerHasContent:"header--has-content",heading:"heading",icon:"icon",iconStart:"icon--start",iconEnd:"icon--end",iconEndContainer:"icon-end-container",invalid:"invalid",statusIcon:"status-icon",title:"title",toggle:"toggle",toggleIcon:"toggle-icon",valid:"valid"},j2={actionsEnd:"actions-end",contentStart:"content-start",control:"control",headerMenuActions:"header-menu-actions",icon:"icon"},vU={expanded:"chevron-up",collapsed:"chevron-down",valid:"check-circle",invalid:"exclamation-mark-triangle"},kyt=St`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{box-sizing:border-box;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:host{--calcite-icon-size: 1rem;--calcite-spacing-eighth: .125rem;--calcite-spacing-quarter: .25rem;--calcite-spacing-half: .5rem;--calcite-spacing-three-quarters: .75rem;--calcite-spacing: 1rem;--calcite-spacing-plus-quarter: 1.25rem;--calcite-spacing-plus-half: 1.5rem;--calcite-spacing-double: 2rem;--calcite-menu-min-width: 10rem;--calcite-header-min-height: 3rem;--calcite-footer-min-height: 3rem}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host([scale=s]) .header{gap:var(--calcite-spacing-sm)}:host([scale=s]) .header--has-content{padding:var(--calcite-spacing-sm)}:host([scale=s]) .icon-end-container{gap:var(--calcite-spacing-sm);padding-inline-end:var(--calcite-spacing-sm)}:host([scale=s]) .heading{font-size:var(--calcite-font-size-sm)}:host([scale=s]) .description{font-size:var(--calcite-font-size-xs)}:host([scale=s]){--calcite-internal-block-padding-block: var( --calcite-block-content-space, var(--calcite-block-padding, var(--calcite-spacing-xxs)) );--calcite-internal-block-padding-inline: var( --calcite-block-content-space, var(--calcite-block-padding, var(--calcite-spacing-sm)) )}:host([scale=m]) .header{gap:var(--calcite-spacing-md)}:host([scale=m]) .header--has-content{padding:var(--calcite-spacing-md)}:host([scale=m]) .icon-end-container{gap:var(--calcite-spacing-md);padding-inline-end:var(--calcite-spacing-md)}:host([scale=m]) .heading{font-size:var(--calcite-font-size)}:host([scale=m]) .description{font-size:var(--calcite-font-size-sm)}:host([scale=m]){--calcite-internal-block-padding-block: var( --calcite-block-content-space, var(--calcite-block-padding, var(--calcite-spacing-sm)) );--calcite-internal-block-padding-inline: var( --calcite-block-content-space, var(--calcite-block-padding, var(--calcite-spacing-md)) )}:host([scale=l]) .header{gap:var(--calcite-spacing-lg)}:host([scale=l]) .header--has-content{padding:var(--calcite-spacing-lg)}:host([scale=l]) .icon-end-container{gap:var(--calcite-spacing-lg);padding-inline-end:var(--calcite-spacing-lg)}:host([scale=l]) .heading{font-size:var(--calcite-font-size-md)}:host([scale=l]) .description{font-size:var(--calcite-font-size)}:host([scale=l]){--calcite-internal-block-padding-block: var( --calcite-block-content-space, var(--calcite-block-padding, var(--calcite-spacing-md)) );--calcite-internal-block-padding-inline: var( --calcite-block-content-space, var(--calcite-block-padding, var(--calcite-spacing-lg)) )}:host{display:flex;flex-shrink:0;flex-grow:0;flex-direction:column;border-width:0px;border-block-end-width:1px;border-style:solid;padding:0;transition-property:margin;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:var(--calcite-animation-timing);transition-timing-function:cubic-bezier(.215,.44,.42,.88);flex-basis:auto;border-color:var(--calcite-block-border-color, var(--calcite-color-border-3))}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}.header{margin:0;display:flex;align-content:space-between;align-items:center;fill:var(--calcite-color-text-2);color:var(--calcite-color-text-2)}.heading{margin:0;padding:0;font-weight:var(--calcite-font-weight-medium)}.header .heading{flex:1 1 auto;padding:.5rem}.header{justify-content:flex-start}.header,.toggle{grid-area:header}.header-container{display:grid;align-items:stretch;grid-template:auto/auto 1fr auto auto auto auto;grid-template-areas:"handle header icon-end control menu actions-end"}.icon--start,.icon--end{color:var(--calcite-block-icon-color, var(--calcite-color-text-3))}.actions-end{grid-area:actions-end}.toggle{margin:0;display:flex;cursor:pointer;flex-wrap:nowrap;align-items:center;justify-content:space-between;border-style:none;padding:0;font-family:var(--calcite-font-family);outline-color:transparent;text-align:initial;background-color:var(--calcite-block-header-background-color, transparent)}.toggle:hover{background-color:var(--calcite-block-header-background-color-hover, var(--calcite-color-foreground-2))}.toggle:focus{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(calc(-1 * var(--calcite-spacing-base)) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}.toggle:active{background-color:var(--calcite-block-header-background-color-press, var(--calcite-color-foreground-3))}calcite-loader[inline]{align-self:center}calcite-sort-handle{grid-area:handle}.title{display:flex;flex-direction:column}.header .title .heading{padding:0;transition-property:color;transition-duration:var(--calcite-animation-timing);transition-timing-function:cubic-bezier(.4,0,.2,1);word-wrap:break-word;word-break:break-word;color:var(--calcite-block-heading-text-color, var(--calcite-color-text-2));font-weight:var(--calcite-font-weight-medium);line-height:var(--calcite-font-line-height-relative-snug)}.description{padding:0;word-wrap:break-word;word-break:break-word;color:var(--calcite-block-description-text-color, var(--calcite-color-text-3));font-weight:var(--calcite-font-weight-regular);line-height:var(--calcite-font-line-height-relative-snug)}.icon{display:flex}.status-icon.valid{color:var(--calcite-color-status-success)}.status-icon.invalid{color:var(--calcite-color-status-danger)}@keyframes spin{0%{transform:rotate(0)}50%{transform:rotate(180deg)}to{transform:rotate(360deg)}}.icon-end-container{display:flex;align-items:center;grid-area:icon-end}.toggle-icon{align-self:center;justify-self:end;transition-property:color;transition-duration:var(--calcite-animation-timing);transition-timing-function:cubic-bezier(.4,0,.2,1);color:var(--calcite-block-icon-color, var(--calcite-color-text-3))}.toggle:hover .toggle-icon{color:var(--calcite-block-icon-color-hover, var(--calcite-color-text-1))}.container{position:relative;display:flex;block-size:100%;flex-direction:column}.content{position:relative;min-block-size:0px;flex:1 1 0%}@keyframes in{0%{opacity:0}to{opacity:1}}.content{animation:in var(--calcite-internal-animation-timing-slow) ease-in-out;padding-block:var(--calcite-internal-block-padding-block);padding-inline:var(--calcite-internal-block-padding-inline)}.content-start{display:flex;align-items:center;color:var(--calcite-block-text-color, var(--calcite-color-text-3))}.control-container{margin:0;display:flex;grid-area:control}calcite-action-menu{grid-area:menu}.actions-end{display:flex;align-items:stretch}:host([expanded]){margin-block:.5rem}:host([expanded]) .header .title .heading{color:var(--calcite-block-heading-text-color, var(--calcite-block-heading-text-color-press, var(--calcite-color-text-1)))}:host([expanded]) .description{color:var(--calcite-block-description-text-color, var(--calcite-color-text-2))}:host([expanded]) .icon--start,:host([expanded]) .icon--end{color:var(--calcite-block-icon-color, var(--calcite-color-text-1))}:host([expanded][scale=s]){margin-block:var(--calcite-spacing-xxs)}:host([expanded][scale=l]){margin-block:var(--calcite-spacing-md)}:host([hidden]){display:none}[hidden]{display:none}`,aF=class aF extends Et{constructor(){super(...arguments),this.transitionProp="margin-top",this.blockSectionChildren=[],this.messages=qn(),this.focusSetter=pn()(this),this.hasContentStart=!1,this.hasControl=!1,this.hasEndActions=!1,this.hasIcon=!1,this.hasMenuActions=!1,this.collapsible=!1,this.disabled=!1,this.dragDisabled=!1,this.dragHandle=!1,this.expanded=!1,this.loading=!1,this.menuPlacement=Qke,this.addToItems=[],this.moveToItems=[],this.sortDisabled=!1,this.overlayPositioning="absolute",this.scale="m",this.setPosition=null,this.setSize=null,this.sortHandleOpen=!1,this.calciteInternalBlockUpdateSortMenuItems=Re({cancelable:!1}),this.calciteBlockBeforeClose=Re({cancelable:!1}),this.calciteBlockBeforeOpen=Re({cancelable:!1}),this.calciteBlockClose=Re({cancelable:!1}),this.calciteBlockCollapse=Re({cancelable:!1}),this.calciteBlockExpand=Re({cancelable:!1}),this.calciteBlockOpen=Re({cancelable:!1}),this.calciteBlockSortHandleBeforeClose=Re({cancelable:!1}),this.calciteBlockSortHandleBeforeOpen=Re({cancelable:!1}),this.calciteBlockSortHandleClose=Re({cancelable:!1}),this.calciteBlockSortHandleOpen=Re({cancelable:!1}),this.calciteBlockToggle=Re({cancelable:!1})}get open(){return this.expanded}set open(e){xI.deprecated("property",{name:"open",removalVersion:4,suggested:"expanded"}),this.expanded=e}async setFocus(e){return this.focusSetter(()=>this.el,e)}connectedCallback(){super.connectedCallback(),this.transitionEl=this.el}load(){!this.heading&&!this.label&&xI.warn(`${this.el.tagName} is missing both heading & label. Please provide a heading or label for the component to be accessible.`)}willUpdate(e){e.has("expanded")&&(this.hasUpdated||this.expanded!==!1)&&__(this),e.has("sortHandleOpen")&&(this.hasUpdated||this.sortHandleOpen!==!1)&&this.sortHandleOpenHandler(),e.has("expanded")&&this.hasUpdated&&(this.expanded?this.calciteBlockExpand.emit():this.calciteBlockCollapse.emit()),e.has("scale")&&this.hasUpdated&&this.updateBlockSectionScale()}updated(){ta(this)}onBeforeOpen(){this.calciteBlockBeforeOpen.emit()}onOpen(){this.calciteBlockOpen.emit()}onBeforeClose(){this.calciteBlockBeforeClose.emit()}onClose(){this.calciteBlockClose.emit()}sortHandleOpenHandler(){this.sortHandleEl&&(this.sortHandleEl.open=this.sortHandleOpen)}setSortHandleEl(e){this.sortHandleEl=e,this.sortHandleOpenHandler()}handleSortHandleBeforeOpen(e){e.stopPropagation(),this.calciteBlockSortHandleBeforeOpen.emit()}handleSortHandleBeforeClose(e){e.stopPropagation(),this.calciteBlockSortHandleBeforeClose.emit()}handleSortHandleClose(e){e.stopPropagation(),this.sortHandleOpen=!1,this.calciteBlockSortHandleClose.emit()}handleSortHandleOpen(e){e.stopPropagation(),this.sortHandleOpen=!0,this.calciteBlockSortHandleOpen.emit()}onHeaderClick(){this.expanded=!this.expanded,this.calciteBlockToggle.emit()}controlSlotChangeHandler(e){this.hasControl=ni(e)}menuActionsSlotChangeHandler(e){this.hasMenuActions=ni(e)}iconSlotChangeHandler(e){this.hasIcon=ni(e)}actionsEndSlotChangeHandler(e){this.hasEndActions=ni(e)}handleContentStartSlotChange(e){this.hasContentStart=ni(e)}handleDefaultSlotChange(e){this.blockSectionChildren=Md(e,"calcite-block-section"),this.updateBlockSectionScale()}updateBlockSectionScale(){this.blockSectionChildren.forEach(e=>{e.scale=this.scale})}renderScrim(){const{loading:e}=this,i=J`<slot @slotchange=${this.handleDefaultSlotChange}></slot>`;return[e?J`<calcite-scrim .loading=${e}></calcite-scrim>`:null,i]}renderLoaderStatusIcon(){const{loading:e,messages:i,status:r}=this;return e?xt("loader",J`<div class=${q(vn.icon)}><calcite-loader inline .label=${i.loading} .scale=${this.scale}></calcite-loader></div>`):r?xt("status-icon",J`<div class=${q(vn.icon)}><calcite-icon class=${q({[vn.statusIcon]:!0,[vn.valid]:r=="valid",[vn.invalid]:r=="invalid"})} .icon=${vU[r]} .scale=${Dr(this.scale)}></calcite-icon></div>`):xt("icon-slot",J`<div class=${q(vn.icon)} .hidden=${!this.hasIcon}>${xt("icon-slot",J`<slot name=${j2.icon} @slotchange=${this.iconSlotChangeHandler}></slot>`)}</div>`)}renderActionsEnd(){return J`<div class=${q(vn.actionsEnd)} .hidden=${!this.hasEndActions}><slot name=${j2.actionsEnd} @slotchange=${this.actionsEndSlotChangeHandler}></slot></div>`}renderContentStart(){return J`<div class=${q(vn.contentStart)} .hidden=${!this.hasContentStart}><slot name=${j2.contentStart} @slotchange=${this.handleContentStartSlotChange}></slot></div>`}renderTitle(){const{heading:e,headingLevel:i,description:r}=this;return e||r?J`<div class=${q(vn.title)}>${FJ({class:vn.heading,level:i,children:e})}${r?J`<div class=${q(vn.description)}>${r}</div>`:null}</div>`:null}renderIcon(e){const{iconFlipRtl:i}=this,r=i==="both"||e==="start"?i==="start":i==="end",n=e==="start"?this.iconStart:this.iconEnd,s=e==="start"?vn.iconStart:vn.iconEnd;if(n)return xt(n,J`<calcite-icon class=${q(s)} .flipRtl=${r} .icon=${n} .scale=${Dr(this.scale)}></calcite-icon>`)}render(){const{collapsible:e,loading:i,expanded:r,label:n,heading:s,messages:a,description:o,menuFlipPlacements:l,menuPlacement:c,moveToItems:h,addToItems:f,setPosition:g,setSize:y,dragDisabled:b,sortDisabled:_,iconEnd:S,hasContentStart:$,iconStart:C}=this,I=r?a.collapse:a.expand,P=!!(s||o||$||C||i||status),O=J`<header class=${q({[vn.header]:!0,[vn.headerHasContent]:P})} id=${zb.header}>${this.renderIcon("start")}${this.renderContentStart()}${this.renderLoaderStatusIcon()}${this.renderTitle()}</header>`,N=r?vU.expanded:vU.collapsed,R=J`<div class=${q(vn.headerContainer)}>${this.dragHandle?J`<calcite-sort-handle .addToItems=${f} .disabled=${b} .label=${s||n} .moveToItems=${h} @calciteSortHandleBeforeClose=${this.handleSortHandleBeforeClose} @calciteSortHandleBeforeOpen=${this.handleSortHandleBeforeOpen} @calciteSortHandleClose=${this.handleSortHandleClose} @calciteSortHandleOpen=${this.handleSortHandleOpen} overlay-positioning=fixed .scale=${this.scale} .setPosition=${g} .setSize=${y} .sortDisabled=${_} ${zt(this.setSortHandleEl)}></calcite-sort-handle>`:null}${e?J`<button aria-controls=${zb.content} aria-describedby=${zb.header} .ariaExpanded=${e?r:null} class=${q(vn.toggle)} id=${zb.toggle} @click=${this.onHeaderClick} title=${I??Xe}>${O}<div class=${q(vn.iconEndContainer)}>${this.renderIcon("end")}<calcite-icon class=${q(vn.toggleIcon)} .icon=${N} .scale=${Dr(this.scale)}></calcite-icon></div></button>`:O}${S&&!e?J`<div class=${q(vn.iconEndContainer)}>${this.renderIcon("end")}</div>`:null}<div aria-labelledby=${zb.header} class=${q(vn.controlContainer)} .hidden=${!this.hasControl}><slot name=${j2.control} @slotchange=${this.controlSlotChangeHandler}></slot></div><calcite-action-menu .flipPlacements=${l??["top","bottom"]} .hidden=${!this.hasMenuActions} .label=${a.options} .overlayPositioning=${this.overlayPositioning} .placement=${c} .scale=${this.scale}><slot name=${j2.headerMenuActions} @slotchange=${this.menuActionsSlotChangeHandler}></slot></calcite-action-menu>${this.renderActionsEnd()}</div>`;return ia({disabled:this.disabled,children:J`<article aria-label=${n??Xe} .ariaBusy=${i} class=${q({[vn.container]:!0})}>${R}<section aria-labelledby=${zb.toggle} class=${q(vn.content)} .hidden=${!r} id=${zb.content}>${this.renderScrim()}</section></article>`})}};aF.properties={hasContentStart:[16,{},{state:!0}],hasControl:[16,{},{state:!0}],hasEndActions:[16,{},{state:!0}],hasIcon:[16,{},{state:!0}],hasMenuActions:[16,{},{state:!0}],collapsible:[7,{},{reflect:!0,type:Boolean}],description:1,disabled:[7,{},{reflect:!0,type:Boolean}],dragDisabled:[7,{},{reflect:!0,type:Boolean}],dragHandle:[7,{},{reflect:!0,type:Boolean}],expanded:[7,{},{reflect:!0,type:Boolean}],heading:1,headingLevel:[11,{},{type:Number,reflect:!0}],iconEnd:[3,{},{reflect:!0}],iconFlipRtl:[3,{},{reflect:!0}],iconStart:[3,{},{reflect:!0}],loading:[7,{},{reflect:!0,type:Boolean}],label:1,menuFlipPlacements:[0,{},{attribute:!1}],menuPlacement:[3,{},{reflect:!0}],messageOverrides:[0,{},{attribute:!1}],addToItems:[0,{},{attribute:!1}],moveToItems:[0,{},{attribute:!1}],sortDisabled:[5,{},{type:Boolean}],open:[7,{},{reflect:!0,type:Boolean}],overlayPositioning:[3,{},{reflect:!0}],scale:[3,{},{reflect:!0}],setPosition:[9,{},{type:Number}],setSize:[9,{},{type:Number}],sortHandleOpen:[7,{},{reflect:!0,type:Boolean}],status:[3,{},{reflect:!0}]},aF.styles=[kyt,i2e];let Jq=aF;$i("calcite-block",Jq);const Z1={container:"container",actionsStart:"actions-start",contentStart:"content-start",content:"content",contentEnd:"content-end",actionsEnd:"actions-end"},IS={actionsStart:"actions-start",contentStart:"content-start",contentEnd:"content-end",actionsEnd:"actions-end"};const Eyt=St`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]) .content{cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) .content *,:host([disabled]) .content ::slotted(*){pointer-events:none}:host{display:flex;flex:1 1 0%;flex-direction:column}.container{display:flex;flex:1 1 auto;align-items:stretch;font-weight:var(--calcite-font-weight-normal);color:var(--calcite-color-text-2)}.content{display:flex;flex:1 1 auto;flex-direction:column;justify-content:center;font-size:var(--calcite-font-size--2);line-height:1.375;padding-inline:var(--calcite-stack-padding-inline, .75rem);padding-block:var(--calcite-stack-padding-block, .5rem)}.content-start{justify-content:flex-start}.content-end{justify-content:flex-end}.content-start,.content-end{flex:0 1 auto}.content-start ::slotted(calcite-icon),.content-end ::slotted(calcite-icon){margin-inline:.75rem;align-self:center}.actions-start,.actions-end,.content-start,.content-end{display:flex;align-items:center}.actions-start ::slotted(calcite-action),.actions-start ::slotted(calcite-action-menu),.actions-start ::slotted(calcite-handle),.actions-start ::slotted(calcite-dropdown),.actions-end ::slotted(calcite-action),.actions-end ::slotted(calcite-action-menu),.actions-end ::slotted(calcite-handle),.actions-end ::slotted(calcite-dropdown){align-self:stretch;color:inherit}:host([hidden]){display:none}[hidden]{display:none}`,oF=class oF extends Et{constructor(){super(...arguments),this.hasActionsEnd=!1,this.hasActionsStart=!1,this.hasContentEnd=!1,this.hasContentStart=!1,this.disabled=!1}handleActionsStartSlotChange(e){this.hasActionsStart=ni(e)}handleActionsEndSlotChange(e){this.hasActionsEnd=ni(e)}handleContentStartSlotChange(e){this.hasContentStart=ni(e)}handleContentEndSlotChange(e){this.hasContentEnd=ni(e)}renderActionsStart(){const{hasActionsStart:e}=this;return xt("actions-start-container",J`<div class=${q(Z1.actionsStart)} .hidden=${!e}><slot name=${IS.actionsStart} @slotchange=${this.handleActionsStartSlotChange}></slot></div>`)}renderActionsEnd(){const{hasActionsEnd:e}=this;return xt("actions-end-container",J`<div class=${q(Z1.actionsEnd)} .hidden=${!e}><slot name=${IS.actionsEnd} @slotchange=${this.handleActionsEndSlotChange}></slot></div>`)}renderContentStart(){const{hasContentStart:e}=this;return J`<div class=${q(Z1.contentStart)} .hidden=${!e}><slot name=${IS.contentStart} @slotchange=${this.handleContentStartSlotChange}></slot></div>`}renderDefaultContent(){return J`<div class=${q(Z1.content)}><slot></slot></div>`}renderContentEnd(){const{hasContentEnd:e}=this;return J`<div class=${q(Z1.contentEnd)} .hidden=${!e}><slot name=${IS.contentEnd} @slotchange=${this.handleContentEndSlotChange}></slot></div>`}render(){return J`<div class=${q(Z1.container)}>${this.renderActionsStart()}${this.renderContentStart()}${this.renderDefaultContent()}${this.renderContentEnd()}${this.renderActionsEnd()}</div>`}};oF.properties={hasActionsEnd:[16,{},{state:!0}],hasActionsStart:[16,{},{state:!0}],hasContentEnd:[16,{},{state:!0}],hasContentStart:[16,{},{state:!0}],disabled:[7,{},{reflect:!0,type:Boolean}]},oF.styles=Eyt;let Kq=oF;$i("calcite-stack",Kq);const Que={valid:"check-circle",invalid:"exclamation-mark-triangle",idle:"information"},Cyt=St`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{box-sizing:border-box;display:flex;block-size:auto;inline-size:100%;align-items:center;font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-text-1);opacity:1;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;margin-block-start:var(--calcite-input-message-spacing, var(--calcite-input-message-spacing-value, var(--calcite-spacing-xxs)))}.calcite-input-message-icon{pointer-events:none;display:inline-flex;flex-shrink:0;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;margin-inline-end:var(--calcite-spacing-sm)}:host([status=invalid]) .calcite-input-message-icon{color:var(--calcite-input-message-icon-color, var(--calcite-icon-color, var(--calcite-color-status-danger)))}:host([status=valid]) .calcite-input-message-icon{color:var(--calcite-input-message-icon-color, var(--calcite-icon-color, var(--calcite-color-status-success)))}:host([status=idle]) .calcite-input-message-icon{color:var(--calcite-input-message-icon-color, var(--calcite-icon-color, var(--calcite-color-brand)))}:host([scale=s]){font-size:var(--calcite-font-size--3);line-height:.75rem}:host([scale=m]){font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=l]){font-size:var(--calcite-font-size--1);line-height:1rem}:host([hidden]){display:none}[hidden]{display:none}`,Iyt={inputMessageIcon:"calcite-input-message-icon"},lF=class lF extends Et{constructor(){super(...arguments),this.iconFlipRtl=!1,this.scale="m",this.status="idle"}connectedCallback(){super.connectedCallback(),this.requestedIcon=Kw(Que,this.icon,this.status)}willUpdate(e){(e.has("status")&&(this.hasUpdated||this.status!=="idle")||e.has("icon"))&&(this.requestedIcon=Kw(Que,this.icon,this.status))}render(){const e=this.el.hidden;return FT(this.el,"calcite-hydrated-hidden",e),J`${this.renderIcon(this.requestedIcon)}<slot></slot>`}renderIcon(e){if(e)return J`<calcite-icon class=${q(Iyt.inputMessageIcon)} .flipRtl=${this.iconFlipRtl} .icon=${e} scale=s></calcite-icon>`}};lF.properties={icon:[3,{converter:Np},{reflect:!0}],iconFlipRtl:[7,{},{reflect:!0,type:Boolean}],scale:[3,{},{reflect:!0}],status:[3,{},{reflect:!0}]},lF.styles=Cyt;let d5=lF;$i("calcite-input-message",d5);const hFt=Object.freeze(Object.defineProperty({__proto__:null,InputMessage:d5},Symbol.toStringTag,{value:"Module"}));const ly={alignmentCenter:"internal-label-alignment--center",alignmentEnd:"internal-label-alignment--end",container:"internal-label--container",requiredIndicator:"internal-label-required--indicator",spacingBottom:"internal-label-spacing--bottom",spacingInlineEnd:"internal-label-spacing-inline--end",spacingInlineStart:"internal-label-spacing-inline--start",text:"internal-label--text"},hj=({alignmentCenter:t,bottomSpacingDisabled:e,labelText:i,onClick:r,required:n,spacingInlineEnd:s,spacingInlineStart:a,tooltipText:o})=>J`<div class=${q({[ly.alignmentCenter]:t,[ly.alignmentEnd]:!t,[ly.container]:!0,[ly.spacingBottom]:!e,[ly.spacingInlineEnd]:s,[ly.spacingInlineStart]:a})} @click=${r}><div class=${q(ly.text)}>${i}${n&&J`<span aria-hidden=true class=${q(ly.requiredIndicator)} title=${o??Xe}>*</span>`||""}</div><slot name=label-content></slot></div>`;const Myt={validationContainer:"validation-container"},Ayt=()=>{},NJ=({scale:t,status:e,id:i,icon:r,message:n,ref:s})=>J`<div class=${q(Myt.validationContainer)} ${zt(s||Ayt)}><calcite-input-message aria-live=polite .icon=${r} id=${i??Xe} .scale=${t} .status=${e}>${n}</calcite-input-message></div>`;const Pyt=["date","datetime-local","month","number","range","time","week"],Oyt=["email","password","search","tel","text","url"],Lyt=["email","password","search","tel","text","textarea","url"];function X1(t,e,i,r){const n=i.toLowerCase(),s=t[i];r&&s!=null?e.setAttribute(n,`${s}`):e.removeAttribute(n)}function Dyt(t,e,i){i.type=t==="textarea"?"text":t;const r=Pyt.includes(t),n=e;X1(n,i,"min",r),X1(n,i,"max",r),X1(n,i,"step",r);const s=Lyt.includes(t),a=e;X1(a,i,"minLength",s),X1(a,i,"maxLength",s);const o=Oyt.includes(t);X1(a,i,"pattern",o)}const fa={loader:"loader",clearButton:"clear-button",editingEnabled:"editing-enabled",inlineChild:"inline-child",inputIcon:"icon",prefix:"prefix",suffix:"suffix",numberButtonWrapper:"number-button-wrapper",buttonItemHorizontal:"number-button-item--horizontal",wrapper:"element-wrapper",inputWrapper:"wrapper",actionWrapper:"action-wrapper",numberButtonItem:"number-button-item",hasSuffix:"has-suffix",hasPrefix:"has-prefix"},bU={validationMessage:"inputValidationMessage"},ede={tel:"phone",password:"lock",email:"email-address",date:"calendar",time:"clock",search:"search"},Ryt={action:"action"},tde={up:"up",down:"down"},wU={chevronUp:"chevron-up",chevronDown:"chevron-down",close:"x"},zyt=St`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:block}:host([scale=s]) input,:host([scale=s]) .prefix,:host([scale=s]) .suffix{block-size:1.5rem;padding-inline:.5rem;font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=s]) input[type=file],:host([scale=s]) textarea{min-block-size:1.5rem}:host([scale=s]) .number-button-wrapper,:host([scale=s]) .action-wrapper{block-size:1.5rem}:host([scale=s]) .clear-button{min-block-size:1.5rem;min-inline-size:1.5rem}:host([scale=s]) textarea{block-size:auto;padding-block:.25rem;padding-inline:.5rem;font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=m]) input,:host([scale=m]) .prefix,:host([scale=m]) .suffix{block-size:2rem;padding-inline:.75rem;font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale=m]) textarea,:host([scale=m]) input[type=file]{min-block-size:2rem}:host([scale=m]) .number-button-wrapper,:host([scale=m]) .action-wrapper{block-size:2rem}:host([scale=m]) .clear-button{min-block-size:2rem;min-inline-size:2rem}:host([scale=m]) textarea{block-size:auto;padding-block:.5rem;padding-inline:.75rem;font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale=l]) input,:host([scale=l]) .prefix,:host([scale=l]) .suffix{block-size:2.75rem;padding-inline:1rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=l]) textarea,:host([scale=l]) input[type=file]{min-block-size:2.75rem}:host([scale=l]) .number-button-wrapper,:host([scale=l]) .action-wrapper{block-size:2.75rem}:host([scale=l]) .clear-button{min-block-size:2.75rem;min-inline-size:2.75rem}:host([scale=l]) textarea{block-size:auto;padding-block:.75rem;padding-inline:1rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([disabled]) textarea{resize:none}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}textarea,input{position:relative;margin:0;box-sizing:border-box;display:flex;max-block-size:100%;inline-size:100%;max-inline-size:100%;flex:1 1 0%;text-overflow:ellipsis;border-width:1px;border-style:solid;font-family:inherit;font-weight:var(--calcite-font-weight-normal);border-color:var(--calcite-input-border-color, var(--calcite-color-border-input));background-color:var(--calcite-input-background-color, var(--calcite-color-foreground-1));color:var(--calcite-input-text-color, var(--calcite-color-text-1));transition:var(--calcite-animation-timing),block-size 0,outline-offset 0s;-webkit-appearance:none}textarea:placeholder-shown,input:placeholder-shown{text-overflow:ellipsis}textarea{border-radius:var(--calcite-input-corner-radius, var(--calcite-corner-radius-sharp))}input{border-start-start-radius:var(--calcite-input-corner-radius, var(--calcite-corner-radius-sharp));border-start-end-radius:var(--calcite-input-corner-radius, var(--calcite-corner-radius-sharp));border-end-start-radius:var(--calcite-input-corner-radius, var(--calcite-corner-radius-sharp));border-end-end-radius:var(--calcite-input-corner-radius, var(--calcite-corner-radius-sharp))}.has-prefix input{border-start-start-radius:0;border-end-start-radius:0}.has-suffix input,.element-wrapper:has(.clear-button) input,:host([number-button-type=vertical][type=number]) input,:host([number-button-type=horizontal]) .has-suffix .suffix,:host([number-button-type=vertical][type=number]) .has-suffix .suffix,:host([number-button-type=vertical][type=number]) .clear-button,:host([number-button-type=horizontal][type=number]) .clear-button{border-start-end-radius:0;border-end-end-radius:0}:host([number-button-type=horizontal]) input{border-start-start-radius:0;border-start-end-radius:0;border-end-start-radius:0;border-end-end-radius:0}.has-prefix .prefix:first-child,:host([number-button-type=horizontal]) .number-button-item[data-adjustment=down]{border-start-start-radius:var(--calcite-input-corner-radius, var(--calcite-corner-radius-sharp));border-end-start-radius:var(--calcite-input-corner-radius, var(--calcite-corner-radius-sharp))}.has-suffix .suffix,:host([number-button-type=vertical][type=number][read-only]) .has-suffix .suffix,:host([clearable]) .clear-button,:host([number-button-type=horizontal]) .number-button-item[data-adjustment=up]{border-end-end-radius:var(--calcite-input-corner-radius, var(--calcite-corner-radius-sharp));border-start-end-radius:var(--calcite-input-corner-radius, var(--calcite-corner-radius-sharp))}:host([clearable]) .has-suffix .clear-button{border-end-end-radius:0;border-start-end-radius:0}:host([number-button-type=vertical]) .number-button-item[data-adjustment=down]{border-block-start-width:0px;border-end-end-radius:var(--calcite-input-corner-radius, var(--calcite-corner-radius-sharp))}:host([number-button-type=vertical]) .number-button-item[data-adjustment=up]{border-start-end-radius:var(--calcite-input-corner-radius, var(--calcite-corner-radius-sharp))}input[type=search]::-webkit-search-decoration{-webkit-appearance:none}input:focus,textarea:focus{border-color:var(--calcite-color-brand);color:var(--calcite-input-text-color, var(--calcite-color-text-1))}input[readonly],textarea[readonly]{font-weight:var(--calcite-font-weight-medium);background-color:var(--calcite-input-background-color, var(--calcite-color-background))}input[readonly]:focus,textarea[readonly]:focus{color:var(--calcite-input-text-color, var(--calcite-color-text-1))}textarea,input{outline-color:transparent}textarea:focus,input:focus{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(calc(-1 * var(--calcite-spacing-base)) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}:host([status=invalid]) input,:host([status=invalid]) textarea{border-color:var(--calcite-color-status-danger)}:host([status=invalid]) input:focus,:host([status=invalid]) textarea:focus{outline:var(--calcite-border-width-md) solid var(--calcite-color-status-danger);outline-offset:calc(calc(-1 * var(--calcite-spacing-base)) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}:host([scale=s]) .icon{inset-inline-start:.5rem}:host([scale=m]) .icon{inset-inline-start:.75rem}:host([scale=l]) .icon{inset-inline-start:1rem}:host([icon][scale=s]) input{padding-inline-start:2rem}:host([icon][scale=m]) input{padding-inline-start:2.5rem}:host([icon][scale=l]) input{padding-inline-start:3.5rem}.element-wrapper{position:relative;order:3;display:inline-flex;flex:1 1 0%;align-items:center;isolation:isolate}.icon{pointer-events:none;position:absolute;display:block;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;color:var(--calcite-input-icon-color, var(--calcite-color-text-3));z-index:var(--calcite-z-index)}input[type=text]::-ms-clear,input[type=text]::-ms-reveal{display:none;block-size:0px;inline-size:0px}input[type=search]::-webkit-search-decoration,input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-results-button,input[type=search]::-webkit-search-results-decoration,input[type=date]::-webkit-clear-button,input[type=time]::-webkit-clear-button{display:none}.clear-button{pointer-events:initial;order:4;margin:0;box-sizing:border-box;display:flex;min-block-size:100%;cursor:pointer;align-items:center;justify-content:center;align-self:stretch;border-width:1px;border-style:solid;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;outline-color:transparent;border-color:var(--calcite-input-border-color, var(--calcite-color-border-input));background-color:var(--calcite-input-actions-background-color, var(--calcite-color-foreground-1));border-inline-start-width:0px}.clear-button calcite-icon{transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;color:var(--calcite-input-actions-icon-color, var(--calcite-color-text-3))}.clear-button:hover{background-color:var(--calcite-input-actions-background-color-hover, var(--calcite-color-foreground-2))}.clear-button:hover calcite-icon{color:var(--calcite-input-actions-icon-color-hover, var(--calcite-color-text-1))}.clear-button:active{background-color:var(--calcite-input-actions-background-color-press, var(--calcite-color-foreground-3))}.clear-button:active calcite-icon{color:var(--calcite-input-actions-icon-color-press, var(--calcite-color-text-1))}.clear-button:focus{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(calc(-1 * var(--calcite-spacing-base)) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}.clear-button:disabled{opacity:var(--calcite-opacity-disabled)}.loader{inset-block-start:1px;inset-inline:1px;pointer-events:none;position:absolute;display:block;--calcite-progress-background-color: var(--calcite-input-loading-background-color);--calcite-progress-fill-color: var(--calcite-input-loading-fill-color)}.action-wrapper{order:7;display:flex}.prefix,.suffix{box-sizing:border-box;display:flex;block-size:auto;min-block-size:100%;-webkit-user-select:none;user-select:none;align-content:center;align-items:center;overflow-wrap:break-word;border-width:1px;border-style:solid;font-weight:var(--calcite-font-weight-medium);line-height:1;border-color:var(--calcite-input-border-color, var(--calcite-color-border-input))}.prefix{order:2;border-inline-end-width:0px;inline-size:var(--calcite-input-prefix-size, auto);background-color:var(--calcite-input-prefix-background-color, var(--calcite-color-background));color:var(--calcite-input-prefix-text-color, var(--calcite-color-text-2))}.suffix{order:5;border-inline-start-width:0px;inline-size:var(--calcite-input-suffix-size, auto);background-color:var(--calcite-input-suffix-background-color, var(--calcite-color-background));color:var(--calcite-input-suffix-text-color, var(--calcite-color-text-2))}:host([alignment=start]) textarea,:host([alignment=start]) input{text-align:start}:host([alignment=end]) textarea,:host([alignment=end]) input{text-align:end}input[type=number]{-moz-appearance:textfield}input[type=number]::-webkit-inner-spin-button,input[type=number]::-webkit-outer-spin-button{-webkit-appearance:none;-moz-appearance:textfield;margin:0}.number-button-wrapper{pointer-events:none;order:6;box-sizing:border-box;display:flex;flex-direction:column;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out}:host([number-button-type=vertical]) .wrapper{flex-direction:row;display:flex}:host([number-button-type=vertical]) input,:host([number-button-type=vertical]) textarea{order:2}:host([number-button-type=horizontal]) .calcite--rtl .number-button-item[data-adjustment=down] calcite-icon{transform:rotate(-90deg)}:host([number-button-type=horizontal]) .calcite--rtl .number-button-item[data-adjustment=up] calcite-icon{transform:rotate(-90deg)}.number-button-item.number-button-item--horizontal{border-color:var(--calcite-input-border-color, var(--calcite-color-border-input));order:1;max-block-size:100%;min-block-size:100%;align-self:stretch;border-width:1px;border-style:solid}.number-button-item.number-button-item--horizontal[data-adjustment=down] calcite-icon,.number-button-item.number-button-item--horizontal[data-adjustment=up] calcite-icon{transform:rotate(90deg)}.number-button-item.number-button-item--horizontal[data-adjustment=down]{border-inline-end-width:0px}.number-button-item.number-button-item--horizontal[data-adjustment=up]{border-inline-start-width:0px;order:5}.number-button-item{max-block-size:50%;min-block-size:50%;pointer-events:initial;margin:0;box-sizing:border-box;display:flex;cursor:pointer;align-items:center;align-self:center;border-width:1px;border-style:solid;background-color:var(--calcite-color-foreground-1);padding-block:0px;padding-inline:.5rem;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;border-color:var(--calcite-input-border-color, var(--calcite-color-border-input));background-color:var(--calcite-input-actions-background-color, var(--calcite-color-foreground-1));border-inline-start-width:0px}.number-button-item calcite-icon{pointer-events:none;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;color:var(--calcite-input-actions-icon-color, var(--calcite-color-text-3))}.number-button-item:hover{background-color:var(--calcite-input-actions-background-color-hover, var(--calcite-color-foreground-2))}.number-button-item:hover calcite-icon{color:var(--calcite-input-actions-icon-color-hover, var(--calcite-color-text-1))}.number-button-item:active{background-color:var(--calcite-input-actions-background-color-press, var(--calcite-color-foreground-3))}.number-button-item:active calcite-icon{color:var(--calcite-input-actions-icon-color-press, var(--calcite-color-text-1))}.number-button-item:disabled{pointer-events:none}.wrapper{position:relative;display:flex;flex-direction:row;align-items:center;border-radius:var(--calcite-input-corner-radius, var(--calcite-corner-radius-sharp));box-shadow:var(--calcite-input-shadow, var(--calcite-shadow-none))}input[type=date]::-webkit-input-placeholder{visibility:hidden!important}:host([type=color]) input{padding:.25rem}:host([type=file]) input{cursor:pointer;border-width:1px;border-style:dashed;background-color:var(--calcite-color-foreground-1);text-align:center;border-color:var(--calcite-input-border-color, var(--calcite-color-border-input));block-size:initial}:host([type=file][scale=s]) input{padding-block:1px;padding-inline:.5rem}:host([type=file][scale=m]) input{padding-block:.25rem;padding-inline:.75rem}:host([type=file][scale=l]) input{padding-block:.5rem;padding-inline:1rem}:host(.no-bottom-border) input{border-block-end-width:0px}:host(.border-top-color-one) input{border-block-start-color:var(--calcite-color-border-1)}input.inline-child{background-color:transparent;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out}input.inline-child .editing-enabled{background-color:inherit}input.inline-child:not(.editing-enabled){display:flex;cursor:pointer;text-overflow:ellipsis;border-color:transparent;padding-inline-start:0}:host([type=datetime-local]) .element-wrapper{inline-size:100%}:host([type=datetime-local]) .element-wrapper input{display:inline-block;min-inline-size:0}.internal-label-alignment--center{align-items:center}.internal-label-alignment--end{align-items:end}.internal-label--container{display:flex;justify-content:space-between;color:var(--calcite-color-text-1)}.internal-label-required--indicator{font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-status-danger);padding-inline:var(--calcite-spacing-base)}.internal-label-required--indicator:hover{cursor:help}.internal-label--text{line-height:1}:host([scale=s]) .internal-label-spacing--bottom{margin-block-end:var(--calcite-spacing-xxs)}:host([scale=s]) .internal-label-spacing-inline--end{margin-inline-end:var(--calcite-spacing-sm)}:host([scale=s]) .internal-label-spacing-inline--start{margin-inline-start:var(--calcite-spacing-sm)}:host([scale=s]) .internal-label--text{font-size:var(--calcite-font-size--2)}:host([scale=m]) .internal-label-spacing--bottom{margin-block-end:var(--calcite-spacing-sm)}:host([scale=m]) .internal-label-spacing-inline--end{margin-inline-end:var(--calcite-spacing-sm)}:host([scale=m]) .internal-label-spacing-inline--start{margin-inline-start:var(--calcite-spacing-sm)}:host([scale=m]) .internal-label--text{font-size:var(--calcite-font-size--1)}:host([scale=l]) .internal-label-spacing--bottom{margin-block-end:var(--calcite-spacing-sm)}:host([scale=l]) .internal-label-spacing-inline--end{margin-inline-end:var(--calcite-spacing-md)}:host([scale=l]) .internal-label-spacing-inline--start{margin-inline-start:var(--calcite-spacing-md)}:host([scale=l]) .internal-label--text{font-size:var(--calcite-font-size-0)}.validation-container{display:flex;flex-direction:column;align-items:flex-start;align-self:stretch}:host([scale=m]) .validation-container,:host([scale=l]) .validation-container{padding-block-start:.5rem}:host([scale=s]) .validation-container{padding-block-start:.25rem}::slotted(input[slot=hidden-form-input]){margin:0!important;opacity:0!important;outline:none!important;padding:0!important;position:absolute!important;inset:0!important;transform:none!important;-webkit-appearance:none!important;z-index:-1!important}:host([hidden]){display:none}[hidden]{display:none}::placeholder{font-weight:var(--calcite-font-weight-normal);color:var(--calcite-input-placeholder-text-color, var(--calcite-color-text-3))}`;var Lw;let r2e=(Lw=class extends Et{constructor(){super(),this.actionWrapperRef=wr(),this.attributeWatch=oZ(["autofocus","enterkeyhint","inputmode","spellcheck"],this.handleGlobalAttributesChanged),this.childRef=wr(),this.childElType="input",this.childNumberRef=wr(),this.inputWrapperRef=wr(),this.onHiddenFormInputInput=e=>{e.target.name===this.name&&this.setValue({value:e.target.value,origin:"direct"}),this.setFocus(),e.stopPropagation()},this.previousValueOrigin="initial",this.userChangedValue=!1,this._value="",this.messages=qn(),this.focusSetter=pn()(this),this.slottedActionElDisabledInternally=!1,this.alignment="start",this.clearable=!1,this.disabled=!1,this.editingEnabled=!1,this.groupSeparator=!1,this.iconFlipRtl=!1,this.loading=!1,this.localeFormat=!1,this.multiple=!1,this.numberButtonType="vertical",this.readOnly=!1,this.required=!1,this.scale="m",this.status="idle",this.type="text",this.validity={valid:!1,badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valueMissing:!1},this.calciteInputChange=Re({cancelable:!1}),this.calciteInputInput=Re(),this.calciteInternalInputBlur=Re({cancelable:!1}),this.calciteInternalInputFocus=Re({cancelable:!1}),this.listen("click",this.clickHandler),this.listen("keydown",this.keyDownHandler)}get value(){return this._value}set value(e){const i=this._value;e!==i&&(this._value=e,this.valueWatcher(e,i),e&&this._value===""&&this.setValue({origin:"reset",value:i}))}async selectText(){(this.type==="number"?this.childNumberRef:this.childRef).value?.select()}async setFocus(e){return this.focusSetter(()=>this.type==="number"?this.childNumberRef.value:this.childRef.value,e)}connectedCallback(){super.connectedCallback(),this.inlineEditableEl=this.el.closest("calcite-inline-editable"),this.inlineEditableEl&&(this.editingEnabled=this.inlineEditableEl.editingEnabled||!1),ZT(this),WX(this),this.el.addEventListener(pq,this.onHiddenFormInputInput)}async load(){this.childElType=this.type==="textarea"?"textarea":"input",this.maxString=this.max?.toString(),this.minString=this.min?.toString(),this.requestedIcon=Kw(ede,this.icon,this.type),this.setPreviousEmittedValue(this.value),this.setPreviousValue(this.value),this.type==="number"&&(this.value==="Infinity"||this.value==="-Infinity"?(this.displayedValue=this.value,this.previousEmittedValue=this.value):(this.warnAboutInvalidNumberValue(this.value),this.setValue({origin:"connected",value:vm(this.value)?this.value:""})))}willUpdate(e){e.has("max")&&(this.maxString=this.max?.toString()||null),e.has("min")&&(this.minString=this.min?.toString()||null),(e.has("icon")||e.has("type")&&(this.hasUpdated||this.type!=="text"))&&(this.requestedIcon=Kw(ede,this.icon,this.type))}updated(){ta(this)}disconnectedCallback(){super.disconnectedCallback(),XN(this),ZX(this),this.el.removeEventListener(pq,this.onHiddenFormInputInput)}get isClearable(){return!this.isTextarea&&(this.clearable||this.type==="search")&&this.value?.length>0}get isTextarea(){return this.childElType==="textarea"}handleGlobalAttributesChanged(){this.requestUpdate()}valueWatcher(e,i){if(!this.userChangedValue){if(this.type==="number"&&(e==="Infinity"||e==="-Infinity")){this.displayedValue=e,this.previousEmittedValue=e;return}this.setValue({origin:"direct",previousValue:i,value:e==null||e==""?"":this.type==="number"?vm(e)?e:this.previousValue||"":e}),this.warnAboutInvalidNumberValue(e)}this.userChangedValue=!1}keyDownHandler(e){this.readOnly||this.disabled||e.defaultPrevented||(this.isClearable&&e.key==="Escape"&&(this.clearInputValue(e),e.preventDefault()),e.key==="Enter"&&YN(this)&&e.preventDefault())}onLabelClick(){this.setFocus()}incrementOrDecrementNumberValue(e,i,r,n){const{value:s}=this;if(s==="Infinity"||s==="-Infinity")return;const a=e==="up"?1:-1,o=this.step==="any"?1:Math.abs(this.step||1),c=new G$(s!==""?s:"0").add(`${o*a}`),h=()=>typeof r=="number"&&!isNaN(r)&&c.subtract(`${r}`).isNegative,f=()=>typeof i=="number"&&!isNaN(i)&&!c.subtract(`${i}`).isNegative,g=h()?`${r}`:f()?`${i}`:c.toString();this.setValue({committing:!0,nativeEvent:n,origin:"user",value:g})}clearInputValue(e){this.setValue({committing:!0,nativeEvent:e,origin:"user",value:""})}emitChangeIfUserModified(){this.previousValueOrigin==="user"&&this.value!==this.previousEmittedValue&&(this.calciteInputChange.emit(),this.setPreviousEmittedValue(this.value))}inputBlurHandler(){window.clearInterval(this.nudgeNumberValueIntervalId),this.calciteInternalInputBlur.emit(),this.emitChangeIfUserModified()}clickHandler(e){if(this.disabled)return;const i=e.composedPath();!i.includes(this.inputWrapperRef.value)||i.includes(this.actionWrapperRef.value)||this.setFocus()}inputFocusHandler(){this.calciteInternalInputFocus.emit()}inputInputHandler(e){this.disabled||this.readOnly||(this.type==="file"&&(this.files=this.childRef.value.files),this.setValue({nativeEvent:e,origin:"user",value:e.target.value}))}inputKeyDownHandler(e){this.disabled||this.readOnly||e.key==="Enter"&&this.emitChangeIfUserModified()}inputNumberInputHandler(e){if(this.disabled||this.readOnly||this.value==="Infinity"||this.value==="-Infinity")return;const i=e.target.value;iu.numberFormatOptions={locale:this.messages._lang,numberingSystem:this.numberingSystem,useGrouping:this.groupSeparator};const r=iu.delocalize(i);e.inputType==="insertFromPaste"?(vm(r)||e.preventDefault(),this.setValue({nativeEvent:e,origin:"user",value:MNe(r)}),this.childNumberRef.value.value=this.displayedValue):this.setValue({nativeEvent:e,origin:"user",value:r})}inputNumberKeyDownHandler(e){if(this.type!=="number"||this.disabled||this.readOnly)return;if(this.value==="Infinity"||this.value==="-Infinity"){e.preventDefault(),(e.key==="Backspace"||e.key==="Delete")&&this.clearInputValue(e);return}if(e.key==="ArrowUp"){e.preventDefault(),this.nudgeNumberValue("up",e);return}if(e.key==="ArrowDown"){this.nudgeNumberValue("down",e);return}const i=[...tN,"ArrowLeft","ArrowRight","Backspace","Delete","Enter","Escape","Tab"];if(e.altKey||e.ctrlKey||e.metaKey)return;const r=e.shiftKey&&e.key==="Tab";if(i.includes(e.key)||r){e.key==="Enter"&&this.emitChangeIfUserModified();return}iu.numberFormatOptions={locale:this.messages._lang,numberingSystem:this.numberingSystem,useGrouping:this.groupSeparator},!(e.key===iu.decimal&&(!this.value&&!this.childNumberRef.value.value||this.value&&this.childNumberRef.value.value.indexOf(iu.decimal)===-1))&&(/[eE]/.test(e.key)&&(!this.value&&!this.childNumberRef.value.value||this.value&&!/[eE]/.test(this.childNumberRef.value.value))||e.key==="-"&&(!this.value&&!this.childNumberRef.value.value||this.value&&this.childNumberRef.value.value.split("-").length<=2)||e.preventDefault())}nudgeNumberValue(e,i){if(i instanceof KeyboardEvent&&i.repeat||this.type!=="number")return;const r=this.maxString?parseFloat(this.maxString):null,n=this.minString?parseFloat(this.minString):null,s=150;this.incrementOrDecrementNumberValue(e,r,n,i),this.nudgeNumberValueIntervalId&&window.clearInterval(this.nudgeNumberValueIntervalId);let a=!0;this.nudgeNumberValueIntervalId=window.setInterval(()=>{if(a){a=!1;return}this.incrementOrDecrementNumberValue(e,r,n,i)},s)}numberButtonPointerUpAndOutHandler(){window.clearInterval(this.nudgeNumberValueIntervalId)}numberButtonPointerDownHandler(e){if(!Tye(e))return;e.preventDefault();const i=e.target.dataset.adjustment;this.disabled||this.nudgeNumberValue(i,e)}syncHiddenFormInput(e){Dyt(this.type,this,e)}setInputValue(e){const i=this.type==="number"?this.childNumberRef:this.childRef;i.value&&(i.value.value=e)}setPreviousEmittedValue(e){this.previousEmittedValue=this.normalizeValue(e)}normalizeValue(e){return this.type==="number"?vm(e)?e:"":e}setPreviousValue(e){this.previousValue=this.normalizeValue(e)}setValue({committing:e=!1,nativeEvent:i,origin:r,previousValue:n,value:s}){if(this.setPreviousValue(n??this.value),this.previousValueOrigin=r,this.type==="number"){iu.numberFormatOptions={locale:this.messages._lang,numberingSystem:this.numberingSystem,useGrouping:this.groupSeparator,signDisplay:"never"};const a=this.previousValue?.length>s.length||this.value?.length>s.length,o=s.charAt(s.length-1)===".",l=o&&a?s:RNe(s),c=s&&!l?vm(this.previousValue)?this.previousValue:"":l;let h=iu.localize(c);r!=="connected"&&!o&&(h=jNe(h,c,iu)),this.displayedValue=o&&a?`${h}${iu.decimal}`:h,this.userChangedValue=r==="user"&&this.value!==c,this.value=["-","."].includes(c)?"":c}else this.userChangedValue=r==="user"&&this.value!==s,this.value=s;r==="direct"&&(this.setInputValue(s),this.previousEmittedValue=s),i&&(this.calciteInputInput.emit().defaultPrevented?(this.value=this.previousValue,this.displayedValue=this.type==="number"?iu.localize(this.previousValue):this.previousValue):e&&this.emitChangeIfUserModified())}inputKeyUpHandler(){window.clearInterval(this.nudgeNumberValueIntervalId)}warnAboutInvalidNumberValue(e){this.type==="number"&&e&&!vm(e)&&console.warn(`The specified value "${e}" cannot be parsed, or is out of range.`)}render(){const e=jo(this.el),i=J`<div class=${q(fa.loader)}><calcite-progress .label=${this.messages.loading} type=indeterminate></calcite-progress></div>`,r=J`<button .ariaLabel=${this.messages.clear} class=${q(fa.clearButton)} .disabled=${this.disabled||this.readOnly} @click=${this.clearInputValue} tabindex=-1 title=${this.messages.clear??Xe} type=button><calcite-icon .icon=${wU.close} .scale=${Dr(this.scale)}></calcite-icon></button>`,n=J`<calcite-icon class=${q(fa.inputIcon)} .flipRtl=${this.iconFlipRtl} .icon=${this.requestedIcon} .scale=${Dr(this.scale)}></calcite-icon>`,s=this.numberButtonType==="horizontal",a=J`<button aria-hidden=true class=${q({[fa.numberButtonItem]:!0,[fa.buttonItemHorizontal]:s})} data-adjustment=${tde.up} .disabled=${this.disabled||this.readOnly} @pointerdown=${this.numberButtonPointerDownHandler} @pointerout=${this.numberButtonPointerUpAndOutHandler} @pointerup=${this.numberButtonPointerUpAndOutHandler} tabindex=-1 type=button><calcite-icon .icon=${wU.chevronUp} .scale=${Dr(this.scale)}></calcite-icon></button>`,o=J`<button aria-hidden=true class=${q({[fa.numberButtonItem]:!0,[fa.buttonItemHorizontal]:s})} data-adjustment=${tde.down} .disabled=${this.disabled||this.readOnly} @pointerdown=${this.numberButtonPointerDownHandler} @pointerout=${this.numberButtonPointerUpAndOutHandler} @pointerup=${this.numberButtonPointerUpAndOutHandler} tabindex=-1 type=button><calcite-icon .icon=${wU.chevronDown} .scale=${Dr(this.scale)}></calcite-icon></button>`,l=J`<div class=${q(fa.numberButtonWrapper)}>${a}${o}</div>`,c=J`<div class=${q(fa.prefix)}>${this.prefixText}</div>`,h=J`<div class=${q(fa.suffix)}>${this.suffixText}</div>`,f=this.el.autofocus,g=this.el.enterKeyHint,y=this.el.inputMode,b=this.type==="number"?xt("localized-input",J`<input accept=${this.accept??Xe} aria-errormessage=${bU.validationMessage} .ariaInvalid=${this.status==="invalid"} .ariaLabel=${qI(this)} autocomplete=${this.autocomplete??Xe} .autofocus=${f} value=${this.defaultValue??Xe} .disabled=${this.disabled?!0:null} enterkeyhint=${g??Xe} inputmode=${y??Xe} maxlength=${this.maxLength??Xe} minlength=${this.minLength??Xe} .multiple=${this.multiple} name=${Xe} @blur=${this.inputBlurHandler} @focus=${this.inputFocusHandler} @input=${this.inputNumberInputHandler} @keydown=${this.inputNumberKeyDownHandler} @keyup=${this.inputKeyUpHandler} pattern=${this.pattern??Xe} placeholder=${(this.placeholder||"")??Xe} .readOnly=${this.readOnly} .required=${this.required} type=text .value=${Dre(this.displayedValue??"")} ${zt(this.childNumberRef)}>`):null,_=this.childElType==="input"?Qw`input`:Qw`textarea`,S=this.type!=="number"?GM`<${_} accept=${this.accept??Xe} aria-errormessage=${bU.validationMessage} .ariaInvalid=${this.status==="invalid"} .ariaLabel=${qI(this)} autocomplete=${this.autocomplete??Xe} .autofocus=${f} class=${q({[fa.editingEnabled]:this.editingEnabled,[fa.inlineChild]:!!this.inlineEditableEl})} .defaultValue=${this.defaultValue??""} .disabled=${this.disabled?!0:null} enterkeyhint=${g??Xe} inputmode=${y??Xe} max=${this.maxString??Xe} maxlength=${this.maxLength??Xe} min=${this.minString??Xe} minlength=${this.minLength??Xe} .multiple=${this.multiple} name=${this.name??Xe} @blur=${this.inputBlurHandler} @focus=${this.inputFocusHandler} @input=${this.inputInputHandler} @keydown=${this.inputKeyDownHandler} @keyup=${this.inputKeyUpHandler} pattern=${this.pattern??Xe} placeholder=${(this.placeholder||"")??Xe} .readOnly=${this.readOnly} .required=${this.required?!0:null} spellcheck=${this.el.spellcheck??Xe} step=${this.step??Xe} tabindex=${(this.disabled||this.inlineEditableEl&&!this.editingEnabled?-1:null)??Xe} type=${this.type??Xe} .value=${Dre(this.value??"")} ${zt(this.childRef)}></${_}>`:null;return ia({disabled:this.disabled,children:J`${this.labelText&&hj({labelText:this.labelText,onClick:this.onLabelClick,required:this.required,tooltipText:this.messages.required})||""}<div class=${q({[fa.inputWrapper]:!0,[Uh.rtl]:e==="rtl",[fa.hasSuffix]:this.suffixText,[fa.hasPrefix]:this.prefixText})} ${zt(this.inputWrapperRef)}>${this.type==="number"&&this.numberButtonType==="horizontal"&&!this.readOnly?o:null}${this.prefixText?c:null}<div class=${q(fa.wrapper)}>${b}${S}${this.isClearable?r:null}${this.requestedIcon?n:null}${this.loading?i:null}</div><div class=${q(fa.actionWrapper)} ${zt(this.actionWrapperRef)}><slot name=${Ryt.action}></slot></div>${this.type==="number"&&this.numberButtonType==="vertical"&&!this.readOnly?l:null}${this.suffixText?h:null}${this.type==="number"&&this.numberButtonType==="horizontal"&&!this.readOnly?a:null}${XX({component:this})}</div>${this.validationMessage&&this.status==="invalid"?NJ({icon:this.validationIcon,id:bU.validationMessage,message:this.validationMessage,scale:this.scale,status:this.status}):null}`})}},Lw.properties={displayedValue:[16,{},{state:!0}],slottedActionElDisabledInternally:[16,{},{state:!0}],accept:1,alignment:[3,{},{reflect:!0}],autocomplete:[0,{},{attribute:!1}],clearable:[7,{},{reflect:!0,type:Boolean}],disabled:[7,{},{reflect:!0,type:Boolean}],editingEnabled:[7,{},{reflect:!0,type:Boolean}],files:[0,{},{attribute:!1}],form:[3,{},{reflect:!0}],groupSeparator:[7,{},{reflect:!0,type:Boolean}],icon:[3,{converter:Np},{reflect:!0}],iconFlipRtl:[7,{},{reflect:!0,type:Boolean}],label:1,labelText:1,loading:[7,{},{reflect:!0,type:Boolean}],localeFormat:[5,{},{type:Boolean}],max:[11,{},{reflect:!0,type:Number}],maxLength:[11,{},{reflect:!0,type:Number}],messageOverrides:[0,{},{attribute:!1}],min:[11,{},{reflect:!0,type:Number}],minLength:[11,{},{reflect:!0,type:Number}],multiple:[5,{},{type:Boolean}],name:[3,{},{reflect:!0}],numberButtonType:[3,{},{reflect:!0}],numberingSystem:[3,{},{reflect:!0}],pattern:1,placeholder:1,prefixText:1,readOnly:[7,{},{reflect:!0,type:Boolean}],required:[7,{},{reflect:!0,type:Boolean}],scale:[3,{},{reflect:!0}],status:[3,{},{reflect:!0}],step:[3,{},{reflect:!0}],suffixText:1,type:[3,{},{reflect:!0}],validationIcon:[3,{converter:Np},{reflect:!0}],validationMessage:1,validity:[0,{},{attribute:!1}],value:1},Lw.styles=zyt,Lw);$i("calcite-input",r2e);const Fyt=Object.freeze(Object.defineProperty({__proto__:null,Input:r2e},Symbol.toStringTag,{value:"Module"}));function n2e(t){if(t==null)return"";if(typeof t=="string")return t;if(Array.isArray(t))return t.map(n2e).join(",");const e=String(t);return e==="0"&&Object.is(Number(t),-0)?"-0":e}function Nyt(t,e=Ygt){if(t==null)return t;for(const i in t)if(e(t[i],i,t)===!1)break;return t}function s2e(t){return Zgt(n2e(t))}const _U=(t,e,i)=>{const r=s2e(e),n=new RegExp(r,"i");t.length===0&&console.warn(`No data was passed to the filter function.
    The data argument should be an array of objects`);const s=(a,o,l)=>{if(a?.constant||a?.filterDisabled)return!0;let c=!1;return Nyt(a,(h,f)=>{typeof h=="function"||h==null||l&&!l.includes(f)||(Array.isArray(h)||typeof h=="object"&&h!==null?s(h,o)&&(c=!0):o.test(h)&&(c=!0))}),c};return t.filter(a=>s(a,n,i))};const pj=()=>b_((t,e)=>{const i=new Set;return e.onDisconnected(()=>{i.forEach(r=>r.cancel())}),{add:r=>{[r].flat().forEach(n=>i.add(n))},resources:i}});const jyt={container:"container"},Vyt={search:"search"},Byt=St`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{box-sizing:border-box;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:flex;inline-size:100%}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}.container{display:flex;inline-size:100%}:host([scale=s]) .container{padding:var(--calcite-filter-content-space, var(--calcite-spacing-sm))}:host([scale=m]) .container{padding:var(--calcite-filter-content-space, var(--calcite-spacing-md))}:host([scale=l]) .container{padding:var(--calcite-filter-content-space, var(--calcite-spacing-lg))}label{position:relative;margin-block:0px;display:flex;inline-size:100%;align-items:center;overflow:hidden}calcite-input{inline-size:100%;--calcite-input-background-color: var(--calcite-filter-input-background-color);--calcite-input-border-color: var(--calcite-filter-input-border-color);--calcite-input-corner-radius: var(--calcite-filter-input-corner-radius);--calcite-input-shadow: var(--calcite-filter-input-shadow);--calcite-input-icon-color: var(--calcite-filter-input-icon-color);--calcite-input-text-color: var(--calcite-filter-input-text-color);--calcite-input-placeholder-text-color: var(--calcite-filter-input-placeholder-text-color);--calcite-input-actions-background-color: var(--calcite-filter-input-actions-background-color);--calcite-input-actions-background-color-hover: var(--calcite-filter-input-actions-background-color-hover);--calcite-input-actions-background-color-press: var(--calcite-filter-input-actions-background-color-press);--calcite-input-actions-icon-color: var(--calcite-filter-input-actions-icon-color);--calcite-input-actions-icon-color-hover: var(--calcite-filter-input-actions-icon-color-hover);--calcite-input-actions-icon-color-press: var(--calcite-filter-input-actions-icon-color-press)}:host([hidden]){display:none}[hidden]{display:none}`,lI=class lI extends Et{constructor(){super(...arguments),this.cancelable=pj()(this),this.filterDebounced=xA((e,i=!1,r)=>this.updateFiltered(_U(this.items??[],e,this.filterProps),i,r),HF.filter),this.textInput=wr(),this._value="",this.messages=qn(),this.focusSetter=pn()(this),this.disabled=!1,this.filteredItems=[],this.items=[],this.scale="m",this.calciteFilterChange=Re({cancelable:!1})}get value(){return this._value}set value(e){const i=this._value;e!==i&&(this._value=e,this.valueHandler(e))}async filter(e=this.value){return new Promise(i=>{this.value=e,this.updateFiltered(_U(this.items??[],e,this.filterProps),!1,i)})}async setFocus(e){return this.focusSetter(()=>this.textInput.value,e)}connectedCallback(){super.connectedCallback(),this.cancelable.add(this.filterDebounced)}async load(){this.updateFiltered(_U(this.items??[],this.value,this.filterProps))}willUpdate(e){(e.has("items")&&(this.hasUpdated||this.items?.length>0)||e.has("filterProps"))&&this.filterDebounced(this.value)}updated(){ta(this)}valueHandler(e){this.filterDebounced(e)}inputHandler(e){const i=e.target;this.value=i.value,this.filterDebounced(i.value,!0)}keyDownHandler(e){e.defaultPrevented||(e.key==="Escape"&&(this.clear(),e.preventDefault()),e.key==="Enter"&&e.preventDefault())}clear(){this.value="",this.filterDebounced("",!0),this.setFocus()}updateFiltered(e,i=!1,r){this.filteredItems=e,i&&this.calciteFilterChange.emit(),r?.()}render(){const{disabled:e,scale:i}=this;return ia({disabled:e,children:J`<div class=${q(jyt.container)}><label><calcite-input clearable .disabled=${e} .icon=${Vyt.search} .label=${this.label??this.messages.label} .messageOverrides=${{clear:this.messages.clear}} @keydown=${this.keyDownHandler} @calciteInputInput=${this.inputHandler} .placeholder=${this.placeholder} .scale=${i} type=text .value=${this.value} ${zt(this.textInput)}></calcite-input></label></div>`})}};lI.properties={disabled:[7,{},{reflect:!0,type:Boolean}],filterProps:[0,{},{attribute:!1}],filteredItems:[0,{},{attribute:!1}],items:[0,{},{attribute:!1}],label:1,messageOverrides:[0,{},{attribute:!1}],placeholder:1,scale:[3,{},{reflect:!0}],value:1},lI.shadowRootOptions={mode:"open",delegatesFocus:!0},lI.styles=Byt;let Qq=lI;$i("calcite-filter",Qq);const ZC="calcite-list",h5="calcite-list-item-group",Rm="calcite-list-item";function eW(t){const e=t.parentElement?.closest(Rm);e&&(e.open=!0,eW(e))}function Uyt(t){const e=t.assignedElements({flatten:!0}),i=e.filter(s=>s?.matches(h5)).map(s=>Array.from(s.querySelectorAll(Rm))).flat(),r=e.filter(s=>s?.matches(Rm));return{lists:e.filter(s=>s?.matches(ZC)),items:i.concat(r)}}function Hyt(t){const e=t.assignedElements({flatten:!0}).filter(r=>r.matches(Rm)),i=e.filter(r=>!r.filterHidden);e.forEach(r=>{const n=i.indexOf(r);r.setPosition=n===-1?void 0:n+1,r.setSize=n===-1?void 0:i.length})}function Gyt(t,e=!1){const i=e?"ancestor::calcite-list-item | ancestor::calcite-list-item-group":"ancestor::calcite-list-item";return document.evaluate(i,t,null,XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE,null).snapshotLength}function OL(t){return t.tagName==="CALCITE-LIST-ITEM"}function ide(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),i.push.apply(i,r)}return i}function qp(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?ide(Object(i),!0).forEach(function(r){qyt(t,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):ide(Object(i)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(i,r))})}return t}function UD(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?UD=function(e){return typeof e}:UD=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},UD(t)}function qyt(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function tg(){return tg=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},tg.apply(this,arguments)}function Wyt(t,e){if(t==null)return{};var i={},r=Object.keys(t),n,s;for(s=0;s<r.length;s++)n=r[s],!(e.indexOf(n)>=0)&&(i[n]=t[n]);return i}function Yyt(t,e){if(t==null)return{};var i=Wyt(t,e),r,n;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}var Zyt="1.15.6";function Hm(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var cg=Hm(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),SA=Hm(/Edge/i),rde=Hm(/firefox/i),XC=Hm(/safari/i)&&!Hm(/chrome/i)&&!Hm(/android/i),jJ=Hm(/iP(ad|od|hone)/i),a2e=Hm(/chrome/i)&&Hm(/android/i),o2e={capture:!1,passive:!1};function zi(t,e,i){t.addEventListener(e,i,!cg&&o2e)}function Li(t,e,i){t.removeEventListener(e,i,!cg&&o2e)}function p5(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function l2e(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function $d(t,e,i,r){if(t){i=i||document;do{if(e!=null&&(e[0]===">"?t.parentNode===i&&p5(t,e):p5(t,e))||r&&t===i)return t;if(t===i)break}while(t=l2e(t))}return null}var nde=/\s+/g;function ac(t,e,i){if(t&&e)if(t.classList)t.classList[i?"add":"remove"](e);else{var r=(" "+t.className+" ").replace(nde," ").replace(" "+e+" "," ");t.className=(r+(i?" "+e:"")).replace(nde," ")}}function Qt(t,e,i){var r=t&&t.style;if(r){if(i===void 0)return document.defaultView&&document.defaultView.getComputedStyle?i=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(i=t.currentStyle),e===void 0?i:i[e];!(e in r)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),r[e]=i+(typeof i=="string"?"":"px")}}function i$(t,e){var i="";if(typeof t=="string")i=t;else do{var r=Qt(t,"transform");r&&r!=="none"&&(i=r+" "+i)}while(!e&&(t=t.parentNode));var n=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return n&&new n(i)}function c2e(t,e,i){if(t){var r=t.getElementsByTagName(e),n=0,s=r.length;if(i)for(;n<s;n++)i(r[n],n);return r}return[]}function Ap(){var t=document.scrollingElement;return t||document.documentElement}function bs(t,e,i,r,n){if(!(!t.getBoundingClientRect&&t!==window)){var s,a,o,l,c,h,f;if(t!==window&&t.parentNode&&t!==Ap()?(s=t.getBoundingClientRect(),a=s.top,o=s.left,l=s.bottom,c=s.right,h=s.height,f=s.width):(a=0,o=0,l=window.innerHeight,c=window.innerWidth,h=window.innerHeight,f=window.innerWidth),(e||i)&&t!==window&&(n=n||t.parentNode,!cg))do if(n&&n.getBoundingClientRect&&(Qt(n,"transform")!=="none"||i&&Qt(n,"position")!=="static")){var g=n.getBoundingClientRect();a-=g.top+parseInt(Qt(n,"border-top-width")),o-=g.left+parseInt(Qt(n,"border-left-width")),l=a+s.height,c=o+s.width;break}while(n=n.parentNode);if(r&&t!==window){var y=i$(n||t),b=y&&y.a,_=y&&y.d;y&&(a/=_,o/=b,f/=b,h/=_,l=a+h,c=o+f)}return{top:a,left:o,bottom:l,right:c,width:f,height:h}}}function sde(t,e,i){for(var r=lv(t,!0),n=bs(t)[e];r;){var s=bs(r)[i],a=void 0;if(a=n>=s,!a)return r;if(r===Ap())break;r=lv(r,!1)}return!1}function fT(t,e,i,r){for(var n=0,s=0,a=t.children;s<a.length;){if(a[s].style.display!=="none"&&a[s]!==ei.ghost&&(r||a[s]!==ei.dragged)&&$d(a[s],i.draggable,t,!1)){if(n===e)return a[s];n++}s++}return null}function VJ(t,e){for(var i=t.lastElementChild;i&&(i===ei.ghost||Qt(i,"display")==="none"||e&&!p5(i,e));)i=i.previousElementSibling;return i||null}function nu(t,e){var i=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==ei.clone&&(!e||p5(t,e))&&i++;return i}function ade(t){var e=0,i=0,r=Ap();if(t)do{var n=i$(t),s=n.a,a=n.d;e+=t.scrollLeft*s,i+=t.scrollTop*a}while(t!==r&&(t=t.parentNode));return[e,i]}function Xyt(t,e){for(var i in t)if(t.hasOwnProperty(i)){for(var r in e)if(e.hasOwnProperty(r)&&e[r]===t[i][r])return Number(i)}return-1}function lv(t,e){if(!t||!t.getBoundingClientRect)return Ap();var i=t,r=!1;do if(i.clientWidth<i.scrollWidth||i.clientHeight<i.scrollHeight){var n=Qt(i);if(i.clientWidth<i.scrollWidth&&(n.overflowX=="auto"||n.overflowX=="scroll")||i.clientHeight<i.scrollHeight&&(n.overflowY=="auto"||n.overflowY=="scroll")){if(!i.getBoundingClientRect||i===document.body)return Ap();if(r||e)return i;r=!0}}while(i=i.parentNode);return Ap()}function Jyt(t,e){if(t&&e)for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}function xU(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var JC;function u2e(t,e){return function(){if(!JC){var i=arguments,r=this;i.length===1?t.call(r,i[0]):t.apply(r,i),JC=setTimeout(function(){JC=void 0},e)}}}function Kyt(){clearTimeout(JC),JC=void 0}function d2e(t,e,i){t.scrollLeft+=e,t.scrollTop+=i}function h2e(t){var e=window.Polymer,i=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):i?i(t).clone(!0)[0]:t.cloneNode(!0)}function p2e(t,e,i){var r={};return Array.from(t.children).forEach(function(n){var s,a,o,l;if(!(!$d(n,e.draggable,t,!1)||n.animated||n===i)){var c=bs(n);r.left=Math.min((s=r.left)!==null&&s!==void 0?s:1/0,c.left),r.top=Math.min((a=r.top)!==null&&a!==void 0?a:1/0,c.top),r.right=Math.max((o=r.right)!==null&&o!==void 0?o:-1/0,c.right),r.bottom=Math.max((l=r.bottom)!==null&&l!==void 0?l:-1/0,c.bottom)}}),r.width=r.right-r.left,r.height=r.bottom-r.top,r.x=r.left,r.y=r.top,r}var yl="Sortable"+new Date().getTime();function Qyt(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var r=[].slice.call(this.el.children);r.forEach(function(n){if(!(Qt(n,"display")==="none"||n===ei.ghost)){t.push({target:n,rect:bs(n)});var s=qp({},t[t.length-1].rect);if(n.thisAnimationDuration){var a=i$(n,!0);a&&(s.top-=a.f,s.left-=a.e)}n.fromRect=s}})}},addAnimationState:function(r){t.push(r)},removeAnimationState:function(r){t.splice(Xyt(t,{target:r}),1)},animateAll:function(r){var n=this;if(!this.options.animation){clearTimeout(e),typeof r=="function"&&r();return}var s=!1,a=0;t.forEach(function(o){var l=0,c=o.target,h=c.fromRect,f=bs(c),g=c.prevFromRect,y=c.prevToRect,b=o.rect,_=i$(c,!0);_&&(f.top-=_.f,f.left-=_.e),c.toRect=f,c.thisAnimationDuration&&xU(g,f)&&!xU(h,f)&&(b.top-f.top)/(b.left-f.left)===(h.top-f.top)/(h.left-f.left)&&(l=tvt(b,g,y,n.options)),xU(f,h)||(c.prevFromRect=h,c.prevToRect=f,l||(l=n.options.animation),n.animate(c,b,f,l)),l&&(s=!0,a=Math.max(a,l),clearTimeout(c.animationResetTimer),c.animationResetTimer=setTimeout(function(){c.animationTime=0,c.prevFromRect=null,c.fromRect=null,c.prevToRect=null,c.thisAnimationDuration=null},l),c.thisAnimationDuration=l)}),clearTimeout(e),s?e=setTimeout(function(){typeof r=="function"&&r()},a):typeof r=="function"&&r(),t=[]},animate:function(r,n,s,a){if(a){Qt(r,"transition",""),Qt(r,"transform","");var o=i$(this.el),l=o&&o.a,c=o&&o.d,h=(n.left-s.left)/(l||1),f=(n.top-s.top)/(c||1);r.animatingX=!!h,r.animatingY=!!f,Qt(r,"transform","translate3d("+h+"px,"+f+"px,0)"),this.forRepaintDummy=evt(r),Qt(r,"transition","transform "+a+"ms"+(this.options.easing?" "+this.options.easing:"")),Qt(r,"transform","translate3d(0,0,0)"),typeof r.animated=="number"&&clearTimeout(r.animated),r.animated=setTimeout(function(){Qt(r,"transition",""),Qt(r,"transform",""),r.animated=!1,r.animatingX=!1,r.animatingY=!1},a)}}}}function evt(t){return t.offsetWidth}function tvt(t,e,i,r){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-i.top,2)+Math.pow(e.left-i.left,2))*r.animation}var J1=[],SU={initializeByDefault:!0},$A={mount:function(e){for(var i in SU)SU.hasOwnProperty(i)&&!(i in e)&&(e[i]=SU[i]);J1.forEach(function(r){if(r.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),J1.push(e)},pluginEvent:function(e,i,r){var n=this;this.eventCanceled=!1,r.cancel=function(){n.eventCanceled=!0};var s=e+"Global";J1.forEach(function(a){i[a.pluginName]&&(i[a.pluginName][s]&&i[a.pluginName][s](qp({sortable:i},r)),i.options[a.pluginName]&&i[a.pluginName][e]&&i[a.pluginName][e](qp({sortable:i},r)))})},initializePlugins:function(e,i,r,n){J1.forEach(function(o){var l=o.pluginName;if(!(!e.options[l]&&!o.initializeByDefault)){var c=new o(e,i,e.options);c.sortable=e,c.options=e.options,e[l]=c,tg(r,c.defaults)}});for(var s in e.options)if(e.options.hasOwnProperty(s)){var a=this.modifyOption(e,s,e.options[s]);typeof a<"u"&&(e.options[s]=a)}},getEventProperties:function(e,i){var r={};return J1.forEach(function(n){typeof n.eventProperties=="function"&&tg(r,n.eventProperties.call(i[n.pluginName],e))}),r},modifyOption:function(e,i,r){var n;return J1.forEach(function(s){e[s.pluginName]&&s.optionListeners&&typeof s.optionListeners[i]=="function"&&(n=s.optionListeners[i].call(e[s.pluginName],r))}),n}};function ivt(t){var e=t.sortable,i=t.rootEl,r=t.name,n=t.targetEl,s=t.cloneEl,a=t.toEl,o=t.fromEl,l=t.oldIndex,c=t.newIndex,h=t.oldDraggableIndex,f=t.newDraggableIndex,g=t.originalEvent,y=t.putSortable,b=t.extraEventProperties;if(e=e||i&&i[yl],!!e){var _,S=e.options,$="on"+r.charAt(0).toUpperCase()+r.substr(1);window.CustomEvent&&!cg&&!SA?_=new CustomEvent(r,{bubbles:!0,cancelable:!0}):(_=document.createEvent("Event"),_.initEvent(r,!0,!0)),_.to=a||i,_.from=o||i,_.item=n||i,_.clone=s,_.oldIndex=l,_.newIndex=c,_.oldDraggableIndex=h,_.newDraggableIndex=f,_.originalEvent=g,_.pullMode=y?y.lastPutMode:void 0;var C=qp(qp({},b),$A.getEventProperties(r,e));for(var I in C)_[I]=C[I];i&&i.dispatchEvent(_),S[$]&&S[$].call(e,_)}}var rvt=["evt"],Xo=function(e,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=r.evt,s=Yyt(r,rvt);$A.pluginEvent.bind(ei)(e,i,qp({dragEl:ot,parentEl:An,ghostEl:hi,rootEl:ln,nextEl:x0,lastDownEl:HD,cloneEl:wn,cloneHidden:Wy,dragStarted:QE,putSortable:_a,activeSortable:ei.active,originalEvent:n,oldIndex:MS,oldDraggableIndex:KC,newIndex:cc,newDraggableIndex:Ny,hideGhostForTarget:y2e,unhideGhostForTarget:v2e,cloneNowHidden:function(){Wy=!0},cloneNowShown:function(){Wy=!1},dispatchSortableEvent:function(o){$o({sortable:i,name:o,originalEvent:n})}},s))};function $o(t){ivt(qp({putSortable:_a,cloneEl:wn,targetEl:ot,rootEl:ln,oldIndex:MS,oldDraggableIndex:KC,newIndex:cc,newDraggableIndex:Ny},t))}var ot,An,hi,ln,x0,HD,wn,Wy,MS,cc,KC,Ny,LL,_a,uS=!1,f5=!1,m5=[],Fb,td,$U,TU,ode,lde,QE,K1,QC,eI=!1,DL=!1,GD,Ha,kU=[],tW=!1,g5=[],fj=typeof document<"u",RL=jJ,cde=SA||cg?"cssFloat":"float",nvt=fj&&!a2e&&!jJ&&"draggable"in document.createElement("div"),f2e=(function(){if(fj){if(cg)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}})(),m2e=function(e,i){var r=Qt(e),n=parseInt(r.width)-parseInt(r.paddingLeft)-parseInt(r.paddingRight)-parseInt(r.borderLeftWidth)-parseInt(r.borderRightWidth),s=fT(e,0,i),a=fT(e,1,i),o=s&&Qt(s),l=a&&Qt(a),c=o&&parseInt(o.marginLeft)+parseInt(o.marginRight)+bs(s).width,h=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+bs(a).width;if(r.display==="flex")return r.flexDirection==="column"||r.flexDirection==="column-reverse"?"vertical":"horizontal";if(r.display==="grid")return r.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(s&&o.float&&o.float!=="none"){var f=o.float==="left"?"left":"right";return a&&(l.clear==="both"||l.clear===f)?"vertical":"horizontal"}return s&&(o.display==="block"||o.display==="flex"||o.display==="table"||o.display==="grid"||c>=n&&r[cde]==="none"||a&&r[cde]==="none"&&c+h>n)?"vertical":"horizontal"},svt=function(e,i,r){var n=r?e.left:e.top,s=r?e.right:e.bottom,a=r?e.width:e.height,o=r?i.left:i.top,l=r?i.right:i.bottom,c=r?i.width:i.height;return n===o||s===l||n+a/2===o+c/2},avt=function(e,i){var r;return m5.some(function(n){var s=n[yl].options.emptyInsertThreshold;if(!(!s||VJ(n))){var a=bs(n),o=e>=a.left-s&&e<=a.right+s,l=i>=a.top-s&&i<=a.bottom+s;if(o&&l)return r=n}}),r},g2e=function(e){function i(s,a){return function(o,l,c,h){var f=o.options.group.name&&l.options.group.name&&o.options.group.name===l.options.group.name;if(s==null&&(a||f))return!0;if(s==null||s===!1)return!1;if(a&&s==="clone")return s;if(typeof s=="function")return i(s(o,l,c,h),a)(o,l,c,h);var g=(a?o:l).options.group.name;return s===!0||typeof s=="string"&&s===g||s.join&&s.indexOf(g)>-1}}var r={},n=e.group;(!n||UD(n)!="object")&&(n={name:n}),r.name=n.name,r.checkPull=i(n.pull,!0),r.checkPut=i(n.put),r.revertClone=n.revertClone,e.group=r},y2e=function(){!f2e&&hi&&Qt(hi,"display","none")},v2e=function(){!f2e&&hi&&Qt(hi,"display","")};fj&&!a2e&&document.addEventListener("click",function(t){if(f5)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),f5=!1,!1},!0);var Nb=function(e){if(ot){e=e.touches?e.touches[0]:e;var i=avt(e.clientX,e.clientY);if(i){var r={};for(var n in e)e.hasOwnProperty(n)&&(r[n]=e[n]);r.target=r.rootEl=i,r.preventDefault=void 0,r.stopPropagation=void 0,i[yl]._onDragOver(r)}}},ovt=function(e){ot&&ot.parentNode[yl]._isOutsideThisEl(e.target)};function ei(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=tg({},e),t[yl]=this;var i={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return m2e(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(a,o){a.setData("Text",o.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:ei.supportPointer!==!1&&"PointerEvent"in window&&(!XC||jJ),emptyInsertThreshold:5};$A.initializePlugins(this,t,i);for(var r in i)!(r in e)&&(e[r]=i[r]);g2e(e);for(var n in this)n.charAt(0)==="_"&&typeof this[n]=="function"&&(this[n]=this[n].bind(this));this.nativeDraggable=e.forceFallback?!1:nvt,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?zi(t,"pointerdown",this._onTapStart):(zi(t,"mousedown",this._onTapStart),zi(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(zi(t,"dragover",this),zi(t,"dragenter",this)),m5.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),tg(this,Qyt())}ei.prototype={constructor:ei,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(K1=null)},_getDirection:function(e,i){return typeof this.options.direction=="function"?this.options.direction.call(this,e,i,ot):this.options.direction},_onTapStart:function(e){if(e.cancelable){var i=this,r=this.el,n=this.options,s=n.preventOnFilter,a=e.type,o=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,l=(o||e).target,c=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,h=n.filter;if(mvt(r),!ot&&!(/mousedown|pointerdown/.test(a)&&e.button!==0||n.disabled)&&!c.isContentEditable&&!(!this.nativeDraggable&&XC&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=$d(l,n.draggable,r,!1),!(l&&l.animated)&&HD!==l)){if(MS=nu(l),KC=nu(l,n.draggable),typeof h=="function"){if(h.call(this,e,l,this)){$o({sortable:i,rootEl:c,name:"filter",targetEl:l,toEl:r,fromEl:r}),Xo("filter",i,{evt:e}),s&&e.preventDefault();return}}else if(h&&(h=h.split(",").some(function(f){if(f=$d(c,f.trim(),r,!1),f)return $o({sortable:i,rootEl:f,name:"filter",targetEl:l,fromEl:r,toEl:r}),Xo("filter",i,{evt:e}),!0}),h)){s&&e.preventDefault();return}n.handle&&!$d(c,n.handle,r,!1)||this._prepareDragStart(e,o,l)}}},_prepareDragStart:function(e,i,r){var n=this,s=n.el,a=n.options,o=s.ownerDocument,l;if(r&&!ot&&r.parentNode===s){var c=bs(r);if(ln=s,ot=r,An=ot.parentNode,x0=ot.nextSibling,HD=r,LL=a.group,ei.dragged=ot,Fb={target:ot,clientX:(i||e).clientX,clientY:(i||e).clientY},ode=Fb.clientX-c.left,lde=Fb.clientY-c.top,this._lastX=(i||e).clientX,this._lastY=(i||e).clientY,ot.style["will-change"]="all",l=function(){if(Xo("delayEnded",n,{evt:e}),ei.eventCanceled){n._onDrop();return}n._disableDelayedDragEvents(),!rde&&n.nativeDraggable&&(ot.draggable=!0),n._triggerDragStart(e,i),$o({sortable:n,name:"choose",originalEvent:e}),ac(ot,a.chosenClass,!0)},a.ignore.split(",").forEach(function(h){c2e(ot,h.trim(),EU)}),zi(o,"dragover",Nb),zi(o,"mousemove",Nb),zi(o,"touchmove",Nb),a.supportPointer?(zi(o,"pointerup",n._onDrop),!this.nativeDraggable&&zi(o,"pointercancel",n._onDrop)):(zi(o,"mouseup",n._onDrop),zi(o,"touchend",n._onDrop),zi(o,"touchcancel",n._onDrop)),rde&&this.nativeDraggable&&(this.options.touchStartThreshold=4,ot.draggable=!0),Xo("delayStart",this,{evt:e}),a.delay&&(!a.delayOnTouchOnly||i)&&(!this.nativeDraggable||!(SA||cg))){if(ei.eventCanceled){this._onDrop();return}a.supportPointer?(zi(o,"pointerup",n._disableDelayedDrag),zi(o,"pointercancel",n._disableDelayedDrag)):(zi(o,"mouseup",n._disableDelayedDrag),zi(o,"touchend",n._disableDelayedDrag),zi(o,"touchcancel",n._disableDelayedDrag)),zi(o,"mousemove",n._delayedDragTouchMoveHandler),zi(o,"touchmove",n._delayedDragTouchMoveHandler),a.supportPointer&&zi(o,"pointermove",n._delayedDragTouchMoveHandler),n._dragStartTimer=setTimeout(l,a.delay)}else l()}},_delayedDragTouchMoveHandler:function(e){var i=e.touches?e.touches[0]:e;Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){ot&&EU(ot),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;Li(e,"mouseup",this._disableDelayedDrag),Li(e,"touchend",this._disableDelayedDrag),Li(e,"touchcancel",this._disableDelayedDrag),Li(e,"pointerup",this._disableDelayedDrag),Li(e,"pointercancel",this._disableDelayedDrag),Li(e,"mousemove",this._delayedDragTouchMoveHandler),Li(e,"touchmove",this._delayedDragTouchMoveHandler),Li(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,i){i=i||e.pointerType=="touch"&&e,!this.nativeDraggable||i?this.options.supportPointer?zi(document,"pointermove",this._onTouchMove):i?zi(document,"touchmove",this._onTouchMove):zi(document,"mousemove",this._onTouchMove):(zi(ot,"dragend",this),zi(ln,"dragstart",this._onDragStart));try{document.selection?qD(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,i){if(uS=!1,ln&&ot){Xo("dragStarted",this,{evt:i}),this.nativeDraggable&&zi(document,"dragover",ovt);var r=this.options;!e&&ac(ot,r.dragClass,!1),ac(ot,r.ghostClass,!0),ei.active=this,e&&this._appendGhost(),$o({sortable:this,name:"start",originalEvent:i})}else this._nulling()},_emulateDragOver:function(){if(td){this._lastX=td.clientX,this._lastY=td.clientY,y2e();for(var e=document.elementFromPoint(td.clientX,td.clientY),i=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(td.clientX,td.clientY),e!==i);)i=e;if(ot.parentNode[yl]._isOutsideThisEl(e),i)do{if(i[yl]){var r=void 0;if(r=i[yl]._onDragOver({clientX:td.clientX,clientY:td.clientY,target:e,rootEl:i}),r&&!this.options.dragoverBubble)break}e=i}while(i=l2e(i));v2e()}},_onTouchMove:function(e){if(Fb){var i=this.options,r=i.fallbackTolerance,n=i.fallbackOffset,s=e.touches?e.touches[0]:e,a=hi&&i$(hi,!0),o=hi&&a&&a.a,l=hi&&a&&a.d,c=RL&&Ha&&ade(Ha),h=(s.clientX-Fb.clientX+n.x)/(o||1)+(c?c[0]-kU[0]:0)/(o||1),f=(s.clientY-Fb.clientY+n.y)/(l||1)+(c?c[1]-kU[1]:0)/(l||1);if(!ei.active&&!uS){if(r&&Math.max(Math.abs(s.clientX-this._lastX),Math.abs(s.clientY-this._lastY))<r)return;this._onDragStart(e,!0)}if(hi){a?(a.e+=h-($U||0),a.f+=f-(TU||0)):a={a:1,b:0,c:0,d:1,e:h,f};var g="matrix(".concat(a.a,",").concat(a.b,",").concat(a.c,",").concat(a.d,",").concat(a.e,",").concat(a.f,")");Qt(hi,"webkitTransform",g),Qt(hi,"mozTransform",g),Qt(hi,"msTransform",g),Qt(hi,"transform",g),$U=h,TU=f,td=s}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!hi){var e=this.options.fallbackOnBody?document.body:ln,i=bs(ot,!0,RL,!0,e),r=this.options;if(RL){for(Ha=e;Qt(Ha,"position")==="static"&&Qt(Ha,"transform")==="none"&&Ha!==document;)Ha=Ha.parentNode;Ha!==document.body&&Ha!==document.documentElement?(Ha===document&&(Ha=Ap()),i.top+=Ha.scrollTop,i.left+=Ha.scrollLeft):Ha=Ap(),kU=ade(Ha)}hi=ot.cloneNode(!0),ac(hi,r.ghostClass,!1),ac(hi,r.fallbackClass,!0),ac(hi,r.dragClass,!0),Qt(hi,"transition",""),Qt(hi,"transform",""),Qt(hi,"box-sizing","border-box"),Qt(hi,"margin",0),Qt(hi,"top",i.top),Qt(hi,"left",i.left),Qt(hi,"width",i.width),Qt(hi,"height",i.height),Qt(hi,"opacity","0.8"),Qt(hi,"position",RL?"absolute":"fixed"),Qt(hi,"zIndex","100000"),Qt(hi,"pointerEvents","none"),ei.ghost=hi,e.appendChild(hi),Qt(hi,"transform-origin",ode/parseInt(hi.style.width)*100+"% "+lde/parseInt(hi.style.height)*100+"%")}},_onDragStart:function(e,i){var r=this,n=e.dataTransfer,s=r.options;if(Xo("dragStart",this,{evt:e}),ei.eventCanceled){this._onDrop();return}Xo("setupClone",this),ei.eventCanceled||(wn=h2e(ot),wn.removeAttribute("id"),wn.draggable=!1,wn.style["will-change"]="",this._hideClone(),ac(wn,this.options.chosenClass,!1),ei.clone=wn),r.cloneId=qD(function(){Xo("clone",r),!ei.eventCanceled&&(r.options.removeCloneOnHide||ln.insertBefore(wn,ot),r._hideClone(),$o({sortable:r,name:"clone"}))}),!i&&ac(ot,s.dragClass,!0),i?(f5=!0,r._loopId=setInterval(r._emulateDragOver,50)):(Li(document,"mouseup",r._onDrop),Li(document,"touchend",r._onDrop),Li(document,"touchcancel",r._onDrop),n&&(n.effectAllowed="move",s.setData&&s.setData.call(r,n,ot)),zi(document,"drop",r),Qt(ot,"transform","translateZ(0)")),uS=!0,r._dragStartId=qD(r._dragStarted.bind(r,i,e)),zi(document,"selectstart",r),QE=!0,window.getSelection().removeAllRanges(),XC&&Qt(document.body,"user-select","none")},_onDragOver:function(e){var i=this.el,r=e.target,n,s,a,o=this.options,l=o.group,c=ei.active,h=LL===l,f=o.sort,g=_a||c,y,b=this,_=!1;if(tW)return;function S(xe,Pe){Xo(xe,b,qp({evt:e,isOwner:h,axis:y?"vertical":"horizontal",revert:a,dragRect:n,targetRect:s,canSort:f,fromSortable:g,target:r,completed:C,onMove:function(oe,be){return zL(ln,i,ot,n,oe,bs(oe),e,be)},changed:I},Pe))}function $(){S("dragOverAnimationCapture"),b.captureAnimationState(),b!==g&&g.captureAnimationState()}function C(xe){return S("dragOverCompleted",{insertion:xe}),xe&&(h?c._hideClone():c._showClone(b),b!==g&&(ac(ot,_a?_a.options.ghostClass:c.options.ghostClass,!1),ac(ot,o.ghostClass,!0)),_a!==b&&b!==ei.active?_a=b:b===ei.active&&_a&&(_a=null),g===b&&(b._ignoreWhileAnimating=r),b.animateAll(function(){S("dragOverAnimationComplete"),b._ignoreWhileAnimating=null}),b!==g&&(g.animateAll(),g._ignoreWhileAnimating=null)),(r===ot&&!ot.animated||r===i&&!r.animated)&&(K1=null),!o.dragoverBubble&&!e.rootEl&&r!==document&&(ot.parentNode[yl]._isOutsideThisEl(e.target),!xe&&Nb(e)),!o.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),_=!0}function I(){cc=nu(ot),Ny=nu(ot,o.draggable),$o({sortable:b,name:"change",toEl:i,newIndex:cc,newDraggableIndex:Ny,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),r=$d(r,o.draggable,i,!0),S("dragOver"),ei.eventCanceled)return _;if(ot.contains(e.target)||r.animated&&r.animatingX&&r.animatingY||b._ignoreWhileAnimating===r)return C(!1);if(f5=!1,c&&!o.disabled&&(h?f||(a=An!==ln):_a===this||(this.lastPutMode=LL.checkPull(this,c,ot,e))&&l.checkPut(this,c,ot,e))){if(y=this._getDirection(e,r)==="vertical",n=bs(ot),S("dragOverValid"),ei.eventCanceled)return _;if(a)return An=ln,$(),this._hideClone(),S("revert"),ei.eventCanceled||(x0?ln.insertBefore(ot,x0):ln.appendChild(ot)),C(!0);var P=VJ(i,o.draggable);if(!P||dvt(e,y,this)&&!P.animated){if(P===ot)return C(!1);if(P&&i===e.target&&(r=P),r&&(s=bs(r)),zL(ln,i,ot,n,r,s,e,!!r)!==!1)return $(),P&&P.nextSibling?i.insertBefore(ot,P.nextSibling):i.appendChild(ot),An=i,I(),C(!0)}else if(P&&uvt(e,y,this)){var O=fT(i,0,o,!0);if(O===ot)return C(!1);if(r=O,s=bs(r),zL(ln,i,ot,n,r,s,e,!1)!==!1)return $(),i.insertBefore(ot,O),An=i,I(),C(!0)}else if(r.parentNode===i){s=bs(r);var N=0,R,G=ot.parentNode!==i,Y=!svt(ot.animated&&ot.toRect||n,r.animated&&r.toRect||s,y),Q=y?"top":"left",ae=sde(r,"top","top")||sde(ot,"top","top"),ce=ae?ae.scrollTop:void 0;K1!==r&&(R=s[Q],eI=!1,DL=!Y&&o.invertSwap||G),N=hvt(e,r,s,y,Y?1:o.swapThreshold,o.invertedSwapThreshold==null?o.swapThreshold:o.invertedSwapThreshold,DL,K1===r);var ne;if(N!==0){var K=nu(ot);do K-=N,ne=An.children[K];while(ne&&(Qt(ne,"display")==="none"||ne===hi))}if(N===0||ne===r)return C(!1);K1=r,QC=N;var le=r.nextElementSibling,re=!1;re=N===1;var he=zL(ln,i,ot,n,r,s,e,re);if(he!==!1)return(he===1||he===-1)&&(re=he===1),tW=!0,setTimeout(cvt,30),$(),re&&!le?i.appendChild(ot):r.parentNode.insertBefore(ot,re?le:r),ae&&d2e(ae,0,ce-ae.scrollTop),An=ot.parentNode,R!==void 0&&!DL&&(GD=Math.abs(R-bs(r)[Q])),I(),C(!0)}if(i.contains(ot))return C(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){Li(document,"mousemove",this._onTouchMove),Li(document,"touchmove",this._onTouchMove),Li(document,"pointermove",this._onTouchMove),Li(document,"dragover",Nb),Li(document,"mousemove",Nb),Li(document,"touchmove",Nb)},_offUpEvents:function(){var e=this.el.ownerDocument;Li(e,"mouseup",this._onDrop),Li(e,"touchend",this._onDrop),Li(e,"pointerup",this._onDrop),Li(e,"pointercancel",this._onDrop),Li(e,"touchcancel",this._onDrop),Li(document,"selectstart",this)},_onDrop:function(e){var i=this.el,r=this.options;if(cc=nu(ot),Ny=nu(ot,r.draggable),Xo("drop",this,{evt:e}),An=ot&&ot.parentNode,cc=nu(ot),Ny=nu(ot,r.draggable),ei.eventCanceled){this._nulling();return}uS=!1,DL=!1,eI=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),iW(this.cloneId),iW(this._dragStartId),this.nativeDraggable&&(Li(document,"drop",this),Li(i,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),XC&&Qt(document.body,"user-select",""),Qt(ot,"transform",""),e&&(QE&&(e.cancelable&&e.preventDefault(),!r.dropBubble&&e.stopPropagation()),hi&&hi.parentNode&&hi.parentNode.removeChild(hi),(ln===An||_a&&_a.lastPutMode!=="clone")&&wn&&wn.parentNode&&wn.parentNode.removeChild(wn),ot&&(this.nativeDraggable&&Li(ot,"dragend",this),EU(ot),ot.style["will-change"]="",QE&&!uS&&ac(ot,_a?_a.options.ghostClass:this.options.ghostClass,!1),ac(ot,this.options.chosenClass,!1),$o({sortable:this,name:"unchoose",toEl:An,newIndex:null,newDraggableIndex:null,originalEvent:e}),ln!==An?(cc>=0&&($o({rootEl:An,name:"add",toEl:An,fromEl:ln,originalEvent:e}),$o({sortable:this,name:"remove",toEl:An,originalEvent:e}),$o({rootEl:An,name:"sort",toEl:An,fromEl:ln,originalEvent:e}),$o({sortable:this,name:"sort",toEl:An,originalEvent:e})),_a&&_a.save()):cc!==MS&&cc>=0&&($o({sortable:this,name:"update",toEl:An,originalEvent:e}),$o({sortable:this,name:"sort",toEl:An,originalEvent:e})),ei.active&&((cc==null||cc===-1)&&(cc=MS,Ny=KC),$o({sortable:this,name:"end",toEl:An,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){Xo("nulling",this),ln=ot=An=hi=x0=wn=HD=Wy=Fb=td=QE=cc=Ny=MS=KC=K1=QC=_a=LL=ei.dragged=ei.ghost=ei.clone=ei.active=null,g5.forEach(function(e){e.checked=!0}),g5.length=$U=TU=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":ot&&(this._onDragOver(e),lvt(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],i,r=this.el.children,n=0,s=r.length,a=this.options;n<s;n++)i=r[n],$d(i,a.draggable,this.el,!1)&&e.push(i.getAttribute(a.dataIdAttr)||fvt(i));return e},sort:function(e,i){var r={},n=this.el;this.toArray().forEach(function(s,a){var o=n.children[a];$d(o,this.options.draggable,n,!1)&&(r[s]=o)},this),i&&this.captureAnimationState(),e.forEach(function(s){r[s]&&(n.removeChild(r[s]),n.appendChild(r[s]))}),i&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,i){return $d(e,i||this.options.draggable,this.el,!1)},option:function(e,i){var r=this.options;if(i===void 0)return r[e];var n=$A.modifyOption(this,e,i);typeof n<"u"?r[e]=n:r[e]=i,e==="group"&&g2e(r)},destroy:function(){Xo("destroy",this);var e=this.el;e[yl]=null,Li(e,"mousedown",this._onTapStart),Li(e,"touchstart",this._onTapStart),Li(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(Li(e,"dragover",this),Li(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(i){i.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),m5.splice(m5.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!Wy){if(Xo("hideClone",this),ei.eventCanceled)return;Qt(wn,"display","none"),this.options.removeCloneOnHide&&wn.parentNode&&wn.parentNode.removeChild(wn),Wy=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(Wy){if(Xo("showClone",this),ei.eventCanceled)return;ot.parentNode==ln&&!this.options.group.revertClone?ln.insertBefore(wn,ot):x0?ln.insertBefore(wn,x0):ln.appendChild(wn),this.options.group.revertClone&&this.animate(ot,wn),Qt(wn,"display",""),Wy=!1}}};function lvt(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function zL(t,e,i,r,n,s,a,o){var l,c=t[yl],h=c.options.onMove,f;return window.CustomEvent&&!cg&&!SA?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=e,l.from=t,l.dragged=i,l.draggedRect=r,l.related=n||e,l.relatedRect=s||bs(e),l.willInsertAfter=o,l.originalEvent=a,t.dispatchEvent(l),h&&(f=h.call(c,l,a)),f}function EU(t){t.draggable=!1}function cvt(){tW=!1}function uvt(t,e,i){var r=bs(fT(i.el,0,i.options,!0)),n=p2e(i.el,i.options,hi),s=10;return e?t.clientX<n.left-s||t.clientY<r.top&&t.clientX<r.right:t.clientY<n.top-s||t.clientY<r.bottom&&t.clientX<r.left}function dvt(t,e,i){var r=bs(VJ(i.el,i.options.draggable)),n=p2e(i.el,i.options,hi),s=10;return e?t.clientX>n.right+s||t.clientY>r.bottom&&t.clientX>r.left:t.clientY>n.bottom+s||t.clientX>r.right&&t.clientY>r.top}function hvt(t,e,i,r,n,s,a,o){var l=r?t.clientY:t.clientX,c=r?i.height:i.width,h=r?i.top:i.left,f=r?i.bottom:i.right,g=!1;if(!a){if(o&&GD<c*n){if(!eI&&(QC===1?l>h+c*s/2:l<f-c*s/2)&&(eI=!0),eI)g=!0;else if(QC===1?l<h+GD:l>f-GD)return-QC}else if(l>h+c*(1-n)/2&&l<f-c*(1-n)/2)return pvt(e)}return g=g||a,g&&(l<h+c*s/2||l>f-c*s/2)?l>h+c/2?1:-1:0}function pvt(t){return nu(ot)<nu(t)?1:-1}function fvt(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,i=e.length,r=0;i--;)r+=e.charCodeAt(i);return r.toString(36)}function mvt(t){g5.length=0;for(var e=t.getElementsByTagName("input"),i=e.length;i--;){var r=e[i];r.checked&&g5.push(r)}}function qD(t){return setTimeout(t,0)}function iW(t){return clearTimeout(t)}fj&&zi(document,"touchmove",function(t){(ei.active||uS)&&t.cancelable&&t.preventDefault()});ei.utils={on:zi,off:Li,css:Qt,find:c2e,is:function(e,i){return!!$d(e,i,e,!1)},extend:Jyt,throttle:u2e,closest:$d,toggleClass:ac,clone:h2e,index:nu,nextTick:qD,cancelNextTick:iW,detectDirection:m2e,getChild:fT,expando:yl};ei.get=function(t){return t[yl]};ei.mount=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];e[0].constructor===Array&&(e=e[0]),e.forEach(function(r){if(!r.prototype||!r.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(r));r.utils&&(ei.utils=qp(qp({},ei.utils),r.utils)),$A.mount(r)})};ei.create=function(t,e){return new ei(t,e)};ei.version=Zyt;var ms=[],eC,rW,nW=!1,CU,IU,y5,tC;function gvt(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(i){var r=i.originalEvent;this.sortable.nativeDraggable?zi(document,"dragover",this._handleAutoScroll):this.options.supportPointer?zi(document,"pointermove",this._handleFallbackAutoScroll):r.touches?zi(document,"touchmove",this._handleFallbackAutoScroll):zi(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(i){var r=i.originalEvent;!this.options.dragOverBubble&&!r.rootEl&&this._handleAutoScroll(r)},drop:function(){this.sortable.nativeDraggable?Li(document,"dragover",this._handleAutoScroll):(Li(document,"pointermove",this._handleFallbackAutoScroll),Li(document,"touchmove",this._handleFallbackAutoScroll),Li(document,"mousemove",this._handleFallbackAutoScroll)),ude(),WD(),Kyt()},nulling:function(){y5=rW=eC=nW=tC=CU=IU=null,ms.length=0},_handleFallbackAutoScroll:function(i){this._handleAutoScroll(i,!0)},_handleAutoScroll:function(i,r){var n=this,s=(i.touches?i.touches[0]:i).clientX,a=(i.touches?i.touches[0]:i).clientY,o=document.elementFromPoint(s,a);if(y5=i,r||this.options.forceAutoScrollFallback||SA||cg||XC){MU(i,this.options,o,r);var l=lv(o,!0);nW&&(!tC||s!==CU||a!==IU)&&(tC&&ude(),tC=setInterval(function(){var c=lv(document.elementFromPoint(s,a),!0);c!==l&&(l=c,WD()),MU(i,n.options,c,r)},10),CU=s,IU=a)}else{if(!this.options.bubbleScroll||lv(o,!0)===Ap()){WD();return}MU(i,this.options,lv(o,!1),!1)}}},tg(t,{pluginName:"scroll",initializeByDefault:!0})}function WD(){ms.forEach(function(t){clearInterval(t.pid)}),ms=[]}function ude(){clearInterval(tC)}var MU=u2e(function(t,e,i,r){if(e.scroll){var n=(t.touches?t.touches[0]:t).clientX,s=(t.touches?t.touches[0]:t).clientY,a=e.scrollSensitivity,o=e.scrollSpeed,l=Ap(),c=!1,h;rW!==i&&(rW=i,WD(),eC=e.scroll,h=e.scrollFn,eC===!0&&(eC=lv(i,!0)));var f=0,g=eC;do{var y=g,b=bs(y),_=b.top,S=b.bottom,$=b.left,C=b.right,I=b.width,P=b.height,O=void 0,N=void 0,R=y.scrollWidth,G=y.scrollHeight,Y=Qt(y),Q=y.scrollLeft,ae=y.scrollTop;y===l?(O=I<R&&(Y.overflowX==="auto"||Y.overflowX==="scroll"||Y.overflowX==="visible"),N=P<G&&(Y.overflowY==="auto"||Y.overflowY==="scroll"||Y.overflowY==="visible")):(O=I<R&&(Y.overflowX==="auto"||Y.overflowX==="scroll"),N=P<G&&(Y.overflowY==="auto"||Y.overflowY==="scroll"));var ce=O&&(Math.abs(C-n)<=a&&Q+I<R)-(Math.abs($-n)<=a&&!!Q),ne=N&&(Math.abs(S-s)<=a&&ae+P<G)-(Math.abs(_-s)<=a&&!!ae);if(!ms[f])for(var K=0;K<=f;K++)ms[K]||(ms[K]={});(ms[f].vx!=ce||ms[f].vy!=ne||ms[f].el!==y)&&(ms[f].el=y,ms[f].vx=ce,ms[f].vy=ne,clearInterval(ms[f].pid),(ce!=0||ne!=0)&&(c=!0,ms[f].pid=setInterval((function(){r&&this.layer===0&&ei.active._onTouchMove(y5);var le=ms[this.layer].vy?ms[this.layer].vy*o:0,re=ms[this.layer].vx?ms[this.layer].vx*o:0;typeof h=="function"&&h.call(ei.dragged.parentNode[yl],re,le,t,y5,ms[this.layer].el)!=="continue"||d2e(ms[this.layer].el,re,le)}).bind({layer:f}),24))),f++}while(e.bubbleScroll&&g!==l&&(g=lv(g,!1)));nW=c}},30),b2e=function(e){var i=e.originalEvent,r=e.putSortable,n=e.dragEl,s=e.activeSortable,a=e.dispatchSortableEvent,o=e.hideGhostForTarget,l=e.unhideGhostForTarget;if(i){var c=r||s;o();var h=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:i,f=document.elementFromPoint(h.clientX,h.clientY);l(),c&&!c.el.contains(f)&&(a("spill"),this.onSpill({dragEl:n,putSortable:r}))}};function BJ(){}BJ.prototype={startIndex:null,dragStart:function(e){var i=e.oldDraggableIndex;this.startIndex=i},onSpill:function(e){var i=e.dragEl,r=e.putSortable;this.sortable.captureAnimationState(),r&&r.captureAnimationState();var n=fT(this.sortable.el,this.startIndex,this.options);n?this.sortable.el.insertBefore(i,n):this.sortable.el.appendChild(i),this.sortable.animateAll(),r&&r.animateAll()},drop:b2e};tg(BJ,{pluginName:"revertOnSpill"});function UJ(){}UJ.prototype={onSpill:function(e){var i=e.dragEl,r=e.putSortable,n=r||this.sortable;n.captureAnimationState(),i.parentNode&&i.parentNode.removeChild(i),n.animateAll()},drop:b2e};tg(UJ,{pluginName:"removeOnSpill"});ei.mount(new gvt);ei.mount(UJ,BJ);const mj=new Set,yvt={ghostClass:"calcite-sortable--ghost",chosenClass:"calcite-sortable--chosen",dragClass:"calcite-sortable--drag",fallbackClass:"calcite-sortable--fallback"};function vvt(t){if(_2e(t))return;w2e(t),mj.add(t);const e="id",{group:i,handleSelector:r,dragSelector:n,sortDisabled:s}=t;t.sortable=ei.create(t.el,{dataIdAttr:e,swapThreshold:.5,...yvt,...!!n&&{draggable:n},...!!i&&{sort:!s,group:{name:i,...!!t.canPull&&{pull:(a,o,l,{newDraggableIndex:c,oldDraggableIndex:h})=>t.canPull({toEl:a.el,fromEl:o.el,dragEl:l,newIndex:c,oldIndex:h})},...!!t.canPut&&{put:(a,o,l,{newDraggableIndex:c,oldDraggableIndex:h})=>t.canPut({toEl:a.el,fromEl:o.el,dragEl:l,newIndex:c,oldIndex:h})}}},onMove:({from:a,dragged:o,to:l,related:c})=>{t.onDragMove&&t.onDragMove({fromEl:a,dragEl:o,toEl:l,relatedEl:c})},handle:r,filter:`${r}[disabled]`,onStart:({from:a,item:o,to:l,newDraggableIndex:c,oldDraggableIndex:h})=>{sW.active=!0,bvt(),t.onDragStart({fromEl:a,dragEl:o,toEl:l,newIndex:c,oldIndex:h})},onEnd:({from:a,item:o,to:l,newDraggableIndex:c,oldDraggableIndex:h})=>{sW.active=!1,wvt(),t.onDragEnd({fromEl:a,dragEl:o,toEl:l,newIndex:c,oldIndex:h})},onSort:({from:a,item:o,to:l,newDraggableIndex:c,oldDraggableIndex:h})=>{t.onDragSort({fromEl:a,dragEl:o,toEl:l,newIndex:c,oldIndex:h})}})}function w2e(t){_2e(t)||(mj.delete(t),t.sortable?.destroy(),t.sortable=null)}const sW={active:!1};function _2e(t){return t.dragEnabled&&sW.active}function bvt(){Array.from(mj).forEach(t=>t.onGlobalDragStart())}function wvt(){Array.from(mj).forEach(t=>t.onGlobalDragEnd())}const Of={container:"container",table:"table",scrim:"scrim",stack:"stack",tableContainer:"table-container",sticky:"sticky-pos",assistiveText:"assistive-text",containerHeight:"container-height"},AU={filterNoResults:"filter-no-results",filterActionsStart:"filter-actions-start",filterActionsEnd:"filter-actions-end"},_vt=St`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:block}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}.container{position:relative;background-color:var(--calcite-list-background-color, var(--calcite-color-foreground-1))}.container-height{block-size:100%}.table-container{box-sizing:border-box;display:flex;inline-size:100%;flex-direction:column;background-color:transparent}.table-container *{box-sizing:border-box}.table{inline-size:100%}.stack{--calcite-stack-padding-inline: 0;--calcite-stack-padding-block: 0}.sticky-pos{position:sticky;inset-block-start:0px;z-index:var(--calcite-z-index-sticky);background-color:var(--calcite-list-background-color, var(--calcite-color-foreground-1))}.assistive-text{position:absolute;inline-size:1px;block-size:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border-width:0}:host([hidden]){display:none}[hidden]{display:none}`,xvt=`${h5}, ${Rm}`;var Dw;let x2e=(Dw=class extends Et{constructor(){super(),this.dragSelector=Rm,this.focusableItems=[],this.handleSelector="calcite-sort-handle",this.listItems=[],this.listItemGroups=[],this.mutationObserver=ea("mutation",()=>{this.willPerformFilter=!0,this.updateListItemsDebounced()}),this.cancelable=pj()(this),this.updateListItemsDebounced=xA(this.updateListItems,HF.nextTick),this.visibleItems=[],this.willFilterEmit=!1,this.willPerformFilter=!1,this.messages=qn({blocking:!0}),this.focusSetter=pn()(this),this.dataForFilter=[],this.hasFilterActionsEnd=!1,this.hasFilterActionsStart=!1,this.hasFilterNoResults=!1,this.sortHandleMenuItems=[],this.disabled=!1,this.dragEnabled=!1,this.filterEnabled=!1,this.filteredData=[],this.filteredItems=[],this.interactionMode="interactive",this.loading=!1,this.displayMode="flat",this.scale="m",this.selectedItems=[],this.selectionAppearance="icon",this.selectionMode="none",this.sortDisabled=!1,this.calciteInternalListDefaultSlotChange=Re({cancelable:!1}),this.calciteListChange=Re({cancelable:!1}),this.calciteListDragEnd=Re({cancelable:!1}),this.calciteListDragStart=Re({cancelable:!1}),this.calciteListFilter=Re({cancelable:!1}),this.calciteListMoveHalt=Re({cancelable:!1}),this.calciteListOrderChange=Re({cancelable:!1}),this.listen("calciteInternalListItemToggle",this.handleCalciteListItemToggle),this.listen("calciteInternalFocusPreviousItem",this.handleCalciteInternalFocusPreviousItem),this.listen("calciteInternalListItemActive",this.handleCalciteInternalListItemActive),this.listen("calciteListItemSelect",this.handleCalciteListItemSelect),this.listen("calciteInternalAssistiveTextChange",this.handleCalciteInternalAssistiveTextChange),this.listen("calciteListItemSortHandleBeforeOpen",this.updateListItemsDebounced),this.listen("calciteSortHandleReorder",this.handleSortReorder),this.listen("calciteSortHandleMove",this.handleSortMove),this.listen("calciteSortHandleAdd",this.handleSortAdd),this.listen("calciteInternalListItemSelect",this.handleCalciteInternalListItemSelect),this.listen("calciteInternalListItemSelectMultiple",this.handleCalciteInternalListItemSelectMultiple),this.listen("calciteInternalListItemChange",this.handleCalciteInternalListItemChange),this.listen("calciteInternalListItemGroupDefaultSlotChange",this.handleCalciteInternalListItemGroupDefaultSlotChange)}get hasActiveFilter(){return this.filterEnabled&&this.filterText&&this.filteredItems.length!==this.visibleItems.length}get showNoResultsContainer(){return this.filterEnabled&&this.filterText&&this.hasFilterNoResults&&this.visibleItems.length&&!this.filteredItems.length}async setFocus(e){return this.focusSetter(()=>this.filterEnabled?this.filterEl:this.focusableItems.find(i=>i.active),e)}emitOrderChangeEvent(e){this.calciteListOrderChange.emit(e)}connectedCallback(){super.connectedCallback(),this.connectObserver(),this.willPerformFilter=!0,this.updateListItemsDebounced(),this.setUpSorting(),this.setParentList(),this.setListItemGroups(),this.cancelable.add(this.updateListItemsDebounced)}async load(){this.handleInteractionModeWarning()}willUpdate(e){(e.has("filterText")||e.has("filterProps")||e.has("filterPredicate"))&&this.performFilter(),(e.has("filterEnabled")&&(this.hasUpdated||this.filterEnabled!==!1)||e.has("group")||e.has("sortDisabled")&&(this.hasUpdated||this.sortDisabled!==!1)||e.has("dragEnabled")&&(this.hasUpdated||this.dragEnabled!==!1)||e.has("selectionMode")&&(this.hasUpdated||this.selectionMode!=="none")||e.has("selectionAppearance")&&(this.hasUpdated||this.selectionAppearance!=="icon")||e.has("displayMode")&&this.hasUpdated||e.has("scale")&&this.hasUpdated||e.has("canPull")&&this.hasUpdated||e.has("canPut")&&this.hasUpdated||e.has("filterPredicate")&&this.hasUpdated)&&this.handleListItemChange()}updated(){ta(this)}disconnectedCallback(){super.disconnectedCallback(),this.disconnectObserver(),w2e(this)}updateListItems(){this.updateGroupItems();const{selectionAppearance:e,selectionMode:i,interactionMode:r,dragEnabled:n,el:s,filterEl:a,displayMode:o,scale:l,sortDisabled:c,sortHandleMenuItems:h}=this,f=Array.from(this.el.querySelectorAll(Rm)),g=s,y=Array.from(g.children).filter(OL);if(f.forEach(b=>{b.scale=l,b.selectionAppearance=e,b.selectionMode=i,b.interactionMode=r,b.closest(ZC)===s&&(b.moveToItems=h.filter(_=>this.validateSortMenuItem({type:"move",fromEl:g,toEl:_.element,dragEl:b,newIndex:0,oldIndex:y.indexOf(b)})),b.addToItems=this.sortHandleMenuItems.filter(_=>this.validateSortMenuItem({type:"add",fromEl:g,toEl:_.element,dragEl:b,newIndex:0,oldIndex:y.indexOf(b)})),b.dragHandle=n,b.displayMode=o,b.sortDisabled=c)}),this.parentListEl){this.setUpSorting();return}this.listItems=f,this.filterEnabled&&this.willPerformFilter&&(this.willPerformFilter=!1,this.dataForFilter=this.getItemData(),a&&(a.items=this.dataForFilter,this.filterAndUpdateData())),this.visibleItems=this.listItems.filter(b=>!b.closed&&!b.hidden),this.updateFilteredItems(),this.borderItems(),this.focusableItems=this.filteredItems.filter(b=>!b.disabled),this.setActiveListItem(),this.updateSelectedItems(),this.setUpSorting()}handleListItemChange(){this.willPerformFilter=!0,this.updateListItemsDebounced()}handleCalciteListItemToggle(e){this.parentListEl||(e.stopPropagation(),this.borderItems())}handleCalciteInternalFocusPreviousItem(e){if(this.parentListEl)return;e.stopPropagation();const{focusableItems:i}=this,n=i.findIndex(s=>s.active)-1;i[n]&&this.focusRow(i[n])}handleCalciteInternalListItemActive(e){if(this.parentListEl)return;e.stopPropagation();const i=e.target,{listItems:r}=this;r.forEach(n=>{n.active=n===i})}handleCalciteListItemSelect(){this.parentListEl||this.updateSelectedItems(!0)}handleCalciteInternalAssistiveTextChange(e){this.assistiveText=e.detail.message,e.stopPropagation()}handleSortReorder(e){this.parentListEl||e.defaultPrevented||(e.preventDefault(),this.handleReorder(e))}handleSortAdd(e){this.parentListEl||e.defaultPrevented||(e.preventDefault(),this.handleAdd(e))}handleSortMove(e){this.parentListEl||e.defaultPrevented||(e.preventDefault(),this.handleMove(e))}handleCalciteInternalListItemSelect(e){if(this.parentListEl)return;e.stopPropagation();const i=e.target,{listItems:r,selectionMode:n}=this;i.selected&&(n==="single"||n==="single-persist")&&r.forEach(s=>s.selected=s===i),this.updateSelectedItems()}handleCalciteInternalListItemSelectMultiple(e){if(this.parentListEl)return;e.stopPropagation();const{target:i,detail:r}=e,{focusableItems:n,lastSelectedInfo:s}=this,a=i;if(r.selectMultiple&&s){const o=n.indexOf(a),l=n.indexOf(s.selectedItem),c=Math.min(l,o),h=Math.max(l,o);n.slice(c,h+1).forEach(f=>f.selected=s.selected)}else this.lastSelectedInfo={selectedItem:a,selected:a.selected}}handleCalciteInternalListItemChange(e){this.parentListEl||(e.stopPropagation(),this.updateListItemsDebounced())}handleCalciteInternalListItemGroupDefaultSlotChange(e){e.stopPropagation()}connectObserver(){this.mutationObserver?.observe(this.el,{childList:!0,subtree:!0})}disconnectObserver(){this.mutationObserver?.disconnect()}setUpSorting(){const{dragEnabled:e,defaultSlotEl:i}=this;e&&(i&&Hyt(i),vvt(this))}onGlobalDragStart(){this.disconnectObserver()}onGlobalDragEnd(){this.connectObserver()}onDragEnd(e){this.calciteListDragEnd.emit(e)}onDragStart(e){e.dragEl.sortHandleOpen=!1,this.calciteListDragStart.emit(e)}onDragSort(e){this.setParentList(),this.updateListItemsDebounced(),this.calciteListOrderChange.emit(e)}setParentList(){this.parentListEl=this.el.parentElement?.closest(ZC)}handleDefaultSlotChange(){this.parentListEl&&this.calciteInternalListDefaultSlotChange.emit()}setListItemGroups(){this.listItemGroups=Array.from(this.el.querySelectorAll(h5))}handleFilterActionsStartSlotChange(e){this.hasFilterActionsStart=ni(e)}handleFilterActionsEndSlotChange(e){this.hasFilterActionsEnd=ni(e)}handleFilterNoResultsSlotChange(e){this.hasFilterNoResults=ni(e)}setActiveListItem(){const{focusableItems:e}=this;e.some(i=>i.active)||e[0]&&(e[0].active=!0)}async updateSelectedItems(e=!1){await this.updateComplete,this.selectedItems=this.visibleItems.filter(i=>i.selected),e&&this.calciteListChange.emit()}filterElements({el:e,filteredItems:i,visibleParents:r}){const n=!r.has(e)&&!i.includes(e);e.filterHidden=n;const s=e.parentElement.closest(xvt);s&&(n||r.add(s),this.filterElements({el:s,filteredItems:i,visibleParents:r}))}allParentListItemsExpanded(e){const i=e.parentElement?.closest(Rm);if(i){if(!i.expanded)return!1}else return!0;return this.allParentListItemsExpanded(i)}borderItems(){const e=this.visibleItems.filter(i=>!i.filterHidden&&this.allParentListItemsExpanded(i));e.forEach(i=>i.bordered=i!==e[e.length-1])}updateFilteredItems(){const{visibleItems:e,filteredData:i,filterText:r,filterPredicate:n}=this,s=e?.filter(l=>e.every(c=>c===l||!l.contains(c))),a=n?e.filter(n):r?i.map(l=>l.el):e||[],o=new WeakSet;s.forEach(l=>this.filterElements({el:l,filteredItems:a,visibleParents:o})),this.filteredItems=a,this.willFilterEmit&&(this.willFilterEmit=!1,this.calciteListFilter.emit())}updateFilteredData(){const{filterEl:e}=this;e&&(e.filteredItems&&(this.filteredData=e.filteredItems),this.updateListItemsDebounced())}async filterAndUpdateData(){await this.filterEl?.filter(this.filterText),this.updateFilteredData()}get effectiveFilterProps(){return this.filterProps?this.filterProps.filter(e=>e!=="el"):["description","label","metadata","heading"]}performFilter(){const{filterEl:e,filterText:i,effectiveFilterProps:r}=this;e&&(e.value=i,e.filterProps=r,this.filterAndUpdateData())}setDefaultSlotEl(e){this.defaultSlotEl=e}setFilterEl(e){this.filterEl=e,this.performFilter()}handleFilterChange(e){e.stopPropagation();const{value:i}=e.currentTarget;this.filterText=i,this.willFilterEmit=!0,this.updateFilteredData()}getItemData(){return this.listItems.map(e=>({label:e.label,description:e.description,metadata:e.metadata,heading:this.getGroupHeading(e),el:e}))}getGroupHeading(e){return this.listItemGroups.filter(r=>r.contains(e)).map(r=>r.heading)}updateGroupItems(){const{el:e,group:i,scale:r}=this,n=UM(e),s=i?Array.from(n.querySelectorAll(`${ZC}[group="${i}"]`)).filter(o=>!o.disabled&&o.dragEnabled):[];this.sortHandleMenuItems=s.map(o=>({element:o,label:o.label??o.id,id:Vd()})),Array.from(this.el.querySelectorAll(h5)).forEach(o=>{o.scale=r})}focusRow(e){const{focusableItems:i}=this;e&&(i.forEach(r=>r.active=r===e),e.setFocus())}isNavigable(e){const i=e.parentElement?.closest(Rm);return i?i.expanded&&this.isNavigable(i):!0}handleListKeydown(e){if(e.defaultPrevented||this.parentListEl)return;const{key:i}=e,r=this.focusableItems.filter(s=>this.isNavigable(s)),n=r.findIndex(s=>s.active);if(i==="ArrowDown"){e.preventDefault();const s=e.target===this.filterEl?0:n+1;r[s]&&this.focusRow(r[s])}else if(i==="ArrowUp"){if(e.preventDefault(),n===0&&this.filterEnabled){this.filterEl.setFocus();return}const s=n-1;r[s]&&this.focusRow(r[s])}else if(i==="Home"){e.preventDefault();const s=r[0];s&&this.focusRow(s)}else if(i==="End"){e.preventDefault();const s=r[r.length-1];s&&this.focusRow(s)}}handleInteractionModeWarning(){this.interactionMode==="static"&&this.selectionMode!=="none"&&this.selectionAppearance==="border"&&console.warn('selection-appearance="border" requires interaction-mode="interactive"')}validateSortMenuItem({fromEl:e,toEl:i,dragEl:r,newIndex:n,oldIndex:s,type:a}){if(!e||!i||i===e||r.contains(i))return!1;const o=e.canPull?.({toEl:i,fromEl:e,dragEl:r,newIndex:n,oldIndex:s})??!0,l=i.canPut?.({toEl:i,fromEl:e,dragEl:r,newIndex:n,oldIndex:s})??!0;return(a==="add"?o==="clone":o===!0)&&l}handleAdd(e){const{addTo:i}=e.detail,r=e.target,n=r?.parentElement,s=i.element,o=Array.from(n.children).filter(OL).indexOf(r),l=0;if(!this.validateSortMenuItem({type:"add",fromEl:n,toEl:s,dragEl:r,newIndex:l,oldIndex:o}))return;r.sortHandleOpen=!1,this.disconnectObserver();const c=r.cloneNode();s.prepend(c),eW(r),this.updateListItemsDebounced(),this.connectObserver();const h={dragEl:r,fromEl:n,toEl:s,newIndex:l,oldIndex:o};this.calciteListOrderChange.emit(h),s.emitOrderChangeEvent(h)}handleMove(e){const{moveTo:i}=e.detail,r=e.target,n=r?.parentElement,s=i.element,o=Array.from(n.children).filter(OL).indexOf(r),l=0;if(!this.validateSortMenuItem({type:"move",fromEl:n,toEl:s,dragEl:r,newIndex:l,oldIndex:o}))return;r.sortHandleOpen=!1,this.disconnectObserver(),s.prepend(r),eW(r),this.updateListItemsDebounced(),this.connectObserver();const c={dragEl:r,fromEl:n,toEl:s,newIndex:l,oldIndex:o};this.calciteListOrderChange.emit(c),s.emitOrderChangeEvent(c)}handleReorder(e){const{reorder:i}=e.detail,r=e.target,n=r?.parentElement;if(!n)return;r.sortHandleOpen=!1;const s=Array.from(n.children).filter(OL),a=s.length-1,o=s.indexOf(r);let l=o;switch(i){case"top":l=0;break;case"bottom":l=a;break;case"up":l=o===0?0:o-1;break;case"down":l=o===a?a:o+1;break}this.disconnectObserver();const c=i==="up"||i==="top"?s[l]:s[l].nextSibling;n.insertBefore(r,c),this.updateListItemsDebounced(),this.connectObserver(),this.calciteListOrderChange.emit({dragEl:r,fromEl:n,toEl:n,newIndex:l,oldIndex:o})}render(){const{loading:e,label:i,disabled:r,dataForFilter:n,filterEnabled:s,filterPlaceholder:a,filterText:o,filterLabel:l,hasFilterActionsStart:c,hasFilterActionsEnd:h,effectiveFilterProps:f}=this;return ia({disabled:this.disabled,children:J`<div class=${q({[Of.container]:!0,[Of.containerHeight]:this.listItems.length<1&&e})}>${this.dragEnabled?J`<span aria-live=assertive class=${q(Of.assistiveText)}>${this.assistiveText}</span>`:null}${this.renderItemAriaLive()}${e?J`<calcite-scrim class=${q(Of.scrim)} .loading=${e}></calcite-scrim>`:null}<div .ariaBusy=${e} .ariaLabel=${i||""} class=${q(Of.table)} @keydown=${this.handleListKeydown} role=treegrid>${s||c||h?J`<div class=${q(Of.sticky)} role=rowgroup><div role=row><div role=columnheader><calcite-stack class=${q(Of.stack)}><slot name=${AU.filterActionsStart} @slotchange=${this.handleFilterActionsStartSlotChange} slot=${IS.actionsStart}></slot><calcite-filter .ariaLabel=${a} .disabled=${r} .filterProps=${f} .items=${n} .label=${l} @calciteFilterChange=${this.handleFilterChange} .placeholder=${a} .scale=${this.scale} .value=${o} ${zt(this.setFilterEl)}></calcite-filter><slot name=${AU.filterActionsEnd} @slotchange=${this.handleFilterActionsEndSlotChange} slot=${IS.actionsEnd}></slot></calcite-stack></div></div></div>`:null}<div class=${q(Of.tableContainer)} role=rowgroup><slot @slotchange=${this.handleDefaultSlotChange} ${zt(this.setDefaultSlotEl)}></slot></div></div><div aria-live=polite data-test-id=no-results-container .hidden=${!this.showNoResultsContainer}><slot name=${AU.filterNoResults} @slotchange=${this.handleFilterNoResultsSlotChange}></slot></div></div>`})}renderItemAriaLive(){const{messages:e,filteredItems:i,parentListEl:r,messages:{_lang:n},numberingSystem:s}=this;return iu.numberFormatOptions={locale:n,numberingSystem:s},r?null:J`<div aria-live=polite class=${q(Of.assistiveText)}>${this.hasActiveFilter?xt("aria-filter-enabled",J`<div>${e.filterEnabled}</div>`):null}${xt("aria-item-count",J`<div>${e.total.replace("{count}",iu.localize(i.length.toString()))}</div>`)}${i.length?xt("aria-item-list",J`<ol>${i.map(a=>J`<li>${a.label}</li>`)}</ol>`):null}</div>`}},Dw.properties={assistiveText:[16,{},{state:!0}],dataForFilter:[16,{},{state:!0}],hasFilterActionsEnd:[16,{},{state:!0}],hasFilterActionsStart:[16,{},{state:!0}],hasFilterNoResults:[16,{},{state:!0}],sortHandleMenuItems:[16,{},{state:!0}],canPull:[0,{},{attribute:!1}],canPut:[0,{},{attribute:!1}],disabled:[7,{},{reflect:!0,type:Boolean}],dragEnabled:[7,{},{reflect:!0,type:Boolean}],filterEnabled:[7,{},{reflect:!0,type:Boolean}],filterPredicate:[0,{},{attribute:!1}],filterLabel:[3,{},{reflect:!0}],filterPlaceholder:[3,{},{reflect:!0}],filterProps:[0,{},{attribute:!1}],filterText:[3,{},{reflect:!0}],filteredData:[0,{},{attribute:!1}],filteredItems:[0,{},{attribute:!1}],group:[3,{},{reflect:!0}],interactionMode:[3,{},{reflect:!0}],label:1,loading:[7,{},{reflect:!0,type:Boolean}],messageOverrides:[0,{},{attribute:!1}],displayMode:[3,{},{reflect:!0}],numberingSystem:1,scale:[3,{},{reflect:!0}],selectedItems:[0,{},{attribute:!1}],selectionAppearance:[3,{},{reflect:!0}],selectionMode:[3,{},{reflect:!0}],sortDisabled:[7,{},{reflect:!0,type:Boolean}]},Dw.styles=_vt,Dw);$i("calcite-list",x2e);const S2e=Object.freeze(Object.defineProperty({__proto__:null,List:x2e},Symbol.toStringTag,{value:"Module"}));const Oi={actionsEnd:"actions-end",actionsStart:"actions-start",description:"description",close:"close",container:"container",containerHover:"container--hover",containerBorder:"container--border",containerBorderSelected:"container--border-selected",containerBorderUnselected:"container--border-unselected",content:"content",contentBottom:"content-bottom",contentContainer:"content-container",contentContainerHasCenterContent:"content-container--has-center-content",contentContainerSelectable:"content-container--selectable",contentContainerUnavailable:"content-container--unavailable",contentContainerWrapper:"content-container-wrapper",contentContainerWrapperBordered:"content-container-wrapper--bordered",contentEnd:"content-end",contentStart:"content-start",customContent:"custom-content",expandedContainer:"expanded-container",dragContainer:"drag-container",gridCell:"grid-cell",icon:"icon",nestedContainer:"nested-container",nestedContainerExpanded:"nested-container--expanded",label:"label",row:"row",selectionContainer:"selection-container",selectionContainerSingle:"selection-container--single",wrapper:"wrapper",wrapperBordered:"wrapper--bordered"},Q1={actionsStart:"actions-start",contentStart:"content-start",content:"content",contentBottom:"content-bottom",contentEnd:"content-end",actionsEnd:"actions-end"},Svt=0,Lf={selectedMultiple:"check-square-f",selectedSingle:"circle-inset-large",unselectedMultiple:"square",unselectedSingle:"circle",collapsedLTR:"chevron-right",collapsedRTL:"chevron-left",open:"chevron-down",blank:"blank",close:"x"},dde="data-test-active";const hde={container:"container",heading:"heading"},$vt=St`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:flex;flex-direction:column}:host([filter-hidden]){display:none}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}.container{margin:0;display:flex;flex:1 1 0%;background-color:var(--calcite-list-background-color, var(--calcite-color-foreground-1));color:var(--calcite-list-color, var(--calcite-color-text-2))}.heading{font-weight:var(--calcite-font-weight-medium)}:host([scale=s]) .container{padding-inline:var(--calcite-spacing-sm)}:host([scale=s]) .heading{font-size:var(--calcite-font-size-sm);line-height:var(--calcite-font-line-height-fixed-base);padding-block:var(--calcite-spacing-sm) var(--calcite-spacing-xxs)}:host([scale=s]:not(:first-child)) .container{padding-block-start:var(--calcite-spacing-sm)}:host([scale=m]) .container{padding-inline:var(--calcite-spacing-md)}:host([scale=m]) .heading{font-size:var(--calcite-font-size);line-height:var(--calcite-font-line-height-fixed-base);padding-block:var(--calcite-spacing-lg) var(--calcite-spacing-sm)}:host([scale=m]:not(:first-child)) .container{padding-block-start:var(--calcite-spacing-md)}:host([scale=l]) .container{padding-inline:var(--calcite-spacing-lg)}:host([scale=l]) .heading{font-size:var(--calcite-font-size-md);line-height:var(--calcite-font-line-height-fixed-lg);padding-block:var(--calcite-spacing-xl) var(--calcite-spacing-sm-plus, .625rem)}:host([scale=l]:not(:first-child)) .container{padding-block-start:var(--calcite-spacing-md-plus, .875rem)}.heading{padding:0}:host([hidden]){display:none}[hidden]{display:none}`,cF=class cF extends Et{constructor(){super(...arguments),this.disabled=!1,this.filterHidden=!1,this.scale="m",this.calciteInternalListItemGroupDefaultSlotChange=Re({cancelable:!1})}updated(){ta(this)}handleDefaultSlotChange(){this.calciteInternalListItemGroupDefaultSlotChange.emit()}render(){const{disabled:e,heading:i}=this;return ia({disabled:e,children:J`<div class=${q(hde.container)} role=row><div .ariaColSpan=${Svt} class=${q(hde.heading)} role=cell>${i}</div></div><slot @slotchange=${this.handleDefaultSlotChange}></slot>`})}};cF.properties={disabled:[7,{},{reflect:!0,type:Boolean}],filterHidden:[7,{},{reflect:!0,type:Boolean}],heading:[3,{},{reflect:!0}],scale:[3,{},{reflect:!0}]},cF.styles=$vt;let v5=cF;$i("calcite-list-item-group",v5);const pFt=Object.freeze(Object.defineProperty({__proto__:null,ListItemGroup:v5},Symbol.toStringTag,{value:"Module"}));const Tvt=St`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:flex;flex-direction:column}:host([filter-hidden]),:host([closed]){display:none}.wrapper--bordered{border-block-end:1px solid var(--calcite-list-border-color, var(--calcite-color-border-3))}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}.container{box-sizing:border-box;display:flex;flex:1 1 0%;overflow:hidden;background-color:var(--calcite-list-background-color, var(--calcite-color-foreground-1))}.container *{box-sizing:border-box}.container--hover:hover{cursor:pointer;background-color:var(--calcite-list-background-color-hover, var(--calcite-color-foreground-2))}.container:active{background-color:var(--calcite-list-background-color-press, var(--calcite-color-foreground-3))}.container--border{position:relative}.container--border:before{position:absolute;inline-size:var(--calcite-border-width-lg);inset-block:0;inset-inline-start:0;background-color:transparent;content:""}.container--border-selected:before{background-color:var(--calcite-list-selection-border-color, var(--calcite-color-brand))}.container--border-selected:focus{box-shadow:inset var(--calcite-border-width-lg) 0 0 0 var(--calcite-list-selection-border-color, var(--calcite-color-brand))}.nested-container{display:none;flex-direction:column;border-width:0px;border-style:solid;border-color:1px solid var(--calcite-list-border-color, var(--calcite-color-border-3));margin-inline-start:var(--calcite-list-spacing-indent, 1.5rem)}.nested-container--expanded{display:flex}.selection-container{display:flex;padding-block:0px;color:var(--calcite-list-icon-color, var(--calcite-color-border-input))}:host(:not([disabled]):not([selected])) .container:hover .selection-container--single{color:var(--calcite-list-icon-color, var(--calcite-color-border-input))}:host([selected]:hover) .selection-container,:host([selected]:hover) .selection-container--single,:host([selected]) .selection-container{color:var(--calcite-list-icon-color, var(--calcite-color-brand))}.content-container-wrapper{display:flex;flex:1 1 auto}.content-container-wrapper--bordered{border-block-end:1px solid var(--calcite-list-border-color, var(--calcite-color-border-3))}.content-container{display:flex;flex:1 1 auto;-webkit-user-select:none;user-select:none;align-items:stretch;font-weight:var(--calcite-font-weight-normal);color:var(--calcite-list-content-text-color, var(--calcite-color-text-2))}.content-container--unavailable{opacity:var(--calcite-opacity-disabled)}.row,.grid-cell{outline-color:transparent}.row{position:relative}.row:focus,.grid-cell:focus{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(calc(-1 * var(--calcite-spacing-base)) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}.content,.custom-content{display:flex;flex:1 1 auto;flex-direction:column;justify-content:center;line-height:var(--calcite-font-line-height-relative-snug)}.label{color:var(--calcite-list-label-text-color, var(--calcite-color-text-1))}.description{color:var(--calcite-list-description-text-color, var(--calcite-color-text-3))}.icon{align-self:center;color:var(--calcite-list-icon-color, var(--calcite-color-text-3))}.icon:hover,.icon:active{color:var(--calcite-color-text-1)}:host([display-mode=flat][drag-handle]:is([selection-mode=none],[selection-appearance=border])) .drag-container{padding-inline-end:var(--calcite-spacing-xxs)}:host([scale=s]) .actions-start{padding-inline-end:var(--calcite-spacing-sm)}:host([scale=s]) .content-container{gap:var(--calcite-spacing-sm);min-block-size:32px;padding-block:var(--calcite-spacing-xxs);padding-inline-end:var(--calcite-spacing-sm)}:host([scale=s]) .content,:host([scale=s]) .custom-content,:host([scale=s]) .label{font-size:var(--calcite-font-size--2)}:host([scale=s]) .description{font-size:var(--calcite-font-size--3)}:host([scale=s][display-mode=flat]:not([drag-handle])) .container{padding-inline-start:var(--calcite-spacing-sm)}:host([scale=s][display-mode=flat]:not([drag-handle])) .selection-container{padding-inline-end:var(--calcite-spacing-sm)}:host([scale=s][display-mode=flat][drag-handle]) .selection-container{padding-inline:var(--calcite-spacing-xxs) var(--calcite-spacing-sm)}:host([scale=s][display-mode=nested]) .selection-container{padding-inline-end:var(--calcite-spacing-xxs)}:host([scale=s][display-mode=nested][selection-appearance=icon]:not([selection-mode=none]):not([drag-handle])) .container{padding-inline-start:var(--calcite-spacing-sm)}:host([scale=s][display-mode=nested][selection-appearance=icon]:not([selection-mode=none]):not([drag-handle])) .selection-container{padding-inline-end:var(--calcite-spacing-xxs)}:host([scale=s][display-mode=nested][drag-handle]) .selection-container{padding-inline:var(--calcite-spacing-xxs)}:host([scale=m]) .actions-start{padding-inline-end:var(--calcite-spacing-sm)}:host([scale=m]) .content-container{gap:var(--calcite-spacing-sm);min-block-size:40px;padding-block:var(--calcite-spacing-sm);padding-inline-end:var(--calcite-spacing-md)}:host([scale=m]) .content,:host([scale=m]) .custom-content{font-size:var(--calcite-font-size--2)}:host([scale=m]) .label{font-size:var(--calcite-font-size--1)}:host([scale=m]) .description{font-size:var(--calcite-font-size--2)}:host([scale=m][display-mode=flat]) .container{padding-inline-start:var(--calcite-spacing-md)}:host([scale=m][display-mode=flat]) .selection-container{padding-inline-end:var(--calcite-spacing-sm)}:host([scale=m][display-mode=flat][drag-handle]) .container{padding-inline-start:0}:host([scale=m][display-mode=flat][drag-handle]) .selection-container{padding-inline:var(--calcite-spacing-xxs) var(--calcite-spacing-sm)}:host([scale=m][display-mode=nested]) .container{padding-inline-start:var(--calcite-spacing-xxs)}:host([scale=m][display-mode=nested]) .selection-container{padding-inline-end:var(--calcite-spacing-xxs)}:host([scale=m][display-mode=nested][selection-appearance=icon]:not([selection-mode=none]):not([drag-handle])) .container{padding-inline-start:var(--calcite-spacing-md)}:host([scale=m][display-mode=nested][drag-handle]) .container{padding-inline-start:0}:host([scale=m][display-mode=nested][drag-handle]) .selection-container{padding-inline:var(--calcite-spacing-xxs)}:host([scale=l]) .actions-start{padding-inline-end:var(--calcite-spacing-md)}:host([scale=l]) .content-container{gap:var(--calcite-spacing-md);min-block-size:56px;padding-block:.625rem;padding-inline-end:var(--calcite-spacing-lg)}:host([scale=l]) .content,:host([scale=l]) .custom-content,:host([scale=l]) .label{font-size:var(--calcite-font-size-0)}:host([scale=l]) .description{font-size:var(--calcite-font-size--1)}:host([scale=l]) .nested-container{margin-inline-start:1.75rem}:host([scale=l][display-mode=flat]) .container{padding-inline-start:var(--calcite-spacing-lg)}:host([scale=l][display-mode=flat]) .selection-container{padding-inline-end:var(--calcite-spacing-md)}:host([scale=l][display-mode=flat][drag-handle]) .container{padding-inline-start:0}:host([scale=l][display-mode=flat][drag-handle]) .selection-container{padding-inline-end:var(--calcite-spacing-md)}:host([scale=l][display-mode=nested]) .container{padding-inline-start:var(--calcite-spacing-xxs)}:host([scale=l][display-mode=nested][drag-handle]) .container{padding-inline-start:0}:host([scale=l][display-mode=nested][selection-appearance=icon]:not([selection-mode=none]):not([drag-handle])) .container{padding-inline-start:var(--calcite-spacing-lg)}.label,.description,.content-bottom{font-family:var(--calcite-font-family);font-weight:var(--calcite-font-weight-normal);word-wrap:break-word;word-break:break-word}:host([selected]) .label{font-weight:var(--calcite-font-weight-medium)}:host([selected]) .icon{color:var(--calcite-list-icon-color, var(--calcite-color-text-1))}:host([selected]) .description{color:var(--calcite-list-description-text-color, var(--calcite-color-text-2))}.content-start{justify-content:flex-start}.content-end{justify-content:flex-end}.content-start,.content-end{flex:1 1 auto}.content-start ::slotted(calcite-icon),.content-end ::slotted(calcite-icon){align-self:center}.content-bottom{display:flex;flex-direction:column}.content-container--has-center-content .content-start,.content-container--has-center-content .content-end{flex:0 1 auto}.expanded-container{color:var(--calcite-list-icon-color, var(--calcite-color-text-3));padding-inline:var(--calcite-spacing-xxs)}:host(:not([disabled])) .expanded-container:hover{color:var(--calcite-list-icon-color, var(--calcite-color-text-1))}.actions-start,.actions-end,.content-start,.content-end,.selection-container,.drag-container,.expanded-container{display:flex;align-items:center}.actions-start calcite-action,.actions-start calcite-sort-handle,.actions-end calcite-action,.actions-end calcite-sort-handle,.content-start calcite-action,.content-start calcite-sort-handle,.content-end calcite-action,.content-end calcite-sort-handle,.selection-container calcite-action,.selection-container calcite-sort-handle,.drag-container calcite-action,.drag-container calcite-sort-handle,.expanded-container calcite-action,.expanded-container calcite-sort-handle{align-self:stretch}.drag-container,.selection-container,.expanded-container{padding-block-end:var(--calcite-spacing-px)}.expanded-container,.selection-container{cursor:pointer}.actions-start,.actions-end{position:relative;padding:0}.actions-start ::slotted(calcite-action),.actions-start ::slotted(calcite-action-menu),.actions-start ::slotted(calcite-sort-handle),.actions-start ::slotted(calcite-dropdown),.actions-end ::slotted(calcite-action),.actions-end ::slotted(calcite-action-menu),.actions-end ::slotted(calcite-sort-handle),.actions-end ::slotted(calcite-dropdown){align-self:stretch;color:inherit}.row:focus .actions-start,.row:focus .actions-end{inset-block:.125rem}.row:focus .actions-start .close,.row:focus .actions-start ::slotted(calcite-action),.row:focus .actions-start ::slotted(calcite-action-menu),.row:focus .actions-start ::slotted(calcite-sort-handle),.row:focus .actions-start ::slotted(calcite-dropdown),.row:focus .actions-end .close,.row:focus .actions-end ::slotted(calcite-action),.row:focus .actions-end ::slotted(calcite-action-menu),.row:focus .actions-end ::slotted(calcite-sort-handle),.row:focus .actions-end ::slotted(calcite-dropdown){block-size:calc(100% - .25rem)}.row:focus:after,.row:focus:before{position:absolute;content:"";inline-size:.125rem;z-index:var(--calcite-z-index-header);background-color:var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));inset-block:0}.row:focus:before{inset-inline-start:0}.row:focus:after{inset-inline-end:0}.container--border:focus:before{display:none}::slotted(calcite-list:empty){border-block-start-width:0px}:host([hidden]){display:none}[hidden]{display:none}`,FL=new Map,uF=class uF extends Et{constructor(){super(),this.actionsEndRef=wr(),this.actionsStartRef=wr(),this.containerRef=wr(),this.contentRef=wr(),this.defaultSlotRef=wr(),this.handleGridRef=wr(),this.messages=qn(),this.focusSetter=pn()(this),this.hasActionsEnd=!1,this.hasActionsStart=!1,this.hasContentBottom=!1,this.hasContentEnd=!1,this.hasContentStart=!1,this.hasCustomContent=!1,this.level=null,this.expandable=!1,this.active=!1,this.bordered=!1,this.sortDisabled=!1,this.closable=!1,this.closed=!1,this.disabled=!1,this.dragDisabled=!1,this.dragHandle=!1,this.expanded=!1,this.filterHidden=!1,this.interactionMode=null,this.displayMode="flat",this.addToItems=[],this.moveToItems=[],this.scale="m",this.selected=!1,this.selectionAppearance=null,this.selectionMode=null,this.sortHandleOpen=!1,this.unavailable=!1,this.calciteInternalFocusPreviousItem=Re({cancelable:!1}),this.calciteInternalListItemActive=Re({cancelable:!1}),this.calciteInternalListItemChange=Re({cancelable:!1}),this.calciteInternalListItemSelect=Re({cancelable:!1}),this.calciteInternalListItemSelectMultiple=Re({cancelable:!1}),this.calciteInternalListItemToggle=Re({cancelable:!1}),this.calciteListItemClose=Re({cancelable:!1}),this.calciteListItemCollapse=Re({cancelable:!1}),this.calciteListItemExpand=Re({cancelable:!1}),this.calciteListItemSelect=Re({cancelable:!1}),this.calciteListItemSortHandleBeforeClose=Re({cancelable:!1}),this.calciteListItemSortHandleBeforeOpen=Re({cancelable:!1}),this.calciteListItemSortHandleClose=Re({cancelable:!1}),this.calciteListItemSortHandleOpen=Re({cancelable:!1}),this.calciteListItemToggle=Re({cancelable:!1}),this.listen("calciteInternalListItemGroupDefaultSlotChange",this.handleCalciteInternalListDefaultSlotChanges),this.listen("calciteInternalListDefaultSlotChange",this.handleCalciteInternalListDefaultSlotChanges)}get open(){return this.expanded}set open(e){xI.deprecated("property",{name:"open",removalVersion:4,suggested:"expanded"}),this.expanded=e}async setFocus(e){return this.focusSetter(()=>{const{containerRef:i,parentListEl:r}=this,n=FL.get(r);if(typeof n=="number"){const s=this.getGridCells()[n];if(s){this.focusCell(s);return}}return{target:i.value,includeContainer:!0,strategy:"focusable"}},e)}connectedCallback(){super.connectedCallback();const{el:e}=this;this.parentListEl=e.closest(ZC),this.level=Gyt(e)+1,this.setSelectionDefaults()}disconnectedCallback(){super.disconnectedCallback(),FL.clear()}willUpdate(e){e.has("active")&&(this.hasUpdated||this.active!==!1)&&this.activeHandler(this.active),e.has("closed")&&(this.hasUpdated||this.closed!==!1)&&this.handleClosedChange(),e.has("disabled")&&(this.hasUpdated||this.disabled!==!1)&&this.handleDisabledChange(),e.has("selected")&&(this.hasUpdated||this.selected!==!1)&&this.handleSelectedChange(),e.has("sortHandleOpen")&&(this.hasUpdated||this.sortHandleOpen!==!1)&&this.sortHandleOpenHandler(),e.has("displayMode")&&this.hasUpdated&&this.handleExpandableChange(this.defaultSlotRef.value),e.has("expanded")&&this.hasUpdated&&(this.expanded?(this.handleExpandedChange(),this.calciteListItemExpand.emit()):this.calciteListItemCollapse.emit())}updated(){ta(this)}activeHandler(e){e||this.focusCell(null,!1)}handleClosedChange(){this.emitCalciteInternalListItemChange()}handleDisabledChange(){this.emitCalciteInternalListItemChange()}handleExpandedChange(){this.emitCalciteInternalListItemToggle()}handleSelectedChange(){this.calciteInternalListItemSelect.emit()}sortHandleOpenHandler(){this.sortHandleEl&&(this.sortHandleEl.open=this.sortHandleOpen)}handleCalciteInternalListDefaultSlotChanges(e){e.stopPropagation(),this.handleExpandableChange(this.defaultSlotRef.value)}setSortHandleEl(e){this.sortHandleEl=e,this.sortHandleOpenHandler()}handleSortHandleBeforeOpen(e){e.stopPropagation(),this.calciteListItemSortHandleBeforeOpen.emit()}handleSortHandleBeforeClose(e){e.stopPropagation(),this.calciteListItemSortHandleBeforeClose.emit()}handleSortHandleClose(e){e.stopPropagation(),this.sortHandleOpen=!1,this.calciteListItemSortHandleClose.emit()}handleSortHandleOpen(e){e.stopPropagation(),this.sortHandleOpen=!0,this.calciteListItemSortHandleOpen.emit()}emitInternalListItemActive(){this.calciteInternalListItemActive.emit()}emitCalciteInternalListItemToggle(){this.calciteInternalListItemToggle.emit()}emitCalciteInternalListItemChange(){this.calciteInternalListItemChange.emit()}handleCloseClick(){this.closed=!0,this.calciteListItemClose.emit()}handleContentSlotChange(e){this.hasCustomContent=ni(e)}handleActionsStartSlotChange(e){this.hasActionsStart=ni(e)}handleActionsEndSlotChange(e){this.hasActionsEnd=ni(e)}handleContentStartSlotChange(e){this.hasContentStart=ni(e)}handleContentEndSlotChange(e){this.hasContentEnd=ni(e)}handleContentBottomSlotChange(e){this.hasContentBottom=ni(e)}setSelectionDefaults(){const{parentListEl:e,selectionMode:i,selectionAppearance:r}=this;e&&(i||(this.selectionMode=e.selectionMode),r||(this.selectionAppearance=e.selectionAppearance))}handleExpandableChange(e){if(!e)return;const i=Uyt(e);i.lists.forEach(r=>{r.displayMode=this.displayMode}),this.expandable=this.displayMode==="nested"&&(i.lists.length>0||i.items.length>0)}handleDefaultSlotChange(e){this.handleExpandableChange(e.target)}handleToggleClick(){this.toggle()}toggle(e=!this.expanded){this.expanded=e,this.calciteListItemToggle.emit()}handleItemClick(e){e.defaultPrevented||this.toggleSelected(e.shiftKey)}async toggleSelected(e){const{selectionMode:i,selected:r}=this;this.disabled||(i==="multiple"||i==="single"?this.selected=!r:i==="single-persist"&&(this.selected=!0),this.calciteInternalListItemSelectMultiple.emit({selectMultiple:e&&i==="multiple"}),await this.updateComplete,this.calciteListItemSelect.emit())}getGridCells(){return[this.handleGridRef.value,this.actionsStartRef.value,this.contentRef.value,this.actionsEndRef.value].filter(e=>e&&!e.hidden)}handleItemKeyDown(e){if(e.defaultPrevented)return;const{key:i}=e,r=e.composedPath(),{containerRef:n,actionsStartRef:{value:s},actionsEndRef:{value:a},expanded:o,expandable:l}=this,c=this.getGridCells(),h=c.findIndex(f=>r.includes(f));if(i==="Enter"&&!r.includes(s)&&!r.includes(a))e.preventDefault(),this.toggleSelected(e.shiftKey);else if(i==="ArrowRight"){e.preventDefault();const f=h+1;h===-1?!o&&l?(this.toggle(!0),this.focusCell(null)):c[0]&&this.focusCell(c[0]):c[h]&&c[f]&&this.focusCell(c[f])}else if(i==="ArrowLeft"){e.preventDefault();const f=h-1;h===-1?(this.focusCell(null),o&&l?this.toggle(!1):this.calciteInternalFocusPreviousItem.emit()):h===0?(this.focusCell(null),n.value.focus()):c[h]&&c[f]&&this.focusCell(c[f])}}focusCellNull(){this.focusCell(null)}setFocusCell(e,i,r){const{parentListEl:n}=this;r&&FL.set(n,null);const s=this.getGridCells();s.forEach(a=>{a.removeAttribute("tabindex"),a.removeAttribute(dde)}),e&&(e===i?e.tabIndex=0:e.removeAttribute("tabindex"),e.setAttribute(dde,""),r&&FL.set(n,s.indexOf(e)))}focusCell(e,i=!0){const r=$ye(e);this.setFocusCell(e,r,i),r?.focus()}renderSelected(){const{selected:e,selectionMode:i,selectionAppearance:r}=this;return i==="none"||r==="border"?null:xt("selection-container",J`<div class=${q({[Oi.selectionContainer]:!0,[Oi.selectionContainerSingle]:i==="single"||i==="single-persist"})} @click=${this.handleItemClick}><calcite-icon .icon=${e?i==="multiple"?Lf.selectedMultiple:Lf.selectedSingle:i==="multiple"?Lf.unselectedMultiple:Lf.unselectedSingle} .scale=${Dr(this.scale)}></calcite-icon></div>`)}renderDragHandle(){const{label:e,dragHandle:i,dragDisabled:r,setPosition:n,setSize:s,moveToItems:a,sortDisabled:o,addToItems:l}=this;return i?xt("drag-handle-container",J`<div .ariaLabel=${e} class=${q({[Oi.dragContainer]:!0,[Oi.gridCell]:!0})} role=gridcell ${zt(this.handleGridRef)}><calcite-sort-handle .addToItems=${l} .disabled=${r} .label=${e} .moveToItems=${a} @calciteSortHandleBeforeClose=${this.handleSortHandleBeforeClose} @calciteSortHandleBeforeOpen=${this.handleSortHandleBeforeOpen} @calciteSortHandleClose=${this.handleSortHandleClose} @calciteSortHandleOpen=${this.handleSortHandleOpen} overlay-positioning=fixed .scale=${this.scale} .setPosition=${n} .setSize=${s} .sortDisabled=${o} ${zt(this.setSortHandleEl)}></calcite-sort-handle></div>`):null}renderExpanded(){const{el:e,expanded:i,expandable:r,messages:n,displayMode:s,scale:a}=this;if(s!=="nested")return null;const o=jo(e),l=r?i?Lf.open:o==="rtl"?Lf.collapsedRTL:Lf.collapsedLTR:Lf.blank,c=Dr(a),h=r?i?n.collapse:n.expand:void 0,f=r?this.handleToggleClick:void 0;return xt("expanded-container",J`<div class=${q(Oi.expandedContainer)} @click=${f} title=${h??Xe}>${xt(l,J`<calcite-icon .icon=${l} .scale=${c}></calcite-icon>`)}</div>`)}renderActionsStart(){const{label:e,hasActionsStart:i}=this;return xt("actions-start-container",J`<div .ariaLabel=${e} class=${q({[Oi.actionsStart]:!0,[Oi.gridCell]:!0})} .hidden=${!i} role=gridcell ${zt(this.actionsStartRef)}><slot name=${Q1.actionsStart} @slotchange=${this.handleActionsStartSlotChange}></slot></div>`)}renderActionsEnd(){const{label:e,hasActionsEnd:i,closable:r,messages:n}=this;return xt("actions-end-container",J`<div .ariaLabel=${e} class=${q({[Oi.actionsEnd]:!0,[Oi.gridCell]:!0})} .hidden=${!(i||r)} role=gridcell ${zt(this.actionsEndRef)}><slot name=${Q1.actionsEnd} @slotchange=${this.handleActionsEndSlotChange}></slot>${r?xt("close-action",J`<calcite-action appearance=transparent class=${q(Oi.close)} .icon=${Lf.close} .label=${n.close} @click=${this.handleCloseClick} .scale=${this.scale} .text=${n.close}></calcite-action>`):null}</div>`)}renderContentStart(){const{hasContentStart:e}=this;return J`<div class=${q(Oi.contentStart)} .hidden=${!e}><slot name=${Q1.contentStart} @slotchange=${this.handleContentStartSlotChange}></slot></div>`}renderCustomContent(){const{hasCustomContent:e}=this;return J`<div class=${q(Oi.customContent)} .hidden=${!e}><slot name=${Q1.content} @slotchange=${this.handleContentSlotChange}></slot></div>`}renderIconStart(){const{iconStart:e,iconFlipRtl:i,scale:r}=this;return e?xt("icon-start",J`<calcite-icon class=${q(Oi.icon)} .flipRtl=${i==="both"||i==="start"} .icon=${e} .scale=${Dr(r)}></calcite-icon>`):null}renderIconEnd(){const{iconEnd:e,iconFlipRtl:i,scale:r}=this;return e?xt("icon-end",J`<calcite-icon class=${q(Oi.icon)} .flipRtl=${i==="both"||i==="end"} .icon=${e} .scale=${Dr(r)}></calcite-icon>`):null}renderContentEnd(){const{hasContentEnd:e}=this;return J`<div class=${q(Oi.contentEnd)} .hidden=${!e}><slot name=${Q1.contentEnd} @slotchange=${this.handleContentEndSlotChange}></slot></div>`}renderContentBottom(){const{hasContentBottom:e}=this;return J`<div class=${q(Oi.contentBottom)} .hidden=${!e}><slot name=${Q1.contentBottom} @slotchange=${this.handleContentBottomSlotChange}></slot></div>`}renderDefaultContainer(){return J`<div class=${q({[Oi.nestedContainer]:!0,[Oi.nestedContainerExpanded]:this.expandable&&this.expanded})}><slot @slotchange=${this.handleDefaultSlotChange} ${zt(this.defaultSlotRef)}></slot></div>`}renderContentProperties(){const{label:e,description:i,hasCustomContent:r}=this;return!r&&(e||i)?xt("content",J`<div class=${q(Oi.content)}>${e?xt("label",J`<div class=${q(Oi.label)}>${e}</div>`):null}${i?xt("description",J`<div class=${q(Oi.description)}>${i}</div>`):null}</div>`):null}renderContentContainer(){const{description:e,label:i,selectionMode:r,hasCustomContent:n,unavailable:s}=this,a=n||!!i||!!e,o=[this.renderContentStart(),this.renderCustomContent(),this.renderIconStart(),this.renderContentProperties(),this.renderIconEnd(),this.renderContentEnd()];return xt("content-container",J`<div .ariaLabel=${i} class=${q({[Oi.gridCell]:!0,[Oi.contentContainer]:!0,[Oi.contentContainerUnavailable]:s,[Oi.contentContainerSelectable]:r!=="none",[Oi.contentContainerHasCenterContent]:a})} @click=${this.handleItemClick} role=gridcell ${zt(this.contentRef)}>${o}</div>`)}render(){const{expandable:e,expanded:i,level:r,active:n,label:s,selected:a,selectionAppearance:o,selectionMode:l,interactionMode:c,closed:h,filterHidden:f,bordered:g,disabled:y,hasContentBottom:b}=this,_=g&&b,S=g&&!b,$=l!=="none"&&o==="border",C=$&&a,I=$&&!a,P=c==="interactive"||c==="static"&&l!=="none"&&o==="border";return ia({disabled:y,children:J`<div class=${q({[Oi.wrapper]:!0,[Oi.wrapperBordered]:_})}><div .ariaExpanded=${e?i:null} .ariaLabel=${s} .ariaLevel=${r} .ariaSelected=${a} class=${q({[Oi.row]:!0,[Oi.container]:!0,[Oi.containerHover]:P,[Oi.containerBorder]:$,[Oi.containerBorderSelected]:C,[Oi.containerBorderUnselected]:I})} .hidden=${h||f} @focus=${this.focusCellNull} @focusin=${this.emitInternalListItemActive} @keydown=${this.handleItemKeyDown} role=row .tabIndex=${n?0:-1} ${zt(this.containerRef)}>${this.renderDragHandle()}${this.renderSelected()}${this.renderExpanded()}<div class=${q({[Oi.contentContainerWrapper]:!0,[Oi.contentContainerWrapperBordered]:S})}>${this.renderActionsStart()}${this.renderContentContainer()}${this.renderActionsEnd()}</div></div>${this.renderContentBottom()}</div>${this.renderDefaultContainer()}`})}};uF.properties={hasActionsEnd:[16,{},{state:!0}],hasActionsStart:[16,{},{state:!0}],hasContentBottom:[16,{},{state:!0}],hasContentEnd:[16,{},{state:!0}],hasContentStart:[16,{},{state:!0}],hasCustomContent:[16,{},{state:!0}],level:[16,{},{state:!0}],expandable:[16,{},{state:!0}],parentListEl:[16,{},{state:!0}],active:[5,{},{type:Boolean}],bordered:[5,{},{type:Boolean}],sortDisabled:[5,{},{type:Boolean}],closable:[7,{},{reflect:!0,type:Boolean}],closed:[7,{},{reflect:!0,type:Boolean}],description:1,disabled:[7,{},{reflect:!0,type:Boolean}],dragDisabled:[7,{},{reflect:!0,type:Boolean}],dragHandle:[7,{},{reflect:!0,type:Boolean}],expanded:[7,{},{reflect:!0,type:Boolean}],filterHidden:[7,{},{reflect:!0,type:Boolean}],interactionMode:1,label:1,messageOverrides:[0,{},{attribute:!1}],metadata:[0,{},{attribute:!1}],displayMode:[3,{},{reflect:!0}],addToItems:[0,{},{attribute:!1}],moveToItems:[0,{},{attribute:!1}],open:[7,{},{reflect:!0,type:Boolean}],scale:[3,{},{reflect:!0}],selected:[7,{},{reflect:!0,type:Boolean}],selectionAppearance:[3,{},{reflect:!0}],selectionMode:[3,{},{reflect:!0}],setPosition:[9,{},{type:Number}],setSize:[9,{},{type:Number}],sortHandleOpen:[7,{},{reflect:!0,type:Boolean}],unavailable:[7,{},{reflect:!0,type:Boolean}],value:1,iconStart:[3,{},{reflect:!0}],iconEnd:[3,{},{reflect:!0}],iconFlipRtl:[3,{},{reflect:!0}]},uF.styles=[Tvt,i2e];let b5=uF;$i("calcite-list-item",b5);const kvt=Object.freeze(Object.defineProperty({__proto__:null,ListItem:b5},Symbol.toStringTag,{value:"Module"}));const pde="arcgis-search-result-renderer",fde={base:pde,moreResults:`${pde}__more-results`},Evt=St`.esri-widget__heading{color:var(--calcite-color-text-2);margin:0 0 .5rem;font-weight:var(--calcite-font-weight-semibold)}h1.esri-widget__heading{font-size:var(--calcite-font-size-xl)}h2.esri-widget__heading{font-size:var(--calcite-font-size-md)}h3.esri-widget__heading,h4.esri-widget__heading,h5.esri-widget__heading,h6.esri-widget__heading{font-size:var(--calcite-font-size)}.esri-widget{--esri-widget-padding-x: 15px;--esri-widget-padding-y: var(--calcite-spacing-md);--esri-widget-padding: var(--esri-widget-padding-y) var(--esri-widget-padding-x);box-sizing:border-box;color:var(--calcite-color-text-2);background-color:var(--calcite-color-foreground-1);font-size:var(--calcite-font-size);line-height:var(--calcite-font-line-height-relative-tight)}.esri-widget *,.esri-widget :before,.esri-widget :after{box-sizing:inherit}.esri-widget.esri-widget--disabled>*{opacity:.4;pointer-events:none}.esri-widget.esri-widget--compact{--esri-widget-padding-y: 0;--esri-widget-padding-x: 0}.esri-widget__anchor{color:var(--calcite-color-text-2)}.esri-widget__anchor:hover{color:var(--calcite-color-text-3)}.esri-widget__anchor:hover,.esri-widget__anchor:focus{text-decoration:underline}.esri-widget__anchor--disabled{opacity:.4;pointer-events:none}.esri-widget__header{background-color:var(--calcite-color-foreground-1);flex:1 0 100%;justify-content:space-between;align-items:center;width:100%;min-height:48px;padding:12px 0 12px 15px;display:flex}.esri-widget__header .esri-widget__heading{width:calc(100% - 48px);text-align:initial;color:var(--calcite-color-text-1);align-items:center;margin:0;padding:0;display:flex}.esri-widget__header-button{appearance:none;cursor:pointer;color:var(--calcite-color-text-2);background-color:var(--calcite-color-foreground-1);border:none;flex:0 0 48px;justify-content:center;align-self:stretch;align-items:center;width:48px;padding:0;display:flex}.esri-widget__footer{background-color:var(--calcite-color-foreground-1);justify-content:center;align-items:center;width:100%;min-height:48px;display:flex}.esri-widget__footer-pagination{color:var(--calcite-color-text-2);justify-content:space-between;align-items:center;display:flex}.esri-widget__footer-pagination-previous-button,.esri-widget__footer-pagination-next-button{cursor:pointer;background-color:var(--calcite-color-foreground-1);border:0;margin:0 7px;padding:12px 15px;transition:background-color .125s ease-in-out}.esri-widget__footer-pagination-previous-button:hover,.esri-widget__footer-pagination-previous-button:focus,.esri-widget__footer-pagination-next-button:hover,.esri-widget__footer-pagination-next-button:focus{color:var(--calcite-color-text-1);background-color:var(--calcite-color-foreground-1)}.esri-menu{visibility:hidden;z-index:1;background-clip:padding;background-color:var(--calcite-color-foreground-1);background-clip:padding-box;width:100%;max-height:0;margin:2px 0 0;padding:0;font-size:var(--calcite-font-size);line-height:var(--calcite-spacing-xl);position:absolute;top:100%;left:0;overflow:hidden;box-shadow:0 1px 2px #0000004d}.esri-menu .esri-menu__header{color:var(--calcite-color-text-inverse);background-color:var(--calcite-color-inverse);padding:6px 12px}.esri-menu__list{margin:0;padding:0;list-style:none}.esri-menu__list-item{cursor:pointer;border-top:1px solid #adadad4d;border-left:3px solid #0000;padding:.8em 1em}.esri-menu__list-item [class^=esri-icon-],.esri-menu__list-item [class*=" esri-icon-"]{padding-right:2.8px}.esri-menu__list-item:first-child{border-top:none}.esri-menu__list-item--focus,.esri-menu__list-item:hover,.esri-menu__list-item:focus{background-color:var(--calcite-color-foreground-1)}.esri-menu__list-item:active{background-color:var(--calcite-color-foreground-current)}.esri-menu__list-item--active,.esri-menu__list-item--active:hover,.esri-menu__list-item--active:focus{background-color:var(--calcite-color-foreground-1);border-left-color:var(--calcite-color-brand)}.esri-widget__table{border-collapse:collapse;color:var(--calcite-color-text-1);border:none;width:100%;line-height:var(--calcite-font-line-height-relative-tight)}.esri-widget__table tr:nth-child(odd){background-color:var(--calcite-color-transparent)}.esri-widget__table tr:nth-child(2n){background-color:var(--calcite-color-transparent-press)}.esri-widget__table tr a{color:var(--calcite-color-text-2)}.esri-widget__table tr a:hover,.esri-widget__table tr a:focus{color:var(--calcite-color-text-1)}.esri-widget__table tr td,.esri-widget__table tr th{vertical-align:top;word-break:break-word;padding:.5em .7em;font-size:var(--calcite-font-size-sm);font-weight:var(--calcite-font-weight-regular)}.esri-widget__table tr th{text-align:left;border-right:3px solid #0000000d;width:50%}.esri-widget__table tr td{width:50%}.esri-input{color:var(--calcite-color-text-1);background-color:var(--calcite-color-foreground-1);border:1px solid #959595;font-size:var(--calcite-font-size)}.esri-input::-ms-clear{display:none}.esri-input::placeholder{opacity:1;color:var(--calcite-color-text-2)}.esri-input:placeholder-shown{text-overflow:ellipsis}.esri-input[type=text],.esri-input[type=password],.esri-input[type=number]{height:32px;padding:0 .5em}calcite-combobox.esri-input{border:none}.esri-widget__content--empty{text-align:center;color:var(--calcite-color-border-input);flex-flow:column wrap;align-items:center;padding:18px 22px;display:flex}.esri-widget__content--empty h1.esri-widget__heading,.esri-widget__content--empty h2.esri-widget__heading,.esri-widget__content--empty h3.esri-widget__heading,.esri-widget__content--empty h4.esri-widget__heading,.esri-widget__content--empty h5.esri-widget__heading{font-weight:var(--calcite-font-weight-regular)}.esri-widget__content-illustration--empty{width:128px;padding:1rem 0}.esri-widget__content-icon--empty{width:32px;padding:.5rem 0}.esri-select{appearance:none;cursor:pointer;color:var(--calcite-color-text-2);background:var(--calcite-color-foreground-1) url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='-8 -8 32 32' width='32' height='32'%3E%3Cpath d='M8 11.207l-4-4V5.793l4 4 4-4v1.414z' fill='%23adadad' fillrule='nonzero'/%3E%3C/svg%3E") 100% no-repeat;border:1px solid #959595;border-radius:0;width:100%;height:32px;margin:0;padding:0 .5em;font-family:inherit;font-size:.85em;display:block}.esri-select[disabled]{cursor:auto}.esri-select::-ms-expand{display:none}.esri-disabled a,.esri-disabled [role=menu],.esri-disabled [role=checkbox],.esri-disabled [class^=esri-icon-],.esri-disabled [class*=" esri-icon-"]{color:var(--calcite-color-text-3)}.keynav-mode .esri-widget:focus,.keynav-mode .esri-widget :focus{z-index:1;outline-offset:2px;outline:2px solid #adadad}.esri-widget__loader-animation{border:.15em solid #adadad4d;border-top-color:var(--calcite-color-border-input);border-radius:100%;width:1em;height:1em;font-size:var(--calcite-font-size-md);animation:1.25s linear infinite esri-rotate;display:block;transform:translateZ(0)}:dir(rtl) .esri-widget__table th{text-align:right;border-left:3px solid #0000000d;border-right:none}:dir(rtl) .esri-select{background-position:0}:dir(rtl) .esri-menu__list-item{border-left:none;border-right:3px solid #0000}:dir(rtl) .esri-menu__list-item [class^=esri-icon-],:dir(rtl) .esri-menu__list-item [class*=" esri-icon-"]{padding-left:2px;padding-right:0}:dir(rtl) .esri-menu__list-item--active{border-right-color:var(--calcite-color-brand)}.esri-icon-font-fallback-text{clip:rect(0 0 0 0);width:1px;height:1px;position:absolute;overflow:hidden}.esri-rotating{animation:1.25s linear infinite esri-rotate;transform:translateZ(0)}.esri-clearfix:before,.esri-clearfix:after{content:" ";display:table}.esri-clearfix:after{clear:both}.esri-interactive{cursor:pointer}.esri-hidden{display:none!important}.esri-invisible{visibility:hidden!important}.esri-offscreen{position:absolute;top:-999em;left:-999em}.esri-match-height{flex-direction:column;flex:auto;display:flex;overflow:hidden}.arcgis-search-result-renderer calcite-block,.arcgis-search-result-renderer calcite-block[expanded]{margin-block:0;margin-block-start:var(--calcite-spacing-md);border:0}`;var Rw;let Cvt=(Rw=class extends Et{constructor(){super(...arguments),this._resultCount=0,this._showMoreResultsOpen=!1,this.autoDestroyDisabled=!1,this.arcgisReady=Re()}async destroy(){await this.manager.destroy()}loaded(){this.manager.onLifecycle(()=>[ze(()=>[this.viewModel?.results,this.viewModel?.resultCount],()=>{this._results=this.viewModel?.results,this._resultCount=this.viewModel?.resultCount??0,this._showMoreResultsOpen=!1},{initial:!0}),ze(()=>this.viewModel?.selectedResult,e=>this._selectedResult=e,{initial:!0})])}_selectResult(e){this._showMoreResultsOpen=!1,this.viewModel?.select(e)}_getSourceName(e,i){return i===-1?this.messages?.all??"":e.name}_toggleShowMoreResults(e){this._showMoreResultsOpen=e;const i=this.viewModel?.view?.popup;i&&"reposition"in i&&i.reposition()}render(){return J`<div class=${q(Ui(fde.base,zo.widget))}>${this._selectedResult?.name??""}${this._renderMoreResults()}</div>`}_renderMoreResults(){const{_resultCount:e,_results:i}=this;return!e||e<2||!i?null:J`<calcite-block class=${q(fde.moreResults)} collapsible .expanded=${this._showMoreResultsOpen} .heading=${Fp(this.messages?.showMoreResults??"",{count:e-1})} @calciteBlockClose=${()=>this._toggleShowMoreResults(!1)} @calciteBlockOpen=${()=>this._toggleShowMoreResults(!0)}>${i.map(r=>this._renderMoreResultsList(r,i?.length>1))}</calcite-block>`}_renderMoreResultsList(e,i){const{results:r}=e;if(!(r?.length??0)||!r)return null;const n=this._getSourceName(e.source,e.sourceIndex),s=r.filter(a=>a!==this._selectedResult).map(a=>this._renderListItem(a));return J`<calcite-list .label=${n}>${i?xt(`group-${e.sourceIndex}`,J`<calcite-list-item-group .heading=${n}>${s}</calcite-list-item-group>`):s}</calcite-list>`}_renderListItem(e){return xt(`result-${e.sourceIndex}-${e.key}`,J`<calcite-list-item .label=${e.name} @calciteListItemSelect=${()=>this._selectResult(e)}></calcite-list-item>`)}},Rw.properties={_results:16,_resultCount:16,_selectedResult:16,_showMoreResultsOpen:16,messages:0,autoDestroyDisabled:5,viewModel:0},Rw.styles=Evt,Rw);nn("arcgis-search-result-renderer",Cvt);const Ivt={textMatch:"text-match"};function mde({text:t,pattern:e}){if(!e||!t)return t;const i=t.split(e);return i.length>1&&(i[1]=J`<mark class=${q(Ivt.textMatch)}>${i[1]}</mark>`),i}const cy={container:"container",containerActive:"container--active",contentCenter:"content-center",description:"description",heading:"heading",iconEnd:"icon-end",iconStart:"icon-start",scale:t=>`scale--${t}`},gde={contentEnd:"content-end",contentStart:"content-start"},Mvt="autocomplete-item",Avt={host:t=>`${Mvt}-${t}`},Pvt=St`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}.scale--s{font-size:var(--calcite-font-size--2);line-height:1rem;--calcite-internal-autocomplete-item-spacing-unit-l: .5rem;--calcite-internal-autocomplete-item-spacing-unit-s: .25rem;--calcite-internal-autocomplete-item-description-font-size: var(--calcite-font-size-xs)}.scale--m{font-size:var(--calcite-font-size--1);line-height:1rem;--calcite-internal-autocomplete-item-spacing-unit-l: .75rem;--calcite-internal-autocomplete-item-spacing-unit-s: .375rem;--calcite-internal-autocomplete-item-description-font-size: var(--calcite-font-size-sm)}.scale--l{font-size:var(--calcite-font-size-0);line-height:1.25rem;--calcite-internal-autocomplete-item-spacing-unit-l: 1rem;--calcite-internal-autocomplete-item-spacing-unit-s: .625rem;--calcite-internal-autocomplete-item-description-font-size: var(--calcite-font-size)}:host{display:flex}.container{position:relative;box-sizing:border-box;display:flex;inline-size:100%;min-inline-size:100%;cursor:pointer;align-items:center;outline-color:transparent;background-color:var(--calcite-autocomplete-background-color, var(--calcite-color-foreground-1));color:var(--calcite-autocomplete-text-color, var(--calcite-color-text-3));gap:var(--calcite-internal-autocomplete-item-spacing-unit-l);padding-inline:var(--calcite-internal-autocomplete-item-spacing-unit-l);padding-block:var(--calcite-internal-autocomplete-item-spacing-unit-s);word-wrap:break-word;word-break:break-word;justify-content:space-around}.description{color:var(--calcite-autocomplete-description-text-color);font-size:var(--calcite-internal-autocomplete-item-description-font-size)}.heading{color:var(--calcite-autocomplete-heading-text-color, var(--calcite-color-text-1))}.heading,.description{line-height:var(--calcite-font-line-height-relative-snug)}:host(:hover:not([disabled])) .container{background-color:var(--calcite-autocomplete-background-color, var(--calcite-color-foreground-2))}:host(:hover:not([disabled])) .container .description{color:var(--calcite-autocomplete-description-text-color, var(--calcite-color-text-2))}.container--active{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(calc(-1 * var(--calcite-spacing-base)) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}.content-center{display:flex;flex-direction:column;flex-grow:1;padding-block:0}.text-match{background-color:transparent;color:inherit;font-weight:var(--calcite-font-weight-bold)}:host([hidden]){display:none}[hidden]{display:none}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}`,dF=class dF extends Et{constructor(){super(...arguments),this.active=!1,this.disabled=!1,this.guid=Avt.host(Vd()),this.scale="m",this.calciteAutocompleteItemSelect=Re({cancelable:!1})}emitSelectEvent(){this.calciteAutocompleteItemSelect.emit()}updated(){ta(this)}handleClick(e){e.preventDefault(),this.emitSelectEvent()}render(){const{active:e,description:i,heading:r,disabled:n,inputValueMatchPattern:s}=this;return ia({disabled:n,children:J`<div class=${q({[cy.container]:!0,[cy.containerActive]:e&&!n,[cy.scale(this.scale)]:!0})} @click=${this.handleClick}>${this.renderIcon("start")}<slot name=${gde.contentStart}></slot><div class=${q(cy.contentCenter)}><div class=${q(cy.heading)}>${mde({text:r,pattern:s})}</div><div class=${q(cy.description)}>${mde({text:i,pattern:s})}</div></div><slot name=${gde.contentEnd}></slot>${this.renderIcon("end")}</div>`})}renderIcon(e){const{iconFlipRtl:i}=this,r=e==="start"?this.iconStart:this.iconEnd;return r?J`<calcite-icon class=${q(e==="start"?cy.iconStart:cy.iconEnd)} .flipRtl=${i===e||i==="both"} .icon=${r} .scale=${Dr(this.scale)}></calcite-icon>`:null}};dF.properties={active:[5,{},{type:Boolean}],description:1,disabled:[7,{},{reflect:!0,type:Boolean}],guid:1,heading:1,iconEnd:[3,{},{reflect:!0}],iconFlipRtl:[3,{},{reflect:!0}],iconStart:[3,{},{reflect:!0}],inputValueMatchPattern:[2,{},{reflect:!0,attribute:!1}],label:1,scale:1,value:1},dF.styles=Pvt;let aW=dF;$i("calcite-autocomplete-item",aW);const Ovt=St`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{position:relative;display:block}.input-container{position:relative;display:flex;flex:1 1 auto;flex-wrap:nowrap}.input{width:100%;--calcite-input-prefix-size: var(--calcite-autocomplete-input-prefix-size);--calcite-input-suffix-size: var(--calcite-autocomplete-input-suffix-size);--calcite-input-background-color: var(--calcite-autocomplete-input-background-color);--calcite-input-border-color: var(--calcite-autocomplete-input-border-color);--calcite-input-corner-radius: var(--calcite-autocomplete-input-corner-radius);--calcite-input-shadow: var(--calcite-autocomplete-input-shadow);--calcite-input-icon-color: var(--calcite-autocomplete-input-icon-color);--calcite-input-text-color: var(--calcite-autocomplete-input-text-color);--calcite-input-placeholder-text-color: var(--calcite-autocomplete-input-placeholder-text-color);--calcite-input-actions-background-color: var(--calcite-autocomplete-input-actions-background-color);--calcite-input-actions-background-color-hover: var(--calcite-autocomplete-input-actions-background-color-hover);--calcite-input-actions-background-color-press: var(--calcite-autocomplete-input-actions-background-color-press);--calcite-input-actions-icon-color: var(--calcite-autocomplete-input-actions-icon-color);--calcite-input-actions-icon-color-hover: var(--calcite-autocomplete-input-actions-icon-color-hover);--calcite-input-actions-icon-color-press: var(--calcite-autocomplete-input-actions-icon-color-press);--calcite-input-loading-background-color: var(--calcite-autocomplete-input-loading-background-color);--calcite-input-loading-fill-color: var(--calcite-autocomplete-input-loading-fill-color);--calcite-input-prefix-background-color: var(--calcite-autocomplete-input-prefix-background-color);--calcite-input-prefix-text-color: var(--calcite-autocomplete-input-prefix-text-color);--calcite-input-suffix-background-color: var(--calcite-autocomplete-input-suffix-background-color);--calcite-input-suffix-text-color: var(--calcite-autocomplete-input-suffix-text-color)}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}.content-container{box-sizing:border-box;width:100%}.floating-ui-container{--calcite-floating-ui-z-index: var(--calcite-z-index-dropdown);inline-size:max-content;display:none;max-inline-size:100vw;max-block-size:100vh;inset-block-start:0;left:0;z-index:var(--calcite-floating-ui-z-index)}@starting-style{.floating-ui-container{opacity:0;inset-block-start:0;left:0}}.floating-ui-container .calcite-floating-ui-anim{position:relative;transition-duration:var(--calcite-floating-ui-transition);transition-property:inset-block-start,left,opacity,display;transition-behavior:allow-discrete;opacity:0;box-shadow:0 0 16px #00000029;z-index:var(--calcite-z-index);border-radius:.25rem}.floating-ui-container[data-placement^=bottom] .calcite-floating-ui-anim{inset-block-start:-5px}.floating-ui-container[data-placement^=top] .calcite-floating-ui-anim{inset-block-start:5px}.floating-ui-container[data-placement^=left] .calcite-floating-ui-anim{left:5px}.floating-ui-container[data-placement^=right] .calcite-floating-ui-anim{left:-5px}.floating-ui-container[data-placement] .calcite-floating-ui-anim--active{opacity:1;inset-block-start:0;left:0}@starting-style{.floating-ui-container[data-placement] .calcite-floating-ui-anim--active{opacity:0}}.content-container .calcite-floating-ui-anim{max-height:45vh;width:100%;overflow-y:auto;color:var(--calcite-autocomplete-text-color, var(--calcite-color-text-1));background-color:var(--calcite-autocomplete-background-color, var(--calcite-color-foreground-1));border-radius:var(--calcite-autocomplete-corner-radius, var(--calcite-corner-radius-round))}.content--hidden{display:none}@media (forced-colors: active){.floating-ui-container--active{border:1px solid canvasText}}.screen-readers-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border-width:0}.internal-label-alignment--center{align-items:center}.internal-label-alignment--end{align-items:end}.internal-label--container{display:flex;justify-content:space-between;color:var(--calcite-color-text-1)}.internal-label-required--indicator{font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-status-danger);padding-inline:var(--calcite-spacing-base)}.internal-label-required--indicator:hover{cursor:help}.internal-label--text{line-height:1}:host([scale=s]) .internal-label-spacing--bottom{margin-block-end:var(--calcite-spacing-xxs)}:host([scale=s]) .internal-label-spacing-inline--end{margin-inline-end:var(--calcite-spacing-sm)}:host([scale=s]) .internal-label-spacing-inline--start{margin-inline-start:var(--calcite-spacing-sm)}:host([scale=s]) .internal-label--text{font-size:var(--calcite-font-size--2)}:host([scale=m]) .internal-label-spacing--bottom{margin-block-end:var(--calcite-spacing-sm)}:host([scale=m]) .internal-label-spacing-inline--end{margin-inline-end:var(--calcite-spacing-sm)}:host([scale=m]) .internal-label-spacing-inline--start{margin-inline-start:var(--calcite-spacing-sm)}:host([scale=m]) .internal-label--text{font-size:var(--calcite-font-size--1)}:host([scale=l]) .internal-label-spacing--bottom{margin-block-end:var(--calcite-spacing-sm)}:host([scale=l]) .internal-label-spacing-inline--end{margin-inline-end:var(--calcite-spacing-md)}:host([scale=l]) .internal-label-spacing-inline--start{margin-inline-start:var(--calcite-spacing-md)}:host([scale=l]) .internal-label--text{font-size:var(--calcite-font-size-0)}.validation-container{display:flex;flex-direction:column;align-items:flex-start;align-self:stretch}:host([scale=m]) .validation-container,:host([scale=l]) .validation-container{padding-block-start:.5rem}:host([scale=s]) .validation-container{padding-block-start:.25rem}::slotted(input[slot=hidden-form-input]){margin:0!important;opacity:0!important;outline:none!important;padding:0!important;position:absolute!important;inset:0!important;transform:none!important;-webkit-appearance:none!important;z-index:-1!important}:host([hidden]){display:none}[hidden]{display:none}`,yde={contentBottom:"content-bottom",contentTop:"content-top"},Df={inputContainer:"input-container",input:"input",contentContainer:"content-container",contentAnimation:"content-animation",content:"content",contentHidden:"content--hidden",floatingUIContainer:"floating-ui-container",floatingUIContainerActive:"floating-ui-container--active",screenReadersOnly:"screen-readers-only"},vde="autocomplete",PU={validationMessage:"autocompleteValidationMessage",input:t=>`${vde}-input-${t}`,list:t=>`${vde}-list-${t}`},Lvt="calcite-autocomplete-item-group",Dvt="calcite-autocomplete-item",hF=class hF extends Et{constructor(){super(),this.guid=Vd(),this.attributeWatch=oZ(["autofocus","enterkeyhint","inputmode"],this.handleGlobalAttributesChanged),this.inputId=PU.input(this.guid),this.listId=PU.list(this.guid),this.messages=qn(),this.transitionProp="opacity",this.mutationObserver=ea("mutation",()=>this.getAllItemsDebounced()),this.focusSetter=pn()(this),this.resizeObserver=ea("resize",()=>{this.setFloatingElSize()}),this.cancelable=pj()(this),this.getAllItemsDebounced=xA(this.getAllItems,0),this.activeDescendant="",this.activeIndex=-1,this.hasContentBottom=!1,this.hasContentTop=!1,this.items=[],this.groups=[],this.alignment="start",this.disabled=!1,this.iconFlipRtl=!1,this.loading=!1,this.open=!1,this.overlayPositioning="absolute",this.placement=nM,this.readOnly=!1,this.required=!1,this.scale="m",this.status="idle",this.validity={valid:!1,badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valueMissing:!1},this.value="",this.calciteAutocompleteBeforeClose=Re({cancelable:!1}),this.calciteAutocompleteBeforeOpen=Re({cancelable:!1}),this.calciteAutocompleteChange=Re({cancelable:!1}),this.calciteAutocompleteClose=Re({cancelable:!1}),this.calciteAutocompleteOpen=Re({cancelable:!1}),this.calciteAutocompleteTextChange=Re({cancelable:!1}),this.calciteAutocompleteTextInput=Re({cancelable:!1}),this.listenOn(document,"click",this.documentClickHandler),this.listen("calciteAutocompleteItemSelect",this.handleAutocompleteItemSelect)}get isOpen(){return this.open&&(this.hasContentTop||this.hasContentBottom||this.items.length>0)}get enabledItems(){return this.items.filter(e=>!e.disabled)}async reposition(e=!1){const{floatingEl:i,referenceEl:r,placement:n,overlayPositioning:s,flipPlacements:a}=this;return RJ(this,{floatingEl:i,referenceEl:r,overlayPositioning:s,placement:n,flipPlacements:a,type:"menu"},e)}async scrollContentTo(e){this.transitionEl?.scrollTo(e)}async selectText(){return this.referenceEl.selectText()}async setFocus(e){return this.focusSetter(()=>this.referenceEl,e)}connectedCallback(){super.connectedCallback(),this.mutationObserver?.observe(this.el,{childList:!0,subtree:!0}),ZT(this),WX(this),this.defaultInputValue=this.inputValue||"",this.getAllItemsDebounced(),Dm(this),this.cancelable.add(this.getAllItemsDebounced)}async load(){this.getAllItemsDebounced()}willUpdate(e){e.has("disabled")&&(this.hasUpdated||this.disabled!==!1)&&this.handleDisabledChange(this.disabled),e.has("open")&&(this.hasUpdated||this.open!==!1)&&this.openHandler(),(e.has("flipPlacements")||e.has("overlayPositioning")&&(this.hasUpdated||this.overlayPositioning!=="absolute")||e.has("placement")&&(this.hasUpdated||this.placement!==nM))&&this.reposition(!0);let i=!1;e.has("inputValue")&&(this.hasUpdated||this.inputValue)&&(this.inputValueMatchPattern=this.inputValue&&new RegExp(`(${s2e(this.inputValue)})`,"i"),this.updateItems(),this.updateGroups(),i=!0),!i&&e.has("scale")&&(this.hasUpdated||this.scale!=="m")&&(this.updateItems(),this.updateGroups(),i=!0),!i&&e.has("activeIndex")&&(this.hasUpdated||this.activeIndex!==-1)&&this.updateItems()}updated(){ta(this)}loaded(){rst(this,this.value||""),this.defaultInputValue=this.inputValue||"",Dm(this)}disconnectedCallback(){super.disconnectedCallback(),this.mutationObserver?.disconnect(),this.resizeObserver?.disconnect(),XN(this),ZX(this),dj(this)}setFloatingElSize(){const{referenceEl:e,floatingEl:i}=this;!e||!i||(i.style.inlineSize=`${e.clientWidth}px`)}handleGlobalAttributesChanged(){this.requestUpdate()}handleDisabledChange(e){e||(this.open=!1)}openHandler(){if(__(this),this.open||(this.activeIndex=-1),this.disabled){this.open=!1;return}this.setFloatingElSize(),this.reposition(!0)}async documentClickHandler(e){this.disabled||e.composedPath().includes(this.el)||(this.open=!1)}async handleAutocompleteItemSelect(e){this.value=e.target.value,this.emitChange(),await this.setFocus(),this.open=!1}onLabelClick(){this.setFocus()}onFormReset(){this.inputValue=this.defaultInputValue}onBeforeOpen(){this.calciteAutocompleteBeforeOpen.emit()}onOpen(){this.calciteAutocompleteOpen.emit()}onBeforeClose(){this.calciteAutocompleteBeforeClose.emit()}onClose(){this.calciteAutocompleteClose.emit()}emitChange(){this.calciteAutocompleteChange.emit()}updateGroups(){this.groups.forEach((e,i,r)=>{e.scale=this.scale,i===0&&(e.disableSpacing=!0);const n=r[i+1];n&&(n.disableSpacing=e.children.length===0)})}updateItems(){let e=null;this.items.forEach(i=>{i.scale=this.scale,i.inputValueMatchPattern=this.inputValueMatchPattern}),this.enabledItems.forEach((i,r)=>{const n=r===this.activeIndex;n&&(e=i.guid),i.active=n}),this.activeDescendant=e}handleInputFocus(){this.open=!0}handleContentTopSlotChange(e){this.hasContentTop=ni(e)}handleContentBottomSlotChange(e){this.hasContentBottom=ni(e)}getAllItems(){const{el:e}=this;this.groups=Array.from(e.querySelectorAll(Lvt)),this.items=Array.from(e.querySelectorAll(Dvt)),this.updateItems(),this.updateGroups()}setReferenceEl(e){_I(this.resizeObserver,this.referenceEl,e),this.referenceEl=e,Dm(this)}keyDownHandler(e){const{defaultPrevented:i,key:r}=e;if(i)return;const{open:n,activeIndex:s,enabledItems:a}=this,o=a.length&&s>-1?a[s]:null;switch(r){case"Escape":n&&(this.open=!1,e.preventDefault());break;case"Tab":this.open=!1;break;case"Enter":n&&o?(this.value=o.value,o.emitSelectEvent(),this.open=!1,e.preventDefault()):e.defaultPrevented||YN(this)&&e.preventDefault();break;case"ArrowDown":a.length&&(this.open=!0,this.activeIndex=s!==-1?Math.min(s+1,a.length-1):0,this.scrollToActiveItem(),e.preventDefault());break;case"ArrowUp":a.length&&(this.open=!0,this.activeIndex=s!==-1?Math.max(s-1,0):a.length-1,this.scrollToActiveItem(),e.preventDefault());break;case"Home":a.length&&(this.open=!0,this.activeIndex=0,this.scrollToActiveItem(),e.preventDefault());break;case"End":a.length&&(this.open=!0,this.activeIndex=a.length-1,this.scrollToActiveItem(),e.preventDefault());break}}scrollToActiveItem(){this.enabledItems[this.activeIndex]?.scrollIntoView({block:"nearest"})}changeHandler(e){e.stopPropagation(),this.inputValue=e.target.value,this.calciteAutocompleteTextChange.emit()}inputClickHandler(e){e.defaultPrevented||(this.open=!0)}inputHandler(e){e.stopPropagation(),this.inputValue=e.target.value,this.open=this.inputValue?.length>0,this.calciteAutocompleteTextInput.emit()}setFloatingEl(e){this.floatingEl=e,Dm(this)}setTransitionEl(e){e&&(this.transitionEl=e)}render(){const{disabled:e,listId:i,inputId:r,isOpen:n}=this,s=this.el.autofocus,a=this.el.enterKeyHint,o=this.el.inputMode;return ia({disabled:e,children:J`${this.labelText&&hj({labelText:this.labelText,onClick:this.onLabelClick,required:this.required,tooltipText:this.messages.required})||""}<div class=${q(Df.inputContainer)}><calcite-input .alignment=${this.alignment} aria-activedescendant=${this.activeDescendant??Xe} aria-controls=${i??Xe} aria-label=${qI(this)??Xe} aria-owns=${i??Xe} aria-autocomplete=list .ariaExpanded=${n} aria-haspopup=listbox .autocomplete=${this.autocomplete} .autofocus=${s} class=${q(Df.input)} clearable .disabled=${e} enterkeyhint=${a??Xe} .form=${this.form} .icon=${this.icon??!0} .iconFlipRtl=${this.iconFlipRtl} id=${r??Xe} inputmode=${o??Xe} .label=${this.label} .loading=${this.loading} .maxLength=${this.maxLength} .messageOverrides=${this.messages} .minLength=${this.minLength} .name=${this.name} @click=${this.inputClickHandler} @keydown=${this.keyDownHandler} @calciteInputChange=${this.changeHandler} @calciteInputInput=${this.inputHandler} @calciteInternalInputFocus=${this.handleInputFocus} .pattern=${this.pattern} .placeholder=${this.placeholder} .prefixText=${this.prefixText} .readOnly=${this.readOnly} .required=${this.required} role=combobox .scale=${this.scale} .status=${this.status} .suffixText=${this.suffixText} type=search .value=${this.inputValue} ${zt(this.setReferenceEl)}></calcite-input>${this.renderListBox()}<div class=${q({[Df.contentContainer]:!0,[Df.floatingUIContainer]:!0,[Df.floatingUIContainerActive]:n})} ${zt(this.setFloatingEl)}><div class=${q({[Df.contentAnimation]:!0,[hT.animation]:!0,[hT.animationActive]:n})} ${zt(this.setTransitionEl)}><div class=${q({[Df.content]:!0,[Df.contentHidden]:!n})}><slot name=${yde.contentTop} @slotchange=${this.handleContentTopSlotChange}></slot><slot aria-hidden=true></slot><slot name=${yde.contentBottom} @slotchange=${this.handleContentBottomSlotChange}></slot></div></div></div></div>${XX({component:this})}${this.validationMessage&&this.status==="invalid"?NJ({icon:this.validationIcon,id:PU.validationMessage,message:this.validationMessage,scale:this.scale,status:this.status}):null}`})}renderListBox(){return J`<ul aria-labelledby=${this.inputId??Xe} aria-live=polite class=${q(Df.screenReadersOnly)} id=${this.listId??Xe} role=listbox tabindex=-1>${this.renderListBoxOptions()}</ul>`}renderListBoxOptions(){return KSe(this.items.filter(e=>!!(e.label||e.heading)),e=>e.guid,e=>J`<li .ariaDisabled=${e.disabled} .ariaLabel=${e.label} id=${e.guid??Xe} role=option tabindex=-1>${e.heading}${e.description}</li>`)}};hF.properties={activeDescendant:[16,{},{state:!0}],activeIndex:[16,{},{state:!0}],hasContentBottom:[16,{},{state:!0}],hasContentTop:[16,{},{state:!0}],items:[16,{},{state:!0}],groups:[16,{},{state:!0}],alignment:[3,{},{reflect:!0}],autocomplete:[0,{},{attribute:!1}],disabled:[7,{},{reflect:!0,type:Boolean}],flipPlacements:[0,{},{attribute:!1}],form:[3,{},{reflect:!0}],icon:[3,{converter:Np},{reflect:!0}],iconFlipRtl:[7,{},{reflect:!0,type:Boolean}],inputValue:1,label:1,labelText:1,loading:[7,{},{reflect:!0,type:Boolean}],maxLength:[11,{},{reflect:!0,type:Number}],messageOverrides:[0,{},{attribute:!1}],minLength:[11,{},{reflect:!0,type:Number}],name:[3,{},{reflect:!0}],open:[7,{},{reflect:!0,type:Boolean}],overlayPositioning:[3,{},{reflect:!0}],pattern:1,placeholder:1,placement:[3,{},{reflect:!0}],prefixText:1,readOnly:[7,{},{reflect:!0,type:Boolean}],required:[7,{},{reflect:!0,type:Boolean}],scale:[3,{},{reflect:!0}],status:[3,{},{reflect:!0}],suffixText:1,validationIcon:[3,{converter:Np},{reflect:!0}],validationMessage:1,validity:[0,{},{attribute:!1}],value:1},hF.styles=Ovt;let oW=hF;$i("calcite-autocomplete",oW);const NL={container:"container",containerNoSpacing:"container--no-spacing",heading:"heading",scale:t=>`scale--${t}`},Rvt=St`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}.scale--s{font-size:var(--calcite-font-size--2);line-height:1rem;--calcite-internal-autocomplete-item-group-spacing-unit: .5rem}.scale--m{font-size:var(--calcite-font-size--1);line-height:1rem;--calcite-internal-autocomplete-item-group-spacing-unit: .75rem}.scale--l{font-size:var(--calcite-font-size-0);line-height:1.25rem;--calcite-internal-autocomplete-item-group-spacing-unit: 1rem}:host{margin:0;display:flex;flex-direction:column}.container{display:flex;flex-direction:column;background-color:var(--calcite-autocomplete-background-color, var(--calcite-color-foreground-1));padding-block-start:var(--calcite-internal-autocomplete-item-group-spacing-unit)}.container--no-spacing{padding-block-start:0}.heading{border:0 solid;box-sizing:border-box;inline-size:100%;min-inline-size:0px;max-inline-size:100%;border-block-end-width:1px;font-weight:var(--calcite-font-weight-bold);word-wrap:break-word;word-break:break-word;color:var(--calcite-autocomplete-text-color, var(--calcite-color-text-2));border-block-end-color:var(--calcite-autocomplete-border-color, var(--calcite-color-border-3));padding-block:var(--calcite-internal-autocomplete-item-group-spacing-unit);padding-inline:var(--calcite-internal-autocomplete-item-group-spacing-unit)}:host([hidden]){display:none}[hidden]{display:none}`,pF=class pF extends Et{constructor(){super(...arguments),this.disableSpacing=!1,this.scale="m"}render(){const{scale:e}=this;return J`<div aria-label=${this.label??this.heading??De} class=${q({[NL.container]:!0,[NL.containerNoSpacing]:this.disableSpacing,[NL.scale(e)]:!0})} role=group><div class=${q(NL.heading)} role=presentation>${this.heading}</div><slot></slot></div>`}};pF.properties={disableSpacing:[5,{},{type:Boolean}],heading:1,label:1,scale:1},pF.styles=Rvt;let lW=pF;$i("calcite-autocomplete-item-group",lW);const jL={title:"title",message:"message",link:"link",actionsEnd:"actions-end"},V2={actionsEnd:"actions-end",close:"notice-close",container:"container",content:"notice-content",icon:"notice-icon"},zvt=St`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([scale=s]){--calcite-notice-spacing-token-small: .5rem;--calcite-notice-spacing-token-large: .75rem}:host([scale=s]) .container slot[name=title]::slotted(*),:host([scale=s]) .container *::slotted([slot=title]){margin-block:.125rem;font-size:var(--calcite-font-size--1);line-height:1.375}:host([scale=s]) .container slot[name=message]::slotted(*),:host([scale=s]) .container *::slotted([slot=message]){margin-block:.125rem;font-size:var(--calcite-font-size--2);line-height:1.375}:host([scale=s]) ::slotted(calcite-link){margin-block:.125rem;font-size:var(--calcite-font-size--2);line-height:1.375}:host([scale=s]) .notice-close{padding:.5rem}:host([scale=m]){--calcite-notice-spacing-token-small: .75rem;--calcite-notice-spacing-token-large: 1rem}:host([scale=m]) .container slot[name=title]::slotted(*),:host([scale=m]) .container *::slotted([slot=title]){margin-block:.125rem;font-size:var(--calcite-font-size-0);line-height:1.375}:host([scale=m]) .container slot[name=message]::slotted(*),:host([scale=m]) .container *::slotted([slot=message]){margin-block:.125rem;font-size:var(--calcite-font-size--1);line-height:1.375}:host([scale=m]) ::slotted(calcite-link){margin-block:.125rem;font-size:var(--calcite-font-size--1);line-height:1.375}:host([scale=l]){--calcite-notice-spacing-token-small: 1rem;--calcite-notice-spacing-token-large: 1.25rem}:host([scale=l]) .container slot[name=title]::slotted(*),:host([scale=l]) .container *::slotted([slot=title]){margin-block:.125rem;font-size:var(--calcite-font-size-1);line-height:1.375}:host([scale=l]) .container slot[name=message]::slotted(*),:host([scale=l]) .container *::slotted([slot=message]){margin-block:.125rem;font-size:var(--calcite-font-size-0);line-height:1.375}:host([scale=l]) ::slotted(calcite-link){margin-block:.125rem;font-size:var(--calcite-font-size-0);line-height:1.375}:host([width=auto]){--calcite-notice-width: auto}:host([width=half]){--calcite-notice-width: 50%}:host([width=full]){--calcite-notice-width: 100%}:host{margin-inline:auto;display:none;max-inline-size:100%;align-items:center;inline-size:var(--calcite-notice-width)}.container{pointer-events:none;margin-block:0px;box-sizing:border-box;display:flex;inline-size:100%;opacity:0;overflow:hidden;max-block-size:0;transition-property:opacity,max-block-size;transition-duration:var(--calcite-animation-timing);text-align:start;border-inline-start:var(--calcite-border-width-md) solid;box-shadow:0 0 0 0 transparent;background-color:var(--calcite-notice-background-color, var(--calcite-color-foreground-1))}.notice-close{outline-color:transparent}.notice-close:focus{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(calc(-1 * var(--calcite-spacing-base)) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}:host{display:flex}:host([open]) .container{pointer-events:auto;max-block-size:100%;align-items:center;opacity:1;--tw-shadow: 0 4px 8px -1px rgba(0, 0, 0, .08), 0 2px 4px -1px rgba(0, 0, 0, .04);--tw-shadow-colored: 0 4px 8px -1px var(--tw-shadow-color), 0 2px 4px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow);overflow:visible}.container slot[name=title]::slotted(*),.container *::slotted([slot=title]){margin:0;font-weight:var(--calcite-font-weight-medium);color:var(--calcite-notice-title-text-color, var(--calcite-color-text-1))}.container slot[name=message]::slotted(*),.container *::slotted([slot=message]){margin:0;display:inline;font-weight:var(--calcite-font-weight-normal);margin-inline-end:var(--calcite-notice-spacing-token-small);color:var(--calcite-notice-content-text-color, var(--calcite-color-text-2))}.notice-content{box-sizing:border-box;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;padding-inline:var(--calcite-notice-spacing-token-large);flex:0 0 auto;display:flex;min-inline-size:0px;flex-direction:column;overflow-wrap:break-word;flex:1 1 0;padding-block:var(--calcite-notice-spacing-token-small);padding-inline:0 var(--calcite-notice-spacing-token-small)}.notice-content:first-of-type:not(:only-child){padding-inline-start:var(--calcite-notice-spacing-token-large)}.notice-content:only-of-type{padding-block:var(--calcite-notice-spacing-token-small);padding-inline:var(--calcite-notice-spacing-token-large)}.notice-icon{display:flex;align-items:center;box-sizing:border-box;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;padding-block:var(--calcite-notice-spacing-token-small);padding-inline:var(--calcite-notice-spacing-token-large);flex:0 0 auto}.notice-close{display:flex;cursor:pointer;align-items:center;align-self:stretch;border-style:none;background-color:transparent;outline:2px solid transparent;outline-offset:2px;box-sizing:border-box;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;padding-block:var(--calcite-notice-spacing-token-small);padding-inline:var(--calcite-notice-spacing-token-large);flex:0 0 auto;-webkit-appearance:none;color:var(--calcite-notice-close-icon-color, var(--calcite-color-text-3))}.notice-close:hover,.notice-close:focus{background-color:var(--calcite-notice-close-background-color-focus, var(--calcite-color-foreground-2));color:var(--calcite-notice-close-icon-color-hover, var(--calcite-color-text-1))}.notice-close:active{background-color:var(--calcite-notice-close-background-color-press, var(--calcite-color-foreground-3))}.actions-end{display:flex;align-self:stretch}:host([kind=brand]) .container{border-color:var(--calcite-color-brand)}:host([kind=brand]) .container .notice-icon{color:var(--calcite-color-brand)}:host([kind=info]) .container{border-color:var(--calcite-color-status-info)}:host([kind=info]) .container .notice-icon{color:var(--calcite-color-status-info)}:host([kind=danger]) .container{border-color:var(--calcite-color-status-danger)}:host([kind=danger]) .container .notice-icon{color:var(--calcite-color-status-danger)}:host([kind=success]) .container{border-color:var(--calcite-color-status-success)}:host([kind=success]) .container .notice-icon{color:var(--calcite-color-status-success)}:host([kind=warning]) .container{border-color:var(--calcite-color-status-warning)}:host([kind=warning]) .container .notice-icon{color:var(--calcite-color-status-warning)}:host([hidden]){display:none}[hidden]{display:none}`,fF=class fF extends Et{constructor(){super(...arguments),this.closeButton=wr(),this.transitionProp="opacity",this.messages=qn(),this.focusSetter=pn()(this),this.hasActionEnd=!1,this.closable=!1,this.iconFlipRtl=!1,this.kind="brand",this.open=!1,this.scale="m",this.width="auto",this.calciteNoticeBeforeClose=Re({cancelable:!1}),this.calciteNoticeBeforeOpen=Re({cancelable:!1}),this.calciteNoticeClose=Re({cancelable:!1}),this.calciteNoticeOpen=Re({cancelable:!1})}async setFocus(e){return this.focusSetter(()=>this.el.querySelector("calcite-link")||this.closeButton.value,e)}async load(){this.requestedIcon=Kw(p9,this.icon,this.kind)}willUpdate(e){e.has("open")&&(this.hasUpdated||this.open!==!1)&&__(this),(e.has("icon")||e.has("kind")&&(this.hasUpdated||this.kind!=="brand"))&&(this.requestedIcon=Kw(p9,this.icon,this.kind))}onBeforeClose(){this.calciteNoticeBeforeClose.emit()}onBeforeOpen(){this.calciteNoticeBeforeOpen.emit()}onClose(){this.calciteNoticeClose.emit()}onOpen(){this.calciteNoticeOpen.emit()}setTransitionEl(e){e&&(this.transitionEl=e)}close(){this.open=!1}handleActionsEndSlotChange(e){this.hasActionEnd=ni(e)}render(){const e=J`<button .ariaLabel=${this.messages.close} class=${q(V2.close)} @click=${this.close} ${zt(this.closeButton)}><calcite-icon icon=x .scale=${Dr(this.scale)}></calcite-icon></button>`;return J`<div class=${q(V2.container)} ${zt(this.setTransitionEl)}>${this.requestedIcon?J`<div class=${q(V2.icon)}><calcite-icon .flipRtl=${this.iconFlipRtl} .icon=${this.requestedIcon} .scale=${Dr(this.scale)}></calcite-icon></div>`:null}<div class=${q(V2.content)}><slot name=${jL.title}></slot><slot name=${jL.message}></slot><slot name=${jL.link}></slot></div><div class=${q(V2.actionsEnd)} .hidden=${!this.hasActionEnd}><slot name=${jL.actionsEnd} @slotchange=${this.handleActionsEndSlotChange}></slot></div>${this.closable?e:null}</div>`}};fF.properties={hasActionEnd:[16,{},{state:!0}],closable:[7,{},{reflect:!0,type:Boolean}],icon:[3,{converter:Np},{reflect:!0}],iconFlipRtl:[7,{},{reflect:!0,type:Boolean}],kind:[3,{},{reflect:!0}],messageOverrides:[0,{},{attribute:!1}],open:[7,{},{reflect:!0,type:Boolean}],scale:[3,{},{reflect:!0}],width:[3,{},{reflect:!0}]},fF.styles=zvt;let w5=fF;$i("calcite-notice",w5);const HJ=Object.freeze(Object.defineProperty({__proto__:null,Notice:w5},Symbol.toStringTag,{value:"Module"}));function bde(t){switch(t?.type){case"point":return t;case"extent":return t.center;case"polygon":{const e=Uve(t);return e?gt.fromJSON(e):null}case"multipoint":case"polyline":return t.extent?.center;default:return null}}async function Fvt(t,e){if(t.hasZ||e.type==="2d")return t;const i=e.map?.ground;return i?.layers.length?(await i.queryElevation(t,{cache:e.basemapTerrain?.elevationQueryCache})).geometry:t}function cW(t,e,i){return $2e(t.center,e,i)}function GJ(t,e,i){switch(t?.type){case"extent":return t;case"multipoint":case"polygon":case"polyline":return t.extent;case"point":return $2e(t,e,i);default:return null}}function $2e(t,e,i){const r=t.hasZ?t.z:void 0;if(e?.map)return(i!=null?lKe(e,i):e.extent).clone().centerAt(t).set({zmax:r,zmin:r});const{x:n,y:s,spatialReference:a}=t;return new Wt({xmin:n-.25,ymin:s-.25,xmax:n+.25,ymax:s+.25,spatialReference:a,zmin:r,zmax:r})}function Nvt(t){return t&&typeof t.highlight=="function"}function jvt(t,e,i){return t==null||t>=i&&(e===0||t<=e)}function fFt(t,e){if(e&&t){const{minScale:i,maxScale:r}=t;if(Vvt(i,r))return jvt(e,i,r)}return!0}function Vvt(t,e){return t!=null&&t>0||e!=null&&e>0}function mFt(t){return!t?.minScale||!t.maxScale||t.minScale>=t.maxScale}const gFt=()=>!ve("disable-feature:layer-based-scale-visibility");let Jn=class extends sg(_e){constructor(e){super(e),this.autoNavigate=null,this.filter=null,this.getResults=null,this.getSuggestions=null,this.maxResults=null,this.maxSuggestions=null,this.minSuggestCharacters=null,this.outFields=null,this.placeholder="",this.popupEnabled=null,this.popupTemplate=null,this.prefix="",this.resultGraphicEnabled=null,this.resultSymbol=null,this.suffix="",this.suggestionsEnabled=null,this.withinViewEnabled=!1,this.zoomScale=null}};d([m()],Jn.prototype,"autoNavigate",void 0),d([m()],Jn.prototype,"filter",void 0),d([m()],Jn.prototype,"getResults",void 0),d([m()],Jn.prototype,"getSuggestions",void 0),d([m()],Jn.prototype,"maxResults",void 0),d([m()],Jn.prototype,"maxSuggestions",void 0),d([m()],Jn.prototype,"minSuggestCharacters",void 0),d([m()],Jn.prototype,"outFields",void 0),d([m()],Jn.prototype,"placeholder",void 0),d([m()],Jn.prototype,"popupEnabled",void 0),d([m({type:Bp})],Jn.prototype,"popupTemplate",void 0),d([m()],Jn.prototype,"prefix",void 0),d([m()],Jn.prototype,"resultGraphicEnabled",void 0),d([m()],Jn.prototype,"resultSymbol",void 0),d([m()],Jn.prototype,"suffix",void 0),d([m()],Jn.prototype,"suggestionsEnabled",void 0),d([m()],Jn.prototype,"withinViewEnabled",void 0),d([m()],Jn.prototype,"zoomScale",void 0),Jn=d([U("esri.widgets.Search.SearchSource")],Jn);const qJ=Jn,Bvt=/https?:\/\/services.*\.arcgis\.com/i,Uvt=/(?:\{([^}]+)\})/g,r$=()=>$e.getLogger("esri.widgets.Search.support.layerSearchUtils");function Hvt(t,e){const{exactMatch:i=!1,location:r,maxResults:n,spatialReference:s,source:a,sourceIndex:o,suggestResult:l,view:c}=t,{layer:h,filter:f,zoomScale:g}=a,y=c?.scale,b=T2e(a,c),_=e?.signal;return E2e(h).then(()=>{const S=h.popupTemplate;return S?S.getRequiredFields(h.fieldsIndex):null}).then(S=>{const{objectIdField:$,returnZ:C}=h,I=O2e(a);if(!WJ(h,I))throw r$().error("invalid-field: displayField is invalid."),new ee("getResults():invalid-field","displayField is invalid.");const P=S?.length?S:[I],O=a.outFields||P,N=k2e(O);if(O.includes($)||N||O.push($),h.floorInfo?.floorField&&O.push(h.floorInfo.floorField),!(N||_5(h,O)))throw r$().error("invalid-field: outField is invalid."),new ee("getResults():invalid-field","outField is invalid.");const R=h.createQuery(),{orderByFields:G}=a;if(G&&(R.orderByFields=G),s){R.outSpatialReference=s;const ae=1/kl(s);ae&&(R.maxAllowableOffset=ae)}const Y=h.geometryType==="mesh"||h.geometryType==="multipatch",Q=h.capabilities?.data?.supportsZ&&!Y;if(R.returnZ=Q&&C!==!1,R.returnGeometry=!0,R.multipatchOption=Y?"xyFootprint":null,O&&(R.outFields=O),r)R.geometry=r;else if(l.key)R.objectIds=[l.key];else{const ae=a.searchFields||[I];if(!_5(h,ae))throw r$().error("invalid-field: search field is invalid."),new ee("getResults():invalid-field","search field is invalid.");if(P2e(h)&&(R.num=n),b&&(R.geometry=b),!l.text?.trim())return[];const ne=l.text,{prefix:K="",suffix:le=""}=a,re=L2e(`${K}${ne}${le}`);A2e(h)&&I2e(h,ae)&&!i&&ne&&(R.fullText=M2e({text:ne,searchFields:ae}));const he=D2e({searchTerm:re,layer:h,searchFields:ae,filter:f,exactMatch:i,query:R,type:"search"});if(R.where=he,!C2e(R))return[]}return h.queryFeatures(R,{signal:_}).then(ae=>rbt(ae,c,a,o,I,y,g))})}function Gvt(t,e){const{source:i,spatialReference:r,view:n,suggestTerm:s,maxSuggestions:a,sourceIndex:o,exactMatch:l}=t,{layer:c,filter:h}=i,f=e?.signal,g=T2e(i,n);return E2e(c).then(()=>{if(!P2e(c))return[];const y=O2e(i),b=i.searchFields||[y],_=[];i.suggestionTemplate?i.suggestionTemplate.replaceAll(Uvt,(Q,ae)=>(_.push(ae),Q)):_.push(y);const S=k2e(_);_.includes(c.objectIdField)||S||_.push(c.objectIdField);const $=WJ(c,y),C=S||_5(c,_),I=_5(c,b);if(!$)throw r$().error("invalid-field: displayField is invalid."),new ee("getSuggestions():invalid-field","displayField is invalid.");if(!C)throw r$().error("invalid-field: outField is invalid."),new ee("getSuggestions():invalid-field","outField is invalid.");if(!I)throw r$().error("invalid-field: search field is invalid."),new ee("getSuggestions():invalid-field","search field is invalid.");const P=c.createQuery(),{orderByFields:O}=i;if(O&&(P.orderByFields=O),P.outSpatialReference=r,P.returnGeometry=!1,P.num=a,P.outFields=_,g&&(P.geometry=g),!s.trim())return[];const{prefix:N="",suffix:R=""}=i,G=L2e(`${N}${s}${R}`);A2e(c)&&I2e(c,b)&&!l&&s&&(P.fullText=M2e({text:s,searchFields:b}));const Y=D2e({searchTerm:G,layer:c,searchFields:b,filter:h,exactMatch:l,query:P,type:"suggest"});return P.where=Y,C2e(P)?c.queryFeatures(P,{signal:f}).then(Q=>ebt(Q,i,o,y)):[]})}function T2e(t,e){const{filter:i,withinViewEnabled:r}=t,n=e?.extent;return i?.geometry??(r&&n?n:void 0)}function k2e(t){return t&&t.includes("*")}async function E2e(t){t&&await t.load()}function C2e(t){return!(!t.fullText&&!t.where)}function I2e(t,e){const i=t?.indexes;return!i||!e?.length?!1:i.filter(r=>r.indexType==="FullText").some(r=>{const n=r.fields?.split(",").map(s=>s.trim().toLowerCase())||[];return e.every(s=>n.includes(s.toLowerCase()))})}function M2e({text:t,searchFields:e}){return t.trim().split(" ").filter(i=>!!i.trim()).map(i=>new Dwe({onFields:e,searchTerm:i,searchType:"prefix"}))}function A2e(t){return t?.capabilities?.query?.supportsFullTextSearch??!1}function P2e(t){return t?.capabilities?.query?.supportsPagination??!1}function qvt(t){return t?.fieldsIndex?.fields?.find(e=>e.type==="string")?.name??""}function O2e(t){return t.displayField||t.layer.displayField||qvt(t.layer)}function _5(t,e){return!(!t||!e?.length)&&e.every(i=>WJ(t,i))}function WJ(t,e){return!!t.getField(e)}function Wvt(t){for(let e=0;e<t.length;e++)if(t.charCodeAt(e)>255)return!0;return!1}function Yvt({codedValues:t},e,i){return iR(t??[],r=>{const n=r.name,s=i?n:n.toLowerCase();return(i?e:e.toLowerCase())===s?r.code.toString():null})??null}function L2e(t){return t.replaceAll("'","''")}function B2(t,e){const i=e?.where;return i?`(${t}) AND (${i})`:t}function Zvt({currentTerm:t,field:e,filter:i,exactMatch:r,url:n,type:s}){const a=e?.type,o=e?.name;if(a==="string"||a==="date"||a==="global-id"){const l=Bvt.test(n??""),c=l&&Wvt(t)?"N":"";return B2(r&&s==="search"?`${o} = ${c}'${t}'`:l?`${o} LIKE ${c}${`'${t}%'`}`:`${`LOWER(${o})`} LIKE ${c}${`'${t.toLowerCase()}%'`}`,i)}if(a==="oid"||a==="small-integer"||a==="integer"||a==="single"||a==="double"){const l=Number(t);return isNaN(l)?null:B2(`${o} = ${l}`,i)}return B2(`${o} = ${t}`,i)}function Xvt(t,e){return t?` OR (${e})`:`(${e})`}function D2e({searchTerm:t,layer:e,searchFields:i,filter:r,exactMatch:n,query:s,type:a}){const{definitionExpression:o,url:l}=e;let c="";return!s.fullText&&t&&i&&i.forEach(h=>{const f=e.getField(h),g=e.getFieldDomain?.(h,{excludeImpliedDomains:ve("esri-widget-legacy-field-domain-calculation")}),y=(g&&g.type==="coded-value"?Yvt(g,t,n):null)||t||null;if(y!==null){const b=Zvt({currentTerm:y,field:f,filter:r,exactMatch:n,url:l,type:a});b&&(c+=Xvt(c,b))}}),o&&c?`(${o}) AND (${c})`:o||c}function Jvt(t,e){let i=null;const{codedValues:r}=t;return r&&r.length&&r.some(n=>n.code===e&&(i=n.name,!0)),i}function Kvt(t,e){return t[e]??t[Object.keys(t).find(i=>i.toLowerCase()===e.toLowerCase())]}function R2e(t,e,i){const r=t.sourceLayer,{attributes:n}=t,s=r.getFieldDomain?.(i,{feature:t,excludeImpliedDomains:ve("esri-widget-legacy-field-domain-calculation")});if(e)return Fp(e,n);if(i&&n){const a=r.getField(i),o=Kvt(n,i);return o==null?"":s&&s.type==="coded-value"?Jvt(s,o)??"":a?.type==="date"?vu(new Date(o)):typeof o=="number"?o.toString():typeof o!="string"?"":o.trim()}return""}function Qvt(t,e,i,r){const n=t.sourceLayer,{attributes:s}=t,{objectIdField:a}=n,o=a?s[a]:null;return{text:R2e(t,e.suggestionTemplate,r),key:o,sourceIndex:i}}function ebt(t,e,i,r){return t.features.map(n=>Qvt(n,e,i,r))}function tbt(t){return t!=null&&t.minScale!=null&&t.maxScale!=null}function ibt(t,e,i,r,n,s,a){const o=t.clone();o.layer=t.layer;const l=t.sourceLayer,c=l?.objectIdField,h=c?t.attributes[c]:null,f=R2e(t,i.searchTemplate,n);s!=null&&tbt(l)&&(l.minScale&&l.minScale<s?s=l.minScale:l.maxScale&&l.maxScale>s&&(s=l.maxScale));const g=o.geometry?GJ(o.geometry,e??void 0,s??void 0):void 0,y=typeof a=="number"&&g?cW(de(g),e??void 0,a):g,b=t.clone();return b.layer=t.layer,y!=null&&(b.geometry=br.fromExtent(y)),{extent:y,target:b,feature:o,key:h,name:f,sourceIndex:r}}function rbt(t,e,i,r,n,s,a){return t.features.map(o=>ibt(o,e,i,r,n,s,a))}var uW;let pd=uW=class extends qJ{constructor(t){super(t),this.displayField=null,this.exactMatch=null,this.orderByFields=null,this.searchFields=null,this.searchTemplate=null,this.suggestionTemplate=null,this.getResults=(e,i)=>Hvt({source:this,...e},i),this.getSuggestions=(e,i)=>Gvt({source:this,...e},i)}set layer(t){this._set("layer",t),t&&t.load().catch(()=>{})}get name(){return this._getLayerTitle()??""}set name(t){this._overrideIfSome("name",t)}clone(){return new uW({autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?de(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,displayField:this.displayField,exactMatch:this.exactMatch,layer:this.layer,searchFields:this.searchFields?de(this.searchFields):null,suggestionTemplate:this.suggestionTemplate,zoomScale:this.zoomScale})}_getFirstStringField(){return this.layer.fieldsIndex?.fields.find(t=>t.type==="string")?.name??""}_getDisplayField(){return this.displayField||this.layer.displayField||this._getFirstStringField()}_getSearchFieldsString(){const{layer:t,searchFields:e}=this;if(!t.loaded)return"";const i=e||[this._getDisplayField()],r=MZ(t);return`: ${i.map(n=>{const s=t.getField(n);return(r?t.getFieldAlias(n):s?.alias)||n}).join(", ")}`}_getLayerTitle(){const{layer:t}=this;if(!t)return;const{title:e}=t;return e?`${e}${this._getSearchFieldsString()}`:void 0}};d([m({json:{read:{source:"field.name"},write:{target:"field.name"}}})],pd.prototype,"displayField",void 0),d([m({json:{read:{source:"field.exactMatch"},write:{target:"field.exactMatch"}}})],pd.prototype,"exactMatch",void 0),d([m({value:null})],pd.prototype,"layer",null),d([m()],pd.prototype,"name",null),d([m({type:[String],json:{write:!0}})],pd.prototype,"orderByFields",void 0),d([m()],pd.prototype,"searchFields",void 0),d([m()],pd.prototype,"searchTemplate",void 0),d([m()],pd.prototype,"suggestionTemplate",void 0),pd=uW=d([U("esri.widgets.Search.LayerSearchSource")],pd);const dS=pd;function nbt(t){return!!t&&typeof t.x=="number"&&typeof t.y=="number"}function sbt(t){return t&&typeof t.xmin=="number"&&typeof t.ymin=="number"&&typeof t.xmax=="number"&&typeof t.ymax=="number"}let My=class extends _e{constructor(e){super(e),this.address=null,this.attributes=null,this.extent=null,this.location=null,this.score=null}};d([m({type:String,json:{write:!0}})],My.prototype,"address",void 0),d([m({type:Object,json:{write:!0}})],My.prototype,"attributes",void 0),d([m({type:Wt,json:{write:!0}})],My.prototype,"extent",void 0),d([m({type:gt,json:{write:!0}})],My.prototype,"location",void 0),d([m({type:Number,json:{write:!0}})],My.prototype,"score",void 0),My=d([U("esri.rest.support.AddressCandidate")],My);const z2e=My,YJ={type:String,json:{read:{source:"token"},write:{target:"token"}}};let ya=class extends _e{constructor(e){super(e),this.address=null,this.apiKey=null,this.categories=null,this.countryCode=null,this.forStorage=null,this.location=null,this.locationType=null,this.magicKey=null,this.maxLocations=null,this.outFields=null,this.outSpatialReference=null,this.searchExtent=null}};d([m({type:Object,json:{write:!0}})],ya.prototype,"address",void 0),d([m(YJ)],ya.prototype,"apiKey",void 0),d([m({type:[String],json:{read:{source:"category",reader:t=>t?t.split(","):null},write:{target:"category",writer:(t,e)=>{e.category=t?t.join(","):null}}}})],ya.prototype,"categories",void 0),d([m({type:String,json:{write:!0}})],ya.prototype,"countryCode",void 0),d([m({type:Boolean,json:{write:!0}})],ya.prototype,"forStorage",void 0),d([m({type:gt,json:{write:{writer:(t,e)=>{e.location=t?t.clone().normalize():null}}}})],ya.prototype,"location",void 0),d([m({type:["rooftop","street"],json:{write:!0}})],ya.prototype,"locationType",void 0),d([m({type:String,json:{write:!0}})],ya.prototype,"magicKey",void 0),d([m({type:Number,json:{write:!0}})],ya.prototype,"maxLocations",void 0),d([m({type:[String],json:{write:{writer:(t,e)=>{e.outFields=t?t.join(","):null}}}})],ya.prototype,"outFields",void 0),d([m({type:at,json:{read:{source:"outSR"},write:{target:"outSR"}}})],ya.prototype,"outSpatialReference",void 0),d([m({type:Wt,json:{write:{writer:(t,e)=>{const i=t?t.shiftCentralMeridian():null;e.searchExtent=i}}}})],ya.prototype,"searchExtent",void 0),ya=d([U("esri.rest.support.AddressToLocationsParameters")],ya),ya.from=dn(ya);const F2e=ya;async function abt(t,e,i){e=F2e.from(e);const r=cA(t),{address:n,...s}=e.toJSON(),a={...n,...s,f:"json"},o=rX({...r.query,...a}),l=iX(o,i),c=`${r.path}/findAddressCandidates`;return Nt(c,l).then(obt)}function obt({data:t}){if(!t)return[];const{candidates:e,spatialReference:i}=t;return e?e.map(r=>{if(!r)return;const{extent:n,location:s}=r,a=!n||sbt(n);return nbt(s)&&a?(n&&(n.spatialReference=i),s&&(s.spatialReference=i),z2e.fromJSON(r)):void 0}):[]}const lbt=Gn()({DistanceMarker:"distance-marker",Locality:"locality",POI:"poi",PointAddress:"point-address",Postal:"postal",StreetAddress:"street-address",StreetInt:"street-intersection",StreetName:"street-name",Subaddress:"sub-address"}),cbt=Gn()({localCity:"local-city",postalCity:"postal-city"});var dW;let To=dW=class extends _e{constructor(t){super(t),this.apiKey=null,this.featureTypes=null,this.forStorage=null,this.language=null,this.location=null,this.locationType=null,this.outFields=null,this.outSpatialReference=null,this.preferredLabelValues=null,this.returnInputLocation=null}writeFeatureTypes(t,e){t?.length&&(e.featureTypes=t.map(i=>lbt.toJSON(i)))}writeLocation(t,e){e.location=t?.clone().normalize().toJSON()}static from(t){return TT(dW,t)}};d([m(YJ)],To.prototype,"apiKey",void 0),d([m({type:[["distance-marker","locality","poi","point-address","postal","street-address","street-intersection","street-name","sub-address"]],json:{write:!0}})],To.prototype,"featureTypes",void 0),d([qe("featureTypes")],To.prototype,"writeFeatureTypes",null),d([m({type:Boolean,json:{write:!0}})],To.prototype,"forStorage",void 0),d([m({type:String,json:{name:"langCode",write:!0}})],To.prototype,"language",void 0),d([m({type:gt,json:{write:!0}})],To.prototype,"location",void 0),d([qe("location")],To.prototype,"writeLocation",null),d([m({type:["street","rooftop"],json:{write:!0}})],To.prototype,"locationType",void 0),d([m({type:[String],json:{write:!0}})],To.prototype,"outFields",void 0),d([m({type:at,json:{name:"outSR",write:!0}})],To.prototype,"outSpatialReference",void 0),d([pt(cbt)],To.prototype,"preferredLabelValues",void 0),d([m({type:Boolean,json:{write:!0}})],To.prototype,"returnInputLocation",void 0),To=dW=d([U("esri.rest.support.LocationToAddressParameters")],To);const N2e=To;async function ubt(t,e,i){const r=cA(t),{path:n,query:s}=r,a=N2e.from(e);if(!a.location)throw new ee("location-to-address:location-required","The location parameter is required");const o={...i,query:{...s,...dbt(a),f:"json"}},l=`${n}/reverseGeocode`,{data:c}=await Nt(l,o),{address:h,location:f}=c;return z2e.fromJSON({address:h?.Match_addr??"",attributes:h,location:f,score:100})}function dbt(t){const e=t.toJSON(),{featureTypes:i,forStorage:r,langCode:n,location:s,locationType:a,outFields:o,outSR:l,preferredLabelValues:c,returnInputLocation:h,token:f}=e;return{featureTypes:i?.join(","),forStorage:r,langCode:n,location:JSON.stringify(s),locationType:a,outFields:o?.join(","),outSR:l?.wkid??void 0,preferredLabelValues:c,returnInputLocation:h,token:f}}let hS=class extends _e{constructor(e){super(e),this.isCollection=null,this.magicKey=null,this.text=null}};d([m({type:Boolean,json:{write:!0}})],hS.prototype,"isCollection",void 0),d([m({type:String,json:{write:!0}})],hS.prototype,"magicKey",void 0),d([m({type:String,json:{write:!0}})],hS.prototype,"text",void 0),hS=d([U("esri.rest.support.SuggestionCandidate")],hS);const hbt=hS;let oc=class extends _e{constructor(e){super(e),this.apiKey=null,this.categories=null,this.countryCode=null,this.location=null,this.maxSuggestions=null,this.outSpatialReference=null,this.searchExtent=null,this.text=null}};d([m(YJ)],oc.prototype,"apiKey",void 0),d([m({type:[String],json:{read:{source:"category",reader:t=>t?t.split(","):null},write:{target:"category",writer:(t,e)=>{e.category=t?t.join(","):null}}}})],oc.prototype,"categories",void 0),d([m({type:String,json:{write:!0}})],oc.prototype,"countryCode",void 0),d([m({type:gt,json:{write:{writer:(t,e)=>{e.location=t?t.clone().normalize():null}}}})],oc.prototype,"location",void 0),d([m({type:Number,json:{write:!0}})],oc.prototype,"maxSuggestions",void 0),d([m({type:at,json:{read:{source:"outSR"},write:{target:"outSR"}}})],oc.prototype,"outSpatialReference",void 0),d([m({type:Wt,json:{write:{writer:(t,e)=>{const i=t?t.shiftCentralMeridian():null;e.searchExtent=JSON.stringify(i)}}}})],oc.prototype,"searchExtent",void 0),d([m({type:String,json:{write:!0}})],oc.prototype,"text",void 0),oc=d([U("esri.rest.support.SuggestLocationsParameters")],oc),oc.from=dn(oc);const j2e=oc;async function pbt(t,e,i){const r=cA(t),n={...(e=j2e.from(e)).toJSON(),f:"json"},s=rX({...r.query,...n}),a=iX(s,i),o=`${r.path}/suggest`;return Nt(o,a).then(fbt)}function fbt(t){const{data:e}=t;if(!e)return[];const{suggestions:i}=e;return i?i.map(r=>new hbt(r)):[]}const mbt="Single Line Input",gbt=3e5;function ybt(t,e){return t.location?xbt(t,e):Sbt(t,e)}function V2e(t,e){if(e.localSearchDisabled)return null;const i=t?.scale;return typeof i=="number"&&i<=gbt?t?.extent?.center:null}async function vbt(t,e){const{source:i,spatialReference:r,view:n,suggestTerm:s,maxSuggestions:a,sourceIndex:o}=t,l=new j2e,{apiKey:c,url:h}=i,f=B2e(i,n),g=e?.signal;if(!h)return null;c&&(l.apiKey=c),i.categories&&(l.categories=i.categories),r&&(l.outSpatialReference=r);const y=V2e(n,i);if(y&&(l.location=y),!s.trim())return null;const{prefix:b="",suffix:_=""}=i,S=`${b}${s}${_}`;return l.text=S,f&&(l.searchExtent=f),l.maxSuggestions=a,i.countryCode&&(l.countryCode=i.countryCode),pbt(h,l,{signal:g}).then($=>Tbt($,o))}function bbt(t){return!!t&&/(?:geocode-api\.arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/i.test(t)}function wbt(t){return!!t&&/(?:\/servers\/[\da-z.-]+\/rest\/services\/world\/geocodeserver).*/i.test(t)}function wde(t){return!!t&&/(?:arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/i.test(t)}const _bt="https://geocode-api.arcgis.com/arcgis/rest/services/World/GeocodeServer";async function xbt(t,e){const{location:i,source:r,sourceIndex:n,spatialReference:s,view:a}=t,{apiKey:o,defaultZoomScale:l,language:c,url:h,zoomScale:f}=r;if(h==null)return[];const g=a?.scale,y=e?.signal,b=new N2e({language:c,location:i,apiKey:o,outSpatialReference:s});try{return U2e([await ubt(h,b,{signal:y})],{defaultZoomScale:l,scale:g,sourceIndex:n,view:a,zoomScale:f})}catch{return[]}}function B2e(t,e){const{filter:i,withinViewEnabled:r}=t,n=e?.scale,s=e?.extent,a=i?.geometry;return(a?GJ(a,e??void 0,n):void 0)||(r&&s?s:void 0)}async function Sbt(t,e){const{source:i,suggestResult:r,spatialReference:n,view:s,maxResults:a,sourceIndex:o}=t,l=i?.zoomScale,c=i?.defaultZoomScale;if(!r.text?.trim())return null;const f=!r.key&&i.prefix?i.prefix:"",g=!r.key&&i.suffix?i.suffix:"",y=`${f}${r.text}${g}`,b=new F2e,{apiKey:_,url:S}=i,$=s?.scale,C=B2e(i,s),I=e?.signal;if(_&&(b.apiKey=_),!S)return null;i.categories&&(b.categories=i.categories),i.locationType&&(b.locationType=i.locationType),n&&(b.outSpatialReference=n);const P=V2e(s,i);P&&(b.location=P),b.maxLocations=a,C&&(b.searchExtent=C),i.countryCode&&(b.countryCode=i.countryCode);const{key:O}=r,N=`${O}`;return O&&(b.magicKey=N),b.address={},b.address[i.singleLineFieldName||mbt]=y,i.outFields&&(b.outFields=i.outFields),abt(S,b,{signal:I}).then(R=>U2e(R,{key:N,scale:$,sourceIndex:o,view:s,zoomScale:l,defaultZoomScale:c}))}function $bt(t,e){return{text:t.text,key:t.magicKey,sourceIndex:e}}function Tbt(t,e){return t.map(i=>$bt(i,e))}function kbt(t,e){const{key:i,scale:r,sourceIndex:n,view:s,zoomScale:a,defaultZoomScale:o}=e,{attributes:l,extent:c,location:h,address:f}=t,g=new Hr({geometry:h,attributes:l}),y=c||h,b=y?GJ(y,s??void 0,r??void 0):void 0,_=b?typeof a=="number"?cW(b,s??void 0,a):typeof o=="number"&&y?.type==="point"?cW(b,s??void 0,o):b:null,S=h?`${h.x},${h.y}`:"",$=f||S,C=g.clone();return _!=null&&(C.geometry=br.fromExtent(_)),{extent:_,feature:g,target:C,key:i,name:$,sourceIndex:n}}function U2e(t,e){return t.filter(Boolean).map(i=>kbt(i,e))}var hW;let va=hW=class extends qJ{constructor(t){super(t),this.apiKey=null,this.categories=null,this.countryCode=null,this.defaultZoomScale=null,this.localSearchDisabled=!1,this.language=null,this.locationType=null,this.name="",this.placeholder="",this.searchTemplate="",this.singleLineFieldName=null,this.suggestionsEnabled=null,this.url=null,this.zoomScale=null,this.getResults=(e,i)=>ybt({source:this,...e},i),this.getSuggestions=(e,i)=>vbt({source:this,...e},i)}clone(){return new hW({apiKey:this.apiKey,autoNavigate:this.autoNavigate,categories:this.categories?de(this.categories):null,countryCode:this.countryCode,filter:this.filter,language:this.language,locationType:this.locationType,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?de(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?.clone()??null,searchTemplate:this.searchTemplate,singleLineFieldName:this.singleLineFieldName,suffix:this.suffix,suggestionsEnabled:this.suggestionsEnabled,url:this.url,withinViewEnabled:this.withinViewEnabled,zoomScale:this.zoomScale})}};d([m()],va.prototype,"apiKey",void 0),d([m()],va.prototype,"categories",void 0),d([m()],va.prototype,"countryCode",void 0),d([m({json:{write:!0}})],va.prototype,"defaultZoomScale",void 0),d([m()],va.prototype,"localSearchDisabled",void 0),d([m()],va.prototype,"language",void 0),d([m()],va.prototype,"locationType",void 0),d([m({json:{write:!0}})],va.prototype,"name",void 0),d([m({json:{write:!0}})],va.prototype,"placeholder",void 0),d([m()],va.prototype,"searchTemplate",void 0),d([m({json:{write:!0}})],va.prototype,"singleLineFieldName",void 0),d([m({json:{read:{source:"suggest"},write:{target:"suggest"}}})],va.prototype,"suggestionsEnabled",void 0),d([m({json:{write:!0}})],va.prototype,"url",void 0),d([m({json:{write:!0}})],va.prototype,"zoomScale",void 0),va=hW=d([U("esri.widgets.Search.LocatorSearchSource")],va);const H2e=va,G2e=()=>$e.getLogger("esri.widgets.support.geolocationUtils"),Ebt={maximumAge:0,timeout:15e3,enableHighAccuracy:!0};function Cbt(){const t=!!ve("esri-geolocation");return t||G2e().warn("geolocation-unsupported","Geolocation unsupported."),t}function Ibt(){const t=window.isSecureContext;return t||G2e().warnOnce("insecure-context","Geolocation requires a secure origin."),t}function _de(){return Cbt()&&Ibt()}function Mbt(t){return t??=Ebt,new Promise((i,r)=>{setTimeout(()=>r(new ee("geolocation:timeout","getting the current geolocation position timed out")),15e3),navigator.geolocation.getCurrentPosition(i,r,t??void 0)})}function Abt(t,e){const{position:i,view:r}=t,n=Pbt(i),s=n?.coords;if(!s)throw new ee("geometry-service:no-coords","Geolocation has no coordinates");return Lbt(Obt(s),r,e)}function Pbt(t){const e=t&&t.coords||{},i={accuracy:e.accuracy,altitude:e.altitude,altitudeAccuracy:e.altitudeAccuracy,heading:e.heading,latitude:e.latitude,longitude:e.longitude,speed:e.speed,toJSON:()=>({})};return t&&{coords:i,timestamp:t.timestamp,toJSON:()=>({})}}function Obt({longitude:t,latitude:e,altitude:i}){return new gt({longitude:t,latitude:e,z:i||void 0,spatialReference:{wkid:4326}})}function Lbt(t,e,i){if(!e)return Promise.resolve(t);const r=e.spatialReference;return r.isWGS84?Promise.resolve(t):r.isWebMercator?Promise.resolve(Nm(t)):Dbt(i).then(n=>{if(!n)throw new ee("geometry-service:missing-url","Geometry service URL is missing");const s=new xm({geometries:[t],outSpatialReference:r});return N1e(n,s,i).then(a=>a[0])})}function Dbt(t){if(yi.geometryServiceUrl)return Promise.resolve(yi.geometryServiceUrl);const e=Ue.getDefault();return e.load(t).catch(()=>{}).then(()=>e.helperServices?.geometry?.url)}function Ga(t,e){return t.hasOwnProperty(e)&&t[e]!=null&&t[e]!==""}const xde="highlight",YD=We.ofType({key:t=>t.layer?"layer":"locator",base:qJ,typeMap:{layer:dS,locator:H2e}}),Sde=at.WGS84,Rbt="esri/images/search/search-symbol-32.png",zbt=/<[\s\S]*?>/g,ex=-1;var R$;let gi=(R$=class extends x1e(Rv){constructor(e){super(e),this._defaultPopupTemplate=new Bp({content:"{Match_addr}"}),this._gotoController=null,this._searching=null,this._updatingPromise=null,this._createdFeatureLayers=[],this.autoNavigate=!0,this.autoSelect=!0,this.defaultSources=new YD,this.defaultSymbols={point:new Ka({url:Ur(Rbt),size:24,width:24,height:24}),polyline:new en({color:[130,130,130,1],width:2}),polygon:new Zi({color:[235,235,235,.4],outline:{color:[130,130,130,1],width:2}})},this.includeDefaultSources=!0,this.maxInputLength=128,this.maxResults=6,this.maxSuggestions=6,this.messages=null,this.minSuggestCharacters=3,this.popupEnabled=!0,this.popupTemplate=null,this.portal=Ue.getDefault(),this.resultCount=null,this.resultGraphicEnabled=!0,this.resultGraphic=null,this.results=null,this.selectedSuggestion=null,this.searchAllEnabled=!0,this.selectedResult=null,this.sources=new YD,this.suggestionDelay=350,this.suggestionCount=null,this.suggestions=null,this.suggestionsEnabled=!0,this.view=null}initialize(){this.addHandles([ze(()=>[this.includeDefaultSources,this.view,this.portal],()=>this._update(),Di),ze(()=>this.messages,()=>{this._defaultPopupTemplate.title=this.messages?.searchResult??"",this._update()},Di)])}destroy(){this._destroyFeatureLayers(),this._abortGoTo(),this.clearGraphics()}get activeSource(){return this.allSources.at(this.activeSourceIndex)??null}get activeSourceIndex(){return this.allSources.length===1||!this.searchAllEnabled?0:ex}set activeSourceIndex(e){this._overrideIfSome("activeSourceIndex",e)}get allPlaceholder(){return this.messages?.allPlaceholder}set allPlaceholder(e){this._overrideIfSome("allPlaceholder",e)}get allSources(){const{sources:e,defaultSources:i,includeDefaultSources:r}=this,n=typeof r=="function"?r.call(null,{sources:e,defaultSources:i}):r?i.concat(e):e,s=this._get("allSources")||new YD;return s.removeAll(),s.addMany(n.filter(Boolean)),s}get defaultPopupTemplate(){return this._defaultPopupTemplate}set defaultPopupTemplate(e){this._overrideIfSome("defaultPopupTemplate",e)}get locationEnabled(){return this._get("locationEnabled")||_de()}set locationEnabled(e){if(e===void 0)return void this._clearOverride("locationEnabled");const i=_de();if(e&&!i){const r=new ee("locationEnabled:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});$e.getLogger(this).error(r)}this._override("locationEnabled",!!e&&i)}get placeholder(){const{allSources:e,activeSourceIndex:i,allPlaceholder:r}=this;return i===ex?r??"":e.at(i)?.placeholder??""}set searchTerm(e){this._set("searchTerm",e||""),this.clearGraphics(),this.selectedSuggestion&&this.selectedSuggestion.text!==e&&this._set("selectedSuggestion",null),e===""&&this._clear()}get searchTerm(){return this._get("searchTerm")||""}get state(){return this._searching?"searching":this.updating?"loading":this.allSources.length===0?"disabled":"ready"}get updating(){return this._updatingPromise!=null}clear(){this.searchTerm=""}clearGraphics(){this._removeHighlight(),this._closePopup();const{view:e,resultGraphic:i}=this;e&&i&&e.graphics.remove(i),this._set("resultGraphic",null)}search(e,i){this.emit("search-start"),this.clearGraphics();const r=this._createSuggestionForSearch(e),n=(async()=>{try{await this.when();const s=await this._getResultsFromSources(r,i);if(i?.signal?.aborted)return null;const a={activeSourceIndex:this.activeSourceIndex,searchTerm:r.text??"",numResults:0,numErrors:0,errors:[],results:[]};this._formatResponse(a,s,r);const o=this._getFirstResult(a.results),l=r.location&&o?o.name:r.text,c=l?.replaceAll(zbt,"");return this._set("searchTerm",c),(r.key&&typeof r.sourceIndex=="number"||r.location)&&this._set("selectedSuggestion",r),this._set("results",a.results),this._set("resultCount",a.results.reduce((h,f)=>h+(f.results?.length??0),0)),this.emit("search-complete",a),await this._selectFirstResult(o),a}finally{this._clearSearching()}})();return this._searching=n,n}async searchNearby(e){if(!this.locationEnabled){const r=new ee("searchNearby:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});throw $e.getLogger(this).error(r),r}const i=(async()=>{try{const r=await Mbt(),n=await Abt({position:r,view:this.view},e);return await this.search(n,e)}finally{this._clearSearching()}})();return this._searching=i,i}async select(e){if(this.clearGraphics(),!e){const Q=new ee("select:missing-parameter","Cannot select without a searchResult.",{value:e});throw $e.getLogger(this).error(Q),Q}const{view:i}=this,r=Ga(e,"sourceIndex")?e.sourceIndex:this._getSourceIndexOfResult(e),n=r!=null?this.allSources.at(r):null;if(!n){const Q=new ee("select:missing-source","Cannot select without a source.",{source:n});throw $e.getLogger(this).error(Q),Q}const s=n instanceof dS?this._getLayerSourcePopupTemplate(n):n.popupTemplate,a=n.resultSymbol||this._getDefaultSymbol(e),o=Ga(n,"resultGraphicEnabled")?n.resultGraphicEnabled:this.resultGraphicEnabled,l=Ga(n,"autoNavigate")?n.autoNavigate:this.autoNavigate,c=Ga(n,"popupEnabled")?n.popupEnabled:this.popupEnabled,h=c?s||this.popupTemplate||this.defaultPopupTemplate:null,{feature:f}=e;if(!f){const Q=new ee("select:missing-feature","Cannot select without a feature.",{feature:f});throw $e.getLogger(this).error(Q),Q}const{attributes:g,geometry:y,layer:b,sourceLayer:_}=f,S=y?bde(y):null,$={layerViewQuery:this._getLayerView(f),elevationQuery:i&&S!=null?Fvt(S,i):Promise.resolve(S)},C=await D0($),I=C.layerViewQuery.value,P=C.elevationQuery.value;a instanceof Yi&&(a.text=e.name);const O=i&&l?e.target||e.extent:null;await(O!=null?this._goToSearchResult(O):Promise.resolve());const R=I?f:new Hr({geometry:y,symbol:a,attributes:g,layer:b,sourceLayer:_,popupTemplate:h}),G=Wne(i),Y=G&&c&&R.getEffectivePopupTemplate(G.defaultPopupTemplateEnabled);return Y&&await i?.openPopup({features:[R],location:P}),I&&Nvt(I)&&!Y&&this._highlightFeature({graphic:R,layerView:I}),!I&&o&&i&&i.graphics.push(R),this._setResultFloor(e),this._set("selectedResult",e),this._set("resultGraphic",R),this.emit("select-result",{result:e,source:n,sourceIndex:r}),e}async suggest(e,i,r){const n=e||this.searchTerm;this.emit("suggest-start",{searchTerm:n}),await this._suggestTimer(i,r);const s=await this._suggestImmediate(n,r);return this._set("suggestions",s?.results),this._set("suggestionCount",s?.results.reduce((a,o)=>a+(o.results?.length??0),0)??null),this.emit("suggest-complete",s),s}async when(e,i){await f_(()=>!this.updating)}async _update(){const{portal:e,view:i}=this;if(this.includeDefaultSources){const r=this._updatingPromise=D0([e?.load(),i?.when()]);if(this.destroyed||(await r,r!==this._updatingPromise))return}this.destroyed||this._updateDefaultSources(),this._updatingPromise=null}_clearSearching(){this._searching=null}_convertHelperServices(){const e=this.portal?.helperServices?.geocode;return e?e.map(i=>{if(i.placefinding===!1)return;const r=wde(i.url)&&mfe(i.url)?{url:_bt}:null,n=H2e.fromJSON({...i,...r}),s=n.url;if(wde(s)||wbt(s)||bbt(s)){const a=n.outFields??["Addr_type","Match_addr","StAddr","City"],o=(n.placeholder||this.messages?.placeholder)??"",l=typeof n.defaultZoomScale=="number"?n.defaultZoomScale:2500;n.singleLineFieldName="SingleLine",n.outFields=a,n.placeholder=o,n.defaultZoomScale=l}return n.singleLineFieldName?n:void 0}).filter(un):[]}_destroyFeatureLayers(){this._createdFeatureLayers.forEach(e=>e?.destroy()),this._createdFeatureLayers=[]}_getLayerSources(e,i){const r=this.view?.map;return e.map(n=>{const s=r.findLayerById(n.id);if(!s)return;const a=this._getLayerJSON(n),o=dS.fromJSON(a);return o.placeholder=i,this._getLayer(s,a).then(l=>{o.layer=l}),o}).filter(un).toArray()}_getTableSources(e,i){const r=this.view?.map;return e.map(n=>{if(!n.id)return;const s=r.findTableById(n.id);if(!s)return;const a=this._getLayerJSON(n),o=dS.fromJSON(a);return o.placeholder=i,this._getLayer(s,a).then(l=>{o.layer=l}),o}).filter(un).toArray()}_convertApplicationProperties(){const e=this.view?.map,i=e?.applicationProperties?.viewing?.search;if(!i)return[];const{enabled:r,hintText:n,layers:s,tables:a}=i;return r?[...this._getLayerSources(s,n),...this._getTableSources(a,n)]:[]}async _getSubLayer(e,i){if(await e.load(),!e.allSublayers)throw new Error;const r=e.allSublayers.find(s=>s.id===i.subLayer);if(!r)throw new Error;const n=await r.createFeatureLayer?.();if(!n)throw new Error;return this._createdFeatureLayers.push(n),n}async _getBuildingSubLayer(e,i){await e.load();const r=e.allSublayers.find(n=>n.id===i.subLayer);if(r?.type!=="building-component")throw new Error;if(await r.load(),r.associatedLayer==null)throw new Error;return await r.associatedLayer.load(),r}async _getLayer(e,i){if(e.type==="feature"||e.type==="scene"||e.type==="csv"||e.type==="geojson"||e.type==="ogc-feature")return e;if(e.type==="map-image")try{return await this._getSubLayer(e,i)}catch{const n=new ee("search:create-featurelayer","Could not create a FeatureLayer from the MapImageLayer",{layer:e});return $e.getLogger(this).error(n),null}return e.type==="building-scene"?this._getBuildingSubLayer(e,i):null}_getLayerJSON(e){return typeof e.toJSON=="function"?e.toJSON():e}_updateDefaultSources(){const{defaultSources:e,includeDefaultSources:i}=this;this._destroyFeatureLayers(),e.removeAll(),i&&e.addMany([...this._convertApplicationProperties(),...this._convertHelperServices()])}_abortGoTo(){this._gotoController&&this._gotoController.abort(),this._gotoController=null}_clear(){this._abortGoTo(),this._set("resultCount",null),this._set("results",null),this._set("suggestions",null),this._set("suggestionCount",null),this._set("selectedResult",null),this._set("selectedSuggestion",null),this.emit("search-clear")}_closePopup(){const e=Wne(this.view),{resultGraphic:i}=this;if(!e||!i)return;const r="selectedFeature"in e,n=r?e.selectedFeature:null;r&&n&&n===i&&Sbe(this.view?.popup,this.view?.popupElement)}_suggestTimer(e,i){const r=e??this.suggestionDelay;return GW(r,null,i?.signal)}_createLocationForSearch(e){return e instanceof Hr&&e.geometry?bde(e.geometry):e instanceof gt?e:Array.isArray(e)&&e.length===2?new gt({longitude:e[0],latitude:e[1]}):null}_createSuggestionForSearch(e){if(e&&Ga(e,"key")&&Ga(e,"text")&&Ga(e,"sourceIndex"))return e;const i=this._createLocationForSearch(e),r=typeof e=="string"?e:this.searchTerm,{selectedSuggestion:n,selectedResult:s}=this,a=!e&&n&&s,o=a&&n.key===s.key&&n.sourceIndex===s.sourceIndex,l=a&&n.location;return o||l?n:{location:i,text:i?"":r,sourceIndex:null,key:null}}_getFirstResult(e){return iR(e,({results:i})=>i?.[0])??null}async _selectFirstResult(e){return this.autoSelect&&e?this.select(e):null}async _suggestImmediate(e,i){await this.when();const r=await this._getSuggestionsFromSources(e,i);if(i?.signal?.aborted)return null;const n={activeSourceIndex:this.activeSourceIndex,searchTerm:e??"",numResults:0,numErrors:0,errors:[],results:[]};return this._formatResponse(n,r),n}_formatSourceResponse(e,i,r){const n=i?.value||[],s=i?.error,a=this.allSources.at(r);if(s){const o={sourceIndex:r,source:a,error:s};e.errors.push(o),$e.getLogger(this).error(s),e.numErrors++}else{const o={sourceIndex:r,source:a,results:n};e.results.push(o),e.numResults+=n.length}}_formatResponse(e,i,r){if(i)if(e.activeSourceIndex===ex){const n=r&&Ga(r,"sourceIndex")&&r.sourceIndex!==-1?r.sourceIndex:void 0;i.forEach((s,a)=>{const o=n!==void 0?n:a;this._formatSourceResponse(e,s,o)})}else this._formatSourceResponse(e,i[0],e.activeSourceIndex)}async _getResultsFromSources(e,i){const{allSources:r}=this,n=!e.location&&Ga(e,"sourceIndex")?e.sourceIndex:this.activeSourceIndex,s=[];if(!r.length){const a=new ee("search:no-sources-defined","At least one source is required.",{allSources:r});throw $e.getLogger(this).error(a),a}return n===ex?r.forEach((a,o)=>{s.push(this._getResultsFromSource(e,o,i))}):s.push(this._getResultsFromSource(e,n,i)),D0(s)}async _getSuggestionsFromSources(e,i){const{allSources:r,activeSourceIndex:n}=this,s=[];if(!r.length){const a=new ee("suggest:no-sources-defined","At least one source is required.",{allSources:r});throw $e.getLogger(this).error(a),a}return n===ex?r.forEach((a,o)=>{s.push(this._getSuggestionsFromSource(e,o,i))}):s.push(this._getSuggestionsFromSource(e,n,i)),D0(s)}async _getResultsFromSource(e,i,r){const n=i!=null?this.allSources.at(i):null;if(!n)return null;const{location:s=null}=e,a=this.view?.spatialReference??Sde,o=Ga(n,"maxResults")?n.maxResults:this.maxResults,l=!!(n instanceof dS&&Ga(n,"exactMatch"))&&n.exactMatch,{view:c}=this;return n.getResults?.({exactMatch:l,location:s,maxResults:o,sourceIndex:i,spatialReference:a,suggestResult:e,view:c},r)}async _getSuggestionsFromSource(e,i,r){const n=this.allSources.at(i);if(!n)return null;e??="";const s=Ga(n,"suggestionsEnabled")?n.suggestionsEnabled:this.suggestionsEnabled,a=e?.length,o=Ga(n,"minSuggestCharacters")?n.minSuggestCharacters:this.minSuggestCharacters;if(s&&e.trim()&&a>=o){const l=this.view?.spatialReference||Sde,c=Ga(n,"maxSuggestions")?n.maxSuggestions:this.maxSuggestions,{view:h}=this,f=!!(n instanceof dS&&Ga(n,"exactMatch"))&&n.exactMatch;return n.getSuggestions?.({view:h,sourceIndex:i,suggestTerm:e,spatialReference:l,maxSuggestions:c,exactMatch:f},r)}return null}_getLayerSourcePopupTemplate(e){const{layer:i}=e;if(i)return Ga(e,"popupTemplate")?e.popupTemplate:i.popupTemplate}_getSourceIndexOfResult(e){return iR(this.results??[],({results:i,sourceIndex:r})=>i?.includes(e)?r:null)??null}async _goToSearchResult(e){this._abortGoTo();const i=new AbortController;this._gotoController=i;const r={target:{target:e},options:{signal:i.signal}};e||(r.options.animate=!1),await this.callGoTo(r),this._gotoController=null}_getDefaultSymbol(e){const{defaultSymbols:i}=this,r=e.feature?.geometry;if(r==null)return null;switch(r.type){case"point":case"multipoint":return i.point;case"polyline":return i.polyline;case"extent":case"polygon":return i.polygon;default:return null}}_removeHighlight(){this.removeHandles(xde)}async _getLayerView(e){const{view:i}=this;if(!e||!i)return null;const{layer:r,sourceLayer:n}=e,s=r??n;return s&&s.type!=="building-component"&&s.type!=="subtype-sublayer"?(await i.when(),i.whenLayerView(s)):null}_highlightFeature(e){const{graphic:i,layerView:r}=e,{attributes:n,layer:s,sourceLayer:a}=i,o=s??a,{objectIdField:l}=o,c=(l&&n?.[l])??null,h=r.highlight(c??i);this.addHandles(h,xde)}_setResultFloor(e){const{view:i}=this,r=e.feature?.attributes,n=e.feature?.sourceLayer;if(n&&"floorInfo"in n&&n?.floorInfo?.floorField&&r){const s=r[n.floorInfo.floorField];i?.emit("select-result-floor",s)}}},R$.ALL_INDEX=ex,R$);d([m()],gi.prototype,"_searching",void 0),d([m()],gi.prototype,"_updatingPromise",void 0),d([m({readOnly:!0,value:null})],gi.prototype,"activeSource",null),d([m()],gi.prototype,"activeSourceIndex",null),d([m()],gi.prototype,"allPlaceholder",null),d([m({readOnly:!0})],gi.prototype,"allSources",null),d([m()],gi.prototype,"autoNavigate",void 0),d([m()],gi.prototype,"autoSelect",void 0),d([m({type:Bp})],gi.prototype,"defaultPopupTemplate",null),d([m({readOnly:!0})],gi.prototype,"defaultSources",void 0),d([m()],gi.prototype,"defaultSymbols",void 0),d([m()],gi.prototype,"includeDefaultSources",void 0),d([m()],gi.prototype,"locationEnabled",null),d([m()],gi.prototype,"maxInputLength",void 0),d([m()],gi.prototype,"maxResults",void 0),d([m()],gi.prototype,"maxSuggestions",void 0),d([m()],gi.prototype,"messages",void 0),d([m()],gi.prototype,"minSuggestCharacters",void 0),d([m({readOnly:!0})],gi.prototype,"placeholder",null),d([m()],gi.prototype,"popupEnabled",void 0),d([m({type:Bp})],gi.prototype,"popupTemplate",void 0),d([m({type:Ue})],gi.prototype,"portal",void 0),d([m()],gi.prototype,"resultCount",void 0),d([m()],gi.prototype,"resultGraphicEnabled",void 0),d([m({readOnly:!0})],gi.prototype,"resultGraphic",void 0),d([m({readOnly:!0})],gi.prototype,"results",void 0),d([m({readOnly:!0})],gi.prototype,"selectedSuggestion",void 0),d([m()],gi.prototype,"searchAllEnabled",void 0),d([m({readOnly:!0})],gi.prototype,"selectedResult",void 0),d([m()],gi.prototype,"searchTerm",null),d([m({type:YD})],gi.prototype,"sources",void 0),d([m({readOnly:!0})],gi.prototype,"state",null),d([m()],gi.prototype,"suggestionDelay",void 0),d([m()],gi.prototype,"suggestionCount",void 0),d([m({readOnly:!0})],gi.prototype,"suggestions",void 0),d([m()],gi.prototype,"suggestionsEnabled",void 0),d([m({readOnly:!0})],gi.prototype,"updating",null),d([m()],gi.prototype,"view",void 0),d([m()],gi.prototype,"clear",null),gi=d([U("esri.widgets.Search.SearchViewModel")],gi);const Fbt=gi;function $de(t){t?.abort()}const tx="arcgis-search",ix={base:tx,autocomplete:`${tx}__autocomplete`,dropdown:`${tx}__dropdown`,container:`${tx}__container`,form:`${tx}__form`,submitButton:`${tx}__submit-button`},Nbt=St`.esri-widget__heading{color:var(--calcite-color-text-2);margin:0 0 .5rem;font-weight:var(--calcite-font-weight-semibold)}h1.esri-widget__heading{font-size:var(--calcite-font-size-xl)}h2.esri-widget__heading{font-size:var(--calcite-font-size-md)}h3.esri-widget__heading,h4.esri-widget__heading,h5.esri-widget__heading,h6.esri-widget__heading{font-size:var(--calcite-font-size)}.esri-widget{--esri-widget-padding-x: 15px;--esri-widget-padding-y: var(--calcite-spacing-md);--esri-widget-padding: var(--esri-widget-padding-y) var(--esri-widget-padding-x);box-sizing:border-box;color:var(--calcite-color-text-2);background-color:var(--calcite-color-foreground-1);font-size:var(--calcite-font-size);line-height:var(--calcite-font-line-height-relative-tight)}.esri-widget *,.esri-widget :before,.esri-widget :after{box-sizing:inherit}.esri-widget.esri-widget--disabled>*{opacity:.4;pointer-events:none}.esri-widget.esri-widget--compact{--esri-widget-padding-y: 0;--esri-widget-padding-x: 0}.esri-widget__anchor{color:var(--calcite-color-text-2)}.esri-widget__anchor:hover{color:var(--calcite-color-text-3)}.esri-widget__anchor:hover,.esri-widget__anchor:focus{text-decoration:underline}.esri-widget__anchor--disabled{opacity:.4;pointer-events:none}.esri-widget__header{background-color:var(--calcite-color-foreground-1);flex:1 0 100%;justify-content:space-between;align-items:center;width:100%;min-height:48px;padding:12px 0 12px 15px;display:flex}.esri-widget__header .esri-widget__heading{width:calc(100% - 48px);text-align:initial;color:var(--calcite-color-text-1);align-items:center;margin:0;padding:0;display:flex}.esri-widget__header-button{appearance:none;cursor:pointer;color:var(--calcite-color-text-2);background-color:var(--calcite-color-foreground-1);border:none;flex:0 0 48px;justify-content:center;align-self:stretch;align-items:center;width:48px;padding:0;display:flex}.esri-widget__footer{background-color:var(--calcite-color-foreground-1);justify-content:center;align-items:center;width:100%;min-height:48px;display:flex}.esri-widget__footer-pagination{color:var(--calcite-color-text-2);justify-content:space-between;align-items:center;display:flex}.esri-widget__footer-pagination-previous-button,.esri-widget__footer-pagination-next-button{cursor:pointer;background-color:var(--calcite-color-foreground-1);border:0;margin:0 7px;padding:12px 15px;transition:background-color .125s ease-in-out}.esri-widget__footer-pagination-previous-button:hover,.esri-widget__footer-pagination-previous-button:focus,.esri-widget__footer-pagination-next-button:hover,.esri-widget__footer-pagination-next-button:focus{color:var(--calcite-color-text-1);background-color:var(--calcite-color-foreground-1)}.esri-menu{visibility:hidden;z-index:1;background-clip:padding;background-color:var(--calcite-color-foreground-1);background-clip:padding-box;width:100%;max-height:0;margin:2px 0 0;padding:0;font-size:var(--calcite-font-size);line-height:var(--calcite-spacing-xl);position:absolute;top:100%;left:0;overflow:hidden;box-shadow:0 1px 2px #0000004d}.esri-menu .esri-menu__header{color:var(--calcite-color-text-inverse);background-color:var(--calcite-color-inverse);padding:6px 12px}.esri-menu__list{margin:0;padding:0;list-style:none}.esri-menu__list-item{cursor:pointer;border-top:1px solid #adadad4d;border-left:3px solid #0000;padding:.8em 1em}.esri-menu__list-item [class^=esri-icon-],.esri-menu__list-item [class*=" esri-icon-"]{padding-right:2.8px}.esri-menu__list-item:first-child{border-top:none}.esri-menu__list-item--focus,.esri-menu__list-item:hover,.esri-menu__list-item:focus{background-color:var(--calcite-color-foreground-1)}.esri-menu__list-item:active{background-color:var(--calcite-color-foreground-current)}.esri-menu__list-item--active,.esri-menu__list-item--active:hover,.esri-menu__list-item--active:focus{background-color:var(--calcite-color-foreground-1);border-left-color:var(--calcite-color-brand)}.esri-widget__table{border-collapse:collapse;color:var(--calcite-color-text-1);border:none;width:100%;line-height:var(--calcite-font-line-height-relative-tight)}.esri-widget__table tr:nth-child(odd){background-color:var(--calcite-color-transparent)}.esri-widget__table tr:nth-child(2n){background-color:var(--calcite-color-transparent-press)}.esri-widget__table tr a{color:var(--calcite-color-text-2)}.esri-widget__table tr a:hover,.esri-widget__table tr a:focus{color:var(--calcite-color-text-1)}.esri-widget__table tr td,.esri-widget__table tr th{vertical-align:top;word-break:break-word;padding:.5em .7em;font-size:var(--calcite-font-size-sm);font-weight:var(--calcite-font-weight-regular)}.esri-widget__table tr th{text-align:left;border-right:3px solid #0000000d;width:50%}.esri-widget__table tr td{width:50%}.esri-input{color:var(--calcite-color-text-1);background-color:var(--calcite-color-foreground-1);border:1px solid #959595;font-size:var(--calcite-font-size)}.esri-input::-ms-clear{display:none}.esri-input::placeholder{opacity:1;color:var(--calcite-color-text-2)}.esri-input:placeholder-shown{text-overflow:ellipsis}.esri-input[type=text],.esri-input[type=password],.esri-input[type=number]{height:32px;padding:0 .5em}calcite-combobox.esri-input{border:none}.esri-widget__content--empty{text-align:center;color:var(--calcite-color-border-input);flex-flow:column wrap;align-items:center;padding:18px 22px;display:flex}.esri-widget__content--empty h1.esri-widget__heading,.esri-widget__content--empty h2.esri-widget__heading,.esri-widget__content--empty h3.esri-widget__heading,.esri-widget__content--empty h4.esri-widget__heading,.esri-widget__content--empty h5.esri-widget__heading{font-weight:var(--calcite-font-weight-regular)}.esri-widget__content-illustration--empty{width:128px;padding:1rem 0}.esri-widget__content-icon--empty{width:32px;padding:.5rem 0}.esri-select{appearance:none;cursor:pointer;color:var(--calcite-color-text-2);background:var(--calcite-color-foreground-1) url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='-8 -8 32 32' width='32' height='32'%3E%3Cpath d='M8 11.207l-4-4V5.793l4 4 4-4v1.414z' fill='%23adadad' fillrule='nonzero'/%3E%3C/svg%3E") 100% no-repeat;border:1px solid #959595;border-radius:0;width:100%;height:32px;margin:0;padding:0 .5em;font-family:inherit;font-size:.85em;display:block}.esri-select[disabled]{cursor:auto}.esri-select::-ms-expand{display:none}.esri-disabled a,.esri-disabled [role=menu],.esri-disabled [role=checkbox],.esri-disabled [class^=esri-icon-],.esri-disabled [class*=" esri-icon-"]{color:var(--calcite-color-text-3)}.keynav-mode .esri-widget:focus,.keynav-mode .esri-widget :focus{z-index:1;outline-offset:2px;outline:2px solid #adadad}.esri-widget__loader-animation{border:.15em solid #adadad4d;border-top-color:var(--calcite-color-border-input);border-radius:100%;width:1em;height:1em;font-size:var(--calcite-font-size-md);animation:1.25s linear infinite esri-rotate;display:block;transform:translateZ(0)}:dir(rtl) .esri-widget__table th{text-align:right;border-left:3px solid #0000000d;border-right:none}:dir(rtl) .esri-select{background-position:0}:dir(rtl) .esri-menu__list-item{border-left:none;border-right:3px solid #0000}:dir(rtl) .esri-menu__list-item [class^=esri-icon-],:dir(rtl) .esri-menu__list-item [class*=" esri-icon-"]{padding-left:2px;padding-right:0}:dir(rtl) .esri-menu__list-item--active{border-right-color:var(--calcite-color-brand)}.esri-icon-font-fallback-text{clip:rect(0 0 0 0);width:1px;height:1px;position:absolute;overflow:hidden}.esri-rotating{animation:1.25s linear infinite esri-rotate;transform:translateZ(0)}.esri-clearfix:before,.esri-clearfix:after{content:" ";display:table}.esri-clearfix:after{clear:both}.esri-interactive{cursor:pointer}.esri-invisible{visibility:hidden!important}.esri-offscreen{position:absolute;top:-999em;left:-999em}.esri-match-height{flex-direction:column;flex:auto;display:flex;overflow:hidden}.esri-hidden{display:none!important}:host{width:240px}.arcgis-search{--arcgis-internal-search-width: 240px;display:flex;flex-flow:row nowrap;align-items:center;justify-content:center;width:100%}.arcgis-search__dropdown{--calcite-color-border-1: var(--calcite-color-border-input);--calcite-dropdown-width: var(--arcgis-internal-search-width);width:31px}.arcgis-search__autocomplete{flex:1}.arcgis-search__container{display:flex;position:relative;flex:1 0 100%;flex-flow:row nowrap;align-items:stretch}.arcgis-search__form{display:flex;flex:1 0;flex-flow:row nowrap;align-items:stretch;margin:0;padding:0}.arcgis-search__submit-button{position:absolute;margin:-1px;border-width:0;padding:0;width:1px;height:1px;overflow:hidden;white-space:nowrap;clip:rect(0,0,0,0)}`,jbt=bA(Fbt);var zw;let Vbt=(zw=class extends Et{constructor(){super(...arguments),this.viewModel=jbt(this),this._currentLocationValue="search-use-current-location",this._autocompleteEl=void 0,this._searchResultRendererEl=void 0,this._suggestController=void 0,this._searchController=void 0,this._lastSearchTerm="",this.messages=XT({blocking:!0}),this._locateFailed=!1,this._showNoResults=!1,this.view=this.viewModel.view,this.goToOverride=this.viewModel.goToOverride,this.icon="search",this.activeMenu="none",this.activeSourceIndex=this.viewModel.activeSourceIndex,this.allPlaceholder=this.viewModel.allPlaceholder,this.allSources=this.viewModel.allSources,this.autoNavigateDisabled=this.viewModel.autoNavigate,this.autoSelectDisabled=this.viewModel.autoSelect,this.defaultSources=this.viewModel.defaultSources,this.disabled=!1,this.includeDefaultSourcesDisabled=this.viewModel.includeDefaultSources,this.locationDisabled=this.viewModel.locationEnabled,this.maxResults=this.viewModel.maxResults,this.maxSuggestions=this.viewModel.maxSuggestions,this.minSuggestCharacters=this.viewModel.minSuggestCharacters,this.popupDisabled=this.viewModel.popupEnabled,this.popupTemplate=this.viewModel.popupTemplate,this.portal=this.viewModel.portal,this.resultGraphic=this.viewModel.resultGraphic,this.resultGraphicDisabled=this.viewModel.resultGraphicEnabled,this.results=this.viewModel.results,this.searchAllDisabled=this.viewModel.searchAllEnabled,this.searchTerm=this.viewModel.searchTerm,this.selectedResult=this.viewModel.selectedResult,this.sources=this.viewModel.sources,this.suggestions=this.viewModel.suggestions,this.suggestionsDisabled=this.viewModel.suggestionsEnabled,this.autoDestroyDisabled=!1,this.state=this.viewModel.state,this.arcgisPropertyChange=w_()("state"),this.arcgisReady=Re(),this.arcgisSearchClear=Or(()=>this.viewModel,"search-clear"),this.arcgisSearchComplete=Or(()=>this.viewModel,"search-complete"),this.arcgisSearchStart=Or(()=>this.viewModel,"search-start"),this.arcgisSelectResult=Or(()=>this.viewModel,"select-result"),this.arcgisSuggestComplete=Or(()=>this.viewModel,"suggest-complete"),this.arcgisSuggestStart=Or(()=>this.viewModel,"suggest-start")}get _isDisabled(){const{state:e}=this.viewModel;return e==="disabled"||e==="loading"||this.disabled}get _showCurrentLocation(){return!this.locationDisabled&&!this.searchTerm?.trim()}get _effectiveActiveMenu(){return this._isDisabled?"none":this.activeMenu}get activeSource(){return this.viewModel?.activeSource}clear(){this._locateFailed=!1,this.viewModel.clear()}async destroy(){await this.manager.destroy(),await this._searchResultRendererEl?.destroy(),this._cancelQueries()}async search(e){this._cancelQueries();const i=new AbortController,{signal:r}=i;this._searchController=i;try{const n=await this.viewModel.search(e,{signal:r});return this._searchController!==i?void 0:(n?.numResults||(this._showNoResults=!0,this.activeMenu="suggestion"),this._searchController=void 0,n)}catch{if(this._searchController!==i)return;this._searchController=void 0;return}}async suggest(e){this._cancelSuggest();const i=new AbortController,{signal:r}=i;this._suggestController=i;try{const n=await this.viewModel.suggest(e,null,{signal:r});return this._suggestController!==i?void 0:(this._suggestController=void 0,n?.numResults&&(this.activeMenu="suggestion",this._scrollToTopSuggestion()),n)}catch{return this._suggestController!==i||(this._suggestController=void 0),null}}async setFocus(){await this._autocompleteEl?.setFocus()}loaded(){this.manager.onLifecycle(()=>[ze(()=>[this._searchResultRendererEl,this.viewModel?.defaultPopupTemplate],()=>{const e=this.viewModel?.defaultPopupTemplate,{_searchResultRendererEl:i}=this;if(e&&i){const r=document.createElement("div");r.appendChild(i),e.content=r}},{initial:!0}),ze(()=>this.messages,e=>this.viewModel.messages=e,{initial:!0})])}_addSearchResultRenderer(){this._searchResultRendererEl=Sge(J`<arcgis-search-result-renderer auto-destroy-disabled .messages=${this.messages} .viewModel=${this.viewModel}></arcgis-search-result-renderer>`)}_handleInputKeydown(e){e.key==="Tab"&&this._cancelSuggest()}_handleAutocompleteCreate(e){this._autocompleteEl=e}_handleCalciteAutocompleteTextInput(e){const i=e.target.inputValue;i!==this.viewModel.searchTerm&&(this.viewModel.searchTerm=i,i||this.clear(),this.suggest())}_handleAutocompleteOpen(){this.activeMenu="suggestion"}_handleAutocompleteClose(){this.activeMenu==="suggestion"&&(this.activeMenu="none")}_handleCalciteAutocompleteChange(e){const i=e.target.value;if(i===this._currentLocationValue){this._useCurrentLocation();return}const r=JSON.parse(i),n=this.viewModel.suggestions?.find(({sourceIndex:s})=>s===r.sourceIndex)?.results?.find(({key:s})=>`${s}`==`${r.key}`);n&&this.search(n)}async _useCurrentLocation(){this._cancelQueries();const e=new AbortController,{signal:i}=e;this._searchController=e;try{await this.viewModel.searchNearby({signal:i})}catch(r){ss(r)||(this._locateFailed=!0,this.activeMenu="suggestion")}finally{this._searchController=void 0}}_handleSourceOpen(){this.activeMenu="source"}_handleSourceClose(){this.activeMenu==="source"&&(this.activeMenu="none")}_handleSourceSelect(e){const i=e.target.selectedItems[0].getAttribute("data-source-index");i&&(this.viewModel.activeSourceIndex=Number.parseInt(i,10))}_cancelSuggest(){this.activeMenu="none",this._locateFailed=!1,this._showNoResults=!1,this._suggestController=$de(this._suggestController)}_cancelQueries(){this._cancelSuggest(),this._searchController=$de(this._searchController)}_scrollToTopSuggestion(){this._autocompleteEl?.scrollContentTo({top:0})}_formSubmit(e){e.preventDefault(),this.activeMenu="none",this._lastSearchTerm=this.searchTerm,this.searchTerm&&this.search()}_getSourceName(e){const{messages:i}=this,{allSources:r}=this.viewModel,n=r.at(e);return(e===-1?i.all:n?.name||i.untitledSource)||""}render(){return this._addSearchResultRenderer(),J`<div class=${q(Ui(ix.base,zo.widget))}><div class=${q(ix.container)}>${this._renderSourcesMenu()}${this._renderForm()}</div></div>`}_renderSourcesMenu(){const{messages:e,_isDisabled:i,_effectiveActiveMenu:r}=this,{allSources:n,searchAllEnabled:s}=this.viewModel;return n.length>1?J`<calcite-dropdown class=${q(ix.dropdown)} .disabled=${i} .open=${r==="source"} overlay-positioning=fixed @calciteDropdownClose=${this._handleSourceClose} @calciteDropdownOpen=${this._handleSourceOpen} @calciteDropdownSelect=${this._handleSourceSelect}><calcite-button appearance=outline-fill icon-start=caret-down kind=neutral .label=${e.searchIn} slot=trigger></calcite-button><calcite-dropdown-group .groupTitle=${e.searchIn}>${s?this._renderSource(-1):null}${n.map((a,o)=>this._renderSource(o)).toArray()}</calcite-dropdown-group></calcite-dropdown>`:null}_renderUseCurrentLocation(){const{_currentLocationValue:e}=this;return J`<calcite-autocomplete-item .heading=${this.messages.useCurrentLocation??""} icon-start=gps-on .value=${e}></calcite-autocomplete-item>`}_renderAutocomplete(){const{_effectiveActiveMenu:e,messages:i,_isDisabled:r}=this,{maxInputLength:n,placeholder:s,searchTerm:a,state:o}=this.viewModel,l=this.label??i.searchButtonTitle??"";return J`<calcite-autocomplete .autocomplete=${"off"} class=${q(ix.autocomplete)} .disabled=${r} .icon=${this.icon||!1} .inputValue=${a} .label=${l} .loading=${o==="searching"} .maxLength=${n} .name=${this.el.id} @keydown=${this._handleInputKeydown} .open=${e==="suggestion"} overlay-positioning=fixed .placeholder=${s} title=${(a?"":s)??De} @calciteAutocompleteChange=${this._handleCalciteAutocompleteChange} @calciteAutocompleteClose=${this._handleAutocompleteClose} @calciteAutocompleteOpen=${this._handleAutocompleteOpen} @calciteAutocompleteTextChange=${this._handleCalciteAutocompleteTextInput} @calciteAutocompleteTextInput=${this._handleCalciteAutocompleteTextInput} ${zt(this._handleAutocompleteCreate)}>${this._renderSuggestions()}${this._renderNotices()}</calcite-autocomplete>`}_renderForm(){return J`<form class=${q(ix.form)} @submit=${this._formSubmit} role=search>${this._renderAutocomplete()}<button class=${q(ix.submitButton)} type=submit>${this.label??this.messages.searchButtonTitle??""}</button></form>`}_renderSuggestGroup(e){return e.results?.map(i=>this._renderSuggestion(i))}_renderSuggestions(){const{suggestions:e}=this.viewModel;return this._showNoResults?null:this._showCurrentLocation?this._renderUseCurrentLocation():e?.map(i=>this._renderSuggestResults(i))}_renderSuggestResults(e){const{allSources:i,activeSourceIndex:r}=this.viewModel,{sourceIndex:n}=e,s=e.results?.length,a=i.length>1&&r===-1,o=this._getSourceName(n);return s&&a?J`<calcite-autocomplete-item-group .heading=${o}>${this._renderSuggestGroup(e)}</calcite-autocomplete-item-group>`:this._renderSuggestGroup(e)}_renderSuggestion({key:e,sourceIndex:i,text:r}){const n={key:e,sourceIndex:i};return J`<calcite-autocomplete-item .heading=${r??this.messages.untitledResult??""} .value=${JSON.stringify(n)}></calcite-autocomplete-item>`}_renderSource(e){const i=this._getSourceName(e);return J`<calcite-dropdown-item data-source-index=${`${e}`} .selected=${e===this.viewModel.activeSourceIndex}>${i}</calcite-dropdown-item>`}_renderNoResultsWarning(e){const{messages:i}=this,r=e?Fp(i.noResultsFoundForValue??"",{value:`"${e}"`}):i.noResultsFound;return J`<calcite-notice icon=exclamation-mark-triangle kind=warning open slot=content-bottom><div slot=title>${i.noResults}</div><div slot=message>${r}</div></calcite-notice>`}_renderLocateError(){return J`<calcite-notice icon=exclamation-mark-circle kind=danger open slot=content-bottom><div slot=message>${this.messages.locateError}</div></calcite-notice>`}_renderNotices(){return this._locateFailed?this._renderLocateError():this._showNoResults?this._renderNoResultsWarning(this._lastSearchTerm??this.viewModel.searchTerm):null}},zw.properties={_locateFailed:16,_showNoResults:16,_isDisabled:16,_showCurrentLocation:16,_effectiveActiveMenu:16,view:0,referenceElement:1,position:3,goToOverride:0,icon:1,activeMenu:1,activeSource:32,activeSourceIndex:9,allPlaceholder:1,allSources:0,autoNavigateDisabled:5,autoSelectDisabled:5,defaultSources:0,disabled:5,includeDefaultSourcesDisabled:5,locationDisabled:5,maxResults:9,maxSuggestions:9,minSuggestCharacters:9,popupDisabled:5,popupTemplate:0,portal:0,resultGraphic:0,resultGraphicDisabled:5,results:0,searchAllDisabled:5,searchTerm:1,selectedResult:0,sources:0,suggestions:0,suggestionsDisabled:5,autoDestroyDisabled:5,messageOverrides:0,label:1,state:3},zw.styles=Nbt,zw);nn("arcgis-search",Vbt);const Bbt=St`.arcgis-button{--calcite-icon-color: var(--calcite-color-text-3);--calcite-button-background-color: var(--calcite-color-foreground-1);color:var(--calcite-color-text-3);line-height:var(--calcite-font-line-height-relative-tight);display:flex;flex-flow:column;cursor:pointer;background-color:var(--calcite-color-foreground-1);font-size:var(--calcite-font-size);:hover{--calcite-icon-color: var(--calcite-color-text-1);--calcite-button-background-color: var(--calcite-color-transparent-hover)}calcite-button{width:var(--calcite-spacing-xxxl);height:var(--calcite-spacing-xxxl)}}:host{width:var(--calcite-spacing-xxxl);height:var(--calcite-spacing-xxxl)}.compass{border-radius:50%;box-shadow:var(--arcgis-internal-box-shadow, none)}.compass__icon-container{justify-content:center;display:flex;position:absolute;transform:translate(-50%,-50%)}.compass__icon-container:dir(rtl){transform:translate(50%,-50%)}`,OU="compass",VL={base:OU,button:"arcgis-button",compassButton:`${OU}__button`,iconContainer:`${OU}__icon-container`},Ubt=bA(fX);var Fw;let Hbt=(Fw=class extends Et{constructor(){super(...arguments),this.messages=XT(),this.viewModel=Ubt(this),this.view=this.viewModel.view,this.autoDestroyDisabled=!1,this.goToOverride=this.viewModel.goToOverride,this.orientation=this.viewModel.orientation,this.state=this.viewModel.state,this.arcgisPropertyChange=w_()("state","orientation"),this.arcgisReady=Re()}get icon(){return this._icon??(this.state==="rotation"?"arrow-up":"compass-needle")}set icon(e){this._icon=e}async destroy(){await this.manager.destroy()}async reset(){this.viewModel.reset()}_reset(){this.viewModel.reset()}render(){const{messages:e,icon:i}=this;return J`<div class=${q(Ui(VL.base,VL.button,VL.compassButton))}><calcite-button .disabled=${this.state==="disabled"} kind=neutral .label=${e.reset} @click=${this._reset} round scale=s title=${e.reset??De}><div aria-hidden=true class=${q(VL.iconContainer)} title=${e.reset??De}><calcite-icon .icon=${i} style=${Kt(Gbt(this.orientation))}></calcite-icon></div></calcite-button></div>`}},Fw.properties={view:0,autoDestroyDisabled:5,goToOverride:0,icon:3,label:1,messageOverrides:0,orientation:0,position:3,referenceElement:1,state:3},Fw.styles=Bbt,Fw);const Gbt=t=>({transform:`rotateZ(${t.z}deg)`});nn("arcgis-compass",Hbt);async function pW(t,e){const{data:i}=await Nt(t,{responseType:"json",query:{f:"json",...e?.customParameters,token:e?.apiKey}});return i}let q2e=class{constructor(){this._serviceMetadatas=new Map,this._itemDatas=new Map}async fetchServiceMetadata(e,i){const r=this._serviceMetadatas.get(e);if(r)return r;const n=await pW(e,i);return this._serviceMetadatas.set(e,n),n}async fetchItemData(e){const{id:i}=e;if(!i)return null;const{_itemDatas:r}=this;if(r.has(i))return r.get(i);const n=await e.fetchData();return r.set(i,n),n}async fetchCustomParameters(e,i){const r=await this.fetchItemData(e);return r&&typeof r=="object"&&(i?i(r):r.customParameters)||null}};const yd={BingMapsLayer:async()=>(await fe(async()=>{const{default:t}=await import("./BingMapsLayer-BZQmxUhV.js");return{default:t}},__vite__mapDeps([304,305]))).default,BuildingSceneLayer:async()=>(await fe(async()=>{const{default:t}=await import("./BuildingSceneLayer-6iicLLNK.js");return{default:t}},__vite__mapDeps([306,307,308,271,272,273,309,310,112,49,108,96,90,93,311,94,89,47,48,95,128,206,264]))).default,CSVLayer:async()=>(await fe(async()=>{const{default:t}=await import("./CSVLayer-jC7erdIq.js");return{default:t}},__vite__mapDeps([312,32,27]))).default,CatalogLayer:async()=>(await fe(async()=>{const{default:t}=await import("./CatalogLayer-CLEDe7aU.js");return{default:t}},__vite__mapDeps([313,7,8,276,45,50,277,278,279,89,90,280,281,32,27,282,283,57,55,56,15,18,154,17]))).default,DimensionLayer:async()=>(await fe(async()=>{const{default:t}=await import("./DimensionLayer-DS8axY52.js");return{default:t}},__vite__mapDeps([314,315]))).default,ElevationLayer:async()=>(await fe(async()=>{const{default:t}=await import("./ElevationLayer-DGKg4Okc.js");return{default:t}},__vite__mapDeps([0,1,2,3,4]))).default,FeatureLayer:async()=>(await fe(async()=>{const{default:t}=await Promise.resolve().then(()=>Frt);return{default:t}},void 0)).default,GaussianSplatLayer:async()=>(await fe(async()=>{const{default:t}=await import("./GaussianSplatLayer-BAqVJCmY.js");return{default:t}},__vite__mapDeps([316,317,264]))).default,GeoJSONLayer:async()=>(await fe(async()=>{const{default:t}=await import("./GeoJSONLayer-DI7dwMiw.js");return{default:t}},__vite__mapDeps([318,32,27]))).default,GeoRSSLayer:async()=>(await fe(async()=>{const{default:t}=await import("./GeoRSSLayer-D5dSCSS_.js");return{default:t}},[])).default,GroupLayer:async()=>(await fe(async()=>{const{default:t}=await Promise.resolve().then(()=>J0t);return{default:t}},void 0)).default,ImageryLayer:async()=>(await fe(async()=>{const{default:t}=await import("./ImageryLayer-C2RL1L8X.js");return{default:t}},__vite__mapDeps([319,156,225,320,99,98,12,100,8,105,305,169,321,283,57,55,56,15,18,154,264]))).default,ImageryTileLayer:async()=>(await fe(async()=>{const{default:t}=await import("./ImageryTileLayer-YTGt8gie.js");return{default:t}},__vite__mapDeps([322,157,323,225,320,99,98,12,100,8,105,76,227,103,102,101,321,169,104,3,264]))).default,IntegratedMesh3DTilesLayer:async()=>(await fe(async()=>{const{default:t}=await import("./IntegratedMesh3DTilesLayer-B0aBrfzW.js");return{default:t}},__vite__mapDeps([324,325,317,264]))).default,IntegratedMeshLayer:async()=>(await fe(async()=>{const{default:t}=await import("./IntegratedMeshLayer-BRg_nsT4.js");return{default:t}},__vite__mapDeps([326,308,271,272,273,309,325,264]))).default,KMLLayer:async()=>(await fe(async()=>{const{default:t}=await import("./KMLLayer-B5viyqim.js");return{default:t}},__vite__mapDeps([327,229]))).default,KnowledgeGraphLayer:async()=>(await fe(async()=>{const{default:t}=await import("./KnowledgeGraphLayer-D6Hs1LHg.js");return{default:t}},__vite__mapDeps([328,329,330,239,331,332,212,17,15,18,244,16,19,20,21,22,23,24,25,26,27,6,7,8,28,29,32]))).default,LineOfSightLayer:async()=>(await fe(async()=>{const{default:t}=await import("./LineOfSightLayer-JwKv2dL_.js");return{default:t}},__vite__mapDeps([333,315,334,108,96,90,264]))).default,LinkChartLayer:async()=>(await fe(async()=>{const{default:t}=await import("./LinkChartLayer-DnKVC3SF.js");return{default:t}},__vite__mapDeps([335,329,330,239,331,332,212,17,15,18,244,16,19,20,21,22,23,24,25,26,27,6,7,8,28,29,32]))).default,MapImageLayer:async()=>(await fe(async()=>{const{default:t}=await import("./MapImageLayer-C5uTdzPA.js");return{default:t}},__vite__mapDeps([336,337,282,283,57,55,56,15,18,154,17,305]))).default,MapNotesLayer:async()=>(await fe(async()=>{const{default:t}=await import("./MapNotesLayer-DONcD9Cl.js");return{default:t}},__vite__mapDeps([338,244,62]))).default,MediaLayer:async()=>(await fe(async()=>{const{default:t}=await import("./MediaLayer-XiZSDwbw.js");return{default:t}},__vite__mapDeps([339,234,83,246,19,20,133]))).default,OGCFeatureLayer:async()=>(await fe(async()=>{const{default:t}=await import("./OGCFeatureLayer-jf4PpA3Y.js");return{default:t}},__vite__mapDeps([340,85,17,15,18,59,14,32,27,60,307]))).default,OpenStreetMapLayer:async()=>(await fe(async()=>{const{default:t}=await import("./OpenStreetMapLayer-DWSQa1xK.js");return{default:t}},__vite__mapDeps([341,342,305]))).default,OrientedImageryLayer:async()=>(await fe(async()=>{const{default:t}=await import("./OrientedImageryLayer-BEuZvi60.js");return{default:t}},[])).default,ParquetLayer:async()=>(await fe(async()=>{const{default:t}=await import("./ParquetLayer-C1i0yygH.js");return{default:t}},__vite__mapDeps([343,142,31,79,76]))).default,PointCloudLayer:async()=>(await fe(async()=>{const{default:t}=await import("./PointCloudLayer-CLdyADZw.js");return{default:t}},__vite__mapDeps([344,308,271,272,273,92,264]))).default,RouteLayer:async()=>(await fe(async()=>{const{default:t}=await import("./RouteLayer-B_25EkBt.js");return{default:t}},__vite__mapDeps([345,271,239,238,331]))).default,SceneLayer:async()=>(await fe(async()=>{const{default:t}=await import("./SceneLayer-BrJ2VY0H.js");return{default:t}},__vite__mapDeps([346,347,279,89,90,280,308,271,272,273,307,309,264,310,112,49,108,96,93,311,94,47,48,95,128,206]))).default,StreamLayer:async()=>(await fe(async()=>{const{default:t}=await import("./StreamLayer-DG_aBtcP.js");return{default:t}},__vite__mapDeps([348,71]))).default,SubtypeGroupLayer:async()=>(await fe(async()=>{const{default:t}=await import("./SubtypeGroupLayer-CN26ooBP.js");return{default:t}},[])).default,TileLayer:async()=>(await fe(async()=>{const{default:t}=await import("./TileLayer-ziOxibf1.js");return{default:t}},__vite__mapDeps([349,1,2,3,337,282,283,57,55,56,15,18,154,17,305]))).default,UnknownLayer:async()=>(await fe(async()=>{const{default:t}=await import("./UnknownLayer-bND0SY6l.js");return{default:t}},[])).default,UnsupportedLayer:async()=>(await fe(async()=>{const{default:t}=await import("./UnsupportedLayer-BedoldXI.js");return{default:t}},[])).default,VectorTileLayer:async()=>(await fe(async()=>{const{default:t}=await import("./VectorTileLayer-CG6Sbc9R.js");return{default:t}},__vite__mapDeps([350,1,2,3,120,117,39,38]))).default,VideoLayer:async()=>(await fe(async()=>{const{default:t}=await import("./VideoLayer-CdhcxRfj.js");return{default:t}},__vite__mapDeps([351,245,246,47,12]))).default,ViewshedLayer:async()=>(await fe(async()=>{const{default:t}=await import("./ViewshedLayer-C93b2JGI.js");return{default:t}},__vite__mapDeps([352,334,108,96,90,315]))).default,VoxelLayer:async()=>(await fe(async()=>{const{default:t}=await import("./VoxelLayer-D4SgGcbe.js");return{default:t}},__vite__mapDeps([353,308,271,272,273,89,90]))).default,WCSLayer:async()=>(await fe(async()=>{const{default:t}=await import("./WCSLayer-BBoW3Cx9.js");return{default:t}},__vite__mapDeps([354,323,225,320,99,98,12,100,8,105,76,227,103,102,101,169,355]))).default,WFSLayer:async()=>(await fe(async()=>{const{default:t}=await import("./WFSLayer-C-H4vfl3.js");return{default:t}},__vite__mapDeps([356,32,27,114,59,14,15,115,210]))).default,WMSLayer:async()=>(await fe(async()=>{const{default:t}=await import("./WMSLayer-BAwiXpHc.js");return{default:t}},__vite__mapDeps([357,355,248,305]))).default,WMTSLayer:async()=>(await fe(async()=>{const{default:t}=await import("./WMTSLayer-C4rkYwv7.js");return{default:t}},__vite__mapDeps([358,342,305,2,355,115]))).default,WebTileLayer:async()=>(await fe(async()=>{const{default:t}=await import("./WebTileLayer-CspaJxoO.js").then(e=>e.W);return{default:t}},__vite__mapDeps([342,305]))).default};function qbt(t){return ZJ(t,"notes")}function Wbt(t){return ZJ(t,"markup")}function Ybt(t){return ZJ(t,"route")}function ZJ(t,e){return!(!t.layerType||t.layerType!=="ArcGISFeatureLayer")&&t.featureCollectionType===e}async function W2e(t,e){const i=wu(t);if(!i)throw new ee("invalid-url","Invalid scene service url");const r={...e,sceneServerUrl:i.url.path,layerId:i.sublayer??void 0};if(r.sceneLayerItem??=await Zbt(r),r.sceneLayerItem==null)return Tde(r.sceneServerUrl.replace("/SceneServer","/FeatureServer"),r);const n=await Jbt(r);if(!n?.url)throw new ee("related-service-not-found","Could not find feature service through portal item relationship");r.featureServiceItem=n;const s=await Tde(n.url,r);return s.portalItem=n,s}async function Zbt(t){const e=(await Y2e(t)).serviceItemId;if(!e)return null;const i=new Mt({id:e,apiKey:t.apiKey}),r=await Xbt(t);r!=null&&(i.portal=new Ue({url:r}));try{return await i.load({signal:t.signal})}catch(n){return fl(n),null}}async function Y2e(t){if(t.rootDocument)return t.rootDocument;const e={query:{f:"json",...t.customParameters,token:t.apiKey},responseType:"json",signal:t.signal};try{const i=await Nt(t.sceneServerUrl,e);t.rootDocument=i.data}catch{t.rootDocument={}}return t.rootDocument}async function Xbt(t){const e=oi?.findServerInfo(t.sceneServerUrl);if(e?.owningSystemUrl)return e.owningSystemUrl;const i=t.sceneServerUrl.replace(/(.*\/rest)\/.*/i,"$1")+"/info";try{const r=(await Nt(i,{query:{f:"json"},responseType:"json",signal:t.signal})).data.owningSystemUrl;if(r)return r}catch(r){fl(r)}return null}async function Tde(t,e){const i=wu(t);if(!i)throw new ee("invalid-feature-service-url","Invalid feature service url");const r=i.url.path,n=e.layerId;if(n==null)return{serverUrl:r};const s=Y2e(e),a=e.featureServiceItem?await e.featureServiceItem.fetchData("json"):null,o=(a?.layers?.[0]||a?.tables?.[0])?.customParameters,l=b=>{const _={query:{f:"json",...o},responseType:"json",authMode:b,signal:e.signal};return Nt(r,_)},c=l("anonymous").catch(()=>l("no-prompt")),[h,f]=await Promise.all([c,s]),g=f?.layers,y=h.data&&h.data.layers;if(!Array.isArray(y))throw new Error("expected layers array");if(Array.isArray(g)){for(let b=0;b<Math.min(g.length,y.length);b++)if(g[b].id===n)return{serverUrl:r,layerId:y[b].id}}else if(n!=null&&n<y.length)return{serverUrl:r,layerId:y[n].id};throw new Error("could not find matching associated sublayer")}async function Jbt({sceneLayerItem:t,signal:e}){if(!t)return null;try{const i=(await t.fetchRelatedItems({relationshipType:"Service2Service",direction:"reverse"},{signal:e})).find(n=>n.type==="Feature Service")||null;if(!i)return null;const r=new Mt({portal:i.portal,id:i.id});return await r.load(),r}catch(i){return fl(i),null}}const Kbt=new Set(["Catalog Layer","Feature Layer","Oriented Imagery Layer"]);async function SFt(t,e){const{loadContext:i,...r}=e||{},n=i?await i.fetchServiceMetadata(t,r):await pW(t,r),s=PZ();Ede(n),kde(n);const a={serviceJSON:n,preferredHost:s};if((n.currentVersion??0)<10.5)return a;const o=`${t}/layers`,l=i?await i.fetchServiceMetadata(o,r):await pW(o,r);return Ede(l),kde(l),a.layersJSON={layers:l.layers,tables:l.tables},a}function Qbt(t){const{type:e}=t;return!!e&&Kbt.has(e)}function e0t(t){return t.type==="Table"}function kde(t){t.layers=t.layers?.filter(Qbt),t.tables=t.tables?.filter(e0t)}function t0t(t){t.type||="Feature Layer"}function i0t(t){t.type||="Table"}function Ede(t){t.layers?.forEach(t0t),t.tables?.forEach(i0t)}function Z2e(t){switch(t){case"Feature Layer":case"Table":return"FeatureLayer";case"Oriented Imagery Layer":return"OrientedImageryLayer";case"Catalog Layer":return"CatalogLayer"}return"FeatureLayer"}function tI(t){const e={id:t.id,name:t.name},i=Z2e(t.type);return i!=="FeatureLayer"&&(e.layerType=i),e}async function r0t(t,e,i){let r;if(t?.layers==null||t?.tables==null){const n=await i.fetchServiceMetadata(e,{customParameters:mT(t)?.customParameters});r=PZ(),(t=t||{}).layers=t.layers||n?.layers?.map(tI),t.tables=t.tables||n?.tables?.map(tI)}return{data:t,preferredHost:r}}function mT(t){if(!t)return null;const{layers:e,tables:i}=t;return e?.length?e[0]:i?.length?i[0]:null}function n0t(t,e){return e==null?null:[...t.layers||[],...t.tables||[]].find(i=>i.id===e)}function $Ft(t,e){return[...t.layers||[],...t.tables||[]].filter(({layerType:i})=>i?e.includes(i):e.includes("ArcGISFeatureLayer"))}function XJ(t){return(t?.layers?.length??0)+(t?.tables?.length??0)}function TFt(t){switch(t){case"catalog":return["CatalogLayer"];case"feature":return["ArcGISFeatureLayer"];case"oriented-imagery":return["OrientedImageryLayer"];case"subtype-group":return["SubtypeGroupLayer","SubtypeGroupTable"]}return null}function s0t(t){switch(t){case"CatalogLayer":return"CatalogLayer";case"OrientedImageryLayer":return"OrientedImageryLayer";case"SubtypeGroupLayer":case"SubtypeGroupTable":return"SubtypeGroupLayer"}return"FeatureLayer"}async function a0t(t,e,i){if(!t?.url)return e??{};if(e??={},!e.layers){const s=await i.fetchServiceMetadata(t.url);e.layers=s.layers?.map(tI)}const{serverUrl:r,portalItem:n}=await W2e(t.url,{sceneLayerItem:t,customParameters:mT(e)?.customParameters}).catch(()=>({serverUrl:null,portalItem:null}));if(r==null)return e.tables=[],e;if(!e.tables&&n){const s=await n.fetchData().catch(()=>null);if(s?.tables)e.tables=s.tables.map(tI);else{const a=await i.fetchServiceMetadata(r,{customParameters:mT(s)?.customParameters}).catch(()=>null);e.tables=a?.tables?.map(tI)}}if(e.tables)for(const s of e.tables)s.url=`${r}/${s.id}`;return e}async function o0t(t){let{portalItem:e}=t;!e||e instanceof Mt||(e=new Mt(e));const i=await l0t(e);return new i.constructor({portalItem:e,...i.properties})}async function l0t(t){await t.load();const e=new q2e;return c0t(await JJ(t,e))}async function JJ(t,e){switch(t.type){case"3DTiles Service":return t.typeKeywords.includes("3DObject")?_0t():t.typeKeywords.includes("GaussianSplat")?w0t():b0t();case"CSV":return x0t();case"Feature Collection":return p0t(t);case"Feature Service":return d0t(t,e);case"Feed":return I0t();case"GeoJson":return v0t();case"Group Layer":return M0t();case"Image Service":return f0t(t,e);case"KML":return S0t();case"Knowledge Graph Layer":return $0t();case"Map Service":return u0t(t,e);case"Media Layer":return A0t();case"Scene Service":return h0t(t,e);case"Stream Service":return m0t();case"Video Service":return g0t(t,e);case"Vector Tile Service":return y0t();case"WCS":return T0t();case"WFS":return k0t();case"WMS":return E0t();case"WMTS":return C0t();default:throw new ee("portal:unknown-item-type","Unknown item type '${type}'",{type:t.type})}}async function c0t(t){const e=t.className,i=yd[e];return{constructor:await i(),properties:t.properties}}async function u0t(t,e){return await P0t(t,e)?{className:"TileLayer"}:{className:"MapImageLayer"}}async function d0t(t,e){const i=await KJ(t,e);if(typeof i=="object"){const{sourceJSON:r,className:n}=i,s={sourceJSON:r};return i.id!=null&&(s.layerId=i.id),{className:n||"FeatureLayer",properties:s}}return{className:"GroupLayer"}}async function h0t(t,e){const i=await KJ(t,e,async()=>{try{if(!t.url)return[];const{serverUrl:r}=await W2e(t.url,{sceneLayerItem:t});return(await e.fetchServiceMetadata(r))?.tables??[]}catch{return[]}});if(typeof i=="object"){const r={};let n;if(i.id!=null?(r.layerId=i.id,n=`${t.url}/layers/${i.id}`):n=t.url,t.typeKeywords?.length){for(const a of Object.keys(D6))if(t.typeKeywords.includes(a))return{className:D6[a]}}const s=await e.fetchServiceMetadata(n,{customParameters:await e.fetchCustomParameters(t,a=>mT(a)?.customParameters)});return{className:D6[s?.layerType]||"SceneLayer",properties:r}}return i===!1&&(await e.fetchServiceMetadata(t.url))?.layerType==="Voxel"?{className:"VoxelLayer"}:{className:"GroupLayer"}}async function p0t(t){await t.load();const e=KS(t,"Map Notes"),i=KS(t,"Markup");if(e||i)return{className:"MapNotesLayer"};if(KS(t,"Route Layer"))return{className:"RouteLayer"};const r=await t.fetchData();return XJ(r)===1?{className:"FeatureLayer"}:{className:"GroupLayer"}}async function f0t(t,e){await t.load();const i=t.typeKeywords?.map(h=>h.toLowerCase())??[];if(i.includes("elevation 3d layer"))return{className:"ElevationLayer"};if(i.includes("tiled imagery"))return{className:"ImageryTileLayer"};const r=await e.fetchItemData(t),n=r?.layerType;if(n==="ArcGISTiledImageServiceLayer")return{className:"ImageryTileLayer"};if(n==="ArcGISImageServiceLayer")return{className:"ImageryLayer"};const s=await e.fetchServiceMetadata(t.url,{customParameters:await e.fetchCustomParameters(t)}),a=s.cacheType?.toLowerCase(),o=s.capabilities?.toLowerCase().includes("tilesonly"),l=s.tileInfo?.format?.toLowerCase()??"",c=a==null&&["jpg","jpeg","png","png8","png24","png32","mixed"].includes(l);return a==="map"||c||o?{className:"ImageryTileLayer"}:{className:"ImageryLayer"}}function m0t(){return{className:"StreamLayer"}}async function g0t(t,e){return typeof await KJ(t,e)=="object"?{className:"VideoLayer"}:{className:"GroupLayer"}}function y0t(){return{className:"VectorTileLayer"}}function v0t(){return{className:"GeoJSONLayer"}}function b0t(){return{className:"IntegratedMesh3DTilesLayer"}}function w0t(){return{className:"GaussianSplatLayer"}}function _0t(){return{className:"UnsupportedLayer"}}function x0t(){return{className:"CSVLayer"}}function S0t(){return{className:"KMLLayer"}}function $0t(){return{className:"KnowledgeGraphLayer"}}function T0t(){return{className:"WCSLayer"}}function k0t(){return{className:"WFSLayer"}}function E0t(){return{className:"WMSLayer"}}function C0t(){return{className:"WMTSLayer"}}function I0t(){return{className:"StreamLayer"}}function M0t(){return{className:"GroupLayer"}}function A0t(){return{className:"MediaLayer"}}async function P0t(t,e){const{tileInfo:i}=await e.fetchServiceMetadata(t.url,{customParameters:await e.fetchCustomParameters(t)});return i}async function KJ(t,e,i){const{url:r,type:n}=t,s=n==="Feature Service";if(!r)return{};if(/\/\d+$/.test(r)){if(s){const l=await e.fetchServiceMetadata(r,{customParameters:await e.fetchCustomParameters(t,c=>mT(c)?.customParameters)});return Qne(t,PZ()),{id:l.id,className:Z2e(l.type),sourceJSON:l}}return{}}if(n==="Video Service")return!(((await e.fetchServiceMetadata(r)).layers?.length??0)>1)&&{};await t.load();let a=await e.fetchItemData(t);if(s){const{data:l,preferredHost:c}=await r0t(a,r,e);Qne(t,c);const h=LU(l);if(typeof h=="object"){const f=n0t(l,h.id);h.className=s0t(f?.layerType)}return h}if(n==="Scene Service"&&(a=await a0t(t,a,e)),XJ(a)>0)return LU(a);const o=await e.fetchServiceMetadata(r);return i&&(o.tables=await i()),LU(o)}function LU(t){return XJ(t)===1&&{id:mT(t)?.id}}const O0t=Object.freeze(Object.defineProperty({__proto__:null,fromItem:o0t,selectLayerClassPath:JJ},Symbol.toStringTag,{value:"Module"}));async function X2e(t,e,i){if(!e)return;const r=e.map(s=>B0t(s,i)),n=await Promise.allSettled(r);for(const s of n)s.status==="rejected"||s.value&&t.add(s.value)}const L0t={ArcGISDimensionLayer:"DimensionLayer",ArcGISFeatureLayer:"FeatureLayer",ArcGISImageServiceLayer:"ImageryLayer",ArcGISMapServiceLayer:"MapImageLayer",ArcGISSceneServiceLayer:"SceneLayer",ArcGISTiledElevationServiceLayer:"ElevationLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",ArcGISTiledMapServiceLayer:"TileLayer",BuildingSceneLayer:"BuildingSceneLayer",CatalogLayer:"CatalogLayer",CSV:"CSVLayer",DefaultTileLayer:"TileLayer",GaussianSplatLayer:"GaussianSplatLayer",GeoJSON:"GeoJSONLayer",GroupLayer:"GroupLayer",IntegratedMesh3DTilesLayer:"IntegratedMesh3DTilesLayer",Object3DTilesLayer:"UnsupportedLayer",IntegratedMeshLayer:"IntegratedMeshLayer",KML:"KMLLayer",LineOfSightLayer:"LineOfSightLayer",MediaLayer:"MediaLayer",OGCFeatureLayer:"OGCFeatureLayer",OrientedImageryLayer:"OrientedImageryLayer",PointCloudLayer:"PointCloudLayer",RasterDataLayer:"UnsupportedLayer",VectorTileLayer:"VectorTileLayer",ViewshedLayer:"ViewshedLayer",Voxel:"VoxelLayer",WCS:"WCSLayer",WFS:"WFSLayer",WMS:"WMSLayer",WebTiledLayer:"WebTileLayer"},D0t={ArcGISTiledElevationServiceLayer:"ElevationLayer",DefaultTileLayer:"ElevationLayer",RasterDataElevationLayer:"UnsupportedLayer"},R0t={ArcGISFeatureLayer:"FeatureLayer"},z0t={ArcGISImageServiceLayer:"UnsupportedLayer",ArcGISMapServiceLayer:"UnsupportedLayer",ArcGISSceneServiceLayer:"SceneLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",ArcGISTiledMapServiceLayer:"TileLayer",DefaultTileLayer:"TileLayer",OpenStreetMap:"OpenStreetMapLayer",VectorTileLayer:"VectorTileLayer",WCS:"UnsupportedLayer",WMS:"UnsupportedLayer",WebTiledLayer:"WebTileLayer"},F0t={IntegratedMesh3DTilesLayer:"IntegratedMesh3DTilesLayer"},J2e={ArcGISAnnotationLayer:"UnsupportedLayer",ArcGISDimensionLayer:"UnsupportedLayer",ArcGISFeatureLayer:"FeatureLayer",ArcGISImageServiceLayer:"ImageryLayer",ArcGISImageServiceVectorLayer:"ImageryLayer",ArcGISMapServiceLayer:"MapImageLayer",ArcGISStreamLayer:"StreamLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",ArcGISTiledMapServiceLayer:"TileLayer",ArcGISVideoLayer:"VideoLayer",BingMapsAerial:"BingMapsLayer",BingMapsHybrid:"BingMapsLayer",BingMapsRoad:"BingMapsLayer",CatalogLayer:"CatalogLayer",CSV:"CSVLayer",DefaultTileLayer:"TileLayer",GeoJSON:"GeoJSONLayer",GeoRSS:"GeoRSSLayer",GroupLayer:"GroupLayer",KML:"KMLLayer",KnowledgeGraphLayer:"KnowledgeGraphLayer",MediaLayer:"MediaLayer",OGCFeatureLayer:"OGCFeatureLayer",OrientedImageryLayer:"OrientedImageryLayer",get ParquetLayer(){return ve("parquetlayer-persistence-enabled")?"ParquetLayer":"UnsupportedLayer"},SubtypeGroupLayer:"SubtypeGroupLayer",VectorTileLayer:"VectorTileLayer",WCS:"WCSLayer",WFS:"WFSLayer",WMS:"WMSLayer",WebTiledLayer:"WebTileLayer"},K2e={ArcGISFeatureLayer:"FeatureLayer",SubtypeGroupTable:"SubtypeGroupLayer"},Q2e={ArcGISImageServiceLayer:"ImageryLayer",ArcGISImageServiceVectorLayer:"ImageryLayer",ArcGISMapServiceLayer:"MapImageLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",ArcGISTiledMapServiceLayer:"TileLayer",BingMapsAerial:"BingMapsLayer",BingMapsHybrid:"BingMapsLayer",BingMapsRoad:"BingMapsLayer",DefaultTileLayer:"TileLayer",OpenStreetMap:"OpenStreetMapLayer",VectorTileLayer:"VectorTileLayer",WCS:"WCSLayer",WMS:"WMSLayer",WebTiledLayer:"WebTileLayer"},N0t={...J2e,LinkChartLayer:"LinkChartLayer"},j0t={...K2e},V0t={...Q2e};async function B0t(t,e){return U0t(await H0t(t,e),t,e)}async function U0t(t,e,i){const r=new t;return r.read(e,i.context),r.type==="group"&&(e.layerType==="GroupLayer"?await eK(r,e,i):QJ(e)?q0t(r,e,i.context):eEe(e)&&await W0t(r,e,i.context)),await DSe(r,i.context),r}async function H0t(t,e){const i=e.context,r=G0t(i);let n=t.layerType||t.type;!n&&e?.defaultLayerType&&(n=e.defaultLayerType);const s=r[n];let a=s?yd[s]:yd.UnknownLayer;if(QJ(t)){const o=i?.portal;if(t.itemId){const l=new Mt({id:t.itemId,portal:o});await l.load();const c=(await JJ(l,new q2e)).className||"UnknownLayer";a=yd[c]}}else n==="ArcGISFeatureLayer"?qbt(t)||Wbt(t)?a=yd.MapNotesLayer:Ybt(t)?a=yd.RouteLayer:eEe(t)&&(a=yd.GroupLayer):t.wmtsInfo?.url&&t.wmtsInfo.layerIdentifier?a=yd.WMTSLayer:n==="WFS"&&t.wfsInfo?.version!=="2.0.0"&&(a=yd.UnsupportedLayer);return a()}function eEe(t){return t.layerType!=="ArcGISFeatureLayer"||QJ(t)?!1:(t.featureCollection?.layers?.length??0)>1}function QJ(t){return t.type==="Feature Collection"}function G0t(t){let e;switch(t.origin){case"web-scene":switch(t.layerContainerType){case"basemap-base-layers":e=z0t;break;case"basemap-ground-layers":e=F0t;break;case"ground":e=D0t;break;case"tables":e=R0t;break;default:e=L0t}break;case"link-chart":switch(t.layerContainerType){case"basemap-base-layers":e=V0t;break;case"tables":e=j0t;break;default:e=N0t}break;default:switch(t.layerContainerType){case"basemap-base-layers":e=Q2e;break;case"tables":e=K2e;break;default:e=J2e}}return e}async function eK(t,e,i){const r=new We,n=X2e(r,Array.isArray(e.layers)?e.layers:[],i);try{try{if(await n,t.type==="group")return t.layers.addMany(r),t}catch(s){t.destroy();for(const a of r)a.destroy();throw s}}catch(s){throw s}}function q0t(t,e,i){e.itemId&&(t.portalItem=new Mt({id:e.itemId,portal:i?.portal}),t.when(()=>{const r=n=>{const s=n.layerId;tEe(n,t,e,s,i);const a=e.featureCollection?.layers?.[s];a&&n.read(a,i)};t.layers?.forEach(r),t.tables?.forEach(r)}))}async function W0t(t,e,i){const r=yd.FeatureLayer,n=await r(),s=e.featureCollection,a=s?.showLegend,o=s?.layers?.map((l,c)=>{const h=new n;h.read(l,i);const f={...i,ignoreDefaults:!0};return tEe(h,t,e,c,f),a!=null&&h.read({showLegend:a},f),h});t.layers.addMany(o??[])}function tEe(t,e,i,r,n){t.read({id:`${e.id}-sublayer-${r}`,visibility:i.visibleLayers?.includes(r)??!0},n)}const tK=Object.freeze(Object.defineProperty({__proto__:null,populateGroupLayer:eK,populateOperationalLayers:X2e},Symbol.toStringTag,{value:"Module"})),Y0t=Symbol("WebScene");async function Z0t(t){const e=[];for(const i of t.allLayers)if("beforeSave"in i&&typeof i.beforeSave=="function"){const r=i.beforeSave();r&&e.push(r)}await Promise.allSettled(e)}const X0t=new Set(["layer:unsupported","property:unsupported","symbol:unsupported","symbol-layer:unsupported","url:unsupported"]);function kFt(t,e,i){let r=(t.messages??[]).filter(({type:n})=>n==="error").map(({name:n,message:s,details:a})=>new ee(n,s,a));if(t.blockedRelativeUrls&&(r=r.concat(t.blockedRelativeUrls.map(n=>new ee("url:unsupported",`Relative url '${n}' is not supported`)))),i){const{ignoreUnsupported:n,supplementalUnsupportedErrors:s=[],requiredPropertyChecksDisabled:a}=i;n&&(r=r.filter(({name:o})=>!(X0t.has(o)||s.includes(o)))),a&&(r=r.filter(o=>o.name!=="web-document-write:property-required"))}if(r.length>0)throw new ee(e.errorName,"Failed to save due to unsupported or invalid content. See 'details.errors' for more detailed information",{errors:r})}function EFt(t){return vBe(t).some(e=>!!e.charts?.length)}let ba=class extends K1e(LSe(ASe(PSe(g0e(m0e(uA(Br))))))){constructor(t){super(t),this.allLayers=new hu({getCollections:()=>[this.layers],getChildrenFunction:e=>"layers"in e?e.layers:null}),this.allTables=f0e(this),this.fullExtent=void 0,this.operationalLayerType="GroupLayer",this.spatialReference=void 0,this.type="group",this._debouncedSaveOperations=ST(async(e,i,r)=>{const{save:n,saveAs:s}=await fe(()=>import("./groupLayerUtils-B8U2yMT0.js"),__vite__mapDeps([359,275,271,272,273]));switch(e){case 0:return n(this,i);case 1:return s(this,r,i)}})}initialize(){this._enforceVisibility(this.visibilityMode,this.visible),this.addHandles([ze(()=>{let t=this.parent;for(;t&&"parent"in t&&t.parent;)t=t.parent;return t&&Y0t in t},t=>{const e="prevent-adding-tables";this.removeHandles(e),t&&(this.tables.removeAll(),this.addHandles(Oa(()=>this.tables,"before-add",i=>{i.preventDefault(),$e.getLogger(this).errorOnce("tables","tables in group layers in a webscene are not supported. Please move the tables from the group layer to the webscene if you want to persist them.")}),e))},Ta),ze(()=>this.visible,this._onVisibilityChange.bind(this),xu)])}destroy(){this.allLayers.destroy(),this.allTables.destroy()}get sourceIsPortalItem(){return this.portalItem&&this.originIdOf("portalItem")===7}_writeLayers(t,e,i,r){const n=[];if(!t)return n;t.forEach(s=>{const a=SC(s,r.webmap?r.webmap.getLayerJSONFromResourceInfo(s):null,r);a?.layerType&&n.push(a)}),e.layers=n}set portalItem(t){this._set("portalItem",t)}readPortalItem(t,e,i){const{itemId:r,layerType:n}=e;if(n==="GroupLayer"&&r)return new Mt({id:r,portal:i?.portal})}writePortalItem(t,e){t?.id&&(e.itemId=t.id)}set visibilityMode(t){const e=this._get("visibilityMode")!==t;this._set("visibilityMode",t),e&&this._enforceVisibility(t,this.visible)}async beforeSave(){return Z0t(this)}load(t){const e=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection","Group Layer","Scene Service","Video Service"],layerModuleTypeMap:yd,populateGroupLayer:eK},t).catch(i=>{if(fl(i),this.sourceIsPortalItem)throw i});return this.addResolvingPromise(e),Promise.resolve(this)}async loadAll(){return KM(this,t=>{t(this.layers,this.tables)})}async save(t){return this._debouncedSaveOperations(0,t)}async saveAs(t,e){return this._debouncedSaveOperations(1,e,t)}layerAdded(t){t.visible&&this.visibilityMode==="exclusive"?this._turnOffOtherLayers(t):this.visibilityMode==="inherited"&&(t.visible=this.visible),this.hasHandles(t.uid)?console.error(`Layer read to Grouplayer: uid=${t.uid}`):this.addHandles(ze(()=>t.visible,e=>this._onChildVisibilityChange(t,e),xu),t.uid)}layerRemoved(t){this.removeHandles(t.uid),this._enforceVisibility(this.visibilityMode,this.visible)}_turnOffOtherLayers(t){this.layers.forEach(e=>{e!==t&&(e.visible=!1)})}_enforceVisibility(t,e){if(!mo(this).initialized)return;const i=this.layers;let r=i.find(n=>n.visible);switch(t){case"exclusive":i.length&&!r&&(r=i.at(0),r.visible=!0),this._turnOffOtherLayers(r);break;case"inherited":i.forEach(n=>{n.visible=e})}}_onVisibilityChange(t){this.visibilityMode==="inherited"&&this.layers.forEach(e=>{e.visible=t})}_onChildVisibilityChange(t,e){switch(this.visibilityMode){case"exclusive":e?this._turnOffOtherLayers(t):this._isAnyLayerVisible()||(t.visible=!0);break;case"inherited":t.visible=this.visible}}_isAnyLayerVisible(){return this.layers.some(t=>t.visible)}};d([m({readOnly:!0,dependsOn:[]})],ba.prototype,"allLayers",void 0),d([m({readOnly:!0})],ba.prototype,"allTables",void 0),d([m({json:{read:!0,write:!0}})],ba.prototype,"blendMode",void 0),d([m()],ba.prototype,"fullExtent",void 0),d([m({readOnly:!0})],ba.prototype,"sourceIsPortalItem",null),d([m({json:{read:!1,write:{ignoreOrigin:!0}}})],ba.prototype,"layers",void 0),d([qe("layers")],ba.prototype,"_writeLayers",null),d([m({type:["GroupLayer"]})],ba.prototype,"operationalLayerType",void 0),d([m({json:{origins:{"web-map":{read:!1,write:{overridePolicy(t,e,i){return{enabled:t?.type==="Group Layer"&&i?.initiator!==this}}}},"web-scene":{read:!1,write:!1}}}})],ba.prototype,"portalItem",null),d([Ve("web-map","portalItem",["itemId"])],ba.prototype,"readPortalItem",null),d([qe("web-map","portalItem",{itemId:{type:String}})],ba.prototype,"writePortalItem",null),d([m()],ba.prototype,"spatialReference",void 0),d([m({json:{read:!1},readOnly:!0,value:"group"})],ba.prototype,"type",void 0),d([m({type:["independent","inherited","exclusive"],value:"independent",json:{write:!0,origins:{"web-map":{type:["independent","exclusive"],write:(t,e,i)=>{t!=="inherited"&&(e[i]=t)}}}}})],ba.prototype,"visibilityMode",null),ba=d([U("esri.layers.GroupLayer")],ba);const M_=ba,J0t=Object.freeze(Object.defineProperty({__proto__:null,default:M_},Symbol.toStringTag,{value:"Module"})),iEe=en,K0t=Gr,rEe=Yi;WIe($e.getLogger("esri.symbols"),"esri.symbols",{replacement:"Individual symbol module imports",version:"4.32",warnOnce:!0});const iC="H_Level",x5=["Ready for Handover / Handed Over","Pending Delivery","For Appraisal/Offer to Buy"],nEe=["#70AD47","#FF0000","#FFAA00"],sEe=x5.map((t,e)=>Object.assign({category:t,value:e+1,color:nEe[e]})),Q0t="Status",ewt=["Paid","For Payment Processing","For Legal Pass","For Appraisal/Offer to Buy","For Expro","Quit Claim"],twt=[[112,173,71],[0,112,255],[255,255,0],[255,170,0],[255,0,0],[0,115,76]],iwt="REMARKS",rwt=["Demolished","Not Yet"],nwt=["Demolished","Occupied"],swt=["#FFAA00","#99A5A2"],awt="RELOCATION",owt=["RELOCATED","UNRELOCATED"],lwt=["Relocated","Un-relocated"],cwt=["#267300","#FF0000"];async function uwt(t){const{item:e}=t;e.layer.type!=="group"&&(e.panel={content:"legend",open:!0}),e.title==="Existing Structure"||e.title==="Demolished Structure"||e.title==="ISF (Informal Settlers Families)"||e.title==="East Valenzuela Station"||e.title==="Senate-DepEd Boundary"||e.title==="PTE Subterranean Lots"||e.title==="Handed-Over Lots"||e.title==="Structures"||e.title==="EVS Station/Creek"?e.visible=!1:e.visible=!0}const Cde=new nt({portalItem:{id:"a084d9cae5234d93b7aa50f7eb782aec",portal:{url:"https://gis.railway-sector.com/portal"}}}),dwt=new Ni({field:"Layer",uniqueValueInfos:[{value:"U-Shape Retaining Wall",symbol:new Zi({color:[104,104,104],style:"backward-diagonal",outline:{width:1,color:"black"}})},{value:"Cut & Cover Box",symbol:new Zi({color:[104,104,104],style:"backward-diagonal",outline:{width:1,color:"black"}})},{value:"TBM Shaft",symbol:new Zi({color:[104,104,104],style:"backward-diagonal",outline:{width:1,color:"black"}})},{value:"TBM",symbol:new Zi({color:[178,178,178],style:"backward-diagonal",outline:{width:.5,color:"black"}})},{value:"Station Platform",symbol:new Zi({color:[240,204,230],style:"backward-diagonal",outline:{width:.4,color:"black"}})},{value:"Station Box",symbol:new Zi({color:[0,0,0,0],outline:{width:2,color:"red"}})},{value:"NATM",symbol:new Zi({color:[178,178,178,0],style:"backward-diagonal",outline:{width:.5,color:"grey"}})}]}),hwt=new nt({portalItem:{id:"52d4f29105934e3f95f6b39c7e5fba6e",portal:{url:"https://gis.railway-sector.com/portal"}},layerId:2,renderer:dwt,minScale:15e4,maxScale:0,title:"Station Box",popupEnabled:!1,elevationInfo:{mode:"on-the-ground"}}),pwt=new Zi({color:[0,0,0,0],style:"solid",outline:new iEe({color:[110,110,110],width:.7})}),fwt=x5.map((t,e)=>Object.assign({value:e+1,label:t,symbol:new Zi({color:nEe[e]})})),mwt=new Ni({field:iC,defaultSymbol:pwt,uniqueValueInfos:fwt}),aEe=new vr({symbol:new rEe({color:"black",font:{size:8}}),labelPlacement:"above-center",labelExpressionInfo:{expression:"$feature.CN"}}),Xs=new nt({portalItem:{id:"0c172b82ddab44f2bb439542dd75e8ae",portal:{url:"https://gis.railway-sector.com/portal"}},layerId:8,title:"Land Acquisition",labelingInfo:[aEe],renderer:mwt,popupTemplate:{title:"<p>{Id}</p>",lastEditInfoEnabled:!1,returnGeometry:!0,content:[{type:"fields",fieldInfos:[{fieldName:"OWNER",label:"Land Owner"},{fieldName:"Station1"},{fieldName:"H_Level",label:"<p>Status of Land Acquisition</p>"}]}]}}),gwt=new Ni({valueExpression:"When($feature.StatusNVS3 > 0, 'withStatus', 'publicLands')",uniqueValueInfos:[{value:"withStatus",symbol:null},{value:"publicLands",symbol:new Zi({color:"#d8cdcdff",style:"diagonal-cross",outline:{width:1,color:"#d8cdcdff"}})}]}),rC=new nt({portalItem:{id:"0c172b82ddab44f2bb439542dd75e8ae",portal:{url:"https://gis.railway-sector.com/portal"}},layerId:8,title:"Public Lot",labelingInfo:[aEe],renderer:gwt,definitionExpression:"StatusNVS3 IS NULL",popupTemplate:{title:"<p>{Id}: Public Land</p>",lastEditInfoEnabled:!1,returnGeometry:!0,content:[{type:"fields",fieldInfos:[{fieldName:"OWNER",label:"Land Owner"},{fieldName:"Station1"},{fieldName:"StatusNVS3",label:"<p>Status of Land Acquisition</p>"}]}]}}),ywt=new Ca({symbol:new Zi({color:[0,0,0,0],style:"solid",outline:{color:[110,110,110],width:1.5}})}),vwt=new vr({symbol:new rEe({color:"white",font:{family:"Gill Sans",size:8}}),labelPlacement:"above-center",labelExpressionInfo:{expression:"$feature.CN"}});new nt({portalItem:{id:"0c172b82ddab44f2bb439542dd75e8ae",portal:{url:"https://gis.railway-sector.com/portal"}},layerId:8,title:"Lot Boundary",renderer:ywt,labelingInfo:[vwt]});const oEe=new Ca({symbol:new Zi({color:"#FF00C5",style:"solid",outline:new iEe({color:[110,110,110],width:.5})})}),AS=new nt({portalItem:{id:"0c172b82ddab44f2bb439542dd75e8ae",portal:{url:"https://gis.railway-sector.com/portal"}},layerId:8,definitionExpression:"HandedOver = 1",title:"Handed-Over Lots",renderer:oEe,popupEnabled:!1}),bwt=new nt({portalItem:{id:"0c172b82ddab44f2bb439542dd75e8ae",portal:{url:"https://gis.railway-sector.com/portal"}},layerId:8,definitionExpression:"Type = 'Subterranean' AND PTE = 1",title:"PTE Subterranean Lots",renderer:oEe,popupEnabled:!1}),lEe=new Zi({color:[0,0,0,0],style:"solid",outline:{style:"short-dash",color:[215,215,158],width:1.5}}),wwt=ewt.map((t,e)=>Object.assign({value:e+1,label:t,symbol:new Zi({color:twt[e],style:"backward-diagonal",outline:{color:"#6e6e6e",width:.7}})})),_wt=new Ni({field:Q0t,defaultSymbol:lEe,uniqueValueInfos:wwt}),xwt=new nt({portalItem:{id:"0c172b82ddab44f2bb439542dd75e8ae",portal:{url:"https://gis.railway-sector.com/portal"}},layerId:9,title:"Existing Structure",renderer:_wt,popupTemplate:{title:"Structure ID: <b>{STRUCTURE_TAG_NO_}</b>",lastEditInfoEnabled:!1,returnGeometry:!0,content:[{type:"fields",fieldInfos:[{fieldName:"STATION",label:"Station"},{fieldName:"Status",label:"<b>Status of Structure</b>"},{fieldName:"LOT_OWNER",label:"Lot Owner"}]}]}}),Swt=rwt.map((t,e)=>Object.assign({value:t,label:nwt[e],symbol:new Zi({color:swt[e],style:"solid",outline:{color:"#6E6E6E",width:.7}})})),$wt=new Ni({field:iwt,defaultSymbol:lEe,uniqueValueInfos:Swt}),Twt=new nt({portalItem:{id:"0c172b82ddab44f2bb439542dd75e8ae",portal:{url:"https://gis.railway-sector.com/portal"}},layerId:9,title:"Demolished Structure",renderer:$wt,popupTemplate:{title:"Structure ID: <b>{STRUCTURE_TAG_NO_}</b>",lastEditInfoEnabled:!1,returnGeometry:!0,content:[{type:"fields",fieldInfos:[{fieldName:"STATION",label:"Station"},{fieldName:"Status",label:"<b>Status of Structure</b>"},{fieldName:"LOT_OWNER",label:"Lot Owner"}]}]}}),kwt=owt.map((t,e)=>Object.assign({value:t,label:lwt[e],symbol:new K0t({size:9,color:cwt[e],outline:{width:1.5,color:"white"}})})),Ewt=new Ni({field:awt,uniqueValueInfos:kwt}),Cwt=new nt({portalItem:{id:"0c172b82ddab44f2bb439542dd75e8ae",portal:{url:"https://gis.railway-sector.com/portal"}},layerId:10,title:"ISF (Informal Settlers Families)",renderer:Ewt,labelsVisible:!1}),Iwt=new Ni({field:"MappingBoundary",uniqueValueInfos:[{value:1,label:"",symbol:new Zi({color:[0,0,0,0],outline:{width:2.5,color:[255,255,255],style:"short-dash"}})}]}),Mwt=new nt({portalItem:{id:"0c172b82ddab44f2bb439542dd75e8ae",portal:{url:"https://gis.railway-sector.com/portal"}},layerId:4,renderer:Iwt,definitionExpression:"MappingBoundary = 1",title:"Construction Boundary",elevationInfo:{mode:"on-the-ground"},popupEnabled:!1}),cEe=new nt({portalItem:{id:"52d4f29105934e3f95f6b39c7e5fba6e",portal:{url:"https://gis.railway-sector.com/portal"}},layerId:6,title:"Alignment",popupEnabled:!1}),Awt=new nt({portalItem:{id:"0c172b82ddab44f2bb439542dd75e8ae",portal:{url:"https://gis.railway-sector.com/portal"}},layerId:2,title:"DPWH Segment",popupEnabled:!1}),Pwt=new nt({portalItem:{id:"0c172b82ddab44f2bb439542dd75e8ae",portal:{url:"https://gis.railway-sector.com/portal"}},layerId:6,title:"Depot Building",popupEnabled:!1}),Owt=new nt({portalItem:{id:"0c172b82ddab44f2bb439542dd75e8ae",portal:{url:"https://gis.railway-sector.com/portal"}},layerId:7,title:"BSS Building",popupEnabled:!1}),Lwt=new nt({portalItem:{id:"0c172b82ddab44f2bb439542dd75e8ae",portal:{url:"https://gis.railway-sector.com/portal"}},layerId:1,title:"East Valenzuela Station",popupEnabled:!1}),Dwt=new nt({portalItem:{id:"0c172b82ddab44f2bb439542dd75e8ae",portal:{url:"https://gis.railway-sector.com/portal"}},layerId:5,title:"NCC Property",popupEnabled:!1}),Rwt=new vr({labelExpressionInfo:{expression:"$feature.Station1"},symbol:{type:"text",color:"black",haloColor:"white",haloSize:1,font:{size:10,weight:"bold"}}}),uEe=new nt({portalItem:{id:"52d4f29105934e3f95f6b39c7e5fba6e",portal:{url:"https://gis.railway-sector.com/portal"}},layerId:1,labelingInfo:[Rwt],title:"Station",definitionExpression:"Project = 'MMSP'"});uEe.listMode="hide";const zwt=new nt({portalItem:{id:"52d4f29105934e3f95f6b39c7e5fba6e",portal:{url:"https://gis.railway-sector.com/portal"}},layerId:3,title:"Creek Diversion",popupEnabled:!1}),Fwt=new M_({title:"Land",visible:!0,visibilityMode:"independent",layers:[bwt,AS,Xs,rC]}),Nwt=new M_({title:"East Valenzuela Station",visible:!0,visibilityMode:"independent",layers:[zwt,Lwt]});new M_({title:"Alignment",visible:!0,visibilityMode:"independent",layers:[hwt,cEe]});const jwt=new M_({title:"Boundary",visible:!0,visibilityMode:"independent",layers:[Mwt,Dwt,Awt]}),Vwt=new M_({title:"Depot Buildings",visible:!0,visibilityMode:"independent",layers:[Pwt,Owt]}),Bwt=new M_({title:"Structures",visible:!1,visibilityMode:"independent",layers:[xwt,Twt]});function Uwt(){const[t,e]=je.useState(),i=document.querySelector("arcgis-map"),r=document.querySelector("arcgis-search");return je.useEffect(()=>{t&&(i.map.add(Fwt),i.map.add(Vwt),i.map.add(Nwt),i.map.add(Bwt),i.map.add(Cwt),i.map.add(jwt),i.map.add(uEe),i.map.add(AS),i.map.add(cEe),i.map.ground.navigationConstraint="none",i.view.ui.components=[],r.sources=[{layer:Xs,searchFields:["LotID"],displayField:"LotID",exactMatch:!1,outFields:["LotID"],name:"Lot ID",placeholder:"example: 10083"}],r.allPlaceholder="LotID",r.includeDefaultSourcesDisabled=!0,r.locationDisabled=!0)}),ht.jsxs("arcgis-map",{basemap:"dark-gray-vector",ground:"world-elevation",viewingMode:"local",zoom:"12",center:"121.0194387, 14.6972616",onarcgisViewReadyChange:n=>{e(n.target)},children:[ht.jsx("arcgis-compass",{slot:"top-right"}),ht.jsx("arcgis-expand",{"close-on-esc":!0,slot:"top-right",mode:"floating",children:ht.jsx("arcgis-search",{})}),ht.jsx("arcgis-zoom",{slot:"bottom-right"})]})}class _i{constructor(e){Object.defineProperty(this,"_value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._value=e}get value(){return this._value/100}get percent(){return this._value}toString(){return""+this._value+"%"}interpolate(e,i){return e+this.value*(i-e)}static normalize(e,i,r){return e instanceof _i?e:i===r?new _i(0):new _i(Math.min(Math.max((e-i)*(1/(r-i)),0),1)*100)}}function Ks(t){return new _i(t)}Ks(0);const bi=Ks(100),ai=Ks(50);function Ide(t){return t instanceof _i}function iK(t){return Number(t)!==t}function Hwt(t){return{}.toString.call(t)}function pc(t){if(t!=null&&!kt(t)){let e=Number(t);if(iK(e)&&n_(t)&&t!=""&&t.match(/[0-9]+/)){const i=t.replace(/[^0-9.\-]+/g,"");return t===i?e:pc(i)}return e}return t}function Gwt(t){if(fW(t))return new Date(t);if(kt(t))return new Date(t);{let e=Number(t);return kt(e)?new Date(e):new Date(t)}}function qwt(t){if(iK(t))return"NaN";if(t===1/0)return"Infinity";if(t===-1/0)return"-Infinity";if(t===0&&1/t===-1/0)return"-0";let e=t<0;t=Math.abs(t);let i=/^([0-9]+)(?:\.([0-9]+))?(?:e[\+\-]([0-9]+))?$/.exec(""+t),r=i[1],n=i[2]||"",s;if(i[3]===void 0)s=n===""?r:r+"."+n;else{let a=+i[3];if(t<1){let o=a-1;s="0."+Mde("0",o)+r+n}else{let o=a-n.length;o===0?s=r+n:o<0?s=r+n.slice(0,o)+"."+n.slice(o):s=r+n+Mde("0",o)}}return e?"-"+s:s}function Mde(t,e){return new Array(e+1).join(t)}function fW(t){return Hwt(t)==="[object Date]"}function n_(t){return typeof t=="string"}function kt(t){return typeof t=="number"&&Number(t)==t}function TA(t){return typeof t=="object"&&t!==null}const Ov="____",PS="____";function aM(t,e){const i=t.length;for(let r=0;r<i;++r)if(t[r]===e)return r;return-1}function Wwt(t,e){const i=t.length;for(let r=0;r<i;++r)if(e(t[r]))return!0;return!1}function mW(t,e){const i=t.length,r=new Array(i);for(let n=0;n<i;++n)r[n]=e(t[n],n);return r}function Ne(t,e){const i=t.length;for(let r=0;r<i;++r)e(t[r],r)}function iI(t,e){let i=t.length;for(;i>0;)--i,e(t[i],i)}function rK(t,e){const i=t.length;for(let r=0;r<i&&e(t[r],r);++r);}function Im(t,e){let i=!1,r=0;for(;;){if(r=t.indexOf(e,r),r===-1)return i;i=!0,t.splice(r,1)}}function Fo(t,e){let i=t.indexOf(e);return i!==-1?(t.splice(i,1),!0):!1}function Ywt(t,e,i){let r=aM(t,e);r!==-1&&gW(t,r),t.push(e)}function oM(t,e){t.indexOf(e)===-1&&t.push(e)}function Zwt(t){const e=t.length,i=new Array(e);for(let r=0;r<e;++r)i[r]=t[r];return i}function DU(t,e,i){t.splice(e,0,i)}function gW(t,e){t.splice(e,1)}function dEe(t,e){const i=t.length;for(let r=0;r<i;++r)if(e(t[r],r))return r;return-1}function Xwt(t,e){let i=t.length;for(;i>0;)if(--i,e(t[i],i))return i;return-1}function hEe(t,e){const i=dEe(t,e);if(i!==-1)return t[i]}function Jwt(t,e){const i=Xwt(t,e);if(i!==-1)return t[i]}function Kwt(t,e){let i=0,r=t.length,n=!1;for(;i<r;){const s=i+r>>1,a=e(t[s]);a<0?i=s+1:a===0?(n=!0,i=s+1):r=s}return{found:n,index:n?i-1:i}}function Qwt(t,e){let i=0,r=t.length,n=!1;for(;i<r;){const s=i+r>>1,a=e(t[s]);a<0?i=s+1:(a===0&&(n=!0),r=s)}return{found:n,index:i}}function gj(t,e){let i=t.length;for(;i>0;)--i,e(t[i])||t.splice(i,1)}function Ia(t){return Object.keys(t)}function e_t(t,e){return Ia(t).sort(e)}function t_t(t){return Object.assign({},t)}function Lr(t,e){Ia(t).forEach(i=>{e(i,t[i])})}function i_t(t,e){for(let i in t)if(r_t(t,i)&&!e(i,t[i]))break}function r_t(t,e){return{}.hasOwnProperty.call(t,e)}class nK{constructor(){Object.defineProperty(this,"_disposed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._disposed=!1}isDisposed(){return this._disposed}dispose(){this._disposed||(this._disposed=!0,this._dispose())}}class As{constructor(e){Object.defineProperty(this,"_disposed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_dispose",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._disposed=!1,this._dispose=e}isDisposed(){return this._disposed}dispose(){this._disposed||(this._disposed=!0,this._dispose())}}class n_t extends nK{constructor(){super(...arguments),Object.defineProperty(this,"_disposers",{enumerable:!0,configurable:!0,writable:!0,value:[]})}_dispose(){Ne(this._disposers,e=>{e.dispose()})}}class gl extends nK{constructor(e){super(),Object.defineProperty(this,"_disposers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._disposers=e}_dispose(){Ne(this._disposers,e=>{e.dispose()})}get disposers(){return this._disposers}}class pEe extends As{constructor(){super(...arguments),Object.defineProperty(this,"_counter",{enumerable:!0,configurable:!0,writable:!0,value:0})}increment(){return++this._counter,new As(()=>{--this._counter,this._counter===0&&this.dispose()})}}function s_t(t){t.parentNode&&t.parentNode.removeChild(t)}function Nn(t,e,i,r){return t.addEventListener(e,i,r||!1),new As(()=>{t.removeEventListener(e,i,r||!1)})}function fEe(t){return Nn(window,"resize",e=>{t()})}function rw(t){switch(t){case"touchevents":return window.hasOwnProperty("TouchEvent");case"pointerevents":return window.hasOwnProperty("PointerEvent");case"mouseevents":return window.hasOwnProperty("MouseEvent");case"wheelevents":return window.hasOwnProperty("WheelEvent");case"keyboardevents":return window.hasOwnProperty("KeyboardEvent")}return!1}function RU(t){return t.pointerId||0}function a_t(){if(document.activeElement&&document.activeElement!=document.body)if(document.activeElement.blur)document.activeElement.blur();else{let t=document.createElement("button");t.style.position="fixed",t.style.top="0px",t.style.left="-10000px",document.body.appendChild(t),t.focus(),t.blur(),document.body.removeChild(t)}}function o_t(t){t&&t.focus()}function yW(t){if(rw("pointerevents"))return t;if(rw("touchevents"))switch(t){case"pointerover":return"touchstart";case"pointerout":return"touchend";case"pointerleave":return"touchend";case"pointerdown":return"touchstart";case"pointermove":return"touchmove";case"pointerup":return"touchend";case"click":return"click";case"dblclick":return"dblclick"}else if(rw("mouseevents"))switch(t){case"pointerover":return"mouseover";case"pointerout":return"mouseout";case"pointerleave":return"mouseleave";case"pointerdown":return"mousedown";case"pointermove":return"mousemove";case"pointerup":return"mouseup";case"click":return"click";case"dblclick":return"dblclick"}return t}function Ade(t){if(typeof Touch<"u"&&t instanceof Touch)return!0;if(typeof PointerEvent<"u"&&t instanceof PointerEvent&&t.pointerType!=null)switch(t.pointerType){case"touch":case"pen":case 2:return!0;case"mouse":case 4:return!1;default:return!(t instanceof MouseEvent)}else if(t.type!=null&&t.type.match(/^mouse/))return!1;return!0}function BL(t,e,i){t.style[e]=i}function l_t(t,e){return t.style[e]}function mEe(t){if(t.composedPath){const e=t.composedPath();return e.length===0?null:e[0]}else return t.target}function c_t(t,e){let i=e;for(;;){if(t===i)return!0;if(i.parentNode===null){if(i.host==null)return!1;i=i.host}else i=i.parentNode}}function u_t(t,e){return t.target&&c_t(e.root.dom,t.target)}function pS(t,e){e?t.style.pointerEvents="auto":t.style.pointerEvents="none"}function UL(t){if(t.key!==void 0)return t.key;switch(t.keyCode){case 9:return"Tab";case 13:return"Enter";case 16:return"Shift";case 17:return"Control";case 27:return"Escape";case 32:return" ";case 37:return"ArrowLeft";case 38:return"ArrowUp";case 39:return"ArrowRight";case 40:return"ArrowDown";case 46:return"Delete"}return""+t.keyCode}function d_t(){return/apple/i.test(navigator.vendor)&&"ontouchend"in document}function h_t(){return d_t()?1:void 0}function Ms(t,e){return kt(t)?t:t!=null&&kt(t.value)&&kt(e)?e*t.value:0}function p_t(t){let e=(""+t).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return e?Math.max(0,(e[1]?e[1].length:0)-(e[2]?+e[2]:0)):0}function es(t,e=0,i="0"){return typeof t!="string"&&(t=t.toString()),e>t.length?Array(e-t.length+1).join(i)+t:t}function f_t(t){return t.replace(/^[\s]*/,"")}function m_t(t){return t.replace(/[\s]*$/,"")}function n$(t){return f_t(m_t(t))}function g_t(t,e,i=!1,r="..."){if(t.length>e){let n=e-1;for(;n>=0&&t.charAt(n).match(/\w/);)n--;return n>=0&&i==!1?t.substring(0,n+1)+"...":t.substring(0,e)+r}else return t}function sK(t){return t.replace(/\/(date|number|duration)$/i,"")}function Pde(t){return t&&t.replace(/<[^>]*>/g,"")}function Ode(t){return t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}function y_t(t){const e=/[\u0590-\u05FF\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]/,i=/([^]*[])/gi;let r=t.split(/(\s+)/),n=[];return r.forEach(s=>{if(s.match(/^\s+$/))(s=" ")&&(s="  "),n.push(s);else if(e.test(s)){let a=s.split(i).filter(o=>o!=="");n=n.concat(a)}else n=n.concat([...s])}),n}function Lde(t,e=!1){const i=new Date(t.getFullYear(),0,0),r=t.getTime()-i.getTime()+(i.getTimezoneOffset()-t.getTimezoneOffset())*60*1e3,n=1e3*60*60*24;return Math.floor(r/n)}function S5(t,e=!1){const i=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate())),r=i.getUTCDay()||7;i.setUTCDate(i.getUTCDate()+4-r);const n=new Date(Date.UTC(i.getUTCFullYear(),0,1));return Math.ceil(((i.getTime()-n.getTime())/864e5+1)/7)}function v_t(t,e=!1){const i=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate())),r=i.getUTCDay()||7;return i.setUTCDate(i.getUTCDate()+4-r),new Date(Date.UTC(i.getUTCFullYear(),0,1)).getFullYear()}function b_t(t,e=!1){const i=S5(new Date(t.getFullYear(),t.getMonth(),1),e);let r=S5(t,e);return r==1&&(r=53),r-i+1}function w_t(t,e,i=1,r=!1){let n=new Date(e,0,4,0,0,0,0);return r&&n.setUTCFullYear(e),t*7+i-((n.getDay()||7)+3)}function HL(t,e){return t>12?t-=12:t===0&&(t=12),e!=null?t+(e-1):t}function GL(t,e=!1,i=!1,r=!1,n){if(r)return e?"Coordinated Universal Time":"UTC";if(n){const o=t.toLocaleString("en-US",{timeZone:n}),l=t.toLocaleString("en-US",{timeZone:n,timeZoneName:e?"long":"short"});return n$(l.substr(o.length))}let s=t.toLocaleString("UTC"),a=t.toLocaleString("UTC",{timeZoneName:e?"long":"short"}).substr(s.length);return i===!1&&(a=a.replace(/ (standard|daylight|summer|winter) /i," ")),n$(a)}function __t(t,e){const i=e||new Date(Date.UTC(2012,0,1,0,0,0,0)),r=new Date(i.toLocaleString("en-US",{timeZone:"UTC"}));return(new Date(i.toLocaleString("en-US",{timeZone:t})).getTime()-r.getTime())/6e4*-1}function CFt(t){return t.charAt(0).toUpperCase()+t.slice(1)}function gEe(t){let e,i,r,n=t.h,s=t.s,a=t.l;if(s==0)e=i=r=a;else{let o=function(f,g,y){return y<0&&(y+=1),y>1&&(y-=1),y<.16666666666666666?f+(g-f)*6*y:y<.5?g:y<.6666666666666666?f+(g-f)*(.6666666666666666-y)*6:f},l=a<.5?a*(1+s):a+s-a*s,c=2*a-l;e=o(c,l,n+1/3),i=o(c,l,n),r=o(c,l,n-1/3)}return{r:Math.round(e*255),g:Math.round(i*255),b:Math.round(r*255)}}function yEe(t){let e=t.r/255,i=t.g/255,r=t.b/255,n=Math.max(e,i,r),s=Math.min(e,i,r),a=0,o=0,l=(n+s)/2;if(n===s)a=o=0;else{let c=n-s;switch(o=l>.5?c/(2-n-s):c/(n+s),n){case e:a=(i-r)/c+(i<r?6:0);break;case i:a=(r-e)/c+2;break;case r:a=(e-i)/c+4;break}a/=6}return{h:a,s:o,l}}function x_t(t,e){return t&&{r:Math.max(0,Math.min(255,t.r+ZD(t.r,e))),g:Math.max(0,Math.min(255,t.g+ZD(t.g,e))),b:Math.max(0,Math.min(255,t.b+ZD(t.b,e))),a:t.a}}function ZD(t,e){let i=e>0?255-t:t;return Math.round(i*e)}function S_t(t,e){if(t){let i=Math.min(Math.max(t.r,t.g,t.b),230),r=ZD(i,e);return{r:Math.max(0,Math.min(255,Math.round(t.r+r))),g:Math.max(0,Math.min(255,Math.round(t.g+r))),b:Math.max(0,Math.min(255,Math.round(t.b+r))),a:t.a}}else return t}function Dde(t){return(t.r*299+t.g*587+t.b*114)/1e3>=128}function $_t(t,e){if(t===void 0||e==1)return t;let i=yEe(t);return i.s=e,gEe(i)}function T_t(t,e={r:255,g:255,b:255},i={r:255,g:255,b:255}){let r=e,n=i;return Dde(i)&&(r=i,n=e),Dde(t)?n:r}function uc(t,e){return t||(t=[]),[...t,...e].filter((i,r,n)=>n.indexOf(i)===r)}function IFt(t,e){return!(!e||t.left!=e.left||t.right!=e.right||t.top!=e.top||t.bottom!=e.bottom)}function vEe(t){return t[0]==="#"&&(t=t.substr(1)),t.length==3&&(t=t[0].repeat(2)+t[1].repeat(2)+t[2].repeat(2)),parseInt(t,16)}function k_t(t){t=t.replace(/[ ]/g,"");let e=t.match(/^rgb\(([0-9]*),([0-9]*),([0-9]*)\)/i);if(e)e.push("1");else if(e=t.match(/^rgba\(([0-9]*),([0-9]*),([0-9]*),([.0-9]*)\)/i),!e)return 0;let i="";for(let r=1;r<=3;r++){let n=parseInt(e[r]).toString(16);n.length==1&&(n="0"+n),i+=n}return vEe(i)}function fu(t){return At.fromAny(t)}class At{constructor(e){Object.defineProperty(this,"_hex",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._hex=e|0}get hex(){return this._hex}get r(){return this._hex>>>16}get g(){return this._hex>>8&255}get b(){return this._hex&255}toCSS(e=1){return"rgba("+this.r+", "+this.g+", "+this.b+", "+e+")"}toCSSHex(){return"#"+es(this.r.toString(16),2)+es(this.g.toString(16),2)+es(this.b.toString(16),2)}toHSL(e=1){return yEe({r:this.r,g:this.g,b:this.b})}static fromHSL(e,i,r){const n=gEe({h:e,s:i,l:r});return this.fromRGB(n.r,n.g,n.b)}toString(){return this.toCSSHex()}static fromHex(e){return new At(e)}static fromRGB(e,i,r){return new At((r|0)+(i<<8)+(e<<16))}static fromString(e){return new At(vEe(e))}static fromCSS(e){return new At(k_t(e))}static fromAny(e){if(n_(e)){if(e[0]=="#")return At.fromString(e);if(e.substr(0,3)=="rgb")return At.fromCSS(e)}else{if(kt(e))return At.fromHex(e);if(e instanceof At)return At.fromHex(e.hex)}throw new Error("Unknown color syntax: "+e)}static alternative(e,i,r){const n=T_t({r:e.r,g:e.g,b:e.b},i?{r:i.r,g:i.g,b:i.b}:void 0,r?{r:r.r,g:r.g,b:r.b}:void 0);return this.fromRGB(n.r,n.g,n.b)}static interpolate(e,i,r,n="rgb"){if(n=="hsl"){const s=i.toHSL(),a=r.toHSL();return At.fromHSL(jy(e,s.h,a.h),jy(e,s.s,a.s),jy(e,s.l,a.l))}else return At.fromRGB(jy(e,i.r,r.r),jy(e,i.g,r.g),jy(e,i.b,r.b))}static lighten(e,i){const r=x_t({r:e.r,g:e.g,b:e.b},i);return At.fromRGB(r.r,r.g,r.b)}static brighten(e,i){const r=S_t({r:e.r,g:e.g,b:e.b},i);return At.fromRGB(r.r,r.g,r.b)}static saturate(e,i){const r=$_t({r:e.r,g:e.g,b:e.b},i);return At.fromRGB(r.r,r.g,r.b)}}class tk{constructor(){Object.defineProperty(this,"_listeners",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_killed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_disabled",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_iterating",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_enabled",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_disposed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._listeners=[],this._killed=[],this._disabled={},this._iterating=0,this._enabled=!0,this._disposed=!1}isDisposed(){return this._disposed}dispose(){if(!this._disposed){this._disposed=!0;const e=this._listeners;this._iterating=1,this._listeners=null,this._disabled=null;try{Ne(e,i=>{i.disposer.dispose()})}finally{this._killed=null,this._iterating=null}}}hasListeners(){return this._listeners.length!==0}hasListenersByType(e){return Wwt(this._listeners,i=>(i.type===null||i.type===e)&&!i.killed)}enable(){this._enabled=!0}disable(){this._enabled=!1}enableType(e){delete this._disabled[e]}disableType(e,i=1/0){this._disabled[e]=i}_removeListener(e){if(this._iterating===0){const i=this._listeners.indexOf(e);if(i===-1)throw new Error("Invalid state: could not remove listener");this._listeners.splice(i,1)}else this._killed.push(e)}_removeExistingListener(e,i,r,n){if(this._disposed)throw new Error("EventDispatcher is disposed");this._eachListener(s=>{s.once===e&&s.type===i&&(r===void 0||s.callback===r)&&s.context===n&&s.disposer.dispose()})}isEnabled(e){if(this._disposed)throw new Error("EventDispatcher is disposed");return this._enabled&&this._listeners.length>0&&this.hasListenersByType(e)&&this._disabled[e]===void 0}removeType(e){if(this._disposed)throw new Error("EventDispatcher is disposed");this._eachListener(i=>{i.type===e&&i.disposer.dispose()})}has(e,i,r){return dEe(this._listeners,s=>s.once!==!0&&s.type===e&&(i===void 0||s.callback===i)&&s.context===r)!==-1}_shouldDispatch(e){if(this._disposed)throw new Error("EventDispatcher is disposed");const i=this._disabled[e];return kt(i)?(i<=1?delete this._disabled[e]:--this._disabled[e],!1):this._enabled}_eachListener(e){++this._iterating;try{Ne(this._listeners,e)}finally{--this._iterating,this._iterating===0&&this._killed.length!==0&&(Ne(this._killed,i=>{this._removeListener(i)}),this._killed.length=0)}}dispatch(e,i){this._shouldDispatch(e)&&this._eachListener(r=>{!r.killed&&(r.type===null||r.type===e)&&(r._debounceDelay?(r._debounceTimeout&&window.clearTimeout(r._debounceTimeout),r._debounceTimeout=window.setTimeout(()=>{r._debounceTimeout=void 0,r.killed||r.dispatch(e,i)},r._debounceDelay)):r.dispatch(e,i))})}_on(e,i,r,n,s,a,o){if(this._disposed)throw new Error("EventDispatcher is disposed");this._removeExistingListener(e,i,r,n);const l={type:i,callback:r,context:n,shouldClone:s,dispatch:a,killed:!1,once:e,disposer:new As(()=>{l.killed=!0,l._debounceTimeout&&window.clearTimeout(l._debounceTimeout),this._removeListener(l)}),_debounceDelay:o};return this._listeners.push(l),l}onAll(e,i,r=!0){return this._on(!1,null,e,i,r,(n,s)=>e.call(i,s)).disposer}on(e,i,r,n=!0){return this._on(!1,e,i,r,n,(s,a)=>i.call(r,a)).disposer}onDebounced(e,i,r,n,s=!0){return this._on(!1,e,i,n,s,(a,o)=>i.call(n,o),r).disposer}once(e,i,r,n=!0){const s=this._on(!0,e,i,r,n,(a,o)=>{s.disposer.dispose(),i.call(r,o)});return s.disposer}off(e,i,r){this._removeExistingListener(!1,e,i,r)}copyFrom(e){if(this._disposed)throw new Error("EventDispatcher is disposed");if(e===this)throw new Error("Cannot copyFrom the same TargetedEventDispatcher");const i=[];return Ne(e._listeners,r=>{!r.killed&&r.shouldClone&&(r.type===null?i.push(this.onAll(r.callback,r.context)):r.once?i.push(this.once(r.type,r.callback,r.context)):i.push(this.on(r.type,r.callback,r.context)))}),new gl(i)}}function Rde(t){return vl(this,void 0,void 0,function*(){if(t!==void 0){const e=[];Lr(t,(i,r)=>{e.push(r.waitForStop())}),yield Promise.all(e)}})}function jy(t,e,i){return e+t*(i-e)}function E_t(t,e,i){return t>=1?i:e}function bEe(t,e,i){return new _i(jy(t,e.percent,i.percent))}function C_t(t,e,i){return At.interpolate(t,e,i)}function I_t(t,e){return typeof t=="number"&&typeof e=="number"?jy:t instanceof _i&&e instanceof _i?bEe:t instanceof At&&e instanceof At?C_t:E_t}var nw;(function(t){t[t.Stopped=0]="Stopped",t[t.Playing=1]="Playing",t[t.Paused=2]="Paused"})(nw||(nw={}));function U2(t,e){if(!(t>=0&&t<e))throw new Error("Index out of bounds: "+t)}class yj{constructor(e=[]){Object.defineProperty(this,"_values",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:new tk}),this._values=e}get values(){return this._values}contains(e){return this._values.indexOf(e)!==-1}removeValue(e){let i=0,r=this._values.length;for(;i<r;)this._values[i]===e?(this.removeIndex(i),--r):++i}indexOf(e){return aM(this._values,e)}get length(){return this._values.length}hasIndex(e){return e>=0&&e<this._values.length}getIndex(e){return this._values[e]}_onPush(e){this.events.isEnabled("push")&&this.events.dispatch("push",{type:"push",target:this,newValue:e})}_onInsertIndex(e,i){this.events.isEnabled("insertIndex")&&this.events.dispatch("insertIndex",{type:"insertIndex",target:this,index:e,newValue:i})}_onSetIndex(e,i,r){this.events.isEnabled("setIndex")&&this.events.dispatch("setIndex",{type:"setIndex",target:this,index:e,oldValue:i,newValue:r})}_onSwap(e,i){this.events.isEnabled("swap")&&this.events.dispatch("swap",{type:"swap",target:this,a:e,b:i})}_onRemoveIndex(e,i){this.events.isEnabled("removeIndex")&&this.events.dispatch("removeIndex",{type:"removeIndex",target:this,index:e,oldValue:i})}_onMoveIndex(e,i,r){this.events.isEnabled("moveIndex")&&this.events.dispatch("moveIndex",{type:"moveIndex",target:this,oldIndex:e,newIndex:i,value:r})}_onClear(e){this.events.isEnabled("clear")&&this.events.dispatch("clear",{type:"clear",target:this,oldValues:e})}setIndex(e,i){U2(e,this._values.length);const r=this._values[e];return r!==i&&(this._values[e]=i,this._onSetIndex(e,r,i)),r}insertIndex(e,i){return U2(e,this._values.length+1),DU(this._values,e,i),this._onInsertIndex(e,i),i}swap(e,i){const r=this._values.length;if(U2(e,r),U2(i,r),e!==i){const n=this._values[e],s=this._values[i];this._values[e]=s,this._values[i]=n,this._onSwap(n,s)}}removeIndex(e){U2(e,this._values.length);const i=this._values[e];return gW(this._values,e),this._onRemoveIndex(e,i),i}moveValue(e,i){let r=this.indexOf(e);if(r!==-1)if(gW(this._values,r),i==null){const n=this._values.length;this._values.push(e),this._onMoveIndex(r,n,e)}else DU(this._values,i,e),this._onMoveIndex(r,i,e);else i==null?(this._values.push(e),this._onPush(e)):(DU(this._values,i,e),this._onInsertIndex(i,e));return e}push(e){return this._values.push(e),this._onPush(e),e}unshift(e){return this.insertIndex(0,e),e}pushAll(e){Ne(e,i=>{this.push(i)})}copyFrom(e){this.pushAll(e._values)}pop(){return this._values.length-1<0?void 0:this.removeIndex(this._values.length-1)}shift(){return this._values.length?this.removeIndex(0):void 0}setAll(e){const i=this._values;this._values=[],this._onClear(i),Ne(e,r=>{this._values.push(r),this._onPush(r)})}clear(){this.setAll([])}*[Symbol.iterator](){const e=this._values.length;for(let i=0;i<e;++i)yield this._values[i]}each(e){Ne(this._values,e)}eachReverse(e){iI(this._values,e)}}class wEe extends yj{constructor(){super(...arguments),Object.defineProperty(this,"autoDispose",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"_disposed",{enumerable:!0,configurable:!0,writable:!0,value:!1})}swap(e,i){const r=this.autoDispose;this.autoDispose=!1,super.swap(e,i),this.autoDispose=r}_onSetIndex(e,i,r){this.autoDispose&&i.dispose(),super._onSetIndex(e,i,r)}_onRemoveIndex(e,i){this.autoDispose&&i.dispose(),super._onRemoveIndex(e,i)}_onClear(e){this.autoDispose&&Ne(e,i=>{i.dispose()}),super._onClear(e)}_dispose(){this.autoDispose&&Ne(this._values,e=>{e.dispose()})}isDisposed(){return this._disposed}dispose(){this._disposed||(this._disposed=!0,this._dispose())}}class Yy extends wEe{constructor(e,i){super(),Object.defineProperty(this,"template",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"make",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.template=e,this.make=i}_dispose(){super._dispose(),this.autoDispose&&this.template.dispose()}}class M_t extends yj{constructor(e){super(),Object.defineProperty(this,"_disposed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_container",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_events",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._container=e,this._events=this.events.onAll(i=>{if(i.type==="clear")Ne(i.oldValues,r=>{this._onRemoved(r)});else if(i.type==="push")this._onInserted(i.newValue);else if(i.type==="setIndex")this._onRemoved(i.oldValue),this._onInserted(i.newValue,i.index);else if(i.type==="insertIndex")this._onInserted(i.newValue,i.index);else if(i.type==="removeIndex")this._onRemoved(i.oldValue);else if(i.type==="moveIndex")this._onRemoved(i.value),this._onInserted(i.value,i.newIndex);else throw new Error("Unknown IListEvent type")})}_onInserted(e,i){e._setParent(this._container,!0);const r=this._container._childrenDisplay;i===void 0?r.addChild(e._display):r.addChildAt(e._display,i)}_onRemoved(e){this._container._childrenDisplay.removeChild(e._display),this._container.markDirtyBounds(),this._container.markDirty()}isDisposed(){return this._disposed}dispose(){this._disposed||(this._disposed=!0,this._events.dispose(),Ne(this.values,e=>{e.dispose()}))}}const _Ee=Math.PI,lM=_Ee/180,rI=180/_Ee;function MFt(t,e,i){if(!kt(e)||e<=0)return Math.round(t);{let r=Math.pow(10,e);return Math.round(t*r)/r}}function AFt(t,e){if(!kt(e)||e<=0)return Math.ceil(t);{let i=Math.pow(10,e);return Math.ceil(t*i)/i}}function $a(t,e,i){return Math.min(Math.max(t,e),i)}function mu(t){return Math.sin(lM*t)}function Pp(t){return Math.cos(lM*t)}function aK(t){return t=t%360,t<0&&(t+=360),t}function vW(t,e,i,r,n){let s=Number.MAX_VALUE,a=Number.MAX_VALUE,o=-Number.MAX_VALUE,l=-Number.MAX_VALUE,c=[];c.push(zU(n,i)),c.push(zU(n,r));let h=Math.min(Math.floor(i/90)*90,Math.floor(r/90)*90),f=Math.max(Math.ceil(i/90)*90,Math.ceil(r/90)*90);for(let g=h;g<=f;g+=90)g>=i&&g<=r&&c.push(zU(n,g));for(let g=0;g<c.length;g++){let y=c[g];y.x<s&&(s=y.x),y.y<a&&(a=y.y),y.x>o&&(o=y.x),y.y>l&&(l=y.y)}return{left:t+s,top:e+a,right:t+o,bottom:e+l}}function zU(t,e){return{x:t*Pp(e),y:t*mu(e)}}function A_t(t){const e=t.length;if(e>0){let i=t[0],r=i.left,n=i.top,s=i.right,a=i.bottom;if(e>1)for(let o=1;o<e;o++)i=t[o],r=Math.min(i.left,r),s=Math.max(i.right,s),n=Math.min(i.top,n),a=Math.max(i.bottom,a);return{left:r,right:s,top:n,bottom:a}}return{left:0,right:0,top:0,bottom:0}}function P_t(t,e){return t.x>=e.left&&t.y>=e.top&&t.x<=e.right&&t.y<=e.bottom}function zde(t){return t}function S0(t){return t*t*t}function rx(t){return function(e){return 1-t(1-e)}}class O_t{constructor(e,i){Object.defineProperty(this,"_entity",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_userSettings",{enumerable:!0,configurable:!0,writable:!0,value:{}}),this._entity=e,this._settings=i,Lr(i,r=>{this._userSettings[r]=!0})}get(e,i){const r=this._settings[e];return r!==void 0?r:i}setRaw(e,i){this._settings[e]=i}set(e,i){this._userSettings[e]=!0,this.setRaw(e,i)}remove(e){delete this._userSettings[e],delete this._settings[e]}setAll(e){Ia(e).forEach(i=>{this.set(i,e[i])})}_eachSetting(e){Lr(this._settings,e)}apply(){const e={};e.stateAnimationEasing=!0,e.stateAnimationDuration=!0;const i=this._entity.states.lookup("default");this._eachSetting((r,n)=>{e[r]||(e[r]=!0,this!==i&&(r in i._settings||(i._settings[r]=this._entity.get(r))),this._entity.set(r,n))})}applyAnimate(e){e==null&&(e=this._settings.stateAnimationDuration),e==null&&(e=this.get("stateAnimationDuration",this._entity.get("stateAnimationDuration",0)));let i=this._settings.stateAnimationEasing;i==null&&(i=this.get("stateAnimationEasing",this._entity.get("stateAnimationEasing",S0)));const r=this._entity.states.lookup("default"),n={};n.stateAnimationEasing=!0,n.stateAnimationDuration=!0;const s={};return this._eachSetting((a,o)=>{if(!n[a]){n[a]=!0,this!=r&&(a in r._settings||(r._settings[a]=this._entity.get(a)));const l=this._entity.animate({key:a,to:o,duration:e,easing:i});l&&(s[a]=l)}}),s}}class L_t{constructor(e){Object.defineProperty(this,"_states",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_entity",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._entity=e}lookup(e){return this._states[e]}create(e,i){const r=this._states[e];if(r)return r.setAll(i),r;{const n=new O_t(this._entity,i);return this._states[e]=n,n}}remove(e){delete this._states[e]}apply(e){const i=this._states[e];i&&i.apply(),this._entity._applyState(e)}applyAnimate(e,i){let r;const n=this._states[e];return n&&(r=n.applyAnimate(i)),this._entity._applyStateAnimated(e,i),r}}class D_t{constructor(){Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:"5.14.4"}),Object.defineProperty(this,"licenses",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"entitiesById",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"rootElements",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"autoDispose",{enumerable:!0,configurable:!0,writable:!0,value:!1})}}const Ed=new D_t;function PFt(t){Ed.licenses.push(t)}function sw(t,e){return t===e?0:t<e?-1:1}function xEe(t,e,i){const r=t.length,n=e.length,s=Math.min(r,n);for(let a=0;a<s;++a){const o=i(t[a],e[a]);if(o!==0)return o}return sw(r,n)}function OFt(t,e){return t===e?0:t<e?-1:1}class R_t{constructor(e){Object.defineProperty(this,"_entity",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_callbacks",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_disabled",{enumerable:!0,configurable:!0,writable:!0,value:{}}),this._entity=e}add(e,i){let r=this._callbacks[e];return r===void 0&&(r=this._callbacks[e]=[]),r.push(i),this._entity._markDirtyKey(e),new As(()=>{Fo(r,i)&&this._entity._markDirtyKey(e)})}remove(e){const i=this._callbacks[e];i!==void 0&&(delete this._callbacks[e],i.length!==0&&this._entity._markDirtyKey(e))}enable(e){this._disabled[e]&&(delete this._disabled[e],this._entity._markDirtyKey(e))}disable(e){this._disabled[e]||(this._disabled[e]=!0,this._entity._markDirtyKey(e))}fold(e,i){if(!this._disabled[e]){const r=this._callbacks[e];if(r!==void 0)for(let n=0,s=r.length;n<s;++n)i=r[n](i,this._entity,e)}return i}}class qL{constructor(e,i,r,n,s,a,o){Object.defineProperty(this,"_animation",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_from",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_to",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_duration",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_easing",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_loops",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_interpolate",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_oldTime",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_time",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_stopped",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_playing",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:new tk}),this._animation=e,this._from=i,this._to=r,this._duration=n,this._easing=s,this._loops=a,this._interpolate=I_t(i,r),this._oldTime=o}get to(){return this._to}get from(){return this._from}get playing(){return this._playing}get stopped(){return this._stopped}stop(){this._stopped||(this._stopped=!0,this._playing=!1,this.events.isEnabled("stopped")&&this.events.dispatch("stopped",{type:"stopped",target:this}))}pause(){this._playing=!1,this._oldTime=null}play(){!this._stopped&&!this._playing&&(this._playing=!0,this._animation._startAnimation())}get percentage(){return this._time/this._duration}waitForStop(){return new Promise((e,i)=>{if(this._stopped)e();else{const r=()=>{n.dispose(),e()},n=this.events.on("stopped",r)}})}_checkEnded(){return this._loops>1?(--this._loops,!1):!0}_run(e){this._oldTime!==null&&(this._time+=e-this._oldTime,this._time>this._duration&&(this._time=this._duration)),this._oldTime=e}_reset(e){this._oldTime=e,this._time=0}_value(e){return this._interpolate(this._easing(e),this._from,this._to)}}let z_t=0;class SEe{constructor(e){Object.defineProperty(this,"uid",{enumerable:!0,configurable:!0,writable:!0,value:++z_t}),Object.defineProperty(this,"_settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_privateSettings",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_settingEvents",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_privateSettingEvents",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_prevSettings",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_prevPrivateSettings",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_animatingSettings",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_animatingPrivateSettings",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_disposed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_userProperties",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"enableDispose",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this._settings=e}_checkDirty(){Ia(this._settings).forEach(e=>{this._userProperties[e]=!0,this._markDirtyKey(e)})}resetUserSettings(){this._userProperties={}}_runAnimation(e){let i=nw.Stopped;if(!this.isDisposed()){let r=!1,n=!1;Lr(this._animatingSettings,(s,a)=>{if(a.stopped)this._stopAnimation(s);else if(a.playing){a._run(e);const o=a.percentage;o>=1?a._checkEnded()?this.set(s,a._value(1)):(r=!0,a._reset(e),this._set(s,a._value(1))):(r=!0,this._set(s,a._value(o)))}else n=!0}),Lr(this._animatingPrivateSettings,(s,a)=>{if(a.stopped)this._stopAnimationPrivate(s);else if(a.playing){a._run(e);const o=a.percentage;o>=1?a._checkEnded()?this.setPrivate(s,a._value(1)):(r=!0,a._reset(e),this._setPrivate(s,a._value(1))):(r=!0,this._setPrivate(s,a._value(o)))}else n=!0}),r?i=nw.Playing:n&&(i=nw.Paused)}return i}_markDirtyKey(e){this.markDirty()}_markDirtyPrivateKey(e){this.markDirty()}on(e,i){let r=this._settingEvents[e];return r===void 0&&(r=this._settingEvents[e]=[]),r.push(i),new As(()=>{Fo(r,i),r.length===0&&delete this._settingEvents[e]})}off(e,i){let r=this._settingEvents[e];r!==void 0&&i!==void 0?Fo(r,i):delete this._settingEvents[e]}onPrivate(e,i){let r=this._privateSettingEvents[e];return r===void 0&&(r=this._privateSettingEvents[e]=[]),r.push(i),new As(()=>{Fo(r,i),r.length===0&&delete this._privateSettingEvents[e]})}offPrivate(e,i){let r=this._privateSettingEvents[e];r!==void 0&&i!==void 0?Fo(r,i):delete this._privateSettingEvents[e]}getRaw(e,i){const r=this._settings[e];return r!==void 0?r:i}has(e){return e in this._settings}get(e,i){return this.getRaw(e,i)}_sendKeyEvent(e,i){const r=this._settingEvents[e];r!==void 0&&Ne(r,n=>{n(i,this,e)})}_sendPrivateKeyEvent(e,i){const r=this._privateSettingEvents[e];r!==void 0&&Ne(r,n=>{n(i,this,e)})}_setRaw(e,i,r){this._prevSettings[e]=i,this._sendKeyEvent(e,r)}setRaw(e,i){const r=this._settings[e];this._settings[e]=i,r!==i&&this._setRaw(e,r,i)}_set(e,i){const r=this._settings[e];this._settings[e]=i,r!==i&&(this._setRaw(e,r,i),this._markDirtyKey(e))}_stopAnimation(e){const i=this._animatingSettings[e];i&&(delete this._animatingSettings[e],i.stop())}set(e,i){return this._set(e,i),this._stopAnimation(e),i}remove(e){e in this._settings&&(this._prevSettings[e]=this._settings[e],delete this._settings[e],this._sendKeyEvent(e,void 0),this._markDirtyKey(e)),this._stopAnimation(e)}removeAll(){Ne(Ia(this._settings),e=>{this.remove(e)})}getPrivate(e,i){const r=this._privateSettings[e];return r!==void 0?r:i}_setPrivateRaw(e,i,r){this._prevPrivateSettings[e]=i,this._sendPrivateKeyEvent(e,r)}setPrivateRaw(e,i){const r=this._privateSettings[e];this._privateSettings[e]=i,r!==i&&this._setPrivateRaw(e,r,i)}_setPrivate(e,i){const r=this._privateSettings[e];this._privateSettings[e]=i,r!==i&&(this._setPrivateRaw(e,r,i),this._markDirtyPrivateKey(e))}_stopAnimationPrivate(e){const i=this._animatingPrivateSettings[e];i&&(i.stop(),delete this._animatingPrivateSettings[e])}setPrivate(e,i){return this._setPrivate(e,i),this._stopAnimationPrivate(e),i}removePrivate(e){e in this._privateSettings&&(this._prevPrivateSettings[e]=this._privateSettings[e],delete this._privateSettings[e],this._markDirtyPrivateKey(e)),this._stopAnimationPrivate(e)}setAll(e){Lr(e,(i,r)=>{this.set(i,r)})}animate(e){const i=e.key,r=e.to,n=e.duration||0,s=e.loops||1,a=e.from===void 0?this.get(i):e.from,o=e.easing===void 0?zde:e.easing;if(n===0)this.set(i,r);else if(a===void 0||a===r)this.set(i,r);else{this.set(i,a);const c=this._animatingSettings[i]=new qL(this,a,r,n,o,s,this._animationTime());return this._startAnimation(),c}const l=new qL(this,a,r,n,o,s,null);return l.stop(),l}animatePrivate(e){const i=e.key,r=e.to,n=e.duration||0,s=e.loops||1,a=e.from===void 0?this.getPrivate(i):e.from,o=e.easing===void 0?zde:e.easing;if(n===0)this.setPrivate(i,r);else if(a===void 0||a===r)this.setPrivate(i,r);else{this.setPrivate(i,a);const c=this._animatingPrivateSettings[i]=new qL(this,a,r,n,o,s,this._animationTime());return this._startAnimation(),c}const l=new qL(this,a,r,n,o,s,null);return l.stop(),l}_dispose(){}isDisposed(){return this._disposed}dispose(){this.enableDispose&&!this._disposed&&(this._disposed=!0,this._dispose())}}class yo extends SEe{constructor(e,i,r,n=[]){if(super(i),Object.defineProperty(this,"_root",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_user_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"states",{enumerable:!0,configurable:!0,writable:!0,value:new L_t(this)}),Object.defineProperty(this,"adapters",{enumerable:!0,configurable:!0,writable:!0,value:new R_t(this)}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:this._createEvents()}),Object.defineProperty(this,"_userPrivateProperties",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_dirty",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_dirtyPrivate",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_template",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_templates",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_internalTemplates",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_defaultThemes",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_templateDisposers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_disposers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_runSetup",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"_disposerProperties",{enumerable:!0,configurable:!0,writable:!0,value:{}}),!r)throw new Error("You cannot use `new Class()`, instead use `Class.new()`");this._root=e,this._internalTemplates=n,i.id&&this._registerId(i.id)}static new(e,i,r){const n=new this(e,i,!0);return n._template=r,n._afterNew(),n}static _new(e,i,r=[]){const n=new this(e,i,!0,r);return n._afterNew(),n}_afterNew(){this._checkDirty();let e=!1;const i=this._template;i&&(e=!0,i._setObjectTemplate(this)),Ne(this._internalTemplates,r=>{e=!0,r._setObjectTemplate(this)}),e&&this._applyTemplates(!1),this.states.create("default",{}),this._setDefaults()}_afterNewApplyThemes(){this._checkDirty();const e=this._template;e&&e._setObjectTemplate(this),Ne(this._internalTemplates,i=>{i._setObjectTemplate(this)}),this.states.create("default",{}),this._setDefaults(),this._applyThemes()}_createEvents(){return new tk}get classNames(){return this.constructor.classNames}get className(){return this.constructor.className}_setDefaults(){}_setDefaultFn(e,i){const r=this.get(e);if(r)return r;{const n=i();return this.set(e,n),n}}_setDefault(e,i){this.has(e)||super.set(e,i)}_setRawDefault(e,i){this.has(e)||super.setRaw(e,i)}_clearDirty(){Ia(this._dirty).forEach(e=>{this._dirty[e]=!1}),Ia(this._dirtyPrivate).forEach(e=>{this._dirtyPrivate[e]=!1})}isDirty(e){return!!this._dirty[e]}isPrivateDirty(e){return!!this._dirtyPrivate[e]}_markDirtyKey(e){this._dirty[e]=!0,super._markDirtyKey(e)}_markDirtyPrivateKey(e){this._dirtyPrivate[e]=!0,super._markDirtyKey(e)}isType(e){return this.classNames.indexOf(e)!==-1}_pushPropertyDisposer(e,i){let r=this._disposerProperties[e];return r===void 0&&(r=this._disposerProperties[e]=[]),r.push(i),i}_disposeProperty(e){const i=this._disposerProperties[e];i!==void 0&&(Ne(i,r=>{r.dispose()}),delete this._disposerProperties[e])}set template(e){const i=this._template;i!==e&&(this._template=e,i&&i._removeObjectTemplate(this),e&&e._setObjectTemplate(this),this._applyTemplates())}get template(){return this._template}markDirty(){this._root._addDirtyEntity(this)}_startAnimation(){this._root._addAnimation(this)}_animationTime(){return this._root.animationTime}_applyState(e){}_applyStateAnimated(e,i){}get(e,i){const r=this.adapters.fold(e,this._settings[e]);return r!==void 0?r:i}isUserSetting(e){return this._userProperties[e]||!1}set(e,i){return this._userProperties[e]=!0,super.set(e,i)}setRaw(e,i){this._userProperties[e]=!0,super.setRaw(e,i)}_setSoft(e,i){return this._userProperties[e]?i:super.set(e,i)}remove(e){delete this._userProperties[e],this._removeTemplateProperty(e)}setPrivate(e,i){return this._userPrivateProperties[e]=!0,super.setPrivate(e,i)}setPrivateRaw(e,i){this._userPrivateProperties[e]=!0,super.setPrivateRaw(e,i)}removePrivate(e){delete this._userPrivateProperties[e],this._removeTemplatePrivateProperty(e)}_setTemplateProperty(e,i,r){if(!this._userProperties[i]){const n=this._findTemplateByKey(i);e===n&&super.set(i,r)}}_setTemplatePrivateProperty(e,i,r){if(!this._userPrivateProperties[i]){const n=this._findTemplateByPrivateKey(i);e===n&&super.setPrivate(i,r)}}_removeTemplateProperty(e){if(!this._userProperties[e]){const i=this._findTemplateByKey(e);i?super.set(e,i._settings[e]):super.remove(e)}}_removeTemplatePrivateProperty(e){if(!this._userPrivateProperties[e]){const i=this._findTemplateByPrivateKey(e);i?super.setPrivate(e,i._privateSettings[e]):super.removePrivate(e)}}_walkParents(e){e(this._root._rootContainer),e(this)}_applyStateByKey(e){const i=this.states.create(e,{}),r={};this._eachTemplate(n=>{const s=n.states.lookup(e);s&&s._apply(i,r)}),Lr(i._settings,n=>{!r[n]&&!i._userSettings[n]&&i.remove(n)})}_applyTemplate(e,i){this._templateDisposers.push(e._apply(this,i)),Lr(e._settings,(r,n)=>{!i.settings[r]&&!this._userProperties[r]&&(i.settings[r]=!0,super.set(r,n))}),Lr(e._privateSettings,(r,n)=>{!i.privateSettings[r]&&!this._userPrivateProperties[r]&&(i.privateSettings[r]=!0,super.setPrivate(r,n))}),this._runSetup&&e.setup&&(this._runSetup=!1,e.setup(this))}_findStaticTemplate(e){if(this._template&&e(this._template))return this._template}_eachTemplate(e){this._findStaticTemplate(i=>(e(i),!1)),iI(this._internalTemplates,e),Ne(this._templates,e)}_applyTemplates(e=!0){e&&this._disposeTemplates();const i={settings:{},privateSettings:{},states:{}};this._eachTemplate(r=>{this._applyTemplate(r,i)}),e&&(Lr(this._settings,r=>{!this._userProperties[r]&&!i.settings[r]&&super.remove(r)}),Lr(this._privateSettings,r=>{!this._userPrivateProperties[r]&&!i.privateSettings[r]&&super.removePrivate(r)}))}_findTemplate(e){const i=this._findStaticTemplate(e);if(i===void 0){const r=Jwt(this._internalTemplates,e);return r===void 0?hEe(this._templates,e):r}else return i}_findTemplateByKey(e){return this._findTemplate(i=>e in i._settings)}_findTemplateByPrivateKey(e){return this._findTemplate(i=>e in i._privateSettings)}_disposeTemplates(){Ne(this._templateDisposers,e=>{e.dispose()}),this._templateDisposers.length=0}_removeTemplates(){Ne(this._templates,e=>{e._removeObjectTemplate(this)}),this._templates.length=0}_applyThemes(e=!1){let i=!1;const r=[];let n=[];const s=new Set,a=this.get("themeTagsSelf");return a&&Ne(a,o=>{s.add(o)}),this._walkParents(o=>{o===this._root._rootContainer&&(i=!0),o._defaultThemes.length>0&&r.push(o._defaultThemes);const l=o.get("themes");l&&n.push(l);const c=o.get("themeTags");c&&Ne(c,h=>{s.add(h)})}),n=r.concat(n),this._removeTemplates(),(i||e)&&iI(this.classNames,o=>{const l=[];Ne(n,c=>{Ne(c,h=>{const f=h._lookupRules(o);f&&iI(f,g=>{if(g.tags.every(b=>s.has(b))){const b=Qwt(l,_=>{const S=sw(g.tags.length,_.tags.length);return S===0?xEe(g.tags,_.tags,sw):S});l.splice(b.index,0,g)}})})}),Ne(l,c=>{this._templates.push(c.template),c.template._setObjectTemplate(this)})}),this._applyTemplates(),(i||e)&&(this._runSetup=!1),i||e}_changed(){}_beforeChanged(){if(this.isDirty("id")){const e=this.get("id");e&&this._registerId(e);const i=this._prevSettings.id;i&&(delete this._root.entitiesById[i],delete Ed.entitiesById[i])}}_registerId(e){if(this._root.entitiesById[e]&&this._root.entitiesById[e]!==this)throw new Error('An entity with id "'+e+'" already exists.');this._root.entitiesById[e]=this,Ed.entitiesById[e]=this}_afterChanged(){}addDisposer(e){return this._disposers.push(e),e}_dispose(){super._dispose();const e=this._template;e&&e._removeObjectTemplate(this),Ne(this._internalTemplates,r=>{r._removeObjectTemplate(this)}),this._removeTemplates(),this._disposeTemplates(),this.events.dispose(),this._disposers.forEach(r=>{r.dispose()}),Lr(this._disposerProperties,(r,n)=>{Ne(n,s=>{s.dispose()})});const i=this.get("id");i&&(delete this._root.entitiesById[i],delete Ed.entitiesById[i])}setTimeout(e,i){const r=setTimeout(()=>{this.removeDispose(n),e()},i),n=new As(()=>{clearTimeout(r)});return this._disposers.push(n),n}removeDispose(e){if(!this.isDisposed()){let i=aM(this._disposers,e);i>-1&&this._disposers.splice(i,1)}e.dispose()}hasTag(e){return aM(this.get("themeTags",[]),e)!==-1}addTag(e){if(!this.hasTag(e)){const i=this.get("themeTags",[]);i.push(e),this.set("themeTags",i)}}removeTag(e){if(this.hasTag(e)){const i=this.get("themeTags",[]);Im(i,e),this.set("themeTags",i)}}_t(e,i,...r){return this._root.language.translate(e,i,...r)}get root(){return this._root}}Object.defineProperty(yo,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Entity"});Object.defineProperty(yo,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:["Entity"]});function bW(t){Lr(t,(e,i)=>{TA(i)&&typeof i.dispose=="function"&&(i.enableDispose=!0,i.dispose())})}class F_t{constructor(e,i,r){Object.defineProperty(this,"_settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_template",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._name=e,this._template=i,this._settings=r}_dispose(){bW(this._settings)}get(e,i){const r=this._settings[e];return r!==void 0?r:i}set(e,i){this._settings[e]=i,this._template._stateChanged(this._name)}remove(e){delete this._settings[e],this._template._stateChanged(this._name)}setAll(e){Ia(e).forEach(i=>{this._settings[i]=e[i]}),this._template._stateChanged(this._name)}_apply(e,i){Lr(this._settings,(r,n)=>{!i[r]&&!e._userSettings[r]&&(i[r]=!0,e.setRaw(r,n))})}}class N_t{constructor(e){Object.defineProperty(this,"_template",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_states",{enumerable:!0,configurable:!0,writable:!0,value:{}}),this._template=e}_dispose(){Lr(this._states,(e,i)=>{i._dispose()})}lookup(e){return this._states[e]}create(e,i){const r=this._states[e];if(r)return r.setAll(i),r;{const n=new F_t(e,this._template,i);return this._states[e]=n,this._template._stateChanged(e),n}}remove(e){delete this._states[e],this._template._stateChanged(e)}_apply(e,i){Lr(this._states,(r,n)=>{let s=i.states[r];s==null&&(s=i.states[r]={});const a=e.states.create(r,{});n._apply(a,s)})}}class j_t{constructor(){Object.defineProperty(this,"_callbacks",{enumerable:!0,configurable:!0,writable:!0,value:{}})}add(e,i){let r=this._callbacks[e];return r===void 0&&(r=this._callbacks[e]=[]),r.push(i),new As(()=>{Fo(r,i),r.length===0&&delete this._callbacks[e]})}remove(e){this._callbacks[e]!==void 0&&delete this._callbacks[e]}_apply(e){const i=[];return Lr(this._callbacks,(r,n)=>{Ne(n,s=>{i.push(e.adapters.add(r,s))})}),new gl(i)}}class yc{constructor(e,i){if(Object.defineProperty(this,"_disposed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_privateSettings",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_settingEvents",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_privateSettingEvents",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_entities",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"states",{enumerable:!0,configurable:!0,writable:!0,value:new N_t(this)}),Object.defineProperty(this,"adapters",{enumerable:!0,configurable:!0,writable:!0,value:new j_t}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:new tk}),Object.defineProperty(this,"setup",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),!i)throw new Error("You cannot use `new Class()`, instead use `Class.new()`");this._settings=e}static new(e){return new yc(e,!0)}_dispose(){bW(this._settings),bW(this._privateSettings)}isDisposed(){return this._disposed}dispose(){this._disposed||(this._disposed=!0,this._dispose())}_checkDisposed(){if(this._disposed)throw new Error("Template is disposed")}get entities(){return this._entities}get(e,i){this._checkDisposed();const r=this._settings[e];return r!==void 0?r:i}setRaw(e,i){this._checkDisposed(),this._settings[e]=i}set(e,i){this._checkDisposed(),this._settings[e]!==i&&(this.setRaw(e,i),this._entities.forEach(r=>{r._setTemplateProperty(this,e,i)}))}remove(e){this._checkDisposed(),e in this._settings&&(delete this._settings[e],this._entities.forEach(i=>{i._removeTemplateProperty(e)}))}removeAll(){this._checkDisposed(),Lr(this._settings,(e,i)=>{this.remove(e)})}getPrivate(e,i){this._checkDisposed();const r=this._privateSettings[e];return r!==void 0?r:i}setPrivateRaw(e,i){return this._checkDisposed(),this._privateSettings[e]=i,i}setPrivate(e,i){return this._checkDisposed(),this._privateSettings[e]!==i&&(this.setPrivateRaw(e,i),this._entities.forEach(r=>{r._setTemplatePrivateProperty(this,e,i)})),i}removePrivate(e){this._checkDisposed(),e in this._privateSettings&&(delete this._privateSettings[e],this._entities.forEach(i=>{i._removeTemplatePrivateProperty(e)}))}setAll(e){this._checkDisposed(),Lr(e,(i,r)=>{this.set(i,r)})}on(e,i){this._checkDisposed();let r=this._settingEvents[e];return r===void 0&&(r=this._settingEvents[e]=[]),r.push(i),new As(()=>{Fo(r,i),r.length===0&&delete this._settingEvents[e]})}onPrivate(e,i){this._checkDisposed();let r=this._privateSettingEvents[e];return r===void 0&&(r=this._privateSettingEvents[e]=[]),r.push(i),new As(()=>{Fo(r,i),r.length===0&&delete this._privateSettingEvents[e]})}_apply(e,i){this._checkDisposed();const r=[];return Lr(this._settingEvents,(n,s)=>{Ne(s,a=>{r.push(e.on(n,a))})}),Lr(this._privateSettingEvents,(n,s)=>{Ne(s,a=>{r.push(e.onPrivate(n,a))})}),this.states._apply(e,i),r.push(this.adapters._apply(e)),r.push(e.events.copyFrom(this.events)),new gl(r)}_setObjectTemplate(e){this._checkDisposed(),this._entities.push(e)}_removeObjectTemplate(e){Im(this._entities,e)}_stateChanged(e){this._checkDisposed(),this._entities.forEach(i=>{i._applyStateByKey(e)})}}class vj extends tk{constructor(e){super(),Object.defineProperty(this,"_sprite",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_rendererDisposers",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_dispatchParents",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this._sprite=e}_makePointerEvent(e,i){return{type:e,originalEvent:i.event,point:i.point,simulated:i.simulated,native:i.native,target:this._sprite}}_onRenderer(e,i){this._sprite.set("interactive",!0),this._sprite._display.interactive=!0;let r=this._rendererDisposers[e];if(r===void 0){const n=this._sprite._display.on(e,s=>{i.call(this,s)});r=this._rendererDisposers[e]=new pEe(()=>{delete this._rendererDisposers[e],n.dispose()})}return r.increment()}_on(e,i,r,n,s,a,o){const l=super._on(e,i,r,n,s,a,o),c=vj.RENDERER_EVENTS[i];return c!==void 0&&(l.disposer=new gl([l.disposer,this._onRenderer(i,c)])),l}stopParentDispatch(){this._dispatchParents=!1}dispatchParents(e,i){const r=this._dispatchParents;this._dispatchParents=!0;try{this.dispatch(e,i),this._dispatchParents&&this._sprite.parent&&this._sprite.parent.events.dispatchParents(e,i)}finally{this._dispatchParents=r}}}Object.defineProperty(vj,"RENDERER_EVENTS",{enumerable:!0,configurable:!0,writable:!0,value:{click:function(t){this.isEnabled("click")&&!this._sprite.isDragging()&&this._sprite._hasDown()&&!this._sprite._hasMoved(this._makePointerEvent("click",t))&&this.dispatch("click",this._makePointerEvent("click",t))},rightclick:function(t){this.isEnabled("rightclick")&&this.dispatch("rightclick",this._makePointerEvent("rightclick",t))},middleclick:function(t){this.isEnabled("middleclick")&&this.dispatch("middleclick",this._makePointerEvent("middleclick",t))},dblclick:function(t){this.dispatchParents("dblclick",this._makePointerEvent("dblclick",t))},pointerover:function(t){const e=this._sprite;let i=!0;if(e.getPrivate("trustBounds")){e._getBounds();const r=e.globalBounds();if(e.isType("Graphics")){const n=e.get("strokeWidth",1)/2;n>=1&&(r.left-=n,r.right+=n,r.top-=n,r.bottom+=n)}P_t(t.point,r)||(i=!1,e._root._renderer.removeHovering(e._display))}i&&this.isEnabled("pointerover")&&this.dispatch("pointerover",this._makePointerEvent("pointerover",t))},pointerout:function(t){this.isEnabled("pointerout")&&this.dispatch("pointerout",this._makePointerEvent("pointerout",t))},pointerdown:function(t){this.dispatchParents("pointerdown",this._makePointerEvent("pointerdown",t))},pointerup:function(t){this.isEnabled("pointerup")&&this.dispatch("pointerup",this._makePointerEvent("pointerup",t))},globalpointerup:function(t){this.isEnabled("globalpointerup")&&this.dispatch("globalpointerup",this._makePointerEvent("globalpointerup",t))},globalpointermove:function(t){this.isEnabled("globalpointermove")&&this.dispatch("globalpointermove",this._makePointerEvent("globalpointermove",t))},wheel:function(t){this.dispatchParents("wheel",{type:"wheel",target:this._sprite,originalEvent:t.event,point:t.point})}}});class jd extends yo{constructor(){super(...arguments),Object.defineProperty(this,"_adjustedLocalBounds",{enumerable:!0,configurable:!0,writable:!0,value:{left:0,right:0,top:0,bottom:0}}),Object.defineProperty(this,"_localBounds",{enumerable:!0,configurable:!0,writable:!0,value:{left:0,right:0,top:0,bottom:0}}),Object.defineProperty(this,"_parent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_dataItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_templateField",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_sizeDirty",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_isDragging",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_dragEvent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_dragPoint",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_isHidden",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_isShowing",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_isHiding",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_isDown",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_downPoint",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_downPoints",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_toggleDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_dragDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tooltipDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_hoverDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_focusDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tooltipMoveDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tooltipPointerDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_virtualParent",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_afterNew(){this.setPrivateRaw("visible",!0),super._afterNew()}markDirtyKey(e){this._markDirtyKey(e)}_markDirtyKey(e){super._markDirtyKey(e),(e=="x"||e=="y"||e=="dx"||e=="dy")&&(this.markDirtyBounds(),this._addPercentagePositionChildren(),this.markDirtyPosition())}_markDirtyPrivateKey(e){super._markDirtyPrivateKey(e),(e=="x"||e=="y")&&this.markDirtyPosition()}_removeTemplateField(){this._templateField&&this._templateField._removeObjectTemplate(this)}_createEvents(){return new vj(this)}_processTemplateField(){let e;const i=this.get("templateField");if(i){const r=this.dataItem;if(r){const n=r.dataContext;n&&(e=n[i],!(e instanceof yc)&&e&&(e=yc.new(e)))}}this._templateField!==e&&(this._removeTemplateField(),this._templateField=e,e&&e._setObjectTemplate(this),this._applyTemplates())}_setDataItem(e){const i=this._dataItem;this._dataItem=e,this._processTemplateField();const r="dataitemchanged";e!=i&&this.events.isEnabled(r)&&this.events.dispatch(r,{type:r,target:this,oldDataItem:i,newDataItem:e})}set dataItem(e){this._setDataItem(e)}get dataItem(){if(this._dataItem)return this._dataItem;{let e=this._parent;for(;e;){if(e._dataItem)return e._dataItem;e=e._parent}}}_addPercentageSizeChildren(){let e=this.parent;e&&(this.get("width")instanceof _i||this.get("height")instanceof _i?oM(e._percentageSizeChildren,this):Fo(e._percentageSizeChildren,this))}_addPercentagePositionChildren(){let e=this.parent;e&&(this.get("x")instanceof _i||this.get("y")instanceof _i?oM(e._percentagePositionChildren,this):Fo(e._percentagePositionChildren,this))}markDirtyPosition(){this._root._addDirtyPosition(this)}updatePivotPoint(){const e=this._localBounds;if(e){const i=this.get("centerX");i!=null&&(this._display.pivot.x=e.left+Ms(i,e.right-e.left));const r=this.get("centerY");r!=null&&(this._display.pivot.y=e.top+Ms(r,e.bottom-e.top))}}_beforeChanged(){if(super._beforeChanged(),this._handleStates(),this.isDirty("tooltip")){const e=this._prevSettings.tooltip;e&&e.dispose()}if((this.isDirty("layer")||this.isDirty("layerMargin"))&&(this._display.setLayer(this.get("layer"),this.get("layerMargin")),this.markDirtyLayer()),this.isDirty("tooltipPosition")){const e=this._tooltipMoveDp;e&&(e.dispose(),this._tooltipMoveDp=void 0);const i=this._tooltipPointerDp;i&&(i.dispose(),this._tooltipPointerDp=void 0),this.get("tooltipPosition")=="pointer"&&(this.isHover()&&(this._tooltipMoveDp=this.events.on("globalpointermove",r=>{this.showTooltip(r.point)})),this._tooltipPointerDp=new gl([this.events.on("pointerover",()=>{this._tooltipMoveDp=this.events.on("globalpointermove",r=>{this.showTooltip(r.point)})}),this.events.on("pointerout",()=>{const r=this._tooltipMoveDp;r&&(r.dispose(),this._tooltipMoveDp=void 0)})]))}}_handleStates(){this.isDirty("active")&&(this.get("active")?(this.states.applyAnimate("active"),this.set("ariaChecked",!0)):(this.isHidden()||this.states.applyAnimate("default"),this.set("ariaChecked",!1)),this.markDirtyAccessibility()),this.isDirty("disabled")&&(this.get("disabled")?(this.states.applyAnimate("disabled"),this.set("ariaChecked",!1)):(this.isHidden()||this.states.applyAnimate("default"),this.set("ariaChecked",!0)),this.markDirtyAccessibility())}_changed(){super._changed();const e=this._display,i=this.events;if(this.isDirty("draggable")){const n=this.get("draggable");n?(this.set("interactive",!0),this._dragDp=new gl([i.on("pointerdown",s=>{this.dragStart(s)}),i.on("globalpointermove",s=>{this.dragMove(s)}),i.on("globalpointerup",s=>{this.dragStop(s)})])):this._dragDp&&(this._dragDp.dispose(),this._dragDp=void 0),e.cancelTouch=!!n}if(this.isDirty("tooltipText")||this.isDirty("tooltipHTML")||this.isDirty("showTooltipOn")){const n=this.get("tooltipText"),s=this.get("tooltipHTML"),a=this.get("showTooltipOn","hover");this._tooltipDp&&(this._tooltipDp.dispose(),this._tooltipDp=void 0),(n||s)&&(a=="click"?(this._tooltipDp=new gl([i.on("click",()=>{this.setTimeout(()=>{const o=this.getTooltip();o&&!o.isHidden()&&o.get("tooltipTarget")===this?this.hideTooltip():this.showTooltip()},10)}),Nn(document,"click",o=>{this.hideTooltip()})]),this._disposers.push(this._tooltipDp)):a=="always"||(this._tooltipDp=new gl([i.on("pointerover",()=>{this.showTooltip()}),i.on("pointerout",()=>{this.hideTooltip()})]),this._disposers.push(this._tooltipDp)))}if(this.isDirty("toggleKey")){let n=this.get("toggleKey");n&&n!="none"?this._toggleDp=i.on("click",()=>{this._isDragging||this.set(n,!this.get(n))}):this._toggleDp&&(this._toggleDp.dispose(),this._toggleDp=void 0)}if(this.isDirty("opacity")&&(e.alpha=Math.max(0,this.get("opacity",1)),this.get("focusable")&&this.markDirtyAccessibility()),this.isDirty("rotation")&&(this.markDirtyBounds(),e.angle=this.get("rotation",0)),this.isDirty("scale")&&(this.markDirtyBounds(),e.scale=this.get("scale",0)),(this.isDirty("centerX")||this.isDirty("centerY"))&&(this.markDirtyBounds(),this.updatePivotPoint()),(this.isDirty("visible")||this.isPrivateDirty("visible")||this.isDirty("forceHidden"))&&(!this.get("visible")||!this.getPrivate("visible")||this.get("forceHidden")?(e.visible=!1,this.hideTooltip()):e.visible=!0,this.markDirtyBounds(),this.get("focusable")&&this.markDirtyAccessibility()),this.isDirty("width")||this.isDirty("height")){this.markDirtyBounds(),this._addPercentageSizeChildren();const n=this.parent;n&&(this.isDirty("width")&&this.get("width")instanceof _i||this.isDirty("height")&&this.get("height")instanceof _i)&&(n.markDirty(),n._prevWidth=0),this._sizeDirty=!0}if((this.isDirty("maxWidth")||this.isDirty("maxHeight")||this.isPrivateDirty("width")||this.isPrivateDirty("height")||this.isDirty("minWidth")||this.isDirty("minHeight")||this.isPrivateDirty("maxWidth")||this.isPrivateDirty("maxHeight")||this.isPrivateDirty("minWidth")||this.isPrivateDirty("minHeight")||this.isDirty("marginLeft")||this.isDirty("marginTop")||this.isDirty("marginRight")||this.isDirty("marginBottom"))&&(this.markDirtyBounds(),this._sizeDirty=!0),this._sizeDirty&&this._updateSize(),this.isDirty("wheelable")){const n=this.get("wheelable");n&&this.set("interactive",!0),e.wheelable=!!n}(this.isDirty("tabindexOrder")||this.isDirty("focusableGroup"))&&(this.get("focusable")?this._root._registerTabindexOrder(this):this._root._unregisterTabindexOrder(this)),this.isDirty("filter")&&(e.filter=this.get("filter"));let r=this.get("filter","");if(this.isDirty("blur")){const n=this.get("blur",0);n!=0&&(r+=" blur("+n+"px)")}if(this.isDirty("saturate")){const n=this.get("saturate",1);n!=1&&(r+=" saturate("+n+")")}if(this.isDirty("brightness")){const n=this.get("brightness",1);n!=1&&(r+=" brightness("+n+")")}if(this.isDirty("contrast")){const n=this.get("contrast",1);n!=1&&(r+=" contrast("+n+")")}if(this.isDirty("sepia")){const n=this.get("sepia",0);n!=0&&(r+=" sepia("+n+")")}if(this.isDirty("hue")){const n=this.get("hue",0);n!=0&&(r+=" hue-rotate("+n+"deg)")}if(this.isDirty("invert")){const n=this.get("invert",0);n!=0&&(r+=" invert("+n+")")}if(r&&(e.filter=r),this.isDirty("cursorOverStyle")&&(e.cursorOverStyle=this.get("cursorOverStyle")),this.isDirty("hoverOnFocus")&&(this.get("hoverOnFocus")?this._focusDp=new gl([i.on("focus",()=>{this.showTooltip()}),i.on("blur",()=>{this.hideTooltip()})]):this._focusDp&&(this._focusDp.dispose(),this._focusDp=void 0)),this.isDirty("focusable")&&(this.get("focusable")?this._root._registerTabindexOrder(this):this._root._unregisterTabindexOrder(this),this.markDirtyAccessibility(),this._disposers.push(i.on("blur",()=>{this.setPrivateRaw("touchHovering",!1)})),this._disposers.push(i.once("boundschanged",()=>{this.markDirtyAccessibility()}))),this.isPrivateDirty("focusable")&&this.markDirtyAccessibility(),(this.isDirty("role")||this.isDirty("ariaLive")||this.isDirty("ariaChecked")||this.isDirty("ariaHidden")||this.isDirty("ariaOrientation")||this.isDirty("ariaValueNow")||this.isDirty("ariaValueMin")||this.isDirty("ariaValueMax")||this.isDirty("ariaValueText")||this.isDirty("ariaLabel")||this.isDirty("ariaControls"))&&this.markDirtyAccessibility(),this.isDirty("exportable")&&(e.exportable=this.get("exportable")),this.isDirty("interactive")){const n=this.events;this.get("interactive")&&!n.isDisposed()?this._hoverDp=new gl([n.on("click",s=>{Ade(s.originalEvent)&&(this.getPrivate("touchHovering")||this.setTimeout(()=>{this._handleOver(),(this.get("tooltipText")||this.get("tooltipHTML"))&&this.showTooltip(),this.setPrivateRaw("touchHovering",!0),this.events.dispatch("pointerover",{type:"pointerover",target:s.target,originalEvent:s.originalEvent,point:s.point,simulated:s.simulated})},10))}),n.on("globalpointerup",s=>{Ade(s.originalEvent)&&this.getPrivate("touchHovering")&&(this._handleOut(),(this.get("tooltipText")||this.get("tooltipHTML"))&&this.hideTooltip(),this.setPrivateRaw("touchHovering",!1),this.events.dispatch("pointerout",{type:"pointerout",target:s.target,originalEvent:s.originalEvent,point:s.point,simulated:s.simulated})),this._isDown&&this._handleUp(s)}),n.on("pointerover",()=>{this._handleOver()}),n.on("pointerout",()=>{this._handleOut()}),n.on("pointerdown",s=>{this._handleDown(s)})]):(this._display.interactive=!1,this._hoverDp&&(this._hoverDp.dispose(),this._hoverDp=void 0))}this.isDirty("forceInactive")&&(this._display.inactive=this.get("forceInactive",null)),this.get("showTooltipOn")=="always"&&this._display.visible&&this.showTooltip()}dragStart(e){this._dragEvent=e,this.events.stopParentDispatch()}dragStop(e){if(this._dragEvent=void 0,this._dragPoint=void 0,this.events.stopParentDispatch(),this._isDragging){this._isDragging=!1;const i="dragstop";this.events.isEnabled(i)&&this.events.dispatch(i,{type:i,target:this,originalEvent:e.originalEvent,point:e.point,simulated:e.simulated})}}_handleOver(){this.isHidden()||(this.get("active")&&this.states.lookup("hoverActive")?this.states.applyAnimate("hoverActive"):this.get("disabled")&&this.states.lookup("hoverDisabled")?this.states.applyAnimate("hoverDisabled"):this.states.applyAnimate("hover"),this.get("draggable")&&this._isDown&&this.states.lookup("down")&&this.states.applyAnimate("down"))}_handleOut(){this.isHidden()||(this.get("active")&&this.states.lookup("active")?this.states.applyAnimate("active"):this.get("disabled")&&this.states.lookup("disabled")?this.states.applyAnimate("disabled"):(this.states.lookup("hover")||this.states.lookup("hoverActive"))&&this.states.applyAnimate("default"),this.get("draggable")&&this._isDown&&this.states.lookup("down")&&this.states.applyAnimate("down"))}_handleUp(e){if(!this.isHidden()){this.get("active")&&this.states.lookup("active")?this.states.applyAnimate("active"):this.get("disabled")&&this.states.lookup("disabled")?this.states.applyAnimate("disabled"):this.states.lookup("down")&&(this.isHover()?this.states.applyAnimate("hover"):this.states.applyAnimate("default")),this._downPoint=void 0;const i=RU(e.originalEvent);delete this._downPoints[i],Ia(this._downPoints).length==0&&(this._isDown=!1)}}_hasMoved(e){const i=RU(e.originalEvent),r=this._downPoints[i];if(r){const n=Math.abs(r.x-e.point.x),s=Math.abs(r.y-e.point.y);return n>5||s>5}return!1}_hasDown(){return Ia(this._downPoints).length>0}_handleDown(e){const i=this.parent;if(i&&!this.get("draggable")&&i._handleDown(e),this.get("interactive")&&!this.isHidden()){this.states.lookup("down")&&this.states.applyAnimate("down"),this._downPoint={x:e.point.x,y:e.point.y},this._isDown=!0;const r=RU(e.originalEvent);this._downPoints[r]={x:e.point.x,y:e.point.y}}}dragMove(e){let i=this._dragEvent;if(i){if(i.simulated&&!e.simulated)return!0;let r=0,n=this.parent,s=1;for(;n!=null;)r+=n.get("rotation",0),n=n.parent,n&&(s*=n.get("scale",1));let a=(e.point.x-i.point.x)/s,o=(e.point.y-i.point.y)/s;const l=this.events;if(i.simulated&&!this._isDragging){this._isDragging=!0,this._dragEvent=e,this._dragPoint={x:this.x(),y:this.y()};const c="dragstart";l.isEnabled(c)&&l.dispatch(c,{type:c,target:this,originalEvent:e.originalEvent,point:e.point,simulated:e.simulated})}if(this._isDragging){let c=this._dragPoint;this.set("x",c.x+a*Pp(r)+o*mu(r)),this.set("y",c.y+o*Pp(r)-a*mu(r));const h="dragged";l.isEnabled(h)&&l.dispatch(h,{type:h,target:this,originalEvent:e.originalEvent,point:e.point,simulated:e.simulated})}else if(Math.hypot(a,o)>5){this._isDragging=!0,this._dragEvent=e,this._dragPoint={x:this.x(),y:this.y()};const c="dragstart";l.isEnabled(c)&&l.dispatch(c,{type:c,target:this,originalEvent:e.originalEvent,point:e.point,simulated:e.simulated})}}}_updateSize(){}_getBounds(){this._localBounds=this._display.getLocalBounds()}depth(){let e=this.parent,i=0;for(;;)if(e)++i,e=e.parent;else return i}markDirtySize(){this._sizeDirty=!0,this.markDirty()}markDirtyBounds(){const e=this._display;if(this.get("isMeasured")){this._root._addDirtyBounds(this),e.isMeasured=!0,e.invalidateBounds();const i=this.parent;i&&this.get("position")!="absolute"&&(i.get("width")==null||i.get("height")==null||i.get("layout"))&&i.markDirtyBounds(),this.get("focusable")&&this.markDirtyAccessibility()}}markDirtyAccessibility(){this._root._invalidateAccessibility(this)}markDirtyLayer(){this._display.markDirtyLayer(!0)}markDirty(){super.markDirty(),this.markDirtyLayer()}_updateBounds(){const e=this._adjustedLocalBounds;let i;if(!this.get("visible")||!this.getPrivate("visible")||this.get("forceHidden")?(i={left:0,right:0,top:0,bottom:0},this._localBounds=i,this._adjustedLocalBounds=i):(this._getBounds(),this._fixMinBounds(this._localBounds),this.updatePivotPoint(),this._adjustedLocalBounds=this._display.getAdjustedBounds(this._localBounds),i=this._adjustedLocalBounds),!e||e.left!==i.left||e.top!==i.top||e.right!==i.right||e.bottom!==i.bottom){const r="boundschanged";this.events.isEnabled(r)&&this.events.dispatch(r,{type:r,target:this}),this.parent&&(this.parent.markDirty(),this.parent.markDirtyBounds()),this.getPrivate("showingTooltip")&&this.showTooltip()}}_fixMinBounds(e){let i=this.get("minWidth",this.getPrivate("minWidth")),r=this.get("minHeight",this.getPrivate("minHeight"));kt(i)&&e.right-e.left<i&&(e.right=e.left+i),kt(r)&&e.bottom-e.top<r&&(e.bottom=e.top+r);let n=this.getPrivate("width"),s=this.getPrivate("height");kt(n)&&(n>0?e.right=e.left+n:e.left=e.right+n),kt(s)&&(s>0?e.bottom=e.top+s:e.top=e.bottom+s)}_removeParent(e){e&&(e.children.removeValue(this),Fo(e._percentageSizeChildren,this),Fo(e._percentagePositionChildren,this))}_clearDirty(){super._clearDirty(),this._sizeDirty=!1}hover(){this.isDisposed()||(this.showTooltip(),this._handleOver())}unhover(){this.isDisposed()||(this.hideTooltip(),this._handleOut())}showTooltip(e){if(!this.isDisposed()){const i=this.getTooltip(),r=this.get("tooltipText"),n=this.get("tooltipHTML");if((r||n)&&i){const s=this.get("tooltipPosition"),a=this.getPrivate("tooltipTarget",this);if((s=="fixed"||!e)&&(this._display._setMatrix(),e=this.toGlobal(a._getTooltipPoint())),s=="pointer"){const c=this.getPrivate("lastTooltipCoords");if(c&&c.x==e.x&&c.y==e.y)return;this.setPrivate("lastTooltipCoords",e)}i.set("pointTo",e),i.set("tooltipTarget",a),i.get("x")||i.set("x",e.x),i.get("y")||i.set("y",e.y),r&&i.label.set("text",r),n&&i.label.set("html",n);const o=this.dataItem;if(o&&i.label._setDataItem(o),this.get("showTooltipOn")=="always"&&(e.x<0||e.x>this._root.width()||e.y<0||e.y>this._root.height())){this.hideTooltip();return}i.label.text.markDirtyText();const l=i.show();return this.setPrivateRaw("showingTooltip",!0),l}}}hideTooltip(){const e=this.getTooltip();if(e&&(this.removePrivate("lastTooltipCoords"),e.get("tooltipTarget")==this.getPrivate("tooltipTarget",this)||this.get("tooltip")==e)){let i=e.get("keepTargetHover")&&e.get("stateAnimationDuration",0)==0?400:void 0;const r=e.hide(i);return this.setPrivateRaw("showingTooltip",!1),r}}_getTooltipPoint(){const e=this._localBounds;if(e){let i=0,r=0;return this.get("isMeasured")?(i=e.left+Ms(this.get("tooltipX",0),e.right-e.left),r=e.top+Ms(this.get("tooltipY",0),e.bottom-e.top)):(i=Ms(this.get("tooltipX",0),this.width()),r=Ms(this.get("tooltipY",0),this.height())),{x:i,y:r}}return{x:0,y:0}}getTooltip(){let e=this.get("tooltip");if(e)return e;{let i=this.parent;if(i)return i.getTooltip()}}_updatePosition(){const e=this.parent;let i=this.get("dx",0),r=this.get("dy",0),n=this.get("x"),s=this.getPrivate("x"),a=0,o=0;const l=this.get("position");n instanceof _i&&(e?n=e.innerWidth()*n.value+e.get("paddingLeft",0):n=0),kt(n)?a=n+i:s!=null?a=s:e&&l=="relative"&&(a=e.get("paddingLeft",0)+i);let c=this.get("y"),h=this.getPrivate("y");c instanceof _i&&(e?c=e.innerHeight()*c.value+e.get("paddingTop",0):c=0),kt(c)?o=c+r:h!=null?o=h:e&&l=="relative"&&(o=e.get("paddingTop",0)+r);const f=this._display;if(f.x!=a||f.y!=o){f.invalidateBounds(),f.x=a,f.y=o;const g="positionchanged";this.events.isEnabled(g)&&this.events.dispatch(g,{type:g,target:this})}this.getPrivate("showingTooltip")&&this.showTooltip()}x(){let e=this.get("x"),i=this.getPrivate("x");const r=this.parent;return r?e instanceof _i?Ms(e,r.innerWidth())+r.get("paddingLeft",0):kt(e)?e:i??r.get("paddingLeft",this._display.x):this._display.x}y(){let e=this.getPrivate("y");if(e!=null)return e;let i=this.get("y");const r=this.parent;return r?i instanceof _i?Ms(i,r.innerHeight())+r.get("paddingTop",0):kt(i)?i:e??r.get("paddingTop",this._display.y):this._display.y}_dispose(){super._dispose(),this._display.dispose(),this._removeTemplateField(),this._removeParent(this.parent),this._root._removeFocusElement(this);const e=this.get("tooltip");e&&e.dispose(),this.markDirty()}adjustedLocalBounds(){return this._fixMinBounds(this._adjustedLocalBounds),this._adjustedLocalBounds}localBounds(){return this._localBounds}bounds(){const e=this._adjustedLocalBounds,i=this.x(),r=this.y();return{left:e.left+i,right:e.right+i,top:e.top+r,bottom:e.bottom+r}}globalBounds(){const e=this.localBounds(),i=this.toGlobal({x:e.left,y:e.top}),r=this.toGlobal({x:e.right,y:e.top}),n=this.toGlobal({x:e.right,y:e.bottom}),s=this.toGlobal({x:e.left,y:e.bottom});return{left:Math.min(i.x,r.x,n.x,s.x),top:Math.min(i.y,r.y,n.y,s.y),right:Math.max(i.x,r.x,n.x,s.x),bottom:Math.max(i.y,r.y,n.y,s.y)}}_onShow(e){}_onHide(e){}appear(e,i){return vl(this,void 0,void 0,function*(){return yield this.hide(0),i?new Promise((r,n)=>{this.setTimeout(()=>{r(this.show(e))},i)}):this.show(e)})}show(e){return vl(this,void 0,void 0,function*(){if(!this._isShowing){this._isHidden=!1,this._isShowing=!0,this._isHiding=!1,this.states.lookup("default").get("visible")&&this.set("visible",!0),this._onShow(e);const i=this.states.applyAnimate("default",e);yield Rde(i),this._isShowing=!1}})}hide(e){return vl(this,void 0,void 0,function*(){if(!this._isHiding&&!this._isHidden){this._isHiding=!0,this._isShowing=!1;let i=this.states.lookup("hidden");i||(i=this.states.create("hidden",{opacity:0,visible:!1})),this._isHidden=!0,this._onHide(e);const r=this.states.applyAnimate("hidden",e);yield Rde(r),this._isHiding=!1}})}isHidden(){return this._isHidden}isShowing(){return this._isShowing}isHiding(){return this._isHiding}isHover(){return this._display.hovering()}isFocus(){return this._root.focused(this)}isDragging(){return this._isDragging}isVisible(){return!!(this.get("visible")&&this.getPrivate("visible")&&!this.get("forceHidden"))}isVisibleDeep(){return this._parent?this._parent.isVisibleDeep()&&this.isVisible():this.isVisible()}compositeOpacity(){const e=this.get("opacity",1);return this._parent?this._parent.compositeOpacity()*e:e}compositeScale(){const e=this.get("scale",1);return this._parent?this._parent.compositeScale()*e:e}compositeRotation(){const e=this.get("rotation",0);return this._parent?this._parent.compositeRotation()+e:e}width(){let e=this.get("width"),i=this.get("maxWidth",this.getPrivate("maxWidth")),r=this.get("minWidth",this.getPrivate("minWidth")),n=this.getPrivate("width"),s=0;if(kt(n))s=n;else if(e==null)this._adjustedLocalBounds&&(s=this._adjustedLocalBounds.right-this._adjustedLocalBounds.left);else if(e instanceof _i){const a=this.parent;a?s=a.innerWidth()*e.value:s=this._root.width()*e.value}else kt(e)&&(s=e);return kt(r)&&(s=Math.max(r,s)),kt(i)&&(s=Math.min(i,s)),s}maxWidth(){let e=this.get("maxWidth",this.getPrivate("maxWidth"));if(kt(e))return e;{let r=this.get("width");if(kt(r))return r}const i=this.parent;return i?i.innerWidth():this._root.width()}maxHeight(){let e=this.get("maxHeight",this.getPrivate("maxHeight"));if(kt(e))return e;{let r=this.get("height");if(kt(r))return r}const i=this.parent;return i?i.innerHeight():this._root.height()}height(){let e=this.get("height"),i=this.get("maxHeight",this.getPrivate("maxHeight")),r=this.get("minHeight",this.getPrivate("minHeight")),n=this.getPrivate("height"),s=0;if(kt(n))s=n;else if(e==null)this._adjustedLocalBounds&&(s=this._adjustedLocalBounds.bottom-this._adjustedLocalBounds.top);else if(e instanceof _i){const a=this.parent;a?s=a.innerHeight()*e.value:s=this._root.height()*e.value}else kt(e)&&(s=e);return kt(r)&&(s=Math.max(r,s)),kt(i)&&(s=Math.min(i,s)),s}_findStaticTemplate(e){return this._templateField&&e(this._templateField)?this._templateField:super._findStaticTemplate(e)}_walkParents(e){(this._parent||this._virtualParent)&&this._walkParent(e)}_walkParent(e){this._parent?this._parent._walkParent(e):this._virtualParent&&this._virtualParent._walkParent(e),e(this)}set virtualParent(e){this._virtualParent=e,this._applyThemes()}get parent(){return this._parent}_setParent(e,i=!1){const r=this._parent;e!==r&&(this.markDirtyBounds(),e.markDirty(),this._parent=e,i&&(this._removeParent(r),e&&(this._addPercentageSizeChildren(),this._addPercentagePositionChildren())),this.markDirtyPosition(),this._applyThemes())}getNumberFormatter(){return this.get("numberFormatter",this._root.numberFormatter)}getDateFormatter(){return this.get("dateFormatter",this._root.dateFormatter)}getDurationFormatter(){return this.get("durationFormatter",this._root.durationFormatter)}toGlobal(e){return this._display.toGlobal(e)}toLocal(e){return this._display.toLocal(e)}_getDownPoint(){const e=this._getDownPointId();if(e)return this._downPoints[e]}_getDownPointId(){if(this._downPoints)return e_t(this._downPoints,(e,i)=>e>i?1:e<i?-1:0)[0]}toFront(){const e=this.parent;e&&e.children.moveValue(this,e.children.length-1)}toBack(){const e=this.parent;e&&e.children.moveValue(this,0)}}Object.defineProperty(jd,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Sprite"});Object.defineProperty(jd,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:yo.classNames.concat([jd.className])});class cM extends yo{constructor(){super(...arguments),Object.defineProperty(this,"_display",{enumerable:!0,configurable:!0,writable:!0,value:this._root._renderer.makeGraphics()}),Object.defineProperty(this,"_backgroundDisplay",{enumerable:!0,configurable:!0,writable:!0,value:this._root._renderer.makeGraphics()}),Object.defineProperty(this,"_clear",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_pattern",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_afterNew(){super._afterNewApplyThemes()}get pattern(){return this._pattern}_draw(){}_beforeChanged(){super._beforeChanged(),(this.isDirty("repetition")||this.isDirty("width")||this.isDirty("height")||this.isDirty("rotation")||this.isDirty("strokeWidth")||this.isDirty("strokeDasharray")||this.isDirty("strokeDashoffset")||this.isDirty("colorOpacity")||this.isDirty("fillOpacity"))&&(this._clear=!0),this._checkDirtyFill()}_checkDirtyFill(){(this.isDirty("color")||this.isDirty("fill"))&&(this._clear=!0)}_changed(){if(super._changed(),this._clear){const e=this.get("repetition",""),i=this.get("width",100),r=this.get("height",100),n=this.get("fill"),s=this.get("fillOpacity",1),a=this._backgroundDisplay,o=this._display;o.clear(),a.clear(),n&&s>0&&(a.beginFill(n,s),a.drawRect(0,0,i,r),a.endFill()),o.angle=this.get("rotation",0),this._draw(),this._pattern=this._root._renderer.createPattern(o,a,e,i,r)}this._clear=!1}}Object.defineProperty(cM,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Pattern"});Object.defineProperty(cM,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:yo.classNames.concat([cM.className])});class uM extends cM{constructor(){super(...arguments),Object.defineProperty(this,"_image",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_beforeChanged(){super._beforeChanged(),this._clear=!0,this.isDirty("src")&&this._load();const e=this.get("canvas");e&&(this.set("width",e.width),this.set("height",e.height))}_draw(){super._draw();const e=this.get("colorOpacity");e!==void 0&&(this._display.alpha=Math.max(0,e));const i=this._image;if(i){const n=this.get("width",100),s=this.get("height",100),a=this.get("fit","image");let o=0,l=0;a=="pattern"?(o=n,l=s,this.markDirty()):(o=i.width,l=i.height,a=="image"&&(this.set("width",o),this.set("height",l)));const c=this.get("centered",!0);let h=0,f=0;c&&(h=n/2-o/2,f=s/2-l/2),this._display.image(i,o,l,h,f)}const r=this.get("canvas");r&&this._display.image(r,r.width,r.height,0,0)}_load(){const e=this.get("src");if(e){const i=new Image;i.src=e,i.decode().then(()=>{this._image=i,this._draw(),this.events.isEnabled("loaded")&&this.events.dispatch("loaded",{type:"loaded",target:this})}).catch(r=>{})}}}Object.defineProperty(uM,"className",{enumerable:!0,configurable:!0,writable:!0,value:"PicturePattern"});Object.defineProperty(uM,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:cM.classNames.concat([uM.className])});var $5;(function(t){t.ADD="lighter",t.COLOR="color",t.COLOR_BURN="color-burn",t.COLOR_DODGE="color-dodge",t.DARKEN="darken",t.DIFFERENCE="difference",t.DST_OVER="destination-over",t.EXCLUSION="exclusion",t.HARD_LIGHT="hard-light",t.HUE="hue",t.LIGHTEN="lighten",t.LUMINOSITY="luminosity",t.MULTIPLY="multiply",t.NORMAL="source-over",t.OVERLAY="overlay",t.SATURATION="saturation",t.SCREEN="screen",t.SOFT_LIGHT="soft-light",t.SRC_ATOP="source-atop",t.XOR="xor"})($5||($5={}));const V_t=["fill","fillOpacity","stroke","strokeWidth","strokeOpacity","fillPattern","strokePattern","fillGradient","strokeGradient","strokeDasharray","strokeDashoffset","shadowBlur","shadowColor","shadowOpacity","shadowOffsetX","shadowOffsetY","blur","sepia","invert","brightness","hue","contrast","saturate"];class Ec extends jd{constructor(){super(...arguments),Object.defineProperty(this,"_display",{enumerable:!0,configurable:!0,writable:!0,value:this._root._renderer.makeGraphics()}),Object.defineProperty(this,"_clear",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_beforeChanged(){if(super._beforeChanged(),(this.isDirty("draw")||this.isDirty("svgPath"))&&this.markDirtyBounds(),(this.isDirty("fill")||this.isDirty("stroke")||this.isDirty("visible")||this.isDirty("forceHidden")||this.isDirty("scale")||this.isDirty("fillGradient")||this.isDirty("strokeGradient")||this.isDirty("fillPattern")||this.isDirty("strokePattern")||this.isDirty("fillOpacity")||this.isDirty("strokeOpacity")||this.isDirty("strokeWidth")||this.isDirty("draw")||this.isDirty("blendMode")||this.isDirty("strokeDasharray")||this.isDirty("strokeDashoffset")||this.isDirty("svgPath")||this.isDirty("lineJoin")||this.isDirty("lineCap")||this.isDirty("shadowColor")||this.isDirty("shadowBlur")||this.isDirty("shadowOffsetX")||this.isDirty("shadowOffsetY"))&&(this._clear=!0),this._display.crisp=this.get("crisp",!1),this.isDirty("fillGradient")){const e=this.get("fillGradient");if(e){this._display.isMeasured=!0;const i=e.get("target");i&&(this._disposers.push(i.events.on("boundschanged",()=>{this._markDirtyKey("fill")})),this._disposers.push(i.events.on("positionchanged",()=>{this._markDirtyKey("fill")})))}}if(this.isDirty("strokeGradient")){const e=this.get("strokeGradient");if(e){this._display.isMeasured=!0;const i=e.get("target");i&&(this._disposers.push(i.events.on("boundschanged",()=>{this._markDirtyKey("stroke")})),this._disposers.push(i.events.on("positionchanged",()=>{this._markDirtyKey("stroke")})))}}}_changed(){if(super._changed(),this._clear){this.markDirtyBounds(),this.markDirtyLayer(),this._display.clear();let e=this.get("strokeDasharray");kt(e)&&(e<.5?e=[0]:e=[e]),this._display.setLineDash(e);const i=this.get("strokeDashoffset");i&&this._display.setLineDashOffset(i);const r=this.get("blendMode",$5.NORMAL);this._display.blendMode=r;const n=this.get("draw");n&&typeof n=="function"&&n(this._display,this);const s=this.get("svgPath");s!=null&&this._display.svgPath(s)}}_afterChanged(){if(super._afterChanged(),this._clear){const e=this.get("fill"),i=this.get("fillGradient"),r=this.get("fillPattern"),n=this.get("fillOpacity"),s=this.get("stroke"),a=this.get("strokeGradient"),o=this.get("strokePattern"),l=this.get("shadowColor"),c=this.get("shadowBlur"),h=this.get("shadowOffsetX"),f=this.get("shadowOffsetY"),g=this.get("shadowOpacity");if(l&&(c||h||f)&&this._display.shadow(l,c,h,f,g),e&&!i&&(this._display.beginFill(e,n),this._display.endFill()),i){if(e){const b=i.get("stops",[]);b.length&&Ne(b,_=>{(!_.color||_.colorInherited)&&e&&(_.color=e,_.colorInherited=!0),(_.opacity==null||_.opacityInherited)&&(_.opacity=n,_.opacityInherited=!0)})}const y=i.getFill(this);y&&(this._display.beginFill(y,n),this._display.endFill())}if(r){const y=r.pattern;y&&(this._display.beginFill(y,n),this._display.endFill(),r instanceof uM&&r.events.once("loaded",()=>{this._clear=!0,this.markDirty()}))}if(s||a||o){const y=this.get("strokeOpacity");let b=this.get("strokeWidth",1);this.get("nonScalingStroke")&&(b=b/this.get("scale",1)),this.get("crisp")&&(b/=this._root._renderer.resolution);const _=this.get("lineJoin"),S=this.get("lineCap");if(s&&!a&&(this._display.lineStyle(b,s,y,_,S),this._display.endStroke()),a){const $=a.get("stops",[]);$.length&&Ne($,I=>{(!I.color||I.colorInherited)&&s&&(I.color=s,I.colorInherited=!0),(I.opacity==null||I.opacityInherited)&&(I.opacity=y,I.opacityInherited=!0)});const C=a.getFill(this);C&&(this._display.lineStyle(b,C,y,_,S),this._display.endStroke())}if(o){let $=o.pattern;$&&(this._display.lineStyle(b,$,y,_,S),this._display.endStroke(),o instanceof uM&&o.events.once("loaded",()=>{this._clear=!0,this.markDirty()}))}}this.getPrivate("showingTooltip")&&this.showTooltip()}this._clear=!1}}Object.defineProperty(Ec,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Graphics"});Object.defineProperty(Ec,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:jd.classNames.concat([Ec.className])});class Lv extends Ec{_afterNew(){super._afterNew(),this._display.isMeasured=!0,this.setPrivateRaw("trustBounds",!0)}_beforeChanged(){super._beforeChanged(),(this.isDirty("width")||this.isDirty("height")||this.isPrivateDirty("width")||this.isPrivateDirty("height"))&&(this._clear=!0)}_changed(){super._changed(),this._clear&&!this.get("draw")&&this._draw()}_draw(){let e=this.width(),i=this.height(),r=0,n=0,s=e/Math.abs(e),a=i/Math.abs(i);if(this.get("containStroke",!1)){const o=this.get("strokeWidth",0);e-=o*s,i-=o*a,r+=o/2*s,n+=o/2*a}this._display.drawRect(r,n,e,i)}_updateSize(){this.markDirty(),this._clear=!0}}Object.defineProperty(Lv,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Rectangle"});Object.defineProperty(Lv,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Ec.classNames.concat([Lv.className])});function Gm(t,e){t.get("reverseChildren",!1)?t.children.eachReverse(e):t.children.each(e)}class ig extends yo{}Object.defineProperty(ig,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Layout"});Object.defineProperty(ig,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:yo.classNames.concat([ig.className])});class gT extends ig{updateContainer(e){let i=e.get("paddingLeft",0),r=e.innerWidth(),n=0;Gm(e,a=>{if(a.isVisible()&&a.get("position")=="relative"){let o=a.get("width");if(o instanceof _i){n+=o.value;let l=r*o.value,c=a.get("minWidth",a.getPrivate("minWidth",-1/0));c>l&&(r-=c,n-=o.value);let h=a.get("maxWidth",a.getPrivate("maxWidth",1/0));l>h&&(r-=h,n-=o.value)}else kt(o)||(o=a.width()),r-=o+a.get("marginLeft",0)+a.get("marginRight",0)}}),(r<=0||r==1/0)&&(r=.1),Gm(e,a=>{if(a.isVisible()&&a.get("position")=="relative"){let o=a.get("width");if(o instanceof _i){let l=r*o.value/n-a.get("marginLeft",0)-a.get("marginRight",0),c=a.get("minWidth",a.getPrivate("minWidth",-1/0)),h=a.get("maxWidth",a.getPrivate("maxWidth",1/0));l=Math.min(Math.max(c,l),h),a.setPrivate("width",l)}else a._prevSettings.width instanceof _i&&a.setPrivate("width",void 0)}});let s=i;Gm(e,a=>{if(a.get("position")=="relative")if(a.isVisible()){let o=a.adjustedLocalBounds(),l=a.get("marginLeft",0),c=a.get("marginRight",0),h=a.get("maxWidth"),f=o.left,g=o.right;h&&g-f>h&&(g=f+h);let y=s+l-f;a.setPrivate("x",y),s=y+g+c}else a.setPrivate("x",void 0)})}}Object.defineProperty(gT,"className",{enumerable:!0,configurable:!0,writable:!0,value:"HorizontalLayout"});Object.defineProperty(gT,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:ig.classNames.concat([gT.className])});class yT extends ig{updateContainer(e){let i=e.get("paddingTop",0),r=e.innerHeight(),n=0;Gm(e,a=>{if(a.isVisible()&&a.get("position")=="relative"){let o=a.get("height");if(o instanceof _i){n+=o.value;let l=r*o.value,c=a.get("minHeight",a.getPrivate("minHeight",-1/0));c>l&&(r-=c,n-=o.value);let h=a.get("maxHeight",a.getPrivate("maxHeight",1/0));l>h&&(r-=h,n-=o.value)}else kt(o)||(o=a.height()),r-=o+a.get("marginTop",0)+a.get("marginBottom",0)}}),(r<=0||r==1/0)&&(r=.1),Gm(e,a=>{if(a.isVisible()&&a.get("position")=="relative"){let o=a.get("height");if(o instanceof _i){let l=r*o.value/n-a.get("marginTop",0)-a.get("marginBottom",0),c=a.get("minHeight",a.getPrivate("minHeight",-1/0)),h=a.get("maxHeight",a.getPrivate("maxHeight",1/0));l=Math.min(Math.max(c,l),h),a.setPrivate("height",l)}else a._prevSettings.height instanceof _i&&a.setPrivate("height",void 0)}});let s=i;Gm(e,a=>{if(a.get("position")=="relative")if(a.isVisible()){let o=a.adjustedLocalBounds(),l=a.get("marginTop",0),c=o.top,h=o.bottom,f=a.get("maxHeight");f&&h-c>f&&(h=c+f);let g=a.get("marginBottom",0),y=s+l-c;a.setPrivate("y",y),s=y+h+g}else a.setPrivate("y",void 0)})}}Object.defineProperty(yT,"className",{enumerable:!0,configurable:!0,writable:!0,value:"VerticalLayout"});Object.defineProperty(yT,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:ig.classNames.concat([yT.className])});class s_ extends ig{_afterNew(){this._setRawDefault("maxColumns",Number.MAX_VALUE),super._afterNew()}updateContainer(e){let i=e.get("paddingLeft",0),r=e.get("paddingRight",0),n=e.get("paddingTop",0),s=e.maxWidth()-i-r,a=s,o=1;Gm(e,b=>{if(b.get("visible")&&b.getPrivate("visible")&&!b.get("forceHidden")&&b.get("position")!="absolute"){let _=b.width();_<a&&(a=_),_>o&&(o=_)}}),a=$a(a,1,s),o=$a(o,1,s);let l=1;this.get("fixedWidthGrid")?l=s/o:l=s/a,l=Math.max(1,Math.floor(l)),l=Math.min(this.get("maxColumns",Number.MAX_VALUE),l);let c=this.getColumnWidths(e,l,o,s),h=n,f=0,g=0;l=c.length;let y=i;Gm(e,b=>{if(b.get("position")=="relative"&&b.isVisible()){const _=b.get("marginTop",0),S=b.get("marginBottom",0);let $=b.adjustedLocalBounds(),C=b.get("marginLeft",0),I=b.get("marginRight",0),P=y+C-$.left,O=h+_-$.top;b.setPrivate("x",P),b.setPrivate("y",O),y+=c[f]+I,g=Math.max(g,b.height()+_+S),f++,f>=l&&(f=0,y=i,h+=g,g=0)}})}getColumnWidths(e,i,r,n){let s=0,a=[],o=0;return Gm(e,l=>{let c=l.adjustedLocalBounds();l.get("position")!="absolute"&&l.isVisible()&&(this.get("fixedWidthGrid")?a[o]=r:a[o]=Math.max(a[o]|0,c.right-c.left+l.get("marginLeft",0)+l.get("marginRight",0)),o<e.children.length-1&&(o++,o==i&&(o=0)))}),Ne(a,l=>{s+=l}),s>n?i>2?(i-=1,this.getColumnWidths(e,i,r,n)):[n]:a}}Object.defineProperty(s_,"className",{enumerable:!0,configurable:!0,writable:!0,value:"GridLayout"});Object.defineProperty(s_,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:ig.classNames.concat([s_.className])});class Rd{static escape(e){return e.replace(/\[\[/g,this.prefix+"1").replace(/([^\/\]]{1})\]\]/g,"$1"+this.prefix+"2").replace(/\]\]/g,this.prefix+"2").replace(/\{\{/g,this.prefix+"3").replace(/\}\}/g,this.prefix+"4").replace(/\'\'/g,this.prefix+"5")}static unescape(e){return e.replace(new RegExp(this.prefix+"1","g"),"[[").replace(new RegExp(this.prefix+"2","g"),"]]").replace(new RegExp(this.prefix+"3","g"),"{{").replace(new RegExp(this.prefix+"4","g"),"}}").replace(new RegExp(this.prefix+"5","g"),"''")}static cleanUp(e){return e.replace(/\[\[/g,"[").replace(/\]\]/g,"]").replace(/\{\{/g,"{").replace(/\}\}/g,"}").replace(/\'\'/g,"'")}static chunk(e,i=!1,r=!1){let n=[];e=this.escape(e);let s=i?e.split("'"):[e];for(let a=0;a<s.length;a++){let o=s[a];if(o!=="")if(a%2===0){o=o.replace(/\]\[/g,"]"+Ov+"["),o=o.replace(/\[\]/g,"[ ]");let l=o.split(/[\[\]]+/);for(let c=0;c<l.length;c++){let h=this.cleanUp(this.unescape(l[c]));h!==Ov&&h!==""&&(c%2===0?n.push({type:"value",text:h}):n.push({type:r?"value":"format",text:"["+h+"]"}))}}else{let l=o.split(/[\[\]]+/);for(let c=0;c<l.length;c++){let h=this.cleanUp(this.unescape(l[c]));h!==""&&(c%2===0?n.push({type:"text",text:h}):this.isImage(h)?n.push({type:"image",text:"["+h+"]"}):n.push({type:"format",text:"["+h+"]"}))}}}return n}static isImage(e){return!!e.match(/img[ ]?:/)}static getTextStyle(e){let i={};if(e==""||e=="[ ]")return{};const r=e.match(/('[^']*')|("[^"]*")/gi);if(r)for(let s=0;s<r.length;s++)e=e.replace(r[s],r[s].replace(/['"]*/g,"").replace(/[ ]+/g,"+"));let n=e.match(/([\w\-]*:[\s]?[^;\s\]]*)|(\#[\w]{1,6})|([\w\-]+)|(\/)/gi);if(!n)return{};for(let s=0;s<n.length;s++)if(n[s].match(/^(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)$/i))i.fontWeight=n[s];else if(n[s].match(/^(underline|line-through)$/i))i.textDecoration=n[s];else if(n[s]!="/")if(!n[s].match(/:/))i.fill=At.fromString(n[s]);else{const a=n[s].replace("+"," ").split(/:[ ]*/);i[a[0]]=a[1]}return i}}Object.defineProperty(Rd,"prefix",{enumerable:!0,configurable:!0,writable:!0,value:"__amcharts__"});function dM(t,e){if(e!=null){e=""+e,e=Rd.escape(e);let i=e.match(/\{([^}]+)\}/g),r;if(i)for(r=0;r<i.length;r++){let n=i[r].replace(/\{([^}]+)\}/,"$1"),s=wW(t,n);s==null&&(s=""),e=e.split(i[r]).join(s)}e=Rd.unescape(e)}else e="";return e}function wW(t,e,i){let r;const n=t.dataItem;let s=[],a=/(format[a-zA-Z]*)\((.*)\)|([^.]+)/g,o;for(;o=a.exec(e),o!==null;)if(o[3]){s.push({prop:o[3]});const l=t.getDateFormatter().get("dateFields",[]),c=t.getNumberFormatter().get("numericFields",[]),h=t.getDurationFormatter().get("durationFields",[]);l.indexOf(o[3])!==-1?s.push({method:"formatDate",params:[]}):c.indexOf(o[3])!==-1?s.push({method:"formatNumber",params:[]}):h.indexOf(o[3])!==-1&&s.push({method:"formatDuration",params:[]})}else{let l=[];if(n$(o[2])!=""){let c=/'([^']*)'|"([^"]*)"|([0-9\-]+)/g,h;for(;h=c.exec(o[2]),h!==null;)l.push(h[1]||h[2]||h[3])}s.push({method:o[1],params:l})}if(n){r=$0(t,s,n._settings),(r==null||TA(r))&&(r=$0(t,s,n));let l=n.dataContext;r==null&&l&&(r=$0(t,s,l),r==null&&(r=$0(t,[{prop:e}],l)),r==null&&l.dataContext&&(r=$0(t,s,l.dataContext))),r==null&&n.component&&n.component.dataItem!==n&&(r=wW(n.component,e))}return r==null&&(r=$0(t,s,t)),r==null&&t.parent&&(r=wW(t.parent,e)),r}function B_t(t,e){const i=t.getPrivate("customData");if(TA(i))return i[e]}function $0(t,e,i,r){let n=i,s=!1;for(let a=0,o=e.length;a<o;a++){let l=e[a];if(l.prop){if(n instanceof jd){let c=n.get(l.prop);c==null&&(c=n.getPrivate(l.prop)),c==null&&(c=B_t(n,l.prop)),c==null&&(c=n[l.prop]),n=c}else if(n.get){let c=n.get(l.prop);c==null&&(c=n[l.prop]),n=c}else n=n[l.prop];if(n==null)return}else switch(l.method){case"formatNumber":let c=pc(n);c!=null&&(n=t.getNumberFormatter().format(c,l.params[0]||void 0),s=!0);break;case"formatDate":let h=Gwt(n);if(!fW(h)||iK(h.getTime()))return;h!=null&&(n=t.getDateFormatter().format(h,l.params[0]||void 0),s=!0);break;case"formatDuration":let f=pc(n);f!=null&&(n=t.getDurationFormatter().format(f,l.params[0]||void 0,l.params[1]||void 0),s=!0);break;case"urlEncode":case"encodeURIComponent":n=encodeURIComponent(n);break;default:n[l.method]&&n[l.method].apply(i,l.params);break}}if(!s){let a=[{method:"",params:r}];kt(n)?(a[0].method="formatNumber",a[0].params=""):fW(n)&&(a[0].method="formatDate",a[0].params=""),a[0].method&&(n=$0(t,a,n))}return n}class _r extends jd{constructor(){super(...arguments),Object.defineProperty(this,"_display",{enumerable:!0,configurable:!0,writable:!0,value:this._root._renderer.makeContainer()}),Object.defineProperty(this,"_childrenDisplay",{enumerable:!0,configurable:!0,writable:!0,value:this._root._renderer.makeContainer()}),Object.defineProperty(this,"children",{enumerable:!0,configurable:!0,writable:!0,value:new M_t(this)}),Object.defineProperty(this,"_percentageSizeChildren",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_percentagePositionChildren",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_prevWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_prevHeight",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_contentWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_contentHeight",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_contentMask",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_vsbd0",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_vsbd1",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_hsbd0",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_hsbd1",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_childrenPrep",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_childrenUpdt",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_afterNew(){super._afterNew(),this._display.addChild(this._childrenDisplay)}_afterChanged(){super._afterChanged(),this._childrenPrep=!1,this._childrenUpdt=!1}_dispose(){iI(this.allChildren(),e=>{e.dispose()}),this.getPrivate("htmlElement")&&this._root._removeHTMLContent(this),super._dispose()}_beforeChanged(){this._childrenPrep||this._prepareChildren(),this._childrenUpdt||this._updateChildren(),super._beforeChanged()}_changed(){if(super._changed(),this.isDirty("interactiveChildren")&&(this._display.interactiveChildren=this.get("interactiveChildren",!1)),this.isDirty("layout")&&(this._prevWidth=0,this._prevHeight=0,this.markDirtyBounds(),this._prevSettings.layout&&this.children.each(e=>{e.removePrivate("x"),e.removePrivate("y")})),(this.isDirty("paddingTop")||this.isDirty("paddingBottom")||this.isDirty("paddingLeft")||this.isDirty("paddingRight"))&&this.children.each(e=>{e.markDirtyPosition()}),this.isDirty("maskContent")){const e=this._childrenDisplay;let i=this._contentMask;this.get("maskContent")?i||(i=Lv.new(this._root,{x:-.5,y:-.5,width:this.width()+1,height:this.height()+1}),this._contentMask=i,e.addChildAt(i._display,0),e.mask=i._display):i&&(e.removeChild(i._display),e.mask=null,i.dispose(),this._contentMask=void 0)}}_updateSize(){super._updateSize(),Ne(this._percentageSizeChildren,e=>{e._updateSize()}),Ne(this._percentagePositionChildren,e=>{e.markDirtyPosition(),e._updateSize()}),this.updateBackground()}updateBackground(){const e=this.get("background");let i=this._localBounds;if(i&&!this.isHidden()){let r=i.left,n=i.top,s=i.right-r,a=i.bottom-n,o=this.get("maxWidth"),l=this.get("maxHeight");l&&a>l&&(a=l),o&&s>o&&(s=o);let c=this.width(),h=this.height();e&&(e.setAll({width:s,height:a,x:r,y:n}),this._display.interactive&&(e._display.interactive=!0));const f=this._contentMask;f&&f.setAll({width:c+1,height:h+1});const g=this.get("verticalScrollbar");if(g){g.set("height",h),g.set("x",c-g.width()-g.get("marginRight",0)),g.set("end",g.get("start",0)+h/this._contentHeight);const y=g.get("background");y&&y.setAll({width:g.width(),height:h});let b=!0;this._contentHeight<=h&&(b=!1),g.setPrivate("visible",b)}}}_applyThemes(e=!1){return super._applyThemes(e)?(this.eachChildren(i=>{i._applyThemes(e)}),!0):!1}_applyState(e){super._applyState(e),this.get("setStateOnChildren")&&this.eachChildren(i=>{i.states.apply(e)})}_applyStateAnimated(e,i){super._applyStateAnimated(e,i),this.get("setStateOnChildren")&&this.eachChildren(r=>{r.states.applyAnimate(e,i)})}innerWidth(){return this.width()-this.get("paddingRight",0)-this.get("paddingLeft",0)}innerHeight(){return this.height()-this.get("paddingTop",0)-this.get("paddingBottom",0)}_getBounds(){if(this.get("html")){let e=this._localBounds;e&&(this._contentWidth=e.right-e.left,this._contentHeight=e.bottom-e.top)}else{let e=this.get("width"),i=this.get("height"),r=this.getPrivate("width"),n=this.getPrivate("height"),s={left:0,top:0,right:this.width(),bottom:this.height()},a=this.get("layout"),o=!1,l=!1;if((a instanceof gT||a instanceof s_)&&(o=!0),a instanceof yT&&(l=!0),!((e!=null||r!=null)&&(i!=null||n!=null)&&!this.get("verticalScrollbar"))){let c=Number.MAX_VALUE,h=c,f=-c,g=c,y=-c;const b=this.get("paddingLeft",0),_=this.get("paddingTop",0),S=this.get("paddingRight",0),$=this.get("paddingBottom",0);this.children.each(P=>{if(P.get("position")!="absolute"&&P.get("isMeasured")){let O=P.adjustedLocalBounds(),N=P.x(),R=P.y(),G=N+O.left,Y=N+O.right,Q=R+O.top,ae=R+O.bottom;o&&(G-=P.get("marginLeft",0),Y+=P.get("marginRight",0)),l&&(Q-=P.get("marginTop",0),ae+=P.get("marginBottom",0)),G<h&&(h=G),Y>f&&(f=Y),Q<g&&(g=Q),ae>y&&(y=ae)}}),h==c&&(h=0),f==-c&&(f=0),g==c&&(g=0),y==-c&&(y=0),s.left=h-b,s.top=g-_,s.right=f+S,s.bottom=y+$;const C=this.get("minWidth");kt(C)&&C>0&&s.right-s.left<C&&(s.right>=C?s.left=s.right-C:s.right=s.left+C);const I=this.get("minHeight");kt(I)&&I>0&&s.bottom-s.top<I&&(s.bottom>=I?s.top=s.bottom-I:s.bottom=s.top+I)}this._contentWidth=s.right-s.left,this._contentHeight=s.bottom-s.top,kt(e)&&(s.left=0,s.right=e),kt(r)&&(s.left=0,s.right=r),kt(i)&&(s.top=0,s.bottom=i),kt(n)&&(s.top=0,s.bottom=n),this._localBounds=s}}_updateBounds(){const e=this.get("layout");e&&e.updateContainer(this),super._updateBounds(),this.updateBackground()}markDirty(){super.markDirty(),this._root._addDirtyParent(this)}_prepareChildren(){this._childrenPrep=!0;const e=this.innerWidth(),i=this.innerHeight();if(e!=this._prevWidth||i!=this._prevHeight){let r=this.get("layout"),n=!1,s=!1;r&&((r instanceof gT||r instanceof s_)&&(n=!0),r instanceof yT&&(s=!0)),Ne(this._percentageSizeChildren,a=>{if(!n){let o=a.get("width");o instanceof _i&&a.setPrivate("width",o.value*e)}if(!s){let o=a.get("height");o instanceof _i&&a.setPrivate("height",o.value*i)}}),Ne(this._percentagePositionChildren,a=>{a.markDirtyPosition(),a.markDirtyBounds()}),this._prevWidth=e,this._prevHeight=i,this._sizeDirty=!0,this.updateBackground()}}_updateHTMLContent(){const e=this.get("html","");e&&e!==""?this._root._setHTMLContent(this,dM(this,e)):this._root._removeHTMLContent(this),this._root._positionHTMLElement(this)}scrollToChild(e){const i=this.get("verticalScrollbar");if(i){let r=e.y(),n=this.innerHeight(),s=e.height(),a=this._contentHeight,o=1-(n-s/2)/a;if(r+s*.7+this._childrenDisplay.y>n||r-s*.3+this._childrenDisplay.y<0){let l=Math.max(0,Math.min(o,(r-s/2)/a));i.animate({key:"start",to:l,duration:i.get("animationDuration",0),easing:i.get("animationEasing")})}}}_updateChildren(){if(this._childrenUpdt=!0,this.isDirty("html")&&this._updateHTMLContent(),this.isDirty("verticalScrollbar")){const e=this.get("verticalScrollbar");if(e){e._setParent(this),e.startGrip.setPrivate("visible",!1),e.endGrip.setPrivate("visible",!1),this.set("maskContent",!0),this.set("paddingRight",e.width()+e.get("marginRight",0)+e.get("marginLeft",0));let i=this.get("background");i||(i=this.set("background",Lv.new(this._root,{themeTags:["background"],fillOpacity:0,fill:this._root.interfaceColors.get("alternativeBackground")}))),this._vsbd0=this.events.on("wheel",r=>{const n=r.originalEvent;if(u_t(n,this))n.preventDefault();else return;let s=n.deltaY/5e3;const a=e.get("start",0),o=e.get("end",1);a+s<=0&&(s=-a),o+s>=1&&(s=1-o),a+s>=0&&o+s<=1&&(e.set("start",a+s),e.set("end",o+s))}),this._disposers.push(this._vsbd0),this._vsbd1=e.events.on("rangechanged",()=>{let r=this._contentHeight;const n=this._childrenDisplay,s=this._contentMask;n.y=-e.get("start",0)*r,n.markDirtyLayer(),s&&(s._display.y=-n.y,n.mask=s._display)}),this._disposers.push(this._vsbd1),this._display.addChild(e._display)}else{const i=this._prevSettings.verticalScrollbar;if(i){this._display.removeChild(i._display),this._vsbd0&&this._vsbd0.dispose(),this._vsbd1&&this._vsbd1.dispose();const r=this._childrenDisplay;r.y=0,this.setPrivate("height",void 0),this.set("maskContent",!1),this.set("paddingRight",void 0)}}}if(this.isDirty("background")){const e=this._prevSettings.background;e&&this._display.removeChild(e._display);const i=this.get("background");i instanceof jd&&(i.set("isMeasured",!1),i._setParent(this),this._display.addChildAt(i._display,0))}if(this.isDirty("mask")){const e=this.get("mask"),i=this._prevSettings.mask;if(i&&(this._display.removeChild(i._display),i!=e&&i.dispose()),e){const r=e.parent;r&&r.children.removeValue(e),e._setParent(this),this._display.addChildAt(e._display,0),this._childrenDisplay.mask=e._display}}}_processTemplateField(){super._processTemplateField(),this.children.each(e=>{e._processTemplateField()})}walkChildren(e){this.children.each(i=>{i instanceof _r&&i.walkChildren(e),e(i)})}eachChildren(e){const i=this.get("background");i&&e(i);const r=this.get("verticalScrollbar");r&&e(r);const n=this.get("mask");n&&e(n),this.children.values.forEach(s=>{e(s)})}allChildren(){const e=[];return this.eachChildren(i=>{e.push(i)}),e}_setDataItem(e){const i=e!==this._dataItem;super._setDataItem(e);const r=this.get("html","");r&&r!==""&&i&&this._root._setHTMLContent(this,dM(this,r))}contentWidth(){return this._contentWidth}contentHeight(){return this._contentHeight}}Object.defineProperty(_r,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Container"});Object.defineProperty(_r,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:jd.classNames.concat([_r.className])});class a_ extends jd{constructor(){super(...arguments),Object.defineProperty(this,"textStyle",{enumerable:!0,configurable:!0,writable:!0,value:this._root._renderer.makeTextStyle()}),Object.defineProperty(this,"_display",{enumerable:!0,configurable:!0,writable:!0,value:this._root._renderer.makeText("",this.textStyle)}),Object.defineProperty(this,"_textStyles",{enumerable:!0,configurable:!0,writable:!0,value:["textAlign","fontFamily","fontSize","fontStyle","fontWeight","fontStyle","fontVariant","textDecoration","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","shadowOpacity","lineHeight","baselineRatio","direction","textBaseline","oversizedBehavior","breakWords","ellipsis","minScale","maxChars"]}),Object.defineProperty(this,"_originalScale",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_updateBounds(){if(this.get("text")){super._updateBounds();let e=this.get("fillGradient");e&&(this._display.style.fill=e.getFill(this))}else{let e={left:0,right:0,top:0,bottom:0};this._adjustedLocalBounds=e}}_changed(){super._changed(),this._display.clear();let e=this.textStyle;if(this.isDirty("opacity")){let i=this.get("opacity",1);this._display.alpha=i}if((this.isDirty("text")||this.isDirty("populateText"))&&(this._display.text=this._getText(),this.markDirtyBounds(),this.get("role")=="tooltip"&&this._root.updateTooltip(this)),this.isPrivateDirty("tooltipElement")&&this.getPrivate("tooltipElement")&&this._disposers.push(new As(()=>{this._root._removeTooltipElement(this)})),this.isDirty("width")&&(e.wordWrapWidth=this.width(),this.markDirtyBounds()),this.isDirty("oversizedBehavior")&&(e.oversizedBehavior=this.get("oversizedBehavior","none"),this._display.invalidateVisibility(),this.markDirtyBounds()),this.isDirty("breakWords")&&(e.breakWords=this.get("breakWords",!1),this.markDirtyBounds()),this.isDirty("ellipsis")&&(e.ellipsis=this.get("ellipsis"),this.markDirtyBounds()),this.isDirty("ignoreFormatting")&&(e.ignoreFormatting=this.get("ignoreFormatting",!1),this.markDirtyBounds()),this.isDirty("minScale")&&(e.minScale=this.get("minScale",0),this.markDirtyBounds()),this.isDirty("fill")||this.isDirty("fillGradient")){const i=this.get("fill"),r=this.get("fillGradient"),n=this.get("fillOpacity");if(r){if(i){const s=r.get("stops",[]);s.length&&Ne(s,a=>{(!a.color||a.colorInherited)&&i&&(a.color=i,a.colorInherited=!0),(a.opacity==null||a.opacityInherited)&&(a.opacity=n,a.opacityInherited=!0)})}e.fill=r.getFill(this)}else i&&(e.fill=i)}if(this.isDirty("fillOpacity")){let i=this.get("fillOpacity",1);i&&(e.fillOpacity=i)}(this.isDirty("maxWidth")||this.isPrivateDirty("maxWidth"))&&(e.maxWidth=this.get("maxWidth",this.getPrivate("maxWidth")),this.markDirtyBounds()),(this.isDirty("maxHeight")||this.isPrivateDirty("maxHeight"))&&(e.maxHeight=this.get("maxHeight",this.getPrivate("maxHeight")),this.markDirtyBounds()),Ne(this._textStyles,i=>{this._dirty[i]&&(e[i]=this.get(i),this.markDirtyBounds())}),e.fontSize=this.get("fontSize"),e.fontFamily=this.get("fontFamily"),this._display.style=e,this.isDirty("role")&&this.get("role")=="tooltip"&&this._root.updateTooltip(this)}_getText(){let e=this.get("text","");return this.get("maxChars")&&(e=g_t(e,this.get("maxChars",1e8),this.get("breakWords"),this.get("ellipsis"))),this.get("populateText")?dM(this,e):e}_getAccessibleText(){const e=this.get("ariaLabel");return e!==void 0?this.get("populateText")?dM(this,e):e:this._getText()}markDirtyText(){this._display.text=this._getText(),this.get("role")=="tooltip"&&this._root.updateTooltip(this),this.markDirtyBounds(),this.markDirty()}_setDataItem(e){super._setDataItem(e),this.get("populateText")&&this.markDirtyText()}getNumberFormatter(){return this.parent?this.parent.getNumberFormatter():super.getNumberFormatter()}getDateFormatter(){return this.parent?this.parent.getDateFormatter():super.getDateFormatter()}getDurationFormatter(){return this.parent?this.parent.getDurationFormatter():super.getDurationFormatter()}}Object.defineProperty(a_,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Text"});Object.defineProperty(a_,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:jd.classNames.concat([a_.className])});class U_t{constructor(){Object.defineProperty(this,"_observer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_targets",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this._observer=new ResizeObserver(e=>{Ne(e,i=>{Ne(this._targets,r=>{r.target===i.target&&r.callback()})})})}addTarget(e,i){this._observer.observe(e,{box:"border-box"}),this._targets.push({target:e,callback:i})}removeTarget(e){this._observer.unobserve(e),gj(this._targets,i=>i.target!==e)}}class bj{constructor(){Object.defineProperty(this,"_timer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_targets",{enumerable:!0,configurable:!0,writable:!0,value:[]})}addTarget(e,i){if(this._timer===null){let n=null;const s=()=>{const a=Date.now();(n===null||a>n+bj.delay)&&(n=a,Ne(this._targets,o=>{let l=o.target.getBoundingClientRect();(l.width!==o.size.width||l.height!==o.size.height)&&(o.size=l,o.callback())})),this._targets.length===0?this._timer=null:this._timer=requestAnimationFrame(s)};this._timer=requestAnimationFrame(s)}let r={width:0,height:0,left:0,right:0,top:0,bottom:0,x:0,y:0};this._targets.push({target:e,callback:i,size:r})}removeTarget(e){gj(this._targets,i=>i.target!==e),this._targets.length===0&&this._timer!==null&&(cancelAnimationFrame(this._timer),this._timer=null)}}Object.defineProperty(bj,"delay",{enumerable:!0,configurable:!0,writable:!0,value:200});let WL=null;function H_t(){return WL===null&&(typeof ResizeObserver<"u"?WL=new U_t:WL=new bj),WL}class G_t{constructor(e,i){Object.defineProperty(this,"_sensor",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_element",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_listener",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_disposed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this._sensor=H_t(),this._element=e,this._listener=fEe(i),this._sensor.addTarget(e,i)}isDisposed(){return this._disposed}dispose(){this._disposed||(this._disposed=!0,this._sensor.removeTarget(this._element),this._listener.dispose())}get sensor(){return this._sensor}}class T5 extends yo{}Object.defineProperty(T5,"className",{enumerable:!0,configurable:!0,writable:!0,value:"InterfaceColors"});Object.defineProperty(T5,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:yo.classNames.concat([T5.className])});let $u=class extends _r{constructor(){super(...arguments),Object.defineProperty(this,"_text",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_textKeys",{enumerable:!0,configurable:!0,writable:!0,value:["text","fill","fillGradient","fillOpacity","textAlign","fontFamily","fontSize","fontStyle","fontWeight","fontStyle","fontVariant","textDecoration","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","shadowOpacity","lineHeight","baselineRatio","direction","textBaseline","oversizedBehavior","breakWords","ellipsis","minScale","populateText","role","ignoreFormatting","maxChars","ariaLabel"]})}get text(){return this._text}_afterNew(){super._afterNew(),this._makeText(),Ne(this._textKeys,e=>{const i=this.get(e);i!=null&&this._text.set(e,i)}),this.get("html","")!==""&&this._text.set("text",""),this.onPrivate("maxWidth",()=>{this._setMaxDimentions()}),this.onPrivate("maxHeight",()=>{this._setMaxDimentions()})}_makeText(){this._text=this.children.push(a_.new(this._root,{}))}_updateChildren(){super._updateChildren();const e=this._text;if(Ne(this._textKeys,r=>{this._text.set(r,this.get(r))}),(this.isDirty("maxWidth")||this.isDirty("maxHeight")||this.isDirty("rotation"))&&this._setMaxDimentions(),this.get("html","")!==""?e.set("text",""):(e.set("text",this.get("text")),this._maybeUpdateHTMLColor()),(this.isDirty("fill")||this.isDirty("fillGradient"))&&this._maybeUpdateHTMLColor(),this.isDirty("textAlign")||this.isDirty("width")){const r=this.get("textAlign");let n;this.get("width")!=null?r=="right"?n=bi:r=="center"?n=ai:n=0:r=="left"||r=="start"?n=this.get("paddingLeft",0):(r=="right"||r=="end")&&(n=-this.get("paddingRight",0)),e.set("x",n)}const i=this.get("background");i&&i.setPrivate("visible",e._display.textVisible)}_maybeUpdateHTMLColor(){const e=this.getPrivate("htmlElement");e&&this.get("fill")&&(e.style.color=this.get("fill").toCSSHex())}_setMaxDimentions(){const e=this.get("rotation"),i=e==90||e==270||e==-90,r=this._text,n=this.get("maxWidth",this.getPrivate("maxWidth",1/0));kt(n)?r.set(i?"maxHeight":"maxWidth",n-this.get("paddingTop",0)-this.get("paddingBottom",0)):r.set(i?"maxHeight":"maxWidth",void 0);const s=this.get("maxHeight",this.getPrivate("maxHeight",1/0));kt(s)?r.set(i?"maxWidth":"maxHeight",s-this.get("paddingLeft",0)-this.get("paddingRight",0)):r.set(i?"maxWidth":"maxHeight",void 0),this.root.events.once("frameended",()=>{r.markDirtyBounds()})}_setDataItem(e){super._setDataItem(e),this._markDirtyKey("text"),this._markDirtyKey("html");const i=this._text;i.get("populateText")&&i.markDirtyText();const r=this.get("html");r&&r!==""&&this._updateHTMLContent()}getText(){return this._text._getText()}getAccessibleText(){return this._text._getAccessibleText()}};Object.defineProperty($u,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Label"});Object.defineProperty($u,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:_r.classNames.concat([$u.className])});class s$ extends Ec{_beforeChanged(){super._beforeChanged(),(this.isDirty("pointerBaseWidth")||this.isDirty("cornerRadius")||this.isDirty("pointerLength")||this.isDirty("pointerX")||this.isDirty("pointerY")||this.isDirty("width")||this.isDirty("height"))&&(this._clear=!0)}_changed(){if(super._changed(),this._clear){this.markDirtyBounds();let e=this.width(),i=this.height();if(e>0&&i>0){let r=this.get("cornerRadius",8);r=$a(r,0,Math.min(e/2,i/2));let n=this.get("pointerX",0),s=this.get("pointerY",0),a=this.get("pointerBaseWidth",15)/2,o=0,l=0,c=e,h=0,f=e,g=i,y=0,b=i,_=(n-o)*(g-l)-(s-l)*(f-o),S=(n-y)*(h-b)-(s-b)*(c-y);const $=this._display;if($.moveTo(r,0),_>0&&S>0){let C=Math.round($a(n,r+a,e-a-r));s=$a(s,-1/0,0),$.lineTo(C-a,0),$.lineTo(n,s),$.lineTo(C+a,0)}if($.lineTo(e-r,0),$.arcTo(e,0,e,r,r),_>0&&S<0){let C=Math.round($a(s,r+a,i-a-r));n=$a(n,e,1/0),$.lineTo(e,r),$.lineTo(e,Math.max(C-a,r)),$.lineTo(n,s),$.lineTo(e,C+a)}if($.lineTo(e,i-r),$.arcTo(e,i,e-r,i,r),_<0&&S<0){let C=Math.round($a(n,r+a,e-a-r));s=$a(s,i,1/0),$.lineTo(e-r,i),$.lineTo(C+a,i),$.lineTo(n,s),$.lineTo(C-a,i)}if($.lineTo(r,i),$.arcTo(0,i,0,i-r,r),_<0&&S>0){let C=Math.round($a(s,r+a,i-r-a));n=$a(n,-1/0,0),$.lineTo(0,i-r),$.lineTo(0,C+a),$.lineTo(n,s),$.lineTo(0,Math.max(C-a,r))}$.lineTo(0,r),$.arcTo(0,0,r,0,r),$.closePath()}}}}Object.defineProperty(s$,"className",{enumerable:!0,configurable:!0,writable:!0,value:"PointedRectangle"});Object.defineProperty(s$,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Ec.classNames.concat([s$.className])});class hM extends _r{constructor(e,i,r,n=[]){super(e,i,r,n),Object.defineProperty(this,"_fx",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_fy",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_label",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_fillDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_fillGrDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_strokeDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_labelDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_w",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_h",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_keepHoverDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_htmlContentHovered",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_afterNew(){this._settings.themeTags=uc(this._settings.themeTags,["tooltip"]),super._afterNew(),this._setDefaultFn("background",()=>s$.new(this._root,{})).set("themeTags",["tooltip","background"]),this._label=this.children.push($u.new(this._root,{})),this._disposers.push(this._label.events.on("boundschanged",()=>{this._updateBackground()})),this._disposers.push(this.on("bounds",()=>{this._updateBackground()})),this._updateTextColor(),this._root.tooltipContainer.children.push(this),this.hide(0),this._disposers.push(this.label.onPrivate("htmlElement",i=>{i&&(this._disposers.push(Nn(i,"pointerover",r=>{this._htmlContentHovered=!0})),this._disposers.push(Nn(i,"pointerout",r=>{this._htmlContentHovered=!1})))})),this.on("visible",i=>{this._handleReaderAnnouncement()}),this.label.events.on("dataitemchanged",i=>{this._handleReaderAnnouncement()}),this._root._tooltips.push(this)}_handleReaderAnnouncement(){this.get("readerAnnounce")&&this.isVisibleDeep()&&this._root.readerAlert(this.label.getAccessibleText())}get label(){return this._label}_dispose(){super._dispose(),Im(this._root._tooltips,this)}_updateChildren(){super._updateChildren(),(this.isDirty("pointerOrientation")||this.isPrivateDirty("minWidth")||this.isPrivateDirty("minHeight"))&&this.get("background")._markDirtyKey("width"),this.get("labelText")!=null&&this.label.set("text",this.get("labelText")),this.get("labelHTML")!=null&&this.label.set("html",this.get("labelHTML")),this.get("labelAriaLabel")!=null&&this.label.set("ariaLabel",this.get("labelAriaLabel"))}_changed(){if(super._changed(),(this.isDirty("pointTo")||this.isDirty("pointerOrientation"))&&this._updateBackground(),this.isDirty("tooltipTarget")&&this.updateBackgroundColor(),this.isDirty("keepTargetHover"))if(this.get("keepTargetHover")){const i=this.get("background");this._keepHoverDp=new gl([i.events.on("pointerover",r=>{let n=this.get("tooltipTarget");n&&(n.parent&&n.parent.getPrivate("tooltipTarget")==n&&(n=n.parent),n.hover())}),i.events.on("pointerout",r=>{let n=this.get("tooltipTarget");n&&(n.parent&&n.parent.getPrivate("tooltipTarget")==n&&(n=n.parent),this._htmlContentHovered||n.unhover())})]),this.label.onPrivate("htmlElement",r=>{this._keepHoverDp&&r&&this._keepHoverDp.disposers.push(Nn(r,"pointerleave",n=>{const s=this.root._renderer.getEvent(n);i.events.dispatch("pointerout",{type:"pointerout",originalEvent:s.event,point:s.point,simulated:!1,target:i})}))})}else this._keepHoverDp&&(this._keepHoverDp.dispose(),this._keepHoverDp=void 0)}_onShow(){super._onShow(),this.updateBackgroundColor()}updateBackgroundColor(){let e=this.get("tooltipTarget");const i=this.get("background");let r,n;if(e&&i){if(r=e.get("fill"),n=e.get("stroke"),r==null&&(r=n),this.get("getFillFromSprite")&&(this._fillDp&&this._fillDp.dispose(),r!=null&&i.set("fill",r),this._fillDp=e.on("fill",s=>{s!=null&&(i.set("fill",s),this._updateTextColor(s))}),this._disposers.push(this._fillDp)),this.get("getFillGradientFromSprite")){this._fillGrDp&&this._fillGrDp.dispose();let s=e.get("fillGradient");s!=null&&i.set("fillGradient",s),this._fillGrDp=e.on("fillGradient",a=>{a!=null&&i.set("fillGradient",a)}),this._disposers.push(this._fillGrDp)}this.get("getStrokeFromSprite")&&(this._strokeDp&&this._strokeDp.dispose(),r!=null&&i.set("stroke",r),this._strokeDp=e.on("fill",s=>{s!=null&&i.set("stroke",s)}),this._disposers.push(this._strokeDp)),this.get("getLabelFillFromSprite")&&(this._labelDp&&this._labelDp.dispose(),r!=null&&this.label.set("fill",r),this._labelDp=e.on("fill",s=>{s!=null&&this.label.set("fill",s)}),this._disposers.push(this._labelDp))}this._updateTextColor(r)}_updateTextColor(e){this.get("autoTextColor")&&(e==null&&(e=this.get("background").get("fill")),e==null&&(e=this._root.interfaceColors.get("background")),e instanceof At&&this.label.set("fill",At.alternative(e,this._root.interfaceColors.get("alternativeText"),this._root.interfaceColors.get("text"))))}_setDataItem(e){super._setDataItem(e),this.label._setDataItem(e)}_updateBackground(){super.updateBackground();const e=this._root.container;if(e){let i=.5,r=.5,n=this.get("centerX");n instanceof _i&&(i=n.value);let s=this.get("centerY");s instanceof _i&&(r=s.value);let a=e.width(),o=e.height(),l=this.parent,c=0,h=0;if(l){c=l.x(),h=l.y();const ae=l.get("layerMargin");ae&&(c+=ae.left||0,h+=ae.top||0,a+=(ae.left||0)+(ae.right||0),o+=(ae.top||0)+(ae.bottom||0))}const f=this.get("bounds",{left:-c,top:-h,right:a-c,bottom:o-h});this._updateBounds();let g=this.width(),y=this.height();g===0&&(g=this._w),y===0&&(y=this._h);let b=this.get("pointTo",{x:a/2,y:o/2}),_=b.x,S=b.y,$=this.get("pointerOrientation"),C=this.get("background"),I=0,P=0,O=0;C instanceof s$&&(I=C.get("pointerLength",0),P=C.get("strokeWidth",0)/2,O=P,C.set("width",g),C.set("height",y));let N=0,R=0,G=f.right-f.left,Y=f.bottom-f.top;$=="horizontal"||$=="left"||$=="right"?(P=0,$=="horizontal"?_>f.left+G/2?(_-=g*(1-i)+I,O*=-1):_+=g*i+I:$=="left"?_+=g*(1-i)+I:(_-=g*i+I,O*=-1)):(O=0,$=="vertical"?S>f.top+y/2+I?S-=y*(1-r)+I:(S+=y*r+I,P*=-1):$=="down"?S-=y*(1-r)+I:(S+=y*r+I,P*=-1)),_=$a(_,f.left+g*i,f.left+G-g*(1-i))+O,S=$a(S,f.top+y*r,f.top+Y-y*(1-r))-P,N=b.x-_+g*i+O,R=b.y-S+y*r-P,this._fx=_,this._fy=S;const Q=this.get("animationDuration",0);if(Q>0&&this.get("visible")&&this.get("opacity")>.1){const ae=this.get("animationEasing");this.animate({key:"x",to:_,duration:Q,easing:ae}),this.animate({key:"y",to:S,duration:Q,easing:ae})}else this.set("x",_),this.set("y",S);C instanceof s$&&(C.set("pointerX",N),C.set("pointerY",R)),g>0&&(this._w=g),y>0&&(this._h=y)}}}Object.defineProperty(hM,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Tooltip"});Object.defineProperty(hM,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:_r.classNames.concat([hM.className])});class q_t extends yo{_setDefaults(){this._setDefault("negativeBase",0),this._setDefault("numberFormat","#,###.#####"),this._setDefault("smallNumberThreshold",1);const e="_big_number_suffix_",i="_small_number_suffix_",r="_byte_suffix_";this._setDefault("bigNumberPrefixes",[{number:1e3,suffix:this._t(e+"3")},{number:1e6,suffix:this._t(e+"6")},{number:1e9,suffix:this._t(e+"9")},{number:1e12,suffix:this._t(e+"12")},{number:1e15,suffix:this._t(e+"15")},{number:1e18,suffix:this._t(e+"18")},{number:1e21,suffix:this._t(e+"21")},{number:1e24,suffix:this._t(e+"24")}]),this._setDefault("smallNumberPrefixes",[{number:1e-24,suffix:this._t(i+"24")},{number:1e-21,suffix:this._t(i+"21")},{number:1e-18,suffix:this._t(i+"18")},{number:1e-15,suffix:this._t(i+"15")},{number:1e-12,suffix:this._t(i+"12")},{number:1e-9,suffix:this._t(i+"9")},{number:1e-6,suffix:this._t(i+"6")},{number:.001,suffix:this._t(i+"3")}]),this._setDefault("bytePrefixes",[{number:1,suffix:this._t(r+"B")},{number:1024,suffix:this._t(r+"KB")},{number:1048576,suffix:this._t(r+"MB")},{number:1073741824,suffix:this._t(r+"GB")},{number:1099511627776,suffix:this._t(r+"TB")},{number:0x4000000000000,suffix:this._t(r+"PB")}]),super._setDefaults()}_beforeChanged(){super._beforeChanged()}format(e,i,r){(i==null||n_(i)&&i.toLowerCase()==="number")&&(i=this.get("numberFormat",""));let n,s=Number(e);if(TA(i))try{return this.get("intlLocales")?new Intl.NumberFormat(this.get("intlLocales"),i).format(s):new Intl.NumberFormat(void 0,i).format(s)}catch{return"Invalid"}else{i=sK(i);let a=this.parseFormat(i,this._root.language),o;s>this.get("negativeBase")?o=a.positive:s<this.get("negativeBase")?o=a.negative:o=a.zero,r!=null&&!o.mod&&(o=t_t(o),o.decimals.active=s==0?0:r),n=o.template.split(Ov).join(this.applyFormat(s,o))}return this.get("forceLTR")===!0&&(n=""+n),n}parseFormat(e,i){const r=i.translateEmpty("_thousandSeparator"),n=i.translateEmpty("_decimalSeparator");let s={positive:{thousands:{active:-1,passive:-1,interval:-1,separator:r},decimals:{active:-1,passive:-1,separator:n},template:"",source:"",parsed:!1},negative:{thousands:{active:-1,passive:-1,interval:-1,separator:r},decimals:{active:-1,passive:-1,separator:n},template:"",source:"",parsed:!1},zero:{thousands:{active:-1,passive:-1,interval:-1,separator:r},decimals:{active:-1,passive:-1,separator:n},template:"",source:"",parsed:!1}};e=e.replace("||",PS);let a=e.split("|");return s.positive.source=a[0],typeof a[2]>"u"?s.zero=s.positive:s.zero.source=a[2],typeof a[1]>"u"?s.negative=s.positive:s.negative.source=a[1],Lr(s,(o,l)=>{if(l.parsed)return;let c=l.source;c.toLowerCase()==="number"&&(c=this.get("numberFormat","#,###.#####"));let h=Rd.chunk(c,!0);for(let f=0;f<h.length;f++){let g=h[f];if(g.text=g.text.replace(PS,"|"),g.type==="value"){let y=g.text.match(/[#0.,]+[ ]?[abespABESP%!]?[abespABESP!]?/);if(y)if(y===null||y[0]==="")l.template+=g.text;else{let b=y[0].match(/[abespABESP%!]{2}|[abespABESP%]{1}$/);b&&(l.mod=b[0].toLowerCase(),l.modSpacing=!!y[0].match(/[ ]{1}[abespABESP%!]{1}$/));let _=y[0].split(".");if(_[0]!==""){l.thousands.active=(_[0].match(/0/g)||[]).length,l.thousands.passive=(_[0].match(/\#/g)||[]).length+l.thousands.active;let S=_[0].split(",");S.length===1||(l.thousands.interval=(S.pop()||"").length,l.thousands.interval===0&&(l.thousands.interval=-1))}typeof _[1]>"u"||(l.decimals.active=(_[1].match(/0/g)||[]).length,l.decimals.passive=(_[1].match(/\#/g)||[]).length+l.decimals.active),l.template+=g.text.split(y[0]).join(Ov)}}else l.template+=g.text}l.parsed=!0}),s}applyFormat(e,i){let r=e<0;e=Math.abs(e);let n="",s="",a=i.mod?i.mod.split(""):[];if(a.indexOf("b")!==-1){let f=this.applyPrefix(e,this.get("bytePrefixes"),a.indexOf("!")!==-1);e=f[0],n=f[1],s=f[2],i.modSpacing&&(s=" "+s)}else if(a.indexOf("a")!==-1){let f=this.applyPrefix(e,e<this.get("smallNumberThreshold")?this.get("smallNumberPrefixes"):this.get("bigNumberPrefixes"),a.indexOf("!")!==-1);e=f[0],n=f[1],s=f[2],i.modSpacing&&(s=" "+s)}else if(a.indexOf("p")!==-1){let f=Math.min(e.toString().length+2,21);e=parseFloat(e.toPrecision(f)),n=this._root.language.translate("_percentPrefix"),s=this._root.language.translate("_percentSuffix"),n==""&&s==""&&(s="%")}else if(a.indexOf("%")!==-1){let f=Math.min(e.toString().length+2,21);e*=100,e=parseFloat(e.toPrecision(f)),s="%"}else if(a.indexOf("")!==-1){let f=Math.min(e.toString().length+3,21);e*=1e3,e=parseFloat(e.toPrecision(f)),s=""}if(a.indexOf("e")!==-1){let f;i.decimals.passive>=0?f=e.toExponential(i.decimals.passive).split("e"):f=e.toExponential().split("e"),e=Number(f[0]),s="e"+f[1],i.modSpacing&&(s=" "+s)}else if(i.decimals.passive===0)e=Math.round(e);else if(i.decimals.passive>0){const f=p_t(e);if(f>0){const g=Math.pow(10,i.decimals.passive);e=Math.round(parseFloat((e*g).toFixed(f)))/g}}let o="",l=qwt(e).split("."),c=l[0];if(c.length<i.thousands.active&&(c=Array(i.thousands.active-c.length+1).join("0")+c),i.thousands.interval>0){let f=[],g=c.split("").reverse().join("");for(let y=0,b=c.length;y<=b;y+=i.thousands.interval){let _=g.substr(y,i.thousands.interval).split("").reverse().join("");_!==""&&f.unshift(_)}c=f.join(i.thousands.separator)}o+=c,l.length===1&&l.push("");let h=l[1];return h.length<i.decimals.active&&(h+=Array(i.decimals.active-h.length+1).join("0")),h!==""&&(o+=i.decimals.separator+h),o===""&&(o="0"),e!==0&&r&&a.indexOf("s")===-1&&(o="-"+o),n&&(o=n+o),s&&(o+=s),o}applyPrefix(e,i,r=!1){let n=e,s="",a="",o=!1,l=1;for(let c=0,h=i.length;c<h;c++)i[c].number<=e&&(i[c].number===0?n=0:(n=e/i[c].number,l=i[c].number),s=i[c].prefix,a=i[c].suffix,o=!0);return!o&&r&&i.length&&e!=0&&(n=e/i[0].number,s=i[0].prefix,a=i[0].suffix,o=!0),o&&(n=parseFloat(n.toPrecision(Math.min(l.toString().length+Math.floor(n).toString().replace(/[^0-9]*/g,"").length,21)))),[n,s,a]}escape(e){return e.replace("||",PS)}unescape(e){return e.replace(PS,"|")}}function $Ee(t,e){let i=0,r=0,n=1,s=0,a=0,o=0,l=0,c=0;return t.formatToParts(e).forEach(h=>{switch(h.type){case"year":i=+h.value;break;case"month":r=+h.value-1;break;case"day":n=+h.value;break;case"hour":s=+h.value;break;case"minute":a=+h.value;break;case"second":o=+h.value;break;case"fractionalSecond":l=+h.value;break;case"weekday":switch(h.value){case"Sun":c=0;break;case"Mon":c=1;break;case"Tue":c=2;break;case"Wed":c=3;break;case"Thu":c=4;break;case"Fri":c=5;break;case"Sat":c=6;break}}}),s===24&&(s=0),{year:i,month:r,day:n,hour:s,minute:a,second:o,millisecond:l,weekday:c}}function Fde(t,e){const{year:i,month:r,day:n,hour:s,minute:a,second:o,millisecond:l}=$Ee(t,e);return Date.UTC(i,r,n,s,a,o,l)}class W_t{constructor(e,i){if(Object.defineProperty(this,"_utc",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_dtf",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),!i)throw new Error("You cannot use `new Class()`, instead use `Class.new()`");this.name=e,this._utc=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:"UTC",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",weekday:"short",fractionalSecondDigits:3}),this._dtf=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",weekday:"short",fractionalSecondDigits:3})}static new(e){return new this(e,!0)}convertLocal(e){const i=this.offsetUTC(e),r=e.getTimezoneOffset(),n=new Date(e);n.setUTCMinutes(n.getUTCMinutes()-(i-r));const s=n.getTimezoneOffset();return r!=s&&n.setUTCMinutes(n.getUTCMinutes()+s-r),n}offsetUTC(e){const i=Fde(this._utc,e),r=Fde(this._dtf,e);return(i-r)/6e4}parseDate(e){return $Ee(this._dtf,e)}}class Y_t extends yo{_setDefaults(){this._setDefault("capitalize",!0),this._setDefault("dateFormat","yyyy-MM-dd"),super._setDefaults()}_beforeChanged(){super._beforeChanged()}format(e,i,r=!1){(typeof i>"u"||i==="")&&(i=this.get("dateFormat","yyyy-MM-dd"));let n,s=e;if(TA(i))try{const c=this.get("intlLocales");return c?new Intl.DateTimeFormat(c,i).format(s):new Intl.DateTimeFormat(void 0,i).format(s)}catch{return"Invalid"}let a=this.parseFormat(i);const o=this._root.timezone;let l=s;return o&&!this._root.utc&&!r&&(s=o.convertLocal(s)),kt(s.getTime())?(n=this.applyFormat(s,a,r,l),this.get("capitalize")&&(n=n.replace(/^.{1}/,n.substr(0,1).toUpperCase())),n):"Invalid date"}applyFormat(e,i,r=!1,n){let s=i.template,a,o,l,c,h,f,g,y,b=e.getTime();this._root.utc&&!r?(a=e.getUTCFullYear(),o=e.getUTCMonth(),l=e.getUTCDay(),c=e.getUTCDate(),h=e.getUTCHours(),f=e.getUTCMinutes(),g=e.getUTCSeconds(),y=e.getUTCMilliseconds()):(a=e.getFullYear(),o=e.getMonth(),l=e.getDay(),c=e.getDate(),h=e.getHours(),f=e.getMinutes(),g=e.getSeconds(),y=e.getMilliseconds());for(let _=0,S=i.parts.length;_<S;_++){let $="";switch(i.parts[_]){case"G":$=this._t(a<0?"_era_bc":"_era_ad");break;case"yyyy":$=Math.abs(a).toString(),a<0&&($+=this._t("_era_bc"));break;case"yyy":case"yy":case"y":$=Math.abs(a).toString().substr(-i.parts[_].length),a<0&&($+=this._t("_era_bc"));break;case"YYYY":case"YYY":case"YY":case"Y":let C=v_t(e,this._root.utc);i.parts[_]=="YYYY"?$=Math.abs(C).toString():$=Math.abs(C).toString().substr(-i.parts[_].length),C<0&&($+=this._t("_era_bc"));break;case"u":break;case"q":$=""+Math.ceil((e.getMonth()+1)/3);break;case"MMMMM":$=this._t(this._getMonth(o)).substr(0,1);break;case"MMMM":$=this._t(this._getMonth(o));break;case"MMM":$=this._t(this._getShortMonth(o));break;case"MM":$=es(o+1,2,"0");break;case"M":$=(o+1).toString();break;case"ww":$=es(S5(e,this._root.utc),2,"0");break;case"w":$=S5(e,this._root.utc).toString();break;case"W":$=b_t(e,this._root.utc).toString();break;case"dd":$=es(c,2,"0");break;case"d":$=c.toString();break;case"DD":case"DDD":$=es(Lde(e,this._root.utc).toString(),i.parts[_].length,"0");break;case"D":$=Lde(e,this._root.utc).toString();break;case"F":break;case"g":break;case"t":$=this._root.language.translateFunc("_dateOrd").call(this,c);break;case"E":$=(l||7).toString();break;case"EE":$=es((l||7).toString(),2,"0");break;case"EEE":case"eee":$=this._t(this._getShortWeekday(l));break;case"EEEE":case"eeee":$=this._t(this._getWeekday(l));break;case"EEEEE":case"eeeee":$=this._t(this._getShortWeekday(l)).substr(0,1);break;case"e":case"ee":$=(l-(this._root.locale.firstDayOfWeek||1)+1).toString(),i.parts[_]=="ee"&&($=es($,2,"0"));break;case"a":h>=12?$=this._t("PM"):$=this._t("AM");break;case"aa":h>=12?$=this._t("P.M."):$=this._t("A.M.");break;case"aaa":h>=12?$=this._t("P"):$=this._t("A");break;case"h":$=HL(h).toString();break;case"hh":$=es(HL(h),2,"0");break;case"H":$=h.toString();break;case"HH":$=es(h,2,"0");break;case"K":$=HL(h,0).toString();break;case"KK":$=es(HL(h,0),2,"0");break;case"k":$=(h+1).toString();break;case"kk":$=es(h+1,2,"0");break;case"m":$=f.toString();break;case"mm":$=es(f,2,"0");break;case"s":$=g.toString();break;case"ss":$=es(g,2,"0");break;case"S":case"SS":case"SSS":$=Math.round(y/1e3*Math.pow(10,i.parts[_].length)).toString();break;case"x":$=b.toString();break;case"n":case"nn":case"nnn":$=es(y,i.parts[_].length,"0");break;case"z":$=GL(n||e,!1,!1,this._root.utc,this._root.timezone?this._root.timezone.name:void 0).replace(/[+-]+[0-9]+$/,"");break;case"zz":$=GL(n||e,!0,!1,this._root.utc,this._root.timezone?this._root.timezone.name:void 0);break;case"zzz":$=GL(n||e,!1,!0,this._root.utc,this._root.timezone?this._root.timezone.name:void 0).replace(/[+-]+[0-9]+$/,"");break;case"zzzz":$=GL(n||e,!0,!0,this._root.utc,this._root.timezone?this._root.timezone.name:void 0);break;case"Z":case"ZZ":let I=this._root.utc?"UTC":this._root.timezone;I instanceof W_t&&(I=I.name);const P=I?__t(I,n||e):e.getTimezoneOffset();let O=Math.abs(P)/60,N=Math.floor(O),R=O*60-N*60;this._root.utc&&(N=0,R=0),i.parts[_]=="Z"?($="GMT",$+=P>0?"-":"+",$+=es(N,2)+":"+es(R,2)):($=P>0?"-":"+",$+=es(N,2)+es(R,2));break;case"i":$=e.toISOString();break;case"I":$=e.toUTCString();break}s=s.replace(Ov,$)}return s}parseFormat(e){let i={template:"",parts:[]},r=Rd.chunk(e,!0);for(let n=0;n<r.length;n++){let s=r[n];if(s.type==="value"){if(s.text.match(/^date$/i)){let o=this.get("dateFormat","yyyy-MM-dd");n_(o)||(o="yyyy-MM-dd"),s.text=o}let a=s.text.match(/G|yyyy|yyy|yy|y|YYYY|YYY|YY|Y|u|q|MMMMM|MMMM|MMM|MM|M|ww|w|W|dd|d|DDD|DD|D|F|g|EEEEE|EEEE|EEE|EE|E|eeeee|eeee|eee|ee|e|aaa|aa|a|hh|h|HH|H|KK|K|kk|k|mm|m|ss|s|SSS|SS|S|A|zzzz|zzz|zz|z|ZZ|Z|t|x|nnn|nn|n|i|I/g);if(a)for(let o=0;o<a.length;o++)i.parts.push(a[o]),s.text=s.text.replace(a[o],Ov)}i.template+=s.text}return i}_months(){return["January","February","March","April","May","June","July","August","September","October","November","December"]}_getMonth(e){return this._months()[e]}_shortMonths(){return["Jan","Feb","Mar","Apr","May(short)","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}_getShortMonth(e){return this._shortMonths()[e]}_weekdays(){return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}_getWeekday(e){return this._weekdays()[e]}_shortWeekdays(){return["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]}_getShortWeekday(e){return this._shortWeekdays()[e]}parse(e,i,r){if(typeof r>"u"&&(r=this._root.utc),e instanceof Date)return e;if(kt(e))return new Date(e);if(i=="x")return new Date(parseInt(e));n_(e)||(e=e.toString());let n,s="";i=sK(i),i=i.substr(0,e.length);let a=this.parseFormat(i),o={year:-1,year3:-1,year2:-1,year1:-1,month:-1,monthShort:-1,monthLong:-1,weekdayShort:-1,weekdayLong:-1,day:-1,yearDay:-1,week:-1,hourBase0:-1,hour12Base0:-1,hourBase1:-1,hour12Base1:-1,minute:-1,second:-1,millisecond:-1,millisecondDigits:-1,am:-1,zone:-1,timestamp:-1,iso:-1},l={year:1970,month:0,day:1,hour:0,minute:0,second:0,millisecond:0,timestamp:null,offset:0,utc:r},c=0,h=0;for(let y=0;y<a.parts.length;y++){switch(h=y+c+1,a.parts[y]){case"yyyy":case"YYYY":s+="([0-9]{4})",o.year=h;break;case"yyy":case"YYY":s+="([0-9]{3})",o.year3=h;break;case"yy":case"YY":s+="([0-9]{2})",o.year2=h;break;case"y":case"Y":s+="([0-9]{1})",o.year1=h;break;case"MMMM":s+="("+this.getStringList(this._months()).join("|")+")",o.monthLong=h;break;case"MMM":s+="("+this.getStringList(this._shortMonths()).join("|")+")",o.monthShort=h;break;case"MM":case"M":s+="([0-9]{2}|[0-9]{1})",o.month=h;break;case"ww":case"w":s+="([0-9]{2}|[0-9]{1})",o.week=h;break;case"dd":case"d":s+="([0-9]{2}|[0-9]{1})",o.day=h;break;case"DDD":case"DD":case"D":s+="([0-9]{3}|[0-9]{2}|[0-9]{1})",o.yearDay=h;break;case"dddd":s+="("+this.getStringList(this._weekdays()).join("|")+")",o.weekdayLong=h;break;case"ddd":s+="("+this.getStringList(this._shortWeekdays()).join("|")+")",o.weekdayShort=h;break;case"aaa":case"aa":case"a":s+="("+this.getStringList(["AM","PM","A.M.","P.M.","A","P"]).join("|")+")",o.am=h;break;case"hh":case"h":s+="([0-9]{2}|[0-9]{1})",o.hour12Base1=h;break;case"HH":case"H":s+="([0-9]{2}|[0-9]{1})",o.hourBase0=h;break;case"KK":case"K":s+="([0-9]{2}|[0-9]{1})",o.hour12Base0=h;break;case"kk":case"k":s+="([0-9]{2}|[0-9]{1})",o.hourBase1=h;break;case"mm":case"m":s+="([0-9]{2}|[0-9]{1})",o.minute=h;break;case"ss":case"s":s+="([0-9]{2}|[0-9]{1})",o.second=h;break;case"SSS":case"SS":case"S":s+="([0-9]{3}|[0-9]{2}|[0-9]{1})",o.millisecond=h,o.millisecondDigits=a.parts[y].length;break;case"nnn":case"nn":case"n":s+="([0-9]{3}|[0-9]{2}|[0-9]{1})",o.millisecond=h;break;case"x":s+="([0-9]{1,})",o.timestamp=h;break;case"Z":s+="GMT([-+]+[0-9]{2}:[0-9]{2})",o.zone=h;break;case"ZZ":s+="([\\-+]+[0-9]{2}[0-9]{2})",o.zone=h;break;case"i":s+="([0-9]{4})-?([0-9]{2})-?([0-9]{2})T?([0-9]{2}):?([0-9]{2}):?([0-9]{2})\\.?([0-9]{0,3})([zZ]|[+\\-][0-9]{2}:?[0-9]{2}|$)",o.iso=h,c+=7;break;case"G":case"YYYY":case"YYY":case"YY":case"Y":case"MMMMM":case"W":case"EEEEE":case"EEEE":case"EEE":case"EE":case"E":case"eeeee":case"eeee":case"eee":case"ee":case"e":case"zzzz":case"zzz":case"zz":case"z":case"t":c--;break}s+="[^0-9]*"}let f=new RegExp(s),g=e.match(f);if(g){if(o.year>-1&&(l.year=parseInt(g[o.year])),o.year3>-1){let y=parseInt(g[o.year3]);y+=1e3,l.year=y}if(o.year2>-1){let y=parseInt(g[o.year2]);y>50?y+=1e3:y+=2e3,l.year=y}if(o.year1>-1){let y=parseInt(g[o.year1]);y=Math.floor(new Date().getFullYear()/10)*10+y,l.year=y}if(o.monthLong>-1&&(l.month=this.resolveMonth(g[o.monthLong])),o.monthShort>-1&&(l.month=this.resolveShortMonth(g[o.monthShort])),o.month>-1&&(l.month=parseInt(g[o.month])-1),o.week>-1&&o.day===-1&&(l.month=0,l.day=w_t(parseInt(g[o.week]),l.year,1,r)),o.day>-1&&(l.day=parseInt(g[o.day])),o.yearDay>-1&&(l.month=0,l.day=parseInt(g[o.yearDay])),o.hourBase0>-1&&(l.hour=parseInt(g[o.hourBase0])),o.hourBase1>-1&&(l.hour=parseInt(g[o.hourBase1])-1),o.hour12Base0>-1){let y=parseInt(g[o.hour12Base0]);y==11&&(y=0),o.am>-1&&!this.isAm(g[o.am])&&(y+=12),l.hour=y}if(o.hour12Base1>-1){let y=parseInt(g[o.hour12Base1]);y==12&&(y=0),o.am>-1&&!this.isAm(g[o.am])&&(y+=12),l.hour=y}if(o.minute>-1&&(l.minute=parseInt(g[o.minute])),o.second>-1&&(l.second=parseInt(g[o.second])),o.millisecond>-1){let y=parseInt(g[o.millisecond]);o.millisecondDigits==2?y*=10:o.millisecondDigits==1&&(y*=100),l.millisecond=y}if(o.timestamp>-1){l.timestamp=parseInt(g[o.timestamp]);const y=new Date(l.timestamp);l.year=y.getUTCFullYear(),l.month=y.getUTCMonth(),l.day=y.getUTCDate(),l.hour=y.getUTCHours(),l.minute=y.getUTCMinutes(),l.second=y.getUTCSeconds(),l.millisecond=y.getUTCMilliseconds()}o.zone>-1&&(l.offset=this.resolveTimezoneOffset(new Date(l.year,l.month,l.day),g[o.zone])),o.iso>-1&&(l.year=pc(g[o.iso+0]),l.month=pc(g[o.iso+1])-1,l.day=pc(g[o.iso+2]),l.hour=pc(g[o.iso+3]),l.minute=pc(g[o.iso+4]),l.second=pc(g[o.iso+5]),l.millisecond=pc(g[o.iso+6]),g[o.iso+7]=="Z"||g[o.iso+7]=="z"?l.utc=!0:g[o.iso+7]!=""&&(l.offset=this.resolveTimezoneOffset(new Date(l.year,l.month,l.day),g[o.iso+7]))),l.utc?n=new Date(Date.UTC(l.year,l.month,l.day,l.hour,l.minute,l.second,l.millisecond)):n=new Date(l.year,l.month,l.day,l.hour,l.minute+l.offset,l.second,l.millisecond)}else n=new Date(e);return n}resolveTimezoneOffset(e,i){if(i.match(/([+\-]?)([0-9]{2}):?([0-9]{2})/)){let n=i.match(/([+\-]?)([0-9]{2}):?([0-9]{2})/),s=n[1],a=n[2],o=n[3],l=parseInt(a)*60+parseInt(o);s=="+"&&(l*=-1);let c=(e||new Date).getTimezoneOffset();return l-c}return 0}resolveMonth(e){let i=this._months().indexOf(e);return i>-1||!this._root.language.isDefault()&&(i=this._root.language.translateAll(this._months()).indexOf(e),i>-1)?i:0}resolveShortMonth(e){let i=this._shortMonths().indexOf(e);return i>-1||(i=this._months().indexOf(e),i>-1)||this._root.language&&!this._root.language.isDefault()&&(i=this._root.language.translateAll(this._shortMonths()).indexOf(e),i>-1)?i:0}isAm(e){return this.getStringList(["AM","A.M.","A"]).indexOf(e.toUpperCase())>-1}getStringList(e){let i=[];for(let r=0;r<e.length;r++)this._root.language?i.push(Ode(this._t(e[r]))):i.push(Ode(e[r]));return i}}class Z_t extends yo{constructor(){super(...arguments),Object.defineProperty(this,"_unitAliases",{enumerable:!0,configurable:!0,writable:!0,value:{Y:"y",D:"d",H:"h",K:"h",k:"h",n:"S"}})}_setDefaults(){const e="_duration_millisecond",i="_duration_second",r="_duration_minute",n="_duration_hour",s="_duration_day",a="_duration_week",o="_duration_month",l="_duration_year",c="_second",h="_minute",f="_hour",g="_day",y="_week",b="_week",_="_year";this._setDefault("negativeBase",0),this._setDefault("baseUnit","second"),this._setDefault("durationFormats",{millisecond:{millisecond:this._t(e),second:this._t(e+c),minute:this._t(e+h),hour:this._t(e+f),day:this._t(e+g),week:this._t(e+y),month:this._t(e+b),year:this._t(e+_)},second:{second:this._t(i),minute:this._t(i+h),hour:this._t(i+f),day:this._t(i+g),week:this._t(i+y),month:this._t(i+b),year:this._t(i+_)},minute:{minute:this._t(r),hour:this._t(r+f),day:this._t(r+g),week:this._t(r+y),month:this._t(r+b),year:this._t(r+_)},hour:{hour:this._t(n),day:this._t(n+g),week:this._t(n+y),month:this._t(n+b),year:this._t(n+_)},day:{day:this._t(s),week:this._t(s+y),month:this._t(s+b),year:this._t(s+_)},week:{week:this._t(a),month:this._t(a+b),year:this._t(a+_)},month:{month:this._t(o),year:this._t(o+_)},year:{year:this._t(l)}}),super._setDefaults()}_beforeChanged(){super._beforeChanged()}format(e,i,r){let n=r||this.get("baseUnit");(typeof i>"u"||i==="")&&(this.get("durationFormat")!=null?i=this.get("durationFormat"):i=this.getFormat(pc(e),void 0,n)),i=sK(i);let s=this.parseFormat(i,n),a=Number(e),o;a>this.get("negativeBase")?o=s.positive:a<this.get("negativeBase")?o=s.negative:o=s.zero;let l=this.applyFormat(a,o);return o.color!==""&&(l="["+o.color+"]"+l+"[/]"),l}parseFormat(e,i){let r=i||this.get("baseUnit"),n={positive:{color:"",template:"",parts:[],source:"",baseUnit:r,parsed:!1,absolute:!1},negative:{color:"",template:"",parts:[],source:"",baseUnit:r,parsed:!1,absolute:!1},zero:{color:"",template:"",parts:[],source:"",baseUnit:r,parsed:!1,absolute:!1}};e=e.replace("||",PS);let s=e.split("|");return n.positive.source=s[0],typeof s[2]>"u"?n.zero=n.positive:n.zero.source=s[2],typeof s[1]>"u"?n.negative=n.positive:n.negative.source=s[1],Lr(n,(a,o)=>{if(o.parsed)return;let l=o.source,c=[];c=o.source.match(/^\[([^\]]*)\]/),c&&c.length&&c[0]!==""&&(l=o.source.substr(c[0].length),o.color=c[1]);let h=Rd.chunk(l,!0);for(let f=0;f<h.length;f++){let g=h[f];if(g.text=g.text.replace(PS,"|"),g.type==="value"){g.text.match(/[yYMdDwhHKkmsSn]+a/)&&(o.absolute=!0,g.text=g.text.replace(/([yYMdDwhHKkmsSn]+)a/,"$1"));let y=g.text.match(/y+|Y+|M+|d+|D+|w+|h+|H+|K+|k+|m+|s+|S+|n+/g);if(y)for(let b=0;b<y.length;b++)y[b]==null&&(y[b]=this._unitAliases[y[b]]),o.parts.push(y[b]),g.text=g.text.replace(y[b],Ov)}o.template+=g.text}o.parsed=!0}),n}applyFormat(e,i){let r=!i.absolute&&e<this.get("negativeBase");e=Math.abs(e);let n=this.toTimeStamp(e,i.baseUnit),s=i.template;const a={millisecond:0,second:0,minute:0,hour:0,day:0,week:0,month:0,year:0};for(let o=0,l=i.parts.length;o<l;o++){let c=i.parts[o],h=this._toTimeUnit(c.substr(0,1)),f;const g=this._getUnitValue(h);o<l-1?f=Math.floor(n/g):f=Math.round(n/g),a[h]+=f,n-=f*g}Lr(a,(o,l)=>{o=="millisecond"&&l==1e3?(a.second++,a.millisecond=0):o=="second"&&l==60?(a.minute++,a.second=0):o=="minute"&&l==60?(a.hour++,a.minute=0):o=="hour"&&l==24?(a.day++,a.hour=0):o=="day"&&l==7&&i.parts.indexOf("w")!==-1?(a.week++,a.day=0):o=="day"&&l==30?(a.month++,a.day=0):o=="month"&&l==12&&(a.year++,a.month=0)});for(let o=0,l=i.parts.length;o<l;o++){let c=i.parts[o],h=this._toTimeUnit(c.substr(0,1)),f=c.length;s=s.replace(Ov,es(a[h],f,"0"))}return r&&(s="-"+s),s}toTimeStamp(e,i){return e*this._getUnitValue(i)}_toTimeUnit(e){switch(e){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year"}}getFormat(e,i,r){if(this.get("durationFormat")!=null)return this.get("durationFormat");if(r||(r=this.get("baseUnit")),i!=null&&e!=i){e=Math.abs(e),i=Math.abs(i);let n=this.getValueUnit(Math.max(e,i),r);return this.get("durationFormats")[r][n]}else{let n=this.getValueUnit(e,r);return this.get("durationFormats")[r][n]}}getValueUnit(e,i){i||(i=this.get("baseUnit"));let r,n=this.getMilliseconds(e,i);return i_t(this._getUnitValues(),(s,a)=>{if(s==i||r){if(n/a<=1)return r||(r=s),!1;r=s}return!0}),r}getMilliseconds(e,i){return i||(i=this.get("baseUnit")),e*this._getUnitValue(i)}_getUnitValue(e){return this._getUnitValues()[e]}_getUnitValues(){return{millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:2592e6,year:31536e6}}}const TEe={firstDayOfWeek:1,_decimalSeparator:".",_thousandSeparator:",",_percentPrefix:null,_percentSuffix:"%",_big_number_suffix_3:"k",_big_number_suffix_6:"M",_big_number_suffix_9:"G",_big_number_suffix_12:"T",_big_number_suffix_15:"P",_big_number_suffix_18:"E",_big_number_suffix_21:"Z",_big_number_suffix_24:"Y",_small_number_suffix_3:"m",_small_number_suffix_6:"",_small_number_suffix_9:"n",_small_number_suffix_12:"p",_small_number_suffix_15:"f",_small_number_suffix_18:"a",_small_number_suffix_21:"z",_small_number_suffix_24:"y",_byte_suffix_B:"B",_byte_suffix_KB:"KB",_byte_suffix_MB:"MB",_byte_suffix_GB:"GB",_byte_suffix_TB:"TB",_byte_suffix_PB:"PB",_date:"yyyy-MM-dd",_date_millisecond:"mm:ss SSS",_date_millisecond_full:"HH:mm:ss SSS",_date_second:"HH:mm:ss",_date_second_full:"HH:mm:ss",_date_minute:"HH:mm",_date_minute_full:"HH:mm - MMM dd, yyyy",_date_hour:"HH:mm",_date_hour_short:"HH",_date_hour_full:"HH:mm - MMM dd, yyyy",_date_day:"MMM dd",_date_day_full:"MMM dd, yyyy",_date_week:"ww",_date_week_full:"MMM dd, yyyy",_date_month:"MMM",_date_month_full:"MMM, yyyy",_date_year:"yyyy",_duration_millisecond:"SSS",_duration_millisecond_second:"ss.SSS",_duration_millisecond_minute:"mm:ss SSS",_duration_millisecond_hour:"hh:mm:ss SSS",_duration_millisecond_day:"d'd' mm:ss SSS",_duration_millisecond_week:"d'd' mm:ss SSS",_duration_millisecond_month:"M'm' dd'd' mm:ss SSS",_duration_millisecond_year:"y'y' MM'm' dd'd' mm:ss SSS",_duration_second:"ss",_duration_second_minute:"mm:ss",_duration_second_hour:"hh:mm:ss",_duration_second_day:"d'd' hh:mm:ss",_duration_second_week:"d'd' hh:mm:ss",_duration_second_month:"M'm' dd'd' hh:mm:ss",_duration_second_year:"y'y' MM'm' dd'd' hh:mm:ss",_duration_minute:"mm",_duration_minute_hour:"hh:mm",_duration_minute_day:"d'd' hh:mm",_duration_minute_week:"d'd' hh:mm",_duration_minute_month:"M'm' dd'd' hh:mm",_duration_minute_year:"y'y' MM'm' dd'd' hh:mm",_duration_hour:"hh'h'",_duration_hour_day:"d'd' hh'h'",_duration_hour_week:"d'd' hh'h'",_duration_hour_month:"M'm' dd'd' hh'h'",_duration_hour_year:"y'y' MM'm' dd'd' hh'h'",_duration_day:"d'd'",_duration_day_week:"d'd'",_duration_day_month:"M'm' dd'd'",_duration_day_year:"y'y' MM'm' dd'd'",_duration_week:"w'w'",_duration_week_month:"w'w'",_duration_week_year:"w'w'",_duration_month:"M'm'",_duration_month_year:"y'y' MM'm'",_duration_year:"y'y'",_era_ad:"AD",_era_bc:"BC",A:"",P:"",AM:"",PM:"","A.M.":"","P.M.":"",January:"",February:"",March:"",April:"",May:"",June:"",July:"",August:"",September:"",October:"",November:"",December:"",Jan:"",Feb:"",Mar:"",Apr:"","May(short)":"May",Jun:"",Jul:"",Aug:"",Sep:"",Oct:"",Nov:"",Dec:"",Sunday:"",Monday:"",Tuesday:"",Wednesday:"",Thursday:"",Friday:"",Saturday:"",Sun:"",Mon:"",Tue:"",Wed:"",Thu:"",Fri:"",Sat:"",_dateOrd:function(t){let e="th";if(t<11||t>13)switch(t%10){case 1:e="st";break;case 2:e="nd";break;case 3:e="rd";break}return e},"Zoom Out":"",Play:"",Stop:"",Legend:"","Press ENTER to toggle":"",Loading:"",Home:"",Chart:"","Serial chart":"","X/Y chart":"","Pie chart":"","Gauge chart":"","Radar chart":"","Sankey diagram":"","Flow diagram":"","Chord diagram":"","TreeMap chart":"","Force directed tree":"","Sliced chart":"",Series:"","Candlestick Series":"","OHLC Series":"","Column Series":"","Line Series":"","Pie Slice Series":"","Funnel Series":"","Pyramid Series":"","X/Y Series":"",Map:"","Press ENTER to zoom in":"","Press ENTER to zoom out":"","Use arrow keys to zoom in and out":"","Use plus and minus keys on your keyboard to zoom in and out":"",Export:"",Image:"",Data:"",Print:"","Press ENTER or use arrow keys to navigate":"","Press ENTER to open":"","Press ENTER to print.":"","Press ENTER to export as %1.":"","(Press ESC to close this message)":"","Image Export Complete":"","Export operation took longer than expected. Something might have gone wrong.":"","Saved from":"",PNG:"",JPG:"",GIF:"",SVG:"",PDF:"",JSON:"",CSV:"",XLSX:"",HTML:"","Use TAB to select grip buttons or left and right arrows to change selection":"","Use left and right arrows to move selection":"","Use left and right arrows to move left selection":"","Use left and right arrows to move right selection":"","Use TAB select grip buttons or up and down arrows to change selection":"","Use up and down arrows to move selection":"","Use up and down arrows to move lower selection":"","Use up and down arrows to move upper selection":"","From %1 to %2":"","From %1":"","To %1":"","No parser available for file: %1":"","Error parsing file: %1":"","Unable to load file: %1":"","Invalid date":"",Close:"",Minimize:"",Confirm:""};class X_t extends yo{_setDefaults(){this.setPrivate("defaultLocale",TEe),super._setDefaults()}translate(e,i,...r){i||(i=this._root.locale||this.getPrivate("defaultLocale"));let n=e,s=i[e];if(s===null)n="";else if(s!=null)s&&(n=s);else if(i!==this.getPrivate("defaultLocale"))return this.translate(e,this.getPrivate("defaultLocale"),...r);if(r.length)for(let a=r.length,o=0;o<a;++o)n=n.split("%"+(o+1)).join(r[o]);return n}translateAny(e,i,...r){return this.translate(e,i,...r)}setTranslationAny(e,i,r){const n=r||this._root.locale;n[e]=i}setTranslationsAny(e,i){Lr(e,(r,n)=>{this.setTranslationAny(r,n,i)})}translateEmpty(e,i,...r){let n=this.translate(e,i,...r);return n==e?"":n}translateFunc(e,i){return this._root.locale[e]?this._root.locale[e]:i!==this.getPrivate("defaultLocale")?this.translateFunc(e,this.getPrivate("defaultLocale")):()=>""}translateAll(e,i){return this.isDefault()?e:mW(e,r=>this.translate(r,i))}isDefault(){return this.getPrivate("defaultLocale")===this._root.locale}}class wj{constructor(e,i){if(Object.defineProperty(this,"_root",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_rules",{enumerable:!0,configurable:!0,writable:!0,value:{}}),this._root=e,!i)throw new Error("You cannot use `new Class()`, instead use `Class.new()`")}static new(e){const i=new this(e,!0);return i.setupDefaultRules(),i}setupDefaultRules(){}_lookupRules(e){return this._rules[e]}ruleRaw(e,i=[]){let r=this._rules[e];r||(r=this._rules[e]=[]),i.sort(sw);const{index:n,found:s}=Kwt(r,a=>{const o=sw(a.tags.length,i.length);return o===0?xEe(a.tags,i,sw):o});if(s)return r[n].template;{const a=yc.new({});return r.splice(n,0,{tags:i,template:a}),a}}rule(e,i=[]){return this.ruleRaw(e,i)}}function Lt(t,e,i,r){t.set(e,i.get(r)),i.on(r,n=>{t.set(e,n)})}class J_t extends wj{setupDefaultRules(){super.setupDefaultRules();const e=this._root.language,i=this._root.interfaceColors,r=this._root.horizontalLayout,n=this._root.verticalLayout,s=this.rule.bind(this);s("InterfaceColors").setAll({stroke:At.fromHex(15066597),fill:At.fromHex(15987699),primaryButton:At.fromHex(6788316),primaryButtonHover:At.fromHex(6779356),primaryButtonDown:At.fromHex(6872182),primaryButtonActive:At.fromHex(6872182),primaryButtonDisabled:At.fromHex(14342874),primaryButtonTextDisabled:At.fromHex(16777215),primaryButtonText:At.fromHex(16777215),primaryButtonStroke:At.fromHex(16777215),secondaryButton:At.fromHex(14277081),secondaryButtonHover:At.fromHex(10724259),secondaryButtonDown:At.fromHex(9276813),secondaryButtonActive:At.fromHex(15132390),secondaryButtonText:At.fromHex(0),secondaryButtonStroke:At.fromHex(16777215),grid:At.fromHex(0),background:At.fromHex(16777215),alternativeBackground:At.fromHex(0),text:At.fromHex(0),alternativeText:At.fromHex(16777215),disabled:At.fromHex(11382189),positive:At.fromHex(5288704),negative:At.fromHex(11730944)});{const a=s("ColorSet");a.setAll({passOptions:{hue:.05,saturation:0,lightness:0},colors:[At.fromHex(6797276)],step:1,reuse:!1,startIndex:0}),a.setPrivate("currentStep",0),a.setPrivate("currentPass",0)}s("Entity").setAll({stateAnimationDuration:0,stateAnimationEasing:rx(S0)}),s("Component").setAll({interpolationDuration:0,interpolationEasing:rx(S0)}),s("Sprite").setAll({visible:!0,scale:1,opacity:1,rotation:0,position:"relative",tooltipX:ai,tooltipY:ai,tooltipPosition:"fixed",isMeasured:!0}),s("Sprite").states.create("default",{visible:!0,opacity:1}),s("Container").setAll({interactiveChildren:!0,setStateOnChildren:!1}),s("Graphics").setAll({strokeWidth:1}),s("Chart").setAll({width:bi,height:bi,interactiveChildren:!1}),s("ZoomableContainer").setAll({width:bi,height:bi,wheelable:!0,pinchZoom:!0,maxZoomLevel:32,minZoomLevel:1,zoomStep:2,animationEasing:rx(S0),animationDuration:600,maxPanOut:.4}),s("Sprite",["horizontal","center"]).setAll({centerX:ai,x:ai}),s("Sprite",["vertical","center"]).setAll({centerY:ai,y:ai}),s("Container",["horizontal","layout"]).setAll({layout:r}),s("Container",["vertical","layout"]).setAll({layout:n}),s("Pattern").setAll({repetition:"repeat",width:50,height:50,rotation:0,fillOpacity:1}),s("LinePattern").setAll({gap:6,colorOpacity:1,width:49,height:49}),s("RectanglePattern").setAll({gap:6,checkered:!1,centered:!0,maxWidth:5,maxHeight:5,width:48,height:48,strokeWidth:0}),s("CirclePattern").setAll({gap:5,checkered:!1,centered:!1,radius:3,strokeWidth:0,width:45,height:45}),s("GrainPattern").setAll({width:200,height:200,colors:[At.fromHex(0)],size:1,horizontalGap:0,verticalGap:0,density:1,minOpacity:0,maxOpacity:.2});{const a=s("PatternSet");a.setAll({step:1}),Lt(a,"color",i,"stroke")}s("LinearGradient").setAll({rotation:90}),s("Legend").setAll({fillField:"fill",strokeField:"stroke",nameField:"name",layout:s_.new(this._root,{}),layer:30,clickTarget:"itemContainer"}),s("Container",["legend","item","itemcontainer"]).setAll({paddingLeft:5,paddingRight:5,paddingBottom:5,paddingTop:5,layout:r,setStateOnChildren:!0,interactiveChildren:!1,ariaChecked:!0,focusable:!0,ariaLabel:e.translate("Press ENTER to toggle"),role:"checkbox"});{const a=s("Rectangle",["legend","item","background"]);a.setAll({fillOpacity:0}),Lt(a,"fill",i,"background")}s("Container",["legend","marker"]).setAll({setStateOnChildren:!0,centerY:ai,paddingLeft:0,paddingRight:0,paddingBottom:0,paddingTop:0,width:18,height:18}),s("RoundedRectangle",["legend","marker","rectangle"]).setAll({width:bi,height:bi,cornerRadiusBL:3,cornerRadiusTL:3,cornerRadiusBR:3,cornerRadiusTR:3});{const a=s("RoundedRectangle",["legend","marker","rectangle"]).states.create("disabled",{});Lt(a,"fill",i,"disabled"),Lt(a,"stroke",i,"disabled")}s("Label",["legend","label"]).setAll({centerY:ai,marginLeft:5,paddingRight:0,paddingLeft:0,paddingTop:0,paddingBottom:0,populateText:!0});{const a=s("Label",["legend","label"]).states.create("disabled",{});Lt(a,"fill",i,"disabled")}s("Label",["legend","value","label"]).setAll({centerY:ai,marginLeft:5,paddingRight:0,paddingLeft:0,paddingTop:0,paddingBottom:0,width:50,centerX:bi,populateText:!0});{const a=s("Label",["legend","value","label"]).states.create("disabled",{});Lt(a,"fill",i,"disabled")}s("HeatLegend").setAll({stepCount:1}),s("RoundedRectangle",["heatlegend","marker"]).setAll({cornerRadiusTR:0,cornerRadiusBR:0,cornerRadiusTL:0,cornerRadiusBL:0}),s("RoundedRectangle",["vertical","heatlegend","marker"]).setAll({height:bi,width:15}),s("RoundedRectangle",["horizontal","heatlegend","marker"]).setAll({width:bi,height:15}),s("HeatLegend",["vertical"]).setAll({height:bi}),s("HeatLegend",["horizontal"]).setAll({width:bi}),s("Label",["heatlegend","start"]).setAll({paddingLeft:5,paddingRight:5,paddingTop:5,paddingBottom:5}),s("Label",["heatlegend","end"]).setAll({paddingLeft:5,paddingRight:5,paddingTop:5,paddingBottom:5});{const a=s("Label");a.setAll({paddingTop:8,paddingBottom:8,paddingLeft:10,paddingRight:10,fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',fontSize:"1em",populateText:!1}),Lt(a,"fill",i,"text")}s("RadialLabel").setAll({textType:"regular",centerY:ai,centerX:ai,inside:!1,radius:0,baseRadius:bi,orientation:"auto",textAlign:"center"}),s("EditableLabel").setAll({editOn:"click",themeTags:["editablelabel"],multiLine:!0}),s("RoundedRectangle",["editablelabel","background"]).setAll({fillOpacity:0,fill:At.fromHex(0),cornerRadiusBL:3,cornerRadiusBR:3,cornerRadiusTL:3,cornerRadiusTR:3,strokeOpacity:0,stroke:At.fromHex(0)}),s("RoundedRectangle",["editablelabel","background"]).states.create("active",{strokeOpacity:.2}),s("RoundedRectangle").setAll({cornerRadiusTL:8,cornerRadiusBL:8,cornerRadiusTR:8,cornerRadiusBR:8}),s("PointedRectangle").setAll({pointerBaseWidth:15,pointerLength:10,cornerRadius:8}),s("Slice").setAll({shiftRadius:0,dRadius:0,dInnerRadius:0});{const a=s("Tick");a.setAll({strokeOpacity:.15,isMeasured:!1,length:4.5,position:"absolute",crisp:!0}),Lt(a,"stroke",i,"grid")}s("Bullet").setAll({locationX:.5,locationY:.5}),s("Tooltip").setAll({position:"absolute",getFillFromSprite:!0,getStrokeFromSprite:!1,autoTextColor:!0,paddingTop:9,paddingBottom:8,paddingLeft:10,paddingRight:10,marginBottom:5,pointerOrientation:"vertical",centerX:ai,centerY:ai,animationEasing:rx(S0),exportable:!1}),s("Tooltip",["system"]).setAll({pointerOrientation:"horizontal",paddingTop:4,paddingRight:7,paddingBottom:4,paddingLeft:7});{const a=s("PointedRectangle",["tooltip","system","background"]);a.setAll({strokeOpacity:.3}),Lt(a,"fill",i,"background"),Lt(a,"stroke",i,"grid")}s("Label",["tooltip","system"]).setAll({fontSize:12,fill:i.get("background")}),s("Polygon").setAll({animationEasing:rx(S0)}),s("Link").setAll({cornerRadius:8,setStateOnChildren:!0});{const a=s("OrthogonalLine",["link","line"]);a.setAll({isMeasured:!1,crisp:!0});const o=a.states.create("active",{strokeWidth:2});Lt(o,"stroke",i,"negative")}s("OrthogonalLine",["link","hit"]).setAll({strokeWidth:10,opacity:0,strokeOpacity:0});{const a=s("OrthogonalLine");a.setAll({strokeWidth:1,strokeOpacity:1,cornerRadius:10}),Lt(a,"stroke",i,"grid")}{const a=s("Triangle",["link"]);a.setAll({width:14,height:10,centerY:0}),Lt(a,"fill",i,"grid"),Lt(a,"stroke",i,"grid"),a.states.create("default",{stateAnimationDuration:0});const o=a.states.create("active",{stateAnimationDuration:0,stroke:fu(16777215),strokeWidth:2});o.set("draw",l=>{l.arc(0,0,11,0,Math.PI*2),l.moveTo(-4,-4),l.lineTo(4,4),l.moveTo(4,-4),l.lineTo(-4,4)}),Lt(o,"fill",i,"negative")}s("PointedRectangle",["tooltip","background"]).setAll({strokeOpacity:.9,cornerRadius:4,pointerLength:4,pointerBaseWidth:8,fillOpacity:.9,stroke:At.fromHex(16777215)});{const a=s("Label",["tooltip"]);a.setAll({role:"tooltip",populateText:!0,paddingRight:0,paddingTop:0,paddingLeft:0,paddingBottom:0}),Lt(a,"fill",i,"alternativeText")}s("Button").setAll({paddingTop:8,paddingBottom:8,paddingLeft:10,paddingRight:10,interactive:!0,layout:r,interactiveChildren:!1,setStateOnChildren:!0,focusable:!0}),s("Button").states.create("hover",{}),s("Button").states.create("down",{stateAnimationDuration:0}),s("Button").states.create("active",{}),s("Button").states.create("disabled",{forceInactive:!0});{const a=s("RoundedRectangle",["button","background"]);Lt(a,"fill",i,"primaryButton"),Lt(a,"stroke",i,"primaryButtonStroke")}{const a=s("RoundedRectangle",["button","background"]).states.create("hover",{});Lt(a,"fill",i,"primaryButtonHover")}{const a=s("RoundedRectangle",["button","background"]).states.create("down",{stateAnimationDuration:0});Lt(a,"fill",i,"primaryButtonDown")}{const a=s("RoundedRectangle",["button","background"]).states.create("active",{});Lt(a,"fill",i,"primaryButtonActive")}{const a=s("RoundedRectangle",["button","background"]).states.create("disabled",{});Lt(a,"fill",i,"primaryButtonDisabled")}{const a=s("Graphics",["button","icon"]).states.create("disabled",{});Lt(a,"fill",i,"primaryButtonTextDisabled")}{const a=s("Label",["button"]).states.create("disabled",{});Lt(a,"fill",i,"primaryButtonTextDisabled")}{const a=s("Graphics",["button","icon"]);a.setAll({forceInactive:!0}),Lt(a,"stroke",i,"primaryButtonText")}{const a=s("Label",["button"]);Lt(a,"fill",i,"primaryButtonText")}s("ConfirmButton").setAll({toggleKey:"active",setStateOnChildren:!0,label:$u.new(this._root,{text:e.translate("Confirm"),forceHidden:!0})});{const a=s("RoundedRectangle",["button","background","confirm"]).states.create("active",{});Lt(a,"fill",i,"negative")}s("Label",["button","confirm"]).setAll({paddingTop:0,paddingBottom:0,paddingRight:3,paddingLeft:5}),s("Label",["button","confirm"]).states.create("default",{stateAnimationDuration:0}),s("Label",["button","confirm"]).states.create("active",{forceHidden:!1,stateAnimationDuration:0});{const a=s("Graphics",["icon","confirm","button"]);a.setAll({stateAnimationDuration:0}),a.states.create("default",{stateAnimationDuration:0}),Lt(a,"stroke",i,"primaryButtonText")}{const a=s("Graphics",["icon","confirm","button"]).states.create("active",{svgPath:"M -5 1 L 0 6 L 8 -5",strokeWidth:2});Lt(a,"stroke",i,"primaryButtonText")}{const a=s("Graphics",["icon","confirm","button","secondary"]).states.create("active",{});Lt(a,"stroke",i,"primaryButtonText")}{const a=s("RoundedRectangle",["button","background","confirm","secondary"]).states.create("active",{fillOpacity:1});Lt(a,"fill",i,"negative")}{const a=s("RoundedRectangle",["button","background","confirm","secondary"]).states.create("hoverActive",{fillOpacity:1});Lt(a,"fill",i,"negative")}s("Button",["button","confirm"]).states.create("hoverActive",{}),s("Button",["zoom"]).setAll({paddingTop:18,paddingBottom:18,paddingLeft:12,paddingRight:12,centerX:46,centerY:-10,y:0,x:bi,role:"button",ariaLabel:e.translate("Zoom Out"),layer:30});{const a=s("RoundedRectangle",["background","button","zoom"]);a.setAll({cornerRadiusBL:40,cornerRadiusBR:40,cornerRadiusTL:40,cornerRadiusTR:40}),Lt(a,"fill",i,"primaryButton")}{const a=s("RoundedRectangle",["background","button","zoom"]).states.create("hover",{});Lt(a,"fill",i,"primaryButtonHover")}{const a=s("RoundedRectangle",["background","button","zoom"]).states.create("down",{stateAnimationDuration:0});Lt(a,"fill",i,"primaryButtonDown")}{const a=s("Graphics",["icon","button","zoom"]);a.setAll({crisp:!0,strokeOpacity:.7,draw:o=>{o.moveTo(0,0),o.lineTo(12,0)}}),Lt(a,"stroke",i,"primaryButtonText")}s("Button",["resize"]).setAll({paddingTop:9,paddingBottom:9,paddingLeft:13,paddingRight:13,draggable:!0,centerX:ai,centerY:ai,position:"absolute",role:"slider",ariaValueMin:"0",ariaValueMax:"100",ariaLabel:e.translate("Use up and down arrows to move selection")});{const a=s("RoundedRectangle",["background","resize","button"]);a.setAll({cornerRadiusBL:40,cornerRadiusBR:40,cornerRadiusTL:40,cornerRadiusTR:40}),Lt(a,"fill",i,"secondaryButton"),Lt(a,"stroke",i,"secondaryButtonStroke")}{const a=s("RoundedRectangle",["background","resize","button"]).states.create("hover",{});Lt(a,"fill",i,"secondaryButtonHover")}{const a=s("RoundedRectangle",["background","resize","button"]).states.create("down",{stateAnimationDuration:0});Lt(a,"fill",i,"secondaryButtonDown")}{const a=s("Graphics",["resize","button","icon"]);a.setAll({interactive:!1,crisp:!0,strokeOpacity:.5,draw:o=>{o.moveTo(0,.5),o.lineTo(0,12.5),o.moveTo(4,.5),o.lineTo(4,12.5)}}),Lt(a,"stroke",i,"secondaryButtonText")}s("Button",["resize","vertical"]).setAll({rotation:90,cursorOverStyle:"ns-resize"}),s("Button",["resize","horizontal"]).setAll({cursorOverStyle:"ew-resize"}),s("Button",["play"]).setAll({paddingTop:13,paddingBottom:13,paddingLeft:14,paddingRight:14,ariaLabel:e.translate("Play"),toggleKey:"active"});{const a=s("RoundedRectangle",["play","background"]);a.setAll({strokeOpacity:.5,cornerRadiusBL:100,cornerRadiusBR:100,cornerRadiusTL:100,cornerRadiusTR:100}),Lt(a,"fill",i,"primaryButton")}{const a=s("Graphics",["play","icon"]);a.setAll({stateAnimationDuration:0,dx:1,draw:o=>{o.moveTo(0,-5),o.lineTo(8,0),o.lineTo(0,5),o.lineTo(0,-5)}}),Lt(a,"fill",i,"primaryButtonText")}s("Graphics",["play","icon"]).states.create("default",{stateAnimationDuration:0}),s("Graphics",["play","icon"]).states.create("active",{stateAnimationDuration:0,draw:a=>{a.moveTo(-4,-5),a.lineTo(-1,-5),a.lineTo(-1,5),a.lineTo(-4,5),a.lineTo(-4,-5),a.moveTo(4,-5),a.lineTo(1,-5),a.lineTo(1,5),a.lineTo(4,5),a.lineTo(4,-5)}}),s("Button",["switch"]).setAll({paddingTop:4,paddingBottom:4,paddingLeft:4,paddingRight:4,ariaLabel:e.translate("Press ENTER to toggle"),toggleKey:"active",width:40,height:24,layout:null});{const a=s("RoundedRectangle",["switch","background"]);a.setAll({strokeOpacity:.5,cornerRadiusBL:100,cornerRadiusBR:100,cornerRadiusTL:100,cornerRadiusTR:100}),Lt(a,"fill",i,"primaryButton")}{const a=s("Circle",["switch","icon"]);a.setAll({radius:8,centerY:0,centerX:0,dx:0}),Lt(a,"fill",i,"primaryButtonText")}s("Graphics",["switch","icon"]).states.create("active",{dx:16}),s("Scrollbar").setAll({start:0,end:1,layer:30,animationEasing:rx(S0)}),s("Scrollbar",["vertical"]).setAll({marginRight:13,marginLeft:13,minWidth:12,height:bi}),s("Scrollbar",["horizontal"]).setAll({marginTop:13,marginBottom:13,minHeight:12,width:bi}),this.rule("Button",["scrollbar"]).setAll({exportable:!1});{const a=s("RoundedRectangle",["scrollbar","main","background"]);a.setAll({cornerRadiusTL:8,cornerRadiusBL:8,cornerRadiusTR:8,cornerRadiusBR:8,fillOpacity:.8}),Lt(a,"fill",i,"fill")}{const a=s("RoundedRectangle",["scrollbar","thumb"]);a.setAll({role:"slider",ariaLive:"polite",position:"absolute",draggable:!0}),Lt(a,"fill",i,"secondaryButton")}{const a=s("RoundedRectangle",["scrollbar","thumb"]).states.create("hover",{});Lt(a,"fill",i,"secondaryButtonHover")}{const a=s("RoundedRectangle",["scrollbar","thumb"]).states.create("down",{stateAnimationDuration:0});Lt(a,"fill",i,"secondaryButtonDown")}s("RoundedRectangle",["scrollbar","thumb","vertical"]).setAll({x:ai,width:bi,centerX:ai,ariaLabel:e.translate("Use up and down arrows to move selection")}),s("RoundedRectangle",["scrollbar","thumb","horizontal"]).setAll({y:ai,centerY:ai,height:bi,ariaLabel:e.translate("Use left and right arrows to move selection")});{const a=s("PointedRectangle",["axis","tooltip","background"]);a.setAll({cornerRadius:0}),Lt(a,"fill",i,"alternativeBackground")}s("Label",["axis","tooltip"]).setAll({role:void 0}),s("Label",["axis","tooltip","y"]).setAll({textAlign:"right"}),s("Label",["axis","tooltip","y","opposite"]).setAll({textAlign:"left"}),s("Label",["axis","tooltip","x"]).setAll({textAlign:"center"}),s("Tooltip",["categoryaxis"]).setAll({labelText:"{category}"}),s("Star").setAll({spikes:5,innerRadius:5,radius:10}),s("Tooltip",["stock"]).setAll({paddingTop:6,paddingBottom:5,paddingLeft:7,paddingRight:7}),s("Tooltip",["indicator"]).setAll({forceHidden:!0}),s("PointedRectangle",["tooltip","stock","axis"]).setAll({pointerLength:0,pointerBaseWidth:0,cornerRadius:3}),s("Label",["tooltip","stock"]).setAll({fontSize:"0.8em"}),s("SpriteResizer").setAll({rotationStep:10,isMeasured:!1}),s("Container",["resizer","grip"]).states.create("hover",{});{const a=s("RoundedRectangle",["resizer","grip"]);a.setAll({strokeOpacity:.7,strokeWidth:1,fillOpacity:1,width:12,height:12}),Lt(a,"fill",i,"background"),Lt(a,"stroke",i,"alternativeBackground")}{const a=s("RoundedRectangle",["resizer","grip","outline"]);a.setAll({strokeOpacity:0,fillOpacity:0,width:20,height:20}),a.states.create("hover",{fillOpacity:.3}),Lt(a,"fill",i,"alternativeBackground")}s("RoundedRectangle",["resizer","grip","left"]).setAll({cornerRadiusBL:0,cornerRadiusBR:0,cornerRadiusTL:0,cornerRadiusTR:0}),s("RoundedRectangle",["resizer","grip","right"]).setAll({cornerRadiusBL:0,cornerRadiusBR:0,cornerRadiusTL:0,cornerRadiusTR:0});{const a=s("Rectangle",["resizer","rectangle"]);a.setAll({strokeDasharray:[2,2],strokeOpacity:.5,strokeWidth:1}),Lt(a,"stroke",i,"alternativeBackground")}s("Graphics",["button","plus","icon"]).setAll({x:ai,y:ai,draw:a=>{a.moveTo(-4,0),a.lineTo(4,0),a.moveTo(0,-4),a.lineTo(0,4)}}),s("Graphics",["button","minus","icon"]).setAll({x:ai,y:ai,draw:a=>{a.moveTo(-4,0),a.lineTo(4,0)}}),s("Graphics",["button","home","icon"]).setAll({x:ai,y:ai,svgPath:"M 8 -1 L 6 -1 L 6 7 L 2 7 L 2 1 L -2 1 L -2 7 L -6 7 L -6 -1 L -8 -1 L 0 -9 L 8 -1 Z M 8 -1"}),s("Button",["zoomtools"]).setAll({marginTop:1,marginBottom:2}),s("ZoomTools").setAll({x:bi,centerX:bi,y:bi,centerY:bi,paddingRight:10,paddingBottom:10}),s("ProgressPie").setAll({radius:bi,width:50,height:50,centerX:Ks(-50),centerY:Ks(-50),innerRadius:Ks(85),numberFormat:"#."});{const a=s("Label",["progresspie"]);a.setAll({centerX:ai,centerY:ai,fontSize:"0.75em"}),Lt(a,"fill",i,"primaryButton")}{const a=s("Circle",["progresspie"]);a.setAll({fillOpacity:.5}),Lt(a,"fill",i,"background")}{const a=s("Slice",["progresspie"]);a.setAll({startAngle:-90}),Lt(a,"fill",i,"primaryButton")}{const a=s("Slice",["progresspie","background"]);a.setAll({fillOpacity:.2,arc:360}),Lt(a,"fill",i,"primaryButton")}s("EditableLabel",["numericstepper"]).setAll({y:ai,centerY:ai,multiLine:!1,marginRight:2});{const a=s("Container",["numericstepper","buttons"]);a.setAll({layout:this._root.verticalLayout,centerY:ai,y:ai,marginRight:10,opacity:0}),a.states.create("active",{opacity:1}),a.states.create("default",{opacity:0})}{const a=s("Triangle",["numericstepper"]);a.setAll({width:17,height:11,marginTop:3,marginBottom:3,strokeWidth:5,strokeOpacity:0,cursorOverStyle:"pointer"}),Lt(a,"fill",i,"secondaryButton")}s("Triangle",["downbutton"]).setAll({rotation:180})}}class FU{constructor(e=1,i=0,r=0,n=1,s=0,a=0){Object.defineProperty(this,"a",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"b",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"c",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"d",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tx",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ty",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.a=e,this.b=i,this.c=r,this.d=n,this.tx=s,this.ty=a}setTransform(e,i,r,n,s,a=1){this.a=Math.cos(s)*a,this.b=Math.sin(s)*a,this.c=-Math.sin(s)*a,this.d=Math.cos(s)*a,this.tx=e-(r*this.a+n*this.c),this.ty=i-(r*this.b+n*this.d)}apply(e){return{x:this.a*e.x+this.c*e.y+this.tx,y:this.b*e.x+this.d*e.y+this.ty}}applyInverse(e){const i=1/(this.a*this.d+this.c*-this.b);return{x:this.d*i*e.x+-this.c*i*e.y+(this.ty*this.c-this.tx*this.d)*i,y:this.a*i*e.y+-this.b*i*e.x+(-this.ty*this.a+this.tx*this.b)*i}}append(e){const i=this.a,r=this.b,n=this.c,s=this.d;this.a=e.a*i+e.b*n,this.b=e.a*r+e.b*s,this.c=e.c*i+e.d*n,this.d=e.c*r+e.d*s,this.tx=e.tx*i+e.ty*n+this.tx,this.ty=e.tx*r+e.ty*s+this.ty}prepend(e){const i=this.tx;if(e.a!==1||e.b!==0||e.c!==0||e.d!==1){const r=this.a,n=this.c;this.a=r*e.a+this.b*e.c,this.b=r*e.b+this.b*e.d,this.c=n*e.a+this.d*e.c,this.d=n*e.b+this.d*e.d}this.tx=i*e.a+this.ty*e.c+e.tx,this.ty=i*e.b+this.ty*e.d+e.ty}copyFrom(e){this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty}}var K_t=(function(){function t(e,i){var r=[],n=!0,s=!1,a=void 0;try{for(var o=e[Symbol.iterator](),l;!(n=(l=o.next()).done)&&(r.push(l.value),!(i&&r.length===i));n=!0);}catch(c){s=!0,a=c}finally{try{!n&&o.return&&o.return()}finally{if(s)throw a}}return r}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),nI=Math.PI*2,NU=function(e,i,r,n,s,a,o){var l=e.x,c=e.y;l*=i,c*=r;var h=n*l-s*c,f=s*l+n*c;return{x:h+a,y:f+o}},Q_t=function(e,i){var r=i===1.5707963267948966?.551915024494:i===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(i/4),n=Math.cos(e),s=Math.sin(e),a=Math.cos(e+i),o=Math.sin(e+i);return[{x:n-s*r,y:s+n*r},{x:a+o*r,y:o-a*r},{x:a,y:o}]},Nde=function(e,i,r,n){var s=e*n-i*r<0?-1:1,a=e*r+i*n;return a>1&&(a=1),a<-1&&(a=-1),s*Math.acos(a)},e1t=function(e,i,r,n,s,a,o,l,c,h,f,g){var y=Math.pow(s,2),b=Math.pow(a,2),_=Math.pow(f,2),S=Math.pow(g,2),$=y*b-y*S-b*_;$<0&&($=0),$/=y*S+b*_,$=Math.sqrt($)*(o===l?-1:1);var C=$*s/a*g,I=$*-a/s*f,P=h*C-c*I+(e+r)/2,O=c*C+h*I+(i+n)/2,N=(f-C)/s,R=(g-I)/a,G=(-f-C)/s,Y=(-g-I)/a,Q=Nde(1,0,N,R),ae=Nde(N,R,G,Y);return l===0&&ae>0&&(ae-=nI),l===1&&ae<0&&(ae+=nI),[P,O,Q,ae]},t1t=function(e){var i=e.px,r=e.py,n=e.cx,s=e.cy,a=e.rx,o=e.ry,l=e.xAxisRotation,c=l===void 0?0:l,h=e.largeArcFlag,f=h===void 0?0:h,g=e.sweepFlag,y=g===void 0?0:g,b=[];if(a===0||o===0)return[];var _=Math.sin(c*nI/360),S=Math.cos(c*nI/360),$=S*(i-n)/2+_*(r-s)/2,C=-_*(i-n)/2+S*(r-s)/2;if($===0&&C===0)return[];a=Math.abs(a),o=Math.abs(o);var I=Math.pow($,2)/Math.pow(a,2)+Math.pow(C,2)/Math.pow(o,2);I>1&&(a*=Math.sqrt(I),o*=Math.sqrt(I));var P=e1t(i,r,n,s,a,o,f,y,_,S,$,C),O=K_t(P,4),N=O[0],R=O[1],G=O[2],Y=O[3],Q=Math.abs(Y)/(nI/4);Math.abs(1-Q)<1e-7&&(Q=1);var ae=Math.max(Math.ceil(Q),1);Y/=ae;for(var ce=0;ce<ae;ce++)b.push(Q_t(G,Y)),G+=Y;return b.map(function(ne){var K=NU(ne[0],a,o,S,_,N,R),le=K.x,re=K.y,he=NU(ne[1],a,o,S,_,N,R),xe=he.x,Pe=he.y,He=NU(ne[2],a,o,S,_,N,R),oe=He.x,be=He.y;return{x1:le,y1:re,x2:xe,y2:Pe,x:oe,y:be}})};function i1t(t,e,i){if(e!==i)throw new Error("Required "+i+" arguments for "+t+" but got "+e)}function nC(t,e,i){if(e<i)throw new Error("Required at least "+i+" arguments for "+t+" but got "+e)}function Hl(t,e,i){if(nC(t,e,i),e%i!==0)throw new Error("Arguments for "+t+" must be in pairs of "+i)}function r1t(t){for(let e=0;e<t.length;e+=7){let i=e+3,r=t[i];if(r.length>1){const n=/^([01])([01])(.*)$/.exec(r);n!==null&&(t.splice(i,0,n[1]),++i,t.splice(i,0,n[2]),++i,n[3].length>0?t[i]=n[3]:t.splice(i,1))}if(++i,r=t[i],r.length>1){const n=/^([01])(.+)$/.exec(r);n!==null&&(t.splice(i,0,n[1]),++i,t[i]=n[2])}}}function jde(t){if(t===0||t===1)return t;throw new Error("Flag must be 0 or 1")}function n1t(t){const e=[0,0,0];for(let i=0;i<24;i++)e[i%3]<<=1,e[i%3]|=t&1,t>>=1;return(e[0]|0)+(e[1]<<8)+(e[2]<<16)}function YL(t,e){for(;!(t.interactive&&!e(t));)if(t._parent)t=t._parent;else break}function s1t(t,e,i){return Nn(t,yW(e),r=>{const n=mEe(r);let s=r.touches;s?(s.length==0&&(s=r.changedTouches),i(Zwt(s),n)):i([r],n)})}function Vde(t){const e=document.createElement("canvas");e.width=1,e.height=1;const i=e.getContext("2d",{willReadFrequently:!0});i.drawImage(t,0,0,1,1);try{return i.getImageData(0,0,1,1),!1}catch{return console.warn('Image "'+t.src+'" is loaded from different host and is not covered by CORS policy. For more information about the implications read here: https://www.amcharts.com/docs/v5/concepts/cors'),!0}}function sC(t){t.width=0,t.height=0,t.style.width="0px",t.style.height="0px"}function Bde(t){return Math.floor(t)+.5}class a1t{constructor(){Object.defineProperty(this,"_x",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_y",{enumerable:!0,configurable:!0,writable:!0,value:0})}get x(){return this._x}get y(){return this._y}set x(e){this._x=e}set y(e){this._y=e}}class _j extends nK{constructor(e){super(),Object.defineProperty(this,"_layer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"mask",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"visible",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"exportable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"interactive",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"inactive",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"wheelable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"cancelTouch",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"isMeasured",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"buttonMode",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"alpha",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"compoundAlpha",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"angle",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"scale",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"crisp",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"pivot",{enumerable:!0,configurable:!0,writable:!0,value:new a1t}),Object.defineProperty(this,"filter",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cursorOverStyle",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_replacedCursorStyle",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_localMatrix",{enumerable:!0,configurable:!0,writable:!0,value:new FU}),Object.defineProperty(this,"_matrix",{enumerable:!0,configurable:!0,writable:!0,value:new FU}),Object.defineProperty(this,"_uMatrix",{enumerable:!0,configurable:!0,writable:!0,value:new FU}),Object.defineProperty(this,"_renderer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_parent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_localBounds",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_bounds",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_colorId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._renderer=e}subStatus(e){return{inactive:this.inactive==null?e.inactive:this.inactive,layer:this._layer||e.layer}}_dispose(){this._renderer._removeObject(this),this.getLayer().dirty=!0}getCanvas(){return this.getLayer().view}getLayer(){let e=this;for(;;){if(e._layer)return e._layer;if(e._parent)e=e._parent;else return this._renderer.defaultLayer}}setLayer(e,i){e==null?this._layer=void 0:(this._layer=this._renderer.getLayer(e,!0),this._layer.visible=!0,this._layer.margin=i,i&&pS(this._layer.view,!1),this._renderer._ghostLayer.setMargin(this._renderer.layers),this._parent&&this._parent.registerChildLayer(this._layer),this._layer.dirty=!0,this._renderer.resizeLayer(this._layer),this._renderer.resizeGhost())}markDirtyLayer(){this.getLayer().dirty=!0}clear(){this.invalidateBounds()}invalidateBounds(){this._localBounds=void 0}_addBounds(e){}_getColorId(){return this._colorId===void 0&&(this._colorId=this._renderer.paintId(this)),this._colorId}_isInteractive(e){return!e.inactive&&(this.interactive||this._renderer._forceInteractive>0)}_isInteractiveMask(e){return this._isInteractive(e)}contains(e){for(;;){if(e===this)return!0;if(e._parent)e=e._parent;else return!1}}toGlobal(e){return this._matrix.apply(e)}toLocal(e){return this._matrix.applyInverse(e)}getLocalMatrix(){return this._uMatrix.setTransform(0,0,this.pivot.x,this.pivot.y,this.angle*Math.PI/180,this.scale),this._uMatrix}getLocalBounds(){return this._localBounds||(this._localBounds={left:1e7,top:1e7,right:-1e7,bottom:-1e7},this._addBounds(this._localBounds)),this._localBounds}getAdjustedBounds(e){this._setMatrix();const i=this.getLocalMatrix(),r=i.apply({x:e.left,y:e.top}),n=i.apply({x:e.right,y:e.top}),s=i.apply({x:e.right,y:e.bottom}),a=i.apply({x:e.left,y:e.bottom});return{left:Math.min(r.x,n.x,s.x,a.x),top:Math.min(r.y,n.y,s.y,a.y),right:Math.max(r.x,n.x,s.x,a.x),bottom:Math.max(r.y,n.y,s.y,a.y)}}on(e,i,r){return this.interactive?this._renderer._addEvent(this,e,i,r):new As(()=>{})}_setMatrix(){this._localMatrix.setTransform(this.x,this.y,this.pivot.x,this.pivot.y,this.angle*Math.PI/180,this.scale),this._matrix.copyFrom(this._localMatrix),this._parent&&this._matrix.prepend(this._parent._matrix)}_transform(e,i){const r=this._matrix;let n=r.tx*i,s=r.ty*i;this.crisp&&(n=Bde(n),s=Bde(s)),e.setTransform(r.a*i,r.b*i,r.c*i,r.d*i,n,s)}_transformMargin(e,i,r){const n=this._matrix;e.setTransform(n.a*i,n.b*i,n.c*i,n.d*i,(n.tx+r.left)*i,(n.ty+r.top)*i)}_transformLayer(e,i,r){r.margin?this._transformMargin(e,r.scale||i,r.margin):this._transform(e,r.scale||i)}render(e,i=0){if(this.visible&&(this.exportable!==!1||!this._renderer._omitTainted)){this._setMatrix();const r=this.subStatus(e),n=this._renderer.resolution,s=this._renderer.layers,a=this._renderer._ghostLayer,o=a.context,l=this.mask;l&&l._setMatrix(),Ne(s,c=>{if(c){const h=c.context;h.save(),l&&(l._transformLayer(h,n,c),l._runPath(h),h.clip()),h.globalAlpha=this.compoundAlpha*this.alpha,this._transformLayer(h,n,c),this.filter&&(h.filter=this.filter)}}),o.save(),l&&this._isInteractiveMask(r)&&(l._transformMargin(o,n,a.margin),l._runPath(o),o.clip()),this._transformMargin(o,n,a.margin),r.layer.order>0&&!i&&Ywt(this._renderer._deferredGhostLayers,r.layer.order),this._render(r,i),o.restore(),Ne(s,c=>{c&&c.context.restore()})}}_render(e,i=0){this.exportable===!1&&(e.layer.tainted=!0)}_ghostOnly(e=0){return e>0}_drawGhost(e,i=0){const r=this._isInteractive(e),n=e.layer.order||0;return!!(r&&(n==0&&!this._ghostOnly(i)||n==i))}hovering(){return this._renderer._hovering.has(this)}dragging(){return this._renderer._dragging.some(e=>e.value===this)}shouldCancelTouch(){const e=this._renderer;return e.tapToActivate&&!e._touchActive?!1:this.cancelTouch?!0:this._parent?this._parent.shouldCancelTouch():!1}}class o1t extends _j{constructor(){super(...arguments),Object.defineProperty(this,"interactiveChildren",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"_childLayers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_children",{enumerable:!0,configurable:!0,writable:!0,value:[]})}_isInteractiveMask(e){return this.interactiveChildren||super._isInteractiveMask(e)}addChild(e){e._parent=this,this._children.push(e),e._layer&&this.registerChildLayer(e._layer)}addChildAt(e,i){e._parent=this,this._children.splice(i,0,e),e._layer&&this.registerChildLayer(e._layer)}removeChild(e){e._parent=void 0,Fo(this._children,e)}_render(e,i){super._render(e);const r=this._renderer;this.interactive&&this.interactiveChildren&&++r._forceInteractive,Ne(this._children,n=>{n.compoundAlpha=this.compoundAlpha*this.alpha,n.render(e,i)}),this.interactive&&this.interactiveChildren&&--r._forceInteractive}registerChildLayer(e){this._childLayers||(this._childLayers=[]),oM(this._childLayers,e),this._parent&&this._parent.registerChildLayer(e)}markDirtyLayer(e=!1){super.markDirtyLayer(),e&&this._childLayers&&Ne(this._childLayers,i=>i.dirty=!0)}_dispose(){super._dispose(),this._childLayers&&Ne(this._childLayers,e=>{e.dirty=!0})}}function ns(t,e){t.left=Math.min(t.left,e.x),t.top=Math.min(t.top,e.y),t.right=Math.max(t.right,e.x),t.bottom=Math.max(t.bottom,e.y)}class Ds{colorize(e,i){}colorizeGhost(e,i){this.colorize(e,i)}path(e){}pathGhost(e){this.path(e)}addBounds(e){}}class l1t extends Ds{colorize(e,i){e.beginPath()}}class jU extends Ds{constructor(e){super(),Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,writable:!0,value:e})}colorize(e,i){i!==void 0?e.fillStyle=i:e.fillStyle=this.color}}class c1t extends Ds{constructor(e){super(),Object.defineProperty(this,"clearShadow",{enumerable:!0,configurable:!0,writable:!0,value:e})}colorize(e,i){e.fill(),this.clearShadow&&(e.shadowColor="",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0)}}class u1t extends Ds{colorize(e,i){e.stroke()}}class VU extends Ds{constructor(e,i,r,n){super(),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"lineJoin",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"lineCap",{enumerable:!0,configurable:!0,writable:!0,value:n})}colorize(e,i){i!==void 0?e.strokeStyle=i:e.strokeStyle=this.color,e.lineWidth=this.width,this.lineJoin&&(e.lineJoin=this.lineJoin),this.lineCap&&(e.lineCap=this.lineCap)}}class d1t extends Ds{constructor(e){super(),Object.defineProperty(this,"dash",{enumerable:!0,configurable:!0,writable:!0,value:e})}colorize(e,i){e.setLineDash(this.dash)}}class h1t extends Ds{constructor(e){super(),Object.defineProperty(this,"dashOffset",{enumerable:!0,configurable:!0,writable:!0,value:e})}colorize(e,i){e.lineDashOffset=this.dashOffset}}class p1t extends Ds{constructor(e,i,r,n){super(),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,writable:!0,value:n})}path(e){e.rect(this.x,this.y,this.width,this.height)}addBounds(e){const i=this.x,r=this.y,n=i+this.width,s=r+this.height;ns(e,{x:i,y:r}),ns(e,{x:n,y:r}),ns(e,{x:i,y:s}),ns(e,{x:n,y:s})}}class f1t extends Ds{constructor(e,i,r){super(),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"radius",{enumerable:!0,configurable:!0,writable:!0,value:r})}path(e){e.moveTo(this.x+this.radius,this.y),e.arc(this.x,this.y,this.radius,0,2*Math.PI)}addBounds(e){ns(e,{x:this.x-this.radius,y:this.y-this.radius}),ns(e,{x:this.x+this.radius,y:this.y+this.radius})}}class m1t extends Ds{constructor(e,i,r,n){super(),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"radiusX",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"radiusY",{enumerable:!0,configurable:!0,writable:!0,value:n})}path(e){e.ellipse(0,0,this.radiusX,this.radiusY,0,0,Math.PI*2)}addBounds(e){ns(e,{x:this.x-this.radiusX,y:this.y-this.radiusY}),ns(e,{x:this.x+this.radiusX,y:this.y+this.radiusY})}}class g1t extends Ds{constructor(e,i,r,n,s,a){super(),Object.defineProperty(this,"cx",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"cy",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"radius",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"startAngle",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"endAngle",{enumerable:!0,configurable:!0,writable:!0,value:s}),Object.defineProperty(this,"anticlockwise",{enumerable:!0,configurable:!0,writable:!0,value:a})}path(e){this.radius>0&&e.arc(this.cx,this.cy,this.radius,this.startAngle,this.endAngle,this.anticlockwise)}addBounds(e){let i=vW(this.cx,this.cy,this.startAngle*rI,this.endAngle*rI,this.radius);ns(e,{x:i.left,y:i.top}),ns(e,{x:i.right,y:i.bottom})}}class y1t extends Ds{constructor(e,i,r,n,s){super(),Object.defineProperty(this,"x1",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"y1",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"x2",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"y2",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"radius",{enumerable:!0,configurable:!0,writable:!0,value:s})}path(e){this.radius>0&&e.arcTo(this.x1,this.y1,this.x2,this.y2,this.radius)}addBounds(e){}}class v1t extends Ds{constructor(e,i){super(),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,writable:!0,value:i})}path(e){e.lineTo(this.x,this.y)}addBounds(e){ns(e,{x:this.x,y:this.y})}}class b1t extends Ds{constructor(e,i){super(),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,writable:!0,value:i})}path(e){e.moveTo(this.x,this.y)}addBounds(e){ns(e,{x:this.x,y:this.y})}}class w1t extends Ds{path(e){e.closePath()}}class _1t extends Ds{constructor(e,i,r,n,s,a){super(),Object.defineProperty(this,"cpX",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"cpY",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"cpX2",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"cpY2",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"toX",{enumerable:!0,configurable:!0,writable:!0,value:s}),Object.defineProperty(this,"toY",{enumerable:!0,configurable:!0,writable:!0,value:a})}path(e){e.bezierCurveTo(this.cpX,this.cpY,this.cpX2,this.cpY2,this.toX,this.toY)}addBounds(e){ns(e,{x:this.cpX,y:this.cpY}),ns(e,{x:this.cpX2,y:this.cpY2}),ns(e,{x:this.toX,y:this.toY})}}class x1t extends Ds{constructor(e,i,r,n){super(),Object.defineProperty(this,"cpX",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"cpY",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"toX",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"toY",{enumerable:!0,configurable:!0,writable:!0,value:n})}path(e){e.quadraticCurveTo(this.cpX,this.cpY,this.toX,this.toY)}addBounds(e){ns(e,{x:this.cpX,y:this.cpY}),ns(e,{x:this.toX,y:this.toY})}}class S1t extends Ds{constructor(e,i,r,n,s){super(),Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"blur",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"offsetX",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"offsetY",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"opacity",{enumerable:!0,configurable:!0,writable:!0,value:s})}colorize(e,i){this.opacity&&(e.fillStyle=this.color),e.shadowColor=this.color,e.shadowBlur=this.blur,e.shadowOffsetX=this.offsetX,e.shadowOffsetY=this.offsetY}colorizeGhost(e,i){}}class $1t extends Ds{constructor(e,i,r,n,s){super(),Object.defineProperty(this,"image",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,writable:!0,value:s})}path(e){e.drawImage(this.image,this.x,this.y,this.width,this.height)}addBounds(e){ns(e,{x:this.x,y:this.y}),ns(e,{x:this.width,y:this.height})}}class T1t extends _j{constructor(){super(...arguments),Object.defineProperty(this,"_operations",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"blendMode",{enumerable:!0,configurable:!0,writable:!0,value:$5.NORMAL}),Object.defineProperty(this,"_hasShadows",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_fillAlpha",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_strokeAlpha",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}clear(){super.clear(),this._operations.length=0}_pushOp(e){this._operations.push(e)}beginFill(e,i=1){this._fillAlpha=i,e?e instanceof At?this._pushOp(new jU(e.toCSS(i))):(this.isMeasured=!0,this._pushOp(new jU(e))):this._pushOp(new jU("rgba(0, 0, 0, "+i+")"))}endFill(){this._pushOp(new c1t(this._hasShadows))}endStroke(){this._pushOp(new u1t)}beginPath(){this._pushOp(new l1t)}lineStyle(e=0,i,r=1,n,s){this._strokeAlpha=r,i?i instanceof At?this._pushOp(new VU(e,i.toCSS(r),n,s)):this._pushOp(new VU(e,i,n,s)):this._pushOp(new VU(e,"rgba(0, 0, 0, "+r+")",n,s))}setLineDash(e){this._pushOp(new d1t(e||[]))}setLineDashOffset(e=0){this._pushOp(new h1t(e))}drawRect(e,i,r,n){this._pushOp(new p1t(e,i,r,n))}drawCircle(e,i,r){this._pushOp(new f1t(e,i,r))}drawEllipse(e,i,r,n){this._pushOp(new m1t(e,i,r,n))}arc(e,i,r,n,s,a=!1){this._pushOp(new g1t(e,i,r,n,s,a))}arcTo(e,i,r,n,s){this._pushOp(new y1t(e,i,r,n,s))}lineTo(e,i){this._pushOp(new v1t(e,i))}moveTo(e,i){this._pushOp(new b1t(e,i))}bezierCurveTo(e,i,r,n,s,a){this._pushOp(new _1t(e,i,r,n,s,a))}quadraticCurveTo(e,i,r,n){this._pushOp(new x1t(e,i,r,n))}closePath(){this._pushOp(new w1t)}shadow(e,i=0,r=0,n=0,s){this._hasShadows=!0,this._pushOp(new S1t(s?e.toCSS(s):e.toCSS(this._fillAlpha||this._strokeAlpha),i,r,n))}image(e,i,r,n,s){this._pushOp(new $1t(e,i,r,n,s))}svgPath(e){let i=0,r=0,n=null,s=null,a=null,o=null;const l=/([MmZzLlHhVvCcSsQqTtAa])([^MmZzLlHhVvCcSsQqTtAa]*)/g,c=/[\u0009\u0020\u000A\u000C\u000D]*([\+\-]?[0-9]*\.?[0-9]+(?:[eE][\+\-]?[0-9]+)?)[\u0009\u0020\u000A\u000C\u000D]*,?/g;let h;for(;(h=l.exec(e))!==null;){const f=h[1],g=h[2],y=[];for(;(h=c.exec(g))!==null;)y.push(h[1]);switch(f!=="S"&&f!=="s"&&f!=="C"&&f!=="c"&&(n=null,s=null),f!=="Q"&&f!=="q"&&f!=="T"&&f!=="t"&&(a=null,o=null),f){case"M":Hl(f,y.length,2),i=+y[0],r=+y[1],this.moveTo(i,r);for(let _=2;_<y.length;_+=2)i=+y[_],r=+y[_+1],this.lineTo(i,r);break;case"m":Hl(f,y.length,2),i+=+y[0],r+=+y[1],this.moveTo(i,r);for(let _=2;_<y.length;_+=2)i+=+y[_],r+=+y[_+1],this.lineTo(i,r);break;case"L":Hl(f,y.length,2);for(let _=0;_<y.length;_+=2)i=+y[_],r=+y[_+1],this.lineTo(i,r);break;case"l":Hl(f,y.length,2);for(let _=0;_<y.length;_+=2)i+=+y[_],r+=+y[_+1],this.lineTo(i,r);break;case"H":nC(f,y.length,1);for(let _=0;_<y.length;++_)i=+y[_],this.lineTo(i,r);break;case"h":nC(f,y.length,1);for(let _=0;_<y.length;++_)i+=+y[_],this.lineTo(i,r);break;case"V":nC(f,y.length,1);for(let _=0;_<y.length;++_)r=+y[_],this.lineTo(i,r);break;case"v":nC(f,y.length,1);for(let _=0;_<y.length;++_)r+=+y[_],this.lineTo(i,r);break;case"C":Hl(f,y.length,6);for(let _=0;_<y.length;_+=6){const S=+y[_],$=+y[_+1];n=+y[_+2],s=+y[_+3],i=+y[_+4],r=+y[_+5],this.bezierCurveTo(S,$,n,s,i,r)}break;case"c":Hl(f,y.length,6);for(let _=0;_<y.length;_+=6){const S=+y[_]+i,$=+y[_+1]+r;n=+y[_+2]+i,s=+y[_+3]+r,i+=+y[_+4],r+=+y[_+5],this.bezierCurveTo(S,$,n,s,i,r)}break;case"S":Hl(f,y.length,4),(n===null||s===null)&&(n=i,s=r);for(let _=0;_<y.length;_+=4){const S=2*i-n,$=2*r-s;n=+y[_],s=+y[_+1],i=+y[_+2],r=+y[_+3],this.bezierCurveTo(S,$,n,s,i,r)}break;case"s":Hl(f,y.length,4),(n===null||s===null)&&(n=i,s=r);for(let _=0;_<y.length;_+=4){const S=2*i-n,$=2*r-s;n=+y[_]+i,s=+y[_+1]+r,i+=+y[_+2],r+=+y[_+3],this.bezierCurveTo(S,$,n,s,i,r)}break;case"Q":Hl(f,y.length,4);for(let _=0;_<y.length;_+=4)a=+y[_],o=+y[_+1],i=+y[_+2],r=+y[_+3],this.quadraticCurveTo(a,o,i,r);break;case"q":Hl(f,y.length,4);for(let _=0;_<y.length;_+=4)a=+y[_]+i,o=+y[_+1]+r,i+=+y[_+2],r+=+y[_+3],this.quadraticCurveTo(a,o,i,r);break;case"T":Hl(f,y.length,2),(a===null||o===null)&&(a=i,o=r);for(let _=0;_<y.length;_+=2)a=2*i-a,o=2*r-o,i=+y[_],r=+y[_+1],this.quadraticCurveTo(a,o,i,r);break;case"t":Hl(f,y.length,2),(a===null||o===null)&&(a=i,o=r);for(let _=0;_<y.length;_+=2)a=2*i-a,o=2*r-o,i+=+y[_],r+=+y[_+1],this.quadraticCurveTo(a,o,i,r);break;case"A":case"a":const b=f==="a";r1t(y),Hl(f,y.length,7);for(let _=0;_<y.length;_+=7){let S=+y[_+5],$=+y[_+6];b&&(S+=i,$+=r);const C=t1t({px:i,py:r,rx:+y[_],ry:+y[_+1],xAxisRotation:+y[_+2],largeArcFlag:jde(+y[_+3]),sweepFlag:jde(+y[_+4]),cx:S,cy:$});Ne(C,I=>{this.bezierCurveTo(I.x1,I.y1,I.x2,I.y2,I.x,I.y),i=I.x,r=I.y})}break;case"Z":case"z":i1t(f,y.length,0),this.closePath();break}}}_runPath(e){e.beginPath(),Ne(this._operations,i=>{i.path(e)})}_render(e,i=0){super._render(e);const r=e.layer.dirty,n=this._isInteractive(e),s=this._ghostOnly(i),a=this._drawGhost(e,i);if(r||n||s){const o=e.layer.context,l=this._renderer._ghostLayer.context;r&&!s&&(o.globalCompositeOperation=this.blendMode,o.beginPath());let c;a&&(l.beginPath(),c=this._getColorId()),Ne(this._operations,h=>{r&&!s&&(h.path(o),h.colorize(o,void 0)),a&&(h.pathGhost(l),h.colorizeGhost(l,c))})}}renderDetached(e){if(this.visible){this._setMatrix(),e.save();const i=this.mask;i&&(i._setMatrix(),i._transform(e,1),i._runPath(e),e.clip()),e.globalAlpha=this.compoundAlpha*this.alpha,this._transform(e,1),this.filter&&(e.filter=this.filter),e.globalCompositeOperation=this.blendMode,e.beginPath(),Ne(this._operations,r=>{r.path(e),r.colorize(e,void 0)}),e.restore()}}_addBounds(e){this.visible&&this.isMeasured&&Ne(this._operations,i=>{i.addBounds(e)})}}class kEe extends _j{constructor(e,i,r){super(e),Object.defineProperty(this,"text",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"style",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"resolution",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"textVisible",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"truncated",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_textInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_originalScale",{enumerable:!0,configurable:!0,writable:!0,value:1}),this.text=i,this.style=r}invalidateBounds(){super.invalidateBounds(),this._textInfo=void 0}invalidateVisibility(){this.textVisible=!0,this.scale=this._originalScale||1}_shared(e){this.style.textAlign&&(e.textAlign=this.style.textAlign),this.style.direction&&(e.direction=this.style.direction),this.style.textBaseline&&(e.textBaseline=this.style.textBaseline)}_prerender(e,i=!1,r=!1){super._render(e);const n=e.layer.context,s=this._renderer._ghostLayer.context,a=this.style;let o=this._getFontStyle(void 0,r);n.font=o,this._isInteractive(e)&&!i&&(s.font=o),a.fill&&(a.fill instanceof At?n.fillStyle=a.fill.toCSS(a.fillOpacity!=null?a.fillOpacity:1):n.fillStyle=a.fill),a.shadowColor&&(e.layer.context.shadowColor=a.shadowColor.toCSS(a.shadowOpacity||1)),a.shadowBlur&&(e.layer.context.shadowBlur=a.shadowBlur),a.shadowOffsetX&&(e.layer.context.shadowOffsetX=a.shadowOffsetX),a.shadowOffsetY&&(e.layer.context.shadowOffsetY=a.shadowOffsetY),this._shared(n),this._isInteractive(e)&&!i&&(s.fillStyle=this._getColorId(),this._shared(s))}_getFontStyle(e,i=!1){const r=this.style;let n=[];return e&&e.fontVariant?n.push(e.fontVariant):r.fontVariant&&n.push(r.fontVariant),i||(e&&e.fontWeight?n.push(e.fontWeight):r.fontWeight&&n.push(r.fontWeight)),e&&e.fontStyle?n.push(e.fontStyle):r.fontStyle&&n.push(r.fontStyle),e&&e.fontSize?(kt(e.fontSize)&&(e.fontSize=e.fontSize+"px"),n.push(e.fontSize)):r.fontSize&&(kt(r.fontSize)&&(r.fontSize=r.fontSize+"px"),n.push(r.fontSize)),e&&e.fontFamily?n.push(e.fontFamily):r.fontFamily?n.push(r.fontFamily):n.length&&n.push("Arial"),n.join(" ")}_render(e,i=0){if(this._textInfo||this._measure(e),this.textVisible){const r=this._isInteractive(e),n=e.layer.context,s=e.layer.dirty,a=this._renderer._ghostLayer.context,o=this._ghostOnly(i),l=this._drawGhost(e,i);n.save(),a.save(),this._prerender(e),Ne(this._textInfo,(c,h)=>{Ne(c.textChunks,(f,g)=>{if(f.style&&(n.save(),a.save(),o||(n.font=f.style),this._isInteractive(e)&&(a.font=f.style)),f.fill&&(n.save(),o||(n.fillStyle=f.fill.toCSS())),s&&!o&&n.fillText(f.text,f.offsetX,c.offsetY+f.offsetY),f.textDecoration=="underline"||f.textDecoration=="line-through"){let y=1,b=1,_=f.height;const S=this.style.oversizedBehavior||"";if(["truncate","wrap","wrap-no-break"].indexOf(S)>-1){const I=this._measureText(f.text,n);f.width=I.actualBoundingBoxLeft+I.actualBoundingBoxRight}let $=f.offsetX;switch(this.style.textAlign){case"right":case"end":$-=f.width;break;case"center":$-=f.width/2;break}if(f.style)switch(Rd.getTextStyle(f.style).fontWeight){case"bolder":case"bold":case"700":case"800":case"900":y=2;break}_&&(b=_/20);let C;f.textDecoration=="line-through"?C=y+c.offsetY+f.offsetY-f.height/2:C=y+b*1.5+c.offsetY+f.offsetY,o||(n.save(),n.beginPath(),f.fill?n.strokeStyle=f.fill.toCSS():this.style.fill&&this.style.fill instanceof At&&(n.strokeStyle=this.style.fill.toCSS()),n.lineWidth=y*b,n.moveTo($,C),n.lineTo($+f.width,C),n.stroke(),n.restore())}r&&this.interactive&&l&&a.fillText(f.text,f.offsetX,c.offsetY+f.offsetY),f.fill&&n.restore(),f.style&&(n.restore(),a.restore())})}),n.restore(),a.restore()}}_addBounds(e){if(this.visible&&this.isMeasured){const i=this._measure({inactive:this.inactive,layer:this.getLayer()});ns(e,{x:i.left,y:i.top}),ns(e,{x:i.right,y:i.bottom})}}_ignoreFontWeight(){return/apple/i.test(navigator.vendor)}_measure(e){const i=e.layer.context,r=this._renderer._ghostLayer.context,n=this.style.direction=="rtl";this._textInfo=[];const s=this.style.oversizedBehavior,a=this.style.maxWidth,o=kt(a)&&s=="truncate",l=kt(a)&&(s=="wrap"||s=="wrap-no-break");i.save(),r.save(),this._prerender(e,!0,this._ignoreFontWeight());const c="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ",h=this.text.toString().replace(/\r/g,"").split(/\n/);let f=!0,g=0,y=0,b=0,_;Ne(h,($,C)=>{let I;for($==""?I=[{type:"value",text:""}]:I=Rd.chunk($,!1,this.style.ignoreFormatting);I.length>0;){let P={offsetY:b,ascent:0,width:0,height:0,left:0,right:0,textChunks:[]};const O=this._measureText(c,i),N=O.actualBoundingBoxAscent+O.actualBoundingBoxDescent;P.height=N,P.ascent=O.actualBoundingBoxAscent;let R,G=this.style.textDecoration,Y,Q,ae=!1,ce=!0,ne=[],K;rK(I,(le,re)=>{if(le.type=="format")if(le.text=="[/]")f||(i.restore(),r.restore(),f=!0),Y=void 0,_=void 0,Q=void 0,G=this.style.textDecoration,K=void 0,R=le.text;else{f||(i.restore(),r.restore());let he=Rd.getTextStyle(le.text);const xe=this._getFontStyle(he);i.save(),r.save(),i.font=xe,_=xe,R=le.text,he.textDecoration&&(G=he.textDecoration),he.fill&&(Y=he.fill),he.width&&(Q=pc(he.width)),he.verticalAlign&&(K=he.verticalAlign),f=!1;const Pe=this._measureText(c,i),He=Pe.actualBoundingBoxAscent+Pe.actualBoundingBoxDescent;He>P.height&&(P.height=He),Pe.actualBoundingBoxAscent>P.ascent&&(P.ascent=Pe.actualBoundingBoxAscent)}else if(le.type=="value"&&!ae){const he=this._measureText(le.text,i);let xe=he.actualBoundingBoxLeft+he.actualBoundingBoxRight;if(o){this.truncated=void 0;let be=ce||this.style.breakWords||!1;const Le=this.style.ellipsis||"",Je=this._measureText(Le,i),st=Je.actualBoundingBoxLeft+Je.actualBoundingBoxRight;if(P.width+xe>a){const ut=a-P.width-st;le.text=this._truncateText(i,le.text,ut,be),le.text+=Le,ae=!0,this.truncated=!0}}else if(l&&P.width+xe>a){const be=a-P.width,Le=this._truncateText(i,le.text,be,!1,ce&&this.style.oversizedBehavior!="wrap-no-break");if(Le=="")return this.textVisible=!0,!1;ne=I.slice(re+1),n$(Le)!=n$(le.text)&&(ne.unshift({type:"value",text:le.text.substr(Le.length)}),R&&ne.unshift({type:"format",text:R})),le.text=n$(Le),I=[],ae=!0}let Pe=1,He=1;if(_&&Q&&Q>xe){const be=xe/Q;switch(this.style.textAlign){case"right":case"end":Pe=be;break;case"center":Pe=be,He=be;break;default:He=be}xe=Q}const oe=he.actualBoundingBoxAscent+he.actualBoundingBoxDescent;oe>P.height&&(P.height=oe),he.actualBoundingBoxAscent>P.ascent&&(P.ascent=he.actualBoundingBoxAscent),P.width+=xe,P.left+=he.actualBoundingBoxLeft/Pe,P.right+=he.actualBoundingBoxRight/He,P.textChunks.push({style:_,fill:Y,text:le.text,width:xe,height:oe,left:he.actualBoundingBoxLeft,right:he.actualBoundingBoxRight,ascent:he.actualBoundingBoxAscent,offsetX:0,offsetY:0,textDecoration:G,verticalAlign:K}),ce=!1}return!0}),this.style.lineHeight instanceof _i?(P.height*=this.style.lineHeight.value,P.ascent*=this.style.lineHeight.value):(P.height*=this.style.lineHeight||1.2,P.ascent*=this.style.lineHeight||1.2),g<P.left&&(g=P.left),y<P.right&&(y=P.right),this._textInfo.push(P),b+=P.height,I=ne||[]}}),f||(i.restore(),r.restore()),Ne(this._textInfo,($,C)=>{let I=0;Ne($.textChunks,P=>{if(P.offsetX=I+P.left-$.left,P.offsetY+=$.height-$.height*(this.style.baselineRatio||.19),I+=P.width*(n?-1:1),P.verticalAlign)switch(P.verticalAlign){case"super":P.offsetY-=$.height/2-P.height/2;break;case"sub":P.offsetY+=P.height/2;break}})});const S={left:n?-y:-g,top:0,right:n?g:y,bottom:b};if(s!=="none"){const $=this._fitRatio(S);if($<1)if(s=="fit")kt(this.style.minScale)&&$<this.style.minScale?(this.textVisible=!1,S.left=0,S.top=0,S.right=0,S.bottom=0):(this._originalScale||(this._originalScale=this.scale),this.scale=$,this.textVisible=!0);else if(s=="hide")this.textVisible=!1,S.left=0,S.top=0,S.right=0,S.bottom=0;else{switch(this.style.textAlign){case"right":case"end":S.left=n?a:-a,S.right=0;break;case"center":S.left=-a/2,S.right=a/2;break;default:S.left=0,S.right=n?-a:a}this.scale=this._originalScale||1,this._originalScale=void 0,this.textVisible=!0}else this.scale=this._originalScale||1,this._originalScale=void 0,this.textVisible=!0}return i.restore(),r.restore(),S}_fitRatio(e){const i=this.style.maxWidth,r=this.style.maxHeight;if(!kt(i)&&!kt(r))return 1;const n=e.right-e.left,s=e.bottom-e.top;return Math.min(i/n||1,r/s||1)}_truncateText(e,i,r,n=!1,s=!0){let a;do{if(n)i=i.slice(0,-1);else{let l=i.replace(/[^,;:!?\\\/\s]+[,;:!?\\\/\s]*$/g,"");if((l==""||l===i)&&s)n=!0;else{if(l=="")return i;i=l}}const o=this._measureText(i,e);a=o.actualBoundingBoxLeft+o.actualBoundingBoxRight}while(a>r&&i!="");return i}_measureText(e,i){let r=i.measureText(e),n={};if(r.actualBoundingBoxAscent==null){const a=document.createElement("div");a.innerText=e,a.style.visibility="hidden",a.style.position="absolute",a.style.top="-1000000px;",a.style.fontFamily=this.style.fontFamily||"",a.style.fontSize=this.style.fontSize+"",document.body.appendChild(a);const o=a.getBoundingClientRect();document.body.removeChild(a);const l=o.height,c=r.width;n={actualBoundingBoxAscent:l,actualBoundingBoxDescent:0,actualBoundingBoxLeft:0,actualBoundingBoxRight:c,fontBoundingBoxAscent:l,fontBoundingBoxDescent:0,width:c}}else n={actualBoundingBoxAscent:r.actualBoundingBoxAscent,actualBoundingBoxDescent:r.actualBoundingBoxDescent,actualBoundingBoxLeft:r.actualBoundingBoxLeft,actualBoundingBoxRight:r.actualBoundingBoxRight,fontBoundingBoxAscent:r.actualBoundingBoxAscent,fontBoundingBoxDescent:r.actualBoundingBoxDescent,width:r.width};const s=r.width;switch(this.style.textAlign){case"right":case"end":n.actualBoundingBoxLeft=s,n.actualBoundingBoxRight=0;break;case"center":n.actualBoundingBoxLeft=s/2,n.actualBoundingBoxRight=s/2;break;default:n.actualBoundingBoxLeft=0,n.actualBoundingBoxRight=s}return n}}class k1t{constructor(){Object.defineProperty(this,"fill",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fillOpacity",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"textAlign",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fontFamily",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fontWeight",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fontVariant",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"textDecoration",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowColor",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowBlur",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowOffsetX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowOffsetY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowOpacity",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lineHeight",{enumerable:!0,configurable:!0,writable:!0,value:Ks(120)}),Object.defineProperty(this,"baselineRatio",{enumerable:!0,configurable:!0,writable:!0,value:.19}),Object.defineProperty(this,"direction",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"textBaseline",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"oversizedBehavior",{enumerable:!0,configurable:!0,writable:!0,value:"none"}),Object.defineProperty(this,"breakWords",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ellipsis",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"maxWidth",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxHeight",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"minScale",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ignoreFormatting",{enumerable:!0,configurable:!0,writable:!0,value:!1})}}class E1t extends kEe{constructor(){super(...arguments),Object.defineProperty(this,"textType",{enumerable:!0,configurable:!0,writable:!0,value:"circular"}),Object.defineProperty(this,"radius",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"startAngle",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inside",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"orientation",{enumerable:!0,configurable:!0,writable:!0,value:"auto"}),Object.defineProperty(this,"kerning",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_textReversed",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_render(e,i=0){this.textType==="circular"?this._renderCircular(e,i):super._render(e,i)}_renderCircular(e,i=0){if(this.textVisible){this._prerender(e);const r=this._isInteractive(e),n=e.layer.context,s=e.layer.dirty,a=this._renderer._ghostLayer.context;n.save(),r&&a.save(),this._textInfo||this._measure(e);let o=this.radius||0,l=this.startAngle||0,c=0,h=this.orientation,f=h=="auto"?"auto":h=="inward";const g=this.inside,y=this.style.textAlign||"left",b=this.kerning||0;let _=y=="left"?1:-1;const S=!this._textReversed,$=this._ghostOnly(i),C=this._drawGhost(e,i);if(f=="auto"){let I=0,P=0;Ne(this._textInfo,(O,N)=>{const R=l+O.width/(o-O.height)/2*-_;R>I&&(I=R)}),y=="left"?P=(I+c/2)*rI:y=="right"?P=(I-c/2)*rI:P=l*rI,P=aK(P),f=P>=270||P<=90}f==!0&&S&&(this._textInfo.reverse(),this._textReversed=!0),Ne(this._textInfo,(I,P)=>{const O=I.height;g||(o+=O),(_==-1&&f||_==1&&!f)&&S&&I.textChunks.reverse();let N=l;c=0,y=="center"&&(N+=I.width/(o-O)/2*-_,c=N-l),N+=Math.PI*(f?0:1),n.save(),r&&a.save(),$||n.rotate(N),r&&a.rotate(N);let R=0;Ne(I.textChunks,(G,Y)=>{const Q=G.text,ae=G.width;R=ae/2/(o-O)*_,$||n.rotate(R),r&&a.rotate(R),G.style&&(n.save(),a.save(),$||(n.font=G.style),r&&(a.font=G.style)),G.fill&&(n.save(),$||(n.fillStyle=G.fill.toCSS())),$||(n.textBaseline="middle",n.textAlign="center"),r&&(a.textBaseline="middle",a.textAlign="center"),s&&!$&&n.fillText(Q,0,(f?1:-1)*(0-o+O/2)),r&&C&&a.fillText(Q,0,(f?1:-1)*(0-o+O/2)),G.fill&&n.restore(),G.style&&(n.restore(),a.restore()),R=(ae/2+b)/(o-O)*_,$||n.rotate(R),r&&a.rotate(R)}),n.restore(),r&&a.restore(),g&&(o-=O)}),n.restore(),r&&a.restore()}}_measure(e){return this.textType==="circular"?this._measureCircular(e):super._measure(e)}_measureCircular(e){const i=e.layer.context,r=this._renderer._ghostLayer.context,n=this.style.direction=="rtl",s=this.style.oversizedBehavior,a=this.style.maxWidth,o=kt(a)&&s=="truncate",l=this.style.ellipsis||"";let c;this.textVisible=!0,this._textInfo=[],this._textReversed=!1,i.save(),r.save(),this._prerender(e,!0);const h=this.text.toString().replace(/\r/g,"").split(/\n/);let f=!0,g=0,y=0;return Ne(h,(b,_)=>{let S=Rd.chunk(b,!1,this.style.ignoreFormatting),$={offsetY:y,ascent:0,width:0,height:0,left:0,right:0,textChunks:[]},C,I,P;Ne(S,(O,N)=>{if(O.type=="format"){if(O.text=="[/]")f||(i.restore(),r.restore(),f=!0),I=void 0,C=void 0,P=void 0;else{let R=Rd.getTextStyle(O.text);const G=this._getFontStyle(R);i.save(),r.save(),i.font=G,C=G,R.fill&&(I=R.fill),R.width&&(P=pc(R.width)),f=!1}o&&(c=this._measureText(l,i))}else if(O.type=="value"){let R=O.text.match(/./ug)||[];n&&(R=y_t(O.text),R.reverse());for(let G=0;G<R.length;G++){const Y=R[G],Q=this._measureText(Y,i);let ae=Q.width;C&&P&&P>ae&&(ae=P);const ce=Q.actualBoundingBoxAscent+Q.actualBoundingBoxDescent;if(ce>$.height&&($.height=ce),Q.actualBoundingBoxAscent>$.ascent&&($.ascent=Q.actualBoundingBoxAscent),g+=ae,o){c||(c=this._measureText(l,i));const ne=c.actualBoundingBoxLeft+c.actualBoundingBoxRight;if(g+ne>a){$.textChunks.length==1?this.textVisible=!1:($.width+=ne,$.left+=c.actualBoundingBoxLeft,$.right+=c.actualBoundingBoxRight,$.textChunks.push({style:C,fill:I,text:l,width:ne,height:ce+c.actualBoundingBoxDescent,left:c.actualBoundingBoxLeft,right:c.actualBoundingBoxRight,ascent:c.actualBoundingBoxAscent,offsetX:0,offsetY:ce,textDecoration:void 0}));break}}$.width+=ae,$.left+=Q.actualBoundingBoxLeft,$.right+=Q.actualBoundingBoxRight,$.textChunks.push({style:C,fill:I,text:Y,width:ae,height:ce+Q.actualBoundingBoxDescent,left:Q.actualBoundingBoxLeft,right:Q.actualBoundingBoxRight,ascent:Q.actualBoundingBoxAscent,offsetX:0,offsetY:ce,textDecoration:void 0})}}}),this.style.lineHeight instanceof _i?$.height*=this.style.lineHeight.value:$.height*=this.style.lineHeight||1.2,this._textInfo.push($),y+=$.height}),f||(i.restore(),r.restore()),s=="hide"&&g>a&&(this.textVisible=!1),Ne(this._textInfo,b=>{Ne(b.textChunks,_=>{_.offsetY+=Math.round((b.height-_.height+(b.ascent-_.ascent))/2)})}),i.restore(),r.restore(),{left:0,top:0,right:0,bottom:0}}}class C1t extends _j{constructor(e,i){super(e),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"image",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tainted",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowColor",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowBlur",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowOffsetX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowOffsetY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowOpacity",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_imageMask",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.image=i}_dispose(){super._dispose(),this._imageMask&&sC(this._imageMask)}getLocalBounds(){if(!this._localBounds){let e=0,i=0;this.width&&(e=this.width),this.height&&(i=this.height),this._localBounds={left:0,top:0,right:e,bottom:i},this._addBounds(this._localBounds)}return this._localBounds}_render(e,i=0){if(super._render(e),this.image){if(this.tainted===void 0&&(this.tainted=Vde(this.image),e.layer.tainted=!0),this.tainted&&this._renderer._omitTainted)return;const r=this._ghostOnly(i),n=this._drawGhost(e,i);if(e.layer.dirty&&!r){this.shadowColor&&(e.layer.context.shadowColor=this.shadowColor.toCSS(this.shadowOpacity||1)),this.shadowBlur&&(e.layer.context.shadowBlur=this.shadowBlur),this.shadowOffsetX&&(e.layer.context.shadowOffsetX=this.shadowOffsetX),this.shadowOffsetY&&(e.layer.context.shadowOffsetY=this.shadowOffsetY);const s=this.width||this.image.naturalWidth,a=this.height||this.image.naturalHeight;e.layer.context.drawImage(this.image,0,0,s,a)}if(this.interactive&&this._isInteractive(e)&&n){const s=this._getMask(this.image);this._renderer._ghostLayer.context.drawImage(s,0,0)}}}clear(){super.clear(),this.image=void 0,this._imageMask=void 0}_getMask(e){if(this._imageMask===void 0){const i=this.width||e.naturalWidth,r=this.height||e.naturalHeight,n=document.createElement("canvas");n.width=i,n.height=r;const s=n.getContext("2d");s.imageSmoothingEnabled=!1,s.fillStyle=this._getColorId(),s.fillRect(0,0,i,r),Vde(e)||(s.globalCompositeOperation="destination-in",s.drawImage(e,0,0,i,r)),this._imageMask=n}return this._imageMask}}class I1t{constructor(e,i,r,n){Object.defineProperty(this,"event",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"originalPoint",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"point",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"bbox",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"simulated",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"native",{enumerable:!0,configurable:!0,writable:!0,value:!0}),rw("touchevents")&&e instanceof Touch?this.id=e.identifier:this.id=null}}class M1t extends n_t{constructor(e){if(super(),Object.defineProperty(this,"view",{enumerable:!0,configurable:!0,writable:!0,value:document.createElement("div")}),Object.defineProperty(this,"_layerDom",{enumerable:!0,configurable:!0,writable:!0,value:document.createElement("div")}),Object.defineProperty(this,"layers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_dirtyLayers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"defaultLayer",{enumerable:!0,configurable:!0,writable:!0,value:this.getLayer(0)}),Object.defineProperty(this,"_ghostLayer",{enumerable:!0,configurable:!0,writable:!0,value:new A1t}),Object.defineProperty(this,"_deferredGhostLayers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_patternCanvas",{enumerable:!0,configurable:!0,writable:!0,value:document.createElement("canvas")}),Object.defineProperty(this,"_patternContext",{enumerable:!0,configurable:!0,writable:!0,value:this._patternCanvas.getContext("2d")}),Object.defineProperty(this,"_realWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_realHeight",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_calculatedWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_calculatedHeight",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"resolution",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"interactionsEnabled",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"_listeners",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_events",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_colorId",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_colorMap",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_forceInteractive",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_omitTainted",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_hovering",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"_dragging",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_mousedown",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_lastPointerMoveEvent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tapToActivate",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"tapToActivateTimeout",{enumerable:!0,configurable:!0,writable:!0,value:3e3}),Object.defineProperty(this,"_touchActive",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_touchActiveTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e==null?this.resolution=window.devicePixelRatio:this.resolution=e,this.view.style.position="absolute",this.view.setAttribute("aria-hidden","true"),this.view.appendChild(this._layerDom),this._disposers.push(new As(()=>{Lr(this._events,(i,r)=>{r.disposer.dispose()}),Ne(this.layers,i=>{sC(i.view),i.exportableView&&sC(i.exportableView)}),sC(this._ghostLayer.view),sC(this._patternCanvas)})),this._disposers.push(fEe(()=>{e==null&&(this.resolution=window.devicePixelRatio)})),rw("touchevents")){const i=r=>{this._dragging.length!==0&&rK(this._dragging,n=>n.value.shouldCancelTouch()?(r.preventDefault(),!1):!0),this._touchActiveTimeout&&this._delayTouchDeactivate()};this._disposers.push(Nn(window,"touchstart",i,{passive:!1})),this._disposers.push(Nn(this.view,"touchstart",i,{passive:!1})),this._disposers.push(Nn(this.view,"touchmove",()=>{this._touchActiveTimeout&&this._delayTouchDeactivate()},{passive:!0})),this._disposers.push(Nn(window,"click",r=>{this._touchActive=!1},{passive:!0})),this._disposers.push(Nn(this.view,"click",r=>{window.setTimeout(()=>{this._touchActive=!0,this._delayTouchDeactivate()},100)},{passive:!0}))}rw("wheelevents")&&this._disposers.push(Nn(this.view,"wheel",i=>{let r=!1;this._hovering.forEach(n=>{if(n.wheelable)return r=!0,!1}),r&&i.preventDefault()},{passive:!1}))}resetImageArray(){this._ghostLayer.imageArray=void 0}_delayTouchDeactivate(){this._touchActiveTimeout&&clearTimeout(this._touchActiveTimeout),this.tapToActivateTimeout>0&&(this._touchActiveTimeout=window.setTimeout(()=>{this._touchActive=!1},this.tapToActivateTimeout))}get debugGhostView(){return!!this._ghostLayer.view.parentNode}set debugGhostView(e){e?this._ghostLayer.view.parentNode||this.view.appendChild(this._ghostLayer.view):this._ghostLayer.view.parentNode&&this._ghostLayer.view.parentNode.removeChild(this._ghostLayer.view)}createLinearGradient(e,i,r,n){return this.defaultLayer.context.createLinearGradient(e,i,r,n)}createRadialGradient(e,i,r,n,s,a){return this.defaultLayer.context.createRadialGradient(e,i,r,n,s,a)}createPattern(e,i,r,n,s){return this._patternCanvas.width=n,this._patternCanvas.height=s,this._patternContext.clearRect(0,0,n,s),i.renderDetached(this._patternContext),e.renderDetached(this._patternContext),this._patternContext.createPattern(this._patternCanvas,r)}makeContainer(){return new o1t(this)}makeGraphics(){return new T1t(this)}makeText(e,i){return new kEe(this,e,i)}makeTextStyle(){return new k1t}makeRadialText(e,i){return new E1t(this,e,i)}makePicture(e){return new C1t(this,e)}resizeLayer(e){e.resize(this._calculatedWidth,this._calculatedHeight,this._calculatedWidth,this._calculatedHeight,this.resolution)}resizeGhost(){this._ghostLayer.resize(this._calculatedWidth,this._calculatedHeight,this._calculatedWidth,this._calculatedHeight,this.resolution)}resize(e,i,r,n){this._realWidth=e,this._realHeight=i,this._calculatedWidth=r,this._calculatedHeight=n,Ne(this.layers,s=>{s&&(s.dirty=!0,this.resizeLayer(s))}),this.resizeGhost(),this.view.style.width=r+"px",this.view.style.height=n+"px"}createDetachedLayer(e=!1){const i=document.createElement("canvas"),r=i.getContext("2d",{willReadFrequently:e}),n=new P1t(i,r);return i.style.position="absolute",i.style.top="0px",i.style.left="0px",n}getLayerByOrder(e){const i=this.layers,r=i.length;for(let n=0;n<r;n++){const s=i[n];if(s.order==e)return s}}getLayer(e,i=!0){let r=this.getLayerByOrder(e);if(r)return r;const n=this.createDetachedLayer(e==99);n.order=e,n.visible=i,n.view.className="am5-layer-"+e,n.visible&&this.resizeLayer(n);const s=this.layers;s.push(n),s.sort((c,h)=>c.order>h.order?1:c.order<h.order?-1:0);const a=s.length,o=aM(s,n);let l;for(let c=o+1;c<a;c++)if(s[c].visible){l=s[c];break}return n.visible&&(l===void 0?this._layerDom.appendChild(n.view):this._layerDom.insertBefore(n.view,l.view)),n}render(e){this._dirtyLayers.length=0,this._deferredGhostLayers=[],Ne(this.layers,r=>{r&&r.dirty&&r.visible&&(this._dirtyLayers.push(r),r.clear())}),this._ghostLayer.clear(),e.render({inactive:null,layer:this.defaultLayer});const i=this._deferredGhostLayers;if(i.length&&(i.sort((r,n)=>r-n),Ne(i,r=>{e.render({inactive:null,layer:this.defaultLayer},r)})),this._ghostLayer.context.restore(),Ne(this.layers,r=>{if(r){const n=r.context;n.beginPath(),n.moveTo(0,0),n.stroke()}}),Ne(this._dirtyLayers,r=>{r.context.restore(),r.dirty=!1}),this._hovering.size&&this._lastPointerMoveEvent){const{events:r,target:n,native:s}=this._lastPointerMoveEvent;Ne(r,a=>{this._dispatchGlobalMousemove(a,n,s)})}}paintId(e){const i=n1t(++this._colorId),r=At.fromHex(i).toCSS();return this._colorMap[r]=e,r}_removeObject(e){e._colorId!==void 0&&delete this._colorMap[e._colorId]}_adjustBoundingBox(e){const i=this._ghostLayer.margin;return new DOMRect(-i.left,-i.top,e.width+i.left+i.right,e.height+i.top+i.bottom)}getEvent(e,i=!0){const r=this.view.getBoundingClientRect(),n=e.clientX||0,s=e.clientY||0,a=this._calculatedWidth/this._realWidth,o=this._calculatedHeight/this._realHeight,l={x:n-r.left,y:s-r.top},c={x:(n-(i?r.left:0))*a,y:(s-(i?r.top:0))*o};return new I1t(e,l,c,this._adjustBoundingBox(r))}_getHitTarget(e,i,r){if(i.width===0||i.height===0||e.x<i.left||e.x>i.right||e.y<i.top||e.y>i.bottom||!r||!this._layerDom.contains(r))return;const n=this._ghostLayer.getImageData(e,i);if(n.data[0]===0&&n.data[1]===0&&n.data[2]===0)return!1;const s=At.fromRGB(n.data[0],n.data[1],n.data[2]).toCSS();return this._colorMap[s]}getObjectAtPoint(e){const i=this._ghostLayer.getImageArray(e);if(i[0]===0&&i[1]===0&&i[2]===0)return;const r=At.fromRGB(i[0],i[1],i[2]).toCSS();return this._colorMap[r]}_withEvents(e,i){const r=this._events[e];if(r!==void 0){r.dispatching=!0;try{i(r)}finally{r.dispatching=!1,r.cleanup&&(r.cleanup=!1,gj(r.callbacks,n=>!n.disposed),r.callbacks.length===0&&(r.disposer.dispose(),delete this._events[e]))}}}_dispatchEventAll(e,i){this.interactionsEnabled&&this._withEvents(e,r=>{Ne(r.callbacks,n=>{n.disposed||n.callback.call(n.context,i)})})}_dispatchEvent(e,i,r){if(!this.interactionsEnabled)return!1;let n=!1;return this._withEvents(e,s=>{Ne(s.callbacks,a=>{!a.disposed&&a.object===i&&(a.callback.call(a.context,r),n=!0)})}),n}_dispatchMousedown(e,i){const r=e.button;if(r!=0&&r!=2&&r!=1&&r!==void 0)return;const n=this.getEvent(e),s=this._getHitTarget(n.originalPoint,n.bbox,i);if(s){const a=n.id;let o=!1;YL(s,l=>{const c={id:a,value:l};return this._mousedown.push(c),!o&&this._dispatchEvent("pointerdown",l,n)&&(o=!0,this._dragging.some(f=>f.value===l&&f.id===a)||this._dragging.push(c)),!0})}}_dispatchGlobalMousemove(e,i,r){const n=this.getEvent(e),s=this._getHitTarget(n.originalPoint,n.bbox,i);n.native=r,s?(this._hovering.forEach(a=>{a.contains(s)||(this._hovering.delete(a),a.cursorOverStyle&&BL(document.body,"cursor",a._replacedCursorStyle),this._dispatchEvent("pointerout",a,n))}),n.native&&YL(s,a=>(this._hovering.has(a)||(this._hovering.add(a),a.cursorOverStyle&&(a._replacedCursorStyle=l_t(document.body,"cursor"),BL(document.body,"cursor",a.cursorOverStyle)),this._dispatchEvent("pointerover",a,n)),!0))):(this._hovering.forEach(a=>{a.cursorOverStyle&&BL(document.body,"cursor",a._replacedCursorStyle),this._dispatchEvent("pointerout",a,n)}),this._hovering.clear()),this._dispatchEventAll("globalpointermove",n)}removeHovering(e){this._hovering.delete(e),e.cursorOverStyle&&BL(document.body,"cursor",e._replacedCursorStyle)}_dispatchGlobalMouseup(e,i){const r=this.getEvent(e);r.native=i,this._dispatchEventAll("globalpointerup",r)}_dispatchDragMove(e){if(this._dragging.length!==0){const i=this.getEvent(e),r=i.id;this._dragging.forEach(n=>{n.id===r&&this._dispatchEvent("pointermove",n.value,i)})}}_dispatchDragEnd(e,i){const r=e.button;let n;if(r==0||r===void 0)n="click";else if(r==2)n="rightclick";else if(r==1)n="middleclick";else return;const s=this.getEvent(e),a=s.id;if(this._mousedown.length!==0){const o=this._getHitTarget(s.originalPoint,s.bbox,i);o&&this._mousedown.forEach(l=>{l.id===a&&l.value.contains(o)&&this._dispatchEvent(n,l.value,s)}),this._mousedown.length=0}this._dragging.length!==0&&(this._dragging.forEach(o=>{o.id===a&&this._dispatchEvent("pointerup",o.value,s)}),this._dragging.length=0)}_dispatchDoubleClick(e,i){const r=this.getEvent(e),n=this._getHitTarget(r.originalPoint,r.bbox,i);n&&YL(n,s=>!this._dispatchEvent("dblclick",s,r))}_dispatchWheel(e,i){const r=this.getEvent(e),n=this._getHitTarget(r.originalPoint,r.bbox,i);n&&YL(n,s=>!this._dispatchEvent("wheel",s,r))}_makeSharedEvent(e,i){if(this._listeners[e]===void 0){const r=i();this._listeners[e]=new pEe(()=>{delete this._listeners[e],r.dispose()})}return this._listeners[e].increment()}_onPointerEvent(e,i){let r=!1,n=null;function s(){n=null,r=!1}return new gl([new As(()=>{n!==null&&clearTimeout(n),s()}),Nn(this.view,yW(e),a=>{r=!0,n!==null&&clearTimeout(n),n=window.setTimeout(s,0)}),s1t(window,e,(a,o)=>{n!==null&&(clearTimeout(n),n=null),i(a,o,r),r=!1})])}_initEvent(e){switch(e){case"globalpointermove":case"pointerover":case"pointerout":return this._makeSharedEvent("pointermove",()=>{const i=(r,n,s)=>{this._lastPointerMoveEvent={events:r,target:n,native:s},Ne(r,a=>{this._dispatchGlobalMousemove(a,n,s)})};return new gl([this._onPointerEvent("pointerdown",i),this._onPointerEvent("pointermove",i)])});case"globalpointerup":return this._makeSharedEvent("pointerup",()=>{const i=this._onPointerEvent("pointerup",(n,s,a)=>{Ne(n,o=>{this._dispatchGlobalMouseup(o,a)}),this._lastPointerMoveEvent={events:n,target:s,native:a}}),r=this._onPointerEvent("pointercancel",(n,s,a)=>{Ne(n,o=>{this._dispatchGlobalMouseup(o,a)}),this._lastPointerMoveEvent={events:n,target:s,native:a}});return new As(()=>{i.dispose(),r.dispose()})});case"click":case"rightclick":case"middleclick":case"pointerdown":case"pointermove":case"pointerup":return this._makeSharedEvent("pointerdown",()=>{const i=this._onPointerEvent("pointerdown",(a,o)=>{Ne(a,l=>{this._dispatchMousedown(l,o)})}),r=this._onPointerEvent("pointermove",a=>{Ne(a,o=>{this._dispatchDragMove(o)})}),n=this._onPointerEvent("pointerup",(a,o)=>{Ne(a,l=>{this._dispatchDragEnd(l,o)})}),s=this._onPointerEvent("pointercancel",(a,o)=>{Ne(a,l=>{this._dispatchDragEnd(l,o)})});return new As(()=>{i.dispose(),r.dispose(),n.dispose(),s.dispose()})});case"dblclick":return this._makeSharedEvent("dblclick",()=>this._onPointerEvent("dblclick",(i,r)=>{Ne(i,n=>{this._dispatchDoubleClick(n,r)})}));case"wheel":return this._makeSharedEvent("wheel",()=>Nn(this.view,yW("wheel"),i=>{this._dispatchWheel(i,mEe(i))},{passive:!1}))}}_addEvent(e,i,r,n){let s=this._events[i];s===void 0&&(s=this._events[i]={disposer:this._initEvent(i),callbacks:[],dispatching:!1,cleanup:!1});const a={object:e,context:n,callback:r,disposed:!1};return s.callbacks.push(a),new As(()=>{a.disposed=!0,s.dispatching?s.cleanup=!0:(Fo(s.callbacks,a),s.callbacks.length===0&&(s.disposer.dispose(),delete this._events[i]))})}getCanvas(e,i){this.render(e),i||(i={});let r=this.resolution,n=Math.floor(this._calculatedWidth*this.resolution),s=Math.floor(this._calculatedHeight*this.resolution);if(i.minWidth&&i.minWidth>n){let y=i.minWidth/n;y>r&&(r=y*this.resolution)}if(i.minHeight&&i.minHeight>s){let y=i.minHeight/s;y>r&&(r=y*this.resolution)}if(i.maxWidth&&i.maxWidth<n){let y=i.maxWidth/n;y<r&&(r=y*this.resolution)}if(i.maxHeight&&i.maxHeight>s){let y=i.maxHeight/s;y<r&&(r=y*this.resolution)}i.maintainPixelRatio&&(r/=this.resolution);const a=[];let o=!1;const l=document.createElement("canvas");r!=this.resolution&&(o=!0,n=n*r/this.resolution,s=s*r/this.resolution),l.width=n,l.height=s,l.style.position="fixed",l.style.top="-10000px",this.view.appendChild(l),a.push(l);const c=l.getContext("2d");let h=0,f=0,g=!1;return Ne(this.layers,y=>{if(y&&y.visible&&(y.tainted||o)){g=!0,y.exportableView=y.view,y.exportableContext=y.context,y.view=document.createElement("canvas"),y.view.style.position="fixed",y.view.style.top="-10000px",this.view.appendChild(y.view),a.push(y.view);let b=0,_=0;y.margin&&(b+=y.margin.left||0+y.margin.right||0,_+=y.margin.top||0+y.margin.bottom||0),y.view.width=n+b,y.view.height=s+_,y.context=y.view.getContext("2d"),y.dirty=!0,y.scale=r}}),g&&(this._omitTainted=!0,this.render(e),this._omitTainted=!1),Ne(this.layers,y=>{if(y&&y.visible){let b=0,_=0;y.margin&&(b=-(y.margin.left||0)*this.resolution,_=-(y.margin.top||0)*this.resolution),c.drawImage(y.view,b,_),y.exportableView&&(y.view=y.exportableView,y.exportableView=void 0),y.exportableContext&&(y.context=y.exportableContext,y.exportableContext=void 0),h<y.view.clientWidth&&(h=y.view.clientWidth),f<y.view.clientHeight&&(f=y.view.clientHeight),y.scale=void 0}}),l.style.width=h+"px",l.style.height=f+"px",Ne(a,y=>{y.style.position="",y.style.top="",this.view.removeChild(y)}),l}}class A1t{constructor(){Object.defineProperty(this,"view",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"context",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"margin",{enumerable:!0,configurable:!0,writable:!0,value:{left:0,right:0,top:0,bottom:0}}),Object.defineProperty(this,"_resolution",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"_width",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_height",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"imageArray",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.view=document.createElement("canvas"),this.context=this.view.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.context.imageSmoothingEnabled=!1,this.view.style.position="absolute",this.view.style.top="0px",this.view.style.left="0px"}resize(e,i,r,n,s){this._resolution=s,e+=this.margin.left+this.margin.right,i+=this.margin.top+this.margin.bottom,r+=this.margin.left+this.margin.right,n+=this.margin.top+this.margin.bottom,this.view.style.left=-this.margin.left+"px",this.view.style.top=-this.margin.top+"px",this._width=Math.floor(e*s),this._height=Math.floor(i*s),this.view.width=this._width,this.view.style.width=r+"px",this.view.height=this._height,this.view.style.height=n+"px"}getImageData(e,i){return this.context.getImageData(Math.round((e.x-i.left)/i.width*this._width),Math.round((e.y-i.top)/i.height*this._height),1,1)}getImageArray(e){this.imageArray||(this.imageArray=this.context.getImageData(0,0,this._width,this._height).data);const i=this.imageArray,r=Math.round(e.x*this._resolution),s=(Math.round(e.y*this._resolution)*this._width+r)*4;return[i[s],i[s+1],i[s+2],i[s+3]]}setMargin(e){this.margin.left=0,this.margin.right=0,this.margin.top=0,this.margin.bottom=0,Ne(e,i=>{i.margin&&(this.margin.left=Math.max(this.margin.left,i.margin.left),this.margin.right=Math.max(this.margin.right,i.margin.right),this.margin.top=Math.max(this.margin.top,i.margin.top),this.margin.bottom=Math.max(this.margin.bottom,i.margin.bottom))})}clear(){this.context.save(),this.context.fillStyle="#000",this.context.fillRect(0,0,this._width,this._height)}}class P1t{constructor(e,i){Object.defineProperty(this,"view",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"context",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tainted",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"margin",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"order",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"visible",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"scale",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"dirty",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"exportableView",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"exportableContext",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_width",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_height",{enumerable:!0,configurable:!0,writable:!0,value:0}),this.view=e,this.context=i}resize(e,i,r,n,s){this.width!=null&&(e=this.width,r=this.width),this.height!=null&&(i=this.height,n=this.height),this.margin?(e+=this.margin.left+this.margin.right,i+=this.margin.top+this.margin.bottom,r+=this.margin.left+this.margin.right,n+=this.margin.top+this.margin.bottom,this.view.style.left=-this.margin.left+"px",this.view.style.top=-this.margin.top+"px"):(this.view.style.left="0px",this.view.style.top="0px"),this._width=Math.floor(e*s),this._height=Math.floor(i*s),this.view.width=this._width,this.view.style.width=r+"px",this.view.height=this._height,this.view.style.height=n+"px"}clear(){this.context.save(),this.context.clearRect(0,0,this._width,this._height)}}function Ude(t,e){t==null?requestAnimationFrame(e):setTimeout(()=>{requestAnimationFrame(e)},1e3/t)}class oK{constructor(e,i={},r){if(Object.defineProperty(this,"dom",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_inner",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_isDirty",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_isDirtyParents",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_isDirtyAnimation",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_dirty",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_dirtyParents",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_dirtyBounds",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_dirtyPositions",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_ticker",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_tickers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_updateTick",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:new tk}),Object.defineProperty(this,"animationTime",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_animations",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_renderer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_rootContainer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tooltipContainer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tooltipContainerSettings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tooltip",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"language",{enumerable:!0,configurable:!0,writable:!0,value:X_t.new(this,{})}),Object.defineProperty(this,"locale",{enumerable:!0,configurable:!0,writable:!0,value:TEe}),Object.defineProperty(this,"utc",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"timezone",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fps",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"numberFormatter",{enumerable:!0,configurable:!0,writable:!0,value:q_t.new(this,{})}),Object.defineProperty(this,"dateFormatter",{enumerable:!0,configurable:!0,writable:!0,value:Y_t.new(this,{})}),Object.defineProperty(this,"durationFormatter",{enumerable:!0,configurable:!0,writable:!0,value:Z_t.new(this,{})}),Object.defineProperty(this,"tabindex",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_tabindexes",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_a11yD",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_focusElementDirty",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_focusElementContainer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_focusedSprite",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_isShift",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_keyboardDragPoint",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tooltipElementContainer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_readerAlertElement",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_skipNextGroupJump",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"_logo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tooltipDiv",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"nonce",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"interfaceColors",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"verticalLayout",{enumerable:!0,configurable:!0,writable:!0,value:yT.new(this,{})}),Object.defineProperty(this,"horizontalLayout",{enumerable:!0,configurable:!0,writable:!0,value:gT.new(this,{})}),Object.defineProperty(this,"gridLayout",{enumerable:!0,configurable:!0,writable:!0,value:s_.new(this,{})}),Object.defineProperty(this,"_paused",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"autoResize",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"_fontHash",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"_isDisposed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_disposers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_resizeSensorDisposer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tooltips",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_htmlElementContainer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_htmlEnabledContainers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"entitiesById",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_systemTooltip",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),!r)throw new Error("You cannot use `new Class()`, instead use `Class.new()`");this._settings=i,i.accessible==!1&&(this._a11yD=!0),i.useSafeResolution==null&&(i.useSafeResolution=!0);let n;i.useSafeResolution&&(n=h_t()),this._renderer=new M1t(n);let s;if(e instanceof HTMLElement?s=e:s=document.getElementById(e),Ne(Ed.rootElements,l=>{if(l.dom===s)if(Ed.autoDispose)l.dispose();else throw new Error("You cannot have multiple Roots on the same DOM node")}),this.interfaceColors=T5.new(this,{}),s===null)throw new Error("Could not find HTML element with id `"+e+"`");this.dom=s;let a=document.createElement("div");a.style.position="relative",a.style.width="100%",a.style.height="100%",s.appendChild(a);const o=i.tooltipContainerBounds;o&&(this._tooltipContainerSettings=o),this._inner=a,this._updateComputedStyles(),Ed.rootElements.push(this)}static new(e,i){const r=new oK(e,i,!0);return r._init(),r}moveDOM(e){let i;if(e instanceof HTMLElement?i=e:i=document.getElementById(e),i){for(;this.dom.childNodes.length>0;)i.appendChild(this.dom.childNodes[0]);this.dom=i,this._initResizeSensor(),this.resize()}}_handleLogo(){if(this._logo){const e=this.dom.offsetWidth,i=this.dom.offsetHeight;e<=150||i<=60?this._logo.hide():this._logo.show()}}_showBranding(){if(!this._logo){const e=this.tooltipContainer.children.push(_r.new(this,{interactive:!0,interactiveChildren:!1,position:"absolute",setStateOnChildren:!0,paddingTop:9,paddingRight:9,paddingBottom:9,paddingLeft:9,scale:.6,y:Ks(100),centerY:bi,tooltipY:10,tooltipText:"Created using amCharts 5",tooltipX:bi,cursorOverStyle:"pointer",background:Lv.new(this,{fill:fu(4671320),fillOpacity:0,tooltipY:5})}));e.set("tooltip",this.systemTooltip),e.events.on("click",()=>{window.open("https://www.amcharts.com/","_blank")}),e.states.create("hover",{}),e.children.push(Ec.new(this,{stroke:fu(13421772),strokeWidth:3,svgPath:"M5 25 L13 25h13.6c3.4 0 6 0 10.3-4.3s5.2-12 8.6-12c3.4 0 4.3 8.6 7.7 8.6M83.4 25H79.8c-3.4 0-6 0-10.3-4.3s-5.2-12-8.6-12-4.3 8.6-7.7 8.6"})).states.create("hover",{stroke:fu(3976191)}),e.children.push(Ec.new(this,{stroke:fu(8947848),strokeWidth:3,svgPath:"M83.4 25h-31C37 25 39.5 4.4 28.4 4.4S18.9 24.2 4.3 25H0"})).states.create("hover",{stroke:fu(4671320)}),this._logo=e,this._handleLogo()}}_getRealSize(){return this.dom.getBoundingClientRect()}_getCalculatedSize(e){return this._settings.calculateSize?this._settings.calculateSize(e):{width:e.width,height:e.height}}_init(){const e=this._settings;e.accessible!==!1&&(e.focusable&&(this._inner.setAttribute("focusable","true"),this._inner.setAttribute("tabindex",this.tabindex+"")),e.ariaLabel&&this._inner.setAttribute("aria-label",e.ariaLabel),e.role&&this._inner.setAttribute("role",e.role));const i=this._renderer,r=this._getRealSize(),n=this._getCalculatedSize(r),s=Math.floor(n.width),a=Math.floor(n.height),o=Math.floor(r.width),l=Math.floor(r.height),c=_r.new(this,{visible:!0,width:s,height:a});this._rootContainer=c,this._rootContainer._defaultThemes.push(J_t.new(this));const h=c.children.push(_r.new(this,{visible:!0,width:bi,height:bi}));this.container=h,i.resize(o,l,s,a),this._inner.appendChild(i.view),this._initResizeSensor();const f=document.createElement("div");if(this._htmlElementContainer=f,f.className="am5-html-container",f.style.position="absolute",f.style.pointerEvents="none",this._tooltipContainerSettings||(f.style.overflow="hidden"),this._inner.appendChild(f),this._a11yD!==!0){const g=document.createElement("div");g.className="am5-reader-container",g.setAttribute("role","alert"),g.style.position="absolute",g.style.width="1px",g.style.height="1px",g.style.overflow="hidden",g.style.clip="rect(1px, 1px, 1px, 1px)",this._readerAlertElement=g,this._inner.appendChild(this._readerAlertElement);const y=document.createElement("div");y.className="am5-focus-container",y.style.position="absolute",y.style.pointerEvents="none",y.style.top="0px",y.style.left="0px",y.style.overflow="hidden",y.style.width=s+"px",y.style.height=a+"px",y.setAttribute("role","graphics-document"),pS(y,!1),this._focusElementContainer=y,this._inner.appendChild(this._focusElementContainer);const b=document.createElement("div");this._tooltipElementContainer=b,b.className="am5-tooltip-container",this._inner.appendChild(b),rw("keyboardevents")&&(this._disposers.push(Nn(window,"keydown",_=>{const S=UL(_);S=="Shift"?this._isShift=!0:S=="Tab"&&(this._isShift=_.shiftKey)})),this._disposers.push(Nn(window,"keyup",_=>{UL(_)=="Shift"&&(this._isShift=!1)})),this._disposers.push(Nn(y,"click",()=>{const _=this._focusedSprite;if(_){const S=_.get("clickAnnounceText","");S!==""&&this.readerAlert(S);const $=i.getEvent(new MouseEvent("click"));_.events.dispatch("click",{type:"click",originalEvent:$.event,point:$.point,simulated:!0,target:_})}})),this._disposers.push(Nn(y,"keydown",_=>{const S=this._focusedSprite;if(S){_.key=="Escape"&&(a_t(),this._focusedSprite=void 0);let $=0,C=0;const I=UL(_);switch(I){case"Enter":case" ":const P=S.get("clickAnnounceText","");if(P!==""&&this.readerAlert(P),I==" "&&S.get("role")!="checkbox")return;_.preventDefault();const O=i.getEvent(new MouseEvent("mouse"));S.events.dispatch("click",{type:"click",originalEvent:O.event,point:O.point,simulated:!0,target:S});return;case"ArrowLeft":$=-6;break;case"ArrowRight":$=6;break;case"ArrowUp":C=-6;break;case"ArrowDown":C=6;break;default:return}if($!=0||C!=0){if(_.preventDefault(),!S.isDragging()){this._keyboardDragPoint={x:0,y:0};const N=i.getEvent(new MouseEvent("mousedown",{clientX:0,clientY:0}));N.point={x:0,y:0},S.events.isEnabled("pointerdown")&&S.events.dispatch("pointerdown",{type:"pointerdown",originalEvent:N.event,point:N.point,simulated:!0,target:S})}const P=this._keyboardDragPoint;P.x+=$,P.y+=C;const O=i.getEvent(new MouseEvent("mousemove",{clientX:P.x,clientY:P.y}),!1);S.events.isEnabled("globalpointermove")&&S.events.dispatch("globalpointermove",{type:"globalpointermove",originalEvent:O.event,point:O.point,simulated:!0,target:S})}}})),this._disposers.push(Nn(y,"keyup",_=>{if(this._focusedSprite){const S=this._focusedSprite,$=UL(_);switch($){case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"ArrowDown":if(S.isDragging()){const I=this._keyboardDragPoint,P=i.getEvent(new MouseEvent("mouseup",{clientX:I.x,clientY:I.y}));S.events.isEnabled("globalpointerup")&&S.events.dispatch("globalpointerup",{type:"globalpointerup",originalEvent:P.event,point:P.point,simulated:!0,target:S}),this._keyboardDragPoint=void 0;return}else if(S.get("focusableGroup")){const I=S.get("focusableGroup"),P=this._tabindexes.filter(R=>!!(R.get("focusableGroup")==I&&R.getPrivate("focusable")!==!1&&R.isVisibleDeep()));let O=P.indexOf(S);const N=P.length-1;O+=$=="ArrowRight"||$=="ArrowDown"?1:-1,O<0?O=N:O>N&&(O=0),o_t(P[O].getPrivate("focusElement").dom)}break;case"Tab":const C=S.get("focusableGroup");if(C&&this._isShift){this._skipNextGroupJump||(this._focusNext(S.getPrivate("focusElement").dom,-1,C),this._skipNextGroupJump=!0);return}break}}})))}this._startTicker(),this.setThemes([]),this._addTooltip(),this._hasLicense()||this._showBranding()}get systemTooltip(){if(!this._systemTooltip){const e=hM.new(this,{themeTags:["system"]});this._systemTooltip=e}return this._systemTooltip}_initResizeSensor(){this._resizeSensorDisposer&&this._resizeSensorDisposer.dispose(),this._resizeSensorDisposer=new G_t(this.dom,()=>{this.autoResize&&this.resize()}),this._disposers.push(this._resizeSensorDisposer)}resize(){const e=this._getRealSize(),i=this._getCalculatedSize(e),r=Math.floor(i.width),n=Math.floor(i.height);if(r>0&&n>0){const s=Math.floor(e.width),a=Math.floor(e.height),o=this._htmlElementContainer;if(o.style.width=r+"px",o.style.height=n+"px",this._a11yD!==!0){const c=this._focusElementContainer;c.style.width=r+"px",c.style.height=n+"px"}this._renderer.resize(s,a,r,n);const l=this._rootContainer;l.setPrivate("width",r),l.setPrivate("height",n),this._render(),this._handleLogo()}}_render(){this._renderer.render(this._rootContainer._display),this._focusElementDirty&&(this._updateCurrentFocus(),this._focusElementDirty=!1)}_runTickers(e){Ne(this._tickers,i=>{i(e)})}_runAnimations(e){let i=0;return gj(this._animations,r=>{const n=r._runAnimation(e);return n===nw.Stopped?!1:(n===nw.Playing&&++i,!0)}),this._isDirtyAnimation=!1,i===0}_runDirties(){let e={};for(;this._isDirtyParents;)this._isDirtyParents=!1,Ia(this._dirtyParents).forEach(a=>{const o=this._dirtyParents[a];delete this._dirtyParents[a],o.isDisposed()||(e[o.uid]=o,o._prepareChildren())});Ia(e).forEach(a=>{e[a]._updateChildren()});const i=[];Ia(this._dirty).forEach(a=>{const o=this._dirty[a];o.isDisposed()?delete this._dirty[o.uid]:(i.push(o),o._beforeChanged())}),i.forEach(a=>{a._changed(),delete this._dirty[a.uid],a._clearDirty()}),this._isDirty=!1;const r={},n=[];Ia(this._dirtyBounds).forEach(a=>{const o=this._dirtyBounds[a];delete this._dirtyBounds[a],o.isDisposed()||(r[o.uid]=o.depth(),n.push(o))}),this._positionHTMLElements(),n.sort((a,o)=>sw(r[o.uid],r[a.uid])),n.forEach(a=>{a._updateBounds()});const s=this._dirtyPositions;Ia(s).forEach(a=>{const o=s[a];delete s[a],o.isDisposed()||o._updatePosition()}),i.forEach(a=>{a._afterChanged()}),Ia(e).forEach(a=>{e[a]._childrenPrep=!1,e[a]._childrenUpdt=!1})}_renderFrame(e){if(this._updateTick){this.events.isEnabled("framestarted")&&this.events.dispatch("framestarted",{type:"framestarted",target:this,timestamp:e}),this._checkComputedStyles(),this._runTickers(e);const i=this._runAnimations(e);return this._runDirties(),this._render(),this._renderer.resetImageArray(),this._positionHTMLElements(),this.events.isEnabled("frameended")&&this.events.dispatch("frameended",{type:"frameended",target:this,timestamp:e}),this._tickers.length===0&&i&&!this._isDirtyAnimation&&!this._isDirty}else return!0}_runTicker(e,i){this.isDisposed()||(this.animationTime=e,this._renderFrame(e)?(this._ticker=null,this.animationTime=null):this._paused||(i?this._ticker:Ude(this.fps,this._ticker)))}_runTickerNow(e=1e4){if(!this.isDisposed()){const i=performance.now()+e;for(;;){const r=performance.now();if(r>=i){this.animationTime=null;break}if(this.animationTime=r,this._renderFrame(r)){this.animationTime=null;break}}}}_startTicker(){this._ticker===null&&(this.animationTime=null,this._ticker=e=>{this._runTicker(e)},Ude(this.fps,this._ticker))}get updateTick(){return this._updateTick}set updateTick(e){this._updateTick=e,e&&this._startTicker()}_addDirtyEntity(e){this._isDirty=!0,this._dirty[e.uid]===void 0&&(this._dirty[e.uid]=e),this._startTicker()}_addDirtyParent(e){this._isDirty=!0,this._isDirtyParents=!0,this._dirtyParents[e.uid]===void 0&&(this._dirtyParents[e.uid]=e),this._startTicker()}_addDirtyBounds(e){this._isDirty=!0,this._dirtyBounds[e.uid]===void 0&&(this._dirtyBounds[e.uid]=e),this._startTicker()}_addDirtyPosition(e){this._isDirty=!0,this._dirtyPositions[e.uid]===void 0&&(this._dirtyPositions[e.uid]=e),this._startTicker()}_addAnimation(e){this._isDirtyAnimation=!0,this._animations.indexOf(e)===-1&&this._animations.push(e),this._startTicker()}_markDirty(){this._isDirty=!0}_markDirtyRedraw(){this.events.once("frameended",()=>{this._isDirty=!0,this._startTicker()})}eachFrame(e){return this._tickers.push(e),this._startTicker(),new As(()=>{Fo(this._tickers,e)})}markDirtyGlobal(e){e||(e=this.container),e.walkChildren(i=>{i instanceof _r&&this.markDirtyGlobal(i),i.markDirty(),i.markDirtyBounds()})}width(){return Math.floor(this._getCalculatedSize(this._getRealSize()).width)}height(){return Math.floor(this._getCalculatedSize(this._getRealSize()).height)}dispose(){this._isDisposed||(this._isDisposed=!0,this._rootContainer.dispose(),this._renderer.dispose(),this.horizontalLayout.dispose(),this.verticalLayout.dispose(),this.interfaceColors.dispose(),Ne(this._disposers,e=>{e.dispose()}),this._inner&&s_t(this._inner),Im(Ed.rootElements,this))}isDisposed(){return this._isDisposed}readerAlert(e){if(this._a11yD!==!0){const i=this._readerAlertElement;e=Pde(e),i.innerHTML==e&&(i.innerHTML=""),i.innerHTML=e}}setThemes(e){this._rootContainer.set("themes",e);const i=this.tooltipContainer;i&&i._applyThemes();const r=this.interfaceColors;r&&r._applyThemes()}_addTooltip(){if(!this.tooltipContainer){const e=this._tooltipContainerSettings,i=this._rootContainer.children.push(_r.new(this,{position:"absolute",isMeasured:!1,width:bi,height:bi,layer:e?35:30,layerMargin:e||void 0}));this.tooltipContainer=i;const r=hM.new(this,{});this.container.set("tooltip",r),r.hide(0),this._tooltip=r}}_registerTabindexOrder(e){this._a11yD!=!0&&(e.get("focusable")?oM(this._tabindexes,e):Im(this._tabindexes,e),this._invalidateTabindexes())}_unregisterTabindexOrder(e){this._a11yD!=!0&&(Im(this._tabindexes,e),this._invalidateTabindexes())}_invalidateTabindexes(){if(this._a11yD==!0)return;this._tabindexes.sort((i,r)=>{const n=i.get("tabindexOrder",0),s=r.get("tabindexOrder",0);return n==s?0:n>s?1:-1});const e=[];Ne(this._tabindexes,(i,r)=>{i.getPrivate("focusElement")?this._moveFocusElement(r,i):this._makeFocusElement(r,i);const n=i.get("focusableGroup");n&&i.getPrivate("focusable")!==!1&&(e.indexOf(n)!==-1?i.getPrivate("focusElement").dom.setAttribute("tabindex","-1"):e.push(n))})}_updateCurrentFocus(){this._a11yD!=!0&&this._focusedSprite&&(this._decorateFocusElement(this._focusedSprite),this._positionFocusElement(this._focusedSprite))}_decorateFocusElement(e,i){if(this._a11yD==!0||(i||(i=e.getPrivate("focusElement").dom),!i))return;const r=e.get("role");r?i.setAttribute("role",r):i.removeAttribute("role");const n=e.get("ariaLabel");if(n){const _=dM(e,n);i.setAttribute("aria-label",_)}else i.removeAttribute("aria-label");const s=e.get("ariaLive");s?i.setAttribute("aria-live",s):i.removeAttribute("aria-live");const a=e.get("ariaChecked");a!=null&&r&&["checkbox","option","radio","menuitemcheckbox","menuitemradio","treeitem"].indexOf(r)!==-1?i.setAttribute("aria-checked",a?"true":"false"):i.removeAttribute("aria-checked");const o=e.get("ariaCurrent");o!=null?i.setAttribute("aria-current",o):i.removeAttribute("aria-current");const l=e.get("ariaSelected");l!=null&&r&&["gridcell","option","row","tab","columnheader","rowheader","treeitem"].indexOf(r)!==-1?i.setAttribute("aria-selected",l?"true":"false"):i.removeAttribute("aria-selected"),e.get("ariaHidden")?i.setAttribute("aria-hidden","true"):i.removeAttribute("aria-hidden");const c=e.get("ariaOrientation");c?i.setAttribute("aria-orientation",c):i.removeAttribute("aria-orientation");const h=e.get("ariaValueNow");h?i.setAttribute("aria-valuenow",h):i.removeAttribute("aria-valuenow");const f=e.get("ariaValueMin");f?i.setAttribute("aria-valuemin",f):i.removeAttribute("aria-valuemin");const g=e.get("ariaValueMax");g?i.setAttribute("aria-valuemax",g):i.removeAttribute("aria-valuemax");const y=e.get("ariaValueText");y?i.setAttribute("aria-valuetext",y):i.removeAttribute("aria-valuetext");const b=e.get("ariaControls");b?i.setAttribute("aria-controls",b):i.removeAttribute("aria-controls"),e.get("visible")&&e.get("opacity")!==0&&e.get("role")!="tooltip"&&!e.isHidden()&&e.getPrivate("focusable")!==!1&&(e.height()||e.width())?(i.getAttribute("tabindex")!="-1"&&i.setAttribute("tabindex",""+this.tabindex),i.removeAttribute("aria-hidden")):(i.removeAttribute("tabindex"),i.setAttribute("aria-hidden","true"))}_makeFocusElement(e,i){if(i.getPrivate("focusElement")||this._a11yD==!0)return;const r=document.createElement("div");i.get("role")!="tooltip"&&(r.tabIndex=this.tabindex),r.style.position="absolute",pS(r,!1);const n=[];i.setPrivate("focusElement",{dom:r,disposers:n}),this._decorateFocusElement(i),n.push(Nn(r,"focus",s=>{this._handleFocus(s)})),n.push(Nn(r,"blur",s=>{this._handleBlur(s)})),this._moveFocusElement(e,i)}_removeFocusElement(e){if(this._a11yD==!0)return;Im(this._tabindexes,e);const i=e.getPrivate("focusElement");i&&(this._focusElementContainer.removeChild(i.dom),Ne(i.disposers,n=>{n.dispose()}))}_hideFocusElement(e){if(this._a11yD==!0)return;const i=e.getPrivate("focusElement");i.dom.style.display="none"}_moveFocusElement(e,i){if(this._a11yD==!0)return;const r=this._focusElementContainer,n=i.getPrivate("focusElement").dom;if(n===this._focusElementContainer.children[e])return;const s=this._focusElementContainer.children[e+1];s?r.insertBefore(n,s):r.append(n)}_positionFocusElement(e){if(this._a11yD==!0||e==null)return;this._focusElementContainer.scrollTop=0;const i=e.globalBounds();let r=i.right==i.left?e.width():i.right-i.left,n=i.top==i.bottom?e.height():i.bottom-i.top;const s=this._settings.focusPadding!==void 0?this._settings.focusPadding:2;let a=i.left-s,o=i.top-s;r<0&&(a+=r,r=Math.abs(r)),n<0&&(o+=n,n=Math.abs(n));const l=e.getPrivate("focusElement").dom;l.style.top=o+"px",l.style.left=a+"px",l.style.width=r+s*2+"px",l.style.height=n+s*2+"px"}_getSpriteByFocusElement(e){let i;return rK(this._tabindexes,(r,n)=>r.getPrivate("focusElement").dom===e?(i=r,!1):!0),i}_handleFocus(e){if(this._a11yD==!0)return;const i=this._getSpriteByFocusElement(e.target);if(i){if(!i.isVisibleDeep()){this._focusNext(e.target,this._isShift?-1:1);return}this._positionFocusElement(i),this._focusedSprite=i,i.events.isEnabled("focus")&&i.events.dispatch("focus",{type:"focus",originalEvent:e,target:i}),i.getPrivate("focusElement").dom.tabIndex==-1&&(this._skipNextGroupJump=!1)}}_focusNext(e,i,r){if(this._a11yD==!0)return;const n=Array.from(document.querySelectorAll(["a[href]","area[href]","button:not([disabled])","details","input:not([disabled])","iframe:not([disabled])","select:not([disabled])","textarea:not([disabled])",'[contentEditable=""]','[contentEditable="true"]','[contentEditable="TRUE"]','[tabindex]:not([tabindex^="-"])'].join(",")));let s=n.indexOf(e)+i;s<0?s=n.length-1:s>=n.length&&(s=0);const a=n[s];if(r&&i==-1){const o=this._getSpriteByFocusElement(a);if(o&&o.get("focusableGroup")==r){this._focusNext(a,i);return}}a.focus()}_handleBlur(e){if(this._a11yD==!0)return;const i=this._focusedSprite;i&&!i.isDisposed()&&i.events.isEnabled("blur")&&i.events.dispatch("blur",{type:"blur",originalEvent:e,target:i}),this._focusedSprite=void 0}updateTooltip(e){if(this._a11yD==!0)return;const i=Pde(e._getText());let r=e.getPrivate("tooltipElement");e.get("role")=="tooltip"&&i!=""?(r||(r=this._makeTooltipElement(e)),r.innerHTML!=i&&(r.innerHTML=i),r.setAttribute("aria-hidden",e.isVisibleDeep()?"false":"true")):r&&(r.remove(),e.removePrivate("tooltipElement"))}_makeTooltipElement(e){const i=this._tooltipElementContainer,r=document.createElement("div");return r.style.position="absolute",r.style.width="1px",r.style.height="1px",r.style.overflow="hidden",r.style.clip="rect(1px, 1px, 1px, 1px)",pS(r,!1),this._decorateFocusElement(e,r),i.append(r),e.setPrivate("tooltipElement",r),r}_removeTooltipElement(e){if(this._a11yD==!0)return;const i=e.getPrivate("tooltipElement");if(i){const r=i.parentElement;r&&r.removeChild(i)}}_invalidateAccessibility(e){if(this._a11yD==!0)return;this._focusElementDirty=!0;const i=e.getPrivate("focusElement");e.get("focusable")?i&&(this._decorateFocusElement(e),this._positionFocusElement(e)):i&&this._removeFocusElement(e)}focused(e){return this._focusedSprite===e}documentPointToRoot(e){const i=this._getRealSize(),r=this._getCalculatedSize(i),n=r.width/i.width,s=r.height/i.height;return{x:(e.x-i.left)*n,y:(e.y-i.top)*s}}rootPointToDocument(e){const i=this._getRealSize(),r=this._getCalculatedSize(i),n=r.width/i.width,s=r.height/i.height;return{x:e.x/n+i.left,y:e.y/s+i.top}}addDisposer(e){return this._disposers.push(e),e}_updateComputedStyles(){const e=window.getComputedStyle(this.dom);let i="";Lr(e,(n,s)=>{n_(n)&&n.match(/^font/)&&(i+=s)});const r=i!=this._fontHash;return r&&(this._fontHash=i),r}_checkComputedStyles(){this._updateComputedStyles()&&this._invalidateLabelBounds(this.container)}_invalidateLabelBounds(e){e instanceof _r?e.children.each(i=>{this._invalidateLabelBounds(i)}):e instanceof a_&&e.markDirtyBounds()}_hasLicense(){for(let e=0;e<Ed.licenses.length;e++)if(Ed.licenses[e].match(/^AM5C.{5,}/i))return!0;return!1}_licenseApplied(){this._logo&&this._logo.set("forceHidden",!0)}get debugGhostView(){return this._renderer.debugGhostView}set debugGhostView(e){this._renderer.debugGhostView=e}set tapToActivate(e){this._renderer.tapToActivate=e}get tapToActivate(){return this._renderer.tapToActivate}set tapToActivateTimeout(e){this._renderer.tapToActivateTimeout=e}get tapToActivateTimeout(){return this._renderer.tapToActivateTimeout}_makeHTMLElement(e){const i=this._htmlElementContainer,r=document.createElement("div");e.setPrivate("htmlElement",r);let n=!1,s;e._walkParents(o=>{if(o.get("verticalScrollbar"))return n=!0,s=o,!1});let a;return n&&(a=document.createElement("div"),e.setPrivate("htmlElementWrapper",a),e.setPrivate("wrapperContainer",s),a.style.position="absolute",a.style.overflow="hidden",a.style.boxSizing="border-box",a.style.top="0px",a.style.left="0px",a.style.width="100%",a.style.height="100%",s.events.on("boundschanged",()=>{this._positionHTMLElement(e)})),r.style.position="absolute",r.style.overflow="auto",r.style.boxSizing="border-box",pS(r,e.get("interactive",!1)),e.events.isEnabled("click")&&(pS(r,!0),this._disposers.push(Nn(r,"click",o=>{const l=this._renderer.getEvent(o);e.events.dispatch("click",{type:"click",originalEvent:l.event,point:l.point,simulated:!1,target:e})}))),this._positionHTMLElement(e),n?(a.append(r),i.append(a)):i.append(r),oM(this._htmlEnabledContainers,e),r}_positionHTMLElements(){Ne(this._htmlEnabledContainers,e=>{this._positionHTMLElement(e)})}_positionHTMLElement(e){const i=e.getPrivate("htmlElementWrapper");if(i){const n=e.getPrivate("wrapperContainer");if(n){const s=n.globalBounds();i.style.clipPath="rect("+s.top+"px "+s.right+"px "+s.bottom+"px "+s.left+"px)"}}const r=e.getPrivate("htmlElement");if(r){Ne(["paddingTop","paddingRight","paddingBottom","paddingLeft","minWidth","minHeight","maxWidth","maxHeight"],I=>{const P=e.get(I);P?r.style[I]=P+"px":r.style[I]=""}),Ne(["fontFamily","fontSize","fontStyle","fontWeight","fontStyle","fontVariant","textDecoration"],I=>{const P=e.get(I);P?I=="fontSize"&&!n_(P)?r.style[I]=P+"px":r.style[I]=P+"":r.style[I]=""});const a=e.compositeScale()||1,o=e.compositeRotation()||0;r.style.transform="",r.style.transformOrigin="";const l=e.compositeOpacity();setTimeout(()=>{r.style.opacity=l+""},10);const c=e.isVisibleDeep();c&&(r.style.display="block");let h={x:e.x()+e.get("dx",0),y:e.y()+e.get("dy",0)};e.parent&&(h=e.parent.toGlobal(h)),r.style.top=h.y+"px",r.style.left=h.x+"px";const f=e.get("width"),g=e.get("height");let y=0,b=0;if(f&&(y=e.width()),g&&(b=e.height()),!f||!g){r.style.position="fixed",r.style.width="",r.style.height="";const I=r.getBoundingClientRect();r.style.position="absolute",f||(y=I.width),g||(b=I.height);let P=y/a,O=b/a,N=e.get("centerX",0),R=e.get("centerY",0),G=0,Y=0,Q=0,ae=0;N instanceof _i?(G=-N.value*P,Y=(1-N.value)*P):(G=-N,Y=P-N),R instanceof _i?(Q=-R.value*O,ae=(1-R.value)*O):(Q=-R,ae=O-R),e._localBounds={left:G,right:Y,top:Q,bottom:ae};let ce=e._adjustedLocalBounds,ne=e._display.getAdjustedBounds(e._localBounds);e._adjustedLocalBounds=ne,(ce.left!==ne.left||ce.right!==ne.right||ce.top!==ne.top||ce.bottom!==ne.bottom)&&e.markDirtyBounds()}y>0&&(r.style.minWidth=y+"px"),b>0&&(r.style.minHeight=b+"px"),(!c||l==0)&&(r.style.display="none");const _=e.get("centerX",0),S=Ide(_)?_.percent+"%":_+"px",$=e.get("centerY",0),C=Ide($)?$.percent+"%":$+"px";(_||$)&&(r.style.transform="translate(-"+S+", -"+C+")"+r.style.transform),a!=1&&(r.style.transform+="scale("+a+")"),o!=0&&(r.style.transform+=" rotate("+o+"deg)"),r.style.transform!=""&&(r.style.transformOrigin=S+" "+C)}}_setHTMLContent(e,i){let r=e.getPrivate("htmlElement");r||(r=this._makeHTMLElement(e),this.autoResize||this.resize()),r.innerHTML!=i&&(r.innerHTML=i)}_removeHTMLContent(e){const i=e.getPrivate("htmlElementWrapper"),r=e.getPrivate("htmlElement");i?(this._htmlElementContainer.removeChild(i),e.removePrivate("htmlElement"),e.removePrivate("htmlElementWrapper"),e.removePrivate("wrapperContainer")):r&&(this._htmlElementContainer.removeChild(r),e.removePrivate("htmlElement"),e.removePrivate("wrapperContainer")),Im(this._htmlEnabledContainers,e)}}class pM extends Lv{_beforeChanged(){super._beforeChanged(),(this.isDirty("cornerRadiusTL")||this.isDirty("cornerRadiusTR")||this.isDirty("cornerRadiusBR")||this.isDirty("cornerRadiusBL"))&&(this._clear=!0)}_draw(){let e=this.width(),i=this.height(),r=e/Math.abs(e),n=i/Math.abs(i),s=0,a=0;const o=this.get("strokeWidth",0);this.get("containStroke",!1)&&(e-=r*o,i-=n*o,s+=r*o/2,a+=n*o/2);let l=e,c=i;if(kt(l)&&kt(c)){let h=Math.min(l,c)/2,f=Ms(this.get("cornerRadiusTL",8),h),g=Ms(this.get("cornerRadiusTR",8),h),y=Ms(this.get("cornerRadiusBR",8),h),b=Ms(this.get("cornerRadiusBL",8),h),_=Math.min(Math.abs(l/2),Math.abs(c/2));f=$a(f,0,_),g=$a(g,0,_),y=$a(y,0,_),b=$a(b,0,_);const S=this._display;S.moveTo(s+f*r,a),S.lineTo(s+l-g*r,a),g>0&&S.arcTo(s+l,a,s+l,a+g*n,g),S.lineTo(s+l,a+c-y*n),y>0&&S.arcTo(s+l,a+c,s+l-y*r,a+c,y),S.lineTo(s+b*r,a+c),b>0&&S.arcTo(s,a+c,s,a+c-b*n,b),S.lineTo(s,a+f*n),f>0&&S.arcTo(s,a,s+f*r,a,f),S.closePath()}}}Object.defineProperty(pM,"className",{enumerable:!0,configurable:!0,writable:!0,value:"RoundedRectangle"});Object.defineProperty(pM,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Lv.classNames.concat([pM.className])});class O1t extends yj{constructor(){super(...arguments),Object.defineProperty(this,"processor",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}incrementRef(){}decrementRef(){}_onPush(e){this.processor&&this.processor.processRow(e),super._onPush(e)}_onInsertIndex(e,i){this.processor&&this.processor.processRow(i),super._onInsertIndex(e,i)}_onSetIndex(e,i,r){this.processor&&this.processor.processRow(r),super._onSetIndex(e,i,r)}}class BU extends SEe{constructor(e,i,r){super(r),Object.defineProperty(this,"component",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"dataContext",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"bullets",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"open",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"close",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.dataContext=i,this.component=e,this._settings.visible=!0,this._checkDirty()}markDirty(){this.component.markDirtyValues(this)}_startAnimation(){this.component._root._addAnimation(this)}_animationTime(){return this.component._root.animationTime}_dispose(){this.component&&this.component.disposeDataItem(this),super._dispose()}show(e){this.setRaw("visible",!0),this.component&&this.component.showDataItem(this,e)}hide(e){this.setRaw("visible",!1),this.component&&this.component.hideDataItem(this,e)}isHidden(){return!this.get("visible")}}class fM extends _r{constructor(){super(...arguments),Object.defineProperty(this,"_data",{enumerable:!0,configurable:!0,writable:!0,value:new O1t}),Object.defineProperty(this,"_dataItems",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_mainDataItems",{enumerable:!0,configurable:!0,writable:!0,value:this._dataItems}),Object.defineProperty(this,"valueFields",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"fields",{enumerable:!0,configurable:!0,writable:!0,value:["id"]}),Object.defineProperty(this,"_valueFields",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_valueFieldsF",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_fields",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_fieldsF",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_valuesDirty",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_dataChanged",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_dataGrouped",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"inited",{enumerable:!0,configurable:!0,writable:!0,value:!1})}set data(e){e.incrementRef(),this._data.decrementRef(),this._data=e}get data(){return this._data}_dispose(){super._dispose(),this._data.decrementRef()}_onDataClear(){}_afterNew(){super._afterNew(),this._data.incrementRef(),this._updateFields(),this._disposers.push(this.data.events.onAll(e=>{const i=this._mainDataItems;if(this.markDirtyValues(),this._markDirtyGroup(),this._dataChanged=!0,e.type==="clear")Ne(i,r=>{r.dispose()}),i.length=0,this._onDataClear();else if(e.type==="push"){const r=new BU(this,e.newValue,this._makeDataItem(e.newValue));i.push(r),this.processDataItem(r)}else if(e.type==="setIndex"){const r=i[e.index],n=this._makeDataItem(e.newValue);r.bullets&&r.bullets.length==0&&(r.bullets=void 0),Ia(n).forEach(s=>{r.get(s)!=n[s]&&r.animate({key:s,to:n[s],duration:this.get("interpolationDuration",0),easing:this.get("interpolationEasing")})}),r.dataContext=e.newValue}else if(e.type==="insertIndex"){const r=new BU(this,e.newValue,this._makeDataItem(e.newValue));i.splice(e.index,0,r),this.processDataItem(r)}else if(e.type==="removeIndex")i[e.index].dispose(),i.splice(e.index,1);else if(e.type==="moveIndex"){const r=i[e.oldIndex];i.splice(e.oldIndex,1),i.splice(e.newIndex,0,r)}else throw new Error("Unknown IStreamEvent type");this._afterDataChange()}))}_updateFields(){this.valueFields&&(this._valueFields=[],this._valueFieldsF={},Ne(this.valueFields,e=>{this.get(e+"Field")&&(this._valueFields.push(e),this._valueFieldsF[e]={fieldKey:e+"Field",workingKey:e+"Working"})})),this.fields&&(this._fields=[],this._fieldsF={},Ne(this.fields,e=>{this.get(e+"Field")&&(this._fields.push(e),this._fieldsF[e]=e+"Field")}))}get dataItems(){return this._dataItems}processDataItem(e){}_makeDataItem(e){const i={};return this._valueFields&&Ne(this._valueFields,r=>{const n=this.get(this._valueFieldsF[r].fieldKey);i[r]=e[n],i[this._valueFieldsF[r].workingKey]=i[r]}),this._fields&&Ne(this._fields,r=>{const n=this.get(this._fieldsF[r]);i[r]=e[n]}),i}makeDataItem(e,i){let r=new BU(this,i,e);return this.processDataItem(r),r}pushDataItem(e,i){const r=this.makeDataItem(e,i);return this._mainDataItems.push(r),r}disposeDataItem(e){}showDataItem(e,i){return vl(this,void 0,void 0,function*(){e.set("visible",!0)})}hideDataItem(e,i){return vl(this,void 0,void 0,function*(){e.set("visible",!1)})}_clearDirty(){super._clearDirty(),this._valuesDirty=!1}_afterDataChange(){}_afterChanged(){if(super._afterChanged(),this._dataChanged){const e="datavalidated";this.events.isEnabled(e)&&this.events.dispatch(e,{type:e,target:this}),this._dataChanged=!1}if(this._valuesDirty){const e="valueschanged";this.events.isEnabled(e)&&this.events.dispatch(e,{type:e,target:this})}this.inited=!0}markDirtyValues(e){this.markDirty(),this._valuesDirty=!0}_markDirtyGroup(){this._dataGrouped=!1}markDirtySize(){this._sizeDirty=!0,this.markDirty()}getDataItemById(e){return hEe(this.dataItems,i=>i.get("id")==e)}}Object.defineProperty(fM,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Component"});Object.defineProperty(fM,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:_r.classNames.concat([fM.className])});function L1t(t){return new Promise((e,i)=>{setTimeout(e,t)})}function DFt(t,e,i,r,n,s,a){if(!a||n){let o=0;switch(!n&&e!="millisecond"&&(o=t.getTimezoneOffset(),t.setUTCMinutes(t.getUTCMinutes()-o)),e){case"day":let l=t.getUTCDate();i>1||t.setUTCDate(l),t.setUTCHours(0,0,0,0);break;case"second":let c=t.getUTCSeconds();i>1&&(c=Math.floor(c/i)*i),t.setUTCSeconds(c,0);break;case"millisecond":if(i==1)return t;let h=t.getUTCMilliseconds();h=Math.floor(h/i)*i,t.setUTCMilliseconds(h);break;case"hour":let f=t.getUTCHours();i>1&&(f=Math.floor(f/i)*i),t.setUTCHours(f,0,0,0);break;case"minute":let g=t.getUTCMinutes();i>1&&(g=Math.floor(g/i)*i),t.setUTCMinutes(g,0,0);break;case"month":let y=t.getUTCMonth();i>1&&(i==2||i==3||i==4||i==6)&&(y=Math.floor(y/i)*i),t.setUTCMonth(y,1),t.setUTCHours(0,0,0,0);break;case"year":let b=t.getUTCFullYear();i>1&&(b=Math.floor(b/i)*i),t.setUTCFullYear(b,0,1),t.setUTCHours(0,0,0,0);break;case"week":let _=t.getUTCDate(),S=t.getUTCDay();kt(r)||(r=1),S>=r?_=_-S+r:_=_-(7+S)+r,t.setUTCDate(_),t.setUTCHours(0,0,0,0);break}if(!n&&e!="millisecond"&&(t.setUTCMinutes(t.getUTCMinutes()+o),e=="day"||e=="week"||e=="month"||e=="year")){let l=t.getTimezoneOffset();if(l!=o){let c=l-o;t.setUTCMinutes(t.getUTCMinutes()+c)}}return t}else{if(isNaN(t.getTime()))return t;let o=t.getTime(),l=a.offsetUTC(t),c=t.getTimezoneOffset(),h=a.parseDate(t),f=h.year,g=h.month,y=h.day,b=h.hour,_=h.minute,S=h.second,$=h.millisecond,C=h.weekday,I=l-c;switch(e){case"day":b=0,_=I,S=0,$=0;break;case"second":_+=I,i>1&&(S=Math.floor(S/i)*i),$=0;break;case"millisecond":_+=I,i>1&&($=Math.floor($/i)*i);break;case"hour":i>1&&(b=Math.floor(b/i)*i),_=I,S=0,$=0;break;case"minute":i>1&&(_=Math.floor(_/i)*i),_+=I,S=0,$=0;break;case"month":i>1&&(g=Math.floor(g/i)*i),y=1,b=0,_=I,S=0,$=0;break;case"year":i>1&&(f=Math.floor(f/i)*i),g=0,y=1,b=0,_=I,S=0,$=0;break;case"week":kt(r)||(r=1),C>=r?y=y-C+r:y=y-(7+C)+r,b=0,_=I,S=0,$=0;break}t=new Date(f,g,y,b,_,S,$);const P=t.getTime();let O=36e5;e=="hour"&&(O=36e5*i),P+O<=o&&(e=="hour"||e=="minute"||e=="second"||e=="millisecond")&&(t=new Date(P+O));let N=t.getTimezoneOffset(),G=a.offsetUTC(t)-N;return G!=I&&t.setTime(t.getTime()+(G-I)*6e4),t}}class o_ extends fM{constructor(){super(...arguments),Object.defineProperty(this,"_aggregatesCalculated",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_selectionAggregatesCalculated",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_dataProcessed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_psi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_pei",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_baseSeriesDirty",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"chart",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"bullets",{enumerable:!0,configurable:!0,writable:!0,value:new yj}),Object.defineProperty(this,"bulletsContainer",{enumerable:!0,configurable:!0,writable:!0,value:_r.new(this._root,{width:bi,height:bi,position:"absolute"})})}_afterNew(){this.valueFields.push("value","customValue"),super._afterNew(),this.setPrivate("customData",{}),this._disposers.push(this.bullets.events.onAll(()=>{this._handleBullets(this.dataItems)}))}_dispose(){this.bulletsContainer.dispose(),super._dispose()}startIndex(){let e=this.dataItems.length;return Math.min(this.getPrivate("startIndex",0),e)}endIndex(){let e=this.dataItems.length;return Math.max(0,Math.min(this.getPrivate("endIndex",e),e))}_handleBullets(e){Ne(e,i=>{const r=i.bullets;r&&(Ne(r,n=>{n.dispose()}),i.bullets=void 0)}),this.markDirtyValues()}_makeBullets(e){this._shouldMakeBullet(e)&&(e.bullets=[],this.bullets.each(i=>{this._makeBullet(e,i)}))}_shouldMakeBullet(e){return!0}_makeBullet(e,i,r){const n=i(this._root,this,e);return n&&(n._index=r,this._makeBulletReal(e,n)),n}_makeBulletReal(e,i){let r=i.get("sprite");r&&(r._setDataItem(e),r.setRaw("position","absolute"),this.bulletsContainer.children.push(r)),i.series=this,e.bullets.push(i)}addBullet(e,i){e.bullets||(e.bullets=[]),i&&this._makeBulletReal(e,i)}_clearDirty(){super._clearDirty(),this._aggregatesCalculated=!1,this._baseSeriesDirty=!1,this._selectionAggregatesCalculated=!1}_prepareChildren(){super._prepareChildren();let e=this.startIndex(),i=this.endIndex();if(this.isDirty("name")&&this.updateLegendValue(),this.isDirty("heatRules")&&(this._valuesDirty=!0),this.isPrivateDirty("baseValueSeries")){const n=this.getPrivate("baseValueSeries");n&&this._disposers.push(n.onPrivate("startIndex",()=>{this._baseSeriesDirty=!0,this.markDirtyValues()}))}if(this.get("calculateAggregates")&&(this._valuesDirty&&!this._dataProcessed&&(this._aggregatesCalculated||(this._calculateAggregates(0,this.dataItems.length),this._aggregatesCalculated=!0,e!=0&&(this._psi=void 0))),(this._psi!=e||this._pei!=i||this.isPrivateDirty("adjustedStartIndex"))&&!this._selectionAggregatesCalculated&&(e===0&&i===this.dataItems.length&&this._aggregatesCalculated||this._calculateAggregates(e,i),this._selectionAggregatesCalculated=!0)),this.isDirty("tooltip")){let n=this.get("tooltip");n&&(n.hide(0),n.set("tooltipTarget",this))}if(this.isDirty("fill")||this.isDirty("stroke")){let n;const s=this.get("legendDataItem");if(s&&(n=s.get("markerRectangle"),n&&this.isVisible())){if(this.isDirty("stroke")){let a=this.get("stroke");n.set("stroke",a)}if(this.isDirty("fill")){let a=this.get("fill");n.set("fill",a)}}this.updateLegendMarker(void 0)}if(this.bullets.length>0){let n=this.startIndex(),s=this.endIndex();s<this.dataItems.length&&s++;for(let a=n;a<s;a++){let o=this.dataItems[a];o.bullets||this._makeBullets(o)}}}_handleRemoved(){}_adjustStartIndex(e){return e}_calculateAggregates(e,i){let r=this._valueFields;if(!r)throw new Error("No value fields are set for the series.");const n=this.get("excludeFromAggregate");n&&(r=r.filter(S=>n.indexOf(S)==-1));const s={},a={},o={},l={},c={},h={},f={},g={},y={};for(let S=0,$=r.length;S<$;S++){let C=r[S];s[C]=0,a[C]=0,o[C]=0}const b=this.dataItems,_=b.length;for(let S=0,$=r.length;S<$;S++){let C=r[S],I=C+"Change",P=C+"ChangePercent",O=C+"ChangePrevious",N=C+"ChangePreviousPercent",R=C+"ChangeSelection",G=C+"ChangeSelectionPercent",Y="valueY";(C==="valueX"||C.endsWith("ValueX"))&&(Y="valueX");const Q=this.getPrivate("baseValueSeries"),ae=this.getPrivate("adjustedStartIndex",e),ce=(ne,K,le)=>{if(e===0){const xe=h[Y],Pe=K-xe;ne.setRaw(I,Pe),ne.setRaw(P,Pe/xe*100)}const re=K-y[Y],he=K-h[Y];ne.setRaw(O,re),ne.setRaw(N,re/y[Y]*100),ne.setRaw(R,he),ne.setRaw(G,he/h[Y]*100),y[le]=K};for(let ne=ae;ne<i;ne++){const K=b[ne];if(K){let le=K.get(C);if(le!=null){l[C]==null&&(l[C]=le),c[C]==null&&(c[C]=le),h[C]==null&&(h[C]=le,y[C]=le,Q&&(h[Y]=Q._getBase(Y)));break}}}for(let ne=ae;ne<i;ne++){const K=b[ne];if(K){let le=K._settings[C];le!=null&&(o[C]++,s[C]+=le,a[C]+=Math.abs(le),l[C]>le&&(l[C]=le),c[C]<le&&(c[C]=le),f[C]=le,ce(K,le,C))}}if(g[C]=s[C]/o[C],i<_){const ne=b[i];if(ne){let K=ne.get(C);K!=null&&ce(ne,K,C)}}if(i+1<_){const ne=b[i+1];if(ne){let K=ne.get(C);K!=null&&ce(ne,K,C)}}e>0&&e--,delete y[C];for(let ne=e;ne<ae;ne++){const K=b[ne];if(K){let le=K.get(C);y[C]==null&&(y[C]=le),le!=null&&ce(K,le,C)}}}for(let S=0,$=r.length;S<$;S++){let C=r[S];this.setPrivate(C+"AverageSelection",g[C]),this.setPrivate(C+"CountSelection",o[C]),this.setPrivate(C+"SumSelection",s[C]),this.setPrivate(C+"AbsoluteSumSelection",a[C]),this.setPrivate(C+"LowSelection",l[C]),this.setPrivate(C+"HighSelection",c[C]),this.setPrivate(C+"OpenSelection",h[C]),this.setPrivate(C+"CloseSelection",f[C])}if(e===0&&i===_)for(let S=0,$=r.length;S<$;S++){let C=r[S];this.setPrivate(C+"Average",g[C]),this.setPrivate(C+"Count",o[C]),this.setPrivate(C+"Sum",s[C]),this.setPrivate(C+"AbsoluteSum",a[C]),this.setPrivate(C+"Low",l[C]),this.setPrivate(C+"High",c[C]),this.setPrivate(C+"Open",h[C]),this.setPrivate(C+"Close",f[C])}}_updateChildren(){super._updateChildren(),this._psi=this.startIndex(),this._pei=this.endIndex(),this.isDirty("visible")&&this.bulletsContainer.set("visible",this.get("visible"));const e=this.get("heatRules");if(this._valuesDirty&&e&&e.length>0&&Ne(e,i=>{const r=i.minValue||this.getPrivate(i.dataField+"Low")||0,n=i.maxValue||this.getPrivate(i.dataField+"High")||0;Ne(i.target._entities,s=>{const a=s.dataItem.get(i.dataField);if(!kt(a)){i.neutral&&s.set(i.key,i.neutral);const o=s.states;if(o){const l=o.lookup("default");l&&i.neutral&&l.set(i.key,i.neutral)}if(!i.customFunction)return}if(i.customFunction)i.customFunction.call(this,s,r,n,a);else{let o;i.logarithmic?o=(Math.log(a)*Math.LOG10E-Math.log(r)*Math.LOG10E)/(Math.log(n)*Math.LOG10E-Math.log(r)*Math.LOG10E):o=(a-r)/(n-r),kt(a)&&(!kt(o)||Math.abs(o)==1/0)&&(o=.5);let l;kt(i.min)?l=i.min+(i.max-i.min)*o:i.min instanceof At?l=At.interpolate(o,i.min,i.max):i.min instanceof _i&&(l=bEe(o,i.min,i.max)),s.set(i.key,l);const c=s.states;if(c){const h=c.lookup("default");h&&h.set(i.key,l)}}})}),this.get("visible")){let i=this.dataItems.length,r=this.startIndex(),n=this.endIndex();n<i&&n++,r>0&&r--;for(let s=0;s<r;s++)this._hideBullets(this.dataItems[s]);for(let s=r;s<n;s++)this._positionBullets(this.dataItems[s]);for(let s=n;s<i;s++)this._hideBullets(this.dataItems[s])}}_positionBullets(e){e.bullets&&Ne(e.bullets,i=>{this._positionBullet(i);const r=i.get("sprite");i.get("dynamic")&&(r&&(r._markDirtyKey("fill"),r.markDirtySize()),r instanceof _r&&r.walkChildren(n=>{n._markDirtyKey("fill"),n.markDirtySize(),n instanceof $u&&n.text.markDirtyText()})),r instanceof $u&&r.get("populateText")&&r.text.markDirtyText()})}_hideBullets(e){e.bullets&&Ne(e.bullets,i=>{let r=i.get("sprite");r&&r.setPrivate("visible",!1)})}_positionBullet(e){}_placeBulletsContainer(e){e.bulletsContainer.children.moveValue(this.bulletsContainer)}_removeBulletsContainer(){const e=this.bulletsContainer;e.parent&&e.parent.children.removeValue(e)}disposeDataItem(e){const i=e.bullets;i&&(Ne(i,r=>{r.dispose()}),e.bullets=void 0)}_getItemReaderLabel(){return""}showDataItem(e,i){const r=Object.create(null,{showDataItem:{get:()=>super.showDataItem}});return vl(this,void 0,void 0,function*(){const n=[r.showDataItem.call(this,e,i)],s=e.bullets;s&&Ne(s,a=>{const o=a.get("sprite");o&&n.push(o.show(i))}),yield Promise.all(n)})}hideDataItem(e,i){const r=Object.create(null,{hideDataItem:{get:()=>super.hideDataItem}});return vl(this,void 0,void 0,function*(){const n=[r.hideDataItem.call(this,e,i)],s=e.bullets;s&&Ne(s,a=>{const o=a.get("sprite");o&&n.push(o.hide(i))}),yield Promise.all(n)})}_sequencedShowHide(e,i){return vl(this,void 0,void 0,function*(){if(this.get("sequencedInterpolation"))if(kt(i)||(i=this.get("interpolationDuration",0)),i>0){const r=this.startIndex(),n=this.endIndex();yield Promise.all(mW(this.dataItems,(s,a)=>vl(this,void 0,void 0,function*(){let o=i||0;(a<r-10||a>n+10)&&(o=0);let l=this.get("sequencedDelay",0)+o/(n-r);yield L1t(l*(a-r)),e?yield this.showDataItem(s,o):yield this.hideDataItem(s,o)})))}else yield Promise.all(mW(this.dataItems,r=>e?this.showDataItem(r,0):this.hideDataItem(r,0)))})}updateLegendValue(e){if(e){const i=e.get("legendDataItem");if(i){const r=i.get("valueLabel");if(r){const s=r.text;let a="";r._setDataItem(e),a=this.get("legendValueText",s.get("text","")),r.set("text",a),s.markDirtyText()}const n=i.get("label");if(n){const s=n.text;let a="";n._setDataItem(e),a=this.get("legendLabelText",s.get("text","")),n.set("text",a),s.markDirtyText()}}}}updateLegendMarker(e){}_onHide(){super._onHide();const e=this.getTooltip();e&&e.hide()}hoverDataItem(e){}unhoverDataItem(e){}_getBase(e){const i=this.dataItems[this.startIndex()];return i?i.get(e):0}}Object.defineProperty(o_,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Series"});Object.defineProperty(o_,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:fM.classNames.concat([o_.className])});class k5 extends o_{constructor(){super(...arguments),Object.defineProperty(this,"itemContainers",{enumerable:!0,configurable:!0,writable:!0,value:this.addDisposer(new Yy(yc.new({}),()=>_r._new(this._root,{themeTags:uc(this.itemContainers.template.get("themeTags",[]),["legend","item"]),themeTagsSelf:uc(this.itemContainers.template.get("themeTagsSelf",[]),["itemcontainer"]),background:pM.new(this._root,{themeTags:uc(this.itemContainers.template.get("themeTags",[]),["legend","item","background"]),themeTagsSelf:uc(this.itemContainers.template.get("themeTagsSelf",[]),["itemcontainer"])})},[this.itemContainers.template])))}),Object.defineProperty(this,"markers",{enumerable:!0,configurable:!0,writable:!0,value:this.addDisposer(new Yy(yc.new({}),()=>_r._new(this._root,{themeTags:uc(this.markers.template.get("themeTags",[]),["legend","marker"])},[this.markers.template])))}),Object.defineProperty(this,"labels",{enumerable:!0,configurable:!0,writable:!0,value:this.addDisposer(new Yy(yc.new({}),()=>$u._new(this._root,{themeTags:uc(this.labels.template.get("themeTags",[]),["legend","label"])},[this.labels.template])))}),Object.defineProperty(this,"valueLabels",{enumerable:!0,configurable:!0,writable:!0,value:this.addDisposer(new Yy(yc.new({}),()=>$u._new(this._root,{themeTags:uc(this.valueLabels.template.get("themeTags",[]),["legend","label","value"])},[this.valueLabels.template])))}),Object.defineProperty(this,"markerRectangles",{enumerable:!0,configurable:!0,writable:!0,value:this.addDisposer(new Yy(yc.new({}),()=>pM._new(this._root,{themeTags:uc(this.markerRectangles.template.get("themeTags",[]),["legend","marker","rectangle"])},[this.markerRectangles.template])))})}_afterNew(){this._settings.themeTags=uc(this._settings.themeTags,["legend"]),this.fields.push("name","stroke","fill"),super._afterNew()}makeItemContainer(e){const i=this.children.push(this.itemContainers.make());return i._setDataItem(e),this.itemContainers.push(i),i.states.create("disabled",{}),i}makeMarker(){const e=this.markers.make();return this.markers.push(e),e.states.create("disabled",{}),e}makeLabel(){const e=this.labels.make();return e.states.create("disabled",{}),e}makeValueLabel(){const e=this.valueLabels.make();return e.states.create("disabled",{}),e}makeMarkerRectangle(){const e=this.markerRectangles.make();return e.states.create("disabled",{}),e}processDataItem(e){super.processDataItem(e);const i=this.makeItemContainer(e),r=this.get("nameField"),n=this.get("fillField"),s=this.get("strokeField");if(i){const a=this.get("clickTarget","itemContainer"),o=e.dataContext;o&&o.set&&o.set("legendDataItem",e),i._setDataItem(e),e.set("itemContainer",i);const l=this.makeMarker();if(l){i.children.push(l),l._setDataItem(e),e.set("marker",l);const f=this.get("useDefaultMarker"),g=l.children.push(this.makeMarkerRectangle());let y=e.get("fill"),b=e.get("stroke");e.set("markerRectangle",g),o&&o.get&&(y=o.get(n,y),b=o.get(s,b)),b||(b=y),f?o.on&&(o.on(n,()=>{g.set("fill",o.get(n))}),o.on(s,()=>{g.set("stroke",o.get(s))})):o&&o.createLegendMarker&&o.createLegendMarker(),g.setAll({fill:y,stroke:b});const _=o.component;_&&_.updateLegendMarker&&_.updateLegendMarker(o)}const c=this.makeLabel();if(c){i.children.push(c),c._setDataItem(e),e.set("label",c),c.text.on("text",()=>{i.setRaw("ariaLabel",c.text._getText()+(this.get("clickTarget")!=="none"?"; "+this._t("Press ENTER to toggle"):"")),i.markDirtyAccessibility()}),o&&o.get&&e.set("name",o.get(r));let f=e.get("name");f&&c.set("text",f)}const h=this.makeValueLabel();if(h&&(i.children.push(h),h._setDataItem(e),e.set("valueLabel",h)),o&&o.show&&(o.on("visible",f=>{i.set("disabled",!f)}),o.get("visible")||i.set("disabled",!0),a!="none")){let f=i;a=="marker"&&(f=l),this._addClickEvents(f,o,e)}this.children.values.sort((f,g)=>{const y=f.dataItem.dataContext,b=g.dataItem.dataContext;if(y&&b){const _=this.data.indexOf(y),S=this.data.indexOf(b);if(_>S)return 1;if(_<S)return-1}return 0}),o&&o.updateLegendValue&&o.updateLegendValue()}}_addClickEvents(e,i,r){e.set("cursorOverStyle","pointer"),e.events.on("pointerover",()=>{const n=i.component;n&&n.hoverDataItem&&n.hoverDataItem(i)}),e.events.on("pointerout",()=>{const n=i.component;n&&n.hoverDataItem&&n.unhoverDataItem(i)}),e.events.on("click",()=>{const n=r.get("label").text._getText();i.show&&i.isHidden&&(i.isHidden()||i.get("visible")===!1)?(i.show(),e.set("disabled",!1),this._root.readerAlert(this._t("%1 shown",this._root.locale,n))):i.hide&&(i.hide(),e.set("disabled",!0),this._root.readerAlert(this._t("%1 hidden",this._root.locale,n)))})}disposeDataItem(e){super.disposeDataItem(e);const i=e.dataContext;i&&i.get&&i.get("legendDataItem")==e&&i.set("legendDataItem",void 0);let r=e.get("itemContainer");r&&(this.itemContainers.removeValue(r),r.dispose());let n=e.get("marker");n&&(this.markers.removeValue(n),n.dispose());let s=e.get("markerRectangle");s&&(this.markerRectangles.removeValue(s),s.dispose());let a=e.get("label");a&&(this.labels.removeValue(a),a.dispose());let o=e.get("valueLabel");o&&(this.valueLabels.removeValue(o),o.dispose())}}Object.defineProperty(k5,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Legend"});Object.defineProperty(k5,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:o_.classNames.concat([k5.className])});function Hde(t,e){for(let i=0,r=e.length;i<r;i++){const n=e[i];if(n.length>0){let s=n[0];if(s.length>0){let a=s[0];t.moveTo(a.x,a.y);for(let o=0,l=n.length;o<l;o++)D1t(t,n[o])}}}}function D1t(t,e){for(let i=0,r=e.length;i<r;i++){const n=e[i];t.lineTo(n.x,n.y)}}class mM extends Ec{_beforeChanged(){super._beforeChanged(),(this.isDirty("points")||this.isDirty("segments")||this._sizeDirty||this.isPrivateDirty("width")||this.isPrivateDirty("height"))&&(this._clear=!0)}_changed(){if(super._changed(),this._clear){const e=this.get("points"),i=this.get("segments");if(e&&e.length>0){let r=e[0];this._display.moveTo(r.x,r.y),Hde(this._display,[[e]])}else if(i)Hde(this._display,i);else if(!this.get("draw")){let r=this.width(),n=this.height();this._display.moveTo(0,0),this._display.lineTo(r,n)}}}}Object.defineProperty(mM,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Line"});Object.defineProperty(mM,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Ec.classNames.concat([mM.className])});class E5 extends a_{constructor(){super(...arguments),Object.defineProperty(this,"_display",{enumerable:!0,configurable:!0,writable:!0,value:this._root._renderer.makeRadialText("",this.textStyle)})}_afterNew(){super._afterNew()}_beforeChanged(){super._beforeChanged(),this._display.clear(),this.isDirty("textType")&&(this._display.textType=this.get("textType"),this.markDirtyBounds()),this.isDirty("radius")&&(this._display.radius=this.get("radius"),this.markDirtyBounds()),this.isDirty("startAngle")&&(this._display.startAngle=(this.get("startAngle",0)+90)*lM,this.markDirtyBounds()),this.isDirty("inside")&&(this._display.inside=this.get("inside"),this.markDirtyBounds()),this.isDirty("orientation")&&(this._display.orientation=this.get("orientation"),this.markDirtyBounds()),this.isDirty("kerning")&&(this._display.kerning=this.get("kerning"),this.markDirtyBounds())}}Object.defineProperty(E5,"className",{enumerable:!0,configurable:!0,writable:!0,value:"RadialText"});Object.defineProperty(E5,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:a_.classNames.concat([E5.className])});class C5 extends $u{constructor(){super(...arguments),Object.defineProperty(this,"_flipped",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_afterNew(){this._textKeys.push("textType","kerning"),super._afterNew()}_makeText(){this._text=this.children.push(E5.new(this._root,{}))}baseRadius(){const e=this.getPrivate("radius",0),i=this.getPrivate("innerRadius",0),r=this.get("baseRadius",0);return i+Ms(r,e-i)}radius(){const e=this.get("inside",!1);return this.baseRadius()+this.get("radius",0)*(e?-1:1)}_updateChildren(){if(super._updateChildren(),this.isDirty("baseRadius")||this.isPrivateDirty("radius")||this.isPrivateDirty("innerRadius")||this.isDirty("labelAngle")||this.isDirty("radius")||this.isDirty("inside")||this.isDirty("orientation")||this.isDirty("textType")){const e=this.get("textType","adjusted"),i=this.get("inside",!1),r=this.get("orientation");let n=aK(this.get("labelAngle",0));this._text.set("startAngle",this.get("labelAngle",0)),this._text.set("inside",i);const s=mu(n),a=Pp(n);let o=this.baseRadius(),l=this.radius();if(this._display.angle=0,e=="circular")this.setAll({paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0}),this.setRaw("x",void 0),this.setRaw("y",void 0),this._text.set("orientation",r),this._text.set("radius",l);else{o==0&&(n=0,l=0);let c=l*a,h=l*s;e=="radial"?(this.setRaw("x",c),this.setRaw("y",h),n<90||n>270||r!="auto"?(this._display.angle=n,this._flipped=!1):(this._display.angle=n+180,this._flipped=!0),this._dirty.rotation=!1):e=="adjusted"?(this.setRaw("centerX",ai),this.setRaw("centerY",ai),this.setRaw("x",c),this.setRaw("y",h)):e=="regular"&&(this.setRaw("x",c),this.setRaw("y",h))}this.markDirtyPosition(),this.markDirtyBounds()}}_updatePosition(){const e=this.get("textType","regular"),i=this.get("inside",!1);let r=0,n=0,s=this.get("labelAngle",0),a=this.localBounds(),o=a.right-a.left,l=a.bottom-a.top;if(e=="radial"){if(this._flipped){let c=this.get("centerX");c instanceof _i&&(o=o*(1-c.value*2)),r=o*Pp(s),n=o*mu(s)}}else!i&&e=="adjusted"&&(r=o/2*Pp(s),n=l/2*mu(s));this.setRaw("dx",r),this.setRaw("dy",n),super._updatePosition()}get text(){return this._text}}Object.defineProperty(C5,"className",{enumerable:!0,configurable:!0,writable:!0,value:"RadialLabel"});Object.defineProperty(C5,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:$u.classNames.concat([C5.className])});function uy(t){return function(){return t}}const Gde=Math.abs,qa=Math.atan2,jb=Math.cos,R1t=Math.max,UU=Math.min,fh=Math.sin,OS=Math.sqrt,al=1e-12,gM=Math.PI,I5=gM/2,z1t=2*gM;function F1t(t){return t>1?0:t<-1?gM:Math.acos(t)}function qde(t){return t>=1?I5:t<=-1?-I5:Math.asin(t)}const _W=Math.PI,xW=2*_W,T0=1e-6,N1t=xW-T0;function EEe(t){this._+=t[0];for(let e=1,i=t.length;e<i;++e)this._+=arguments[e]+t[e]}function j1t(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return EEe;const i=10**e;return function(r){this._+=r[0];for(let n=1,s=r.length;n<s;++n)this._+=Math.round(arguments[n]*i)/i+r[n]}}class V1t{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?EEe:j1t(e)}moveTo(e,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+i}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,i){this._append`L${this._x1=+e},${this._y1=+i}`}quadraticCurveTo(e,i,r,n){this._append`Q${+e},${+i},${this._x1=+r},${this._y1=+n}`}bezierCurveTo(e,i,r,n,s,a){this._append`C${+e},${+i},${+r},${+n},${this._x1=+s},${this._y1=+a}`}arcTo(e,i,r,n,s){if(e=+e,i=+i,r=+r,n=+n,s=+s,s<0)throw new Error(`negative radius: ${s}`);let a=this._x1,o=this._y1,l=r-e,c=n-i,h=a-e,f=o-i,g=h*h+f*f;if(this._x1===null)this._append`M${this._x1=e},${this._y1=i}`;else if(g>T0)if(!(Math.abs(f*l-c*h)>T0)||!s)this._append`L${this._x1=e},${this._y1=i}`;else{let y=r-a,b=n-o,_=l*l+c*c,S=y*y+b*b,$=Math.sqrt(_),C=Math.sqrt(g),I=s*Math.tan((_W-Math.acos((_+g-S)/(2*$*C)))/2),P=I/C,O=I/$;Math.abs(P-1)>T0&&this._append`L${e+P*h},${i+P*f}`,this._append`A${s},${s},0,0,${+(f*y>h*b)},${this._x1=e+O*l},${this._y1=i+O*c}`}}arc(e,i,r,n,s,a){if(e=+e,i=+i,r=+r,a=!!a,r<0)throw new Error(`negative radius: ${r}`);let o=r*Math.cos(n),l=r*Math.sin(n),c=e+o,h=i+l,f=1^a,g=a?n-s:s-n;this._x1===null?this._append`M${c},${h}`:(Math.abs(this._x1-c)>T0||Math.abs(this._y1-h)>T0)&&this._append`L${c},${h}`,r&&(g<0&&(g=g%xW+xW),g>N1t?this._append`A${r},${r},0,1,${f},${e-o},${i-l}A${r},${r},0,1,${f},${this._x1=c},${this._y1=h}`:g>T0&&this._append`A${r},${r},0,${+(g>=_W)},${f},${this._x1=e+r*Math.cos(s)},${this._y1=i+r*Math.sin(s)}`)}rect(e,i,r,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+i}h${r=+r}v${+n}h${-r}Z`}toString(){return this._}}function B1t(t){let e=3;return t.digits=function(i){if(!arguments.length)return e;if(i==null)e=null;else{const r=Math.floor(i);if(!(r>=0))throw new RangeError(`invalid digits: ${i}`);e=r}return t},()=>new V1t(e)}function U1t(t){return t.innerRadius}function H1t(t){return t.outerRadius}function G1t(t){return t.startAngle}function q1t(t){return t.endAngle}function W1t(t){return t&&t.padAngle}function Y1t(t,e,i,r,n,s,a,o){var l=i-t,c=r-e,h=a-n,f=o-s,g=f*l-h*c;if(!(g*g<al))return g=(h*(e-s)-f*(t-n))/g,[t+g*l,e+g*c]}function ZL(t,e,i,r,n,s,a){var o=t-i,l=e-r,c=(a?s:-s)/OS(o*o+l*l),h=c*l,f=-c*o,g=t+h,y=e+f,b=i+h,_=r+f,S=(g+b)/2,$=(y+_)/2,C=b-g,I=_-y,P=C*C+I*I,O=n-s,N=g*_-b*y,R=(I<0?-1:1)*OS(R1t(0,O*O*P-N*N)),G=(N*I-C*R)/P,Y=(-N*C-I*R)/P,Q=(N*I+C*R)/P,ae=(-N*C+I*R)/P,ce=G-S,ne=Y-$,K=Q-S,le=ae-$;return ce*ce+ne*ne>K*K+le*le&&(G=Q,Y=ae),{cx:G,cy:Y,x01:-h,y01:-f,x11:G*(n/O-1),y11:Y*(n/O-1)}}function Z1t(){var t=U1t,e=H1t,i=uy(0),r=null,n=G1t,s=q1t,a=W1t,o=null,l=B1t(c);function c(){var h,f,g=+t.apply(this,arguments),y=+e.apply(this,arguments),b=n.apply(this,arguments)-I5,_=s.apply(this,arguments)-I5,S=Gde(_-b),$=_>b;if(o||(o=h=l()),y<g&&(f=y,y=g,g=f),!(y>al))o.moveTo(0,0);else if(S>z1t-al)o.moveTo(y*jb(b),y*fh(b)),o.arc(0,0,y,b,_,!$),g>al&&(o.moveTo(g*jb(_),g*fh(_)),o.arc(0,0,g,_,b,$));else{var C=b,I=_,P=b,O=_,N=S,R=S,G=a.apply(this,arguments)/2,Y=G>al&&(r?+r.apply(this,arguments):OS(g*g+y*y)),Q=UU(Gde(y-g)/2,+i.apply(this,arguments)),ae=Q,ce=Q,ne,K;if(Y>al){var le=qde(Y/g*fh(G)),re=qde(Y/y*fh(G));(N-=le*2)>al?(le*=$?1:-1,P+=le,O-=le):(N=0,P=O=(b+_)/2),(R-=re*2)>al?(re*=$?1:-1,C+=re,I-=re):(R=0,C=I=(b+_)/2)}var he=y*jb(C),xe=y*fh(C),Pe=g*jb(O),He=g*fh(O);if(Q>al){var oe=y*jb(I),be=y*fh(I),Le=g*jb(P),Je=g*fh(P),st;if(S<gM)if(st=Y1t(he,xe,Le,Je,oe,be,Pe,He)){var ut=he-st[0],Pt=xe-st[1],pi=oe-st[0],it=be-st[1],Wn=1/fh(F1t((ut*pi+Pt*it)/(OS(ut*ut+Pt*Pt)*OS(pi*pi+it*it)))/2),fn=OS(st[0]*st[0]+st[1]*st[1]);ae=UU(Q,(g-fn)/(Wn-1)),ce=UU(Q,(y-fn)/(Wn+1))}else ae=ce=0}R>al?ce>al?(ne=ZL(Le,Je,he,xe,y,ce,$),K=ZL(oe,be,Pe,He,y,ce,$),o.moveTo(ne.cx+ne.x01,ne.cy+ne.y01),ce<Q?o.arc(ne.cx,ne.cy,ce,qa(ne.y01,ne.x01),qa(K.y01,K.x01),!$):(o.arc(ne.cx,ne.cy,ce,qa(ne.y01,ne.x01),qa(ne.y11,ne.x11),!$),o.arc(0,0,y,qa(ne.cy+ne.y11,ne.cx+ne.x11),qa(K.cy+K.y11,K.cx+K.x11),!$),o.arc(K.cx,K.cy,ce,qa(K.y11,K.x11),qa(K.y01,K.x01),!$))):(o.moveTo(he,xe),o.arc(0,0,y,C,I,!$)):o.moveTo(he,xe),!(g>al)||!(N>al)?o.lineTo(Pe,He):ae>al?(ne=ZL(Pe,He,oe,be,g,-ae,$),K=ZL(he,xe,Le,Je,g,-ae,$),o.lineTo(ne.cx+ne.x01,ne.cy+ne.y01),ae<Q?o.arc(ne.cx,ne.cy,ae,qa(ne.y01,ne.x01),qa(K.y01,K.x01),!$):(o.arc(ne.cx,ne.cy,ae,qa(ne.y01,ne.x01),qa(ne.y11,ne.x11),!$),o.arc(0,0,g,qa(ne.cy+ne.y11,ne.cx+ne.x11),qa(K.cy+K.y11,K.cx+K.x11),$),o.arc(K.cx,K.cy,ae,qa(K.y11,K.x11),qa(K.y01,K.x01),!$))):o.arc(0,0,g,O,P,$)}if(o.closePath(),h)return o=null,h+""||null}return c.centroid=function(){var h=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,f=(+n.apply(this,arguments)+ +s.apply(this,arguments))/2-gM/2;return[jb(f)*h,fh(f)*h]},c.innerRadius=function(h){return arguments.length?(t=typeof h=="function"?h:uy(+h),c):t},c.outerRadius=function(h){return arguments.length?(e=typeof h=="function"?h:uy(+h),c):e},c.cornerRadius=function(h){return arguments.length?(i=typeof h=="function"?h:uy(+h),c):i},c.padRadius=function(h){return arguments.length?(r=h==null?null:typeof h=="function"?h:uy(+h),c):r},c.startAngle=function(h){return arguments.length?(n=typeof h=="function"?h:uy(+h),c):n},c.endAngle=function(h){return arguments.length?(s=typeof h=="function"?h:uy(+h),c):s},c.padAngle=function(h){return arguments.length?(a=typeof h=="function"?h:uy(+h),c):a},c.context=function(h){return arguments.length?(o=h??null,c):o},c}class M5 extends Ec{constructor(){super(...arguments),Object.defineProperty(this,"ix",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"iy",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_generator",{enumerable:!0,configurable:!0,writable:!0,value:Z1t()})}_getTooltipPoint(){let e=this.get("tooltipX"),i=this.get("tooltipY"),r=0,n=0;kt(e)&&(r=e),kt(i)&&(n=i);let s=this.get("radius",0),a=this.get("innerRadius",0),o=this.get("dRadius",0),l=this.get("dInnerRadius",0);return s+=o,a+=l,a<0&&(a=s+a),e instanceof _i&&(r=this.ix*(a+(s-a)*e.value)),i instanceof _i&&(n=this.iy*(a+(s-a)*i.value)),this.get("arc")>=360&&a==0&&(r=0,n=0),{x:r,y:n}}_beforeChanged(){super._beforeChanged(),(this.isDirty("radius")||this.isDirty("arc")||this.isDirty("innerRadius")||this.isDirty("startAngle")||this.isDirty("dRadius")||this.isDirty("dInnerRadius")||this.isDirty("cornerRadius")||this.isDirty("shiftRadius"))&&(this._clear=!0)}_changed(){if(super._changed(),this._clear){let e=this.get("startAngle",0),i=this.get("arc",0);const r=this._generator;i<0&&(e=e+i,i=i*-1),i>.1&&r.cornerRadius(this.get("cornerRadius",0)),r.context(this._display);let n=this.get("radius",0),s=this.get("innerRadius",0),a=this.get("dRadius",0),o=this.get("dInnerRadius",0);n+=a,s+=o,s<0&&(s=n+s),r({innerRadius:s,outerRadius:n,startAngle:(e+90)*lM,endAngle:(e+i+90)*lM});let l=e+i/2;this.ix=Pp(l),this.iy=mu(l);const c=this.get("shiftRadius",0);this.setRaw("dx",this.ix*c),this.setRaw("dy",this.iy*c),this.markDirtyPosition()}}}Object.defineProperty(M5,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Slice"});Object.defineProperty(M5,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Ec.classNames.concat([M5.className])});class yM extends _r{constructor(){super(...arguments),Object.defineProperty(this,"chartContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(_r.new(this._root,{width:bi,height:bi,interactiveChildren:!1}))}),Object.defineProperty(this,"bulletsContainer",{enumerable:!0,configurable:!0,writable:!0,value:_r.new(this._root,{interactiveChildren:!1,isMeasured:!1,position:"absolute",width:bi,height:bi})})}}Object.defineProperty(yM,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Chart"});Object.defineProperty(yM,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:_r.classNames.concat([yM.className])});class vM extends yM{constructor(){super(...arguments),Object.defineProperty(this,"seriesContainer",{enumerable:!0,configurable:!0,writable:!0,value:_r.new(this._root,{width:bi,height:bi,isMeasured:!1})}),Object.defineProperty(this,"series",{enumerable:!0,configurable:!0,writable:!0,value:new wEe})}_afterNew(){super._afterNew(),this._disposers.push(this.series);const e=this.seriesContainer.children;this._disposers.push(this.series.events.onAll(i=>{if(i.type==="clear"){Ne(i.oldValues,s=>{this._removeSeries(s)});const r=this.get("colors");r&&r.reset();const n=this.get("patterns");n&&n.reset()}else if(i.type==="push")e.moveValue(i.newValue),this._processSeries(i.newValue);else if(i.type==="setIndex")e.setIndex(i.index,i.newValue),this._processSeries(i.newValue);else if(i.type==="insertIndex")e.insertIndex(i.index,i.newValue),this._processSeries(i.newValue);else if(i.type==="removeIndex")this._removeSeries(i.oldValue);else if(i.type==="moveIndex")e.moveValue(i.value,i.newIndex),this._processSeries(i.value);else if(i.type==="swap"){const r=i.a,n=i.b,s=this.series.indexOf(r),a=this.series.indexOf(n);e.moveValue(r,a),e.moveValue(n,s),this.series.each(o=>{this._processSeries(o),o.markDirtyValues()})}else throw new Error("Unknown IListEvent type")}))}_processSeries(e){e.chart=this,e._placeBulletsContainer(this)}_removeSeries(e){e._handleRemoved(),e.isDisposed()||(this.seriesContainer.children.removeValue(e),e._removeBulletsContainer())}}Object.defineProperty(vM,"className",{enumerable:!0,configurable:!0,writable:!0,value:"SerialChart"});Object.defineProperty(vM,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:yM.classNames.concat([vM.className])});class A5 extends mM{}Object.defineProperty(A5,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Tick"});Object.defineProperty(A5,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:mM.classNames.concat([A5.className])});class P5 extends yo{_afterNew(){super._afterNewApplyThemes(),this._dirty.colors=!1}_beforeChanged(){this.isDirty("colors")&&this.reset()}generateColors(){this.setPrivate("currentPass",this.getPrivate("currentPass",0)+1);const e=this.getPrivate("currentPass"),i=this.get("colors",[this.get("baseColor",At.fromHex(16711680))]);this.getPrivate("numColors")||this.setPrivate("numColors",i.length);const r=this.getPrivate("numColors"),n=0,s=this.get("passOptions"),a=this.get("reuse");for(let o=n;o<r;o++)if(a)i.push(i[o]);else{const l=i[o].toHSL();let c=l.h+(s.hue||0)*e;for(;c>1;)c-=1;let h=l.s+(s.saturation||0)*e;h>1&&(h=1),h<0&&(h=0);let f=l.l+(s.lightness||0)*e;for(;f>1;)f-=1;i.push(At.fromHSL(c,h,f))}}getIndex(e){const i=this.get("colors",[]),r=this.get("saturation");return e>=i.length?(this.generateColors(),this.getIndex(e)):r!=null?At.saturate(i[e],r):i[e]}next(){let e=this.getPrivate("currentStep",this.get("startIndex",0));return this.setPrivate("currentStep",e+this.get("step",1)),this.getIndex(e)}reset(){this.setPrivate("currentStep",this.get("startIndex",0)),this.setPrivate("currentPass",0)}}Object.defineProperty(P5,"className",{enumerable:!0,configurable:!0,writable:!0,value:"ColorSet"});Object.defineProperty(P5,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:yo.classNames.concat([P5.className])});async function X1t(){const t=["January","February","March","April","May","June","July","August","September","October","November","December"],e=Cde.createQuery();return e.where="category = 'Land Acquisition HL'",Cde.queryFeatures(e).then(i=>i.features.map(s=>{const a=new Date(s.attributes.date),o=a.getFullYear(),l=t[a.getMonth()],c=a.getDate();return o<1990?"":`${l} ${c}, ${o}`}))}async function J1t(t,e,i){const r="Package = '"+t+"'",n="Type = '"+e+"'",s=r+" AND "+n,a="Station1 ='"+i+"'",o=s+" AND "+a,l=new Qa({onStatisticField:iC,outStatisticFieldName:"total_count",statisticType:"count"}),c=Xs.createQuery();return c.outFields=[iC],c.outStatistics=[l],c.orderByFields=[iC],c.groupByFieldsForStatistics=[iC],t?t&&!e&&!i?c.where=r:t&&e&&!i?c.where=s:c.where=o:c.where="1=1",Xs.queryFeatures(c).then(h=>{const g=h.features.map(b=>{const _=b.attributes,S=_.H_Level,$=_.total_count;return Object.assign({category:x5[S-1],value:$})}),y=[];return x5.map((b,_)=>{const S=g.find(I=>I.category===b),$=S===void 0?0:S?.value,C={category:b,value:$,sliceSettings:{fill:fu(sEe[_].color)}};y.push(C)}),y})}async function K1t(){const t=new Qa({onStatisticField:"ID",outStatisticFieldName:"total_lot_number",statisticType:"count"}),e=new Qa({onStatisticField:"CASE WHEN StatusNVS3 >= 1 THEN 1 ELSE 0 END",outStatisticFieldName:"total_lot_pie",statisticType:"sum"}),i=Xs.createQuery();return i.outStatistics=[t,e],i.returnGeometry=!0,Xs.queryFeatures(i).then(r=>{const n=r.features[0].attributes,s=n.total_lot_number,a=n.total_lot_pie,o=s-a;return[s,a,o]})}async function Q1t(){const t=new Qa({onStatisticField:"CASE WHEN HandedOver = 1 THEN 1 ELSE 0 END",outStatisticFieldName:"total_handedover_lot",statisticType:"sum"}),e=new Qa({onStatisticField:"ID",outStatisticFieldName:"total_lot_N",statisticType:"count"}),i=Xs.createQuery();return i.outStatistics=[t,e],Xs.queryFeatures(i).then(r=>{const n=r.features[0].attributes,s=n.total_handedover_lot,a=n.total_lot_N;return[(s/a*100).toFixed(0),s]})}function XL(t){if(t){const e=t.toString().split(".");return e[0]=e[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),e.join(".")}}function ext(t,e){return t.queryExtent().then(i=>{e?.goTo(i.extent,{}).catch(r=>{r.name!=="AbortError"&&console.error(r)})})}function l_(t){"@babel/helpers - typeof";return l_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l_(t)}function txt(t,e){if(l_(t)!="object"||!t)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e);if(l_(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function CEe(t){var e=txt(t,"string");return l_(e)=="symbol"?e:e+""}function aC(t,e,i){return(e=CEe(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Wde(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),i.push.apply(i,r)}return i}function Yt(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?Wde(Object(i),!0).forEach(function(r){aC(t,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Wde(Object(i)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(i,r))})}return t}function ixt(t){if(Array.isArray(t))return t}function rxt(t,e){var i=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(i!=null){var r,n,s,a,o=[],l=!0,c=!1;try{if(s=(i=i.call(t)).next,e===0){if(Object(i)!==i)return;l=!1}else for(;!(l=(r=s.call(i)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(h){c=!0,n=h}finally{try{if(!l&&i.return!=null&&(a=i.return(),Object(a)!==a))return}finally{if(c)throw n}}return o}}function SW(t,e){(e==null||e>t.length)&&(e=t.length);for(var i=0,r=Array(e);i<e;i++)r[i]=t[i];return r}function IEe(t,e){if(t){if(typeof t=="string")return SW(t,e);var i={}.toString.call(t).slice(8,-1);return i==="Object"&&t.constructor&&(i=t.constructor.name),i==="Map"||i==="Set"?Array.from(t):i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?SW(t,e):void 0}}function nxt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qm(t,e){return ixt(t)||rxt(t,e)||IEe(t,e)||nxt()}function sxt(t,e){if(t==null)return{};var i={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;i[r]=t[r]}return i}function ug(t,e){if(t==null)return{};var i,r,n=sxt(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)i=s[r],e.indexOf(i)===-1&&{}.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}var axt=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function oxt(t){var e=t.defaultInputValue,i=e===void 0?"":e,r=t.defaultMenuIsOpen,n=r===void 0?!1:r,s=t.defaultValue,a=s===void 0?null:s,o=t.inputValue,l=t.menuIsOpen,c=t.onChange,h=t.onInputChange,f=t.onMenuClose,g=t.onMenuOpen,y=t.value,b=ug(t,axt),_=je.useState(o!==void 0?o:i),S=qm(_,2),$=S[0],C=S[1],I=je.useState(l!==void 0?l:n),P=qm(I,2),O=P[0],N=P[1],R=je.useState(y!==void 0?y:a),G=qm(R,2),Y=G[0],Q=G[1],ae=je.useCallback(function(xe,Pe){typeof c=="function"&&c(xe,Pe),Q(xe)},[c]),ce=je.useCallback(function(xe,Pe){var He;typeof h=="function"&&(He=h(xe,Pe)),C(He!==void 0?He:xe)},[h]),ne=je.useCallback(function(){typeof g=="function"&&g(),N(!0)},[g]),K=je.useCallback(function(){typeof f=="function"&&f(),N(!1)},[f]),le=o!==void 0?o:$,re=l!==void 0?l:O,he=y!==void 0?y:Y;return Yt(Yt({},b),{},{inputValue:le,menuIsOpen:re,onChange:ae,onInputChange:ce,onMenuClose:K,onMenuOpen:ne,value:he})}function Jt(){return Jt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)({}).hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},Jt.apply(null,arguments)}function lxt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Yde(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,CEe(r.key),r)}}function cxt(t,e,i){return e&&Yde(t.prototype,e),i&&Yde(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function $W(t,e){return $W=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,r){return i.__proto__=r,i},$W(t,e)}function uxt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$W(t,e)}function O5(t){return O5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},O5(t)}function MEe(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(MEe=function(){return!!t})()}function dxt(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function hxt(t,e){if(e&&(l_(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return dxt(t)}function pxt(t){var e=MEe();return function(){var i,r=O5(t);if(e){var n=O5(this).constructor;i=Reflect.construct(r,arguments,n)}else i=r.apply(this,arguments);return hxt(this,i)}}function fxt(t){if(Array.isArray(t))return SW(t)}function mxt(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function gxt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lK(t){return fxt(t)||mxt(t)||IEe(t)||gxt()}function yxt(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}function vxt(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),t.nonce!==void 0&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var bxt=(function(){function t(i){var r=this;this._insertTag=function(n){var s;r.tags.length===0?r.insertionPoint?s=r.insertionPoint.nextSibling:r.prepend?s=r.container.firstChild:s=r.before:s=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(n,s),r.tags.push(n)},this.isSpeedy=i.speedy===void 0?!0:i.speedy,this.tags=[],this.ctr=0,this.nonce=i.nonce,this.key=i.key,this.container=i.container,this.prepend=i.prepend,this.insertionPoint=i.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(r){r.forEach(this._insertTag)},e.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(vxt(this));var n=this.tags[this.tags.length-1];if(this.isSpeedy){var s=yxt(n);try{s.insertRule(r,s.cssRules.length)}catch{}}else n.appendChild(document.createTextNode(r));this.ctr++},e.flush=function(){this.tags.forEach(function(r){var n;return(n=r.parentNode)==null?void 0:n.removeChild(r)}),this.tags=[],this.ctr=0},t})(),Xa="-ms-",L5="-moz-",ir="-webkit-",AEe="comm",cK="rule",uK="decl",wxt="@import",PEe="@keyframes",_xt="@layer",xxt=Math.abs,xj=String.fromCharCode,Sxt=Object.assign;function $xt(t,e){return Ea(t,0)^45?(((e<<2^Ea(t,0))<<2^Ea(t,1))<<2^Ea(t,2))<<2^Ea(t,3):0}function OEe(t){return t.trim()}function Txt(t,e){return(t=e.exec(t))?t[0]:t}function rr(t,e,i){return t.replace(e,i)}function TW(t,e){return t.indexOf(e)}function Ea(t,e){return t.charCodeAt(e)|0}function bM(t,e,i){return t.slice(e,i)}function Gh(t){return t.length}function dK(t){return t.length}function JL(t,e){return e.push(t),t}function kxt(t,e){return t.map(e).join("")}var Sj=1,vT=1,LEe=0,Tl=0,ws=0,ik="";function $j(t,e,i,r,n,s,a){return{value:t,root:e,parent:i,type:r,props:n,children:s,line:Sj,column:vT,length:a,return:""}}function H2(t,e){return Sxt($j("",null,null,"",null,null,0),t,{length:-t.length},e)}function Ext(){return ws}function Cxt(){return ws=Tl>0?Ea(ik,--Tl):0,vT--,ws===10&&(vT=1,Sj--),ws}function Tc(){return ws=Tl<LEe?Ea(ik,Tl++):0,vT++,ws===10&&(vT=1,Sj++),ws}function Op(){return Ea(ik,Tl)}function XD(){return Tl}function kA(t,e){return bM(ik,t,e)}function wM(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function DEe(t){return Sj=vT=1,LEe=Gh(ik=t),Tl=0,[]}function REe(t){return ik="",t}function JD(t){return OEe(kA(Tl-1,kW(t===91?t+2:t===40?t+1:t)))}function Ixt(t){for(;(ws=Op())&&ws<33;)Tc();return wM(t)>2||wM(ws)>3?"":" "}function Mxt(t,e){for(;--e&&Tc()&&!(ws<48||ws>102||ws>57&&ws<65||ws>70&&ws<97););return kA(t,XD()+(e<6&&Op()==32&&Tc()==32))}function kW(t){for(;Tc();)switch(ws){case t:return Tl;case 34:case 39:t!==34&&t!==39&&kW(ws);break;case 40:t===41&&kW(t);break;case 92:Tc();break}return Tl}function Axt(t,e){for(;Tc()&&t+ws!==57;)if(t+ws===84&&Op()===47)break;return"/*"+kA(e,Tl-1)+"*"+xj(t===47?t:Tc())}function Pxt(t){for(;!wM(Op());)Tc();return kA(t,Tl)}function Oxt(t){return REe(KD("",null,null,null,[""],t=DEe(t),0,[0],t))}function KD(t,e,i,r,n,s,a,o,l){for(var c=0,h=0,f=a,g=0,y=0,b=0,_=1,S=1,$=1,C=0,I="",P=n,O=s,N=r,R=I;S;)switch(b=C,C=Tc()){case 40:if(b!=108&&Ea(R,f-1)==58){TW(R+=rr(JD(C),"&","&\f"),"&\f")!=-1&&($=-1);break}case 34:case 39:case 91:R+=JD(C);break;case 9:case 10:case 13:case 32:R+=Ixt(b);break;case 92:R+=Mxt(XD()-1,7);continue;case 47:switch(Op()){case 42:case 47:JL(Lxt(Axt(Tc(),XD()),e,i),l);break;default:R+="/"}break;case 123*_:o[c++]=Gh(R)*$;case 125*_:case 59:case 0:switch(C){case 0:case 125:S=0;case 59+h:$==-1&&(R=rr(R,/\f/g,"")),y>0&&Gh(R)-f&&JL(y>32?Xde(R+";",r,i,f-1):Xde(rr(R," ","")+";",r,i,f-2),l);break;case 59:R+=";";default:if(JL(N=Zde(R,e,i,c,h,n,o,I,P=[],O=[],f),s),C===123)if(h===0)KD(R,e,N,N,P,s,f,o,O);else switch(g===99&&Ea(R,3)===110?100:g){case 100:case 108:case 109:case 115:KD(t,N,N,r&&JL(Zde(t,N,N,0,0,n,o,I,n,P=[],f),O),n,O,f,o,r?P:O);break;default:KD(R,N,N,N,[""],O,0,o,O)}}c=h=y=0,_=$=1,I=R="",f=a;break;case 58:f=1+Gh(R),y=b;default:if(_<1){if(C==123)--_;else if(C==125&&_++==0&&Cxt()==125)continue}switch(R+=xj(C),C*_){case 38:$=h>0?1:(R+="\f",-1);break;case 44:o[c++]=(Gh(R)-1)*$,$=1;break;case 64:Op()===45&&(R+=JD(Tc())),g=Op(),h=f=Gh(I=R+=Pxt(XD())),C++;break;case 45:b===45&&Gh(R)==2&&(_=0)}}return s}function Zde(t,e,i,r,n,s,a,o,l,c,h){for(var f=n-1,g=n===0?s:[""],y=dK(g),b=0,_=0,S=0;b<r;++b)for(var $=0,C=bM(t,f+1,f=xxt(_=a[b])),I=t;$<y;++$)(I=OEe(_>0?g[$]+" "+C:rr(C,/&\f/g,g[$])))&&(l[S++]=I);return $j(t,e,i,n===0?cK:o,l,c,h)}function Lxt(t,e,i){return $j(t,e,i,AEe,xj(Ext()),bM(t,2,-2),0)}function Xde(t,e,i,r){return $j(t,e,i,uK,bM(t,0,r),bM(t,r+1,-1),r)}function a$(t,e){for(var i="",r=dK(t),n=0;n<r;n++)i+=e(t[n],n,t,e)||"";return i}function Dxt(t,e,i,r){switch(t.type){case _xt:if(t.children.length)break;case wxt:case uK:return t.return=t.return||t.value;case AEe:return"";case PEe:return t.return=t.value+"{"+a$(t.children,r)+"}";case cK:t.value=t.props.join(",")}return Gh(i=a$(t.children,r))?t.return=t.value+"{"+i+"}":""}function Rxt(t){var e=dK(t);return function(i,r,n,s){for(var a="",o=0;o<e;o++)a+=t[o](i,r,n,s)||"";return a}}function zxt(t){return function(e){e.root||(e=e.return)&&t(e)}}function Fxt(t){var e=Object.create(null);return function(i){return e[i]===void 0&&(e[i]=t(i)),e[i]}}var Nxt=function(e,i,r){for(var n=0,s=0;n=s,s=Op(),n===38&&s===12&&(i[r]=1),!wM(s);)Tc();return kA(e,Tl)},jxt=function(e,i){var r=-1,n=44;do switch(wM(n)){case 0:n===38&&Op()===12&&(i[r]=1),e[r]+=Nxt(Tl-1,i,r);break;case 2:e[r]+=JD(n);break;case 4:if(n===44){e[++r]=Op()===58?"&\f":"",i[r]=e[r].length;break}default:e[r]+=xj(n)}while(n=Tc());return e},Vxt=function(e,i){return REe(jxt(DEe(e),i))},Jde=new WeakMap,Bxt=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var i=e.value,r=e.parent,n=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(e.props.length===1&&i.charCodeAt(0)!==58&&!Jde.get(r))&&!n){Jde.set(e,!0);for(var s=[],a=Vxt(i,s),o=r.props,l=0,c=0;l<a.length;l++)for(var h=0;h<o.length;h++,c++)e.props[c]=s[l]?a[l].replace(/&\f/g,o[h]):o[h]+" "+a[l]}}},Uxt=function(e){if(e.type==="decl"){var i=e.value;i.charCodeAt(0)===108&&i.charCodeAt(2)===98&&(e.return="",e.value="")}};function zEe(t,e){switch($xt(t,e)){case 5103:return ir+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return ir+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return ir+t+L5+t+Xa+t+t;case 6828:case 4268:return ir+t+Xa+t+t;case 6165:return ir+t+Xa+"flex-"+t+t;case 5187:return ir+t+rr(t,/(\w+).+(:[^]+)/,ir+"box-$1$2"+Xa+"flex-$1$2")+t;case 5443:return ir+t+Xa+"flex-item-"+rr(t,/flex-|-self/,"")+t;case 4675:return ir+t+Xa+"flex-line-pack"+rr(t,/align-content|flex-|-self/,"")+t;case 5548:return ir+t+Xa+rr(t,"shrink","negative")+t;case 5292:return ir+t+Xa+rr(t,"basis","preferred-size")+t;case 6060:return ir+"box-"+rr(t,"-grow","")+ir+t+Xa+rr(t,"grow","positive")+t;case 4554:return ir+rr(t,/([^-])(transform)/g,"$1"+ir+"$2")+t;case 6187:return rr(rr(rr(t,/(zoom-|grab)/,ir+"$1"),/(image-set)/,ir+"$1"),t,"")+t;case 5495:case 3959:return rr(t,/(image-set\([^]*)/,ir+"$1$`$1");case 4968:return rr(rr(t,/(.+:)(flex-)?(.*)/,ir+"box-pack:$3"+Xa+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+ir+t+t;case 4095:case 3583:case 4068:case 2532:return rr(t,/(.+)-inline(.+)/,ir+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Gh(t)-1-e>6)switch(Ea(t,e+1)){case 109:if(Ea(t,e+4)!==45)break;case 102:return rr(t,/(.+:)(.+)-([^]+)/,"$1"+ir+"$2-$3$1"+L5+(Ea(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~TW(t,"stretch")?zEe(rr(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(Ea(t,e+1)!==115)break;case 6444:switch(Ea(t,Gh(t)-3-(~TW(t,"!important")&&10))){case 107:return rr(t,":",":"+ir)+t;case 101:return rr(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+ir+(Ea(t,14)===45?"inline-":"")+"box$3$1"+ir+"$2$3$1"+Xa+"$2box$3")+t}break;case 5936:switch(Ea(t,e+11)){case 114:return ir+t+Xa+rr(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return ir+t+Xa+rr(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return ir+t+Xa+rr(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return ir+t+Xa+t+t}return t}var Hxt=function(e,i,r,n){if(e.length>-1&&!e.return)switch(e.type){case uK:e.return=zEe(e.value,e.length);break;case PEe:return a$([H2(e,{value:rr(e.value,"@","@"+ir)})],n);case cK:if(e.length)return kxt(e.props,function(s){switch(Txt(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return a$([H2(e,{props:[rr(s,/:(read-\w+)/,":"+L5+"$1")]})],n);case"::placeholder":return a$([H2(e,{props:[rr(s,/:(plac\w+)/,":"+ir+"input-$1")]}),H2(e,{props:[rr(s,/:(plac\w+)/,":"+L5+"$1")]}),H2(e,{props:[rr(s,/:(plac\w+)/,Xa+"input-$1")]})],n)}return""})}},Gxt=[Hxt],qxt=function(e){var i=e.key;if(i==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(_){var S=_.getAttribute("data-emotion");S.indexOf(" ")!==-1&&(document.head.appendChild(_),_.setAttribute("data-s",""))})}var n=e.stylisPlugins||Gxt,s={},a,o=[];a=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+i+' "]'),function(_){for(var S=_.getAttribute("data-emotion").split(" "),$=1;$<S.length;$++)s[S[$]]=!0;o.push(_)});var l,c=[Bxt,Uxt];{var h,f=[Dxt,zxt(function(_){h.insert(_)})],g=Rxt(c.concat(n,f)),y=function(S){return a$(Oxt(S),g)};l=function(S,$,C,I){h=C,y(S?S+"{"+$.styles+"}":$.styles),I&&(b.inserted[$.name]=!0)}}var b={key:i,sheet:new bxt({key:i,container:a,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:l};return b.sheet.hydrate(o),b},HU={exports:{}},lr={};var Kde;function Wxt(){if(Kde)return lr;Kde=1;var t=typeof Symbol=="function"&&Symbol.for,e=t?Symbol.for("react.element"):60103,i=t?Symbol.for("react.portal"):60106,r=t?Symbol.for("react.fragment"):60107,n=t?Symbol.for("react.strict_mode"):60108,s=t?Symbol.for("react.profiler"):60114,a=t?Symbol.for("react.provider"):60109,o=t?Symbol.for("react.context"):60110,l=t?Symbol.for("react.async_mode"):60111,c=t?Symbol.for("react.concurrent_mode"):60111,h=t?Symbol.for("react.forward_ref"):60112,f=t?Symbol.for("react.suspense"):60113,g=t?Symbol.for("react.suspense_list"):60120,y=t?Symbol.for("react.memo"):60115,b=t?Symbol.for("react.lazy"):60116,_=t?Symbol.for("react.block"):60121,S=t?Symbol.for("react.fundamental"):60117,$=t?Symbol.for("react.responder"):60118,C=t?Symbol.for("react.scope"):60119;function I(O){if(typeof O=="object"&&O!==null){var N=O.$$typeof;switch(N){case e:switch(O=O.type,O){case l:case c:case r:case s:case n:case f:return O;default:switch(O=O&&O.$$typeof,O){case o:case h:case b:case y:case a:return O;default:return N}}case i:return N}}}function P(O){return I(O)===c}return lr.AsyncMode=l,lr.ConcurrentMode=c,lr.ContextConsumer=o,lr.ContextProvider=a,lr.Element=e,lr.ForwardRef=h,lr.Fragment=r,lr.Lazy=b,lr.Memo=y,lr.Portal=i,lr.Profiler=s,lr.StrictMode=n,lr.Suspense=f,lr.isAsyncMode=function(O){return P(O)||I(O)===l},lr.isConcurrentMode=P,lr.isContextConsumer=function(O){return I(O)===o},lr.isContextProvider=function(O){return I(O)===a},lr.isElement=function(O){return typeof O=="object"&&O!==null&&O.$$typeof===e},lr.isForwardRef=function(O){return I(O)===h},lr.isFragment=function(O){return I(O)===r},lr.isLazy=function(O){return I(O)===b},lr.isMemo=function(O){return I(O)===y},lr.isPortal=function(O){return I(O)===i},lr.isProfiler=function(O){return I(O)===s},lr.isStrictMode=function(O){return I(O)===n},lr.isSuspense=function(O){return I(O)===f},lr.isValidElementType=function(O){return typeof O=="string"||typeof O=="function"||O===r||O===c||O===s||O===n||O===f||O===g||typeof O=="object"&&O!==null&&(O.$$typeof===b||O.$$typeof===y||O.$$typeof===a||O.$$typeof===o||O.$$typeof===h||O.$$typeof===S||O.$$typeof===$||O.$$typeof===C||O.$$typeof===_)},lr.typeOf=I,lr}var Qde;function Yxt(){return Qde||(Qde=1,HU.exports=Wxt()),HU.exports}var GU,ehe;function Zxt(){if(ehe)return GU;ehe=1;var t=Yxt(),e={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},i={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},r={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},n={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};s[t.ForwardRef]=r,s[t.Memo]=n;function a(b){return t.isMemo(b)?n:s[b.$$typeof]||e}var o=Object.defineProperty,l=Object.getOwnPropertyNames,c=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,g=Object.prototype;function y(b,_,S){if(typeof _!="string"){if(g){var $=f(_);$&&$!==g&&y(b,$,S)}var C=l(_);c&&(C=C.concat(c(_)));for(var I=a(b),P=a(_),O=0;O<C.length;++O){var N=C[O];if(!i[N]&&!(S&&S[N])&&!(P&&P[N])&&!(I&&I[N])){var R=h(_,N);try{o(b,N,R)}catch{}}}}return b}return GU=y,GU}Zxt();var Xxt=!0;function Jxt(t,e,i){var r="";return i.split(" ").forEach(function(n){t[n]!==void 0?e.push(t[n]+";"):n&&(r+=n+" ")}),r}var FEe=function(e,i,r){var n=e.key+"-"+i.name;(r===!1||Xxt===!1)&&e.registered[n]===void 0&&(e.registered[n]=i.styles)},Kxt=function(e,i,r){FEe(e,i,r);var n=e.key+"-"+i.name;if(e.inserted[i.name]===void 0){var s=i;do e.insert(i===s?"."+n:"",s,e.sheet,!0),s=s.next;while(s!==void 0)}};function Qxt(t){for(var e=0,i,r=0,n=t.length;n>=4;++r,n-=4)i=t.charCodeAt(r)&255|(t.charCodeAt(++r)&255)<<8|(t.charCodeAt(++r)&255)<<16|(t.charCodeAt(++r)&255)<<24,i=(i&65535)*1540483477+((i>>>16)*59797<<16),i^=i>>>24,e=(i&65535)*1540483477+((i>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(n){case 3:e^=(t.charCodeAt(r+2)&255)<<16;case 2:e^=(t.charCodeAt(r+1)&255)<<8;case 1:e^=t.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var eSt={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},tSt=/[A-Z]|^ms/g,iSt=/_EMO_([^_]+?)_([^]*?)_EMO_/g,NEe=function(e){return e.charCodeAt(1)===45},the=function(e){return e!=null&&typeof e!="boolean"},qU=Fxt(function(t){return NEe(t)?t:t.replace(tSt,"-$&").toLowerCase()}),ihe=function(e,i){switch(e){case"animation":case"animationName":if(typeof i=="string")return i.replace(iSt,function(r,n,s){return qh={name:n,styles:s,next:qh},n})}return eSt[e]!==1&&!NEe(e)&&typeof i=="number"&&i!==0?i+"px":i};function _M(t,e,i){if(i==null)return"";var r=i;if(r.__emotion_styles!==void 0)return r;switch(typeof i){case"boolean":return"";case"object":{var n=i;if(n.anim===1)return qh={name:n.name,styles:n.styles,next:qh},n.name;var s=i;if(s.styles!==void 0){var a=s.next;if(a!==void 0)for(;a!==void 0;)qh={name:a.name,styles:a.styles,next:qh},a=a.next;var o=s.styles+";";return o}return rSt(t,e,i)}case"function":{if(t!==void 0){var l=qh,c=i(t);return qh=l,_M(t,e,c)}break}}var h=i;return h}function rSt(t,e,i){var r="";if(Array.isArray(i))for(var n=0;n<i.length;n++)r+=_M(t,e,i[n])+";";else for(var s in i){var a=i[s];if(typeof a!="object"){var o=a;the(o)&&(r+=qU(s)+":"+ihe(s,o)+";")}else if(Array.isArray(a)&&typeof a[0]=="string"&&e==null)for(var l=0;l<a.length;l++)the(a[l])&&(r+=qU(s)+":"+ihe(s,a[l])+";");else{var c=_M(t,e,a);switch(s){case"animation":case"animationName":{r+=qU(s)+":"+c+";";break}default:r+=s+"{"+c+"}"}}}return r}var rhe=/label:\s*([^\s;{]+)\s*(;|$)/g,qh;function jEe(t,e,i){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var r=!0,n="";qh=void 0;var s=t[0];if(s==null||s.raw===void 0)r=!1,n+=_M(i,e,s);else{var a=s;n+=a[0]}for(var o=1;o<t.length;o++)if(n+=_M(i,e,t[o]),r){var l=s;n+=l[o]}rhe.lastIndex=0;for(var c="",h;(h=rhe.exec(n))!==null;)c+="-"+h[1];var f=Qxt(n)+c;return{name:f,styles:n,next:qh}}var nSt=function(e){return e()},sSt=Mte.useInsertionEffect?Mte.useInsertionEffect:!1,aSt=sSt||nSt,VEe=je.createContext(typeof HTMLElement<"u"?qxt({key:"css"}):null);VEe.Provider;var oSt=function(e){return je.forwardRef(function(i,r){var n=je.useContext(VEe);return e(i,n,r)})},lSt=je.createContext({}),hK={}.hasOwnProperty,EW="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",cSt=function(e,i){var r={};for(var n in i)hK.call(i,n)&&(r[n]=i[n]);return r[EW]=e,r},uSt=function(e){var i=e.cache,r=e.serialized,n=e.isStringTag;return FEe(i,r,n),aSt(function(){return Kxt(i,r,n)}),null},dSt=oSt(function(t,e,i){var r=t.css;typeof r=="string"&&e.registered[r]!==void 0&&(r=e.registered[r]);var n=t[EW],s=[r],a="";typeof t.className=="string"?a=Jxt(e.registered,s,t.className):t.className!=null&&(a=t.className+" ");var o=jEe(s,void 0,je.useContext(lSt));a+=e.key+"-"+o.name;var l={};for(var c in t)hK.call(t,c)&&c!=="css"&&c!==EW&&(l[c]=t[c]);return l.className=a,i&&(l.ref=i),je.createElement(je.Fragment,null,je.createElement(uSt,{cache:e,serialized:o,isStringTag:typeof n=="string"}),je.createElement(n,l))}),hSt=dSt,Bt=function(e,i){var r=arguments;if(i==null||!hK.call(i,"css"))return je.createElement.apply(void 0,r);var n=r.length,s=new Array(n);s[0]=hSt,s[1]=cSt(e,i);for(var a=2;a<n;a++)s[a]=r[a];return je.createElement.apply(null,s)};(function(t){var e;e||(e=t.JSX||(t.JSX={}))})(Bt||(Bt={}));function pK(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return jEe(e)}function pSt(){var t=pK.apply(void 0,arguments),e="animation-"+t.name;return{name:e,styles:"@keyframes "+e+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}function fSt(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var mSt=Ihe(),CW=je.useLayoutEffect,gSt=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],D5=function(){};function ySt(t,e){return e?e[0]==="-"?t+e:t+"__"+e:t}function vSt(t,e){for(var i=arguments.length,r=new Array(i>2?i-2:0),n=2;n<i;n++)r[n-2]=arguments[n];var s=[].concat(r);if(e&&t)for(var a in e)e.hasOwnProperty(a)&&e[a]&&s.push("".concat(ySt(t,a)));return s.filter(function(o){return o}).map(function(o){return String(o).trim()}).join(" ")}var nhe=function(e){return ESt(e)?e.filter(Boolean):l_(e)==="object"&&e!==null?[e]:[]},BEe=function(e){e.className,e.clearValue,e.cx,e.getStyles,e.getClassNames,e.getValue,e.hasValue,e.isMulti,e.isRtl,e.options,e.selectOption,e.selectProps,e.setValue,e.theme;var i=ug(e,gSt);return Yt({},i)},Hn=function(e,i,r){var n=e.cx,s=e.getStyles,a=e.getClassNames,o=e.className;return{css:s(i,e),className:n(r??{},a(i,e),o)}};function Tj(t){return[document.documentElement,document.body,window].indexOf(t)>-1}function bSt(t){return Tj(t)?window.innerHeight:t.clientHeight}function UEe(t){return Tj(t)?window.pageYOffset:t.scrollTop}function R5(t,e){if(Tj(t)){window.scrollTo(0,e);return}t.scrollTop=e}function wSt(t){var e=getComputedStyle(t),i=e.position==="absolute",r=/(auto|scroll)/;if(e.position==="fixed")return document.documentElement;for(var n=t;n=n.parentElement;)if(e=getComputedStyle(n),!(i&&e.position==="static")&&r.test(e.overflow+e.overflowY+e.overflowX))return n;return document.documentElement}function _St(t,e,i,r){return i*((t=t/r-1)*t*t+1)+e}function KL(t,e){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:D5,n=UEe(t),s=e-n,a=10,o=0;function l(){o+=a;var c=_St(o,n,s,i);R5(t,c),o<i?window.requestAnimationFrame(l):r(t)}l()}function she(t,e){var i=t.getBoundingClientRect(),r=e.getBoundingClientRect(),n=e.offsetHeight/3;r.bottom+n>i.bottom?R5(t,Math.min(e.offsetTop+e.clientHeight-t.offsetHeight+n,t.scrollHeight)):r.top-n<i.top&&R5(t,Math.max(e.offsetTop-n,0))}function xSt(t){var e=t.getBoundingClientRect();return{bottom:e.bottom,height:e.height,left:e.left,right:e.right,top:e.top,width:e.width}}function ahe(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function SSt(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var HEe=!1,$St={get passive(){return HEe=!0}},QL=typeof window<"u"?window:{};QL.addEventListener&&QL.removeEventListener&&(QL.addEventListener("p",D5,$St),QL.removeEventListener("p",D5,!1));var TSt=HEe;function kSt(t){return t!=null}function ESt(t){return Array.isArray(t)}function e3(t,e,i){return t?e:i}var CSt=function(e){for(var i=arguments.length,r=new Array(i>1?i-1:0),n=1;n<i;n++)r[n-1]=arguments[n];var s=Object.entries(e).filter(function(a){var o=qm(a,1),l=o[0];return!r.includes(l)});return s.reduce(function(a,o){var l=qm(o,2),c=l[0],h=l[1];return a[c]=h,a},{})},ISt=["children","innerProps"],MSt=["children","innerProps"];function ASt(t){var e=t.maxHeight,i=t.menuEl,r=t.minHeight,n=t.placement,s=t.shouldScroll,a=t.isFixedPosition,o=t.controlHeight,l=wSt(i),c={placement:"bottom",maxHeight:e};if(!i||!i.offsetParent)return c;var h=l.getBoundingClientRect(),f=h.height,g=i.getBoundingClientRect(),y=g.bottom,b=g.height,_=g.top,S=i.offsetParent.getBoundingClientRect(),$=S.top,C=a?window.innerHeight:bSt(l),I=UEe(l),P=parseInt(getComputedStyle(i).marginBottom,10),O=parseInt(getComputedStyle(i).marginTop,10),N=$-O,R=C-_,G=N+I,Y=f-I-_,Q=y-C+I+P,ae=I+_-O,ce=160;switch(n){case"auto":case"bottom":if(R>=b)return{placement:"bottom",maxHeight:e};if(Y>=b&&!a)return s&&KL(l,Q,ce),{placement:"bottom",maxHeight:e};if(!a&&Y>=r||a&&R>=r){s&&KL(l,Q,ce);var ne=a?R-P:Y-P;return{placement:"bottom",maxHeight:ne}}if(n==="auto"||a){var K=e,le=a?N:G;return le>=r&&(K=Math.min(le-P-o,e)),{placement:"top",maxHeight:K}}if(n==="bottom")return s&&R5(l,Q),{placement:"bottom",maxHeight:e};break;case"top":if(N>=b)return{placement:"top",maxHeight:e};if(G>=b&&!a)return s&&KL(l,ae,ce),{placement:"top",maxHeight:e};if(!a&&G>=r||a&&N>=r){var re=e;return(!a&&G>=r||a&&N>=r)&&(re=a?N-O:G-O),s&&KL(l,ae,ce),{placement:"top",maxHeight:re}}return{placement:"bottom",maxHeight:e};default:throw new Error('Invalid placement provided "'.concat(n,'".'))}return c}function PSt(t){var e={bottom:"top",top:"bottom"};return t?e[t]:"bottom"}var GEe=function(e){return e==="auto"?"bottom":e},OSt=function(e,i){var r,n=e.placement,s=e.theme,a=s.borderRadius,o=s.spacing,l=s.colors;return Yt((r={label:"menu"},aC(r,PSt(n),"100%"),aC(r,"position","absolute"),aC(r,"width","100%"),aC(r,"zIndex",1),r),i?{}:{backgroundColor:l.neutral0,borderRadius:a,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:o.menuGutter,marginTop:o.menuGutter})},qEe=je.createContext(null),LSt=function(e){var i=e.children,r=e.minMenuHeight,n=e.maxMenuHeight,s=e.menuPlacement,a=e.menuPosition,o=e.menuShouldScrollIntoView,l=e.theme,c=je.useContext(qEe)||{},h=c.setPortalPlacement,f=je.useRef(null),g=je.useState(n),y=qm(g,2),b=y[0],_=y[1],S=je.useState(null),$=qm(S,2),C=$[0],I=$[1],P=l.spacing.controlHeight;return CW(function(){var O=f.current;if(O){var N=a==="fixed",R=o&&!N,G=ASt({maxHeight:n,menuEl:O,minHeight:r,placement:s,shouldScroll:R,isFixedPosition:N,controlHeight:P});_(G.maxHeight),I(G.placement),h?.(G.placement)}},[n,s,a,o,r,h,P]),i({ref:f,placerProps:Yt(Yt({},e),{},{placement:C||GEe(s),maxHeight:b})})},DSt=function(e){var i=e.children,r=e.innerRef,n=e.innerProps;return Bt("div",Jt({},Hn(e,"menu",{menu:!0}),{ref:r},n),i)},RSt=DSt,zSt=function(e,i){var r=e.maxHeight,n=e.theme.spacing.baseUnit;return Yt({maxHeight:r,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},i?{}:{paddingBottom:n,paddingTop:n})},FSt=function(e){var i=e.children,r=e.innerProps,n=e.innerRef,s=e.isMulti;return Bt("div",Jt({},Hn(e,"menuList",{"menu-list":!0,"menu-list--is-multi":s}),{ref:n},r),i)},WEe=function(e,i){var r=e.theme,n=r.spacing.baseUnit,s=r.colors;return Yt({textAlign:"center"},i?{}:{color:s.neutral40,padding:"".concat(n*2,"px ").concat(n*3,"px")})},NSt=WEe,jSt=WEe,VSt=function(e){var i=e.children,r=i===void 0?"No options":i,n=e.innerProps,s=ug(e,ISt);return Bt("div",Jt({},Hn(Yt(Yt({},s),{},{children:r,innerProps:n}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),n),r)},BSt=function(e){var i=e.children,r=i===void 0?"Loading...":i,n=e.innerProps,s=ug(e,MSt);return Bt("div",Jt({},Hn(Yt(Yt({},s),{},{children:r,innerProps:n}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),n),r)},USt=function(e){var i=e.rect,r=e.offset,n=e.position;return{left:i.left,position:n,top:r,width:i.width,zIndex:1}},HSt=function(e){var i=e.appendTo,r=e.children,n=e.controlElement,s=e.innerProps,a=e.menuPlacement,o=e.menuPosition,l=je.useRef(null),c=je.useRef(null),h=je.useState(GEe(a)),f=qm(h,2),g=f[0],y=f[1],b=je.useMemo(function(){return{setPortalPlacement:y}},[]),_=je.useState(null),S=qm(_,2),$=S[0],C=S[1],I=je.useCallback(function(){if(n){var R=xSt(n),G=o==="fixed"?0:window.pageYOffset,Y=R[g]+G;(Y!==$?.offset||R.left!==$?.rect.left||R.width!==$?.rect.width)&&C({offset:Y,rect:R})}},[n,o,g,$?.offset,$?.rect.left,$?.rect.width]);CW(function(){I()},[I]);var P=je.useCallback(function(){typeof c.current=="function"&&(c.current(),c.current=null),n&&l.current&&(c.current=Xke(n,l.current,I,{elementResize:"ResizeObserver"in window}))},[n,I]);CW(function(){P()},[P]);var O=je.useCallback(function(R){l.current=R,P()},[P]);if(!i&&o!=="fixed"||!$)return null;var N=Bt("div",Jt({ref:O},Hn(Yt(Yt({},e),{},{offset:$.offset,position:o,rect:$.rect}),"menuPortal",{"menu-portal":!0}),s),r);return Bt(qEe.Provider,{value:b},i?mSt.createPortal(N,i):N)},GSt=function(e){var i=e.isDisabled,r=e.isRtl;return{label:"container",direction:r?"rtl":void 0,pointerEvents:i?"none":void 0,position:"relative"}},qSt=function(e){var i=e.children,r=e.innerProps,n=e.isDisabled,s=e.isRtl;return Bt("div",Jt({},Hn(e,"container",{"--is-disabled":n,"--is-rtl":s}),r),i)},WSt=function(e,i){var r=e.theme.spacing,n=e.isMulti,s=e.hasValue,a=e.selectProps.controlShouldRenderValue;return Yt({alignItems:"center",display:n&&s&&a?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},i?{}:{padding:"".concat(r.baseUnit/2,"px ").concat(r.baseUnit*2,"px")})},YSt=function(e){var i=e.children,r=e.innerProps,n=e.isMulti,s=e.hasValue;return Bt("div",Jt({},Hn(e,"valueContainer",{"value-container":!0,"value-container--is-multi":n,"value-container--has-value":s}),r),i)},ZSt=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},XSt=function(e){var i=e.children,r=e.innerProps;return Bt("div",Jt({},Hn(e,"indicatorsContainer",{indicators:!0}),r),i)},ohe,JSt=["size"],KSt=["innerProps","isRtl","size"],QSt={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},YEe=function(e){var i=e.size,r=ug(e,JSt);return Bt("svg",Jt({height:i,width:i,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:QSt},r))},fK=function(e){return Bt(YEe,Jt({size:20},e),Bt("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},ZEe=function(e){return Bt(YEe,Jt({size:20},e),Bt("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},XEe=function(e,i){var r=e.isFocused,n=e.theme,s=n.spacing.baseUnit,a=n.colors;return Yt({label:"indicatorContainer",display:"flex",transition:"color 150ms"},i?{}:{color:r?a.neutral60:a.neutral20,padding:s*2,":hover":{color:r?a.neutral80:a.neutral40}})},e$t=XEe,t$t=function(e){var i=e.children,r=e.innerProps;return Bt("div",Jt({},Hn(e,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),r),i||Bt(ZEe,null))},i$t=XEe,r$t=function(e){var i=e.children,r=e.innerProps;return Bt("div",Jt({},Hn(e,"clearIndicator",{indicator:!0,"clear-indicator":!0}),r),i||Bt(fK,null))},n$t=function(e,i){var r=e.isDisabled,n=e.theme,s=n.spacing.baseUnit,a=n.colors;return Yt({label:"indicatorSeparator",alignSelf:"stretch",width:1},i?{}:{backgroundColor:r?a.neutral10:a.neutral20,marginBottom:s*2,marginTop:s*2})},s$t=function(e){var i=e.innerProps;return Bt("span",Jt({},i,Hn(e,"indicatorSeparator",{"indicator-separator":!0})))},a$t=pSt(ohe||(ohe=fSt([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),o$t=function(e,i){var r=e.isFocused,n=e.size,s=e.theme,a=s.colors,o=s.spacing.baseUnit;return Yt({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:n,lineHeight:1,marginRight:n,textAlign:"center",verticalAlign:"middle"},i?{}:{color:r?a.neutral60:a.neutral20,padding:o*2})},WU=function(e){var i=e.delay,r=e.offset;return Bt("span",{css:pK({animation:"".concat(a$t," 1s ease-in-out ").concat(i,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:r?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},l$t=function(e){var i=e.innerProps,r=e.isRtl,n=e.size,s=n===void 0?4:n,a=ug(e,KSt);return Bt("div",Jt({},Hn(Yt(Yt({},a),{},{innerProps:i,isRtl:r,size:s}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),i),Bt(WU,{delay:0,offset:r}),Bt(WU,{delay:160,offset:!0}),Bt(WU,{delay:320,offset:!r}))},c$t=function(e,i){var r=e.isDisabled,n=e.isFocused,s=e.theme,a=s.colors,o=s.borderRadius,l=s.spacing;return Yt({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:l.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},i?{}:{backgroundColor:r?a.neutral5:a.neutral0,borderColor:r?a.neutral10:n?a.primary:a.neutral20,borderRadius:o,borderStyle:"solid",borderWidth:1,boxShadow:n?"0 0 0 1px ".concat(a.primary):void 0,"&:hover":{borderColor:n?a.primary:a.neutral30}})},u$t=function(e){var i=e.children,r=e.isDisabled,n=e.isFocused,s=e.innerRef,a=e.innerProps,o=e.menuIsOpen;return Bt("div",Jt({ref:s},Hn(e,"control",{control:!0,"control--is-disabled":r,"control--is-focused":n,"control--menu-is-open":o}),a,{"aria-disabled":r||void 0}),i)},d$t=u$t,h$t=["data"],p$t=function(e,i){var r=e.theme.spacing;return i?{}:{paddingBottom:r.baseUnit*2,paddingTop:r.baseUnit*2}},f$t=function(e){var i=e.children,r=e.cx,n=e.getStyles,s=e.getClassNames,a=e.Heading,o=e.headingProps,l=e.innerProps,c=e.label,h=e.theme,f=e.selectProps;return Bt("div",Jt({},Hn(e,"group",{group:!0}),l),Bt(a,Jt({},o,{selectProps:f,theme:h,getStyles:n,getClassNames:s,cx:r}),c),Bt("div",null,i))},m$t=function(e,i){var r=e.theme,n=r.colors,s=r.spacing;return Yt({label:"group",cursor:"default",display:"block"},i?{}:{color:n.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:s.baseUnit*3,paddingRight:s.baseUnit*3,textTransform:"uppercase"})},g$t=function(e){var i=BEe(e);i.data;var r=ug(i,h$t);return Bt("div",Jt({},Hn(e,"groupHeading",{"group-heading":!0}),r))},y$t=f$t,v$t=["innerRef","isDisabled","isHidden","inputClassName"],b$t=function(e,i){var r=e.isDisabled,n=e.value,s=e.theme,a=s.spacing,o=s.colors;return Yt(Yt({visibility:r?"hidden":"visible",transform:n?"translateZ(0)":""},w$t),i?{}:{margin:a.baseUnit/2,paddingBottom:a.baseUnit/2,paddingTop:a.baseUnit/2,color:o.neutral80})},JEe={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},w$t={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":Yt({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},JEe)},_$t=function(e){return Yt({label:"input",color:"inherit",background:0,opacity:e?0:1,width:"100%"},JEe)},x$t=function(e){var i=e.cx,r=e.value,n=BEe(e),s=n.innerRef,a=n.isDisabled,o=n.isHidden,l=n.inputClassName,c=ug(n,v$t);return Bt("div",Jt({},Hn(e,"input",{"input-container":!0}),{"data-value":r||""}),Bt("input",Jt({className:i({input:!0},l),ref:s,style:_$t(o),disabled:a},c)))},S$t=x$t,$$t=function(e,i){var r=e.theme,n=r.spacing,s=r.borderRadius,a=r.colors;return Yt({label:"multiValue",display:"flex",minWidth:0},i?{}:{backgroundColor:a.neutral10,borderRadius:s/2,margin:n.baseUnit/2})},T$t=function(e,i){var r=e.theme,n=r.borderRadius,s=r.colors,a=e.cropWithEllipsis;return Yt({overflow:"hidden",textOverflow:a||a===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},i?{}:{borderRadius:n/2,color:s.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},k$t=function(e,i){var r=e.theme,n=r.spacing,s=r.borderRadius,a=r.colors,o=e.isFocused;return Yt({alignItems:"center",display:"flex"},i?{}:{borderRadius:s/2,backgroundColor:o?a.dangerLight:void 0,paddingLeft:n.baseUnit,paddingRight:n.baseUnit,":hover":{backgroundColor:a.dangerLight,color:a.danger}})},KEe=function(e){var i=e.children,r=e.innerProps;return Bt("div",r,i)},E$t=KEe,C$t=KEe;function I$t(t){var e=t.children,i=t.innerProps;return Bt("div",Jt({role:"button"},i),e||Bt(fK,{size:14}))}var M$t=function(e){var i=e.children,r=e.components,n=e.data,s=e.innerProps,a=e.isDisabled,o=e.removeProps,l=e.selectProps,c=r.Container,h=r.Label,f=r.Remove;return Bt(c,{data:n,innerProps:Yt(Yt({},Hn(e,"multiValue",{"multi-value":!0,"multi-value--is-disabled":a})),s),selectProps:l},Bt(h,{data:n,innerProps:Yt({},Hn(e,"multiValueLabel",{"multi-value__label":!0})),selectProps:l},i),Bt(f,{data:n,innerProps:Yt(Yt({},Hn(e,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(i||"option")},o),selectProps:l}))},A$t=M$t,P$t=function(e,i){var r=e.isDisabled,n=e.isFocused,s=e.isSelected,a=e.theme,o=a.spacing,l=a.colors;return Yt({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},i?{}:{backgroundColor:s?l.primary:n?l.primary25:"transparent",color:r?l.neutral20:s?l.neutral0:"inherit",padding:"".concat(o.baseUnit*2,"px ").concat(o.baseUnit*3,"px"),":active":{backgroundColor:r?void 0:s?l.primary:l.primary50}})},O$t=function(e){var i=e.children,r=e.isDisabled,n=e.isFocused,s=e.isSelected,a=e.innerRef,o=e.innerProps;return Bt("div",Jt({},Hn(e,"option",{option:!0,"option--is-disabled":r,"option--is-focused":n,"option--is-selected":s}),{ref:a,"aria-disabled":r},o),i)},L$t=O$t,D$t=function(e,i){var r=e.theme,n=r.spacing,s=r.colors;return Yt({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},i?{}:{color:s.neutral50,marginLeft:n.baseUnit/2,marginRight:n.baseUnit/2})},R$t=function(e){var i=e.children,r=e.innerProps;return Bt("div",Jt({},Hn(e,"placeholder",{placeholder:!0}),r),i)},z$t=R$t,F$t=function(e,i){var r=e.isDisabled,n=e.theme,s=n.spacing,a=n.colors;return Yt({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},i?{}:{color:r?a.neutral40:a.neutral80,marginLeft:s.baseUnit/2,marginRight:s.baseUnit/2})},N$t=function(e){var i=e.children,r=e.isDisabled,n=e.innerProps;return Bt("div",Jt({},Hn(e,"singleValue",{"single-value":!0,"single-value--is-disabled":r}),n),i)},j$t=N$t,V$t={ClearIndicator:r$t,Control:d$t,DropdownIndicator:t$t,DownChevron:ZEe,CrossIcon:fK,Group:y$t,GroupHeading:g$t,IndicatorsContainer:XSt,IndicatorSeparator:s$t,Input:S$t,LoadingIndicator:l$t,Menu:RSt,MenuList:FSt,MenuPortal:HSt,LoadingMessage:BSt,NoOptionsMessage:VSt,MultiValue:A$t,MultiValueContainer:E$t,MultiValueLabel:C$t,MultiValueRemove:I$t,Option:L$t,Placeholder:z$t,SelectContainer:qSt,SingleValue:j$t,ValueContainer:YSt},B$t=function(e){return Yt(Yt({},V$t),e.components)},lhe=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function U$t(t,e){return!!(t===e||lhe(t)&&lhe(e))}function H$t(t,e){if(t.length!==e.length)return!1;for(var i=0;i<t.length;i++)if(!U$t(t[i],e[i]))return!1;return!0}function G$t(t,e){e===void 0&&(e=H$t);var i=null;function r(){for(var n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];if(i&&i.lastThis===this&&e(n,i.lastArgs))return i.lastResult;var a=t.apply(this,n);return i={lastResult:a,lastArgs:n,lastThis:this},a}return r.clear=function(){i=null},r}var q$t={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},W$t=function(e){return Bt("span",Jt({css:q$t},e))},che=W$t,Y$t={guidance:function(e){var i=e.isSearchable,r=e.isMulti,n=e.tabSelectsValue,s=e.context,a=e.isInitialFocus;switch(s){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(n?", press Tab to select the option and exit the menu":"",".");case"input":return a?"".concat(e["aria-label"]||"Select"," is focused ").concat(i?",type to refine list":"",", press Down to open the menu, ").concat(r?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(e){var i=e.action,r=e.label,n=r===void 0?"":r,s=e.labels,a=e.isDisabled;switch(i){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(n,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(s.length>1?"s":""," ").concat(s.join(","),", selected.");case"select-option":return a?"option ".concat(n," is disabled. Select another option."):"option ".concat(n,", selected.");default:return""}},onFocus:function(e){var i=e.context,r=e.focused,n=e.options,s=e.label,a=s===void 0?"":s,o=e.selectValue,l=e.isDisabled,c=e.isSelected,h=e.isAppleDevice,f=function(_,S){return _&&_.length?"".concat(_.indexOf(S)+1," of ").concat(_.length):""};if(i==="value"&&o)return"value ".concat(a," focused, ").concat(f(o,r),".");if(i==="menu"&&h){var g=l?" disabled":"",y="".concat(c?" selected":"").concat(g);return"".concat(a).concat(y,", ").concat(f(n,r),".")}return""},onFilter:function(e){var i=e.inputValue,r=e.resultsMessage;return"".concat(r).concat(i?" for search term "+i:"",".")}},Z$t=function(e){var i=e.ariaSelection,r=e.focusedOption,n=e.focusedValue,s=e.focusableOptions,a=e.isFocused,o=e.selectValue,l=e.selectProps,c=e.id,h=e.isAppleDevice,f=l.ariaLiveMessages,g=l.getOptionLabel,y=l.inputValue,b=l.isMulti,_=l.isOptionDisabled,S=l.isSearchable,$=l.menuIsOpen,C=l.options,I=l.screenReaderStatus,P=l.tabSelectsValue,O=l.isLoading,N=l["aria-label"],R=l["aria-live"],G=je.useMemo(function(){return Yt(Yt({},Y$t),f||{})},[f]),Y=je.useMemo(function(){var le="";if(i&&G.onChange){var re=i.option,he=i.options,xe=i.removedValue,Pe=i.removedValues,He=i.value,oe=function(pi){return Array.isArray(pi)?null:pi},be=xe||re||oe(He),Le=be?g(be):"",Je=he||Pe||void 0,st=Je?Je.map(g):[],ut=Yt({isDisabled:be&&_(be,o),label:Le,labels:st},i);le=G.onChange(ut)}return le},[i,G,_,o,g]),Q=je.useMemo(function(){var le="",re=r||n,he=!!(r&&o&&o.includes(r));if(re&&G.onFocus){var xe={focused:re,label:g(re),isDisabled:_(re,o),isSelected:he,options:s,context:re===r?"menu":"value",selectValue:o,isAppleDevice:h};le=G.onFocus(xe)}return le},[r,n,g,_,G,s,o,h]),ae=je.useMemo(function(){var le="";if($&&C.length&&!O&&G.onFilter){var re=I({count:s.length});le=G.onFilter({inputValue:y,resultsMessage:re})}return le},[s,y,$,G,C,I,O]),ce=i?.action==="initial-input-focus",ne=je.useMemo(function(){var le="";if(G.guidance){var re=n?"value":$?"menu":"input";le=G.guidance({"aria-label":N,context:re,isDisabled:r&&_(r,o),isMulti:b,isSearchable:S,tabSelectsValue:P,isInitialFocus:ce})}return le},[N,r,n,b,_,S,$,G,o,P,ce]),K=Bt(je.Fragment,null,Bt("span",{id:"aria-selection"},Y),Bt("span",{id:"aria-focused"},Q),Bt("span",{id:"aria-results"},ae),Bt("span",{id:"aria-guidance"},ne));return Bt(je.Fragment,null,Bt(che,{id:c},ce&&K),Bt(che,{"aria-live":R,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},a&&!ce&&K))},X$t=Z$t,IW=[{base:"A",letters:"A"},{base:"AA",letters:""},{base:"AE",letters:""},{base:"AO",letters:""},{base:"AU",letters:""},{base:"AV",letters:""},{base:"AY",letters:""},{base:"B",letters:"B"},{base:"C",letters:"C"},{base:"D",letters:"D"},{base:"DZ",letters:""},{base:"Dz",letters:""},{base:"E",letters:"E"},{base:"F",letters:"F"},{base:"G",letters:"G"},{base:"H",letters:"H"},{base:"I",letters:"I"},{base:"J",letters:"J"},{base:"K",letters:"K"},{base:"L",letters:"L"},{base:"LJ",letters:""},{base:"Lj",letters:""},{base:"M",letters:"M"},{base:"N",letters:"N"},{base:"NJ",letters:""},{base:"Nj",letters:""},{base:"O",letters:"O"},{base:"OI",letters:""},{base:"OO",letters:""},{base:"OU",letters:""},{base:"P",letters:"P"},{base:"Q",letters:"Q"},{base:"R",letters:"R"},{base:"S",letters:"S"},{base:"T",letters:"T"},{base:"TZ",letters:""},{base:"U",letters:"U"},{base:"V",letters:"V"},{base:"VY",letters:""},{base:"W",letters:"W"},{base:"X",letters:"X"},{base:"Y",letters:"Y"},{base:"Z",letters:"Z"},{base:"a",letters:"a"},{base:"aa",letters:""},{base:"ae",letters:""},{base:"ao",letters:""},{base:"au",letters:""},{base:"av",letters:""},{base:"ay",letters:""},{base:"b",letters:"b"},{base:"c",letters:"c"},{base:"d",letters:"d"},{base:"dz",letters:""},{base:"e",letters:"e"},{base:"f",letters:"f"},{base:"g",letters:"g"},{base:"h",letters:"h"},{base:"hv",letters:""},{base:"i",letters:"i"},{base:"j",letters:"j"},{base:"k",letters:"k"},{base:"l",letters:"l"},{base:"lj",letters:""},{base:"m",letters:"m"},{base:"n",letters:"n"},{base:"nj",letters:""},{base:"o",letters:"o"},{base:"oi",letters:""},{base:"ou",letters:""},{base:"oo",letters:""},{base:"p",letters:"p"},{base:"q",letters:"q"},{base:"r",letters:"r"},{base:"s",letters:"s"},{base:"t",letters:"t"},{base:"tz",letters:""},{base:"u",letters:"u"},{base:"v",letters:"v"},{base:"vy",letters:""},{base:"w",letters:"w"},{base:"x",letters:"x"},{base:"y",letters:"y"},{base:"z",letters:"z"}],J$t=new RegExp("["+IW.map(function(t){return t.letters}).join("")+"]","g"),QEe={};for(var YU=0;YU<IW.length;YU++)for(var ZU=IW[YU],XU=0;XU<ZU.letters.length;XU++)QEe[ZU.letters[XU]]=ZU.base;var eCe=function(e){return e.replace(J$t,function(i){return QEe[i]})},K$t=G$t(eCe),uhe=function(e){return e.replace(/^\s+|\s+$/g,"")},Q$t=function(e){return"".concat(e.label," ").concat(e.value)},eTt=function(e){return function(i,r){if(i.data.__isNew__)return!0;var n=Yt({ignoreCase:!0,ignoreAccents:!0,stringify:Q$t,trim:!0,matchFrom:"any"},e),s=n.ignoreCase,a=n.ignoreAccents,o=n.stringify,l=n.trim,c=n.matchFrom,h=l?uhe(r):r,f=l?uhe(o(i)):o(i);return s&&(h=h.toLowerCase(),f=f.toLowerCase()),a&&(h=K$t(h),f=eCe(f)),c==="start"?f.substr(0,h.length)===h:f.indexOf(h)>-1}},tTt=["innerRef"];function iTt(t){var e=t.innerRef,i=ug(t,tTt),r=CSt(i,"onExited","in","enter","exit","appear");return Bt("input",Jt({ref:e},r,{css:pK({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var rTt=function(e){e.cancelable&&e.preventDefault(),e.stopPropagation()};function nTt(t){var e=t.isEnabled,i=t.onBottomArrive,r=t.onBottomLeave,n=t.onTopArrive,s=t.onTopLeave,a=je.useRef(!1),o=je.useRef(!1),l=je.useRef(0),c=je.useRef(null),h=je.useCallback(function(S,$){if(c.current!==null){var C=c.current,I=C.scrollTop,P=C.scrollHeight,O=C.clientHeight,N=c.current,R=$>0,G=P-O-I,Y=!1;G>$&&a.current&&(r&&r(S),a.current=!1),R&&o.current&&(s&&s(S),o.current=!1),R&&$>G?(i&&!a.current&&i(S),N.scrollTop=P,Y=!0,a.current=!0):!R&&-$>I&&(n&&!o.current&&n(S),N.scrollTop=0,Y=!0,o.current=!0),Y&&rTt(S)}},[i,r,n,s]),f=je.useCallback(function(S){h(S,S.deltaY)},[h]),g=je.useCallback(function(S){l.current=S.changedTouches[0].clientY},[]),y=je.useCallback(function(S){var $=l.current-S.changedTouches[0].clientY;h(S,$)},[h]),b=je.useCallback(function(S){if(S){var $=TSt?{passive:!1}:!1;S.addEventListener("wheel",f,$),S.addEventListener("touchstart",g,$),S.addEventListener("touchmove",y,$)}},[y,g,f]),_=je.useCallback(function(S){S&&(S.removeEventListener("wheel",f,!1),S.removeEventListener("touchstart",g,!1),S.removeEventListener("touchmove",y,!1))},[y,g,f]);return je.useEffect(function(){if(e){var S=c.current;return b(S),function(){_(S)}}},[e,b,_]),function(S){c.current=S}}var dhe=["boxSizing","height","overflow","paddingRight","position"],hhe={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function phe(t){t.cancelable&&t.preventDefault()}function fhe(t){t.stopPropagation()}function mhe(){var t=this.scrollTop,e=this.scrollHeight,i=t+this.offsetHeight;t===0?this.scrollTop=1:i===e&&(this.scrollTop=t-1)}function ghe(){return"ontouchstart"in window||navigator.maxTouchPoints}var yhe=!!(typeof window<"u"&&window.document&&window.document.createElement),G2=0,nx={capture:!1,passive:!1};function sTt(t){var e=t.isEnabled,i=t.accountForScrollbars,r=i===void 0?!0:i,n=je.useRef({}),s=je.useRef(null),a=je.useCallback(function(l){if(yhe){var c=document.body,h=c&&c.style;if(r&&dhe.forEach(function(b){var _=h&&h[b];n.current[b]=_}),r&&G2<1){var f=parseInt(n.current.paddingRight,10)||0,g=document.body?document.body.clientWidth:0,y=window.innerWidth-g+f||0;Object.keys(hhe).forEach(function(b){var _=hhe[b];h&&(h[b]=_)}),h&&(h.paddingRight="".concat(y,"px"))}c&&ghe()&&(c.addEventListener("touchmove",phe,nx),l&&(l.addEventListener("touchstart",mhe,nx),l.addEventListener("touchmove",fhe,nx))),G2+=1}},[r]),o=je.useCallback(function(l){if(yhe){var c=document.body,h=c&&c.style;G2=Math.max(G2-1,0),r&&G2<1&&dhe.forEach(function(f){var g=n.current[f];h&&(h[f]=g)}),c&&ghe()&&(c.removeEventListener("touchmove",phe,nx),l&&(l.removeEventListener("touchstart",mhe,nx),l.removeEventListener("touchmove",fhe,nx)))}},[r]);return je.useEffect(function(){if(e){var l=s.current;return a(l),function(){o(l)}}},[e,a,o]),function(l){s.current=l}}var aTt=function(e){var i=e.target;return i.ownerDocument.activeElement&&i.ownerDocument.activeElement.blur()},oTt={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function lTt(t){var e=t.children,i=t.lockEnabled,r=t.captureEnabled,n=r===void 0?!0:r,s=t.onBottomArrive,a=t.onBottomLeave,o=t.onTopArrive,l=t.onTopLeave,c=nTt({isEnabled:n,onBottomArrive:s,onBottomLeave:a,onTopArrive:o,onTopLeave:l}),h=sTt({isEnabled:i}),f=function(y){c(y),h(y)};return Bt(je.Fragment,null,i&&Bt("div",{onClick:aTt,css:oTt}),e(f))}var cTt={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},uTt=function(e){var i=e.name,r=e.onFocus;return Bt("input",{required:!0,name:i,tabIndex:-1,"aria-hidden":"true",onFocus:r,css:cTt,value:"",onChange:function(){}})},dTt=uTt;function mK(t){var e;return typeof window<"u"&&window.navigator!=null?t.test(((e=window.navigator.userAgentData)===null||e===void 0?void 0:e.platform)||window.navigator.platform):!1}function hTt(){return mK(/^iPhone/i)}function tCe(){return mK(/^Mac/i)}function pTt(){return mK(/^iPad/i)||tCe()&&navigator.maxTouchPoints>1}function fTt(){return hTt()||pTt()}function mTt(){return tCe()||fTt()}var gTt=function(e){return e.label},yTt=function(e){return e.label},vTt=function(e){return e.value},bTt=function(e){return!!e.isDisabled},wTt={clearIndicator:i$t,container:GSt,control:c$t,dropdownIndicator:e$t,group:p$t,groupHeading:m$t,indicatorsContainer:ZSt,indicatorSeparator:n$t,input:b$t,loadingIndicator:o$t,loadingMessage:jSt,menu:OSt,menuList:zSt,menuPortal:USt,multiValue:$$t,multiValueLabel:T$t,multiValueRemove:k$t,noOptionsMessage:NSt,option:P$t,placeholder:D$t,singleValue:F$t,valueContainer:WSt},_Tt={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},xTt=4,iCe=4,STt=38,$Tt=iCe*2,TTt={baseUnit:iCe,controlHeight:STt,menuGutter:$Tt},JU={borderRadius:xTt,colors:_Tt,spacing:TTt},kTt={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:ahe(),captureMenuScroll:!ahe(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:eTt(),formatGroupLabel:gTt,getOptionLabel:yTt,getOptionValue:vTt,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:bTt,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!SSt(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(e){var i=e.count;return"".concat(i," result").concat(i!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function vhe(t,e,i,r){var n=sCe(t,e,i),s=aCe(t,e,i),a=nCe(t,e),o=z5(t,e);return{type:"option",data:e,isDisabled:n,isSelected:s,label:a,value:o,index:r}}function QD(t,e){return t.options.map(function(i,r){if("options"in i){var n=i.options.map(function(a,o){return vhe(t,a,e,o)}).filter(function(a){return whe(t,a)});return n.length>0?{type:"group",data:i,options:n,index:r}:void 0}var s=vhe(t,i,e,r);return whe(t,s)?s:void 0}).filter(kSt)}function rCe(t){return t.reduce(function(e,i){return i.type==="group"?e.push.apply(e,lK(i.options.map(function(r){return r.data}))):e.push(i.data),e},[])}function bhe(t,e){return t.reduce(function(i,r){return r.type==="group"?i.push.apply(i,lK(r.options.map(function(n){return{data:n.data,id:"".concat(e,"-").concat(r.index,"-").concat(n.index)}}))):i.push({data:r.data,id:"".concat(e,"-").concat(r.index)}),i},[])}function ETt(t,e){return rCe(QD(t,e))}function whe(t,e){var i=t.inputValue,r=i===void 0?"":i,n=e.data,s=e.isSelected,a=e.label,o=e.value;return(!lCe(t)||!s)&&oCe(t,{label:a,value:o,data:n},r)}function CTt(t,e){var i=t.focusedValue,r=t.selectValue,n=r.indexOf(i);if(n>-1){var s=e.indexOf(i);if(s>-1)return i;if(n<e.length)return e[n]}return null}function ITt(t,e){var i=t.focusedOption;return i&&e.indexOf(i)>-1?i:e[0]}var KU=function(e,i){var r,n=(r=e.find(function(s){return s.data===i}))===null||r===void 0?void 0:r.id;return n||null},nCe=function(e,i){return e.getOptionLabel(i)},z5=function(e,i){return e.getOptionValue(i)};function sCe(t,e,i){return typeof t.isOptionDisabled=="function"?t.isOptionDisabled(e,i):!1}function aCe(t,e,i){if(i.indexOf(e)>-1)return!0;if(typeof t.isOptionSelected=="function")return t.isOptionSelected(e,i);var r=z5(t,e);return i.some(function(n){return z5(t,n)===r})}function oCe(t,e,i){return t.filterOption?t.filterOption(e,i):!0}var lCe=function(e){var i=e.hideSelectedOptions,r=e.isMulti;return i===void 0?r:i},MTt=1,cCe=(function(t){uxt(i,t);var e=pxt(i);function i(r){var n;if(lxt(this,i),n=e.call(this,r),n.state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:"",isAppleDevice:!1},n.blockOptionHover=!1,n.isComposing=!1,n.commonProps=void 0,n.initialTouchX=0,n.initialTouchY=0,n.openAfterFocus=!1,n.scrollToFocusedOptionOnUpdate=!1,n.userIsDragging=void 0,n.controlRef=null,n.getControlRef=function(l){n.controlRef=l},n.focusedOptionRef=null,n.getFocusedOptionRef=function(l){n.focusedOptionRef=l},n.menuListRef=null,n.getMenuListRef=function(l){n.menuListRef=l},n.inputRef=null,n.getInputRef=function(l){n.inputRef=l},n.focus=n.focusInput,n.blur=n.blurInput,n.onChange=function(l,c){var h=n.props,f=h.onChange,g=h.name;c.name=g,n.ariaOnChange(l,c),f(l,c)},n.setValue=function(l,c,h){var f=n.props,g=f.closeMenuOnSelect,y=f.isMulti,b=f.inputValue;n.onInputChange("",{action:"set-value",prevInputValue:b}),g&&(n.setState({inputIsHiddenAfterUpdate:!y}),n.onMenuClose()),n.setState({clearFocusValueOnUpdate:!0}),n.onChange(l,{action:c,option:h})},n.selectOption=function(l){var c=n.props,h=c.blurInputOnSelect,f=c.isMulti,g=c.name,y=n.state.selectValue,b=f&&n.isOptionSelected(l,y),_=n.isOptionDisabled(l,y);if(b){var S=n.getOptionValue(l);n.setValue(y.filter(function($){return n.getOptionValue($)!==S}),"deselect-option",l)}else if(!_)f?n.setValue([].concat(lK(y),[l]),"select-option",l):n.setValue(l,"select-option");else{n.ariaOnChange(l,{action:"select-option",option:l,name:g});return}h&&n.blurInput()},n.removeValue=function(l){var c=n.props.isMulti,h=n.state.selectValue,f=n.getOptionValue(l),g=h.filter(function(b){return n.getOptionValue(b)!==f}),y=e3(c,g,g[0]||null);n.onChange(y,{action:"remove-value",removedValue:l}),n.focusInput()},n.clearValue=function(){var l=n.state.selectValue;n.onChange(e3(n.props.isMulti,[],null),{action:"clear",removedValues:l})},n.popValue=function(){var l=n.props.isMulti,c=n.state.selectValue,h=c[c.length-1],f=c.slice(0,c.length-1),g=e3(l,f,f[0]||null);h&&n.onChange(g,{action:"pop-value",removedValue:h})},n.getFocusedOptionId=function(l){return KU(n.state.focusableOptionsWithIds,l)},n.getFocusableOptionsWithIds=function(){return bhe(QD(n.props,n.state.selectValue),n.getElementId("option"))},n.getValue=function(){return n.state.selectValue},n.cx=function(){for(var l=arguments.length,c=new Array(l),h=0;h<l;h++)c[h]=arguments[h];return vSt.apply(void 0,[n.props.classNamePrefix].concat(c))},n.getOptionLabel=function(l){return nCe(n.props,l)},n.getOptionValue=function(l){return z5(n.props,l)},n.getStyles=function(l,c){var h=n.props.unstyled,f=wTt[l](c,h);f.boxSizing="border-box";var g=n.props.styles[l];return g?g(f,c):f},n.getClassNames=function(l,c){var h,f;return(h=(f=n.props.classNames)[l])===null||h===void 0?void 0:h.call(f,c)},n.getElementId=function(l){return"".concat(n.state.instancePrefix,"-").concat(l)},n.getComponents=function(){return B$t(n.props)},n.buildCategorizedOptions=function(){return QD(n.props,n.state.selectValue)},n.getCategorizedOptions=function(){return n.props.menuIsOpen?n.buildCategorizedOptions():[]},n.buildFocusableOptions=function(){return rCe(n.buildCategorizedOptions())},n.getFocusableOptions=function(){return n.props.menuIsOpen?n.buildFocusableOptions():[]},n.ariaOnChange=function(l,c){n.setState({ariaSelection:Yt({value:l},c)})},n.onMenuMouseDown=function(l){l.button===0&&(l.stopPropagation(),l.preventDefault(),n.focusInput())},n.onMenuMouseMove=function(l){n.blockOptionHover=!1},n.onControlMouseDown=function(l){if(!l.defaultPrevented){var c=n.props.openMenuOnClick;n.state.isFocused?n.props.menuIsOpen?l.target.tagName!=="INPUT"&&l.target.tagName!=="TEXTAREA"&&n.onMenuClose():c&&n.openMenu("first"):(c&&(n.openAfterFocus=!0),n.focusInput()),l.target.tagName!=="INPUT"&&l.target.tagName!=="TEXTAREA"&&l.preventDefault()}},n.onDropdownIndicatorMouseDown=function(l){if(!(l&&l.type==="mousedown"&&l.button!==0)&&!n.props.isDisabled){var c=n.props,h=c.isMulti,f=c.menuIsOpen;n.focusInput(),f?(n.setState({inputIsHiddenAfterUpdate:!h}),n.onMenuClose()):n.openMenu("first"),l.preventDefault()}},n.onClearIndicatorMouseDown=function(l){l&&l.type==="mousedown"&&l.button!==0||(n.clearValue(),l.preventDefault(),n.openAfterFocus=!1,l.type==="touchend"?n.focusInput():setTimeout(function(){return n.focusInput()}))},n.onScroll=function(l){typeof n.props.closeMenuOnScroll=="boolean"?l.target instanceof HTMLElement&&Tj(l.target)&&n.props.onMenuClose():typeof n.props.closeMenuOnScroll=="function"&&n.props.closeMenuOnScroll(l)&&n.props.onMenuClose()},n.onCompositionStart=function(){n.isComposing=!0},n.onCompositionEnd=function(){n.isComposing=!1},n.onTouchStart=function(l){var c=l.touches,h=c&&c.item(0);h&&(n.initialTouchX=h.clientX,n.initialTouchY=h.clientY,n.userIsDragging=!1)},n.onTouchMove=function(l){var c=l.touches,h=c&&c.item(0);if(h){var f=Math.abs(h.clientX-n.initialTouchX),g=Math.abs(h.clientY-n.initialTouchY),y=5;n.userIsDragging=f>y||g>y}},n.onTouchEnd=function(l){n.userIsDragging||(n.controlRef&&!n.controlRef.contains(l.target)&&n.menuListRef&&!n.menuListRef.contains(l.target)&&n.blurInput(),n.initialTouchX=0,n.initialTouchY=0)},n.onControlTouchEnd=function(l){n.userIsDragging||n.onControlMouseDown(l)},n.onClearIndicatorTouchEnd=function(l){n.userIsDragging||n.onClearIndicatorMouseDown(l)},n.onDropdownIndicatorTouchEnd=function(l){n.userIsDragging||n.onDropdownIndicatorMouseDown(l)},n.handleInputChange=function(l){var c=n.props.inputValue,h=l.currentTarget.value;n.setState({inputIsHiddenAfterUpdate:!1}),n.onInputChange(h,{action:"input-change",prevInputValue:c}),n.props.menuIsOpen||n.onMenuOpen()},n.onInputFocus=function(l){n.props.onFocus&&n.props.onFocus(l),n.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(n.openAfterFocus||n.props.openMenuOnFocus)&&n.openMenu("first"),n.openAfterFocus=!1},n.onInputBlur=function(l){var c=n.props.inputValue;if(n.menuListRef&&n.menuListRef.contains(document.activeElement)){n.inputRef.focus();return}n.props.onBlur&&n.props.onBlur(l),n.onInputChange("",{action:"input-blur",prevInputValue:c}),n.onMenuClose(),n.setState({focusedValue:null,isFocused:!1})},n.onOptionHover=function(l){if(!(n.blockOptionHover||n.state.focusedOption===l)){var c=n.getFocusableOptions(),h=c.indexOf(l);n.setState({focusedOption:l,focusedOptionId:h>-1?n.getFocusedOptionId(l):null})}},n.shouldHideSelectedOptions=function(){return lCe(n.props)},n.onValueInputFocus=function(l){l.preventDefault(),l.stopPropagation(),n.focus()},n.onKeyDown=function(l){var c=n.props,h=c.isMulti,f=c.backspaceRemovesValue,g=c.escapeClearsValue,y=c.inputValue,b=c.isClearable,_=c.isDisabled,S=c.menuIsOpen,$=c.onKeyDown,C=c.tabSelectsValue,I=c.openMenuOnFocus,P=n.state,O=P.focusedOption,N=P.focusedValue,R=P.selectValue;if(!_&&!(typeof $=="function"&&($(l),l.defaultPrevented))){switch(n.blockOptionHover=!0,l.key){case"ArrowLeft":if(!h||y)return;n.focusValue("previous");break;case"ArrowRight":if(!h||y)return;n.focusValue("next");break;case"Delete":case"Backspace":if(y)return;if(N)n.removeValue(N);else{if(!f)return;h?n.popValue():b&&n.clearValue()}break;case"Tab":if(n.isComposing||l.shiftKey||!S||!C||!O||I&&n.isOptionSelected(O,R))return;n.selectOption(O);break;case"Enter":if(l.keyCode===229)break;if(S){if(!O||n.isComposing)return;n.selectOption(O);break}return;case"Escape":S?(n.setState({inputIsHiddenAfterUpdate:!1}),n.onInputChange("",{action:"menu-close",prevInputValue:y}),n.onMenuClose()):b&&g&&n.clearValue();break;case" ":if(y)return;if(!S){n.openMenu("first");break}if(!O)return;n.selectOption(O);break;case"ArrowUp":S?n.focusOption("up"):n.openMenu("last");break;case"ArrowDown":S?n.focusOption("down"):n.openMenu("first");break;case"PageUp":if(!S)return;n.focusOption("pageup");break;case"PageDown":if(!S)return;n.focusOption("pagedown");break;case"Home":if(!S)return;n.focusOption("first");break;case"End":if(!S)return;n.focusOption("last");break;default:return}l.preventDefault()}},n.state.instancePrefix="react-select-"+(n.props.instanceId||++MTt),n.state.selectValue=nhe(r.value),r.menuIsOpen&&n.state.selectValue.length){var s=n.getFocusableOptionsWithIds(),a=n.buildFocusableOptions(),o=a.indexOf(n.state.selectValue[0]);n.state.focusableOptionsWithIds=s,n.state.focusedOption=a[o],n.state.focusedOptionId=KU(s,a[o])}return n}return cxt(i,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&she(this.menuListRef,this.focusedOptionRef),mTt()&&this.setState({isAppleDevice:!0})}},{key:"componentDidUpdate",value:function(n){var s=this.props,a=s.isDisabled,o=s.menuIsOpen,l=this.state.isFocused;(l&&!a&&n.isDisabled||l&&o&&!n.menuIsOpen)&&this.focusInput(),l&&a&&!n.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!l&&!a&&n.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(she(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(n,s){this.props.onInputChange(n,s)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(n){var s=this,a=this.state,o=a.selectValue,l=a.isFocused,c=this.buildFocusableOptions(),h=n==="first"?0:c.length-1;if(!this.props.isMulti){var f=c.indexOf(o[0]);f>-1&&(h=f)}this.scrollToFocusedOptionOnUpdate=!(l&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:c[h],focusedOptionId:this.getFocusedOptionId(c[h])},function(){return s.onMenuOpen()})}},{key:"focusValue",value:function(n){var s=this.state,a=s.selectValue,o=s.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var l=a.indexOf(o);o||(l=-1);var c=a.length-1,h=-1;if(a.length){switch(n){case"previous":l===0?h=0:l===-1?h=c:h=l-1;break;case"next":l>-1&&l<c&&(h=l+1);break}this.setState({inputIsHidden:h!==-1,focusedValue:a[h]})}}}},{key:"focusOption",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",s=this.props.pageSize,a=this.state.focusedOption,o=this.getFocusableOptions();if(o.length){var l=0,c=o.indexOf(a);a||(c=-1),n==="up"?l=c>0?c-1:o.length-1:n==="down"?l=(c+1)%o.length:n==="pageup"?(l=c-s,l<0&&(l=0)):n==="pagedown"?(l=c+s,l>o.length-1&&(l=o.length-1)):n==="last"&&(l=o.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:o[l],focusedValue:null,focusedOptionId:this.getFocusedOptionId(o[l])})}}},{key:"getTheme",value:(function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(JU):Yt(Yt({},JU),this.props.theme):JU})},{key:"getCommonProps",value:function(){var n=this.clearValue,s=this.cx,a=this.getStyles,o=this.getClassNames,l=this.getValue,c=this.selectOption,h=this.setValue,f=this.props,g=f.isMulti,y=f.isRtl,b=f.options,_=this.hasValue();return{clearValue:n,cx:s,getStyles:a,getClassNames:o,getValue:l,hasValue:_,isMulti:g,isRtl:y,options:b,selectOption:c,selectProps:f,setValue:h,theme:this.getTheme()}}},{key:"hasValue",value:function(){var n=this.state.selectValue;return n.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var n=this.props,s=n.isClearable,a=n.isMulti;return s===void 0?a:s}},{key:"isOptionDisabled",value:function(n,s){return sCe(this.props,n,s)}},{key:"isOptionSelected",value:function(n,s){return aCe(this.props,n,s)}},{key:"filterOption",value:function(n,s){return oCe(this.props,n,s)}},{key:"formatOptionLabel",value:function(n,s){if(typeof this.props.formatOptionLabel=="function"){var a=this.props.inputValue,o=this.state.selectValue;return this.props.formatOptionLabel(n,{context:s,inputValue:a,selectValue:o})}else return this.getOptionLabel(n)}},{key:"formatGroupLabel",value:function(n){return this.props.formatGroupLabel(n)}},{key:"startListeningComposition",value:(function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))})},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:(function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))})},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:(function(){var n=this.props,s=n.isDisabled,a=n.isSearchable,o=n.inputId,l=n.inputValue,c=n.tabIndex,h=n.form,f=n.menuIsOpen,g=n.required,y=this.getComponents(),b=y.Input,_=this.state,S=_.inputIsHidden,$=_.ariaSelection,C=this.commonProps,I=o||this.getElementId("input"),P=Yt(Yt(Yt({"aria-autocomplete":"list","aria-expanded":f,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":g,role:"combobox","aria-activedescendant":this.state.isAppleDevice?void 0:this.state.focusedOptionId||""},f&&{"aria-controls":this.getElementId("listbox")}),!a&&{"aria-readonly":!0}),this.hasValue()?$?.action==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return a?je.createElement(b,Jt({},C,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:I,innerRef:this.getInputRef,isDisabled:s,isHidden:S,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:c,form:h,type:"text",value:l},P)):je.createElement(iTt,Jt({id:I,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:D5,onFocus:this.onInputFocus,disabled:s,tabIndex:c,inputMode:"none",form:h,value:""},P))})},{key:"renderPlaceholderOrValue",value:function(){var n=this,s=this.getComponents(),a=s.MultiValue,o=s.MultiValueContainer,l=s.MultiValueLabel,c=s.MultiValueRemove,h=s.SingleValue,f=s.Placeholder,g=this.commonProps,y=this.props,b=y.controlShouldRenderValue,_=y.isDisabled,S=y.isMulti,$=y.inputValue,C=y.placeholder,I=this.state,P=I.selectValue,O=I.focusedValue,N=I.isFocused;if(!this.hasValue()||!b)return $?null:je.createElement(f,Jt({},g,{key:"placeholder",isDisabled:_,isFocused:N,innerProps:{id:this.getElementId("placeholder")}}),C);if(S)return P.map(function(G,Y){var Q=G===O,ae="".concat(n.getOptionLabel(G),"-").concat(n.getOptionValue(G));return je.createElement(a,Jt({},g,{components:{Container:o,Label:l,Remove:c},isFocused:Q,isDisabled:_,key:ae,index:Y,removeProps:{onClick:function(){return n.removeValue(G)},onTouchEnd:function(){return n.removeValue(G)},onMouseDown:function(ne){ne.preventDefault()}},data:G}),n.formatOptionLabel(G,"value"))});if($)return null;var R=P[0];return je.createElement(h,Jt({},g,{data:R,isDisabled:_}),this.formatOptionLabel(R,"value"))}},{key:"renderClearIndicator",value:function(){var n=this.getComponents(),s=n.ClearIndicator,a=this.commonProps,o=this.props,l=o.isDisabled,c=o.isLoading,h=this.state.isFocused;if(!this.isClearable()||!s||l||!this.hasValue()||c)return null;var f={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return je.createElement(s,Jt({},a,{innerProps:f,isFocused:h}))}},{key:"renderLoadingIndicator",value:function(){var n=this.getComponents(),s=n.LoadingIndicator,a=this.commonProps,o=this.props,l=o.isDisabled,c=o.isLoading,h=this.state.isFocused;if(!s||!c)return null;var f={"aria-hidden":"true"};return je.createElement(s,Jt({},a,{innerProps:f,isDisabled:l,isFocused:h}))}},{key:"renderIndicatorSeparator",value:function(){var n=this.getComponents(),s=n.DropdownIndicator,a=n.IndicatorSeparator;if(!s||!a)return null;var o=this.commonProps,l=this.props.isDisabled,c=this.state.isFocused;return je.createElement(a,Jt({},o,{isDisabled:l,isFocused:c}))}},{key:"renderDropdownIndicator",value:function(){var n=this.getComponents(),s=n.DropdownIndicator;if(!s)return null;var a=this.commonProps,o=this.props.isDisabled,l=this.state.isFocused,c={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return je.createElement(s,Jt({},a,{innerProps:c,isDisabled:o,isFocused:l}))}},{key:"renderMenu",value:function(){var n=this,s=this.getComponents(),a=s.Group,o=s.GroupHeading,l=s.Menu,c=s.MenuList,h=s.MenuPortal,f=s.LoadingMessage,g=s.NoOptionsMessage,y=s.Option,b=this.commonProps,_=this.state.focusedOption,S=this.props,$=S.captureMenuScroll,C=S.inputValue,I=S.isLoading,P=S.loadingMessage,O=S.minMenuHeight,N=S.maxMenuHeight,R=S.menuIsOpen,G=S.menuPlacement,Y=S.menuPosition,Q=S.menuPortalTarget,ae=S.menuShouldBlockScroll,ce=S.menuShouldScrollIntoView,ne=S.noOptionsMessage,K=S.onMenuScrollToTop,le=S.onMenuScrollToBottom;if(!R)return null;var re=function(Le,Je){var st=Le.type,ut=Le.data,Pt=Le.isDisabled,pi=Le.isSelected,it=Le.label,Wn=Le.value,fn=_===ut,El=Pt?void 0:function(){return n.onOptionHover(ut)},Ud=Pt?void 0:function(){return n.selectOption(ut)},ra="".concat(n.getElementId("option"),"-").concat(Je),Cl={id:ra,onClick:Ud,onMouseMove:El,onMouseOver:El,tabIndex:-1,role:"option","aria-selected":n.state.isAppleDevice?void 0:pi};return je.createElement(y,Jt({},b,{innerProps:Cl,data:ut,isDisabled:Pt,isSelected:pi,key:ra,label:it,type:st,value:Wn,isFocused:fn,innerRef:fn?n.getFocusedOptionRef:void 0}),n.formatOptionLabel(Le.data,"menu"))},he;if(this.hasOptions())he=this.getCategorizedOptions().map(function(be){if(be.type==="group"){var Le=be.data,Je=be.options,st=be.index,ut="".concat(n.getElementId("group"),"-").concat(st),Pt="".concat(ut,"-heading");return je.createElement(a,Jt({},b,{key:ut,data:Le,options:Je,Heading:o,headingProps:{id:Pt,data:be.data},label:n.formatGroupLabel(be.data)}),be.options.map(function(pi){return re(pi,"".concat(st,"-").concat(pi.index))}))}else if(be.type==="option")return re(be,"".concat(be.index))});else if(I){var xe=P({inputValue:C});if(xe===null)return null;he=je.createElement(f,b,xe)}else{var Pe=ne({inputValue:C});if(Pe===null)return null;he=je.createElement(g,b,Pe)}var He={minMenuHeight:O,maxMenuHeight:N,menuPlacement:G,menuPosition:Y,menuShouldScrollIntoView:ce},oe=je.createElement(LSt,Jt({},b,He),function(be){var Le=be.ref,Je=be.placerProps,st=Je.placement,ut=Je.maxHeight;return je.createElement(l,Jt({},b,He,{innerRef:Le,innerProps:{onMouseDown:n.onMenuMouseDown,onMouseMove:n.onMenuMouseMove},isLoading:I,placement:st}),je.createElement(lTt,{captureEnabled:$,onTopArrive:K,onBottomArrive:le,lockEnabled:ae},function(Pt){return je.createElement(c,Jt({},b,{innerRef:function(it){n.getMenuListRef(it),Pt(it)},innerProps:{role:"listbox","aria-multiselectable":b.isMulti,id:n.getElementId("listbox")},isLoading:I,maxHeight:ut,focusedOption:_}),he)}))});return Q||Y==="fixed"?je.createElement(h,Jt({},b,{appendTo:Q,controlElement:this.controlRef,menuPlacement:G,menuPosition:Y}),oe):oe}},{key:"renderFormField",value:function(){var n=this,s=this.props,a=s.delimiter,o=s.isDisabled,l=s.isMulti,c=s.name,h=s.required,f=this.state.selectValue;if(h&&!this.hasValue()&&!o)return je.createElement(dTt,{name:c,onFocus:this.onValueInputFocus});if(!(!c||o))if(l)if(a){var g=f.map(function(_){return n.getOptionValue(_)}).join(a);return je.createElement("input",{name:c,type:"hidden",value:g})}else{var y=f.length>0?f.map(function(_,S){return je.createElement("input",{key:"i-".concat(S),name:c,type:"hidden",value:n.getOptionValue(_)})}):je.createElement("input",{name:c,type:"hidden",value:""});return je.createElement("div",null,y)}else{var b=f[0]?this.getOptionValue(f[0]):"";return je.createElement("input",{name:c,type:"hidden",value:b})}}},{key:"renderLiveRegion",value:function(){var n=this.commonProps,s=this.state,a=s.ariaSelection,o=s.focusedOption,l=s.focusedValue,c=s.isFocused,h=s.selectValue,f=this.getFocusableOptions();return je.createElement(X$t,Jt({},n,{id:this.getElementId("live-region"),ariaSelection:a,focusedOption:o,focusedValue:l,isFocused:c,selectValue:h,focusableOptions:f,isAppleDevice:this.state.isAppleDevice}))}},{key:"render",value:function(){var n=this.getComponents(),s=n.Control,a=n.IndicatorsContainer,o=n.SelectContainer,l=n.ValueContainer,c=this.props,h=c.className,f=c.id,g=c.isDisabled,y=c.menuIsOpen,b=this.state.isFocused,_=this.commonProps=this.getCommonProps();return je.createElement(o,Jt({},_,{className:h,innerProps:{id:f,onKeyDown:this.onKeyDown},isDisabled:g,isFocused:b}),this.renderLiveRegion(),je.createElement(s,Jt({},_,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:g,isFocused:b,menuIsOpen:y}),je.createElement(l,Jt({},_,{isDisabled:g}),this.renderPlaceholderOrValue(),this.renderInput()),je.createElement(a,Jt({},_,{isDisabled:g}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(n,s){var a=s.prevProps,o=s.clearFocusValueOnUpdate,l=s.inputIsHiddenAfterUpdate,c=s.ariaSelection,h=s.isFocused,f=s.prevWasFocused,g=s.instancePrefix,y=n.options,b=n.value,_=n.menuIsOpen,S=n.inputValue,$=n.isMulti,C=nhe(b),I={};if(a&&(b!==a.value||y!==a.options||_!==a.menuIsOpen||S!==a.inputValue)){var P=_?ETt(n,C):[],O=_?bhe(QD(n,C),"".concat(g,"-option")):[],N=o?CTt(s,C):null,R=ITt(s,P),G=KU(O,R);I={selectValue:C,focusedOption:R,focusedOptionId:G,focusableOptionsWithIds:O,focusedValue:N,clearFocusValueOnUpdate:!1}}var Y=l!=null&&n!==a?{inputIsHidden:l,inputIsHiddenAfterUpdate:void 0}:{},Q=c,ae=h&&f;return h&&!ae&&(Q={value:e3($,C,C[0]||null),options:C,action:"initial-input-focus"},ae=!f),c?.action==="initial-input-focus"&&(Q=null),Yt(Yt(Yt({},I),Y),{},{prevProps:n,ariaSelection:Q,prevWasFocused:ae})}}]),i})(je.Component);cCe.defaultProps=kTt;var ATt=je.forwardRef(function(t,e){var i=oxt(t);return je.createElement(cCe,Jt({ref:e},i))}),QU=ATt;const PTt={contractp:void 0,landtype:void 0,landsection:void 0,updateContractcps:void 0,updateLandtype:void 0,updateLandsection:void 0},gK=je.createContext({...PTt});class OTt{constructor(e,i){this.dropDownQuery=async()=>{if(this.featureLayers.length===1)if(this.fieldNames[1]===void 0&&this.fieldNames[2]===void 0){var r=this.featureLayers[0].createQuery();return r.outFields=["*"],r.orderByFields=[this.fieldNames[0]],r.groupByFieldsForStatistics=[this.fieldNames[0]],(await this.featureLayers[0].queryFeatures(r).then(S=>{var $=S.features;const C=$.map((P,O)=>{const R=P.attributes[this.fieldNames[0]];return Object.assign({field1:R})});return C.filter((P,O)=>C.findIndex(N=>N.field1===P.field1)===O)})).map(S=>S.field1).filter((S,$,C)=>C.indexOf(S)===$).map((S,$)=>Object.assign({field1:S}))}else if(this.fieldNames[2]===void 0){var n=this.featureLayers[0].createQuery();n.outFields=[this.fieldNames[0],this.fieldNames[1]],n.orderByFields=[this.fieldNames[0],this.fieldNames[1]],n.groupByFieldsForStatistics=[this.fieldNames[0],this.fieldNames[1]];const y=await this.featureLayers[0].queryFeatures(n).then(S=>{var $=S.features;const C=$.map((P,O)=>{const N=P.attributes,R=N[this.fieldNames[0]],G=N[this.fieldNames[1]];return Object.assign({field1:R,field2:G})});return C.filter((P,O)=>C.findIndex(N=>N.field1===P.field1&&N.field2===P.field2)===O)});return y.map(S=>S.field1).filter((S,$,C)=>C.indexOf(S)===$).map((S,$)=>{const P=y.filter(O=>O.field1===S).map(O=>O.field2).filter((O,N,R)=>R.indexOf(O)===N).map((O,N)=>Object.assign({name:O}));return Object.assign({field1:S,field2:P})})}else{var s=this.featureLayers[0].createQuery();s.outFields=["*"],s.orderByFields=[this.fieldNames[0],this.fieldNames[1]],s.groupByFieldsForStatistics=[this.fieldNames[0],this.fieldNames[1]];const y=await this.featureLayers[0].queryFeatures(s).then(S=>{var $=S.features;const C=$.map((P,O)=>{const N=P.attributes,R=N[this.fieldNames[0]],G=N[this.fieldNames[1]],Y=N[this.fieldNames[2]];return Object.assign({field1:R,field2:G,field3:Y})});return C.filter((P,O)=>C.findIndex(N=>N.field1===P.field1&&N.field2===P.field2&&N.field3===P.field3)===O)});return y.map(S=>S.field1).filter((S,$,C)=>C.indexOf(S)===$).map((S,$)=>{const P=y.filter(O=>O.field1===S).map(O=>O.field2).filter((O,N,R)=>R.indexOf(O)===N).map((O,N)=>{const Y=y.filter(Q=>Q.field1===S&&Q.field2===O).map(Q=>Q.field3).filter((Q,ae,ce)=>ce.indexOf(Q)===ae).map((Q,ae)=>Object.assign({name:Q}));return Object.assign({name:O,field3:Y})});return Object.assign({field1:S,field2:P})})}else if(this.fieldNames[1]===void 0&&this.fieldNames[2]===void 0){var a=this.featureLayers[0].createQuery();a.outFields=["*"],a.orderByFields=[this.fieldNames[0]],a.groupByFieldsForStatistics=[this.fieldNames[0]];const g=this.featureLayers[0].queryFeatures(a).then(I=>{var P=I.features;const O=P.map((R,G)=>{const Q=R.attributes[this.fieldNames[0]];return Object.assign({field1:Q})});return O.filter((R,G)=>O.findIndex(Y=>Y.field1===R.field1)===G)});var o=this.featureLayers[1].createQuery();o.outFields=["*"];const y=this.featureLayers[1].queryFeatures(o).then(I=>{var P=I.features;const O=P.map((R,G)=>{const Q=R.attributes[this.fieldNames[0]];return Object.assign({field1:Q})});return O.filter((R,G)=>O.findIndex(Y=>Y.field1===R.field1)===G)}),b=await g,_=await y;return b.concat(_).map(I=>I.field1).filter((I,P,O)=>O.indexOf(I)===P).map((I,P)=>Object.assign({field1:I}))}else if(this.fieldNames[2]===void 0){var l=this.featureLayers[0].createQuery();l.outFields=["*"],l.orderByFields=[this.fieldNames[0],this.fieldNames[1]],l.groupByFieldsForStatistics=[this.fieldNames[0],this.fieldNames[1]];const g=this.featureLayers[0].queryFeatures(l).then(I=>{var P=I.features;const O=P.map((R,G)=>{const Y=R.attributes,Q=Y[this.fieldNames[0]],ae=Y[this.fieldNames[1]];return Object.assign({field1:Q,field2:ae})});return O.filter((R,G)=>O.findIndex(Y=>Y.field1===R.field1&&Y.field2===R.field2)===G)});var c=this.featureLayers[1].createQuery();c.outFields=["*"];const y=this.featureLayers[1].queryFeatures(c).then(I=>{var P=I.features;const O=P.map((R,G)=>{const Y=R.attributes,Q=Y[this.fieldNames[0]],ae=Y[this.fieldNames[1]];return Object.assign({field1:Q,field2:ae})});return O.filter((R,G)=>O.findIndex(Y=>Y.field1===R.field1&&Y.field2===R.field2)===G)}),b=await g,_=await y,S=b.concat(_);return S.map(I=>I.field1).filter((I,P,O)=>O.indexOf(I)===P).map((I,P)=>{const R=S.filter(G=>G.field1===I).map(G=>G.field2).filter((G,Y,Q)=>Q.indexOf(G)===Y).map((G,Y)=>Object.assign({name:G}));return Object.assign({field1:I,field2:R})})}else{var h=this.featureLayers[0].createQuery();h.outFields=["*"],h.orderByFields=[this.fieldNames[0],this.fieldNames[1]],h.groupByFieldsForStatistics=[this.fieldNames[0],this.fieldNames[1]];const g=this.featureLayers[0].queryFeatures(h).then(I=>{var P=I.features;const O=P.map((R,G)=>{const Y=R.attributes,Q=Y[this.fieldNames[0]],ae=Y[this.fieldNames[1]],ce=Y[this.fieldNames[2]];return Object.assign({field1:Q,field2:ae,field3:ce})});return O.filter((R,G)=>O.findIndex(Y=>Y.field1===R.field1&&Y.field2===R.field2&&Y.field3===R.field3)===G)});var f=this.featureLayers[1].createQuery();f.outFields=["*"];const y=this.featureLayers[1].queryFeatures(f).then(I=>{var P=I.features;const O=P.map((R,G)=>{const Y=R.attributes,Q=Y[this.fieldNames[0]],ae=Y[this.fieldNames[1]],ce=Y[this.fieldNames[2]];return Object.assign({field1:Q,field2:ae,field3:ce})});return O.filter((R,G)=>O.findIndex(Y=>Y.field1===R.field1&&Y.field2===R.field2&&Y.field3===R.field3)===G)}),b=await g,_=await y,S=b.concat(_);return S.map(I=>I.field1).filter((I,P,O)=>O.indexOf(I)===P).map((I,P)=>{const R=S.filter(G=>G.field1===I).map(G=>G.field2).filter((G,Y,Q)=>Q.indexOf(G)===Y).map((G,Y)=>{const ce=S.filter(ne=>ne.field1===I&&ne.field2===G).map(ne=>ne.field3).filter((ne,K,le)=>le.indexOf(ne)===K).map((ne,K)=>Object.assign({name:ne}));return Object.assign({name:G,field3:ce})});return Object.assign({field1:I,field2:R})})}},this.featureLayers=e,this.fieldNames=i}}function LTt(){const{updateContractcps:t,updateLandtype:e,updateLandsection:i}=je.use(gK),[r,n]=je.useState(),[s,a]=je.useState(null),[o,l]=je.useState(null),[c,h]=je.useState(null),[f,g]=je.useState([]),[y,b]=je.useState([]);je.useEffect(()=>{new OTt([Xs],["Package","Type","Station1"]).dropDownQuery().then(I=>{n(I)})},[]);const _=C=>{a(C),g(C.field2),l(null),h(null),t(C.field1),e(void 0),i(void 0)},S=C=>{l(C),b(C.field3),h(null),e(C.name),i(void 0)},$=C=>{h(C),i(C.name)};return ht.jsx(ht.Fragment,{children:ht.jsx(DTt,{handleContractPackageChange:_,handleLandTypeChange:S,handleLandSectionChange:$,initCpTypeSection:r,contractPackage:s,landType:o,landSection:c,landTypeList:f,landSectionList:y})})}function DTt({handleContractPackageChange:t,handleLandTypeChange:e,handleLandSectionChange:i,initCpTypeSection:r,contractPackage:n,landType:s,landSection:a,landTypeList:o,landSectionList:l}){const c={option:(h,{isFocused:f,isSelected:g})=>({...h,backgroundColor:f?"#555555":"#2b2b2b",color:"#ffffff"}),control:h=>({...h,backgroundColor:"#2b2b2b",borderColor:"#949494",height:35,width:"170px",color:"#ffffff"}),singleValue:h=>({...h,color:"#fff"})};return ht.jsx("div",{className:"dropdownFilter",children:ht.jsxs("div",{className:"dropdownFilterLayout",children:[ht.jsx("b",{style:{color:"white",margin:10,fontSize:"0.9vw"}}),ht.jsx(QU,{placeholder:"Select CP",value:n,options:r,onChange:t,getOptionLabel:h=>h.field1,styles:c}),ht.jsx("br",{}),ht.jsx("b",{style:{color:"white",margin:10,fontSize:"0.9vw"}}),ht.jsx(QU,{placeholder:"Select Land Type",value:s,options:o,onChange:e,getOptionLabel:h=>h.name,styles:c}),ht.jsx("br",{}),ht.jsx("b",{style:{color:"white",margin:10,fontSize:"0.9vw"}}),ht.jsx(QU,{placeholder:"Select Station/Area",value:a,options:l,onChange:i,getOptionLabel:h=>h.name,styles:c})]})})}function RTt(){const[t,e]=je.useState(null);return je.useEffect(()=>{X1t().then(i=>{e(i)})},[]),ht.jsx(ht.Fragment,{children:ht.jsxs("header",{slot:"header",id:"header-title",style:{display:"flex",height:"70px",padding:"0 1rem",borderStyle:"solid",borderRightWidth:5,borderLeftWidth:5,borderBottomWidth:4,borderTopWidth:5,borderColor:"#555555"},children:[ht.jsx("img",{src:"https://EijiGorilla.github.io/Symbols/Projec_Logo/DOTr_Logo_v2.png",alt:"DOTr Logo",height:"55px",width:"55px",style:{marginBottom:"auto",marginTop:"auto"}}),ht.jsx("b",{className:"headerTitle",children:"MMSP LAND (HL)"}),ht.jsx("div",{className:"date",children:t?"As of "+t:""}),ht.jsx(LTt,{}),ht.jsx("img",{src:"https://EijiGorilla.github.io/Symbols/Projec_Logo/MMSP.png",alt:"GCR Logo",height:"50px",width:"75px",style:{marginBottom:"auto",marginTop:"auto",marginLeft:"auto",marginRight:"5rem"}})]})})}class zTt extends wj{setupDefaultRules(){super.setupDefaultRules();const e=this._root.interfaceColors,i=this.rule.bind(this);i("PercentSeries").setAll({legendLabelText:"{category}",legendValueText:"{valuePercentTotal.formatNumber('0.00p')}",colors:P5.new(this._root,{}),width:bi,height:bi}),i("PieChart").setAll({radius:Ks(80),startAngle:-90,endAngle:270}),i("PieSeries").setAll({alignLabels:!0,startAngle:-90,endAngle:270}),i("PieSeries").states.create("hidden",{endAngle:-90,opacity:0}),i("Slice",["pie"]).setAll({position:"absolute",isMeasured:!1,x:0,y:0,toggleKey:"active",tooltipText:"{category}: {valuePercentTotal.formatNumber('0.00p')}",strokeWidth:1,strokeOpacity:1,role:"figure",lineJoin:"round"}),i("Slice",["pie"]).states.create("active",{shiftRadius:20,scale:1}),i("Slice",["pie"]).states.create("hoverActive",{scale:1.04}),i("Slice",["pie"]).states.create("hover",{scale:1.04}),i("RadialLabel",["pie"]).setAll({textType:"aligned",radius:10,text:"{category}: {valuePercentTotal.formatNumber('0.00p')}",paddingTop:5,paddingBottom:5,populateText:!0}),i("Tick",["pie"]).setAll({location:1}),i("SlicedChart").setAll({paddingLeft:10,paddingRight:10,paddingTop:10,paddingBottom:10}),i("FunnelSeries").setAll({startLocation:0,endLocation:1,orientation:"vertical",alignLabels:!0,sequencedInterpolation:!0}),i("FunnelSlice").setAll({interactive:!0,expandDistance:0}),i("FunnelSlice").states.create("hover",{expandDistance:.15}),i("Label",["funnel"]).setAll({populateText:!0,text:"{category}: {valuePercentTotal.formatNumber('0.00p')}",centerY:ai}),i("Label",["funnel","horizontal"]).setAll({centerX:0,centerY:ai,rotation:-90}),i("Label",["funnel","vertical"]).setAll({centerY:ai,centerX:0}),i("Tick",["funnel"]).setAll({location:1}),i("FunnelSlice",["funnel","link"]).setAll({fillOpacity:.5,strokeOpacity:0,expandDistance:-.1}),i("FunnelSlice",["funnel","link","vertical"]).setAll({height:10}),i("FunnelSlice",["funnel","link","horizontal"]).setAll({width:10}),i("PyramidSeries").setAll({valueIs:"area"}),i("FunnelSlice",["pyramid","link"]).setAll({fillOpacity:.5}),i("FunnelSlice",["pyramid","link","vertical"]).setAll({height:0}),i("FunnelSlice",["pyramid","link","horizontal"]).setAll({width:0}),i("FunnelSlice",["pyramid"]).setAll({interactive:!0,expandDistance:0}),i("FunnelSlice",["pyramid"]).states.create("hover",{expandDistance:.15}),i("Label",["pyramid"]).setAll({populateText:!0,text:"{category}: {valuePercentTotal.formatNumber('0.00p')}",centerY:ai}),i("Label",["pyramid","horizontal"]).setAll({centerX:0,centerY:ai,rotation:-90}),i("Label",["pyramid","vertical"]).setAll({centerY:ai,centerX:0}),i("Tick",["pyramid"]).setAll({location:1}),i("FunnelSlice",["pictorial"]).setAll({interactive:!0,tooltipText:"{category}: {valuePercentTotal.formatNumber('0.00p')}"}),i("Label",["pictorial"]).setAll({populateText:!0,text:"{category}: {valuePercentTotal.formatNumber('0.00p')}",centerY:ai}),i("Label",["pictorial","horizontal"]).setAll({centerX:0,centerY:ai,rotation:-90}),i("Label",["pictorial","vertical"]).setAll({centerY:ai,centerX:0}),i("FunnelSlice",["pictorial","link"]).setAll({fillOpacity:.5,width:0,height:0}),i("Tick",["pictorial"]).setAll({location:.5});{const r=i("Graphics",["pictorial","background"]);r.setAll({fillOpacity:.2}),Lt(r,"fill",e,"alternativeBackground")}}}class xM extends vM{_afterNew(){this._defaultThemes.push(zTt.new(this._root)),super._afterNew(),this.chartContainer.children.push(this.seriesContainer),this.seriesContainer.children.push(this.bulletsContainer)}_processSeries(e){super._processSeries(e),this.seriesContainer.children.moveValue(this.bulletsContainer,this.seriesContainer.children.length-1)}}Object.defineProperty(xM,"className",{enumerable:!0,configurable:!0,writable:!0,value:"PercentChart"});Object.defineProperty(xM,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:vM.classNames.concat([xM.className])});class SM extends o_{constructor(){super(...arguments),Object.defineProperty(this,"slicesContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(_r.new(this._root,{position:"absolute",isMeasured:!1}))}),Object.defineProperty(this,"labelsContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(_r.new(this._root,{position:"absolute",isMeasured:!1}))}),Object.defineProperty(this,"ticksContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(_r.new(this._root,{position:"absolute",isMeasured:!1}))}),Object.defineProperty(this,"_lLabels",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_rLabels",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_hLabels",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"slices",{enumerable:!0,configurable:!0,writable:!0,value:this.addDisposer(this._makeSlices())}),Object.defineProperty(this,"labels",{enumerable:!0,configurable:!0,writable:!0,value:this.addDisposer(this._makeLabels())}),Object.defineProperty(this,"ticks",{enumerable:!0,configurable:!0,writable:!0,value:this.addDisposer(this._makeTicks())})}makeSlice(e){const i=this.slicesContainer.children.push(this.slices.make());return i.on("fill",()=>{this.updateLegendMarker(e)}),i.on("fillPattern",()=>{this.updateLegendMarker(e)}),i.on("stroke",()=>{this.updateLegendMarker(e)}),i._setDataItem(e),e.set("slice",i),this.slices.push(i),i}makeLabel(e){const i=this.labelsContainer.children.push(this.labels.make());return i._setDataItem(e),e.set("label",i),this.labels.push(i),i}_shouldMakeBullet(e){return e.get("value")!=null}makeTick(e){const i=this.ticksContainer.children.push(this.ticks.make());return i._setDataItem(e),e.set("tick",i),this.ticks.push(i),i}_afterNew(){this.fields.push("category","fill"),super._afterNew()}_onDataClear(){const e=this.get("colors");e&&e.reset();const i=this.get("patterns");i&&i.reset()}_prepareChildren(){if(super._prepareChildren(),this._lLabels=[],this._rLabels=[],this._hLabels=[],this._valuesDirty){let e=0,i=0,r=0,n=1/0,s=0;Ne(this._dataItems,a=>{let o=a.get("valueWorking",0);e+=o,i+=Math.abs(o)}),Ne(this._dataItems,a=>{let o=a.get("valueWorking",0);o>r&&(r=o),o<n&&(n=o),s++;let l=o/i;i==0&&(l=0),a.setRaw("valuePercentTotal",l*100)}),this.setPrivateRaw("valueLow",n),this.setPrivateRaw("valueHigh",r),this.setPrivateRaw("valueSum",e),this.setPrivateRaw("valueAverage",e/s),this.setPrivateRaw("valueAbsoluteSum",i)}}show(e){const i=Object.create(null,{show:{get:()=>super.show}});return vl(this,void 0,void 0,function*(){let r=[];r.push(i.show.call(this,e)),r.push(this._sequencedShowHide(!0,e)),yield Promise.all(r)})}hide(e){const i=Object.create(null,{hide:{get:()=>super.hide}});return vl(this,void 0,void 0,function*(){let r=[];r.push(i.hide.call(this,e)),r.push(this._sequencedShowHide(!1,e)),yield Promise.all(r)})}_updateChildren(){super._updateChildren(),this._valuesDirty&&Ne(this._dataItems,e=>{e.get("label").text.markDirtyText()}),(this.isDirty("legendLabelText")||this.isDirty("legendValueText"))&&Ne(this._dataItems,e=>{this.updateLegendValue(e)}),this._arrange()}_arrange(){this._arrangeDown(this._lLabels),this._arrangeUp(this._lLabels),this._arrangeDown(this._rLabels),this._arrangeUp(this._rLabels),this._arrangeLeft(this._hLabels),this._arrangeRight(this._hLabels),Ne(this.dataItems,e=>{this._updateTick(e)})}_afterChanged(){super._afterChanged(),this._arrange()}processDataItem(e){if(super.processDataItem(e),e.get("fill")==null){let i=this.get("colors");i&&e.setRaw("fill",i.next())}if(e.get("fillPattern")==null){let i=this.get("patterns");i&&e.setRaw("fillPattern",i.next())}}showDataItem(e,i){const r=Object.create(null,{showDataItem:{get:()=>super.showDataItem}});return vl(this,void 0,void 0,function*(){const n=[r.showDataItem.call(this,e,i)];kt(i)||(i=this.get("stateAnimationDuration",0));const s=this.get("stateAnimationEasing");let a=e.get("value");const o=e.animate({key:"valueWorking",to:a,duration:i,easing:s});o&&n.push(o.waitForStop());const l=e.get("tick");l&&n.push(l.show(i));const c=e.get("label");c&&n.push(c.show(i));const h=e.get("slice");h&&n.push(h.show(i)),h.get("active")&&h.states.applyAnimate("active"),yield Promise.all(n)})}hideDataItem(e,i){const r=Object.create(null,{hideDataItem:{get:()=>super.hideDataItem}});return vl(this,void 0,void 0,function*(){const n=[r.hideDataItem.call(this,e,i)],s=this.states.create("hidden",{});kt(i)||(i=s.get("stateAnimationDuration",this.get("stateAnimationDuration",0)));const a=s.get("stateAnimationEasing",this.get("stateAnimationEasing")),o=e.animate({key:"valueWorking",to:0,duration:i,easing:a});o&&n.push(o.waitForStop());const l=e.get("tick");l&&n.push(l.hide(i));const c=e.get("label");c&&n.push(c.hide(i));const h=e.get("slice");h.hideTooltip(),h&&n.push(h.hide(i)),yield Promise.all(n)})}disposeDataItem(e){super.disposeDataItem(e);let i=e.get("label");i&&(this.labels.removeValue(i),i.dispose());let r=e.get("tick");r&&(this.ticks.removeValue(r),r.dispose());let n=e.get("slice");n&&(this.slices.removeValue(n),n.dispose())}hoverDataItem(e){const i=e.get("slice");i&&!i.isHidden()&&i.hover()}unhoverDataItem(e){const i=e.get("slice");i&&i.unhover()}updateLegendMarker(e){if(e){const i=e.get("slice");if(i){const r=e.get("legendDataItem");if(r){const n=r.get("markerRectangle");Ne(V_t,s=>{i.get(s)!=null&&n.set(s,i.get(s))})}}}}_arrangeDown(e){if(e){let i=this._getNextDown();e.sort((r,n)=>r.y>n.y?1:r.y<n.y?-1:0),Ne(e,r=>{const n=r.label.adjustedLocalBounds();let s=n.top;r.y+s<i&&(r.y=i-s),r.label.set("y",r.y),i=r.y+n.bottom})}}_getNextUp(){return this.labelsContainer.maxHeight()}_getNextDown(){return 0}_arrangeUp(e){if(e){let i=this._getNextUp();e.sort((r,n)=>r.y<n.y?1:r.y>n.y?-1:0),Ne(e,r=>{const n=r.label.adjustedLocalBounds();let s=n.bottom;r.y+s>i&&(r.y=i-s),r.label.set("y",r.y),i=r.y+n.top})}}_arrangeRight(e){if(e){let i=0;e.sort((r,n)=>r.y>n.y?1:r.y<n.y?-1:0),Ne(e,r=>{const n=r.label.adjustedLocalBounds();let s=n.left;r.y+s<i&&(r.y=i-s),r.label.set("x",r.y),i=r.y+n.right})}}_arrangeLeft(e){if(e){let i=this.labelsContainer.maxWidth();e.sort((r,n)=>r.y<n.y?1:r.y>n.y?-1:0),Ne(e,r=>{const n=r.label.adjustedLocalBounds();let s=n.right;r.y+s>i&&(r.y=i-s),r.label.set("x",r.y),i=r.y+n.left})}}_updateSize(){super._updateSize(),this.markDirty()}_updateTick(e){}_dispose(){super._dispose();const e=this.chart;e&&e.series.removeValue(this)}}Object.defineProperty(SM,"className",{enumerable:!0,configurable:!0,writable:!0,value:"PercentSeries"});Object.defineProperty(SM,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:o_.classNames.concat([SM.className])});class $M extends xM{constructor(){super(...arguments),Object.defineProperty(this,"_maxRadius",{enumerable:!0,configurable:!0,writable:!0,value:1})}_afterNew(){super._afterNew(),this.seriesContainer.setAll({x:ai,y:ai})}_prepareChildren(){super._prepareChildren();const e=this.chartContainer,i=e.innerWidth(),r=e.innerHeight(),n=this.get("startAngle",0),s=this.get("endAngle",0),a=this.get("innerRadius");let o=vW(0,0,n,s,1);const l=i/(o.right-o.left),c=r/(o.bottom-o.top);let h={left:0,right:0,top:0,bottom:0};if(a instanceof _i){let y=a.value,b=Math.min(l,c);y=Math.max(b*y,b-Math.min(r,i))/b,h=vW(0,0,n,s,y),this.setPrivateRaw("irModifyer",y/a.value)}o=A_t([o,h]);const f=this._maxRadius;this._maxRadius=Math.min(l,c);const g=Ms(this.get("radius",0),this._maxRadius);this.seriesContainer.setAll({dy:-g*(o.bottom+o.top)/2,dx:-g*(o.right+o.left)/2}),(this.isDirty("startAngle")||this.isDirty("endAngle")||f!=this._maxRadius)&&this.series.each(y=>{y._markDirtyKey("startAngle")}),(this.isDirty("innerRadius")||this.isDirty("radius"))&&this.series.each(y=>{y._markDirtyKey("innerRadius")})}radius(e){let i=Ms(this.get("radius",0),this._maxRadius),r=Ms(this.get("innerRadius",0),i);if(e){let n=this.series.indexOf(e),s=this.series.length,a=e.get("radius");return a!=null?r+Ms(a,i-r):r+(i-r)/s*(n+1)}return i}innerRadius(e){const i=this.radius();let r=Ms(this.get("innerRadius",0),i);if(r<0&&(r=i+r),e){let n=this.series.indexOf(e),s=this.series.length,a=e.get("innerRadius");return a!=null?r+Ms(a,i-r):r+(i-r)/s*n}return r}_updateSize(){super._updateSize(),this.markDirtyKey("radius")}}Object.defineProperty($M,"className",{enumerable:!0,configurable:!0,writable:!0,value:"PieChart"});Object.defineProperty($M,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:xM.classNames.concat([$M.className])});class TM extends SM{_makeSlices(){return new Yy(yc.new({}),()=>M5._new(this._root,{themeTags:uc(this.slices.template.get("themeTags",[]),["pie","series"])},[this.slices.template]))}_makeLabels(){return new Yy(yc.new({}),()=>C5._new(this._root,{themeTags:uc(this.labels.template.get("themeTags",[]),["pie","series"])},[this.labels.template]))}_makeTicks(){return new Yy(yc.new({}),()=>A5._new(this._root,{themeTags:uc(this.ticks.template.get("themeTags",[]),["pie","series"])},[this.ticks.template]))}processDataItem(e){super.processDataItem(e);const i=this.makeSlice(e);i.on("scale",()=>{this._updateTick(e)}),i.on("shiftRadius",()=>{this._updateTick(e)}),i.events.on("positionchanged",()=>{this._updateTick(e)});const r=this.makeLabel(e);r.events.on("positionchanged",()=>{this._updateTick(e)}),this.makeTick(e),i.events.on("positionchanged",()=>{r.markDirty()})}_getNextUp(){const e=this.chart;return e?e._maxRadius:this.labelsContainer.maxHeight()/2}_getNextDown(){const e=this.chart;return e?-e._maxRadius:-this.labelsContainer.maxHeight()/2}_prepareChildren(){super._prepareChildren();const e=this.chart;if(e){if(this.isDirty("alignLabels")){let i=this.labels.template;if(this.get("alignLabels"))i.set("textType","aligned");else{let r=i.get("textType");(r==null||r=="aligned")&&i.set("textType","adjusted")}}if(this._valuesDirty||this.isDirty("radius")||this.isDirty("innerRadius")||this.isDirty("startAngle")||this.isDirty("endAngle")||this.isDirty("alignLabels")){this.markDirtyBounds();const i=this.get("startAngle",e.get("startAngle",-90)),n=this.get("endAngle",e.get("endAngle",270))-i;let s=i;const a=e.radius(this);this.setPrivateRaw("radius",a);let o=e.innerRadius(this)*e.getPrivate("irModifyer",1);o<0&&(o=a+o),Ne(this._dataItems,l=>{this.updateLegendValue(l);let c=n*l.get("valuePercentTotal")/100;const h=l.get("slice");if(h){h.set("radius",a),h.set("innerRadius",o),h.set("startAngle",s),h.set("arc",c);const y=l.get("fill");h._setDefault("fill",y),h._setDefault("stroke",y);const b=l.get("fillPattern");h._setDefault("fillPattern",b)}let f=aK(s+c/2);const g=l.get("label");if(g&&(g.setPrivate("radius",a),g.setPrivate("innerRadius",o),g.set("labelAngle",f),g.get("textType")=="aligned")){let y=a+g.get("radius",0),b=a*mu(f);f>90&&f<=270?(!g.isHidden()&&!g.isHiding()&&this._lLabels.push({label:g,y:b}),y*=-1,y-=this.labelsContainer.get("paddingLeft",0),g.set("centerX",bi),g.setPrivateRaw("left",!0)):(!g.isHidden()&&!g.isHiding()&&this._rLabels.push({label:g,y:b}),y+=this.labelsContainer.get("paddingRight",0),g.set("centerX",0),g.setPrivateRaw("left",!1)),g.set("x",y),g.set("y",a*mu(f))}s+=c,this._updateTick(l)})}}}_updateTick(e){const i=e.get("tick"),r=e.get("label"),n=e.get("slice"),s=i.get("location",1);if(i&&r&&n){const a=(n.get("shiftRadius",0)+n.get("radius",0))*n.get("scale",1)*s,o=r.get("labelAngle",0),l=Pp(o),c=mu(o),h=this.labelsContainer,f=h.get("paddingLeft",0),g=h.get("paddingRight",0);let y=0,b=0;y=r.x(),b=r.y();let _=[];if(y!=0||b!=0){if(r.get("textType")=="circular"){const $=r.radius()-r.get("paddingBottom",0),C=r.get("labelAngle",0);y=$*Pp(C),b=$*mu(C)}let S=-g;r.getPrivate("left")&&(S=f),_=[{x:n.x()+a*l,y:n.y()+a*c},{x:y+S,y:b},{x:y,y:b}]}i.set("points",_)}}_positionBullet(e){const i=e.get("sprite");if(i){const n=i.dataItem.get("slice");if(n){const s=n.get("innerRadius",0),a=n.get("radius",0),o=n.get("startAngle",0),l=n.get("arc",0),c=e.get("locationX",.5),h=e.get("locationY",.5),f=o+l*c,g=s+(a-s)*h;i.setAll({x:Pp(f)*g,y:mu(f)*g})}}}}Object.defineProperty(TM,"className",{enumerable:!0,configurable:!0,writable:!0,value:"PieSeries"});Object.defineProperty(TM,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:SM.classNames.concat([TM.className])});class FTt extends wj{setupDefaultRules(){super.setupDefaultRules(),this.rule("Component").setAll({interpolationDuration:600}),this.rule("Hierarchy").set("animationDuration",600),this.rule("Scrollbar").set("animationDuration",600),this.rule("Tooltip").set("animationDuration",300),this.rule("MapChart").set("animationDuration",1e3),this.rule("MapChart").set("wheelDuration",300),this.rule("Entity").setAll({stateAnimationDuration:600}),this.rule("Sprite").states.create("default",{stateAnimationDuration:600}),this.rule("Tooltip",["axis"]).setAll({animationDuration:200}),this.rule("WordCloud").set("animationDuration",500),this.rule("Polygon").set("animationDuration",600),this.rule("ArcDiagram").set("animationDuration",600)}}class tt extends wj{constructor(e,i){super(e,i),Object.defineProperty(this,"_dp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"responsiveRules",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this._dp=new gl([this._root._rootContainer.onPrivate("width",r=>{this._isUsed()&&this._maybeApplyRules()}),this._root._rootContainer.onPrivate("height",r=>{this._isUsed()&&this._maybeApplyRules()})])}static widthXXS(e,i){return e<=tt.XXS}static widthXS(e,i){return e<=tt.XS}static widthS(e,i){return e<=tt.S}static widthM(e,i){return e<=tt.M}static widthL(e,i){return e<=tt.L}static widthXL(e,i){return e<=tt.XL}static widthXXL(e,i){return e<=tt.XXL}static heightXXS(e,i){return i<=tt.XXS}static heightXS(e,i){return i<=tt.XS}static heightS(e,i){return i<=tt.S}static heightM(e,i){return i<=tt.M}static heightL(e,i){return i<=tt.L}static heightXL(e,i){return i<=tt.XL}static heightXXL(e,i){return i<=tt.XXL}static isXXS(e,i){return e<=tt.XXS&&i<=tt.XXS}static isXS(e,i){return e<=tt.XS&&i<=tt.XS}static isS(e,i){return e<=tt.S&&i<=tt.S}static isM(e,i){return e<=tt.M&&i<=tt.M}static isL(e,i){return e<=tt.L&&i<=tt.L}static isXL(e,i){return e<=tt.XL&&i<=tt.XL}static isXXL(e,i){return e<=tt.XXL&&i<=tt.XXL}static maybeXXS(e,i){return e<=tt.XXS||i<=tt.XXS}static maybeXS(e,i){return e<=tt.XS||i<=tt.XS}static maybeS(e,i){return e<=tt.S||i<=tt.S}static maybeM(e,i){return e<=tt.M||i<=tt.M}static maybeL(e,i){return e<=tt.L||i<=tt.L}static maybeXL(e,i){return e<=tt.XL||i<=tt.XL}static maybeXXL(e,i){return e<=tt.XXL||i<=tt.XXL}static newEmpty(e){return new this(e,!0)}addRule(e){return e.name&&!e.template&&(e.template=this.rule(e.name,e.tags)),this.responsiveRules.push(e),this._maybeApplyRule(e),e}removeRule(e){Im(this.responsiveRules,e)}dispose(){this._dp&&this._dp.dispose()}_isUsed(){return this._root._rootContainer.get("themes").indexOf(this)!==-1}_maybeApplyRules(){Ne(this.responsiveRules,e=>{this._maybeUnapplyRule(e)}),Ne(this.responsiveRules,e=>{this._maybeApplyRule(e)})}_maybeApplyRule(e){if(e.applied)return;const i=this._root._rootContainer.getPrivate("width"),r=this._root._rootContainer.getPrivate("height");e.relevant.call(e,i,r)&&(e.applied=!0,e.template&&e.settings&&e.template.setAll(e.settings),e.applying&&e.applying.call(e))}_maybeUnapplyRule(e){if(!e.applied)return;const i=this._root._rootContainer.getPrivate("width"),r=this._root._rootContainer.getPrivate("height");e.relevant.call(e,i,r)||(e.applied=!1,e.template&&e.template.removeAll(),e.removing&&e.removing.call(e))}setupDefaultRules(){super.setupDefaultRules();const e=i=>this.addRule(i);e({name:"Chart",relevant:tt.widthXXS,settings:{paddingLeft:0,paddingRight:0}}),e({name:"Chart",relevant:tt.heightXXS,settings:{paddingTop:0,paddingBottom:0}}),e({name:"Bullet",relevant:tt.isXS,settings:{forceHidden:!0}}),e({name:"Legend",relevant:tt.isXS,settings:{forceHidden:!0}}),e({name:"HeatLegend",tags:["vertical"],relevant:tt.widthXS,settings:{forceHidden:!0}}),e({name:"HeatLegend",tags:["horizontal"],relevant:tt.heightXS,settings:{forceHidden:!0}}),e({name:"Label",tags:["heatlegend","start"],relevant:tt.maybeXS,settings:{forceHidden:!0}}),e({name:"Label",tags:["heatlegend","end"],relevant:tt.maybeXS,settings:{forceHidden:!0}}),e({name:"Button",tags:["resize"],relevant:tt.maybeXS,settings:{forceHidden:!0}}),e({name:"AxisRendererX",relevant:tt.heightXS,settings:{inside:!0}}),e({name:"AxisRendererY",relevant:tt.widthXS,settings:{inside:!0}}),e({name:"AxisRendererXLabel",relevant:tt.heightXS,settings:{minPosition:.1,maxPosition:.9}}),e({name:"AxisLabel",tags:["y"],relevant:tt.widthXS,settings:{centerY:bi,maxPosition:.9}}),e({name:"AxisLabel",tags:["x"],relevant:tt.heightXXS,settings:{forceHidden:!0}}),e({name:"AxisLabel",tags:["x","minor"],relevant:tt.widthXXL,settings:{forceHidden:!0}}),e({name:"AxisLabel",tags:["y"],relevant:tt.widthXXS,settings:{forceHidden:!0}}),e({name:"AxisLabel",tags:["y","minor"],relevant:tt.heightXXL,settings:{forceHidden:!0}}),e({name:"AxisTick",tags:["x"],relevant:tt.heightXS,settings:{inside:!0,minPosition:.1,maxPosition:.9}}),e({name:"AxisTick",tags:["y"],relevant:tt.widthXXS,settings:{inside:!0,minPosition:.1,maxPosition:.9}}),e({name:"Grid",relevant:tt.maybeXXS,settings:{forceHidden:!0}}),e({name:"RadialLabel",tags:["radial"],relevant:tt.maybeXS,settings:{forceHidden:!0}}),e({name:"RadialLabel",tags:["circular"],relevant:tt.maybeS,settings:{inside:!0}}),e({name:"AxisTick",relevant:tt.maybeS,settings:{inside:!0}}),e({name:"RadialLabel",tags:["circular"],relevant:tt.maybeXS,settings:{forceHidden:!0}}),e({name:"AxisTick",tags:["circular"],relevant:tt.maybeXS,settings:{inside:!0}}),e({name:"PieChart",relevant:tt.maybeXS,settings:{radius:Ks(99)}}),e({name:"PieChart",relevant:tt.widthM,settings:{radius:Ks(99)}}),e({name:"RadialLabel",tags:["pie"],relevant:tt.maybeXS,settings:{forceHidden:!0}}),e({name:"RadialLabel",tags:["pie"],relevant:tt.widthM,settings:{forceHidden:!0}}),e({name:"Tick",tags:["pie"],relevant:tt.maybeXS,settings:{forceHidden:!0}}),e({name:"Tick",tags:["pie"],relevant:tt.widthM,settings:{forceHidden:!0}}),e({name:"FunnelSeries",relevant:tt.widthM,settings:{alignLabels:!1}}),e({name:"Label",tags:["funnel","vertical"],relevant:tt.widthL,settings:{forceHidden:!0}}),e({name:"Tick",tags:["funnel","vertical"],relevant:tt.widthL,settings:{forceHidden:!0}}),e({name:"Label",tags:["funnel","horizontal"],relevant:tt.heightS,settings:{forceHidden:!0}}),e({name:"Tick",tags:["funnel","horizontal"],relevant:tt.heightS,settings:{forceHidden:!0}}),e({name:"PyramidSeries",relevant:tt.widthM,settings:{alignLabels:!1}}),e({name:"Label",tags:["pyramid","vertical"],relevant:tt.widthL,settings:{forceHidden:!0}}),e({name:"Tick",tags:["pyramid","vertical"],relevant:tt.widthL,settings:{forceHidden:!0}}),e({name:"Label",tags:["pyramid","horizontal"],relevant:tt.heightS,settings:{forceHidden:!0}}),e({name:"Tick",tags:["pyramid","horizontal"],relevant:tt.heightS,settings:{forceHidden:!0}}),e({name:"PictorialStackedSeries",relevant:tt.widthM,settings:{alignLabels:!1}}),e({name:"Label",tags:["pictorial","vertical"],relevant:tt.widthL,settings:{forceHidden:!0}}),e({name:"Tick",tags:["pictorial","vertical"],relevant:tt.widthL,settings:{forceHidden:!0}}),e({name:"Label",tags:["pictorial","horizontal"],relevant:tt.heightS,settings:{forceHidden:!0}}),e({name:"Tick",tags:["pictorial","horizontal"],relevant:tt.heightS,settings:{forceHidden:!0}}),e({name:"Label",tags:["flow","horizontal"],relevant:tt.widthS,settings:{forceHidden:!0}}),e({name:"Label",tags:["flow","vertical"],relevant:tt.heightS,settings:{forceHidden:!0}}),e({name:"Chord",relevant:tt.maybeXS,settings:{radius:Ks(99)}}),e({name:"Label",tags:["hierarchy","node"],relevant:tt.maybeXS,settings:{forceHidden:!0}})}}Object.defineProperty(tt,"XXS",{enumerable:!0,configurable:!0,writable:!0,value:100});Object.defineProperty(tt,"XS",{enumerable:!0,configurable:!0,writable:!0,value:200});Object.defineProperty(tt,"S",{enumerable:!0,configurable:!0,writable:!0,value:300});Object.defineProperty(tt,"M",{enumerable:!0,configurable:!0,writable:!0,value:400});Object.defineProperty(tt,"L",{enumerable:!0,configurable:!0,writable:!0,value:600});Object.defineProperty(tt,"XL",{enumerable:!0,configurable:!0,writable:!0,value:800});Object.defineProperty(tt,"XXL",{enumerable:!0,configurable:!0,writable:!0,value:1e3});function NTt(t){Ne(Ed.rootElements,function(e){e.dom.id===t&&e.dispose()})}const jTt=t=>{const e=document.querySelector("arcgis-map"),{contractp:i,landtype:r,landsection:n}=je.use(gK),s=t.backgcolorswitch;je.useEffect(()=>{ext(Xs,e)},[i,r,n]);const a=je.useRef({}),o=je.useRef({}),l=je.useRef({}),[c,h]=je.useState([{category:String,value:Number,sliceSettings:{fill:fu("#00c5ff")}}]),f="pie-two",[g,y]=je.useState([]),[b,_]=je.useState([]),S="Package = '"+i+"'",$="Type = '"+r+"'",C=S+" AND "+$,I="Station1 ='"+n+"'",P=C+" AND "+I;je.useEffect(()=>{i?i&&!r&&!n?(Xs.definitionExpression=S,AS.definitionExpression=S,rC.definitionExpression=S):i&&r&&!n?(Xs.definitionExpression=C,AS.definitionExpression=C,rC.definitionExpression=C):(Xs.definitionExpression=P,AS.definitionExpression=P,rC.definitionExpression=P):(Xs.definitionExpression="1=1",AS.definitionExpression="1=1",rC.definitionExpression="1=1"),J1t(i,r,n).then(R=>{h(R)}),K1t().then(R=>{y(R)}),Q1t().then(R=>{_(R)})},[i,r,n]),je.useEffect(()=>{NTt(f);const R=oK.new(f);R.container.children.clear(),R._logo?.dispose(),R.setThemes([FTt.new(R),tt.new(R)]);const G=R.container.children.push($M.new(R,{layout:R.verticalLayout}));l.current=G;const Y=G.series.push(TM.new(R,{name:"Series",categoryField:"category",valueField:"value",legendValueText:"{valuePercentTotal.formatNumber('#.')}% ({value})",radius:Ks(45),innerRadius:Ks(28),scale:1.7}));a.current=Y,G.series.push(Y);const Q=Y.children.push($u.new(R,{text:`[#ffffff]{valueSum}[/]
[fontSize: 1.0em; #d3d3d3; verticalAlign: super]LOTS[/]`,fontSize:"1.4em",centerX:Ks(50),centerY:Ks(40),populateText:!0,oversizedBehavior:"fit",textAlign:"center"}));Y.onPrivate("width",ce=>{Q.set("maxWidth",ce*.7)}),Y.slices.template.setAll({toggleKey:"none",fillOpacity:.9,stroke:fu(s===!1?"#ffffff":"#000000"),strokeWidth:.5,strokeOpacity:1,templateField:"sliceSettings"}),Y.labels.template.set("visible",!1),Y.ticks.template.set("visible",!1),Y.slices.template.events.on("click",ce=>{const K=(ce.target.dataItem?.dataContext).category,re=sEe.find(Pe=>Pe.category===K)?.value;let he;const xe=Xs.createQuery();e?.whenLayerView(Xs).then(Pe=>{Xs.queryFeatures(xe).then(function(He){const be=He.features.length,Le=[];for(let st=0;st<be;st++){const ut=He.features[st].attributes.OBJECTID;Le.push(ut)}const Je=new _t({objectIds:Le});Xs.queryExtent(Je).then(function(st){st.extent&&e?.goTo(st.extent)}),he&&he.remove(),he=Pe.highlight(Le),e?.view.on("click",function(){Pe.filter=new gD({where:void 0}),he.remove()})}),Pe.filter=new gD({where:"H_Level = "+re}),e?.view.on("click",()=>{Pe.filter=new gD({where:void 0}),he&&he.remove()})})}),Y.data.setAll(c);const ae=G.children.push(k5.new(R,{centerX:Ks(50),x:Ks(50)}));return o.current=ae,ae.data.setAll(Y.dataItems),ae.markers.template.setAll({width:18,height:18}),ae.markerRectangles.template.setAll({cornerRadiusTL:10,cornerRadiusTR:10,cornerRadiusBL:10,cornerRadiusBR:10}),G.onPrivate("width",function(ce){const K=Math.max(ce-G.height()-220,220);ae.labels.template.setAll({width:K,maxWidth:K})}),ae.labels.template.setAll({oversizedBehavior:"truncate",fill:fu("#ffffff"),fontSize:"14px"}),ae.valueLabels.template.setAll({textAlign:"right",fill:fu("#ffffff"),fontSize:"14px"}),ae.itemContainers.template.setAll({paddingTop:3,paddingBottom:1}),Y.appear(1e3,100),()=>{R.dispose()}},[f,c]),je.useEffect(()=>{a.current?.data.setAll(c),o.current?.data.setAll(a.current.dataItems)});const O="#9ca3af",N="#d1d5db";return ht.jsx(ht.Fragment,{children:ht.jsxs("div",{slot:"panel-end",style:{width:"30vw",padding:"0 1rem",borderStyle:"solid",borderRightWidth:4.5,borderLeftWidth:4.5,borderBottomWidth:4.5,borderColor:"#555555"},children:[ht.jsxs("div",{style:{display:"flex",marginTop:"3px",marginLeft:"15px",marginRight:"15px",justifyContent:"space-between",marginBottom:"10px"},children:[ht.jsx("img",{src:"https://EijiGorilla.github.io/Symbols/Land_logo.png",alt:"Land Logo",height:"50px",width:"50px",style:{marginTop:"20px"}}),ht.jsxs("dl",{style:{alignItems:"center"},children:[ht.jsx("dt",{style:{color:O,fontSize:"1.1rem"},children:"TOTAL LOTS"}),ht.jsx("dd",{style:{color:N,fontSize:"1.9rem",fontWeight:"bold",fontFamily:"calibri",lineHeight:"1.2",margin:"auto"},children:XL(g[1])}),ht.jsxs("div",{style:{color:"#d1d5db",justifyContent:"center",fontWeight:"normal"},children:["(",XL(g[0]),")"]})]}),ht.jsxs("dl",{style:{alignItems:"center"},children:[ht.jsx("dt",{style:{color:O,fontSize:"1.1rem"},children:"PUBLIC LOTS"}),ht.jsx("dd",{style:{color:N,fontSize:"1.9rem",fontWeight:"bold",fontFamily:"calibri",lineHeight:"1.2",margin:"auto"},children:XL(g[2])})]})]}),ht.jsx("div",{id:f,style:{height:"53vh",backgroundColor:"rgb(0,0,0,0)",color:"white",marginTop:"1vh",marginBottom:"4vh"}}),ht.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[ht.jsx("img",{src:"https://EijiGorilla.github.io/Symbols/Handed_Over_Logo.svg",alt:"Land Logo",height:"15%",width:"15%",style:{marginLeft:"20px",marginTop:"20px"}}),ht.jsxs("dl",{style:{alignItems:"center",marginRight:"30px"},children:[ht.jsx("dt",{style:{color:O,fontSize:"1.2rem"},children:"HANDED-OVER"}),ht.jsxs("dd",{style:{color:N,fontSize:"1.7rem",fontWeight:"bold",fontFamily:"calibri",lineHeight:"1.2",margin:"auto"},children:[b[0],"% (",XL(b[1]),")"]})]})]})]})})};const id={container:"container",actionBarContainer:"action-bar-container",contentContainer:"content-container",content:"content",contentHeader:"content__header",contentBody:"content__body",contentOverlay:"content--overlay",floatAll:"float-all",floatContent:"float--content",resizeHandle:"resize-handle",resizeHandleBar:"resize-handle-bar"},_he={actionBar:"action-bar",header:"header"},xhe={dragVertical:"drag-resize-vertical",dragHorizontal:"drag-resize-horizontal"},VTt=St`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{pointer-events:none;position:relative;display:flex;flex:0 1 auto;align-items:stretch;z-index:var(--calcite-shell-panel-z-index, var(--calcite-z-index));--calcite-shell-panel-max-height: unset;--calcite-internal-shell-panel-shadow-block-start: 0 4px 8px -1px rgba(0, 0, 0, .08), 0 2px 4px -1px rgba(0, 0, 0, .04);--calcite-internal-shell-panel-shadow-block-end: 0 -4px 8px -1px rgba(0, 0, 0, .08), 0 -2px 4px -1px rgba(0, 0, 0, .04);--calcite-internal-shell-panel-shadow-inline-start: 4px 0 8px -1px rgba(0, 0, 0, .08), 2px 0 4px -1px rgba(0, 0, 0, .04);--calcite-internal-shell-panel-shadow-inline-end: -4px 0 8px -1px rgba(0, 0, 0, .08), -2px 0 4px -1px rgba(0, 0, 0, .04)}.calcite--rtl.content--overlay{--calcite-internal-shell-panel-shadow-inline-start: -4px 0 8px -1px rgba(0, 0, 0, .08), -2px 0 4px -1px rgba(0, 0, 0, .04);--calcite-internal-shell-panel-shadow-inline-end: 4px 0 8px -1px rgba(0, 0, 0, .08), 2px 0 4px -1px rgba(0, 0, 0, .04)}:host([layout=vertical]){z-index:var(--calcite-shell-panel-z-index, calc(var(--calcite-z-index) + 1))}:host([layout=vertical][display-mode=overlay]){z-index:var(--calcite-shell-panel-z-index, calc(var(--calcite-z-index-header) + 1))}:host([layout=vertical][display-mode=float-all]) .content{flex:2}:host([layout=vertical]:not([display-mode=float-all])) .width-s{--calcite-internal-shell-panel-width: var(--calcite-shell-panel-width, 12vw);--calcite-internal-shell-panel-max-width: var(--calcite-shell-panel-max-width, 300px);--calcite-internal-shell-panel-min-width: var(--calcite-shell-panel-min-width, 150px)}:host([layout=vertical][display-mode=float-all]) .width-s{--calcite-internal-shell-panel-width: var(--calcite-shell-panel-width, 12vw);--calcite-internal-shell-panel-min-width: var(--calcite-shell-panel-min-width, 150px)}:host([layout=vertical]:not([display-mode=float-all])) .width-m{--calcite-internal-shell-panel-width: var(--calcite-shell-panel-width, 20vw);--calcite-internal-shell-panel-max-width: var(--calcite-shell-panel-max-width, 420px);--calcite-internal-shell-panel-min-width: var(--calcite-shell-panel-min-width, 240px)}:host([layout=vertical][display-mode=float-all]) .width-m{--calcite-internal-shell-panel-width: var(--calcite-shell-panel-width, 20vw);--calcite-internal-shell-panel-min-width: var(--calcite-shell-panel-min-width, 240px)}:host([layout=vertical]:not([display-mode=float-all])) .width-l{--calcite-internal-shell-panel-width: var(--calcite-shell-panel-width, 45vw);--calcite-internal-shell-panel-max-width: var(--calcite-shell-panel-max-width, 680px);--calcite-internal-shell-panel-min-width: var(--calcite-shell-panel-min-width, 340px)}:host([layout=vertical][display-mode=float-all]) .width-l{--calcite-internal-shell-panel-width: var(--calcite-shell-panel-width, 45vw);--calcite-internal-shell-panel-min-width: var(--calcite-shell-panel-min-width, 340px)}:host([layout=horizontal]) .content{--calcite-internal-shell-panel-height: var(--calcite-shell-panel-height);--calcite-internal-shell-panel-min-height: var(--calcite-shell-panel-min-height, 5vh);--calcite-internal-shell-panel-max-height: var(--calcite-shell-panel-max-height, 30vh)}:host([layout=horizontal]) .height-s{--calcite-internal-shell-panel-height: var(--calcite-shell-panel-height);--calcite-internal-shell-panel-min-height: var(--calcite-shell-panel-min-height, 5vh);--calcite-internal-shell-panel-max-height: var(--calcite-shell-panel-max-height, 20vh)}:host([layout=horizontal]) .height-l{--calcite-internal-shell-panel-height: var(--calcite-shell-panel-height);--calcite-internal-shell-panel-min-height: var(--calcite-shell-panel-min-height, 5vh);--calcite-internal-shell-panel-max-height: var(--calcite-shell-panel-max-height, 40vh)}.container{pointer-events:none;box-sizing:border-box;display:flex;block-size:100%;flex:1 1 auto;align-items:stretch;background-color:transparent;font-size:var(--calcite-font-size--1);color:var(--calcite-shell-panel-text-color, var(--calcite-color-text-2))}.container *{box-sizing:border-box}.container.float-all{margin-block:var(--calcite-spacing-sm);margin-inline:var(--calcite-spacing-sm)}.float-all{max-block-size:var(--calcite-internal-shell-panel-max-height, calc(100% - 1rem) );box-shadow:var(--calcite-shell-panel-shadow, var(--calcite-shadow-sm));border-radius:var(--calcite-shell-panel-corner-radius, var(--calcite-corner-radius-round));overflow:hidden}:host([layout=vertical][position=start]) .float-all{border-inline-start:var(--calcite-border-width-sm) solid var(--calcite-shell-panel-border-color, var(--calcite-color-border-3))}:host([layout=vertical][position=end]) .float-all{border-inline-end:var(--calcite-border-width-sm) solid var(--calcite-shell-border-color, var(--calcite-shell-panel-border-color, var(--calcite-color-border-3)))}:host([layout=horizontal]) .float-all{border-inline:var(--calcite-border-width-sm) solid var(--calcite-shell-border-color, var(--calcite-shell-panel-border-color, var(--calcite-color-border-3)))}:host([layout=horizontal]) .container{block-size:auto;inline-size:100%;flex-direction:column}.resize-handle{position:absolute;box-sizing:border-box;display:flex;-webkit-user-select:none;user-select:none;align-items:center;justify-content:center;outline:2px solid transparent;outline-offset:2px;--calcite-internal-shell-panel-resize-handle-offset: calc( (var(--calcite-size-fixed-xxl) - var(--calcite-size-fixed-sm-plus)) / 2 * -1 );z-index:var(--calcite-z-index-header)}.resize-handle:active .resize-handle-bar,.resize-handle:hover .resize-handle-bar{color:var(--calcite-shell-panel-resize-icon-color, var(--calcite-color-text-1));background-color:var(--calcite-shell-panel-resize-background-color, var(--calcite-color-foreground-3))}.resize-handle-bar{pointer-events:none;display:flex;align-items:center;justify-content:center;color:var(--calcite-shell-panel-resize-icon-color, var(--calcite-color-border-input));background-color:var(--calcite-shell-panel-resize-background-color, var(--calcite-color-background))}.resize-handle:focus .resize-handle-bar{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline-color:transparent;outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus)}:host([position=start][layout=vertical]) .resize-handle{inline-size:var(--calcite-size-fixed-xxl);inset-inline-end:var(--calcite-internal-shell-panel-resize-handle-offset);block-size:100%}:host([position=start][layout=vertical]) .resize-handle-bar{block-size:100%;inline-size:var(--calcite-size-fixed-sm-plus);border-inline-start:var(--calcite-border-width-sm) solid var(--calcite-shell-border-color, var(--calcite-color-border-3))}:host([position=start][layout=vertical]):host([display-mode^=float]) .resize-handle-bar{border-start-end-radius:var(--calcite-shell-panel-corner-radius, var(--calcite-corner-radius-round));border-end-end-radius:var(--calcite-shell-panel-corner-radius, var(--calcite-corner-radius-round))}:host([position=end][layout=vertical]) .resize-handle{inline-size:var(--calcite-size-fixed-xxl);inset-inline-start:var(--calcite-internal-shell-panel-resize-handle-offset);block-size:100%}:host([position=end][layout=vertical]) .resize-handle-bar{block-size:100%;inline-size:var(--calcite-size-fixed-sm-plus);border-inline-end:var(--calcite-border-width-sm) solid var(--calcite-shell-border-color, var(--calcite-color-border-3))}:host([position=end][layout=vertical]):host([display-mode^=float]) .resize-handle-bar{border-start-start-radius:var(--calcite-shell-panel-corner-radius, var(--calcite-corner-radius-round));border-end-start-radius:var(--calcite-shell-panel-corner-radius, var(--calcite-corner-radius-round))}:host([position=start][layout=horizontal]) .resize-handle{block-size:var(--calcite-size-fixed-xxl);inline-size:100%;inset-block-end:var(--calcite-internal-shell-panel-resize-handle-offset)}:host([position=start][layout=horizontal]) .resize-handle-bar{inline-size:100%;block-size:var(--calcite-size-fixed-sm-plus);border-block-start:var(--calcite-border-width-sm) solid var(--calcite-shell-border-color, var(--calcite-color-border-3))}:host([position=start][layout=horizontal]):host([display-mode^=float]) .resize-handle-bar{border-end-end-radius:var(--calcite-shell-panel-corner-radius, var(--calcite-corner-radius-round));border-end-start-radius:var(--calcite-shell-panel-corner-radius, var(--calcite-corner-radius-round))}:host([position=end][layout=horizontal]) .resize-handle{block-size:var(--calcite-size-fixed-xxl);inline-size:100%;inset-block-start:var(--calcite-internal-shell-panel-resize-handle-offset)}:host([position=end][layout=horizontal]) .resize-handle-bar{inline-size:100%;block-size:var(--calcite-size-fixed-sm-plus);border-block-end:var(--calcite-border-width-sm) solid var(--calcite-shell-border-color, var(--calcite-color-border-3))}:host([position=end][layout=horizontal]):host([display-mode^=float]) .resize-handle-bar{border-start-start-radius:var(--calcite-shell-panel-corner-radius, var(--calcite-corner-radius-round));border-start-end-radius:var(--calcite-shell-panel-corner-radius, var(--calcite-corner-radius-round))}::slotted(calcite-panel),::slotted(calcite-flow){block-size:100%;inline-size:100%;flex:1 1 auto;max-block-size:unset;max-inline-size:unset}::slotted(.calcite-match-height){display:flex;flex:1 1 auto;overflow:hidden}.action-bar-container{pointer-events:auto;box-sizing:border-box;display:flex;flex:1 1 auto}.content-container{position:relative;box-sizing:border-box;display:flex;block-size:100%;inline-size:100%;flex:1 1 auto;align-items:stretch;align-self:stretch}:host([layout=horizontal]) .action-bar-container,:host([layout=horizontal]) .content-container{flex-direction:column}.content{pointer-events:auto;position:relative;box-sizing:border-box;display:flex;flex:1 1 auto;flex-direction:column;flex-wrap:nowrap;align-items:stretch;align-self:stretch;padding:0;background-color:var(--calcite-shell-panel-background-color, var(--calcite-color-background));transition:max-block-size var(--calcite-animation-timing),max-inline-size var(--calcite-animation-timing)}:host([layout=vertical]:not([display-mode=float-all])) .content{inline-size:var(--calcite-internal-shell-panel-width);max-inline-size:var(--calcite-internal-shell-panel-max-width);min-inline-size:var(--calcite-internal-shell-panel-min-width)}:host([layout=vertical][display-mode=float-all]) .content{inline-size:var(--calcite-internal-shell-panel-width);min-inline-size:var(--calcite-internal-shell-panel-min-width)}:host([layout=horizontal]) .content{block-size:var(--calcite-internal-shell-panel-height);max-block-size:var(--calcite-internal-shell-panel-max-height);min-block-size:var(--calcite-internal-shell-panel-min-height)}:host([resizable][layout=vertical][position=start]) .content{padding-inline-end:var(--calcite-size-fixed-sm-plus)}:host([resizable][layout=vertical][position=end]) .content{padding-inline-start:var(--calcite-size-fixed-sm-plus)}:host([resizable][layout=horizontal][position=start]) .content{padding-block-end:var(--calcite-size-fixed-sm-plus)}:host([resizable][layout=horizontal][position=end]) .content{padding-block-start:var(--calcite-size-fixed-sm-plus)}.content__header{display:flex;flex:0 1 auto;flex-direction:column;flex-wrap:nowrap;align-items:stretch}.content__body{display:flex;flex:1 1 auto;flex-direction:column;overflow:hidden}.content--overlay{position:absolute;--tw-shadow: 0 4px 8px -1px rgba(0, 0, 0, .08), 0 2px 4px -1px rgba(0, 0, 0, .04);--tw-shadow-colored: 0 4px 8px -1px var(--tw-shadow-color), 0 2px 4px -1px var(--tw-shadow-color);box-shadow:var(--calcite-shell-panel-shadow, var(--tw-ring-offset-shadow, 0 0 rgba(0, 0, 0, 0)), var(--tw-ring-shadow, 0 0 rgba(0, 0, 0, 0)), var(--tw-shadow))}:host([layout=vertical]) .content--overlay{inset-block-start:0px;block-size:100%}:host([layout=horizontal]) .content--overlay{inset-inline-start:0px;inline-size:100%}:host([layout=vertical][position=start]) .content--overlay{inset-inline-start:100%;box-shadow:var(--calcite-internal-shell-panel-shadow-inline-start)}:host([layout=vertical][position=end]) .content--overlay{inset-inline-end:100%;box-shadow:var(--calcite-internal-shell-panel-shadow-inline-end)}:host([layout=horizontal][position=start]) .content--overlay{inset-block-start:100%;box-shadow:var(--calcite-internal-shell-panel-shadow-block-start)}:host([layout=horizontal][position=end]) .content--overlay{inset-block-end:100%;box-shadow:var(--calcite-internal-shell-panel-shadow-block-end)}.float--content{margin-block-end:auto;block-size:auto;overflow:hidden;--tw-shadow: 0 4px 8px -1px rgba(0, 0, 0, .08), 0 2px 4px -1px rgba(0, 0, 0, .04);--tw-shadow-colored: 0 4px 8px -1px var(--tw-shadow-color), 0 2px 4px -1px var(--tw-shadow-color);box-shadow:var(--calcite-shell-panel-shadow, var(--tw-ring-offset-shadow, 0 0 rgba(0, 0, 0, 0)), var(--tw-ring-shadow, 0 0 rgba(0, 0, 0, 0)), var(--tw-shadow));border-radius:var(--calcite-shell-panel-corner-radius, var(--calcite-corner-radius-round));margin-inline:var(--calcite-spacing-sm);margin-block-start:var(--calcite-spacing-sm);max-block-size:var(--calcite-internal-shell-panel-max-height, calc(100% - 1rem) )}.float--content ::slotted(calcite-panel),.float--content ::slotted(calcite-flow){max-block-size:unset}:host([layout=horizontal]) .float--content{margin-block:var(--calcite-spacing-sm)}:host([position=start]) .float--content ::slotted(calcite-panel),:host([position=start]) .float--content ::slotted(calcite-flow),:host([position=end]) .float--content ::slotted(calcite-panel),:host([position=end]) .float--content ::slotted(calcite-flow){border-style:none}slot[name=action-bar]::slotted(calcite-action-bar),.content ::slotted(calcite-flow),.content ::slotted(calcite-panel:not([closed])){border:var(--calcite-border-width-sm) solid var(--calcite-shell-border-color, var(--calcite-color-border-3))}:host([position=start]:not([slot=panel-end])) slot[name=action-bar]::slotted(calcite-action-bar),:host([position=start]:not([slot=panel-end])) .content ::slotted(calcite-flow),:host([position=start]:not([slot=panel-end])) .content ::slotted(calcite-panel),:host([position=end][slot=panel-start]) slot[name=action-bar]::slotted(calcite-action-bar),:host([position=end][slot=panel-start]) .content ::slotted(calcite-flow),:host([position=end][slot=panel-start]) .content ::slotted(calcite-panel){border-inline-start:none}:host([resizable][layout=vertical]) .content ::slotted(calcite-flow),:host([resizable][layout=vertical]) .content ::slotted(calcite-panel){border-inline-start:none;border-inline-end:none}:host([resizable][layout=horizontal]) .content ::slotted(calcite-flow),:host([resizable][layout=horizontal]) .content ::slotted(calcite-panel){border-block-start:none;border-block-end:none}:host([position=end]:not([slot=panel-start])) slot[name=action-bar]::slotted(calcite-action-bar),:host([position=end]:not([slot=panel-start])) .content ::slotted(calcite-flow),:host([position=end]:not([slot=panel-start])) .content ::slotted(calcite-panel),:host([position=start][slot=panel-end]) slot[name=action-bar]::slotted(calcite-action-bar),:host([position=start][slot=panel-end]) .content ::slotted(calcite-flow),:host([position=start][slot=panel-end]) .content ::slotted(calcite-panel){border-inline-end:none}:host([layout=horizontal]) slot[name=action-bar]::slotted(calcite-action-bar){border-inline:0}:host([layout=horizontal][position=start]) .content ::slotted(calcite-flow),:host([layout=horizontal][position=start]) .content ::slotted(calcite-panel){border-inline:0;border-block-start:0}:host([layout=horizontal][position=end]) .content ::slotted(calcite-flow),:host([layout=horizontal][position=end]) .content ::slotted(calcite-panel){border-inline:0;border-block-end:0}:host([hidden]){display:none}[hidden]{display:none}`,mF=class mF extends Et{constructor(){super(...arguments),this.actionBars=[],this.contentRef=wr(),this.messages=qn(),this.resizeValues={inlineSize:null,blockSize:null,minInlineSize:null,minBlockSize:null,maxInlineSize:null,maxBlockSize:null},this.hasHeader=!1,this.collapsed=!1,this.displayMode="dock",this.layout="vertical",this.position="start",this.resizable=!1,this.widthScale="m",this.calciteInternalShellPanelResizeEnd=Re({cancelable:!1}),this.calciteInternalShellPanelResizeStart=Re({cancelable:!1}),this.calciteShellPanelCollapse=Re({cancelable:!1}),this.calciteShellPanelExpand=Re({cancelable:!1})}willUpdate(e){e.has("layout")&&(this.hasUpdated||this.layout!=="vertical")&&this.setActionBarsLayout(this.actionBars),e.has("collapsed")&&this.hasUpdated&&(this.collapsed?this.calciteShellPanelCollapse.emit():this.calciteShellPanelExpand.emit())}disconnectedCallback(){super.disconnectedCallback(),this.cleanupInteractions()}getContentElDOMRect(){return this.contentRef.value.getBoundingClientRect()}handleKeyDown(e){const{key:i,defaultPrevented:r,shiftKey:n}=e,{position:s,layout:a,resizable:o,contentRef:l,el:c,resizeValues:{maxBlockSize:h,maxInlineSize:f,minBlockSize:g,minInlineSize:y}}=this,_=[...a==="horizontal"?["ArrowUp","ArrowDown"]:["ArrowLeft","ArrowRight"],"Home","End"];if(!o||!l.value||r||!_.includes(i))return;const S=this.getContentElDOMRect(),$=jo(c)==="rtl"?-1:1,C=n?Tge:$ge;switch(i){case"ArrowUp":this.updateSize({size:S.height+(a==="horizontal"&&s==="end"?C:-C),type:"blockSize"}),e.preventDefault();break;case"ArrowDown":this.updateSize({size:S.height+(a==="horizontal"&&s==="end"?-C:C),type:"blockSize"}),e.preventDefault();break;case"ArrowLeft":this.updateSize({size:S.width+(a==="vertical"&&s==="end"?C:-C)*$,type:"inlineSize"}),e.preventDefault();break;case"ArrowRight":this.updateSize({size:S.width+(a==="vertical"&&s==="end"?-C:C)*$,type:"inlineSize"}),e.preventDefault();break;case"Home":this.updateSize({size:a==="horizontal"?g:y,type:a==="horizontal"?"blockSize":"inlineSize"}),e.preventDefault();break;case"End":this.updateSize({size:a==="horizontal"?h:f,type:a==="horizontal"?"blockSize":"inlineSize"}),e.preventDefault();break}}updateSize({type:e,size:i}){const{contentRef:r,resizeValues:n}=this;if(!r.value)return;const s=e==="blockSize"?"minBlockSize":"minInlineSize",a=e==="blockSize"?"maxBlockSize":"maxInlineSize",o=n[s]&&n[a]?Cke(i,n[s],n[a]):i,l=Math.round(o);this.resizeValues={...n,[e]:l},r.value.style[e]=i!==null?`${l}px`:null}cleanupInteractions(){this.interaction?.unset()}async setupInteractions(){this.cleanupInteractions();const{el:e,contentRef:i,resizable:r,position:n,collapsed:s,resizeHandleEl:a,layout:o}=this;if(!i.value||s||!r||!a)return;await this.el.componentOnReady();const{inlineSize:l,minInlineSize:c,blockSize:h,minBlockSize:f,maxInlineSize:g,maxBlockSize:y}=window.getComputedStyle(i.value),b={inlineSize:cu(l),blockSize:cu(h),minInlineSize:cu(c),minBlockSize:cu(f),maxInlineSize:cu(g)||window.innerWidth,maxBlockSize:cu(y)||window.innerHeight};this.resizeValues=b;const _=jo(e)==="rtl";this.interaction=Zz(i.value,{context:e.ownerDocument}).resizable({edges:{top:n==="end"&&o==="horizontal"?a:!1,right:n===(_?"end":"start")&&o==="vertical"?a:!1,bottom:n==="start"&&o==="horizontal"?a:!1,left:n===(_?"start":"end")&&o==="vertical"?a:!1},modifiers:[Zz.modifiers.restrictSize({min:{width:b.minInlineSize,height:b.minBlockSize},max:{width:b.maxInlineSize,height:b.maxBlockSize}})],listeners:{resizestart:()=>{this.calciteInternalShellPanelResizeStart.emit()},resizeend:()=>{this.calciteInternalShellPanelResizeEnd.emit()},move:({rect:S})=>{const $=o==="horizontal";this.updateSize({size:$?S.height:S.width,type:$?"blockSize":"inlineSize"})}}})}setResizeHandleEl(e){this.resizeHandleEl=e,this.setupInteractions()}setActionBarsLayout(e){e.forEach(i=>i.layout=this.layout)}handleActionBarSlotChange(e){const i=Md(e).filter(r=>r?.matches("calcite-action-bar"));this.actionBars=i,this.setActionBarsLayout(i)}handleHeaderSlotChange(e){this.hasHeader=ni(e)}getResizeIcon(){const{layout:e}=this;return e==="horizontal"?xhe.dragVertical:xhe.dragHorizontal}renderHeader(){return xt("header",J`<div class=${q(id.contentHeader)} .hidden=${!this.hasHeader}><slot name=${_he.header} @slotchange=${this.handleHeaderSlotChange}></slot></div>`)}render(){const{collapsed:e,position:i,resizable:r,layout:n,displayMode:s,resizeValues:a}=this,o=jo(this.el),l=!e&&r?xt("resize-handle",J`<div .ariaLabel=${this.messages.resize} .ariaOrientation=${n==="horizontal"?"vertical":"horizontal"} .ariaValueMax=${n=="horizontal"?a.maxBlockSize:a.maxInlineSize} .ariaValueMin=${n=="horizontal"?a.minBlockSize:a.minInlineSize} .ariaValueNow=${n=="horizontal"?a.blockSize:a.inlineSize} class=${q(id.resizeHandle)} @keydown=${this.handleKeyDown} role=separator tabindex=0 touch-action=none ${zt(this.setResizeHandleEl)}><div class=${q(id.resizeHandleBar)}><calcite-icon .icon=${this.getResizeIcon()} scale=s></calcite-icon></div></div>`):null,c=()=>n==="horizontal"?i==="start"?Uh.calciteAnimateInDown:Uh.calciteAnimateInUp:o==="ltr"&&i==="end"||o==="rtl"&&i==="start"?Uh.calciteAnimateInLeft:Uh.calciteAnimateInRight,h=J`<div class=${q(id.contentContainer)}>${xt("content",J`<div class=${q({[Uh.rtl]:o==="rtl",[id.content]:!0,[id.contentOverlay]:s==="overlay",[id.floatContent]:s==="float-content"||s==="float",[Uh.calciteAnimate]:s==="overlay",[c()]:s==="overlay",[iM("width",this.width,this.widthScale)]:!!(this.width||this.widthScale),[iM("height",this.height,this.heightScale)]:!!(this.height||this.heightScale)})} .hidden=${e} ${zt(this.contentRef)}>${this.renderHeader()}<div class=${q(id.contentBody)}><slot></slot></div>${l}</div>`)}</div>`,g=[xt("action-bar-container",J`<div class=${q(id.actionBarContainer)}><slot name=${_he.actionBar} @slotchange=${this.handleActionBarSlotChange}></slot></div>`),h];return i==="end"&&g.reverse(),J`<div class=${q({[id.container]:!0,[id.floatAll]:s==="float-all"})}>${g}</div>`}};mF.properties={resizeValues:[16,{},{state:!0}],hasHeader:[16,{},{state:!0}],collapsed:[7,{},{reflect:!0,type:Boolean}],displayMode:[3,{},{reflect:!0}],heightScale:[3,{},{reflect:!0}],layout:[3,{},{reflect:!0}],messageOverrides:[0,{},{attribute:!1}],position:[3,{},{reflect:!0}],resizable:[7,{},{reflect:!0,type:Boolean}],height:[3,{},{reflect:!0}],widthScale:[3,{},{reflect:!0}],width:[3,{},{reflect:!0}]},mF.styles=VTt;let MW=mF;$i("calcite-shell-panel",MW);const kM={menuActions:"menu-actions",menuTooltip:"menu-tooltip"},BTt={menu:"ellipsis"},UTt={container:"container"};const HTt=St`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{box-sizing:border-box;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:host{display:flex;flex-direction:column;padding:0;background-color:transparent;border-color:var(--calcite-action-group-border-color, var(--calcite-color-border-3));border-style:solid;border-width:0}.container{display:flex;flex-grow:1;flex-direction:column}:host([columns="1"]){--calcite-internal-action-group-columns: 1}:host([columns="2"]){--calcite-internal-action-group-columns: 2}:host([columns="3"]){--calcite-internal-action-group-columns: 3}:host([columns="4"]){--calcite-internal-action-group-columns: 4}:host([columns="5"]){--calcite-internal-action-group-columns: 5}:host([columns="6"]){--calcite-internal-action-group-columns: 6}:host(:first-child){padding-block-start:0px}:host([layout=horizontal]),:host([layout=horizontal]) .container{flex-direction:row}:host([layout=grid]){display:grid}:host([layout=grid]) .container{display:grid;place-content:stretch;background-color:transparent;grid-template-columns:repeat(var(--calcite-action-group-columns, var(--calcite-internal-action-group-columns, 3)),auto);gap:var(--calcite-action-group-gap, 1px);padding:var(--calcite-action-group-gap, 1px)}:host([layout=horizontal]) ::slotted(calcite-action-group){border-inline-end:var(--calcite-size-px)}:host([hidden]){display:none}[hidden]{display:none}`,cI=class cI extends Et{constructor(){super(...arguments),this.messages=qn(),this.focusSetter=pn()(this),this.hasMenuActions=!1,this.expanded=!1,this.layout="vertical",this.menuOpen=!1,this.overlayPositioning="absolute",this.scale="m",this.calciteActionGroupCollapse=Re({cancelable:!1}),this.calciteActionGroupExpand=Re({cancelable:!1})}async setFocus(e){return this.focusSetter(()=>this.el,e)}willUpdate(e){e.has("expanded")&&((this.hasUpdated||this.expanded!==!1)&&(this.menuOpen=!1),this.hasUpdated&&(this.expanded?this.calciteActionGroupExpand.emit():this.calciteActionGroupCollapse.emit()))}setMenuOpen(e){this.menuOpen=!!e.currentTarget.open}handleMenuActionsSlotChange(e){this.hasMenuActions=ni(e)}renderMenu(){const{expanded:e,menuOpen:i,scale:r,layout:n,messages:s,overlayPositioning:a,hasMenuActions:o,menuFlipPlacements:l,menuPlacement:c}=this;return J`<calcite-action-menu .expanded=${e} .flipPlacements=${l??(n==="horizontal"?["top","bottom"]:["left","right"])} .hidden=${!o} .label=${s.more} @calciteActionMenuOpen=${this.setMenuOpen} .open=${i} .overlayPositioning=${a} .placement=${c??(n==="horizontal"?"bottom-start":"leading-start")} .scale=${r}><calcite-action .aria=${{expanded:e}} .icon=${BTt.menu} .scale=${r} slot=${pT.trigger} .text=${s.more} .textEnabled=${e}></calcite-action><slot name=${kM.menuActions} @slotchange=${this.handleMenuActionsSlotChange}></slot><slot name=${kM.menuTooltip} slot=${pT.tooltip}></slot></calcite-action-menu>`}render(){return J`<div .ariaLabel=${this.label} class=${q(UTt.container)} role=group><slot></slot>${this.renderMenu()}</div>`}};cI.properties={hasMenuActions:[16,{},{state:!0}],columns:[11,{},{type:Number,reflect:!0}],expanded:[7,{},{reflect:!0,type:Boolean}],label:1,layout:[3,{},{reflect:!0}],menuFlipPlacements:[0,{},{attribute:!1}],menuOpen:[7,{},{reflect:!0,type:Boolean}],menuPlacement:[3,{},{reflect:!0}],messageOverrides:[0,{},{attribute:!1}],overlayPositioning:[3,{},{reflect:!0}],scale:[3,{},{reflect:!0}]},cI.shadowRootOptions={mode:"open",delegatesFocus:!0},cI.styles=HTt;let F5=cI;$i("calcite-action-group",F5);const GTt=Object.freeze(Object.defineProperty({__proto__:null,ActionGroup:F5},Symbol.toStringTag,{value:"Module"}));const yK=t=>Array.from(t.querySelectorAll("calcite-action")).filter(e=>e.closest("calcite-action-menu")?e.slot===pT.trigger:!0),qTt=({actionGroups:t,expanded:e,overflowCount:i})=>{let r=i;t.reverse().forEach(n=>{let s=0;const a=yK(n).reverse();a.forEach(o=>{o.slot===kM.menuActions&&(o.removeAttribute("slot"),o.textEnabled=e)}),r>0&&a.some(o=>(a.filter(c=>!c.slot).length>1&&a.length>2&&!o.closest("calcite-action-menu")&&(o.textEnabled=!0,o.setAttribute("slot",kM.menuActions),s++,s>1&&r--),r<1)),n.manager.component.requestUpdate()})},She={chevronsLeft:"chevrons-left",chevronsRight:"chevrons-right"};function WTt(t,e){return t||e.closest("calcite-shell-panel")?.position||"start"}function YTt({el:t,expanded:e}){yK(t).filter(i=>i.slot!==kM.menuActions).forEach(i=>i.textEnabled=e),t.querySelectorAll("calcite-action-group, calcite-action-menu").forEach(i=>i.expanded=e)}const ZTt=({tooltip:t,referenceElement:e,expanded:i,ref:r})=>(t&&(t.referenceElement=!i&&e?e:null),r&&r(e),e),XTt=({expanded:t,expandText:e,collapseText:i,expandLabel:r,collapseLabel:n,toggle:s,el:a,position:o,tooltip:l,ref:c,scale:h})=>{const f=jo(a)==="rtl",g=t?i:e,y=t?n:r,b=[She.chevronsLeft,She.chevronsRight];f&&b.reverse();const _=WTt(o,a)==="end",S=_?b[1]:b[0],$=_?b[0]:b[1];return J`<calcite-action .aria=${{expanded:t}} .icon=${t?S:$} id=expand-toggle .label=${y} @click=${s} .scale=${h} .text=${g} .textEnabled=${t} title=${(!t&&!l?g:null)??Xe} ${zt(I=>ZTt({tooltip:l,referenceElement:I,expanded:t,ref:c}))}></calcite-action>`};const JTt=({bufferSize:t=0,containerSize:e,itemSizes:i})=>{const r=e-t;let n=i.length,s=0;for(const[a,o]of i.entries())if(s=s+o,s>r){n=a;break}else continue;return n},KTt=({bufferSize:t=0,containerSize:e,itemSizes:i})=>Math.max(i.length-JTt({bufferSize:t,itemSizes:i,containerSize:e}),0),$he={container:"container",actionGroupEnd:"action-group--end"},e8={actionsEnd:"actions-end",bottomActions:"bottom-actions",expandTooltip:"expand-tooltip"},QTt=St`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{box-sizing:border-box;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:host{display:inline-flex;align-self:stretch;background:transparent}.container{display:inline-flex;flex:1 1 auto;flex-direction:column;gap:var(--calcite-action-bar-items-space, 0);background-color:var(--calcite-action-bar-background-color, var(--calcite-color-foreground-1))}@keyframes in{0%{opacity:0}to{opacity:1}}:host([floating]) .container{animation:in var(--calcite-internal-animation-timing-slow) ease-in-out;overflow:hidden;border-radius:var(--calcite-action-bar-corner-radius, var(--calcite-corner-radius-round));--tw-shadow: 0 6px 20px -4px rgba(0, 0, 0, .1), 0 4px 12px -2px rgba(0, 0, 0, .08);--tw-shadow-colored: 0 6px 20px -4px var(--tw-shadow-color), 0 4px 12px -2px var(--tw-shadow-color);box-shadow:var(--calcite-action-bar-shadow, var(--tw-ring-offset-shadow, 0 0 rgba(0, 0, 0, 0)), var(--tw-ring-shadow, 0 0 rgba(0, 0, 0, 0)), var(--tw-shadow))}:host([layout=vertical]){flex-direction:column}:host([layout=vertical]):host([overflow-actions-disabled]) .container{overflow-y:auto}:host([layout=vertical]):host([expanded]) .container{max-inline-size:var(--calcite-action-bar-expanded-max-width, auto)}:host([layout=vertical]) .action-group--end{margin-block-start:auto}:host([layout=vertical]) ::slotted(calcite-action-group:not(:last-of-type)){border-block-end-width:var(--calcite-border-width-sm)}:host([layout=horizontal]){flex-direction:row}:host([layout=horizontal]) .container{flex-direction:row}:host([layout=horizontal]):host([overflow-actions-disabled]) .container{overflow-x:auto}:host([layout=horizontal]) .action-group--end{margin-inline-start:auto}:host([layout=horizontal]) ::slotted(calcite-action-group:not(:last-of-type)){border-inline-end-width:var(--calcite-border-width-sm)}.action-group--end{justify-content:flex-end}:host([hidden]){display:none}[hidden]{display:none}`,gF=class gF extends Et{constructor(){super(),this.mutationObserver=ea("mutation",()=>this.mutationObserverHandler()),this.cancelable=pj()(this),this.resize=xA(({width:e,height:i})=>{const{expanded:r,expandDisabled:n,layout:s,overflowActionsDisabled:a,actionGroups:o}=this;if(a||s==="vertical"&&!i||s==="horizontal"&&!e)return;const l=this.getItemSizes();this.updateGroups();const c=this.hasActionsEnd||this.hasBottomActions||!n?o.length+1:o.length,h=KTt({bufferSize:c,containerSize:s==="horizontal"?e:i,itemSizes:l});qTt({actionGroups:o,expanded:r,overflowCount:h})},HF.resize),this.resizeHandler=e=>{const{width:i,height:r}=e.contentRect;this.resize({width:i,height:r})},this.resizeObserver=ea("resize",e=>this.resizeHandlerEntries(e)),this.toggleExpand=()=>{this.expanded=!this.expanded,this.calciteActionBarToggle.emit()},this.messages=qn(),this.focusSetter=pn()(this),this.hasActionsEnd=!1,this.hasBottomActions=!1,this.floating=!1,this.expandDisabled=!1,this.expanded=!1,this.layout="vertical",this.overflowActionsDisabled=!1,this.overlayPositioning="absolute",this.scale="m",this.calciteActionBarCollapse=Re({cancelable:!1}),this.calciteActionBarExpand=Re({cancelable:!1}),this.calciteActionBarToggle=Re({cancelable:!1}),this.listen("calciteActionMenuOpen",this.actionMenuOpenHandler)}async overflowActions(){this.resize({width:this.el.clientWidth,height:this.el.clientHeight})}async setFocus(e){return this.focusSetter(()=>this.el,e)}connectedCallback(){super.connectedCallback(),this.updateGroups(),this.overflowActions(),this.mutationObserver?.observe(this.el,{childList:!0,subtree:!0}),this.overflowActionsDisabledHandler(this.overflowActionsDisabled),this.cancelable.add(this.resize)}willUpdate(e){e.has("expandDisabled")&&(this.hasUpdated||this.expandDisabled!==!1)&&this.overflowActions(),e.has("layout")&&(this.hasUpdated||this.layout!=="vertical")&&this.updateGroups(),e.has("overflowActionsDisabled")&&(this.hasUpdated||this.overflowActionsDisabled!==!1)&&this.overflowActionsDisabledHandler(this.overflowActionsDisabled),e.has("expanded")&&this.hasUpdated&&(this.expandedHandler(),this.expanded?this.calciteActionBarExpand.emit():this.calciteActionBarCollapse.emit())}loaded(){this.overflowActions()}disconnectedCallback(){super.disconnectedCallback(),this.mutationObserver?.disconnect(),this.resizeObserver?.disconnect()}getItemSizes(){const{el:e,layout:i,expandToggleEl:r}=this,n=yK(e);r&&n.push(r);const s=i==="horizontal"?"clientWidth":"clientHeight",a=Math.max(...n.map(o=>o[s]||0));return n.map(o=>o[s]||a)}expandedHandler(){const{el:e,expanded:i}=this;YTt({el:e,expanded:i}),this.overflowActions()}overflowActionsDisabledHandler(e){if(e){this.resizeObserver?.disconnect();return}this.resizeObserver?.observe(this.el),this.overflowActions()}actionMenuOpenHandler(e){if(e.target.menuOpen){const i=e.composedPath();this.actionGroups?.forEach(r=>{i.includes(r)||(r.menuOpen=!1)})}}mutationObserverHandler(){this.updateGroups(),this.overflowActions()}resizeHandlerEntries(e){e.forEach(this.resizeHandler)}updateGroups(){const e=Array.from(this.el.querySelectorAll("calcite-action-group"));this.actionGroups=e,e.forEach(i=>{i.layout=this.layout,i.scale=this.scale})}handleDefaultSlotChange(){this.updateGroups()}handleActionsEndSlotChange(e){this.hasActionsEnd=ni(e)}handleBottomActionsSlotChange(e){this.hasBottomActions=ni(e)}handleTooltipSlotChange(e){const i=Md(e).filter(r=>r?.matches("calcite-tooltip"));this.expandTooltip=i[0]}renderBottomActionGroup(){const{expanded:e,expandDisabled:i,el:r,position:n,toggleExpand:s,scale:a,layout:o,messages:l,actionsEndGroupLabel:c,overlayPositioning:h}=this,f=i?null:XTt({collapseLabel:l.collapseLabel,collapseText:l.collapse,el:r,expandLabel:l.expandLabel,expandText:l.expand,expanded:e,position:n,ref:g=>this.expandToggleEl=g,scale:a,toggle:s,tooltip:this.expandTooltip});return J`<calcite-action-group class=${q($he.actionGroupEnd)} .hidden=${this.expandDisabled&&!(this.hasActionsEnd||this.hasBottomActions)} .label=${c} .layout=${o} .overlayPositioning=${h} .scale=${a}><slot name=${e8.actionsEnd} @slotchange=${this.handleActionsEndSlotChange}></slot><slot name=${e8.bottomActions} @slotchange=${this.handleBottomActionsSlotChange}></slot><slot name=${e8.expandTooltip} @slotchange=${this.handleTooltipSlotChange}></slot>${f}</calcite-action-group>`}render(){return J`<div class=${q($he.container)}><slot @slotchange=${this.handleDefaultSlotChange}></slot>${this.renderBottomActionGroup()}</div>`}};gF.properties={expandTooltip:[16,{},{state:!0}],hasActionsEnd:[16,{},{state:!0}],hasBottomActions:[16,{},{state:!0}],actionsEndGroupLabel:1,floating:[7,{},{reflect:!0,type:Boolean}],expandDisabled:[7,{},{reflect:!0,type:Boolean}],expanded:[7,{},{reflect:!0,type:Boolean}],layout:[3,{},{reflect:!0}],messageOverrides:[0,{},{attribute:!1}],overflowActionsDisabled:[7,{},{reflect:!0,type:Boolean}],overlayPositioning:[3,{},{reflect:!0}],position:[3,{},{reflect:!0}],scale:[3,{},{reflect:!0}]},gF.styles=QTt;let N5=gF;$i("calcite-action-bar",N5);const RFt=Object.freeze(Object.defineProperty({__proto__:null,ActionBar:N5},Symbol.toStringTag,{value:"Module"}));const The={container:"container",radio:"radio"},ekt=St`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:block;cursor:pointer}:host .container{position:relative;outline:2px solid transparent;outline-offset:2px;display:flex}:host .radio{cursor:pointer;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;outline-color:transparent;border-radius:var(--calcite-radio-button-corner-radius, var(--calcite-corner-radius-pill));background-color:var(--calcite-radio-button-background-color, var(--calcite-color-foreground-1));box-shadow:inset 0 0 0 var(--calcite-border-width-sm) var(--calcite-radio-button-border-color, var(--calcite-color-border-input))}:host([hovered]) .radio,:host(:not([checked])[focused]:not([disabled])) .radio{box-shadow:inset 0 0 0 var(--calcite-border-width-md) var(--calcite-radio-button-border-color, var(--calcite-color-brand-hover))}:host([hovered]) .radio:active,:host(:not([checked])[focused]:not([disabled])) .radio:active{box-shadow:inset 0 0 0 var(--calcite-border-width-md) var(--calcite-color-brand-press)}:host([focused]) .radio{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(var(--calcite-spacing-base) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}:host([disabled]) .radio{cursor:default;opacity:var(--calcite-opacity-disabled)}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}:host([hovered][disabled]) .radio{box-shadow:inset 0 0 0 var(--calcite-border-width-sm) var(--calcite-radio-button-border-color, var(--calcite-color-border-input))}:host([scale=s]){--calcite-internal-radio-size: var( --calcite-radio-button-size, var(--calcite-radio-size, var(--calcite-size-fixed-md)) )}:host([scale=m]){--calcite-internal-radio-size: var( --calcite-radio-button-size, var(--calcite-radio-size, var(--calcite-size-fixed-md-plus)) )}:host([scale=l]){--calcite-internal-radio-size: var( --calcite-radio-button-size, var(--calcite-radio-size, var(--calcite-size-fixed-lg)) )}.radio{block-size:var(--calcite-internal-radio-size);inline-size:var(--calcite-internal-radio-size);size:var(--calcite-internal-radio-size)}:host([scale=s][checked]) .radio,:host([hovered][scale=s][checked][disabled]) .radio{box-shadow:inset 0 0 0 var(--calcite-border-width-lg) var(--calcite-radio-button-border-color, var(--calcite-color-brand))}:host([scale=s][focused][checked]:not([disabled])) .radio{box-shadow:inset 0 0 0 var(--calcite-border-width-lg) var(--calcite-radio-button-border-color, var(--calcite-color-brand)),0 0 0 2px var(--calcite-radio-button-background-color, var(--calcite-color-foreground-1))}:host([scale=m][checked]) .radio,:host([hovered][scale=m][checked][disabled]) .radio{box-shadow:inset 0 0 0 5px var(--calcite-radio-button-border-color, var(--calcite-color-brand))}:host([scale=m][focused][checked]:not([disabled])) .radio{box-shadow:inset 0 0 0 5px var(--calcite-radio-button-border-color, var(--calcite-color-brand)),0 0 0 2px var(--calcite-radio-button-background-color, var(--calcite-color-foreground-1))}:host([scale=l][checked]) .radio,:host([hovered][scale=l][checked][disabled]) .radio{box-shadow:inset 0 0 0 6px var(--calcite-radio-button-border-color, var(--calcite-color-brand))}:host([scale=l][focused][checked]:not([disabled])) .radio{box-shadow:inset 0 0 0 6px var(--calcite-radio-button-border-color, var(--calcite-color-brand)),0 0 0 2px var(--calcite-radio-button-background-color, var(--calcite-color-foreground-1))}@media (forced-colors: active){:host([checked]) .radio:after,:host([checked][disabled]) .radio:after{content:"";inline-size:var(--calcite-internal-radio-size);block-size:var(--calcite-internal-radio-size);background-color:CanvasText;display:block}}.internal-label-alignment--center{align-items:center}.internal-label-alignment--end{align-items:end}.internal-label--container{display:flex;justify-content:space-between;color:var(--calcite-color-text-1)}.internal-label-required--indicator{font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-status-danger);padding-inline:var(--calcite-spacing-base)}.internal-label-required--indicator:hover{cursor:help}.internal-label--text{line-height:1}:host([scale=s]) .internal-label-spacing--bottom{margin-block-end:var(--calcite-spacing-xxs)}:host([scale=s]) .internal-label-spacing-inline--end{margin-inline-end:var(--calcite-spacing-sm)}:host([scale=s]) .internal-label-spacing-inline--start{margin-inline-start:var(--calcite-spacing-sm)}:host([scale=s]) .internal-label--text{font-size:var(--calcite-font-size--2)}:host([scale=m]) .internal-label-spacing--bottom{margin-block-end:var(--calcite-spacing-sm)}:host([scale=m]) .internal-label-spacing-inline--end{margin-inline-end:var(--calcite-spacing-sm)}:host([scale=m]) .internal-label-spacing-inline--start{margin-inline-start:var(--calcite-spacing-sm)}:host([scale=m]) .internal-label--text{font-size:var(--calcite-font-size--1)}:host([scale=l]) .internal-label-spacing--bottom{margin-block-end:var(--calcite-spacing-sm)}:host([scale=l]) .internal-label-spacing-inline--end{margin-inline-end:var(--calcite-spacing-md)}:host([scale=l]) .internal-label-spacing-inline--start{margin-inline-start:var(--calcite-spacing-md)}:host([scale=l]) .internal-label--text{font-size:var(--calcite-font-size-0)}::slotted(input[slot=hidden-form-input]){margin:0!important;opacity:0!important;outline:none!important;padding:0!important;position:absolute!important;inset:0!important;transform:none!important;-webkit-appearance:none!important;z-index:-1!important}:host([hidden]){display:none}[hidden]{display:none}`,yF=class yF extends Et{constructor(){super(),this.containerRef=wr(),this.focusSetter=pn()(this),this.checked=!1,this.disabled=!1,this.focused=!1,this.hovered=!1,this.required=!1,this.scale="m",this.calciteInternalRadioButtonBlur=Re({cancelable:!1}),this.calciteInternalRadioButtonCheckedChange=Re({cancelable:!1}),this.calciteInternalRadioButtonFocus=Re({cancelable:!1}),this.calciteRadioButtonChange=Re({cancelable:!1}),this.listen("pointerenter",this.pointerEnterHandler),this.listen("pointerleave",this.pointerLeaveHandler),this.listen("click",this.clickHandler),this.listen("keydown",this.handleKeyDown)}async emitCheckedChange(){this.calciteInternalRadioButtonCheckedChange.emit()}async setFocus(e){return this.focusSetter(()=>this.containerRef.value,e)}connectedCallback(){this.rootNode=this.el.getRootNode(),this.name&&this.checkLastRadioButton(),ZT(this),WX(this),this.updateTabIndexOfOtherRadioButtonsInGroup(),super.connectedCallback()}willUpdate(e){this.hasUpdated&&e.has("checked")&&this.checkedChanged(this.checked),e.has("disabled")&&(this.hasUpdated||this.disabled!==!1)&&this.updateTabIndexOfOtherRadioButtonsInGroup(),e.has("name")&&this.checkLastRadioButton()}updated(){ta(this)}loaded(){this.focused&&!this.disabled&&this.setFocus()}disconnectedCallback(){super.disconnectedCallback(),XN(this),ZX(this),this.updateTabIndexOfOtherRadioButtonsInGroup()}checkedChanged(e){e&&this.uncheckOtherRadioButtonsInGroup(),this.calciteInternalRadioButtonCheckedChange.emit()}syncHiddenFormInput(e){e.type="radio"}selectItem(e,i){e[i].click()}queryButtons(){return Array.from(this.rootNode.querySelectorAll("calcite-radio-button:not([hidden])")).filter(e=>e.name===this.name)}isFocusable(){const e=this.queryButtons(),i=e.find(n=>!n.disabled),r=e.find(n=>n.checked);return i===this.el&&!r}check(){this.disabled||(this.focused=!0,this.setFocus(),!this.checked&&(this.uncheckAllRadioButtonsInGroup(),this.checked=!0,this.calciteRadioButtonChange.emit()))}clickHandler(){this.disabled||this.check()}onLabelClick(e){if(this.disabled||this.el.hidden)return;const i=e.currentTarget,r=i.for?this.rootNode.querySelector(`calcite-radio-button[id="${i.for}"]`):i.querySelector(`calcite-radio-button[name="${this.name}"]`);r&&(r.focused=!0,this.setFocus(),!r.checked&&(this.uncheckOtherRadioButtonsInGroup(),r.checked=!0,this.calciteRadioButtonChange.emit()))}checkLastRadioButton(){const i=this.queryButtons().filter(r=>r.checked);if(i?.length>1){const r=i[i.length-1];i.filter(n=>n!==r).forEach(n=>{n.checked=!1,n.emitCheckedChange()})}}uncheckAllRadioButtonsInGroup(){this.queryButtons().forEach(i=>{i.checked&&(i.checked=!1,i.focused=!1)})}uncheckOtherRadioButtonsInGroup(){this.queryButtons().filter(r=>r!==this.el).forEach(r=>{r.checked&&(r.checked=!1,r.focused=!1)})}updateTabIndexOfOtherRadioButtonsInGroup(){this.queryButtons().filter(r=>r!==this.el&&!r.disabled).forEach(r=>{r.manager?.component.requestUpdate()})}getTabIndex(){if(!this.disabled)return this.checked||this.isFocusable()?0:-1}pointerEnterHandler(){this.disabled||(this.hovered=!0)}pointerLeaveHandler(){this.disabled||(this.hovered=!1)}handleKeyDown(e){const i=["ArrowLeft","ArrowUp","ArrowRight","ArrowDown"," "],{key:r}=e,{el:n}=this;if(i.indexOf(r)===-1)return;if(r===" "){this.check(),e.preventDefault();return}let s=r;jo(n)==="rtl"&&(r==="ArrowRight"&&(s="ArrowLeft"),r==="ArrowLeft"&&(s="ArrowRight"));const a=Array.from(this.rootNode.querySelectorAll("calcite-radio-button:not([hidden])")).filter(l=>l.name===this.name);let o=0;switch(a.some((l,c)=>{if(l.checked)return o=c,!0}),s){case"ArrowLeft":case"ArrowUp":e.preventDefault(),this.selectItem(a,this.getNextNonDisabledIndex(a,o,"left"));return;case"ArrowRight":case"ArrowDown":e.preventDefault(),this.selectItem(a,this.getNextNonDisabledIndex(a,o,"right"));return;default:return}}getNextNonDisabledIndex(e,i,r){const n=e.length,s=r==="left"?-1:1;let a=nT(i+s,n);for(;e[a].disabled;)a=nT(a+s,n);return a}onContainerBlur(){this.focused=!1,this.calciteInternalRadioButtonBlur.emit()}onContainerFocus(){this.disabled||(this.focused=!0,this.calciteInternalRadioButtonFocus.emit())}render(){const e=this.getTabIndex();return ia({disabled:this.disabled,children:J`<div .ariaChecked=${this.checked} .ariaLabel=${qI(this)} class=${q(The.container)} @blur=${this.onContainerBlur} @focus=${this.onContainerFocus} role=radio tabindex=${e??Xe} ${zt(this.containerRef)}><div class=${q(The.radio)}></div>${this.labelText&&hj({labelText:this.labelText,spacingInlineStart:!0})||""}</div>${XX({component:this})}`})}};yF.properties={checked:[7,{},{reflect:!0,type:Boolean}],disabled:[7,{},{reflect:!0,type:Boolean}],focused:[7,{},{reflect:!0,type:Boolean}],form:[3,{},{reflect:!0}],hovered:[7,{},{reflect:!0,type:Boolean}],label:1,labelText:1,name:[3,{},{reflect:!0}],required:[7,{},{reflect:!0,type:Boolean}],scale:[3,{},{reflect:!0}],value:1},yF.styles=ekt;let AW=yF;$i("calcite-radio-button",AW);const tkt={itemWrapper:"item-wrapper"},khe={validationMessage:"radioButtonGroupValidationMessage"},ikt=St`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{display:flex;flex-direction:column}:host>.item-wrapper{display:flex;max-inline-size:100vw}:host([layout=horizontal])>.item-wrapper{flex-direction:row;flex-wrap:wrap}:host([layout=horizontal][scale=s])>.item-wrapper{column-gap:var(--calcite-radio-button-group-gap, var(--calcite-spacing-lg))}:host([layout=horizontal][scale=m])>.item-wrapper{column-gap:var(--calcite-radio-button-group-gap, var(--calcite-spacing-xl))}:host([layout=horizontal][scale=l])>.item-wrapper{column-gap:var(--calcite-radio-button-group-gap, var(--calcite-spacing-xxl))}:host([layout=vertical])>.item-wrapper{flex-direction:column;inline-size:fit-content}:host([scale=s]) calcite-input-message{--calcite-input-message-spacing: var( --calcite-radio-button-input-message-spacing, calc(var(--calcite-spacing-xxs) * -1) )}:host([scale=m]) calcite-input-message{--calcite-input-message-spacing: var( --calcite-radio-button-input-message-spacing, calc(var(--calcite-spacing-sm) * -1) )}:host([scale=l]) calcite-input-message{--calcite-input-message-spacing: var( --calcite-radio-button-input-message-spacing, calc(var(--calcite-spacing-md) * -1) )}.internal-label-alignment--center{align-items:center}.internal-label-alignment--end{align-items:end}.internal-label--container{display:flex;justify-content:space-between;color:var(--calcite-color-text-1)}.internal-label-required--indicator{font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-status-danger);padding-inline:var(--calcite-spacing-base)}.internal-label-required--indicator:hover{cursor:help}.internal-label--text{line-height:1}:host([scale=s]) .internal-label-spacing--bottom{margin-block-end:var(--calcite-spacing-xxs)}:host([scale=s]) .internal-label-spacing-inline--end{margin-inline-end:var(--calcite-spacing-sm)}:host([scale=s]) .internal-label-spacing-inline--start{margin-inline-start:var(--calcite-spacing-sm)}:host([scale=s]) .internal-label--text{font-size:var(--calcite-font-size--2)}:host([scale=m]) .internal-label-spacing--bottom{margin-block-end:var(--calcite-spacing-sm)}:host([scale=m]) .internal-label-spacing-inline--end{margin-inline-end:var(--calcite-spacing-sm)}:host([scale=m]) .internal-label-spacing-inline--start{margin-inline-start:var(--calcite-spacing-sm)}:host([scale=m]) .internal-label--text{font-size:var(--calcite-font-size--1)}:host([scale=l]) .internal-label-spacing--bottom{margin-block-end:var(--calcite-spacing-sm)}:host([scale=l]) .internal-label-spacing-inline--end{margin-inline-end:var(--calcite-spacing-md)}:host([scale=l]) .internal-label-spacing-inline--start{margin-inline-start:var(--calcite-spacing-md)}:host([scale=l]) .internal-label--text{font-size:var(--calcite-font-size-0)}.validation-container{display:flex;flex-direction:column;align-items:flex-start;align-self:stretch}:host([scale=m]) .validation-container,:host([scale=l]) .validation-container{padding-block-start:.5rem}:host([scale=s]) .validation-container{padding-block-start:.25rem}:host([hidden]){display:none}[hidden]{display:none}`,vF=class vF extends Et{constructor(){super(),this.messages=qn(),this.mutationObserver=ea("mutation",()=>this.passPropsToRadioButtons()),this.focusSetter=pn()(this),this.radioButtons=[],this.disabled=!1,this.layout="horizontal",this.required=!1,this.scale="m",this.selectedItem=null,this.status="idle",this.calciteRadioButtonGroupChange=Re({cancelable:!1}),this.listen("calciteRadioButtonChange",this.radioButtonChangeHandler)}async setFocus(e){return this.focusSetter(()=>this.selectedItem&&!this.selectedItem.disabled?this.selectedItem:this.getFocusableRadioButton(),e)}connectedCallback(){super.connectedCallback(),this.passPropsToRadioButtons(),this.mutationObserver?.observe(this.el,{childList:!0,subtree:!0})}willUpdate(e){(e.has("disabled")&&(this.hasUpdated||this.disabled!==!1)||e.has("layout")&&(this.hasUpdated||this.layout!=="horizontal")||e.has("scale")&&(this.hasUpdated||this.scale!=="m"))&&this.passPropsToRadioButtons()}loaded(){this.passPropsToRadioButtons(),this.layout==="grid"&&xI.warn('The "grid" value of the layout property is deprecated and will be removed in v4.0. Use "horizontal" instead.')}disconnectedCallback(){super.disconnectedCallback(),this.mutationObserver?.disconnect()}passPropsToRadioButtons(){this.radioButtons=Array.from(this.el.querySelectorAll("calcite-radio-button")),this.selectedItem=Array.from(this.radioButtons).reverse().find(e=>e.checked)||null,this.radioButtons.length>0&&this.radioButtons.forEach(e=>{this.hasUpdated&&(e.disabled=this.disabled||e.disabled),e.name=this.name,e.required=this.required,e.scale=this.scale})}getFocusableRadioButton(){return this.radioButtons.find(e=>!e.disabled)??null}radioButtonChangeHandler(e){this.selectedItem=e.target,this.calciteRadioButtonGroupChange.emit()}render(){return this.el.role="radiogroup",J`${this.labelText&&hj({labelText:this.labelText,required:this.required,tooltipText:this.messages.required})||""}<div aria-errormessage=${khe.validationMessage} .ariaInvalid=${this.status==="invalid"} .ariaRequired=${this.required} class=${q(tkt.itemWrapper)}><slot></slot></div>${this.validationMessage&&this.status==="invalid"?NJ({icon:this.validationIcon,id:khe.validationMessage,message:this.validationMessage,scale:this.scale,status:this.status}):null}`}};vF.properties={radioButtons:[16,{},{state:!0}],disabled:[7,{},{reflect:!0,type:Boolean}],labelText:1,layout:[3,{},{reflect:!0}],messageOverrides:[0,{},{attribute:!1}],name:[3,{},{reflect:!0}],required:[7,{},{reflect:!0,type:Boolean}],scale:[3,{},{reflect:!0}],selectedItem:[0,{},{attribute:!1}],status:[3,{},{reflect:!0}],validationIcon:[3,{converter:Np},{reflect:!0}],validationMessage:1},vF.styles=ikt;let PW=vF;$i("calcite-radio-button-group",PW);const rkt={container:"container"},nkt=St`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:flex}:host([alignment=start]){text-align:start}:host([alignment=end]){text-align:end}:host([alignment=center]){text-align:center}:host([scale=s]) .container{gap:.25rem;font-size:var(--calcite-font-size--2);line-height:1rem;margin-block-end:var(--calcite-label-margin-bottom, .5rem)}:host([scale=m]) .container{gap:.5rem;font-size:var(--calcite-font-size--1);line-height:1rem;margin-block-end:var(--calcite-label-margin-bottom, .75rem)}:host([scale=l]) .container{gap:.5rem;font-size:var(--calcite-font-size-0);line-height:1.25rem;margin-block-end:var(--calcite-label-margin-bottom, 1rem)}:host .container{margin-inline:0px;margin-block-start:0px;inline-size:100%;line-height:1.375;color:var(--calcite-color-text-1);color:var(--calcite-label-text-color, var(--calcite-color-text-1))}:host([layout=block]) .container,:host([layout=default]) .container{display:flex;flex-direction:column}:host([layout=inline]) .container,:host([layout=inline-space-between]) .container{display:flex;flex-direction:row;align-items:center;gap:.5rem}:host([layout=inline][scale=l]) .container{gap:.75rem}:host([layout=inline-space-between]) .container{justify-content:space-between}:host([disabled])>.container{opacity:var(--calcite-opacity-disabled)}:host([disabled]) ::slotted(*[disabled]),:host([disabled]) ::slotted(*[disabled] *){--tw-bg-opacity: 1}:host([disabled]) ::slotted(calcite-input-message:not([active])){--tw-bg-opacity: 0}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}:host([hidden]){display:none}[hidden]{display:none}`,bF=class bF extends Et{constructor(){super(),this.alignment="start",this.layout="default",this.scale="m",this.calciteInternalLabelClick=Re({bubbles:!1,cancelable:!1}),this.listen("click",this.labelClickHandler)}connectedCallback(){super.connectedCallback(),document.dispatchEvent(new CustomEvent(ZN))}willUpdate(e){e.has("for")&&cst(this.el)}disconnectedCallback(){super.disconnectedCallback(),document.dispatchEvent(new CustomEvent(Mz))}labelClickHandler(e){window.getSelection()?.type!=="Range"&&this.calciteInternalLabelClick.emit({sourceEvent:e})}render(){return J`<div class=${q(rkt.container)}><slot></slot></div>`}};bF.properties={alignment:[3,{},{reflect:!0}],for:[3,{},{reflect:!0}],layout:[3,{},{reflect:!0}],scale:[3,{},{reflect:!0}]},bF.styles=nkt;let j5=bF;$i("calcite-label",j5);const skt=Object.freeze(Object.defineProperty({__proto__:null,Label:j5},Symbol.toStringTag,{value:"Module"}));function akt(){const[t,e]=je.useState(null),[i,r]=je.useState(null);return document.querySelector("arcgis-map"),je.useEffect(()=>{if(t){const n=document.querySelector(`[data-panel-id=${t}]`);n.hidden=!0}if(i!==t){const n=document.querySelector(`[data-panel-id=${i}]`);n.hidden=!1}}),ht.jsx(ht.Fragment,{children:ht.jsxs(Qpt,{width:"1",slot:"panel-start",position:"start",id:"left-shell-panel",displayMode:"dock",children:[ht.jsxs(Jpt,{slot:"action-bar",style:{borderStyle:"solid",borderRightWidth:3.5,borderLeftWidth:5,borderBottomWidth:5,borderColor:"#555555"},children:[ht.jsx(lU,{"data-action-id":"layers",icon:"layers",text:"layers",id:"layers",onClick:n=>{r(n.target.id),e(i===t?null:i)}}),ht.jsx(lU,{"data-action-id":"basemaps",icon:"basemap",text:"basemaps",id:"basemaps",onClick:n=>{r(n.target.id),e(i===t?null:i)}}),ht.jsx(lU,{"data-action-id":"information",icon:"information",text:"Information",id:"information",onClick:n=>{r(n.target.id),e(i===t?null:i)}})]}),ht.jsx(TL,{heading:"Layers",height:"l",width:"l","data-panel-id":"layers",style:{width:"18vw"},hidden:!0,children:ht.jsx("arcgis-layer-list",{referenceElement:"arcgis-map",selectionMode:"multiple",visibilityAppearance:"checkbox","show-filter":!0,"filter-placeholder":"Filter layers",listItemCreatedFunction:uwt})}),ht.jsx(TL,{heading:"Basemaps",height:"l","data-panel-id":"basemaps",style:{width:"18vw"},hidden:!0,children:ht.jsx("arcgis-basemap-gallery",{referenceElement:"arcgis-map"})}),ht.jsx(TL,{class:"timeSeries-panel","height-scale":"l","data-panel-id":"charts",hidden:!0}),ht.jsx(TL,{heading:"Description","data-panel-id":"information",hidden:!0,children:i==="information"?ht.jsxs("div",{style:{paddingLeft:"20px"},children:["This smart map shows the progress on land acquisition for high-level operations onyly.",ht.jsx("div",{style:{paddingLeft:"20px"},children:ht.jsxs("li",{children:["The source of data: ",ht.jsx("b",{children:"Master List tables"})," provided by the RAP Team."]})})]}):ht.jsx("div",{className:"informationDiv",hidden:!0})})]})})}function okt(){const[t,e]=je.useState(!1);je.useEffect(()=>{const f=new v8({appId:"dBUHc4nvxTSveUM1",popup:!1,portalUrl:"https://gis.railway-sector.com/portal"});yC.registerOAuthInfos([f]);async function g(){try{await yC.checkSignInStatus(f.portalUrl+"/sharing");const y=new Ue({url:f.portalUrl,authMode:"no-prompt"});y.load().then(()=>{e(!0),console.log("Logged in as: ",y.user.username)})}catch(y){console.error("Authentication error:",y),yC.getCredential(f.portalUrl)}}g()},[]);const[i,r]=je.useState(),[n,s]=je.useState(),[a,o]=je.useState(),l=f=>{r(f)},c=f=>{s(f)},h=f=>{o(f)};return ht.jsx(ht.Fragment,{children:t===!0?ht.jsx("div",{children:ht.jsx(Kpt,{style:{scrollbarWidth:"thin",scrollbarColor:"#888 #555"},children:ht.jsxs(gK,{value:{contractp:i,landtype:n,landsection:a,updateContractcps:l,updateLandtype:c,updateLandsection:h},children:[ht.jsx(akt,{}),ht.jsx(Uwt,{}),ht.jsx(jTt,{}),ht.jsx(RTt,{})]})})}):ht.jsx("div",{})})}BIe.createRoot(document.getElementById("root")).render(ht.jsx(je.StrictMode,{children:ht.jsx(okt,{})}));const zFt=Object.freeze(Object.defineProperty({__proto__:null,PieChartAm5:$M,PieSeriesAm5:TM},Symbol.toStringTag,{value:"Module"}));export{yG as $,mXe as A,pXe as B,bS as C,xm as D,mX as E,at as F,N1e as G,KS as H,rn as I,LIt as J,MLt as K,Et as L,Ue as M,EFt as N,TIt as O,fN as P,e8e as Q,M2t as R,Ul as S,$Pe as T,t8e as U,_e as V,ze as W,nt as X,fs as Y,mD as Z,fe as _,mmt as a,HW as a$,Toe as a0,koe as a1,d as a2,m as a3,FSe as a4,U as a5,TT as a6,Wt as a7,qe as a8,cA as a9,Xe as aA,ia as aB,Vd as aC,zue as aD,RJ as aE,dj as aF,zJ as aG,Dm as aH,FT as aI,hT as aJ,nyt as aK,KF as aL,EEt as aM,Ve as aN,Cs as aO,eie as aP,ss as aQ,LVe as aR,$e as aS,Si as aT,RW as aU,sr as aV,pv as aW,q$ as aX,CI as aY,Rr as aZ,Ma as a_,iX as aa,rX as ab,Nt as ac,rc as ad,Ole as ae,Xrt as af,iL as ag,Cot as ah,Fi as ai,qst as aj,WI as ak,Ye as al,P$e as am,WC as an,c$e as ao,JRt as ap,JT as aq,uCt as ar,V5t as as,B5t as at,Wst as au,fut as av,m7e as aw,XFe as ax,ta as ay,jo as az,qn as b,tCt as b$,Qs as b0,Hi as b1,$T as b2,ho as b3,jae as b4,Ib as b5,Mb as b6,Dhe as b7,zhe as b8,Fhe as b9,VCt as bA,BCt as bB,jp as bC,xn as bD,br as bE,Whe as bF,o5e as bG,aEt as bH,Wge as bI,No as bJ,pI as bK,TO as bL,yZ as bM,n_e as bN,tn as bO,U0 as bP,V4e as bQ,dCt as bR,k6 as bS,cN as bT,fZ as bU,mZ as bV,_ve as bW,wve as bX,E4e as bY,bm as bZ,S9 as b_,ve as ba,wkt as bb,mkt as bc,aut as bd,Rkt as be,YOt as bf,sLt as bg,UI as bh,Mo as bi,bOt as bj,OYe as bk,Gdt as bl,ETe as bm,EI as bn,Uz as bo,jn as bp,ka as bq,BS as br,gMt as bs,Cse as bt,YMt as bu,ive as bv,MM as bw,y_ as bx,Dn as by,UCt as bz,ea as c,zUe as c$,Ro as c0,gZ as c1,cx as c2,pTe as c3,u_ as c4,r2t as c5,Z_e as c6,NBe as c7,LT as c8,e2t as c9,z2t as cA,Y3t as cB,_t as cC,Nqe as cD,gt as cE,xet as cF,HN as cG,g6e as cH,Su as cI,M3 as cJ,yEt as cK,E2t as cL,Hr as cM,Vp as cN,vQe as cO,bQe as cP,wQe as cQ,de as cR,ks as cS,$t as cT,Nv as cU,FVe as cV,UT as cW,RVe as cX,SUe as cY,Zbe as cZ,WZ as c_,D0 as ca,Bw as cb,rfe as cc,Yrt as cd,ll as ce,pu as cf,Wrt as cg,wu as ch,un as ci,ALt as cj,SFt as ck,wF as cl,jte as cm,Z2e as cn,Fv as co,ST as cp,det as cq,MJe as cr,a3t as cs,Gt as ct,nr as cu,_R as cv,yi as cw,GW as cx,Bn as cy,fl as cz,pn as d,R0e as d$,o3t as d0,We as d1,pGe as d2,yBe as d3,mBe as d4,Uw as d5,G3t as d6,KIt as d7,Ev as d8,eit as d9,D7e as dA,k3e as dB,pt as dC,BT as dD,Qa as dE,R7e as dF,dn as dG,bC as dH,ux as dI,Ke as dJ,Vze as dK,wl as dL,go as dM,jT as dN,Rt as dO,T3e as dP,vu as dQ,MZ as dR,p9e as dS,Qlt as dT,N3e as dU,F3e as dV,Sv as dW,y9e as dX,d9e as dY,Dv as dZ,dzt as d_,Vo as da,yit as db,z_e as dc,Tqe as dd,Wqe as de,EH as df,dit as dg,SSe as dh,oit as di,$Se as dj,xSe as dk,vit as dl,hit as dm,Ktt as dn,tit as dp,x_ as dq,aN as dr,dqe as ds,_p as dt,jVe as du,VVe as dv,BVe as dw,Jye as dx,xUe as dy,zqe as dz,wr as e,Phe as e$,o2 as e0,Xm as e1,Ws as e2,mt as e3,Ttt as e4,Om as e5,$tt as e6,lje as e7,z5e as e8,N5e as e9,$n as eA,kl as eB,Kge as eC,b3 as eD,c5e as eE,It as eF,e1e as eG,OH as eH,ZYe as eI,Hit as eJ,Bp as eK,oi as eL,uC as eM,tA as eN,E7 as eO,bCt as eP,MMt as eQ,XMt as eR,$p as eS,ebe as eT,Di as eU,hu as eV,Ta as eW,Gn as eX,upe as eY,i8 as eZ,wYe as e_,F5e as ea,j5e as eb,mEt as ec,gEt as ed,s9 as ee,LC as ef,pYe as eg,UPt as eh,di as ei,GPt as ej,GT as ek,sg as el,jM as em,Rv as en,K0 as eo,Ir as ep,mFt as eq,Oa as er,Hwe as es,YIt as et,bN as eu,O8e as ev,as as ew,LW as ex,jEt as ey,ax as ez,Re as f,DJe as f$,K1e as f0,LSe as f1,Br as f2,Kf as f3,M9 as f4,cZ as f5,lt as f6,Vkt as f7,JM as f8,Pa as f9,WPe as fA,T2t as fB,yd as fC,W2e as fD,D6 as fE,wtt as fF,xl as fG,Okt as fH,i2t as fI,d_ as fJ,zMt as fK,KMt as fL,Yxe as fM,CXe as fN,DSe as fO,Qne as fP,TFt as fQ,$Ft as fR,mT as fS,r0t as fT,a0t as fU,XJ as fV,N9 as fW,PZ as fX,q2e as fY,s0t as fZ,tI as f_,_v as fa,jkt as fb,_Et as fc,TZ as fd,ou as fe,jv as ff,M_e as fg,I_e as fh,ukt as fi,dkt as fj,XM as fk,PI as fl,R_e as fm,O_e as fn,pqe as fo,D_e as fp,tZ as fq,iZ as fr,x5e as fs,S5e as ft,YF as fu,ZF as fv,Nrt as fw,JDt as fx,pW as fy,bBe as fz,cu as g,ZIe as g$,ASe as g0,PSe as g1,uA as g2,aKe as g3,LJe as g4,PKe as g5,LKe as g6,Aqe as g7,vqe as g8,bqe as g9,prt as gA,Qc as gB,tzt as gC,i3t as gD,zR as gE,nye as gF,KM as gG,Crt as gH,CR as gI,li as gJ,hpe as gK,oo as gL,XF as gM,iye as gN,JZ as gO,zp as gP,FZ as gQ,n9e as gR,eMt as gS,bc as gT,O0e as gU,wN as gV,QIt as gW,rs as gX,Vw as gY,C2t as gZ,Ii as g_,Bqe as ga,Eo as gb,urt as gc,RKe as gd,OKe as ge,en as gf,Vn as gg,Gr as gh,Ka as gi,Zi as gj,Wm as gk,xu as gl,vIt as gm,UBe as gn,uI as go,Am as gp,Hw as gq,_l as gr,wfe as gs,WMt as gt,gje as gu,w5e as gv,j5t as gw,z9 as gx,PDt as gy,ADt as gz,q as h,FIt as h$,hkt as h0,Kpe as h1,Js as h2,oY as h3,aVe as h4,JIt as h5,OEt as h6,jhe as h7,Nhe as h8,Vbe as h9,uc as hA,pM as hB,wv as hC,Vm as hD,pMe as hE,SI as hF,cve as hG,Tn as hH,no as hI,Xi as hJ,_Ct as hK,W$ as hL,fne as hM,cCt as hN,vCt as hO,rN as hP,Dje as hQ,BHe as hR,dbe as hS,nX as hT,oKe as hU,Rqe as hV,b0e as hW,oDt as hX,zIt as hY,QM as hZ,Is as h_,W8e as ha,VT as hb,oje as hc,Eqe as hd,y8e as he,kc as hf,Eit as hg,Bv as hh,fUe as hi,hqe as hj,L_e as hk,Vqe as hl,zEt as hm,_F as hn,xF as ho,uEt as hp,cEt as hq,Cz as hr,H3t as hs,S2t as ht,jPe as hu,woe as hv,oK as hw,mY as hx,PFt as hy,_r as hz,Zz as i,rg as i$,cDt as i0,TD as i1,RIt as i2,dDt as i3,Wp as i4,Ym as i5,NIt as i6,Nm as i7,EC as i8,ppe as i9,v9 as iA,gD as iB,Ci as iC,wT as iD,zm as iE,Ps as iF,Bst as iG,tv as iH,c3t as iI,bEt as iJ,C5e as iK,B5e as iL,dye as iM,Jrt as iN,Po as iO,_6e as iP,WIe as iQ,bet as iR,YPe as iS,dY as iT,wet as iU,Cit as iV,k_ as iW,GVe as iX,hUe as iY,HVe as iZ,vN as i_,HMe as ia,XRt as ib,r8 as ic,dGe as id,Ur as ie,pOt as ig,_3 as ih,L9 as ii,vS as ij,JF as ik,wCt as il,v_ as im,yzt as io,fJ as ip,nut as iq,GMt as ir,OMt as is,WEt as it,t8 as iu,L6 as iv,n3t as iw,dje as ix,c_ as iy,zz as iz,J as j,$9 as j$,vbe as j0,Uve as j1,Lo as j2,OPe as j3,Rp as j4,_c as j5,c4e as j6,NEt as j7,Kje as j8,Pqe as j9,jve as jA,Vr as jB,Lje as jC,Kne as jD,jvt as jE,ezt as jF,IZ as jG,$I as jH,B$ as jI,hDt as jJ,zkt as jK,QMe as jL,VYe as jM,VOt as jN,Q_e as jO,WOt as jP,gz as jQ,GOt as jR,FC as jS,qOt as jT,fY as jU,hd as jV,tD as jW,zOt as jX,GAt as jY,mve as jZ,TI as j_,Jre as ja,n9 as jb,KY as jc,QY as jd,hn as je,FEt as jf,oUe as jg,Ybe as jh,W9e as ji,Sqe as jj,Xbe as jk,v5e as jl,cbe as jm,fkt as jn,n3 as jo,Tkt as jp,Oqe as jq,xqe as jr,fit as js,pwe as jt,AMt as ju,zZ as jv,NR as jw,$Mt as jx,SMt as jy,Y9e as jz,iM as k,At as k$,e_ as k0,t4e as k1,vve as k2,Dy as k3,IT as k4,NI as k5,EJe as k6,Ca as k7,v2t as k8,oXe as k9,Yqe as kA,o4e as kB,b5e as kC,obe as kD,zVe as kE,yqe as kF,A_e as kG,qEt as kH,eCt as kI,Yi as kJ,mne as kK,dMe as kL,hbe as kM,_s as kN,I2t as kO,Qme as kP,cPe as kQ,kMt as kR,TMt as kS,Ja as kT,sN as kU,nN as kV,w9 as kW,Ec as kX,u_t as kY,kt as kZ,wj as k_,Nw as ka,R0 as kb,ofe as kc,uje as kd,p6e as ke,e4e as kf,VS as kg,gve as kh,Fn as ki,ckt as kj,p_e as kk,hZ as kl,H as km,V5e as kn,k5e as ko,Cp as kp,tGe as kq,eX as kr,U4e as ks,$Ct as kt,aR as ku,qN as kv,x4e as kw,NVe as kx,gqe as ky,qqe as kz,xt as l,Irt as l$,tt as l0,FTt as l1,P5 as l2,fu as l3,hM as l4,b4e as l5,E3t as l6,rIt as l7,KCt as l8,Nvt as l9,$v as lA,Xft as lB,bd as lC,Tet as lD,i4e as lE,Qte as lF,eOt as lG,sZ as lH,cFe as lI,s$e as lJ,UB as lK,rje as lL,FW as lM,Ikt as lN,NW as lO,Mkt as lP,eA as lQ,GZ as lR,Gw as lS,EF as lT,rrt as lU,vKe as lV,Kit as lW,SKe as lX,mrt as lY,fse as lZ,$0e as l_,wh as la,Ekt as lb,Ckt as lc,kkt as ld,ng as le,kPe as lf,hN as lg,aOt as lh,sOt as li,nOt as lj,rOt as lk,lOt as ll,oOt as lm,iOt as ln,tOt as lo,AJ as lp,Yz as lq,zv as lr,Aft as ls,md as lt,Nft as lu,jft as lv,g_ as lw,NS as lx,tmt as ly,Zft as lz,St as m,wc as m$,vet as m0,NKe as m1,FN as m2,Cle as m3,vr as m4,xG as m5,zN as m6,Nit as m7,fA as m8,AKe as m9,zxe as mA,zGe as mB,FGe as mC,E1e as mD,nce as mE,P_e as mF,CIt as mG,jHe as mH,ROt as mI,aFe as mJ,pFe as mK,BM as mL,$Et as mM,A0 as mN,_Ae as mO,ld as mP,Uet as mQ,_Ke as mR,WQe as mS,Rxe as mT,ret as mU,vR as mV,Xpe as mW,xi as mX,ET as mY,Kn as mZ,Ni as m_,Nh as ma,_rt as mb,ZPe as mc,lzt as md,IF as me,lMe as mf,YZ as mg,PMt as mh,IMt as mi,Sne as mj,Rh as mk,HI as ml,AX as mm,FKe as mn,zKe as mo,DKe as mp,aA as mq,jS as mr,NHe as ms,QPe as mt,ZOt as mu,qMe as mv,n2t as mw,W3t as mx,q3t as my,Nxe as mz,zt as n,x5t as n$,ZRt as n0,YRt as n1,So as n2,net as n3,cet as n4,Txe as n5,BN as n6,wz as n7,MKe as n8,Mr as n9,Fp as nA,K2t as nB,tie as nC,KRt as nD,Uy as nE,SIt as nF,T3 as nG,Nve as nH,iCt as nI,CCt as nJ,ICt as nK,MCt as nL,mCt as nM,pCt as nN,lCt as nO,Zje as nP,hCt as nQ,T4e as nR,K3e as nS,SCt as nT,ECt as nU,xAt as nV,X0 as nW,Nae as nX,G4e as nY,Bve as nZ,_5t as n_,fet as na,GQe as nb,qQe as nc,ZQe as nd,XQe as ne,oet as nf,JQe as ng,KQe as nh,QQe as ni,eet as nj,tet as nk,iet as nl,Gs as nm,lEt as nn,Mm as no,O6e as np,WW as nq,u2t as nr,c2t as ns,tDe as nt,sAe as nu,nAe as nv,JEt as nw,ZEt as nx,QIe as ny,aLt as nz,$i as o,ZW as o$,mz as o0,w5t as o1,tve as o2,R5t as o3,AYe as o4,fOt as o5,mOt as o6,MYe as o7,D5t as o8,du as o9,kCt as oA,iB as oB,OM as oC,A2t as oD,Z3t as oE,sKe as oF,_z as oG,mje as oH,oN as oI,HEt as oJ,UEt as oK,lve as oL,ave as oM,Cje as oN,Mje as oO,cue as oP,co as oQ,Bft as oR,wke as oS,lwe as oT,owe as oU,TN as oV,Pft as oW,lue as oX,Fh as oY,ILt as oZ,Uxe as o_,I3t as oa,M3t as ob,C3t as oc,$J as od,hTe as oe,Km as of,Qm as og,_u as oh,xv as oi,Ji as oj,kdt as ok,fv as ol,oZe as om,fFt as on,cZe as oo,uZe as op,Mhe as oq,Fq as or,Tlt as os,fce as ot,Iv as ou,lHe as ov,L0e as ow,D0e as ox,N5t as oy,Dve as oz,zLt as p,EMt as p$,Bd as p0,yx as p1,mo as p2,Ts as p3,UDt as p4,Xx as p5,ert as p6,ec as p7,izt as p8,P5t as p9,mv as pA,OI as pB,hrt as pC,Rhe as pD,lY as pE,x2t as pF,Qpe as pG,rye as pH,fie as pI,ufe as pJ,LZe as pK,rDt as pL,p_ as pM,Hh as pN,ftt as pO,VEt as pP,yve as pQ,DEt as pR,CZ as pS,mZe as pT,lfe as pU,$2t as pV,B9 as pW,RM as pX,qF as pY,E9e as pZ,CMt as p_,LGe as pa,hOt as pb,R3t as pc,Pkt as pd,G9e as pe,aUe as pf,lUe as pg,mUe as ph,Oo as pi,lm as pj,Hy as pk,ys as pl,v7e as pm,Q2 as pn,UGe as po,JPt as pp,WE as pq,Od as pr,$C as ps,aet as pt,VIt as pu,get as pv,U3t as pw,fbe as px,B3t as py,UC as pz,f_ as q,pDt as q$,sY as q0,$Ue as q1,_Ue as q2,$qe as q3,wUe as q4,abe as q5,K9e as q6,Tbe as q7,x9 as q8,VRt as q9,T5t as qA,S5t as qB,Ao as qC,Oct as qD,E5t as qE,C5t as qF,cut as qG,_zt as qH,r4e as qI,jRt as qJ,E_ as qK,Hat as qL,y2 as qM,kIt as qN,L5t as qO,O5t as qP,A5t as qQ,M5t as qR,TYe as qS,C_ as qT,RZ as qU,Ett as qV,jIt as qW,Zet as qX,Ltt as qY,vDt as qZ,AOt as q_,kAt as qa,TAt as qb,VHe as qc,szt as qd,oEt as qe,CX as qf,JKe as qg,LZ as qh,k1 as qi,eMe as qj,RR as qk,NOt as ql,OZe as qm,jOt as qn,FOt as qo,J_e as qp,Qdt as qq,u5t as qr,pX as qs,I5t as qt,DQe as qu,P3t as qv,$5t as qw,xJ as qx,wL as qy,UTe as qz,Tge as r,g$e as r$,Gce as r0,Pdt as r1,hut as r2,uN as r3,Ice as r4,SOt as r5,k5t as r6,dle as r7,X_e as r8,y3t as r9,h_e as rA,Odt as rB,a5t as rC,TDt as rD,zYe as rE,RYe as rF,W_e as rG,RTe as rH,f5t as rI,m5t as rJ,Y_e as rK,IN as rL,Bm as rM,Ep as rN,so as rO,pZ as rP,rve as rQ,WM as rR,m2t as rS,gJ as rT,oA as rU,Mv as rV,Bze as rW,h$e as rX,aat as rY,d$e as rZ,m$e as r_,K6e as ra,dwe as rb,v3t as rc,lc as rd,fm as re,Z$ as rf,nKe as rg,bKe as rh,wKe as ri,xKe as rj,qit as rk,irt as rl,cAt as rm,uAt as rn,dAt as ro,YJ as rp,fzt as rq,mzt as rr,B0 as rs,rv as rt,pzt as ru,kY as rv,t2t as rw,hzt as rx,uzt as ry,Skt as rz,ee as s,IFt as s$,y$e as s0,p$e as s1,dat as s2,y0 as s3,Y8 as s4,sl as s5,GIe as s6,YT as s7,Jr as s8,WKe as s9,Ne as sA,Ywt as sB,OFt as sC,_i as sD,rw as sE,Nn as sF,Ade as sG,UL as sH,o_ as sI,yj as sJ,BU as sK,Fo as sL,CFt as sM,Ms as sN,vl as sO,V_t as sP,iK as sQ,fM as sR,gl as sS,p_t as sT,$a as sU,AFt as sV,dM as sW,$u as sX,A5 as sY,Yy as sZ,yc as s_,qKe as sa,Ei as sb,Fy as sc,fot as sd,dQe as se,mot as sf,xxe as sg,xd as sh,kd as si,hm as sj,B1t as sk,uy as sl,Lt as sm,bi as sn,ai as so,t_t as sp,Zwt as sq,DFt as sr,MFt as ss,Ks as st,vM as su,wEe as sv,Lv as sw,Im as sx,Ia as sy,Lr as sz,__ as t,Wh as t$,SAt as t0,gB as t1,wIt as t2,JR as t3,po as t4,jqe as t5,zje as t6,FR as t7,vEt as t8,JN as t9,AN as tA,oqe as tB,s2t as tC,d_e as tD,f_e as tE,vGe as tF,WAt as tG,EGe as tH,YAt as tI,QBe as tJ,xIt as tK,wEt as tL,Pm as tM,Io as tN,$It as tO,Fkt as tP,mYe as tQ,H4e as tR,_kt as tS,vkt as tT,Hhe as tU,fEt as tV,pEt as tW,IIt as tX,Zhe as tY,sHe as tZ,HHe as t_,_je as ta,bIt as tb,Ys as tc,bl as td,qs as te,Iit as tf,n7e as tg,c7e as th,JMt as ti,Mit as tj,rut as tk,eAe as tl,Bkt as tm,mTe as tn,Vv as to,pye as tp,FHe as tq,Fje as tr,Nje as ts,$3 as tt,TCt as tu,wpe as tv,Tje as tw,kje as tx,KZe as ty,Os as tz,Rke as u,Ztt as u$,o1e as u0,Akt as u1,EOt as u2,COt as u3,IOt as u4,MOt as u5,gOt as u6,vOt as u7,ije as u8,zI as u9,qIt as uA,HIt as uB,WIt as uC,GIt as uD,ZIt as uE,fo as uF,rLt as uG,N3t as uH,Ute as uI,BIt as uJ,Z5e as uK,Y5e as uL,xEt as uM,TAe as uN,kDt as uO,EDt as uP,wDt as uQ,Wtt as uR,Un as uS,$$e as uT,yDt as uU,uSe as uV,GN as uW,$Dt as uX,o5t as uY,xDt as uZ,Ht as u_,yOt as ua,lZe as ub,h5e as uc,L2t as ud,$At as ue,tAe as uf,hEt as ug,dEt as uh,R5e as ui,e5e as uj,JCt as uk,RN as ul,dce as um,MDt as un,XPt as uo,Iq as up,p5t as uq,c0 as ur,eRt as us,fKe as ut,Z9 as uu,f8e as uv,F3t as uw,L9e as ux,XIt as uy,UIt as uz,Z0t as v,Q5t as v$,Htt as v0,_Dt as v1,GTe as v2,Tz as v3,BC as v4,$z as v5,pSe as v6,hSe as v7,mut as v8,Vtt as v9,cOt as vA,LOt as vB,DOt as vC,IYe as vD,FYe as vE,PYe as vF,b1e as vG,z$ as vH,kOt as vI,bYe as vJ,k2t as vK,n4e as vL,vce as vM,dct as vN,f9e as vO,X2t as vP,J2t as vQ,xN as vR,x9e as vS,Vge as vT,LI as vU,RI as vV,tT as vW,g9e as vX,Lkt as vY,pxe as vZ,iFt as v_,jtt as va,QG as vb,xOt as vc,Utt as vd,pA as ve,DYe as vf,l5t as vg,qtt as vh,c5t as vi,_Ot as vj,d5t as vk,bDt as vl,Zdt as vm,Ydt as vn,OTe as vo,WYe as vp,Mht as vq,wOt as vr,KPt as vs,QPt as vt,gut as vu,iut as vv,$Ot as vw,TOt as vx,POt as vy,OOt as vz,kFt as w,qAt as w$,eFt as w0,x1e as w1,bde as w2,tFt as w3,Mft as w4,YVe as w5,Uje as w6,QEt as w7,MAt as w8,MUe as w9,a1e as wA,dOt as wB,uOt as wC,iZe as wD,eU as wE,Ndt as wF,ZPt as wG,rMe as wH,Gqe as wI,bkt as wJ,UMt as wK,HMt as wL,l4e as wM,jUe as wN,NUe as wO,tbe as wP,kSe as wQ,v8e as wR,dUe as wS,cUe as wT,uUe as wU,kUe as wV,FUe as wW,_Se as wX,QCt as wY,RHe as wZ,yUe as w_,ove as wa,ibe as wb,ype as wc,zC as wd,p2t as we,IUe as wf,DCt as wg,Itt as wh,KEt as wi,Aa as wj,wVe as wk,Fae as wl,ozt as wm,azt as wn,Plt as wo,UOt as wp,HOt as wq,LEt as wr,BOt as ws,nzt as wt,nLt as wu,tLt as wv,iLt as ww,eLt as wx,QOt as wy,sZe as wz,os as x,X9e as x$,HAt as x0,sDt as x1,Jje as x2,rCt as x3,aCt as x4,gCt as x5,nCt as x6,oCt as x7,yCt as x8,k4e as x9,iT as xA,q6e as xB,HGe as xC,S_e as xD,f2t as xE,HO as xF,Bne as xG,OIt as xH,mMt as xI,vd as xJ,A3t as xK,Sa as xL,Q$e as xM,czt as xN,KG as xO,gFt as xP,FAt as xQ,JIe as xR,ykt as xS,gkt as xT,S4e as xU,NMt as xV,rUe as xW,iot as xX,gDt as xY,r$e as xZ,xS as x_,cR as xa,aDt as xb,lDt as xc,kit as xd,y6e as xe,xCt as xf,j4e as xg,iA as xh,rA as xi,nA as xj,l3t as xk,SHe as xl,zAt as xm,uQe as xn,ZMt as xo,RMt as xp,jMt as xq,FMt as xr,Dkt as xs,sAt as xt,nAt as xu,$kt as xv,I6e as xw,LMt as xx,YEt as xy,qMt as xz,Mt as y,EIt as y0,bMt as y1,Ixe as y2,j$e as y3,V$e as y4,jQe as y5,DMt as y6,REt as y7,Pje as y8,Z9e as y9,$_ as yA,z3t as yB,Frt as yC,RRt as yD,mA as yE,FRt as yF,NRt as yG,U5t as yH,Zht as yI,G5t as yJ,zke as yK,cFt as yL,uFt as yM,dFt as yN,hFt as yO,Fyt as yP,S2e as yQ,pFt as yR,kvt as yS,HJ as yT,J0t as yU,GTt as yV,RFt as yW,zFt as yX,kzt as ya,gY as yb,URt as yc,Ome as yd,iIt as ye,HRt as yf,GRt as yg,VMt as yh,tIt as yi,eIt as yj,XEt as yk,SZ as yl,Nkt as ym,BMt as yn,pUe as yo,qRt as yp,BRt as yq,q9e as yr,KN as ys,WRt as yt,TUe as yu,Aye as yv,CEt as yw,HCt as yx,qCt as yy,oLt as yz,gXe as z};
